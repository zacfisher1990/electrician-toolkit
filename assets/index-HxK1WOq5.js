var ST=Object.defineProperty;var _T=(r,e,t)=>e in r?ST(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Hr=(r,e,t)=>_T(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var sL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yb(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var fg={exports:{}},Bh={},pg={exports:{}},fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy;function TT(){if(dy)return fr;dy=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.iterator;function _(Z){return Z===null||typeof Z!="object"?null:(Z=b&&Z[b]||Z["@@iterator"],typeof Z=="function"?Z:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,E={};function L(Z,W,J){this.props=Z,this.context=W,this.refs=E,this.updater=J||v}L.prototype.isReactComponent={},L.prototype.setState=function(Z,W){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,W,"setState")},L.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function k(){}k.prototype=L.prototype;function O(Z,W,J){this.props=Z,this.context=W,this.refs=E,this.updater=J||v}var $=O.prototype=new k;$.constructor=O,N($,L.prototype),$.isPureReactComponent=!0;var F=Array.isArray,oe=Object.prototype.hasOwnProperty,ce={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function C(Z,W,J){var ie,he={},ge=null,_e=null;if(W!=null)for(ie in W.ref!==void 0&&(_e=W.ref),W.key!==void 0&&(ge=""+W.key),W)oe.call(W,ie)&&!D.hasOwnProperty(ie)&&(he[ie]=W[ie]);var fe=arguments.length-2;if(fe===1)he.children=J;else if(1<fe){for(var ve=Array(fe),Ne=0;Ne<fe;Ne++)ve[Ne]=arguments[Ne+2];he.children=ve}if(Z&&Z.defaultProps)for(ie in fe=Z.defaultProps,fe)he[ie]===void 0&&(he[ie]=fe[ie]);return{$$typeof:r,type:Z,key:ge,ref:_e,props:he,_owner:ce.current}}function S(Z,W){return{$$typeof:r,type:Z.type,key:W,ref:Z.ref,props:Z.props,_owner:Z._owner}}function V(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===r}function I(Z){var W={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(J){return W[J]})}var w=/\/+/g;function B(Z,W){return typeof Z=="object"&&Z!==null&&Z.key!=null?I(""+Z.key):W.toString(36)}function M(Z,W,J,ie,he){var ge=typeof Z;(ge==="undefined"||ge==="boolean")&&(Z=null);var _e=!1;if(Z===null)_e=!0;else switch(ge){case"string":case"number":_e=!0;break;case"object":switch(Z.$$typeof){case r:case e:_e=!0}}if(_e)return _e=Z,he=he(_e),Z=ie===""?"."+B(_e,0):ie,F(he)?(J="",Z!=null&&(J=Z.replace(w,"$&/")+"/"),M(he,W,J,"",function(Ne){return Ne})):he!=null&&(V(he)&&(he=S(he,J+(!he.key||_e&&_e.key===he.key?"":(""+he.key).replace(w,"$&/")+"/")+Z)),W.push(he)),1;if(_e=0,ie=ie===""?".":ie+":",F(Z))for(var fe=0;fe<Z.length;fe++){ge=Z[fe];var ve=ie+B(ge,fe);_e+=M(ge,W,J,ve,he)}else if(ve=_(Z),typeof ve=="function")for(Z=ve.call(Z),fe=0;!(ge=Z.next()).done;)ge=ge.value,ve=ie+B(ge,fe++),_e+=M(ge,W,J,ve,he);else if(ge==="object")throw W=String(Z),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return _e}function q(Z,W,J){if(Z==null)return Z;var ie=[],he=0;return M(Z,ie,"","",function(ge){return W.call(J,ge,he++)}),ie}function se(Z){if(Z._status===-1){var W=Z._result;W=W(),W.then(function(J){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=J)},function(J){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=J)}),Z._status===-1&&(Z._status=0,Z._result=W)}if(Z._status===1)return Z._result.default;throw Z._result}var te={current:null},re={transition:null},xe={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:re,ReactCurrentOwner:ce};function be(){throw Error("act(...) is not supported in production builds of React.")}return fr.Children={map:q,forEach:function(Z,W,J){q(Z,function(){W.apply(this,arguments)},J)},count:function(Z){var W=0;return q(Z,function(){W++}),W},toArray:function(Z){return q(Z,function(W){return W})||[]},only:function(Z){if(!V(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},fr.Component=L,fr.Fragment=t,fr.Profiler=i,fr.PureComponent=O,fr.StrictMode=n,fr.Suspense=h,fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xe,fr.act=be,fr.cloneElement=function(Z,W,J){if(Z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Z+".");var ie=N({},Z.props),he=Z.key,ge=Z.ref,_e=Z._owner;if(W!=null){if(W.ref!==void 0&&(ge=W.ref,_e=ce.current),W.key!==void 0&&(he=""+W.key),Z.type&&Z.type.defaultProps)var fe=Z.type.defaultProps;for(ve in W)oe.call(W,ve)&&!D.hasOwnProperty(ve)&&(ie[ve]=W[ve]===void 0&&fe!==void 0?fe[ve]:W[ve])}var ve=arguments.length-2;if(ve===1)ie.children=J;else if(1<ve){fe=Array(ve);for(var Ne=0;Ne<ve;Ne++)fe[Ne]=arguments[Ne+2];ie.children=fe}return{$$typeof:r,type:Z.type,key:he,ref:ge,props:ie,_owner:_e}},fr.createContext=function(Z){return Z={$$typeof:l,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Z.Provider={$$typeof:s,_context:Z},Z.Consumer=Z},fr.createElement=C,fr.createFactory=function(Z){var W=C.bind(null,Z);return W.type=Z,W},fr.createRef=function(){return{current:null}},fr.forwardRef=function(Z){return{$$typeof:u,render:Z}},fr.isValidElement=V,fr.lazy=function(Z){return{$$typeof:g,_payload:{_status:-1,_result:Z},_init:se}},fr.memo=function(Z,W){return{$$typeof:d,type:Z,compare:W===void 0?null:W}},fr.startTransition=function(Z){var W=re.transition;re.transition={};try{Z()}finally{re.transition=W}},fr.unstable_act=be,fr.useCallback=function(Z,W){return te.current.useCallback(Z,W)},fr.useContext=function(Z){return te.current.useContext(Z)},fr.useDebugValue=function(){},fr.useDeferredValue=function(Z){return te.current.useDeferredValue(Z)},fr.useEffect=function(Z,W){return te.current.useEffect(Z,W)},fr.useId=function(){return te.current.useId()},fr.useImperativeHandle=function(Z,W,J){return te.current.useImperativeHandle(Z,W,J)},fr.useInsertionEffect=function(Z,W){return te.current.useInsertionEffect(Z,W)},fr.useLayoutEffect=function(Z,W){return te.current.useLayoutEffect(Z,W)},fr.useMemo=function(Z,W){return te.current.useMemo(Z,W)},fr.useReducer=function(Z,W,J){return te.current.useReducer(Z,W,J)},fr.useRef=function(Z){return te.current.useRef(Z)},fr.useState=function(Z){return te.current.useState(Z)},fr.useSyncExternalStore=function(Z,W,J){return te.current.useSyncExternalStore(Z,W,J)},fr.useTransition=function(){return te.current.useTransition()},fr.version="18.3.1",fr}var hy;function X1(){return hy||(hy=1,pg.exports=TT()),pg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fy;function AT(){if(fy)return Bh;fy=1;var r=X1(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,d){var g,b={},_=null,v=null;d!==void 0&&(_=""+d),h.key!==void 0&&(_=""+h.key),h.ref!==void 0&&(v=h.ref);for(g in h)n.call(h,g)&&!s.hasOwnProperty(g)&&(b[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps,h)b[g]===void 0&&(b[g]=h[g]);return{$$typeof:e,type:u,key:_,ref:v,props:b,_owner:i.current}}return Bh.Fragment=t,Bh.jsx=l,Bh.jsxs=l,Bh}var py;function CT(){return py||(py=1,fg.exports=AT()),fg.exports}var o=CT(),pe=X1();const kT=Yb(pe);var Ep={},mg={exports:{}},Ko={},gg={exports:{}},yg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function IT(){return my||(my=1,(function(r){function e(re,xe){var be=re.length;re.push(xe);e:for(;0<be;){var Z=be-1>>>1,W=re[Z];if(0<i(W,xe))re[Z]=xe,re[be]=W,be=Z;else break e}}function t(re){return re.length===0?null:re[0]}function n(re){if(re.length===0)return null;var xe=re[0],be=re.pop();if(be!==xe){re[0]=be;e:for(var Z=0,W=re.length,J=W>>>1;Z<J;){var ie=2*(Z+1)-1,he=re[ie],ge=ie+1,_e=re[ge];if(0>i(he,be))ge<W&&0>i(_e,he)?(re[Z]=_e,re[ge]=be,Z=ge):(re[Z]=he,re[ie]=be,Z=ie);else if(ge<W&&0>i(_e,be))re[Z]=_e,re[ge]=be,Z=ge;else break e}}return xe}function i(re,xe){var be=re.sortIndex-xe.sortIndex;return be!==0?be:re.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();r.unstable_now=function(){return l.now()-u}}var h=[],d=[],g=1,b=null,_=3,v=!1,N=!1,E=!1,L=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(re){for(var xe=t(d);xe!==null;){if(xe.callback===null)n(d);else if(xe.startTime<=re)n(d),xe.sortIndex=xe.expirationTime,e(h,xe);else break;xe=t(d)}}function F(re){if(E=!1,$(re),!N)if(t(h)!==null)N=!0,se(oe);else{var xe=t(d);xe!==null&&te(F,xe.startTime-re)}}function oe(re,xe){N=!1,E&&(E=!1,k(C),C=-1),v=!0;var be=_;try{for($(xe),b=t(h);b!==null&&(!(b.expirationTime>xe)||re&&!I());){var Z=b.callback;if(typeof Z=="function"){b.callback=null,_=b.priorityLevel;var W=Z(b.expirationTime<=xe);xe=r.unstable_now(),typeof W=="function"?b.callback=W:b===t(h)&&n(h),$(xe)}else n(h);b=t(h)}if(b!==null)var J=!0;else{var ie=t(d);ie!==null&&te(F,ie.startTime-xe),J=!1}return J}finally{b=null,_=be,v=!1}}var ce=!1,D=null,C=-1,S=5,V=-1;function I(){return!(r.unstable_now()-V<S)}function w(){if(D!==null){var re=r.unstable_now();V=re;var xe=!0;try{xe=D(!0,re)}finally{xe?B():(ce=!1,D=null)}}else ce=!1}var B;if(typeof O=="function")B=function(){O(w)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,q=M.port2;M.port1.onmessage=w,B=function(){q.postMessage(null)}}else B=function(){L(w,0)};function se(re){D=re,ce||(ce=!0,B())}function te(re,xe){C=L(function(){re(r.unstable_now())},xe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){N||v||(N=!0,se(oe))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return _},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(re){switch(_){case 1:case 2:case 3:var xe=3;break;default:xe=_}var be=_;_=xe;try{return re()}finally{_=be}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,xe){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var be=_;_=re;try{return xe()}finally{_=be}},r.unstable_scheduleCallback=function(re,xe,be){var Z=r.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Z+be:Z):be=Z,re){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=be+W,re={id:g++,callback:xe,priorityLevel:re,startTime:be,expirationTime:W,sortIndex:-1},be>Z?(re.sortIndex=be,e(d,re),t(h)===null&&re===t(d)&&(E?(k(C),C=-1):E=!0,te(F,be-Z))):(re.sortIndex=W,e(h,re),N||v||(N=!0,se(oe))),re},r.unstable_shouldYield=I,r.unstable_wrapCallback=function(re){var xe=_;return function(){var be=_;_=xe;try{return re.apply(this,arguments)}finally{_=be}}}})(yg)),yg}var gy;function ET(){return gy||(gy=1,gg.exports=IT()),gg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy;function jT(){if(yy)return Ko;yy=1;var r=X1(),e=ET();function t(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,f=1;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(a,c){l(a,c),l(a+"Capture",c)}function l(a,c){for(i[a]=c,a=0;a<c.length;a++)n.add(c[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},b={};function _(a){return h.call(b,a)?!0:h.call(g,a)?!1:d.test(a)?b[a]=!0:(g[a]=!0,!1)}function v(a,c,f,y){if(f!==null&&f.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return y?!1:f!==null?!f.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function N(a,c,f,y){if(c===null||typeof c>"u"||v(a,c,f,y))return!0;if(y)return!1;if(f!==null)switch(f.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function E(a,c,f,y,A,P,K){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=y,this.attributeNamespace=A,this.mustUseProperty=f,this.propertyName=a,this.type=c,this.sanitizeURL=P,this.removeEmptyString=K}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){L[a]=new E(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];L[c]=new E(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){L[a]=new E(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){L[a]=new E(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){L[a]=new E(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){L[a]=new E(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){L[a]=new E(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){L[a]=new E(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){L[a]=new E(a,5,!1,a.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function O(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(k,O);L[c]=new E(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(k,O);L[c]=new E(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(k,O);L[c]=new E(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){L[a]=new E(a,1,!1,a.toLowerCase(),null,!1,!1)}),L.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){L[a]=new E(a,1,!1,a.toLowerCase(),null,!0,!0)});function $(a,c,f,y){var A=L.hasOwnProperty(c)?L[c]:null;(A!==null?A.type!==0:y||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(N(c,f,A,y)&&(f=null),y||A===null?_(c)&&(f===null?a.removeAttribute(c):a.setAttribute(c,""+f)):A.mustUseProperty?a[A.propertyName]=f===null?A.type===3?!1:"":f:(c=A.attributeName,y=A.attributeNamespace,f===null?a.removeAttribute(c):(A=A.type,f=A===3||A===4&&f===!0?"":""+f,y?a.setAttributeNS(y,c,f):a.setAttribute(c,f))))}var F=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oe=Symbol.for("react.element"),ce=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),I=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),re=Symbol.iterator;function xe(a){return a===null||typeof a!="object"?null:(a=re&&a[re]||a["@@iterator"],typeof a=="function"?a:null)}var be=Object.assign,Z;function W(a){if(Z===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);Z=c&&c[1]||""}return`
`+Z+a}var J=!1;function ie(a,c){if(!a||J)return"";J=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(Fe){var y=Fe}Reflect.construct(a,[],c)}else{try{c.call()}catch(Fe){y=Fe}a.call(c.prototype)}else{try{throw Error()}catch(Fe){y=Fe}a()}}catch(Fe){if(Fe&&y&&typeof Fe.stack=="string"){for(var A=Fe.stack.split(`
`),P=y.stack.split(`
`),K=A.length-1,me=P.length-1;1<=K&&0<=me&&A[K]!==P[me];)me--;for(;1<=K&&0<=me;K--,me--)if(A[K]!==P[me]){if(K!==1||me!==1)do if(K--,me--,0>me||A[K]!==P[me]){var Se=`
`+A[K].replace(" at new "," at ");return a.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",a.displayName)),Se}while(1<=K&&0<=me);break}}}finally{J=!1,Error.prepareStackTrace=f}return(a=a?a.displayName||a.name:"")?W(a):""}function he(a){switch(a.tag){case 5:return W(a.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return a=ie(a.type,!1),a;case 11:return a=ie(a.type.render,!1),a;case 1:return a=ie(a.type,!0),a;default:return""}}function ge(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case D:return"Fragment";case ce:return"Portal";case S:return"Profiler";case C:return"StrictMode";case B:return"Suspense";case M:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case I:return(a.displayName||"Context")+".Consumer";case V:return(a._context.displayName||"Context")+".Provider";case w:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case q:return c=a.displayName||null,c!==null?c:ge(a.type)||"Memo";case se:c=a._payload,a=a._init;try{return ge(a(c))}catch{}}return null}function _e(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(c);case 8:return c===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function fe(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ve(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ne(a){var c=ve(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),y=""+a[c];if(!a.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var A=f.get,P=f.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return A.call(this)},set:function(K){y=""+K,P.call(this,K)}}),Object.defineProperty(a,c,{enumerable:f.enumerable}),{getValue:function(){return y},setValue:function(K){y=""+K},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Ue(a){a._valueTracker||(a._valueTracker=Ne(a))}function Xe(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var f=c.getValue(),y="";return a&&(y=ve(a)?a.checked?"true":"false":a.value),a=y,a!==f?(c.setValue(a),!0):!1}function Ze(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function ze(a,c){var f=c.checked;return be({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??a._wrapperState.initialChecked})}function de(a,c){var f=c.defaultValue==null?"":c.defaultValue,y=c.checked!=null?c.checked:c.defaultChecked;f=fe(c.value!=null?c.value:f),a._wrapperState={initialChecked:y,initialValue:f,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Ft(a,c){c=c.checked,c!=null&&$(a,"checked",c,!1)}function Et(a,c){Ft(a,c);var f=fe(c.value),y=c.type;if(f!=null)y==="number"?(f===0&&a.value===""||a.value!=f)&&(a.value=""+f):a.value!==""+f&&(a.value=""+f);else if(y==="submit"||y==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?He(a,c.type,f):c.hasOwnProperty("defaultValue")&&He(a,c.type,fe(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function wt(a,c,f){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var y=c.type;if(!(y!=="submit"&&y!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,f||c===a.value||(a.value=c),a.defaultValue=c}f=a.name,f!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,f!==""&&(a.name=f)}function He(a,c,f){(c!=="number"||Ze(a.ownerDocument)!==a)&&(f==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+f&&(a.defaultValue=""+f))}var ot=Array.isArray;function rt(a,c,f,y){if(a=a.options,c){c={};for(var A=0;A<f.length;A++)c["$"+f[A]]=!0;for(f=0;f<a.length;f++)A=c.hasOwnProperty("$"+a[f].value),a[f].selected!==A&&(a[f].selected=A),A&&y&&(a[f].defaultSelected=!0)}else{for(f=""+fe(f),c=null,A=0;A<a.length;A++){if(a[A].value===f){a[A].selected=!0,y&&(a[A].defaultSelected=!0);return}c!==null||a[A].disabled||(c=a[A])}c!==null&&(c.selected=!0)}}function Jt(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return be({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function _t(a,c){var f=c.value;if(f==null){if(f=c.children,c=c.defaultValue,f!=null){if(c!=null)throw Error(t(92));if(ot(f)){if(1<f.length)throw Error(t(93));f=f[0]}c=f}c==null&&(c=""),f=c}a._wrapperState={initialValue:fe(f)}}function mr(a,c){var f=fe(c.value),y=fe(c.defaultValue);f!=null&&(f=""+f,f!==a.value&&(a.value=f),c.defaultValue==null&&a.defaultValue!==f&&(a.defaultValue=f)),y!=null&&(a.defaultValue=""+y)}function zt(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function qt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vr(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?qt(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Mt,Tt=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,f,y,A){MSApp.execUnsafeLocalFunction(function(){return a(c,f,y,A)})}:a})(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(Mt=Mt||document.createElement("div"),Mt.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Mt.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function jt(a,c){if(c){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=c;return}}a.textContent=c}var pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ir=["Webkit","ms","Moz","O"];Object.keys(pt).forEach(function(a){Ir.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),pt[c]=pt[a]})});function ir(a,c,f){return c==null||typeof c=="boolean"||c===""?"":f||typeof c!="number"||c===0||pt.hasOwnProperty(a)&&pt[a]?(""+c).trim():c+"px"}function ht(a,c){a=a.style;for(var f in c)if(c.hasOwnProperty(f)){var y=f.indexOf("--")===0,A=ir(f,c[f],y);f==="float"&&(f="cssFloat"),y?a.setProperty(f,A):a[f]=A}}var Ht=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sr(a,c){if(c){if(Ht[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function It(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tr=null;function $t(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Er=null,zr=null,Ut=null;function Dt(a){if(a=Gl(a)){if(typeof Er!="function")throw Error(t(280));var c=a.stateNode;c&&(c=Gc(c),Er(a.stateNode,a.type,c))}}function ar(a){zr?Ut?Ut.push(a):Ut=[a]:zr=a}function Hi(){if(zr){var a=zr,c=Ut;if(Ut=zr=null,Dt(a),c)for(a=0;a<c.length;a++)Dt(c[a])}}function zn(a,c){return a(c)}function Po(){}var Vn=!1;function Rt(a,c,f){if(Vn)return a(c,f);Vn=!0;try{return zn(a,c,f)}finally{Vn=!1,(zr!==null||Ut!==null)&&(Po(),Hi())}}function Pi(a,c){var f=a.stateNode;if(f===null)return null;var y=Gc(f);if(y===null)return null;f=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(t(231,c,typeof f));return f}var pi=!1;if(u)try{var On={};Object.defineProperty(On,"passive",{get:function(){pi=!0}}),window.addEventListener("test",On,On),window.removeEventListener("test",On,On)}catch{pi=!1}function Ni(a,c,f,y,A,P,K,me,Se){var Fe=Array.prototype.slice.call(arguments,3);try{c.apply(f,Fe)}catch(Je){this.onError(Je)}}var Cr=!1,Vr=null,dn=!1,Qn=null,Qo={onError:function(a){Cr=!0,Vr=a}};function Gi(a,c,f,y,A,P,K,me,Se){Cr=!1,Vr=null,Ni.apply(Qo,arguments)}function Ki(a,c,f,y,A,P,K,me,Se){if(Gi.apply(this,arguments),Cr){if(Cr){var Fe=Vr;Cr=!1,Vr=null}else throw Error(t(198));dn||(dn=!0,Qn=Fe)}}function wn(a){var c=a,f=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(f=c.return),a=c.return;while(a)}return c.tag===3?f:null}function Bi(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function Li(a){if(wn(a)!==a)throw Error(t(188))}function bs(a){var c=a.alternate;if(!c){if(c=wn(a),c===null)throw Error(t(188));return c!==a?null:a}for(var f=a,y=c;;){var A=f.return;if(A===null)break;var P=A.alternate;if(P===null){if(y=A.return,y!==null){f=y;continue}break}if(A.child===P.child){for(P=A.child;P;){if(P===f)return Li(A),a;if(P===y)return Li(A),c;P=P.sibling}throw Error(t(188))}if(f.return!==y.return)f=A,y=P;else{for(var K=!1,me=A.child;me;){if(me===f){K=!0,f=A,y=P;break}if(me===y){K=!0,y=A,f=P;break}me=me.sibling}if(!K){for(me=P.child;me;){if(me===f){K=!0,f=P,y=A;break}if(me===y){K=!0,y=P,f=A;break}me=me.sibling}if(!K)throw Error(t(189))}}if(f.alternate!==y)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?a:c}function go(a){return a=bs(a),a!==null?yo(a):null}function yo(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=yo(a);if(c!==null)return c;a=a.sibling}return null}var ws=e.unstable_scheduleCallback,Xo=e.unstable_cancelCallback,No=e.unstable_shouldYield,Zo=e.unstable_requestPaint,jr=e.unstable_now,Ll=e.unstable_getCurrentPriorityLevel,qs=e.unstable_ImmediatePriority,mi=e.unstable_UserBlockingPriority,es=e.unstable_NormalPriority,wa=e.unstable_LowPriority,Ss=e.unstable_IdlePriority,_s=null,gi=null;function Qa(a){if(gi&&typeof gi.onCommitFiberRoot=="function")try{gi.onCommitFiberRoot(_s,a,void 0,(a.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:Ts,Bo=Math.log,wr=Math.LN2;function Ts(a){return a>>>=0,a===0?32:31-(Bo(a)/wr|0)|0}var xo=64,yi=4194304;function lr(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Mn(a,c){var f=a.pendingLanes;if(f===0)return 0;var y=0,A=a.suspendedLanes,P=a.pingedLanes,K=f&268435455;if(K!==0){var me=K&~A;me!==0?y=lr(me):(P&=K,P!==0&&(y=lr(P)))}else K=f&~A,K!==0?y=lr(K):P!==0&&(y=lr(P));if(y===0)return 0;if(c!==0&&c!==y&&(c&A)===0&&(A=y&-y,P=c&-c,A>=P||A===16&&(P&4194240)!==0))return c;if((y&4)!==0&&(y|=f&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=y;0<c;)f=31-Xn(c),A=1<<f,y|=a[f],c&=~A;return y}function vo(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Or(a,c){for(var f=a.suspendedLanes,y=a.pingedLanes,A=a.expirationTimes,P=a.pendingLanes;0<P;){var K=31-Xn(P),me=1<<K,Se=A[K];Se===-1?((me&f)===0||(me&y)!==0)&&(A[K]=vo(me,c)):Se<=c&&(a.expiredLanes|=me),P&=~me}}function Hs(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Xa(){var a=xo;return xo<<=1,(xo&4194240)===0&&(xo=64),a}function Za(a){for(var c=[],f=0;31>f;f++)c.push(a);return c}function Gs(a,c,f){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-Xn(c),a[c]=f}function Lo(a,c){var f=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var y=a.eventTimes;for(a=a.expirationTimes;0<f;){var A=31-Xn(f),P=1<<A;c[A]=0,y[A]=-1,a[A]=-1,f&=~P}}function Sa(a,c){var f=a.entangledLanes|=c;for(a=a.entanglements;f;){var y=31-Xn(f),A=1<<y;A&c|a[y]&c&&(a[y]|=c),f&=~A}}var or=0;function ai(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Ks,_a,el,tl,Js,xi=!1,bo=[],Fo=null,vi=null,Sn=null,Bt=new Map,ts=new Map,Fi=[],Fl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function As(a,c){switch(a){case"focusin":case"focusout":Fo=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":Sn=null;break;case"pointerover":case"pointerout":Bt.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":ts.delete(c.pointerId)}}function Dn(a,c,f,y,A,P){return a===null||a.nativeEvent!==P?(a={blockedOn:c,domEventName:f,eventSystemFlags:y,nativeEvent:P,targetContainers:[A]},c!==null&&(c=Gl(c),c!==null&&_a(c)),a):(a.eventSystemFlags|=y,c=a.targetContainers,A!==null&&c.indexOf(A)===-1&&c.push(A),a)}function zo(a,c,f,y,A){switch(c){case"focusin":return Fo=Dn(Fo,a,c,f,y,A),!0;case"dragenter":return vi=Dn(vi,a,c,f,y,A),!0;case"mouseover":return Sn=Dn(Sn,a,c,f,y,A),!0;case"pointerover":var P=A.pointerId;return Bt.set(P,Dn(Bt.get(P)||null,a,c,f,y,A)),!0;case"gotpointercapture":return P=A.pointerId,ts.set(P,Dn(ts.get(P)||null,a,c,f,y,A)),!0}return!1}function Ta(a){var c=Na(a.target);if(c!==null){var f=wn(c);if(f!==null){if(c=f.tag,c===13){if(c=Bi(f),c!==null){a.blockedOn=c,Js(a.priority,function(){el(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Rr(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var f=Cs(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(f===null){f=a.nativeEvent;var y=new f.constructor(f.type,f);tr=y,f.target.dispatchEvent(y),tr=null}else return c=Gl(f),c!==null&&_a(c),a.blockedOn=f,!1;c.shift()}return!0}function Ys(a,c,f){Rr(a)&&f.delete(c)}function rl(){xi=!1,Fo!==null&&Rr(Fo)&&(Fo=null),vi!==null&&Rr(vi)&&(vi=null),Sn!==null&&Rr(Sn)&&(Sn=null),Bt.forEach(Ys),ts.forEach(Ys)}function Ji(a,c){a.blockedOn===c&&(a.blockedOn=null,xi||(xi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,rl)))}function wo(a){function c(A){return Ji(A,a)}if(0<bo.length){Ji(bo[0],a);for(var f=1;f<bo.length;f++){var y=bo[f];y.blockedOn===a&&(y.blockedOn=null)}}for(Fo!==null&&Ji(Fo,a),vi!==null&&Ji(vi,a),Sn!==null&&Ji(Sn,a),Bt.forEach(c),ts.forEach(c),f=0;f<Fi.length;f++)y=Fi[f],y.blockedOn===a&&(y.blockedOn=null);for(;0<Fi.length&&(f=Fi[0],f.blockedOn===null);)Ta(f),f.blockedOn===null&&Fi.shift()}var Yi=F.ReactCurrentBatchConfig,rs=!0;function Qi(a,c,f,y){var A=or,P=Yi.transition;Yi.transition=null;try{or=1,ns(a,c,f,y)}finally{or=A,Yi.transition=P}}function Aa(a,c,f,y){var A=or,P=Yi.transition;Yi.transition=null;try{or=4,ns(a,c,f,y)}finally{or=A,Yi.transition=P}}function ns(a,c,f,y){if(rs){var A=Cs(a,c,f,y);if(A===null)Uc(a,c,y,bi,f),As(a,y);else if(zo(A,a,c,f,y))y.stopPropagation();else if(As(a,y),c&4&&-1<Fl.indexOf(a)){for(;A!==null;){var P=Gl(A);if(P!==null&&Ks(P),P=Cs(a,c,f,y),P===null&&Uc(a,c,y,bi,f),P===A)break;A=P}A!==null&&y.stopPropagation()}else Uc(a,c,y,null,f)}}var bi=null;function Cs(a,c,f,y){if(bi=null,a=$t(y),a=Na(a),a!==null)if(c=wn(a),c===null)a=null;else if(f=c.tag,f===13){if(a=Bi(c),a!==null)return a;a=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return bi=a,null}function is(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ll()){case qs:return 1;case mi:return 4;case es:case wa:return 16;case Ss:return 536870912;default:return 16}default:return 16}}var li=null,Vo=null,Oo=null;function nl(){if(Oo)return Oo;var a,c=Vo,f=c.length,y,A="value"in li?li.value:li.textContent,P=A.length;for(a=0;a<f&&c[a]===A[a];a++);var K=f-a;for(y=1;y<=K&&c[f-y]===A[P-y];y++);return Oo=A.slice(a,1<y?1-y:void 0)}function zi(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Zn(){return!0}function Ca(){return!1}function Wn(a){function c(f,y,A,P,K){this._reactName=f,this._targetInst=A,this.type=y,this.nativeEvent=P,this.target=K,this.currentTarget=null;for(var me in a)a.hasOwnProperty(me)&&(f=a[me],this[me]=f?f(P):P[me]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Zn:Ca,this.isPropagationStopped=Ca,this}return be(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),c}var wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ks=Wn(wi),T=be({},wi,{view:0,detail:0}),H=Wn(T),ue,ye,Ce,De=be({},T,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wt,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ce&&(Ce&&a.type==="mousemove"?(ue=a.screenX-Ce.screenX,ye=a.screenY-Ce.screenY):ye=ue=0,Ce=a),ue)},movementY:function(a){return"movementY"in a?a.movementY:ye}}),Ge=Wn(De),lt=be({},De,{dataTransfer:0}),mt=Wn(lt),Lt=be({},T,{relatedTarget:0}),vt=Wn(Lt),gr=be({},wi,{animationName:0,elapsedTime:0,pseudoElement:0}),Qr=Wn(gr),Mr=be({},wi,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),m=Wn(Mr),R=be({},wi,{data:0}),U=Wn(R),ee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ke={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Be={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tt(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=Be[a])?!!c[a]:!1}function Wt(){return tt}var Dr=be({},T,{key:function(a){if(a.key){var c=ee[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=zi(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?ke[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wt,charCode:function(a){return a.type==="keypress"?zi(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?zi(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),dr=Wn(Dr),Xr=be({},De,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$n=Wn(Xr),Vi=be({},T,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wt}),tn=Wn(Vi),Si=be({},wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mo=Wn(Si),Qs=be({},De,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),zc=Wn(Qs),hn=[9,13,27,32],os=u&&"CompositionEvent"in window,Is=null;u&&"documentMode"in document&&(Is=document.documentMode);var Uu=u&&"TextEvent"in window&&!Is,So=u&&(!os||Is&&8<Is&&11>=Is),ka=" ",zl=!1;function Vl(a,c){switch(a){case"keyup":return hn.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xs(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Do=!1;function _o(a,c){switch(a){case"compositionend":return Xs(c);case"keypress":return c.which!==32?null:(zl=!0,ka);case"textInput":return a=c.data,a===ka&&zl?null:a;default:return null}}function To(a,c){if(Do)return a==="compositionend"||!os&&Vl(a,c)?(a=nl(),Oo=Vo=li=null,Do=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return So&&c.locale!=="ko"?null:c.data;default:return null}}var Ia={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Es(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!Ia[a.type]:c==="textarea"}function Zs(a,c,f,y){ar(y),c=Ju(c,"onChange"),0<c.length&&(f=new ks("onChange","change",null,f,y),a.push({event:f,listeners:c}))}var ea=null,js=null;function _n(a){Wc(a,0)}function il(a){var c=pl(a);if(Xe(c))return a}function Rs(a,c){if(a==="change")return c}var ss=!1;if(u){var ol;if(u){var sl="oninput"in document;if(!sl){var Ol=document.createElement("div");Ol.setAttribute("oninput","return;"),sl=typeof Ol.oninput=="function"}ol=sl}else ol=!1;ss=ol&&(!document.documentMode||9<document.documentMode)}function Ml(){ea&&(ea.detachEvent("onpropertychange",ta),js=ea=null)}function ta(a){if(a.propertyName==="value"&&il(js)){var c=[];Zs(c,js,a,$t(a)),Rt(_n,c)}}function Ea(a,c,f){a==="focusin"?(Ml(),ea=c,js=f,ea.attachEvent("onpropertychange",ta)):a==="focusout"&&Ml()}function ja(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return il(js)}function al(a,c){if(a==="click")return il(c)}function Ra(a,c){if(a==="input"||a==="change")return il(c)}function ll(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var fn=typeof Object.is=="function"?Object.is:ll;function Xi(a,c){if(fn(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var f=Object.keys(a),y=Object.keys(c);if(f.length!==y.length)return!1;for(y=0;y<f.length;y++){var A=f[y];if(!h.call(c,A)||!fn(a[A],c[A]))return!1}return!0}function Sr(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Br(a,c){var f=Sr(a);a=0;for(var y;f;){if(f.nodeType===3){if(y=a+f.textContent.length,a<=c&&y>=c)return{node:f,offset:c-a};a=y}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Sr(f)}}function pn(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?pn(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function jn(){for(var a=window,c=Ze();c instanceof a.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)a=c.contentWindow;else break;c=Ze(a.document)}return c}function as(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function Vc(a){var c=jn(),f=a.focusedElem,y=a.selectionRange;if(c!==f&&f&&f.ownerDocument&&pn(f.ownerDocument.documentElement,f)){if(y!==null&&as(f)){if(c=y.start,a=y.end,a===void 0&&(a=c),"selectionStart"in f)f.selectionStart=c,f.selectionEnd=Math.min(a,f.value.length);else if(a=(c=f.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var A=f.textContent.length,P=Math.min(y.start,A);y=y.end===void 0?P:Math.min(y.end,A),!a.extend&&P>y&&(A=y,y=P,P=A),A=Br(f,P);var K=Br(f,y);A&&K&&(a.rangeCount!==1||a.anchorNode!==A.node||a.anchorOffset!==A.offset||a.focusNode!==K.node||a.focusOffset!==K.offset)&&(c=c.createRange(),c.setStart(A.node,A.offset),a.removeAllRanges(),P>y?(a.addRange(c),a.extend(K.node,K.offset)):(c.setEnd(K.node,K.offset),a.addRange(c)))}}for(c=[],a=f;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<c.length;f++)a=c[f],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Dl=u&&"documentMode"in document&&11>=document.documentMode,ra=null,qu=null,Wl=null,Hu=!1;function uh(a,c,f){var y=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Hu||ra==null||ra!==Ze(y)||(y=ra,"selectionStart"in y&&as(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Wl&&Xi(Wl,y)||(Wl=y,y=Ju(qu,"onSelect"),0<y.length&&(c=new ks("onSelect","select",null,c,f),a.push({event:c,listeners:y}),c.target=ra)))}function Oc(a,c){var f={};return f[a.toLowerCase()]=c.toLowerCase(),f["Webkit"+a]="webkit"+c,f["Moz"+a]="moz"+c,f}var cl={animationend:Oc("Animation","AnimationEnd"),animationiteration:Oc("Animation","AnimationIteration"),animationstart:Oc("Animation","AnimationStart"),transitionend:Oc("Transition","TransitionEnd")},ul={},dh={};u&&(dh=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function Mc(a){if(ul[a])return ul[a];if(!cl[a])return a;var c=cl[a],f;for(f in c)if(c.hasOwnProperty(f)&&f in dh)return ul[a]=c[f];return a}var hh=Mc("animationend"),fh=Mc("animationiteration"),ph=Mc("animationstart"),mh=Mc("transitionend"),gh=new Map,yh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ps(a,c){gh.set(a,c),s(c,[a])}for(var $l=0;$l<yh.length;$l++){var Oi=yh[$l],Wo=Oi.toLowerCase(),Gu=Oi[0].toUpperCase()+Oi.slice(1);Ps(Wo,"on"+Gu)}Ps(hh,"onAnimationEnd"),Ps(fh,"onAnimationIteration"),Ps(ph,"onAnimationStart"),Ps("dblclick","onDoubleClick"),Ps("focusin","onFocus"),Ps("focusout","onBlur"),Ps(mh,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pa));function Dc(a,c,f){var y=a.type||"unknown-event";a.currentTarget=f,Ki(y,c,void 0,a),a.currentTarget=null}function Wc(a,c){c=(c&4)!==0;for(var f=0;f<a.length;f++){var y=a[f],A=y.event;y=y.listeners;e:{var P=void 0;if(c)for(var K=y.length-1;0<=K;K--){var me=y[K],Se=me.instance,Fe=me.currentTarget;if(me=me.listener,Se!==P&&A.isPropagationStopped())break e;Dc(A,me,Fe),P=Se}else for(K=0;K<y.length;K++){if(me=y[K],Se=me.instance,Fe=me.currentTarget,me=me.listener,Se!==P&&A.isPropagationStopped())break e;Dc(A,me,Fe),P=Se}}}if(dn)throw a=Qn,dn=!1,Qn=null,a}function Wr(a,c){var f=c[eo];f===void 0&&(f=c[eo]=new Set);var y=a+"__bubble";f.has(y)||($c(c,a,2,!1),f.add(y))}function Ku(a,c,f){var y=0;c&&(y|=4),$c(f,a,y,c)}var Ul="_reactListening"+Math.random().toString(36).slice(2);function dl(a){if(!a[Ul]){a[Ul]=!0,n.forEach(function(f){f!=="selectionchange"&&(Jf.has(f)||Ku(f,!1,a),Ku(f,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[Ul]||(c[Ul]=!0,Ku("selectionchange",!1,c))}}function $c(a,c,f,y){switch(is(c)){case 1:var A=Qi;break;case 4:A=Aa;break;default:A=ns}f=A.bind(null,c,f,a),A=void 0,!pi||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(A=!0),y?A!==void 0?a.addEventListener(c,f,{capture:!0,passive:A}):a.addEventListener(c,f,!0):A!==void 0?a.addEventListener(c,f,{passive:A}):a.addEventListener(c,f,!1)}function Uc(a,c,f,y,A){var P=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var K=y.tag;if(K===3||K===4){var me=y.stateNode.containerInfo;if(me===A||me.nodeType===8&&me.parentNode===A)break;if(K===4)for(K=y.return;K!==null;){var Se=K.tag;if((Se===3||Se===4)&&(Se=K.stateNode.containerInfo,Se===A||Se.nodeType===8&&Se.parentNode===A))return;K=K.return}for(;me!==null;){if(K=Na(me),K===null)return;if(Se=K.tag,Se===5||Se===6){y=P=K;continue e}me=me.parentNode}}y=y.return}Rt(function(){var Fe=P,Je=$t(f),Ye=[];e:{var Ke=gh.get(a);if(Ke!==void 0){var at=ks,gt=a;switch(a){case"keypress":if(zi(f)===0)break e;case"keydown":case"keyup":at=dr;break;case"focusin":gt="focus",at=vt;break;case"focusout":gt="blur",at=vt;break;case"beforeblur":case"afterblur":at=vt;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=Ge;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=mt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=tn;break;case hh:case fh:case ph:at=Qr;break;case mh:at=Mo;break;case"scroll":at=H;break;case"wheel":at=zc;break;case"copy":case"cut":case"paste":at=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=$n}var bt=(c&4)!==0,Hn=!bt&&a==="scroll",Re=bt?Ke!==null?Ke+"Capture":null:Ke;bt=[];for(var Ae=Fe,Le;Ae!==null;){Le=Ae;var et=Le.stateNode;if(Le.tag===5&&et!==null&&(Le=et,Re!==null&&(et=Pi(Ae,Re),et!=null&&bt.push(qc(Ae,et,Le)))),Hn)break;Ae=Ae.return}0<bt.length&&(Ke=new at(Ke,gt,null,f,Je),Ye.push({event:Ke,listeners:bt}))}}if((c&7)===0){e:{if(Ke=a==="mouseover"||a==="pointerover",at=a==="mouseout"||a==="pointerout",Ke&&f!==tr&&(gt=f.relatedTarget||f.fromElement)&&(Na(gt)||gt[_i]))break e;if((at||Ke)&&(Ke=Je.window===Je?Je:(Ke=Je.ownerDocument)?Ke.defaultView||Ke.parentWindow:window,at?(gt=f.relatedTarget||f.toElement,at=Fe,gt=gt?Na(gt):null,gt!==null&&(Hn=wn(gt),gt!==Hn||gt.tag!==5&&gt.tag!==6)&&(gt=null)):(at=null,gt=Fe),at!==gt)){if(bt=Ge,et="onMouseLeave",Re="onMouseEnter",Ae="mouse",(a==="pointerout"||a==="pointerover")&&(bt=$n,et="onPointerLeave",Re="onPointerEnter",Ae="pointer"),Hn=at==null?Ke:pl(at),Le=gt==null?Ke:pl(gt),Ke=new bt(et,Ae+"leave",at,f,Je),Ke.target=Hn,Ke.relatedTarget=Le,et=null,Na(Je)===Fe&&(bt=new bt(Re,Ae+"enter",gt,f,Je),bt.target=Le,bt.relatedTarget=Hn,et=bt),Hn=et,at&&gt)t:{for(bt=at,Re=gt,Ae=0,Le=bt;Le;Le=hl(Le))Ae++;for(Le=0,et=Re;et;et=hl(et))Le++;for(;0<Ae-Le;)bt=hl(bt),Ae--;for(;0<Le-Ae;)Re=hl(Re),Le--;for(;Ae--;){if(bt===Re||Re!==null&&bt===Re.alternate)break t;bt=hl(bt),Re=hl(Re)}bt=null}else bt=null;at!==null&&Yf(Ye,Ke,at,bt,!1),gt!==null&&Hn!==null&&Yf(Ye,Hn,gt,bt,!0)}}e:{if(Ke=Fe?pl(Fe):window,at=Ke.nodeName&&Ke.nodeName.toLowerCase(),at==="select"||at==="input"&&Ke.type==="file")var At=Rs;else if(Es(Ke))if(ss)At=Ra;else{At=ja;var Vt=Ea}else(at=Ke.nodeName)&&at.toLowerCase()==="input"&&(Ke.type==="checkbox"||Ke.type==="radio")&&(At=al);if(At&&(At=At(a,Fe))){Zs(Ye,At,f,Je);break e}Vt&&Vt(a,Ke,Fe),a==="focusout"&&(Vt=Ke._wrapperState)&&Vt.controlled&&Ke.type==="number"&&He(Ke,"number",Ke.value)}switch(Vt=Fe?pl(Fe):window,a){case"focusin":(Es(Vt)||Vt.contentEditable==="true")&&(ra=Vt,qu=Fe,Wl=null);break;case"focusout":Wl=qu=ra=null;break;case"mousedown":Hu=!0;break;case"contextmenu":case"mouseup":case"dragend":Hu=!1,uh(Ye,f,Je);break;case"selectionchange":if(Dl)break;case"keydown":case"keyup":uh(Ye,f,Je)}var Ot;if(os)e:{switch(a){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else Do?Vl(a,f)&&(Yt="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Yt="onCompositionStart");Yt&&(So&&f.locale!=="ko"&&(Do||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Do&&(Ot=nl()):(li=Je,Vo="value"in li?li.value:li.textContent,Do=!0)),Vt=Ju(Fe,Yt),0<Vt.length&&(Yt=new U(Yt,a,null,f,Je),Ye.push({event:Yt,listeners:Vt}),Ot?Yt.data=Ot:(Ot=Xs(f),Ot!==null&&(Yt.data=Ot)))),(Ot=Uu?_o(a,f):To(a,f))&&(Fe=Ju(Fe,"onBeforeInput"),0<Fe.length&&(Je=new U("onBeforeInput","beforeinput",null,f,Je),Ye.push({event:Je,listeners:Fe}),Je.data=Ot))}Wc(Ye,c)})}function qc(a,c,f){return{instance:a,listener:c,currentTarget:f}}function Ju(a,c){for(var f=c+"Capture",y=[];a!==null;){var A=a,P=A.stateNode;A.tag===5&&P!==null&&(A=P,P=Pi(a,f),P!=null&&y.unshift(qc(a,P,A)),P=Pi(a,c),P!=null&&y.push(qc(a,P,A))),a=a.return}return y}function hl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Yf(a,c,f,y,A){for(var P=c._reactName,K=[];f!==null&&f!==y;){var me=f,Se=me.alternate,Fe=me.stateNode;if(Se!==null&&Se===y)break;me.tag===5&&Fe!==null&&(me=Fe,A?(Se=Pi(f,P),Se!=null&&K.unshift(qc(f,Se,me))):A||(Se=Pi(f,P),Se!=null&&K.push(qc(f,Se,me)))),f=f.return}K.length!==0&&a.push({event:c,listeners:K})}var k0=/\r\n?/g,I0=/\u0000|\uFFFD/g;function Qf(a){return(typeof a=="string"?a:""+a).replace(k0,`
`).replace(I0,"")}function Yu(a,c,f){if(c=Qf(c),Qf(a)!==c&&f)throw Error(t(425))}function ql(){}var Hc=null,fl=null;function xh(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var vh=typeof setTimeout=="function"?setTimeout:void 0,Xf=typeof clearTimeout=="function"?clearTimeout:void 0,Zf=typeof Promise=="function"?Promise:void 0,E0=typeof queueMicrotask=="function"?queueMicrotask:typeof Zf<"u"?function(a){return Zf.resolve(null).then(a).catch(j0)}:vh;function j0(a){setTimeout(function(){throw a})}function bh(a,c){var f=c,y=0;do{var A=f.nextSibling;if(a.removeChild(f),A&&A.nodeType===8)if(f=A.data,f==="/$"){if(y===0){a.removeChild(A),wo(c);return}y--}else f!=="$"&&f!=="$?"&&f!=="$!"||y++;f=A}while(f);wo(c)}function Mi(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function $o(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return a;c--}else f==="/$"&&c++}a=a.previousSibling}return null}var Zi=Math.random().toString(36).slice(2),Ns="__reactFiber$"+Zi,Hl="__reactProps$"+Zi,_i="__reactContainer$"+Zi,eo="__reactEvents$"+Zi,R0="__reactListeners$"+Zi,P0="__reactHandles$"+Zi;function Na(a){var c=a[Ns];if(c)return c;for(var f=a.parentNode;f;){if(c=f[_i]||f[Ns]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(a=$o(a);a!==null;){if(f=a[Ns])return f;a=$o(a)}return c}a=f,f=a.parentNode}return null}function Gl(a){return a=a[Ns]||a[_i],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function pl(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function Gc(a){return a[Hl]||null}var wh=[],na=-1;function ls(a){return{current:a}}function Pr(a){0>na||(a.current=wh[na],wh[na]=null,na--)}function Lr(a,c){na++,wh[na]=a.current,a.current=c}var Ba={},ci=ls(Ba),to=ls(!1),ml=Ba;function Kl(a,c){var f=a.type.contextTypes;if(!f)return Ba;var y=a.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var A={},P;for(P in f)A[P]=c[P];return y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=A),A}function ro(a){return a=a.childContextTypes,a!=null}function Qu(){Pr(to),Pr(ci)}function ep(a,c,f){if(ci.current!==Ba)throw Error(t(168));Lr(ci,c),Lr(to,f)}function Sh(a,c,f){var y=a.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return f;y=y.getChildContext();for(var A in y)if(!(A in c))throw Error(t(108,_e(a)||"Unknown",A));return be({},f,y)}function gl(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ba,ml=ci.current,Lr(ci,a),Lr(to,to.current),!0}function tp(a,c,f){var y=a.stateNode;if(!y)throw Error(t(169));f?(a=Sh(a,c,ml),y.__reactInternalMemoizedMergedChildContext=a,Pr(to),Pr(ci),Lr(ci,a)):Pr(to),Lr(to,f)}var ia=null,Kc=!1,p=!1;function x(a){ia===null?ia=[a]:ia.push(a)}function j(a){Kc=!0,x(a)}function z(){if(!p&&ia!==null){p=!0;var a=0,c=or;try{var f=ia;for(or=1;a<f.length;a++){var y=f[a];do y=y(!0);while(y!==null)}ia=null,Kc=!1}catch(A){throw ia!==null&&(ia=ia.slice(a+1)),ws(qs,z),A}finally{or=c,p=!1}}return null}var G=[],Y=0,Q=null,X=0,ne=[],ae=0,we=null,Ee=1,le="";function Te(a,c){G[Y++]=X,G[Y++]=Q,Q=a,X=c}function Ie(a,c,f){ne[ae++]=Ee,ne[ae++]=le,ne[ae++]=we,we=a;var y=Ee;a=le;var A=32-Xn(y)-1;y&=~(1<<A),f+=1;var P=32-Xn(c)+A;if(30<P){var K=A-A%5;P=(y&(1<<K)-1).toString(32),y>>=K,A-=K,Ee=1<<32-Xn(c)+A|f<<A|y,le=P+a}else Ee=1<<P|f<<A|y,le=a}function Me(a){a.return!==null&&(Te(a,1),Ie(a,1,0))}function Pe(a){for(;a===Q;)Q=G[--Y],G[Y]=null,X=G[--Y],G[Y]=null;for(;a===we;)we=ne[--ae],ne[ae]=null,le=ne[--ae],ne[ae]=null,Ee=ne[--ae],ne[ae]=null}var Ve=null,Oe=null,$e=!1,qe=null;function St(a,c){var f=Vs(5,null,null,0);f.elementType="DELETED",f.stateNode=c,f.return=a,c=a.deletions,c===null?(a.deletions=[f],a.flags|=16):c.push(f)}function ct(a,c){switch(a.tag){case 5:var f=a.type;return c=c.nodeType!==1||f.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,Ve=a,Oe=Mi(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,Ve=a,Oe=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(f=we!==null?{id:Ee,overflow:le}:null,a.memoizedState={dehydrated:c,treeContext:f,retryLane:1073741824},f=Vs(18,null,null,0),f.stateNode=c,f.return=a,a.child=f,Ve=a,Oe=null,!0):!1;default:return!1}}function Xt(a){return(a.mode&1)!==0&&(a.flags&128)===0}function ft(a){if($e){var c=Oe;if(c){var f=c;if(!ct(a,c)){if(Xt(a))throw Error(t(418));c=Mi(f.nextSibling);var y=Ve;c&&ct(a,c)?St(y,f):(a.flags=a.flags&-4097|2,$e=!1,Ve=a)}}else{if(Xt(a))throw Error(t(418));a.flags=a.flags&-4097|2,$e=!1,Ve=a}}}function hr(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Ve=a}function mn(a){if(a!==Ve)return!1;if(!$e)return hr(a),$e=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!xh(a.type,a.memoizedProps)),c&&(c=Oe)){if(Xt(a))throw rr(),Error(t(418));for(;c;)St(a,c),c=Mi(c.nextSibling)}if(hr(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"){if(c===0){Oe=Mi(a.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++}a=a.nextSibling}Oe=null}}else Oe=Ve?Mi(a.stateNode.nextSibling):null;return!0}function rr(){for(var a=Oe;a;)a=Mi(a.nextSibling)}function ut(){Oe=Ve=null,$e=!1}function it(a){qe===null?qe=[a]:qe.push(a)}var Tn=F.ReactCurrentBatchConfig;function Gt(a,c,f){if(a=f.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var y=f.stateNode}if(!y)throw Error(t(147,a));var A=y,P=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===P?c.ref:(c=function(K){var me=A.refs;K===null?delete me[P]:me[P]=K},c._stringRef=P,c)}if(typeof a!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,a))}return a}function cr(a,c){throw a=Object.prototype.toString.call(c),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function Zr(a){var c=a._init;return c(a._payload)}function ei(a){function c(Re,Ae){if(a){var Le=Re.deletions;Le===null?(Re.deletions=[Ae],Re.flags|=16):Le.push(Ae)}}function f(Re,Ae){if(!a)return null;for(;Ae!==null;)c(Re,Ae),Ae=Ae.sibling;return null}function y(Re,Ae){for(Re=new Map;Ae!==null;)Ae.key!==null?Re.set(Ae.key,Ae):Re.set(Ae.index,Ae),Ae=Ae.sibling;return Re}function A(Re,Ae){return Re=ic(Re,Ae),Re.index=0,Re.sibling=null,Re}function P(Re,Ae,Le){return Re.index=Le,a?(Le=Re.alternate,Le!==null?(Le=Le.index,Le<Ae?(Re.flags|=2,Ae):Le):(Re.flags|=2,Ae)):(Re.flags|=1048576,Ae)}function K(Re){return a&&Re.alternate===null&&(Re.flags|=2),Re}function me(Re,Ae,Le,et){return Ae===null||Ae.tag!==6?(Ae=ag(Le,Re.mode,et),Ae.return=Re,Ae):(Ae=A(Ae,Le),Ae.return=Re,Ae)}function Se(Re,Ae,Le,et){var At=Le.type;return At===D?Je(Re,Ae,Le.props.children,et,Le.key):Ae!==null&&(Ae.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===se&&Zr(At)===Ae.type)?(et=A(Ae,Le.props),et.ref=Gt(Re,Ae,Le),et.return=Re,et):(et=wp(Le.type,Le.key,Le.props,null,Re.mode,et),et.ref=Gt(Re,Ae,Le),et.return=Re,et)}function Fe(Re,Ae,Le,et){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==Le.containerInfo||Ae.stateNode.implementation!==Le.implementation?(Ae=lg(Le,Re.mode,et),Ae.return=Re,Ae):(Ae=A(Ae,Le.children||[]),Ae.return=Re,Ae)}function Je(Re,Ae,Le,et,At){return Ae===null||Ae.tag!==7?(Ae=ru(Le,Re.mode,et,At),Ae.return=Re,Ae):(Ae=A(Ae,Le),Ae.return=Re,Ae)}function Ye(Re,Ae,Le){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Ae=ag(""+Ae,Re.mode,Le),Ae.return=Re,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case oe:return Le=wp(Ae.type,Ae.key,Ae.props,null,Re.mode,Le),Le.ref=Gt(Re,null,Ae),Le.return=Re,Le;case ce:return Ae=lg(Ae,Re.mode,Le),Ae.return=Re,Ae;case se:var et=Ae._init;return Ye(Re,et(Ae._payload),Le)}if(ot(Ae)||xe(Ae))return Ae=ru(Ae,Re.mode,Le,null),Ae.return=Re,Ae;cr(Re,Ae)}return null}function Ke(Re,Ae,Le,et){var At=Ae!==null?Ae.key:null;if(typeof Le=="string"&&Le!==""||typeof Le=="number")return At!==null?null:me(Re,Ae,""+Le,et);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case oe:return Le.key===At?Se(Re,Ae,Le,et):null;case ce:return Le.key===At?Fe(Re,Ae,Le,et):null;case se:return At=Le._init,Ke(Re,Ae,At(Le._payload),et)}if(ot(Le)||xe(Le))return At!==null?null:Je(Re,Ae,Le,et,null);cr(Re,Le)}return null}function at(Re,Ae,Le,et,At){if(typeof et=="string"&&et!==""||typeof et=="number")return Re=Re.get(Le)||null,me(Ae,Re,""+et,At);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case oe:return Re=Re.get(et.key===null?Le:et.key)||null,Se(Ae,Re,et,At);case ce:return Re=Re.get(et.key===null?Le:et.key)||null,Fe(Ae,Re,et,At);case se:var Vt=et._init;return at(Re,Ae,Le,Vt(et._payload),At)}if(ot(et)||xe(et))return Re=Re.get(Le)||null,Je(Ae,Re,et,At,null);cr(Ae,et)}return null}function gt(Re,Ae,Le,et){for(var At=null,Vt=null,Ot=Ae,Yt=Ae=0,Ii=null;Ot!==null&&Yt<Le.length;Yt++){Ot.index>Yt?(Ii=Ot,Ot=null):Ii=Ot.sibling;var kr=Ke(Re,Ot,Le[Yt],et);if(kr===null){Ot===null&&(Ot=Ii);break}a&&Ot&&kr.alternate===null&&c(Re,Ot),Ae=P(kr,Ae,Yt),Vt===null?At=kr:Vt.sibling=kr,Vt=kr,Ot=Ii}if(Yt===Le.length)return f(Re,Ot),$e&&Te(Re,Yt),At;if(Ot===null){for(;Yt<Le.length;Yt++)Ot=Ye(Re,Le[Yt],et),Ot!==null&&(Ae=P(Ot,Ae,Yt),Vt===null?At=Ot:Vt.sibling=Ot,Vt=Ot);return $e&&Te(Re,Yt),At}for(Ot=y(Re,Ot);Yt<Le.length;Yt++)Ii=at(Ot,Re,Yt,Le[Yt],et),Ii!==null&&(a&&Ii.alternate!==null&&Ot.delete(Ii.key===null?Yt:Ii.key),Ae=P(Ii,Ae,Yt),Vt===null?At=Ii:Vt.sibling=Ii,Vt=Ii);return a&&Ot.forEach(function(oc){return c(Re,oc)}),$e&&Te(Re,Yt),At}function bt(Re,Ae,Le,et){var At=xe(Le);if(typeof At!="function")throw Error(t(150));if(Le=At.call(Le),Le==null)throw Error(t(151));for(var Vt=At=null,Ot=Ae,Yt=Ae=0,Ii=null,kr=Le.next();Ot!==null&&!kr.done;Yt++,kr=Le.next()){Ot.index>Yt?(Ii=Ot,Ot=null):Ii=Ot.sibling;var oc=Ke(Re,Ot,kr.value,et);if(oc===null){Ot===null&&(Ot=Ii);break}a&&Ot&&oc.alternate===null&&c(Re,Ot),Ae=P(oc,Ae,Yt),Vt===null?At=oc:Vt.sibling=oc,Vt=oc,Ot=Ii}if(kr.done)return f(Re,Ot),$e&&Te(Re,Yt),At;if(Ot===null){for(;!kr.done;Yt++,kr=Le.next())kr=Ye(Re,kr.value,et),kr!==null&&(Ae=P(kr,Ae,Yt),Vt===null?At=kr:Vt.sibling=kr,Vt=kr);return $e&&Te(Re,Yt),At}for(Ot=y(Re,Ot);!kr.done;Yt++,kr=Le.next())kr=at(Ot,Re,Yt,kr.value,et),kr!==null&&(a&&kr.alternate!==null&&Ot.delete(kr.key===null?Yt:kr.key),Ae=P(kr,Ae,Yt),Vt===null?At=kr:Vt.sibling=kr,Vt=kr);return a&&Ot.forEach(function(wT){return c(Re,wT)}),$e&&Te(Re,Yt),At}function Hn(Re,Ae,Le,et){if(typeof Le=="object"&&Le!==null&&Le.type===D&&Le.key===null&&(Le=Le.props.children),typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case oe:e:{for(var At=Le.key,Vt=Ae;Vt!==null;){if(Vt.key===At){if(At=Le.type,At===D){if(Vt.tag===7){f(Re,Vt.sibling),Ae=A(Vt,Le.props.children),Ae.return=Re,Re=Ae;break e}}else if(Vt.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===se&&Zr(At)===Vt.type){f(Re,Vt.sibling),Ae=A(Vt,Le.props),Ae.ref=Gt(Re,Vt,Le),Ae.return=Re,Re=Ae;break e}f(Re,Vt);break}else c(Re,Vt);Vt=Vt.sibling}Le.type===D?(Ae=ru(Le.props.children,Re.mode,et,Le.key),Ae.return=Re,Re=Ae):(et=wp(Le.type,Le.key,Le.props,null,Re.mode,et),et.ref=Gt(Re,Ae,Le),et.return=Re,Re=et)}return K(Re);case ce:e:{for(Vt=Le.key;Ae!==null;){if(Ae.key===Vt)if(Ae.tag===4&&Ae.stateNode.containerInfo===Le.containerInfo&&Ae.stateNode.implementation===Le.implementation){f(Re,Ae.sibling),Ae=A(Ae,Le.children||[]),Ae.return=Re,Re=Ae;break e}else{f(Re,Ae);break}else c(Re,Ae);Ae=Ae.sibling}Ae=lg(Le,Re.mode,et),Ae.return=Re,Re=Ae}return K(Re);case se:return Vt=Le._init,Hn(Re,Ae,Vt(Le._payload),et)}if(ot(Le))return gt(Re,Ae,Le,et);if(xe(Le))return bt(Re,Ae,Le,et);cr(Re,Le)}return typeof Le=="string"&&Le!==""||typeof Le=="number"?(Le=""+Le,Ae!==null&&Ae.tag===6?(f(Re,Ae.sibling),Ae=A(Ae,Le),Ae.return=Re,Re=Ae):(f(Re,Ae),Ae=ag(Le,Re.mode,et),Ae.return=Re,Re=Ae),K(Re)):f(Re,Ae)}return Hn}var Rn=ei(!0),ln=ei(!1),Un=ls(null),ti=null,on=null,pr=null;function _r(){pr=on=ti=null}function sn(a){var c=Un.current;Pr(Un),a._currentValue=c}function Tr(a,c,f){for(;a!==null;){var y=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),a===f)break;a=a.return}}function gn(a,c){ti=a,pr=on=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(qo=!0),a.firstContext=null)}function yn(a){var c=a._currentValue;if(pr!==a)if(a={context:a,memoizedValue:c,next:null},on===null){if(ti===null)throw Error(t(308));on=a,ti.dependencies={lanes:0,firstContext:a}}else on=on.next=a;return c}var $r=null;function Ti(a){$r===null?$r=[a]:$r.push(a)}function Fr(a,c,f,y){var A=c.interleaved;return A===null?(f.next=f,Ti(c)):(f.next=A.next,A.next=f),c.interleaved=f,Ur(a,y)}function Ur(a,c){a.lanes|=c;var f=a.alternate;for(f!==null&&(f.lanes|=c),f=a,a=a.return;a!==null;)a.childLanes|=c,f=a.alternate,f!==null&&(f.childLanes|=c),f=a,a=a.return;return f.tag===3?f.stateNode:null}var Pn=!1;function ui(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function no(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function An(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function Cn(a,c,f){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(Ar&2)!==0){var A=y.pending;return A===null?c.next=c:(c.next=A.next,A.next=c),y.pending=c,Ur(a,f)}return A=y.interleaved,A===null?(c.next=c,Ti(y)):(c.next=A.next,A.next=c),y.interleaved=c,Ur(a,f)}function Ai(a,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194240)!==0)){var y=c.lanes;y&=a.pendingLanes,f|=y,c.lanes=f,Sa(a,f)}}function qr(a,c){var f=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,f===y)){var A=null,P=null;if(f=f.firstBaseUpdate,f!==null){do{var K={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};P===null?A=P=K:P=P.next=K,f=f.next}while(f!==null);P===null?A=P=c:P=P.next=c}else A=P=c;f={baseState:y.baseState,firstBaseUpdate:A,lastBaseUpdate:P,shared:y.shared,effects:y.effects},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=c}function Ci(a,c,f,y){var A=a.updateQueue;Pn=!1;var P=A.firstBaseUpdate,K=A.lastBaseUpdate,me=A.shared.pending;if(me!==null){A.shared.pending=null;var Se=me,Fe=Se.next;Se.next=null,K===null?P=Fe:K.next=Fe,K=Se;var Je=a.alternate;Je!==null&&(Je=Je.updateQueue,me=Je.lastBaseUpdate,me!==K&&(me===null?Je.firstBaseUpdate=Fe:me.next=Fe,Je.lastBaseUpdate=Se))}if(P!==null){var Ye=A.baseState;K=0,Je=Fe=Se=null,me=P;do{var Ke=me.lane,at=me.eventTime;if((y&Ke)===Ke){Je!==null&&(Je=Je.next={eventTime:at,lane:0,tag:me.tag,payload:me.payload,callback:me.callback,next:null});e:{var gt=a,bt=me;switch(Ke=c,at=f,bt.tag){case 1:if(gt=bt.payload,typeof gt=="function"){Ye=gt.call(at,Ye,Ke);break e}Ye=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=bt.payload,Ke=typeof gt=="function"?gt.call(at,Ye,Ke):gt,Ke==null)break e;Ye=be({},Ye,Ke);break e;case 2:Pn=!0}}me.callback!==null&&me.lane!==0&&(a.flags|=64,Ke=A.effects,Ke===null?A.effects=[me]:Ke.push(me))}else at={eventTime:at,lane:Ke,tag:me.tag,payload:me.payload,callback:me.callback,next:null},Je===null?(Fe=Je=at,Se=Ye):Je=Je.next=at,K|=Ke;if(me=me.next,me===null){if(me=A.shared.pending,me===null)break;Ke=me,me=Ke.next,Ke.next=null,A.lastBaseUpdate=Ke,A.shared.pending=null}}while(!0);if(Je===null&&(Se=Ye),A.baseState=Se,A.firstBaseUpdate=Fe,A.lastBaseUpdate=Je,c=A.shared.interleaved,c!==null){A=c;do K|=A.lane,A=A.next;while(A!==c)}else P===null&&(A.shared.lanes=0);Xc|=K,a.lanes=K,a.memoizedState=Ye}}function Uo(a,c,f){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var y=a[c],A=y.callback;if(A!==null){if(y.callback=null,y=f,typeof A!="function")throw Error(t(191,A));A.call(y)}}}var cs={},ri=ls(cs),kn=ls(cs),La=ls(cs);function oa(a){if(a===cs)throw Error(t(174));return a}function Jl(a,c){switch(Lr(La,c),Lr(kn,a),Lr(ri,cs),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:vr(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=vr(c,a)}Pr(ri),Lr(ri,c)}function Bs(){Pr(ri),Pr(kn),Pr(La)}function rp(a){oa(La.current);var c=oa(ri.current),f=vr(c,a.type);c!==f&&(Lr(kn,a),Lr(ri,f))}function _h(a){kn.current===a&&(Pr(ri),Pr(kn))}var rn=ls(0);function us(a){for(var c=a;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Th=[];function Ah(){for(var a=0;a<Th.length;a++)Th[a]._workInProgressVersionPrimary=null;Th.length=0}var Xu=F.ReactCurrentDispatcher,Zu=F.ReactCurrentBatchConfig,Ls=0,an=null,Nn=null,In=null,Yl=!1,sa=!1,Ql=0,N0=0;function qn(){throw Error(t(321))}function ed(a,c){if(c===null)return!1;for(var f=0;f<c.length&&f<a.length;f++)if(!fn(a[f],c[f]))return!1;return!0}function Jc(a,c,f,y,A,P){if(Ls=P,an=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Xu.current=a===null||a.memoizedState===null?G4:K4,a=f(y,A),sa){P=0;do{if(sa=!1,Ql=0,25<=P)throw Error(t(301));P+=1,In=Nn=null,c.updateQueue=null,Xu.current=J4,a=f(y,A)}while(sa)}if(Xu.current=ap,c=Nn!==null&&Nn.next!==null,Ls=0,In=Nn=an=null,Yl=!1,c)throw Error(t(300));return a}function Fs(){var a=Ql!==0;return Ql=0,a}function ds(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?an.memoizedState=In=a:In=In.next=a,In}function Ao(){if(Nn===null){var a=an.alternate;a=a!==null?a.memoizedState:null}else a=Nn.next;var c=In===null?an.memoizedState:In.next;if(c!==null)In=c,Nn=a;else{if(a===null)throw Error(t(310));Nn=a,a={memoizedState:Nn.memoizedState,baseState:Nn.baseState,baseQueue:Nn.baseQueue,queue:Nn.queue,next:null},In===null?an.memoizedState=In=a:In=In.next=a}return In}function Yc(a,c){return typeof c=="function"?c(a):c}function td(a){var c=Ao(),f=c.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var y=Nn,A=y.baseQueue,P=f.pending;if(P!==null){if(A!==null){var K=A.next;A.next=P.next,P.next=K}y.baseQueue=A=P,f.pending=null}if(A!==null){P=A.next,y=y.baseState;var me=K=null,Se=null,Fe=P;do{var Je=Fe.lane;if((Ls&Je)===Je)Se!==null&&(Se=Se.next={lane:0,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),y=Fe.hasEagerState?Fe.eagerState:a(y,Fe.action);else{var Ye={lane:Je,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null};Se===null?(me=Se=Ye,K=y):Se=Se.next=Ye,an.lanes|=Je,Xc|=Je}Fe=Fe.next}while(Fe!==null&&Fe!==P);Se===null?K=y:Se.next=me,fn(y,c.memoizedState)||(qo=!0),c.memoizedState=y,c.baseState=K,c.baseQueue=Se,f.lastRenderedState=y}if(a=f.interleaved,a!==null){A=a;do P=A.lane,an.lanes|=P,Xc|=P,A=A.next;while(A!==a)}else A===null&&(f.lanes=0);return[c.memoizedState,f.dispatch]}function Fa(a){var c=Ao(),f=c.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var y=f.dispatch,A=f.pending,P=c.memoizedState;if(A!==null){f.pending=null;var K=A=A.next;do P=a(P,K.action),K=K.next;while(K!==A);fn(P,c.memoizedState)||(qo=!0),c.memoizedState=P,c.baseQueue===null&&(c.baseState=P),f.lastRenderedState=P}return[P,y]}function np(){}function Ch(a,c){var f=an,y=Ao(),A=c(),P=!fn(y.memoizedState,A);if(P&&(y.memoizedState=A,qo=!0),y=y.queue,id(op.bind(null,f,y,a),[a]),y.getSnapshot!==c||P||In!==null&&In.memoizedState.tag&1){if(f.flags|=2048,Co(9,kh.bind(null,f,y,A,c),void 0,null),ki===null)throw Error(t(349));(Ls&30)!==0||ip(f,c,A)}return A}function ip(a,c,f){a.flags|=16384,a={getSnapshot:c,value:f},c=an.updateQueue,c===null?(c={lastEffect:null,stores:null},an.updateQueue=c,c.stores=[a]):(f=c.stores,f===null?c.stores=[a]:f.push(a))}function kh(a,c,f,y){c.value=f,c.getSnapshot=y,Xl(c)&&rd(a)}function op(a,c,f){return f(function(){Xl(c)&&rd(a)})}function Xl(a){var c=a.getSnapshot;a=a.value;try{var f=c();return!fn(a,f)}catch{return!0}}function rd(a){var c=Ur(a,1);c!==null&&da(c,a,1,-1)}function Qc(a){var c=ds();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yc,lastRenderedState:a},c.queue=a,a=a.dispatch=H4.bind(null,an,a),[c.memoizedState,a]}function Co(a,c,f,y){return a={tag:a,create:c,destroy:f,deps:y,next:null},c=an.updateQueue,c===null?(c={lastEffect:null,stores:null},an.updateQueue=c,c.lastEffect=a.next=a):(f=c.lastEffect,f===null?c.lastEffect=a.next=a:(y=f.next,f.next=a,a.next=y,c.lastEffect=a)),a}function aa(){return Ao().memoizedState}function hs(a,c,f,y){var A=ds();an.flags|=a,A.memoizedState=Co(1|c,f,void 0,y===void 0?null:y)}function yl(a,c,f,y){var A=Ao();y=y===void 0?null:y;var P=void 0;if(Nn!==null){var K=Nn.memoizedState;if(P=K.destroy,y!==null&&ed(y,K.deps)){A.memoizedState=Co(c,f,P,y);return}}an.flags|=a,A.memoizedState=Co(1|c,f,P,y)}function nd(a,c){return hs(8390656,8,a,c)}function id(a,c){return yl(2048,8,a,c)}function sp(a,c){return yl(4,2,a,c)}function od(a,c){return yl(4,4,a,c)}function sd(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function c2(a,c,f){return f=f!=null?f.concat([a]):null,yl(4,4,sd.bind(null,c,a),f)}function B0(){}function u2(a,c){var f=Ao();c=c===void 0?null:c;var y=f.memoizedState;return y!==null&&c!==null&&ed(c,y[1])?y[0]:(f.memoizedState=[a,c],a)}function d2(a,c){var f=Ao();c=c===void 0?null:c;var y=f.memoizedState;return y!==null&&c!==null&&ed(c,y[1])?y[0]:(a=a(),f.memoizedState=[a,c],a)}function h2(a,c,f){return(Ls&21)===0?(a.baseState&&(a.baseState=!1,qo=!0),a.memoizedState=f):(fn(f,c)||(f=Xa(),an.lanes|=f,Xc|=f,a.baseState=!0),c)}function U4(a,c){var f=or;or=f!==0&&4>f?f:4,a(!0);var y=Zu.transition;Zu.transition={};try{a(!1),c()}finally{or=f,Zu.transition=y}}function f2(){return Ao().memoizedState}function q4(a,c,f){var y=rc(a);if(f={lane:y,action:f,hasEagerState:!1,eagerState:null,next:null},p2(a))m2(c,f);else if(f=Fr(a,c,f,y),f!==null){var A=Io();da(f,a,y,A),g2(f,c,y)}}function H4(a,c,f){var y=rc(a),A={lane:y,action:f,hasEagerState:!1,eagerState:null,next:null};if(p2(a))m2(c,A);else{var P=a.alternate;if(a.lanes===0&&(P===null||P.lanes===0)&&(P=c.lastRenderedReducer,P!==null))try{var K=c.lastRenderedState,me=P(K,f);if(A.hasEagerState=!0,A.eagerState=me,fn(me,K)){var Se=c.interleaved;Se===null?(A.next=A,Ti(c)):(A.next=Se.next,Se.next=A),c.interleaved=A;return}}catch{}finally{}f=Fr(a,c,A,y),f!==null&&(A=Io(),da(f,a,y,A),g2(f,c,y))}}function p2(a){var c=a.alternate;return a===an||c!==null&&c===an}function m2(a,c){sa=Yl=!0;var f=a.pending;f===null?c.next=c:(c.next=f.next,f.next=c),a.pending=c}function g2(a,c,f){if((f&4194240)!==0){var y=c.lanes;y&=a.pendingLanes,f|=y,c.lanes=f,Sa(a,f)}}var ap={readContext:yn,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useInsertionEffect:qn,useLayoutEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useMutableSource:qn,useSyncExternalStore:qn,useId:qn,unstable_isNewReconciler:!1},G4={readContext:yn,useCallback:function(a,c){return ds().memoizedState=[a,c===void 0?null:c],a},useContext:yn,useEffect:nd,useImperativeHandle:function(a,c,f){return f=f!=null?f.concat([a]):null,hs(4194308,4,sd.bind(null,c,a),f)},useLayoutEffect:function(a,c){return hs(4194308,4,a,c)},useInsertionEffect:function(a,c){return hs(4,2,a,c)},useMemo:function(a,c){var f=ds();return c=c===void 0?null:c,a=a(),f.memoizedState=[a,c],a},useReducer:function(a,c,f){var y=ds();return c=f!==void 0?f(c):c,y.memoizedState=y.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},y.queue=a,a=a.dispatch=q4.bind(null,an,a),[y.memoizedState,a]},useRef:function(a){var c=ds();return a={current:a},c.memoizedState=a},useState:Qc,useDebugValue:B0,useDeferredValue:function(a){return ds().memoizedState=a},useTransition:function(){var a=Qc(!1),c=a[0];return a=U4.bind(null,a[1]),ds().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,f){var y=an,A=ds();if($e){if(f===void 0)throw Error(t(407));f=f()}else{if(f=c(),ki===null)throw Error(t(349));(Ls&30)!==0||ip(y,c,f)}A.memoizedState=f;var P={value:f,getSnapshot:c};return A.queue=P,nd(op.bind(null,y,P,a),[a]),y.flags|=2048,Co(9,kh.bind(null,y,P,f,c),void 0,null),f},useId:function(){var a=ds(),c=ki.identifierPrefix;if($e){var f=le,y=Ee;f=(y&~(1<<32-Xn(y)-1)).toString(32)+f,c=":"+c+"R"+f,f=Ql++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=N0++,c=":"+c+"r"+f.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},K4={readContext:yn,useCallback:u2,useContext:yn,useEffect:id,useImperativeHandle:c2,useInsertionEffect:sp,useLayoutEffect:od,useMemo:d2,useReducer:td,useRef:aa,useState:function(){return td(Yc)},useDebugValue:B0,useDeferredValue:function(a){var c=Ao();return h2(c,Nn.memoizedState,a)},useTransition:function(){var a=td(Yc)[0],c=Ao().memoizedState;return[a,c]},useMutableSource:np,useSyncExternalStore:Ch,useId:f2,unstable_isNewReconciler:!1},J4={readContext:yn,useCallback:u2,useContext:yn,useEffect:id,useImperativeHandle:c2,useInsertionEffect:sp,useLayoutEffect:od,useMemo:d2,useReducer:Fa,useRef:aa,useState:function(){return Fa(Yc)},useDebugValue:B0,useDeferredValue:function(a){var c=Ao();return Nn===null?c.memoizedState=a:h2(c,Nn.memoizedState,a)},useTransition:function(){var a=Fa(Yc)[0],c=Ao().memoizedState;return[a,c]},useMutableSource:np,useSyncExternalStore:Ch,useId:f2,unstable_isNewReconciler:!1};function la(a,c){if(a&&a.defaultProps){c=be({},c),a=a.defaultProps;for(var f in a)c[f]===void 0&&(c[f]=a[f]);return c}return c}function L0(a,c,f,y){c=a.memoizedState,f=f(y,c),f=f==null?c:be({},c,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var lp={isMounted:function(a){return(a=a._reactInternals)?wn(a)===a:!1},enqueueSetState:function(a,c,f){a=a._reactInternals;var y=Io(),A=rc(a),P=An(y,A);P.payload=c,f!=null&&(P.callback=f),c=Cn(a,P,A),c!==null&&(da(c,a,A,y),Ai(c,a,A))},enqueueReplaceState:function(a,c,f){a=a._reactInternals;var y=Io(),A=rc(a),P=An(y,A);P.tag=1,P.payload=c,f!=null&&(P.callback=f),c=Cn(a,P,A),c!==null&&(da(c,a,A,y),Ai(c,a,A))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var f=Io(),y=rc(a),A=An(f,y);A.tag=2,c!=null&&(A.callback=c),c=Cn(a,A,y),c!==null&&(da(c,a,y,f),Ai(c,a,y))}};function y2(a,c,f,y,A,P,K){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,P,K):c.prototype&&c.prototype.isPureReactComponent?!Xi(f,y)||!Xi(A,P):!0}function x2(a,c,f){var y=!1,A=Ba,P=c.contextType;return typeof P=="object"&&P!==null?P=yn(P):(A=ro(c)?ml:ci.current,y=c.contextTypes,P=(y=y!=null)?Kl(a,A):Ba),c=new c(f,P),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=lp,a.stateNode=c,c._reactInternals=a,y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=A,a.__reactInternalMemoizedMaskedChildContext=P),c}function v2(a,c,f,y){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,y),c.state!==a&&lp.enqueueReplaceState(c,c.state,null)}function F0(a,c,f,y){var A=a.stateNode;A.props=f,A.state=a.memoizedState,A.refs={},ui(a);var P=c.contextType;typeof P=="object"&&P!==null?A.context=yn(P):(P=ro(c)?ml:ci.current,A.context=Kl(a,P)),A.state=a.memoizedState,P=c.getDerivedStateFromProps,typeof P=="function"&&(L0(a,c,P,f),A.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(c=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),c!==A.state&&lp.enqueueReplaceState(A,A.state,null),Ci(a,f,A,y),A.state=a.memoizedState),typeof A.componentDidMount=="function"&&(a.flags|=4194308)}function ad(a,c){try{var f="",y=c;do f+=he(y),y=y.return;while(y);var A=f}catch(P){A=`
Error generating stack: `+P.message+`
`+P.stack}return{value:a,source:c,stack:A,digest:null}}function z0(a,c,f){return{value:a,source:null,stack:f??null,digest:c??null}}function V0(a,c){try{console.error(c.value)}catch(f){setTimeout(function(){throw f})}}var Y4=typeof WeakMap=="function"?WeakMap:Map;function b2(a,c,f){f=An(-1,f),f.tag=3,f.payload={element:null};var y=c.value;return f.callback=function(){mp||(mp=!0,Z0=y),V0(a,c)},f}function w2(a,c,f){f=An(-1,f),f.tag=3;var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var A=c.value;f.payload=function(){return y(A)},f.callback=function(){V0(a,c)}}var P=a.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(f.callback=function(){V0(a,c),typeof y!="function"&&(ec===null?ec=new Set([this]):ec.add(this));var K=c.stack;this.componentDidCatch(c.value,{componentStack:K!==null?K:""})}),f}function S2(a,c,f){var y=a.pingCache;if(y===null){y=a.pingCache=new Y4;var A=new Set;y.set(c,A)}else A=y.get(c),A===void 0&&(A=new Set,y.set(c,A));A.has(f)||(A.add(f),a=uT.bind(null,a,c,f),c.then(a,a))}function _2(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function T2(a,c,f,y,A){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(c=An(-1,1),c.tag=2,Cn(f,c,1))),f.lanes|=1),a):(a.flags|=65536,a.lanes=A,a)}var Q4=F.ReactCurrentOwner,qo=!1;function ko(a,c,f,y){c.child=a===null?ln(c,null,f,y):Rn(c,a.child,f,y)}function A2(a,c,f,y,A){f=f.render;var P=c.ref;return gn(c,A),y=Jc(a,c,f,y,P,A),f=Fs(),a!==null&&!qo?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~A,xl(a,c,A)):($e&&f&&Me(c),c.flags|=1,ko(a,c,y,A),c.child)}function C2(a,c,f,y,A){if(a===null){var P=f.type;return typeof P=="function"&&!sg(P)&&P.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(c.tag=15,c.type=P,k2(a,c,P,y,A)):(a=wp(f.type,null,y,c,c.mode,A),a.ref=c.ref,a.return=c,c.child=a)}if(P=a.child,(a.lanes&A)===0){var K=P.memoizedProps;if(f=f.compare,f=f!==null?f:Xi,f(K,y)&&a.ref===c.ref)return xl(a,c,A)}return c.flags|=1,a=ic(P,y),a.ref=c.ref,a.return=c,c.child=a}function k2(a,c,f,y,A){if(a!==null){var P=a.memoizedProps;if(Xi(P,y)&&a.ref===c.ref)if(qo=!1,c.pendingProps=y=P,(a.lanes&A)!==0)(a.flags&131072)!==0&&(qo=!0);else return c.lanes=a.lanes,xl(a,c,A)}return O0(a,c,f,y,A)}function I2(a,c,f){var y=c.pendingProps,A=y.children,P=a!==null?a.memoizedState:null;if(y.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lr(cd,fs),fs|=f;else{if((f&1073741824)===0)return a=P!==null?P.baseLanes|f:f,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,Lr(cd,fs),fs|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=P!==null?P.baseLanes:f,Lr(cd,fs),fs|=y}else P!==null?(y=P.baseLanes|f,c.memoizedState=null):y=f,Lr(cd,fs),fs|=y;return ko(a,c,A,f),c.child}function E2(a,c){var f=c.ref;(a===null&&f!==null||a!==null&&a.ref!==f)&&(c.flags|=512,c.flags|=2097152)}function O0(a,c,f,y,A){var P=ro(f)?ml:ci.current;return P=Kl(c,P),gn(c,A),f=Jc(a,c,f,y,P,A),y=Fs(),a!==null&&!qo?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~A,xl(a,c,A)):($e&&y&&Me(c),c.flags|=1,ko(a,c,f,A),c.child)}function j2(a,c,f,y,A){if(ro(f)){var P=!0;gl(c)}else P=!1;if(gn(c,A),c.stateNode===null)up(a,c),x2(c,f,y),F0(c,f,y,A),y=!0;else if(a===null){var K=c.stateNode,me=c.memoizedProps;K.props=me;var Se=K.context,Fe=f.contextType;typeof Fe=="object"&&Fe!==null?Fe=yn(Fe):(Fe=ro(f)?ml:ci.current,Fe=Kl(c,Fe));var Je=f.getDerivedStateFromProps,Ye=typeof Je=="function"||typeof K.getSnapshotBeforeUpdate=="function";Ye||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(me!==y||Se!==Fe)&&v2(c,K,y,Fe),Pn=!1;var Ke=c.memoizedState;K.state=Ke,Ci(c,y,K,A),Se=c.memoizedState,me!==y||Ke!==Se||to.current||Pn?(typeof Je=="function"&&(L0(c,f,Je,y),Se=c.memoizedState),(me=Pn||y2(c,f,me,y,Ke,Se,Fe))?(Ye||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(c.flags|=4194308)):(typeof K.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=Se),K.props=y,K.state=Se,K.context=Fe,y=me):(typeof K.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{K=c.stateNode,no(a,c),me=c.memoizedProps,Fe=c.type===c.elementType?me:la(c.type,me),K.props=Fe,Ye=c.pendingProps,Ke=K.context,Se=f.contextType,typeof Se=="object"&&Se!==null?Se=yn(Se):(Se=ro(f)?ml:ci.current,Se=Kl(c,Se));var at=f.getDerivedStateFromProps;(Je=typeof at=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(me!==Ye||Ke!==Se)&&v2(c,K,y,Se),Pn=!1,Ke=c.memoizedState,K.state=Ke,Ci(c,y,K,A);var gt=c.memoizedState;me!==Ye||Ke!==gt||to.current||Pn?(typeof at=="function"&&(L0(c,f,at,y),gt=c.memoizedState),(Fe=Pn||y2(c,f,Fe,y,Ke,gt,Se)||!1)?(Je||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(y,gt,Se),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(y,gt,Se)),typeof K.componentDidUpdate=="function"&&(c.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof K.componentDidUpdate!="function"||me===a.memoizedProps&&Ke===a.memoizedState||(c.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||me===a.memoizedProps&&Ke===a.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=gt),K.props=y,K.state=gt,K.context=Se,y=Fe):(typeof K.componentDidUpdate!="function"||me===a.memoizedProps&&Ke===a.memoizedState||(c.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||me===a.memoizedProps&&Ke===a.memoizedState||(c.flags|=1024),y=!1)}return M0(a,c,f,y,P,A)}function M0(a,c,f,y,A,P){E2(a,c);var K=(c.flags&128)!==0;if(!y&&!K)return A&&tp(c,f,!1),xl(a,c,P);y=c.stateNode,Q4.current=c;var me=K&&typeof f.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,a!==null&&K?(c.child=Rn(c,a.child,null,P),c.child=Rn(c,null,me,P)):ko(a,c,me,P),c.memoizedState=y.state,A&&tp(c,f,!0),c.child}function R2(a){var c=a.stateNode;c.pendingContext?ep(a,c.pendingContext,c.pendingContext!==c.context):c.context&&ep(a,c.context,!1),Jl(a,c.containerInfo)}function P2(a,c,f,y,A){return ut(),it(A),c.flags|=256,ko(a,c,f,y),c.child}var D0={dehydrated:null,treeContext:null,retryLane:0};function W0(a){return{baseLanes:a,cachePool:null,transitions:null}}function N2(a,c,f){var y=c.pendingProps,A=rn.current,P=!1,K=(c.flags&128)!==0,me;if((me=K)||(me=a!==null&&a.memoizedState===null?!1:(A&2)!==0),me?(P=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(A|=1),Lr(rn,A&1),a===null)return ft(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(K=y.children,a=y.fallback,P?(y=c.mode,P=c.child,K={mode:"hidden",children:K},(y&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=K):P=Sp(K,y,0,null),a=ru(a,y,f,null),P.return=c,a.return=c,P.sibling=a,c.child=P,c.child.memoizedState=W0(f),c.memoizedState=D0,a):$0(c,K));if(A=a.memoizedState,A!==null&&(me=A.dehydrated,me!==null))return X4(a,c,K,y,me,A,f);if(P){P=y.fallback,K=c.mode,A=a.child,me=A.sibling;var Se={mode:"hidden",children:y.children};return(K&1)===0&&c.child!==A?(y=c.child,y.childLanes=0,y.pendingProps=Se,c.deletions=null):(y=ic(A,Se),y.subtreeFlags=A.subtreeFlags&14680064),me!==null?P=ic(me,P):(P=ru(P,K,f,null),P.flags|=2),P.return=c,y.return=c,y.sibling=P,c.child=y,y=P,P=c.child,K=a.child.memoizedState,K=K===null?W0(f):{baseLanes:K.baseLanes|f,cachePool:null,transitions:K.transitions},P.memoizedState=K,P.childLanes=a.childLanes&~f,c.memoizedState=D0,y}return P=a.child,a=P.sibling,y=ic(P,{mode:"visible",children:y.children}),(c.mode&1)===0&&(y.lanes=f),y.return=c,y.sibling=null,a!==null&&(f=c.deletions,f===null?(c.deletions=[a],c.flags|=16):f.push(a)),c.child=y,c.memoizedState=null,y}function $0(a,c){return c=Sp({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function cp(a,c,f,y){return y!==null&&it(y),Rn(c,a.child,null,f),a=$0(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function X4(a,c,f,y,A,P,K){if(f)return c.flags&256?(c.flags&=-257,y=z0(Error(t(422))),cp(a,c,K,y)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(P=y.fallback,A=c.mode,y=Sp({mode:"visible",children:y.children},A,0,null),P=ru(P,A,K,null),P.flags|=2,y.return=c,P.return=c,y.sibling=P,c.child=y,(c.mode&1)!==0&&Rn(c,a.child,null,K),c.child.memoizedState=W0(K),c.memoizedState=D0,P);if((c.mode&1)===0)return cp(a,c,K,null);if(A.data==="$!"){if(y=A.nextSibling&&A.nextSibling.dataset,y)var me=y.dgst;return y=me,P=Error(t(419)),y=z0(P,y,void 0),cp(a,c,K,y)}if(me=(K&a.childLanes)!==0,qo||me){if(y=ki,y!==null){switch(K&-K){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=(A&(y.suspendedLanes|K))!==0?0:A,A!==0&&A!==P.retryLane&&(P.retryLane=A,Ur(a,A),da(y,a,A,-1))}return og(),y=z0(Error(t(421))),cp(a,c,K,y)}return A.data==="$?"?(c.flags|=128,c.child=a.child,c=dT.bind(null,a),A._reactRetry=c,null):(a=P.treeContext,Oe=Mi(A.nextSibling),Ve=c,$e=!0,qe=null,a!==null&&(ne[ae++]=Ee,ne[ae++]=le,ne[ae++]=we,Ee=a.id,le=a.overflow,we=c),c=$0(c,y.children),c.flags|=4096,c)}function B2(a,c,f){a.lanes|=c;var y=a.alternate;y!==null&&(y.lanes|=c),Tr(a.return,c,f)}function U0(a,c,f,y,A){var P=a.memoizedState;P===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:f,tailMode:A}:(P.isBackwards=c,P.rendering=null,P.renderingStartTime=0,P.last=y,P.tail=f,P.tailMode=A)}function L2(a,c,f){var y=c.pendingProps,A=y.revealOrder,P=y.tail;if(ko(a,c,y.children,f),y=rn.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&B2(a,f,c);else if(a.tag===19)B2(a,f,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}if(Lr(rn,y),(c.mode&1)===0)c.memoizedState=null;else switch(A){case"forwards":for(f=c.child,A=null;f!==null;)a=f.alternate,a!==null&&us(a)===null&&(A=f),f=f.sibling;f=A,f===null?(A=c.child,c.child=null):(A=f.sibling,f.sibling=null),U0(c,!1,A,f,P);break;case"backwards":for(f=null,A=c.child,c.child=null;A!==null;){if(a=A.alternate,a!==null&&us(a)===null){c.child=A;break}a=A.sibling,A.sibling=f,f=A,A=a}U0(c,!0,f,null,P);break;case"together":U0(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function up(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function xl(a,c,f){if(a!==null&&(c.dependencies=a.dependencies),Xc|=c.lanes,(f&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(t(153));if(c.child!==null){for(a=c.child,f=ic(a,a.pendingProps),c.child=f,f.return=c;a.sibling!==null;)a=a.sibling,f=f.sibling=ic(a,a.pendingProps),f.return=c;f.sibling=null}return c.child}function Z4(a,c,f){switch(c.tag){case 3:R2(c),ut();break;case 5:rp(c);break;case 1:ro(c.type)&&gl(c);break;case 4:Jl(c,c.stateNode.containerInfo);break;case 10:var y=c.type._context,A=c.memoizedProps.value;Lr(Un,y._currentValue),y._currentValue=A;break;case 13:if(y=c.memoizedState,y!==null)return y.dehydrated!==null?(Lr(rn,rn.current&1),c.flags|=128,null):(f&c.child.childLanes)!==0?N2(a,c,f):(Lr(rn,rn.current&1),a=xl(a,c,f),a!==null?a.sibling:null);Lr(rn,rn.current&1);break;case 19:if(y=(f&c.childLanes)!==0,(a.flags&128)!==0){if(y)return L2(a,c,f);c.flags|=128}if(A=c.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Lr(rn,rn.current),y)break;return null;case 22:case 23:return c.lanes=0,I2(a,c,f)}return xl(a,c,f)}var F2,q0,z2,V2;F2=function(a,c){for(var f=c.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},q0=function(){},z2=function(a,c,f,y){var A=a.memoizedProps;if(A!==y){a=c.stateNode,oa(ri.current);var P=null;switch(f){case"input":A=ze(a,A),y=ze(a,y),P=[];break;case"select":A=be({},A,{value:void 0}),y=be({},y,{value:void 0}),P=[];break;case"textarea":A=Jt(a,A),y=Jt(a,y),P=[];break;default:typeof A.onClick!="function"&&typeof y.onClick=="function"&&(a.onclick=ql)}sr(f,y);var K;f=null;for(Fe in A)if(!y.hasOwnProperty(Fe)&&A.hasOwnProperty(Fe)&&A[Fe]!=null)if(Fe==="style"){var me=A[Fe];for(K in me)me.hasOwnProperty(K)&&(f||(f={}),f[K]="")}else Fe!=="dangerouslySetInnerHTML"&&Fe!=="children"&&Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&Fe!=="autoFocus"&&(i.hasOwnProperty(Fe)?P||(P=[]):(P=P||[]).push(Fe,null));for(Fe in y){var Se=y[Fe];if(me=A!=null?A[Fe]:void 0,y.hasOwnProperty(Fe)&&Se!==me&&(Se!=null||me!=null))if(Fe==="style")if(me){for(K in me)!me.hasOwnProperty(K)||Se&&Se.hasOwnProperty(K)||(f||(f={}),f[K]="");for(K in Se)Se.hasOwnProperty(K)&&me[K]!==Se[K]&&(f||(f={}),f[K]=Se[K])}else f||(P||(P=[]),P.push(Fe,f)),f=Se;else Fe==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,me=me?me.__html:void 0,Se!=null&&me!==Se&&(P=P||[]).push(Fe,Se)):Fe==="children"?typeof Se!="string"&&typeof Se!="number"||(P=P||[]).push(Fe,""+Se):Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&(i.hasOwnProperty(Fe)?(Se!=null&&Fe==="onScroll"&&Wr("scroll",a),P||me===Se||(P=[])):(P=P||[]).push(Fe,Se))}f&&(P=P||[]).push("style",f);var Fe=P;(c.updateQueue=Fe)&&(c.flags|=4)}},V2=function(a,c,f,y){f!==y&&(c.flags|=4)};function Ih(a,c){if(!$e)switch(a.tailMode){case"hidden":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function io(a){var c=a.alternate!==null&&a.alternate.child===a.child,f=0,y=0;if(c)for(var A=a.child;A!==null;)f|=A.lanes|A.childLanes,y|=A.subtreeFlags&14680064,y|=A.flags&14680064,A.return=a,A=A.sibling;else for(A=a.child;A!==null;)f|=A.lanes|A.childLanes,y|=A.subtreeFlags,y|=A.flags,A.return=a,A=A.sibling;return a.subtreeFlags|=y,a.childLanes=f,c}function eT(a,c,f){var y=c.pendingProps;switch(Pe(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return io(c),null;case 1:return ro(c.type)&&Qu(),io(c),null;case 3:return y=c.stateNode,Bs(),Pr(to),Pr(ci),Ah(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(a===null||a.child===null)&&(mn(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,qe!==null&&(rg(qe),qe=null))),q0(a,c),io(c),null;case 5:_h(c);var A=oa(La.current);if(f=c.type,a!==null&&c.stateNode!=null)z2(a,c,f,y,A),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(t(166));return io(c),null}if(a=oa(ri.current),mn(c)){y=c.stateNode,f=c.type;var P=c.memoizedProps;switch(y[Ns]=c,y[Hl]=P,a=(c.mode&1)!==0,f){case"dialog":Wr("cancel",y),Wr("close",y);break;case"iframe":case"object":case"embed":Wr("load",y);break;case"video":case"audio":for(A=0;A<Pa.length;A++)Wr(Pa[A],y);break;case"source":Wr("error",y);break;case"img":case"image":case"link":Wr("error",y),Wr("load",y);break;case"details":Wr("toggle",y);break;case"input":de(y,P),Wr("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!P.multiple},Wr("invalid",y);break;case"textarea":_t(y,P),Wr("invalid",y)}sr(f,P),A=null;for(var K in P)if(P.hasOwnProperty(K)){var me=P[K];K==="children"?typeof me=="string"?y.textContent!==me&&(P.suppressHydrationWarning!==!0&&Yu(y.textContent,me,a),A=["children",me]):typeof me=="number"&&y.textContent!==""+me&&(P.suppressHydrationWarning!==!0&&Yu(y.textContent,me,a),A=["children",""+me]):i.hasOwnProperty(K)&&me!=null&&K==="onScroll"&&Wr("scroll",y)}switch(f){case"input":Ue(y),wt(y,P,!0);break;case"textarea":Ue(y),zt(y);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(y.onclick=ql)}y=A,c.updateQueue=y,y!==null&&(c.flags|=4)}else{K=A.nodeType===9?A:A.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=qt(f)),a==="http://www.w3.org/1999/xhtml"?f==="script"?(a=K.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof y.is=="string"?a=K.createElement(f,{is:y.is}):(a=K.createElement(f),f==="select"&&(K=a,y.multiple?K.multiple=!0:y.size&&(K.size=y.size))):a=K.createElementNS(a,f),a[Ns]=c,a[Hl]=y,F2(a,c,!1,!1),c.stateNode=a;e:{switch(K=It(f,y),f){case"dialog":Wr("cancel",a),Wr("close",a),A=y;break;case"iframe":case"object":case"embed":Wr("load",a),A=y;break;case"video":case"audio":for(A=0;A<Pa.length;A++)Wr(Pa[A],a);A=y;break;case"source":Wr("error",a),A=y;break;case"img":case"image":case"link":Wr("error",a),Wr("load",a),A=y;break;case"details":Wr("toggle",a),A=y;break;case"input":de(a,y),A=ze(a,y),Wr("invalid",a);break;case"option":A=y;break;case"select":a._wrapperState={wasMultiple:!!y.multiple},A=be({},y,{value:void 0}),Wr("invalid",a);break;case"textarea":_t(a,y),A=Jt(a,y),Wr("invalid",a);break;default:A=y}sr(f,A),me=A;for(P in me)if(me.hasOwnProperty(P)){var Se=me[P];P==="style"?ht(a,Se):P==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,Se!=null&&Tt(a,Se)):P==="children"?typeof Se=="string"?(f!=="textarea"||Se!=="")&&jt(a,Se):typeof Se=="number"&&jt(a,""+Se):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(i.hasOwnProperty(P)?Se!=null&&P==="onScroll"&&Wr("scroll",a):Se!=null&&$(a,P,Se,K))}switch(f){case"input":Ue(a),wt(a,y,!1);break;case"textarea":Ue(a),zt(a);break;case"option":y.value!=null&&a.setAttribute("value",""+fe(y.value));break;case"select":a.multiple=!!y.multiple,P=y.value,P!=null?rt(a,!!y.multiple,P,!1):y.defaultValue!=null&&rt(a,!!y.multiple,y.defaultValue,!0);break;default:typeof A.onClick=="function"&&(a.onclick=ql)}switch(f){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return io(c),null;case 6:if(a&&c.stateNode!=null)V2(a,c,a.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(t(166));if(f=oa(La.current),oa(ri.current),mn(c)){if(y=c.stateNode,f=c.memoizedProps,y[Ns]=c,(P=y.nodeValue!==f)&&(a=Ve,a!==null))switch(a.tag){case 3:Yu(y.nodeValue,f,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Yu(y.nodeValue,f,(a.mode&1)!==0)}P&&(c.flags|=4)}else y=(f.nodeType===9?f:f.ownerDocument).createTextNode(y),y[Ns]=c,c.stateNode=y}return io(c),null;case 13:if(Pr(rn),y=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if($e&&Oe!==null&&(c.mode&1)!==0&&(c.flags&128)===0)rr(),ut(),c.flags|=98560,P=!1;else if(P=mn(c),y!==null&&y.dehydrated!==null){if(a===null){if(!P)throw Error(t(318));if(P=c.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(t(317));P[Ns]=c}else ut(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;io(c),P=!1}else qe!==null&&(rg(qe),qe=null),P=!0;if(!P)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=f,c):(y=y!==null,y!==(a!==null&&a.memoizedState!==null)&&y&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(rn.current&1)!==0?di===0&&(di=3):og())),c.updateQueue!==null&&(c.flags|=4),io(c),null);case 4:return Bs(),q0(a,c),a===null&&dl(c.stateNode.containerInfo),io(c),null;case 10:return sn(c.type._context),io(c),null;case 17:return ro(c.type)&&Qu(),io(c),null;case 19:if(Pr(rn),P=c.memoizedState,P===null)return io(c),null;if(y=(c.flags&128)!==0,K=P.rendering,K===null)if(y)Ih(P,!1);else{if(di!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(K=us(a),K!==null){for(c.flags|=128,Ih(P,!1),y=K.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),c.subtreeFlags=0,y=f,f=c.child;f!==null;)P=f,a=y,P.flags&=14680066,K=P.alternate,K===null?(P.childLanes=0,P.lanes=a,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=K.childLanes,P.lanes=K.lanes,P.child=K.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=K.memoizedProps,P.memoizedState=K.memoizedState,P.updateQueue=K.updateQueue,P.type=K.type,a=K.dependencies,P.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),f=f.sibling;return Lr(rn,rn.current&1|2),c.child}a=a.sibling}P.tail!==null&&jr()>ud&&(c.flags|=128,y=!0,Ih(P,!1),c.lanes=4194304)}else{if(!y)if(a=us(K),a!==null){if(c.flags|=128,y=!0,f=a.updateQueue,f!==null&&(c.updateQueue=f,c.flags|=4),Ih(P,!0),P.tail===null&&P.tailMode==="hidden"&&!K.alternate&&!$e)return io(c),null}else 2*jr()-P.renderingStartTime>ud&&f!==1073741824&&(c.flags|=128,y=!0,Ih(P,!1),c.lanes=4194304);P.isBackwards?(K.sibling=c.child,c.child=K):(f=P.last,f!==null?f.sibling=K:c.child=K,P.last=K)}return P.tail!==null?(c=P.tail,P.rendering=c,P.tail=c.sibling,P.renderingStartTime=jr(),c.sibling=null,f=rn.current,Lr(rn,y?f&1|2:f&1),c):(io(c),null);case 22:case 23:return ig(),y=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==y&&(c.flags|=8192),y&&(c.mode&1)!==0?(fs&1073741824)!==0&&(io(c),c.subtreeFlags&6&&(c.flags|=8192)):io(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function tT(a,c){switch(Pe(c),c.tag){case 1:return ro(c.type)&&Qu(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Bs(),Pr(to),Pr(ci),Ah(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return _h(c),null;case 13:if(Pr(rn),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(t(340));ut()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return Pr(rn),null;case 4:return Bs(),null;case 10:return sn(c.type._context),null;case 22:case 23:return ig(),null;case 24:return null;default:return null}}var dp=!1,oo=!1,rT=typeof WeakSet=="function"?WeakSet:Set,dt=null;function ld(a,c){var f=a.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(y){Bn(a,c,y)}else f.current=null}function H0(a,c,f){try{f()}catch(y){Bn(a,c,y)}}var O2=!1;function nT(a,c){if(Hc=rs,a=jn(),as(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var y=f.getSelection&&f.getSelection();if(y&&y.rangeCount!==0){f=y.anchorNode;var A=y.anchorOffset,P=y.focusNode;y=y.focusOffset;try{f.nodeType,P.nodeType}catch{f=null;break e}var K=0,me=-1,Se=-1,Fe=0,Je=0,Ye=a,Ke=null;t:for(;;){for(var at;Ye!==f||A!==0&&Ye.nodeType!==3||(me=K+A),Ye!==P||y!==0&&Ye.nodeType!==3||(Se=K+y),Ye.nodeType===3&&(K+=Ye.nodeValue.length),(at=Ye.firstChild)!==null;)Ke=Ye,Ye=at;for(;;){if(Ye===a)break t;if(Ke===f&&++Fe===A&&(me=K),Ke===P&&++Je===y&&(Se=K),(at=Ye.nextSibling)!==null)break;Ye=Ke,Ke=Ye.parentNode}Ye=at}f=me===-1||Se===-1?null:{start:me,end:Se}}else f=null}f=f||{start:0,end:0}}else f=null;for(fl={focusedElem:a,selectionRange:f},rs=!1,dt=c;dt!==null;)if(c=dt,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,dt=a;else for(;dt!==null;){c=dt;try{var gt=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(gt!==null){var bt=gt.memoizedProps,Hn=gt.memoizedState,Re=c.stateNode,Ae=Re.getSnapshotBeforeUpdate(c.elementType===c.type?bt:la(c.type,bt),Hn);Re.__reactInternalSnapshotBeforeUpdate=Ae}break;case 3:var Le=c.stateNode.containerInfo;Le.nodeType===1?Le.textContent="":Le.nodeType===9&&Le.documentElement&&Le.removeChild(Le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(et){Bn(c,c.return,et)}if(a=c.sibling,a!==null){a.return=c.return,dt=a;break}dt=c.return}return gt=O2,O2=!1,gt}function Eh(a,c,f){var y=c.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var A=y=y.next;do{if((A.tag&a)===a){var P=A.destroy;A.destroy=void 0,P!==void 0&&H0(c,f,P)}A=A.next}while(A!==y)}}function hp(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&a)===a){var y=f.create;f.destroy=y()}f=f.next}while(f!==c)}}function G0(a){var c=a.ref;if(c!==null){var f=a.stateNode;switch(a.tag){case 5:a=f;break;default:a=f}typeof c=="function"?c(a):c.current=a}}function M2(a){var c=a.alternate;c!==null&&(a.alternate=null,M2(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[Ns],delete c[Hl],delete c[eo],delete c[R0],delete c[P0])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function D2(a){return a.tag===5||a.tag===3||a.tag===4}function W2(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||D2(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function K0(a,c,f){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?f.nodeType===8?f.parentNode.insertBefore(a,c):f.insertBefore(a,c):(f.nodeType===8?(c=f.parentNode,c.insertBefore(a,f)):(c=f,c.appendChild(a)),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=ql));else if(y!==4&&(a=a.child,a!==null))for(K0(a,c,f),a=a.sibling;a!==null;)K0(a,c,f),a=a.sibling}function J0(a,c,f){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?f.insertBefore(a,c):f.appendChild(a);else if(y!==4&&(a=a.child,a!==null))for(J0(a,c,f),a=a.sibling;a!==null;)J0(a,c,f),a=a.sibling}var Di=null,ca=!1;function Zl(a,c,f){for(f=f.child;f!==null;)$2(a,c,f),f=f.sibling}function $2(a,c,f){if(gi&&typeof gi.onCommitFiberUnmount=="function")try{gi.onCommitFiberUnmount(_s,f)}catch{}switch(f.tag){case 5:oo||ld(f,c);case 6:var y=Di,A=ca;Di=null,Zl(a,c,f),Di=y,ca=A,Di!==null&&(ca?(a=Di,f=f.stateNode,a.nodeType===8?a.parentNode.removeChild(f):a.removeChild(f)):Di.removeChild(f.stateNode));break;case 18:Di!==null&&(ca?(a=Di,f=f.stateNode,a.nodeType===8?bh(a.parentNode,f):a.nodeType===1&&bh(a,f),wo(a)):bh(Di,f.stateNode));break;case 4:y=Di,A=ca,Di=f.stateNode.containerInfo,ca=!0,Zl(a,c,f),Di=y,ca=A;break;case 0:case 11:case 14:case 15:if(!oo&&(y=f.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){A=y=y.next;do{var P=A,K=P.destroy;P=P.tag,K!==void 0&&((P&2)!==0||(P&4)!==0)&&H0(f,c,K),A=A.next}while(A!==y)}Zl(a,c,f);break;case 1:if(!oo&&(ld(f,c),y=f.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=f.memoizedProps,y.state=f.memoizedState,y.componentWillUnmount()}catch(me){Bn(f,c,me)}Zl(a,c,f);break;case 21:Zl(a,c,f);break;case 22:f.mode&1?(oo=(y=oo)||f.memoizedState!==null,Zl(a,c,f),oo=y):Zl(a,c,f);break;default:Zl(a,c,f)}}function U2(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var f=a.stateNode;f===null&&(f=a.stateNode=new rT),c.forEach(function(y){var A=hT.bind(null,a,y);f.has(y)||(f.add(y),y.then(A,A))})}}function ua(a,c){var f=c.deletions;if(f!==null)for(var y=0;y<f.length;y++){var A=f[y];try{var P=a,K=c,me=K;e:for(;me!==null;){switch(me.tag){case 5:Di=me.stateNode,ca=!1;break e;case 3:Di=me.stateNode.containerInfo,ca=!0;break e;case 4:Di=me.stateNode.containerInfo,ca=!0;break e}me=me.return}if(Di===null)throw Error(t(160));$2(P,K,A),Di=null,ca=!1;var Se=A.alternate;Se!==null&&(Se.return=null),A.return=null}catch(Fe){Bn(A,c,Fe)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)q2(c,a),c=c.sibling}function q2(a,c){var f=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(ua(c,a),za(a),y&4){try{Eh(3,a,a.return),hp(3,a)}catch(bt){Bn(a,a.return,bt)}try{Eh(5,a,a.return)}catch(bt){Bn(a,a.return,bt)}}break;case 1:ua(c,a),za(a),y&512&&f!==null&&ld(f,f.return);break;case 5:if(ua(c,a),za(a),y&512&&f!==null&&ld(f,f.return),a.flags&32){var A=a.stateNode;try{jt(A,"")}catch(bt){Bn(a,a.return,bt)}}if(y&4&&(A=a.stateNode,A!=null)){var P=a.memoizedProps,K=f!==null?f.memoizedProps:P,me=a.type,Se=a.updateQueue;if(a.updateQueue=null,Se!==null)try{me==="input"&&P.type==="radio"&&P.name!=null&&Ft(A,P),It(me,K);var Fe=It(me,P);for(K=0;K<Se.length;K+=2){var Je=Se[K],Ye=Se[K+1];Je==="style"?ht(A,Ye):Je==="dangerouslySetInnerHTML"?Tt(A,Ye):Je==="children"?jt(A,Ye):$(A,Je,Ye,Fe)}switch(me){case"input":Et(A,P);break;case"textarea":mr(A,P);break;case"select":var Ke=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!P.multiple;var at=P.value;at!=null?rt(A,!!P.multiple,at,!1):Ke!==!!P.multiple&&(P.defaultValue!=null?rt(A,!!P.multiple,P.defaultValue,!0):rt(A,!!P.multiple,P.multiple?[]:"",!1))}A[Hl]=P}catch(bt){Bn(a,a.return,bt)}}break;case 6:if(ua(c,a),za(a),y&4){if(a.stateNode===null)throw Error(t(162));A=a.stateNode,P=a.memoizedProps;try{A.nodeValue=P}catch(bt){Bn(a,a.return,bt)}}break;case 3:if(ua(c,a),za(a),y&4&&f!==null&&f.memoizedState.isDehydrated)try{wo(c.containerInfo)}catch(bt){Bn(a,a.return,bt)}break;case 4:ua(c,a),za(a);break;case 13:ua(c,a),za(a),A=a.child,A.flags&8192&&(P=A.memoizedState!==null,A.stateNode.isHidden=P,!P||A.alternate!==null&&A.alternate.memoizedState!==null||(X0=jr())),y&4&&U2(a);break;case 22:if(Je=f!==null&&f.memoizedState!==null,a.mode&1?(oo=(Fe=oo)||Je,ua(c,a),oo=Fe):ua(c,a),za(a),y&8192){if(Fe=a.memoizedState!==null,(a.stateNode.isHidden=Fe)&&!Je&&(a.mode&1)!==0)for(dt=a,Je=a.child;Je!==null;){for(Ye=dt=Je;dt!==null;){switch(Ke=dt,at=Ke.child,Ke.tag){case 0:case 11:case 14:case 15:Eh(4,Ke,Ke.return);break;case 1:ld(Ke,Ke.return);var gt=Ke.stateNode;if(typeof gt.componentWillUnmount=="function"){y=Ke,f=Ke.return;try{c=y,gt.props=c.memoizedProps,gt.state=c.memoizedState,gt.componentWillUnmount()}catch(bt){Bn(y,f,bt)}}break;case 5:ld(Ke,Ke.return);break;case 22:if(Ke.memoizedState!==null){K2(Ye);continue}}at!==null?(at.return=Ke,dt=at):K2(Ye)}Je=Je.sibling}e:for(Je=null,Ye=a;;){if(Ye.tag===5){if(Je===null){Je=Ye;try{A=Ye.stateNode,Fe?(P=A.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(me=Ye.stateNode,Se=Ye.memoizedProps.style,K=Se!=null&&Se.hasOwnProperty("display")?Se.display:null,me.style.display=ir("display",K))}catch(bt){Bn(a,a.return,bt)}}}else if(Ye.tag===6){if(Je===null)try{Ye.stateNode.nodeValue=Fe?"":Ye.memoizedProps}catch(bt){Bn(a,a.return,bt)}}else if((Ye.tag!==22&&Ye.tag!==23||Ye.memoizedState===null||Ye===a)&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===a)break e;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===a)break e;Je===Ye&&(Je=null),Ye=Ye.return}Je===Ye&&(Je=null),Ye.sibling.return=Ye.return,Ye=Ye.sibling}}break;case 19:ua(c,a),za(a),y&4&&U2(a);break;case 21:break;default:ua(c,a),za(a)}}function za(a){var c=a.flags;if(c&2){try{e:{for(var f=a.return;f!==null;){if(D2(f)){var y=f;break e}f=f.return}throw Error(t(160))}switch(y.tag){case 5:var A=y.stateNode;y.flags&32&&(jt(A,""),y.flags&=-33);var P=W2(a);J0(a,P,A);break;case 3:case 4:var K=y.stateNode.containerInfo,me=W2(a);K0(a,me,K);break;default:throw Error(t(161))}}catch(Se){Bn(a,a.return,Se)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function iT(a,c,f){dt=a,H2(a)}function H2(a,c,f){for(var y=(a.mode&1)!==0;dt!==null;){var A=dt,P=A.child;if(A.tag===22&&y){var K=A.memoizedState!==null||dp;if(!K){var me=A.alternate,Se=me!==null&&me.memoizedState!==null||oo;me=dp;var Fe=oo;if(dp=K,(oo=Se)&&!Fe)for(dt=A;dt!==null;)K=dt,Se=K.child,K.tag===22&&K.memoizedState!==null?J2(A):Se!==null?(Se.return=K,dt=Se):J2(A);for(;P!==null;)dt=P,H2(P),P=P.sibling;dt=A,dp=me,oo=Fe}G2(a)}else(A.subtreeFlags&8772)!==0&&P!==null?(P.return=A,dt=P):G2(a)}}function G2(a){for(;dt!==null;){var c=dt;if((c.flags&8772)!==0){var f=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:oo||hp(5,c);break;case 1:var y=c.stateNode;if(c.flags&4&&!oo)if(f===null)y.componentDidMount();else{var A=c.elementType===c.type?f.memoizedProps:la(c.type,f.memoizedProps);y.componentDidUpdate(A,f.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var P=c.updateQueue;P!==null&&Uo(c,P,y);break;case 3:var K=c.updateQueue;if(K!==null){if(f=null,c.child!==null)switch(c.child.tag){case 5:f=c.child.stateNode;break;case 1:f=c.child.stateNode}Uo(c,K,f)}break;case 5:var me=c.stateNode;if(f===null&&c.flags&4){f=me;var Se=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Se.autoFocus&&f.focus();break;case"img":Se.src&&(f.src=Se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var Fe=c.alternate;if(Fe!==null){var Je=Fe.memoizedState;if(Je!==null){var Ye=Je.dehydrated;Ye!==null&&wo(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}oo||c.flags&512&&G0(c)}catch(Ke){Bn(c,c.return,Ke)}}if(c===a){dt=null;break}if(f=c.sibling,f!==null){f.return=c.return,dt=f;break}dt=c.return}}function K2(a){for(;dt!==null;){var c=dt;if(c===a){dt=null;break}var f=c.sibling;if(f!==null){f.return=c.return,dt=f;break}dt=c.return}}function J2(a){for(;dt!==null;){var c=dt;try{switch(c.tag){case 0:case 11:case 15:var f=c.return;try{hp(4,c)}catch(Se){Bn(c,f,Se)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var A=c.return;try{y.componentDidMount()}catch(Se){Bn(c,A,Se)}}var P=c.return;try{G0(c)}catch(Se){Bn(c,P,Se)}break;case 5:var K=c.return;try{G0(c)}catch(Se){Bn(c,K,Se)}}}catch(Se){Bn(c,c.return,Se)}if(c===a){dt=null;break}var me=c.sibling;if(me!==null){me.return=c.return,dt=me;break}dt=c.return}}var oT=Math.ceil,fp=F.ReactCurrentDispatcher,Y0=F.ReactCurrentOwner,zs=F.ReactCurrentBatchConfig,Ar=0,ki=null,ni=null,Wi=0,fs=0,cd=ls(0),di=0,jh=null,Xc=0,pp=0,Q0=0,Rh=null,Ho=null,X0=0,ud=1/0,vl=null,mp=!1,Z0=null,ec=null,gp=!1,tc=null,yp=0,Ph=0,eg=null,xp=-1,vp=0;function Io(){return(Ar&6)!==0?jr():xp!==-1?xp:xp=jr()}function rc(a){return(a.mode&1)===0?1:(Ar&2)!==0&&Wi!==0?Wi&-Wi:Tn.transition!==null?(vp===0&&(vp=Xa()),vp):(a=or,a!==0||(a=window.event,a=a===void 0?16:is(a.type)),a)}function da(a,c,f,y){if(50<Ph)throw Ph=0,eg=null,Error(t(185));Gs(a,f,y),((Ar&2)===0||a!==ki)&&(a===ki&&((Ar&2)===0&&(pp|=f),di===4&&nc(a,Wi)),Go(a,y),f===1&&Ar===0&&(c.mode&1)===0&&(ud=jr()+500,Kc&&z()))}function Go(a,c){var f=a.callbackNode;Or(a,c);var y=Mn(a,a===ki?Wi:0);if(y===0)f!==null&&Xo(f),a.callbackNode=null,a.callbackPriority=0;else if(c=y&-y,a.callbackPriority!==c){if(f!=null&&Xo(f),c===1)a.tag===0?j(Q2.bind(null,a)):x(Q2.bind(null,a)),E0(function(){(Ar&6)===0&&z()}),f=null;else{switch(ai(y)){case 1:f=qs;break;case 4:f=mi;break;case 16:f=es;break;case 536870912:f=Ss;break;default:f=es}f=oy(f,Y2.bind(null,a))}a.callbackPriority=c,a.callbackNode=f}}function Y2(a,c){if(xp=-1,vp=0,(Ar&6)!==0)throw Error(t(327));var f=a.callbackNode;if(dd()&&a.callbackNode!==f)return null;var y=Mn(a,a===ki?Wi:0);if(y===0)return null;if((y&30)!==0||(y&a.expiredLanes)!==0||c)c=bp(a,y);else{c=y;var A=Ar;Ar|=2;var P=Z2();(ki!==a||Wi!==c)&&(vl=null,ud=jr()+500,eu(a,c));do try{lT();break}catch(me){X2(a,me)}while(!0);_r(),fp.current=P,Ar=A,ni!==null?c=0:(ki=null,Wi=0,c=di)}if(c!==0){if(c===2&&(A=Hs(a),A!==0&&(y=A,c=tg(a,A))),c===1)throw f=jh,eu(a,0),nc(a,y),Go(a,jr()),f;if(c===6)nc(a,y);else{if(A=a.current.alternate,(y&30)===0&&!sT(A)&&(c=bp(a,y),c===2&&(P=Hs(a),P!==0&&(y=P,c=tg(a,P))),c===1))throw f=jh,eu(a,0),nc(a,y),Go(a,jr()),f;switch(a.finishedWork=A,a.finishedLanes=y,c){case 0:case 1:throw Error(t(345));case 2:tu(a,Ho,vl);break;case 3:if(nc(a,y),(y&130023424)===y&&(c=X0+500-jr(),10<c)){if(Mn(a,0)!==0)break;if(A=a.suspendedLanes,(A&y)!==y){Io(),a.pingedLanes|=a.suspendedLanes&A;break}a.timeoutHandle=vh(tu.bind(null,a,Ho,vl),c);break}tu(a,Ho,vl);break;case 4:if(nc(a,y),(y&4194240)===y)break;for(c=a.eventTimes,A=-1;0<y;){var K=31-Xn(y);P=1<<K,K=c[K],K>A&&(A=K),y&=~P}if(y=A,y=jr()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*oT(y/1960))-y,10<y){a.timeoutHandle=vh(tu.bind(null,a,Ho,vl),y);break}tu(a,Ho,vl);break;case 5:tu(a,Ho,vl);break;default:throw Error(t(329))}}}return Go(a,jr()),a.callbackNode===f?Y2.bind(null,a):null}function tg(a,c){var f=Rh;return a.current.memoizedState.isDehydrated&&(eu(a,c).flags|=256),a=bp(a,c),a!==2&&(c=Ho,Ho=f,c!==null&&rg(c)),a}function rg(a){Ho===null?Ho=a:Ho.push.apply(Ho,a)}function sT(a){for(var c=a;;){if(c.flags&16384){var f=c.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var y=0;y<f.length;y++){var A=f[y],P=A.getSnapshot;A=A.value;try{if(!fn(P(),A))return!1}catch{return!1}}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function nc(a,c){for(c&=~Q0,c&=~pp,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var f=31-Xn(c),y=1<<f;a[f]=-1,c&=~y}}function Q2(a){if((Ar&6)!==0)throw Error(t(327));dd();var c=Mn(a,0);if((c&1)===0)return Go(a,jr()),null;var f=bp(a,c);if(a.tag!==0&&f===2){var y=Hs(a);y!==0&&(c=y,f=tg(a,y))}if(f===1)throw f=jh,eu(a,0),nc(a,c),Go(a,jr()),f;if(f===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,tu(a,Ho,vl),Go(a,jr()),null}function ng(a,c){var f=Ar;Ar|=1;try{return a(c)}finally{Ar=f,Ar===0&&(ud=jr()+500,Kc&&z())}}function Zc(a){tc!==null&&tc.tag===0&&(Ar&6)===0&&dd();var c=Ar;Ar|=1;var f=zs.transition,y=or;try{if(zs.transition=null,or=1,a)return a()}finally{or=y,zs.transition=f,Ar=c,(Ar&6)===0&&z()}}function ig(){fs=cd.current,Pr(cd)}function eu(a,c){a.finishedWork=null,a.finishedLanes=0;var f=a.timeoutHandle;if(f!==-1&&(a.timeoutHandle=-1,Xf(f)),ni!==null)for(f=ni.return;f!==null;){var y=f;switch(Pe(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Qu();break;case 3:Bs(),Pr(to),Pr(ci),Ah();break;case 5:_h(y);break;case 4:Bs();break;case 13:Pr(rn);break;case 19:Pr(rn);break;case 10:sn(y.type._context);break;case 22:case 23:ig()}f=f.return}if(ki=a,ni=a=ic(a.current,null),Wi=fs=c,di=0,jh=null,Q0=pp=Xc=0,Ho=Rh=null,$r!==null){for(c=0;c<$r.length;c++)if(f=$r[c],y=f.interleaved,y!==null){f.interleaved=null;var A=y.next,P=f.pending;if(P!==null){var K=P.next;P.next=A,y.next=K}f.pending=y}$r=null}return a}function X2(a,c){do{var f=ni;try{if(_r(),Xu.current=ap,Yl){for(var y=an.memoizedState;y!==null;){var A=y.queue;A!==null&&(A.pending=null),y=y.next}Yl=!1}if(Ls=0,In=Nn=an=null,sa=!1,Ql=0,Y0.current=null,f===null||f.return===null){di=1,jh=c,ni=null;break}e:{var P=a,K=f.return,me=f,Se=c;if(c=Wi,me.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var Fe=Se,Je=me,Ye=Je.tag;if((Je.mode&1)===0&&(Ye===0||Ye===11||Ye===15)){var Ke=Je.alternate;Ke?(Je.updateQueue=Ke.updateQueue,Je.memoizedState=Ke.memoizedState,Je.lanes=Ke.lanes):(Je.updateQueue=null,Je.memoizedState=null)}var at=_2(K);if(at!==null){at.flags&=-257,T2(at,K,me,P,c),at.mode&1&&S2(P,Fe,c),c=at,Se=Fe;var gt=c.updateQueue;if(gt===null){var bt=new Set;bt.add(Se),c.updateQueue=bt}else gt.add(Se);break e}else{if((c&1)===0){S2(P,Fe,c),og();break e}Se=Error(t(426))}}else if($e&&me.mode&1){var Hn=_2(K);if(Hn!==null){(Hn.flags&65536)===0&&(Hn.flags|=256),T2(Hn,K,me,P,c),it(ad(Se,me));break e}}P=Se=ad(Se,me),di!==4&&(di=2),Rh===null?Rh=[P]:Rh.push(P),P=K;do{switch(P.tag){case 3:P.flags|=65536,c&=-c,P.lanes|=c;var Re=b2(P,Se,c);qr(P,Re);break e;case 1:me=Se;var Ae=P.type,Le=P.stateNode;if((P.flags&128)===0&&(typeof Ae.getDerivedStateFromError=="function"||Le!==null&&typeof Le.componentDidCatch=="function"&&(ec===null||!ec.has(Le)))){P.flags|=65536,c&=-c,P.lanes|=c;var et=w2(P,me,c);qr(P,et);break e}}P=P.return}while(P!==null)}ty(f)}catch(At){c=At,ni===f&&f!==null&&(ni=f=f.return);continue}break}while(!0)}function Z2(){var a=fp.current;return fp.current=ap,a===null?ap:a}function og(){(di===0||di===3||di===2)&&(di=4),ki===null||(Xc&268435455)===0&&(pp&268435455)===0||nc(ki,Wi)}function bp(a,c){var f=Ar;Ar|=2;var y=Z2();(ki!==a||Wi!==c)&&(vl=null,eu(a,c));do try{aT();break}catch(A){X2(a,A)}while(!0);if(_r(),Ar=f,fp.current=y,ni!==null)throw Error(t(261));return ki=null,Wi=0,di}function aT(){for(;ni!==null;)ey(ni)}function lT(){for(;ni!==null&&!No();)ey(ni)}function ey(a){var c=iy(a.alternate,a,fs);a.memoizedProps=a.pendingProps,c===null?ty(a):ni=c,Y0.current=null}function ty(a){var c=a;do{var f=c.alternate;if(a=c.return,(c.flags&32768)===0){if(f=eT(f,c,fs),f!==null){ni=f;return}}else{if(f=tT(f,c),f!==null){f.flags&=32767,ni=f;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{di=6,ni=null;return}}if(c=c.sibling,c!==null){ni=c;return}ni=c=a}while(c!==null);di===0&&(di=5)}function tu(a,c,f){var y=or,A=zs.transition;try{zs.transition=null,or=1,cT(a,c,f,y)}finally{zs.transition=A,or=y}return null}function cT(a,c,f,y){do dd();while(tc!==null);if((Ar&6)!==0)throw Error(t(327));f=a.finishedWork;var A=a.finishedLanes;if(f===null)return null;if(a.finishedWork=null,a.finishedLanes=0,f===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var P=f.lanes|f.childLanes;if(Lo(a,P),a===ki&&(ni=ki=null,Wi=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||gp||(gp=!0,oy(es,function(){return dd(),null})),P=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||P){P=zs.transition,zs.transition=null;var K=or;or=1;var me=Ar;Ar|=4,Y0.current=null,nT(a,f),q2(f,a),Vc(fl),rs=!!Hc,fl=Hc=null,a.current=f,iT(f),Zo(),Ar=me,or=K,zs.transition=P}else a.current=f;if(gp&&(gp=!1,tc=a,yp=A),P=a.pendingLanes,P===0&&(ec=null),Qa(f.stateNode),Go(a,jr()),c!==null)for(y=a.onRecoverableError,f=0;f<c.length;f++)A=c[f],y(A.value,{componentStack:A.stack,digest:A.digest});if(mp)throw mp=!1,a=Z0,Z0=null,a;return(yp&1)!==0&&a.tag!==0&&dd(),P=a.pendingLanes,(P&1)!==0?a===eg?Ph++:(Ph=0,eg=a):Ph=0,z(),null}function dd(){if(tc!==null){var a=ai(yp),c=zs.transition,f=or;try{if(zs.transition=null,or=16>a?16:a,tc===null)var y=!1;else{if(a=tc,tc=null,yp=0,(Ar&6)!==0)throw Error(t(331));var A=Ar;for(Ar|=4,dt=a.current;dt!==null;){var P=dt,K=P.child;if((dt.flags&16)!==0){var me=P.deletions;if(me!==null){for(var Se=0;Se<me.length;Se++){var Fe=me[Se];for(dt=Fe;dt!==null;){var Je=dt;switch(Je.tag){case 0:case 11:case 15:Eh(8,Je,P)}var Ye=Je.child;if(Ye!==null)Ye.return=Je,dt=Ye;else for(;dt!==null;){Je=dt;var Ke=Je.sibling,at=Je.return;if(M2(Je),Je===Fe){dt=null;break}if(Ke!==null){Ke.return=at,dt=Ke;break}dt=at}}}var gt=P.alternate;if(gt!==null){var bt=gt.child;if(bt!==null){gt.child=null;do{var Hn=bt.sibling;bt.sibling=null,bt=Hn}while(bt!==null)}}dt=P}}if((P.subtreeFlags&2064)!==0&&K!==null)K.return=P,dt=K;else e:for(;dt!==null;){if(P=dt,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:Eh(9,P,P.return)}var Re=P.sibling;if(Re!==null){Re.return=P.return,dt=Re;break e}dt=P.return}}var Ae=a.current;for(dt=Ae;dt!==null;){K=dt;var Le=K.child;if((K.subtreeFlags&2064)!==0&&Le!==null)Le.return=K,dt=Le;else e:for(K=Ae;dt!==null;){if(me=dt,(me.flags&2048)!==0)try{switch(me.tag){case 0:case 11:case 15:hp(9,me)}}catch(At){Bn(me,me.return,At)}if(me===K){dt=null;break e}var et=me.sibling;if(et!==null){et.return=me.return,dt=et;break e}dt=me.return}}if(Ar=A,z(),gi&&typeof gi.onPostCommitFiberRoot=="function")try{gi.onPostCommitFiberRoot(_s,a)}catch{}y=!0}return y}finally{or=f,zs.transition=c}}return!1}function ry(a,c,f){c=ad(f,c),c=b2(a,c,1),a=Cn(a,c,1),c=Io(),a!==null&&(Gs(a,1,c),Go(a,c))}function Bn(a,c,f){if(a.tag===3)ry(a,a,f);else for(;c!==null;){if(c.tag===3){ry(c,a,f);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(ec===null||!ec.has(y))){a=ad(f,a),a=w2(c,a,1),c=Cn(c,a,1),a=Io(),c!==null&&(Gs(c,1,a),Go(c,a));break}}c=c.return}}function uT(a,c,f){var y=a.pingCache;y!==null&&y.delete(c),c=Io(),a.pingedLanes|=a.suspendedLanes&f,ki===a&&(Wi&f)===f&&(di===4||di===3&&(Wi&130023424)===Wi&&500>jr()-X0?eu(a,0):Q0|=f),Go(a,c)}function ny(a,c){c===0&&((a.mode&1)===0?c=1:(c=yi,yi<<=1,(yi&130023424)===0&&(yi=4194304)));var f=Io();a=Ur(a,c),a!==null&&(Gs(a,c,f),Go(a,f))}function dT(a){var c=a.memoizedState,f=0;c!==null&&(f=c.retryLane),ny(a,f)}function hT(a,c){var f=0;switch(a.tag){case 13:var y=a.stateNode,A=a.memoizedState;A!==null&&(f=A.retryLane);break;case 19:y=a.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(c),ny(a,f)}var iy;iy=function(a,c,f){if(a!==null)if(a.memoizedProps!==c.pendingProps||to.current)qo=!0;else{if((a.lanes&f)===0&&(c.flags&128)===0)return qo=!1,Z4(a,c,f);qo=(a.flags&131072)!==0}else qo=!1,$e&&(c.flags&1048576)!==0&&Ie(c,X,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;up(a,c),a=c.pendingProps;var A=Kl(c,ci.current);gn(c,f),A=Jc(null,c,y,a,A,f);var P=Fs();return c.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,ro(y)?(P=!0,gl(c)):P=!1,c.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,ui(c),A.updater=lp,c.stateNode=A,A._reactInternals=c,F0(c,y,a,f),c=M0(null,c,y,!0,P,f)):(c.tag=0,$e&&P&&Me(c),ko(null,c,A,f),c=c.child),c;case 16:y=c.elementType;e:{switch(up(a,c),a=c.pendingProps,A=y._init,y=A(y._payload),c.type=y,A=c.tag=pT(y),a=la(y,a),A){case 0:c=O0(null,c,y,a,f);break e;case 1:c=j2(null,c,y,a,f);break e;case 11:c=A2(null,c,y,a,f);break e;case 14:c=C2(null,c,y,la(y.type,a),f);break e}throw Error(t(306,y,""))}return c;case 0:return y=c.type,A=c.pendingProps,A=c.elementType===y?A:la(y,A),O0(a,c,y,A,f);case 1:return y=c.type,A=c.pendingProps,A=c.elementType===y?A:la(y,A),j2(a,c,y,A,f);case 3:e:{if(R2(c),a===null)throw Error(t(387));y=c.pendingProps,P=c.memoizedState,A=P.element,no(a,c),Ci(c,y,null,f);var K=c.memoizedState;if(y=K.element,P.isDehydrated)if(P={element:y,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},c.updateQueue.baseState=P,c.memoizedState=P,c.flags&256){A=ad(Error(t(423)),c),c=P2(a,c,y,f,A);break e}else if(y!==A){A=ad(Error(t(424)),c),c=P2(a,c,y,f,A);break e}else for(Oe=Mi(c.stateNode.containerInfo.firstChild),Ve=c,$e=!0,qe=null,f=ln(c,null,y,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(ut(),y===A){c=xl(a,c,f);break e}ko(a,c,y,f)}c=c.child}return c;case 5:return rp(c),a===null&&ft(c),y=c.type,A=c.pendingProps,P=a!==null?a.memoizedProps:null,K=A.children,xh(y,A)?K=null:P!==null&&xh(y,P)&&(c.flags|=32),E2(a,c),ko(a,c,K,f),c.child;case 6:return a===null&&ft(c),null;case 13:return N2(a,c,f);case 4:return Jl(c,c.stateNode.containerInfo),y=c.pendingProps,a===null?c.child=Rn(c,null,y,f):ko(a,c,y,f),c.child;case 11:return y=c.type,A=c.pendingProps,A=c.elementType===y?A:la(y,A),A2(a,c,y,A,f);case 7:return ko(a,c,c.pendingProps,f),c.child;case 8:return ko(a,c,c.pendingProps.children,f),c.child;case 12:return ko(a,c,c.pendingProps.children,f),c.child;case 10:e:{if(y=c.type._context,A=c.pendingProps,P=c.memoizedProps,K=A.value,Lr(Un,y._currentValue),y._currentValue=K,P!==null)if(fn(P.value,K)){if(P.children===A.children&&!to.current){c=xl(a,c,f);break e}}else for(P=c.child,P!==null&&(P.return=c);P!==null;){var me=P.dependencies;if(me!==null){K=P.child;for(var Se=me.firstContext;Se!==null;){if(Se.context===y){if(P.tag===1){Se=An(-1,f&-f),Se.tag=2;var Fe=P.updateQueue;if(Fe!==null){Fe=Fe.shared;var Je=Fe.pending;Je===null?Se.next=Se:(Se.next=Je.next,Je.next=Se),Fe.pending=Se}}P.lanes|=f,Se=P.alternate,Se!==null&&(Se.lanes|=f),Tr(P.return,f,c),me.lanes|=f;break}Se=Se.next}}else if(P.tag===10)K=P.type===c.type?null:P.child;else if(P.tag===18){if(K=P.return,K===null)throw Error(t(341));K.lanes|=f,me=K.alternate,me!==null&&(me.lanes|=f),Tr(K,f,c),K=P.sibling}else K=P.child;if(K!==null)K.return=P;else for(K=P;K!==null;){if(K===c){K=null;break}if(P=K.sibling,P!==null){P.return=K.return,K=P;break}K=K.return}P=K}ko(a,c,A.children,f),c=c.child}return c;case 9:return A=c.type,y=c.pendingProps.children,gn(c,f),A=yn(A),y=y(A),c.flags|=1,ko(a,c,y,f),c.child;case 14:return y=c.type,A=la(y,c.pendingProps),A=la(y.type,A),C2(a,c,y,A,f);case 15:return k2(a,c,c.type,c.pendingProps,f);case 17:return y=c.type,A=c.pendingProps,A=c.elementType===y?A:la(y,A),up(a,c),c.tag=1,ro(y)?(a=!0,gl(c)):a=!1,gn(c,f),x2(c,y,A),F0(c,y,A,f),M0(null,c,y,!0,a,f);case 19:return L2(a,c,f);case 22:return I2(a,c,f)}throw Error(t(156,c.tag))};function oy(a,c){return ws(a,c)}function fT(a,c,f,y){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vs(a,c,f,y){return new fT(a,c,f,y)}function sg(a){return a=a.prototype,!(!a||!a.isReactComponent)}function pT(a){if(typeof a=="function")return sg(a)?1:0;if(a!=null){if(a=a.$$typeof,a===w)return 11;if(a===q)return 14}return 2}function ic(a,c){var f=a.alternate;return f===null?(f=Vs(a.tag,c,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=c,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&14680064,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,c=a.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f}function wp(a,c,f,y,A,P){var K=2;if(y=a,typeof a=="function")sg(a)&&(K=1);else if(typeof a=="string")K=5;else e:switch(a){case D:return ru(f.children,A,P,c);case C:K=8,A|=8;break;case S:return a=Vs(12,f,c,A|2),a.elementType=S,a.lanes=P,a;case B:return a=Vs(13,f,c,A),a.elementType=B,a.lanes=P,a;case M:return a=Vs(19,f,c,A),a.elementType=M,a.lanes=P,a;case te:return Sp(f,A,P,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case V:K=10;break e;case I:K=9;break e;case w:K=11;break e;case q:K=14;break e;case se:K=16,y=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return c=Vs(K,f,c,A),c.elementType=a,c.type=y,c.lanes=P,c}function ru(a,c,f,y){return a=Vs(7,a,y,c),a.lanes=f,a}function Sp(a,c,f,y){return a=Vs(22,a,y,c),a.elementType=te,a.lanes=f,a.stateNode={isHidden:!1},a}function ag(a,c,f){return a=Vs(6,a,null,c),a.lanes=f,a}function lg(a,c,f){return c=Vs(4,a.children!==null?a.children:[],a.key,c),c.lanes=f,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function mT(a,c,f,y,A){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Za(0),this.expirationTimes=Za(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Za(0),this.identifierPrefix=y,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function cg(a,c,f,y,A,P,K,me,Se){return a=new mT(a,c,f,me,Se),c===1?(c=1,P===!0&&(c|=8)):c=0,P=Vs(3,null,null,c),a.current=P,P.stateNode=a,P.memoizedState={element:y,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},ui(P),a}function gT(a,c,f){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ce,key:y==null?null:""+y,children:a,containerInfo:c,implementation:f}}function sy(a){if(!a)return Ba;a=a._reactInternals;e:{if(wn(a)!==a||a.tag!==1)throw Error(t(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(ro(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(a.tag===1){var f=a.type;if(ro(f))return Sh(a,f,c)}return c}function ay(a,c,f,y,A,P,K,me,Se){return a=cg(f,y,!0,a,A,P,K,me,Se),a.context=sy(null),f=a.current,y=Io(),A=rc(f),P=An(y,A),P.callback=c??null,Cn(f,P,A),a.current.lanes=A,Gs(a,A,y),Go(a,y),a}function _p(a,c,f,y){var A=c.current,P=Io(),K=rc(A);return f=sy(f),c.context===null?c.context=f:c.pendingContext=f,c=An(P,K),c.payload={element:a},y=y===void 0?null:y,y!==null&&(c.callback=y),a=Cn(A,c,K),a!==null&&(da(a,A,K,P),Ai(a,A,K)),K}function Tp(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function ly(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<c?f:c}}function ug(a,c){ly(a,c),(a=a.alternate)&&ly(a,c)}function yT(){return null}var cy=typeof reportError=="function"?reportError:function(a){console.error(a)};function dg(a){this._internalRoot=a}Ap.prototype.render=dg.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(t(409));_p(a,c,null,null)},Ap.prototype.unmount=dg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;Zc(function(){_p(null,a,null,null)}),c[_i]=null}};function Ap(a){this._internalRoot=a}Ap.prototype.unstable_scheduleHydration=function(a){if(a){var c=tl();a={blockedOn:null,target:a,priority:c};for(var f=0;f<Fi.length&&c!==0&&c<Fi[f].priority;f++);Fi.splice(f,0,a),f===0&&Ta(a)}};function hg(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Cp(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function uy(){}function xT(a,c,f,y,A){if(A){if(typeof y=="function"){var P=y;y=function(){var Fe=Tp(K);P.call(Fe)}}var K=ay(c,y,a,0,null,!1,!1,"",uy);return a._reactRootContainer=K,a[_i]=K.current,dl(a.nodeType===8?a.parentNode:a),Zc(),K}for(;A=a.lastChild;)a.removeChild(A);if(typeof y=="function"){var me=y;y=function(){var Fe=Tp(Se);me.call(Fe)}}var Se=cg(a,0,!1,null,null,!1,!1,"",uy);return a._reactRootContainer=Se,a[_i]=Se.current,dl(a.nodeType===8?a.parentNode:a),Zc(function(){_p(c,Se,f,y)}),Se}function kp(a,c,f,y,A){var P=f._reactRootContainer;if(P){var K=P;if(typeof A=="function"){var me=A;A=function(){var Se=Tp(K);me.call(Se)}}_p(c,K,a,A)}else K=xT(f,c,a,A,y);return Tp(K)}Ks=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var f=lr(c.pendingLanes);f!==0&&(Sa(c,f|1),Go(c,jr()),(Ar&6)===0&&(ud=jr()+500,z()))}break;case 13:Zc(function(){var y=Ur(a,1);if(y!==null){var A=Io();da(y,a,1,A)}}),ug(a,1)}},_a=function(a){if(a.tag===13){var c=Ur(a,134217728);if(c!==null){var f=Io();da(c,a,134217728,f)}ug(a,134217728)}},el=function(a){if(a.tag===13){var c=rc(a),f=Ur(a,c);if(f!==null){var y=Io();da(f,a,c,y)}ug(a,c)}},tl=function(){return or},Js=function(a,c){var f=or;try{return or=a,c()}finally{or=f}},Er=function(a,c,f){switch(c){case"input":if(Et(a,f),c=f.name,f.type==="radio"&&c!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<f.length;c++){var y=f[c];if(y!==a&&y.form===a.form){var A=Gc(y);if(!A)throw Error(t(90));Xe(y),Et(y,A)}}}break;case"textarea":mr(a,f);break;case"select":c=f.value,c!=null&&rt(a,!!f.multiple,c,!1)}},zn=ng,Po=Zc;var vT={usingClientEntryPoint:!1,Events:[Gl,pl,Gc,ar,Hi,ng]},Nh={findFiberByHostInstance:Na,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bT={bundleType:Nh.bundleType,version:Nh.version,rendererPackageName:Nh.rendererPackageName,rendererConfig:Nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=go(a),a===null?null:a.stateNode},findFiberByHostInstance:Nh.findFiberByHostInstance||yT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ip=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ip.isDisabled&&Ip.supportsFiber)try{_s=Ip.inject(bT),gi=Ip}catch{}}return Ko.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vT,Ko.createPortal=function(a,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hg(c))throw Error(t(200));return gT(a,c,null,f)},Ko.createRoot=function(a,c){if(!hg(a))throw Error(t(299));var f=!1,y="",A=cy;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(A=c.onRecoverableError)),c=cg(a,1,!1,null,null,f,!1,y,A),a[_i]=c.current,dl(a.nodeType===8?a.parentNode:a),new dg(c)},Ko.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=go(c),a=a===null?null:a.stateNode,a},Ko.flushSync=function(a){return Zc(a)},Ko.hydrate=function(a,c,f){if(!Cp(c))throw Error(t(200));return kp(null,a,c,!0,f)},Ko.hydrateRoot=function(a,c,f){if(!hg(a))throw Error(t(405));var y=f!=null&&f.hydratedSources||null,A=!1,P="",K=cy;if(f!=null&&(f.unstable_strictMode===!0&&(A=!0),f.identifierPrefix!==void 0&&(P=f.identifierPrefix),f.onRecoverableError!==void 0&&(K=f.onRecoverableError)),c=ay(c,null,a,1,f??null,A,!1,P,K),a[_i]=c.current,dl(a),y)for(a=0;a<y.length;a++)f=y[a],A=f._getVersion,A=A(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,A]:c.mutableSourceEagerHydrationData.push(f,A);return new Ap(c)},Ko.render=function(a,c,f){if(!Cp(c))throw Error(t(200));return kp(null,a,c,!1,f)},Ko.unmountComponentAtNode=function(a){if(!Cp(a))throw Error(t(40));return a._reactRootContainer?(Zc(function(){kp(null,null,a,!1,function(){a._reactRootContainer=null,a[_i]=null})}),!0):!1},Ko.unstable_batchedUpdates=ng,Ko.unstable_renderSubtreeIntoContainer=function(a,c,f,y){if(!Cp(f))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return kp(a,c,f,!1,y)},Ko.version="18.3.1-next-f1338f8080-20240426",Ko}var xy;function RT(){if(xy)return mg.exports;xy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),mg.exports=jT(),mg.exports}var vy;function PT(){if(vy)return Ep;vy=1;var r=RT();return Ep.createRoot=r.createRoot,Ep.hydrateRoot=r.hydrateRoot,Ep}var NT=PT();const BT=Yb(NT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),FT=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),by=r=>{const e=FT(r);return e.charAt(0).toUpperCase()+e.slice(1)},Qb=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),zT=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=pe.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:l,...u},h)=>pe.createElement("svg",{ref:h,...VT,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:Qb("lucide",i),...!s&&!zT(u)&&{"aria-hidden":"true"},...u},[...l.map(([d,g])=>pe.createElement(d,g)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=(r,e)=>{const t=pe.forwardRef(({className:n,...i},s)=>pe.createElement(OT,{ref:s,iconNode:e,className:Qb(`lucide-${LT(by(r))}`,`lucide-${r}`,n),...i}));return t.displayName=by(r),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],DT=Nt("bell",MT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Xb=Nt("box",WT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Lu=Nt("briefcase",$T);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Zb=Nt("building",UT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"M17 19a1 1 0 0 1-1-1v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a1 1 0 0 1-1 1z",key:"trhst0"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M19 14V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V10",key:"1mo9zo"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M4 10a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2z",key:"1dd30t"}],["path",{d:"M7 5V3",key:"1t1388"}]],ew=Nt("cable",qT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],cf=Nt("calculator",HT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],r1=Nt("calendar",GT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],tw=Nt("chart-column",KT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],gm=Nt("chevron-down",JT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],QT=Nt("chevron-left",YT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ZT=Nt("chevron-right",XT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],t6=Nt("chevron-up",e6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],vc=Nt("circle-alert",r6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],en=Nt("circle-check-big",n6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],o6=Nt("circle-x",i6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],rw=Nt("circle",s6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qm=Nt("clock",a6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],nw=Nt("corner-down-right",l6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Z1=Nt("dollar-sign",c6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],wy=Nt("eye-off",u6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Sy=Nt("eye",d6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],Hm=Nt("file-down",h6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],jf=Nt("file-text",f6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],iw=Nt("gauge",p6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ow=Nt("globe",m6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],sw=Nt("house",g6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],xs=Nt("info",y6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],aw=Nt("lightbulb",x6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],b6=Nt("loader",v6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],_y=Nt("lock",w6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],_6=Nt("log-out",S6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ty=Nt("mail",T6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],lw=Nt("map-pin",A6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],k6=Nt("menu",C6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M3 20h4.5a.5.5 0 0 0 .5-.5v-.282a.52.52 0 0 0-.247-.437 8 8 0 1 1 8.494-.001.52.52 0 0 0-.247.438v.282a.5.5 0 0 0 .5.5H21",key:"1x94xo"}]],cw=Nt("omega",I6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],uw=Nt("package",E6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],dw=Nt("plug",j6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ga=Nt("plus",R6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],hw=Nt("radio",P6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],e5=Nt("receipt",N6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],fw=Nt("search",B6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pw=Nt("settings",L6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],z6=Nt("shield",F6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}],["line",{x1:"12",x2:"12",y1:"16",y2:"16",key:"aqc6ln"}],["line",{x1:"12",x2:"12",y1:"8",y2:"8",key:"1mkcni"}]],mw=Nt("square-divide",V6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],gw=Nt("square-pen",O6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M4 4v16",key:"6qkkli"}],["path",{d:"M9 4v16",key:"81ygyz"}],["path",{d:"M14 4v16",key:"12vmem"}]],yw=Nt("tally-3",M6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],xw=Nt("target",D6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Cc=Nt("trash-2",W6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],vw=Nt("trending-down",$6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],q6=Nt("trending-up",U6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Fu=Nt("triangle-alert",H6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]],bw=Nt("triangle",G6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],uf=Nt("user",K6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ww=Nt("x",J6),Y6="_menu_1rv94_37",Q6="_btn_1rv94_38",th={menu:Y6,btn:Q6};function X6({onSelectCalculator:r,isDarkMode:e}){const[t,n]=pe.useState(""),i=[{name:"Power Calculations",calculators:[{id:"voltage-drop",name:"Voltage Drop",icon:vw,keywords:"voltage drop vd wire circuit"},{id:"ohms-law",name:"Ohm's Law",icon:mw,keywords:"ohms law voltage current resistance power series parallel circuit"},{id:"reactance-impedance",name:"Reactance",icon:cw,keywords:"reactance impedance xl xc capacitive inductive resonance frequency ac circuit"},{id:"power-factor",name:"Power Factor",icon:xw,keywords:"power factor correction pf capacitor kvar cos phi efficiency demand charge penalty savings"},{id:"power-triangle",name:"Power Triangle",icon:bw,keywords:"power triangle kva kw kvar apparent real reactive power factor angle phase"},{id:"three-phase-power",name:"Three-Phase",icon:yw,keywords:"three phase power 3 phase current voltage kw kva motor industrial commercial wye delta line"}]},{name:"Sizing & Rating",calculators:[{id:"ampacity",name:"Ampacity",icon:ew,keywords:"ampacity current rating 310 temperature"},{id:"load-calculations",name:"Load Calculations",icon:tw,keywords:"load calculation service size residential commercial demand"},{id:"service-entrance",name:"Service Entrance",icon:Zb,keywords:"service entrance sizing panel main 230"},{id:"grounding-bonding",name:"Grounding & Bonding",icon:ow,keywords:"grounding bonding ground electrode equipment gec egc jumper 250"}]},{name:"Equipment",calculators:[{id:"motor-calculations",name:"Motors",icon:pw,keywords:"motor flc protection starter 430"},{id:"transformer-sizing",name:"Transformers",icon:hw,keywords:"transformer kva sizing current primary secondary 450"},{id:"vfd-sizing",name:"VFD Sizing",icon:iw,keywords:"vfd variable frequency drive motor speed control inverter ac drive"}]},{name:"Installation",calculators:[{id:"box-fill",name:"Box Fill",icon:uw,keywords:"box fill junction cubic inch volume 314"},{id:"pull-box",name:"Pull Box",icon:Xb,keywords:"pull box junction sizing straight angle u-pull 314.28 raceway conduit"},{id:"conduit-fill",name:"Conduit Fill",icon:rw,keywords:"conduit fill emt pvc rigid raceway chapter 9"},{id:"conduit-bending",name:"Conduit Bending",icon:nw,keywords:"conduit bending offset saddle stub bend emt"},{id:"receptacles",name:"Receptacles",icon:dw,keywords:"receptacle outlet gfci plug socket 210.52 counter kitchen bathroom wall spacing"},{id:"lighting",name:"Lighting",icon:aw,keywords:"lighting lumens foot candles fixtures spacing watts illumination"}]}],s={"Power Calculations":"#3b82f6","Sizing & Rating":"#10b981",Equipment:"#f59e0b",Installation:"#8b5cf6",Safety:"#ef4444"},l={mainBg:e?"#000000":"#f3f4f6",cardText:e?"#ffffff":"#111827",inputBg:e?"#0a0a0a":"#ffffff",inputBorder:e?"#1a1a1a":"#d1d5db",inputText:e?"#ffffff":"#111827",placeholderText:e?"#666666":"#6b7280",categoryHeaderText:e?"#cccccc":"#4b5563"},u=i.flatMap(d=>d.calculators.map(g=>({...g,category:d.name}))),h=t?u.filter(d=>{const g=t.toLowerCase();return d.name.toLowerCase().includes(g)||d.keywords.toLowerCase().includes(g)}):null;return o.jsx("div",{style:{minHeight:"100vh",background:l.mainBg,padding:"0"},children:o.jsx("div",{style:{maxWidth:"64rem",margin:"0 auto"},children:o.jsxs("div",{style:{padding:"1.25rem",boxSizing:"border-box"},children:[o.jsxs("div",{style:{marginBottom:"1.5rem",position:"relative"},children:[o.jsx(fw,{size:20,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:l.placeholderText}}),o.jsx("input",{type:"text",placeholder:"Search calculators...",value:t,onChange:d=>n(d.target.value),style:{width:"100%",padding:"0.875rem 1rem 0.875rem 3rem",fontSize:"0.9375rem",border:`1px solid ${l.inputBorder}`,borderRadius:"12px",backgroundColor:l.inputBg,color:l.inputText,boxSizing:"border-box",outline:"none",transition:"all 0.2s ease"},onFocus:d=>{d.target.style.borderColor="#3b82f6",d.target.style.backgroundColor=e?"#000000":"#ffffff",d.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:d=>{d.target.style.borderColor=l.inputBorder,d.target.style.backgroundColor=l.inputBg,d.target.style.boxShadow="none"}})]}),h?o.jsxs("div",{children:[o.jsxs("div",{style:{fontSize:"0.875rem",color:l.placeholderText,marginBottom:"1rem",paddingLeft:"0"},children:[h.length," ",h.length===1?"result":"results"," found"]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.25rem",marginBottom:"1rem",boxSizing:"border-box",width:"100%"},children:h.length>0?h.map(d=>{const g=d.icon,b=s[d.category]||"#3b82f6";return o.jsxs("div",{onClick:()=>{console.log("Clicked calculator:",d.id),r(d.id)},style:{cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[o.jsx("button",{style:{backgroundColor:e?"#1a1a1a":"#ffffff",border:`2px solid ${e?"#2a2a2a":"#d1d5db"}`,borderRadius:"12px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"70px",height:"70px",minWidth:"70px",minHeight:"70px",maxWidth:"70px",maxHeight:"70px",flexShrink:0,boxShadow:e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseOver:_=>{_.currentTarget.style.transform="translateY(-4px) scale(1.05)",_.currentTarget.style.backgroundColor=e?"#252525":"#ffffff",_.currentTarget.style.borderColor=b,_.currentTarget.style.boxShadow=`0 8px 16px ${b}30, 0 4px 6px ${b}20`},onMouseOut:_=>{_.currentTarget.style.transform="translateY(0) scale(1)",_.currentTarget.style.backgroundColor=e?"#1a1a1a":"#ffffff",_.currentTarget.style.borderColor=e?"#2a2a2a":"#d1d5db",_.currentTarget.style.boxShadow=e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)"},onMouseDown:_=>{_.currentTarget.style.transform="translateY(-2px) scale(0.95)"},onMouseUp:_=>{_.currentTarget.style.transform="translateY(-4px) scale(1.05)"},children:o.jsx(g,{size:28,strokeWidth:2,color:b})}),o.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",textAlign:"center",lineHeight:"1.2",color:l.cardText,maxWidth:"90px"},children:d.name})]},d.id)}):o.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem 1rem",color:l.placeholderText,fontSize:"0.9375rem"},children:"No calculators found"})})]}):i.map((d,g)=>o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem",paddingLeft:"0"},children:[o.jsx("div",{style:{width:"4px",height:"20px",backgroundColor:s[d.name],borderRadius:"2px"}}),o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:l.categoryHeaderText,margin:0,letterSpacing:"-0.01em"},children:d.name})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.25rem",marginBottom:g<i.length-1?"1.5rem":"1rem",boxSizing:"border-box",width:"100%"},children:d.calculators.map(b=>{const _=b.icon,v=s[d.name];return o.jsxs("div",{onClick:()=>{console.log("Clicked calculator:",b.id),r(b.id)},style:{cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[o.jsx("button",{style:{backgroundColor:e?"#1a1a1a":"#ffffff",border:`2px solid ${e?"#2a2a2a":"#d1d5db"}`,borderRadius:"12px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"70px",height:"70px",minWidth:"70px",minHeight:"70px",maxWidth:"70px",maxHeight:"70px",flexShrink:0,boxShadow:e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseOver:N=>{N.currentTarget.style.transform="translateY(-4px) scale(1.05)",N.currentTarget.style.backgroundColor=e?"#252525":"#ffffff",N.currentTarget.style.borderColor=v,N.currentTarget.style.boxShadow=`0 8px 16px ${v}30, 0 4px 6px ${v}20`},onMouseOut:N=>{N.currentTarget.style.transform="translateY(0) scale(1)",N.currentTarget.style.backgroundColor=e?"#1a1a1a":"#ffffff",N.currentTarget.style.borderColor=e?"#2a2a2a":"#d1d5db",N.currentTarget.style.boxShadow=e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)"},onMouseDown:N=>{N.currentTarget.style.transform="translateY(-2px) scale(0.95)"},onMouseUp:N=>{N.currentTarget.style.transform="translateY(-4px) scale(1.05)"},children:o.jsx(_,{size:28,strokeWidth:2,color:v})}),o.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",textAlign:"center",lineHeight:"1.2",color:l.cardText,maxWidth:"90px"},children:b.name})]},b.id)})})]},d.name))]})})})}const Z6="modulepreload",eA=function(r){return"/electrician-toolkit/"+r},Ay={},pu=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let l=function(d){return Promise.all(d.map(g=>Promise.resolve(g).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=l(t.map(d=>{if(d=eA(d),d in Ay)return;Ay[d]=!0;const g=d.endsWith(".css"),b=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${b}`))return;const _=document.createElement("link");if(_.rel=g?"stylesheet":Z6,g||(_.as="script"),_.crossOrigin="",_.href=d,h&&_.setAttribute("nonce",h),document.head.appendChild(_),g)return new Promise((v,N)=>{_.addEventListener("load",v),_.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})};function Gr(r){"@babel/helpers - typeof";return Gr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gr(r)}var ya=Uint8Array,gs=Uint16Array,t5=Int32Array,r5=new ya([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),n5=new ya([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cy=new ya([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Sw=function(r,e){for(var t=new gs(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new t5(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return{b:t,r:i}},_w=Sw(r5,2),tA=_w.b,n1=_w.r;tA[28]=258,n1[258]=28;var rA=Sw(n5,0),ky=rA.r,i1=new gs(32768);for(var cn=0;cn<32768;++cn){var sc=(cn&43690)>>1|(cn&21845)<<1;sc=(sc&52428)>>2|(sc&13107)<<2,sc=(sc&61680)>>4|(sc&3855)<<4,i1[cn]=((sc&65280)>>8|(sc&255)<<8)>>1}var Yh=(function(r,e,t){for(var n=r.length,i=0,s=new gs(e);i<n;++i)r[i]&&++s[r[i]-1];var l=new gs(e);for(i=1;i<e;++i)l[i]=l[i-1]+s[i-1]<<1;var u;if(t){u=new gs(1<<e);var h=15-e;for(i=0;i<n;++i)if(r[i])for(var d=i<<4|r[i],g=e-r[i],b=l[r[i]-1]++<<g,_=b|(1<<g)-1;b<=_;++b)u[i1[b]>>h]=d}else for(u=new gs(n),i=0;i<n;++i)r[i]&&(u[i]=i1[l[r[i]-1]++]>>15-r[i]);return u}),wu=new ya(288);for(var cn=0;cn<144;++cn)wu[cn]=8;for(var cn=144;cn<256;++cn)wu[cn]=9;for(var cn=256;cn<280;++cn)wu[cn]=7;for(var cn=280;cn<288;++cn)wu[cn]=8;var ym=new ya(32);for(var cn=0;cn<32;++cn)ym[cn]=5;var nA=Yh(wu,9,0),iA=Yh(ym,5,0),Tw=function(r){return(r+7)/8|0},oA=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new ya(r.subarray(e,t))},bl=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},Lh=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},xg=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var i=t.length,s=t.slice();if(!i)return{t:Cw,l:0};if(i==1){var l=new ya(t[0].s+1);return l[t[0].s]=1,{t:l,l:1}}t.sort(function(oe,ce){return oe.f-ce.f}),t.push({s:-1,f:25001});var u=t[0],h=t[1],d=0,g=1,b=2;for(t[0]={s:-1,f:u.f+h.f,l:u,r:h};g!=i-1;)u=t[t[d].f<t[b].f?d++:b++],h=t[d!=g&&t[d].f<t[b].f?d++:b++],t[g++]={s:-1,f:u.f+h.f,l:u,r:h};for(var _=s[0].s,n=1;n<i;++n)s[n].s>_&&(_=s[n].s);var v=new gs(_+1),N=o1(t[g-1],v,0);if(N>e){var n=0,E=0,L=N-e,k=1<<L;for(s.sort(function(ce,D){return v[D.s]-v[ce.s]||ce.f-D.f});n<i;++n){var O=s[n].s;if(v[O]>e)E+=k-(1<<N-v[O]),v[O]=e;else break}for(E>>=L;E>0;){var $=s[n].s;v[$]<e?E-=1<<e-v[$]++-1:++n}for(;n>=0&&E;--n){var F=s[n].s;v[F]==e&&(--v[F],++E)}N=e}return{t:new ya(v),l:N}},o1=function(r,e,t){return r.s==-1?Math.max(o1(r.l,e,t+1),o1(r.r,e,t+1)):e[r.s]=t},Iy=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new gs(++e),n=0,i=r[0],s=1,l=function(h){t[n++]=h},u=1;u<=e;++u)if(r[u]==i&&u!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)l(32754);s>2&&(l(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(l(i),--s;s>6;s-=6)l(8304);s>2&&(l(s-3<<5|8208),s=0)}for(;s--;)l(i);s=1,i=r[u]}return{c:t.subarray(0,n),n:e}},Fh=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},Aw=function(r,e,t){var n=t.length,i=Tw(e+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var s=0;s<n;++s)r[i+s+4]=t[s];return(i+4+n)*8},Ey=function(r,e,t,n,i,s,l,u,h,d,g){bl(e,g++,t),++i[256];for(var b=xg(i,15),_=b.t,v=b.l,N=xg(s,15),E=N.t,L=N.l,k=Iy(_),O=k.c,$=k.n,F=Iy(E),oe=F.c,ce=F.n,D=new gs(19),C=0;C<O.length;++C)++D[O[C]&31];for(var C=0;C<oe.length;++C)++D[oe[C]&31];for(var S=xg(D,7),V=S.t,I=S.l,w=19;w>4&&!V[Cy[w-1]];--w);var B=d+5<<3,M=Fh(i,wu)+Fh(s,ym)+l,q=Fh(i,_)+Fh(s,E)+l+14+3*w+Fh(D,V)+2*D[16]+3*D[17]+7*D[18];if(h>=0&&B<=M&&B<=q)return Aw(e,g,r.subarray(h,h+d));var se,te,re,xe;if(bl(e,g,1+(q<M)),g+=2,q<M){se=Yh(_,v,0),te=_,re=Yh(E,L,0),xe=E;var be=Yh(V,I,0);bl(e,g,$-257),bl(e,g+5,ce-1),bl(e,g+10,w-4),g+=14;for(var C=0;C<w;++C)bl(e,g+3*C,V[Cy[C]]);g+=3*w;for(var Z=[O,oe],W=0;W<2;++W)for(var J=Z[W],C=0;C<J.length;++C){var ie=J[C]&31;bl(e,g,be[ie]),g+=V[ie],ie>15&&(bl(e,g,J[C]>>5&127),g+=J[C]>>12)}}else se=nA,te=wu,re=iA,xe=ym;for(var C=0;C<u;++C){var he=n[C];if(he>255){var ie=he>>18&31;Lh(e,g,se[ie+257]),g+=te[ie+257],ie>7&&(bl(e,g,he>>23&31),g+=r5[ie]);var ge=he&31;Lh(e,g,re[ge]),g+=xe[ge],ge>3&&(Lh(e,g,he>>5&8191),g+=n5[ge])}else Lh(e,g,se[he]),g+=te[he]}return Lh(e,g,se[256]),g+te[256]},sA=new t5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Cw=new ya(0),aA=function(r,e,t,n,i,s){var l=s.z||r.length,u=new ya(n+l+5*(1+Math.ceil(l/7e3))+i),h=u.subarray(n,u.length-i),d=s.l,g=(s.r||0)&7;if(e){g&&(h[0]=s.r>>3);for(var b=sA[e-1],_=b>>13,v=b&8191,N=(1<<t)-1,E=s.p||new gs(32768),L=s.h||new gs(N+1),k=Math.ceil(t/3),O=2*k,$=function(ze){return(r[ze]^r[ze+1]<<k^r[ze+2]<<O)&N},F=new t5(25e3),oe=new gs(288),ce=new gs(32),D=0,C=0,S=s.i||0,V=0,I=s.w||0,w=0;S+2<l;++S){var B=$(S),M=S&32767,q=L[B];if(E[M]=q,L[B]=M,I<=S){var se=l-S;if((D>7e3||V>24576)&&(se>423||!d)){g=Ey(r,h,0,F,oe,ce,C,V,w,S-w,g),V=D=C=0,w=S;for(var te=0;te<286;++te)oe[te]=0;for(var te=0;te<30;++te)ce[te]=0}var re=2,xe=0,be=v,Z=M-q&32767;if(se>2&&B==$(S-Z))for(var W=Math.min(_,se)-1,J=Math.min(32767,S),ie=Math.min(258,se);Z<=J&&--be&&M!=q;){if(r[S+re]==r[S+re-Z]){for(var he=0;he<ie&&r[S+he]==r[S+he-Z];++he);if(he>re){if(re=he,xe=Z,he>W)break;for(var ge=Math.min(Z,he-2),_e=0,te=0;te<ge;++te){var fe=S-Z+te&32767,ve=E[fe],Ne=fe-ve&32767;Ne>_e&&(_e=Ne,q=fe)}}}M=q,q=E[M],Z+=M-q&32767}if(xe){F[V++]=268435456|n1[re]<<18|ky[xe];var Ue=n1[re]&31,Xe=ky[xe]&31;C+=r5[Ue]+n5[Xe],++oe[257+Ue],++ce[Xe],I=S+re,++D}else F[V++]=r[S],++oe[r[S]]}}for(S=Math.max(S,I);S<l;++S)F[V++]=r[S],++oe[r[S]];g=Ey(r,h,d,F,oe,ce,C,V,w,S-w,g),d||(s.r=g&7|h[g/8|0]<<3,g-=7,s.h=L,s.p=E,s.i=S,s.w=I)}else{for(var S=s.w||0;S<l+d;S+=65535){var Ze=S+65535;Ze>=l&&(h[g/8|0]=d,Ze=l),g=Aw(h,g+1,r.subarray(S,Ze))}s.i=l}return oA(u,0,n+Tw(g)+i)},kw=function(){var r=1,e=0;return{p:function(t){for(var n=r,i=e,s=t.length|0,l=0;l!=s;){for(var u=Math.min(l+2655,s);l<u;++l)i+=n+=t[l];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}r=n,e=i},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},lA=function(r,e,t,n,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),l=new ya(s.length+r.length);l.set(s),l.set(r,s.length),r=l,i.w=s.length}return aA(r,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,i)},Iw=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},cA=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var i=kw();i.p(e.dictionary),Iw(r,2,i.d())}};function s1(r,e){e||(e={});var t=kw();t.p(r);var n=lA(r,e,e.dictionary?6:2,4);return cA(n,e),Iw(n,n.length-4,t.d()),n}var uA=typeof TextDecoder<"u"&&new TextDecoder,dA=0;try{uA.decode(Cw,{stream:!0}),dA=1}catch{}function hA(r){if(Array.isArray(r))return r}function fA(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,s,l,u=[],h=!0,d=!1;try{if(s=(t=t.call(r)).next,e!==0)for(;!(h=(n=s.call(t)).done)&&(u.push(n.value),u.length!==e);h=!0);}catch(g){d=!0,i=g}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(d)throw i}}return u}}function jy(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function pA(r,e){if(r){if(typeof r=="string")return jy(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?jy(r,e):void 0}}function mA(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ry(r,e){return hA(r)||fA(r,e)||pA(r,e)||mA()}function Py(r,e="utf8"){return new TextDecoder(e).decode(r)}const gA=new TextEncoder;function yA(r){return gA.encode(r)}const xA=1024*8,vA=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),vg={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class i5{constructor(e=xA,t={}){Hr(this,"buffer");Hr(this,"byteLength");Hr(this,"byteOffset");Hr(this,"length");Hr(this,"offset");Hr(this,"lastWrittenByte");Hr(this,"littleEndian");Hr(this,"_data");Hr(this,"_mark");Hr(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,s=e.byteLength-i;let l=i;(ArrayBuffer.isView(e)||e instanceof i5)&&(e.byteLength!==e.buffer.byteLength&&(l=e.byteOffset+i),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const n=vg[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+n);if(this.littleEndian===vA&&t!=="uint8"&&t!=="int8"){const u=new Uint8Array(this.buffer.slice(i,i+n));u.reverse();const h=new vg[t](u.buffer);return this.offset+=n,h.reverse(),h}const l=new vg[t](s);return this.offset+=n,l}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(e=1){return Py(this.readBytes(e))}decodeText(e=1,t="utf8"){return Py(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(yA(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function rh(r){let e=r.length;for(;--e>=0;)r[e]=0}const bA=3,wA=258,Ew=29,SA=256,_A=SA+1+Ew,jw=30,TA=512,AA=new Array((_A+2)*2);rh(AA);const CA=new Array(jw*2);rh(CA);const kA=new Array(TA);rh(kA);const IA=new Array(wA-bA+1);rh(IA);const EA=new Array(Ew);rh(EA);const jA=new Array(jw);rh(jA);const RA=(r,e,t,n)=>{let i=r&65535|0,s=r>>>16&65535|0,l=0;for(;t!==0;){l=t>2e3?2e3:t,t-=l;do i=i+e[n++]|0,s=s+i|0;while(--l);i%=65521,s%=65521}return i|s<<16|0};var a1=RA;const PA=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},NA=new Uint32Array(PA()),BA=(r,e,t,n)=>{const i=NA,s=n+t;r^=-1;for(let l=n;l<s;l++)r=r>>>8^i[(r^e[l])&255];return r^-1};var Va=BA,l1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Rw={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const LA=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var FA=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)LA(t,n)&&(r[n]=t[n])}}return r},zA=r=>{let e=0;for(let n=0,i=r.length;n<i;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,i=0,s=r.length;n<s;n++){let l=r[n];t.set(l,i),i+=l.length}return t},Pw={assign:FA,flattenChunks:zA};let Nw=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Nw=!1}const df=new Uint8Array(256);for(let r=0;r<256;r++)df[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;df[254]=df[254]=1;var VA=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,i,s,l=r.length,u=0;for(i=0;i<l;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<l&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),u+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(u),s=0,i=0;s<u;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<l&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e};const OA=(r,e)=>{if(e<65534&&r.subarray&&Nw)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var MA=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,i;const s=new Array(t*2);for(i=0,n=0;n<t;){let l=r[n++];if(l<128){s[i++]=l;continue}let u=df[l];if(u>4){s[i++]=65533,n+=u-1;continue}for(l&=u===2?31:u===3?15:7;u>1&&n<t;)l=l<<6|r[n++]&63,u--;if(u>1){s[i++]=65533;continue}l<65536?s[i++]=l:(l-=65536,s[i++]=55296|l>>10&1023,s[i++]=56320|l&1023)}return OA(s,i)},DA=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+df[r[t]]>e?t:e},c1={string2buf:VA,buf2string:MA,utf8border:DA};function WA(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var $A=WA;const jp=16209,UA=16191;var qA=function(e,t){let n,i,s,l,u,h,d,g,b,_,v,N,E,L,k,O,$,F,oe,ce,D,C,S,V;const I=e.state;n=e.next_in,S=e.input,i=n+(e.avail_in-5),s=e.next_out,V=e.output,l=s-(t-e.avail_out),u=s+(e.avail_out-257),h=I.dmax,d=I.wsize,g=I.whave,b=I.wnext,_=I.window,v=I.hold,N=I.bits,E=I.lencode,L=I.distcode,k=(1<<I.lenbits)-1,O=(1<<I.distbits)-1;e:do{N<15&&(v+=S[n++]<<N,N+=8,v+=S[n++]<<N,N+=8),$=E[v&k];t:for(;;){if(F=$>>>24,v>>>=F,N-=F,F=$>>>16&255,F===0)V[s++]=$&65535;else if(F&16){oe=$&65535,F&=15,F&&(N<F&&(v+=S[n++]<<N,N+=8),oe+=v&(1<<F)-1,v>>>=F,N-=F),N<15&&(v+=S[n++]<<N,N+=8,v+=S[n++]<<N,N+=8),$=L[v&O];r:for(;;){if(F=$>>>24,v>>>=F,N-=F,F=$>>>16&255,F&16){if(ce=$&65535,F&=15,N<F&&(v+=S[n++]<<N,N+=8,N<F&&(v+=S[n++]<<N,N+=8)),ce+=v&(1<<F)-1,ce>h){e.msg="invalid distance too far back",I.mode=jp;break e}if(v>>>=F,N-=F,F=s-l,ce>F){if(F=ce-F,F>g&&I.sane){e.msg="invalid distance too far back",I.mode=jp;break e}if(D=0,C=_,b===0){if(D+=d-F,F<oe){oe-=F;do V[s++]=_[D++];while(--F);D=s-ce,C=V}}else if(b<F){if(D+=d+b-F,F-=b,F<oe){oe-=F;do V[s++]=_[D++];while(--F);if(D=0,b<oe){F=b,oe-=F;do V[s++]=_[D++];while(--F);D=s-ce,C=V}}}else if(D+=b-F,F<oe){oe-=F;do V[s++]=_[D++];while(--F);D=s-ce,C=V}for(;oe>2;)V[s++]=C[D++],V[s++]=C[D++],V[s++]=C[D++],oe-=3;oe&&(V[s++]=C[D++],oe>1&&(V[s++]=C[D++]))}else{D=s-ce;do V[s++]=V[D++],V[s++]=V[D++],V[s++]=V[D++],oe-=3;while(oe>2);oe&&(V[s++]=V[D++],oe>1&&(V[s++]=V[D++]))}}else if((F&64)===0){$=L[($&65535)+(v&(1<<F)-1)];continue r}else{e.msg="invalid distance code",I.mode=jp;break e}break}}else if((F&64)===0){$=E[($&65535)+(v&(1<<F)-1)];continue t}else if(F&32){I.mode=UA;break e}else{e.msg="invalid literal/length code",I.mode=jp;break e}break}}while(n<i&&s<u);oe=N>>3,n-=oe,N-=oe<<3,v&=(1<<N)-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=s<u?257+(u-s):257-(s-u),I.hold=v,I.bits=N};const hd=15,Ny=852,By=592,Ly=0,bg=1,Fy=2,HA=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),GA=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),KA=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),JA=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),YA=(r,e,t,n,i,s,l,u)=>{const h=u.bits;let d=0,g=0,b=0,_=0,v=0,N=0,E=0,L=0,k=0,O=0,$,F,oe,ce,D,C=null,S;const V=new Uint16Array(hd+1),I=new Uint16Array(hd+1);let w=null,B,M,q;for(d=0;d<=hd;d++)V[d]=0;for(g=0;g<n;g++)V[e[t+g]]++;for(v=h,_=hd;_>=1&&V[_]===0;_--);if(v>_&&(v=_),_===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,u.bits=1,0;for(b=1;b<_&&V[b]===0;b++);for(v<b&&(v=b),L=1,d=1;d<=hd;d++)if(L<<=1,L-=V[d],L<0)return-1;if(L>0&&(r===Ly||_!==1))return-1;for(I[1]=0,d=1;d<hd;d++)I[d+1]=I[d]+V[d];for(g=0;g<n;g++)e[t+g]!==0&&(l[I[e[t+g]]++]=g);if(r===Ly?(C=w=l,S=20):r===bg?(C=HA,w=GA,S=257):(C=KA,w=JA,S=0),O=0,g=0,d=b,D=s,N=v,E=0,oe=-1,k=1<<v,ce=k-1,r===bg&&k>Ny||r===Fy&&k>By)return 1;for(;;){B=d-E,l[g]+1<S?(M=0,q=l[g]):l[g]>=S?(M=w[l[g]-S],q=C[l[g]-S]):(M=96,q=0),$=1<<d-E,F=1<<N,b=F;do F-=$,i[D+(O>>E)+F]=B<<24|M<<16|q|0;while(F!==0);for($=1<<d-1;O&$;)$>>=1;if($!==0?(O&=$-1,O+=$):O=0,g++,--V[d]===0){if(d===_)break;d=e[t+l[g]]}if(d>v&&(O&ce)!==oe){for(E===0&&(E=v),D+=b,N=d-E,L=1<<N;N+E<_&&(L-=V[N+E],!(L<=0));)N++,L<<=1;if(k+=1<<N,r===bg&&k>Ny||r===Fy&&k>By)return 1;oe=O&ce,i[oe]=v<<24|N<<16|D-s|0}}return O!==0&&(i[D+O]=d-E<<24|64<<16|0),u.bits=v,0};var Qh=YA;const QA=0,Bw=1,Lw=2,{Z_FINISH:zy,Z_BLOCK:XA,Z_TREES:Rp,Z_OK:Su,Z_STREAM_END:ZA,Z_NEED_DICT:eC,Z_STREAM_ERROR:$s,Z_DATA_ERROR:Fw,Z_MEM_ERROR:zw,Z_BUF_ERROR:tC,Z_DEFLATED:Vy}=Rw,Gm=16180,Oy=16181,My=16182,Dy=16183,Wy=16184,$y=16185,Uy=16186,qy=16187,Hy=16188,Gy=16189,xm=16190,wl=16191,wg=16192,Ky=16193,Sg=16194,Jy=16195,Yy=16196,Qy=16197,Xy=16198,Pp=16199,Np=16200,Zy=16201,ex=16202,tx=16203,rx=16204,nx=16205,_g=16206,ix=16207,ox=16208,xn=16209,Vw=16210,Ow=16211,rC=852,nC=592,iC=15,oC=iC,sx=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function sC(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const zu=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<Gm||e.mode>Ow?1:0},Mw=r=>{if(zu(r))return $s;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=Gm,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(rC),e.distcode=e.distdyn=new Int32Array(nC),e.sane=1,e.back=-1,Su},Dw=r=>{if(zu(r))return $s;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,Mw(r)},Ww=(r,e)=>{let t;if(zu(r))return $s;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?$s:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,Dw(r))},$w=(r,e)=>{if(!r)return $s;const t=new sC;r.state=t,t.strm=r,t.window=null,t.mode=Gm;const n=Ww(r,e);return n!==Su&&(r.state=null),n},aC=r=>$w(r,oC);let ax=!0,Tg,Ag;const lC=r=>{if(ax){Tg=new Int32Array(512),Ag=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(Qh(Bw,r.lens,0,288,Tg,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;Qh(Lw,r.lens,0,32,Ag,0,r.work,{bits:5}),ax=!1}r.lencode=Tg,r.lenbits=9,r.distcode=Ag,r.distbits=5},Uw=(r,e,t,n)=>{let i;const s=r.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(e.subarray(t-n,t-n+i),s.wnext),n-=i,n?(s.window.set(e.subarray(t-n,t),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},cC=(r,e)=>{let t,n,i,s,l,u,h,d,g,b,_,v,N,E,L=0,k,O,$,F,oe,ce,D,C;const S=new Uint8Array(4);let V,I;const w=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(zu(r)||!r.output||!r.input&&r.avail_in!==0)return $s;t=r.state,t.mode===wl&&(t.mode=wg),l=r.next_out,i=r.output,h=r.avail_out,s=r.next_in,n=r.input,u=r.avail_in,d=t.hold,g=t.bits,b=u,_=h,C=Su;e:for(;;)switch(t.mode){case Gm:if(t.wrap===0){t.mode=wg;break}for(;g<16;){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}if(t.wrap&2&&d===35615){t.wbits===0&&(t.wbits=15),t.check=0,S[0]=d&255,S[1]=d>>>8&255,t.check=Va(t.check,S,2,0),d=0,g=0,t.mode=Oy;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((d&255)<<8)+(d>>8))%31){r.msg="incorrect header check",t.mode=xn;break}if((d&15)!==Vy){r.msg="unknown compression method",t.mode=xn;break}if(d>>>=4,g-=4,D=(d&15)+8,t.wbits===0&&(t.wbits=D),D>15||D>t.wbits){r.msg="invalid window size",t.mode=xn;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=d&512?Gy:wl,d=0,g=0;break;case Oy:for(;g<16;){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}if(t.flags=d,(t.flags&255)!==Vy){r.msg="unknown compression method",t.mode=xn;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=xn;break}t.head&&(t.head.text=d>>8&1),t.flags&512&&t.wrap&4&&(S[0]=d&255,S[1]=d>>>8&255,t.check=Va(t.check,S,2,0)),d=0,g=0,t.mode=My;case My:for(;g<32;){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}t.head&&(t.head.time=d),t.flags&512&&t.wrap&4&&(S[0]=d&255,S[1]=d>>>8&255,S[2]=d>>>16&255,S[3]=d>>>24&255,t.check=Va(t.check,S,4,0)),d=0,g=0,t.mode=Dy;case Dy:for(;g<16;){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}t.head&&(t.head.xflags=d&255,t.head.os=d>>8),t.flags&512&&t.wrap&4&&(S[0]=d&255,S[1]=d>>>8&255,t.check=Va(t.check,S,2,0)),d=0,g=0,t.mode=Wy;case Wy:if(t.flags&1024){for(;g<16;){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}t.length=d,t.head&&(t.head.extra_len=d),t.flags&512&&t.wrap&4&&(S[0]=d&255,S[1]=d>>>8&255,t.check=Va(t.check,S,2,0)),d=0,g=0}else t.head&&(t.head.extra=null);t.mode=$y;case $y:if(t.flags&1024&&(v=t.length,v>u&&(v=u),v&&(t.head&&(D=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(s,s+v),D)),t.flags&512&&t.wrap&4&&(t.check=Va(t.check,n,v,s)),u-=v,s+=v,t.length-=v),t.length))break e;t.length=0,t.mode=Uy;case Uy:if(t.flags&2048){if(u===0)break e;v=0;do D=n[s+v++],t.head&&D&&t.length<65536&&(t.head.name+=String.fromCharCode(D));while(D&&v<u);if(t.flags&512&&t.wrap&4&&(t.check=Va(t.check,n,v,s)),u-=v,s+=v,D)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=qy;case qy:if(t.flags&4096){if(u===0)break e;v=0;do D=n[s+v++],t.head&&D&&t.length<65536&&(t.head.comment+=String.fromCharCode(D));while(D&&v<u);if(t.flags&512&&t.wrap&4&&(t.check=Va(t.check,n,v,s)),u-=v,s+=v,D)break e}else t.head&&(t.head.comment=null);t.mode=Hy;case Hy:if(t.flags&512){for(;g<16;){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}if(t.wrap&4&&d!==(t.check&65535)){r.msg="header crc mismatch",t.mode=xn;break}d=0,g=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=wl;break;case Gy:for(;g<32;){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}r.adler=t.check=sx(d),d=0,g=0,t.mode=xm;case xm:if(t.havedict===0)return r.next_out=l,r.avail_out=h,r.next_in=s,r.avail_in=u,t.hold=d,t.bits=g,eC;r.adler=t.check=1,t.mode=wl;case wl:if(e===XA||e===Rp)break e;case wg:if(t.last){d>>>=g&7,g-=g&7,t.mode=_g;break}for(;g<3;){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}switch(t.last=d&1,d>>>=1,g-=1,d&3){case 0:t.mode=Ky;break;case 1:if(lC(t),t.mode=Pp,e===Rp){d>>>=2,g-=2;break e}break;case 2:t.mode=Yy;break;case 3:r.msg="invalid block type",t.mode=xn}d>>>=2,g-=2;break;case Ky:for(d>>>=g&7,g-=g&7;g<32;){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}if((d&65535)!==(d>>>16^65535)){r.msg="invalid stored block lengths",t.mode=xn;break}if(t.length=d&65535,d=0,g=0,t.mode=Sg,e===Rp)break e;case Sg:t.mode=Jy;case Jy:if(v=t.length,v){if(v>u&&(v=u),v>h&&(v=h),v===0)break e;i.set(n.subarray(s,s+v),l),u-=v,s+=v,h-=v,l+=v,t.length-=v;break}t.mode=wl;break;case Yy:for(;g<14;){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}if(t.nlen=(d&31)+257,d>>>=5,g-=5,t.ndist=(d&31)+1,d>>>=5,g-=5,t.ncode=(d&15)+4,d>>>=4,g-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=xn;break}t.have=0,t.mode=Qy;case Qy:for(;t.have<t.ncode;){for(;g<3;){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}t.lens[w[t.have++]]=d&7,d>>>=3,g-=3}for(;t.have<19;)t.lens[w[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,V={bits:t.lenbits},C=Qh(QA,t.lens,0,19,t.lencode,0,t.work,V),t.lenbits=V.bits,C){r.msg="invalid code lengths set",t.mode=xn;break}t.have=0,t.mode=Xy;case Xy:for(;t.have<t.nlen+t.ndist;){for(;L=t.lencode[d&(1<<t.lenbits)-1],k=L>>>24,O=L>>>16&255,$=L&65535,!(k<=g);){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}if($<16)d>>>=k,g-=k,t.lens[t.have++]=$;else{if($===16){for(I=k+2;g<I;){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}if(d>>>=k,g-=k,t.have===0){r.msg="invalid bit length repeat",t.mode=xn;break}D=t.lens[t.have-1],v=3+(d&3),d>>>=2,g-=2}else if($===17){for(I=k+3;g<I;){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}d>>>=k,g-=k,D=0,v=3+(d&7),d>>>=3,g-=3}else{for(I=k+7;g<I;){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}d>>>=k,g-=k,D=0,v=11+(d&127),d>>>=7,g-=7}if(t.have+v>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=xn;break}for(;v--;)t.lens[t.have++]=D}}if(t.mode===xn)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=xn;break}if(t.lenbits=9,V={bits:t.lenbits},C=Qh(Bw,t.lens,0,t.nlen,t.lencode,0,t.work,V),t.lenbits=V.bits,C){r.msg="invalid literal/lengths set",t.mode=xn;break}if(t.distbits=6,t.distcode=t.distdyn,V={bits:t.distbits},C=Qh(Lw,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,V),t.distbits=V.bits,C){r.msg="invalid distances set",t.mode=xn;break}if(t.mode=Pp,e===Rp)break e;case Pp:t.mode=Np;case Np:if(u>=6&&h>=258){r.next_out=l,r.avail_out=h,r.next_in=s,r.avail_in=u,t.hold=d,t.bits=g,qA(r,_),l=r.next_out,i=r.output,h=r.avail_out,s=r.next_in,n=r.input,u=r.avail_in,d=t.hold,g=t.bits,t.mode===wl&&(t.back=-1);break}for(t.back=0;L=t.lencode[d&(1<<t.lenbits)-1],k=L>>>24,O=L>>>16&255,$=L&65535,!(k<=g);){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}if(O&&(O&240)===0){for(F=k,oe=O,ce=$;L=t.lencode[ce+((d&(1<<F+oe)-1)>>F)],k=L>>>24,O=L>>>16&255,$=L&65535,!(F+k<=g);){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}d>>>=F,g-=F,t.back+=F}if(d>>>=k,g-=k,t.back+=k,t.length=$,O===0){t.mode=nx;break}if(O&32){t.back=-1,t.mode=wl;break}if(O&64){r.msg="invalid literal/length code",t.mode=xn;break}t.extra=O&15,t.mode=Zy;case Zy:if(t.extra){for(I=t.extra;g<I;){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}t.length+=d&(1<<t.extra)-1,d>>>=t.extra,g-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=ex;case ex:for(;L=t.distcode[d&(1<<t.distbits)-1],k=L>>>24,O=L>>>16&255,$=L&65535,!(k<=g);){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}if((O&240)===0){for(F=k,oe=O,ce=$;L=t.distcode[ce+((d&(1<<F+oe)-1)>>F)],k=L>>>24,O=L>>>16&255,$=L&65535,!(F+k<=g);){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}d>>>=F,g-=F,t.back+=F}if(d>>>=k,g-=k,t.back+=k,O&64){r.msg="invalid distance code",t.mode=xn;break}t.offset=$,t.extra=O&15,t.mode=tx;case tx:if(t.extra){for(I=t.extra;g<I;){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}t.offset+=d&(1<<t.extra)-1,d>>>=t.extra,g-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=xn;break}t.mode=rx;case rx:if(h===0)break e;if(v=_-h,t.offset>v){if(v=t.offset-v,v>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=xn;break}v>t.wnext?(v-=t.wnext,N=t.wsize-v):N=t.wnext-v,v>t.length&&(v=t.length),E=t.window}else E=i,N=l-t.offset,v=t.length;v>h&&(v=h),h-=v,t.length-=v;do i[l++]=E[N++];while(--v);t.length===0&&(t.mode=Np);break;case nx:if(h===0)break e;i[l++]=t.length,h--,t.mode=Np;break;case _g:if(t.wrap){for(;g<32;){if(u===0)break e;u--,d|=n[s++]<<g,g+=8}if(_-=h,r.total_out+=_,t.total+=_,t.wrap&4&&_&&(r.adler=t.check=t.flags?Va(t.check,i,_,l-_):a1(t.check,i,_,l-_)),_=h,t.wrap&4&&(t.flags?d:sx(d))!==t.check){r.msg="incorrect data check",t.mode=xn;break}d=0,g=0}t.mode=ix;case ix:if(t.wrap&&t.flags){for(;g<32;){if(u===0)break e;u--,d+=n[s++]<<g,g+=8}if(t.wrap&4&&d!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=xn;break}d=0,g=0}t.mode=ox;case ox:C=ZA;break e;case xn:C=Fw;break e;case Vw:return zw;case Ow:default:return $s}return r.next_out=l,r.avail_out=h,r.next_in=s,r.avail_in=u,t.hold=d,t.bits=g,(t.wsize||_!==r.avail_out&&t.mode<xn&&(t.mode<_g||e!==zy))&&Uw(r,r.output,r.next_out,_-r.avail_out),b-=r.avail_in,_-=r.avail_out,r.total_in+=b,r.total_out+=_,t.total+=_,t.wrap&4&&_&&(r.adler=t.check=t.flags?Va(t.check,i,_,r.next_out-_):a1(t.check,i,_,r.next_out-_)),r.data_type=t.bits+(t.last?64:0)+(t.mode===wl?128:0)+(t.mode===Pp||t.mode===Sg?256:0),(b===0&&_===0||e===zy)&&C===Su&&(C=tC),C},uC=r=>{if(zu(r))return $s;let e=r.state;return e.window&&(e.window=null),r.state=null,Su},dC=(r,e)=>{if(zu(r))return $s;const t=r.state;return(t.wrap&2)===0?$s:(t.head=e,e.done=!1,Su)},hC=(r,e)=>{const t=e.length;let n,i,s;return zu(r)||(n=r.state,n.wrap!==0&&n.mode!==xm)?$s:n.mode===xm&&(i=1,i=a1(i,e,t,0),i!==n.check)?Fw:(s=Uw(r,e,t,t),s?(n.mode=Vw,zw):(n.havedict=1,Su))};var fC=Dw,pC=Ww,mC=Mw,gC=aC,yC=$w,xC=cC,vC=uC,bC=dC,wC=hC,SC="pako inflate (from Nodeca project)",Sl={inflateReset:fC,inflateReset2:pC,inflateResetKeep:mC,inflateInit:gC,inflateInit2:yC,inflate:xC,inflateEnd:vC,inflateGetHeader:bC,inflateSetDictionary:wC,inflateInfo:SC};function _C(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var TC=_C;const qw=Object.prototype.toString,{Z_NO_FLUSH:AC,Z_FINISH:CC,Z_OK:hf,Z_STREAM_END:Cg,Z_NEED_DICT:kg,Z_STREAM_ERROR:kC,Z_DATA_ERROR:lx,Z_MEM_ERROR:IC}=Rw;function Rf(r){this.options=Pw.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $A,this.strm.avail_out=0;let t=Sl.inflateInit2(this.strm,e.windowBits);if(t!==hf)throw new Error(l1[t]);if(this.header=new TC,Sl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=c1.string2buf(e.dictionary):qw.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Sl.inflateSetDictionary(this.strm,e.dictionary),t!==hf)))throw new Error(l1[t])}Rf.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,l,u;if(this.ended)return!1;for(e===~~e?l=e:l=e===!0?CC:AC,qw.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),s=Sl.inflate(t,l),s===kg&&i&&(s=Sl.inflateSetDictionary(t,i),s===hf?s=Sl.inflate(t,l):s===lx&&(s=kg));t.avail_in>0&&s===Cg&&t.state.wrap>0&&r[t.next_in]!==0;)Sl.inflateReset(t),s=Sl.inflate(t,l);switch(s){case kC:case lx:case kg:case IC:return this.onEnd(s),this.ended=!0,!1}if(u=t.avail_out,t.next_out&&(t.avail_out===0||s===Cg))if(this.options.to==="string"){let h=c1.utf8border(t.output,t.next_out),d=t.next_out-h,g=c1.buf2string(t.output,h);t.next_out=d,t.avail_out=n-d,d&&t.output.set(t.output.subarray(h,h+d),0),this.onData(g)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===hf&&u===0)){if(s===Cg)return s=Sl.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Rf.prototype.onData=function(r){this.chunks.push(r)};Rf.prototype.onEnd=function(r){r===hf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Pw.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function EC(r,e){const t=new Rf(e);if(t.push(r),t.err)throw t.msg||l1[t.err];return t.result}var jC=Rf,RC=EC,PC={Inflate:jC,inflate:RC};const{Inflate:NC,inflate:BC}=PC;var cx=NC,LC=BC;const Hw=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;Hw[r]=e}const ux=4294967295;function FC(r,e,t){let n=r;for(let i=0;i<t;i++)n=Hw[(n^e[i])&255]^n>>>8;return n}function zC(r,e){return(FC(ux,r,e)^ux)>>>0}function dx(r,e,t){const n=r.readUint32(),i=zC(new Uint8Array(r.buffer,r.byteOffset+r.offset-e-4,e),e);if(i!==n)throw new Error(`CRC mismatch for chunk ${t}. Expected ${n}, found ${i}`)}function Gw(r,e,t){for(let n=0;n<t;n++)e[n]=r[n]}function Kw(r,e,t,n){let i=0;for(;i<n;i++)e[i]=r[i];for(;i<t;i++)e[i]=r[i]+e[i-n]&255}function Jw(r,e,t,n){let i=0;if(t.length===0)for(;i<n;i++)e[i]=r[i];else for(;i<n;i++)e[i]=r[i]+t[i]&255}function Yw(r,e,t,n,i){let s=0;if(t.length===0){for(;s<i;s++)e[s]=r[s];for(;s<n;s++)e[s]=r[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=r[s]+(t[s]>>1)&255;for(;s<n;s++)e[s]=r[s]+(e[s-i]+t[s]>>1)&255}}function Qw(r,e,t,n,i){let s=0;if(t.length===0){for(;s<i;s++)e[s]=r[s];for(;s<n;s++)e[s]=r[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=r[s]+t[s]&255;for(;s<n;s++)e[s]=r[s]+VC(e[s-i],t[s],t[s-i])&255}}function VC(r,e,t){const n=r+e-t,i=Math.abs(n-r),s=Math.abs(n-e),l=Math.abs(n-t);return i<=s&&i<=l?r:s<=l?e:t}function OC(r,e,t,n,i,s){switch(r){case 0:Gw(e,t,i);break;case 1:Kw(e,t,i,s);break;case 2:Jw(e,t,n,i);break;case 3:Yw(e,t,n,i,s);break;case 4:Qw(e,t,n,i,s);break;default:throw new Error(`Unsupported filter: ${r}`)}}const MC=new Uint16Array([255]),DC=new Uint8Array(MC.buffer),WC=DC[0]===255;function $C(r){const{data:e,width:t,height:n,channels:i,depth:s}=r,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(s/8)*i,h=new Uint8Array(n*t*u);let d=0;for(let g=0;g<7;g++){const b=l[g],_=Math.ceil((t-b.x)/b.xStep),v=Math.ceil((n-b.y)/b.yStep);if(_<=0||v<=0)continue;const N=_*u,E=new Uint8Array(N);for(let L=0;L<v;L++){const k=e[d++],O=e.subarray(d,d+N);d+=N;const $=new Uint8Array(N);OC(k,O,$,E,N,u),E.set($);for(let F=0;F<_;F++){const oe=b.x+F*b.xStep,ce=b.y+L*b.yStep;if(!(oe>=t||ce>=n))for(let D=0;D<u;D++)h[(ce*t+oe)*u+D]=$[F*u+D]}}}if(s===16){const g=new Uint16Array(h.buffer);if(WC)for(let b=0;b<g.length;b++)g[b]=UC(g[b]);return g}else return h}function UC(r){return(r&255)<<8|r>>8&255}const qC=new Uint16Array([255]),HC=new Uint8Array(qC.buffer),GC=HC[0]===255,KC=new Uint8Array(0);function hx(r){const{data:e,width:t,height:n,channels:i,depth:s}=r,l=Math.ceil(s/8)*i,u=Math.ceil(s/8*i*t),h=new Uint8Array(n*u);let d=KC,g=0,b,_;for(let v=0;v<n;v++){switch(b=e.subarray(g+1,g+1+u),_=h.subarray(v*u,(v+1)*u),e[g]){case 0:Gw(b,_,u);break;case 1:Kw(b,_,u,l);break;case 2:Jw(b,_,d,u);break;case 3:Yw(b,_,d,u,l);break;case 4:Qw(b,_,d,u,l);break;default:throw new Error(`Unsupported filter: ${e[g]}`)}d=_,g+=u+1}if(s===16){const v=new Uint16Array(h.buffer);if(GC)for(let N=0;N<v.length;N++)v[N]=JC(v[N]);return v}else return h}function JC(r){return(r&255)<<8|r>>8&255}const Kp=Uint8Array.of(137,80,78,71,13,10,26,10);function fx(r){if(!YC(r.readBytes(Kp.length)))throw new Error("wrong PNG signature")}function YC(r){if(r.length<Kp.length)return!1;for(let e=0;e<Kp.length;e++)if(r[e]!==Kp[e])return!1;return!0}const QC="tEXt",XC=0,Xw=new TextDecoder("latin1");function ZC(r){if(tk(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const ek=/^[\u0000-\u00FF]*$/;function tk(r){if(!ek.test(r))throw new Error("invalid latin1 text")}function rk(r,e,t){const n=Zw(e);r[n]=nk(e,t-n.length-1)}function Zw(r){for(r.mark();r.readByte()!==XC;);const e=r.offset;r.reset();const t=Xw.decode(r.readBytes(e-r.offset-1));return r.skip(1),ZC(t),t}function nk(r,e){return Xw.decode(r.readBytes(e))}const ps={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Ig={UNKNOWN:-1,DEFLATE:0},px={UNKNOWN:-1,ADAPTIVE:0},Eg={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Bp={NONE:0,BACKGROUND:1,PREVIOUS:2},jg={SOURCE:0,OVER:1};class ik extends i5{constructor(t,n={}){super(t);Hr(this,"_checkCrc");Hr(this,"_inflator");Hr(this,"_png");Hr(this,"_apng");Hr(this,"_end");Hr(this,"_hasPalette");Hr(this,"_palette");Hr(this,"_hasTransparency");Hr(this,"_transparency");Hr(this,"_compressionMethod");Hr(this,"_filterMethod");Hr(this,"_interlaceMethod");Hr(this,"_colorType");Hr(this,"_isAnimated");Hr(this,"_numberOfFrames");Hr(this,"_numberOfPlays");Hr(this,"_frames");Hr(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new cx,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Ig.UNKNOWN,this._filterMethod=px.UNKNOWN,this._interlaceMethod=Eg.UNKNOWN,this._colorType=ps.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(fx(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeChunk(t,n)}return this.decodeImage(),this._png}decodeApng(){for(fx(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(t,n)}return this.decodeApngImage(),this._apng}decodeChunk(t,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case QC:rk(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?dx(this,t+4,n):this.skip(4)}decodeApngChunk(t,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,n),this.offset=i+t;break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?dx(this,t+4,n):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=ok(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case ps.GREYSCALE:i=1;break;case ps.TRUECOLOUR:i=3;break;case ps.INDEXED_COLOUR:i=1;break;case ps.GREYSCALE_ALPHA:i=2;break;case ps.TRUECOLOUR_ALPHA:i=4;break;case ps.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==Ig.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const n=t/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<n;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const n=t,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let n=t,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case ps.GREYSCALE:case ps.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let n=0;n<t/2;n++)this._transparency[n]=this.readUint16();break}case ps.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let n=0;for(;n<t;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case ps.UNKNOWN:case ps.GREYSCALE_ALPHA:case ps.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const n=Zw(this),i=this.readUint8();if(i!==Ig.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(t-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:LC(s)}}decodepHYs(){const t=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:t,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const n={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(t);if(i){if(i.data=hx({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const s=this._apng.frames.at(t-1);this.disposeFrame(i,s,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(t,n,i){switch(t.disposeOp){case Bp.NONE:break;case Bp.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let l=0;l<this._png.width;l++){const u=(s*t.width+l)*this._png.channels;for(let h=0;h<this._png.channels;h++)i.data[u+h]=0}break;case Bp.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,n){const i=1<<this._png.depth,s=(l,u)=>{const h=((l+n.yOffset)*this._png.width+n.xOffset+u)*this._png.channels,d=(l*n.width+u)*this._png.channels;return{index:h,frameIndex:d}};switch(n.blendOp){case jg.SOURCE:for(let l=0;l<n.height;l++)for(let u=0;u<n.width;u++){const{index:h,frameIndex:d}=s(l,u);for(let g=0;g<this._png.channels;g++)t.data[h+g]=n.data[d+g]}break;case jg.OVER:for(let l=0;l<n.height;l++)for(let u=0;u<n.width;u++){const{index:h,frameIndex:d}=s(l,u);for(let g=0;g<this._png.channels;g++){const b=n.data[d+this._png.channels-1]/i,_=g%(this._png.channels-1)===0?1:n.data[d+g],v=Math.floor(b*_+(1-b)*t.data[h+g]);t.data[h+g]+=v}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==px.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Eg.NO_INTERLACE)this._png.data=hx({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Eg.ADAM7)this._png.data=$C({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,n=this._frames.at(-1);n?n.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Bp.NONE,blendOp:jg.SOURCE,data:t}),this._inflator=new cx,this._writingDataChunks=!1}}function ok(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var mx;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(mx||(mx={}));function sk(r,e){return new ik(r,e).decode()}var Qt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Rg(){Qt.console&&typeof Qt.console.log=="function"&&Qt.console.log.apply(Qt.console,arguments)}var nn={log:Rg,warn:function(r){Qt.console&&(typeof Qt.console.warn=="function"?Qt.console.warn.apply(Qt.console,arguments):Rg.call(null,arguments))},error:function(r){Qt.console&&(typeof Qt.console.error=="function"?Qt.console.error.apply(Qt.console,arguments):Rg(r))}};function Pg(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){iu(n.response,e,t)},n.onerror=function(){nn.error("could not download file")},n.send()}function gx(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Lp(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var iu=Qt.saveAs||((typeof window>"u"?"undefined":Gr(window))!=="object"||window!==Qt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=Qt.URL||Qt.webkitURL,i=document.createElement("a");e=e||r.name||"download",i.download=e,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin!==location.origin?gx(i.href)?Pg(r,e,t):Lp(i,i.target="_blank"):Lp(i)):(i.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Lp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(gx(r))Pg(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){Lp(n)})}else navigator.msSaveOrOpenBlob((function(i,s){return s===void 0?s={autoBom:!1}:Gr(s)!=="object"&&(nn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return Pg(r,e,t);var i=r.type==="application/octet-stream",s=/constructor/i.test(Qt.HTMLElement)||Qt.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||i&&s)&&(typeof FileReader>"u"?"undefined":Gr(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var g=u.result;g=l?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=g:location=g,n=null},u.readAsDataURL(r)}else{var h=Qt.URL||Qt.webkitURL,d=h.createObjectURL(r);n?n.location=d:location.href=d,n=null,setTimeout(function(){h.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function eS(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],n=0;n<t.length;n++){var i=t[n].re,s=t[n].process,l=i.exec(r);l&&(e=s(l),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),h=this.g.toString(16),d=this.b.toString(16);return u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),d.length==1&&(d="0"+d),"#"+u+h+d}}var Jp=Qt.atob.bind(Qt),yx=Qt.btoa.bind(Qt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Ng(r,e){var t=r[0],n=r[1],i=r[2],s=r[3];t=so(t,n,i,s,e[0],7,-680876936),s=so(s,t,n,i,e[1],12,-389564586),i=so(i,s,t,n,e[2],17,606105819),n=so(n,i,s,t,e[3],22,-1044525330),t=so(t,n,i,s,e[4],7,-176418897),s=so(s,t,n,i,e[5],12,1200080426),i=so(i,s,t,n,e[6],17,-1473231341),n=so(n,i,s,t,e[7],22,-45705983),t=so(t,n,i,s,e[8],7,1770035416),s=so(s,t,n,i,e[9],12,-1958414417),i=so(i,s,t,n,e[10],17,-42063),n=so(n,i,s,t,e[11],22,-1990404162),t=so(t,n,i,s,e[12],7,1804603682),s=so(s,t,n,i,e[13],12,-40341101),i=so(i,s,t,n,e[14],17,-1502002290),t=ao(t,n=so(n,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=ao(s,t,n,i,e[6],9,-1069501632),i=ao(i,s,t,n,e[11],14,643717713),n=ao(n,i,s,t,e[0],20,-373897302),t=ao(t,n,i,s,e[5],5,-701558691),s=ao(s,t,n,i,e[10],9,38016083),i=ao(i,s,t,n,e[15],14,-660478335),n=ao(n,i,s,t,e[4],20,-405537848),t=ao(t,n,i,s,e[9],5,568446438),s=ao(s,t,n,i,e[14],9,-1019803690),i=ao(i,s,t,n,e[3],14,-187363961),n=ao(n,i,s,t,e[8],20,1163531501),t=ao(t,n,i,s,e[13],5,-1444681467),s=ao(s,t,n,i,e[2],9,-51403784),i=ao(i,s,t,n,e[7],14,1735328473),t=lo(t,n=ao(n,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=lo(s,t,n,i,e[8],11,-2022574463),i=lo(i,s,t,n,e[11],16,1839030562),n=lo(n,i,s,t,e[14],23,-35309556),t=lo(t,n,i,s,e[1],4,-1530992060),s=lo(s,t,n,i,e[4],11,1272893353),i=lo(i,s,t,n,e[7],16,-155497632),n=lo(n,i,s,t,e[10],23,-1094730640),t=lo(t,n,i,s,e[13],4,681279174),s=lo(s,t,n,i,e[0],11,-358537222),i=lo(i,s,t,n,e[3],16,-722521979),n=lo(n,i,s,t,e[6],23,76029189),t=lo(t,n,i,s,e[9],4,-640364487),s=lo(s,t,n,i,e[12],11,-421815835),i=lo(i,s,t,n,e[15],16,530742520),t=co(t,n=lo(n,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=co(s,t,n,i,e[7],10,1126891415),i=co(i,s,t,n,e[14],15,-1416354905),n=co(n,i,s,t,e[5],21,-57434055),t=co(t,n,i,s,e[12],6,1700485571),s=co(s,t,n,i,e[3],10,-1894986606),i=co(i,s,t,n,e[10],15,-1051523),n=co(n,i,s,t,e[1],21,-2054922799),t=co(t,n,i,s,e[8],6,1873313359),s=co(s,t,n,i,e[15],10,-30611744),i=co(i,s,t,n,e[6],15,-1560198380),n=co(n,i,s,t,e[13],21,1309151649),t=co(t,n,i,s,e[4],6,-145523070),s=co(s,t,n,i,e[11],10,-1120210379),i=co(i,s,t,n,e[2],15,718787259),n=co(n,i,s,t,e[9],21,-343485551),r[0]=yc(t,r[0]),r[1]=yc(n,r[1]),r[2]=yc(i,r[2]),r[3]=yc(s,r[3])}function Km(r,e,t,n,i,s){return e=yc(yc(e,r),yc(n,s)),yc(e<<i|e>>>32-i,t)}function so(r,e,t,n,i,s,l){return Km(e&t|~e&n,r,e,i,s,l)}function ao(r,e,t,n,i,s,l){return Km(e&n|t&~n,r,e,i,s,l)}function lo(r,e,t,n,i,s,l){return Km(e^t^n,r,e,i,s,l)}function co(r,e,t,n,i,s,l){return Km(t^(e|~n),r,e,i,s,l)}function tS(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)Ng(n,ak(r.substring(e-64,e)));r=r.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Ng(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Ng(n,i),n}function ak(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}var xx="0123456789abcdef".split("");function lk(r){for(var e="",t=0;t<4;t++)e+=xx[r>>8*t+4&15]+xx[r>>8*t&15];return e}function ck(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function u1(r){return tS(r).map(ck).join("")}var uk=(function(r){for(var e=0;e<r.length;e++)r[e]=lk(r[e]);return r.join("")})(tS("hello"))!="5d41402abc4b2a76b9719d911017c592";function yc(r,e){if(uk){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function d1(r,e){var t,n,i,s;if(r!==t){for(var l=(i=r,s=1+(256/r.length|0),new Array(s+1).join(i)),u=[],h=0;h<256;h++)u[h]=h;var d=0;for(h=0;h<256;h++){var g=u[h];d=(d+g+l.charCodeAt(h))%256,u[h]=u[d],u[d]=g}t=r,n=u}else u=n;var b=e.length,_=0,v=0,N="";for(h=0;h<b;h++)v=(v+(g=u[_=(_+1)%256]))%256,u[_]=u[v],u[v]=g,l=u[(u[_]+u[v])%256],N+=String.fromCharCode(e.charCodeAt(h)^l);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var vx={print:4,modify:8,copy:16,"annot-forms":32};function wd(r,e,t,n){this.v=1,this.r=2;var i=192;r.forEach(function(u){if(vx.perm!==void 0)throw new Error("Invalid permission: "+u);i+=vx[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),l=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,l),this.P=-(1+(255^i)),this.encryptionKey=u1(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=d1(this.encryptionKey,this.padding)}function Sd(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var i=r.charCodeAt(n);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):r[n]}return e}function bx(r){if(Gr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,i){if(i=i||!1,typeof t!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[n,!!i],s},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var l=e[t][s];try{l[0].apply(r,n)}catch(u){Qt.console&&nn.error("jsPDF PubSub Error",u.message,u)}l[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function vm(r){if(!(this instanceof vm))return new vm(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function rS(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function lu(r,e,t,n,i){if(!(this instanceof lu))return new lu(r,e,t,n,i);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,rS.call(this,n,i)}function Id(r,e,t,n,i){if(!(this instanceof Id))return new Id(r,e,t,n,i);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,rS.call(this,n,i)}function Ct(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],s=arguments[3],l=[],u=1,h=16,d="S",g=null;Gr(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,i=r.format||i,s=r.compress||r.compressPdf||s,(g=r.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),u=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(h=r.floatPrecision),d=r.defaultPathOperation||"S"),l=r.filters||(s===!0?["FlateEncode"]:l),n=n||"mm",t=(""+(t||"P")).toLowerCase();var b=r.putOnlyUsedFonts||!1,_={},v={internal:{},__private__:{}};v.__private__.PubSub=bx;var N="1.3",E=v.__private__.getPdfVersion=function(){return N};v.__private__.setPdfVersion=function(T){N=T};var L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return L};var k=v.__private__.getPageFormat=function(T){return L[T]};i=i||"a4";var O="compat",$="advanced",F=O;function oe(){this.saveGraphicsState(),de(new Rt(jt,0,0,-jt,0,wi()*jt).toString()+" cm"),this.setFontSize(this.getFontSize()/jt),d="n",F=$}function ce(){this.restoreGraphicsState(),d="S",F=O}var D=v.__private__.combineFontStyleAndFontWeight=function(T,H){if(T=="bold"&&H=="normal"||T=="bold"&&H==400||T=="normal"&&H=="italic"||T=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(T=H==400||H==="normal"?T==="italic"?"italic":"normal":H!=700&&H!=="bold"||T!=="normal"?(H==700?"bold":H)+""+T:"bold"),T};v.advancedAPI=function(T){var H=F===O;return H&&oe.call(this),typeof T!="function"||(T(this),H&&ce.call(this)),this},v.compatAPI=function(T){var H=F===$;return H&&ce.call(this),typeof T!="function"||(T(this),H&&oe.call(this)),this},v.isAdvancedAPI=function(){return F===$};var C,S=function(T){if(F!==$)throw new Error(T+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=v.roundToPrecision=v.__private__.roundToPrecision=function(T,H){var ue=e||H;if(isNaN(T)||isNaN(ue))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return T.toFixed(ue).replace(/0+$/,"")};C=v.hpf=v.__private__.hpf=typeof h=="number"?function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return V(T,h)}:h==="smart"?function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return V(T,T>-1&&T<1?16:5)}:function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return V(T,16)};var I=v.f2=v.__private__.f2=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.f2");return V(T,2)},w=v.__private__.f3=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.f3");return V(T,3)},B=v.scale=v.__private__.scale=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.scale");return F===O?T*jt:F===$?T:void 0},M=function(T){return B((function(H){return F===O?wi()-H:F===$?H:void 0})(T))};v.__private__.setPrecision=v.setPrecision=function(T){typeof parseInt(T,10)=="number"&&(e=parseInt(T,10))};var q,se="00000000000000000000000000000000",te=v.__private__.getFileId=function(){return se},re=v.__private__.setFileId=function(T){return se=T!==void 0&&/^[a-fA-F0-9]{32}$/.test(T)?T.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(Or=new wd(g.userPermissions,g.userPassword,g.ownerPassword,se)),se};v.setFileId=function(T){return re(T),this},v.getFileId=function(){return te()};var xe=v.__private__.convertDateToPDFDate=function(T){var H=T.getTimezoneOffset(),ue=H<0?"+":"-",ye=Math.floor(Math.abs(H/60)),Ce=Math.abs(H%60),De=[ue,ie(ye),"'",ie(Ce),"'"].join("");return["D:",T.getFullYear(),ie(T.getMonth()+1),ie(T.getDate()),ie(T.getHours()),ie(T.getMinutes()),ie(T.getSeconds()),De].join("")},be=v.__private__.convertPDFDateToDate=function(T){var H=parseInt(T.substr(2,4),10),ue=parseInt(T.substr(6,2),10)-1,ye=parseInt(T.substr(8,2),10),Ce=parseInt(T.substr(10,2),10),De=parseInt(T.substr(12,2),10),Ge=parseInt(T.substr(14,2),10);return new Date(H,ue,ye,Ce,De,Ge,0)},Z=v.__private__.setCreationDate=function(T){var H;if(T===void 0&&(T=new Date),T instanceof Date)H=xe(T);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(T))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=T}return q=H},W=v.__private__.getCreationDate=function(T){var H=q;return T==="jsDate"&&(H=be(q)),H};v.setCreationDate=function(T){return Z(T),this},v.getCreationDate=function(T){return W(T)};var J,ie=v.__private__.padd2=function(T){return("0"+parseInt(T)).slice(-2)},he=v.__private__.padd2Hex=function(T){return("00"+(T=T.toString())).substr(T.length)},ge=0,_e=[],fe=[],ve=0,Ne=[],Ue=[],Xe=!1,Ze=fe;v.__private__.setCustomOutputDestination=function(T){Xe=!0,Ze=T};var ze=function(T){Xe||(Ze=T)};v.__private__.resetCustomOutputDestination=function(){Xe=!1,Ze=fe};var de=v.__private__.out=function(T){return T=T.toString(),ve+=T.length+1,Ze.push(T),Ze},Ft=v.__private__.write=function(T){return de(arguments.length===1?T.toString():Array.prototype.join.call(arguments," "))},Et=v.__private__.getArrayBuffer=function(T){for(var H=T.length,ue=new ArrayBuffer(H),ye=new Uint8Array(ue);H--;)ye[H]=T.charCodeAt(H);return ue},wt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return wt};var He=r.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(T){return He=F===$?T/jt:T,this};var ot,rt=v.__private__.getFontSize=v.getFontSize=function(){return F===O?He:He*jt},Jt=r.R2L||!1;v.__private__.setR2L=v.setR2L=function(T){return Jt=T,this},v.__private__.getR2L=v.getR2L=function(){return Jt};var _t,mr=v.__private__.setZoomMode=function(T){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(T))ot=T;else if(isNaN(T)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(T)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+T+'" is not recognized.');ot=T}else ot=parseInt(T,10)};v.__private__.getZoomMode=function(){return ot};var zt,qt=v.__private__.setPageMode=function(T){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(T)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+T+'" is not recognized.');_t=T};v.__private__.getPageMode=function(){return _t};var vr=v.__private__.setLayoutMode=function(T){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(T)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+T+'" is not recognized.');zt=T};v.__private__.getLayoutMode=function(){return zt},v.__private__.setDisplayMode=v.setDisplayMode=function(T,H,ue){return mr(T),vr(H),qt(ue),this};var Mt={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(T){if(Object.keys(Mt).indexOf(T)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Mt[T]},v.__private__.getDocumentProperties=function(){return Mt},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(T){for(var H in Mt)Mt.hasOwnProperty(H)&&T[H]&&(Mt[H]=T[H]);return this},v.__private__.setDocumentProperty=function(T,H){if(Object.keys(Mt).indexOf(T)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Mt[T]=H};var Tt,jt,pt,Ir,ir,ht={},Ht={},sr=[],It={},tr={},$t={},Er={},zr=null,Ut=0,Dt=[],ar=new bx(v),Hi=r.hotfixes||[],zn={},Po={},Vn=[],Rt=function T(H,ue,ye,Ce,De,Ge){if(!(this instanceof T))return new T(H,ue,ye,Ce,De,Ge);isNaN(H)&&(H=1),isNaN(ue)&&(ue=0),isNaN(ye)&&(ye=0),isNaN(Ce)&&(Ce=1),isNaN(De)&&(De=0),isNaN(Ge)&&(Ge=0),this._matrix=[H,ue,ye,Ce,De,Ge]};Object.defineProperty(Rt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(T){this._matrix[0]=T}}),Object.defineProperty(Rt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(T){this._matrix[1]=T}}),Object.defineProperty(Rt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(T){this._matrix[2]=T}}),Object.defineProperty(Rt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(T){this._matrix[3]=T}}),Object.defineProperty(Rt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(T){this._matrix[4]=T}}),Object.defineProperty(Rt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(T){this._matrix[5]=T}}),Object.defineProperty(Rt.prototype,"a",{get:function(){return this._matrix[0]},set:function(T){this._matrix[0]=T}}),Object.defineProperty(Rt.prototype,"b",{get:function(){return this._matrix[1]},set:function(T){this._matrix[1]=T}}),Object.defineProperty(Rt.prototype,"c",{get:function(){return this._matrix[2]},set:function(T){this._matrix[2]=T}}),Object.defineProperty(Rt.prototype,"d",{get:function(){return this._matrix[3]},set:function(T){this._matrix[3]=T}}),Object.defineProperty(Rt.prototype,"e",{get:function(){return this._matrix[4]},set:function(T){this._matrix[4]=T}}),Object.defineProperty(Rt.prototype,"f",{get:function(){return this._matrix[5]},set:function(T){this._matrix[5]=T}}),Object.defineProperty(Rt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Rt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Rt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Rt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Rt.prototype.join=function(T){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(T)},Rt.prototype.multiply=function(T){var H=T.sx*this.sx+T.shy*this.shx,ue=T.sx*this.shy+T.shy*this.sy,ye=T.shx*this.sx+T.sy*this.shx,Ce=T.shx*this.shy+T.sy*this.sy,De=T.tx*this.sx+T.ty*this.shx+this.tx,Ge=T.tx*this.shy+T.ty*this.sy+this.ty;return new Rt(H,ue,ye,Ce,De,Ge)},Rt.prototype.decompose=function(){var T=this.sx,H=this.shy,ue=this.shx,ye=this.sy,Ce=this.tx,De=this.ty,Ge=Math.sqrt(T*T+H*H),lt=(T/=Ge)*ue+(H/=Ge)*ye;ue-=T*lt,ye-=H*lt;var mt=Math.sqrt(ue*ue+ye*ye);return lt/=mt,T*(ye/=mt)<H*(ue/=mt)&&(T=-T,H=-H,lt=-lt,Ge=-Ge),{scale:new Rt(Ge,0,0,mt,0,0),translate:new Rt(1,0,0,1,Ce,De),rotate:new Rt(T,H,-H,T,0,0),skew:new Rt(1,0,lt,1,0,0)}},Rt.prototype.toString=function(T){return this.join(" ")},Rt.prototype.inversed=function(){var T=this.sx,H=this.shy,ue=this.shx,ye=this.sy,Ce=this.tx,De=this.ty,Ge=1/(T*ye-H*ue),lt=ye*Ge,mt=-H*Ge,Lt=-ue*Ge,vt=T*Ge;return new Rt(lt,mt,Lt,vt,-lt*Ce-Lt*De,-mt*Ce-vt*De)},Rt.prototype.applyToPoint=function(T){var H=T.x*this.sx+T.y*this.shx+this.tx,ue=T.x*this.shy+T.y*this.sy+this.ty;return new bi(H,ue)},Rt.prototype.applyToRectangle=function(T){var H=this.applyToPoint(T),ue=this.applyToPoint(new bi(T.x+T.w,T.y+T.h));return new Cs(H.x,H.y,ue.x-H.x,ue.y-H.y)},Rt.prototype.clone=function(){var T=this.sx,H=this.shy,ue=this.shx,ye=this.sy,Ce=this.tx,De=this.ty;return new Rt(T,H,ue,ye,Ce,De)},v.Matrix=Rt;var Pi=v.matrixMult=function(T,H){return H.multiply(T)},pi=new Rt(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=pi;var On=function(T,H){if(!tr[T]){var ue=(H instanceof lu?"Sh":"P")+(Object.keys(It).length+1).toString(10);H.id=ue,tr[T]=ue,It[ue]=H,ar.publish("addPattern",H)}};v.ShadingPattern=lu,v.TilingPattern=Id,v.addShadingPattern=function(T,H){return S("addShadingPattern()"),On(T,H),this},v.beginTilingPattern=function(T){S("beginTilingPattern()"),li(T.boundingBox[0],T.boundingBox[1],T.boundingBox[2]-T.boundingBox[0],T.boundingBox[3]-T.boundingBox[1],T.matrix)},v.endTilingPattern=function(T,H){S("endTilingPattern()"),H.stream=Ue[J].join(`
`),On(T,H),ar.publish("endTilingPattern",H),Vn.pop().restore()};var Ni,Cr=v.__private__.newObject=function(){var T=Vr();return dn(T,!0),T},Vr=v.__private__.newObjectDeferred=function(){return ge++,_e[ge]=function(){return ve},ge},dn=function(T,H){return H=typeof H=="boolean"&&H,_e[T]=ve,H&&de(T+" 0 obj"),T},Qn=v.__private__.newAdditionalObject=function(){var T={objId:Vr(),content:""};return Ne.push(T),T},Qo=Vr(),Gi=Vr(),Ki=v.__private__.decodeColorString=function(T){var H=T.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length!==5||H[4]!=="k"&&H[4]!=="K"||(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var ue=parseFloat(H[0]);H=[ue,ue,ue,"r"]}for(var ye="#",Ce=0;Ce<3;Ce++)ye+=("0"+Math.floor(255*parseFloat(H[Ce])).toString(16)).slice(-2);return ye},wn=v.__private__.encodeColorString=function(T){var H;typeof T=="string"&&(T={ch1:T});var ue=T.ch1,ye=T.ch2,Ce=T.ch3,De=T.ch4,Ge=T.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ue=="string"&&ue.charAt(0)!=="#"){var lt=new eS(ue);if(lt.ok)ue=lt.toHex();else if(!/^\d*\.?\d*$/.test(ue))throw new Error('Invalid color "'+ue+'" passed to jsPDF.encodeColorString.')}if(typeof ue=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ue)&&(ue="#"+ue[1]+ue[1]+ue[2]+ue[2]+ue[3]+ue[3]),typeof ue=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ue)){var mt=parseInt(ue.substr(1),16);ue=mt>>16&255,ye=mt>>8&255,Ce=255&mt}if(ye===void 0||De===void 0&&ue===ye&&ye===Ce)H=typeof ue=="string"?ue+" "+Ge[0]:T.precision===2?I(ue/255)+" "+Ge[0]:w(ue/255)+" "+Ge[0];else if(De===void 0||Gr(De)==="object"){if(De&&!isNaN(De.a)&&De.a===0)return["1.","1.","1.",Ge[1]].join(" ");H=typeof ue=="string"?[ue,ye,Ce,Ge[1]].join(" "):T.precision===2?[I(ue/255),I(ye/255),I(Ce/255),Ge[1]].join(" "):[w(ue/255),w(ye/255),w(Ce/255),Ge[1]].join(" ")}else H=typeof ue=="string"?[ue,ye,Ce,De,Ge[2]].join(" "):T.precision===2?[I(ue),I(ye),I(Ce),I(De),Ge[2]].join(" "):[w(ue),w(ye),w(Ce),w(De),Ge[2]].join(" ");return H},Bi=v.__private__.getFilters=function(){return l},Li=v.__private__.putStream=function(T){var H=(T=T||{}).data||"",ue=T.filters||Bi(),ye=T.alreadyAppliedFilters||[],Ce=T.addLength1||!1,De=H.length,Ge=T.objectId,lt=function(R){return R};if(g!==null&&Ge===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(lt=Or.encryptor(Ge,0));var mt={};ue===!0&&(ue=["FlateEncode"]);var Lt=T.additionalKeyValues||[],vt=(mt=Ct.API.processDataByFilters!==void 0?Ct.API.processDataByFilters(H,ue):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(ye)?ye.join(" "):ye.toString());if(mt.data.length!==0&&(Lt.push({key:"Length",value:mt.data.length}),Ce===!0&&Lt.push({key:"Length1",value:De})),vt.length!=0)if(vt.split("/").length-1==1)Lt.push({key:"Filter",value:vt});else{Lt.push({key:"Filter",value:"["+vt+"]"});for(var gr=0;gr<Lt.length;gr+=1)if(Lt[gr].key==="DecodeParms"){for(var Qr=[],Mr=0;Mr<mt.reverseChain.split("/").length-1;Mr+=1)Qr.push("null");Qr.push(Lt[gr].value),Lt[gr].value="["+Qr.join(" ")+"]"}}de("<<");for(var m=0;m<Lt.length;m++)de("/"+Lt[m].key+" "+Lt[m].value);de(">>"),mt.data.length!==0&&(de("stream"),de(lt(mt.data)),de("endstream"))},bs=v.__private__.putPage=function(T){var H=T.number,ue=T.data,ye=T.objId,Ce=T.contentsObjId;dn(ye,!0),de("<</Type /Page"),de("/Parent "+T.rootDictionaryObjId+" 0 R"),de("/Resources "+T.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(C(T.mediaBox.bottomLeftX))+" "+parseFloat(C(T.mediaBox.bottomLeftY))+" "+C(T.mediaBox.topRightX)+" "+C(T.mediaBox.topRightY)+"]"),T.cropBox!==null&&de("/CropBox ["+C(T.cropBox.bottomLeftX)+" "+C(T.cropBox.bottomLeftY)+" "+C(T.cropBox.topRightX)+" "+C(T.cropBox.topRightY)+"]"),T.bleedBox!==null&&de("/BleedBox ["+C(T.bleedBox.bottomLeftX)+" "+C(T.bleedBox.bottomLeftY)+" "+C(T.bleedBox.topRightX)+" "+C(T.bleedBox.topRightY)+"]"),T.trimBox!==null&&de("/TrimBox ["+C(T.trimBox.bottomLeftX)+" "+C(T.trimBox.bottomLeftY)+" "+C(T.trimBox.topRightX)+" "+C(T.trimBox.topRightY)+"]"),T.artBox!==null&&de("/ArtBox ["+C(T.artBox.bottomLeftX)+" "+C(T.artBox.bottomLeftY)+" "+C(T.artBox.topRightX)+" "+C(T.artBox.topRightY)+"]"),typeof T.userUnit=="number"&&T.userUnit!==1&&de("/UserUnit "+T.userUnit),ar.publish("putPage",{objId:ye,pageContext:Dt[H],pageNumber:H,page:ue}),de("/Contents "+Ce+" 0 R"),de(">>"),de("endobj");var De=ue.join(`
`);return F===$&&(De+=`
Q`),dn(Ce,!0),Li({data:De,filters:Bi(),objectId:Ce}),de("endobj"),ye},go=v.__private__.putPages=function(){var T,H,ue=[];for(T=1;T<=Ut;T++)Dt[T].objId=Vr(),Dt[T].contentsObjId=Vr();for(T=1;T<=Ut;T++)ue.push(bs({number:T,data:Ue[T],objId:Dt[T].objId,contentsObjId:Dt[T].contentsObjId,mediaBox:Dt[T].mediaBox,cropBox:Dt[T].cropBox,bleedBox:Dt[T].bleedBox,trimBox:Dt[T].trimBox,artBox:Dt[T].artBox,userUnit:Dt[T].userUnit,rootDictionaryObjId:Qo,resourceDictionaryObjId:Gi}));dn(Qo,!0),de("<</Type /Pages");var ye="/Kids [";for(H=0;H<Ut;H++)ye+=ue[H]+" 0 R ";de(ye+"]"),de("/Count "+Ut),de(">>"),de("endobj"),ar.publish("postPutPages")},yo=function(T){ar.publish("putFont",{font:T,out:de,newObject:Cr,putStream:Li}),T.isAlreadyPutted!==!0&&(T.objectNumber=Cr(),de("<<"),de("/Type /Font"),de("/BaseFont /"+Sd(T.postScriptName)),de("/Subtype /Type1"),typeof T.encoding=="string"&&de("/Encoding /"+T.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},ws=function(T){T.objectNumber=Cr();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[C(T.x),C(T.y),C(T.x+T.width),C(T.y+T.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+T.matrix.toString()+"]"});var ue=T.pages[1].join(`
`);Li({data:ue,additionalKeyValues:H,objectId:T.objectNumber}),de("endobj")},Xo=function(T,H){H||(H=21);var ue=Cr(),ye=(function(Ge,lt){var mt,Lt=[],vt=1/(lt-1);for(mt=0;mt<1;mt+=vt)Lt.push(mt);if(Lt.push(1),Ge[0].offset!=0){var gr={offset:0,color:Ge[0].color};Ge.unshift(gr)}if(Ge[Ge.length-1].offset!=1){var Qr={offset:1,color:Ge[Ge.length-1].color};Ge.push(Qr)}for(var Mr="",m=0,R=0;R<Lt.length;R++){for(mt=Lt[R];mt>Ge[m+1].offset;)m++;var U=Ge[m].offset,ee=(mt-U)/(Ge[m+1].offset-U),ke=Ge[m].color,Be=Ge[m+1].color;Mr+=he(Math.round((1-ee)*ke[0]+ee*Be[0]).toString(16))+he(Math.round((1-ee)*ke[1]+ee*Be[1]).toString(16))+he(Math.round((1-ee)*ke[2]+ee*Be[2]).toString(16))}return Mr.trim()})(T.colors,H),Ce=[];Ce.push({key:"FunctionType",value:"0"}),Ce.push({key:"Domain",value:"[0.0 1.0]"}),Ce.push({key:"Size",value:"["+H+"]"}),Ce.push({key:"BitsPerSample",value:"8"}),Ce.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ce.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Li({data:ye,additionalKeyValues:Ce,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ue}),de("endobj"),T.objectNumber=Cr(),de("<< /ShadingType "+T.type),de("/ColorSpace /DeviceRGB");var De="/Coords ["+C(parseFloat(T.coords[0]))+" "+C(parseFloat(T.coords[1]))+" ";T.type===2?De+=C(parseFloat(T.coords[2]))+" "+C(parseFloat(T.coords[3])):De+=C(parseFloat(T.coords[2]))+" "+C(parseFloat(T.coords[3]))+" "+C(parseFloat(T.coords[4]))+" "+C(parseFloat(T.coords[5])),de(De+="]"),T.matrix&&de("/Matrix ["+T.matrix.toString()+"]"),de("/Function "+ue+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},No=function(T,H){var ue=Vr(),ye=Cr();H.push({resourcesOid:ue,objectOid:ye}),T.objectNumber=ye;var Ce=[];Ce.push({key:"Type",value:"/Pattern"}),Ce.push({key:"PatternType",value:"1"}),Ce.push({key:"PaintType",value:"1"}),Ce.push({key:"TilingType",value:"1"}),Ce.push({key:"BBox",value:"["+T.boundingBox.map(C).join(" ")+"]"}),Ce.push({key:"XStep",value:C(T.xStep)}),Ce.push({key:"YStep",value:C(T.yStep)}),Ce.push({key:"Resources",value:ue+" 0 R"}),T.matrix&&Ce.push({key:"Matrix",value:"["+T.matrix.toString()+"]"}),Li({data:T.stream,additionalKeyValues:Ce,objectId:T.objectNumber}),de("endobj")},Zo=function(T){for(var H in T.objectNumber=Cr(),de("<<"),T)switch(H){case"opacity":de("/ca "+I(T[H]));break;case"stroke-opacity":de("/CA "+I(T[H]))}de(">>"),de("endobj")},jr=function(T){dn(T.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var H in de("/Font <<"),ht)ht.hasOwnProperty(H)&&(b===!1||b===!0&&_.hasOwnProperty(H))&&de("/"+H+" "+ht[H].objectNumber+" 0 R");de(">>")})(),(function(){if(Object.keys(It).length>0){for(var H in de("/Shading <<"),It)It.hasOwnProperty(H)&&It[H]instanceof lu&&It[H].objectNumber>=0&&de("/"+H+" "+It[H].objectNumber+" 0 R");ar.publish("putShadingPatternDict"),de(">>")}})(),(function(H){if(Object.keys(It).length>0){for(var ue in de("/Pattern <<"),It)It.hasOwnProperty(ue)&&It[ue]instanceof v.TilingPattern&&It[ue].objectNumber>=0&&It[ue].objectNumber<H&&de("/"+ue+" "+It[ue].objectNumber+" 0 R");ar.publish("putTilingPatternDict"),de(">>")}})(T.objectOid),(function(){if(Object.keys($t).length>0){var H;for(H in de("/ExtGState <<"),$t)$t.hasOwnProperty(H)&&$t[H].objectNumber>=0&&de("/"+H+" "+$t[H].objectNumber+" 0 R");ar.publish("putGStateDict"),de(">>")}})(),(function(){for(var H in de("/XObject <<"),zn)zn.hasOwnProperty(H)&&zn[H].objectNumber>=0&&de("/"+H+" "+zn[H].objectNumber+" 0 R");ar.publish("putXobjectDict"),de(">>")})(),de(">>"),de("endobj")},Ll=function(T){Ht[T.fontName]=Ht[T.fontName]||{},Ht[T.fontName][T.fontStyle]=T.id},qs=function(T,H,ue,ye,Ce){var De={id:"F"+(Object.keys(ht).length+1).toString(10),postScriptName:T,fontName:H,fontStyle:ue,encoding:ye,isStandardFont:Ce||!1,metadata:{}};return ar.publish("addFont",{font:De,instance:this}),ht[De.id]=De,Ll(De),De.id},mi=v.__private__.pdfEscape=v.pdfEscape=function(T,H){return(function(ue,ye){var Ce,De,Ge,lt,mt,Lt,vt,gr,Qr;if(Ge=(ye=ye||{}).sourceEncoding||"Unicode",mt=ye.outputEncoding,(ye.autoencode||mt)&&ht[Tt].metadata&&ht[Tt].metadata[Ge]&&ht[Tt].metadata[Ge].encoding&&(lt=ht[Tt].metadata[Ge].encoding,!mt&&ht[Tt].encoding&&(mt=ht[Tt].encoding),!mt&&lt.codePages&&(mt=lt.codePages[0]),typeof mt=="string"&&(mt=lt[mt]),mt)){for(vt=!1,Lt=[],Ce=0,De=ue.length;Ce<De;Ce++)(gr=mt[ue.charCodeAt(Ce)])?Lt.push(String.fromCharCode(gr)):Lt.push(ue[Ce]),Lt[Ce].charCodeAt(0)>>8&&(vt=!0);ue=Lt.join("")}for(Ce=ue.length;vt===void 0&&Ce!==0;)ue.charCodeAt(Ce-1)>>8&&(vt=!0),Ce--;if(!vt)return ue;for(Lt=ye.noBOM?[]:[254,255],Ce=0,De=ue.length;Ce<De;Ce++){if((Qr=(gr=ue.charCodeAt(Ce))>>8)>>8)throw new Error("Character at position "+Ce+" of string '"+ue+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Lt.push(Qr),Lt.push(gr-(Qr<<8))}return String.fromCharCode.apply(void 0,Lt)})(T,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},es=v.__private__.beginPage=function(T){Ue[++Ut]=[],Dt[Ut]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(T[0]),topRightY:Number(T[1])}},_s(Ut),ze(Ue[J])},wa=function(T,H){var ue,ye,Ce;switch(t=H||t,typeof T=="string"&&(ue=k(T.toLowerCase()),Array.isArray(ue)&&(ye=ue[0],Ce=ue[1])),Array.isArray(T)&&(ye=T[0]*jt,Ce=T[1]*jt),isNaN(ye)&&(ye=i[0],Ce=i[1]),(ye>14400||Ce>14400)&&(nn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ye=Math.min(14400,ye),Ce=Math.min(14400,Ce)),i=[ye,Ce],t.substr(0,1)){case"l":Ce>ye&&(i=[Ce,ye]);break;case"p":ye>Ce&&(i=[Ce,ye])}es(i),ts(Sn),de(Ys),Qi!==0&&de(Qi+" J"),Aa!==0&&de(Aa+" j"),ar.publish("addPage",{pageNumber:Ut})},Ss=function(T){T>0&&T<=Ut&&(Ue.splice(T,1),Dt.splice(T,1),Ut--,J>Ut&&(J=Ut),this.setPage(J))},_s=function(T){T>0&&T<=Ut&&(J=T)},gi=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return Ue.length-1},Qa=function(T,H,ue){var ye,Ce=void 0;return ue=ue||{},T=T!==void 0?T:ht[Tt].fontName,H=H!==void 0?H:ht[Tt].fontStyle,ye=T.toLowerCase(),Ht[ye]!==void 0&&Ht[ye][H]!==void 0?Ce=Ht[ye][H]:Ht[T]!==void 0&&Ht[T][H]!==void 0?Ce=Ht[T][H]:ue.disableWarning===!1&&nn.warn("Unable to look up font label for font '"+T+"', '"+H+"'. Refer to getFontList() for available fonts."),Ce||ue.noFallback||(Ce=Ht.times[H])==null&&(Ce=Ht.times.normal),Ce},Xn=v.__private__.putInfo=function(){var T=Cr(),H=function(ye){return ye};for(var ue in g!==null&&(H=Or.encryptor(T,0)),de("<<"),de("/Producer ("+mi(H("jsPDF "+Ct.version))+")"),Mt)Mt.hasOwnProperty(ue)&&Mt[ue]&&de("/"+ue.substr(0,1).toUpperCase()+ue.substr(1)+" ("+mi(H(Mt[ue]))+")");de("/CreationDate ("+mi(H(q))+")"),de(">>"),de("endobj")},Bo=v.__private__.putCatalog=function(T){var H=(T=T||{}).rootDictionaryObjId||Qo;switch(Cr(),de("<<"),de("/Type /Catalog"),de("/Pages "+H+" 0 R"),ot||(ot="fullwidth"),ot){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ue=""+ot;ue.substr(ue.length-1)==="%"&&(ot=parseInt(ot)/100),typeof ot=="number"&&de("/OpenAction [3 0 R /XYZ null null "+I(ot)+"]")}switch(zt||(zt="continuous"),zt){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}_t&&de("/PageMode /"+_t),ar.publish("putCatalog"),de(">>"),de("endobj")},wr=v.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(ge+1)),de("/Root "+ge+" 0 R"),de("/Info "+(ge-1)+" 0 R"),g!==null&&de("/Encrypt "+Or.oid+" 0 R"),de("/ID [ <"+se+"> <"+se+"> ]"),de(">>")},Ts=v.__private__.putHeader=function(){de("%PDF-"+N),de("%")},xo=v.__private__.putXRef=function(){var T="0000000000";de("xref"),de("0 "+(ge+1)),de("0000000000 65535 f ");for(var H=1;H<=ge;H++)typeof _e[H]=="function"?de((T+_e[H]()).slice(-10)+" 00000 n "):_e[H]!==void 0?de((T+_e[H]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},yi=v.__private__.buildDocument=function(){var T;ge=0,ve=0,fe=[],_e=[],Ne=[],Qo=Vr(),Gi=Vr(),ze(fe),ar.publish("buildDocument"),Ts(),go(),(function(){ar.publish("putAdditionalObjects");for(var ue=0;ue<Ne.length;ue++){var ye=Ne[ue];dn(ye.objId,!0),de(ye.content),de("endobj")}ar.publish("postPutAdditionalObjects")})(),T=[],(function(){for(var ue in ht)ht.hasOwnProperty(ue)&&(b===!1||b===!0&&_.hasOwnProperty(ue))&&yo(ht[ue])})(),(function(){var ue;for(ue in $t)$t.hasOwnProperty(ue)&&Zo($t[ue])})(),(function(){for(var ue in zn)zn.hasOwnProperty(ue)&&ws(zn[ue])})(),(function(ue){var ye;for(ye in It)It.hasOwnProperty(ye)&&(It[ye]instanceof lu?Xo(It[ye]):It[ye]instanceof Id&&No(It[ye],ue))})(T),ar.publish("putResources"),T.forEach(jr),jr({resourcesOid:Gi,objectOid:Number.MAX_SAFE_INTEGER}),ar.publish("postPutResources"),g!==null&&(Or.oid=Cr(),de("<<"),de("/Filter /Standard"),de("/V "+Or.v),de("/R "+Or.r),de("/U <"+Or.toHexString(Or.U)+">"),de("/O <"+Or.toHexString(Or.O)+">"),de("/P "+Or.P),de(">>"),de("endobj")),Xn(),Bo();var H=ve;return xo(),wr(),de("startxref"),de(""+H),de("%%EOF"),ze(Ue[J]),fe.join(`
`)},lr=v.__private__.getBlob=function(T){return new Blob([Et(T)],{type:"application/pdf"})},Mn=v.output=v.__private__.output=(Ni=function(T,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",T){case void 0:return yi();case"save":v.save(H.filename);break;case"arraybuffer":return Et(yi());case"blob":return lr(yi());case"bloburi":case"bloburl":if(Qt.URL!==void 0&&typeof Qt.URL.createObjectURL=="function")return Qt.URL&&Qt.URL.createObjectURL(lr(yi()))||void 0;nn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ue="",ye=yi();try{ue=yx(ye)}catch{ue=yx(unescape(encodeURIComponent(ye)))}return"data:application/pdf;filename="+H.filename+";base64,"+ue;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Qt)==="[object Window]"){var Ce="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",De=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(Ce=H.pdfObjectUrl,De="");var Ge='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ce+'"'+De+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",lt=Qt.open();return lt!==null&&lt.document.write(Ge),lt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Qt)==="[object Window]"){var mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',Lt=Qt.open();if(Lt!==null){Lt.document.write(mt);var vt=this;Lt.document.documentElement.querySelector("#pdfViewer").onload=function(){Lt.document.title=H.filename,Lt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(vt.output("bloburl"))}}return Lt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Qt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var gr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',Qr=Qt.open();if(Qr!==null&&(Qr.document.write(gr),Qr.document.title=H.filename),Qr||typeof safari>"u")return Qr;break;case"datauri":case"dataurl":return Qt.document.location.href=this.output("datauristring",H);default:return null}},Ni.foo=function(){try{return Ni.apply(this,arguments)}catch(ue){var T=ue.stack||"";~T.indexOf(" at ")&&(T=T.split(" at ")[1]);var H="Error in function "+T.split(`
`)[0].split("<")[0]+": "+ue.message;if(!Qt.console)throw new Error(H);Qt.console.error(H,ue),Qt.alert&&alert(H)}},Ni.foo.bar=Ni,Ni.foo),vo=function(T){return Array.isArray(Hi)===!0&&Hi.indexOf(T)>-1};switch(n){case"pt":jt=1;break;case"mm":jt=72/25.4;break;case"cm":jt=72/2.54;break;case"in":jt=72;break;case"px":jt=vo("px_scaling")==1?.75:96/72;break;case"pc":case"em":jt=12;break;case"ex":jt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);jt=n}var Or=null;Z(),re();var Hs=v.__private__.getPageInfo=v.getPageInfo=function(T){if(isNaN(T)||T%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Dt[T].objId,pageNumber:T,pageContext:Dt[T]}},Xa=v.__private__.getPageInfoByObjId=function(T){if(isNaN(T)||T%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in Dt)if(Dt[H].objId===T)break;return Hs(H)},Za=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:Dt[J].objId,pageNumber:J,pageContext:Dt[J]}};v.addPage=function(){return wa.apply(this,arguments),this},v.setPage=function(){return _s.apply(this,arguments),ze.call(this,Ue[J]),this},v.insertPage=function(T){return this.addPage(),this.movePage(J,T),this},v.movePage=function(T,H){var ue,ye;if(T>H){ue=Ue[T],ye=Dt[T];for(var Ce=T;Ce>H;Ce--)Ue[Ce]=Ue[Ce-1],Dt[Ce]=Dt[Ce-1];Ue[H]=ue,Dt[H]=ye,this.setPage(H)}else if(T<H){ue=Ue[T],ye=Dt[T];for(var De=T;De<H;De++)Ue[De]=Ue[De+1],Dt[De]=Dt[De+1];Ue[H]=ue,Dt[H]=ye,this.setPage(H)}return this},v.deletePage=function(){return Ss.apply(this,arguments),this},v.__private__.text=v.text=function(T,H,ue,ye,Ce){var De,Ge,lt,mt,Lt,vt,gr,Qr,Mr,m=(ye=ye||{}).scope||this;if(typeof T=="number"&&typeof H=="number"&&(typeof ue=="string"||Array.isArray(ue))){var R=ue;ue=H,H=T,T=R}if(arguments[3]instanceof Rt==0?(lt=arguments[4],mt=arguments[5],Gr(gr=arguments[3])==="object"&&gr!==null||(typeof lt=="string"&&(mt=lt,lt=null),typeof gr=="string"&&(mt=gr,gr=null),typeof gr=="number"&&(lt=gr,gr=null),ye={flags:gr,angle:lt,align:mt})):(S("The transform parameter of text() with a Matrix value"),Mr=Ce),isNaN(H)||isNaN(ue)||T==null)throw new Error("Invalid arguments passed to jsPDF.text");if(T.length===0)return m;var U,ee="",ke=typeof ye.lineHeightFactor=="number"?ye.lineHeightFactor:vi,Be=m.internal.scaleFactor;function tt(Sr){return Sr=Sr.split("	").join(Array(ye.TabLen||9).join(" ")),mi(Sr,gr)}function Wt(Sr){for(var Br,pn=Sr.concat(),jn=[],as=pn.length;as--;)typeof(Br=pn.shift())=="string"?jn.push(Br):Array.isArray(Sr)&&(Br.length===1||Br[1]===void 0&&Br[2]===void 0)?jn.push(Br[0]):jn.push([Br[0],Br[1],Br[2]]);return jn}function Dr(Sr,Br){var pn;if(typeof Sr=="string")pn=Br(Sr)[0];else if(Array.isArray(Sr)){for(var jn,as,Vc=Sr.concat(),Dl=[],ra=Vc.length;ra--;)typeof(jn=Vc.shift())=="string"?Dl.push(Br(jn)[0]):Array.isArray(jn)&&typeof jn[0]=="string"&&(as=Br(jn[0],jn[1],jn[2]),Dl.push([as[0],as[1],as[2]]));pn=Dl}return pn}var dr=!1,Xr=!0;if(typeof T=="string")dr=!0;else if(Array.isArray(T)){var $n=T.concat();Ge=[];for(var Vi,tn=$n.length;tn--;)(typeof(Vi=$n.shift())!="string"||Array.isArray(Vi)&&typeof Vi[0]!="string")&&(Xr=!1);dr=Xr}if(dr===!1)throw new Error('Type of text must be string or Array. "'+T+'" is not recognized.');typeof T=="string"&&(T=T.match(/[\r?\n]/)?T.split(/\r\n|\r|\n/g):[T]);var Si=He/m.internal.scaleFactor,Mo=Si*(ke-1);switch(ye.baseline){case"bottom":ue-=Mo;break;case"top":ue+=Si-Mo;break;case"hanging":ue+=Si-2*Mo;break;case"middle":ue+=Si/2-Mo}if((vt=ye.maxWidth||0)>0&&(typeof T=="string"?T=m.splitTextToSize(T,vt):Object.prototype.toString.call(T)==="[object Array]"&&(T=T.reduce(function(Sr,Br){return Sr.concat(m.splitTextToSize(Br,vt))},[]))),De={text:T,x:H,y:ue,options:ye,mutex:{pdfEscape:mi,activeFontKey:Tt,fonts:ht,activeFontSize:He}},ar.publish("preProcessText",De),T=De.text,lt=(ye=De.options).angle,Mr instanceof Rt==0&&lt&&typeof lt=="number"){lt*=Math.PI/180,ye.rotationDirection===0&&(lt=-lt),F===$&&(lt=-lt);var Qs=Math.cos(lt),zc=Math.sin(lt);Mr=new Rt(Qs,zc,-zc,Qs,0,0)}else lt&&lt instanceof Rt&&(Mr=lt);F!==$||Mr||(Mr=pi),(Lt=ye.charSpace||Yi)!==void 0&&(ee+=C(B(Lt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Qr=ye.horizontalScale)!==void 0&&(ee+=C(100*Qr)+` Tz
`),ye.lang;var hn=-1,os=ye.renderingMode!==void 0?ye.renderingMode:ye.stroke,Is=m.internal.getCurrentPageInfo().pageContext;switch(os){case 0:case!1:case"fill":hn=0;break;case 1:case!0:case"stroke":hn=1;break;case 2:case"fillThenStroke":hn=2;break;case 3:case"invisible":hn=3;break;case 4:case"fillAndAddForClipping":hn=4;break;case 5:case"strokeAndAddPathForClipping":hn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":hn=6;break;case 7:case"addToPathForClipping":hn=7}var Uu=Is.usedRenderingMode!==void 0?Is.usedRenderingMode:-1;hn!==-1?ee+=hn+` Tr
`:Uu!==-1&&(ee+=`0 Tr
`),hn!==-1&&(Is.usedRenderingMode=hn),mt=ye.align||"left";var So,ka=He*ke,zl=m.internal.pageSize.getWidth(),Vl=ht[Tt];Lt=ye.charSpace||Yi,vt=ye.maxWidth||0,gr=Object.assign({autoencode:!0,noBOM:!0},ye.flags);var Xs=[],Do=function(Sr){return m.getStringUnitWidth(Sr,{font:Vl,charSpace:Lt,fontSize:He,doKerning:!1})*He/Be};if(Object.prototype.toString.call(T)==="[object Array]"){var _o;Ge=Wt(T),mt!=="left"&&(So=Ge.map(Do));var To,Ia=0;if(mt==="right"){H-=So[0],T=[],tn=Ge.length;for(var Es=0;Es<tn;Es++)Es===0?(To=Dn(H),_o=zo(ue)):(To=B(Ia-So[Es]),_o=-ka),T.push([Ge[Es],To,_o]),Ia=So[Es]}else if(mt==="center"){H-=So[0]/2,T=[],tn=Ge.length;for(var Zs=0;Zs<tn;Zs++)Zs===0?(To=Dn(H),_o=zo(ue)):(To=B((Ia-So[Zs])/2),_o=-ka),T.push([Ge[Zs],To,_o]),Ia=So[Zs]}else if(mt==="left"){T=[],tn=Ge.length;for(var ea=0;ea<tn;ea++)T.push(Ge[ea])}else if(mt==="justify"&&Vl.encoding==="Identity-H"){T=[],tn=Ge.length,vt=vt!==0?vt:zl;for(var js=0,_n=0;_n<tn;_n++)if(_o=_n===0?zo(ue):-ka,To=_n===0?Dn(H):js,_n<tn-1){var il=B((vt-So[_n])/(Ge[_n].split(" ").length-1)),Rs=Ge[_n].split(" ");T.push([Rs[0]+" ",To,_o]),js=0;for(var ss=1;ss<Rs.length;ss++){var ol=(Do(Rs[ss-1]+" "+Rs[ss])-Do(Rs[ss]))*Be+il;ss==Rs.length-1?T.push([Rs[ss],ol,0]):T.push([Rs[ss]+" ",ol,0]),js-=ol}}else T.push([Ge[_n],To,_o]);T.push(["",js,0])}else{if(mt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(T=[],tn=Ge.length,vt=vt!==0?vt:zl,_n=0;_n<tn;_n++){_o=_n===0?zo(ue):-ka,To=_n===0?Dn(H):0;var sl=Ge[_n].split(" ").length-1,Ol=sl>0?(vt-So[_n])/sl:0;_n<tn-1?Xs.push(C(B(Ol))):Xs.push(0),T.push([Ge[_n],To,_o])}}}(typeof ye.R2L=="boolean"?ye.R2L:Jt)===!0&&(T=Dr(T,function(Sr,Br,pn){return[Sr.split("").reverse().join(""),Br,pn]})),De={text:T,x:H,y:ue,options:ye,mutex:{pdfEscape:mi,activeFontKey:Tt,fonts:ht,activeFontSize:He}},ar.publish("postProcessText",De),T=De.text,U=De.mutex.isHex||!1;var Ml=ht[Tt].encoding;Ml!=="WinAnsiEncoding"&&Ml!=="StandardEncoding"||(T=Dr(T,function(Sr,Br,pn){return[tt(Sr),Br,pn]})),Ge=Wt(T),T=[];for(var ta,Ea,ja,al=Array.isArray(Ge[0])?1:0,Ra="",ll=function(Sr,Br,pn){var jn="";return pn instanceof Rt?(pn=typeof ye.angle=="number"?Pi(pn,new Rt(1,0,0,1,Sr,Br)):Pi(new Rt(1,0,0,1,Sr,Br),pn),F===$&&(pn=Pi(new Rt(1,0,0,-1,0,0),pn)),jn=pn.join(" ")+` Tm
`):jn=C(Sr)+" "+C(Br)+` Td
`,jn},fn=0;fn<Ge.length;fn++){switch(Ra="",al){case 1:ja=(U?"<":"(")+Ge[fn][0]+(U?">":")"),ta=parseFloat(Ge[fn][1]),Ea=parseFloat(Ge[fn][2]);break;case 0:ja=(U?"<":"(")+Ge[fn]+(U?">":")"),ta=Dn(H),Ea=zo(ue)}Xs!==void 0&&Xs[fn]!==void 0&&(Ra=Xs[fn]+` Tw
`),fn===0?T.push(Ra+ll(ta,Ea,Mr)+ja):al===0?T.push(Ra+ja):al===1&&T.push(Ra+ll(ta,Ea,Mr)+ja)}T=al===0?T.join(` Tj
T* `):T.join(` Tj
`),T+=` Tj
`;var Xi=`BT
/`;return Xi+=Tt+" "+He+` Tf
`,Xi+=C(He*ke)+` TL
`,Xi+=Ji+`
`,Xi+=ee,Xi+=T,de(Xi+="ET"),_[Tt]=!0,m};var Gs=v.__private__.clip=v.clip=function(T){return de(T==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return Gs("evenodd")},v.__private__.discardPath=v.discardPath=function(){return de("n"),this};var Lo=v.__private__.isValidStyle=function(T){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(T)!==-1&&(H=!0),H};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(T){return Lo(T)&&(d=T),this};var Sa=v.__private__.getStyle=v.getStyle=function(T){var H=d;switch(T){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=T}return H},or=v.close=function(){return de("h"),this};v.stroke=function(){return de("S"),this},v.fill=function(T){return ai("f",T),this},v.fillEvenOdd=function(T){return ai("f*",T),this},v.fillStroke=function(T){return ai("B",T),this},v.fillStrokeEvenOdd=function(T){return ai("B*",T),this};var ai=function(T,H){Gr(H)==="object"?el(H,T):de(T)},Ks=function(T){T===null||F===$&&T===void 0||(T=Sa(T),de(T))};function _a(T,H,ue,ye,Ce){var De=new Id(H||this.boundingBox,ue||this.xStep,ye||this.yStep,this.gState,Ce||this.matrix);De.stream=this.stream;var Ge=T+"$$"+this.cloneIndex+++"$$";return On(Ge,De),De}var el=function(T,H){var ue=tr[T.key],ye=It[ue];if(ye instanceof lu)de("q"),de(tl(H)),ye.gState&&v.setGState(ye.gState),de(T.matrix.toString()+" cm"),de("/"+ue+" sh"),de("Q");else if(ye instanceof Id){var Ce=new Rt(1,0,0,-1,0,wi());T.matrix&&(Ce=Ce.multiply(T.matrix||pi),ue=_a.call(ye,T.key,T.boundingBox,T.xStep,T.yStep,Ce).id),de("q"),de("/Pattern cs"),de("/"+ue+" scn"),ye.gState&&v.setGState(ye.gState),de(H),de("Q")}},tl=function(T){switch(T){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Js=v.moveTo=function(T,H){return de(C(B(T))+" "+C(M(H))+" m"),this},xi=v.lineTo=function(T,H){return de(C(B(T))+" "+C(M(H))+" l"),this},bo=v.curveTo=function(T,H,ue,ye,Ce,De){return de([C(B(T)),C(M(H)),C(B(ue)),C(M(ye)),C(B(Ce)),C(M(De)),"c"].join(" ")),this};v.__private__.line=v.line=function(T,H,ue,ye,Ce){if(isNaN(T)||isNaN(H)||isNaN(ue)||isNaN(ye)||!Lo(Ce))throw new Error("Invalid arguments passed to jsPDF.line");return F===O?this.lines([[ue-T,ye-H]],T,H,[1,1],Ce||"S"):this.lines([[ue-T,ye-H]],T,H,[1,1]).stroke()},v.__private__.lines=v.lines=function(T,H,ue,ye,Ce,De){var Ge,lt,mt,Lt,vt,gr,Qr,Mr,m,R,U,ee;if(typeof T=="number"&&(ee=ue,ue=H,H=T,T=ee),ye=ye||[1,1],De=De||!1,isNaN(H)||isNaN(ue)||!Array.isArray(T)||!Array.isArray(ye)||!Lo(Ce)||typeof De!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Js(H,ue),Ge=ye[0],lt=ye[1],Lt=T.length,R=H,U=ue,mt=0;mt<Lt;mt++)(vt=T[mt]).length===2?(R=vt[0]*Ge+R,U=vt[1]*lt+U,xi(R,U)):(gr=vt[0]*Ge+R,Qr=vt[1]*lt+U,Mr=vt[2]*Ge+R,m=vt[3]*lt+U,R=vt[4]*Ge+R,U=vt[5]*lt+U,bo(gr,Qr,Mr,m,R,U));return De&&or(),Ks(Ce),this},v.path=function(T){for(var H=0;H<T.length;H++){var ue=T[H],ye=ue.c;switch(ue.op){case"m":Js(ye[0],ye[1]);break;case"l":xi(ye[0],ye[1]);break;case"c":bo.apply(this,ye);break;case"h":or()}}return this},v.__private__.rect=v.rect=function(T,H,ue,ye,Ce){if(isNaN(T)||isNaN(H)||isNaN(ue)||isNaN(ye)||!Lo(Ce))throw new Error("Invalid arguments passed to jsPDF.rect");return F===O&&(ye=-ye),de([C(B(T)),C(M(H)),C(B(ue)),C(B(ye)),"re"].join(" ")),Ks(Ce),this},v.__private__.triangle=v.triangle=function(T,H,ue,ye,Ce,De,Ge){if(isNaN(T)||isNaN(H)||isNaN(ue)||isNaN(ye)||isNaN(Ce)||isNaN(De)||!Lo(Ge))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ue-T,ye-H],[Ce-ue,De-ye],[T-Ce,H-De]],T,H,[1,1],Ge,!0),this},v.__private__.roundedRect=v.roundedRect=function(T,H,ue,ye,Ce,De,Ge){if(isNaN(T)||isNaN(H)||isNaN(ue)||isNaN(ye)||isNaN(Ce)||isNaN(De)||!Lo(Ge))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var lt=4/3*(Math.SQRT2-1);return Ce=Math.min(Ce,.5*ue),De=Math.min(De,.5*ye),this.lines([[ue-2*Ce,0],[Ce*lt,0,Ce,De-De*lt,Ce,De],[0,ye-2*De],[0,De*lt,-Ce*lt,De,-Ce,De],[2*Ce-ue,0],[-Ce*lt,0,-Ce,-De*lt,-Ce,-De],[0,2*De-ye],[0,-De*lt,Ce*lt,-De,Ce,-De]],T+Ce,H,[1,1],Ge,!0),this},v.__private__.ellipse=v.ellipse=function(T,H,ue,ye,Ce){if(isNaN(T)||isNaN(H)||isNaN(ue)||isNaN(ye)||!Lo(Ce))throw new Error("Invalid arguments passed to jsPDF.ellipse");var De=4/3*(Math.SQRT2-1)*ue,Ge=4/3*(Math.SQRT2-1)*ye;return Js(T+ue,H),bo(T+ue,H-Ge,T+De,H-ye,T,H-ye),bo(T-De,H-ye,T-ue,H-Ge,T-ue,H),bo(T-ue,H+Ge,T-De,H+ye,T,H+ye),bo(T+De,H+ye,T+ue,H+Ge,T+ue,H),Ks(Ce),this},v.__private__.circle=v.circle=function(T,H,ue,ye){if(isNaN(T)||isNaN(H)||isNaN(ue)||!Lo(ye))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(T,H,ue,ue,ye)},v.setFont=function(T,H,ue){return ue&&(H=D(H,ue)),Tt=Qa(T,H,{disableWarning:!1}),this};var Fo=v.__private__.getFont=v.getFont=function(){return ht[Qa.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var T,H,ue={};for(T in Ht)if(Ht.hasOwnProperty(T))for(H in ue[T]=[],Ht[T])Ht[T].hasOwnProperty(H)&&ue[T].push(H);return ue},v.addFont=function(T,H,ue,ye,Ce){var De=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&De.indexOf(arguments[3])!==-1?Ce=arguments[3]:arguments[3]&&De.indexOf(arguments[3])==-1&&(ue=D(ue,ye)),qs.call(this,T,H,ue,Ce=Ce||"Identity-H")};var vi,Sn=r.lineWidth||.200025,Bt=v.__private__.getLineWidth=v.getLineWidth=function(){return Sn},ts=v.__private__.setLineWidth=v.setLineWidth=function(T){return Sn=T,de(C(B(T))+" w"),this};v.__private__.setLineDash=Ct.API.setLineDash=Ct.API.setLineDashPattern=function(T,H){if(T=T||[],H=H||0,isNaN(H)||!Array.isArray(T))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return T=T.map(function(ue){return C(B(ue))}).join(" "),H=C(B(H)),de("["+T+"] "+H+" d"),this};var Fi=v.__private__.getLineHeight=v.getLineHeight=function(){return He*vi};v.__private__.getLineHeight=v.getLineHeight=function(){return He*vi};var Fl=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(T){return typeof(T=T||1.15)=="number"&&(vi=T),this},As=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return vi};Fl(r.lineHeight);var Dn=v.__private__.getHorizontalCoordinate=function(T){return B(T)},zo=v.__private__.getVerticalCoordinate=function(T){return F===$?T:Dt[J].mediaBox.topRightY-Dt[J].mediaBox.bottomLeftY-B(T)},Ta=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(T){return C(Dn(T))},Rr=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(T){return C(zo(T))},Ys=r.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return Ki(Ys)},v.__private__.setStrokeColor=v.setDrawColor=function(T,H,ue,ye){return Ys=wn({ch1:T,ch2:H,ch3:ue,ch4:ye,pdfColorType:"draw",precision:2}),de(Ys),this};var rl=r.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return Ki(rl)},v.__private__.setFillColor=v.setFillColor=function(T,H,ue,ye){return rl=wn({ch1:T,ch2:H,ch3:ue,ch4:ye,pdfColorType:"fill",precision:2}),de(rl),this};var Ji=r.textColor||"0 g",wo=v.__private__.getTextColor=v.getTextColor=function(){return Ki(Ji)};v.__private__.setTextColor=v.setTextColor=function(T,H,ue,ye){return Ji=wn({ch1:T,ch2:H,ch3:ue,ch4:ye,pdfColorType:"text",precision:3}),this};var Yi=r.charSpace,rs=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(Yi||0)};v.__private__.setCharSpace=v.setCharSpace=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Yi=T,this};var Qi=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(T){var H=v.CapJoinStyles[T];if(H===void 0)throw new Error("Line cap style of '"+T+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qi=H,de(H+" J"),this};var Aa=0;v.__private__.setLineJoin=v.setLineJoin=function(T){var H=v.CapJoinStyles[T];if(H===void 0)throw new Error("Line join style of '"+T+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Aa=H,de(H+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(T){if(T=T||0,isNaN(T))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(C(B(T))+" M"),this},v.GState=vm,v.setGState=function(T){(T=typeof T=="string"?$t[Er[T]]:ns(null,T)).equals(zr)||(de("/"+T.id+" gs"),zr=T)};var ns=function(T,H){if(!T||!Er[T]){var ue=!1;for(var ye in $t)if($t.hasOwnProperty(ye)&&$t[ye].equals(H)){ue=!0;break}if(ue)H=$t[ye];else{var Ce="GS"+(Object.keys($t).length+1).toString(10);$t[Ce]=H,H.id=Ce}return T&&(Er[T]=H.id),ar.publish("addGState",H),H}};v.addGState=function(T,H){return ns(T,H),this},v.saveGraphicsState=function(){return de("q"),sr.push({key:Tt,size:He,color:Ji}),this},v.restoreGraphicsState=function(){de("Q");var T=sr.pop();return Tt=T.key,He=T.size,Ji=T.color,zr=null,this},v.setCurrentTransformationMatrix=function(T){return de(T.toString()+" cm"),this},v.comment=function(T){return de("#"+T),this};var bi=function(T,H){var ue=T||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ue},set:function(De){isNaN(De)||(ue=parseFloat(De))}});var ye=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ye},set:function(De){isNaN(De)||(ye=parseFloat(De))}});var Ce="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ce},set:function(De){Ce=De.toString()}}),this},Cs=function(T,H,ue,ye){bi.call(this,T,H),this.type="rect";var Ce=ue||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ce},set:function(Ge){isNaN(Ge)||(Ce=parseFloat(Ge))}});var De=ye||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return De},set:function(Ge){isNaN(Ge)||(De=parseFloat(Ge))}}),this},is=function(){this.page=Ut,this.currentPage=J,this.pages=Ue.slice(0),this.pagesContext=Dt.slice(0),this.x=pt,this.y=Ir,this.matrix=ir,this.width=Oo(J),this.height=zi(J),this.outputDestination=Ze,this.id="",this.objectNumber=-1};is.prototype.restore=function(){Ut=this.page,J=this.currentPage,Dt=this.pagesContext,Ue=this.pages,pt=this.x,Ir=this.y,ir=this.matrix,nl(J,this.width),Zn(J,this.height),Ze=this.outputDestination};var li=function(T,H,ue,ye,Ce){Vn.push(new is),Ut=J=0,Ue=[],pt=T,Ir=H,ir=Ce,es([ue,ye])};for(var Vo in v.beginFormObject=function(T,H,ue,ye,Ce){return li(T,H,ue,ye,Ce),this},v.endFormObject=function(T){return(function(H){if(Po[H])Vn.pop().restore();else{var ue=new is,ye="Xo"+(Object.keys(zn).length+1).toString(10);ue.id=ye,Po[H]=ye,zn[ye]=ue,ar.publish("addFormObject",ue),Vn.pop().restore()}})(T),this},v.doFormObject=function(T,H){var ue=zn[Po[T]];return de("q"),de(H.toString()+" cm"),de("/"+ue.id+" Do"),de("Q"),this},v.getFormObject=function(T){var H=zn[Po[T]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},v.save=function(T,H){return T=T||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(iu(lr(yi()),T),typeof iu.unload=="function"&&Qt.setTimeout&&setTimeout(iu.unload,911),this):new Promise(function(ue,ye){try{var Ce=iu(lr(yi()),T);typeof iu.unload=="function"&&Qt.setTimeout&&setTimeout(iu.unload,911),ue(Ce)}catch(De){ye(De.message)}})},Ct.API)Ct.API.hasOwnProperty(Vo)&&(Vo==="events"&&Ct.API.events.length?(function(T,H){var ue,ye,Ce;for(Ce=H.length-1;Ce!==-1;Ce--)ue=H[Ce][0],ye=H[Ce][1],T.subscribe.apply(T,[ue].concat(typeof ye=="function"?[ye]:ye))})(ar,Ct.API.events):v[Vo]=Ct.API[Vo]);function Oo(T){return Dt[T].mediaBox.topRightX-Dt[T].mediaBox.bottomLeftX}function nl(T,H){Dt[T].mediaBox.topRightX=H+Dt[T].mediaBox.bottomLeftX}function zi(T){return Dt[T].mediaBox.topRightY-Dt[T].mediaBox.bottomLeftY}function Zn(T,H){Dt[T].mediaBox.topRightY=H+Dt[T].mediaBox.bottomLeftY}var Ca=v.getPageWidth=function(T){return Oo(T=T||J)/jt},Wn=v.setPageWidth=function(T,H){nl(T,H*jt)},wi=v.getPageHeight=function(T){return zi(T=T||J)/jt},ks=v.setPageHeight=function(T,H){Zn(T,H*jt)};return v.internal={pdfEscape:mi,getStyle:Sa,getFont:Fo,getFontSize:rt,getCharSpace:rs,getTextColor:wo,getLineHeight:Fi,getLineHeightFactor:As,getLineWidth:Bt,write:Ft,getHorizontalCoordinate:Dn,getVerticalCoordinate:zo,getCoordinateString:Ta,getVerticalCoordinateString:Rr,collections:{},newObject:Cr,newAdditionalObject:Qn,newObjectDeferred:Vr,newObjectDeferredBegin:dn,getFilters:Bi,putStream:Li,events:ar,scaleFactor:jt,pageSize:{getWidth:function(){return Ca(J)},setWidth:function(T){Wn(J,T)},getHeight:function(){return wi(J)},setHeight:function(T){ks(J,T)}},encryptionOptions:g,encryption:Or,getEncryptor:function(T){return g!==null?Or.encryptor(T,0):function(H){return H}},output:Mn,getNumberOfPages:gi,pages:Ue,out:de,f2:I,f3:w,getPageInfo:Hs,getPageInfoByObjId:Xa,getCurrentPageInfo:Za,getPDFVersion:E,Point:bi,Rectangle:Cs,Matrix:Rt,hasHotfix:vo},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return Ca(J)},set:function(T){Wn(J,T)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return wi(J)},set:function(T){ks(J,T)},enumerable:!0,configurable:!0}),(function(T){for(var H=0,ue=wt.length;H<ue;H++){var ye=qs.call(this,T[H][0],T[H][1],T[H][2],wt[H][3],!0);b===!1&&(_[ye]=!0);var Ce=T[H][0].split("-");Ll({id:ye,fontName:Ce[0],fontStyle:Ce[1]||""})}ar.publish("addFonts",{fonts:ht,dictionary:Ht})}).call(v,wt),Tt="F1",wa(i,t),ar.publish("initialized"),v}wd.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},wd.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},wd.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},wd.prototype.processOwnerPassword=function(r,e){return d1(u1(e).substr(0,5),r)},wd.prototype.encryptor=function(r,e){var t=u1(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return d1(t,n)}},vm.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||Gr(r)!==Gr(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},Ct.API={events:[]},Ct.version="3.0.3";var Ln=Ct.API,o5=1,Vu=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},fd=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},nr=function(r){return r.toFixed(2)},ac=function(r){return r.toFixed(5)};Ln.__acroform__={};var Yo=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},wx=function(r){return r*o5},Oa=function(r){var e=new iS,t=yt.internal.getHeight(r)||0,n=yt.internal.getWidth(r)||0;return e.BBox=[0,0,Number(nr(n)),Number(nr(t))],e},dk=Ln.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},hk=Ln.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},fk=Ln.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},Gn=Ln.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return fk(r,e-1)},Kn=Ln.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return dk(r,e-1)},Jn=Ln.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return hk(r,e-1)},pk=Ln.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=r[0],s=r[1],l=r[2],u=r[3],h={};return h.lowerLeft_X=t(i)||0,h.lowerLeft_Y=n(s+u)||0,h.upperRight_X=t(i+l)||0,h.upperRight_Y=n(s)||0,[Number(nr(h.lowerLeft_X)),Number(nr(h.lowerLeft_Y)),Number(nr(h.upperRight_X)),Number(nr(h.upperRight_Y))]},mk=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=h1(r,t),i=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+i+" "+nr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Oa(r);return s.scope=r.scope,s.stream=e.join(`
`),s}},h1=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=r.multiline?i.map(function(I){return I.split(`
`)}):i.map(function(I){return[I]});var s=t,l=yt.internal.getHeight(r)||0;l=l<0?-l:l;var u=yt.internal.getWidth(r)||0;u=u<0?-u:u;var h=function(I,w,B){if(I+1<i.length){var M=w+" "+i[I+1][0];return Fp(M,r,B).width<=u-4}return!1};s++;e:for(;s>0;){e="",s--;var d,g,b=Fp("3",r,s).height,_=r.multiline?l-s:(l-b)/2,v=_+=2,N=0,E=0,L=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Fp(e,r,s=12).width+", FieldWidth:"+u+`
`;break}for(var k="",O=0,$=0;$<i.length;$++)if(i.hasOwnProperty($)){var F=!1;if(i[$].length!==1&&L!==i[$].length-1){if((b+2)*(O+2)+2>l)continue e;k+=i[$][L],F=!0,E=$,$--}else{k=(k+=i[$][L]+" ").substr(k.length-1)==" "?k.substr(0,k.length-1):k;var oe=parseInt($),ce=h(oe,k,s),D=$>=i.length-1;if(ce&&!D){k+=" ",L=0;continue}if(ce||D){if(D)E=oe;else if(r.multiline&&(b+2)*(O+2)+2>l)continue e}else{if(!r.multiline||(b+2)*(O+2)+2>l)continue e;E=oe}}for(var C="",S=N;S<=E;S++){var V=i[S];if(r.multiline){if(S===E){C+=V[L]+" ",L=(L+1)%V.length;continue}if(S===N){C+=V[V.length-1]+" ";continue}}C+=V[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,g=Fp(C,r,s).width,r.textAlign){case"right":d=u-g-2;break;case"center":d=(u-g)/2;break;default:d=2}e+=nr(d)+" "+nr(v)+` Td
`,e+="("+Vu(C)+`) Tj
`,e+=-nr(d)+` 0 Td
`,v=-(s+2),g=0,N=F?E:E+1,O++,k=""}break}return n.text=e,n.fontSize=s,n},Fp=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},gk={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},yk=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},xk=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(va.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(gk)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");o5=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new oS,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];s.objId=void 0,s.hasAnnotation&&yk(s,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,i){var s=!n;for(var l in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(l)){var u=n[l],h=[],d=u.Rect;if(u.Rect&&(u.Rect=pk(u.Rect,i)),i.internal.newObjectDeferredBegin(u.objId,!0),u.DA=yt.createDefaultAppearanceStream(u),Gr(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(h=u.getKeyValueListForStream()),u.Rect=d,u.hasAppearanceStream&&!u.appearanceStreamContent){var g=mk(u);h.push({key:"AP",value:"<</N "+g+">>"}),i.internal.acroformPlugin.xForms.push(g)}if(u.appearanceStreamContent){var b="";for(var _ in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(_)){var v=u.appearanceStreamContent[_];if(b+="/"+_+" ",b+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var l in v)if(v.hasOwnProperty(l)){var N=v[l];typeof N=="function"&&(N=N.call(i,u)),b+="/"+l+" "+N+" ",i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N)}}else typeof(N=v)=="function"&&(N=N.call(i,u)),b+="/"+l+" "+N,i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N);b+=">>"}h.push({key:"AP",value:`<<
`+b+">>"})}i.internal.putStream({additionalKeyValues:h,objectId:u.objId}),i.internal.out("endobj")}s&&(function(E,L){for(var k in E)if(E.hasOwnProperty(k)){var O=k,$=E[k];L.internal.newObjectDeferredBegin($.objId,!0),Gr($)==="object"&&typeof $.putStream=="function"&&$.putStream(),delete E[O]}})(i.internal.acroformPlugin.xForms,i)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},nS=Ln.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(l){return l};if(Array.isArray(r)){for(var i="[",s=0;s<r.length;s++)switch(s!==0&&(i+=" "),Gr(r[s])){case"boolean":case"number":case"object":i+=r[s].toString();break;case"string":r[s].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),i+="("+Vu(n(r[s].toString()))+")"):i+=r[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Bg=function(r,e,t){var n=function(i){return i};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+Vu(n(r))+")"},Da=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Da.prototype.toString=function(){return this.objId+" 0 R"},Da.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Da.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],i=this[n];i&&(Array.isArray(i)?r.push({key:n,value:nS(i,this.objId,this.scope)}):i instanceof Da?(i.scope=this.scope,r.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&r.push({key:n,value:i}))}return r};var iS=function(){Da.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};Yo(iS,Da);var oS=function(){Da.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Vu(t(r))+")"}},set:function(t){r=t}})};Yo(oS,Da);var va=function r(){Da.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute F supplied.');e=k}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Gn(e,3)},set:function(k){k?this.F=Kn(e,3):this.F=Jn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute Ff supplied.');t=k}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(k){n=k!==void 0?k:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(k){n[0]=k}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(k){n[1]=k}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(k){n[2]=k}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(k){n[3]=k}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(k){switch(k){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=k;break;default:throw new Error('Invalid value "'+k+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof bm)return;s="FieldObject"+r.FieldNum++}var k=function(O){return O};return this.scope&&(k=this.scope.internal.getEncryptor(this.objId)),"("+Vu(k(s))+")"},set:function(k){s=k.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(k){s=k}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(k){l=k}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(k){u=k}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(k){h=k}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/o5:d},set:function(k){d=k}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(k){g=k}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof bm||this instanceof gu))return Bg(b,this.objId,this.scope)},set:function(k){k=k.toString(),b=k}});var _=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof ji==0?Bg(_,this.objId,this.scope):_},set:function(k){k=k.toString(),_=this instanceof ji==0?k.substr(0,1)==="("?fd(k.substr(1,k.length-2)):fd(k):k}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ji==1?fd(_.substr(1,_.length-1)):_},set:function(k){k=k.toString(),_=this instanceof ji==1?"/"+k:k}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(k){this.V=k}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof ji==0?Bg(v,this.objId,this.scope):v},set:function(k){k=k.toString(),v=this instanceof ji==0?k.substr(0,1)==="("?fd(k.substr(1,k.length-2)):fd(k):k}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ji==1?fd(v.substr(1,v.length-1)):v},set:function(k){k=k.toString(),v=this instanceof ji==1?"/"+k:k}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(k){k=!!k,E=k}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(k){N=k}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,1)},set:function(k){k?this.Ff=Kn(this.Ff,1):this.Ff=Jn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,2)},set:function(k){k?this.Ff=Kn(this.Ff,2):this.Ff=Jn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,3)},set:function(k){k?this.Ff=Kn(this.Ff,3):this.Ff=Jn(this.Ff,3)}});var L=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(L!==null)return L},set:function(k){if([0,1,2].indexOf(k)===-1)throw new Error('Invalid value "'+k+'" for attribute Q supplied.');L=k}}),Object.defineProperty(this,"textAlign",{get:function(){var k;switch(L){case 0:default:k="left";break;case 1:k="center";break;case 2:k="right"}return k},configurable:!0,enumerable:!0,set:function(k){switch(k){case"right":case 2:L=2;break;case"center":case 1:L=1;break;default:L=0}}})};Yo(va,Da);var jd=function(){va.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return nS(e,this.objId,this.scope)},set:function(t){var n,i;i=[],typeof(n=t)=="string"&&(i=(function(s,l,u){u||(u=1);for(var h,d=[];h=l.exec(s);)d.push(h[u]);return d})(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,18)},set:function(t){t?this.Ff=Kn(this.Ff,18):this.Ff=Jn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Kn(this.Ff,19):this.Ff=Jn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,20)},set:function(t){t?(this.Ff=Kn(this.Ff,20),e.sort()):this.Ff=Jn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,22)},set:function(t){t?this.Ff=Kn(this.Ff,22):this.Ff=Jn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,23)},set:function(t){t?this.Ff=Kn(this.Ff,23):this.Ff=Jn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,27)},set:function(t){t?this.Ff=Kn(this.Ff,27):this.Ff=Jn(this.Ff,27)}}),this.hasAppearanceStream=!1};Yo(jd,va);var Rd=function(){jd.call(this),this.fontName="helvetica",this.combo=!1};Yo(Rd,jd);var Pd=function(){Rd.call(this),this.combo=!0};Yo(Pd,Rd);var Yp=function(){Pd.call(this),this.edit=!0};Yo(Yp,Pd);var ji=function(){va.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,15)},set:function(t){t?this.Ff=Kn(this.Ff,15):this.Ff=Jn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,16)},set:function(t){t?this.Ff=Kn(this.Ff,16):this.Ff=Jn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,17)},set:function(t){t?this.Ff=Kn(this.Ff,17):this.Ff=Jn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,26)},set:function(t){t?this.Ff=Kn(this.Ff,26):this.Ff=Jn(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+Vu(t(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Gr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};Yo(ji,va);var Qp=function(){ji.call(this),this.pushButton=!0};Yo(Qp,ji);var Nd=function(){ji.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};Yo(Nd,ji);var bm=function(){var r,e;va.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,l=[];for(s in l.push("<<"),n)l.push("/"+s+" ("+Vu(i(n[s]))+")");return l.push(">>"),l.join(`
`)},set:function(i){Gr(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Yo(bm,va),Nd.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},Nd.prototype.createOption=function(r){var e=new bm;return e.Parent=this,e.optionName=r,this.Kids.push(e),vk.call(this.scope,e),e};var Xp=function(){ji.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yt.CheckBox.createAppearanceStream()};Yo(Xp,ji);var gu=function(){va.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,13)},set:function(e){e?this.Ff=Kn(this.Ff,13):this.Ff=Jn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,21)},set:function(e){e?this.Ff=Kn(this.Ff,21):this.Ff=Jn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,23)},set:function(e){e?this.Ff=Kn(this.Ff,23):this.Ff=Jn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,24)},set:function(e){e?this.Ff=Kn(this.Ff,24):this.Ff=Jn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,25)},set:function(e){e?this.Ff=Kn(this.Ff,25):this.Ff=Jn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,26)},set:function(e){e?this.Ff=Kn(this.Ff,26):this.Ff=Jn(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Yo(gu,va);var Zp=function(){gu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,14)},set:function(r){r?this.Ff=Kn(this.Ff,14):this.Ff=Jn(this.Ff,14)}}),this.password=!0};Yo(Zp,gu);var yt={CheckBox:{createAppearanceStream:function(){return{N:{On:yt.CheckBox.YesNormal},D:{On:yt.CheckBox.YesPushDown,Off:yt.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=Oa(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),s=h1(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+nr(yt.internal.getWidth(r))+" "+nr(yt.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+nr(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=Oa(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),i=[],s=yt.internal.getHeight(r),l=yt.internal.getWidth(r),u=h1(r,r.caption);return i.push("1 g"),i.push("0 0 "+nr(l)+" "+nr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+nr(l-1)+" "+nr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+nr(u.fontSize)+" Tf "+n),i.push(u.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(r){var e=Oa(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+nr(yt.internal.getWidth(r))+" "+nr(yt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:yt.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=yt.RadioButton.Circle.YesNormal,e.D[r]=yt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=Oa(r);e.scope=r.scope;var t=[],n=yt.internal.getWidth(r)<=yt.internal.getHeight(r)?yt.internal.getWidth(r)/4:yt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=yt.internal.Bezier_C,s=Number((n*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+ac(yt.internal.getWidth(r)/2)+" "+ac(yt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),t.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),t.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),t.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Oa(r);e.scope=r.scope;var t=[],n=yt.internal.getWidth(r)<=yt.internal.getHeight(r)?yt.internal.getWidth(r)/4:yt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*yt.internal.Bezier_C).toFixed(5)),l=Number((n*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+ac(yt.internal.getWidth(r)/2)+" "+ac(yt.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+ac(yt.internal.getWidth(r)/2)+" "+ac(yt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+l+" "+l+" "+n+" 0 "+n+" c"),t.push("-"+l+" "+n+" -"+n+" "+l+" -"+n+" 0 c"),t.push("-"+n+" -"+l+" -"+l+" -"+n+" 0 -"+n+" c"),t.push(l+" -"+n+" "+n+" -"+l+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=Oa(r);e.scope=r.scope;var t=[],n=yt.internal.getWidth(r)<=yt.internal.getHeight(r)?yt.internal.getWidth(r)/4:yt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+ac(yt.internal.getWidth(r)/2)+" "+ac(yt.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:yt.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=yt.RadioButton.Cross.YesNormal,e.D[r]=yt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=Oa(r);e.scope=r.scope;var t=[],n=yt.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+nr(yt.internal.getWidth(r)-2)+" "+nr(yt.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(nr(n.x1.x)+" "+nr(n.x1.y)+" m"),t.push(nr(n.x2.x)+" "+nr(n.x2.y)+" l"),t.push(nr(n.x4.x)+" "+nr(n.x4.y)+" m"),t.push(nr(n.x3.x)+" "+nr(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Oa(r);e.scope=r.scope;var t=yt.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+nr(yt.internal.getWidth(r))+" "+nr(yt.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+nr(yt.internal.getWidth(r)-2)+" "+nr(yt.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(nr(t.x1.x)+" "+nr(t.x1.y)+" m"),n.push(nr(t.x2.x)+" "+nr(t.x2.y)+" l"),n.push(nr(t.x4.x)+" "+nr(t.x4.y)+" m"),n.push(nr(t.x3.x)+" "+nr(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=Oa(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+nr(yt.internal.getWidth(r))+" "+nr(yt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};yt.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=yt.internal.getWidth(r),t=yt.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},yt.internal.getWidth=function(r){var e=0;return Gr(r)==="object"&&(e=wx(r.Rect[2])),e},yt.internal.getHeight=function(r){var e=0;return Gr(r)==="object"&&(e=wx(r.Rect[3])),e};var vk=Ln.addField=function(r){if(xk(this,r),!(r instanceof va))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};Ln.AcroFormChoiceField=jd,Ln.AcroFormListBox=Rd,Ln.AcroFormComboBox=Pd,Ln.AcroFormEditBox=Yp,Ln.AcroFormButton=ji,Ln.AcroFormPushButton=Qp,Ln.AcroFormRadioButton=Nd,Ln.AcroFormCheckBox=Xp,Ln.AcroFormTextField=gu,Ln.AcroFormPasswordField=Zp,Ln.AcroFormAppearance=yt,Ln.AcroForm={ChoiceField:jd,ListBox:Rd,ComboBox:Pd,EditBox:Yp,Button:ji,PushButton:Qp,RadioButton:Nd,CheckBox:Xp,TextField:gu,PasswordField:Zp,Appearance:yt},Ct.AcroForm={ChoiceField:jd,ListBox:Rd,ComboBox:Pd,EditBox:Yp,Button:ji,PushButton:Qp,RadioButton:Nd,CheckBox:Xp,TextField:gu,PasswordField:Zp,Appearance:yt};Ct.AcroForm;function sS(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){var e="addImage_";r.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=r.__addimage__.getImageFileTypeByImageData=function(I,w){var B,M,q,se,te,re=t;if((w=w||t)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(ce(I))for(te in n)for(q=n[te],B=0;B<q.length;B+=1){for(se=!0,M=0;M<q[B].length;M+=1)if(q[B][M]!==void 0&&q[B][M]!==I[M]){se=!1;break}if(se===!0){re=te;break}}else for(te in n)for(q=n[te],B=0;B<q.length;B+=1){for(se=!0,M=0;M<q[B].length;M+=1)if(q[B][M]!==void 0&&q[B][M]!==I.charCodeAt(M)){se=!1;break}if(se===!0){re=te;break}}return re===t&&w!==t&&(re=w),re},s=function I(w){for(var B=this.internal.write,M=this.internal.putStream,q=(0,this.internal.getFilters)();q.indexOf("FlateEncode")!==-1;)q.splice(q.indexOf("FlateEncode"),1);w.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:w.width}),se.push({key:"Height",value:w.height}),w.colorSpace===k.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(w.palette.length/3-1)+" "+("sMask"in w&&w.sMask!==void 0?w.objectId+2:w.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+w.colorSpace}),w.colorSpace===k.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:w.bitsPerComponent}),"decodeParameters"in w&&w.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+w.decodeParameters+">>"}),"transparency"in w&&Array.isArray(w.transparency)&&w.transparency.length>0){for(var te="",re=0,xe=w.transparency.length;re<xe;re++)te+=w.transparency[re]+" "+w.transparency[re]+" ";se.push({key:"Mask",value:"["+te+"]"})}w.sMask!==void 0&&se.push({key:"SMask",value:w.objectId+1+" 0 R"});var be=w.filter!==void 0?["/"+w.filter]:void 0;if(M({data:w.data,additionalKeyValues:se,alreadyAppliedFilters:be,objectId:w.objectId}),B("endobj"),"sMask"in w&&w.sMask!==void 0){var Z,W=(Z=w.sMaskBitsPerComponent)!==null&&Z!==void 0?Z:w.bitsPerComponent,J={width:w.width,height:w.height,colorSpace:"DeviceGray",bitsPerComponent:W,data:w.sMask};"filter"in w&&(J.decodeParameters="/Predictor ".concat(w.predictor," /Colors 1 /BitsPerComponent ").concat(W," /Columns ").concat(w.width),J.filter=w.filter),I.call(this,J)}if(w.colorSpace===k.INDEXED){var ie=this.internal.newObject();M({data:C(new Uint8Array(w.palette)),objectId:ie}),B("endobj")}},l=function(){var I=this.internal.collections[e+"images"];for(var w in I)s.call(this,I[w])},u=function(){var I,w=this.internal.collections[e+"images"],B=this.internal.write;for(var M in w)B("/I"+(I=w[M]).index,I.objectId,"0","R")},h=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",u))},d=function(){var I=this.internal.collections[e+"images"];return h.call(this),I},g=function(){return Object.keys(this.internal.collections[e+"images"]).length},b=function(I){return typeof r["process"+I.toUpperCase()]=="function"},_=function(I){return Gr(I)==="object"&&I.nodeType===1},v=function(I,w){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var B=""+I.getAttribute("src");if(B.indexOf("data:image/")===0)return Jp(unescape(B).split("base64,").pop());var M=r.loadFile(B,!0);if(M!==void 0)return M}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var q;switch(w){case"PNG":q="image/png";break;case"WEBP":q="image/webp";break;default:q="image/jpeg"}return Jp(I.toDataURL(q,1).split("base64,").pop())}},N=function(I){var w=this.internal.collections[e+"images"];if(w){for(var B in w)if(I===w[B].alias)return w[B]}},E=function(I,w,B){return I||w||(I=-96,w=-96),I<0&&(I=-1*B.width*72/I/this.internal.scaleFactor),w<0&&(w=-1*B.height*72/w/this.internal.scaleFactor),I===0&&(I=w*B.width/B.height),w===0&&(w=I*B.height/B.width),[I,w]},L=function(I,w,B,M,q,se){var te=E.call(this,B,M,q),re=this.internal.getCoordinateString,xe=this.internal.getVerticalCoordinateString,be=d.call(this);if(B=te[0],M=te[1],be[q.index]=q,se){se*=Math.PI/180;var Z=Math.cos(se),W=Math.sin(se),J=function(he){return he.toFixed(4)},ie=[J(Z),J(W),J(-1*W),J(Z),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,re(I),xe(w+M),"cm"].join(" ")),this.internal.write(ie.join(" ")),this.internal.write([re(B),"0","0",re(M),"0","0","cm"].join(" "))):this.internal.write([re(B),"0","0",re(M),re(I),xe(w+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+q.index+" Do"),this.internal.write("Q")},k=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var O=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},$=r.__addimage__.sHashCode=function(I){var w,B,M=0;if(typeof I=="string")for(B=I.length,w=0;w<B;w++)M=(M<<5)-M+I.charCodeAt(w),M|=0;else if(ce(I))for(B=I.byteLength/2,w=0;w<B;w++)M=(M<<5)-M+I[w],M|=0;return M},F=r.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var w=!0;return I.length===0&&(w=!1),I.length%4!=0&&(w=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(w=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(w=!1),w},oe=r.__addimage__.extractImageFromDataUrl=function(I){if(I==null||!(I=I.trim()).startsWith("data:"))return null;var w=I.indexOf(",");return w<0?null:I.substring(0,w).trim().endsWith("base64")?I.substring(w+1):null};r.__addimage__.isArrayBuffer=function(I){return I instanceof ArrayBuffer};var ce=r.__addimage__.isArrayBufferView=function(I){return I instanceof Int8Array||I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array},D=r.__addimage__.binaryStringToUint8Array=function(I){for(var w=I.length,B=new Uint8Array(w),M=0;M<w;M++)B[M]=I.charCodeAt(M);return B},C=r.__addimage__.arrayBufferToBinaryString=function(I){for(var w="",B=ce(I)?I:new Uint8Array(I),M=0;M<B.length;M+=8192)w+=String.fromCharCode.apply(null,B.subarray(M,M+8192));return w};r.addImage=function(){var I,w,B,M,q,se,te,re,xe;if(typeof arguments[1]=="number"?(w=t,B=arguments[1],M=arguments[2],q=arguments[3],se=arguments[4],te=arguments[5],re=arguments[6],xe=arguments[7]):(w=arguments[1],B=arguments[2],M=arguments[3],q=arguments[4],se=arguments[5],te=arguments[6],re=arguments[7],xe=arguments[8]),Gr(I=arguments[0])==="object"&&!_(I)&&"imageData"in I){var be=I;I=be.imageData,w=be.format||w||t,B=be.x||B||0,M=be.y||M||0,q=be.w||be.width||q,se=be.h||be.height||se,te=be.alias||te,re=be.compression||re,xe=be.rotation||be.angle||xe}var Z=this.internal.getFilters();if(re===void 0&&Z.indexOf("FlateEncode")!==-1&&(re="SLOW"),isNaN(B)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var W=S.call(this,I,w,te,re);return L.call(this,B,M,q,se,W,xe),this};var S=function(I,w,B,M){var q,se,te;if(typeof I=="string"&&i(I)===t){I=unescape(I);var re=V(I,!1);(re!==""||(re=r.loadFile(I,!0))!==void 0)&&(I=re)}if(_(I)&&(I=v(I,w)),w=i(I,w),!b(w))throw new Error("addImage does not support files of type '"+w+"', please ensure that a plugin for '"+w+"' support is added.");if(((te=B)==null||te.length===0)&&(B=(function(xe){return typeof xe=="string"||ce(xe)?$(xe):ce(xe.data)?$(xe.data):null})(I)),(q=N.call(this,B))||(I instanceof Uint8Array||w==="RGBA"||(se=I,I=D(I)),q=this["process"+w.toUpperCase()](I,g.call(this),B,(function(xe){return xe&&typeof xe=="string"&&(xe=xe.toUpperCase()),xe in r.image_compression?xe:O.NONE})(M),se)),!q)throw new Error("An unknown error occurred whilst processing the image.");return q},V=r.__addimage__.convertBase64ToBinaryString=function(I,w){w=typeof w!="boolean"||w;var B,M="";if(typeof I=="string"){var q;B=(q=oe(I))!==null&&q!==void 0?q:I;try{M=Jp(B)}catch(se){if(w)throw F(B)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return M};r.getImageProperties=function(I){var w,B,M="";if(_(I)&&(I=v(I)),typeof I=="string"&&i(I)===t&&((M=V(I,!1))===""&&(M=r.loadFile(I)||""),I=M),B=i(I),!b(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(I instanceof Uint8Array||(I=D(I)),!(w=this["process"+B.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return w.fileType=B,w}})(Ct.API),(function(r){var e=function(t){if(t!==void 0&&t!="")return!0};Ct.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,i,s,l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,g=!1,b=0;b<d.length&&!g;b++)switch((n=d[b]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var _=0;_<d.length;_++){n=d[_];var v=this.internal.pdfEscape,N=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),L=this.internal.newAdditionalObject(),k=this.internal.getEncryptor(E.objId),O=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+l(n.bounds.x)+" "+u(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y)+"] ")+"/Contents ("+v(k(n.contents))+")",s+=" /Popup "+L.objId+" 0 R",s+=" /P "+h.objId+" 0 R",s+=" /T ("+v(k(O))+") >>",E.content=s;var $=E.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+l(n.bounds.x+30)+" "+u(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w+30)+" "+u(n.bounds.y)+"] ")+" /Parent "+$,n.open&&(s+=" /Open true"),s+=" >>",L.content=s,this.internal.write(E.objId,"0 R",L.objId,"0 R");break;case"freetext":i="/Rect ["+l(n.bounds.x)+" "+u(n.bounds.y)+" "+l(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y+n.bounds.h)+"] ";var F=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+v(N(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var oe=this.annotations._nameMap[n.options.name];n.options.pageNumber=oe.page,n.options.top=oe.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+v(N(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var ce=u(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+ce+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,i,s,l){var u=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:h(t),y:d(n),w:h(t+i),h:d(n+s)},options:l,type:"link"})},r.textWithLink=function(t,n,i,s){var l,u,h=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){u=s.maxWidth;var g=this.splitTextToSize(t,u).length;l=Math.ceil(d*g)}else u=h,l=d;return this.text(t,n,i,s),i+=.2*d,s.align==="center"&&(n-=h/2),s.align==="right"&&(n-=h),this.link(n,i-d,u,l,s),h},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}})(Ct.API),(function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];r.__arabicParser__={};var s=r.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},l=r.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},u=r.__arabicParser__.isArabicEndLetter=function(E){return l(E)&&s(E)&&e[E.charCodeAt(0)].length<=2},h=r.__arabicParser__.isArabicAlfLetter=function(E){return l(E)&&i.indexOf(E.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return l(E)&&s(E)&&e[E.charCodeAt(0)].length>=1};var d=r.__arabicParser__.arabicLetterHasFinalForm=function(E){return l(E)&&s(E)&&e[E.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(E){return l(E)&&s(E)&&e[E.charCodeAt(0)].length>=3};var g=r.__arabicParser__.arabicLetterHasMedialForm=function(E){return l(E)&&s(E)&&e[E.charCodeAt(0)].length==4},b=r.__arabicParser__.resolveLigatures=function(E){var L=0,k=t,O="",$=0;for(L=0;L<E.length;L+=1)k[E.charCodeAt(L)]!==void 0?($++,typeof(k=k[E.charCodeAt(L)])=="number"&&(O+=String.fromCharCode(k),k=t,$=0),L===E.length-1&&(k=t,O+=E.charAt(L-($-1)),L-=$-1,$=0)):(k=t,O+=E.charAt(L-$),L-=$,$=0);return O};r.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&n[E.charCodeAt(0)]!==void 0};var _=r.__arabicParser__.getCorrectForm=function(E,L,k){return l(E)?s(E)===!1?-1:!d(E)||!l(L)&&!l(k)||!l(k)&&u(L)||u(E)&&!l(L)||u(E)&&h(L)||u(E)&&u(L)?0:g(E)&&l(L)&&!u(L)&&l(k)&&d(k)?3:u(E)||!l(k)?1:2:-1},v=function(E){var L=0,k=0,O=0,$="",F="",oe="",ce=(E=E||"").split("\\s+"),D=[];for(L=0;L<ce.length;L+=1){for(D.push(""),k=0;k<ce[L].length;k+=1)$=ce[L][k],F=ce[L][k-1],oe=ce[L][k+1],l($)?(O=_($,F,oe),D[L]+=O!==-1?String.fromCharCode(e[$.charCodeAt(0)][O]):$):D[L]+=$;D[L]=b(D[L])}return D.join(" ")},N=r.__arabicParser__.processArabic=r.processArabic=function(){var E,L=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,k=[];if(Array.isArray(L)){var O=0;for(k=[],O=0;O<L.length;O+=1)Array.isArray(L[O])?k.push([v(L[O][0]),L[O][1],L[O][2]]):k.push([v(L[O])]);E=k}else E=v(L);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};r.events.push(["preProcessText",N])})(Ct.API),Ct.API.autoPrint=function(r){var e;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(u){t=u}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(u){n=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(u){s=u}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(u){l=u}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var i;if((t=t||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Ct.API),(function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(E){h=E}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(E){d=E}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(E){g=E}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(E){b=E}});var _=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return _},set:function(E){_=E}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(E){v=E}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(E){N=E}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(h){return n.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},r.getTextDimensions=function(h,d){n.call(this);var g=(d=d||{}).fontSize||this.getFontSize(),b=d.font||this.getFont(),_=d.scaleFactor||this.internal.scaleFactor,v=0,N=0,E=0,L=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var k=d.maxWidth;k>0?typeof h=="string"?h=this.splitTextToSize(h,k):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function($,F){return $.concat(L.splitTextToSize(F,k))},[])):h=Array.isArray(h)?h:[h];for(var O=0;O<h.length;O++)v<(E=this.getStringUnitWidth(h[O],{font:b})*g)&&(v=E);return v!==0&&(N=h.length),{w:v/=_,h:Math.max((N*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/_,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=r.cell=function(){var h;h=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,b=this.internal.__cell__.margins||e,_=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===h.lineNumber?(h.x=(d.x||0)+(d.width||0),h.y=d.y||0):d.y+d.height+h.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=b.top,v&&_&&(this.printHeaderRow(h.lineNumber,!0),h.y+=_[0].height)):h.y=d.y+d.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-g,h.y+g,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+g,{align:"center",baseline:"top",maxWidth:h.width-g-g}):this.text(h.text,h.x+g,h.y+g,{align:"left",baseline:"top",maxWidth:h.width-g-g})),this.internal.__cell__.lastCell=h,this};r.table=function(h,d,g,b,_){if(n.call(this),!g)throw new Error("No data for PDF table.");var v,N,E,L,k=[],O=[],$=[],F={},oe={},ce=[],D=[],C=(_=_||{}).autoSize||!1,S=_.printHeaders!==!1,V=_.css&&_.css["font-size"]!==void 0?16*_.css["font-size"]:_.fontSize||12,I=_.margins||Object.assign({width:this.getPageWidth()},e),w=typeof _.padding=="number"?_.padding:3,B=_.headerBackgroundColor||"#c8c8c8",M=_.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=w,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=M,this.setFontSize(V),b==null)O=k=Object.keys(g[0]),$=k.map(function(){return"left"});else if(Array.isArray(b)&&Gr(b[0])==="object")for(k=b.map(function(be){return be.name}),O=b.map(function(be){return be.prompt||be.name||""}),$=b.map(function(be){return be.align||"left"}),v=0;v<b.length;v+=1)oe[b[v].name]=.7499990551181103*b[v].width;else Array.isArray(b)&&typeof b[0]=="string"&&(O=k=b,$=k.map(function(){return"left"}));if(C||Array.isArray(b)&&typeof b[0]=="string")for(v=0;v<k.length;v+=1){for(F[L=k[v]]=g.map(function(be){return be[L]}),this.setFont(void 0,"bold"),ce.push(this.getTextDimensions(O[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=F[L],this.setFont(void 0,"normal"),E=0;E<N.length;E+=1)ce.push(this.getTextDimensions(N[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);oe[L]=Math.max.apply(null,ce)+w+w,ce=[]}if(S){var q={};for(v=0;v<k.length;v+=1)q[k[v]]={},q[k[v]].text=O[v],q[k[v]].align=$[v];var se=u.call(this,q,oe);D=k.map(function(be){return new s(h,d,oe[be],se,q[be].text,void 0,q[be].align)}),this.setTableHeaderRow(D),this.printHeaderRow(1,!1)}var te=b.reduce(function(be,Z){return be[Z.name]=Z.align,be},{});for(v=0;v<g.length;v+=1){"rowStart"in _&&_.rowStart instanceof Function&&_.rowStart({row:v,data:g[v]},this);var re=u.call(this,g[v],oe);for(E=0;E<k.length;E+=1){var xe=g[v][k[E]];"cellStart"in _&&_.cellStart instanceof Function&&_.cellStart({row:v,col:E,data:xe},this),l.call(this,new s(h,d,oe[k[E]],re,xe,v+2,te[k[E]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=d,this};var u=function(h,d){var g=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,_=this.internal.scaleFactor;return Object.keys(h).map(function(v){var N=h[v];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,d[v]-g-g)},this).map(function(v){return this.getLineHeightFactor()*v.length*b/_+g+g},this).reduce(function(v,N){return Math.max(v,N)},0)};r.setTableHeaderRow=function(h){n.call(this),this.internal.__cell__.tableHeaderRow=h},r.printHeaderRow=function(h,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var _=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){g=this.internal.__cell__.tableHeaderRow[v].clone(),d&&(g.y=this.internal.__cell__.margins.top||0,_.push(g)),g.lineNumber=h;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,g),this.setTextColor(N)}_.length>0&&this.setTableHeaderRow(_),this.setFont(void 0,"normal"),t=!1}})(Ct.API);var aS={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},lS=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],f1=sS(lS),cS=[100,200,300,400,500,600,700,800,900],bk=sS(cS);function Lg(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=(function(s){return aS[s=s||"normal"]?s:"normal"})(r.style),n=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(r.weight),i=(function(s){return typeof f1[s=s||"normal"]=="number"?s:"normal"})(r.stretch);return{family:e,style:t,weight:n,stretch:i,src:r.src||[],ref:r.ref||{name:e,style:[i,t,n].join(" ")}}}function Sx(r,e,t,n){var i;for(i=t;i>=0&&i<e.length;i+=n)if(r[e[i]])return r[e[i]];for(i=t;i>=0&&i<e.length;i-=n)if(r[e[i]])return r[e[i]]}var wk={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},_x={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Tx(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function Ax(r){return r.trimLeft()}function Sk(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function _k(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var zp,Cx,kx,pd,Vp,Ix,Ex,jx,Fg=["times"];function Rx(r,e,t,n,i){var s=4,l=Nx;switch(i){case Ct.API.image_compression.FAST:s=1,l=Px;break;case Ct.API.image_compression.MEDIUM:s=6,l=Bx;break;case Ct.API.image_compression.SLOW:s=9,l=Lx}r=(function(h,d,g,b){for(var _,v=h.length/d,N=new Uint8Array(h.length+v),E=[Tk,Px,Nx,Bx,Lx],L=0;L<v;L+=1){var k=L*d,O=h.subarray(k,k+d);if(b)N.set(b(O,g,_),k+L);else{for(var $=E.length,F=[],oe=0;oe<$;oe+=1)F[oe]=E[oe](O,g,_);var ce=Ck(F.concat());N.set(F[ce],k+L)}_=O}return N})(r,e,Math.ceil(t*n/8),l);var u=s1(r,{level:s});return Ct.API.__addimage__.arrayBufferToBinaryString(u)}function Tk(r){var e=Array.apply([],r);return e.unshift(0),e}function Px(r,e){var t=r.length,n=[];n[0]=1;for(var i=0;i<t;i+=1){var s=r[i-e]||0;n[i+1]=r[i]-s+256&255}return n}function Nx(r,e,t){var n=r.length,i=[];i[0]=2;for(var s=0;s<n;s+=1){var l=t&&t[s]||0;i[s+1]=r[s]-l+256&255}return i}function Bx(r,e,t){var n=r.length,i=[];i[0]=3;for(var s=0;s<n;s+=1){var l=r[s-e]||0,u=t&&t[s]||0;i[s+1]=r[s]+256-(l+u>>>1)&255}return i}function Lx(r,e,t){var n=r.length,i=[];i[0]=4;for(var s=0;s<n;s+=1){var l=Ak(r[s-e]||0,t&&t[s]||0,t&&t[s-e]||0);i[s+1]=r[s]-l+256&255}return i}function Ak(r,e,t){if(r===e&&e===t)return r;var n=Math.abs(e-t),i=Math.abs(r-t),s=Math.abs(r+e-t-t);return n<=i&&n<=s?r:i<=s?e:t}function Ck(r){var e=r.map(function(t){return t.reduce(function(n,i){return n+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function zg(r,e,t){var n=e*t,i=Math.floor(n/8),s=16-(n-8*i+t),l=(1<<t)-1;return uS(r,i)>>s&l}function Fx(r,e,t,n){var i=t*n,s=Math.floor(i/8),l=16-(i-8*s+n),u=(1<<n)-1,h=(e&u)<<l;(function(d,g,b){if(g+1<d.byteLength)d.setUint16(g,b,!1);else{var _=b>>8&255;d.setUint8(g,_)}})(r,s,uS(r,s)&~(u<<l)&65535|h)}function uS(r,e){return e+1<r.byteLength?r.getUint16(e,!1):r.getUint8(e)<<8}function kk(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,i=r[e++],s=i>>7,l=1<<1+(7&i);r[e++],r[e++];var u=null,h=null;s&&(u=e,h=l,e+=3*l);var d=!0,g=[],b=0,_=null,v=0,N=null;for(this.width=t,this.height=n;d&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,N=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((I=r[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=r[e++];b=r[e++]|r[e++]<<8,_=r[e++],1&E||(_=null),v=E>>2&7,e++;break;case 254:for(;;){if(!((I=r[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var L=r[e++]|r[e++]<<8,k=r[e++]|r[e++]<<8,O=r[e++]|r[e++]<<8,$=r[e++]|r[e++]<<8,F=r[e++],oe=F>>6&1,ce=1<<1+(7&F),D=u,C=h,S=!1;F>>7&&(S=!0,D=e,C=ce,e+=3*ce);var V=e;for(e++;;){var I;if(!((I=r[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}g.push({x:L,y:k,width:O,height:$,has_local_palette:S,palette_offset:D,palette_size:C,data_offset:V,data_length:e-V,transparent_index:_,interlaced:!!oe,delay:b,disposal:v});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return N},this.frameInfo=function(w){if(w<0||w>=g.length)throw new Error("Frame index out of range.");return g[w]},this.decodeAndBlitFrameBGRA=function(w,B){var M=this.frameInfo(w),q=M.width*M.height,se=new Uint8Array(q);zx(r,M.data_offset,se,q);var te=M.palette_offset,re=M.transparent_index;re===null&&(re=256);var xe=M.width,be=t-xe,Z=xe,W=4*(M.y*t+M.x),J=4*((M.y+M.height)*t+M.x),ie=W,he=4*be;M.interlaced===!0&&(he+=4*t*7);for(var ge=8,_e=0,fe=se.length;_e<fe;++_e){var ve=se[_e];if(Z===0&&(Z=xe,(ie+=he)>=J&&(he=4*be+4*t*(ge-1),ie=W+(xe+be)*(ge<<1),ge>>=1)),ve===re)ie+=4;else{var Ne=r[te+3*ve],Ue=r[te+3*ve+1],Xe=r[te+3*ve+2];B[ie++]=Xe,B[ie++]=Ue,B[ie++]=Ne,B[ie++]=255}--Z}},this.decodeAndBlitFrameRGBA=function(w,B){var M=this.frameInfo(w),q=M.width*M.height,se=new Uint8Array(q);zx(r,M.data_offset,se,q);var te=M.palette_offset,re=M.transparent_index;re===null&&(re=256);var xe=M.width,be=t-xe,Z=xe,W=4*(M.y*t+M.x),J=4*((M.y+M.height)*t+M.x),ie=W,he=4*be;M.interlaced===!0&&(he+=4*t*7);for(var ge=8,_e=0,fe=se.length;_e<fe;++_e){var ve=se[_e];if(Z===0&&(Z=xe,(ie+=he)>=J&&(he=4*be+4*t*(ge-1),ie=W+(xe+be)*(ge<<1),ge>>=1)),ve===re)ie+=4;else{var Ne=r[te+3*ve],Ue=r[te+3*ve+1],Xe=r[te+3*ve+2];B[ie++]=Ne,B[ie++]=Ue,B[ie++]=Xe,B[ie++]=255}--Z}}}function zx(r,e,t,n){for(var i=r[e++],s=1<<i,l=s+1,u=l+1,h=i+1,d=(1<<h)-1,g=0,b=0,_=0,v=r[e++],N=new Int32Array(4096),E=null;;){for(;g<16&&v!==0;)b|=r[e++]<<g,g+=8,v===1?v=r[e++]:--v;if(g<h)break;var L=b&d;if(b>>=h,g-=h,L!==s){if(L===l)break;for(var k=L<u?L:E,O=0,$=k;$>s;)$=N[$]>>8,++O;var F=$;if(_+O+(k!==L?1:0)>n)return void nn.log("Warning, gif stream longer than expected.");t[_++]=F;var oe=_+=O;for(k!==L&&(t[_++]=F),$=k;O--;)$=N[$],t[--oe]=255&$,$>>=8;E!==null&&u<4096&&(N[u++]=E<<8|F,u>=d+1&&h<12&&(++h,d=d<<1|1)),E=L}else u=l+1,d=(1<<(h=i+1))-1,E=null}return _!==n&&nn.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Vg(r){var e,t,n,i,s,l=Math.floor,u=new Array(64),h=new Array(64),d=new Array(64),g=new Array(64),b=new Array(65535),_=new Array(65535),v=new Array(64),N=new Array(64),E=[],L=0,k=7,O=new Array(64),$=new Array(64),F=new Array(64),oe=new Array(256),ce=new Array(2048),D=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],w=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(W,J){for(var ie=0,he=0,ge=new Array,_e=1;_e<=16;_e++){for(var fe=1;fe<=W[_e];fe++)ge[J[he]]=[],ge[J[he]][0]=ie,ge[J[he]][1]=_e,he++,ie++;ie*=2}return ge}function te(W){for(var J=W[0],ie=W[1]-1;ie>=0;)J&1<<ie&&(L|=1<<k),ie--,--k<0&&(L==255?(re(255),re(0)):re(L),k=7,L=0)}function re(W){E.push(W)}function xe(W){re(W>>8&255),re(255&W)}function be(W,J,ie,he,ge){for(var _e,fe=ge[0],ve=ge[240],Ne=(function(He,ot){var rt,Jt,_t,mr,zt,qt,vr,Mt,Tt,jt,pt=0;for(Tt=0;Tt<8;++Tt){rt=He[pt],Jt=He[pt+1],_t=He[pt+2],mr=He[pt+3],zt=He[pt+4],qt=He[pt+5],vr=He[pt+6];var Ir=rt+(Mt=He[pt+7]),ir=rt-Mt,ht=Jt+vr,Ht=Jt-vr,sr=_t+qt,It=_t-qt,tr=mr+zt,$t=mr-zt,Er=Ir+tr,zr=Ir-tr,Ut=ht+sr,Dt=ht-sr;He[pt]=Er+Ut,He[pt+4]=Er-Ut;var ar=.707106781*(Dt+zr);He[pt+2]=zr+ar,He[pt+6]=zr-ar;var Hi=.382683433*((Er=$t+It)-(Dt=Ht+ir)),zn=.5411961*Er+Hi,Po=1.306562965*Dt+Hi,Vn=.707106781*(Ut=It+Ht),Rt=ir+Vn,Pi=ir-Vn;He[pt+5]=Pi+zn,He[pt+3]=Pi-zn,He[pt+1]=Rt+Po,He[pt+7]=Rt-Po,pt+=8}for(pt=0,Tt=0;Tt<8;++Tt){rt=He[pt],Jt=He[pt+8],_t=He[pt+16],mr=He[pt+24],zt=He[pt+32],qt=He[pt+40],vr=He[pt+48];var pi=rt+(Mt=He[pt+56]),On=rt-Mt,Ni=Jt+vr,Cr=Jt-vr,Vr=_t+qt,dn=_t-qt,Qn=mr+zt,Qo=mr-zt,Gi=pi+Qn,Ki=pi-Qn,wn=Ni+Vr,Bi=Ni-Vr;He[pt]=Gi+wn,He[pt+32]=Gi-wn;var Li=.707106781*(Bi+Ki);He[pt+16]=Ki+Li,He[pt+48]=Ki-Li;var bs=.382683433*((Gi=Qo+dn)-(Bi=Cr+On)),go=.5411961*Gi+bs,yo=1.306562965*Bi+bs,ws=.707106781*(wn=dn+Cr),Xo=On+ws,No=On-ws;He[pt+40]=No+go,He[pt+24]=No-go,He[pt+8]=Xo+yo,He[pt+56]=Xo-yo,pt++}for(Tt=0;Tt<64;++Tt)jt=He[Tt]*ot[Tt],v[Tt]=jt>0?jt+.5|0:jt-.5|0;return v})(W,J),Ue=0;Ue<64;++Ue)N[D[Ue]]=Ne[Ue];var Xe=N[0]-ie;ie=N[0],Xe==0?te(he[0]):(te(he[_[_e=32767+Xe]]),te(b[_e]));for(var Ze=63;Ze>0&&N[Ze]==0;)Ze--;if(Ze==0)return te(fe),ie;for(var ze,de=1;de<=Ze;){for(var Ft=de;N[de]==0&&de<=Ze;)++de;var Et=de-Ft;if(Et>=16){ze=Et>>4;for(var wt=1;wt<=ze;++wt)te(ve);Et&=15}_e=32767+N[de],te(ge[(Et<<4)+_[_e]]),te(b[_e]),de++}return Ze!=63&&te(fe),ie}function Z(W){W=Math.min(Math.max(W,1),100),s!=W&&((function(J){for(var ie=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],he=0;he<64;he++){var ge=l((ie[he]*J+50)/100);ge=Math.min(Math.max(ge,1),255),u[D[he]]=ge}for(var _e=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],fe=0;fe<64;fe++){var ve=l((_e[fe]*J+50)/100);ve=Math.min(Math.max(ve,1),255),h[D[fe]]=ve}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ue=0,Xe=0;Xe<8;Xe++)for(var Ze=0;Ze<8;Ze++)d[Ue]=1/(u[D[Ue]]*Ne[Xe]*Ne[Ze]*8),g[Ue]=1/(h[D[Ue]]*Ne[Xe]*Ne[Ze]*8),Ue++})(W<50?Math.floor(5e3/W):Math.floor(200-2*W)),s=W)}this.encode=function(W,J){J&&Z(J),E=new Array,L=0,k=7,xe(65496),xe(65504),xe(16),re(74),re(70),re(73),re(70),re(0),re(1),re(1),re(0),xe(1),xe(1),re(0),re(0),(function(){xe(65499),xe(132),re(0);for(var Jt=0;Jt<64;Jt++)re(u[Jt]);re(1);for(var _t=0;_t<64;_t++)re(h[_t])})(),(function(Jt,_t){xe(65472),xe(17),re(8),xe(_t),xe(Jt),re(3),re(1),re(17),re(0),re(2),re(17),re(1),re(3),re(17),re(1)})(W.width,W.height),(function(){xe(65476),xe(418),re(0);for(var Jt=0;Jt<16;Jt++)re(C[Jt+1]);for(var _t=0;_t<=11;_t++)re(S[_t]);re(16);for(var mr=0;mr<16;mr++)re(V[mr+1]);for(var zt=0;zt<=161;zt++)re(I[zt]);re(1);for(var qt=0;qt<16;qt++)re(w[qt+1]);for(var vr=0;vr<=11;vr++)re(B[vr]);re(17);for(var Mt=0;Mt<16;Mt++)re(M[Mt+1]);for(var Tt=0;Tt<=161;Tt++)re(q[Tt])})(),xe(65498),xe(12),re(3),re(1),re(0),re(2),re(17),re(3),re(17),re(0),re(63),re(0);var ie=0,he=0,ge=0;L=0,k=7,this.encode.displayName="_encode_";for(var _e,fe,ve,Ne,Ue,Xe,Ze,ze,de,Ft=W.data,Et=W.width,wt=W.height,He=4*Et,ot=0;ot<wt;){for(_e=0;_e<He;){for(Ue=He*ot+_e,Ze=-1,ze=0,de=0;de<64;de++)Xe=Ue+(ze=de>>3)*He+(Ze=4*(7&de)),ot+ze>=wt&&(Xe-=He*(ot+1+ze-wt)),_e+Ze>=He&&(Xe-=_e+Ze-He+4),fe=Ft[Xe++],ve=Ft[Xe++],Ne=Ft[Xe++],O[de]=(ce[fe]+ce[ve+256|0]+ce[Ne+512|0]>>16)-128,$[de]=(ce[fe+768|0]+ce[ve+1024|0]+ce[Ne+1280|0]>>16)-128,F[de]=(ce[fe+1280|0]+ce[ve+1536|0]+ce[Ne+1792|0]>>16)-128;ie=be(O,d,ie,e,n),he=be($,g,he,t,i),ge=be(F,g,ge,t,i),_e+=32}ot+=8}if(k>=0){var rt=[];rt[1]=k+1,rt[0]=(1<<k+1)-1,te(rt)}return xe(65497),new Uint8Array(E)},r=r||50,(function(){for(var W=String.fromCharCode,J=0;J<256;J++)oe[J]=W(J)})(),e=se(C,S),t=se(w,B),n=se(V,I),i=se(M,q),(function(){for(var W=1,J=2,ie=1;ie<=15;ie++){for(var he=W;he<J;he++)_[32767+he]=ie,b[32767+he]=[],b[32767+he][1]=ie,b[32767+he][0]=he;for(var ge=-(J-1);ge<=-W;ge++)_[32767+ge]=ie,b[32767+ge]=[],b[32767+ge][1]=ie,b[32767+ge][0]=J-1+ge;W<<=1,J<<=1}})(),(function(){for(var W=0;W<256;W++)ce[W]=19595*W,ce[W+256|0]=38470*W,ce[W+512|0]=7471*W+32768,ce[W+768|0]=-11059*W,ce[W+1024|0]=-21709*W,ce[W+1280|0]=32768*W+8421375,ce[W+1536|0]=-27439*W,ce[W+1792|0]=-5329*W})(),Z(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ha(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Vx(r){function e(S){if(!S)throw Error("assert :P")}function t(S,V,I){for(var w=0;4>w;w++)if(S[V+w]!=I.charCodeAt(w))return!0;return!1}function n(S,V,I,w,B){for(var M=0;M<B;M++)S[V+M]=I[w+M]}function i(S,V,I,w){for(var B=0;B<w;B++)S[V+B]=I}function s(S){return new Int32Array(S)}function l(S,V){for(var I=[],w=0;w<S;w++)I.push(new V);return I}function u(S,V){var I=[];return(function w(B,M,q){for(var se=q[M],te=0;te<se&&(B.push(q.length>M+1?[]:new V),!(q.length<M+1));te++)w(B[te],M+1,q)})(I,0,S),I}var h=function(){var S=this;function V(p,x){for(var j=1<<x-1>>>0;p&j;)j>>>=1;return j?(p&j-1)+j:p}function I(p,x,j,z,G){e(!(z%j));do p[x+(z-=j)]=G;while(0<z)}function w(p,x,j,z,G){if(e(2328>=G),512>=G)var Y=s(512);else if((Y=s(G))==null)return 0;return(function(Q,X,ne,ae,we,Ee){var le,Te,Ie=X,Me=1<<ne,Pe=s(16),Ve=s(16);for(e(we!=0),e(ae!=null),e(Q!=null),e(0<ne),Te=0;Te<we;++Te){if(15<ae[Te])return 0;++Pe[ae[Te]]}if(Pe[0]==we)return 0;for(Ve[1]=0,le=1;15>le;++le){if(Pe[le]>1<<le)return 0;Ve[le+1]=Ve[le]+Pe[le]}for(Te=0;Te<we;++Te)le=ae[Te],0<ae[Te]&&(Ee[Ve[le]++]=Te);if(Ve[15]==1)return(ae=new B).g=0,ae.value=Ee[0],I(Q,Ie,1,Me,ae),Me;var Oe,$e=-1,qe=Me-1,St=0,ct=1,Xt=1,ft=1<<ne;for(Te=0,le=1,we=2;le<=ne;++le,we<<=1){if(ct+=Xt<<=1,0>(Xt-=Pe[le]))return 0;for(;0<Pe[le];--Pe[le])(ae=new B).g=le,ae.value=Ee[Te++],I(Q,Ie+St,we,ft,ae),St=V(St,le)}for(le=ne+1,we=2;15>=le;++le,we<<=1){if(ct+=Xt<<=1,0>(Xt-=Pe[le]))return 0;for(;0<Pe[le];--Pe[le]){if(ae=new B,(St&qe)!=$e){for(Ie+=ft,Oe=1<<($e=le)-ne;15>$e&&!(0>=(Oe-=Pe[$e]));)++$e,Oe<<=1;Me+=ft=1<<(Oe=$e-ne),Q[X+($e=St&qe)].g=Oe+ne,Q[X+$e].value=Ie-X-$e}ae.g=le-ne,ae.value=Ee[Te++],I(Q,Ie+(St>>ne),we,ft,ae),St=V(St,le)}}return ct!=2*Ve[15]-1?0:Me})(p,x,j,z,G,Y)}function B(){this.value=this.g=0}function M(){this.value=this.g=0}function q(){this.G=l(5,B),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Do,M)}function se(p,x,j,z){e(p!=null),e(x!=null),e(2147483648>z),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=x,p.pa=j,p.Jd=x,p.Yc=j+z,p.Zc=4<=z?j+z-4+1:j,fe(p)}function te(p,x){for(var j=0;0<x--;)j|=Ne(p,128)<<x;return j}function re(p,x){var j=te(p,x);return ve(p)?-j:j}function xe(p,x,j,z){var G,Y=0;for(e(p!=null),e(x!=null),e(4294967288>z),p.Sb=z,p.Ra=0,p.u=0,p.h=0,4<z&&(z=4),G=0;G<z;++G)Y+=x[j+G]<<8*G;p.Ra=Y,p.bb=z,p.oa=x,p.pa=j}function be(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<Ia-8>>>0,++p.bb,p.u-=8;he(p)&&(p.h=1,p.u=0)}function Z(p,x){if(e(0<=x),!p.h&&x<=To){var j=ie(p)&_o[x];return p.u+=x,be(p),j}return p.h=1,p.u=0}function W(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function J(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ie(p){return p.Ra>>>(p.u&Ia-1)>>>0}function he(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>Ia}function ge(p,x){p.u=x,p.h=he(p)}function _e(p){p.u>=Es&&(e(p.u>=Es),be(p))}function fe(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function ve(p){return te(p,1)}function Ne(p,x){var j=p.Ca;0>p.b&&fe(p);var z=p.b,G=j*x>>>8,Y=(p.I>>>z>G)+0;for(Y?(j-=G,p.I-=G+1<<z>>>0):j=G+1,z=j,G=0;256<=z;)G+=8,z>>=8;return z=7^G+Zs[z],p.b-=z,p.Ca=(j<<z)-1,Y}function Ue(p,x,j){p[x+0]=j>>24&255,p[x+1]=j>>16&255,p[x+2]=j>>8&255,p[x+3]=255&j}function Xe(p,x){return p[x+0]|p[x+1]<<8}function Ze(p,x){return Xe(p,x)|p[x+2]<<16}function ze(p,x){return Xe(p,x)|Xe(p,x+2)<<16}function de(p,x){var j=1<<x;return e(p!=null),e(0<x),p.X=s(j),p.X==null?0:(p.Mb=32-x,p.Xa=x,1)}function Ft(p,x){e(p!=null),e(x!=null),e(p.Xa==x.Xa),n(x.X,0,p.X,0,1<<x.Xa)}function Et(){this.X=[],this.Xa=this.Mb=0}function wt(p,x,j,z){e(j!=null),e(z!=null);var G=j[0],Y=z[0];return G==0&&(G=(p*Y+x/2)/x),Y==0&&(Y=(x*G+p/2)/p),0>=G||0>=Y?0:(j[0]=G,z[0]=Y,1)}function He(p,x){return p+(1<<x)-1>>>x}function ot(p,x){return((4278255360&p)+(4278255360&x)>>>0&4278255360)+((16711935&p)+(16711935&x)>>>0&16711935)>>>0}function rt(p,x){S[x]=function(j,z,G,Y,Q,X,ne){var ae;for(ae=0;ae<Q;++ae){var we=S[p](X[ne+ae-1],G,Y+ae);X[ne+ae]=ot(j[z+ae],we)}}}function Jt(){this.ud=this.hd=this.jd=0}function _t(p,x){return((4278124286&(p^x))>>>1)+(p&x)>>>0}function mr(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function zt(p,x){return mr(p+(p-x+.5>>1))}function qt(p,x,j){return Math.abs(x-j)-Math.abs(p-j)}function vr(p,x,j,z,G,Y,Q){for(z=Y[Q-1],j=0;j<G;++j)Y[Q+j]=z=ot(p[x+j],z)}function Mt(p,x,j,z,G){var Y;for(Y=0;Y<j;++Y){var Q=p[x+Y],X=Q>>8&255,ne=16711935&(ne=(ne=16711935&Q)+((X<<16)+X));z[G+Y]=(4278255360&Q)+ne>>>0}}function Tt(p,x){x.jd=255&p,x.hd=p>>8&255,x.ud=p>>16&255}function jt(p,x,j,z,G,Y){var Q;for(Q=0;Q<z;++Q){var X=x[j+Q],ne=X>>>8,ae=X,we=255&(we=(we=X>>>16)+((p.jd<<24>>24)*(ne<<24>>24)>>>5));ae=255&(ae=(ae+=(p.hd<<24>>24)*(ne<<24>>24)>>>5)+((p.ud<<24>>24)*(we<<24>>24)>>>5)),G[Y+Q]=(4278255360&X)+(we<<16)+ae}}function pt(p,x,j,z,G){S[x]=function(Y,Q,X,ne,ae,we,Ee,le,Te){for(ne=Ee;ne<le;++ne)for(Ee=0;Ee<Te;++Ee)ae[we++]=G(X[z(Y[Q++])])},S[p]=function(Y,Q,X,ne,ae,we,Ee){var le=8>>Y.b,Te=Y.Ea,Ie=Y.K[0],Me=Y.w;if(8>le)for(Y=(1<<Y.b)-1,Me=(1<<le)-1;Q<X;++Q){var Pe,Ve=0;for(Pe=0;Pe<Te;++Pe)Pe&Y||(Ve=z(ne[ae++])),we[Ee++]=G(Ie[Ve&Me]),Ve>>=le}else S["VP8LMapColor"+j](ne,ae,Ie,Me,we,Ee,Q,X,Te)}}function Ir(p,x,j,z,G){for(j=x+j;x<j;){var Y=p[x++];z[G++]=Y>>16&255,z[G++]=Y>>8&255,z[G++]=255&Y}}function ir(p,x,j,z,G){for(j=x+j;x<j;){var Y=p[x++];z[G++]=Y>>16&255,z[G++]=Y>>8&255,z[G++]=255&Y,z[G++]=Y>>24&255}}function ht(p,x,j,z,G){for(j=x+j;x<j;){var Y=(Q=p[x++])>>16&240|Q>>12&15,Q=240&Q|Q>>28&15;z[G++]=Y,z[G++]=Q}}function Ht(p,x,j,z,G){for(j=x+j;x<j;){var Y=(Q=p[x++])>>16&248|Q>>13&7,Q=Q>>5&224|Q>>3&31;z[G++]=Y,z[G++]=Q}}function sr(p,x,j,z,G){for(j=x+j;x<j;){var Y=p[x++];z[G++]=255&Y,z[G++]=Y>>8&255,z[G++]=Y>>16&255}}function It(p,x,j,z,G,Y){if(Y==0)for(j=x+j;x<j;)Ue(z,((Y=p[x++])[0]>>24|Y[1]>>8&65280|Y[2]<<8&16711680|Y[3]<<24)>>>0),G+=32;else n(z,G,p,x,j)}function tr(p,x){S[x][0]=S[p+"0"],S[x][1]=S[p+"1"],S[x][2]=S[p+"2"],S[x][3]=S[p+"3"],S[x][4]=S[p+"4"],S[x][5]=S[p+"5"],S[x][6]=S[p+"6"],S[x][7]=S[p+"7"],S[x][8]=S[p+"8"],S[x][9]=S[p+"9"],S[x][10]=S[p+"10"],S[x][11]=S[p+"11"],S[x][12]=S[p+"12"],S[x][13]=S[p+"13"],S[x][14]=S[p+"0"],S[x][15]=S[p+"0"]}function $t(p){return p==Ul||p==dl||p==$c||p==Uc}function Er(){this.eb=[],this.size=this.A=this.fb=0}function zr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ut(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Er,this.f.kb=new zr,this.sd=null}function Dt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ar(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Hi(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function zn(p,x){var j=p.T,z=x.ba.f.RGBA,G=z.eb,Y=z.fb+p.ka*z.A,Q=eo[x.ba.S],X=p.y,ne=p.O,ae=p.f,we=p.N,Ee=p.ea,le=p.W,Te=x.cc,Ie=x.dc,Me=x.Mc,Pe=x.Nc,Ve=p.ka,Oe=p.ka+p.T,$e=p.U,qe=$e+1>>1;for(Ve==0?Q(X,ne,null,null,ae,we,Ee,le,ae,we,Ee,le,G,Y,null,null,$e):(Q(x.ec,x.fc,X,ne,Te,Ie,Me,Pe,ae,we,Ee,le,G,Y-z.A,G,Y,$e),++j);Ve+2<Oe;Ve+=2)Te=ae,Ie=we,Me=Ee,Pe=le,we+=p.Rc,le+=p.Rc,Y+=2*z.A,Q(X,(ne+=2*p.fa)-p.fa,X,ne,Te,Ie,Me,Pe,ae,we,Ee,le,G,Y-z.A,G,Y,$e);return ne+=p.fa,p.j+Oe<p.o?(n(x.ec,x.fc,X,ne,$e),n(x.cc,x.dc,ae,we,qe),n(x.Mc,x.Nc,Ee,le,qe),j--):1&Oe||Q(X,ne,null,null,ae,we,Ee,le,ae,we,Ee,le,G,Y+z.A,null,null,$e),j}function Po(p,x,j){var z=p.F,G=[p.J];if(z!=null){var Y=p.U,Q=x.ba.S,X=Q==Wc||Q==$c;x=x.ba.f.RGBA;var ne=[0],ae=p.ka;ne[0]=p.T,p.Kb&&(ae==0?--ne[0]:(--ae,G[0]-=p.width),p.j+p.ka+p.T==p.o&&(ne[0]=p.o-p.j-ae));var we=x.eb;ae=x.fb+ae*x.A,p=Mc(z,G[0],p.width,Y,ne,we,ae+(X?0:3),x.A),e(j==ne),p&&$t(Q)&&ul(we,ae,X,Y,ne,x.A)}return 0}function Vn(p){var x=p.ma,j=x.ba.S,z=11>j,G=j==Pa||j==Dc||j==Wc||j==Wr||j==12||$t(j);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!zl(x.Oa,p,G?11:12))return 0;if(G&&$t(j)&&tt(),p.da)alert("todo:use_scaling");else{if(z){if(x.Ib=Hi,p.Kb){if(j=p.U+1>>1,x.memory=s(p.U+2*j),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+p.U,x.Mc=x.cc,x.Nc=x.dc+j,x.Ib=zn,tt()}}else alert("todo:EmitYUV");G&&(x.Jb=Po,z&&ke())}if(z&&!ci){for(p=0;256>p;++p)to[p]=89858*(p-128)+ls>>na,ro[p]=-22014*(p-128)+ls,Kl[p]=-45773*(p-128),ml[p]=113618*(p-128)+ls>>na;for(p=Pr;p<Lr;++p)x=76283*(p-16)+ls>>na,Qu[p-Pr]=hn(x,255),ep[p-Pr]=hn(x+8>>4,15);ci=1}return 1}function Rt(p){var x=p.ma,j=p.U,z=p.T;return e(!(1&p.ka)),0>=j||0>=z?0:(j=x.Ib(p,x),x.Jb!=null&&x.Jb(p,x,j),x.Dc+=j,1)}function Pi(p){p.ma.memory=null}function pi(p,x,j,z){return Z(p,8)!=47?0:(x[0]=Z(p,14)+1,j[0]=Z(p,14)+1,z[0]=Z(p,1),Z(p,3)!=0?0:!p.h)}function On(p,x){if(4>p)return p+1;var j=p-2>>1;return(2+(1&p)<<j)+Z(x,j)+1}function Ni(p,x){return 120<x?x-120:1<=(j=((j=I0[x-1])>>4)*p+(8-(15&j)))?j:1;var j}function Cr(p,x,j){var z=ie(j),G=p[x+=255&z].g-8;return 0<G&&(ge(j,j.u+8),z=ie(j),x+=p[x].value,x+=z&(1<<G)-1),ge(j,j.u+p[x].g),p[x].value}function Vr(p,x,j){return j.g+=p.g,j.value+=p.value<<x>>>0,e(8>=j.g),p.g}function dn(p,x,j){var z=p.xc;return e((x=z==0?0:p.vc[p.md*(j>>z)+(x>>z)])<p.Wb),p.Ya[x]}function Qn(p,x,j,z){var G=p.ab,Y=p.c*x,Q=p.C;x=Q+x;var X=j,ne=z;for(z=p.Ta,j=p.Ua;0<G--;){var ae=p.gc[G],we=Q,Ee=x,le=X,Te=ne,Ie=(ne=z,X=j,ae.Ea);switch(e(we<Ee),e(Ee<=ae.nc),ae.hc){case 2:_n(le,Te,(Ee-we)*Ie,ne,X);break;case 0:var Me=we,Pe=Ee,Ve=ne,Oe=X,$e=(ft=ae).Ea;Me==0&&(ea(le,Te,null,null,1,Ve,Oe),vr(le,Te+1,0,0,$e-1,Ve,Oe+1),Te+=$e,Oe+=$e,++Me);for(var qe=1<<ft.b,St=qe-1,ct=He($e,ft.b),Xt=ft.K,ft=ft.w+(Me>>ft.b)*ct;Me<Pe;){var hr=Xt,mn=ft,rr=1;for(js(le,Te,Ve,Oe-$e,1,Ve,Oe);rr<$e;){var ut=(rr&~St)+qe;ut>$e&&(ut=$e),(0,sl[hr[mn++]>>8&15])(le,Te+ +rr,Ve,Oe+rr-$e,ut-rr,Ve,Oe+rr),rr=ut}Te+=$e,Oe+=$e,++Me&St||(ft+=ct)}Ee!=ae.nc&&n(ne,X-Ie,ne,X+(Ee-we-1)*Ie,Ie);break;case 1:for(Ie=le,Pe=Te,$e=(le=ae.Ea)-(Oe=le&~(Ve=(Te=1<<ae.b)-1)),Me=He(le,ae.b),qe=ae.K,ae=ae.w+(we>>ae.b)*Me;we<Ee;){for(St=qe,ct=ae,Xt=new Jt,ft=Pe+Oe,hr=Pe+le;Pe<ft;)Tt(St[ct++],Xt),Ol(Xt,Ie,Pe,Te,ne,X),Pe+=Te,X+=Te;Pe<hr&&(Tt(St[ct++],Xt),Ol(Xt,Ie,Pe,$e,ne,X),Pe+=$e,X+=$e),++we&Ve||(ae+=Me)}break;case 3:if(le==ne&&Te==X&&0<ae.b){for(Pe=ne,le=Ie=X+(Ee-we)*Ie-(Oe=(Ee-we)*He(ae.Ea,ae.b)),Te=ne,Ve=X,Me=[],Oe=($e=Oe)-1;0<=Oe;--Oe)Me[Oe]=Te[Ve+Oe];for(Oe=$e-1;0<=Oe;--Oe)Pe[le+Oe]=Me[Oe];il(ae,we,Ee,ne,Ie,ne,X)}else il(ae,we,Ee,le,Te,ne,X)}X=z,ne=j}ne!=j&&n(z,j,X,ne,Y)}function Qo(p,x){var j=p.V,z=p.Ba+p.c*p.C,G=x-p.C;if(e(x<=p.l.o),e(16>=G),0<G){var Y=p.l,Q=p.Ta,X=p.Ua,ne=Y.width;if(Qn(p,G,j,z),G=X=[X],e((j=p.C)<(z=x)),e(Y.v<Y.va),z>Y.o&&(z=Y.o),j<Y.j){var ae=Y.j-j;j=Y.j,G[0]+=ae*ne}if(j>=z?j=0:(G[0]+=4*Y.v,Y.ka=j-Y.j,Y.U=Y.va-Y.v,Y.T=z-j,j=1),j){if(X=X[0],11>(j=p.ca).S){var we=j.f.RGBA,Ee=(z=j.S,G=Y.U,Y=Y.T,ae=we.eb,we.A),le=Y;for(we=we.fb+p.Ma*we.A;0<le--;){var Te=Q,Ie=X,Me=G,Pe=ae,Ve=we;switch(z){case Gu:Ml(Te,Ie,Me,Pe,Ve);break;case Pa:ta(Te,Ie,Me,Pe,Ve);break;case Ul:ta(Te,Ie,Me,Pe,Ve),ul(Pe,Ve,0,Me,1,0);break;case Jf:al(Te,Ie,Me,Pe,Ve);break;case Dc:It(Te,Ie,Me,Pe,Ve,1);break;case dl:It(Te,Ie,Me,Pe,Ve,1),ul(Pe,Ve,0,Me,1,0);break;case Wc:It(Te,Ie,Me,Pe,Ve,0);break;case $c:It(Te,Ie,Me,Pe,Ve,0),ul(Pe,Ve,1,Me,1,0);break;case Wr:Ea(Te,Ie,Me,Pe,Ve);break;case Uc:Ea(Te,Ie,Me,Pe,Ve),dh(Pe,Ve,Me,1,0);break;case Ku:ja(Te,Ie,Me,Pe,Ve);break;default:e(0)}X+=ne,we+=Ee}p.Ma+=Y}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=j.height)}}p.C=x,e(p.C<=p.i)}function Gi(p){var x;if(0<p.ua)return 0;for(x=0;x<p.Wb;++x){var j=p.Ya[x].G,z=p.Ya[x].H;if(0<j[1][z[1]+0].g||0<j[2][z[2]+0].g||0<j[3][z[3]+0].g)return 0}return 1}function Ki(p,x,j,z,G,Y){if(p.Z!=0){var Q=p.qd,X=p.rd;for(e(_i[p.Z]!=null);x<j;++x)_i[p.Z](Q,X,z,G,z,G,Y),Q=z,X=G,G+=Y;p.qd=Q,p.rd=X}}function wn(p,x){var j=p.l.ma,z=j.Z==0||j.Z==1?p.l.j:p.C;if(z=p.C<z?z:p.C,e(x<=p.l.o),x>z){var G=p.l.width,Y=j.ca,Q=j.tb+G*z,X=p.V,ne=p.Ba+p.c*z,ae=p.gc;e(p.ab==1),e(ae[0].hc==3),ss(ae[0],z,x,X,ne,Y,Q),Ki(j,z,x,Y,Q,G)}p.C=p.Ma=x}function Bi(p,x,j,z,G,Y,Q){var X=p.$/z,ne=p.$%z,ae=p.m,we=p.s,Ee=j+p.$,le=Ee;G=j+z*G;var Te=j+z*Y,Ie=280+we.ua,Me=p.Pb?X:16777216,Pe=0<we.ua?we.Wa:null,Ve=we.wc,Oe=Ee<Te?dn(we,ne,X):null;e(p.C<Y),e(Te<=G);var $e=!1;e:for(;;){for(;$e||Ee<Te;){var qe=0;if(X>=Me){var St=Ee-j;e((Me=p).Pb),Me.wd=Me.m,Me.xd=St,0<Me.s.ua&&Ft(Me.s.Wa,Me.s.vb),Me=X+Yu}if(ne&Ve||(Oe=dn(we,ne,X)),e(Oe!=null),Oe.Qb&&(x[Ee]=Oe.qb,$e=!0),!$e)if(_e(ae),Oe.jc){qe=ae,St=x;var ct=Ee,Xt=Oe.pd[ie(qe)&Do-1];e(Oe.jc),256>Xt.g?(ge(qe,qe.u+Xt.g),St[ct]=Xt.value,qe=0):(ge(qe,qe.u+Xt.g-256),e(256<=Xt.value),qe=Xt.value),qe==0&&($e=!0)}else qe=Cr(Oe.G[0],Oe.H[0],ae);if(ae.h)break;if($e||256>qe){if(!$e)if(Oe.nd)x[Ee]=(Oe.qb|qe<<8)>>>0;else{if(_e(ae),$e=Cr(Oe.G[1],Oe.H[1],ae),_e(ae),St=Cr(Oe.G[2],Oe.H[2],ae),ct=Cr(Oe.G[3],Oe.H[3],ae),ae.h)break;x[Ee]=(ct<<24|$e<<16|qe<<8|St)>>>0}if($e=!1,++Ee,++ne>=z&&(ne=0,++X,Q!=null&&X<=Y&&!(X%16)&&Q(p,X),Pe!=null))for(;le<Ee;)qe=x[le++],Pe.X[(506832829*qe&4294967295)>>>Pe.Mb]=qe}else if(280>qe){if(qe=On(qe-256,ae),St=Cr(Oe.G[4],Oe.H[4],ae),_e(ae),St=Ni(z,St=On(St,ae)),ae.h)break;if(Ee-j<St||G-Ee<qe)break e;for(ct=0;ct<qe;++ct)x[Ee+ct]=x[Ee+ct-St];for(Ee+=qe,ne+=qe;ne>=z;)ne-=z,++X,Q!=null&&X<=Y&&!(X%16)&&Q(p,X);if(e(Ee<=G),ne&Ve&&(Oe=dn(we,ne,X)),Pe!=null)for(;le<Ee;)qe=x[le++],Pe.X[(506832829*qe&4294967295)>>>Pe.Mb]=qe}else{if(!(qe<Ie))break e;for($e=qe-280,e(Pe!=null);le<Ee;)qe=x[le++],Pe.X[(506832829*qe&4294967295)>>>Pe.Mb]=qe;qe=Ee,e(!($e>>>(St=Pe).Xa)),x[qe]=St.X[$e],$e=!0}$e||e(ae.h==he(ae))}if(p.Pb&&ae.h&&Ee<G)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&Ft(p.s.vb,p.s.Wa);else{if(ae.h)break e;Q!=null&&Q(p,X>Y?Y:X),p.a=0,p.$=Ee-j}return 1}return p.a=3,0}function Li(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var x=p.Wa;x!=null&&(x.X=null),p.vb=null,e(p!=null)}function bs(){var p=new mt;return p==null?null:(p.a=0,p.xb=Hl,tr("Predictor","VP8LPredictors"),tr("Predictor","VP8LPredictors_C"),tr("PredictorAdd","VP8LPredictorsAdd"),tr("PredictorAdd","VP8LPredictorsAdd_C"),_n=Mt,Ol=jt,Ml=Ir,ta=ir,Ea=ht,ja=Ht,al=sr,S.VP8LMapColor32b=Rs,S.VP8LMapColor8b=ol,p)}function go(p,x,j,z,G){var Y=1,Q=[p],X=[x],ne=z.m,ae=z.s,we=null,Ee=0;e:for(;;){if(j)for(;Y&&Z(ne,1);){var le=Q,Te=X,Ie=z,Me=1,Pe=Ie.m,Ve=Ie.gc[Ie.ab],Oe=Z(Pe,2);if(Ie.Oc&1<<Oe)Y=0;else{switch(Ie.Oc|=1<<Oe,Ve.hc=Oe,Ve.Ea=le[0],Ve.nc=Te[0],Ve.K=[null],++Ie.ab,e(4>=Ie.ab),Oe){case 0:case 1:Ve.b=Z(Pe,3)+2,Me=go(He(Ve.Ea,Ve.b),He(Ve.nc,Ve.b),0,Ie,Ve.K),Ve.K=Ve.K[0];break;case 3:var $e,qe=Z(Pe,8)+1,St=16<qe?0:4<qe?1:2<qe?2:3;if(le[0]=He(Ve.Ea,St),Ve.b=St,$e=Me=go(qe,1,0,Ie,Ve.K)){var ct,Xt=qe,ft=Ve,hr=1<<(8>>ft.b),mn=s(hr);if(mn==null)$e=0;else{var rr=ft.K[0],ut=ft.w;for(mn[0]=ft.K[0][0],ct=1;ct<1*Xt;++ct)mn[ct]=ot(rr[ut+ct],mn[ct-1]);for(;ct<4*hr;++ct)mn[ct]=0;ft.K[0]=null,ft.K[0]=mn,$e=1}}Me=$e;break;case 2:break;default:e(0)}Y=Me}}if(Q=Q[0],X=X[0],Y&&Z(ne,1)&&!(Y=1<=(Ee=Z(ne,4))&&11>=Ee)){z.a=3;break e}var it;if(it=Y)t:{var Tn,Gt,cr,Zr=z,ei=Q,Rn=X,ln=Ee,Un=j,ti=Zr.m,on=Zr.s,pr=[null],_r=1,sn=0,Tr=Qf[ln];r:for(;;){if(Un&&Z(ti,1)){var gn=Z(ti,3)+2,yn=He(ei,gn),$r=He(Rn,gn),Ti=yn*$r;if(!go(yn,$r,0,Zr,pr))break r;for(pr=pr[0],on.xc=gn,Tn=0;Tn<Ti;++Tn){var Fr=pr[Tn]>>8&65535;pr[Tn]=Fr,Fr>=_r&&(_r=Fr+1)}}if(ti.h)break r;for(Gt=0;5>Gt;++Gt){var Ur=hl[Gt];!Gt&&0<ln&&(Ur+=1<<ln),sn<Ur&&(sn=Ur)}var Pn=l(_r*Tr,B),ui=_r,no=l(ui,q);if(no==null)var An=null;else e(65536>=ui),An=no;var Cn=s(sn);if(An==null||Cn==null||Pn==null){Zr.a=1;break r}var Ai=Pn;for(Tn=cr=0;Tn<_r;++Tn){var qr=An[Tn],Ci=qr.G,Uo=qr.H,cs=0,ri=1,kn=0;for(Gt=0;5>Gt;++Gt){Ur=hl[Gt],Ci[Gt]=Ai,Uo[Gt]=cr,!Gt&&0<ln&&(Ur+=1<<ln);i:{var La,oa=Ur,Jl=Zr,Bs=Cn,rp=Ai,_h=cr,rn=0,us=Jl.m,Th=Z(us,1);if(i(Bs,0,0,oa),Th){var Ah=Z(us,1)+1,Xu=Z(us,1),Zu=Z(us,Xu==0?1:8);Bs[Zu]=1,Ah==2&&(Bs[Zu=Z(us,8)]=1);var Ls=1}else{var an=s(19),Nn=Z(us,4)+4;if(19<Nn){Jl.a=3;var In=0;break i}for(La=0;La<Nn;++La)an[k0[La]]=Z(us,3);var Yl=void 0,sa=void 0,Ql=Jl,N0=an,qn=oa,ed=Bs,Jc=0,Fs=Ql.m,ds=8,Ao=l(128,B);n:for(;w(Ao,0,7,N0,19);){if(Z(Fs,1)){var Yc=2+2*Z(Fs,3);if((Yl=2+Z(Fs,Yc))>qn)break n}else Yl=qn;for(sa=0;sa<qn&&Yl--;){_e(Fs);var td=Ao[0+(127&ie(Fs))];ge(Fs,Fs.u+td.g);var Fa=td.value;if(16>Fa)ed[sa++]=Fa,Fa!=0&&(ds=Fa);else{var np=Fa==16,Ch=Fa-16,ip=Ju[Ch],kh=Z(Fs,qc[Ch])+ip;if(sa+kh>qn)break n;for(var op=np?ds:0;0<kh--;)ed[sa++]=op}}Jc=1;break n}Jc||(Ql.a=3),Ls=Jc}(Ls=Ls&&!us.h)&&(rn=w(rp,_h,8,Bs,oa)),Ls&&rn!=0?In=rn:(Jl.a=3,In=0)}if(In==0)break r;if(ri&&Yf[Gt]==1&&(ri=Ai[cr].g==0),cs+=Ai[cr].g,cr+=In,3>=Gt){var Xl,rd=Cn[0];for(Xl=1;Xl<Ur;++Xl)Cn[Xl]>rd&&(rd=Cn[Xl]);kn+=rd}}if(qr.nd=ri,qr.Qb=0,ri&&(qr.qb=(Ci[3][Uo[3]+0].value<<24|Ci[1][Uo[1]+0].value<<16|Ci[2][Uo[2]+0].value)>>>0,cs==0&&256>Ci[0][Uo[0]+0].value&&(qr.Qb=1,qr.qb+=Ci[0][Uo[0]+0].value<<8)),qr.jc=!qr.Qb&&6>kn,qr.jc){var Qc,Co=qr;for(Qc=0;Qc<Do;++Qc){var aa=Qc,hs=Co.pd[aa],yl=Co.G[0][Co.H[0]+aa];256<=yl.value?(hs.g=yl.g+256,hs.value=yl.value):(hs.g=0,hs.value=0,aa>>=Vr(yl,8,hs),aa>>=Vr(Co.G[1][Co.H[1]+aa],16,hs),aa>>=Vr(Co.G[2][Co.H[2]+aa],0,hs),Vr(Co.G[3][Co.H[3]+aa],24,hs))}}}on.vc=pr,on.Wb=_r,on.Ya=An,on.yc=Pn,it=1;break t}it=0}if(!(Y=it)){z.a=3;break e}if(0<Ee){if(ae.ua=1<<Ee,!de(ae.Wa,Ee)){z.a=1,Y=0;break e}}else ae.ua=0;var nd=z,id=Q,sp=X,od=nd.s,sd=od.xc;if(nd.c=id,nd.i=sp,od.md=He(id,sd),od.wc=sd==0?-1:(1<<sd)-1,j){z.xb=Ns;break e}if((we=s(Q*X))==null){z.a=1,Y=0;break e}Y=(Y=Bi(z,we,0,Q,X,X,null))&&!ne.h;break e}return Y?(G!=null?G[0]=we:(e(we==null),e(j)),z.$=0,j||Li(ae)):Li(ae),Y}function yo(p,x){var j=p.c*p.i,z=j+x+16*x;return e(p.c<=x),p.V=s(z),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+j+x,1)}function ws(p,x){var j=p.C,z=x-j,G=p.V,Y=p.Ba+p.c*j;for(e(x<=p.l.o);0<z;){var Q=16<z?16:z,X=p.l.ma,ne=p.l.width,ae=ne*Q,we=X.ca,Ee=X.tb+ne*j,le=p.Ta,Te=p.Ua;Qn(p,Q,G,Y),hh(le,Te,we,Ee,ae),Ki(X,j,j+Q,we,Ee,ne),z-=Q,G+=Q*p.c,j+=Q}e(j==x),p.C=p.Ma=x}function Xo(){this.ub=this.yd=this.td=this.Rb=0}function No(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Zo(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function jr(){this.Yb=(function(){var p=[];return(function x(j,z,G){for(var Y=G[z],Q=0;Q<Y&&(j.push(G.length>z+1?[]:0),!(G.length<z+1));Q++)x(j[Q],z+1,G)})(p,0,[3,11]),p})()}function Ll(){this.jb=s(3),this.Wc=u([4,8],jr),this.Xc=u([4,17],jr)}function qs(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function mi(){this.ld=this.La=this.dd=this.tc=0}function es(){this.Na=this.la=0}function wa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ss(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function _s(){this.uc=this.M=this.Nb=0,this.wa=Array(new mi),this.Y=0,this.ya=Array(new Ss),this.aa=0,this.l=new Xn}function gi(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Qa(){this.cb=this.a=0,this.sc="",this.m=new W,this.Od=new Xo,this.Kc=new No,this.ed=new qs,this.Qa=new Zo,this.Ic=this.$c=this.Aa=0,this.D=new _s,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,W),this.ia=0,this.pb=l(4,wa),this.Pa=new Ll,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new gi),this.Hd=0,this.rb=Array(new es),this.sb=0,this.wa=Array(new mi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ss),this.L=this.aa=0,this.gd=u([4,2],mi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Xn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Bo(){var p=new Qa;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,fl||(fl=yi)),p}function wr(p,x,j){return p.a==0&&(p.a=x,p.sc=j,p.cb=0),0}function Ts(p,x,j){return 3<=j&&p[x+0]==157&&p[x+1]==1&&p[x+2]==42}function xo(p,x){if(p==null)return 0;if(p.a=0,p.sc="OK",x==null)return wr(p,2,"null VP8Io passed to VP8GetHeaders()");var j=x.data,z=x.w,G=x.ha;if(4>G)return wr(p,7,"Truncated header.");var Y=j[z+0]|j[z+1]<<8|j[z+2]<<16,Q=p.Od;if(Q.Rb=!(1&Y),Q.td=Y>>1&7,Q.yd=Y>>4&1,Q.ub=Y>>5,3<Q.td)return wr(p,3,"Incorrect keyframe parameters.");if(!Q.yd)return wr(p,4,"Frame not displayable.");z+=3,G-=3;var X=p.Kc;if(Q.Rb){if(7>G)return wr(p,7,"cannot parse picture header");if(!Ts(j,z,G))return wr(p,3,"Bad code word");X.c=16383&(j[z+4]<<8|j[z+3]),X.Td=j[z+4]>>6,X.i=16383&(j[z+6]<<8|j[z+5]),X.Ud=j[z+6]>>6,z+=7,G-=7,p.za=X.c+15>>4,p.Ub=X.i+15>>4,x.width=X.c,x.height=X.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,i((Y=p.Pa).jb,0,255,Y.jb.length),e((Y=p.Qa)!=null),Y.Cb=0,Y.Bb=0,Y.Fb=1,i(Y.Zb,0,0,Y.Zb.length),i(Y.Lb,0,0,Y.Lb)}if(Q.ub>G)return wr(p,7,"bad partition length");se(Y=p.m,j,z,Q.ub),z+=Q.ub,G-=Q.ub,Q.Rb&&(X.Ld=ve(Y),X.Kd=ve(Y)),X=p.Qa;var ne,ae=p.Pa;if(e(Y!=null),e(X!=null),X.Cb=ve(Y),X.Cb){if(X.Bb=ve(Y),ve(Y)){for(X.Fb=ve(Y),ne=0;4>ne;++ne)X.Zb[ne]=ve(Y)?re(Y,7):0;for(ne=0;4>ne;++ne)X.Lb[ne]=ve(Y)?re(Y,6):0}if(X.Bb)for(ne=0;3>ne;++ne)ae.jb[ne]=ve(Y)?te(Y,8):255}else X.Bb=0;if(Y.Ka)return wr(p,3,"cannot parse segment header");if((X=p.ed).zd=ve(Y),X.Tb=te(Y,6),X.wb=te(Y,3),X.Pc=ve(Y),X.Pc&&ve(Y)){for(ae=0;4>ae;++ae)ve(Y)&&(X.vd[ae]=re(Y,6));for(ae=0;4>ae;++ae)ve(Y)&&(X.od[ae]=re(Y,6))}if(p.L=X.Tb==0?0:X.zd?1:2,Y.Ka)return wr(p,3,"cannot parse filter header");var we=G;if(G=ne=z,z=ne+we,X=we,p.Xb=(1<<te(p.m,2))-1,we<3*(ae=p.Xb))j=7;else{for(ne+=3*ae,X-=3*ae,we=0;we<ae;++we){var Ee=j[G+0]|j[G+1]<<8|j[G+2]<<16;Ee>X&&(Ee=X),se(p.Jc[+we],j,ne,Ee),ne+=Ee,X-=Ee,G+=3}se(p.Jc[+ae],j,ne,X),j=ne<z?0:5}if(j!=0)return wr(p,j,"cannot parse partitions");for(j=te(ne=p.m,7),G=ve(ne)?re(ne,4):0,z=ve(ne)?re(ne,4):0,X=ve(ne)?re(ne,4):0,ae=ve(ne)?re(ne,4):0,ne=ve(ne)?re(ne,4):0,we=p.Qa,Ee=0;4>Ee;++Ee){if(we.Cb){var le=we.Zb[Ee];we.Fb||(le+=j)}else{if(0<Ee){p.pb[Ee]=p.pb[0];continue}le=j}var Te=p.pb[Ee];Te.Sc[0]=ql[hn(le+G,127)],Te.Sc[1]=Hc[hn(le+0,127)],Te.Eb[0]=2*ql[hn(le+z,127)],Te.Eb[1]=101581*Hc[hn(le+X,127)]>>16,8>Te.Eb[1]&&(Te.Eb[1]=8),Te.Qc[0]=ql[hn(le+ae,117)],Te.Qc[1]=Hc[hn(le+ne,127)],Te.lc=le+ne}if(!Q.Rb)return wr(p,4,"Not a key frame.");for(ve(Y),Q=p.Pa,j=0;4>j;++j){for(G=0;8>G;++G)for(z=0;3>z;++z)for(X=0;11>X;++X)ae=Ne(Y,j0[j][G][z][X])?te(Y,8):Zf[j][G][z][X],Q.Wc[j][G].Yb[z][X]=ae;for(G=0;17>G;++G)Q.Xc[j][G]=Q.Wc[j][bh[G]]}return p.kc=ve(Y),p.kc&&(p.Bd=te(Y,8)),p.cb=1}function yi(p,x,j,z,G,Y,Q){var X=x[G].Yb[j];for(j=0;16>G;++G){if(!Ne(p,X[j+0]))return G;for(;!Ne(p,X[j+1]);)if(X=x[++G].Yb[0],j=0,G==16)return 16;var ne=x[G+1].Yb;if(Ne(p,X[j+2])){var ae=p,we=0;if(Ne(ae,(le=X)[(Ee=j)+3]))if(Ne(ae,le[Ee+6])){for(X=0,Ee=2*(we=Ne(ae,le[Ee+8]))+(le=Ne(ae,le[Ee+9+we])),we=0,le=xh[Ee];le[X];++X)we+=we+Ne(ae,le[X]);we+=3+(8<<Ee)}else Ne(ae,le[Ee+7])?(we=7+2*Ne(ae,165),we+=Ne(ae,145)):we=5+Ne(ae,159);else we=Ne(ae,le[Ee+4])?3+Ne(ae,le[Ee+5]):2;X=ne[2]}else we=1,X=ne[1];ne=Q+vh[G],0>(ae=p).b&&fe(ae);var Ee,le=ae.b,Te=(Ee=ae.Ca>>1)-(ae.I>>le)>>31;--ae.b,ae.Ca+=Te,ae.Ca|=1,ae.I-=(Ee+1&Te)<<le,Y[ne]=((we^Te)-Te)*z[(0<G)+0]}return 16}function lr(p){var x=p.rb[p.sb-1];x.la=0,x.Na=0,i(p.zc,0,0,p.zc.length),p.ja=0}function Mn(p,x,j,z,G){G=p[x+j+32*z]+(G>>3),p[x+j+32*z]=-256&G?0>G?0:255:G}function vo(p,x,j,z,G,Y){Mn(p,x,0,j,z+G),Mn(p,x,1,j,z+Y),Mn(p,x,2,j,z-Y),Mn(p,x,3,j,z-G)}function Or(p){return(20091*p>>16)+p}function Hs(p,x,j,z){var G,Y=0,Q=s(16);for(G=0;4>G;++G){var X=p[x+0]+p[x+8],ne=p[x+0]-p[x+8],ae=(35468*p[x+4]>>16)-Or(p[x+12]),we=Or(p[x+4])+(35468*p[x+12]>>16);Q[Y+0]=X+we,Q[Y+1]=ne+ae,Q[Y+2]=ne-ae,Q[Y+3]=X-we,Y+=4,x++}for(G=Y=0;4>G;++G)X=(p=Q[Y+0]+4)+Q[Y+8],ne=p-Q[Y+8],ae=(35468*Q[Y+4]>>16)-Or(Q[Y+12]),Mn(j,z,0,0,X+(we=Or(Q[Y+4])+(35468*Q[Y+12]>>16))),Mn(j,z,1,0,ne+ae),Mn(j,z,2,0,ne-ae),Mn(j,z,3,0,X-we),Y++,z+=32}function Xa(p,x,j,z){var G=p[x+0]+4,Y=35468*p[x+4]>>16,Q=Or(p[x+4]),X=35468*p[x+1]>>16;vo(j,z,0,G+Q,p=Or(p[x+1]),X),vo(j,z,1,G+Y,p,X),vo(j,z,2,G-Y,p,X),vo(j,z,3,G-Q,p,X)}function Za(p,x,j,z,G){Hs(p,x,j,z),G&&Hs(p,x+16,j,z+4)}function Gs(p,x,j,z){ll(p,x+0,j,z,1),ll(p,x+32,j,z+128,1)}function Lo(p,x,j,z){var G;for(p=p[x+0]+4,G=0;4>G;++G)for(x=0;4>x;++x)Mn(j,z,x,G,p)}function Sa(p,x,j,z){p[x+0]&&Sr(p,x+0,j,z),p[x+16]&&Sr(p,x+16,j,z+4),p[x+32]&&Sr(p,x+32,j,z+128),p[x+48]&&Sr(p,x+48,j,z+128+4)}function or(p,x,j,z){var G,Y=s(16);for(G=0;4>G;++G){var Q=p[x+0+G]+p[x+12+G],X=p[x+4+G]+p[x+8+G],ne=p[x+4+G]-p[x+8+G],ae=p[x+0+G]-p[x+12+G];Y[0+G]=Q+X,Y[8+G]=Q-X,Y[4+G]=ae+ne,Y[12+G]=ae-ne}for(G=0;4>G;++G)Q=(p=Y[0+4*G]+3)+Y[3+4*G],X=Y[1+4*G]+Y[2+4*G],ne=Y[1+4*G]-Y[2+4*G],ae=p-Y[3+4*G],j[z+0]=Q+X>>3,j[z+16]=ae+ne>>3,j[z+32]=Q-X>>3,j[z+48]=ae-ne>>3,z+=64}function ai(p,x,j){var z,G=x-32,Y=Oi,Q=255-p[G-1];for(z=0;z<j;++z){var X,ne=Y,ae=Q+p[x-1];for(X=0;X<j;++X)p[x+X]=ne[ae+p[G+X]];x+=32}}function Ks(p,x){ai(p,x,4)}function _a(p,x){ai(p,x,8)}function el(p,x){ai(p,x,16)}function tl(p,x){var j;for(j=0;16>j;++j)n(p,x+32*j,p,x-32,16)}function Js(p,x){var j;for(j=16;0<j;--j)i(p,x,p[x-1],16),x+=32}function xi(p,x,j){var z;for(z=0;16>z;++z)i(x,j+32*z,p,16)}function bo(p,x){var j,z=16;for(j=0;16>j;++j)z+=p[x-1+32*j]+p[x+j-32];xi(z>>5,p,x)}function Fo(p,x){var j,z=8;for(j=0;16>j;++j)z+=p[x-1+32*j];xi(z>>4,p,x)}function vi(p,x){var j,z=8;for(j=0;16>j;++j)z+=p[x+j-32];xi(z>>4,p,x)}function Sn(p,x){xi(128,p,x)}function Bt(p,x,j){return p+2*x+j+2>>2}function ts(p,x){var j,z=x-32;for(z=new Uint8Array([Bt(p[z-1],p[z+0],p[z+1]),Bt(p[z+0],p[z+1],p[z+2]),Bt(p[z+1],p[z+2],p[z+3]),Bt(p[z+2],p[z+3],p[z+4])]),j=0;4>j;++j)n(p,x+32*j,z,0,z.length)}function Fi(p,x){var j=p[x-1],z=p[x-1+32],G=p[x-1+64],Y=p[x-1+96];Ue(p,x+0,16843009*Bt(p[x-1-32],j,z)),Ue(p,x+32,16843009*Bt(j,z,G)),Ue(p,x+64,16843009*Bt(z,G,Y)),Ue(p,x+96,16843009*Bt(G,Y,Y))}function Fl(p,x){var j,z=4;for(j=0;4>j;++j)z+=p[x+j-32]+p[x-1+32*j];for(z>>=3,j=0;4>j;++j)i(p,x+32*j,z,4)}function As(p,x){var j=p[x-1+0],z=p[x-1+32],G=p[x-1+64],Y=p[x-1-32],Q=p[x+0-32],X=p[x+1-32],ne=p[x+2-32],ae=p[x+3-32];p[x+0+96]=Bt(z,G,p[x-1+96]),p[x+1+96]=p[x+0+64]=Bt(j,z,G),p[x+2+96]=p[x+1+64]=p[x+0+32]=Bt(Y,j,z),p[x+3+96]=p[x+2+64]=p[x+1+32]=p[x+0+0]=Bt(Q,Y,j),p[x+3+64]=p[x+2+32]=p[x+1+0]=Bt(X,Q,Y),p[x+3+32]=p[x+2+0]=Bt(ne,X,Q),p[x+3+0]=Bt(ae,ne,X)}function Dn(p,x){var j=p[x+1-32],z=p[x+2-32],G=p[x+3-32],Y=p[x+4-32],Q=p[x+5-32],X=p[x+6-32],ne=p[x+7-32];p[x+0+0]=Bt(p[x+0-32],j,z),p[x+1+0]=p[x+0+32]=Bt(j,z,G),p[x+2+0]=p[x+1+32]=p[x+0+64]=Bt(z,G,Y),p[x+3+0]=p[x+2+32]=p[x+1+64]=p[x+0+96]=Bt(G,Y,Q),p[x+3+32]=p[x+2+64]=p[x+1+96]=Bt(Y,Q,X),p[x+3+64]=p[x+2+96]=Bt(Q,X,ne),p[x+3+96]=Bt(X,ne,ne)}function zo(p,x){var j=p[x-1+0],z=p[x-1+32],G=p[x-1+64],Y=p[x-1-32],Q=p[x+0-32],X=p[x+1-32],ne=p[x+2-32],ae=p[x+3-32];p[x+0+0]=p[x+1+64]=Y+Q+1>>1,p[x+1+0]=p[x+2+64]=Q+X+1>>1,p[x+2+0]=p[x+3+64]=X+ne+1>>1,p[x+3+0]=ne+ae+1>>1,p[x+0+96]=Bt(G,z,j),p[x+0+64]=Bt(z,j,Y),p[x+0+32]=p[x+1+96]=Bt(j,Y,Q),p[x+1+32]=p[x+2+96]=Bt(Y,Q,X),p[x+2+32]=p[x+3+96]=Bt(Q,X,ne),p[x+3+32]=Bt(X,ne,ae)}function Ta(p,x){var j=p[x+0-32],z=p[x+1-32],G=p[x+2-32],Y=p[x+3-32],Q=p[x+4-32],X=p[x+5-32],ne=p[x+6-32],ae=p[x+7-32];p[x+0+0]=j+z+1>>1,p[x+1+0]=p[x+0+64]=z+G+1>>1,p[x+2+0]=p[x+1+64]=G+Y+1>>1,p[x+3+0]=p[x+2+64]=Y+Q+1>>1,p[x+0+32]=Bt(j,z,G),p[x+1+32]=p[x+0+96]=Bt(z,G,Y),p[x+2+32]=p[x+1+96]=Bt(G,Y,Q),p[x+3+32]=p[x+2+96]=Bt(Y,Q,X),p[x+3+64]=Bt(Q,X,ne),p[x+3+96]=Bt(X,ne,ae)}function Rr(p,x){var j=p[x-1+0],z=p[x-1+32],G=p[x-1+64],Y=p[x-1+96];p[x+0+0]=j+z+1>>1,p[x+2+0]=p[x+0+32]=z+G+1>>1,p[x+2+32]=p[x+0+64]=G+Y+1>>1,p[x+1+0]=Bt(j,z,G),p[x+3+0]=p[x+1+32]=Bt(z,G,Y),p[x+3+32]=p[x+1+64]=Bt(G,Y,Y),p[x+3+64]=p[x+2+64]=p[x+0+96]=p[x+1+96]=p[x+2+96]=p[x+3+96]=Y}function Ys(p,x){var j=p[x-1+0],z=p[x-1+32],G=p[x-1+64],Y=p[x-1+96],Q=p[x-1-32],X=p[x+0-32],ne=p[x+1-32],ae=p[x+2-32];p[x+0+0]=p[x+2+32]=j+Q+1>>1,p[x+0+32]=p[x+2+64]=z+j+1>>1,p[x+0+64]=p[x+2+96]=G+z+1>>1,p[x+0+96]=Y+G+1>>1,p[x+3+0]=Bt(X,ne,ae),p[x+2+0]=Bt(Q,X,ne),p[x+1+0]=p[x+3+32]=Bt(j,Q,X),p[x+1+32]=p[x+3+64]=Bt(z,j,Q),p[x+1+64]=p[x+3+96]=Bt(G,z,j),p[x+1+96]=Bt(Y,G,z)}function rl(p,x){var j;for(j=0;8>j;++j)n(p,x+32*j,p,x-32,8)}function Ji(p,x){var j;for(j=0;8>j;++j)i(p,x,p[x-1],8),x+=32}function wo(p,x,j){var z;for(z=0;8>z;++z)i(x,j+32*z,p,8)}function Yi(p,x){var j,z=8;for(j=0;8>j;++j)z+=p[x+j-32]+p[x-1+32*j];wo(z>>4,p,x)}function rs(p,x){var j,z=4;for(j=0;8>j;++j)z+=p[x+j-32];wo(z>>3,p,x)}function Qi(p,x){var j,z=4;for(j=0;8>j;++j)z+=p[x-1+32*j];wo(z>>3,p,x)}function Aa(p,x){wo(128,p,x)}function ns(p,x,j){var z=p[x-j],G=p[x+0],Y=3*(G-z)+Ps[1020+p[x-2*j]-p[x+j]],Q=$l[112+(Y+4>>3)];p[x-j]=Oi[255+z+$l[112+(Y+3>>3)]],p[x+0]=Oi[255+G-Q]}function bi(p,x,j,z){var G=p[x+0],Y=p[x+j];return Wo[255+p[x-2*j]-p[x-j]]>z||Wo[255+Y-G]>z}function Cs(p,x,j,z){return 4*Wo[255+p[x-j]-p[x+0]]+Wo[255+p[x-2*j]-p[x+j]]<=z}function is(p,x,j,z,G){var Y=p[x-3*j],Q=p[x-2*j],X=p[x-j],ne=p[x+0],ae=p[x+j],we=p[x+2*j],Ee=p[x+3*j];return 4*Wo[255+X-ne]+Wo[255+Q-ae]>z?0:Wo[255+p[x-4*j]-Y]<=G&&Wo[255+Y-Q]<=G&&Wo[255+Q-X]<=G&&Wo[255+Ee-we]<=G&&Wo[255+we-ae]<=G&&Wo[255+ae-ne]<=G}function li(p,x,j,z){var G=2*z+1;for(z=0;16>z;++z)Cs(p,x+z,j,G)&&ns(p,x+z,j)}function Vo(p,x,j,z){var G=2*z+1;for(z=0;16>z;++z)Cs(p,x+z*j,1,G)&&ns(p,x+z*j,1)}function Oo(p,x,j,z){var G;for(G=3;0<G;--G)li(p,x+=4*j,j,z)}function nl(p,x,j,z){var G;for(G=3;0<G;--G)Vo(p,x+=4,j,z)}function zi(p,x,j,z,G,Y,Q,X){for(Y=2*Y+1;0<G--;){if(is(p,x,j,Y,Q))if(bi(p,x,j,X))ns(p,x,j);else{var ne=p,ae=x,we=j,Ee=ne[ae-2*we],le=ne[ae-we],Te=ne[ae+0],Ie=ne[ae+we],Me=ne[ae+2*we],Pe=27*(Oe=Ps[1020+3*(Te-le)+Ps[1020+Ee-Ie]])+63>>7,Ve=18*Oe+63>>7,Oe=9*Oe+63>>7;ne[ae-3*we]=Oi[255+ne[ae-3*we]+Oe],ne[ae-2*we]=Oi[255+Ee+Ve],ne[ae-we]=Oi[255+le+Pe],ne[ae+0]=Oi[255+Te-Pe],ne[ae+we]=Oi[255+Ie-Ve],ne[ae+2*we]=Oi[255+Me-Oe]}x+=z}}function Zn(p,x,j,z,G,Y,Q,X){for(Y=2*Y+1;0<G--;){if(is(p,x,j,Y,Q))if(bi(p,x,j,X))ns(p,x,j);else{var ne=p,ae=x,we=j,Ee=ne[ae-we],le=ne[ae+0],Te=ne[ae+we],Ie=$l[112+(4+(Me=3*(le-Ee))>>3)],Me=$l[112+(Me+3>>3)],Pe=Ie+1>>1;ne[ae-2*we]=Oi[255+ne[ae-2*we]+Pe],ne[ae-we]=Oi[255+Ee+Me],ne[ae+0]=Oi[255+le-Ie],ne[ae+we]=Oi[255+Te-Pe]}x+=z}}function Ca(p,x,j,z,G,Y){zi(p,x,j,1,16,z,G,Y)}function Wn(p,x,j,z,G,Y){zi(p,x,1,j,16,z,G,Y)}function wi(p,x,j,z,G,Y){var Q;for(Q=3;0<Q;--Q)Zn(p,x+=4*j,j,1,16,z,G,Y)}function ks(p,x,j,z,G,Y){var Q;for(Q=3;0<Q;--Q)Zn(p,x+=4,1,j,16,z,G,Y)}function T(p,x,j,z,G,Y,Q,X){zi(p,x,G,1,8,Y,Q,X),zi(j,z,G,1,8,Y,Q,X)}function H(p,x,j,z,G,Y,Q,X){zi(p,x,1,G,8,Y,Q,X),zi(j,z,1,G,8,Y,Q,X)}function ue(p,x,j,z,G,Y,Q,X){Zn(p,x+4*G,G,1,8,Y,Q,X),Zn(j,z+4*G,G,1,8,Y,Q,X)}function ye(p,x,j,z,G,Y,Q,X){Zn(p,x+4,1,G,8,Y,Q,X),Zn(j,z+4,1,G,8,Y,Q,X)}function Ce(){this.ba=new Ut,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ar,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function De(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ge(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function lt(){this.ua=0,this.Wa=new Et,this.vb=new Et,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new B}function mt(){this.xb=this.a=0,this.l=new Xn,this.ca=new Ut,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new J,this.Pb=0,this.wd=new J,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new lt,this.ab=0,this.gc=l(4,Ge),this.Oc=0}function Lt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Xn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function vt(p,x,j,z,G,Y,Q){for(p=p==null?0:p[x+0],x=0;x<Q;++x)G[Y+x]=p+j[z+x]&255,p=G[Y+x]}function gr(p,x,j,z,G,Y,Q){var X;if(p==null)vt(null,null,j,z,G,Y,Q);else for(X=0;X<Q;++X)G[Y+X]=p[x+X]+j[z+X]&255}function Qr(p,x,j,z,G,Y,Q){if(p==null)vt(null,null,j,z,G,Y,Q);else{var X,ne=p[x+0],ae=ne,we=ne;for(X=0;X<Q;++X)ae=we+(ne=p[x+X])-ae,we=j[z+X]+(-256&ae?0>ae?0:255:ae)&255,ae=ne,G[Y+X]=we}}function Mr(p,x,j,z){var G=x.width,Y=x.o;if(e(p!=null&&x!=null),0>j||0>=z||j+z>Y)return null;if(!p.Cc){if(p.ga==null){var Q;if(p.ga=new Lt,(Q=p.ga==null)||(Q=x.width*x.o,e(p.Gb.length==0),p.Gb=s(Q),p.Uc=0,p.Gb==null?Q=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,Q=1),Q=!Q),!Q){Q=p.ga;var X=p.Fa,ne=p.P,ae=p.qc,we=p.mb,Ee=p.nb,le=ne+1,Te=ae-1,Ie=Q.l;if(e(X!=null&&we!=null&&x!=null),_i[0]=null,_i[1]=vt,_i[2]=gr,_i[3]=Qr,Q.ca=we,Q.tb=Ee,Q.c=x.width,Q.i=x.height,e(0<Q.c&&0<Q.i),1>=ae)x=0;else if(Q.$a=3&X[ne+0],Q.Z=X[ne+0]>>2&3,Q.Lc=X[ne+0]>>4&3,ne=X[ne+0]>>6&3,0>Q.$a||1<Q.$a||4<=Q.Z||1<Q.Lc||ne)x=0;else if(Ie.put=Rt,Ie.ac=Vn,Ie.bc=Pi,Ie.ma=Q,Ie.width=x.width,Ie.height=x.height,Ie.Da=x.Da,Ie.v=x.v,Ie.va=x.va,Ie.j=x.j,Ie.o=x.o,Q.$a)e:{e(Q.$a==1),x=bs();t:for(;;){if(x==null){x=0;break e}if(e(Q!=null),Q.mc=x,x.c=Q.c,x.i=Q.i,x.l=Q.l,x.l.ma=Q,x.l.width=Q.c,x.l.height=Q.i,x.a=0,xe(x.m,X,le,Te),!go(Q.c,Q.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&Gi(x.s)?(Q.ic=1,X=x.c*x.i,x.Ta=null,x.Ua=0,x.V=s(X),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(Q.ic=0,x=yo(x,Q.c)),!x))break t;x=1;break e}Q.mc=null,x=0}else x=Te>=Q.c*Q.i;Q=!x}if(Q)return null;p.ga.Lc!=1?p.Ga=0:z=Y-j}e(p.ga!=null),e(j+z<=Y);e:{if(x=(X=p.ga).c,Y=X.l.o,X.$a==0){if(le=p.rc,Te=p.Vc,Ie=p.Fa,ne=p.P+1+j*x,ae=p.mb,we=p.nb+j*x,e(ne<=p.P+p.qc),X.Z!=0)for(e(_i[X.Z]!=null),Q=0;Q<z;++Q)_i[X.Z](le,Te,Ie,ne,ae,we,x),le=ae,Te=we,we+=x,ne+=x;else for(Q=0;Q<z;++Q)n(ae,we,Ie,ne,x),le=ae,Te=we,we+=x,ne+=x;p.rc=le,p.Vc=Te}else{if(e(X.mc!=null),x=j+z,e((Q=X.mc)!=null),e(x<=Q.i),Q.C>=x)x=1;else if(X.ic||ke(),X.ic){X=Q.V,le=Q.Ba,Te=Q.c;var Me=Q.i,Pe=(Ie=1,ne=Q.$/Te,ae=Q.$%Te,we=Q.m,Ee=Q.s,Q.$),Ve=Te*Me,Oe=Te*x,$e=Ee.wc,qe=Pe<Oe?dn(Ee,ae,ne):null;e(Pe<=Ve),e(x<=Me),e(Gi(Ee));t:for(;;){for(;!we.h&&Pe<Oe;){if(ae&$e||(qe=dn(Ee,ae,ne)),e(qe!=null),_e(we),256>(Me=Cr(qe.G[0],qe.H[0],we)))X[le+Pe]=Me,++Pe,++ae>=Te&&(ae=0,++ne<=x&&!(ne%16)&&wn(Q,ne));else{if(!(280>Me)){Ie=0;break t}Me=On(Me-256,we);var St,ct=Cr(qe.G[4],qe.H[4],we);if(_e(we),!(Pe>=(ct=Ni(Te,ct=On(ct,we)))&&Ve-Pe>=Me)){Ie=0;break t}for(St=0;St<Me;++St)X[le+Pe+St]=X[le+Pe+St-ct];for(Pe+=Me,ae+=Me;ae>=Te;)ae-=Te,++ne<=x&&!(ne%16)&&wn(Q,ne);Pe<Oe&&ae&$e&&(qe=dn(Ee,ae,ne))}e(we.h==he(we))}wn(Q,ne>x?x:ne);break t}!Ie||we.h&&Pe<Ve?(Ie=0,Q.a=we.h?5:3):Q.$=Pe,x=Ie}else x=Bi(Q,Q.V,Q.Ba,Q.c,Q.i,x,ws);if(!x){z=0;break e}}j+z>=Y&&(p.Cc=1),z=1}if(!z)return null;if(p.Cc&&((z=p.ga)!=null&&(z.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+j*G}function m(p,x,j,z,G,Y){for(;0<G--;){var Q,X=p,ne=x+(j?1:0),ae=p,we=x+(j?0:3);for(Q=0;Q<z;++Q){var Ee=ae[we+4*Q];Ee!=255&&(Ee*=32897,X[ne+4*Q+0]=X[ne+4*Q+0]*Ee>>23,X[ne+4*Q+1]=X[ne+4*Q+1]*Ee>>23,X[ne+4*Q+2]=X[ne+4*Q+2]*Ee>>23)}x+=Y}}function R(p,x,j,z,G){for(;0<z--;){var Y;for(Y=0;Y<j;++Y){var Q=p[x+2*Y+0],X=15&(ae=p[x+2*Y+1]),ne=4369*X,ae=(240&ae|ae>>4)*ne>>16;p[x+2*Y+0]=(240&Q|Q>>4)*ne>>16&240|(15&Q|Q<<4)*ne>>16>>4&15,p[x+2*Y+1]=240&ae|X}x+=G}}function U(p,x,j,z,G,Y,Q,X){var ne,ae,we=255;for(ae=0;ae<G;++ae){for(ne=0;ne<z;++ne){var Ee=p[x+ne];Y[Q+4*ne]=Ee,we&=Ee}x+=j,Q+=X}return we!=255}function ee(p,x,j,z,G){var Y;for(Y=0;Y<G;++Y)j[z+Y]=p[x+Y]>>8}function ke(){ul=m,dh=R,Mc=U,hh=ee}function Be(p,x,j){S[p]=function(z,G,Y,Q,X,ne,ae,we,Ee,le,Te,Ie,Me,Pe,Ve,Oe,$e){var qe,St=$e-1>>1,ct=X[ne+0]|ae[we+0]<<16,Xt=Ee[le+0]|Te[Ie+0]<<16;e(z!=null);var ft=3*ct+Xt+131074>>2;for(x(z[G+0],255&ft,ft>>16,Me,Pe),Y!=null&&(ft=3*Xt+ct+131074>>2,x(Y[Q+0],255&ft,ft>>16,Ve,Oe)),qe=1;qe<=St;++qe){var hr=X[ne+qe]|ae[we+qe]<<16,mn=Ee[le+qe]|Te[Ie+qe]<<16,rr=ct+hr+Xt+mn+524296,ut=rr+2*(hr+Xt)>>3;ft=ut+ct>>1,ct=(rr=rr+2*(ct+mn)>>3)+hr>>1,x(z[G+2*qe-1],255&ft,ft>>16,Me,Pe+(2*qe-1)*j),x(z[G+2*qe-0],255&ct,ct>>16,Me,Pe+(2*qe-0)*j),Y!=null&&(ft=rr+Xt>>1,ct=ut+mn>>1,x(Y[Q+2*qe-1],255&ft,ft>>16,Ve,Oe+(2*qe-1)*j),x(Y[Q+2*qe+0],255&ct,ct>>16,Ve,Oe+(2*qe+0)*j)),ct=hr,Xt=mn}1&$e||(ft=3*ct+Xt+131074>>2,x(z[G+$e-1],255&ft,ft>>16,Me,Pe+($e-1)*j),Y!=null&&(ft=3*Xt+ct+131074>>2,x(Y[Q+$e-1],255&ft,ft>>16,Ve,Oe+($e-1)*j)))}}function tt(){eo[Gu]=R0,eo[Pa]=Na,eo[Jf]=P0,eo[Dc]=Gl,eo[Wc]=pl,eo[Wr]=Gc,eo[Ku]=wh,eo[Ul]=Na,eo[dl]=Gl,eo[$c]=pl,eo[Uc]=Gc}function Wt(p){return p&-16384?0>p?0:255:p>>Ba}function Dr(p,x){return Wt((19077*p>>8)+(26149*x>>8)-14234)}function dr(p,x,j){return Wt((19077*p>>8)-(6419*x>>8)-(13320*j>>8)+8708)}function Xr(p,x){return Wt((19077*p>>8)+(33050*x>>8)-17685)}function $n(p,x,j,z,G){z[G+0]=Dr(p,j),z[G+1]=dr(p,x,j),z[G+2]=Xr(p,x)}function Vi(p,x,j,z,G){z[G+0]=Xr(p,x),z[G+1]=dr(p,x,j),z[G+2]=Dr(p,j)}function tn(p,x,j,z,G){var Y=dr(p,x,j);x=Y<<3&224|Xr(p,x)>>3,z[G+0]=248&Dr(p,j)|Y>>5,z[G+1]=x}function Si(p,x,j,z,G){var Y=240&Xr(p,x)|15;z[G+0]=240&Dr(p,j)|dr(p,x,j)>>4,z[G+1]=Y}function Mo(p,x,j,z,G){z[G+0]=255,$n(p,x,j,z,G+1)}function Qs(p,x,j,z,G){Vi(p,x,j,z,G),z[G+3]=255}function zc(p,x,j,z,G){$n(p,x,j,z,G),z[G+3]=255}function hn(p,x){return 0>p?0:p>x?x:p}function os(p,x,j){S[p]=function(z,G,Y,Q,X,ne,ae,we,Ee){for(var le=we+(-2&Ee)*j;we!=le;)x(z[G+0],Y[Q+0],X[ne+0],ae,we),x(z[G+1],Y[Q+0],X[ne+0],ae,we+j),G+=2,++Q,++ne,we+=2*j;1&Ee&&x(z[G+0],Y[Q+0],X[ne+0],ae,we)}}function Is(p,x,j){return j==0?p==0?x==0?6:5:x==0?4:0:j}function Uu(p,x,j,z,G){switch(p>>>30){case 3:ll(x,j,z,G,0);break;case 2:fn(x,j,z,G);break;case 1:Sr(x,j,z,G)}}function So(p,x){var j,z,G=x.M,Y=x.Nb,Q=p.oc,X=p.pc+40,ne=p.oc,ae=p.pc+584,we=p.oc,Ee=p.pc+600;for(j=0;16>j;++j)Q[X+32*j-1]=129;for(j=0;8>j;++j)ne[ae+32*j-1]=129,we[Ee+32*j-1]=129;for(0<G?Q[X-1-32]=ne[ae-1-32]=we[Ee-1-32]=129:(i(Q,X-32-1,127,21),i(ne,ae-32-1,127,9),i(we,Ee-32-1,127,9)),z=0;z<p.za;++z){var le=x.ya[x.aa+z];if(0<z){for(j=-1;16>j;++j)n(Q,X+32*j-4,Q,X+32*j+12,4);for(j=-1;8>j;++j)n(ne,ae+32*j-4,ne,ae+32*j+4,4),n(we,Ee+32*j-4,we,Ee+32*j+4,4)}var Te=p.Gd,Ie=p.Hd+z,Me=le.ad,Pe=le.Hc;if(0<G&&(n(Q,X-32,Te[Ie].y,0,16),n(ne,ae-32,Te[Ie].f,0,8),n(we,Ee-32,Te[Ie].ea,0,8)),le.Za){var Ve=Q,Oe=X-32+16;for(0<G&&(z>=p.za-1?i(Ve,Oe,Te[Ie].y[15],4):n(Ve,Oe,Te[Ie+1].y,0,4)),j=0;4>j;j++)Ve[Oe+128+j]=Ve[Oe+256+j]=Ve[Oe+384+j]=Ve[Oe+0+j];for(j=0;16>j;++j,Pe<<=2)Ve=Q,Oe=X+Sh[j],$o[le.Ob[j]](Ve,Oe),Uu(Pe,Me,16*+j,Ve,Oe)}else if(Ve=Is(z,G,le.Ob[0]),Mi[Ve](Q,X),Pe!=0)for(j=0;16>j;++j,Pe<<=2)Uu(Pe,Me,16*+j,Q,X+Sh[j]);for(j=le.Gc,Ve=Is(z,G,le.Dd),Zi[Ve](ne,ae),Zi[Ve](we,Ee),Pe=Me,Ve=ne,Oe=ae,255&(le=0|j)&&(170&le?Xi(Pe,256,Ve,Oe):Br(Pe,256,Ve,Oe)),le=we,Pe=Ee,255&(j>>=8)&&(170&j?Xi(Me,320,le,Pe):Br(Me,320,le,Pe)),G<p.Ub-1&&(n(Te[Ie].y,0,Q,X+480,16),n(Te[Ie].f,0,ne,ae+224,8),n(Te[Ie].ea,0,we,Ee+224,8)),j=8*Y*p.B,Te=p.sa,Ie=p.ta+16*z+16*Y*p.R,Me=p.qa,le=p.ra+8*z+j,Pe=p.Ha,Ve=p.Ia+8*z+j,j=0;16>j;++j)n(Te,Ie+j*p.R,Q,X+32*j,16);for(j=0;8>j;++j)n(Me,le+j*p.B,ne,ae+32*j,8),n(Pe,Ve+j*p.B,we,Ee+32*j,8)}}function ka(p,x,j,z,G,Y,Q,X,ne){var ae=[0],we=[0],Ee=0,le=ne!=null?ne.kd:0,Te=ne??new De;if(p==null||12>j)return 7;Te.data=p,Te.w=x,Te.ha=j,x=[x],j=[j],Te.gb=[Te.gb];e:{var Ie=x,Me=j,Pe=Te.gb;if(e(p!=null),e(Me!=null),e(Pe!=null),Pe[0]=0,12<=Me[0]&&!t(p,Ie[0],"RIFF")){if(t(p,Ie[0]+8,"WEBP")){Pe=3;break e}var Ve=ze(p,Ie[0]+4);if(12>Ve||4294967286<Ve){Pe=3;break e}if(le&&Ve>Me[0]-8){Pe=7;break e}Pe[0]=Ve,Ie[0]+=12,Me[0]-=12}Pe=0}if(Pe!=0)return Pe;for(Ve=0<Te.gb[0],j=j[0];;){e:{var Oe=p;Me=x,Pe=j;var $e=ae,qe=we,St=Ie=[0];if((ft=Ee=[Ee])[0]=0,8>Pe[0])Pe=7;else{if(!t(Oe,Me[0],"VP8X")){if(ze(Oe,Me[0]+4)!=10){Pe=3;break e}if(18>Pe[0]){Pe=7;break e}var ct=ze(Oe,Me[0]+8),Xt=1+Ze(Oe,Me[0]+12);if(2147483648<=Xt*(Oe=1+Ze(Oe,Me[0]+15))){Pe=3;break e}St!=null&&(St[0]=ct),$e!=null&&($e[0]=Xt),qe!=null&&(qe[0]=Oe),Me[0]+=18,Pe[0]-=18,ft[0]=1}Pe=0}}if(Ee=Ee[0],Ie=Ie[0],Pe!=0)return Pe;if(Me=!!(2&Ie),!Ve&&Ee)return 3;if(Y!=null&&(Y[0]=!!(16&Ie)),Q!=null&&(Q[0]=Me),X!=null&&(X[0]=0),Q=ae[0],Ie=we[0],Ee&&Me&&ne==null){Pe=0;break}if(4>j){Pe=7;break}if(Ve&&Ee||!Ve&&!Ee&&!t(p,x[0],"ALPH")){j=[j],Te.na=[Te.na],Te.P=[Te.P],Te.Sa=[Te.Sa];e:{ct=p,Pe=x,Ve=j;var ft=Te.gb;$e=Te.na,qe=Te.P,St=Te.Sa,Xt=22,e(ct!=null),e(Ve!=null),Oe=Pe[0];var hr=Ve[0];for(e($e!=null),e(St!=null),$e[0]=null,qe[0]=null,St[0]=0;;){if(Pe[0]=Oe,Ve[0]=hr,8>hr){Pe=7;break e}var mn=ze(ct,Oe+4);if(4294967286<mn){Pe=3;break e}var rr=8+mn+1&-2;if(Xt+=rr,0<ft&&Xt>ft){Pe=3;break e}if(!t(ct,Oe,"VP8 ")||!t(ct,Oe,"VP8L")){Pe=0;break e}if(hr[0]<rr){Pe=7;break e}t(ct,Oe,"ALPH")||($e[0]=ct,qe[0]=Oe+8,St[0]=mn),Oe+=rr,hr-=rr}}if(j=j[0],Te.na=Te.na[0],Te.P=Te.P[0],Te.Sa=Te.Sa[0],Pe!=0)break}j=[j],Te.Ja=[Te.Ja],Te.xa=[Te.xa];e:if(ft=p,Pe=x,Ve=j,$e=Te.gb[0],qe=Te.Ja,St=Te.xa,ct=Pe[0],Oe=!t(ft,ct,"VP8 "),Xt=!t(ft,ct,"VP8L"),e(ft!=null),e(Ve!=null),e(qe!=null),e(St!=null),8>Ve[0])Pe=7;else{if(Oe||Xt){if(ft=ze(ft,ct+4),12<=$e&&ft>$e-12){Pe=3;break e}if(le&&ft>Ve[0]-8){Pe=7;break e}qe[0]=ft,Pe[0]+=8,Ve[0]-=8,St[0]=Xt}else St[0]=5<=Ve[0]&&ft[ct+0]==47&&!(ft[ct+4]>>5),qe[0]=Ve[0];Pe=0}if(j=j[0],Te.Ja=Te.Ja[0],Te.xa=Te.xa[0],x=x[0],Pe!=0)break;if(4294967286<Te.Ja)return 3;if(X==null||Me||(X[0]=Te.xa?2:1),Q=[Q],Ie=[Ie],Te.xa){if(5>j){Pe=7;break}X=Q,le=Ie,Me=Y,p==null||5>j?p=0:5<=j&&p[x+0]==47&&!(p[x+4]>>5)?(Ve=[0],ft=[0],$e=[0],xe(qe=new J,p,x,j),pi(qe,Ve,ft,$e)?(X!=null&&(X[0]=Ve[0]),le!=null&&(le[0]=ft[0]),Me!=null&&(Me[0]=$e[0]),p=1):p=0):p=0}else{if(10>j){Pe=7;break}X=Ie,p==null||10>j||!Ts(p,x+3,j-3)?p=0:(le=p[x+0]|p[x+1]<<8|p[x+2]<<16,Me=16383&(p[x+7]<<8|p[x+6]),p=16383&(p[x+9]<<8|p[x+8]),1&le||3<(le>>1&7)||!(le>>4&1)||le>>5>=Te.Ja||!Me||!p?p=0:(Q&&(Q[0]=Me),X&&(X[0]=p),p=1))}if(!p||(Q=Q[0],Ie=Ie[0],Ee&&(ae[0]!=Q||we[0]!=Ie)))return 3;ne!=null&&(ne[0]=Te,ne.offset=x-ne.w,e(4294967286>x-ne.w),e(ne.offset==ne.ha-j));break}return Pe==0||Pe==7&&Ee&&ne==null?(Y!=null&&(Y[0]|=Te.na!=null&&0<Te.na.length),z!=null&&(z[0]=Q),G!=null&&(G[0]=Ie),0):Pe}function zl(p,x,j){var z=x.width,G=x.height,Y=0,Q=0,X=z,ne=G;if(x.Da=p!=null&&0<p.Da,x.Da&&(X=p.cd,ne=p.bd,Y=p.v,Q=p.j,11>j||(Y&=-2,Q&=-2),0>Y||0>Q||0>=X||0>=ne||Y+X>z||Q+ne>G))return 0;if(x.v=Y,x.j=Q,x.va=Y+X,x.o=Q+ne,x.U=X,x.T=ne,x.da=p!=null&&0<p.da,x.da){if(!wt(X,ne,j=[p.ib],Y=[p.hb]))return 0;x.ib=j[0],x.hb=Y[0]}return x.ob=p!=null&&p.ob,x.Kb=p==null||!p.Sd,x.da&&(x.ob=x.ib<3*z/4&&x.hb<3*G/4,x.Kb=0),1}function Vl(p){if(p==null)return 2;if(11>p.S){var x=p.f.RGBA;x.fb+=(p.height-1)*x.A,x.A=-x.A}else x=p.f.kb,p=p.height,x.O+=(p-1)*x.fa,x.fa=-x.fa,x.N+=(p-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(p-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(p-1)*x.lb,x.lb=-x.lb);return 0}function Xs(p,x,j,z){if(z==null||0>=p||0>=x)return 2;if(j!=null){if(j.Da){var G=j.cd,Y=j.bd,Q=-2&j.v,X=-2&j.j;if(0>Q||0>X||0>=G||0>=Y||Q+G>p||X+Y>x)return 2;p=G,x=Y}if(j.da){if(!wt(p,x,G=[j.ib],Y=[j.hb]))return 2;p=G[0],x=Y[0]}}z.width=p,z.height=x;e:{var ne=z.width,ae=z.height;if(p=z.S,0>=ne||0>=ae||!(p>=Gu&&13>p))p=2;else{if(0>=z.Rd&&z.sd==null){Q=Y=G=x=0;var we=(X=ne*Kc[p])*ae;if(11>p||(Y=(ae+1)/2*(x=(ne+1)/2),p==12&&(Q=(G=ne)*ae)),(ae=s(we+2*Y+Q))==null){p=1;break e}z.sd=ae,11>p?((ne=z.f.RGBA).eb=ae,ne.fb=0,ne.A=X,ne.size=we):((ne=z.f.kb).y=ae,ne.O=0,ne.fa=X,ne.Fd=we,ne.f=ae,ne.N=0+we,ne.Ab=x,ne.Cd=Y,ne.ea=ae,ne.W=0+we+Y,ne.Db=x,ne.Ed=Y,p==12&&(ne.F=ae,ne.J=0+we+2*Y),ne.Tc=Q,ne.lb=G)}if(x=1,G=z.S,Y=z.width,Q=z.height,G>=Gu&&13>G)if(11>G)p=z.f.RGBA,x&=(X=Math.abs(p.A))*(Q-1)+Y<=p.size,x&=X>=Y*Kc[G],x&=p.eb!=null;else{p=z.f.kb,X=(Y+1)/2,we=(Q+1)/2,ne=Math.abs(p.fa),ae=Math.abs(p.Ab);var Ee=Math.abs(p.Db),le=Math.abs(p.lb),Te=le*(Q-1)+Y;x&=ne*(Q-1)+Y<=p.Fd,x&=ae*(we-1)+X<=p.Cd,x=(x&=Ee*(we-1)+X<=p.Ed)&ne>=Y&ae>=X&Ee>=X,x&=p.y!=null,x&=p.f!=null,x&=p.ea!=null,G==12&&(x&=le>=Y,x&=Te<=p.Tc,x&=p.F!=null)}else x=0;p=x?0:2}}return p!=0||j!=null&&j.fd&&(p=Vl(z)),p}var Do=64,_o=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],To=24,Ia=32,Es=8,Zs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];rt("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(p){return p},S.Predictor2=function(p,x,j){return x[j+0]},S.Predictor3=function(p,x,j){return x[j+1]},S.Predictor4=function(p,x,j){return x[j-1]},S.Predictor5=function(p,x,j){return _t(_t(p,x[j+1]),x[j+0])},S.Predictor6=function(p,x,j){return _t(p,x[j-1])},S.Predictor7=function(p,x,j){return _t(p,x[j+0])},S.Predictor8=function(p,x,j){return _t(x[j-1],x[j+0])},S.Predictor9=function(p,x,j){return _t(x[j+0],x[j+1])},S.Predictor10=function(p,x,j){return _t(_t(p,x[j-1]),_t(x[j+0],x[j+1]))},S.Predictor11=function(p,x,j){var z=x[j+0];return 0>=qt(z>>24&255,p>>24&255,(x=x[j-1])>>24&255)+qt(z>>16&255,p>>16&255,x>>16&255)+qt(z>>8&255,p>>8&255,x>>8&255)+qt(255&z,255&p,255&x)?z:p},S.Predictor12=function(p,x,j){var z=x[j+0];return(mr((p>>24&255)+(z>>24&255)-((x=x[j-1])>>24&255))<<24|mr((p>>16&255)+(z>>16&255)-(x>>16&255))<<16|mr((p>>8&255)+(z>>8&255)-(x>>8&255))<<8|mr((255&p)+(255&z)-(255&x)))>>>0},S.Predictor13=function(p,x,j){var z=x[j-1];return(zt((p=_t(p,x[j+0]))>>24&255,z>>24&255)<<24|zt(p>>16&255,z>>16&255)<<16|zt(p>>8&255,z>>8&255)<<8|zt(255&p,255&z))>>>0};var ea=S.PredictorAdd0;S.PredictorAdd1=vr,rt("Predictor2","PredictorAdd2"),rt("Predictor3","PredictorAdd3"),rt("Predictor4","PredictorAdd4"),rt("Predictor5","PredictorAdd5"),rt("Predictor6","PredictorAdd6"),rt("Predictor7","PredictorAdd7"),rt("Predictor8","PredictorAdd8"),rt("Predictor9","PredictorAdd9"),rt("Predictor10","PredictorAdd10"),rt("Predictor11","PredictorAdd11"),rt("Predictor12","PredictorAdd12"),rt("Predictor13","PredictorAdd13");var js=S.PredictorAdd2;pt("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),pt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var _n,il=S.ColorIndexInverseTransform,Rs=S.MapARGB,ss=S.VP8LColorIndexInverseTransformAlpha,ol=S.MapAlpha,sl=S.VP8LPredictorsAdd=[];sl.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var Ol,Ml,ta,Ea,ja,al,Ra,ll,fn,Xi,Sr,Br,pn,jn,as,Vc,Dl,ra,qu,Wl,Hu,uh,Oc,cl,ul,dh,Mc,hh,fh=s(511),ph=s(2041),mh=s(225),gh=s(767),yh=0,Ps=ph,$l=mh,Oi=gh,Wo=fh,Gu=0,Pa=1,Jf=2,Dc=3,Wc=4,Wr=5,Ku=6,Ul=7,dl=8,$c=9,Uc=10,qc=[2,3,7],Ju=[3,3,11],hl=[280,256,256,256,40],Yf=[0,1,1,1,0],k0=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],I0=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Qf=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Yu=8,ql=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Hc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],fl=null,xh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],vh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Xf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Zf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],E0=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],j0=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],bh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Mi=[],$o=[],Zi=[],Ns=1,Hl=2,_i=[],eo=[];Be("UpsampleRgbLinePair",$n,3),Be("UpsampleBgrLinePair",Vi,3),Be("UpsampleRgbaLinePair",zc,4),Be("UpsampleBgraLinePair",Qs,4),Be("UpsampleArgbLinePair",Mo,4),Be("UpsampleRgba4444LinePair",Si,2),Be("UpsampleRgb565LinePair",tn,2);var R0=S.UpsampleRgbLinePair,P0=S.UpsampleBgrLinePair,Na=S.UpsampleRgbaLinePair,Gl=S.UpsampleBgraLinePair,pl=S.UpsampleArgbLinePair,Gc=S.UpsampleRgba4444LinePair,wh=S.UpsampleRgb565LinePair,na=16,ls=1<<na-1,Pr=-227,Lr=482,Ba=6,ci=0,to=s(256),ml=s(256),Kl=s(256),ro=s(256),Qu=s(Lr-Pr),ep=s(Lr-Pr);os("YuvToRgbRow",$n,3),os("YuvToBgrRow",Vi,3),os("YuvToRgbaRow",zc,4),os("YuvToBgraRow",Qs,4),os("YuvToArgbRow",Mo,4),os("YuvToRgba4444Row",Si,2),os("YuvToRgb565Row",tn,2);var Sh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],gl=[0,2,8],tp=[8,7,6,4,4,2,2,2,1,1,1,1],ia=1;this.WebPDecodeRGBA=function(p,x,j,z,G){var Y=Pa,Q=new Ce,X=new Ut;Q.ba=X,X.S=Y,X.width=[X.width],X.height=[X.height];var ne=X.width,ae=X.height,we=new Dt;if(we==null||p==null)var Ee=2;else e(we!=null),Ee=ka(p,x,j,we.width,we.height,we.Pd,we.Qd,we.format,null);if(Ee!=0?ne=0:(ne!=null&&(ne[0]=we.width[0]),ae!=null&&(ae[0]=we.height[0]),ne=1),ne){X.width=X.width[0],X.height=X.height[0],z!=null&&(z[0]=X.width),G!=null&&(G[0]=X.height);e:{if(z=new Xn,(G=new De).data=p,G.w=x,G.ha=j,G.kd=1,x=[0],e(G!=null),((p=ka(G.data,G.w,G.ha,null,null,null,x,null,G))==0||p==7)&&x[0]&&(p=4),(x=p)==0){if(e(Q!=null),z.data=G.data,z.w=G.w+G.offset,z.ha=G.ha-G.offset,z.put=Rt,z.ac=Vn,z.bc=Pi,z.ma=Q,G.xa){if((p=bs())==null){Q=1;break e}if((function(le,Te){var Ie=[0],Me=[0],Pe=[0];t:for(;;){if(le==null)return 0;if(Te==null)return le.a=2,0;if(le.l=Te,le.a=0,xe(le.m,Te.data,Te.w,Te.ha),!pi(le.m,Ie,Me,Pe)){le.a=3;break t}if(le.xb=Hl,Te.width=Ie[0],Te.height=Me[0],!go(Ie[0],Me[0],1,le,null))break t;return 1}return e(le.a!=0),0})(p,z)){if(z=(x=Xs(z.width,z.height,Q.Oa,Q.ba))==0){t:{z=p;r:for(;;){if(z==null){z=0;break t}if(e(z.s.yc!=null),e(z.s.Ya!=null),e(0<z.s.Wb),e((j=z.l)!=null),e((G=j.ma)!=null),z.xb!=0){if(z.ca=G.ba,z.tb=G.tb,e(z.ca!=null),!zl(G.Oa,j,Dc)){z.a=2;break r}if(!yo(z,j.width)||j.da)break r;if((j.da||$t(z.ca.S))&&ke(),11>z.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),z.ca.f.kb.F!=null&&ke()),z.Pb&&0<z.s.ua&&z.s.vb.X==null&&!de(z.s.vb,z.s.Wa.Xa)){z.a=1;break r}z.xb=0}if(!Bi(z,z.V,z.Ba,z.c,z.i,j.o,Qo))break r;G.Dc=z.Ma,z=1;break t}e(z.a!=0),z=0}z=!z}z&&(x=p.a)}else x=p.a}else{if((p=new Bo)==null){Q=1;break e}if(p.Fa=G.na,p.P=G.P,p.qc=G.Sa,xo(p,z)){if((x=Xs(z.width,z.height,Q.Oa,Q.ba))==0){if(p.Aa=0,j=Q.Oa,e((G=p)!=null),j!=null){if(0<(ne=0>(ne=j.Md)?0:100<ne?255:255*ne/100)){for(ae=we=0;4>ae;++ae)12>(Ee=G.pb[ae]).lc&&(Ee.ia=ne*tp[0>Ee.lc?0:Ee.lc]>>3),we|=Ee.ia;we&&(alert("todo:VP8InitRandom"),G.ia=1)}G.Ga=j.Id,100<G.Ga?G.Ga=100:0>G.Ga&&(G.Ga=0)}(function(le,Te){if(le==null)return 0;if(Te==null)return wr(le,2,"NULL VP8Io parameter in VP8Decode().");if(!le.cb&&!xo(le,Te))return 0;if(e(le.cb),Te.ac==null||Te.ac(Te)){Te.ob&&(le.L=0);var Ie=gl[le.L];if(le.L==2?(le.yb=0,le.zb=0):(le.yb=Te.v-Ie>>4,le.zb=Te.j-Ie>>4,0>le.yb&&(le.yb=0),0>le.zb&&(le.zb=0)),le.Va=Te.o+15+Ie>>4,le.Hb=Te.va+15+Ie>>4,le.Hb>le.za&&(le.Hb=le.za),le.Va>le.Ub&&(le.Va=le.Ub),0<le.L){var Me=le.ed;for(Ie=0;4>Ie;++Ie){var Pe;if(le.Qa.Cb){var Ve=le.Qa.Lb[Ie];le.Qa.Fb||(Ve+=Me.Tb)}else Ve=Me.Tb;for(Pe=0;1>=Pe;++Pe){var Oe=le.gd[Ie][Pe],$e=Ve;if(Me.Pc&&($e+=Me.vd[0],Pe&&($e+=Me.od[0])),0<($e=0>$e?0:63<$e?63:$e)){var qe=$e;0<Me.wb&&(qe=4<Me.wb?qe>>2:qe>>1)>9-Me.wb&&(qe=9-Me.wb),1>qe&&(qe=1),Oe.dd=qe,Oe.tc=2*$e+qe,Oe.ld=40<=$e?2:15<=$e?1:0}else Oe.tc=0;Oe.La=Pe}}}Ie=0}else wr(le,6,"Frame setup failed"),Ie=le.a;if(Ie=Ie==0){if(Ie){le.$c=0,0<le.Aa||(le.Ic=ia);t:{Ie=le.Ic,Me=4*(qe=le.za);var St=32*qe,ct=qe+1,Xt=0<le.L?qe*(0<le.Aa?2:1):0,ft=(le.Aa==2?2:1)*qe;if((Oe=Me+832+(Pe=3*(16*Ie+gl[le.L])/2*St)+(Ve=le.Fa!=null&&0<le.Fa.length?le.Kc.c*le.Kc.i:0))!=Oe)Ie=0;else{if(Oe>le.Vb){if(le.Vb=0,le.Ec=s(Oe),le.Fc=0,le.Ec==null){Ie=wr(le,1,"no memory during frame initialization.");break t}le.Vb=Oe}Oe=le.Ec,$e=le.Fc,le.Ac=Oe,le.Bc=$e,$e+=Me,le.Gd=l(St,gi),le.Hd=0,le.rb=l(ct+1,es),le.sb=1,le.wa=Xt?l(Xt,mi):null,le.Y=0,le.D.Nb=0,le.D.wa=le.wa,le.D.Y=le.Y,0<le.Aa&&(le.D.Y+=qe),e(!0),le.oc=Oe,le.pc=$e,$e+=832,le.ya=l(ft,Ss),le.aa=0,le.D.ya=le.ya,le.D.aa=le.aa,le.Aa==2&&(le.D.aa+=qe),le.R=16*qe,le.B=8*qe,qe=(St=gl[le.L])*le.R,St=St/2*le.B,le.sa=Oe,le.ta=$e+qe,le.qa=le.sa,le.ra=le.ta+16*Ie*le.R+St,le.Ha=le.qa,le.Ia=le.ra+8*Ie*le.B+St,le.$c=0,$e+=Pe,le.mb=Ve?Oe:null,le.nb=Ve?$e:null,e($e+Ve<=le.Fc+le.Vb),lr(le),i(le.Ac,le.Bc,0,Me),Ie=1}}if(Ie){if(Te.ka=0,Te.y=le.sa,Te.O=le.ta,Te.f=le.qa,Te.N=le.ra,Te.ea=le.Ha,Te.Vd=le.Ia,Te.fa=le.R,Te.Rc=le.B,Te.F=null,Te.J=0,!yh){for(Ie=-255;255>=Ie;++Ie)fh[255+Ie]=0>Ie?-Ie:Ie;for(Ie=-1020;1020>=Ie;++Ie)ph[1020+Ie]=-128>Ie?-128:127<Ie?127:Ie;for(Ie=-112;112>=Ie;++Ie)mh[112+Ie]=-16>Ie?-16:15<Ie?15:Ie;for(Ie=-255;510>=Ie;++Ie)gh[255+Ie]=0>Ie?0:255<Ie?255:Ie;yh=1}Ra=or,ll=Za,Xi=Gs,Sr=Lo,Br=Sa,fn=Xa,pn=Ca,jn=Wn,as=T,Vc=H,Dl=wi,ra=ks,qu=ue,Wl=ye,Hu=li,uh=Vo,Oc=Oo,cl=nl,$o[0]=Fl,$o[1]=Ks,$o[2]=ts,$o[3]=Fi,$o[4]=As,$o[5]=zo,$o[6]=Dn,$o[7]=Ta,$o[8]=Ys,$o[9]=Rr,Mi[0]=bo,Mi[1]=el,Mi[2]=tl,Mi[3]=Js,Mi[4]=Fo,Mi[5]=vi,Mi[6]=Sn,Zi[0]=Yi,Zi[1]=_a,Zi[2]=rl,Zi[3]=Ji,Zi[4]=Qi,Zi[5]=rs,Zi[6]=Aa,Ie=1}else Ie=0}Ie&&(Ie=(function(hr,mn){for(hr.M=0;hr.M<hr.Va;++hr.M){var rr,ut=hr.Jc[hr.M&hr.Xb],it=hr.m,Tn=hr;for(rr=0;rr<Tn.za;++rr){var Gt=it,cr=Tn,Zr=cr.Ac,ei=cr.Bc+4*rr,Rn=cr.zc,ln=cr.ya[cr.aa+rr];if(cr.Qa.Bb?ln.$b=Ne(Gt,cr.Pa.jb[0])?2+Ne(Gt,cr.Pa.jb[2]):Ne(Gt,cr.Pa.jb[1]):ln.$b=0,cr.kc&&(ln.Ad=Ne(Gt,cr.Bd)),ln.Za=!Ne(Gt,145)+0,ln.Za){var Un=ln.Ob,ti=0;for(cr=0;4>cr;++cr){var on,pr=Rn[0+cr];for(on=0;4>on;++on){pr=E0[Zr[ei+on]][pr];for(var _r=Xf[Ne(Gt,pr[0])];0<_r;)_r=Xf[2*_r+Ne(Gt,pr[_r])];pr=-_r,Zr[ei+on]=pr}n(Un,ti,Zr,ei,4),ti+=4,Rn[0+cr]=pr}}else pr=Ne(Gt,156)?Ne(Gt,128)?1:3:Ne(Gt,163)?2:0,ln.Ob[0]=pr,i(Zr,ei,pr,4),i(Rn,0,pr,4);ln.Dd=Ne(Gt,142)?Ne(Gt,114)?Ne(Gt,183)?1:3:2:0}if(Tn.m.Ka)return wr(hr,7,"Premature end-of-partition0 encountered.");for(;hr.ja<hr.za;++hr.ja){if(Tn=ut,Gt=(it=hr).rb[it.sb-1],Zr=it.rb[it.sb+it.ja],rr=it.ya[it.aa+it.ja],ei=it.kc?rr.Ad:0)Gt.la=Zr.la=0,rr.Za||(Gt.Na=Zr.Na=0),rr.Hc=0,rr.Gc=0,rr.ia=0;else{var sn,Tr;if(Gt=Zr,Zr=Tn,ei=it.Pa.Xc,Rn=it.ya[it.aa+it.ja],ln=it.pb[Rn.$b],cr=Rn.ad,Un=0,ti=it.rb[it.sb-1],pr=on=0,i(cr,Un,0,384),Rn.Za)var gn=0,yn=ei[3];else{_r=s(16);var $r=Gt.Na+ti.Na;if($r=fl(Zr,ei[1],$r,ln.Eb,0,_r,0),Gt.Na=ti.Na=(0<$r)+0,1<$r)Ra(_r,0,cr,Un);else{var Ti=_r[0]+3>>3;for(_r=0;256>_r;_r+=16)cr[Un+_r]=Ti}gn=1,yn=ei[0]}var Fr=15&Gt.la,Ur=15&ti.la;for(_r=0;4>_r;++_r){var Pn=1&Ur;for(Ti=Tr=0;4>Ti;++Ti)Fr=Fr>>1|(Pn=($r=fl(Zr,yn,$r=Pn+(1&Fr),ln.Sc,gn,cr,Un))>gn)<<7,Tr=Tr<<2|(3<$r?3:1<$r?2:cr[Un+0]!=0),Un+=16;Fr>>=4,Ur=Ur>>1|Pn<<7,on=(on<<8|Tr)>>>0}for(yn=Fr,gn=Ur>>4,sn=0;4>sn;sn+=2){for(Tr=0,Fr=Gt.la>>4+sn,Ur=ti.la>>4+sn,_r=0;2>_r;++_r){for(Pn=1&Ur,Ti=0;2>Ti;++Ti)$r=Pn+(1&Fr),Fr=Fr>>1|(Pn=0<($r=fl(Zr,ei[2],$r,ln.Qc,0,cr,Un)))<<3,Tr=Tr<<2|(3<$r?3:1<$r?2:cr[Un+0]!=0),Un+=16;Fr>>=2,Ur=Ur>>1|Pn<<5}pr|=Tr<<4*sn,yn|=Fr<<4<<sn,gn|=(240&Ur)<<sn}Gt.la=yn,ti.la=gn,Rn.Hc=on,Rn.Gc=pr,Rn.ia=43690&pr?0:ln.ia,ei=!(on|pr)}if(0<it.L&&(it.wa[it.Y+it.ja]=it.gd[rr.$b][rr.Za],it.wa[it.Y+it.ja].La|=!ei),Tn.Ka)return wr(hr,7,"Premature end-of-file encountered.")}if(lr(hr),it=mn,Tn=1,rr=(ut=hr).D,Gt=0<ut.L&&ut.M>=ut.zb&&ut.M<=ut.Va,ut.Aa==0)t:{if(rr.M=ut.M,rr.uc=Gt,So(ut,rr),Tn=1,rr=(Tr=ut.D).Nb,Gt=(pr=gl[ut.L])*ut.R,Zr=pr/2*ut.B,_r=16*rr*ut.R,Ti=8*rr*ut.B,ei=ut.sa,Rn=ut.ta-Gt+_r,ln=ut.qa,cr=ut.ra-Zr+Ti,Un=ut.Ha,ti=ut.Ia-Zr+Ti,Ur=(Fr=Tr.M)==0,on=Fr>=ut.Va-1,ut.Aa==2&&So(ut,Tr),Tr.uc)for(Pn=($r=ut).D.M,e($r.D.uc),Tr=$r.yb;Tr<$r.Hb;++Tr){gn=Tr,yn=Pn;var ui=(no=(kn=$r).D).Nb;sn=kn.R;var no=no.wa[no.Y+gn],An=kn.sa,Cn=kn.ta+16*ui*sn+16*gn,Ai=no.dd,qr=no.tc;if(qr!=0)if(e(3<=qr),kn.L==1)0<gn&&uh(An,Cn,sn,qr+4),no.La&&cl(An,Cn,sn,qr),0<yn&&Hu(An,Cn,sn,qr+4),no.La&&Oc(An,Cn,sn,qr);else{var Ci=kn.B,Uo=kn.qa,cs=kn.ra+8*ui*Ci+8*gn,ri=kn.Ha,kn=kn.Ia+8*ui*Ci+8*gn;ui=no.ld,0<gn&&(jn(An,Cn,sn,qr+4,Ai,ui),Vc(Uo,cs,ri,kn,Ci,qr+4,Ai,ui)),no.La&&(ra(An,Cn,sn,qr,Ai,ui),Wl(Uo,cs,ri,kn,Ci,qr,Ai,ui)),0<yn&&(pn(An,Cn,sn,qr+4,Ai,ui),as(Uo,cs,ri,kn,Ci,qr+4,Ai,ui)),no.La&&(Dl(An,Cn,sn,qr,Ai,ui),qu(Uo,cs,ri,kn,Ci,qr,Ai,ui))}}if(ut.ia&&alert("todo:DitherRow"),it.put!=null){if(Tr=16*Fr,Fr=16*(Fr+1),Ur?(it.y=ut.sa,it.O=ut.ta+_r,it.f=ut.qa,it.N=ut.ra+Ti,it.ea=ut.Ha,it.W=ut.Ia+Ti):(Tr-=pr,it.y=ei,it.O=Rn,it.f=ln,it.N=cr,it.ea=Un,it.W=ti),on||(Fr-=pr),Fr>it.o&&(Fr=it.o),it.F=null,it.J=null,ut.Fa!=null&&0<ut.Fa.length&&Tr<Fr&&(it.J=Mr(ut,it,Tr,Fr-Tr),it.F=ut.mb,it.F==null&&it.F.length==0)){Tn=wr(ut,3,"Could not decode alpha data.");break t}Tr<it.j&&(pr=it.j-Tr,Tr=it.j,e(!(1&pr)),it.O+=ut.R*pr,it.N+=ut.B*(pr>>1),it.W+=ut.B*(pr>>1),it.F!=null&&(it.J+=it.width*pr)),Tr<Fr&&(it.O+=it.v,it.N+=it.v>>1,it.W+=it.v>>1,it.F!=null&&(it.J+=it.v),it.ka=Tr-it.j,it.U=it.va-it.v,it.T=Fr-Tr,Tn=it.put(it))}rr+1!=ut.Ic||on||(n(ut.sa,ut.ta-Gt,ei,Rn+16*ut.R,Gt),n(ut.qa,ut.ra-Zr,ln,cr+8*ut.B,Zr),n(ut.Ha,ut.Ia-Zr,Un,ti+8*ut.B,Zr))}if(!Tn)return wr(hr,6,"Output aborted.")}return 1})(le,Te)),Te.bc!=null&&Te.bc(Te),Ie&=1}return Ie?(le.cb=0,Ie):0})(p,z)||(x=p.a)}}else x=p.a}x==0&&Q.Oa!=null&&Q.Oa.fd&&(x=Vl(Q.ba))}Q=x}Y=Q!=0?null:11>Y?X.f.RGBA.eb:X.f.kb.y}else Y=null;return Y};var Kc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(S,V){for(var I="",w=0;w<4;w++)I+=String.fromCharCode(S[V++]);return I}function g(S,V){return S[V+0]|S[V+1]<<8}function b(S,V){return(S[V+0]|S[V+1]<<8|S[V+2]<<16)>>>0}function _(S,V){return(S[V+0]|S[V+1]<<8|S[V+2]<<16|S[V+3]<<24)>>>0}new h;var v=[0],N=[0],E=[],L=new h,k=r,O=(function(S,V){var I={},w=0,B=!1,M=0,q=0;if(I.frames=[],!(function(W,J){for(var ie=0;ie<4;ie++)if(W[J+ie]!="RIFF".charCodeAt(ie))return!0;return!1})(S,V)){for(_(S,V+=4),V+=8;V<S.length;){var se=d(S,V),te=_(S,V+=4);V+=4;var re=te+(1&te);switch(se){case"VP8 ":case"VP8L":I.frames[w]===void 0&&(I.frames[w]={}),(Z=I.frames[w]).src_off=B?q:V-8,Z.src_size=M+te+8,w++,B&&(B=!1,M=0,q=0);break;case"VP8X":(Z=I.header={}).feature_flags=S[V];var xe=V+4;Z.canvas_width=1+b(S,xe),xe+=3,Z.canvas_height=1+b(S,xe),xe+=3;break;case"ALPH":B=!0,M=re+8,q=V-8;break;case"ANIM":(Z=I.header).bgcolor=_(S,V),xe=V+4,Z.loop_count=g(S,xe),xe+=2;break;case"ANMF":var be,Z;(Z=I.frames[w]={}).offset_x=2*b(S,V),V+=3,Z.offset_y=2*b(S,V),V+=3,Z.width=1+b(S,V),V+=3,Z.height=1+b(S,V),V+=3,Z.duration=b(S,V),V+=3,be=S[V++],Z.dispose=1&be,Z.blend=be>>1&1}se!="ANMF"&&(V+=re)}return I}})(k,0);O.response=k,O.rgbaoutput=!0,O.dataurl=!1;var $=O.header?O.header:null,F=O.frames?O.frames:null;if($){$.loop_counter=$.loop_count,v=[$.canvas_height],N=[$.canvas_width];for(var oe=0;oe<F.length&&F[oe].blend!=0;oe++);}var ce=F[0],D=L.WebPDecodeRGBA(k,ce.src_off,ce.src_size,N,v);ce.rgba=D,ce.imgwidth=N[0],ce.imgheight=v[0];for(var C=0;C<N[0]*v[0]*4;C++)E[C]=D[C];return this.width=N,this.height=v,this.data=E,this}(function(r){var e,t,n,i,s,l,u,h,d,g=function(W){return W=W||{},this.isStrokeTransparent=W.isStrokeTransparent||!1,this.strokeOpacity=W.strokeOpacity||1,this.strokeStyle=W.strokeStyle||"#000000",this.fillStyle=W.fillStyle||"#000000",this.isFillTransparent=W.isFillTransparent||!1,this.fillOpacity=W.fillOpacity||1,this.font=W.font||"10px sans-serif",this.textBaseline=W.textBaseline||"alphabetic",this.textAlign=W.textAlign||"left",this.lineWidth=W.lineWidth||1,this.lineJoin=W.lineJoin||"miter",this.lineCap=W.lineCap||"butt",this.path=W.path||[],this.transform=W.transform!==void 0?W.transform.clone():new h,this.globalCompositeOperation=W.globalCompositeOperation||"normal",this.globalAlpha=W.globalAlpha||1,this.clip_path=W.clip_path||[],this.currentPoint=W.currentPoint||new l,this.miterLimit=W.miterLimit||10,this.lastPoint=W.lastPoint||new l,this.lineDashOffset=W.lineDashOffset||0,this.lineDash=W.lineDash||[],this.margin=W.margin||[0,0,0,0],this.prevPageLastElemOffset=W.prevPageLastElemOffset||0,this.ignoreClearRect=typeof W.ignoreClearRect!="boolean"||W.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new b(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,l=this.internal.Point,u=this.internal.Rectangle,h=this.internal.Matrix,d=new g}]);var b=function(W){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var J=W;Object.defineProperty(this,"pdf",{get:function(){return J}});var ie=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ie},set:function(ze){ie=!!ze}});var he=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return he},set:function(ze){he=!!ze}});var ge=0;Object.defineProperty(this,"posX",{get:function(){return ge},set:function(ze){isNaN(ze)||(ge=ze)}});var _e=0;Object.defineProperty(this,"posY",{get:function(){return _e},set:function(ze){isNaN(ze)||(_e=ze)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ze){var de;typeof ze=="number"?de=[ze,ze,ze,ze]:((de=new Array(4))[0]=ze[0],de[1]=ze.length>=2?ze[1]:de[0],de[2]=ze.length>=3?ze[2]:de[0],de[3]=ze.length>=4?ze[3]:de[1]),d.margin=de}});var fe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return fe},set:function(ze){fe=ze}});var ve=0;Object.defineProperty(this,"lastBreak",{get:function(){return ve},set:function(ze){ve=ze}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(ze){Ne=ze}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ze){ze instanceof g&&(d=ze)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ze){d.path=ze}});var Ue=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ue},set:function(ze){Ue=ze}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ze){var de;de=_(ze),this.ctx.fillStyle=de.style,this.ctx.isFillTransparent=de.a===0,this.ctx.fillOpacity=de.a,this.pdf.setFillColor(de.r,de.g,de.b,{a:de.a}),this.pdf.setTextColor(de.r,de.g,de.b,{a:de.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ze){var de=_(ze);this.ctx.strokeStyle=de.style,this.ctx.isStrokeTransparent=de.a===0,this.ctx.strokeOpacity=de.a,de.a===0?this.pdf.setDrawColor(255,255,255):(de.a,this.pdf.setDrawColor(de.r,de.g,de.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ze){["butt","round","square"].indexOf(ze)!==-1&&(this.ctx.lineCap=ze,this.pdf.setLineCap(ze))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ze){isNaN(ze)||(this.ctx.lineWidth=ze,this.pdf.setLineWidth(ze))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ze){["bevel","round","miter"].indexOf(ze)!==-1&&(this.ctx.lineJoin=ze,this.pdf.setLineJoin(ze))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ze){isNaN(ze)||(this.ctx.miterLimit=ze,this.pdf.setMiterLimit(ze))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ze){this.ctx.textBaseline=ze}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ze){["right","end","center","left","start"].indexOf(ze)!==-1&&(this.ctx.textAlign=ze)}});var Xe=null,Ze=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ze},set:function(ze){Xe=null,Ze=ze}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ze){var de;if(this.ctx.font=ze,(de=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ze))!==null){var Ft=de[1];de[2];var Et=de[3],wt=de[4];de[5];var He=de[6],ot=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(wt)[2];wt=Math.floor(ot==="px"?parseFloat(wt)*this.pdf.internal.scaleFactor:ot==="em"?parseFloat(wt)*this.pdf.getFontSize():parseFloat(wt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(wt);var rt=(function(jt){var pt,Ir,ir=[],ht=jt.trim();if(ht==="")return Fg;if(ht in _x)return[_x[ht]];for(;ht!=="";){switch(Ir=null,pt=(ht=Ax(ht)).charAt(0)){case'"':case"'":Ir=Sk(ht.substring(1),pt);break;default:Ir=_k(ht)}if(Ir===null||(ir.push(Ir[0]),(ht=Ax(Ir[1]))!==""&&ht.charAt(0)!==","))return Fg;ht=ht.replace(/^,/,"")}return ir})(He);if(this.fontFaces){var Jt=(function(jt,pt){if(Xe===null){var Ir=(function(ir){var ht=[];return Object.keys(ir).forEach(function(Ht){ir[Ht].forEach(function(sr){var It=null;switch(sr){case"bold":It={family:Ht,weight:"bold"};break;case"italic":It={family:Ht,style:"italic"};break;case"bolditalic":It={family:Ht,weight:"bold",style:"italic"};break;case"":case"normal":It={family:Ht}}It!==null&&(It.ref={name:Ht,style:sr},ht.push(It))})}),ht})(jt.getFontList());Xe=(function(ir){for(var ht={},Ht=0;Ht<ir.length;++Ht){var sr=Lg(ir[Ht]),It=sr.family,tr=sr.stretch,$t=sr.style,Er=sr.weight;ht[It]=ht[It]||{},ht[It][tr]=ht[It][tr]||{},ht[It][tr][$t]=ht[It][tr][$t]||{},ht[It][tr][$t][Er]=sr}return ht})(Ir.concat(pt))}return Xe})(this.pdf,this.fontFaces),_t=rt.map(function(jt){return{family:jt,stretch:"normal",weight:Et,style:Ft}}),mr=(function(jt,pt,Ir){for(var ir=(Ir=Ir||{}).defaultFontFamily||"times",ht=Object.assign({},wk,Ir.genericFontFamilies||{}),Ht=null,sr=null,It=0;It<pt.length;++It)if(ht[(Ht=Lg(pt[It])).family]&&(Ht.family=ht[Ht.family]),jt.hasOwnProperty(Ht.family)){sr=jt[Ht.family];break}if(!(sr=sr||jt[ir]))throw new Error("Could not find a font-family for the rule '"+Tx(Ht)+"' and default family '"+ir+"'.");if(sr=(function(tr,$t){if($t[tr])return $t[tr];var Er=f1[tr],zr=Er<=f1.normal?-1:1,Ut=Sx($t,lS,Er,zr);if(!Ut)throw new Error("Could not find a matching font-stretch value for "+tr);return Ut})(Ht.stretch,sr),sr=(function(tr,$t){if($t[tr])return $t[tr];for(var Er=aS[tr],zr=0;zr<Er.length;++zr)if($t[Er[zr]])return $t[Er[zr]];throw new Error("Could not find a matching font-style for "+tr)})(Ht.style,sr),!(sr=(function(tr,$t){if($t[tr])return $t[tr];if(tr===400&&$t[500])return $t[500];if(tr===500&&$t[400])return $t[400];var Er=bk[tr],zr=Sx($t,cS,Er,tr<400?-1:1);if(!zr)throw new Error("Could not find a matching font-weight for value "+tr);return zr})(Ht.weight,sr)))throw new Error("Failed to resolve a font for the rule '"+Tx(Ht)+"'.");return sr})(Jt,_t);this.pdf.setFont(mr.ref.name,mr.ref.style)}else{var zt="";(Et==="bold"||parseInt(Et,10)>=700||Ft==="bold")&&(zt="bold"),Ft==="italic"&&(zt+="italic"),zt.length===0&&(zt="normal");for(var qt="",vr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Mt=0;Mt<rt.length;Mt++){if(this.pdf.internal.getFont(rt[Mt],zt,{noFallback:!0,disableWarning:!0})!==void 0){qt=rt[Mt];break}if(zt==="bolditalic"&&this.pdf.internal.getFont(rt[Mt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)qt=rt[Mt],zt="bold";else if(this.pdf.internal.getFont(rt[Mt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){qt=rt[Mt],zt="normal";break}}if(qt===""){for(var Tt=0;Tt<rt.length;Tt++)if(vr[rt[Tt]]){qt=vr[rt[Tt]];break}}qt=qt===""?"Times":qt,this.pdf.setFont(qt,zt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ze){this.ctx.globalCompositeOperation=ze}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ze){this.ctx.globalAlpha=ze}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ze){this.ctx.lineDashOffset=ze,Z.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ze){this.ctx.lineDash=ze,Z.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ze){this.ctx.ignoreClearRect=!!ze}})};b.prototype.setLineDash=function(W){this.lineDash=W},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){F.call(this,"fill",!1)},b.prototype.stroke=function(){F.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(W,J){if(isNaN(W)||isNaN(J))throw nn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ie=this.ctx.transform.applyToPoint(new l(W,J));this.path.push({type:"mt",x:ie.x,y:ie.y}),this.ctx.lastPoint=new l(W,J)},b.prototype.closePath=function(){var W=new l(0,0),J=0;for(J=this.path.length-1;J!==-1;J--)if(this.path[J].type==="begin"&&Gr(this.path[J+1])==="object"&&typeof this.path[J+1].x=="number"){W=new l(this.path[J+1].x,this.path[J+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(W.x,W.y)},b.prototype.lineTo=function(W,J){if(isNaN(W)||isNaN(J))throw nn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ie=this.ctx.transform.applyToPoint(new l(W,J));this.path.push({type:"lt",x:ie.x,y:ie.y}),this.ctx.lastPoint=new l(ie.x,ie.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},b.prototype.quadraticCurveTo=function(W,J,ie,he){if(isNaN(ie)||isNaN(he)||isNaN(W)||isNaN(J))throw nn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ge=this.ctx.transform.applyToPoint(new l(ie,he)),_e=this.ctx.transform.applyToPoint(new l(W,J));this.path.push({type:"qct",x1:_e.x,y1:_e.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new l(ge.x,ge.y)},b.prototype.bezierCurveTo=function(W,J,ie,he,ge,_e){if(isNaN(ge)||isNaN(_e)||isNaN(W)||isNaN(J)||isNaN(ie)||isNaN(he))throw nn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var fe=this.ctx.transform.applyToPoint(new l(ge,_e)),ve=this.ctx.transform.applyToPoint(new l(W,J)),Ne=this.ctx.transform.applyToPoint(new l(ie,he));this.path.push({type:"bct",x1:ve.x,y1:ve.y,x2:Ne.x,y2:Ne.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new l(fe.x,fe.y)},b.prototype.arc=function(W,J,ie,he,ge,_e){if(isNaN(W)||isNaN(J)||isNaN(ie)||isNaN(he)||isNaN(ge))throw nn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(_e=!!_e,!this.ctx.transform.isIdentity){var fe=this.ctx.transform.applyToPoint(new l(W,J));W=fe.x,J=fe.y;var ve=this.ctx.transform.applyToPoint(new l(0,ie)),Ne=this.ctx.transform.applyToPoint(new l(0,0));ie=Math.sqrt(Math.pow(ve.x-Ne.x,2)+Math.pow(ve.y-Ne.y,2))}Math.abs(ge-he)>=2*Math.PI&&(he=0,ge=2*Math.PI),this.path.push({type:"arc",x:W,y:J,radius:ie,startAngle:he,endAngle:ge,counterclockwise:_e})},b.prototype.arcTo=function(W,J,ie,he,ge){throw new Error("arcTo not implemented.")},b.prototype.rect=function(W,J,ie,he){if(isNaN(W)||isNaN(J)||isNaN(ie)||isNaN(he))throw nn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(W,J),this.lineTo(W+ie,J),this.lineTo(W+ie,J+he),this.lineTo(W,J+he),this.lineTo(W,J),this.lineTo(W+ie,J),this.lineTo(W,J)},b.prototype.fillRect=function(W,J,ie,he){if(isNaN(W)||isNaN(J)||isNaN(ie)||isNaN(he))throw nn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var ge={};this.lineCap!=="butt"&&(ge.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ge.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(W,J,ie,he),this.fill(),ge.hasOwnProperty("lineCap")&&(this.lineCap=ge.lineCap),ge.hasOwnProperty("lineJoin")&&(this.lineJoin=ge.lineJoin)}},b.prototype.strokeRect=function(W,J,ie,he){if(isNaN(W)||isNaN(J)||isNaN(ie)||isNaN(he))throw nn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(W,J,ie,he),this.stroke())},b.prototype.clearRect=function(W,J,ie,he){if(isNaN(W)||isNaN(J)||isNaN(ie)||isNaN(he))throw nn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(W,J,ie,he))},b.prototype.save=function(W){W=typeof W!="boolean"||W;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,ie=0;ie<this.pdf.internal.getNumberOfPages();ie++)this.pdf.setPage(ie+1),this.pdf.internal.out("q");if(this.pdf.setPage(J),W){this.ctx.fontSize=this.pdf.internal.getFontSize();var he=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=he}},b.prototype.restore=function(W){W=typeof W!="boolean"||W;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,ie=0;ie<this.pdf.internal.getNumberOfPages();ie++)this.pdf.setPage(ie+1),this.pdf.internal.out("Q");this.pdf.setPage(J),W&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var _=function(W){var J,ie,he,ge;if(W.isCanvasGradient===!0&&(W=W.getColor()),!W)return{r:0,g:0,b:0,a:0,style:W};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(W))J=0,ie=0,he=0,ge=0;else{var _e=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(W);if(_e!==null)J=parseInt(_e[1]),ie=parseInt(_e[2]),he=parseInt(_e[3]),ge=1;else if((_e=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(W))!==null)J=parseInt(_e[1]),ie=parseInt(_e[2]),he=parseInt(_e[3]),ge=parseFloat(_e[4]);else{if(ge=1,typeof W=="string"&&W.charAt(0)!=="#"){var fe=new eS(W);W=fe.ok?fe.toHex():"#000000"}W.length===4?(J=W.substring(1,2),J+=J,ie=W.substring(2,3),ie+=ie,he=W.substring(3,4),he+=he):(J=W.substring(1,3),ie=W.substring(3,5),he=W.substring(5,7)),J=parseInt(J,16),ie=parseInt(ie,16),he=parseInt(he,16)}}return{r:J,g:ie,b:he,a:ge,style:W}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(W,J,ie,he){if(isNaN(J)||isNaN(ie)||typeof W!="string")throw nn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(he=isNaN(he)?void 0:he,!v.call(this)){var ge=re(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;w.call(this,{text:W,x:J,y:ie,scale:_e,angle:ge,align:this.textAlign,maxWidth:he})}},b.prototype.strokeText=function(W,J,ie,he){if(isNaN(J)||isNaN(ie)||typeof W!="string")throw nn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){he=isNaN(he)?void 0:he;var ge=re(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;w.call(this,{text:W,x:J,y:ie,scale:_e,renderingMode:"stroke",angle:ge,align:this.textAlign,maxWidth:he})}},b.prototype.measureText=function(W){if(typeof W!="string")throw nn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var J=this.pdf,ie=this.pdf.internal.scaleFactor,he=J.internal.getFontSize(),ge=J.getStringUnitWidth(W)*he/J.internal.scaleFactor;return new function(_e){var fe=(_e=_e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return fe}}),this}({width:ge*=Math.round(96*ie/72*1e4)/1e4})},b.prototype.scale=function(W,J){if(isNaN(W)||isNaN(J))throw nn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ie=new h(W,0,0,J,0,0);this.ctx.transform=this.ctx.transform.multiply(ie)},b.prototype.rotate=function(W){if(isNaN(W))throw nn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var J=new h(Math.cos(W),Math.sin(W),-Math.sin(W),Math.cos(W),0,0);this.ctx.transform=this.ctx.transform.multiply(J)},b.prototype.translate=function(W,J){if(isNaN(W)||isNaN(J))throw nn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ie=new h(1,0,0,1,W,J);this.ctx.transform=this.ctx.transform.multiply(ie)},b.prototype.transform=function(W,J,ie,he,ge,_e){if(isNaN(W)||isNaN(J)||isNaN(ie)||isNaN(he)||isNaN(ge)||isNaN(_e))throw nn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var fe=new h(W,J,ie,he,ge,_e);this.ctx.transform=this.ctx.transform.multiply(fe)},b.prototype.setTransform=function(W,J,ie,he,ge,_e){W=isNaN(W)?1:W,J=isNaN(J)?0:J,ie=isNaN(ie)?0:ie,he=isNaN(he)?1:he,ge=isNaN(ge)?0:ge,_e=isNaN(_e)?0:_e,this.ctx.transform=new h(W,J,ie,he,ge,_e)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(W,J,ie,he,ge,_e,fe,ve,Ne){var Ue=this.pdf.getImageProperties(W),Xe=1,Ze=1,ze=1,de=1;he!==void 0&&ve!==void 0&&(ze=ve/he,de=Ne/ge,Xe=Ue.width/he*ve/he,Ze=Ue.height/ge*Ne/ge),_e===void 0&&(_e=J,fe=ie,J=0,ie=0),he!==void 0&&ve===void 0&&(ve=he,Ne=ge),he===void 0&&ve===void 0&&(ve=Ue.width,Ne=Ue.height);for(var Ft,Et=this.ctx.transform.decompose(),wt=re(Et.rotate.shx),He=new h,ot=(He=(He=(He=He.multiply(Et.translate)).multiply(Et.skew)).multiply(Et.scale)).applyToRectangle(new u(_e-J*ze,fe-ie*de,he*Xe,ge*Ze)),rt=L.call(this,ot),Jt=[],_t=0;_t<rt.length;_t+=1)Jt.indexOf(rt[_t])===-1&&Jt.push(rt[_t]);if($(Jt),this.autoPaging)for(var mr=Jt[0],zt=Jt[Jt.length-1],qt=mr;qt<zt+1;qt++){this.pdf.setPage(qt);var vr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=qt===1?this.posY+this.margin[0]:this.margin[0],Tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],jt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=qt===1?0:Tt+(qt-2)*jt;if(this.ctx.clip_path.length!==0){var Ir=this.path;Ft=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(Ft,this.posX+this.margin[3],-pt+Mt+this.ctx.prevPageLastElemOffset),oe.call(this,"fill",!0),this.path=Ir}var ir=JSON.parse(JSON.stringify(ot));ir=O([ir],this.posX+this.margin[3],-pt+Mt+this.ctx.prevPageLastElemOffset)[0];var ht=(qt>mr||qt<zt)&&E.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vr,jt,null).clip().discardPath()),this.pdf.addImage(W,"JPEG",ir.x,ir.y,ir.w,ir.h,null,null,wt),ht&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(W,"JPEG",ot.x,ot.y,ot.w,ot.h,null,null,wt)};var L=function(W,J,ie){var he=[];J=J||this.pdf.internal.pageSize.width,ie=ie||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ge=this.posY+this.ctx.prevPageLastElemOffset;switch(W.type){default:case"mt":case"lt":he.push(Math.floor((W.y+ge)/ie)+1);break;case"arc":he.push(Math.floor((W.y+ge-W.radius)/ie)+1),he.push(Math.floor((W.y+ge+W.radius)/ie)+1);break;case"qct":var _e=xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,W.x1,W.y1,W.x,W.y);he.push(Math.floor((_e.y+ge)/ie)+1),he.push(Math.floor((_e.y+_e.h+ge)/ie)+1);break;case"bct":var fe=be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,W.x1,W.y1,W.x2,W.y2,W.x,W.y);he.push(Math.floor((fe.y+ge)/ie)+1),he.push(Math.floor((fe.y+fe.h+ge)/ie)+1);break;case"rect":he.push(Math.floor((W.y+ge)/ie)+1),he.push(Math.floor((W.y+W.h+ge)/ie)+1)}for(var ve=0;ve<he.length;ve+=1)for(;this.pdf.internal.getNumberOfPages()<he[ve];)k.call(this);return he},k=function(){var W=this.fillStyle,J=this.strokeStyle,ie=this.font,he=this.lineCap,ge=this.lineWidth,_e=this.lineJoin;this.pdf.addPage(),this.fillStyle=W,this.strokeStyle=J,this.font=ie,this.lineCap=he,this.lineWidth=ge,this.lineJoin=_e},O=function(W,J,ie){for(var he=0;he<W.length;he++)switch(W[he].type){case"bct":W[he].x2+=J,W[he].y2+=ie;case"qct":W[he].x1+=J,W[he].y1+=ie;default:W[he].x+=J,W[he].y+=ie}return W},$=function(W){return W.sort(function(J,ie){return J-ie})},F=function(W,J){for(var ie,he,ge=this.fillStyle,_e=this.strokeStyle,fe=this.lineCap,ve=this.lineWidth,Ne=Math.abs(ve*this.ctx.transform.scaleX),Ue=this.lineJoin,Xe=JSON.parse(JSON.stringify(this.path)),Ze=JSON.parse(JSON.stringify(this.path)),ze=[],de=0;de<Ze.length;de++)if(Ze[de].x!==void 0)for(var Ft=L.call(this,Ze[de]),Et=0;Et<Ft.length;Et+=1)ze.indexOf(Ft[Et])===-1&&ze.push(Ft[Et]);for(var wt=0;wt<ze.length;wt++)for(;this.pdf.internal.getNumberOfPages()<ze[wt];)k.call(this);if($(ze),this.autoPaging)for(var He=ze[0],ot=ze[ze.length-1],rt=He;rt<ot+1;rt++){this.pdf.setPage(rt),this.fillStyle=ge,this.strokeStyle=_e,this.lineCap=fe,this.lineWidth=Ne,this.lineJoin=Ue;var Jt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_t=rt===1?this.posY+this.margin[0]:this.margin[0],mr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],qt=rt===1?0:mr+(rt-2)*zt;if(this.ctx.clip_path.length!==0){var vr=this.path;ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(ie,this.posX+this.margin[3],-qt+_t+this.ctx.prevPageLastElemOffset),oe.call(this,W,!0),this.path=vr}if(he=JSON.parse(JSON.stringify(Xe)),this.path=O(he,this.posX+this.margin[3],-qt+_t+this.ctx.prevPageLastElemOffset),J===!1||rt===0){var Mt=(rt>He||rt<ot)&&E.call(this);Mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Jt,zt,null).clip().discardPath()),oe.call(this,W,J),Mt&&this.pdf.restoreGraphicsState()}this.lineWidth=ve}else this.lineWidth=Ne,oe.call(this,W,J),this.lineWidth=ve;this.path=Xe},oe=function(W,J){if((W!=="stroke"||J||!N.call(this))&&(W==="stroke"||J||!v.call(this))){for(var ie,he,ge=[],_e=this.path,fe=0;fe<_e.length;fe++){var ve=_e[fe];switch(ve.type){case"begin":ge.push({begin:!0});break;case"close":ge.push({close:!0});break;case"mt":ge.push({start:ve,deltas:[],abs:[]});break;case"lt":var Ne=ge.length;if(_e[fe-1]&&!isNaN(_e[fe-1].x)&&(ie=[ve.x-_e[fe-1].x,ve.y-_e[fe-1].y],Ne>0)){for(;Ne>=0;Ne--)if(ge[Ne-1].close!==!0&&ge[Ne-1].begin!==!0){ge[Ne-1].deltas.push(ie),ge[Ne-1].abs.push(ve);break}}break;case"bct":ie=[ve.x1-_e[fe-1].x,ve.y1-_e[fe-1].y,ve.x2-_e[fe-1].x,ve.y2-_e[fe-1].y,ve.x-_e[fe-1].x,ve.y-_e[fe-1].y],ge[ge.length-1].deltas.push(ie);break;case"qct":var Ue=_e[fe-1].x+2/3*(ve.x1-_e[fe-1].x),Xe=_e[fe-1].y+2/3*(ve.y1-_e[fe-1].y),Ze=ve.x+2/3*(ve.x1-ve.x),ze=ve.y+2/3*(ve.y1-ve.y),de=ve.x,Ft=ve.y;ie=[Ue-_e[fe-1].x,Xe-_e[fe-1].y,Ze-_e[fe-1].x,ze-_e[fe-1].y,de-_e[fe-1].x,Ft-_e[fe-1].y],ge[ge.length-1].deltas.push(ie);break;case"arc":ge.push({deltas:[],abs:[],arc:!0}),Array.isArray(ge[ge.length-1].abs)&&ge[ge.length-1].abs.push(ve)}}he=J?null:W==="stroke"?"stroke":"fill";for(var Et=!1,wt=0;wt<ge.length;wt++)if(ge[wt].arc)for(var He=ge[wt].abs,ot=0;ot<He.length;ot++){var rt=He[ot];rt.type==="arc"?C.call(this,rt.x,rt.y,rt.radius,rt.startAngle,rt.endAngle,rt.counterclockwise,void 0,J,!Et):B.call(this,rt.x,rt.y),Et=!0}else if(ge[wt].close===!0)this.pdf.internal.out("h"),Et=!1;else if(ge[wt].begin!==!0){var Jt=ge[wt].start.x,_t=ge[wt].start.y;M.call(this,ge[wt].deltas,Jt,_t),Et=!0}he&&S.call(this,he),J&&V.call(this)}},ce=function(W){var J=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ie=J*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return W-ie;case"top":return W+J-ie;case"hanging":return W+J-2*ie;case"middle":return W+J/2-ie;default:return W}},D=function(W){return W+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var W=function(){};return W.colorStops=[],W.addColorStop=function(J,ie){this.colorStops.push([J,ie])},W.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},W.isCanvasGradient=!0,W},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(W,J,ie,he,ge,_e,fe,ve,Ne){for(var Ue=se.call(this,ie,he,ge,_e),Xe=0;Xe<Ue.length;Xe++){var Ze=Ue[Xe];Xe===0&&(Ne?I.call(this,Ze.x1+W,Ze.y1+J):B.call(this,Ze.x1+W,Ze.y1+J)),q.call(this,W,J,Ze.x2,Ze.y2,Ze.x3,Ze.y3,Ze.x4,Ze.y4)}ve?V.call(this):S.call(this,fe)},S=function(W){switch(W){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(W,J){this.pdf.internal.out(t(W)+" "+n(J)+" m")},w=function(W){var J;switch(W.align){case"right":case"end":J="right";break;case"center":J="center";break;default:J="left"}var ie=this.pdf.getTextDimensions(W.text),he=ce.call(this,W.y),ge=D.call(this,he)-ie.h,_e=this.ctx.transform.applyToPoint(new l(W.x,he)),fe=this.ctx.transform.decompose(),ve=new h;ve=(ve=(ve=ve.multiply(fe.translate)).multiply(fe.skew)).multiply(fe.scale);for(var Ne,Ue,Xe,Ze=this.ctx.transform.applyToRectangle(new u(W.x,he,ie.w,ie.h)),ze=ve.applyToRectangle(new u(W.x,ge,ie.w,ie.h)),de=L.call(this,ze),Ft=[],Et=0;Et<de.length;Et+=1)Ft.indexOf(de[Et])===-1&&Ft.push(de[Et]);if($(Ft),this.autoPaging)for(var wt=Ft[0],He=Ft[Ft.length-1],ot=wt;ot<He+1;ot++){this.pdf.setPage(ot);var rt=ot===1?this.posY+this.margin[0]:this.margin[0],Jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_t=this.pdf.internal.pageSize.height-this.margin[2],mr=_t-this.margin[0],zt=this.pdf.internal.pageSize.width-this.margin[1],qt=zt-this.margin[3],vr=ot===1?0:Jt+(ot-2)*mr;if(this.ctx.clip_path.length!==0){var Mt=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(Ne,this.posX+this.margin[3],-1*vr+rt),oe.call(this,"fill",!0),this.path=Mt}var Tt=O([JSON.parse(JSON.stringify(ze))],this.posX+this.margin[3],-vr+rt+this.ctx.prevPageLastElemOffset)[0];W.scale>=.01&&(Ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ue*W.scale),Xe=this.lineWidth,this.lineWidth=Xe*W.scale);var jt=this.autoPaging!=="text";if(jt||Tt.y+Tt.h<=_t){if(jt||Tt.y>=rt&&Tt.x<=zt){var pt=jt?W.text:this.pdf.splitTextToSize(W.text,W.maxWidth||zt-Tt.x)[0],Ir=O([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-vr+rt+this.ctx.prevPageLastElemOffset)[0],ir=jt&&(ot>wt||ot<He)&&E.call(this);ir&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qt,mr,null).clip().discardPath()),this.pdf.text(pt,Ir.x,Ir.y,{angle:W.angle,align:J,renderingMode:W.renderingMode}),ir&&this.pdf.restoreGraphicsState()}}else Tt.y<_t&&(this.ctx.prevPageLastElemOffset+=_t-Tt.y);W.scale>=.01&&(this.pdf.setFontSize(Ue),this.lineWidth=Xe)}else W.scale>=.01&&(Ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ue*W.scale),Xe=this.lineWidth,this.lineWidth=Xe*W.scale),this.pdf.text(W.text,_e.x+this.posX,_e.y+this.posY,{angle:W.angle,align:J,renderingMode:W.renderingMode,maxWidth:W.maxWidth}),W.scale>=.01&&(this.pdf.setFontSize(Ue),this.lineWidth=Xe)},B=function(W,J,ie,he){ie=ie||0,he=he||0,this.pdf.internal.out(t(W+ie)+" "+n(J+he)+" l")},M=function(W,J,ie){return this.pdf.lines(W,J,ie,null,null)},q=function(W,J,ie,he,ge,_e,fe,ve){this.pdf.internal.out([e(i(ie+W)),e(s(he+J)),e(i(ge+W)),e(s(_e+J)),e(i(fe+W)),e(s(ve+J)),"c"].join(" "))},se=function(W,J,ie,he){for(var ge=2*Math.PI,_e=Math.PI/2;J>ie;)J-=ge;var fe=Math.abs(ie-J);fe<ge&&he&&(fe=ge-fe);for(var ve=[],Ne=he?-1:1,Ue=J;fe>1e-5;){var Xe=Ue+Ne*Math.min(fe,_e);ve.push(te.call(this,W,Ue,Xe)),fe-=Math.abs(Xe-Ue),Ue=Xe}return ve},te=function(W,J,ie){var he=(ie-J)/2,ge=W*Math.cos(he),_e=W*Math.sin(he),fe=ge,ve=-_e,Ne=fe*fe+ve*ve,Ue=Ne+fe*ge+ve*_e,Xe=4/3*(Math.sqrt(2*Ne*Ue)-Ue)/(fe*_e-ve*ge),Ze=fe-Xe*ve,ze=ve+Xe*fe,de=Ze,Ft=-ze,Et=he+J,wt=Math.cos(Et),He=Math.sin(Et);return{x1:W*Math.cos(J),y1:W*Math.sin(J),x2:Ze*wt-ze*He,y2:Ze*He+ze*wt,x3:de*wt-Ft*He,y3:de*He+Ft*wt,x4:W*Math.cos(ie),y4:W*Math.sin(ie)}},re=function(W){return 180*W/Math.PI},xe=function(W,J,ie,he,ge,_e){var fe=W+.5*(ie-W),ve=J+.5*(he-J),Ne=ge+.5*(ie-ge),Ue=_e+.5*(he-_e),Xe=Math.min(W,ge,fe,Ne),Ze=Math.max(W,ge,fe,Ne),ze=Math.min(J,_e,ve,Ue),de=Math.max(J,_e,ve,Ue);return new u(Xe,ze,Ze-Xe,de-ze)},be=function(W,J,ie,he,ge,_e,fe,ve){var Ne,Ue,Xe,Ze,ze,de,Ft,Et,wt,He,ot,rt,Jt,_t,mr=ie-W,zt=he-J,qt=ge-ie,vr=_e-he,Mt=fe-ge,Tt=ve-_e;for(Ue=0;Ue<41;Ue++)wt=(Ft=(Xe=W+(Ne=Ue/40)*mr)+Ne*((ze=ie+Ne*qt)-Xe))+Ne*(ze+Ne*(ge+Ne*Mt-ze)-Ft),He=(Et=(Ze=J+Ne*zt)+Ne*((de=he+Ne*vr)-Ze))+Ne*(de+Ne*(_e+Ne*Tt-de)-Et),Ue==0?(ot=wt,rt=He,Jt=wt,_t=He):(ot=Math.min(ot,wt),rt=Math.min(rt,He),Jt=Math.max(Jt,wt),_t=Math.max(_t,He));return new u(Math.round(ot),Math.round(rt),Math.round(Jt-ot),Math.round(_t-rt))},Z=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var W,J,ie=(W=this.ctx.lineDash,J=this.ctx.lineDashOffset,JSON.stringify({lineDash:W,lineDashOffset:J}));this.prevLineDash!==ie&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ie)}}})(Ct.API),(function(r){var e=function(l){var u,h,d,g,b,_,v,N,E,L;for(h=[],d=0,g=(l+=u="\0\0\0\0".slice(l.length%4||4)).length;g>d;d+=4)(b=(l.charCodeAt(d)<<24)+(l.charCodeAt(d+1)<<16)+(l.charCodeAt(d+2)<<8)+l.charCodeAt(d+3))!==0?(_=(b=((b=((b=((b=(b-(L=b%85))/85)-(E=b%85))/85)-(N=b%85))/85)-(v=b%85))/85)%85,h.push(_+33,v+33,N+33,E+33,L+33)):h.push(122);return(function(k,O){for(var $=O;$>0;$--)k.pop()})(h,u.length),String.fromCharCode.apply(String,h)+"~>"},t=function(l){var u,h,d,g,b,_=String,v="length",N=255,E="charCodeAt",L="slice",k="replace";for(l[L](-2),l=l[L](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),d=[],g=0,b=(l+=u="uuuuu"[L](l[v]%5||5))[v];b>g;g+=5)h=52200625*(l[E](g)-33)+614125*(l[E](g+1)-33)+7225*(l[E](g+2)-33)+85*(l[E](g+3)-33)+(l[E](g+4)-33),d.push(N&h>>24,N&h>>16,N&h>>8,N&h);return(function(O,$){for(var F=$;F>0;F--)O.pop()})(d,u[v]),_.fromCharCode.apply(_,d)},n=function(l){return l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(l){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),u.test(l)===!1)return"";for(var h="",d=0;d<l.length;d+=2)h+=String.fromCharCode("0x"+(l[d]+l[d+1]));return h},s=function(l){for(var u=new Uint8Array(l.length),h=l.length;h--;)u[h]=l.charCodeAt(h);return(u=s1(u)).reduce(function(d,g){return d+String.fromCharCode(g)},"")};r.processDataByFilters=function(l,u){var h=0,d=l||"",g=[];for(typeof(u=u||[])=="string"&&(u=[u]),h=0;h<u.length;h+=1)switch(u[h]){case"ASCII85Decode":case"/ASCII85Decode":d=t(d),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=i(d),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=n(d),g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=s(d),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[h]+'" is not implemented')}return{data:d,reverseChain:g.reverse().join(" ")}}})(Ct.API),(function(r){r.loadFile=function(e,t,n){return(function(i,s,l){s=s!==!1,l=typeof l=="function"?l:function(){};var u=void 0;try{u=(function(h,d,g){var b=new XMLHttpRequest,_=0,v=function(N){var E=N.length,L=[],k=String.fromCharCode;for(_=0;_<E;_+=1)L.push(k(255&N.charCodeAt(_)));return L.join("")};if(b.open("GET",h,!d),b.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(b.onload=function(){b.status===200?g(v(this.responseText)):g(void 0)}),b.send(null),d&&b.status===200)return v(b.responseText)})(i,s,l)}catch{}return u})(e,t,n)},r.loadImageFile=r.loadFile})(Ct.API),(function(r){function e(){return(Qt.html2canvas?Promise.resolve(Qt.html2canvas):pu(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function t(){return(Qt.DOMPurify?Promise.resolve(Qt.DOMPurify):pu(()=>import("./purify.es-aGzT-_H7.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var n=function(u){var h=Gr(u);return h==="undefined"?"undefined":h==="string"||u instanceof String?"string":h==="number"||u instanceof Number?"number":h==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":h==="object"?"object":"unknown"},i=function(u,h){var d=document.createElement(u);for(var g in h.className&&(d.className=h.className),h.innerHTML&&h.dompurify&&(d.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)d.style[g]=h.style[g];return d},s=function u(h,d){for(var g=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),b=h.firstChild;b;b=b.nextSibling)d!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||g.appendChild(u(b,d));return h.nodeType===1&&(h.nodeName==="CANVAS"?(g.width=h.width,g.height=h.height,g.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(g.value=h.value),g.addEventListener("load",function(){g.scrollTop=h.scrollTop,g.scrollLeft=h.scrollLeft},!0)),g},l=function u(h){var d=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),g=u.convert(Promise.resolve(),d);return(g=g.setProgress(1,u,1,[u])).set(h)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(u,h){return u.__proto__=h||l.prototype,u},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(u,h){return this.then(function(){switch(h=h||(function(d){switch(n(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(u),h){case"string":return this.then(t).then(function(d){return this.set({src:i("div",{innerHTML:u,dompurify:d})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},l.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(h){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,h(this.prop.container,d)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(h){var d=this.opt.jsPDF,g=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,_=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete _.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=g,g)for(var v=0;v<g.length;++v){var N=g[v],E=N.src.find(function(L){return L.format==="truetype"});E&&d.addFont(E.url,N.ref.name,N.ref.style)}return _.windowHeight=_.windowHeight||0,_.windowHeight=_.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):_.windowHeight,d.context2d.save(!0),h(this.prop.container,_)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(u,h,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(u,h):this.outputPdf(u,h)},l.prototype.outputPdf=function(u,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,h)})},l.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},l.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(u){if(n(u)!=="object")return this;var h=Object.keys(u||{}).map(function(d){if(d in l.template.prop)return function(){this.prop[d]=u[d]};switch(d){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[d]=u[d]}}},this);return this.then(function(){return this.thenList(h)})},l.prototype.get=function(u,h){return this.then(function(){var d=u in l.template.prop?this.prop[u]:this.opt[u];return h?h(d):d})},l.prototype.setMargin=function(u){return this.then(function(){switch(n(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},l.prototype.setPageSize=function(u){function h(d,g){return Math.floor(d*g/72*96)}return this.then(function(){(u=u||Ct.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:h(u.inner.width,u.k),height:h(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},l.prototype.setProgress=function(u,h,d,g){return u!=null&&(this.progress.val=u),h!=null&&(this.progress.state=h),d!=null&&(this.progress.n=d),g!=null&&(this.progress.stack=g),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(u,h,d,g){return this.setProgress(u?this.progress.val+u:null,h||null,d?this.progress.n+d:null,g?this.progress.stack.concat(g):null)},l.prototype.then=function(u,h){var d=this;return this.thenCore(u,h,function(g,b){return d.updateProgress(null,null,1,[g]),Promise.prototype.then.call(this,function(_){return d.updateProgress(null,g),_}).then(g,b).then(function(_){return d.updateProgress(1),_})})},l.prototype.thenCore=function(u,h,d){d=d||Promise.prototype.then;var g=this;u&&(u=u.bind(g)),h&&(h=h.bind(g));var b=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?g:l.convert(Object.assign({},g),Promise.prototype),_=d.call(b,u,h);return l.convert(_,g.__proto__)},l.prototype.thenExternal=function(u,h){return Promise.prototype.then.call(this,u,h)},l.prototype.thenList=function(u){var h=this;return u.forEach(function(d){h=h.thenCore(d)}),h},l.prototype.catch=function(u){u&&(u=u.bind(this));var h=Promise.prototype.catch.call(this,u);return l.convert(h,this)},l.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},l.prototype.error=function(u){return this.then(function(){throw new Error(u)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Ct.getPageSize=function(u,h,d){if(Gr(u)==="object"){var g=u;u=g.orientation,h=g.unit||h,d=g.format||d}h=h||"mm",d=d||"a4",u=(""+(u||"P")).toLowerCase();var b,_=(""+d).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+h}var N,E=0,L=0;if(v.hasOwnProperty(_))E=v[_][1]/b,L=v[_][0]/b;else try{E=d[1],L=d[0]}catch{throw new Error("Invalid format: "+d)}if(u==="p"||u==="portrait")u="p",L>E&&(N=L,L=E,E=N);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",E>L&&(N=L,L=E,E=N)}return{width:L,height:E,unit:h,k:b,orientation:u}},r.html=function(u,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(Lg):null;var d=new l(h);return h.worker?d:d.from(u).doCallback()}})(Ct.API),Ct.API.addJS=function(r){return kx=r,this.internal.events.subscribe("postPutResources",function(){zp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(zp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Cx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+kx+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){zp!==void 0&&Cx!==void 0&&this.internal.out("/Names <</JavaScript "+zp+" 0 R>>")}),this},(function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var l=i[s],u=n.exec(l);if(u!=null){var h=u[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(l)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,g=[];for(s=0;s<d;s++){var b=t.internal.newObject();g.push(b);var _=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+_.objId+" 0 R /XYZ null null null]>> endobj")}var v=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<g.length;s++)t.internal.write("(page_"+(s+1)+")"+g[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+v+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,i,s){var l={title:i,options:s,children:[]};return n==null&&(n=this.root),n.children.push(l),l},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var l=n.children[s];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var u=this.count=this.count_r({count:0},l);if(u>0&&this.line("/Count "+u),l.options&&l.options.pageNumber){var h=t.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,i){for(var s=0;s<i.children.length;s++)n.count++,this.count_r(n,i.children[s]);return n.count}}])})(Ct.API),(function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,i,s,l,u){var h,d=this.decode.DCT_DECODE,g=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=l||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,h=(function(b){for(var _,v=256*b.charCodeAt(4)+b.charCodeAt(5),N=b.length,E={width:0,height:0,numcomponents:1},L=4;L<N;L+=2){if(L+=v,e.indexOf(b.charCodeAt(L+1))!==-1){_=256*b.charCodeAt(L+5)+b.charCodeAt(L+6),E={width:256*b.charCodeAt(L+7)+b.charCodeAt(L+8),height:_,numcomponents:b.charCodeAt(L+9)};break}v=256*b.charCodeAt(L+2)+b.charCodeAt(L+3)}return E})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),h.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}g={data:t,width:h.width,height:h.height,colorSpace:u,bitsPerComponent:8,filter:d,index:n,alias:i}}return g}})(Ct.API),Ct.API.processPNG=function(r,e,t,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var i,s=sk(r,{checkCrc:!0}),l=s.width,u=s.height,h=s.channels,d=s.palette,g=s.depth;i=d&&h===1?(function(C){for(var S=C.width,V=C.height,I=C.data,w=C.palette,B=C.depth,M=!1,q=[],se=[],te=void 0,re=!1,xe=0,be=0;be<w.length;be++){var Z=Ry(w[be],4),W=Z[0],J=Z[1],ie=Z[2],he=Z[3];q.push(W,J,ie),he!=null&&(he===0?(xe++,se.length<1&&se.push(be)):he<255&&(re=!0))}if(re||xe>1){M=!0,se=void 0;var ge=S*V;te=new Uint8Array(ge);for(var _e=new DataView(I.buffer),fe=0;fe<ge;fe++){var ve=zg(_e,fe,B),Ne=Ry(w[ve],4)[3];te[fe]=Ne}}else xe===0&&(se=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:M?8:void 0,colorBytes:I,alphaBytes:te,needSMask:M,palette:q,mask:se}})(s):h===2||h===4?(function(C){for(var S=C.data,V=C.width,I=C.height,w=C.channels,B=C.depth,M=w===2?"DeviceGray":"DeviceRGB",q=w-1,se=V*I,te=q,re=se*te,xe=1*se,be=Math.ceil(re*B/8),Z=Math.ceil(xe*B/8),W=new Uint8Array(be),J=new Uint8Array(Z),ie=new DataView(S.buffer),he=new DataView(W.buffer),ge=new DataView(J.buffer),_e=!1,fe=0;fe<se;fe++){for(var ve=fe*w,Ne=0;Ne<te;Ne++)Fx(he,zg(ie,ve+Ne,B),fe*te+Ne,B);var Ue=zg(ie,ve+te,B);Ue<(1<<B)-1&&(_e=!0),Fx(ge,Ue,1*fe,B)}return{colorSpace:M,colorsPerPixel:q,sMaskBitsPerComponent:_e?B:void 0,colorBytes:W,alphaBytes:J,needSMask:_e}})(s):(function(C){var S=C.data,V=C.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:V,colorsPerPixel:V==="DeviceGray"?1:3,colorBytes:S instanceof Uint16Array?(function(I){for(var w=I.length,B=new Uint8Array(2*w),M=new DataView(B.buffer,B.byteOffset,B.byteLength),q=0;q<w;q++)M.setUint16(2*q,I[q],!1);return B})(S):S,needSMask:!1}})(s);var b,_,v,N=i,E=N.colorSpace,L=N.colorsPerPixel,k=N.sMaskBitsPerComponent,O=N.colorBytes,$=N.alphaBytes,F=N.needSMask,oe=N.palette,ce=N.mask,D=null;return n!==Ct.API.image_compression.NONE&&typeof s1=="function"?(D=(function(C){var S;switch(C){case Ct.API.image_compression.FAST:S=11;break;case Ct.API.image_compression.MEDIUM:S=13;break;case Ct.API.image_compression.SLOW:S=14;break;default:S=12}return S})(n),b=this.decode.FLATE_DECODE,_="/Predictor ".concat(D," /Colors ").concat(L," /BitsPerComponent ").concat(g," /Columns ").concat(l),r=Rx(O,Math.ceil(l*L*g/8),L,g,n),F&&(v=Rx($,Math.ceil(l*k/8),1,k,n))):(b=void 0,_=void 0,r=O,F&&(v=$)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(v&&this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),{alias:t,data:r,index:e,filter:b,decodeParameters:_,transparency:ce,palette:oe,sMask:v,predictor:D,width:l,height:u,bitsPerComponent:g,sMaskBitsPerComponent:k,colorSpace:E}}},(function(r){r.processGIF89A=function(e,t,n,i){var s=new kk(e),l=s.width,u=s.height,h=[];s.decodeAndBlitFrameRGBA(0,h);var d={data:h,width:l,height:u},g=new Vg(100).encode(d,100);return r.processJPEG.call(this,g,t,n,i)},r.processGIF87A=r.processGIF89A})(Ct.API),ha.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ha.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){nn.log("bit decode error:"+t)}},ha.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+8*i*4,u=0;u<8&&8*i+u<this.width;u++){var h=this.palette[s>>7-u&1];this.data[l+4*u]=h.blue,this.data[l+4*u+1]=h.green,this.data[l+4*u+2]=h.red,this.data[l+4*u+3]=255}t!==0&&(this.pos+=4-t)}},ha.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<r;i++){var s=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+2*i*4,u=s>>4,h=15&s,d=this.palette[u];if(this.data[l]=d.blue,this.data[l+1]=d.green,this.data[l+2]=d.red,this.data[l+3]=255,2*i+1>=this.width)break;d=this.palette[h],this.data[l+4]=d.blue,this.data[l+4+1]=d.green,this.data[l+4+2]=d.red,this.data[l+4+3]=255}e!==0&&(this.pos+=4-e)}},ha.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;if(i<this.palette.length){var l=this.palette[i];this.data[s]=l.red,this.data[s+1]=l.green,this.data[s+2]=l.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}r!==0&&(this.pos+=4-r)}},ha.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(s&e)/e*255|0,u=(s>>5&e)/e*255|0,h=(s>>10&e)/e*255|0,d=s>>15?255:0,g=n*this.width*4+4*i;this.data[g]=h,this.data[g+1]=u,this.data[g+2]=l,this.data[g+3]=d}this.pos+=r}},ha.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(l&e)/e*255|0,h=(l>>5&t)/t*255|0,d=(l>>11)/e*255|0,g=i*this.width*4+4*s;this.data[g]=d,this.data[g+1]=h,this.data[g+2]=u,this.data[g+3]=255}this.pos+=r}},ha.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*t;this.data[l]=s,this.data[l+1]=i,this.data[l+2]=n,this.data[l+3]=255}this.pos+=this.width%4}},ha.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=s,this.data[u+1]=i,this.data[u+2]=n,this.data[u+3]=l}},ha.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(e,t,n,i){var s=new ha(e,!1),l=s.width,u=s.height,h={data:s.getData(),width:l,height:u},d=new Vg(100).encode(h,100);return r.processJPEG.call(this,d,t,n,i)}})(Ct.API),Vx.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(e,t,n,i){var s=new Vx(e),l=s.width,u=s.height,h={data:s.getData(),width:l,height:u},d=new Vg(100).encode(h,100);return r.processJPEG.call(this,d,t,n,i)}})(Ct.API),Ct.API.processRGBA=function(r,e,t){for(var n=r.data,i=n.length,s=new Uint8Array(i/4*3),l=new Uint8Array(i/4),u=0,h=0,d=0;d<i;d+=4){var g=n[d],b=n[d+1],_=n[d+2],v=n[d+3];s[u++]=g,s[u++]=b,s[u++]=_,l[h++]=v}var N=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:N,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Ct.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},pd=Ct.API,Vp=pd.getCharWidthsArray=function(r,e){var t,n,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),l=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:i.metadata.Unicode.widths,h=u.fof?u.fof:1,d=e.kerning?e.kerning:i.metadata.Unicode.kerning,g=d.fof?d.fof:1,b=e.doKerning!==!1,_=0,v=r.length,N=0,E=u[0]||h,L=[];for(t=0;t<v;t++)n=r.charCodeAt(t),typeof i.metadata.widthOfString=="function"?L.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+l*(1e3/s)||0)/1e3):(_=b&&Gr(d[n])==="object"&&!isNaN(parseInt(d[n][N],10))?d[n][N]/g:0,L.push((u[n]||E)/h+_)),N=n;return L},Ix=pd.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return pd.processArabic&&(r=pd.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,i)/t:Vp.apply(this,arguments).reduce(function(s,l){return s+l},0)},Ex=function(r,e,t,n){for(var i=[],s=0,l=r.length,u=0;s!==l&&u+e[s]<t;)u+=e[s],s++;i.push(r.slice(0,s));var h=s;for(u=0;s!==l;)u+e[s]>n&&(i.push(r.slice(h,s)),u=0,h=s),u+=e[s],s++;return h!==s&&i.push(r.slice(h,s)),i},jx=function(r,e,t){t||(t={});var n,i,s,l,u,h,d,g=[],b=[g],_=t.textIndent||0,v=0,N=0,E=r.split(" "),L=Vp.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?E[0].length+2:t.lineIndent||0){var k=Array(h).join(" "),O=[];E.map(function(F){(F=F.split(/\s*\n/)).length>1?O=O.concat(F.map(function(oe,ce){return(ce&&oe.length?`
`:"")+oe})):O.push(F[0])}),E=O,h=Ix.apply(this,[k,t])}for(s=0,l=E.length;s<l;s++){var $=0;if(n=E[s],h&&n[0]==`
`&&(n=n.substr(1),$=1),_+v+(N=(i=Vp.apply(this,[n,t])).reduce(function(F,oe){return F+oe},0))>e||$){if(N>e){for(u=Ex.apply(this,[n,i,e-(_+v),e]),g.push(u.shift()),g=[u.pop()];u.length;)b.push([u.shift()]);N=i.slice(n.length-(g[0]?g[0].length:0)).reduce(function(F,oe){return F+oe},0)}else g=[n];b.push(g),_=N+h,v=L}else g.push(n),_+=v+N,v=L}return d=h?function(F,oe){return(oe?k:"")+F.join(" ")}:function(F){return F.join(" ")},b.map(d)},pd.splitTextToSize=function(r,e,t){var n,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var b=this.internal.getFont(g.fontName,g.fontStyle),_="Unicode";return b.metadata[_]?{widths:b.metadata[_].widths||{0:1},kerning:b.metadata[_].kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var l=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var u,h,d=[];for(u=0,h=n.length;u<h;u++)d=d.concat(jx.apply(this,[n[u],l,s]));return d},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",n={},i={},s=0;s<16;s++)n[t[s]]=e[s],i[e[s]]=t[s];var l=function(_){return"0x"+parseInt(_,10).toString(16)},u=r.__fontmetrics__.compress=function(_){var v,N,E,L,k=["{"];for(var O in _){if(v=_[O],isNaN(parseInt(O,10))?N="'"+O+"'":(O=parseInt(O,10),N=(N=l(O).slice(2)).slice(0,-1)+i[N.slice(-1)]),typeof v=="number")v<0?(E=l(v).slice(3),L="-"):(E=l(v).slice(2),L=""),E=L+E.slice(0,-1)+i[E.slice(-1)];else{if(Gr(v)!=="object")throw new Error("Don't know what to do with value type "+Gr(v)+".");E=u(v)}k.push(N+E)}return k.push("}"),k.join("")},h=r.__fontmetrics__.uncompress=function(_){if(typeof _!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,N,E,L,k={},O=1,$=k,F=[],oe="",ce="",D=_.length-1,C=1;C<D;C+=1)(L=_[C])=="'"?v?(E=v.join(""),v=void 0):v=[]:v?v.push(L):L=="{"?(F.push([$,E]),$={},E=void 0):L=="}"?((N=F.pop())[0][N[1]]=$,E=void 0,$=N[0]):L=="-"?O=-1:E===void 0?n.hasOwnProperty(L)?(oe+=n[L],E=parseInt(oe,16)*O,O=1,oe=""):oe+=L:n.hasOwnProperty(L)?(ce+=n[L],$[E]=parseInt(ce,16)*O,O=1,E=void 0,ce=""):ce+=L;return k},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},b={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(_){var v=_.font,N=b.Unicode[v.postScriptName];N&&(v.metadata.Unicode={},v.metadata.Unicode.widths=N.widths,v.metadata.Unicode.kerning=N.kerning);var E=g.Unicode[v.postScriptName];E&&(v.metadata.Unicode.encoding=E,v.encoding=E.codePages[0])}])})(Ct.API),(function(r){var e=function(t){for(var n=t.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=t.charCodeAt(s);return i};r.API.events.push(["addFont",function(t){var n=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(l,u){u=/^\x00\x01\x00\x00/.test(u)?e(u):e(Jp(u)),l.metadata=r.API.TTFFont.open(u),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(i,n)}}])})(Ct),Ct.API.addSvgAsImage=function(r,e,t,n,i,s,l,u){if(isNaN(e)||isNaN(t))throw nn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw nn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=n,h.height=i;var d=h.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,h.width,h.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return(Qt.canvg?Promise.resolve(Qt.canvg):pu(()=>import("./index.es-XRnu0Jz6.js"),[])).catch(function(_){return Promise.reject(new Error("Could not load canvg: "+_))}).then(function(_){return _.default?_.default:_}).then(function(_){return _.fromString(d,r,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(g)}).then(function(){b.addImage(h.toDataURL("image/jpeg",1),e,t,n,i,l,u)})},Ct.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,t);return this},Ct.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,i,s,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(l),h=[],d=0,g=0,b=0;function _(N,E){var L,k=!1;for(L=0;L<N.length;L+=1)N[L]===E&&(k=!0);return k}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var v=u.length;for(b=0;b<v;b+=1)t[u[b]].value=t[u[b]].defaultValue,t[u[b]].explicitSet=!1}if(Gr(r)==="object"){for(i in r)if(s=r[i],_(u,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&_(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(d=0;d<s.length;d+=1)if(n=!0,s[d].length===1&&typeof s[d][0]=="number")h.push(String(s[d]-1));else if(s[d].length>1){for(g=0;g<s[d].length;g+=1)typeof s[d][g]!="number"&&(n=!1);n===!0&&h.push([s[d][0]-1,s[d][1]-1].join(" "))}t[i].value="["+h.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,E=[];for(N in t)t[N].explicitSet===!0&&(t[N].type==="name"?E.push("/"+N+" /"+t[N].value):E.push("/"+N+" "+t[N].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+l.length+u.length+i.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+s+l+u+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Ct.API),(function(r){var e=r.API,t=e.pdfEscape16=function(s,l){for(var u,h=l.metadata.Unicode.widths,d=["","0","00","000","0000"],g=[""],b=0,_=s.length;b<_;++b){if(u=l.metadata.characterToGlyph(s.charCodeAt(b)),l.metadata.glyIdsUsed.push(u),l.metadata.toUnicode[u]=s.charCodeAt(b),h.indexOf(u)==-1&&(h.push(u),h.push([parseInt(l.metadata.widthOfGlyph(u),10)])),u=="0")return g.join("");u=u.toString(16),g.push(d[4-u.length],u)}return g.join("")},n=function(s){var l,u,h,d,g,b,_;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],b=0,_=(u=Object.keys(s).sort(function(v,N){return v-N})).length;b<_;b++)l=u[b],h.length>=100&&(g+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),s[l]!==void 0&&s[l]!==null&&typeof s[l].toString=="function"&&(d=("0000"+s[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),h.push("<"+l+"><"+d+">"));return h.length&&(g+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),g+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(l){var u=l.font,h=l.out,d=l.newObject,g=l.putStream;if(u.metadata instanceof r.API.TTFFont&&u.encoding==="Identity-H"){for(var b=u.metadata.Unicode.widths,_=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),v="",N=0;N<_.length;N++)v+=String.fromCharCode(_[N]);var E=d();g({data:v,addLength1:!0,objectId:E}),h("endobj");var L=d();g({data:n(u.metadata.toUnicode),addLength1:!0,objectId:L}),h("endobj");var k=d();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+Sd(u.fontName)),h("/FontFile2 "+E+" 0 R"),h("/FontBBox "+r.API.PDFObject.convert(u.metadata.bbox)),h("/Flags "+u.metadata.flags),h("/StemV "+u.metadata.stemV),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h(">>"),h("endobj");var O=d();h("<<"),h("/Type /Font"),h("/BaseFont /"+Sd(u.fontName)),h("/FontDescriptor "+k+" 0 R"),h("/W "+r.API.PDFObject.convert(b)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+u.encoding+")"),h(">>"),h(">>"),h("endobj"),u.objectNumber=d(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+L+" 0 R"),h("/BaseFont /"+Sd(u.fontName)),h("/Encoding /"+u.encoding),h("/DescendantFonts ["+O+" 0 R]"),h(">>"),h("endobj"),u.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(l){var u=l.font,h=l.out,d=l.newObject,g=l.putStream;if(u.metadata instanceof r.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var b=u.metadata.rawData,_="",v=0;v<b.length;v++)_+=String.fromCharCode(b[v]);var N=d();g({data:_,addLength1:!0,objectId:N}),h("endobj");var E=d();g({data:n(u.metadata.toUnicode),addLength1:!0,objectId:E}),h("endobj");var L=d();h("<<"),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h("/StemV "+u.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+N+" 0 R"),h("/Flags 96"),h("/FontBBox "+r.API.PDFObject.convert(u.metadata.bbox)),h("/FontName /"+Sd(u.fontName)),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h(">>"),h("endobj"),u.objectNumber=d();for(var k=0;k<u.metadata.hmtx.widths.length;k++)u.metadata.hmtx.widths[k]=parseInt(u.metadata.hmtx.widths[k]*(1e3/u.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+Sd(u.fontName)+"/FontDescriptor "+L+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),h("endobj"),u.isAlreadyPutted=!0}})(s)}]);var i=function(s){var l,u=s.text||"",h=s.x,d=s.y,g=s.options||{},b=s.mutex||{},_=b.pdfEscape,v=b.activeFontKey,N=b.fonts,E=v,L="",k=0,O="",$=N[E].encoding;if(N[E].encoding!=="Identity-H")return{text:u,x:h,y:d,options:g,mutex:b};for(O=u,E=v,Array.isArray(u)&&(O=u[0]),k=0;k<O.length;k+=1)N[E].metadata.hasOwnProperty("cmap")&&(l=N[E].metadata.cmap.unicode.codeMap[O[k].charCodeAt(0)]),l||O[k].charCodeAt(0)<256&&N[E].metadata.hasOwnProperty("Unicode")?L+=O[k]:L+="";var F="";return parseInt(E.slice(1))<14||$==="WinAnsiEncoding"?F=_(L,E).split("").map(function(oe){return oe.charCodeAt(0).toString(16)}).join(""):$==="Identity-H"&&(F=t(L,N[E])),b.isHex=!0,{text:F,x:h,y:d,options:g,mutex:b}};e.events.push(["postProcessText",function(s){var l=s.text||"",u=[],h={text:l,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(l)){var d=0;for(d=0;d<l.length;d+=1)Array.isArray(l[d])&&l[d].length===3?u.push([i(Object.assign({},h,{text:l[d][0]})).text,l[d][1],l[d][2]]):u.push(i(Object.assign({},h,{text:l[d]})).text);s.text=u}else s.text=i(Object.assign({},h,{text:l})).text}])})(Ct),(function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Ct.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var i,s,l,u,h,d,g,b=e,_=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},L=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],k=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,$=0;this.__bidiEngine__={};var F=function(I){var w=I.charCodeAt(),B=w>>8,M=E[B];return M!==void 0?b[256*M+(255&w)]:B===252||B===253?"AL":k.test(B)?"L":B===8?"R":"N"},oe=function(I){for(var w,B=0;B<I.length;B++){if((w=F(I.charAt(B)))==="L")return!1;if(w==="R")return!0}return!1},ce=function(I,w,B,M){var q,se,te,re,xe=w[M];switch(xe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"N":case"AN":break;case"EN":O&&(xe="AN");break;case"AL":O=!0,xe="R";break;case"WS":case"BN":xe="N";break;case"CS":M<1||M+1>=w.length||(q=B[M-1])!=="EN"&&q!=="AN"||(se=w[M+1])!=="EN"&&se!=="AN"?xe="N":O&&(se="AN"),xe=se===q?se:"N";break;case"ES":xe=(q=M>0?B[M-1]:"B")==="EN"&&M+1<w.length&&w[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&B[M-1]==="EN"){xe="EN";break}if(O){xe="N";break}for(te=M+1,re=w.length;te<re&&w[te]==="ET";)te++;xe=te<re&&w[te]==="EN"?"EN":"N";break;case"NSM":if(l&&!u){for(re=w.length,te=M+1;te<re&&w[te]==="NSM";)te++;if(te<re){var be=I[M],Z=be>=1425&&be<=2303||be===64286;if(q=w[te],Z&&(q==="R"||q==="AL")){xe="R";break}}}xe=M<1||(q=w[M-1])==="B"?"N":B[M-1];break;case"B":O=!1,i=!0,xe=$;break;case"S":s=!0,xe="N"}return xe},D=function(I,w,B){var M=I.split("");return B&&C(M,B,{hiLevel:$}),M.reverse(),w&&w.reverse(),M.join("")},C=function(I,w,B){var M,q,se,te,re,xe=-1,be=I.length,Z=0,W=[],J=$?v:_,ie=[];for(O=!1,i=!1,s=!1,q=0;q<be;q++)ie[q]=F(I[q]);for(se=0;se<be;se++){if(re=Z,W[se]=ce(I,ie,W,se),M=240&(Z=J[re][N[W[se]]]),Z&=15,w[se]=te=J[Z][5],M>0)if(M===16){for(q=xe;q<se;q++)w[q]=1;xe=-1}else xe=-1;if(J[Z][6])xe===-1&&(xe=se);else if(xe>-1){for(q=xe;q<se;q++)w[q]=te;xe=-1}ie[se]==="B"&&(w[se]=0),B.hiLevel|=te}s&&(function(he,ge,_e){for(var fe=0;fe<_e;fe++)if(he[fe]==="S"){ge[fe]=$;for(var ve=fe-1;ve>=0&&he[ve]==="WS";ve--)ge[ve]=$}})(ie,w,be)},S=function(I,w,B,M,q){if(!(q.hiLevel<I)){if(I===1&&$===1&&!i)return w.reverse(),void(B&&B.reverse());for(var se,te,re,xe,be=w.length,Z=0;Z<be;){if(M[Z]>=I){for(re=Z+1;re<be&&M[re]>=I;)re++;for(xe=Z,te=re-1;xe<te;xe++,te--)se=w[xe],w[xe]=w[te],w[te]=se,B&&(se=B[xe],B[xe]=B[te],B[te]=se);Z=re}Z++}}},V=function(I,w,B){var M=I.split(""),q={hiLevel:$};return B||(B=[]),C(M,B,q),(function(se,te,re){if(re.hiLevel!==0&&g)for(var xe,be=0;be<se.length;be++)te[be]===1&&(xe=L.indexOf(se[be]))>=0&&(se[be]=L[xe+1])})(M,B,q),S(2,M,w,B,q),S(1,M,w,B,q),M.join("")};return this.__bidiEngine__.doBidiReorder=function(I,w,B){if((function(q,se){if(se)for(var te=0;te<q.length;te++)se[te]=te;u===void 0&&(u=oe(q)),d===void 0&&(d=oe(q))})(I,w),l||!h||d)if(l&&h&&u^d)$=u?1:0,I=D(I,w,B);else if(!l&&h&&d)$=u?1:0,I=V(I,w,B),I=D(I,w);else if(!l||u||h||d){if(l&&!h&&u^d)I=D(I,w),u?($=0,I=V(I,w,B)):($=1,I=V(I,w,B),I=D(I,w));else if(l&&u&&!h&&d)$=1,I=V(I,w,B),I=D(I,w);else if(!l&&!h&&u^d){var M=g;u?($=1,I=V(I,w,B),$=0,g=!1,I=V(I,w,B),g=M):($=0,I=V(I,w,B),I=D(I,w),$=1,g=!1,I=V(I,w,B),g=M,I=D(I,w))}}else $=0,I=V(I,w,B);else $=u?1:0,I=V(I,w,B);return I},this.__bidiEngine__.setOptions=function(I){I&&(l=I.isInputVisual,h=I.isOutputVisual,u=I.isInputRtl,d=I.isOutputRtl,g=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var l=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var u=0;for(l=[],u=0;u<i.length;u+=1)Object.prototype.toString.call(i[u])==="[object Array]"?l.push([t.doBidiReorder(i[u][0]),i[u][1],i[u][2]]):l.push([t.doBidiReorder(i[u])]);n.text=l}else n.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(Ct),Ct.API.TTFFont=(function(){function r(e){var t;if(this.rawData=e,t=this.contents=new kc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Wk(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new Ik(this.contents),this.head=new jk(this),this.name=new Lk(this),this.cmap=new dS(this),this.toUnicode={},this.hhea=new Rk(this),this.maxp=new Fk(this),this.hmtx=new zk(this),this.post=new Nk(this),this.os2=new Pk(this),this.loca=new Dk(this),this.glyf=new Vk(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,u,h,d;for(d=[],l=0,u=(h=this.bbox).length;l<u;l++)e=h[l],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var i,s,l,u;for(l=0,s=0,u=(e=""+e).length;0<=u?s<u:s>u;s=0<=u?++s:--s)i=e.charCodeAt(s),l+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/t)||0;return l*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r})();var ba,kc=(function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,i;for(i=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,i,s,l,u,h;return e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),l=this.readByte(),u=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^s)+65536*(255^l)+256*(255^u)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*i+16777216*s+65536*l+256*u+h},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,i,s;for(s=[],n=0,i=e.length;n<i;n++)t=e[n],s.push(this.writeByte(t));return s},r})(),Ik=(function(){var r;function e(t){var n,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,i,s,l,u,h,d,g,b,_,v,N,E;for(E in v=Object.keys(t).length,h=Math.log(2),b=16*Math.floor(Math.log(v)/h),l=Math.floor(b/h),g=16*v-b,(i=new kc).writeInt(this.scalarType),i.writeShort(v),i.writeShort(b),i.writeShort(l),i.writeShort(g),s=16*v,d=i.pos+s,u=null,N=[],t)for(_=t[E],i.writeString(E),i.writeInt(r(_)),i.writeInt(d),i.writeInt(_.length),N=N.concat(_),E==="head"&&(u=d),d+=_.length;d%4;)N.push(0),d++;return i.write(N),n=2981146554-r(i.data),i.pos=u+8,i.writeUInt32(n),i.data},r=function(t){var n,i,s,l;for(t=hS.call(t);t.length%4;)t.push(0);for(s=new kc(t),i=0,n=0,l=t.length;n<l;n=n+=4)i+=s.readUInt32();return 4294967295&i},e})(),Ek={}.hasOwnProperty,Ya=function(r,e){for(var t in e)Ek.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};ba=(function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var jk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ya(r,ba),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var t;return(t=new kc).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},r})(),Ox=(function(){function r(e,t){var n,i,s,l,u,h,d,g,b,_,v,N,E,L,k,O,$;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),b=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(v=e.readUInt16(),_=v/2,e.pos+=6,s=(function(){var F,oe;for(oe=[],h=F=0;0<=_?F<_:F>_;h=0<=_?++F:--F)oe.push(e.readUInt16());return oe})(),e.pos+=2,E=(function(){var F,oe;for(oe=[],h=F=0;0<=_?F<_:F>_;h=0<=_?++F:--F)oe.push(e.readUInt16());return oe})(),d=(function(){var F,oe;for(oe=[],h=F=0;0<=_?F<_:F>_;h=0<=_?++F:--F)oe.push(e.readUInt16());return oe})(),g=(function(){var F,oe;for(oe=[],h=F=0;0<=_?F<_:F>_;h=0<=_?++F:--F)oe.push(e.readUInt16());return oe})(),i=(this.length-e.pos+this.offset)/2,u=(function(){var F,oe;for(oe=[],h=F=0;0<=i?F<i:F>i;h=0<=i?++F:--F)oe.push(e.readUInt16());return oe})(),h=k=0,$=s.length;k<$;h=++k)for(L=s[h],n=O=N=E[h];N<=L?O<=L:O>=L;n=N<=L?++O:--O)g[h]===0?l=n+d[h]:(l=u[g[h]/2+(n-N)-(_-h)]||0)!==0&&(l+=d[h]),this.codeMap[n]=65535&l}e.pos=b}return r.encode=function(e,t){var n,i,s,l,u,h,d,g,b,_,v,N,E,L,k,O,$,F,oe,ce,D,C,S,V,I,w,B,M,q,se,te,re,xe,be,Z,W,J,ie,he,ge,_e,fe,ve,Ne,Ue,Xe;switch(M=new kc,l=Object.keys(e).sort(function(Ze,ze){return Ze-ze}),t){case"macroman":for(E=0,L=(function(){var Ze=[];for(N=0;N<256;++N)Ze.push(0);return Ze})(),O={0:0},s={},q=0,xe=l.length;q<xe;q++)O[ve=e[i=l[q]]]==null&&(O[ve]=++E),s[i]={old:e[i],new:O[e[i]]},L[i]=O[e[i]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(L),{charMap:s,subtable:M.data,maxGlyphID:E+1};case"unicode":for(w=[],b=[],$=0,O={},n={},k=d=null,se=0,be=l.length;se<be;se++)O[oe=e[i=l[se]]]==null&&(O[oe]=++$),n[i]={old:oe,new:O[oe]},u=O[oe]-i,k!=null&&u===d||(k&&b.push(k),w.push(i),d=u),k=i;for(k&&b.push(k),b.push(65535),w.push(65535),V=2*(S=w.length),C=2*Math.pow(Math.log(S)/Math.LN2,2),_=Math.log(C/2)/Math.LN2,D=2*S-C,h=[],ce=[],v=[],N=te=0,Z=w.length;te<Z;N=++te){if(I=w[N],g=b[N],I===65535){h.push(0),ce.push(0);break}if(I-(B=n[I].new)>=32768)for(h.push(0),ce.push(2*(v.length+S-N)),i=re=I;I<=g?re<=g:re>=g;i=I<=g?++re:--re)v.push(n[i].new);else h.push(B-I),ce.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*S+2*v.length),M.writeUInt16(0),M.writeUInt16(V),M.writeUInt16(C),M.writeUInt16(_),M.writeUInt16(D),_e=0,W=b.length;_e<W;_e++)i=b[_e],M.writeUInt16(i);for(M.writeUInt16(0),fe=0,J=w.length;fe<J;fe++)i=w[fe],M.writeUInt16(i);for(Ne=0,ie=h.length;Ne<ie;Ne++)u=h[Ne],M.writeUInt16(u);for(Ue=0,he=ce.length;Ue<he;Ue++)F=ce[Ue],M.writeUInt16(F);for(Xe=0,ge=v.length;Xe<ge;Xe++)E=v[Xe],M.writeUInt16(E);return{charMap:n,subtable:M.data,maxGlyphID:$+1}}},r})(),dS=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ya(r,ba),r.prototype.tag="cmap",r.prototype.parse=function(e){var t,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)t=new Ox(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},r.encode=function(e,t){var n,i;return t==null&&(t="macroman"),n=Ox.encode(e,t),(i=new kc).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},r})(),Rk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ya(r,ba),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r})(),Pk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ya(r,ba),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n})(),this.charRange=(function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r})(),Nk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ya(r,ba),r.prototype.tag="post",r.prototype.parse=function(e){var t,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var l,u,h;for(h=[],s=l=0,u=this.file.maxp.numGlyphs;0<=u?l<u:l>u;s=0<=u?++l:--l)h.push(e.readUInt32());return h}).call(this)}},r})(),Bk=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Lk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ya(r,ba),r.prototype.tag="name",r.prototype.parse=function(e){var t,n,i,s,l,u,h,d,g,b,_;for(e.pos=this.offset,e.readShort(),t=e.readShort(),u=e.readShort(),n=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+u+e.readShort()});for(h={},s=g=0,b=n.length;g<b;s=++g)i=n[s],e.pos=i.offset,d=e.readString(i.length),l=new Bk(d,i),h[_=i.nameID]==null&&(h[_]=[]),h[i.nameID].push(l);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},r})(),Fk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ya(r,ba),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r})(),zk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ya(r,ba),r.prototype.tag="hmtx",r.prototype.parse=function(e){var t,n,i,s,l,u,h;for(e.pos=this.offset,this.metrics=[],t=0,u=this.file.hhea.numberOfMetrics;0<=u?t<u:t>u;t=0<=u?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,g;for(g=[],t=d=0;0<=i?d<i:d>i;t=0<=i?++d:--d)g.push(e.readInt16());return g})(),this.widths=(function(){var d,g,b,_;for(_=[],d=0,g=(b=this.metrics).length;d<g;d++)s=b[d],_.push(s.advance);return _}).call(this),n=this.widths[this.widths.length-1],h=[],t=l=0;0<=i?l<i:l>i;t=0<=i?++l:--l)h.push(this.widths.push(n));return h},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r})(),hS=[].slice,Vk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ya(r,ba),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var t,n,i,s,l,u,h,d,g,b;return e in this.cache?this.cache[e]:(s=this.file.loca,t=this.file.contents,n=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+n,l=(u=new kc(t.read(i))).readShort(),d=u.readShort(),b=u.readShort(),h=u.readShort(),g=u.readShort(),this.cache[e]=l===-1?new Mk(u,d,b,h,g):new Ok(u,l,d,b,h,g),this.cache[e]))},r.prototype.encode=function(e,t,n){var i,s,l,u,h;for(l=[],s=[],u=0,h=t.length;u<h;u++)i=e[t[u]],s.push(l.length),i&&(l=l.concat(i.encode(n)));return s.push(l.length),{table:l,offsets:s}},r})(),Ok=(function(){function r(e,t,n,i,s,l){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=l,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),Mk=(function(){function r(e,t,n,i,s){var l,u;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;u=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&u;)l.pos+=1&u?4:2,128&u?l.pos+=8:64&u?l.pos+=4:8&u&&(l.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new kc(hS.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r})(),Dk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ya(r,ba),r.prototype.tag="loca",r.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=4)s.push(e.readUInt32());return s}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),i=0,s=0,l=0;l<n.length;++l)if(n[l]=i,s<t.length&&t[s]==l){++s,n[l]=i;var u=this.offsets[l],h=this.offsets[l+1]-u;h>0&&(i+=h)}for(var d=new Array(4*n.length),g=0;g<n.length;++g)d[4*g+3]=255&n[g],d[4*g+2]=(65280&n[g])>>8,d[4*g+1]=(16711680&n[g])>>16,d[4*g]=(4278190080&n[g])>>24;return d},r})(),Wk=(function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[t],e[t]=i[n];return e},r.prototype.glyphsFor=function(e){var t,n,i,s,l,u,h;for(i={},l=0,u=e.length;l<u;l++)i[s=e[l]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(n=i[s])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(s in h=this.glyphsFor(t))n=h[s],i[s]=n;return i},r.prototype.encode=function(e,t){var n,i,s,l,u,h,d,g,b,_,v,N,E,L,k;for(i in n=dS.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(e),v={0:0},k=n.charMap)v[(h=k[i]).old]=h.new;for(N in _=n.maxGlyphID,l)N in v||(v[N]=_++);return g=(function(O){var $,F;for($ in F={},O)F[O[$]]=$;return F})(v),b=Object.keys(g).sort(function(O,$){return O-$}),E=(function(){var O,$,F;for(F=[],O=0,$=b.length;O<$;O++)u=b[O],F.push(g[u]);return F})(),s=this.font.glyf.encode(l,E,v),d=this.font.loca.encode(s.offsets,E),L={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(L["OS/2"]=this.font.os2.raw()),this.font.directory.encode(L)},r})();Ct.API.PDFObject=(function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,i,s,l;if(Array.isArray(t))return"["+(function(){var u,h,d;for(d=[],u=0,h=t.length;u<h;u++)n=t[u],d.push(e.convert(n));return d})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)l=t[i],s.push("/"+i+" "+e.convert(l));return s.push(">>"),s.join(`
`)}return""+t},e})();const un=r=>{const{calculatorName:e,inputs:t,results:n,necReferences:i,additionalInfo:s}=r,l=new Ct({orientation:"portrait",unit:"mm",format:"letter"}),u=l.internal.pageSize.getWidth(),h=l.internal.pageSize.getHeight(),d=15,g=u-d*2;let b=d;const _=oe=>b+oe>h-d?(l.addPage(),b=d,!0):!1,v=(oe,ce,D,C,S=10)=>{l.setFontSize(S);const V=l.splitTextToSize(oe,C);return l.text(V,ce,D),V.length*(S*.4)};l.setFillColor(37,99,235),l.rect(0,0,u,25,"F"),l.setTextColor(255,255,255),l.setFontSize(20),l.setFont("helvetica","bold"),l.text("Electrician Toolkit",d,12),l.setFontSize(12),l.setFont("helvetica","normal"),l.text(e,d,19),l.setFontSize(9);const N=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});l.text(N,u-d-l.getTextWidth(N),19),b=35,l.setTextColor(0,0,0),l.setFontSize(14),l.setFont("helvetica","bold"),l.text("Input Parameters",d,b),b+=7,l.setDrawColor(37,99,235),l.setLineWidth(.5),l.line(d,b,u-d,b),b+=5,l.setFontSize(10),l.setFont("helvetica","normal"),Object.entries(t).forEach(([oe,ce])=>{_(10);const D=oe.replace(/([A-Z])/g," $1").trim(),C=D.charAt(0).toUpperCase()+D.slice(1);l.setFont("helvetica","bold");const S=`${C}:`;l.text(S,d+5,b);const V=l.getTextWidth(S);l.setFont("helvetica","normal"),l.text(String(ce),d+5+V+3,b),b+=6}),b+=5,_(20),l.setFontSize(14),l.setFont("helvetica","bold"),l.text("Results",d,b),b+=7,l.setDrawColor(37,99,235),l.line(d,b,u-d,b),b+=5,l.setFontSize(10),l.setFont("helvetica","normal"),Object.entries(n).forEach(([oe,ce])=>{_(10);const D=oe.replace(/([A-Z])/g," $1").trim(),C=D.charAt(0).toUpperCase()+D.slice(1);l.setFont("helvetica","bold");const S=`${C}:`;l.text(S,d+5,b);let V=String(ce);typeof ce=="boolean"&&(V=ce?"Yes":"No");const I=l.getTextWidth(S);l.setFont("helvetica","normal"),l.text(V,d+5+I+3,b),b+=6}),b+=5,s&&Object.keys(s).length>0&&(_(20),l.setFontSize(14),l.setFont("helvetica","bold"),l.text("Calculation Details",d,b),b+=7,l.setDrawColor(37,99,235),l.line(d,b,u-d,b),b+=5,l.setFontSize(10),l.setFont("helvetica","normal"),Object.entries(s).forEach(([oe,ce])=>{_(10);const D=oe.replace(/([A-Z])/g," $1").trim(),C=D.charAt(0).toUpperCase()+D.slice(1),S=v(`${C}: ${ce}`,d+5,b,g-10,10);b+=S+2}),b+=5),i&&(_(20),l.setFontSize(14),l.setFont("helvetica","bold"),l.text("NEC Code References",d,b),b+=7,l.setDrawColor(37,99,235),l.line(d,b,u-d,b),b+=5,l.setFontSize(10),l.setFont("helvetica","normal"),(Array.isArray(i)?i:[i]).forEach(ce=>{_(15);const D=v(` ${ce}`,d+5,b,g-10,10);b+=D+2}));const E=h-10;l.setFontSize(8),l.setTextColor(100,100,100),l.setFont("helvetica","italic");const L="This calculation is for reference only. Always verify with current NEC and local codes.",k=l.getTextWidth(L);l.text(L,(u-k)/2,E);const O=e.toLowerCase().replace(/\s+/g,"-"),$=new Date().toISOString().split("T")[0],F=`${O}-${$}.pdf`;l.save(F)},$k=()=>{};var Mx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Uk=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=r[t++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=r[t++],l=r[t++],u=r[t++],h=((i&7)<<18|(s&63)<<12|(l&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(h>>10)),e[n++]=String.fromCharCode(56320+(h&1023))}else{const s=r[t++],l=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|l&63)}}return e.join("")},pS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const s=r[i],l=i+1<r.length,u=l?r[i+1]:0,h=i+2<r.length,d=h?r[i+2]:0,g=s>>2,b=(s&3)<<4|u>>4;let _=(u&15)<<2|d>>6,v=d&63;h||(v=64,l||(_=64)),n.push(t[g],t[b],t[_],t[v])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(fS(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Uk(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const s=t[r.charAt(i++)],u=i<r.length?t[r.charAt(i)]:0;++i;const d=i<r.length?t[r.charAt(i)]:64;++i;const b=i<r.length?t[r.charAt(i)]:64;if(++i,s==null||u==null||d==null||b==null)throw new qk;const _=s<<2|u>>4;if(n.push(_),d!==64){const v=u<<4&240|d>>2;if(n.push(v),b!==64){const N=d<<6&192|b;n.push(N)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class qk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Hk=function(r){const e=fS(r);return pS.encodeByteArray(e,!0)},wm=function(r){return Hk(r).replace(/\./g,"")},mS=function(r){try{return pS.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=()=>gS().__FIREBASE_DEFAULTS__,Kk=()=>{if(typeof process>"u"||typeof Mx>"u")return;const r=Mx.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Jk=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&mS(r[1]);return e&&JSON.parse(e)},Jm=()=>{try{return $k()||Gk()||Kk()||Jk()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},yS=r=>{var e,t;return(t=(e=Jm())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},Yk=r=>{const e=yS(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},xS=()=>{var r;return(r=Jm())==null?void 0:r.config},vS=r=>{var e;return(e=Jm())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bS(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,s=r.sub||r.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...r};return[wm(JSON.stringify(t)),wm(JSON.stringify(l)),""].join(".")}const Xh={};function Zk(){const r={prod:[],emulator:[]};for(const e of Object.keys(Xh))Xh[e]?r.emulator.push(e):r.prod.push(e);return r}function eI(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Dx=!1;function wS(r,e){if(typeof window>"u"||typeof document>"u"||!nh(window.location.host)||Xh[r]===e||Xh[r]||Dx)return;Xh[r]=e;function t(_){return`__firebase__banner__${_}`}const n="__firebase__banner",s=Zk().prod.length>0;function l(){const _=document.getElementById(n);_&&_.remove()}function u(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,v){_.setAttribute("width","24"),_.setAttribute("id",v),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function d(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Dx=!0,l()},_}function g(_,v){_.setAttribute("id",v),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function b(){const _=eI(n),v=t("text"),N=document.getElementById(v)||document.createElement("span"),E=t("learnmore"),L=document.getElementById(E)||document.createElement("a"),k=t("preprendIcon"),O=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const $=_.element;u($),g(L,E);const F=d();h(O,k),$.append(O,N,L,F),document.body.appendChild($)}s?(N.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hi())}function SS(){var e;const r=(e=Jm())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nI(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function iI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oI(){const r=hi();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function _S(){return!SS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TS(){return!SS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function AS(){try{return typeof indexedDB=="object"}catch{return!1}}function sI(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="FirebaseError";class Pl extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=aI,Object.setPrototypeOf(this,Pl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pf.prototype.create)}}class Pf{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],l=s?lI(s,n):"Error",u=`${this.serviceName}: ${l} (${i}).`;return new Pl(i,u,n)}}function lI(r,e){return r.replace(cI,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const cI=/\{\$([^}]+)}/g;function uI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function _u(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const s=r[i],l=e[i];if(Wx(s)&&Wx(l)){if(!_u(s,l))return!1}else if(s!==l)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function Wx(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function $h(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Uh(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function dI(r,e){const t=new hI(r,e);return t.subscribe.bind(t)}class hI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");fI(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=Og),i.error===void 0&&(i.error=Og),i.complete===void 0&&(i.complete=Og);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Og(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(r){return r&&r._delegate?r._delegate:r}class Tu{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new Qk;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gI(e))try{this.getOrInitializeService({instanceIdentifier:ou})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=ou){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ou){return this.instances.has(e)}getOptions(e=ou){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);n===u&&l.resolve(i)}return i}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:mI(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=ou){return this.component?this.component.multipleInstances?e:ou:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mI(r){return r===ou?void 0:r}function gI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new pI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yr;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(yr||(yr={}));const xI={debug:yr.DEBUG,verbose:yr.VERBOSE,info:yr.INFO,warn:yr.WARN,error:yr.ERROR,silent:yr.SILENT},vI=yr.INFO,bI={[yr.DEBUG]:"log",[yr.VERBOSE]:"log",[yr.INFO]:"info",[yr.WARN]:"warn",[yr.ERROR]:"error"},wI=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=bI[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class s5{constructor(e){this.name=e,this._logLevel=vI,this._logHandler=wI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,yr.DEBUG,...e),this._logHandler(this,yr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,yr.VERBOSE,...e),this._logHandler(this,yr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,yr.INFO,...e),this._logHandler(this,yr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,yr.WARN,...e),this._logHandler(this,yr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,yr.ERROR,...e),this._logHandler(this,yr.ERROR,...e)}}const SI=(r,e)=>e.some(t=>r instanceof t);let $x,Ux;function _I(){return $x||($x=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TI(){return Ux||(Ux=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CS=new WeakMap,p1=new WeakMap,kS=new WeakMap,Mg=new WeakMap,a5=new WeakMap;function AI(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",s),r.removeEventListener("error",l)},s=()=>{t(bc(r.result)),i()},l=()=>{n(r.error),i()};r.addEventListener("success",s),r.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&CS.set(t,r)}).catch(()=>{}),a5.set(e,r),e}function CI(r){if(p1.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",s),r.removeEventListener("error",l),r.removeEventListener("abort",l)},s=()=>{t(),i()},l=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",s),r.addEventListener("error",l),r.addEventListener("abort",l)});p1.set(r,e)}let m1={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return p1.get(r);if(e==="objectStoreNames")return r.objectStoreNames||kS.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return bc(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function kI(r){m1=r(m1)}function II(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Dg(this),e,...t);return kS.set(n,e.sort?e.sort():[e]),bc(n)}:TI().includes(r)?function(...e){return r.apply(Dg(this),e),bc(CS.get(this))}:function(...e){return bc(r.apply(Dg(this),e))}}function EI(r){return typeof r=="function"?II(r):(r instanceof IDBTransaction&&CI(r),SI(r,_I())?new Proxy(r,m1):r)}function bc(r){if(r instanceof IDBRequest)return AI(r);if(Mg.has(r))return Mg.get(r);const e=EI(r);return e!==r&&(Mg.set(r,e),a5.set(e,r)),e}const Dg=r=>a5.get(r);function jI(r,e,{blocked:t,upgrade:n,blocking:i,terminated:s}={}){const l=indexedDB.open(r,e),u=bc(l);return n&&l.addEventListener("upgradeneeded",h=>{n(bc(l.result),h.oldVersion,h.newVersion,bc(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const RI=["get","getKey","getAll","getAllKeys","count"],PI=["put","add","delete","clear"],Wg=new Map;function qx(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Wg.get(e))return Wg.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=PI.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||RI.includes(t)))return;const s=async function(l,...u){const h=this.transaction(l,i?"readwrite":"readonly");let d=h.store;return n&&(d=d.index(u.shift())),(await Promise.all([d[t](...u),i&&h.done]))[0]};return Wg.set(e,s),s}kI(r=>({...r,get:(e,t,n)=>qx(e,t)||r.get(e,t,n),has:(e,t)=>!!qx(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(BI(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function BI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const g1="@firebase/app",Hx="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=new s5("@firebase/app"),LI="@firebase/app-compat",FI="@firebase/analytics-compat",zI="@firebase/analytics",VI="@firebase/app-check-compat",OI="@firebase/app-check",MI="@firebase/auth",DI="@firebase/auth-compat",WI="@firebase/database",$I="@firebase/data-connect",UI="@firebase/database-compat",qI="@firebase/functions",HI="@firebase/functions-compat",GI="@firebase/installations",KI="@firebase/installations-compat",JI="@firebase/messaging",YI="@firebase/messaging-compat",QI="@firebase/performance",XI="@firebase/performance-compat",ZI="@firebase/remote-config",e8="@firebase/remote-config-compat",t8="@firebase/storage",r8="@firebase/storage-compat",n8="@firebase/firestore",i8="@firebase/ai",o8="@firebase/firestore-compat",s8="firebase",a8="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="[DEFAULT]",l8={[g1]:"fire-core",[LI]:"fire-core-compat",[zI]:"fire-analytics",[FI]:"fire-analytics-compat",[OI]:"fire-app-check",[VI]:"fire-app-check-compat",[MI]:"fire-auth",[DI]:"fire-auth-compat",[WI]:"fire-rtdb",[$I]:"fire-data-connect",[UI]:"fire-rtdb-compat",[qI]:"fire-fn",[HI]:"fire-fn-compat",[GI]:"fire-iid",[KI]:"fire-iid-compat",[JI]:"fire-fcm",[YI]:"fire-fcm-compat",[QI]:"fire-perf",[XI]:"fire-perf-compat",[ZI]:"fire-rc",[e8]:"fire-rc-compat",[t8]:"fire-gcs",[r8]:"fire-gcs-compat",[n8]:"fire-fst",[o8]:"fire-fst-compat",[i8]:"fire-vertex","fire-js":"fire-js",[s8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=new Map,c8=new Map,x1=new Map;function Gx(r,e){try{r.container.addComponent(e)}catch(t){kl.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Od(r){const e=r.name;if(x1.has(e))return kl.debug(`There were multiple attempts to register component ${e}.`),!1;x1.set(e,r);for(const t of Sm.values())Gx(t,r);for(const t of c8.values())Gx(t,r);return!0}function l5(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Os(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wc=new Pf("app","Firebase",u8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Tu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=a8;function IS(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:y1,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw wc.create("bad-app-name",{appName:String(i)});if(t||(t=xS()),!t)throw wc.create("no-options");const s=Sm.get(i);if(s){if(_u(t,s.options)&&_u(n,s.config))return s;throw wc.create("duplicate-app",{appName:i})}const l=new yI(i);for(const h of x1.values())l.addComponent(h);const u=new d8(t,n,l);return Sm.set(i,u),u}function ES(r=y1){const e=Sm.get(r);if(!e&&r===y1&&xS())return IS();if(!e)throw wc.create("no-app",{appName:r});return e}function Sc(r,e,t){let n=l8[r]??r;t&&(n+=`-${t}`);const i=n.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const l=[`Unable to register library "${n}" with version "${e}":`];i&&l.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kl.warn(l.join(" "));return}Od(new Tu(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8="firebase-heartbeat-database",f8=1,ff="firebase-heartbeat-store";let $g=null;function jS(){return $g||($g=jI(h8,f8,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ff)}catch(t){console.warn(t)}}}}).catch(r=>{throw wc.create("idb-open",{originalErrorMessage:r.message})})),$g}async function p8(r){try{const t=(await jS()).transaction(ff),n=await t.objectStore(ff).get(RS(r));return await t.done,n}catch(e){if(e instanceof Pl)kl.warn(e.message);else{const t=wc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kl.warn(t.message)}}}async function Kx(r,e){try{const n=(await jS()).transaction(ff,"readwrite");await n.objectStore(ff).put(e,RS(r)),await n.done}catch(t){if(t instanceof Pl)kl.warn(t.message);else{const n=wc.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});kl.warn(n.message)}}}function RS(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8=1024,g8=30;class y8{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new v8(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Jx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>g8){const l=b8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){kl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Jx(),{heartbeatsToSend:n,unsentEntries:i}=x8(this._heartbeatsCache.heartbeats),s=wm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return kl.warn(t),""}}}function Jx(){return new Date().toISOString().substring(0,10)}function x8(r,e=m8){const t=[];let n=r.slice();for(const i of r){const s=t.find(l=>l.agent===i.agent);if(s){if(s.dates.push(i.date),Yx(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Yx(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class v8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AS()?sI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await p8(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Kx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Kx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Yx(r){return wm(JSON.stringify({version:2,heartbeats:r})).length}function b8(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(r){Od(new Tu("platform-logger",e=>new NI(e),"PRIVATE")),Od(new Tu("heartbeat",e=>new y8(e),"PRIVATE")),Sc(g1,Hx,r),Sc(g1,Hx,"esm2020"),Sc("fire-js","")}w8("");var S8="firebase",_8="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sc(S8,_8,"app");function PS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const T8=PS,NS=new Pf("auth","Firebase",PS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m=new s5("@firebase/auth");function A8(r,...e){_m.logLevel<=yr.WARN&&_m.warn(`Auth (${ih}): ${r}`,...e)}function em(r,...e){_m.logLevel<=yr.ERROR&&_m.error(`Auth (${ih}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(r,...e){throw c5(r,...e)}function Ua(r,...e){return c5(r,...e)}function BS(r,e,t){const n={...T8(),[e]:t};return new Pf("auth","Firebase",n).create(e,{appName:r.name})}function Cl(r){return BS(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function c5(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return NS.create(r,...e)}function Kt(r,e,...t){if(!r)throw c5(e,...t)}function _l(r){const e="INTERNAL ASSERTION FAILED: "+r;throw em(e),new Error(e)}function Il(r,e){r||_l(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function C8(){return Qx()==="http:"||Qx()==="https:"}function Qx(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(C8()||nI()||"connection"in navigator)?navigator.onLine:!0}function I8(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t){this.shortDelay=e,this.longDelay=t,Il(t>e,"Short delay should be less than long delay!"),this.isMobile=tI()||iI()}get(){return k8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(r,e){Il(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_l("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_l("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_l("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],R8=new Bf(3e4,6e4);function Pc(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Nc(r,e,t,n,i={}){return FS(r,i,async()=>{let s={},l={};n&&(e==="GET"?l=n:s={body:JSON.stringify(n)});const u=Nf({key:r.config.apiKey,...l}).slice(1),h=await r._getAdditionalHeaders();h["Content-Type"]="application/json",r.languageCode&&(h["X-Firebase-Locale"]=r.languageCode);const d={method:e,headers:h,...s};return rI()||(d.referrerPolicy="no-referrer"),r.emulatorConfig&&nh(r.emulatorConfig.host)&&(d.credentials="include"),LS.fetch()(await zS(r,r.config.apiHost,t,u),d)})}async function FS(r,e,t){r._canInitEmulator=!1;const n={...E8,...e};try{const i=new N8(r),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await s.json();if("needConfirmation"in l)throw Op(r,"account-exists-with-different-credential",l);if(s.ok&&!("errorMessage"in l))return l;{const u=s.ok?l.errorMessage:l.error.message,[h,d]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Op(r,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Op(r,"email-already-in-use",l);if(h==="USER_DISABLED")throw Op(r,"user-disabled",l);const g=n[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw BS(r,g,d);xa(r,g)}}catch(i){if(i instanceof Pl)throw i;xa(r,"network-request-failed",{message:String(i)})}}async function Lf(r,e,t,n,i={}){const s=await Nc(r,e,t,n,i);return"mfaPendingCredential"in s&&xa(r,"multi-factor-auth-required",{_serverResponse:s}),s}async function zS(r,e,t,n){const i=`${e}${t}?${n}`,s=r,l=s.config.emulator?u5(r.config,i):`${r.config.apiScheme}://${i}`;return j8.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(l).toString():l}function P8(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class N8{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Ua(this.auth,"network-request-failed")),R8.get())})}}function Op(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=Ua(r,e,n);return i.customData._tokenResponse=t,i}function Xx(r){return r!==void 0&&r.enterprise!==void 0}class B8{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return P8(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function L8(r,e){return Nc(r,"GET","/v2/recaptchaConfig",Pc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F8(r,e){return Nc(r,"POST","/v1/accounts:delete",e)}async function Tm(r,e){return Nc(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function z8(r,e=!1){const t=Ri(r),n=await t.getIdToken(e),i=d5(n);Kt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,l=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:Zh(Ug(i.auth_time)),issuedAtTime:Zh(Ug(i.iat)),expirationTime:Zh(Ug(i.exp)),signInProvider:l||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ug(r){return Number(r)*1e3}function d5(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return em("JWT malformed, contained fewer than 3 sections"),null;try{const i=mS(t);return i?JSON.parse(i):(em("Failed to decode base64 JWT payload"),null)}catch(i){return em("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Zx(r){const e=d5(r);return Kt(e,"internal-error"),Kt(typeof e.exp<"u","internal-error"),Kt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pf(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Pl&&V8(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function V8({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zh(this.lastLoginAt),this.creationTime=Zh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Am(r){var b;const e=r.auth,t=await r.getIdToken(),n=await pf(r,Tm(e,{idToken:t}));Kt(n==null?void 0:n.users.length,e,"internal-error");const i=n.users[0];r._notifyReloadListener(i);const s=(b=i.providerUserInfo)!=null&&b.length?VS(i.providerUserInfo):[],l=D8(r.providerData,s),u=r.isAnonymous,h=!(r.email&&i.passwordHash)&&!(l!=null&&l.length),d=u?h:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new b1(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(r,g)}async function M8(r){const e=Ri(r);await Am(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function D8(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function VS(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W8(r,e){const t=await FS(r,{},async()=>{const n=Nf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=r.config,l=await zS(r,i,"/v1/token",`key=${s}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:n};return r.emulatorConfig&&nh(r.emulatorConfig.host)&&(h.credentials="include"),LS.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $8(r,e){return Nc(r,"POST","/v2/accounts:revokeToken",Pc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Kt(e.idToken,"internal-error"),Kt(typeof e.idToken<"u","internal-error"),Kt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Kt(e.length!==0,"internal-error");const t=Zx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Kt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await W8(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:s}=t,l=new Bd;return n&&(Kt(typeof n=="string","internal-error",{appName:e}),l.refreshToken=n),i&&(Kt(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),s&&(Kt(typeof s=="number","internal-error",{appName:e}),l.expirationTime=s),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bd,this.toJSON())}_performRefresh(){return _l("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(r,e){Kt(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class pa{constructor({uid:e,auth:t,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new O8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new b1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await pf(this,this.stsTokenManager.getToken(this.auth,e));return Kt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return z8(this,e)}reload(){return M8(this)}_assign(e){this!==e&&(Kt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Kt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Am(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Os(this.auth.app))return Promise.reject(Cl(this.auth));const e=await this.getIdToken();return await pf(this,F8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,l=t.photoURL??void 0,u=t.tenantId??void 0,h=t._redirectEventId??void 0,d=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:b,emailVerified:_,isAnonymous:v,providerData:N,stsTokenManager:E}=t;Kt(b&&E,e,"internal-error");const L=Bd.fromJSON(this.name,E);Kt(typeof b=="string",e,"internal-error"),lc(n,e.name),lc(i,e.name),Kt(typeof _=="boolean",e,"internal-error"),Kt(typeof v=="boolean",e,"internal-error"),lc(s,e.name),lc(l,e.name),lc(u,e.name),lc(h,e.name),lc(d,e.name),lc(g,e.name);const k=new pa({uid:b,auth:e,email:i,emailVerified:_,displayName:n,isAnonymous:v,photoURL:l,phoneNumber:s,tenantId:u,stsTokenManager:L,createdAt:d,lastLoginAt:g});return N&&Array.isArray(N)&&(k.providerData=N.map(O=>({...O}))),h&&(k._redirectEventId=h),k}static async _fromIdTokenResponse(e,t,n=!1){const i=new Bd;i.updateFromServerResponse(t);const s=new pa({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Am(s),s}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];Kt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?VS(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),u=new Bd;u.updateFromIdToken(n);const h=new pa({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:l}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new b1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(h,d),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=new Map;function Tl(r){Il(r instanceof Function,"Expected a class definition");let e=ev.get(r);return e?(Il(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,ev.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}OS.type="NONE";const tv=OS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(r,e,t){return`firebase:${r}:${e}:${t}`}class Ld{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=tm(this.userKey,i.apiKey,s),this.fullPersistenceKey=tm("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Tm(this.auth,{idToken:e}).catch(()=>{});return t?pa._fromGetAccountInfoResponse(this.auth,t,e):null}return pa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Ld(Tl(tv),e,n);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Tl(tv);const l=tm(n,e.config.apiKey,e.name);let u=null;for(const d of t)try{const g=await d._get(l);if(g){let b;if(typeof g=="string"){const _=await Tm(e,{idToken:g}).catch(()=>{});if(!_)break;b=await pa._fromGetAccountInfoResponse(e,_,g)}else b=pa._fromJSON(e,g);d!==s&&(u=b),s=d;break}}catch{}const h=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new Ld(s,e,n):(s=h[0],u&&await s._set(l,u.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(l)}catch{}})),new Ld(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($S(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qS(e))return"Blackberry";if(HS(e))return"Webos";if(DS(e))return"Safari";if((e.includes("chrome/")||WS(e))&&!e.includes("edge/"))return"Chrome";if(US(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function MS(r=hi()){return/firefox\//i.test(r)}function DS(r=hi()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WS(r=hi()){return/crios\//i.test(r)}function $S(r=hi()){return/iemobile/i.test(r)}function US(r=hi()){return/android/i.test(r)}function qS(r=hi()){return/blackberry/i.test(r)}function HS(r=hi()){return/webos/i.test(r)}function h5(r=hi()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function U8(r=hi()){var e;return h5(r)&&!!((e=window.navigator)!=null&&e.standalone)}function q8(){return oI()&&document.documentMode===10}function GS(r=hi()){return h5(r)||US(r)||HS(r)||qS(r)||/windows phone/i.test(r)||$S(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(r,e=[]){let t;switch(r){case"Browser":t=rv(hi());break;case"Worker":t=`${rv(hi())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ih}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=s=>new Promise((l,u)=>{try{const h=e(s);l(h)}catch(h){u(h)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G8(r,e={}){return Nc(r,"GET","/v2/passwordPolicy",Pc(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K8=6;class J8{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??K8,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nv(this),this.idTokenSubscription=new nv(this),this.beforeStateQueue=new H8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Tl(t)),this._initializationPromise=this.queue(async()=>{var n,i,s;if(!this._deleted&&(this.persistenceManager=await Ld.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Tm(this,{idToken:e}),n=await pa._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Os(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(s=this.redirectUser)==null?void 0:s._redirectEventId,u=n==null?void 0:n._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===u)&&(h!=null&&h.user)&&(n=h.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(l){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Kt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Am(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=I8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Os(this.app))return Promise.reject(Cl(this));const t=e?Ri(e):null;return t&&Kt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Kt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Os(this.app)?Promise.reject(Cl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Os(this.app)?Promise.reject(Cl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await G8(this),t=new J8(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pf("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await $8(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Tl(e)||this._popupRedirectResolver;Kt(t,this,"argument-error"),this.redirectPersistenceManager=await Ld.create(this,[Tl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Kt(u,this,"internal-error"),u.then(()=>{l||s(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,n,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Kt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(Os(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&A8(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ou(r){return Ri(r)}class nv{constructor(e){this.auth=e,this.observer=null,this.addObserver=dI(t=>this.observer=t)}get next(){return Kt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ym={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Q8(r){Ym=r}function JS(r){return Ym.loadJS(r)}function X8(){return Ym.recaptchaEnterpriseScript}function Z8(){return Ym.gapiScript}function e7(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class t7{constructor(){this.enterprise=new r7}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class r7{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const n7="recaptcha-enterprise",YS="NO_RECAPTCHA";class i7{constructor(e){this.type=n7,this.auth=Ou(e)}async verify(e="verify",t=!1){async function n(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(l,u)=>{L8(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new B8(h);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,l(d.siteKey)}}).catch(h=>{u(h)})})}function i(s,l,u){const h=window.grecaptcha;Xx(h)?h.enterprise.ready(()=>{h.enterprise.execute(s,{action:e}).then(d=>{l(d)}).catch(()=>{l(YS)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new t7().execute("siteKey",{action:"verify"}):new Promise((s,l)=>{n(this.auth).then(u=>{if(!t&&Xx(window.grecaptcha))i(u,s,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=X8();h.length!==0&&(h+=u),JS(h).then(()=>{i(u,s,l)}).catch(d=>{l(d)})}}).catch(u=>{l(u)})})}}async function iv(r,e,t,n=!1,i=!1){const s=new i7(r);let l;if(i)l=YS;else try{l=await s.verify(t)}catch{l=await s.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,d=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function w1(r,e,t,n,i){var s;if((s=r._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await iv(r,e,t,t==="getOobCode");return n(r,l)}else return n(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await iv(r,e,t,t==="getOobCode");return n(r,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o7(r,e){const t=l5(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(_u(s,e??{}))return i;xa(i,"already-initialized")}return t.initialize({options:e})}function s7(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(Tl);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function a7(r,e,t){const n=Ou(r);Kt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,s=QS(e),{host:l,port:u}=l7(e),h=u===null?"":`:${u}`,d={url:`${s}//${l}${h}/`},g=Object.freeze({host:l,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){Kt(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Kt(_u(d,n.config.emulator)&&_u(g,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=g,n.settings.appVerificationDisabledForTesting=!0,nh(l)?(bS(`${s}//${l}${h}`),wS("Auth",!0)):c7()}function QS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function l7(r){const e=QS(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:ov(n.substr(s.length+1))}}else{const[s,l]=n.split(":");return{host:s,port:ov(l)}}}function ov(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function c7(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _l("not implemented")}_getIdTokenResponse(e){return _l("not implemented")}_linkToIdToken(e,t){return _l("not implemented")}_getReauthenticationResolver(e){return _l("not implemented")}}async function u7(r,e){return Nc(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d7(r,e){return Lf(r,"POST","/v1/accounts:signInWithPassword",Pc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h7(r,e){return Lf(r,"POST","/v1/accounts:signInWithEmailLink",Pc(r,e))}async function f7(r,e){return Lf(r,"POST","/v1/accounts:signInWithEmailLink",Pc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends f5{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new mf(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new mf(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return w1(e,t,"signInWithPassword",d7);case"emailLink":return h7(e,{email:this._email,oobCode:this._password});default:xa(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return w1(e,n,"signUpPassword",u7);case"emailLink":return f7(e,{idToken:t,email:this._email,oobCode:this._password});default:xa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fd(r,e){return Lf(r,"POST","/v1/accounts:signInWithIdp",Pc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p7="http://localhost";class Au extends f5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Au(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):xa("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...s}=t;if(!n||!i)return null;const l=new Au(n,i);return l.idToken=s.idToken||void 0,l.accessToken=s.accessToken||void 0,l.secret=s.secret,l.nonce=s.nonce,l.pendingToken=s.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Fd(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Fd(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Fd(e,t)}buildRequest(){const e={requestUri:p7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m7(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function g7(r){const e=$h(Uh(r)).link,t=e?$h(Uh(e)).deep_link_id:null,n=$h(Uh(r)).deep_link_id;return(n?$h(Uh(n)).link:null)||n||t||e||r}class p5{constructor(e){const t=$h(Uh(e)),n=t.apiKey??null,i=t.oobCode??null,s=m7(t.mode??null);Kt(n&&i&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=g7(e);try{return new p5(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(){this.providerId=oh.PROVIDER_ID}static credential(e,t){return mf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=p5.parseLink(t);return Kt(n,"argument-error"),mf._fromEmailAndCode(e,n.code,n.tenantId)}}oh.PROVIDER_ID="password";oh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff extends XS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends Ff{constructor(){super("facebook.com")}static credential(e){return Au._fromParams({providerId:hc.PROVIDER_ID,signInMethod:hc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hc.credentialFromTaggedObject(e)}static credentialFromError(e){return hc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hc.credential(e.oauthAccessToken)}catch{return null}}}hc.FACEBOOK_SIGN_IN_METHOD="facebook.com";hc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends Ff{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Au._fromParams({providerId:fc.PROVIDER_ID,signInMethod:fc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fc.credentialFromTaggedObject(e)}static credentialFromError(e){return fc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return fc.credential(t,n)}catch{return null}}}fc.GOOGLE_SIGN_IN_METHOD="google.com";fc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends Ff{constructor(){super("github.com")}static credential(e){return Au._fromParams({providerId:pc.PROVIDER_ID,signInMethod:pc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pc.credentialFromTaggedObject(e)}static credentialFromError(e){return pc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pc.credential(e.oauthAccessToken)}catch{return null}}}pc.GITHUB_SIGN_IN_METHOD="github.com";pc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends Ff{constructor(){super("twitter.com")}static credential(e,t){return Au._fromParams({providerId:mc.PROVIDER_ID,signInMethod:mc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return mc.credentialFromTaggedObject(e)}static credentialFromError(e){return mc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return mc.credential(t,n)}catch{return null}}}mc.TWITTER_SIGN_IN_METHOD="twitter.com";mc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y7(r,e){return Lf(r,"POST","/v1/accounts:signUp",Pc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const s=await pa._fromIdTokenResponse(e,n,i),l=sv(n);return new Cu({user:s,providerId:l,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=sv(n);return new Cu({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function sv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm extends Pl{constructor(e,t,n,i){super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Cm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Cm(e,t,n,i)}}function ZS(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Cm._fromErrorAndOperation(r,s,e,n):s})}async function x7(r,e,t=!1){const n=await pf(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Cu._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v7(r,e,t=!1){const{auth:n}=r;if(Os(n.app))return Promise.reject(Cl(n));const i="reauthenticate";try{const s=await pf(r,ZS(n,i,e,r),t);Kt(s.idToken,n,"internal-error");const l=d5(s.idToken);Kt(l,n,"internal-error");const{sub:u}=l;return Kt(r.uid===u,n,"user-mismatch"),Cu._forOperation(r,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&xa(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e_(r,e,t=!1){if(Os(r.app))return Promise.reject(Cl(r));const n="signIn",i=await ZS(r,n,e),s=await Cu._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(s.user),s}async function b7(r,e){return e_(Ou(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t_(r){const e=Ou(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function w7(r,e,t){if(Os(r.app))return Promise.reject(Cl(r));const n=Ou(r),l=await w1(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",y7).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&t_(r),h}),u=await Cu._fromIdTokenResponse(n,"signIn",l);return await n._updateCurrentUser(u.user),u}function S7(r,e,t){return Os(r.app)?Promise.reject(Cl(r)):b7(Ri(r),oh.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&t_(r),n})}function _7(r,e,t,n){return Ri(r).onIdTokenChanged(e,t,n)}function T7(r,e,t){return Ri(r).beforeAuthStateChanged(e,t)}function Qm(r,e,t,n){return Ri(r).onAuthStateChanged(e,t,n)}function A7(r){return Ri(r).signOut()}const km="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(km,"1"),this.storage.removeItem(km),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7=1e3,k7=10;class n_ extends r_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,h)=>{this.notifyListeners(l,h)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(n);!t&&this.localCache[n]===l||this.notifyListeners(n,l)},s=this.storage.getItem(n);q8()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,k7):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},C7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}n_.type="LOCAL";const I7=n_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_ extends r_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}i_.type="SESSION";const o_=i_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E7(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new Xm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:s}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const u=Array.from(l).map(async d=>d(t.origin,s)),h=await E7(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,l;return new Promise((u,h)=>{const d=m5("",20);i.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},n);l={messageChannel:i,onMessage(b){const _=b;if(_.data.eventId===d)switch(_.data.status){case"ack":clearTimeout(g),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(_.data.response);break;default:clearTimeout(g),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(){return window}function R7(r){qa().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(){return typeof qa().WorkerGlobalScope<"u"&&typeof qa().importScripts=="function"}async function P7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function N7(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function B7(){return s_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="firebaseLocalStorageDb",L7=1,Im="firebaseLocalStorage",l_="fbase_key";class zf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Zm(r,e){return r.transaction([Im],e?"readwrite":"readonly").objectStore(Im)}function F7(){const r=indexedDB.deleteDatabase(a_);return new zf(r).toPromise()}function S1(){const r=indexedDB.open(a_,L7);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(Im,{keyPath:l_})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(Im)?e(n):(n.close(),await F7(),e(await S1()))})})}async function av(r,e,t){const n=Zm(r,!0).put({[l_]:e,value:t});return new zf(n).toPromise()}async function z7(r,e){const t=Zm(r,!1).get(e),n=await new zf(t).toPromise();return n===void 0?null:n.value}function lv(r,e){const t=Zm(r,!0).delete(e);return new zf(t).toPromise()}const V7=800,O7=3;class c_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await S1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>O7)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return s_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xm._getInstance(B7()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await P7(),!this.activeServiceWorker)return;this.sender=new j7(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||N7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await S1();return await av(e,km,"1"),await lv(e,km),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>av(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>z7(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>lv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Zm(i,!1).getAll();return new zf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),V7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}c_.type="LOCAL";const M7=c_;new Bf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(r,e){return e?Tl(e):(Kt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5 extends f5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function W7(r){return e_(r.auth,new g5(r),r.bypassAuthState)}function $7(r){const{auth:e,user:t}=r;return Kt(t,e,"internal-error"),v7(t,new g5(r),r.bypassAuthState)}async function U7(r){const{auth:e,user:t}=r;return Kt(t,e,"internal-error"),x7(t,new g5(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,t,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:l,type:u}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return W7;case"linkViaPopup":case"linkViaRedirect":return U7;case"reauthViaPopup":case"reauthViaRedirect":return $7;default:xa(this.auth,"internal-error")}}resolve(e){Il(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Il(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q7=new Bf(2e3,1e4);class Ed extends u_{constructor(e,t,n,i,s){super(e,t,i,s),this.provider=n,this.authWindow=null,this.pollId=null,Ed.currentPopupAction&&Ed.currentPopupAction.cancel(),Ed.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Kt(e,this.auth,"internal-error"),e}async onExecution(){Il(this.filter.length===1,"Popup operations only handle one event");const e=m5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ua(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ua(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ed.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ua(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,q7.get())};e()}}Ed.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7="pendingRedirect",rm=new Map;class G7 extends u_{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=rm.get(this.auth._key());if(!e){try{const n=await K7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}rm.set(this.auth._key(),e)}return this.bypassAuthState||rm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function K7(r,e){const t=Q7(e),n=Y7(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function J7(r,e){rm.set(r._key(),e)}function Y7(r){return Tl(r._redirectPersistence)}function Q7(r){return tm(H7,r.config.apiKey,r.name)}async function X7(r,e,t=!1){if(Os(r.app))return Promise.reject(Cl(r));const n=Ou(r),i=D7(n,e),l=await new G7(n,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await n._persistUserIfCurrent(l.user),await n._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7=600*1e3;class eE{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tE(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!d_(e)){const i=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ua(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Z7&&this.cachedEventUids.clear(),this.cachedEventUids.has(cv(e))}saveEventToCache(e){this.cachedEventUids.add(cv(e)),this.lastProcessedEventTime=Date.now()}}function cv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function d_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tE(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return d_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rE(r,e={}){return Nc(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iE=/^https?/;async function oE(r){if(r.config.emulator)return;const{authorizedDomains:e}=await rE(r);for(const t of e)try{if(sE(t))return}catch{}xa(r,"unauthorized-domain")}function sE(r){const e=v1(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const l=new URL(r);return l.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===n}if(!iE.test(t))return!1;if(nE.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=new Bf(3e4,6e4);function uv(){const r=qa().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function lE(r){return new Promise((e,t)=>{var i,s,l;function n(){uv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uv(),t(Ua(r,"network-request-failed"))},timeout:aE.get()})}if((s=(i=qa().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((l=qa().gapi)!=null&&l.load)n();else{const u=e7("iframefcb");return qa()[u]=()=>{gapi.load?n():t(Ua(r,"network-request-failed"))},JS(`${Z8()}?onload=${u}`).catch(h=>t(h))}}).catch(e=>{throw nm=null,e})}let nm=null;function cE(r){return nm=nm||lE(r),nm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Bf(5e3,15e3),dE="__/auth/iframe",hE="emulator/auth/iframe",fE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mE(r){const e=r.config;Kt(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?u5(e,hE):`https://${r.config.authDomain}/${dE}`,n={apiKey:e.apiKey,appName:r.name,v:ih},i=pE.get(r.config.apiHost);i&&(n.eid=i);const s=r._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${Nf(n).slice(1)}`}async function gE(r){const e=await cE(r),t=qa().gapi;return Kt(t,r,"internal-error"),e.open({where:document.body,url:mE(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fE,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const l=Ua(r,"network-request-failed"),u=qa().setTimeout(()=>{s(l)},uE.get());function h(){qa().clearTimeout(u),i(n)}n.ping(h).then(h,()=>{s(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xE=500,vE=600,bE="_blank",wE="http://localhost";class dv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SE(r,e,t,n=xE,i=vE){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const h={...yE,width:n.toString(),height:i.toString(),top:s,left:l},d=hi().toLowerCase();t&&(u=WS(d)?bE:t),MS(d)&&(e=e||wE,h.scrollbars="yes");const g=Object.entries(h).reduce((_,[v,N])=>`${_}${v}=${N},`,"");if(U8(d)&&u!=="_self")return _E(e||"",u),new dv(null);const b=window.open(e||"",u,g);Kt(b,r,"popup-blocked");try{b.focus()}catch{}return new dv(b)}function _E(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="__/auth/handler",AE="emulator/auth/handler",CE=encodeURIComponent("fac");async function hv(r,e,t,n,i,s){Kt(r.config.authDomain,r,"auth-domain-config-required"),Kt(r.config.apiKey,r,"invalid-api-key");const l={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:ih,eventId:i};if(e instanceof XS){e.setDefaultLanguage(r.languageCode),l.providerId=e.providerId||"",uI(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,b]of Object.entries({}))l[g]=b}if(e instanceof Ff){const g=e.getScopes().filter(b=>b!=="");g.length>0&&(l.scopes=g.join(","))}r.tenantId&&(l.tid=r.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await r._getAppCheckToken(),d=h?`#${CE}=${encodeURIComponent(h)}`:"";return`${kE(r)}?${Nf(u).slice(1)}${d}`}function kE({config:r}){return r.emulator?u5(r,AE):`https://${r.authDomain}/${TE}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="webStorageSupport";class IE{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=o_,this._completeRedirectFn=X7,this._overrideRedirectResult=J7}async _openPopup(e,t,n,i){var l;Il((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const s=await hv(e,t,n,v1(),i);return SE(e,s,m5())}async _openRedirect(e,t,n,i){await this._originValidation(e);const s=await hv(e,t,n,v1(),i);return R7(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Il(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await gE(e),n=new eE(e);return t.register("authEvent",i=>(Kt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qg,{type:qg},i=>{var l;const s=(l=i==null?void 0:i[0])==null?void 0:l[qg];s!==void 0&&t(!!s),xa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=oE(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return GS()||DS()||h5()}}const EE=IE;var fv="@firebase/auth",pv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Kt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PE(r){Od(new Tu("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=n.options;Kt(l&&!l.includes(":"),"invalid-api-key",{appName:n.name});const h={apiKey:l,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KS(r)},d=new Y8(n,i,s,h);return s7(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Od(new Tu("auth-internal",e=>{const t=Ou(e.getProvider("auth").getImmediate());return(n=>new jE(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sc(fv,pv,RE(r)),Sc(fv,pv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=300,BE=vS("authIdTokenMaxAge")||NE;let mv=null;const LE=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>BE)return;const i=t==null?void 0:t.token;mv!==i&&(mv=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function FE(r=ES()){const e=l5(r,"auth");if(e.isInitialized())return e.getImmediate();const t=o7(r,{popupRedirectResolver:EE,persistence:[M7,I7,o_]}),n=vS("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const l=LE(s.toString());T7(t,l,()=>l(t.currentUser)),_7(t,u=>l(u))}}const i=yS("auth");return i&&a7(t,`http://${i}`),t}function zE(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}Q8({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const s=Ua("internal-error");s.customData=i,t(s)},n.type="text/javascript",n.charset="UTF-8",zE().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PE("Browser");var gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _c,h_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,C){function S(){}S.prototype=C.prototype,D.F=C.prototype,D.prototype=new S,D.prototype.constructor=D,D.D=function(V,I,w){for(var B=Array(arguments.length-2),M=2;M<arguments.length;M++)B[M-2]=arguments[M];return C.prototype[I].apply(V,B)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,C,S){S||(S=0);const V=Array(16);if(typeof C=="string")for(var I=0;I<16;++I)V[I]=C.charCodeAt(S++)|C.charCodeAt(S++)<<8|C.charCodeAt(S++)<<16|C.charCodeAt(S++)<<24;else for(I=0;I<16;++I)V[I]=C[S++]|C[S++]<<8|C[S++]<<16|C[S++]<<24;C=D.g[0],S=D.g[1],I=D.g[2];let w=D.g[3],B;B=C+(w^S&(I^w))+V[0]+3614090360&4294967295,C=S+(B<<7&4294967295|B>>>25),B=w+(I^C&(S^I))+V[1]+3905402710&4294967295,w=C+(B<<12&4294967295|B>>>20),B=I+(S^w&(C^S))+V[2]+606105819&4294967295,I=w+(B<<17&4294967295|B>>>15),B=S+(C^I&(w^C))+V[3]+3250441966&4294967295,S=I+(B<<22&4294967295|B>>>10),B=C+(w^S&(I^w))+V[4]+4118548399&4294967295,C=S+(B<<7&4294967295|B>>>25),B=w+(I^C&(S^I))+V[5]+1200080426&4294967295,w=C+(B<<12&4294967295|B>>>20),B=I+(S^w&(C^S))+V[6]+2821735955&4294967295,I=w+(B<<17&4294967295|B>>>15),B=S+(C^I&(w^C))+V[7]+4249261313&4294967295,S=I+(B<<22&4294967295|B>>>10),B=C+(w^S&(I^w))+V[8]+1770035416&4294967295,C=S+(B<<7&4294967295|B>>>25),B=w+(I^C&(S^I))+V[9]+2336552879&4294967295,w=C+(B<<12&4294967295|B>>>20),B=I+(S^w&(C^S))+V[10]+4294925233&4294967295,I=w+(B<<17&4294967295|B>>>15),B=S+(C^I&(w^C))+V[11]+2304563134&4294967295,S=I+(B<<22&4294967295|B>>>10),B=C+(w^S&(I^w))+V[12]+1804603682&4294967295,C=S+(B<<7&4294967295|B>>>25),B=w+(I^C&(S^I))+V[13]+4254626195&4294967295,w=C+(B<<12&4294967295|B>>>20),B=I+(S^w&(C^S))+V[14]+2792965006&4294967295,I=w+(B<<17&4294967295|B>>>15),B=S+(C^I&(w^C))+V[15]+1236535329&4294967295,S=I+(B<<22&4294967295|B>>>10),B=C+(I^w&(S^I))+V[1]+4129170786&4294967295,C=S+(B<<5&4294967295|B>>>27),B=w+(S^I&(C^S))+V[6]+3225465664&4294967295,w=C+(B<<9&4294967295|B>>>23),B=I+(C^S&(w^C))+V[11]+643717713&4294967295,I=w+(B<<14&4294967295|B>>>18),B=S+(w^C&(I^w))+V[0]+3921069994&4294967295,S=I+(B<<20&4294967295|B>>>12),B=C+(I^w&(S^I))+V[5]+3593408605&4294967295,C=S+(B<<5&4294967295|B>>>27),B=w+(S^I&(C^S))+V[10]+38016083&4294967295,w=C+(B<<9&4294967295|B>>>23),B=I+(C^S&(w^C))+V[15]+3634488961&4294967295,I=w+(B<<14&4294967295|B>>>18),B=S+(w^C&(I^w))+V[4]+3889429448&4294967295,S=I+(B<<20&4294967295|B>>>12),B=C+(I^w&(S^I))+V[9]+568446438&4294967295,C=S+(B<<5&4294967295|B>>>27),B=w+(S^I&(C^S))+V[14]+3275163606&4294967295,w=C+(B<<9&4294967295|B>>>23),B=I+(C^S&(w^C))+V[3]+4107603335&4294967295,I=w+(B<<14&4294967295|B>>>18),B=S+(w^C&(I^w))+V[8]+1163531501&4294967295,S=I+(B<<20&4294967295|B>>>12),B=C+(I^w&(S^I))+V[13]+2850285829&4294967295,C=S+(B<<5&4294967295|B>>>27),B=w+(S^I&(C^S))+V[2]+4243563512&4294967295,w=C+(B<<9&4294967295|B>>>23),B=I+(C^S&(w^C))+V[7]+1735328473&4294967295,I=w+(B<<14&4294967295|B>>>18),B=S+(w^C&(I^w))+V[12]+2368359562&4294967295,S=I+(B<<20&4294967295|B>>>12),B=C+(S^I^w)+V[5]+4294588738&4294967295,C=S+(B<<4&4294967295|B>>>28),B=w+(C^S^I)+V[8]+2272392833&4294967295,w=C+(B<<11&4294967295|B>>>21),B=I+(w^C^S)+V[11]+1839030562&4294967295,I=w+(B<<16&4294967295|B>>>16),B=S+(I^w^C)+V[14]+4259657740&4294967295,S=I+(B<<23&4294967295|B>>>9),B=C+(S^I^w)+V[1]+2763975236&4294967295,C=S+(B<<4&4294967295|B>>>28),B=w+(C^S^I)+V[4]+1272893353&4294967295,w=C+(B<<11&4294967295|B>>>21),B=I+(w^C^S)+V[7]+4139469664&4294967295,I=w+(B<<16&4294967295|B>>>16),B=S+(I^w^C)+V[10]+3200236656&4294967295,S=I+(B<<23&4294967295|B>>>9),B=C+(S^I^w)+V[13]+681279174&4294967295,C=S+(B<<4&4294967295|B>>>28),B=w+(C^S^I)+V[0]+3936430074&4294967295,w=C+(B<<11&4294967295|B>>>21),B=I+(w^C^S)+V[3]+3572445317&4294967295,I=w+(B<<16&4294967295|B>>>16),B=S+(I^w^C)+V[6]+76029189&4294967295,S=I+(B<<23&4294967295|B>>>9),B=C+(S^I^w)+V[9]+3654602809&4294967295,C=S+(B<<4&4294967295|B>>>28),B=w+(C^S^I)+V[12]+3873151461&4294967295,w=C+(B<<11&4294967295|B>>>21),B=I+(w^C^S)+V[15]+530742520&4294967295,I=w+(B<<16&4294967295|B>>>16),B=S+(I^w^C)+V[2]+3299628645&4294967295,S=I+(B<<23&4294967295|B>>>9),B=C+(I^(S|~w))+V[0]+4096336452&4294967295,C=S+(B<<6&4294967295|B>>>26),B=w+(S^(C|~I))+V[7]+1126891415&4294967295,w=C+(B<<10&4294967295|B>>>22),B=I+(C^(w|~S))+V[14]+2878612391&4294967295,I=w+(B<<15&4294967295|B>>>17),B=S+(w^(I|~C))+V[5]+4237533241&4294967295,S=I+(B<<21&4294967295|B>>>11),B=C+(I^(S|~w))+V[12]+1700485571&4294967295,C=S+(B<<6&4294967295|B>>>26),B=w+(S^(C|~I))+V[3]+2399980690&4294967295,w=C+(B<<10&4294967295|B>>>22),B=I+(C^(w|~S))+V[10]+4293915773&4294967295,I=w+(B<<15&4294967295|B>>>17),B=S+(w^(I|~C))+V[1]+2240044497&4294967295,S=I+(B<<21&4294967295|B>>>11),B=C+(I^(S|~w))+V[8]+1873313359&4294967295,C=S+(B<<6&4294967295|B>>>26),B=w+(S^(C|~I))+V[15]+4264355552&4294967295,w=C+(B<<10&4294967295|B>>>22),B=I+(C^(w|~S))+V[6]+2734768916&4294967295,I=w+(B<<15&4294967295|B>>>17),B=S+(w^(I|~C))+V[13]+1309151649&4294967295,S=I+(B<<21&4294967295|B>>>11),B=C+(I^(S|~w))+V[4]+4149444226&4294967295,C=S+(B<<6&4294967295|B>>>26),B=w+(S^(C|~I))+V[11]+3174756917&4294967295,w=C+(B<<10&4294967295|B>>>22),B=I+(C^(w|~S))+V[2]+718787259&4294967295,I=w+(B<<15&4294967295|B>>>17),B=S+(w^(I|~C))+V[9]+3951481745&4294967295,D.g[0]=D.g[0]+C&4294967295,D.g[1]=D.g[1]+(I+(B<<21&4294967295|B>>>11))&4294967295,D.g[2]=D.g[2]+I&4294967295,D.g[3]=D.g[3]+w&4294967295}n.prototype.v=function(D,C){C===void 0&&(C=D.length);const S=C-this.blockSize,V=this.C;let I=this.h,w=0;for(;w<C;){if(I==0)for(;w<=S;)i(this,D,w),w+=this.blockSize;if(typeof D=="string"){for(;w<C;)if(V[I++]=D.charCodeAt(w++),I==this.blockSize){i(this,V),I=0;break}}else for(;w<C;)if(V[I++]=D[w++],I==this.blockSize){i(this,V),I=0;break}}this.h=I,this.o+=C},n.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var C=1;C<D.length-8;++C)D[C]=0;C=this.o*8;for(var S=D.length-8;S<D.length;++S)D[S]=C&255,C/=256;for(this.v(D),D=Array(16),C=0,S=0;S<4;++S)for(let V=0;V<32;V+=8)D[C++]=this.g[S]>>>V&255;return D};function s(D,C){var S=u;return Object.prototype.hasOwnProperty.call(S,D)?S[D]:S[D]=C(D)}function l(D,C){this.h=C;const S=[];let V=!0;for(let I=D.length-1;I>=0;I--){const w=D[I]|0;V&&w==C||(S[I]=w,V=!1)}this.g=S}var u={};function h(D){return-128<=D&&D<128?s(D,function(C){return new l([C|0],C<0?-1:0)}):new l([D|0],D<0?-1:0)}function d(D){if(isNaN(D)||!isFinite(D))return b;if(D<0)return L(d(-D));const C=[];let S=1;for(let V=0;D>=S;V++)C[V]=D/S|0,S*=4294967296;return new l(C,0)}function g(D,C){if(D.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(D.charAt(0)=="-")return L(g(D.substring(1),C));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=d(Math.pow(C,8));let V=b;for(let w=0;w<D.length;w+=8){var I=Math.min(8,D.length-w);const B=parseInt(D.substring(w,w+I),C);I<8?(I=d(Math.pow(C,I)),V=V.j(I).add(d(B))):(V=V.j(S),V=V.add(d(B)))}return V}var b=h(0),_=h(1),v=h(16777216);r=l.prototype,r.m=function(){if(E(this))return-L(this).m();let D=0,C=1;for(let S=0;S<this.g.length;S++){const V=this.i(S);D+=(V>=0?V:4294967296+V)*C,C*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(N(this))return"0";if(E(this))return"-"+L(this).toString(D);const C=d(Math.pow(D,6));var S=this;let V="";for(;;){const I=F(S,C).g;S=k(S,I.j(C));let w=((S.g.length>0?S.g[0]:S.h)>>>0).toString(D);if(S=I,N(S))return w+V;for(;w.length<6;)w="0"+w;V=w+V}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function N(D){if(D.h!=0)return!1;for(let C=0;C<D.g.length;C++)if(D.g[C]!=0)return!1;return!0}function E(D){return D.h==-1}r.l=function(D){return D=k(this,D),E(D)?-1:N(D)?0:1};function L(D){const C=D.g.length,S=[];for(let V=0;V<C;V++)S[V]=~D.g[V];return new l(S,~D.h).add(_)}r.abs=function(){return E(this)?L(this):this},r.add=function(D){const C=Math.max(this.g.length,D.g.length),S=[];let V=0;for(let I=0;I<=C;I++){let w=V+(this.i(I)&65535)+(D.i(I)&65535),B=(w>>>16)+(this.i(I)>>>16)+(D.i(I)>>>16);V=B>>>16,w&=65535,B&=65535,S[I]=B<<16|w}return new l(S,S[S.length-1]&-2147483648?-1:0)};function k(D,C){return D.add(L(C))}r.j=function(D){if(N(this)||N(D))return b;if(E(this))return E(D)?L(this).j(L(D)):L(L(this).j(D));if(E(D))return L(this.j(L(D)));if(this.l(v)<0&&D.l(v)<0)return d(this.m()*D.m());const C=this.g.length+D.g.length,S=[];for(var V=0;V<2*C;V++)S[V]=0;for(V=0;V<this.g.length;V++)for(let I=0;I<D.g.length;I++){const w=this.i(V)>>>16,B=this.i(V)&65535,M=D.i(I)>>>16,q=D.i(I)&65535;S[2*V+2*I]+=B*q,O(S,2*V+2*I),S[2*V+2*I+1]+=w*q,O(S,2*V+2*I+1),S[2*V+2*I+1]+=B*M,O(S,2*V+2*I+1),S[2*V+2*I+2]+=w*M,O(S,2*V+2*I+2)}for(D=0;D<C;D++)S[D]=S[2*D+1]<<16|S[2*D];for(D=C;D<2*C;D++)S[D]=0;return new l(S,0)};function O(D,C){for(;(D[C]&65535)!=D[C];)D[C+1]+=D[C]>>>16,D[C]&=65535,C++}function $(D,C){this.g=D,this.h=C}function F(D,C){if(N(C))throw Error("division by zero");if(N(D))return new $(b,b);if(E(D))return C=F(L(D),C),new $(L(C.g),L(C.h));if(E(C))return C=F(D,L(C)),new $(L(C.g),C.h);if(D.g.length>30){if(E(D)||E(C))throw Error("slowDivide_ only works with positive integers.");for(var S=_,V=C;V.l(D)<=0;)S=oe(S),V=oe(V);var I=ce(S,1),w=ce(V,1);for(V=ce(V,2),S=ce(S,2);!N(V);){var B=w.add(V);B.l(D)<=0&&(I=I.add(S),w=B),V=ce(V,1),S=ce(S,1)}return C=k(D,I.j(C)),new $(I,C)}for(I=b;D.l(C)>=0;){for(S=Math.max(1,Math.floor(D.m()/C.m())),V=Math.ceil(Math.log(S)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),w=d(S),B=w.j(C);E(B)||B.l(D)>0;)S-=V,w=d(S),B=w.j(C);N(w)&&(w=_),I=I.add(w),D=k(D,B)}return new $(I,D)}r.B=function(D){return F(this,D).h},r.and=function(D){const C=Math.max(this.g.length,D.g.length),S=[];for(let V=0;V<C;V++)S[V]=this.i(V)&D.i(V);return new l(S,this.h&D.h)},r.or=function(D){const C=Math.max(this.g.length,D.g.length),S=[];for(let V=0;V<C;V++)S[V]=this.i(V)|D.i(V);return new l(S,this.h|D.h)},r.xor=function(D){const C=Math.max(this.g.length,D.g.length),S=[];for(let V=0;V<C;V++)S[V]=this.i(V)^D.i(V);return new l(S,this.h^D.h)};function oe(D){const C=D.g.length+1,S=[];for(let V=0;V<C;V++)S[V]=D.i(V)<<1|D.i(V-1)>>>31;return new l(S,D.h)}function ce(D,C){const S=C>>5;C%=32;const V=D.g.length-S,I=[];for(let w=0;w<V;w++)I[w]=C>0?D.i(w+S)>>>C|D.i(w+S+1)<<32-C:D.i(w+S);return new l(I,D.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,h_=n,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=g,_c=l}).apply(typeof gv<"u"?gv:typeof self<"u"?self:typeof window<"u"?window:{});var Mp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var f_,qh,p_,im,_1,m_,g_,y_;(function(){var r,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mp=="object"&&Mp];for(var R=0;R<m.length;++R){var U=m[R];if(U&&U.Math==Math)return U}throw Error("Cannot find global object")}var n=t(this);function i(m,R){if(R)e:{var U=n;m=m.split(".");for(var ee=0;ee<m.length-1;ee++){var ke=m[ee];if(!(ke in U))break e;U=U[ke]}m=m[m.length-1],ee=U[m],R=R(ee),R!=ee&&R!=null&&e(U,m,{configurable:!0,writable:!0,value:R})}}i("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(m){return m||function(R){var U=[],ee;for(ee in R)Object.prototype.hasOwnProperty.call(R,ee)&&U.push([ee,R[ee]]);return U}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function u(m){var R=typeof m;return R=="object"&&m!=null||R=="function"}function h(m,R,U){return m.call.apply(m.bind,arguments)}function d(m,R,U){return d=h,d.apply(null,arguments)}function g(m,R){var U=Array.prototype.slice.call(arguments,1);return function(){var ee=U.slice();return ee.push.apply(ee,arguments),m.apply(this,ee)}}function b(m,R){function U(){}U.prototype=R.prototype,m.Z=R.prototype,m.prototype=new U,m.prototype.constructor=m,m.Ob=function(ee,ke,Be){for(var tt=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)tt[Wt-2]=arguments[Wt];return R.prototype[ke].apply(ee,tt)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function v(m){const R=m.length;if(R>0){const U=Array(R);for(let ee=0;ee<R;ee++)U[ee]=m[ee];return U}return[]}function N(m,R){for(let ee=1;ee<arguments.length;ee++){const ke=arguments[ee];var U=typeof ke;if(U=U!="object"?U:ke?Array.isArray(ke)?"array":U:"null",U=="array"||U=="object"&&typeof ke.length=="number"){U=m.length||0;const Be=ke.length||0;m.length=U+Be;for(let tt=0;tt<Be;tt++)m[U+tt]=ke[tt]}else m.push(ke)}}class E{constructor(R,U){this.i=R,this.j=U,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function L(m){l.setTimeout(()=>{throw m},0)}function k(){var m=D;let R=null;return m.g&&(R=m.g,m.g=m.g.next,m.g||(m.h=null),R.next=null),R}class O{constructor(){this.h=this.g=null}add(R,U){const ee=$.get();ee.set(R,U),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var $=new E(()=>new F,m=>m.reset());class F{constructor(){this.next=this.g=this.h=null}set(R,U){this.h=R,this.g=U,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ce=!1,D=new O,C=()=>{const m=Promise.resolve(void 0);oe=()=>{m.then(S)}};function S(){for(var m;m=k();){try{m.h.call(m.g)}catch(U){L(U)}var R=$;R.j(m),R.h<100&&(R.h++,m.next=R.g,R.g=m)}ce=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(m,R){this.type=m,this.g=this.target=R,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var w=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,R=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const U=()=>{};l.addEventListener("test",U,R),l.removeEventListener("test",U,R)}catch{}return m})();function B(m){return/^[\s\xa0]*$/.test(m)}function M(m,R){I.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,R)}b(M,I),M.prototype.init=function(m,R){const U=this.type=m.type,ee=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=R,R=m.relatedTarget,R||(U=="mouseover"?R=m.fromElement:U=="mouseout"&&(R=m.toElement)),this.relatedTarget=R,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&M.Z.h.call(this)},M.prototype.h=function(){M.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var q="closure_listenable_"+(Math.random()*1e6|0),se=0;function te(m,R,U,ee,ke){this.listener=m,this.proxy=null,this.src=R,this.type=U,this.capture=!!ee,this.ha=ke,this.key=++se,this.da=this.fa=!1}function re(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function xe(m,R,U){for(const ee in m)R.call(U,m[ee],ee,m)}function be(m,R){for(const U in m)R.call(void 0,m[U],U,m)}function Z(m){const R={};for(const U in m)R[U]=m[U];return R}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(m,R){let U,ee;for(let ke=1;ke<arguments.length;ke++){ee=arguments[ke];for(U in ee)m[U]=ee[U];for(let Be=0;Be<W.length;Be++)U=W[Be],Object.prototype.hasOwnProperty.call(ee,U)&&(m[U]=ee[U])}}function ie(m){this.src=m,this.g={},this.h=0}ie.prototype.add=function(m,R,U,ee,ke){const Be=m.toString();m=this.g[Be],m||(m=this.g[Be]=[],this.h++);const tt=ge(m,R,ee,ke);return tt>-1?(R=m[tt],U||(R.fa=!1)):(R=new te(R,this.src,Be,!!ee,ke),R.fa=U,m.push(R)),R};function he(m,R){const U=R.type;if(U in m.g){var ee=m.g[U],ke=Array.prototype.indexOf.call(ee,R,void 0),Be;(Be=ke>=0)&&Array.prototype.splice.call(ee,ke,1),Be&&(re(R),m.g[U].length==0&&(delete m.g[U],m.h--))}}function ge(m,R,U,ee){for(let ke=0;ke<m.length;++ke){const Be=m[ke];if(!Be.da&&Be.listener==R&&Be.capture==!!U&&Be.ha==ee)return ke}return-1}var _e="closure_lm_"+(Math.random()*1e6|0),fe={};function ve(m,R,U,ee,ke){if(Array.isArray(R)){for(let Be=0;Be<R.length;Be++)ve(m,R[Be],U,ee,ke);return null}return U=wt(U),m&&m[q]?m.J(R,U,u(ee)?!!ee.capture:!1,ke):Ne(m,R,U,!1,ee,ke)}function Ne(m,R,U,ee,ke,Be){if(!R)throw Error("Invalid event type");const tt=u(ke)?!!ke.capture:!!ke;let Wt=Ft(m);if(Wt||(m[_e]=Wt=new ie(m)),U=Wt.add(R,U,ee,tt,Be),U.proxy)return U;if(ee=Ue(),U.proxy=ee,ee.src=m,ee.listener=U,m.addEventListener)w||(ke=tt),ke===void 0&&(ke=!1),m.addEventListener(R.toString(),ee,ke);else if(m.attachEvent)m.attachEvent(ze(R.toString()),ee);else if(m.addListener&&m.removeListener)m.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return U}function Ue(){function m(U){return R.call(m.src,m.listener,U)}const R=de;return m}function Xe(m,R,U,ee,ke){if(Array.isArray(R))for(var Be=0;Be<R.length;Be++)Xe(m,R[Be],U,ee,ke);else ee=u(ee)?!!ee.capture:!!ee,U=wt(U),m&&m[q]?(m=m.i,Be=String(R).toString(),Be in m.g&&(R=m.g[Be],U=ge(R,U,ee,ke),U>-1&&(re(R[U]),Array.prototype.splice.call(R,U,1),R.length==0&&(delete m.g[Be],m.h--)))):m&&(m=Ft(m))&&(R=m.g[R.toString()],m=-1,R&&(m=ge(R,U,ee,ke)),(U=m>-1?R[m]:null)&&Ze(U))}function Ze(m){if(typeof m!="number"&&m&&!m.da){var R=m.src;if(R&&R[q])he(R.i,m);else{var U=m.type,ee=m.proxy;R.removeEventListener?R.removeEventListener(U,ee,m.capture):R.detachEvent?R.detachEvent(ze(U),ee):R.addListener&&R.removeListener&&R.removeListener(ee),(U=Ft(R))?(he(U,m),U.h==0&&(U.src=null,R[_e]=null)):re(m)}}}function ze(m){return m in fe?fe[m]:fe[m]="on"+m}function de(m,R){if(m.da)m=!0;else{R=new M(R,this);const U=m.listener,ee=m.ha||m.src;m.fa&&Ze(m),m=U.call(ee,R)}return m}function Ft(m){return m=m[_e],m instanceof ie?m:null}var Et="__closure_events_fn_"+(Math.random()*1e9>>>0);function wt(m){return typeof m=="function"?m:(m[Et]||(m[Et]=function(R){return m.handleEvent(R)}),m[Et])}function He(){V.call(this),this.i=new ie(this),this.M=this,this.G=null}b(He,V),He.prototype[q]=!0,He.prototype.removeEventListener=function(m,R,U,ee){Xe(this,m,R,U,ee)};function ot(m,R){var U,ee=m.G;if(ee)for(U=[];ee;ee=ee.G)U.push(ee);if(m=m.M,ee=R.type||R,typeof R=="string")R=new I(R,m);else if(R instanceof I)R.target=R.target||m;else{var ke=R;R=new I(ee,m),J(R,ke)}ke=!0;let Be,tt;if(U)for(tt=U.length-1;tt>=0;tt--)Be=R.g=U[tt],ke=rt(Be,ee,!0,R)&&ke;if(Be=R.g=m,ke=rt(Be,ee,!0,R)&&ke,ke=rt(Be,ee,!1,R)&&ke,U)for(tt=0;tt<U.length;tt++)Be=R.g=U[tt],ke=rt(Be,ee,!1,R)&&ke}He.prototype.N=function(){if(He.Z.N.call(this),this.i){var m=this.i;for(const R in m.g){const U=m.g[R];for(let ee=0;ee<U.length;ee++)re(U[ee]);delete m.g[R],m.h--}}this.G=null},He.prototype.J=function(m,R,U,ee){return this.i.add(String(m),R,!1,U,ee)},He.prototype.K=function(m,R,U,ee){return this.i.add(String(m),R,!0,U,ee)};function rt(m,R,U,ee){if(R=m.i.g[String(R)],!R)return!0;R=R.concat();let ke=!0;for(let Be=0;Be<R.length;++Be){const tt=R[Be];if(tt&&!tt.da&&tt.capture==U){const Wt=tt.listener,Dr=tt.ha||tt.src;tt.fa&&he(m.i,tt),ke=Wt.call(Dr,ee)!==!1&&ke}}return ke&&!ee.defaultPrevented}function Jt(m,R){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=d(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:l.setTimeout(m,R||0)}function _t(m){m.g=Jt(()=>{m.g=null,m.i&&(m.i=!1,_t(m))},m.l);const R=m.h;m.h=null,m.m.apply(null,R)}class mr extends V{constructor(R,U){super(),this.m=R,this.l=U,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zt(m){V.call(this),this.h=m,this.g={}}b(zt,V);var qt=[];function vr(m){xe(m.g,function(R,U){this.g.hasOwnProperty(U)&&Ze(R)},m),m.g={}}zt.prototype.N=function(){zt.Z.N.call(this),vr(this)},zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mt=l.JSON.stringify,Tt=l.JSON.parse,jt=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function pt(){}function Ir(){}var ir={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ht(){I.call(this,"d")}b(ht,I);function Ht(){I.call(this,"c")}b(Ht,I);var sr={},It=null;function tr(){return It=It||new He}sr.Ia="serverreachability";function $t(m){I.call(this,sr.Ia,m)}b($t,I);function Er(m){const R=tr();ot(R,new $t(R))}sr.STAT_EVENT="statevent";function zr(m,R){I.call(this,sr.STAT_EVENT,m),this.stat=R}b(zr,I);function Ut(m){const R=tr();ot(R,new zr(R,m))}sr.Ja="timingevent";function Dt(m,R){I.call(this,sr.Ja,m),this.size=R}b(Dt,I);function ar(m,R){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},R)}function Hi(){this.g=!0}Hi.prototype.ua=function(){this.g=!1};function zn(m,R,U,ee,ke,Be){m.info(function(){if(m.g)if(Be){var tt="",Wt=Be.split("&");for(let dr=0;dr<Wt.length;dr++){var Dr=Wt[dr].split("=");if(Dr.length>1){const Xr=Dr[0];Dr=Dr[1];const $n=Xr.split("_");tt=$n.length>=2&&$n[1]=="type"?tt+(Xr+"="+Dr+"&"):tt+(Xr+"=redacted&")}}}else tt=null;else tt=Be;return"XMLHTTP REQ ("+ee+") [attempt "+ke+"]: "+R+`
`+U+`
`+tt})}function Po(m,R,U,ee,ke,Be,tt){m.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+ke+"]: "+R+`
`+U+`
`+Be+" "+tt})}function Vn(m,R,U,ee){m.info(function(){return"XMLHTTP TEXT ("+R+"): "+Pi(m,U)+(ee?" "+ee:"")})}function Rt(m,R){m.info(function(){return"TIMEOUT: "+R})}Hi.prototype.info=function(){};function Pi(m,R){if(!m.g)return R;if(!R)return null;try{const Be=JSON.parse(R);if(Be){for(m=0;m<Be.length;m++)if(Array.isArray(Be[m])){var U=Be[m];if(!(U.length<2)){var ee=U[1];if(Array.isArray(ee)&&!(ee.length<1)){var ke=ee[0];if(ke!="noop"&&ke!="stop"&&ke!="close")for(let tt=1;tt<ee.length;tt++)ee[tt]=""}}}}return Mt(Be)}catch{return R}}var pi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},On={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ni;function Cr(){}b(Cr,pt),Cr.prototype.g=function(){return new XMLHttpRequest},Ni=new Cr;function Vr(m){return encodeURIComponent(String(m))}function dn(m){var R=1;m=m.split(":");const U=[];for(;R>0&&m.length;)U.push(m.shift()),R--;return m.length&&U.push(m.join(":")),U}function Qn(m,R,U,ee){this.j=m,this.i=R,this.l=U,this.S=ee||1,this.V=new zt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qo}function Qo(){this.i=null,this.g="",this.h=!1}var Gi={},Ki={};function wn(m,R,U){m.M=1,m.A=Mn(wr(R)),m.u=U,m.R=!0,Bi(m,null)}function Bi(m,R){m.F=Date.now(),yo(m),m.B=wr(m.A);var U=m.B,ee=m.S;Array.isArray(ee)||(ee=[String(ee)]),tl(U.i,"t",ee),m.C=0,U=m.j.L,m.h=new Qo,m.g=lt(m.j,U?R:null,!m.u),m.P>0&&(m.O=new mr(d(m.Y,m,m.g),m.P)),R=m.V,U=m.g,ee=m.ba;var ke="readystatechange";Array.isArray(ke)||(ke&&(qt[0]=ke.toString()),ke=qt);for(let Be=0;Be<ke.length;Be++){const tt=ve(U,ke[Be],ee||R.handleEvent,!1,R.h||R);if(!tt)break;R.g[tt.key]=tt}R=m.J?Z(m.J):{},m.u?(m.v||(m.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,R)):(m.v="GET",m.g.ea(m.B,m.v,null,R)),Er(),zn(m.i,m.v,m.B,m.l,m.S,m.u)}Qn.prototype.ba=function(m){m=m.target;const R=this.O;R&&Qi(m)==3?R.j():this.Y(m)},Qn.prototype.Y=function(m){try{if(m==this.g)e:{const Wt=Qi(this.g),Dr=this.g.ya(),dr=this.g.ca();if(!(Wt<3)&&(Wt!=3||this.g&&(this.h.h||this.g.la()||Aa(this.g)))){this.K||Wt!=4||Dr==7||(Dr==8||dr<=0?Er(3):Er(2)),Xo(this);var R=this.g.ca();this.X=R;var U=Li(this);if(this.o=R==200,Po(this.i,this.v,this.B,this.l,this.S,Wt,R),this.o){if(this.U&&!this.L){t:{if(this.g){var ee,ke=this.g;if((ee=ke.g?ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(ee)){var Be=ee;break t}}Be=null}if(m=Be)Vn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,jr(this,m);else{this.o=!1,this.m=3,Ut(12),Zo(this),No(this);break e}}if(this.R){m=!0;let Xr;for(;!this.K&&this.C<U.length;)if(Xr=go(this,U),Xr==Ki){Wt==4&&(this.m=4,Ut(14),m=!1),Vn(this.i,this.l,null,"[Incomplete Response]");break}else if(Xr==Gi){this.m=4,Ut(15),Vn(this.i,this.l,U,"[Invalid Chunk]"),m=!1;break}else Vn(this.i,this.l,Xr,null),jr(this,Xr);if(bs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wt!=4||U.length!=0||this.h.h||(this.m=1,Ut(16),m=!1),this.o=this.o&&m,!m)Vn(this.i,this.l,U,"[Invalid Chunked Response]"),Zo(this),No(this);else if(U.length>0&&!this.W){this.W=!0;var tt=this.j;tt.g==this&&tt.aa&&!tt.P&&(tt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),ks(tt),tt.P=!0,Ut(11))}}else Vn(this.i,this.l,U,null),jr(this,U);Wt==4&&Zo(this),this.o&&!this.K&&(Wt==4?ue(this.j,this):(this.o=!1,yo(this)))}else ns(this.g),R==400&&U.indexOf("Unknown SID")>0?(this.m=3,Ut(12)):(this.m=0,Ut(13)),Zo(this),No(this)}}}catch{}finally{}};function Li(m){if(!bs(m))return m.g.la();const R=Aa(m.g);if(R==="")return"";let U="";const ee=R.length,ke=Qi(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Zo(m),No(m),"";m.h.i=new l.TextDecoder}for(let Be=0;Be<ee;Be++)m.h.h=!0,U+=m.h.i.decode(R[Be],{stream:!(ke&&Be==ee-1)});return R.length=0,m.h.g+=U,m.C=0,m.h.g}function bs(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function go(m,R){var U=m.C,ee=R.indexOf(`
`,U);return ee==-1?Ki:(U=Number(R.substring(U,ee)),isNaN(U)?Gi:(ee+=1,ee+U>R.length?Ki:(R=R.slice(ee,ee+U),m.C=ee+U,R)))}Qn.prototype.cancel=function(){this.K=!0,Zo(this)};function yo(m){m.T=Date.now()+m.H,ws(m,m.H)}function ws(m,R){if(m.D!=null)throw Error("WatchDog timer not null");m.D=ar(d(m.aa,m),R)}function Xo(m){m.D&&(l.clearTimeout(m.D),m.D=null)}Qn.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Rt(this.i,this.B),this.M!=2&&(Er(),Ut(17)),Zo(this),this.m=2,No(this)):ws(this,this.T-m)};function No(m){m.j.I==0||m.K||ue(m.j,m)}function Zo(m){Xo(m);var R=m.O;R&&typeof R.dispose=="function"&&R.dispose(),m.O=null,vr(m.V),m.g&&(R=m.g,m.g=null,R.abort(),R.dispose())}function jr(m,R){try{var U=m.j;if(U.I!=0&&(U.g==m||wa(U.h,m))){if(!m.L&&wa(U.h,m)&&U.I==3){try{var ee=U.Ba.g.parse(R)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var ke=ee;if(ke[0]==0){e:if(!U.v){if(U.g)if(U.g.F+3e3<m.F)H(U),li(U);else break e;wi(U),Ut(18)}}else U.xa=ke[1],0<U.xa-U.K&&ke[2]<37500&&U.F&&U.A==0&&!U.C&&(U.C=ar(d(U.Va,U),6e3));es(U.h)<=1&&U.ta&&(U.ta=void 0)}else Ce(U,11)}else if((m.L||U.g==m)&&H(U),!B(R))for(ke=U.Ba.g.parse(R),R=0;R<ke.length;R++){let dr=ke[R];const Xr=dr[0];if(!(Xr<=U.K))if(U.K=Xr,dr=dr[1],U.I==2)if(dr[0]=="c"){U.M=dr[1],U.ba=dr[2];const $n=dr[3];$n!=null&&(U.ka=$n,U.j.info("VER="+U.ka));const Vi=dr[4];Vi!=null&&(U.za=Vi,U.j.info("SVER="+U.za));const tn=dr[5];tn!=null&&typeof tn=="number"&&tn>0&&(ee=1.5*tn,U.O=ee,U.j.info("backChannelRequestTimeoutMs_="+ee)),ee=U;const Si=m.g;if(Si){const Mo=Si.g?Si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mo){var Be=ee.h;Be.g||Mo.indexOf("spdy")==-1&&Mo.indexOf("quic")==-1&&Mo.indexOf("h2")==-1||(Be.j=Be.l,Be.g=new Set,Be.h&&(Ss(Be,Be.h),Be.h=null))}if(ee.G){const Qs=Si.g?Si.g.getResponseHeader("X-HTTP-Session-Id"):null;Qs&&(ee.wa=Qs,lr(ee.J,ee.G,Qs))}}U.I=3,U.l&&U.l.ra(),U.aa&&(U.T=Date.now()-m.F,U.j.info("Handshake RTT: "+U.T+"ms")),ee=U;var tt=m;if(ee.na=Ge(ee,ee.L?ee.ba:null,ee.W),tt.L){_s(ee.h,tt);var Wt=tt,Dr=ee.O;Dr&&(Wt.H=Dr),Wt.D&&(Xo(Wt),yo(Wt)),ee.g=tt}else Wn(ee);U.i.length>0&&Oo(U)}else dr[0]!="stop"&&dr[0]!="close"||Ce(U,7);else U.I==3&&(dr[0]=="stop"||dr[0]=="close"?dr[0]=="stop"?Ce(U,7):is(U):dr[0]!="noop"&&U.l&&U.l.qa(dr),U.A=0)}}Er(4)}catch{}}var Ll=class{constructor(m,R){this.g=m,this.map=R}};function qs(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function mi(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function es(m){return m.h?1:m.g?m.g.size:0}function wa(m,R){return m.h?m.h==R:m.g?m.g.has(R):!1}function Ss(m,R){m.g?m.g.add(R):m.h=R}function _s(m,R){m.h&&m.h==R?m.h=null:m.g&&m.g.has(R)&&m.g.delete(R)}qs.prototype.cancel=function(){if(this.i=gi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function gi(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let R=m.i;for(const U of m.g.values())R=R.concat(U.G);return R}return v(m.i)}var Qa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xn(m,R){if(m){m=m.split("&");for(let U=0;U<m.length;U++){const ee=m[U].indexOf("=");let ke,Be=null;ee>=0?(ke=m[U].substring(0,ee),Be=m[U].substring(ee+1)):ke=m[U],R(ke,Be?decodeURIComponent(Be.replace(/\+/g," ")):"")}}}function Bo(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;m instanceof Bo?(this.l=m.l,Ts(this,m.j),this.o=m.o,this.g=m.g,xo(this,m.u),this.h=m.h,yi(this,Js(m.i)),this.m=m.m):m&&(R=String(m).match(Qa))?(this.l=!1,Ts(this,R[1]||"",!0),this.o=vo(R[2]||""),this.g=vo(R[3]||"",!0),xo(this,R[4]),this.h=vo(R[5]||"",!0),yi(this,R[6]||"",!0),this.m=vo(R[7]||"")):(this.l=!1,this.i=new or(null,this.l))}Bo.prototype.toString=function(){const m=[];var R=this.j;R&&m.push(Or(R,Xa,!0),":");var U=this.g;return(U||R=="file")&&(m.push("//"),(R=this.o)&&m.push(Or(R,Xa,!0),"@"),m.push(Vr(U).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U=this.u,U!=null&&m.push(":",String(U))),(U=this.h)&&(this.g&&U.charAt(0)!="/"&&m.push("/"),m.push(Or(U,U.charAt(0)=="/"?Gs:Za,!0))),(U=this.i.toString())&&m.push("?",U),(U=this.m)&&m.push("#",Or(U,Sa)),m.join("")},Bo.prototype.resolve=function(m){const R=wr(this);let U=!!m.j;U?Ts(R,m.j):U=!!m.o,U?R.o=m.o:U=!!m.g,U?R.g=m.g:U=m.u!=null;var ee=m.h;if(U)xo(R,m.u);else if(U=!!m.h){if(ee.charAt(0)!="/")if(this.g&&!this.h)ee="/"+ee;else{var ke=R.h.lastIndexOf("/");ke!=-1&&(ee=R.h.slice(0,ke+1)+ee)}if(ke=ee,ke==".."||ke==".")ee="";else if(ke.indexOf("./")!=-1||ke.indexOf("/.")!=-1){ee=ke.lastIndexOf("/",0)==0,ke=ke.split("/");const Be=[];for(let tt=0;tt<ke.length;){const Wt=ke[tt++];Wt=="."?ee&&tt==ke.length&&Be.push(""):Wt==".."?((Be.length>1||Be.length==1&&Be[0]!="")&&Be.pop(),ee&&tt==ke.length&&Be.push("")):(Be.push(Wt),ee=!0)}ee=Be.join("/")}else ee=ke}return U?R.h=ee:U=m.i.toString()!=="",U?yi(R,Js(m.i)):U=!!m.m,U&&(R.m=m.m),R};function wr(m){return new Bo(m)}function Ts(m,R,U){m.j=U?vo(R,!0):R,m.j&&(m.j=m.j.replace(/:$/,""))}function xo(m,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);m.u=R}else m.u=null}function yi(m,R,U){R instanceof or?(m.i=R,bo(m.i,m.l)):(U||(R=Or(R,Lo)),m.i=new or(R,m.l))}function lr(m,R,U){m.i.set(R,U)}function Mn(m){return lr(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function vo(m,R){return m?R?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Or(m,R,U){return typeof m=="string"?(m=encodeURI(m).replace(R,Hs),U&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Hs(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Xa=/[#\/\?@]/g,Za=/[#\?:]/g,Gs=/[#\?]/g,Lo=/[#\?@]/g,Sa=/#/g;function or(m,R){this.h=this.g=null,this.i=m||null,this.j=!!R}function ai(m){m.g||(m.g=new Map,m.h=0,m.i&&Xn(m.i,function(R,U){m.add(decodeURIComponent(R.replace(/\+/g," ")),U)}))}r=or.prototype,r.add=function(m,R){ai(this),this.i=null,m=xi(this,m);let U=this.g.get(m);return U||this.g.set(m,U=[]),U.push(R),this.h+=1,this};function Ks(m,R){ai(m),R=xi(m,R),m.g.has(R)&&(m.i=null,m.h-=m.g.get(R).length,m.g.delete(R))}function _a(m,R){return ai(m),R=xi(m,R),m.g.has(R)}r.forEach=function(m,R){ai(this),this.g.forEach(function(U,ee){U.forEach(function(ke){m.call(R,ke,ee,this)},this)},this)};function el(m,R){ai(m);let U=[];if(typeof R=="string")_a(m,R)&&(U=U.concat(m.g.get(xi(m,R))));else for(m=Array.from(m.g.values()),R=0;R<m.length;R++)U=U.concat(m[R]);return U}r.set=function(m,R){return ai(this),this.i=null,m=xi(this,m),_a(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[R]),this.h+=1,this},r.get=function(m,R){return m?(m=el(this,m),m.length>0?String(m[0]):R):R};function tl(m,R,U){Ks(m,R),U.length>0&&(m.i=null,m.g.set(xi(m,R),v(U)),m.h+=U.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],R=Array.from(this.g.keys());for(let ee=0;ee<R.length;ee++){var U=R[ee];const ke=Vr(U);U=el(this,U);for(let Be=0;Be<U.length;Be++){let tt=ke;U[Be]!==""&&(tt+="="+Vr(U[Be])),m.push(tt)}}return this.i=m.join("&")};function Js(m){const R=new or;return R.i=m.i,m.g&&(R.g=new Map(m.g),R.h=m.h),R}function xi(m,R){return R=String(R),m.j&&(R=R.toLowerCase()),R}function bo(m,R){R&&!m.j&&(ai(m),m.i=null,m.g.forEach(function(U,ee){const ke=ee.toLowerCase();ee!=ke&&(Ks(this,ee),tl(this,ke,U))},m)),m.j=R}function Fo(m,R){const U=new Hi;if(l.Image){const ee=new Image;ee.onload=g(Sn,U,"TestLoadImage: loaded",!0,R,ee),ee.onerror=g(Sn,U,"TestLoadImage: error",!1,R,ee),ee.onabort=g(Sn,U,"TestLoadImage: abort",!1,R,ee),ee.ontimeout=g(Sn,U,"TestLoadImage: timeout",!1,R,ee),l.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=m}else R(!1)}function vi(m,R){const U=new Hi,ee=new AbortController,ke=setTimeout(()=>{ee.abort(),Sn(U,"TestPingServer: timeout",!1,R)},1e4);fetch(m,{signal:ee.signal}).then(Be=>{clearTimeout(ke),Be.ok?Sn(U,"TestPingServer: ok",!0,R):Sn(U,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(ke),Sn(U,"TestPingServer: error",!1,R)})}function Sn(m,R,U,ee,ke){try{ke&&(ke.onload=null,ke.onerror=null,ke.onabort=null,ke.ontimeout=null),ee(U)}catch{}}function Bt(){this.g=new jt}function ts(m){this.i=m.Sb||null,this.h=m.ab||!1}b(ts,pt),ts.prototype.g=function(){return new Fi(this.i,this.h)};function Fi(m,R){He.call(this),this.H=m,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Fi,He),r=Fi.prototype,r.open=function(m,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=R,this.readyState=1,Dn(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(R.body=m),(this.H||l).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,As(this)),this.readyState=0},r.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Dn(this)),this.g&&(this.readyState=3,Dn(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fl(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fl(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}r.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var R=m.value?m.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!m.done}))&&(this.response=this.responseText+=R)}m.done?As(this):Dn(this),this.readyState==3&&Fl(this)}},r.Oa=function(m){this.g&&(this.response=this.responseText=m,As(this))},r.Na=function(m){this.g&&(this.response=m,As(this))},r.ga=function(){this.g&&As(this)};function As(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Dn(m)}r.setRequestHeader=function(m,R){this.A.append(m,R)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],R=this.h.entries();for(var U=R.next();!U.done;)U=U.value,m.push(U[0]+": "+U[1]),U=R.next();return m.join(`\r
`)};function Dn(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function zo(m){let R="";return xe(m,function(U,ee){R+=ee,R+=":",R+=U,R+=`\r
`}),R}function Ta(m,R,U){e:{for(ee in U){var ee=!1;break e}ee=!0}ee||(U=zo(U),typeof m=="string"?U!=null&&Vr(U):lr(m,R,U))}function Rr(m){He.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Rr,He);var Ys=/^https?$/i,rl=["POST","PUT"];r=Rr.prototype,r.Fa=function(m){this.H=m},r.ea=function(m,R,U,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);R=R?R.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ni.g(),this.g.onreadystatechange=_(d(this.Ca,this));try{this.B=!0,this.g.open(R,String(m),!0),this.B=!1}catch(Be){Ji(this,Be);return}if(m=U||"",U=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var ke in ee)U.set(ke,ee[ke]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const Be of ee.keys())U.set(Be,ee.get(Be));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from(U.keys()).find(Be=>Be.toLowerCase()=="content-type"),ke=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(rl,R,void 0)>=0)||ee||ke||U.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Be,tt]of U)this.g.setRequestHeader(Be,tt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Be){Ji(this,Be)}};function Ji(m,R){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=R,m.o=5,wo(m),rs(m)}function wo(m){m.A||(m.A=!0,ot(m,"complete"),ot(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,ot(this,"complete"),ot(this,"abort"),rs(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rs(this,!0)),Rr.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Yi(this):this.Xa())},r.Xa=function(){Yi(this)};function Yi(m){if(m.h&&typeof s<"u"){if(m.v&&Qi(m)==4)setTimeout(m.Ca.bind(m),0);else if(ot(m,"readystatechange"),Qi(m)==4){m.h=!1;try{const Be=m.ca();e:switch(Be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var U;if(!(U=R)){var ee;if(ee=Be===0){let tt=String(m.D).match(Qa)[1]||null;!tt&&l.self&&l.self.location&&(tt=l.self.location.protocol.slice(0,-1)),ee=!Ys.test(tt?tt.toLowerCase():"")}U=ee}if(U)ot(m,"complete"),ot(m,"success");else{m.o=6;try{var ke=Qi(m)>2?m.g.statusText:""}catch{ke=""}m.l=ke+" ["+m.ca()+"]",wo(m)}}finally{rs(m)}}}}function rs(m,R){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const U=m.g;m.g=null,R||ot(m,"ready");try{U.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Qi(m){return m.g?m.g.readyState:0}r.ca=function(){try{return Qi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(m){if(this.g){var R=this.g.responseText;return m&&R.indexOf(m)==0&&(R=R.substring(m.length)),Tt(R)}};function Aa(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function ns(m){const R={};m=(m.g&&Qi(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<m.length;ee++){if(B(m[ee]))continue;var U=dn(m[ee]);const ke=U[0];if(U=U[1],typeof U!="string")continue;U=U.trim();const Be=R[ke]||[];R[ke]=Be,Be.push(U)}be(R,function(ee){return ee.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(m,R,U){return U&&U.internalChannelParams&&U.internalChannelParams[m]||R}function Cs(m){this.za=0,this.i=[],this.j=new Hi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bi("baseRetryDelayMs",5e3,m),this.Za=bi("retryDelaySeedMs",1e4,m),this.Ta=bi("forwardChannelMaxRetries",2,m),this.va=bi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new qs(m&&m.concurrentRequestLimit),this.Ba=new Bt,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Cs.prototype,r.ka=8,r.I=1,r.connect=function(m,R,U,ee){Ut(0),this.W=m,this.H=R||{},U&&ee!==void 0&&(this.H.OSID=U,this.H.OAID=ee),this.F=this.X,this.J=Ge(this,null,this.W),Oo(this)};function is(m){if(Vo(m),m.I==3){var R=m.V++,U=wr(m.J);if(lr(U,"SID",m.M),lr(U,"RID",R),lr(U,"TYPE","terminate"),Zn(m,U),R=new Qn(m,m.j,R),R.M=2,R.A=Mn(wr(U)),U=!1,l.navigator&&l.navigator.sendBeacon)try{U=l.navigator.sendBeacon(R.A.toString(),"")}catch{}!U&&l.Image&&(new Image().src=R.A,U=!0),U||(R.g=lt(R.j,null),R.g.ea(R.A)),R.F=Date.now(),yo(R)}De(m)}function li(m){m.g&&(ks(m),m.g.cancel(),m.g=null)}function Vo(m){li(m),m.v&&(l.clearTimeout(m.v),m.v=null),H(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function Oo(m){if(!mi(m.h)&&!m.m){m.m=!0;var R=m.Ea;oe||C(),ce||(oe(),ce=!0),D.add(R,m),m.D=0}}function nl(m,R){return es(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=R.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=ar(d(m.Ea,m,R),ye(m,m.D)),m.D++,!0)}r.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const ke=new Qn(this,this.j,m);let Be=this.o;if(this.U&&(Be?(Be=Z(Be),J(Be,this.U)):Be=this.U),this.u!==null||this.R||(ke.J=Be,Be=null),this.S)e:{for(var R=0,U=0;U<this.i.length;U++){t:{var ee=this.i[U];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(R+=ee,R>4096){R=U;break e}if(R===4096||U===this.i.length-1){R=U+1;break e}}R=1e3}else R=1e3;R=Ca(this,ke,R),U=wr(this.J),lr(U,"RID",m),lr(U,"CVER",22),this.G&&lr(U,"X-HTTP-Session-Id",this.G),Zn(this,U),Be&&(this.R?R="headers="+Vr(zo(Be))+"&"+R:this.u&&Ta(U,this.u,Be)),Ss(this.h,ke),this.Ra&&lr(U,"TYPE","init"),this.S?(lr(U,"$req",R),lr(U,"SID","null"),ke.U=!0,wn(ke,U,null)):wn(ke,U,R),this.I=2}}else this.I==3&&(m?zi(this,m):this.i.length==0||mi(this.h)||zi(this))};function zi(m,R){var U;R?U=R.l:U=m.V++;const ee=wr(m.J);lr(ee,"SID",m.M),lr(ee,"RID",U),lr(ee,"AID",m.K),Zn(m,ee),m.u&&m.o&&Ta(ee,m.u,m.o),U=new Qn(m,m.j,U,m.D+1),m.u===null&&(U.J=m.o),R&&(m.i=R.G.concat(m.i)),R=Ca(m,U,1e3),U.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Ss(m.h,U),wn(U,ee,R)}function Zn(m,R){m.H&&xe(m.H,function(U,ee){lr(R,ee,U)}),m.l&&xe({},function(U,ee){lr(R,ee,U)})}function Ca(m,R,U){U=Math.min(m.i.length,U);const ee=m.l?d(m.l.Ka,m.l,m):null;e:{var ke=m.i;let Wt=-1;for(;;){const Dr=["count="+U];Wt==-1?U>0?(Wt=ke[0].g,Dr.push("ofs="+Wt)):Wt=0:Dr.push("ofs="+Wt);let dr=!0;for(let Xr=0;Xr<U;Xr++){var Be=ke[Xr].g;const $n=ke[Xr].map;if(Be-=Wt,Be<0)Wt=Math.max(0,ke[Xr].g-100),dr=!1;else try{Be="req"+Be+"_"||"";try{var tt=$n instanceof Map?$n:Object.entries($n);for(const[Vi,tn]of tt){let Si=tn;u(tn)&&(Si=Mt(tn)),Dr.push(Be+Vi+"="+encodeURIComponent(Si))}}catch(Vi){throw Dr.push(Be+"type="+encodeURIComponent("_badmap")),Vi}}catch{ee&&ee($n)}}if(dr){tt=Dr.join("&");break e}}tt=void 0}return m=m.i.splice(0,U),R.G=m,tt}function Wn(m){if(!m.g&&!m.v){m.Y=1;var R=m.Da;oe||C(),ce||(oe(),ce=!0),D.add(R,m),m.A=0}}function wi(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=ar(d(m.Da,m),ye(m,m.A)),m.A++,!0)}r.Da=function(){if(this.v=null,T(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=ar(d(this.Wa,this),m)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ut(10),li(this),T(this))};function ks(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function T(m){m.g=new Qn(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var R=wr(m.na);lr(R,"RID","rpc"),lr(R,"SID",m.M),lr(R,"AID",m.K),lr(R,"CI",m.F?"0":"1"),!m.F&&m.ia&&lr(R,"TO",m.ia),lr(R,"TYPE","xmlhttp"),Zn(m,R),m.u&&m.o&&Ta(R,m.u,m.o),m.O&&(m.g.H=m.O);var U=m.g;m=m.ba,U.M=1,U.A=Mn(wr(R)),U.u=null,U.R=!0,Bi(U,m)}r.Va=function(){this.C!=null&&(this.C=null,li(this),wi(this),Ut(19))};function H(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function ue(m,R){var U=null;if(m.g==R){H(m),ks(m),m.g=null;var ee=2}else if(wa(m.h,R))U=R.G,_s(m.h,R),ee=1;else return;if(m.I!=0){if(R.o)if(ee==1){U=R.u?R.u.length:0,R=Date.now()-R.F;var ke=m.D;ee=tr(),ot(ee,new Dt(ee,U)),Oo(m)}else Wn(m);else if(ke=R.m,ke==3||ke==0&&R.X>0||!(ee==1&&nl(m,R)||ee==2&&wi(m)))switch(U&&U.length>0&&(R=m.h,R.i=R.i.concat(U)),ke){case 1:Ce(m,5);break;case 4:Ce(m,10);break;case 3:Ce(m,6);break;default:Ce(m,2)}}}function ye(m,R){let U=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(U*=2),U*R}function Ce(m,R){if(m.j.info("Error code "+R),R==2){var U=d(m.bb,m),ee=m.Ua;const ke=!ee;ee=new Bo(ee||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ts(ee,"https"),Mn(ee),ke?Fo(ee.toString(),U):vi(ee.toString(),U)}else Ut(2);m.I=0,m.l&&m.l.pa(R),De(m),Vo(m)}r.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function De(m){if(m.I=0,m.ja=[],m.l){const R=gi(m.h);(R.length!=0||m.i.length!=0)&&(N(m.ja,R),N(m.ja,m.i),m.h.i.length=0,v(m.i),m.i.length=0),m.l.oa()}}function Ge(m,R,U){var ee=U instanceof Bo?wr(U):new Bo(U);if(ee.g!="")R&&(ee.g=R+"."+ee.g),xo(ee,ee.u);else{var ke=l.location;ee=ke.protocol,R=R?R+"."+ke.hostname:ke.hostname,ke=+ke.port;const Be=new Bo(null);ee&&Ts(Be,ee),R&&(Be.g=R),ke&&xo(Be,ke),U&&(Be.h=U),ee=Be}return U=m.G,R=m.wa,U&&R&&lr(ee,U,R),lr(ee,"VER",m.ka),Zn(m,ee),ee}function lt(m,R,U){if(R&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=m.Aa&&!m.ma?new Rr(new ts({ab:U})):new Rr(m.ma),R.Fa(m.L),R}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function mt(){}r=mt.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Lt(){}Lt.prototype.g=function(m,R){return new vt(m,R)};function vt(m,R){He.call(this),this.g=new Cs(R),this.l=m,this.h=R&&R.messageUrlParams||null,m=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(m?m["X-WebChannel-Content-Type"]=R.messageContentType:m={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(m?m["X-WebChannel-Client-Profile"]=R.sa:m={"X-WebChannel-Client-Profile":R.sa}),this.g.U=m,(m=R&&R.Qb)&&!B(m)&&(this.g.u=m),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!B(R)&&(this.g.G=R,m=this.h,m!==null&&R in m&&(m=this.h,R in m&&delete m[R])),this.j=new Mr(this)}b(vt,He),vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vt.prototype.close=function(){is(this.g)},vt.prototype.o=function(m){var R=this.g;if(typeof m=="string"){var U={};U.__data__=m,m=U}else this.v&&(U={},U.__data__=Mt(m),m=U);R.i.push(new Ll(R.Ya++,m)),R.I==3&&Oo(R)},vt.prototype.N=function(){this.g.l=null,delete this.j,is(this.g),delete this.g,vt.Z.N.call(this)};function gr(m){ht.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var R=m.__sm__;if(R){e:{for(const U in R){m=U;break e}m=void 0}(this.i=m)&&(m=this.i,R=R!==null&&m in R?R[m]:void 0),this.data=R}else this.data=m}b(gr,ht);function Qr(){Ht.call(this),this.status=1}b(Qr,Ht);function Mr(m){this.g=m}b(Mr,mt),Mr.prototype.ra=function(){ot(this.g,"a")},Mr.prototype.qa=function(m){ot(this.g,new gr(m))},Mr.prototype.pa=function(m){ot(this.g,new Qr)},Mr.prototype.oa=function(){ot(this.g,"b")},Lt.prototype.createWebChannel=Lt.prototype.g,vt.prototype.send=vt.prototype.o,vt.prototype.open=vt.prototype.m,vt.prototype.close=vt.prototype.close,y_=function(){return new Lt},g_=function(){return tr()},m_=sr,_1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pi.NO_ERROR=0,pi.TIMEOUT=8,pi.HTTP_ERROR=6,im=pi,On.COMPLETE="complete",p_=On,Ir.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",He.prototype.listen=He.prototype.J,qh=Ir,Rr.prototype.listenOnce=Rr.prototype.K,Rr.prototype.getLastError=Rr.prototype.Ha,Rr.prototype.getLastErrorCode=Rr.prototype.ya,Rr.prototype.getStatus=Rr.prototype.ca,Rr.prototype.getResponseJson=Rr.prototype.La,Rr.prototype.getResponseText=Rr.prototype.la,Rr.prototype.send=Rr.prototype.ea,Rr.prototype.setWithCredentials=Rr.prototype.Fa,f_=Rr}).apply(typeof Mp<"u"?Mp:typeof self<"u"?self:typeof window<"u"?window:{});const yv="@firebase/firestore",xv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$i.UNAUTHENTICATED=new $i(null),$i.GOOGLE_CREDENTIALS=new $i("google-credentials-uid"),$i.FIRST_PARTY=new $i("first-party-uid"),$i.MOCK_USER=new $i("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sh="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=new s5("@firebase/firestore");function _d(){return ku.logLevel}function Qe(r,...e){if(ku.logLevel<=yr.DEBUG){const t=e.map(y5);ku.debug(`Firestore (${sh}): ${r}`,...t)}}function Eo(r,...e){if(ku.logLevel<=yr.ERROR){const t=e.map(y5);ku.error(`Firestore (${sh}): ${r}`,...t)}}function Iu(r,...e){if(ku.logLevel<=yr.WARN){const t=e.map(y5);ku.warn(`Firestore (${sh}): ${r}`,...t)}}function y5(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,x_(r,n,t)}function x_(r,e,t){let n=`FIRESTORE (${sh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Eo(n),new Error(n)}function kt(r,e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,r||x_(e,i,n)}function er(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends Pl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($i.UNAUTHENTICATED)))}shutdown(){}}class OE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ME{constructor(e){this.t=e,this.currentUser=$i.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){kt(this.o===void 0,42304);let n=this.i;const i=h=>this.i!==n?(n=this.i,t(h)):Promise.resolve();let s=new Ha;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ha,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const h=s;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},u=h=>{Qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ha)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(Qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(kt(typeof n.accessToken=="string",31837,{l:n}),new v_(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return kt(e===null||typeof e=="string",2055,{h:e}),new $i(e)}}class DE{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=$i.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WE{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new DE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t($i.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $E{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Os(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){kt(this.o===void 0,3512);const n=s=>{s.error!=null&&Qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.m;return this.m=s.token,Qe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>n(s)))};const i=s=>{Qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(kt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=UE(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<t&&(n+=e.charAt(i[s]%62))}return n}}function Zt(r,e){return r<e?-1:r>e?1:0}function T1(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const i=r.charAt(n),s=e.charAt(n);if(i!==s)return Hg(i)===Hg(s)?Zt(i,s):Hg(i)?1:-1}return Zt(r.length,e.length)}const qE=55296,HE=57343;function Hg(r){const e=r.charCodeAt(0);return e>=qE&&e<=HE}function Md(r,e,t){return r.length===e.length&&r.every(((n,i)=>t(n,e[i])))}function b_(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="__name__";class Ma{constructor(e,t,n){t===void 0?t=0:t>e.length&&xt(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&xt(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Ma.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ma?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=Ma.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Zt(e.length,t.length)}static compareSegments(e,t){const n=Ma.isNumericId(e),i=Ma.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?Ma.extractNumericId(e).compare(Ma.extractNumericId(t)):T1(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _c.fromString(e.substring(4,e.length-2))}}class Nr extends Ma{construct(e,t,n){return new Nr(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new nt(We.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((i=>i.length>0)))}return new Nr(t)}static emptyPath(){return new Nr([])}}const GE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends Ma{construct(e,t,n){return new En(e,t,n)}static isValidIdentifier(e){return GE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bv}static keyField(){return new En([bv])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(n.length===0)throw new nt(We.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let l=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new nt(We.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new nt(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=h,i+=2}else u==="`"?(l=!l,i++):u!=="."||l?(n+=u,i++):(s(),i++)}if(s(),l)throw new nt(We.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new En(t)}static emptyPath(){return new En([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.path=e}static fromPath(e){return new st(Nr.fromString(e))}static fromName(e){return new st(Nr.fromString(e).popFirst(5))}static empty(){return new st(Nr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Nr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new st(new Nr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(r,e,t){if(!t)throw new nt(We.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function KE(r,e,t,n){if(e===!0&&n===!0)throw new nt(We.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function wv(r){if(!st.isDocumentKey(r))throw new nt(We.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Sv(r){if(st.isDocumentKey(r))throw new nt(We.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function S_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function e0(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":xt(12329,{type:typeof r})}function Us(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new nt(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=e0(r);throw new nt(We.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(r,e){const t={typeString:r};return e&&(t.value=e),t}function Vf(r,e){if(!S_(r))throw new nt(We.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const i=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const l=r[n];if(i&&typeof l!==i){t=`JSON field '${n}' must be a ${i}.`;break}if(s!==void 0&&l!==s.value){t=`Expected '${n}' field to equal '${s.value}'`;break}}if(t)throw new nt(We.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=-62135596800,Tv=1e6;class Kr{static now(){return Kr.fromMillis(Date.now())}static fromDate(e){return Kr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Tv);return new Kr(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new nt(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new nt(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_v)throw new nt(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new nt(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tv}_compareTo(e){return this.seconds===e.seconds?Zt(this.nanoseconds,e.nanoseconds):Zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Kr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vf(e,Kr._jsonSchema))return new Kr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_v;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Kr._jsonSchemaVersion="firestore/timestamp/1.0",Kr._jsonSchema={type:oi("string",Kr._jsonSchemaVersion),seconds:oi("number"),nanoseconds:oi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{static fromTimestamp(e){return new Pt(e)}static min(){return new Pt(new Kr(0,0))}static max(){return new Pt(new Kr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf=-1;class Em{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}function A1(r){return r.fields.find((e=>e.kind===2))}function su(r){return r.fields.filter((e=>e.kind!==2))}Em.UNKNOWN_ID=-1;class om{constructor(e,t){this.fieldPath=e,this.kind=t}}class yf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new yf(0,vs.min())}}function JE(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=Pt.fromTimestamp(n===1e9?new Kr(t+1,0):new Kr(t,n));return new vs(i,st.empty(),e)}function __(r){return new vs(r.readTime,r.key,gf)}class vs{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new vs(Pt.min(),st.empty(),gf)}static max(){return new vs(Pt.max(),st.empty(),gf)}}function v5(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=st.comparator(r.documentKey,e.documentKey),t!==0?t:Zt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mu(r){if(r.code!==We.FAILED_PRECONDITION||r.message!==T_)throw r;Qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new je(((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof je?t:je.resolve(t)}catch(t){return je.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):je.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):je.reject(t)}static resolve(e){return new je(((t,n)=>{t(e)}))}static reject(e){return new je(((t,n)=>{n(e)}))}static waitFor(e){return new je(((t,n)=>{let i=0,s=0,l=!1;e.forEach((u=>{++i,u.next((()=>{++s,l&&s===i&&t()}),(h=>n(h)))})),l=!0,s===i&&t()}))}static or(e){let t=je.resolve(!1);for(const n of e)t=t.next((i=>i?je.resolve(i):n()));return t}static forEach(e,t){const n=[];return e.forEach(((i,s)=>{n.push(t.call(this,i,s))})),this.waitFor(n)}static mapArray(e,t){return new je(((n,i)=>{const s=e.length,l=new Array(s);let u=0;for(let h=0;h<s;h++){const d=h;t(e[d]).next((g=>{l[d]=g,++u,u===s&&n(l)}),(g=>i(g)))}}))}static doWhile(e,t){return new je(((n,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):n()};s()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="SimpleDb";class t0{static open(e,t,n,i){try{return new t0(t,e.transaction(i,n))}catch(s){throw new ef(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ha,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ef(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const i=b5(n.target.error);this.S.reject(new ef(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Qe(ms,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new QE(t)}}class Tc{static delete(e){return Qe(ms,"Removing database:",e),cu(gS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!AS())return!1;if(Tc.F())return!0;const e=hi(),t=Tc.M(e),n=0<t&&t<10,i=C_(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,Tc.M(hi())===12.2&&Eo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Qe(ms,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const l=s.target.result;t(l)},i.onblocked=()=>{n(new ef(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const l=s.target.error;l.name==="VersionError"?n(new nt(We.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?n(new nt(We.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):n(new ef(e,l))},i.onupgradeneeded=s=>{Qe(ms,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const l=s.target.result;this.N.k(l,i.transaction,s.oldVersion,this.version).next((()=>{Qe(ms,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,i){const s=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const u=t0.open(this.db,e,s?"readonly":"readwrite",n),h=i(u).next((d=>(u.C(),d))).catch((d=>(u.abort(d),je.reject(d)))).toPromise();return h.catch((()=>{})),await u.D,h}catch(u){const h=u,d=h.name!=="FirebaseError"&&l<3;if(Qe(ms,"Transaction failed with error:",h.message,"Retrying:",d),this.close(),!d)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function C_(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class YE{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return cu(this.U.delete())}}class ef extends nt{constructor(e,t){super(We.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Bc(r){return r.name==="IndexedDbTransactionError"}class QE{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(Qe(ms,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(Qe(ms,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),cu(n)}add(e){return Qe(ms,"ADD",this.store.name,e,e),cu(this.store.add(e))}get(e){return cu(this.store.get(e)).next((t=>(t===void 0&&(t=null),Qe(ms,"GET",this.store.name,e,t),t)))}delete(e){return Qe(ms,"DELETE",this.store.name,e),cu(this.store.delete(e))}count(){return Qe(ms,"COUNT",this.store.name),cu(this.store.count())}J(e,t){const n=this.options(e,t),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(n.range);return new je(((l,u)=>{s.onerror=h=>{u(h.target.error)},s.onsuccess=h=>{l(h.target.result)}}))}{const s=this.cursor(n),l=[];return this.H(s,((u,h)=>{l.push(h)})).next((()=>l))}}Y(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new je(((i,s)=>{n.onerror=l=>{s(l.target.error)},n.onsuccess=l=>{i(l.target.result)}}))}Z(e,t){Qe(ms,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const i=this.cursor(n);return this.H(i,((s,l,u)=>u.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.H(i,t)}te(e){const t=this.cursor({});return new je(((n,i)=>{t.onerror=s=>{const l=b5(s.target.error);i(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next((u=>{u?l.continue():n()})):n()}}))}H(e,t){const n=[];return new je(((i,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const u=l.target.result;if(!u)return void i();const h=new YE(u),d=t(u.primaryKey,u.value,h);if(d instanceof je){const g=d.catch((b=>(h.done(),je.reject(b))));n.push(g)}h.isDone?i():h.G===null?u.continue():u.continue(h.G)}})).next((()=>je.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cu(r){return new je(((e,t)=>{r.onsuccess=n=>{const i=n.target.result;e(i)},r.onerror=n=>{const i=b5(n.target.error);t(i)}}))}let Av=!1;function b5(r){const e=Tc.M(hi());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new nt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Av||(Av=!0,setTimeout((()=>{throw n}),0)),n}}return r}const tf="IndexBackfiller";class XE{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Qe(tf,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();Qe(tf,`Documents written: ${t}`)}catch(t){Bc(t)?Qe(tf,"Ignoring IndexedDB error during index backfill: ",t):await Mu(t)}await this.re(6e4)}))}}class ZE{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const n=new Set;let i=t,s=!0;return je.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!n.has(l))return Qe(tf,`Processing collection: ${l}`),this.oe(e,l,i).next((u=>{i-=u,n.add(l)}));s=!1})))).next((()=>t-i))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,n).next((s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(i,s))).next((u=>(Qe(tf,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>l.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((i,s)=>{const l=__(s);v5(l,n)>0&&(n=l)})),new vs(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ds.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu=-1;function r0(r){return r==null}function xf(r){return r===0&&1/r==-1/0}function ej(r){return typeof r=="number"&&Number.isInteger(r)&&!xf(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="";function mo(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Cv(e)),e=tj(r.get(t),e);return Cv(e)}function tj(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const s=r.charAt(i);switch(s){case"\0":t+="";break;case jm:t+="";break;default:t+=s}}return t}function Cv(r){return r+jm+""}function Wa(r){const e=r.length;if(kt(e>=2,64408,{path:r}),e===2)return kt(r.charAt(0)===jm&&r.charAt(1)==="",56145,{path:r}),Nr.emptyPath();const t=e-2,n=[];let i="";for(let s=0;s<e;){const l=r.indexOf(jm,s);switch((l<0||l>t)&&xt(50515,{path:r}),r.charAt(l+1)){case"":const u=r.substring(s,l);let h;i.length===0?h=u:(i+=u,h=i,i=""),n.push(h);break;case"":i+=r.substring(s,l),i+="\0";break;case"":i+=r.substring(s,l+1);break;default:xt(61167,{path:r})}s=l+2}return new Nr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au="remoteDocuments",Of="owner",md="owner",vf="mutationQueues",rj="userId",fa="mutations",kv="batchId",mu="userMutationsIndex",Iv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(r,e){return[r,mo(e)]}function k_(r,e,t){return[r,mo(e),t]}const nj={},Dd="documentMutations",Rm="remoteDocumentsV14",ij=["prefixPath","collectionGroup","readTime","documentId"],am="documentKeyIndex",oj=["prefixPath","collectionGroup","documentId"],I_="collectionGroupIndex",sj=["collectionGroup","readTime","prefixPath","documentId"],bf="remoteDocumentGlobal",C1="remoteDocumentGlobalKey",Wd="targets",E_="queryTargetsIndex",aj=["canonicalId","targetId"],$d="targetDocuments",lj=["targetId","path"],w5="documentTargetsIndex",cj=["path","targetId"],Pm="targetGlobalKey",xu="targetGlobal",wf="collectionParents",uj=["collectionId","parent"],Ud="clientMetadata",dj="clientId",n0="bundles",hj="bundleId",i0="namedQueries",fj="name",S5="indexConfiguration",pj="indexId",k1="collectionGroupIndex",mj="collectionGroup",rf="indexState",gj=["indexId","uid"],j_="sequenceNumberIndex",yj=["uid","sequenceNumber"],nf="indexEntries",xj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],R_="documentKeyIndex",vj=["indexId","uid","orderedDocumentKey"],o0="documentOverlays",bj=["userId","collectionPath","documentId"],I1="collectionPathOverlayIndex",wj=["userId","collectionPath","largestBatchId"],P_="collectionGroupOverlayIndex",Sj=["userId","collectionGroup","largestBatchId"],_5="globals",_j="name",N_=[vf,fa,Dd,au,Wd,Of,xu,$d,Ud,bf,wf,n0,i0],Tj=[...N_,o0],B_=[vf,fa,Dd,Rm,Wd,Of,xu,$d,Ud,bf,wf,n0,i0,o0],L_=B_,T5=[...L_,S5,rf,nf],Aj=T5,F_=[...T5,_5],Cj=F_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1 extends A_{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function fi(r,e){const t=er(r);return Tc.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Lc(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function z_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,t){this.comparator=e,this.root=t||Ui.EMPTY}insert(e,t){return new bn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ui.BLACK,null,null))}remove(e){return new bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ui.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dp(this.root,e,this.comparator,!0)}}class Dp{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ui{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=n??Ui.RED,this.left=i??Ui.EMPTY,this.right=s??Ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new Ui(e??this.key,t??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Ui.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xt(27949);return e+(this.isRed()?0:1)}}Ui.EMPTY=null,Ui.RED=!0,Ui.BLACK=!1;Ui.EMPTY=new class{constructor(){this.size=0}get key(){throw xt(57766)}get value(){throw xt(16141)}get color(){throw xt(16727)}get left(){throw xt(29726)}get right(){throw xt(36894)}copy(e,t,n,i,s){return this}insert(e,t,n){return new Ui(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this.comparator=e,this.data=new bn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jv(this.data.getIterator())}getIteratorFrom(e){return new jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof Yr)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Yr(this.comparator);return t.data=e,t}}class jv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gd(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new Jo([])}unionWith(e){let t=new Yr(En.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Jo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Md(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new V_("Invalid base64 string: "+s):s}})(e);return new si(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let l=0;l<i.length;++l)s+=String.fromCharCode(i[l]);return s})(e);return new si(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}si.EMPTY_BYTE_STRING=new si("");const kj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function El(r){if(kt(!!r,39018),typeof r=="string"){let e=0;const t=kj.exec(r);if(kt(!!t,46558,{timestamp:r}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:vn(r.seconds),nanos:vn(r.nanos)}}function vn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function jl(r){return typeof r=="string"?si.fromBase64String(r):si.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="server_timestamp",M_="__type__",D_="__previous_value__",W_="__local_write_time__";function A5(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[M_])==null?void 0:n.stringValue)===O_}function s0(r){const e=r.mapValue.fields[D_];return A5(e)?s0(e):e}function Sf(r){const e=El(r.mapValue.fields[W_].timestampValue);return new Kr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e,t,n,i,s,l,u,h,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=d,this.isUsingEmulator=g}}const Nm="(default)";class Eu{constructor(e,t){this.projectId=e,this.database=t||Nm}static empty(){return new Eu("","")}get isDefaultDatabase(){return this.database===Nm}isEqual(e){return e instanceof Eu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5="__type__",$_="__max__",xc={mapValue:{fields:{__type__:{stringValue:$_}}}},k5="__vector__",qd="value",lm={nullValue:"NULL_VALUE"};function Ic(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?A5(r)?4:U_(r)?9007199254740991:a0(r)?10:11:xt(28295,{value:r})}function Ja(r,e){if(r===e)return!0;const t=Ic(r);if(t!==Ic(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Sf(r).isEqual(Sf(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const l=El(i.timestampValue),u=El(s.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(i,s){return jl(i.bytesValue).isEqual(jl(s.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(i,s){return vn(i.geoPointValue.latitude)===vn(s.geoPointValue.latitude)&&vn(i.geoPointValue.longitude)===vn(s.geoPointValue.longitude)})(r,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return vn(i.integerValue)===vn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const l=vn(i.doubleValue),u=vn(s.doubleValue);return l===u?xf(l)===xf(u):isNaN(l)&&isNaN(u)}return!1})(r,e);case 9:return Md(r.arrayValue.values||[],e.arrayValue.values||[],Ja);case 10:case 11:return(function(i,s){const l=i.mapValue.fields||{},u=s.mapValue.fields||{};if(Ev(l)!==Ev(u))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(u[h]===void 0||!Ja(l[h],u[h])))return!1;return!0})(r,e);default:return xt(52216,{left:r})}}function _f(r,e){return(r.values||[]).find((t=>Ja(t,e)))!==void 0}function Ec(r,e){if(r===e)return 0;const t=Ic(r),n=Ic(e);if(t!==n)return Zt(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Zt(r.booleanValue,e.booleanValue);case 2:return(function(s,l){const u=vn(s.integerValue||s.doubleValue),h=vn(l.integerValue||l.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(r,e);case 3:return Rv(r.timestampValue,e.timestampValue);case 4:return Rv(Sf(r),Sf(e));case 5:return T1(r.stringValue,e.stringValue);case 6:return(function(s,l){const u=jl(s),h=jl(l);return u.compareTo(h)})(r.bytesValue,e.bytesValue);case 7:return(function(s,l){const u=s.split("/"),h=l.split("/");for(let d=0;d<u.length&&d<h.length;d++){const g=Zt(u[d],h[d]);if(g!==0)return g}return Zt(u.length,h.length)})(r.referenceValue,e.referenceValue);case 8:return(function(s,l){const u=Zt(vn(s.latitude),vn(l.latitude));return u!==0?u:Zt(vn(s.longitude),vn(l.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Pv(r.arrayValue,e.arrayValue);case 10:return(function(s,l){var _,v,N,E;const u=s.fields||{},h=l.fields||{},d=(_=u[qd])==null?void 0:_.arrayValue,g=(v=h[qd])==null?void 0:v.arrayValue,b=Zt(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((E=g==null?void 0:g.values)==null?void 0:E.length)||0);return b!==0?b:Pv(d,g)})(r.mapValue,e.mapValue);case 11:return(function(s,l){if(s===xc.mapValue&&l===xc.mapValue)return 0;if(s===xc.mapValue)return 1;if(l===xc.mapValue)return-1;const u=s.fields||{},h=Object.keys(u),d=l.fields||{},g=Object.keys(d);h.sort(),g.sort();for(let b=0;b<h.length&&b<g.length;++b){const _=T1(h[b],g[b]);if(_!==0)return _;const v=Ec(u[h[b]],d[g[b]]);if(v!==0)return v}return Zt(h.length,g.length)})(r.mapValue,e.mapValue);default:throw xt(23264,{he:t})}}function Rv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Zt(r,e);const t=El(r),n=El(e),i=Zt(t.seconds,n.seconds);return i!==0?i:Zt(t.nanos,n.nanos)}function Pv(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const s=Ec(t[i],n[i]);if(s)return s}return Zt(t.length,n.length)}function Hd(r){return j1(r)}function j1(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=El(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return jl(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return st.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",i=!0;for(const s of t.values||[])i?i=!1:n+=",",n+=j1(s);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const l of n)s?s=!1:i+=",",i+=`${l}:${j1(t.fields[l])}`;return i+"}"})(r.mapValue):xt(61005,{value:r})}function cm(r){switch(Ic(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=s0(r);return e?16+cm(e):16;case 5:return 2*r.stringValue.length;case 6:return jl(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,s)=>i+cm(s)),0)})(r.arrayValue);case 10:case 11:return(function(n){let i=0;return Lc(n.fields,((s,l)=>{i+=s.length+cm(l)})),i})(r.mapValue);default:throw xt(13486,{value:r})}}function Tf(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function R1(r){return!!r&&"integerValue"in r}function Af(r){return!!r&&"arrayValue"in r}function Nv(r){return!!r&&"nullValue"in r}function Bv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function um(r){return!!r&&"mapValue"in r}function a0(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[C5])==null?void 0:n.stringValue)===k5}function of(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Lc(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=of(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=of(r.arrayValue.values[t]);return e}return{...r}}function U_(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===$_}const q_={mapValue:{fields:{[C5]:{stringValue:k5},[qd]:{arrayValue:{}}}}};function Ej(r){return"nullValue"in r?lm:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Tf(Eu.empty(),st.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?a0(r)?q_:{mapValue:{}}:xt(35942,{value:r})}function jj(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Tf(Eu.empty(),st.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?q_:"mapValue"in r?a0(r)?{mapValue:{}}:xc:xt(61959,{value:r})}function Lv(r,e){const t=Ec(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Fv(r,e){const t=Ec(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.value=e}static empty(){return new fo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!um(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=of(t)}setAll(e){let t=En.emptyPath(),n={},i=[];e.forEach(((l,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,n,i),n={},i=[],t=u.popLast()}l?n[u.lastSegment()]=of(l):i.push(u.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());um(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ja(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];um(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Lc(t,((i,s)=>e[i]=s));for(const i of n)delete e[i]}clone(){return new fo(of(this.value))}}function H_(r){const e=[];return Lc(r.fields,((t,n)=>{const i=new En([t]);if(um(n)){const s=H_(n.mapValue).fields;if(s.length===0)e.push(i);else for(const l of s)e.push(i.child(l))}else e.push(i)})),new Jo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,t,n,i,s,l,u){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=s,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Fn(e,0,Pt.min(),Pt.min(),Pt.min(),fo.empty(),0)}static newFoundDocument(e,t,n,i){return new Fn(e,1,t,Pt.min(),n,i,0)}static newNoDocument(e,t){return new Fn(e,2,t,Pt.min(),Pt.min(),fo.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,Pt.min(),Pt.min(),fo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,t){this.position=e,this.inclusive=t}}function zv(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const s=e[i],l=r.position[i];if(s.field.isKeyField()?n=st.comparator(st.fromName(l.referenceValue),t.key):n=Ec(l,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function Vv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ja(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,t="asc"){this.field=e,this.dir=t}}function Rj(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{}class xr extends G_{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new Pj(e,t,n):t==="array-contains"?new Lj(e,n):t==="in"?new Z_(e,n):t==="not-in"?new Fj(e,n):t==="array-contains-any"?new zj(e,n):new xr(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new Nj(e,n):new Bj(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ec(t,this.value)):t!==null&&Ic(this.value)===Ic(t)&&this.matchesComparison(Ec(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jr extends G_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Jr(e,t)}matches(e){return Kd(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Kd(r){return r.op==="and"}function P1(r){return r.op==="or"}function I5(r){return K_(r)&&Kd(r)}function K_(r){for(const e of r.filters)if(e instanceof Jr)return!1;return!0}function N1(r){if(r instanceof xr)return r.field.canonicalString()+r.op.toString()+Hd(r.value);if(I5(r))return r.filters.map((e=>N1(e))).join(",");{const e=r.filters.map((t=>N1(t))).join(",");return`${r.op}(${e})`}}function J_(r,e){return r instanceof xr?(function(n,i){return i instanceof xr&&n.op===i.op&&n.field.isEqual(i.field)&&Ja(n.value,i.value)})(r,e):r instanceof Jr?(function(n,i){return i instanceof Jr&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((s,l,u)=>s&&J_(l,i.filters[u])),!0):!1})(r,e):void xt(19439)}function Y_(r,e){const t=r.filters.concat(e);return Jr.create(t,r.op)}function Q_(r){return r instanceof xr?(function(t){return`${t.field.canonicalString()} ${t.op} ${Hd(t.value)}`})(r):r instanceof Jr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Q_).join(" ,")+"}"})(r):"Filter"}class Pj extends xr{constructor(e,t,n){super(e,t,n),this.key=st.fromName(n.referenceValue)}matches(e){const t=st.comparator(e.key,this.key);return this.matchesComparison(t)}}class Nj extends xr{constructor(e,t){super(e,"in",t),this.keys=X_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Bj extends xr{constructor(e,t){super(e,"not-in",t),this.keys=X_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function X_(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((n=>st.fromName(n.referenceValue)))}class Lj extends xr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Af(t)&&_f(t.arrayValue,this.value)}}class Z_ extends xr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&_f(this.value.arrayValue,t)}}class Fj extends xr{constructor(e,t){super(e,"not-in",t)}matches(e){if(_f(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_f(this.value.arrayValue,t)}}class zj extends xr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Af(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>_f(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,t=null,n=[],i=[],s=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=l,this.endAt=u,this.Te=null}}function B1(r,e=null,t=[],n=[],i=null,s=null,l=null){return new Vj(r,e,t,n,i,s,l)}function ju(r){const e=er(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>N1(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(s){return s.field.canonicalString()+s.dir})(n))).join(","),r0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>Hd(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>Hd(n))).join(",")),e.Te=t}return e.Te}function Mf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Rj(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!J_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Vv(r.startAt,e.startAt)&&Vv(r.endAt,e.endAt)}function Bm(r){return st.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Lm(r,e){return r.filters.filter((t=>t instanceof xr&&t.field.isEqual(e)))}function Ov(r,e,t){let n=lm,i=!0;for(const s of Lm(r,e)){let l=lm,u=!0;switch(s.op){case"<":case"<=":l=Ej(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,u=!1;break;case"!=":case"not-in":l=lm}Lv({value:n,inclusive:i},{value:l,inclusive:u})<0&&(n=l,i=u)}if(t!==null){for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(e)){const l=t.position[s];Lv({value:n,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(n=l,i=t.inclusive);break}}return{value:n,inclusive:i}}function Mv(r,e,t){let n=xc,i=!0;for(const s of Lm(r,e)){let l=xc,u=!0;switch(s.op){case">=":case">":l=jj(s.value),u=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,u=!1;break;case"!=":case"not-in":l=xc}Fv({value:n,inclusive:i},{value:l,inclusive:u})>0&&(n=l,i=u)}if(t!==null){for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(e)){const l=t.position[s];Fv({value:n,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(n=l,i=t.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,t=null,n=[],i=[],s=null,l="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=l,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Oj(r,e,t,n,i,s,l,u){return new ah(r,e,t,n,i,s,l,u)}function l0(r){return new ah(r)}function Dv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function e3(r){return r.collectionGroup!==null}function sf(r){const e=er(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Yr(En.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((d=>{d.isInequality()&&(u=u.add(d.field))}))})),u})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Cf(s,n))})),t.has(En.keyField().canonicalString())||e.Ie.push(new Cf(En.keyField(),n))}return e.Ie}function Ws(r){const e=er(r);return e.Ee||(e.Ee=Mj(e,sf(r))),e.Ee}function Mj(r,e){if(r.limitType==="F")return B1(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new Cf(i.field,s)}));const t=r.endAt?new Gd(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new Gd(r.startAt.position,r.startAt.inclusive):null;return B1(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function L1(r,e){const t=r.filters.concat([e]);return new ah(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function F1(r,e,t){return new ah(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function c0(r,e){return Mf(Ws(r),Ws(e))&&r.limitType===e.limitType}function t3(r){return`${ju(Ws(r))}|lt:${r.limitType}`}function Td(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((i=>Q_(i))).join(", ")}]`),r0(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((i=>Hd(i))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((i=>Hd(i))).join(",")),`Target(${n})`})(Ws(r))}; limitType=${r.limitType})`}function Df(r,e){return e.isFoundDocument()&&(function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):st.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)})(r,e)&&(function(n,i){for(const s of sf(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(r,e)&&(function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0})(r,e)&&(function(n,i){return!(n.startAt&&!(function(l,u,h){const d=zv(l,u,h);return l.inclusive?d<=0:d<0})(n.startAt,sf(n),i)||n.endAt&&!(function(l,u,h){const d=zv(l,u,h);return l.inclusive?d>=0:d>0})(n.endAt,sf(n),i))})(r,e)}function Dj(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function r3(r){return(e,t)=>{let n=!1;for(const i of sf(r)){const s=Wj(i,e,t);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function Wj(r,e,t){const n=r.field.isKeyField()?st.comparator(e.key,t.key):(function(s,l,u){const h=l.data.field(s),d=u.data.field(s);return h!==null&&d!==null?Ec(h,d):xt(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return xt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Lc(this.inner,((t,n)=>{for(const[i,s]of n)e(i,s)}))}isEmpty(){return z_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=new bn(st.comparator);function ys(){return $j}const n3=new bn(st.comparator);function Hh(...r){let e=n3;for(const t of r)e=e.insert(t.key,t);return e}function i3(r){let e=n3;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function $a(){return af()}function o3(){return af()}function af(){return new Nl((r=>r.toString()),((r,e)=>r.isEqual(e)))}const Uj=new bn(st.comparator),qj=new Yr(st.comparator);function ur(...r){let e=qj;for(const t of r)e=e.add(t);return e}const Hj=new Yr(Zt);function Gj(){return Hj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xf(e)?"-0":e}}function s3(r){return{integerValue:""+r}}function Kj(r,e){return ej(e)?s3(e):E5(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(){this._=void 0}}function Jj(r,e,t){return r instanceof Jd?(function(i,s){const l={fields:{[M_]:{stringValue:O_},[W_]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&A5(s)&&(s=s0(s)),s&&(l.fields[D_]=s),{mapValue:l}})(t,e):r instanceof Yd?l3(r,e):r instanceof Qd?c3(r,e):(function(i,s){const l=a3(i,s),u=Wv(l)+Wv(i.Ae);return R1(l)&&R1(i.Ae)?s3(u):E5(i.serializer,u)})(r,e)}function Yj(r,e,t){return r instanceof Yd?l3(r,e):r instanceof Qd?c3(r,e):t}function a3(r,e){return r instanceof kf?(function(n){return R1(n)||(function(s){return!!s&&"doubleValue"in s})(n)})(e)?e:{integerValue:0}:null}class Jd extends u0{}class Yd extends u0{constructor(e){super(),this.elements=e}}function l3(r,e){const t=u3(e);for(const n of r.elements)t.some((i=>Ja(i,n)))||t.push(n);return{arrayValue:{values:t}}}class Qd extends u0{constructor(e){super(),this.elements=e}}function c3(r,e){let t=u3(e);for(const n of r.elements)t=t.filter((i=>!Ja(i,n)));return{arrayValue:{values:t}}}class kf extends u0{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Wv(r){return vn(r.integerValue||r.doubleValue)}function u3(r){return Af(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e,t){this.field=e,this.transform=t}}function Qj(r,e){return r.field.isEqual(e.field)&&(function(n,i){return n instanceof Yd&&i instanceof Yd||n instanceof Qd&&i instanceof Qd?Md(n.elements,i.elements,Ja):n instanceof kf&&i instanceof kf?Ja(n.Ae,i.Ae):n instanceof Jd&&i instanceof Jd})(r.transform,e.transform)}class Xj{constructor(e,t){this.version=e,this.transformResults=t}}class po{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new po}static exists(e){return new po(void 0,e)}static updateTime(e){return new po(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dm(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class d0{}function h3(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new h0(r.key,po.none()):new lh(r.key,r.data,po.none());{const t=r.data,n=fo.empty();let i=new Yr(En.comparator);for(let s of e.fields)if(!i.has(s)){let l=t.field(s);l===null&&s.length>1&&(s=s.popLast(),l=t.field(s)),l===null?n.delete(s):n.set(s,l),i=i.add(s)}return new Bl(r.key,n,new Jo(i.toArray()),po.none())}}function Zj(r,e,t){r instanceof lh?(function(i,s,l){const u=i.value.clone(),h=Uv(i.fieldTransforms,s,l.transformResults);u.setAll(h),s.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(r,e,t):r instanceof Bl?(function(i,s,l){if(!dm(i.precondition,s))return void s.convertToUnknownDocument(l.version);const u=Uv(i.fieldTransforms,s,l.transformResults),h=s.data;h.setAll(f3(i)),h.setAll(u),s.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(r,e,t):(function(i,s,l){s.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function lf(r,e,t,n){return r instanceof lh?(function(s,l,u,h){if(!dm(s.precondition,l))return u;const d=s.value.clone(),g=qv(s.fieldTransforms,h,l);return d.setAll(g),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null})(r,e,t,n):r instanceof Bl?(function(s,l,u,h){if(!dm(s.precondition,l))return u;const d=qv(s.fieldTransforms,h,l),g=l.data;return g.setAll(f3(s)),g.setAll(d),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((b=>b.field)))})(r,e,t,n):(function(s,l,u){return dm(s.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(r,e,t)}function eR(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),s=a3(n.transform,i||null);s!=null&&(t===null&&(t=fo.empty()),t.set(n.field,s))}return t||null}function $v(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Md(n,i,((s,l)=>Qj(s,l)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class lh extends d0{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bl extends d0{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function f3(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function Uv(r,e,t){const n=new Map;kt(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let i=0;i<t.length;i++){const s=r[i],l=s.transform,u=e.data.field(s.field);n.set(s.field,Yj(l,u,t[i]))}return n}function qv(r,e,t){const n=new Map;for(const i of r){const s=i.transform,l=t.data.field(i.field);n.set(i.field,Jj(s,l,e))}return n}class h0 extends d0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class p3 extends d0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Zj(s,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=lf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=lf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=o3();return this.mutations.forEach((i=>{const s=e.get(i.key),l=s.overlayedDocument;let u=this.applyToLocalView(l,s.mutatedFields);u=t.has(i.key)?null:u;const h=h3(l,u);h!==null&&n.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(Pt.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ur())}isEqual(e){return this.batchId===e.batchId&&Md(this.mutations,e.mutations,((t,n)=>$v(t,n)))&&Md(this.baseMutations,e.baseMutations,((t,n)=>$v(t,n)))}}class R5{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){kt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=(function(){return Uj})();const s=e.mutations;for(let l=0;l<s.length;l++)i=i.insert(s[l].key,n[l].version);return new R5(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ii,br;function rR(r){switch(r){case We.OK:return xt(64938);case We.CANCELLED:case We.UNKNOWN:case We.DEADLINE_EXCEEDED:case We.RESOURCE_EXHAUSTED:case We.INTERNAL:case We.UNAVAILABLE:case We.UNAUTHENTICATED:return!1;case We.INVALID_ARGUMENT:case We.NOT_FOUND:case We.ALREADY_EXISTS:case We.PERMISSION_DENIED:case We.FAILED_PRECONDITION:case We.ABORTED:case We.OUT_OF_RANGE:case We.UNIMPLEMENTED:case We.DATA_LOSS:return!0;default:return xt(15467,{code:r})}}function m3(r){if(r===void 0)return Eo("GRPC error has no .code"),We.UNKNOWN;switch(r){case ii.OK:return We.OK;case ii.CANCELLED:return We.CANCELLED;case ii.UNKNOWN:return We.UNKNOWN;case ii.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case ii.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case ii.INTERNAL:return We.INTERNAL;case ii.UNAVAILABLE:return We.UNAVAILABLE;case ii.UNAUTHENTICATED:return We.UNAUTHENTICATED;case ii.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case ii.NOT_FOUND:return We.NOT_FOUND;case ii.ALREADY_EXISTS:return We.ALREADY_EXISTS;case ii.PERMISSION_DENIED:return We.PERMISSION_DENIED;case ii.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case ii.ABORTED:return We.ABORTED;case ii.OUT_OF_RANGE:return We.OUT_OF_RANGE;case ii.UNIMPLEMENTED:return We.UNIMPLEMENTED;case ii.DATA_LOSS:return We.DATA_LOSS;default:return xt(39323,{code:r})}}(br=ii||(ii={}))[br.OK=0]="OK",br[br.CANCELLED=1]="CANCELLED",br[br.UNKNOWN=2]="UNKNOWN",br[br.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",br[br.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",br[br.NOT_FOUND=5]="NOT_FOUND",br[br.ALREADY_EXISTS=6]="ALREADY_EXISTS",br[br.PERMISSION_DENIED=7]="PERMISSION_DENIED",br[br.UNAUTHENTICATED=16]="UNAUTHENTICATED",br[br.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",br[br.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",br[br.ABORTED=10]="ABORTED",br[br.OUT_OF_RANGE=11]="OUT_OF_RANGE",br[br.UNIMPLEMENTED=12]="UNIMPLEMENTED",br[br.INTERNAL=13]="INTERNAL",br[br.UNAVAILABLE=14]="UNAVAILABLE",br[br.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=new _c([4294967295,4294967295],0);function Hv(r){const e=nR().encode(r),t=new h_;return t.update(e),new Uint8Array(t.digest())}function Gv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new _c([t,n],0),new _c([i,s],0)]}class N5{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Gh(`Invalid padding: ${t}`);if(n<0)throw new Gh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Gh(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Gh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=_c.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(_c.fromNumber(n)));return i.compare(iR)===1&&(i=new _c([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Hv(e),[n,i]=Gv(t);for(let s=0;s<this.hashCount;s++){const l=this.ye(n,i,s);if(!this.we(l))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),l=new N5(s,i,t);return n.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const t=Hv(e),[n,i]=Gv(t);for(let s=0;s<this.hashCount;s++){const l=this.ye(n,i,s);this.Se(l)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Gh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,Wf.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new f0(Pt.min(),i,new bn(Zt),ys(),ur())}}class Wf{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Wf(n,t,ur(),ur(),ur())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,t,n,i){this.be=e,this.removedTargetIds=t,this.key=n,this.De=i}}class g3{constructor(e,t){this.targetId=e,this.Ce=t}}class y3{constructor(e,t,n=si.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Kv{constructor(){this.ve=0,this.Fe=Jv(),this.Me=si.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ur(),t=ur(),n=ur();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:xt(38017,{changeType:s})}})),new Wf(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Jv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,kt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class oR{constructor(e){this.Ge=e,this.ze=new Map,this.je=ys(),this.Je=Wp(),this.He=Wp(),this.Ye=new bn(Zt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:xt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,n=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(Bm(s))if(n===0){const l=new st(s.path);this.et(t,l,Fn.newNoDocument(l,Pt.min()))}else kt(n===1,20013,{expectedCount:n});else{const l=this._t(t);if(l!==n){const u=this.ut(e),h=u?this.ct(u,e,l):1;if(h!==0){this.it(t);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=t;let l,u;try{l=jl(n).toUint8Array()}catch(h){if(h instanceof V_)return Iu("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new N5(l,i,s)}catch(h){return Iu(h instanceof Gh?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let i=0;return n.forEach((s=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,l)=>{const u=this.ot(l);if(u){if(s.current&&Bm(u.target)){const h=new st(u.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,Fn.newNoDocument(h,e))}s.Be&&(t.set(l,s.ke()),s.qe())}}));let n=ur();this.He.forEach(((s,l)=>{let u=!0;l.forEachWhile((h=>{const d=this.ot(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(s))})),this.je.forEach(((s,l)=>l.setReadTime(e)));const i=new f0(e,t,this.Ye,this.je,n);return this.je=ys(),this.Je=Wp(),this.He=Wp(),this.Ye=new bn(Zt),i}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Kv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Yr(Zt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Yr(Zt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Qe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Kv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Wp(){return new bn(st.comparator)}function Jv(){return new bn(st.comparator)}const sR={asc:"ASCENDING",desc:"DESCENDING"},aR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lR={and:"AND",or:"OR"};class cR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function z1(r,e){return r.useProto3Json||r0(e)?e:{value:e}}function Xd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function x3(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function uR(r,e){return Xd(r,e.toTimestamp())}function jo(r){return kt(!!r,49232),Pt.fromTimestamp((function(t){const n=El(t);return new Kr(n.seconds,n.nanos)})(r))}function B5(r,e){return V1(r,e).canonicalString()}function V1(r,e){const t=(function(i){return new Nr(["projects",i.projectId,"databases",i.database])})(r).child("documents");return e===void 0?t:t.child(e)}function v3(r){const e=Nr.fromString(r);return kt(I3(e),10190,{key:e.toString()}),e}function Fm(r,e){return B5(r.databaseId,e.path)}function vu(r,e){const t=v3(e);if(t.get(1)!==r.databaseId.projectId)throw new nt(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new nt(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new st(S3(t))}function b3(r,e){return B5(r.databaseId,e)}function w3(r){const e=v3(r);return e.length===4?Nr.emptyPath():S3(e)}function O1(r){return new Nr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function S3(r){return kt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Yv(r,e,t){return{name:Fm(r,e),fields:t.value.mapValue.fields}}function dR(r,e,t){const n=vu(r,e.name),i=jo(e.updateTime),s=e.createTime?jo(e.createTime):Pt.min(),l=new fo({mapValue:{fields:e.fields}}),u=Fn.newFoundDocument(n,i,s,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function hR(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:xt(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,g){return d.useProto3Json?(kt(g===void 0||typeof g=="string",58123),si.fromBase64String(g||"")):(kt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),si.fromUint8Array(g||new Uint8Array))})(r,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(d){const g=d.code===void 0?We.UNKNOWN:m3(d.code);return new nt(g,d.message||"")})(l);t=new y3(n,i,s,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=vu(r,n.document.name),s=jo(n.document.updateTime),l=n.document.createTime?jo(n.document.createTime):Pt.min(),u=new fo({mapValue:{fields:n.document.fields}}),h=Fn.newFoundDocument(i,s,l,u),d=n.targetIds||[],g=n.removedTargetIds||[];t=new hm(d,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=vu(r,n.document),s=n.readTime?jo(n.readTime):Pt.min(),l=Fn.newNoDocument(i,s),u=n.removedTargetIds||[];t=new hm([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=vu(r,n.document),s=n.removedTargetIds||[];t=new hm([],s,i,null)}else{if(!("filter"in e))return xt(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,l=new tR(i,s),u=n.targetId;t=new g3(u,l)}}return t}function zm(r,e){let t;if(e instanceof lh)t={update:Yv(r,e.key,e.value)};else if(e instanceof h0)t={delete:Fm(r,e.key)};else if(e instanceof Bl)t={update:Yv(r,e.key,e.data),updateMask:xR(e.fieldMask)};else{if(!(e instanceof p3))return xt(16599,{Vt:e.type});t={verify:Fm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(s,l){const u=l.transform;if(u instanceof Jd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Yd)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Qd)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof kf)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw xt(20930,{transform:l.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:uR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:xt(27497)})(r,e.precondition)),t}function M1(r,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?po.updateTime(jo(s.updateTime)):s.exists!==void 0?po.exists(s.exists):po.none()})(e.currentDocument):po.none(),n=e.updateTransforms?e.updateTransforms.map((i=>(function(l,u){let h=null;if("setToServerValue"in u)kt(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),h=new Jd;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];h=new Yd(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];h=new Qd(g)}else"increment"in u?h=new kf(l,u.increment):xt(16584,{proto:u});const d=En.fromServerFormat(u.fieldPath);return new d3(d,h)})(r,i))):[];if(e.update){e.update.name;const i=vu(r,e.update.name),s=new fo({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(h){const d=h.fieldPaths||[];return new Jo(d.map((g=>En.fromServerFormat(g))))})(e.updateMask);return new Bl(i,s,l,t,n)}return new lh(i,s,t,n)}if(e.delete){const i=vu(r,e.delete);return new h0(i,t)}if(e.verify){const i=vu(r,e.verify);return new p3(i,t)}return xt(1463,{proto:e})}function fR(r,e){return r&&r.length>0?(kt(e!==void 0,14353),r.map((t=>(function(i,s){let l=i.updateTime?jo(i.updateTime):jo(s);return l.isEqual(Pt.min())&&(l=jo(s)),new Xj(l,i.transformResults||[])})(t,e)))):[]}function _3(r,e){return{documents:[b3(r,e.path)]}}function T3(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=b3(r,i);const s=(function(d){if(d.length!==0)return k3(Jr.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const l=(function(d){if(d.length!==0)return d.map((g=>(function(_){return{field:Ad(_.field),direction:mR(_.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=z1(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function A3(r){let e=w3(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){kt(n===1,65062);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let s=[];t.where&&(s=(function(b){const _=C3(b);return _ instanceof Jr&&I5(_)?_.getFilters():[_]})(t.where));let l=[];t.orderBy&&(l=(function(b){return b.map((_=>(function(N){return new Cf(Cd(N.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(_)))})(t.orderBy));let u=null;t.limit&&(u=(function(b){let _;return _=typeof b=="object"?b.value:b,r0(_)?null:_})(t.limit));let h=null;t.startAt&&(h=(function(b){const _=!!b.before,v=b.values||[];return new Gd(v,_)})(t.startAt));let d=null;return t.endAt&&(d=(function(b){const _=!b.before,v=b.values||[];return new Gd(v,_)})(t.endAt)),Oj(e,i,l,s,u,"F",h,d)}function pR(r,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function C3(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Cd(t.unaryFilter.field);return xr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Cd(t.unaryFilter.field);return xr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Cd(t.unaryFilter.field);return xr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Cd(t.unaryFilter.field);return xr.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xt(61313);default:return xt(60726)}})(r):r.fieldFilter!==void 0?(function(t){return xr.create(Cd(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xt(58110);default:return xt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Jr.create(t.compositeFilter.filters.map((n=>C3(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xt(1026)}})(t.compositeFilter.op))})(r):xt(30097,{filter:r})}function mR(r){return sR[r]}function gR(r){return aR[r]}function yR(r){return lR[r]}function Ad(r){return{fieldPath:r.canonicalString()}}function Cd(r){return En.fromServerFormat(r.fieldPath)}function k3(r){return r instanceof xr?(function(t){if(t.op==="=="){if(Bv(t.value))return{unaryFilter:{field:Ad(t.field),op:"IS_NAN"}};if(Nv(t.value))return{unaryFilter:{field:Ad(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Bv(t.value))return{unaryFilter:{field:Ad(t.field),op:"IS_NOT_NAN"}};if(Nv(t.value))return{unaryFilter:{field:Ad(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ad(t.field),op:gR(t.op),value:t.value}}})(r):r instanceof Jr?(function(t){const n=t.getFilters().map((i=>k3(i)));return n.length===1?n[0]:{compositeFilter:{op:yR(t.op),filters:n}}})(r):xt(54877,{filter:r})}function xR(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function I3(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,t,n,i,s=Pt.min(),l=Pt.min(),u=si.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Al(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e){this.yt=e}}function vR(r,e){let t;if(e.document)t=dR(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=st.fromSegments(e.noDocument.path),i=Pu(e.noDocument.readTime);t=Fn.newNoDocument(n,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return xt(56709);{const n=st.fromSegments(e.unknownDocument.path),i=Pu(e.unknownDocument.version);t=Fn.newUnknownDocument(n,i)}}return e.readTime&&t.setReadTime((function(i){const s=new Kr(i[0],i[1]);return Pt.fromTimestamp(s)})(e.readTime)),t}function Qv(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Vm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(s,l){return{name:Fm(s,l.key),fields:l.data.value.mapValue.fields,updateTime:Xd(s,l.version.toTimestamp()),createTime:Xd(s,l.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:Ru(e.version)};else{if(!e.isUnknownDocument())return xt(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:Ru(e.version)}}return n}function Vm(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Ru(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pu(r){const e=new Kr(r.seconds,r.nanoseconds);return Pt.fromTimestamp(e)}function uu(r,e){const t=(e.baseMutations||[]).map((s=>M1(r.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const l=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const u=e.mutations[s+1];l.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map((s=>M1(r.yt,s))),i=Kr.fromMillis(e.localWriteTimeMs);return new j5(e.batchId,i,t,n)}function Kh(r){const e=Pu(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Pu(r.lastLimboFreeSnapshotVersion):Pt.min();let n;return n=(function(s){return s.documents!==void 0})(r.query)?(function(s){const l=s.documents.length;return kt(l===1,1966,{count:l}),Ws(l0(w3(s.documents[0])))})(r.query):(function(s){return Ws(A3(s))})(r.query),new Al(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,si.fromBase64String(r.resumeToken))}function j3(r,e){const t=Ru(e.snapshotVersion),n=Ru(e.lastLimboFreeSnapshotVersion);let i;i=Bm(e.target)?_3(r.yt,e.target):T3(r.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ju(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function R3(r){const e=A3({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?F1(e,e.limit,"L"):e}function Gg(r,e){return new P5(e.largestBatchId,M1(r.yt,e.overlayMutation))}function Xv(r,e){const t=e.path.lastSegment();return[r,mo(e.path.popLast()),t]}function Zv(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:Ru(n.readTime),documentKey:mo(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{getBundleMetadata(e,t){return eb(e).get(t).next((n=>{if(n)return(function(s){return{id:s.bundleId,createTime:Pu(s.createTime),version:s.version}})(n)}))}saveBundleMetadata(e,t){return eb(e).put((function(i){return{bundleId:i.id,createTime:Ru(jo(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return tb(e).get(t).next((n=>{if(n)return(function(s){return{name:s.name,query:R3(s.bundledQuery),readTime:Pu(s.readTime)}})(n)}))}saveNamedQuery(e,t){return tb(e).put((function(i){return{name:i.name,readTime:Ru(jo(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function eb(r){return fi(r,n0)}function tb(r){return fi(r,i0)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new p0(e,n)}getOverlay(e,t){return zh(e).get(Xv(this.userId,t)).next((n=>n?Gg(this.serializer,n):null))}getOverlays(e,t){const n=$a();return je.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&n.set(i,s)})))).next((()=>n))}saveOverlays(e,t,n){const i=[];return n.forEach(((s,l)=>{const u=new P5(t,l);i.push(this.St(e,u))})),je.waitFor(i)}removeOverlaysForBatchId(e,t,n){const i=new Set;t.forEach((l=>i.add(mo(l.getCollectionPath()))));const s=[];return i.forEach((l=>{const u=IDBKeyRange.bound([this.userId,l,n],[this.userId,l,n+1],!1,!0);s.push(zh(e).Z(I1,u))})),je.waitFor(s)}getOverlaysForCollection(e,t,n){const i=$a(),s=mo(t),l=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return zh(e).J(I1,l).next((u=>{for(const h of u){const d=Gg(this.serializer,h);i.set(d.getKey(),d)}return i}))}getOverlaysForCollectionGroup(e,t,n,i){const s=$a();let l;const u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zh(e).ee({index:P_,range:u},((h,d,g)=>{const b=Gg(this.serializer,d);s.size()<i||b.largestBatchId===l?(s.set(b.getKey(),b),l=b.largestBatchId):g.done()})).next((()=>s))}St(e,t){return zh(e).put((function(i,s,l){const[u,h,d]=Xv(s,l.mutation.key);return{userId:s,collectionPath:h,documentId:d,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:zm(i.yt,l.mutation)}})(this.serializer,this.userId,t))}}function zh(r){return fi(r,o0)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{bt(e){return fi(e,_5)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const n=t==null?void 0:t.value;return n?si.fromUint8Array(n):si.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(vn(e.integerValue));else if("doubleValue"in e){const n=vn(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),xf(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),typeof n=="string"&&(n=El(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(jl(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?U_(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):a0(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):xt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const i of Object.keys(n))this.Ot(i,t),this.Ct(n[i],t)}kt(e,t){var l,u;const n=e.fields||{};this.Ft(t,53);const i=qd,s=((u=(l=n[i].arrayValue)==null?void 0:l.values)==null?void 0:u.length)||0;this.Ft(t,15),t.Mt(vn(s)),this.Ot(i,t),this.Ct(n[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const i of n)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),st.fromName(e).path.forEach((n=>{this.Ft(t,60),this.Ut(n,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}du.Kt=new du;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=255;function SR(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function rb(r){const e=64-(function(n){let i=0;for(let s=0;s<8;++s){const l=SR(255&n[s]);if(i+=l,l!==8)break}return i})(r);return Math.ceil(e/8)}class _R{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),n=rb(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),n=rb(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(yd),this.sn(255)}_n(){this.an(yd),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(s){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,s,!1),new Uint8Array(l.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let i=1;i<t.length;++i)t[i]^=n?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===yd?(this.sn(yd),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===yd?(this.an(yd),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class TR{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class AR{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Vh{constructor(){this.cn=new _R,this.ln=new TR(this.cn),this.hn=new AR(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,t,n,i){this.Tn=e,this.In=t,this.En=n,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new hu(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:fm(this.En),directionalValue:fm(this.dn),orderedDocumentKey:fm(t),documentKey:n.path.toArray()}}Vn(e,t,n){const i=this.Rn(e,t,n);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function cc(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=nb(r.En,e.En),t!==0?t:(t=nb(r.dn,e.dn),t!==0?t:st.comparator(r.In,e.In)))}function nb(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}function fm(r){return TS()?(function(t){let n="";for(let i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return n})(r):r}function ib(r){return typeof r!="string"?r:(function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n})(r)}class ob{constructor(e){this.mn=new Yr(((t,n)=>En.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const n=t;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(kt(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=A1(e);if(t!==void 0&&!this.wn(t))return!1;const n=su(e);let i=new Set,s=0,l=0;for(;s<n.length&&this.wn(n[s]);++s)i=i.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!i.has(u.field.canonicalString())){const h=n[s];if(!this.Sn(u,h)||!this.bn(this.fn[l++],h))return!1}++s}for(;s<n.length;++s){const u=n[s];if(l>=this.fn.length||!this.bn(this.fn[l++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new Yr(En.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new om(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new om(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new om(n.field,n.dir==="asc"?0:1)));return new Em(Em.UNKNOWN_ID,this.collectionId,t,yf.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(r){var t,n;if(kt(r instanceof xr||r instanceof Jr,20012),r instanceof xr){if(r instanceof Z_){const i=((n=(t=r.value.arrayValue)==null?void 0:t.values)==null?void 0:n.map((s=>xr.create(r.field,"==",s))))||[];return Jr.create(i,"or")}return r}const e=r.filters.map((i=>P3(i)));return Jr.create(e,r.op)}function CR(r){if(r.getFilters().length===0)return[];const e=$1(P3(r));return kt(N3(e),7391),D1(e)||W1(e)?[e]:e.getFilters()}function D1(r){return r instanceof xr}function W1(r){return r instanceof Jr&&I5(r)}function N3(r){return D1(r)||W1(r)||(function(t){if(t instanceof Jr&&P1(t)){for(const n of t.getFilters())if(!D1(n)&&!W1(n))return!1;return!0}return!1})(r)}function $1(r){if(kt(r instanceof xr||r instanceof Jr,34018),r instanceof xr)return r;if(r.filters.length===1)return $1(r.filters[0]);const e=r.filters.map((n=>$1(n)));let t=Jr.create(e,r.op);return t=Om(t),N3(t)?t:(kt(t instanceof Jr,64498),kt(Kd(t),40251),kt(t.filters.length>1,57927),t.filters.reduce(((n,i)=>L5(n,i))))}function L5(r,e){let t;return kt(r instanceof xr||r instanceof Jr,38388),kt(e instanceof xr||e instanceof Jr,25473),t=r instanceof xr?e instanceof xr?(function(i,s){return Jr.create([i,s],"and")})(r,e):sb(r,e):e instanceof xr?sb(e,r):(function(i,s){if(kt(i.filters.length>0&&s.filters.length>0,48005),Kd(i)&&Kd(s))return Y_(i,s.getFilters());const l=P1(i)?i:s,u=P1(i)?s:i,h=l.filters.map((d=>L5(d,u)));return Jr.create(h,"or")})(r,e),Om(t)}function sb(r,e){if(Kd(e))return Y_(e,r.getFilters());{const t=e.filters.map((n=>L5(r,n)));return Jr.create(t,"or")}}function Om(r){if(kt(r instanceof xr||r instanceof Jr,11850),r instanceof xr)return r;const e=r.getFilters();if(e.length===1)return Om(e[0]);if(K_(r))return r;const t=e.map((i=>Om(i))),n=[];return t.forEach((i=>{i instanceof xr?n.push(i):i instanceof Jr&&(i.op===r.op?n.push(...i.filters):n.push(i))})),n.length===1?n[0]:Jr.create(n,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(){this.Cn=new F5}addToCollectionParentIndex(e,t){return this.Cn.add(t),je.resolve()}getCollectionParents(e,t){return je.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return je.resolve()}deleteFieldIndex(e,t){return je.resolve()}deleteAllFieldIndexes(e){return je.resolve()}createTargetIndexes(e,t){return je.resolve()}getDocumentsMatchingTarget(e,t){return je.resolve(null)}getIndexType(e,t){return je.resolve(0)}getFieldIndexes(e,t){return je.resolve([])}getNextCollectionGroupToUpdate(e){return je.resolve(null)}getMinOffset(e,t){return je.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,t){return je.resolve(vs.min())}updateCollectionGroup(e,t,n){return je.resolve()}updateIndexEntries(e,t){return je.resolve()}}class F5{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Yr(Nr.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Yr(Nr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="IndexedDbIndexManager",$p=new Uint8Array(0);class IR{constructor(e,t){this.databaseId=t,this.vn=new F5,this.Fn=new Nl((n=>ju(n)),((n,i)=>Mf(n,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const s={collectionId:n,parent:mo(i)};return lb(e).put(s)}return je.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[b_(t),""],!1,!0);return lb(e).J(i).next((s=>{for(const l of s){if(l.collectionId!==t)break;n.push(Wa(l.parent))}return n}))}addFieldIndex(e,t){const n=Oh(e),i=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(t);delete i.indexId;const s=n.add(i);if(t.indexState){const l=vd(e);return s.next((u=>{l.put(Zv(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const n=Oh(e),i=vd(e),s=xd(e);return n.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Oh(e),n=xd(e),i=vd(e);return t.Z().next((()=>n.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return je.forEach(this.Mn(t),(n=>this.getIndexType(e,n).next((i=>{if(i===0||i===1){const s=new ob(n).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const n=xd(e);let i=!0;const s=new Map;return je.forEach(this.Mn(t),(l=>this.xn(e,l).next((u=>{i&&(i=!!u),s.set(l,u)})))).next((()=>{if(i){let l=ur();const u=[];return je.forEach(s,((h,d)=>{Qe(ab,`Using index ${(function($){return`id=${$.indexId}|cg=${$.collectionGroup}|f=${$.fields.map((F=>`${F.fieldPath}:${F.kind}`)).join(",")}`})(h)} to execute ${ju(t)}`);const g=(function($,F){const oe=A1(F);if(oe===void 0)return null;for(const ce of Lm($,oe.fieldPath))switch(ce.op){case"array-contains-any":return ce.value.arrayValue.values||[];case"array-contains":return[ce.value]}return null})(d,h),b=(function($,F){const oe=new Map;for(const ce of su(F))for(const D of Lm($,ce.fieldPath))switch(D.op){case"==":case"in":oe.set(ce.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return oe.set(ce.fieldPath.canonicalString(),D.value),Array.from(oe.values())}return null})(d,h),_=(function($,F){const oe=[];let ce=!0;for(const D of su(F)){const C=D.kind===0?Ov($,D.fieldPath,$.startAt):Mv($,D.fieldPath,$.startAt);oe.push(C.value),ce&&(ce=C.inclusive)}return new Gd(oe,ce)})(d,h),v=(function($,F){const oe=[];let ce=!0;for(const D of su(F)){const C=D.kind===0?Mv($,D.fieldPath,$.endAt):Ov($,D.fieldPath,$.endAt);oe.push(C.value),ce&&(ce=C.inclusive)}return new Gd(oe,ce)})(d,h),N=this.On(h,d,_),E=this.On(h,d,v),L=this.Nn(h,d,b),k=this.Bn(h.indexId,g,N,_.inclusive,E,v.inclusive,L);return je.forEach(k,(O=>n.Y(O,t.limit).next(($=>{$.forEach((F=>{const oe=st.fromSegments(F.documentKey);l.has(oe)||(l=l.add(oe),u.push(oe))}))}))))})).next((()=>u))}return je.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=CR(Jr.create(e.filters,"and")).map((n=>B1(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,n,i,s,l,u){const h=(t!=null?t.length:1)*Math.max(n.length,s.length),d=h/(t!=null?t.length:1),g=[];for(let b=0;b<h;++b){const _=t?this.Ln(t[b/d]):$p,v=this.kn(e,_,n[b%d],i),N=this.qn(e,_,s[b%d],l),E=u.map((L=>this.kn(e,_,L,!0)));g.push(...this.createRange(v,N,E))}return g}kn(e,t,n,i){const s=new hu(e,st.empty(),t,n);return i?s:s.An()}qn(e,t,n,i){const s=new hu(e,st.empty(),t,n);return i?s.An():s}xn(e,t){const n=new ob(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let l=null;for(const u of s)n.yn(u)&&(!l||u.fields.length>l.fields.length)&&(l=u);return l}))}getIndexType(e,t){let n=2;const i=this.Mn(t);return je.forEach(i,(s=>this.xn(e,s).next((l=>{l?n!==0&&l.fields.length<(function(h){let d=new Yr(En.comparator),g=!1;for(const b of h.filters)for(const _ of b.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?g=!0:d=d.add(_.field));for(const b of h.orderBy)b.field.isKeyField()||(d=d.add(b.field));return d.size+(g?1:0)})(s)&&(n=1):n=0})))).next((()=>(function(l){return l.limit!==null})(t)&&i.length>1&&n===2?1:n))}Qn(e,t){const n=new Vh;for(const i of su(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const l=n.Pn(i.kind);du.Kt.Dt(s,l)}return n.un()}Ln(e){const t=new Vh;return du.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new Vh;return du.Kt.Dt(Tf(this.databaseId,t),n.Pn((function(s){const l=su(s);return l.length===0?0:l[l.length-1].kind})(e))),n.un()}Nn(e,t,n){if(n===null)return[];let i=[];i.push(new Vh);let s=0;for(const l of su(e)){const u=n[s++];for(const h of i)if(this.Un(t,l.fieldPath)&&Af(u))i=this.Kn(i,l,u);else{const d=h.Pn(l.kind);du.Kt.Dt(u,d)}}return this.Wn(i)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const i=[...e],s=[];for(const l of n.arrayValue.values||[])for(const u of i){const h=new Vh;h.seed(u.un()),du.Kt.Dt(l,h.Pn(t.kind)),s.push(h)}return s}Un(e,t){return!!e.filters.find((n=>n instanceof xr&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=Oh(e),i=vd(e);return(t?n.J(k1,IDBKeyRange.bound(t,t)):n.J()).next((s=>{const l=[];return je.forEach(s,(u=>i.get([u.indexId,this.uid]).next((h=>{l.push((function(g,b){const _=b?new yf(b.sequenceNumber,new vs(Pu(b.readTime),new st(Wa(b.documentKey)),b.largestBatchId)):yf.empty(),v=g.fields.map((([N,E])=>new om(En.fromServerFormat(N),E)));return new Em(g.indexId,g.collectionGroup,v,_)})(u,h))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,i)=>{const s=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Zt(n.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const i=Oh(e),s=vd(e);return this.Gn(e).next((l=>i.J(k1,IDBKeyRange.bound(t,t)).next((u=>je.forEach(u,(h=>s.put(Zv(h.indexId,this.uid,l,n))))))))}updateIndexEntries(e,t){const n=new Map;return je.forEach(t,((i,s)=>{const l=n.get(i.collectionGroup);return(l?je.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next((u=>(n.set(i.collectionGroup,u),je.forEach(u,(h=>this.zn(e,i,h).next((d=>{const g=this.jn(s,h);return d.isEqual(g)?je.resolve():this.Jn(e,s,h,d,g)})))))))}))}Hn(e,t,n,i){return xd(e).put(i.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,i){return xd(e).delete(i.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const i=xd(e);let s=new Yr(cc);return i.ee({index:R_,range:IDBKeyRange.only([n.indexId,this.uid,fm(this.$n(n,t))])},((l,u)=>{s=s.add(new hu(n.indexId,t,ib(u.arrayValue),ib(u.directionalValue)))})).next((()=>s))}jn(e,t){let n=new Yr(cc);const i=this.Qn(t,e);if(i==null)return n;const s=A1(t);if(s!=null){const l=e.data.field(s.fieldPath);if(Af(l))for(const u of l.arrayValue.values||[])n=n.add(new hu(t.indexId,e.key,this.Ln(u),i))}else n=n.add(new hu(t.indexId,e.key,$p,i));return n}Jn(e,t,n,i,s){Qe(ab,"Updating index entries for document '%s'",t.key);const l=[];return(function(h,d,g,b,_){const v=h.getIterator(),N=d.getIterator();let E=gd(v),L=gd(N);for(;E||L;){let k=!1,O=!1;if(E&&L){const $=g(E,L);$<0?O=!0:$>0&&(k=!0)}else E!=null?O=!0:k=!0;k?(b(L),L=gd(N)):O?(_(E),E=gd(v)):(E=gd(v),L=gd(N))}})(i,s,cc,(u=>{l.push(this.Hn(e,t,n,u))}),(u=>{l.push(this.Yn(e,t,n,u))})),je.waitFor(l)}Gn(e){let t=1;return vd(e).ee({index:j_,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((l,u)=>cc(l,u))).filter(((l,u,h)=>!u||cc(l,h[u-1])!==0));const i=[];i.push(e);for(const l of n){const u=cc(l,e),h=cc(l,t);if(u===0)i[0]=e.An();else if(u>0&&h<0)i.push(l),i.push(l.An());else if(h>0)break}i.push(t);const s=[];for(let l=0;l<i.length;l+=2){if(this.Zn(i[l],i[l+1]))return[];const u=i[l].Vn(this.uid,$p,st.empty()),h=i[l+1].Vn(this.uid,$p,st.empty());s.push(IDBKeyRange.bound(u,h))}return s}Zn(e,t){return cc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(cb)}getMinOffset(e,t){return je.mapArray(this.Mn(t),(n=>this.xn(e,n).next((i=>i||xt(44426))))).next(cb)}}function lb(r){return fi(r,wf)}function xd(r){return fi(r,nf)}function Oh(r){return fi(r,S5)}function vd(r){return fi(r,rf)}function cb(r){kt(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const i=r[n].indexState.offset;v5(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new vs(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},B3=41943040;class ho{static withCacheSize(e){return new ho(e,ho.DEFAULT_COLLECTION_PERCENTILE,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(r,e,t){const n=r.store(fa),i=r.store(Dd),s=[],l=IDBKeyRange.only(t.batchId);let u=0;const h=n.ee({range:l},((g,b,_)=>(u++,_.delete())));s.push(h.next((()=>{kt(u===1,47070,{batchId:t.batchId})})));const d=[];for(const g of t.mutations){const b=k_(e,g.key.path,t.batchId);s.push(i.delete(b)),d.push(g.key)}return je.waitFor(s).next((()=>d))}function Mm(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw xt(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ho.DEFAULT_COLLECTION_PERCENTILE=10,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ho.DEFAULT=new ho(B3,ho.DEFAULT_COLLECTION_PERCENTILE,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ho.DISABLED=new ho(-1,0,0);class m0{constructor(e,t,n,i){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=i,this.Xn={}}static wt(e,t,n,i){kt(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new m0(s,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return uc(e).ee({index:mu,range:n},((i,s,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,n,i){const s=kd(e),l=uc(e);return l.add({}).next((u=>{kt(typeof u=="number",49019);const h=new j5(u,t,n,i),d=(function(v,N,E){const L=E.baseMutations.map((O=>zm(v.yt,O))),k=E.mutations.map((O=>zm(v.yt,O)));return{userId:N,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:L,mutations:k}})(this.serializer,this.userId,h),g=[];let b=new Yr(((_,v)=>Zt(_.canonicalString(),v.canonicalString())));for(const _ of i){const v=k_(this.userId,_.key.path,u);b=b.add(_.key.path.popLast()),g.push(l.put(d)),g.push(s.put(v,nj))}return b.forEach((_=>{g.push(this.indexManager.addToCollectionParentIndex(e,_))})),e.addOnCommittedListener((()=>{this.Xn[u]=h.keys()})),je.waitFor(g).next((()=>h))}))}lookupMutationBatch(e,t){return uc(e).get(t).next((n=>n?(kt(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),uu(this.serializer,n)):null))}er(e,t){return this.Xn[t]?je.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const i=n.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return uc(e).ee({index:mu,range:i},((l,u,h)=>{u.userId===this.userId&&(kt(u.batchId>=n,47524,{tr:n}),s=uu(this.serializer,u)),h.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=yu;return uc(e).ee({index:mu,range:t,reverse:!0},((i,s,l)=>{n=s.batchId,l.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,yu],[this.userId,Number.POSITIVE_INFINITY]);return uc(e).J(mu,t).next((n=>n.map((i=>uu(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=sm(this.userId,t.path),i=IDBKeyRange.lowerBound(n),s=[];return kd(e).ee({range:i},((l,u,h)=>{const[d,g,b]=l,_=Wa(g);if(d===this.userId&&t.path.isEqual(_))return uc(e).get(b).next((v=>{if(!v)throw xt(61480,{nr:l,batchId:b});kt(v.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:v.userId,batchId:b}),s.push(uu(this.serializer,v))}));h.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Yr(Zt);const i=[];return t.forEach((s=>{const l=sm(this.userId,s.path),u=IDBKeyRange.lowerBound(l),h=kd(e).ee({range:u},((d,g,b)=>{const[_,v,N]=d,E=Wa(v);_===this.userId&&s.path.isEqual(E)?n=n.add(N):b.done()}));i.push(h)})),je.waitFor(i).next((()=>this.rr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,s=sm(this.userId,n),l=IDBKeyRange.lowerBound(s);let u=new Yr(Zt);return kd(e).ee({range:l},((h,d,g)=>{const[b,_,v]=h,N=Wa(_);b===this.userId&&n.isPrefixOf(N)?N.length===i&&(u=u.add(v)):g.done()})).next((()=>this.rr(e,u)))}rr(e,t){const n=[],i=[];return t.forEach((s=>{i.push(uc(e).get(s).next((l=>{if(l===null)throw xt(35274,{batchId:s});kt(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:s}),n.push(uu(this.serializer,l))})))})),je.waitFor(i).next((()=>n))}removeMutationBatch(e,t){return L3(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),je.forEach(n,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return je.resolve();const n=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),i=[];return kd(e).ee({range:n},((s,l,u)=>{if(s[0]===this.userId){const h=Wa(s[1]);i.push(h)}else u.done()})).next((()=>{kt(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,t){return F3(e,this.userId,t)}_r(e){return z3(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:yu,lastStreamToken:""}))}}function F3(r,e,t){const n=sm(e,t.path),i=n[1],s=IDBKeyRange.lowerBound(n);let l=!1;return kd(r).ee({range:s,X:!0},((u,h,d)=>{const[g,b,_]=u;g===e&&b===i&&(l=!0),d.done()})).next((()=>l))}function uc(r){return fi(r,fa)}function kd(r){return fi(r,Dd)}function z3(r){return fi(r,vf)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Nu(0)}static cr(){return new Nu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const n=new Nu(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Pt.fromTimestamp(new Kr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>bd(e).delete(t.targetId))).next((()=>this.lr(e))).next((n=>(kt(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n))))}removeTargets(e,t,n){let i=0;const s=[];return bd(e).ee(((l,u)=>{const h=Kh(u);h.sequenceNumber<=t&&n.get(h.targetId)===null&&(i++,s.push(this.removeTargetData(e,h)))})).next((()=>je.waitFor(s))).next((()=>i))}forEachTarget(e,t){return bd(e).ee(((n,i)=>{const s=Kh(i);t(s)}))}lr(e){return db(e).get(Pm).next((t=>(kt(t!==null,2888),t)))}hr(e,t){return db(e).put(Pm,t)}Pr(e,t){return bd(e).put(j3(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const n=ju(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return bd(e).ee({range:i,index:E_},((l,u,h)=>{const d=Kh(u);Mf(t,d.target)&&(s=d,h.done())})).next((()=>s))}addMatchingKeys(e,t,n){const i=[],s=gc(e);return t.forEach((l=>{const u=mo(l.path);i.push(s.put({targetId:n,path:u})),i.push(this.referenceDelegate.addReference(e,n,l))})),je.waitFor(i)}removeMatchingKeys(e,t,n){const i=gc(e);return je.forEach(t,(s=>{const l=mo(s.path);return je.waitFor([i.delete([n,l]),this.referenceDelegate.removeReference(e,n,s)])}))}removeMatchingKeysForTargetId(e,t){const n=gc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=gc(e);let s=ur();return i.ee({range:n,X:!0},((l,u,h)=>{const d=Wa(l[1]),g=new st(d);s=s.add(g)})).next((()=>s))}containsKey(e,t){const n=mo(t.path),i=IDBKeyRange.bound([n],[b_(n)],!1,!0);let s=0;return gc(e).ee({index:w5,X:!0,range:i},(([l,u],h,d)=>{l!==0&&(s++,d.done())})).next((()=>s>0))}At(e,t){return bd(e).get(t).next((n=>n?Kh(n):null))}}function bd(r){return fi(r,Wd)}function db(r){return fi(r,xu)}function gc(r){return fi(r,$d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="LruGarbageCollector",jR=1048576;function fb([r,e],[t,n]){const i=Zt(r,t);return i===0?Zt(e,n):i}class RR{constructor(e){this.Ir=e,this.buffer=new Yr(fb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();fb(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class V3{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Qe(hb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bc(t)?Qe(hb,"Ignoring IndexedDB error during garbage collection: ",t):await Mu(t)}await this.Vr(3e5)}))}}class PR{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return je.resolve(Ds.ce);const n=new RR(t);return this.mr.forEachTarget(e,(i=>n.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>n.Ar(i))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Qe("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(ub)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ub):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,i,s,l,u,h,d;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(Qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),i=this.params.maximumSequenceNumbersToCollect):i=b,l=Date.now(),this.nthSequenceNumber(e,i)))).next((b=>(n=b,u=Date.now(),this.removeTargets(e,n,t)))).next((b=>(s=b,h=Date.now(),this.removeOrphanedDocuments(e,n)))).next((b=>(d=Date.now(),_d()<=yr.DEBUG&&Qe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${i} in `+(u-l)+`ms
	Removed ${s} targets in `+(h-u)+`ms
	Removed ${b} documents in `+(d-h)+`ms
Total Duration: ${d-g}ms`),je.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:b}))))}}function O3(r,e){return new PR(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,t){this.db=e,this.garbageCollector=O3(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((i=>n+i))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((n,i)=>t(i)))}addReference(e,t,n){return Up(e,n)}removeReference(e,t,n){return Up(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Up(e,t)}br(e,t){return(function(i,s){let l=!1;return z3(i).te((u=>F3(i,u,s).next((h=>(h&&(l=!0),je.resolve(!h)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((l,u)=>{if(u<=t){const h=this.br(e,l).next((d=>{if(!d)return s++,n.getEntry(e,l).next((()=>(n.removeEntry(l,Pt.min()),gc(e).delete((function(b){return[0,mo(b.path)]})(l)))))}));i.push(h)}})).next((()=>je.waitFor(i))).next((()=>n.apply(e))).next((()=>s))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Up(e,t)}Sr(e,t){const n=gc(e);let i,s=Ds.ce;return n.ee({index:w5},(([l,u],{path:h,sequenceNumber:d})=>{l===0?(s!==Ds.ce&&t(new st(Wa(i)),s),s=d,i=h):s=Ds.ce})).next((()=>{s!==Ds.ce&&t(new st(Wa(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Up(r,e){return gc(r).put((function(n,i){return{targetId:0,path:mo(n.path),sequenceNumber:i}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.changes=new Nl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?je.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return nu(e).put(n)}removeEntry(e,t,n){return nu(e).delete((function(s,l){const u=s.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Vm(l),u[u.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Dr(e,n))))}getEntry(e,t){let n=Fn.newInvalidDocument(t);return nu(e).ee({index:am,range:IDBKeyRange.only(Mh(t))},((i,s)=>{n=this.Cr(t,s)})).next((()=>n))}vr(e,t){let n={size:0,document:Fn.newInvalidDocument(t)};return nu(e).ee({index:am,range:IDBKeyRange.only(Mh(t))},((i,s)=>{n={document:this.Cr(t,s),size:Mm(s)}})).next((()=>n))}getEntries(e,t){let n=ys();return this.Fr(e,t,((i,s)=>{const l=this.Cr(i,s);n=n.insert(i,l)})).next((()=>n))}Mr(e,t){let n=ys(),i=new bn(st.comparator);return this.Fr(e,t,((s,l)=>{const u=this.Cr(s,l);n=n.insert(s,u),i=i.insert(s,Mm(l))})).next((()=>({documents:n,Or:i})))}Fr(e,t,n){if(t.isEmpty())return je.resolve();let i=new Yr(gb);t.forEach((h=>i=i.add(h)));const s=IDBKeyRange.bound(Mh(i.first()),Mh(i.last())),l=i.getIterator();let u=l.getNext();return nu(e).ee({index:am,range:s},((h,d,g)=>{const b=st.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;u&&gb(u,b)<0;)n(u,null),u=l.getNext();u&&u.isEqual(b)&&(n(u,d),u=l.hasNext()?l.getNext():null),u?g.j(Mh(u)):g.done()})).next((()=>{for(;u;)n(u,null),u=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,n,i,s){const l=t.path,u=[l.popLast().toArray(),l.lastSegment(),Vm(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],h=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return nu(e).J(IDBKeyRange.bound(u,h,!0)).next((d=>{s==null||s.incrementDocumentReadCount(d.length);let g=ys();for(const b of d){const _=this.Cr(st.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);_.isFoundDocument()&&(Df(t,_)||i.has(_.key))&&(g=g.insert(_.key,_))}return g}))}getAllFromCollectionGroup(e,t,n,i){let s=ys();const l=mb(t,n),u=mb(t,vs.max());return nu(e).ee({index:I_,range:IDBKeyRange.bound(l,u,!0)},((h,d,g)=>{const b=this.Cr(st.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(b.key,b),s.size===i&&g.done()})).next((()=>s))}newChangeBuffer(e){return new LR(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return pb(e).get(C1).next((t=>(kt(!!t,20021),t)))}Dr(e,t){return pb(e).put(C1,t)}Cr(e,t){if(t){const n=vR(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(Pt.min())))return n}return Fn.newInvalidDocument(e)}}function D3(r){return new BR(r)}class LR extends M3{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Nl((n=>n.toString()),((n,i)=>n.isEqual(i)))}applyChanges(e){const t=[];let n=0,i=new Yr(((s,l)=>Zt(s.canonicalString(),l.canonicalString())));return this.changes.forEach(((s,l)=>{const u=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,u.readTime)),l.isValidDocument()){const h=Qv(this.Nr.serializer,l);i=i.add(s.path.popLast());const d=Mm(h);n+=d-u.size,t.push(this.Nr.addEntry(e,s,h))}else if(n-=u.size,this.trackRemovals){const h=Qv(this.Nr.serializer,l.convertToNoDocument(Pt.min()));t.push(this.Nr.addEntry(e,s,h))}})),i.forEach((s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Nr.updateMetadata(e,n)),je.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((n=>(this.Br.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:n,Or:i})=>(i.forEach(((s,l)=>{this.Br.set(s,{size:l,readTime:n.get(s).readTime})})),n)))}}function pb(r){return fi(r,bf)}function nu(r){return fi(r,Rm)}function Mh(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mb(r,e){const t=e.documentKey.path.toArray();return[r,Vm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function gb(r,e){const t=r.path.toArray(),n=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<n.length-2;++s)if(i=Zt(t[s],n[s]),i)return i;return i=Zt(t.length,n.length),i||(i=Zt(t[t.length-2],n[n.length-2]),i||Zt(t[t.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(n!==null&&lf(n.mutation,i,Jo.empty(),Kr.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,ur()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=ur()){const i=$a();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((s=>{let l=Hh();return s.forEach(((u,h)=>{l=l.insert(u,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const n=$a();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,ur())))}populateOverlays(e,t,n){const i=[];return n.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((l,u)=>{t.set(l,u)}))}))}computeViews(e,t,n,i){let s=ys();const l=af(),u=(function(){return af()})();return t.forEach(((h,d)=>{const g=n.get(d.key);i.has(d.key)&&(g===void 0||g.mutation instanceof Bl)?s=s.insert(d.key,d):g!==void 0?(l.set(d.key,g.mutation.getFieldMask()),lf(g.mutation,d,g.mutation.getFieldMask(),Kr.now())):l.set(d.key,Jo.empty())})),this.recalculateAndSaveOverlays(e,s).next((h=>(h.forEach(((d,g)=>l.set(d,g))),t.forEach(((d,g)=>u.set(d,new FR(g,l.get(d)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=af();let i=new bn(((l,u)=>l-u)),s=ur();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const u of l)u.keys().forEach((h=>{const d=t.get(h);if(d===null)return;let g=n.get(h)||Jo.empty();g=u.applyToLocalView(d,g),n.set(h,g);const b=(i.get(u.batchId)||ur()).add(h);i=i.insert(u.batchId,b)}))})).next((()=>{const l=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),d=h.key,g=h.value,b=o3();g.forEach((_=>{if(!s.has(_)){const v=h3(t.get(_),n.get(_));v!==null&&b.set(_,v),s=s.add(_)}})),l.push(this.documentOverlayCache.saveOverlays(e,d,b))}return je.waitFor(l)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,i){return(function(l){return st.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):e3(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((s=>{const l=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-s.size):je.resolve($a());let u=gf,h=s;return l.next((d=>je.forEach(d,((g,b)=>(u<b.largestBatchId&&(u=b.largestBatchId),s.get(g)?je.resolve():this.remoteDocumentCache.getEntry(e,g).next((_=>{h=h.insert(g,_)}))))).next((()=>this.populateOverlays(e,d,s))).next((()=>this.computeViews(e,h,d,ur()))).next((g=>({batchId:u,changes:i3(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new st(t)).next((n=>{let i=Hh();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const s=t.collectionGroup;let l=Hh();return this.indexManager.getCollectionParents(e,s).next((u=>je.forEach(u,(h=>{const d=(function(b,_){return new ah(_,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,n,i).next((g=>{g.forEach(((b,_)=>{l=l.insert(b,_)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((l=>(s=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,i)))).next((l=>{s.forEach(((h,d)=>{const g=d.getKey();l.get(g)===null&&(l=l.insert(g,Fn.newInvalidDocument(g)))}));let u=Hh();return l.forEach(((h,d)=>{const g=s.get(h);g!==void 0&&lf(g.mutation,d,Jo.empty(),Kr.now()),Df(t,d)&&(u=u.insert(h,d))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return je.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:jo(i.createTime)}})(t)),je.resolve()}getNamedQuery(e,t){return je.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:R3(i.bundledQuery),readTime:jo(i.readTime)}})(t)),je.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.overlays=new bn(st.comparator),this.qr=new Map}getOverlay(e,t){return je.resolve(this.overlays.get(t))}getOverlays(e,t){const n=$a();return je.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&n.set(i,s)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((i,s)=>{this.St(e,t,s)})),je.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(n)),je.resolve()}getOverlaysForCollection(e,t,n){const i=$a(),s=t.length+1,l=new st(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const h=u.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&h.largestBatchId>n&&i.set(h.getKey(),h)}return je.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let s=new bn(((d,g)=>d-g));const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>n){let g=s.get(d.largestBatchId);g===null&&(g=$a(),s=s.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const u=$a(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((d,g)=>u.set(d,g))),!(u.size()>=i)););return je.resolve(u)}St(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(n.key,new P5(t,n));let s=this.qr.get(t);s===void 0&&(s=ur(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(){this.sessionToken=si.EMPTY_BYTE_STRING}getSessionToken(e){return je.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,je.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(){this.Qr=new Yr(Ei.$r),this.Ur=new Yr(Ei.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Ei(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new Ei(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new st(new Nr([])),n=new Ei(t,e),i=new Ei(t,e+1),s=[];return this.Ur.forEachInRange([n,i],(l=>{this.Gr(l),s.push(l.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new st(new Nr([])),n=new Ei(t,e),i=new Ei(t,e+1);let s=ur();return this.Ur.forEachInRange([n,i],(l=>{s=s.add(l.key)})),s}containsKey(e){const t=new Ei(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Ei{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return st.comparator(e.key,t.key)||Zt(e.Yr,t.Yr)}static Kr(e,t){return Zt(e.Yr,t.Yr)||st.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Yr(Ei.$r)}checkEmpty(e){return je.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new j5(s,t,n,i);this.mutationQueue.push(l);for(const u of i)this.Zr=this.Zr.add(new Ei(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return je.resolve(l)}lookupMutationBatch(e,t){return je.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.ei(n),s=i<0?0:i;return je.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(this.mutationQueue.length===0?yu:this.tr-1)}getAllMutationBatches(e){return je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ei(t,0),i=new Ei(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,i],(l=>{const u=this.Xr(l.Yr);s.push(u)})),je.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Yr(Zt);return t.forEach((i=>{const s=new Ei(i,0),l=new Ei(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,l],(u=>{n=n.add(u.Yr)}))})),je.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;st.isDocumentKey(s)||(s=s.child(""));const l=new Ei(new st(s),0);let u=new Yr(Zt);return this.Zr.forEachWhile((h=>{const d=h.key.path;return!!n.isPrefixOf(d)&&(d.length===i&&(u=u.add(h.Yr)),!0)}),l),je.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((n=>{const i=this.Xr(n);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){kt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return je.forEach(t.mutations,(i=>{const s=new Ei(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new Ei(t,0),i=this.Zr.firstAfterOrEqual(n);return je.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,je.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.ri=e,this.docs=(function(){return new bn(st.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),s=i?i.size:0,l=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return je.resolve(n?n.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let n=ys();return t.forEach((i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():Fn.newInvalidDocument(i))})),je.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let s=ys();const l=t.path,u=new st(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:d,value:{document:g}}=h.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||v5(__(g),n)<=0||(i.has(g.key)||Df(t,g))&&(s=s.insert(g.key,g.mutableCopy()))}return je.resolve(s)}getAllFromCollectionGroup(e,t,n,i){xt(9500)}ii(e,t){return je.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new WR(this)}getSize(e){return je.resolve(this.size)}}class WR extends M3{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)})),je.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.persistence=e,this.si=new Nl((t=>ju(t)),Mf),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.oi=0,this._i=new z5,this.targetCount=0,this.ai=Nu.ur()}forEachTarget(e,t){return this.si.forEach(((n,i)=>t(i))),je.resolve()}getLastRemoteSnapshotVersion(e){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return je.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),je.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Nu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,je.resolve()}updateTargetData(e,t){return this.Pr(t),je.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,je.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.si.delete(l),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),je.waitFor(s).next((()=>i))}getTargetCount(e){return je.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return je.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),je.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((l=>{s.push(i.markPotentiallyOrphaned(e,l))})),je.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),je.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return je.resolve(n)}containsKey(e,t){return je.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ds(0),this.li=!1,this.li=!0,this.hi=new OR,this.referenceDelegate=e(this),this.Pi=new $R(this),this.indexManager=new kR,this.remoteDocumentCache=(function(i){return new DR(i)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new E3(t),this.Ii=new zR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new VR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new MR(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Qe("MemoryPersistence","Starting transaction:",e);const i=new UR(this.ci.next());return this.referenceDelegate.Ei(),n(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return je.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class UR extends A_{constructor(e){super(),this.currentSequenceNumber=e}}class g0{constructor(e){this.persistence=e,this.Ri=new z5,this.Vi=null}static mi(e){return new g0(e)}get fi(){if(this.Vi)return this.Vi;throw xt(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),je.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),je.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),je.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.fi,(n=>{const i=st.fromPath(n);return this.gi(e,i).next((s=>{s||t.removeEntry(i,Pt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return je.or([()=>je.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Dm{constructor(e,t){this.persistence=e,this.pi=new Nl((n=>mo(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=O3(this,t)}static mi(e,t){return new Dm(e,t)}Ei(){}di(e){return je.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((i=>n+i))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return je.forEach(this.pi,((n,i)=>this.br(e,n,i).next((s=>s?je.resolve():t(i)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(l=>this.br(e,l,t).next((u=>{u||(n++,s.removeEntry(l,Pt.min()))})))).next((()=>s.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),je.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),je.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),je.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),je.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=cm(e.data.value)),t}br(e,t,n){return je.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return je.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.serializer=e}k(e,t,n,i){const s=new t0("createOrUpgrade",t);n<1&&i>=1&&((function(h){h.createObjectStore(Of)})(e),(function(h){h.createObjectStore(vf,{keyPath:rj}),h.createObjectStore(fa,{keyPath:kv,autoIncrement:!0}).createIndex(mu,Iv,{unique:!0}),h.createObjectStore(Dd)})(e),yb(e),(function(h){h.createObjectStore(au)})(e));let l=je.resolve();return n<3&&i>=3&&(n!==0&&((function(h){h.deleteObjectStore($d),h.deleteObjectStore(Wd),h.deleteObjectStore(xu)})(e),yb(e)),l=l.next((()=>(function(h){const d=h.store(xu),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pt.min().toTimestamp(),targetCount:0};return d.put(Pm,g)})(s)))),n<4&&i>=4&&(n!==0&&(l=l.next((()=>(function(h,d){return d.store(fa).J().next((b=>{h.deleteObjectStore(fa),h.createObjectStore(fa,{keyPath:kv,autoIncrement:!0}).createIndex(mu,Iv,{unique:!0});const _=d.store(fa),v=b.map((N=>_.put(N)));return je.waitFor(v)}))})(e,s)))),l=l.next((()=>{(function(h){h.createObjectStore(Ud,{keyPath:dj})})(e)}))),n<5&&i>=5&&(l=l.next((()=>this.yi(s)))),n<6&&i>=6&&(l=l.next((()=>((function(h){h.createObjectStore(bf)})(e),this.wi(s))))),n<7&&i>=7&&(l=l.next((()=>this.Si(s)))),n<8&&i>=8&&(l=l.next((()=>this.bi(e,s)))),n<9&&i>=9&&(l=l.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&i>=10&&(l=l.next((()=>this.Di(s)))),n<11&&i>=11&&(l=l.next((()=>{(function(h){h.createObjectStore(n0,{keyPath:hj})})(e),(function(h){h.createObjectStore(i0,{keyPath:fj})})(e)}))),n<12&&i>=12&&(l=l.next((()=>{(function(h){const d=h.createObjectStore(o0,{keyPath:bj});d.createIndex(I1,wj,{unique:!1}),d.createIndex(P_,Sj,{unique:!1})})(e)}))),n<13&&i>=13&&(l=l.next((()=>(function(h){const d=h.createObjectStore(Rm,{keyPath:ij});d.createIndex(am,oj),d.createIndex(I_,sj)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(au)))),n<14&&i>=14&&(l=l.next((()=>this.Fi(e,s)))),n<15&&i>=15&&(l=l.next((()=>(function(h){h.createObjectStore(S5,{keyPath:pj,autoIncrement:!0}).createIndex(k1,mj,{unique:!1}),h.createObjectStore(rf,{keyPath:gj}).createIndex(j_,yj,{unique:!1}),h.createObjectStore(nf,{keyPath:xj}).createIndex(R_,vj,{unique:!1})})(e)))),n<16&&i>=16&&(l=l.next((()=>{t.objectStore(rf).clear()})).next((()=>{t.objectStore(nf).clear()}))),n<17&&i>=17&&(l=l.next((()=>{(function(h){h.createObjectStore(_5,{keyPath:_j})})(e)}))),n<18&&i>=18&&TS()&&(l=l.next((()=>{t.objectStore(rf).clear()})).next((()=>{t.objectStore(nf).clear()}))),l}wi(e){let t=0;return e.store(au).ee(((n,i)=>{t+=Mm(i)})).next((()=>{const n={byteSize:t};return e.store(bf).put(C1,n)}))}yi(e){const t=e.store(vf),n=e.store(fa);return t.J().next((i=>je.forEach(i,(s=>{const l=IDBKeyRange.bound([s.userId,yu],[s.userId,s.lastAcknowledgedBatchId]);return n.J(mu,l).next((u=>je.forEach(u,(h=>{kt(h.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:h.batchId});const d=uu(this.serializer,h);return L3(e,s.userId,d).next((()=>{}))}))))}))))}Si(e){const t=e.store($d),n=e.store(au);return e.store(xu).get(Pm).next((i=>{const s=[];return n.ee(((l,u)=>{const h=new Nr(l),d=(function(b){return[0,mo(b)]})(h);s.push(t.get(d).next((g=>g?je.resolve():(b=>t.put({targetId:0,path:mo(b),sequenceNumber:i.highestListenSequenceNumber}))(h))))})).next((()=>je.waitFor(s)))}))}bi(e,t){e.createObjectStore(wf,{keyPath:uj});const n=t.store(wf),i=new F5,s=l=>{if(i.add(l)){const u=l.lastSegment(),h=l.popLast();return n.put({collectionId:u,parent:mo(h)})}};return t.store(au).ee({X:!0},((l,u)=>{const h=new Nr(l);return s(h.popLast())})).next((()=>t.store(Dd).ee({X:!0},(([l,u,h],d)=>{const g=Wa(u);return s(g.popLast())}))))}Di(e){const t=e.store(Wd);return t.ee(((n,i)=>{const s=Kh(i),l=j3(this.serializer,s);return t.put(l)}))}Ci(e,t){const n=t.store(au),i=[];return n.ee(((s,l)=>{const u=t.store(Rm),h=(function(b){return b.document?new st(Nr.fromString(b.document.name).popFirst(5)):b.noDocument?st.fromSegments(b.noDocument.path):b.unknownDocument?st.fromSegments(b.unknownDocument.path):xt(36783)})(l).path.toArray(),d={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(u.put(d))})).next((()=>je.waitFor(i)))}Fi(e,t){const n=t.store(fa),i=D3(this.serializer),s=new V5(g0.mi,this.serializer.yt);return n.J().next((l=>{const u=new Map;return l.forEach((h=>{let d=u.get(h.userId)??ur();uu(this.serializer,h).keys().forEach((g=>d=d.add(g))),u.set(h.userId,d)})),je.forEach(u,((h,d)=>{const g=new $i(d),b=p0.wt(this.serializer,g),_=s.getIndexManager(g),v=m0.wt(g,this.serializer,_,s.referenceDelegate);return new W3(i,v,b,_).recalculateAndSaveOverlaysForDocumentKeys(new E1(t,Ds.ce),h).next()}))}))}}function yb(r){r.createObjectStore($d,{keyPath:lj}).createIndex(w5,cj,{unique:!0}),r.createObjectStore(Wd,{keyPath:"targetId"}).createIndex(E_,aj,{unique:!0}),r.createObjectStore(xu)}const dc="IndexedDbPersistence",Kg=18e5,Jg=5e3,Yg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",HR="main";class O5{constructor(e,t,n,i,s,l,u,h,d,g,b=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=s,this.window=l,this.document=u,this.xi=d,this.Oi=g,this.Ni=b,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=_=>Promise.resolve(),!O5.v())throw new nt(We.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new NR(this,i),this.$i=t+HR,this.serializer=new E3(h),this.Ui=new Tc(this.$i,this.Ni,new qR(this.serializer)),this.hi=new wR,this.Pi=new ER(this.referenceDelegate,this.serializer),this.remoteDocumentCache=D3(this.serializer),this.Ii=new bR,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Eo(dc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new nt(We.FAILED_PRECONDITION,Yg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Ds(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>qp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Bc(e))return Qe(dc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Qe(dc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Dh(e).get(md).next((t=>je.resolve(this.es(t))))}ts(e){return qp(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Kg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=fi(t,Ud);return n.J().next((i=>{const s=this.ss(i,Kg),l=i.filter((u=>s.indexOf(u)===-1));return je.forEach(l,(u=>n.delete(u.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?je.resolve(!0):Dh(e).get(md).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Jg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new nt(We.FAILED_PRECONDITION,Yg);return!1}}return!(!this.networkEnabled||!this.inForeground)||qp(e).J().next((n=>this.ss(n,Jg).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(s||l&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Qe(dc,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Of,Ud],(e=>{const t=new E1(e,Ds.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((n=>this.rs(n.updateTimeMs,t)&&!this.us(n.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>qp(e).J().next((t=>this.ss(t,Kg).map((n=>n.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return m0.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new IR(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return p0.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){Qe(dc,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(h){return h===18?Cj:h===17?F_:h===16?Aj:h===15?T5:h===14?L_:h===13?B_:h===12?Tj:h===11?N_:void xt(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,i,s,(u=>(l=new E1(u,this.ci?this.ci.next():Ds.ce),t==="readwrite-primary"?this.Hi(l).next((h=>!!h||this.Yi(l))).next((h=>{if(!h)throw Eo(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new nt(We.FAILED_PRECONDITION,T_);return n(l)})).next((h=>this.Xi(l).next((()=>h)))):this.Is(l).next((()=>n(l)))))).then((u=>(l.raiseOnCommittedEvent(),u)))}Is(e){return Dh(e).get(md).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Jg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new nt(We.FAILED_PRECONDITION,Yg)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Dh(e).put(md,t)}static v(){return Tc.v()}Zi(e){const t=Dh(e);return t.get(md).next((n=>this.es(n)?(Qe(dc,"Releasing primary lease."),t.delete(md)):je.resolve()))}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Eo(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;_S()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const n=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return Qe(dc,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Eo(dc,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Eo("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Dh(r){return fi(r,Of)}function qp(r){return fi(r,Ud)}function GR(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=i}static As(e,t){let n=ur(),i=ur();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new M5(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return _S()?8:C_(hi())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,i){const s={result:null};return this.ys(e,t).next((l=>{s.result=l})).next((()=>{if(!s.result)return this.ws(e,t,i,n).next((l=>{s.result=l}))})).next((()=>{if(s.result)return;const l=new KR;return this.Ss(e,t,l).next((u=>{if(s.result=u,this.Vs)return this.bs(e,t,l,u.size)}))})).next((()=>s.result))}bs(e,t,n,i){return n.documentReadCount<this.fs?(_d()<=yr.DEBUG&&Qe("QueryEngine","SDK will not create cache indexes for query:",Td(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),je.resolve()):(_d()<=yr.DEBUG&&Qe("QueryEngine","Query:",Td(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(_d()<=yr.DEBUG&&Qe("QueryEngine","The SDK decides to create cache indexes for query:",Td(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ws(t))):je.resolve())}ys(e,t){if(Dv(t))return je.resolve(null);let n=Ws(t);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=F1(t,null,"F"),n=Ws(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((s=>{const l=ur(...s);return this.ps.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,n).next((h=>{const d=this.Ds(t,u);return this.Cs(t,d,l,h.readTime)?this.ys(e,F1(t,null,"F")):this.vs(e,d,t,h)}))))})))))}ws(e,t,n,i){return Dv(t)||i.isEqual(Pt.min())?je.resolve(null):this.ps.getDocuments(e,n).next((s=>{const l=this.Ds(t,s);return this.Cs(t,l,n,i)?je.resolve(null):(_d()<=yr.DEBUG&&Qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Td(t)),this.vs(e,l,t,JE(i,gf)).next((u=>u)))}))}Ds(e,t){let n=new Yr(r3(e));return t.forEach(((i,s)=>{Df(e,s)&&(n=n.add(s))})),n}Cs(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,n){return _d()<=yr.DEBUG&&Qe("QueryEngine","Using full collection scan to execute query:",Td(t)),this.ps.getDocumentsMatchingQuery(e,t,vs.min(),n)}vs(e,t,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next((s=>(t.forEach((l=>{s=s.insert(l.key,l)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5="LocalStore",JR=3e8;class YR{constructor(e,t,n,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new bn(Zt),this.xs=new Nl((s=>ju(s)),Mf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new W3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function U3(r,e,t,n){return new YR(r,e,t,n)}async function q3(r,e){const t=er(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((s=>{const l=[],u=[];let h=ur();for(const d of i){l.push(d.batchId);for(const g of d.mutations)h=h.add(g.key)}for(const d of s){u.push(d.batchId);for(const g of d.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(n,h).next((d=>({Ls:d,removedBatchIds:l,addedBatchIds:u})))}))}))}function QR(r,e){const t=er(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,h,d,g){const b=d.batch,_=b.keys();let v=je.resolve();return _.forEach((N=>{v=v.next((()=>g.getEntry(h,N))).next((E=>{const L=d.docVersions.get(N);kt(L!==null,48541),E.version.compareTo(L)<0&&(b.applyToRemoteDocument(E,d),E.isValidDocument()&&(E.setReadTime(d.commitVersion),g.addEntry(E)))}))})),v.next((()=>u.mutationQueue.removeMutationBatch(h,b)))})(t,n,e,s).next((()=>s.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let h=ur();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(h=h.add(u.batch.mutations[d].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(n,i)))}))}function H3(r){const e=er(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function XR(r,e){const t=er(r),n=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const u=[];e.targetChanges.forEach(((g,b)=>{const _=i.get(b);if(!_)return;u.push(t.Pi.removeMatchingKeys(s,g.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(s,g.addedDocuments,b))));let v=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(b)!==null?v=v.withResumeToken(si.EMPTY_BYTE_STRING,Pt.min()).withLastLimboFreeSnapshotVersion(Pt.min()):g.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(g.resumeToken,n)),i=i.insert(b,v),(function(E,L,k){return E.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=JR?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(_,v,g)&&u.push(t.Pi.updateTargetData(s,v))}));let h=ys(),d=ur();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,g))})),u.push(ZR(s,l,e.documentUpdates).next((g=>{h=g.ks,d=g.qs}))),!n.isEqual(Pt.min())){const g=t.Pi.getLastRemoteSnapshotVersion(s).next((b=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n)));u.push(g)}return je.waitFor(u).next((()=>l.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,h,d))).next((()=>h))})).then((s=>(t.Ms=i,s)))}function ZR(r,e,t){let n=ur(),i=ur();return t.forEach((s=>n=n.add(s))),e.getEntries(r,n).next((s=>{let l=ys();return t.forEach(((u,h)=>{const d=s.get(u);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(Pt.min())?(e.removeEntry(u,h.readTime),l=l.insert(u,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),l=l.insert(u,h)):Qe(D5,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",h.version)})),{ks:l,qs:i}}))}function eP(r,e){const t=er(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=yu),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function tP(r,e){const t=er(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return t.Pi.getTargetData(n,e).next((s=>s?(i=s,je.resolve(i)):t.Pi.allocateTargetId(n).next((l=>(i=new Al(e,l,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=t.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function U1(r,e,t){const n=er(r),i=n.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",s,(l=>n.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Bc(l))throw l;Qe(D5,`Failed to update sequence numbers for target ${e}: ${l}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function xb(r,e,t){const n=er(r);let i=Pt.min(),s=ur();return n.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,d,g){const b=er(h),_=b.xs.get(g);return _!==void 0?je.resolve(b.Ms.get(_)):b.Pi.getTargetData(d,g)})(n,l,Ws(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(l,u.targetId).next((h=>{s=h}))})).next((()=>n.Fs.getDocumentsMatchingQuery(l,e,t?i:Pt.min(),t?s:ur()))).next((u=>(rP(n,Dj(e),u),{documents:u,Qs:s})))))}function rP(r,e,t){let n=r.Os.get(e)||Pt.min();t.forEach(((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)})),r.Os.set(e,n)}class vb{constructor(){this.activeTargetIds=Gj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class G3{constructor(){this.Mo=new vb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vb,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="ConnectivityMonitor";class wb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Qe(bb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Qe(bb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hp=null;function q1(){return Hp===null?Hp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hp++,"0x"+Hp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg="RestConnection",iP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===Nm?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,t,n,i,s){const l=q1(),u=this.zo(e,t.toUriEncodedString());Qe(Qg,`Sending RPC '${e}' ${l}:`,u,n);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,i,s);const{host:d}=new URL(u),g=nh(d);return this.Jo(e,u,h,n,g).then((b=>(Qe(Qg,`Received RPC '${e}' ${l}: `,b),b)),(b=>{throw Iu(Qg,`RPC '${e}' ${l} failed with error: `,b,"url: ",u,"request:",n),b}))}Ho(e,t,n,i,s,l){return this.Go(e,t,n,i,s)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+sh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),n&&n.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const n=iP[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="WebChannelConnection";class aP extends oP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,i,s){const l=q1();return new Promise(((u,h)=>{const d=new f_;d.setWithCredentials(!0),d.listenOnce(p_.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case im.NO_ERROR:const b=d.getResponseJson();Qe(uo,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(b)),u(b);break;case im.TIMEOUT:Qe(uo,`RPC '${e}' ${l} timed out`),h(new nt(We.DEADLINE_EXCEEDED,"Request time out"));break;case im.HTTP_ERROR:const _=d.getStatus();if(Qe(uo,`RPC '${e}' ${l} failed with status:`,_,"response text:",d.getResponseText()),_>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const N=v==null?void 0:v.error;if(N&&N.status&&N.message){const E=(function(k){const O=k.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(O)>=0?O:We.UNKNOWN})(N.status);h(new nt(E,N.message))}else h(new nt(We.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new nt(We.UNAVAILABLE,"Connection failed."));break;default:xt(9055,{l_:e,streamId:l,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Qe(uo,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(i);Qe(uo,`RPC '${e}' ${l} sending request:`,i),d.send(t,"POST",g,n,15)}))}T_(e,t,n){const i=q1(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=y_(),u=g_(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,n),h.encodeInitMessageHeaders=!0;const g=s.join("");Qe(uo,`Creating RPC '${e}' stream ${i}: ${g}`,h);const b=l.createWebChannel(g,h);this.I_(b);let _=!1,v=!1;const N=new sP({Yo:L=>{v?Qe(uo,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(_||(Qe(uo,`Opening RPC '${e}' stream ${i} transport.`),b.open(),_=!0),Qe(uo,`RPC '${e}' stream ${i} sending:`,L),b.send(L))},Zo:()=>b.close()}),E=(L,k,O)=>{L.listen(k,($=>{try{O($)}catch(F){setTimeout((()=>{throw F}),0)}}))};return E(b,qh.EventType.OPEN,(()=>{v||(Qe(uo,`RPC '${e}' stream ${i} transport opened.`),N.o_())})),E(b,qh.EventType.CLOSE,(()=>{v||(v=!0,Qe(uo,`RPC '${e}' stream ${i} transport closed`),N.a_(),this.E_(b))})),E(b,qh.EventType.ERROR,(L=>{v||(v=!0,Iu(uo,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),N.a_(new nt(We.UNAVAILABLE,"The operation could not be completed")))})),E(b,qh.EventType.MESSAGE,(L=>{var k;if(!v){const O=L.data[0];kt(!!O,16349);const $=O,F=($==null?void 0:$.error)||((k=$[0])==null?void 0:k.error);if(F){Qe(uo,`RPC '${e}' stream ${i} received error:`,F);const oe=F.status;let ce=(function(S){const V=ii[S];if(V!==void 0)return m3(V)})(oe),D=F.message;ce===void 0&&(ce=We.INTERNAL,D="Unknown error status: "+oe+" with message "+F.message),v=!0,N.a_(new nt(ce,D)),b.close()}else Qe(uo,`RPC '${e}' stream ${i} received:`,O),N.u_(O)}})),E(u,m_.STAT_EVENT,(L=>{L.stat===_1.PROXY?Qe(uo,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===_1.NOPROXY&&Qe(uo,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(){return typeof window<"u"?window:null}function pm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(r){return new cR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,t,n=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-n);i>0&&Qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="PersistentStream";class J3{constructor(e,t,n,i,s,l,u,h){this.Mi=e,this.S_=n,this.b_=i,this.connection=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new K3(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===We.RESOURCE_EXHAUSTED?(Eo(t.toString()),Eo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===We.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.D_===t&&this.G_(n,i)}),(n=>{e((()=>{const i=new nt(We.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{n((()=>this.z_(i)))})),this.stream.onMessage((i=>{n((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Qe(Sb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Qe(Sb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class cP extends J3{constructor(e,t,n,i,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,l),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=hR(this.serializer,e),n=(function(s){if(!("targetChange"in s))return Pt.min();const l=s.targetChange;return l.targetIds&&l.targetIds.length?Pt.min():l.readTime?jo(l.readTime):Pt.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=O1(this.serializer),t.addTarget=(function(s,l){let u;const h=l.target;if(u=Bm(h)?{documents:_3(s,h)}:{query:T3(s,h).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=x3(s,l.resumeToken);const d=z1(s,l.expectedCount);d!==null&&(u.expectedCount=d)}else if(l.snapshotVersion.compareTo(Pt.min())>0){u.readTime=Xd(s,l.snapshotVersion.toTimestamp());const d=z1(s,l.expectedCount);d!==null&&(u.expectedCount=d)}return u})(this.serializer,e);const n=pR(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=O1(this.serializer),t.removeTarget=e,this.q_(t)}}class uP extends J3{constructor(e,t,n,i,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,l),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return kt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,kt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){kt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=fR(e.writeResults,e.commitTime),n=jo(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=O1(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>zm(this.serializer,n)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{}class hP extends dP{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new nt(We.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,l])=>this.connection.Go(e,V1(t,n),i,s,l))).catch((s=>{throw s.name==="FirebaseError"?(s.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new nt(We.UNKNOWN,s.toString())}))}Ho(e,t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(e,V1(t,n),i,l,u,s))).catch((l=>{throw l.name==="FirebaseError"?(l.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new nt(We.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class fP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Eo(t),this.aa=!1):Qe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu="RemoteStore";class pP{constructor(e,t,n,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((l=>{n.enqueueAndForget((async()=>{Du(this)&&(Qe(Bu,"Restarting streams for network reachability change."),await(async function(h){const d=er(h);d.Ea.add(4),await $f(d),d.Ra.set("Unknown"),d.Ea.delete(4),await x0(d)})(this))}))})),this.Ra=new fP(n,i)}}async function x0(r){if(Du(r))for(const e of r.da)await e(!0)}async function $f(r){for(const e of r.da)await e(!1)}function Y3(r,e){const t=er(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),q5(t)?U5(t):ch(t).O_()&&$5(t,e))}function W5(r,e){const t=er(r),n=ch(t);t.Ia.delete(e),n.O_()&&Q3(t,e),t.Ia.size===0&&(n.O_()?n.L_():Du(t)&&t.Ra.set("Unknown"))}function $5(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ch(r).Y_(e)}function Q3(r,e){r.Va.Ue(e),ch(r).Z_(e)}function U5(r){r.Va=new oR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),ch(r).start(),r.Ra.ua()}function q5(r){return Du(r)&&!ch(r).x_()&&r.Ia.size>0}function Du(r){return er(r).Ea.size===0}function X3(r){r.Va=void 0}async function mP(r){r.Ra.set("Online")}async function gP(r){r.Ia.forEach(((e,t)=>{$5(r,e)}))}async function yP(r,e){X3(r),q5(r)?(r.Ra.ha(e),U5(r)):r.Ra.set("Unknown")}async function xP(r,e,t){if(r.Ra.set("Online"),e instanceof y3&&e.state===2&&e.cause)try{await(async function(i,s){const l=s.cause;for(const u of s.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,l),i.Ia.delete(u),i.Va.removeTarget(u))})(r,e)}catch(n){Qe(Bu,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Wm(r,n)}else if(e instanceof hm?r.Va.Ze(e):e instanceof g3?r.Va.st(e):r.Va.tt(e),!t.isEqual(Pt.min()))try{const n=await H3(r.localStore);t.compareTo(n)>=0&&await(function(s,l){const u=s.Va.Tt(l);return u.targetChanges.forEach(((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const g=s.Ia.get(d);g&&s.Ia.set(d,g.withResumeToken(h.resumeToken,l))}})),u.targetMismatches.forEach(((h,d)=>{const g=s.Ia.get(h);if(!g)return;s.Ia.set(h,g.withResumeToken(si.EMPTY_BYTE_STRING,g.snapshotVersion)),Q3(s,h);const b=new Al(g.target,h,d,g.sequenceNumber);$5(s,b)})),s.remoteSyncer.applyRemoteEvent(u)})(r,t)}catch(n){Qe(Bu,"Failed to raise snapshot:",n),await Wm(r,n)}}async function Wm(r,e,t){if(!Bc(e))throw e;r.Ea.add(1),await $f(r),r.Ra.set("Offline"),t||(t=()=>H3(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Qe(Bu,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await x0(r)}))}function Z3(r,e){return e().catch((t=>Wm(r,t,e)))}async function Uf(r){const e=er(r),t=jc(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yu;for(;vP(e);)try{const i=await eP(e.localStore,n);if(i===null){e.Ta.length===0&&t.L_();break}n=i.batchId,bP(e,i)}catch(i){await Wm(e,i)}e4(e)&&t4(e)}function vP(r){return Du(r)&&r.Ta.length<10}function bP(r,e){r.Ta.push(e);const t=jc(r);t.O_()&&t.X_&&t.ea(e.mutations)}function e4(r){return Du(r)&&!jc(r).x_()&&r.Ta.length>0}function t4(r){jc(r).start()}async function wP(r){jc(r).ra()}async function SP(r){const e=jc(r);for(const t of r.Ta)e.ea(t.mutations)}async function _P(r,e,t){const n=r.Ta.shift(),i=R5.from(n,e,t);await Z3(r,(()=>r.remoteSyncer.applySuccessfulWrite(i))),await Uf(r)}async function TP(r,e){e&&jc(r).X_&&await(async function(n,i){if((function(l){return rR(l)&&l!==We.ABORTED})(i.code)){const s=n.Ta.shift();jc(n).B_(),await Z3(n,(()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i))),await Uf(n)}})(r,e),e4(r)&&t4(r)}async function _b(r,e){const t=er(r);t.asyncQueue.verifyOperationInProgress(),Qe(Bu,"RemoteStore received new credentials");const n=Du(t);t.Ea.add(3),await $f(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await x0(t)}async function AP(r,e){const t=er(r);e?(t.Ea.delete(2),await x0(t)):e||(t.Ea.add(2),await $f(t),t.Ra.set("Unknown"))}function ch(r){return r.ma||(r.ma=(function(t,n,i){const s=er(t);return s.sa(),new cP(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(r.datastore,r.asyncQueue,{Xo:mP.bind(null,r),t_:gP.bind(null,r),r_:yP.bind(null,r),H_:xP.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),q5(r)?U5(r):r.Ra.set("Unknown")):(await r.ma.stop(),X3(r))}))),r.ma}function jc(r){return r.fa||(r.fa=(function(t,n,i){const s=er(t);return s.sa(),new uP(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:wP.bind(null,r),r_:TP.bind(null,r),ta:SP.bind(null,r),na:_P.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Uf(r)):(await r.fa.stop(),r.Ta.length>0&&(Qe(Bu,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new Ha,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,s){const l=Date.now()+n,u=new H5(e,t,l,i,s);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new nt(We.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function G5(r,e){if(Eo("AsyncQueue",`${e}: ${r}`),Bc(r))return new nt(We.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{static emptySet(e){return new zd(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||st.comparator(t.key,n.key):(t,n)=>st.comparator(t.key,n.key),this.keyedMap=Hh(),this.sortedSet=new bn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new zd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.ga=new bn(st.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Zd{constructor(e,t,n,i,s,l,u,h,d){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,t,n,i,s){const l=[];return t.forEach((u=>{l.push({type:0,doc:u})})),new Zd(e,t,zd.emptySet(t),l,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&c0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class kP{constructor(){this.queries=Ab(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const i=er(t),s=i.queries;i.queries=Ab(),s.forEach(((l,u)=>{for(const h of u.Sa)h.onError(n)}))})(this,new nt(We.ABORTED,"Firestore shutting down"))}}function Ab(){return new Nl((r=>t3(r)),c0)}async function r4(r,e){const t=er(r);let n=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(n=2):(s=new CP,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const u=G5(l,`Initialization of query '${Td(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&K5(t)}async function n4(r,e){const t=er(r),n=e.query;let i=3;const s=t.queries.get(n);if(s){const l=s.Sa.indexOf(e);l>=0&&(s.Sa.splice(l,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function IP(r,e){const t=er(r);let n=!1;for(const i of e){const s=i.query,l=t.queries.get(s);if(l){for(const u of l.Sa)u.Fa(i)&&(n=!0);l.wa=i}}n&&K5(t)}function EP(r,e,t){const n=er(r),i=n.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);n.queries.delete(e)}function K5(r){r.Ca.forEach((e=>{e.next()}))}var H1,Cb;(Cb=H1||(H1={})).Ma="default",Cb.Cache="cache";class i4{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Zd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Zd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==H1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.key=e}}class s4{constructor(e){this.key=e}}class jP{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ur(),this.mutatedKeys=ur(),this.eu=r3(e),this.tu=new zd(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Tb,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,l=i,u=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((g,b)=>{const _=i.get(g),v=Df(this.query,b)?b:null,N=!!_&&this.mutatedKeys.has(_.key),E=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let L=!1;_&&v?_.data.isEqual(v.data)?N!==E&&(n.track({type:3,doc:v}),L=!0):this.su(_,v)||(n.track({type:2,doc:v}),L=!0,(h&&this.eu(v,h)>0||d&&this.eu(v,d)<0)&&(u=!0)):!_&&v?(n.track({type:0,doc:v}),L=!0):_&&!v&&(n.track({type:1,doc:_}),L=!0,(h||d)&&(u=!0)),L&&(v?(l=l.add(v),s=E?s.add(g):s.delete(g)):(l=l.delete(g),s=s.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),s=s.delete(g.key),n.track({type:1,doc:g})}return{tu:l,iu:n,Cs:u,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,b)=>(function(v,N){const E=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xt(20277,{Rt:L})}};return E(v)-E(N)})(g.type,b.type)||this.eu(g.doc,b.doc))),this.ou(n),i=i??!1;const u=t&&!i?this._u():[],h=this.Xa.size===0&&this.current&&!i?1:0,d=h!==this.Za;return this.Za=h,l.length!==0||d?{snapshot:new Zd(this.query,e.tu,s,l,e.mutatedKeys,h===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Tb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ur(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new s4(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new o4(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=ur();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Zd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const J5="SyncEngine";class RP{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class PP{constructor(e){this.key=e,this.hu=!1}}class NP{constructor(e,t,n,i,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Nl((u=>t3(u)),c0),this.Iu=new Map,this.Eu=new Set,this.du=new bn(st.comparator),this.Au=new Map,this.Ru=new z5,this.Vu={},this.mu=new Map,this.fu=Nu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BP(r,e,t=!0){const n=h4(r);let i;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await a4(n,e,t,!0),i}async function LP(r,e){const t=h4(r);await a4(t,e,!0,!1)}async function a4(r,e,t,n){const i=await tP(r.localStore,Ws(e)),s=i.targetId,l=r.sharedClientState.addLocalQueryTarget(s,t);let u;return n&&(u=await FP(r,e,s,l==="current",i.resumeToken)),r.isPrimaryClient&&t&&Y3(r.remoteStore,i),u}async function FP(r,e,t,n,i){r.pu=(b,_,v)=>(async function(E,L,k,O){let $=L.view.ru(k);$.Cs&&($=await xb(E.localStore,L.query,!1).then((({documents:D})=>L.view.ru(D,$))));const F=O&&O.targetChanges.get(L.targetId),oe=O&&O.targetMismatches.get(L.targetId)!=null,ce=L.view.applyChanges($,E.isPrimaryClient,F,oe);return Ib(E,L.targetId,ce.au),ce.snapshot})(r,b,_,v);const s=await xb(r.localStore,e,!0),l=new jP(e,s.Qs),u=l.ru(s.documents),h=Wf.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),d=l.applyChanges(u,r.isPrimaryClient,h);Ib(r,t,d.au);const g=new RP(e,t,l);return r.Tu.set(e,g),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),d.snapshot}async function zP(r,e,t){const n=er(r),i=n.Tu.get(e),s=n.Iu.get(i.targetId);if(s.length>1)return n.Iu.set(i.targetId,s.filter((l=>!c0(l,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await U1(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),t&&W5(n.remoteStore,i.targetId),G1(n,i.targetId)})).catch(Mu)):(G1(n,i.targetId),await U1(n.localStore,i.targetId,!0))}async function VP(r,e){const t=er(r),n=t.Tu.get(e),i=t.Iu.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),W5(t.remoteStore,n.targetId))}async function OP(r,e,t){const n=f4(r);try{const i=await(function(l,u){const h=er(l),d=Kr.now(),g=u.reduce(((v,N)=>v.add(N.key)),ur());let b,_;return h.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let N=ys(),E=ur();return h.Ns.getEntries(v,g).next((L=>{N=L,N.forEach(((k,O)=>{O.isValidDocument()||(E=E.add(k))}))})).next((()=>h.localDocuments.getOverlayedDocuments(v,N))).next((L=>{b=L;const k=[];for(const O of u){const $=eR(O,b.get(O.key).overlayedDocument);$!=null&&k.push(new Bl(O.key,$,H_($.value.mapValue),po.exists(!0)))}return h.mutationQueue.addMutationBatch(v,d,k,u)})).next((L=>{_=L;const k=L.applyToLocalDocumentSet(b,E);return h.documentOverlayCache.saveOverlays(v,L.batchId,k)}))})).then((()=>({batchId:_.batchId,changes:i3(b)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(l,u,h){let d=l.Vu[l.currentUser.toKey()];d||(d=new bn(Zt)),d=d.insert(u,h),l.Vu[l.currentUser.toKey()]=d})(n,i.batchId,t),await qf(n,i.changes),await Uf(n.remoteStore)}catch(i){const s=G5(i,"Failed to persist write");t.reject(s)}}async function l4(r,e){const t=er(r);try{const n=await XR(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const l=t.Au.get(s);l&&(kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?kt(l.hu,14607):i.removedDocuments.size>0&&(kt(l.hu,42227),l.hu=!1))})),await qf(t,n,e)}catch(n){await Mu(n)}}function kb(r,e,t){const n=er(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.Tu.forEach(((s,l)=>{const u=l.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(l,u){const h=er(l);h.onlineState=u;let d=!1;h.queries.forEach(((g,b)=>{for(const _ of b.Sa)_.va(u)&&(d=!0)})),d&&K5(h)})(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function MP(r,e,t){const n=er(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Au.get(e),s=i&&i.key;if(s){let l=new bn(st.comparator);l=l.insert(s,Fn.newNoDocument(s,Pt.min()));const u=ur().add(s),h=new f0(Pt.min(),new Map,new bn(Zt),l,u);await l4(n,h),n.du=n.du.remove(s),n.Au.delete(e),Y5(n)}else await U1(n.localStore,e,!1).then((()=>G1(n,e,t))).catch(Mu)}async function DP(r,e){const t=er(r),n=e.batch.batchId;try{const i=await QR(t.localStore,e);u4(t,n,null),c4(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await qf(t,i)}catch(i){await Mu(i)}}async function WP(r,e,t){const n=er(r);try{const i=await(function(l,u){const h=er(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let g;return h.mutationQueue.lookupMutationBatch(d,u).next((b=>(kt(b!==null,37113),g=b.keys(),h.mutationQueue.removeMutationBatch(d,b)))).next((()=>h.mutationQueue.performConsistencyCheck(d))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(d,g,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g))).next((()=>h.localDocuments.getDocuments(d,g)))}))})(n.localStore,e);u4(n,e,t),c4(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await qf(n,i)}catch(i){await Mu(i)}}function c4(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function u4(r,e,t){const n=er(r);let i=n.Vu[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function G1(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||d4(r,n)}))}function d4(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(W5(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Y5(r))}function Ib(r,e,t){for(const n of t)n instanceof o4?(r.Ru.addReference(n.key,e),$P(r,n)):n instanceof s4?(Qe(J5,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||d4(r,n.key)):xt(19791,{wu:n})}function $P(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(Qe(J5,"New document in limbo: "+t),r.Eu.add(n),Y5(r))}function Y5(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new st(Nr.fromString(e)),n=r.fu.next();r.Au.set(n,new PP(t)),r.du=r.du.insert(t,n),Y3(r.remoteStore,new Al(Ws(l0(t.path)),n,"TargetPurposeLimboResolution",Ds.ce))}}async function qf(r,e,t){const n=er(r),i=[],s=[],l=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,h)=>{l.push(n.pu(h,e,t).then((d=>{var g;if((d||t)&&n.isPrimaryClient){const b=d?!d.fromCache:(g=t==null?void 0:t.targetChanges.get(h.targetId))==null?void 0:g.current;n.sharedClientState.updateQueryState(h.targetId,b?"current":"not-current")}if(d){i.push(d);const b=M5.As(h.targetId,d);s.push(b)}})))})),await Promise.all(l),n.Pu.H_(i),await(async function(h,d){const g=er(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>je.forEach(d,(_=>je.forEach(_.Es,(v=>g.persistence.referenceDelegate.addReference(b,_.targetId,v))).next((()=>je.forEach(_.ds,(v=>g.persistence.referenceDelegate.removeReference(b,_.targetId,v)))))))))}catch(b){if(!Bc(b))throw b;Qe(D5,"Failed to update sequence numbers: "+b)}for(const b of d){const _=b.targetId;if(!b.fromCache){const v=g.Ms.get(_),N=v.snapshotVersion,E=v.withLastLimboFreeSnapshotVersion(N);g.Ms=g.Ms.insert(_,E)}}})(n.localStore,s))}async function UP(r,e){const t=er(r);if(!t.currentUser.isEqual(e)){Qe(J5,"User change. New user:",e.toKey());const n=await q3(t.localStore,e);t.currentUser=e,(function(s,l){s.mu.forEach((u=>{u.forEach((h=>{h.reject(new nt(We.CANCELLED,l))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await qf(t,n.Ls)}}function qP(r,e){const t=er(r),n=t.Au.get(e);if(n&&n.hu)return ur().add(n.key);{let i=ur();const s=t.Iu.get(e);if(!s)return i;for(const l of s){const u=t.Tu.get(l);i=i.unionWith(u.view.nu)}return i}}function h4(r){const e=er(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=l4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MP.bind(null,e),e.Pu.H_=IP.bind(null,e.eventManager),e.Pu.yu=EP.bind(null,e.eventManager),e}function f4(r){const e=er(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WP.bind(null,e),e}class If{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=y0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return U3(this.persistence,new $3,e.initialUser,this.serializer)}Cu(e){return new V5(g0.mi,this.serializer)}Du(e){return new G3}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}If.provider={build:()=>new If};class HP extends If{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){kt(this.persistence.referenceDelegate instanceof Dm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new V3(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ho.withCacheSize(this.cacheSizeBytes):ho.DEFAULT;return new V5((n=>Dm.mi(n,t)),this.serializer)}}class GP extends If{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await f4(this.xu.syncEngine),await Uf(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return U3(this.persistence,new $3,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new V3(n,e.asyncQueue,t)}Mu(e,t){const n=new ZE(t,this.persistence);return new XE(e.asyncQueue,n)}Cu(e){const t=GR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ho.withCacheSize(this.cacheSizeBytes):ho.DEFAULT;return new O5(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,lP(),pm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new G3}}class $m{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>kb(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=UP.bind(null,this.syncEngine),await AP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kP})()}createDatastore(e){const t=y0(e.databaseInfo.databaseId),n=(function(s){return new aP(s)})(e.databaseInfo);return(function(s,l,u,h){return new hP(s,l,u,h)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,i,s,l,u){return new pP(n,i,s,l,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>kb(this.syncEngine,t,0)),(function(){return wb.v()?new wb:new nP})())}createSyncEngine(e,t){return(function(i,s,l,u,h,d,g){const b=new NP(i,s,l,u,h,d);return g&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const s=er(i);Qe(Bu,"RemoteStore shutting down."),s.Ea.add(5),await $f(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}$m.provider={build:()=>new $m};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Eo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc="FirestoreClient";class KP{constructor(e,t,n,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=$i.UNAUTHENTICATED,this.clientId=x5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async l=>{Qe(Rc,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(n,(l=>(Qe(Rc,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ha;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=G5(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Xg(r,e){r.asyncQueue.verifyOperationInProgress(),Qe(Rc,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async i=>{n.isEqual(i)||(await q3(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Eb(r,e){r.asyncQueue.verifyOperationInProgress();const t=await JP(r);Qe(Rc,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>_b(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,i)=>_b(e.remoteStore,i))),r._onlineComponents=e}async function JP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Qe(Rc,"Using user provided OfflineComponentProvider");try{await Xg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===We.FAILED_PRECONDITION||i.code===We.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Iu("Error using user provided cache. Falling back to memory cache: "+t),await Xg(r,new If)}}else Qe(Rc,"Using default OfflineComponentProvider"),await Xg(r,new HP(void 0));return r._offlineComponents}async function m4(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Qe(Rc,"Using user provided OnlineComponentProvider"),await Eb(r,r._uninitializedComponentsProvider._online)):(Qe(Rc,"Using default OnlineComponentProvider"),await Eb(r,new $m))),r._onlineComponents}function YP(r){return m4(r).then((e=>e.syncEngine))}async function g4(r){const e=await m4(r),t=e.eventManager;return t.onListen=BP.bind(null,e.syncEngine),t.onUnlisten=zP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=LP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=VP.bind(null,e.syncEngine),t}function QP(r,e,t={}){const n=new Ha;return r.asyncQueue.enqueueAndForget((async()=>(function(s,l,u,h,d){const g=new p4({next:_=>{g.Nu(),l.enqueueAndForget((()=>n4(s,b)));const v=_.docs.has(u);!v&&_.fromCache?d.reject(new nt(We.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&_.fromCache&&h&&h.source==="server"?d.reject(new nt(We.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),b=new i4(l0(u.path),g,{includeMetadataChanges:!0,qa:!0});return r4(s,b)})(await g4(r),r.asyncQueue,e,t,n))),n.promise}function XP(r,e,t={}){const n=new Ha;return r.asyncQueue.enqueueAndForget((async()=>(function(s,l,u,h,d){const g=new p4({next:_=>{g.Nu(),l.enqueueAndForget((()=>n4(s,b))),_.fromCache&&h.source==="server"?d.reject(new nt(We.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),b=new i4(u,g,{includeMetadataChanges:!0,qa:!0});return r4(s,b)})(await g4(r),r.asyncQueue,e,t,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="firestore.googleapis.com",Rb=!0;class Pb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new nt(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=x4,this.ssl=Rb}else this.host=e.host,this.ssl=e.ssl??Rb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=B3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jR)throw new nt(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y4(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new nt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new nt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new nt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class v0{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new nt(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new nt(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new VE;switch(n.type){case"firstParty":return new WE(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new nt(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=jb.get(t);n&&(Qe("ComponentProvider","Removing Datastore"),jb.delete(t),n.terminate())})(this),Promise.resolve()}}function ZP(r,e,t,n={}){var d;r=Us(r,v0);const i=nh(e),s=r._getSettings(),l={...s,emulatorOptions:r._getEmulatorOptions()},u=`${e}:${t}`;i&&(bS(`https://${u}`),wS("Firestore",!0)),s.host!==x4&&s.host!==u&&Iu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...s,host:u,ssl:i,emulatorOptions:n};if(!_u(h,l)&&(r._setSettings(h),n.mockUserToken)){let g,b;if(typeof n.mockUserToken=="string")g=n.mockUserToken,b=$i.MOCK_USER;else{g=Xk(n.mockUserToken,(d=r._app)==null?void 0:d.options.projectId);const _=n.mockUserToken.sub||n.mockUserToken.user_id;if(!_)throw new nt(We.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new $i(_)}r._authCredentials=new OE(new v_(g,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Wu(this.firestore,e,this._query)}}class Yn{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ac(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yn(this.firestore,e,this._key)}toJSON(){return{type:Yn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Vf(t,Yn._jsonSchema))return new Yn(e,n||null,new st(Nr.fromString(t.referencePath)))}}Yn._jsonSchemaVersion="firestore/documentReference/1.0",Yn._jsonSchema={type:oi("string",Yn._jsonSchemaVersion),referencePath:oi("string")};class Ac extends Wu{constructor(e,t,n){super(e,t,l0(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yn(this.firestore,null,new st(e))}withConverter(e){return new Ac(this.firestore,e,this._path)}}function Hf(r,e,...t){if(r=Ri(r),w_("collection","path",e),r instanceof v0){const n=Nr.fromString(e,...t);return Sv(n),new Ac(r,null,n)}{if(!(r instanceof Yn||r instanceof Ac))throw new nt(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Nr.fromString(e,...t));return Sv(n),new Ac(r.firestore,null,n)}}function ma(r,e,...t){if(r=Ri(r),arguments.length===1&&(e=x5.newId()),w_("doc","path",e),r instanceof v0){const n=Nr.fromString(e,...t);return wv(n),new Yn(r,null,new st(n))}{if(!(r instanceof Yn||r instanceof Ac))throw new nt(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Nr.fromString(e,...t));return wv(n),new Yn(r.firestore,r instanceof Ac?r.converter:null,new st(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="AsyncQueue";class Bb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new K3(this,"async_queue_retry"),this._c=()=>{const n=pm();n&&Qe(Nb,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=pm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=pm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ha;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Bc(e))throw e;Qe(Nb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Eo("INTERNAL UNHANDLED ERROR: ",Lb(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=H5.createAndSchedule(this,e,t,n,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&xt(47125,{Pc:Lb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Lb(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Fc extends v0{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new Bb,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bb(e),this._firestoreClient=void 0,await e}}}function eN(r,e){const t=typeof r=="object"?r:ES(),n=typeof r=="string"?r:Nm,i=l5(t,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=Yk("firestore");s&&ZP(i,...s)}return i}function Q5(r){if(r._terminated)throw new nt(We.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||v4(r),r._firestoreClient}function v4(r){var n,i,s;const e=r._freezeSettings(),t=(function(u,h,d,g){return new Ij(u,h,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,y4(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(r._databaseId,((n=r._app)==null?void 0:n.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new KP(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}})(r._componentsProvider))}function tN(r,e){Iu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return rN(r,$m.provider,{build:n=>new GP(n,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function rN(r,e,t){if((r=Us(r,Fc))._firestoreClient||r._terminated)throw new nt(We.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new nt(We.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},v4(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ms(si.fromBase64String(e))}catch(t){throw new nt(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ms(si.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ms._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vf(e,Ms._jsonSchema))return Ms.fromBase64String(e.bytes)}}Ms._jsonSchemaVersion="firestore/bytes/1.0",Ms._jsonSchema={type:oi("string",Ms._jsonSchemaVersion),bytes:oi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new nt(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new nt(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new nt(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Zt(this._lat,e._lat)||Zt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ga._jsonSchemaVersion}}static fromJSON(e){if(Vf(e,Ga._jsonSchema))return new Ga(e.latitude,e.longitude)}}Ga._jsonSchemaVersion="firestore/geoPoint/1.0",Ga._jsonSchema={type:oi("string",Ga._jsonSchemaVersion),latitude:oi("number"),longitude:oi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ka._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vf(e,Ka._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ka(e.vectorValues);throw new nt(We.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ka._jsonSchemaVersion="firestore/vectorValue/1.0",Ka._jsonSchema={type:oi("string",Ka._jsonSchemaVersion),vectorValues:oi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=/^__.*__$/;class iN{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Bl(e,this.data,this.fieldMask,t,this.fieldTransforms):new lh(e,this.data,t,this.fieldTransforms)}}class b4{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Bl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function w4(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xt(40011,{Ac:r})}}class X5{constructor(e,t,n,i,s,l){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new X5({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Um(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(w4(this.Ac)&&nN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class oN{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||y0(e)}Cc(e,t,n,i=!1){return new X5({Ac:e,methodName:t,Dc:n,path:En.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function S0(r){const e=r._freezeSettings(),t=y0(r._databaseId);return new oN(r._databaseId,!!e.ignoreUndefinedProperties,t)}function S4(r,e,t,n,i,s={}){const l=r.Cc(s.merge||s.mergeFields?2:0,e,t,i);e2("Data must be an object, but it was:",l,n);const u=_4(n,l);let h,d;if(s.merge)h=new Jo(l.fieldMask),d=l.fieldTransforms;else if(s.mergeFields){const g=[];for(const b of s.mergeFields){const _=K1(e,b,t);if(!l.contains(_))throw new nt(We.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);A4(g,_)||g.push(_)}h=new Jo(g),d=l.fieldTransforms.filter((b=>h.covers(b.field)))}else h=null,d=l.fieldTransforms;return new iN(new fo(u),h,d)}class _0 extends w0{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _0}}class Z5 extends w0{_toFieldTransform(e){return new d3(e.path,new Jd)}isEqual(e){return e instanceof Z5}}function sN(r,e,t,n){const i=r.Cc(1,e,t);e2("Data must be an object, but it was:",i,n);const s=[],l=fo.empty();Lc(n,((h,d)=>{const g=t2(e,h,t);d=Ri(d);const b=i.yc(g);if(d instanceof _0)s.push(g);else{const _=Gf(d,b);_!=null&&(s.push(g),l.set(g,_))}}));const u=new Jo(s);return new b4(l,u,i.fieldTransforms)}function aN(r,e,t,n,i,s){const l=r.Cc(1,e,t),u=[K1(e,n,t)],h=[i];if(s.length%2!=0)throw new nt(We.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)u.push(K1(e,s[_])),h.push(s[_+1]);const d=[],g=fo.empty();for(let _=u.length-1;_>=0;--_)if(!A4(d,u[_])){const v=u[_];let N=h[_];N=Ri(N);const E=l.yc(v);if(N instanceof _0)d.push(v);else{const L=Gf(N,E);L!=null&&(d.push(v),g.set(v,L))}}const b=new Jo(d);return new b4(g,b,l.fieldTransforms)}function lN(r,e,t,n=!1){return Gf(t,r.Cc(n?4:3,e))}function Gf(r,e){if(T4(r=Ri(r)))return e2("Unsupported field value:",e,r),_4(r,e);if(r instanceof w0)return(function(n,i){if(!w4(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,i){const s=[];let l=0;for(const u of n){let h=Gf(u,i.wc(l));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),l++}return{arrayValue:{values:s}}})(r,e)}return(function(n,i){if((n=Ri(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Kj(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Kr.fromDate(n);return{timestampValue:Xd(i.serializer,s)}}if(n instanceof Kr){const s=new Kr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Xd(i.serializer,s)}}if(n instanceof Ga)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ms)return{bytesValue:x3(i.serializer,n._byteString)};if(n instanceof Yn){const s=i.databaseId,l=n.firestore._databaseId;if(!l.isEqual(s))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:B5(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Ka)return(function(l,u){return{mapValue:{fields:{[C5]:{stringValue:k5},[qd]:{arrayValue:{values:l.toArray().map((d=>{if(typeof d!="number")throw u.Sc("VectorValues must only contain numeric values.");return E5(u.serializer,d)}))}}}}}})(n,i);throw i.Sc(`Unsupported field value: ${e0(n)}`)})(r,e)}function _4(r,e){const t={};return z_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lc(r,((n,i)=>{const s=Gf(i,e.mc(n));s!=null&&(t[n]=s)})),{mapValue:{fields:t}}}function T4(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Kr||r instanceof Ga||r instanceof Ms||r instanceof Yn||r instanceof w0||r instanceof Ka)}function e2(r,e,t){if(!T4(t)||!S_(t)){const n=e0(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function K1(r,e,t){if((e=Ri(e))instanceof b0)return e._internalPath;if(typeof e=="string")return t2(r,e);throw Um("Field path arguments must be of type string or ",r,!1,void 0,t)}const cN=new RegExp("[~\\*/\\[\\]]");function t2(r,e,t){if(e.search(cN)>=0)throw Um(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new b0(...e.split("."))._internalPath}catch{throw Um(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Um(r,e,t,n,i){const s=n&&!n.isEmpty(),l=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(s||l)&&(h+=" (found",s&&(h+=` in field ${n}`),l&&(h+=` in document ${i}`),h+=")"),new nt(We.INVALID_ARGUMENT,u+r+h)}function A4(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(T0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class uN extends C4{data(){return super.data()}}function T0(r,e){return typeof e=="string"?t2(r,e):e instanceof b0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new nt(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r2{}class k4 extends r2{}function I4(r,e,...t){let n=[];e instanceof r2&&n.push(e),n=n.concat(t),(function(s){const l=s.filter((h=>h instanceof n2)).length,u=s.filter((h=>h instanceof A0)).length;if(l>1||l>0&&u>0)throw new nt(We.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)r=i._apply(r);return r}class A0 extends k4{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new A0(e,t,n)}_apply(e){const t=this._parse(e);return E4(e._query,t),new Wu(e.firestore,e.converter,L1(e._query,t))}_parse(e){const t=S0(e.firestore);return(function(s,l,u,h,d,g,b){let _;if(d.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new nt(We.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){zb(b,g);const N=[];for(const E of b)N.push(Fb(h,s,E));_={arrayValue:{values:N}}}else _=Fb(h,s,b)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||zb(b,g),_=lN(u,l,b,g==="in"||g==="not-in");return xr.create(d,g,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function hN(r,e,t){const n=e,i=T0("where",r);return A0._create(i,n,t)}class n2 extends r2{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n2(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:Jr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let l=i;const u=s.getFlattenedFilters();for(const h of u)E4(l,h),l=L1(l,h)})(e._query,t),new Wu(e.firestore,e.converter,L1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class i2 extends k4{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new i2(e,t)}_apply(e){const t=(function(i,s,l){if(i.startAt!==null)throw new nt(We.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new nt(We.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cf(s,l)})(e._query,this._field,this._direction);return new Wu(e.firestore,e.converter,(function(i,s){const l=i.explicitOrderBy.concat([s]);return new ah(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function fN(r,e="asc"){const t=e,n=T0("orderBy",r);return i2._create(n,t)}function Fb(r,e,t){if(typeof(t=Ri(t))=="string"){if(t==="")throw new nt(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!e3(e)&&t.indexOf("/")!==-1)throw new nt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Nr.fromString(t));if(!st.isDocumentKey(n))throw new nt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Tf(r,new st(n))}if(t instanceof Yn)return Tf(r,t._key);throw new nt(We.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${e0(t)}.`)}function zb(r,e){if(!Array.isArray(r)||r.length===0)throw new nt(We.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function E4(r,e){const t=(function(i,s){for(const l of i)for(const u of l.getFlattenedFilters())if(s.indexOf(u.op)>=0)return u.op;return null})(r.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new nt(We.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new nt(We.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class pN{convertValue(e,t="none"){switch(Ic(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Lc(e,((i,s)=>{n[i]=this.convertValue(s,t)})),n}convertVectorValue(e){var n,i,s;const t=(s=(i=(n=e.fields)==null?void 0:n[qd].arrayValue)==null?void 0:i.values)==null?void 0:s.map((l=>vn(l.doubleValue)));return new Ka(t)}convertGeoPoint(e){return new Ga(vn(e.latitude),vn(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=s0(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Sf(e));default:return null}}convertTimestamp(e){const t=El(e);return new Kr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Nr.fromString(e);kt(I3(n),9688,{name:e});const i=new Eu(n.get(1),n.get(3)),s=new st(n.popFirst(5));return i.isEqual(t)||Eo(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class Jh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bu extends C4{constructor(e,t,n,i,s,l){super(e,t,n,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(T0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new nt(We.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=bu._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}bu._jsonSchemaVersion="firestore/documentSnapshot/1.0",bu._jsonSchema={type:oi("string",bu._jsonSchemaVersion),bundleSource:oi("string","DocumentSnapshot"),bundleName:oi("string"),bundle:oi("string")};class mm extends bu{data(e={}){return super.data(e)}}class Vd{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Jh(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new mm(this._firestore,this._userDataWriter,n.key,n,new Jh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new nt(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((u=>{const h=new mm(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Jh(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>s||u.type!==3)).map((u=>{const h=new mm(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Jh(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,g=-1;return u.type!==0&&(d=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),g=l.indexOf(u.doc.key)),{type:mN(u.type),doc:h,oldIndex:d,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new nt(We.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=x5.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(r){r=Us(r,Yn);const e=Us(r.firestore,Fc);return QP(Q5(e),r._key).then((t=>gN(e,r,t)))}Vd._jsonSchemaVersion="firestore/querySnapshot/1.0",Vd._jsonSchema={type:oi("string",Vd._jsonSchemaVersion),bundleSource:oi("string","QuerySnapshot"),bundleName:oi("string"),bundle:oi("string")};class P4 extends pN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ms(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}}function N4(r){r=Us(r,Wu);const e=Us(r.firestore,Fc),t=Q5(e),n=new P4(e);return dN(r._query),XP(t,r._query).then((i=>new Vd(e,n,r,i)))}function J1(r,e,t){r=Us(r,Yn);const n=Us(r.firestore,Fc),i=j4(r.converter,e,t);return C0(n,[S4(S0(n),"setDoc",r._key,i,r.converter!==null,t).toMutation(r._key,po.none())])}function B4(r,e,t,...n){r=Us(r,Yn);const i=Us(r.firestore,Fc),s=S0(i);let l;return l=typeof(e=Ri(e))=="string"||e instanceof b0?aN(s,"updateDoc",r._key,e,t,n):sN(s,"updateDoc",r._key,e),C0(i,[l.toMutation(r._key,po.exists(!0))])}function L4(r){return C0(Us(r.firestore,Fc),[new h0(r._key,po.none())])}function o2(r,e){const t=Us(r.firestore,Fc),n=ma(r),i=j4(r.converter,e);return C0(t,[S4(S0(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,po.exists(!1))]).then((()=>n))}function C0(r,e){return(function(n,i){const s=new Ha;return n.asyncQueue.enqueueAndForget((async()=>OP(await YP(n),i,s))),s.promise})(Q5(r),e)}function gN(r,e,t){const n=t.docs.get(e._key),i=new P4(r);return new bu(r,i,e._key,n,new Jh(t.hasPendingWrites,t.fromCache),e.converter)}function Rl(){return new Z5("serverTimestamp")}(function(e,t=!0){(function(i){sh=i})(ih),Od(new Tu("firestore",((n,{instanceIdentifier:i,options:s})=>{const l=n.getProvider("app").getImmediate(),u=new Fc(new ME(n.getProvider("auth-internal")),new $E(l,n.getProvider("app-check-internal")),(function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new nt(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eu(d.options.projectId,g)})(l,i),l);return s={useFetchStreams:t,...s},u._setSettings(s),u}),"PUBLIC").setMultipleInstances(!0)),Sc(yv,xv,e),Sc(yv,xv,"esm2020")})();const yN={apiKey:"AIzaSyCyIga2EWsEZLqApS633i9uRIy5p745EJg",authDomain:"electrician-toolkit-33497.firebaseapp.com",projectId:"electrician-toolkit-33497",storageBucket:"electrician-toolkit-33497.firebasestorage.app",messagingSenderId:"878846360709",appId:"1:878846360709:web:af750d7f4d2a9495b17dec",measurementId:"G-JWZ1TDP25R"},F4=IS(yN),qi=FE(F4),Ro=eN(F4);tN(Ro).then(()=>{console.log(" Firebase offline persistence enabled")}).catch(r=>{r.code==="failed-precondition"?console.warn(" Multiple tabs open, persistence only enabled in first tab"):r.code==="unimplemented"?console.warn(" Browser doesn't support persistence"):console.error(" Error enabling persistence:",r)});const s2="jobs_cache_v1",a2="jobs_cache_timestamp_v1",xN=300*1e3,vN=(r,e)=>{try{const t={userId:e,jobs:r,timestamp:Date.now()};localStorage.setItem(s2,JSON.stringify(t)),localStorage.setItem(a2,Date.now().toString())}catch(t){console.warn("Failed to cache jobs:",t)}},bN=r=>{try{const e=localStorage.getItem(s2);if(!e)return null;const t=JSON.parse(e);if(t.userId!==r)return Ef(),null;const n=parseInt(localStorage.getItem(a2)||"0");return Date.now()-n>xN?(Ef(),null):t.jobs}catch(e){return console.warn("Failed to load cached jobs:",e),null}},Ef=()=>{try{localStorage.removeItem(s2),localStorage.removeItem(a2)}catch(r){console.warn("Failed to clear cache:",r)}},$u=async()=>{var r;try{const e=(r=qi.currentUser)==null?void 0:r.uid;if(!e)throw new Error("User not authenticated");const t=bN(e);return t?(console.log(" Loaded jobs from localStorage cache (instant)"),Vb(e),t):(console.log(" Fetching jobs from Firebase..."),await Vb(e))}catch(e){throw console.error("Error fetching jobs:",e),e}},Vb=async r=>{const e=Hf(Ro,"users",r,"jobs"),t=I4(e,fN("createdAt","desc")),i=(await N4(t)).docs.map(s=>({id:s.id,...s.data()}));return vN(i,r),i},Y1=async r=>{var e;try{const t=(e=qi.currentUser)==null?void 0:e.uid;if(!t)throw new Error("User not authenticated");const n=Hf(Ro,"users",t,"jobs"),i={...r,createdAt:Rl(),status:r.status||"active"},s=await o2(n,i);return Ef(),console.log(" Job created:",s.id),s.id}catch(t){throw console.error("Error creating job:",t),t}},wN=async(r,e)=>{var t;try{const n=(t=qi.currentUser)==null?void 0:t.uid;if(!n)throw new Error("User not authenticated");const i=ma(Ro,"users",n,"jobs",r);await B4(i,{...e,updatedAt:Rl()}),Ef(),console.log(" Job updated:",r)}catch(n){throw console.error("Error updating job:",n),n}},z4=async r=>{var e;try{const t=(e=qi.currentUser)==null?void 0:e.uid;if(!t)throw new Error("User not authenticated");const n=ma(Ro,"users",t,"jobs",r);await L4(n),Ef(),console.log(" Job deleted:",r)}catch(t){throw console.error("Error deleting job:",t),t}},Kf=async(r,e)=>{var t;try{const n=(t=qi.currentUser)==null?void 0:t.uid;if(!n)throw new Error("User not authenticated");const i=ma(Ro,"users",n,"jobs",r),s=Hf(i,"calculations"),l={...e,createdAt:Rl()},u=await o2(s,l);return console.log(" Calculation added:",u.id),u.id}catch(n){throw console.error("Error adding calculation:",n),n}},Ob=Object.freeze(Object.defineProperty({__proto__:null,addCalculationToJob:Kf,createJob:Y1,deleteJob:z4,getUserJobs:$u,updateJob:wN},Symbol.toStringTag,{value:"Module"})),SN=pe.forwardRef(({isDarkMode:r=!1,onExportSuccess:e},t)=>{const[n,i]=pe.useState(""),[s,l]=pe.useState(""),[u,h]=pe.useState(""),[d,g]=pe.useState("12"),[b,_]=pe.useState("single"),[v,N]=pe.useState("copper"),[E,L]=pe.useState("1.0"),[k,O]=pe.useState(!1),[$,F]=pe.useState([]),[oe,ce]=pe.useState(!1),D={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},C={14:4110,12:6530,10:10380,8:16510,6:26240,4:41740,3:52620,2:66360,1:83690,"1/0":105600,"2/0":133100,"3/0":167800,"4/0":211600,250:25e4,300:3e5,350:35e4,400:4e5,500:5e5,600:6e5,750:75e4,1e3:1e6},S={copper:{dc:10.8,ac:12.9},aluminum:{dc:17.4,ac:21.2}},I=(()=>{if(!n||!s||!u)return{drop:"0.00",percentage:"0.00",excessive:!1};const q=parseFloat(n),se=parseFloat(s),te=parseFloat(u),re=C[d],xe=parseFloat(E),be=S[v].ac;let Z;b==="single"?Z=2*be*se*te*xe/re:Z=1.732*be*se*te*xe/re;const W=Z/q*100,J=W>3;return{drop:Z.toFixed(2),percentage:W.toFixed(2),excessive:J}})(),w=async()=>{O(!0),ce(!0);try{const q=await $u();F(q)}catch(q){console.error("Error loading jobs:",q),alert("Failed to load jobs. Please try again.")}finally{ce(!1)}},B=async q=>{try{const se={type:"voltage-drop",data:{voltage:parseFloat(n),current:parseFloat(s),distance:parseFloat(u),wireSize:d,phaseType:b,conductorType:v,powerFactor:parseFloat(E),results:{voltageDrop:I.drop,percentageDrop:I.percentage,excessive:I.excessive}}};await Kf(q,se),O(!1),alert("Calculation attached to job successfully!")}catch(se){console.error("Error attaching calculation:",se),alert("Failed to attach calculation. Please try again.")}},M=()=>{if(!n||!s||!u){alert("Please enter all required values before exporting to PDF");return}const q={calculatorName:"Voltage Drop Calculator",inputs:{systemType:b==="single"?"Single Phase":"Three Phase",conductorMaterial:v.charAt(0).toUpperCase()+v.slice(1),systemVoltage:`${n} V`,loadCurrent:`${s} A`,oneWayDistance:`${u} ft`,wireSize:d.includes("/")?`${d} AWG`:`${d} ${parseInt(d)<=4?"AWG":"kcmil"}`,powerFactor:E},results:{voltageDrop:`${I.drop} V`,percentageDrop:`${I.percentage}%`,necCompliant:I.excessive?"NO - Exceeds 3% limit":"YES - Within 3% limit",status:I.excessive?" WARNING: Exceeds NEC 3% Limit":" Within NEC limits"},additionalInfo:{formula:b==="single"?"2  K  I  L  PF  CM":"1.732  K  I  L  PF  CM",kConstant:`${S[v].ac} (${v} AC)`,circularMils:C[d].toLocaleString(),powerFactorUsed:E,systemConfiguration:b==="single"?"Single phase":"Three phase"},necReferences:["NEC Guidelines: Branch circuits - 3% max","Feeders - 3% max","Combined branch circuit and feeder - 5% max","Note: Excessive voltage drop can cause equipment malfunction and reduced efficiency"]};un(q),e&&e()};return pe.useImperativeHandle(t,()=>({exportPDF:M})),o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${D.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"System Type"}),o.jsxs("select",{value:b,onChange:q=>_(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"single",children:"Single Phase"}),o.jsx("option",{value:"three",children:"Three Phase"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Conductor Material"}),o.jsxs("select",{value:v,onChange:q=>N(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"copper",children:"Copper"}),o.jsx("option",{value:"aluminum",children:"Aluminum"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"System Voltage (V)"}),o.jsx("input",{type:"number",value:n,onChange:q=>i(q.target.value),placeholder:"120, 240, 480",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Load Current (Amps)"}),o.jsx("input",{type:"number",value:s,onChange:q=>l(q.target.value),placeholder:"15, 20, 30",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"One-Way Distance (feet)"}),o.jsx("input",{type:"number",value:u,onChange:q=>h(q.target.value),placeholder:"100, 200, 500",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Wire Size (AWG/kcmil)"}),o.jsxs("select",{value:d,onChange:q=>g(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"14",children:"14 AWG"}),o.jsx("option",{value:"12",children:"12 AWG"}),o.jsx("option",{value:"10",children:"10 AWG"}),o.jsx("option",{value:"8",children:"8 AWG"}),o.jsx("option",{value:"6",children:"6 AWG"}),o.jsx("option",{value:"4",children:"4 AWG"}),o.jsx("option",{value:"3",children:"3 AWG"}),o.jsx("option",{value:"2",children:"2 AWG"}),o.jsx("option",{value:"1",children:"1 AWG"}),o.jsx("option",{value:"1/0",children:"1/0 AWG"}),o.jsx("option",{value:"2/0",children:"2/0 AWG"}),o.jsx("option",{value:"3/0",children:"3/0 AWG"}),o.jsx("option",{value:"4/0",children:"4/0 AWG"}),o.jsx("option",{value:"250",children:"250 kcmil"}),o.jsx("option",{value:"300",children:"300 kcmil"}),o.jsx("option",{value:"350",children:"350 kcmil"}),o.jsx("option",{value:"400",children:"400 kcmil"}),o.jsx("option",{value:"500",children:"500 kcmil"}),o.jsx("option",{value:"600",children:"600 kcmil"}),o.jsx("option",{value:"750",children:"750 kcmil"}),o.jsx("option",{value:"1000",children:"1000 kcmil"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Power Factor (AC loads)"}),o.jsxs("select",{value:E,onChange:q=>L(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"1.0",children:"1.0 (Resistive loads)"}),o.jsx("option",{value:"0.9",children:"0.9 (Most motors)"}),o.jsx("option",{value:"0.85",children:"0.85 (Typical mixed load)"}),o.jsx("option",{value:"0.8",children:"0.8 (Poor power factor)"})]})]})]})]}),n&&s&&u&&o.jsxs("div",{children:[o.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:D.labelText,marginBottom:"0.25rem"},children:"Voltage Drop"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:D.cardText},children:I.drop}),o.jsx("div",{style:{fontSize:"0.75rem",color:D.labelText,marginTop:"0.25rem"},children:"Volts"})]}),o.jsxs("div",{style:{background:I.excessive?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:I.excessive?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Percentage Drop"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:I.excessive?"#dc2626":"#1e40af"},children:[I.percentage,"%"]}),o.jsx("div",{style:{fontSize:"0.75rem",color:I.excessive?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:"Max: 3%"})]})]}),o.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${D.cardBorder}`},children:[o.jsx("strong",{style:{color:D.cardText,display:"block",marginBottom:"0.5rem",fontSize:"0.875rem"},children:"Calculation Details:"}),o.jsxs("div",{style:{fontSize:"0.8125rem",color:D.labelText,display:"grid",gap:"0.25rem"},children:[o.jsxs("div",{children:["Formula: ",b==="single"?"2":"1.732","  K  I  L  PF  CM"]}),o.jsxs("div",{children:["K constant (",v,"): ",S[v].ac]}),o.jsxs("div",{children:["Circular mils: ",C[d].toLocaleString()]}),o.jsxs("div",{children:["Power factor: ",E]}),o.jsxs("div",{children:["System: ",b==="single"?"Single":"Three"," phase"]})]})]})]}),I.excessive?o.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem",fontSize:"0.9375rem"},children:"WARNING: Exceeds NEC 3% Limit"}),o.jsx("div",{style:{fontSize:"0.8125rem"},children:"Consider using larger wire size to reduce voltage drop. Excessive voltage drop can cause equipment malfunction and reduced efficiency."})]})]})}):o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Voltage drop is within NEC limits"}),o.jsx("div",{style:{fontSize:"0.8125rem"},children:"This circuit meets the NEC recommended 3% maximum voltage drop for branch circuits."})]})]})}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[o.jsxs("button",{onClick:M,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:q=>q.currentTarget.style.background="#2563eb",onMouseOut:q=>q.currentTarget.style.background="#3b82f6",children:[o.jsx(Hm,{size:18}),"Export to PDF"]}),o.jsxs("button",{onClick:w,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:q=>q.currentTarget.style.background="#059669",onMouseOut:q=>q.currentTarget.style.background="#10b981",children:[o.jsx(Lu,{size:18}),"Attach to Job"]})]})]}),o.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${D.cardBorder}`,fontSize:"0.8125rem",color:D.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:D.cardText},children:"NEC Guidelines:"}),"Branch circuits: 3% max  Feeders: 3% max  Combined: 5% max"]}),k&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:o.jsxs("div",{style:{background:D.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[o.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:D.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),o.jsx("div",{style:{marginBottom:"1rem"},children:oe?o.jsx("div",{style:{textAlign:"center",padding:"2rem",color:D.labelText},children:"Loading jobs..."}):$&&$.length>0?$.map(q=>o.jsxs("div",{onClick:()=>B(q.id),style:{padding:"1rem",background:D.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${D.cardBorder}`,transition:"all 0.2s"},onMouseOver:se=>se.currentTarget.style.transform="translateY(-2px)",onMouseOut:se=>se.currentTarget.style.transform="translateY(0)",children:[o.jsx("div",{style:{fontWeight:"600",color:D.cardText,marginBottom:"0.25rem"},children:q.name}),o.jsx("div",{style:{fontSize:"0.875rem",color:D.labelText},children:q.location||"No location"})]},q.id)):o.jsx("div",{style:{textAlign:"center",padding:"2rem",color:D.labelText},children:o.jsx("p",{children:"No jobs found. Create a job first."})})}),o.jsx("button",{onClick:()=>O(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:q=>q.currentTarget.style.background="#4b5563",onMouseOut:q=>q.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})}),_N=({isDarkMode:r,colors:e,onExport:t})=>{const[n,i]=pe.useState(""),[s,l]=pe.useState(""),[u,h]=pe.useState(""),[d,g]=pe.useState(""),[b,_]=pe.useState({V:"",I:"",R:"",P:""}),[v,N]=pe.useState(!1),[E,L]=pe.useState([]),[k,O]=pe.useState(!1);pe.useEffect(()=>{$()},[n,s,u,d]);const $=()=>{const C=parseFloat(n)||0,S=parseFloat(s)||0,V=parseFloat(u)||0,I=parseFloat(d)||0,w={V:"",I:"",R:"",P:""};!n&&S&&V?w.V=(S*V).toFixed(1):!n&&I&&S&&S!==0?w.V=(I/S).toFixed(1):!n&&I&&V?w.V=Math.sqrt(I*V).toFixed(1):n&&(w.V=C.toFixed(1)),!s&&C&&V&&V!==0?w.I=(C/V).toFixed(1):!s&&I&&C&&C!==0?w.I=(I/C).toFixed(1):!s&&I&&V&&V!==0?w.I=Math.sqrt(I/V).toFixed(1):s&&(w.I=S.toFixed(1)),!u&&C&&S&&S!==0?w.R=(C/S).toFixed(1):!u&&C&&I&&I!==0?w.R=(C*C/I).toFixed(1):!u&&I&&S&&S!==0?w.R=(I/(S*S)).toFixed(1):u&&(w.R=V.toFixed(1)),!d&&C&&S?w.P=(C*S).toFixed(1):!d&&S&&V?w.P=(S*S*V).toFixed(1):!d&&C&&V&&V!==0?w.P=(C*C/V).toFixed(1):d&&(w.P=I.toFixed(1)),_(w)},F=()=>{i(""),l(""),h(""),g(""),_({V:"",I:"",R:"",P:""})},oe=async()=>{N(!0),O(!0);try{const C=await $u();L(C)}catch(C){console.error("Error loading jobs:",C),alert("Failed to load jobs. Please try again.")}finally{O(!1)}},ce=async C=>{try{const S={type:"ohms-law-basic",data:{voltage:parseFloat(n)||parseFloat(b.V)||0,current:parseFloat(s)||parseFloat(b.I)||0,resistance:parseFloat(u)||parseFloat(b.R)||0,power:parseFloat(d)||parseFloat(b.P)||0}};await Kf(C,S),N(!1),alert("Calculation attached to job successfully!")}catch(S){console.error("Error attaching calculation:",S),alert("Failed to attach calculation. Please try again.")}},D=()=>{if(!(n||s||u||d||b.V||b.I||b.R||b.P)){alert("Please enter at least 2 values before exporting");return}const S={},V={};n&&(S.voltage=`${n} V`),s&&(S.current=`${s} A`),u&&(S.resistance=`${u} `),d&&(S.power=`${d} W`),b.V&&(V.voltage=`${b.V} V`),b.I&&(V.current=`${b.I} A`),b.R&&(V.resistance=`${b.R} `),b.P&&(V.power=`${b.P} W`),t({calculatorName:"Ohm's Law Calculator - Basic",inputs:S,results:V,additionalInfo:{note:"Calculations based on fundamental electrical formulas"},necReferences:["Ohm's Law: E = I  R","Power formulas: P = E  I, P = I  R, P = E  R","Current: I = E  R, I = P  E, I = (P  R)","Resistance: R = E  I, R = E  P, R = P  I"]})};return o.jsxs("div",{children:[o.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(xs,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:"Enter any 2 known values to calculate the remaining values"})]})}),o.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Volts (E)"}),o.jsx("input",{type:"number",value:n||b.V,onChange:C=>i(C.target.value),placeholder:"Enter voltage",disabled:s&&u||s&&d||u&&d,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:s&&u||s&&d||u&&d?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:s&&u||s&&d||u&&d?"not-allowed":"text"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Amps (I)"}),o.jsx("input",{type:"number",value:s||b.I,onChange:C=>l(C.target.value),placeholder:"Enter current",disabled:n&&u||n&&d||u&&d,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:n&&u||n&&d||u&&d?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:n&&u||n&&d||u&&d?"not-allowed":"text"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Ohms (R)"}),o.jsx("input",{type:"number",value:u||b.R,onChange:C=>h(C.target.value),placeholder:"Enter resistance",disabled:n&&s||n&&d||s&&d,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:n&&s||n&&d||s&&d?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:n&&s||n&&d||s&&d?"not-allowed":"text"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Watts (P)"}),o.jsx("input",{type:"number",value:d||b.P,onChange:C=>g(C.target.value),placeholder:"Enter power",disabled:n&&s||n&&u||s&&u,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:n&&s||n&&u||s&&u?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:n&&s||n&&u||s&&u?"not-allowed":"text"}})]})]}),o.jsx("button",{onClick:F,style:{width:"100%",background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),(b.V||b.I||b.R||b.P)&&o.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[b.V&&o.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Voltage"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:b.V}),o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Volts"})]}),b.I&&o.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Current"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:b.I}),o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),b.R&&o.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Resistance"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:b.R}),o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Ohms"})]}),b.P&&o.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Power"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:b.P}),o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Watts"})]})]})]}),(n||s||u||d)&&o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[o.jsxs("button",{onClick:D,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:C=>C.currentTarget.style.background="#2563eb",onMouseOut:C=>C.currentTarget.style.background="#3b82f6",children:[o.jsx(Hm,{size:18}),"Export to PDF"]}),o.jsxs("button",{onClick:oe,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:C=>C.currentTarget.style.background="#059669",onMouseOut:C=>C.currentTarget.style.background="#10b981",children:[o.jsx(Lu,{size:18}),"Attach to Job"]})]}),v&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:o.jsxs("div",{style:{background:e.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[o.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:e.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),o.jsx("div",{style:{marginBottom:"1rem"},children:k?o.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:"Loading jobs..."}):E&&E.length>0?E.map(C=>o.jsxs("div",{onClick:()=>ce(C.id),style:{padding:"1rem",background:e.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${e.cardBorder}`,transition:"all 0.2s"},onMouseOver:S=>S.currentTarget.style.transform="translateY(-2px)",onMouseOut:S=>S.currentTarget.style.transform="translateY(0)",children:[o.jsx("div",{style:{fontWeight:"600",color:e.cardText,marginBottom:"0.25rem"},children:C.name}),o.jsx("div",{style:{fontSize:"0.875rem",color:e.labelText},children:C.location||"No location"})]},C.id)):o.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:o.jsx("p",{children:"No jobs found. Create a job first."})})}),o.jsx("button",{onClick:()=>N(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:C=>C.currentTarget.style.background="#4b5563",onMouseOut:C=>C.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})},TN=({isDarkMode:r,colors:e,onExport:t})=>{const[n,i]=pe.useState([{id:1,R:"",V:"",I:"",P:""}]),[s,l]=pe.useState({R:"",V:"",I:"",P:""}),[u,h]=pe.useState(!1),[d,g]=pe.useState([]),[b,_]=pe.useState(!1),v=(S,V)=>Object.entries(S).filter(([w,B])=>w!==V&&B&&B!=="").map(([w])=>w).length>=2,N=()=>{const S=Math.max(...n.map(V=>V.id),0)+1;i([...n,{id:S,R:"",V:"",I:"",P:""}])},E=S=>{n.length>1&&i(n.filter(V=>V.id!==S))},L=(S,V,I)=>{i(n.map(w=>w.id===S?{...w,[V]:I}:w))},k=(S,V)=>{const I=[];if(V.I&&V.I!==""){const w=parseFloat(V.I);S.forEach((B,M)=>{if(B.I&&B.I!==""){const q=parseFloat(B.I);Math.abs(q-w)>.01&&I.push(`Total current (${w}A) conflicts with Component ${M+1} current (${q}A)`)}})}return I},O=()=>{const S=k(n,s);if(S.length>0){alert(`Conflicts detected:
`+S.join(`
`));return}let V=[...n];if(s.I&&s.I!==""){const M=parseFloat(s.I);V=V.map(q=>!q.I||q.I===""?{...q,I:M.toFixed(1)}:q)}let I=!0,w=0;const B=50;for(;I&&w<B;){I=!1,w++;let M=null;for(let q of V)if(q.I&&!isNaN(parseFloat(q.I))){M=parseFloat(q.I);break}if(M===null)for(let q of V){const se=parseFloat(q.V),te=parseFloat(q.R),re=parseFloat(q.P);if(!isNaN(se)&&!isNaN(te)&&te!==0){M=se/te;break}else if(!isNaN(re)&&!isNaN(se)&&se!==0){M=re/se;break}else if(!isNaN(re)&&!isNaN(te)&&te!==0){M=Math.sqrt(re/te);break}}M!==null&&(V=V.map(q=>!q.I||q.I===""?(I=!0,{...q,I:M.toFixed(1)}):q)),V=V.map(q=>{const se={...q},te=parseFloat(q.V),re=parseFloat(q.I),xe=parseFloat(q.R),be=parseFloat(q.P);(q.R===""||isNaN(xe))&&!isNaN(te)&&!isNaN(re)&&re!==0?(se.R=(te/re).toFixed(1),I=!0):(q.R===""||isNaN(xe))&&!isNaN(be)&&!isNaN(re)&&re!==0?(se.R=(be/(re*re)).toFixed(1),I=!0):(q.R===""||isNaN(xe))&&!isNaN(te)&&!isNaN(be)&&be!==0&&(se.R=(te*te/be).toFixed(1),I=!0);const Z=parseFloat(se.R),W=parseFloat(se.I);(q.V===""||isNaN(te))&&!isNaN(W)&&!isNaN(Z)?(se.V=(W*Z).toFixed(1),I=!0):(q.V===""||isNaN(te))&&!isNaN(be)&&!isNaN(W)&&W!==0?(se.V=(be/W).toFixed(1),I=!0):(q.V===""||isNaN(te))&&!isNaN(be)&&!isNaN(Z)&&(se.V=Math.sqrt(be*Z).toFixed(1),I=!0);const J=parseFloat(se.V);return(q.P===""||isNaN(be))&&!isNaN(J)&&!isNaN(W)?(se.P=(J*W).toFixed(1),I=!0):(q.P===""||isNaN(be))&&!isNaN(W)&&!isNaN(Z)?(se.P=(W*W*Z).toFixed(1),I=!0):(q.P===""||isNaN(be))&&!isNaN(J)&&!isNaN(Z)&&Z!==0&&(se.P=(J*J/Z).toFixed(1),I=!0),se})}i(V)},$=()=>{i([{id:1,R:"",V:"",I:"",P:""}]),l({R:"",V:"",I:"",P:""})},F=()=>{const S=n.reduce((M,q)=>{const se=parseFloat(q.R);return M+(isNaN(se)?0:se)},0),V=n.reduce((M,q)=>{const se=parseFloat(q.V);return M+(isNaN(se)?0:se)},0),I=n.reduce((M,q)=>{const se=parseFloat(q.P);return M+(isNaN(se)?0:se)},0),w=n.find(M=>!isNaN(parseFloat(M.I))),B=w?parseFloat(w.I):0;return{totalR:S,totalV:V,totalI:B,totalP:I}},oe=async()=>{h(!0),_(!0);try{const S=await $u();g(S)}catch(S){console.error("Error loading jobs:",S),alert("Failed to load jobs. Please try again.")}finally{_(!1)}},ce=async S=>{try{const V=F();await Kf(S,{type:"ohms-law-series",data:{components:n,totals:V}}),h(!1),alert("Calculation attached to job successfully!")}catch(V){console.error("Error attaching calculation:",V),alert("Failed to attach calculation. Please try again.")}},D=()=>{if(!n.some(B=>B.R||B.V||B.I||B.P)){alert("Please enter component values before exporting");return}const V=F(),I={};n.forEach((B,M)=>{const q=[];B.R&&q.push(`R=${B.R}`),B.V&&q.push(`V=${B.V}V`),B.I&&q.push(`I=${B.I}A`),B.P&&q.push(`P=${B.P}W`),q.length>0&&(I[`component${M+1}`]=q.join(", "))});const w={calculatorName:"Ohm's Law Calculator - Series Circuit",inputs:I,results:{totalResistance:`${V.totalR.toFixed(1)} `,totalVoltage:`${V.totalV.toFixed(1)} V`,current:`${V.totalI.toFixed(1)} A (constant)`,totalPower:`${V.totalP.toFixed(1)} W`},additionalInfo:{circuitType:"Series Circuit",principle:"Current is constant across all components",totalResistanceFormula:"R_total = R1 + R2 + R3 + ...",totalVoltageFormula:"V_total = V1 + V2 + V3 + ..."},necReferences:["Series circuits: Current is the same through all components","Total resistance = Sum of all resistances","Total voltage = Sum of voltage drops across components","Total power = Sum of power dissipated in each component"]};t(w)},C=n.some(S=>S.R||S.V||S.I||S.P);return o.jsxs("div",{children:[o.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(xs,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:"Series Circuit: Current is constant across all components"})]})}),o.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${e.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Totals (Optional)"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"0.5rem"},children:["V","I","R","P"].map(S=>{const V={R:"Ohms (R)",V:"Volts (E)",I:"Amps (I)",P:"Watts (P)"};return o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:V[S]}),o.jsx("input",{type:"number",value:s[S],onChange:I=>l({...s,[S]:I.target.value}),placeholder:"Optional",disabled:v(s,S),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:v(s,S)?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:v(s,S)?"not-allowed":"text"}})]},S)})}),o.jsx("p",{style:{fontSize:"0.8125rem",color:e.subtleText,margin:0,fontStyle:"italic"},children:"Enter known total values to help solve the circuit. Current is constant in series."})]}),n.map((S,V)=>o.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${e.cardBorder}`},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",marginBottom:"0.75rem",gap:"0.5rem"},children:[o.jsxs("h4",{style:{fontWeight:"600",color:e.labelText,margin:0,fontSize:"0.875rem"},children:["Component ",V+1]}),n.length>1&&o.jsx("button",{onClick:()=>E(S.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Cc,{size:18})})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem"},children:[{field:"V",label:"Volts (E)"},{field:"I",label:"Amps (I)"},{field:"R",label:"Ohms (R)"},{field:"P",label:"Watts (P)"}].map(({field:I,label:w})=>o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"500",color:e.subtleText,marginBottom:"0.25rem"},children:w}),o.jsx("input",{type:"number",value:S[I],onChange:B=>L(S.id,I,B.target.value),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:e.inputBg,color:e.cardText,boxSizing:"border-box"}})]},I))})]},S.id)),o.jsxs("button",{onClick:N,style:{width:"100%",background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[o.jsx(ga,{size:16}),"Add Component"]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[o.jsxs("button",{onClick:O,style:{flex:1,background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(cf,{size:20}),"Calculate"]}),o.jsx("button",{onClick:$,style:{flex:1,background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),o.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem"},children:"Circuit Totals"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[o.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Voltage"}),o.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalV.toFixed(1)}),o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"E"})]}),o.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Amperage"}),o.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalI.toFixed(1)}),o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"I"})]}),o.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Resistance"}),o.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalR.toFixed(1)}),o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"R"})]}),o.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Wattage"}),o.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalP.toFixed(1)}),o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"P"})]})]})]}),C&&o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[o.jsxs("button",{onClick:D,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:S=>S.currentTarget.style.background="#2563eb",onMouseOut:S=>S.currentTarget.style.background="#3b82f6",children:[o.jsx(Hm,{size:18}),"Export to PDF"]}),o.jsxs("button",{onClick:oe,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:S=>S.currentTarget.style.background="#059669",onMouseOut:S=>S.currentTarget.style.background="#10b981",children:[o.jsx(Lu,{size:18}),"Attach to Job"]})]}),u&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:o.jsxs("div",{style:{background:e.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[o.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:e.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),o.jsx("div",{style:{marginBottom:"1rem"},children:b?o.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:"Loading jobs..."}):d&&d.length>0?d.map(S=>o.jsxs("div",{onClick:()=>ce(S.id),style:{padding:"1rem",background:e.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${e.cardBorder}`,transition:"all 0.2s"},onMouseOver:V=>V.currentTarget.style.transform="translateY(-2px)",onMouseOut:V=>V.currentTarget.style.transform="translateY(0)",children:[o.jsx("div",{style:{fontWeight:"600",color:e.cardText,marginBottom:"0.25rem"},children:S.name}),o.jsx("div",{style:{fontSize:"0.875rem",color:e.labelText},children:S.location||"No location"})]},S.id)):o.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:o.jsx("p",{children:"No jobs found. Create a job first."})})}),o.jsx("button",{onClick:()=>h(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:S=>S.currentTarget.style.background="#4b5563",onMouseOut:S=>S.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})},AN=({isDarkMode:r,colors:e,onExport:t})=>{const[n,i]=pe.useState([{id:1,R:"",V:"",I:"",P:""}]),[s,l]=pe.useState({R:"",V:"",I:"",P:""}),[u,h]=pe.useState(!1),[d,g]=pe.useState([]),[b,_]=pe.useState(!1),v=(S,V)=>Object.entries(S).filter(([w,B])=>w!==V&&B&&B!=="").map(([w])=>w).length>=2,N=()=>{const S=Math.max(...n.map(V=>V.id),0)+1;i([...n,{id:S,R:"",V:"",I:"",P:""}])},E=S=>{n.length>1&&i(n.filter(V=>V.id!==S))},L=(S,V,I)=>{i(n.map(w=>w.id===S?{...w,[V]:I}:w))},k=(S,V)=>{const I=[];if(V.V&&V.V!==""){const w=parseFloat(V.V);S.forEach((B,M)=>{if(B.V&&B.V!==""){const q=parseFloat(B.V);Math.abs(q-w)>.01&&I.push(`Total voltage (${w}V) conflicts with Component ${M+1} voltage (${q}V)`)}})}return I},O=()=>{const S=k(n,s);if(S.length>0){alert(`Conflicts detected:
`+S.join(`
`));return}let V=[...n];if(s.V&&s.V!==""){const M=parseFloat(s.V);V=V.map(q=>!q.V||q.V===""?{...q,V:M.toFixed(1)}:q)}let I=!0,w=0;const B=50;for(;I&&w<B;){I=!1,w++;let M=null;for(let q of V)if(q.V&&!isNaN(parseFloat(q.V))){M=parseFloat(q.V);break}if(M===null)for(let q of V){const se=parseFloat(q.I),te=parseFloat(q.R),re=parseFloat(q.P);if(!isNaN(se)&&!isNaN(te)){M=se*te;break}else if(!isNaN(re)&&!isNaN(se)&&se!==0){M=re/se;break}else if(!isNaN(re)&&!isNaN(te)){M=Math.sqrt(re*te);break}}M!==null&&(V=V.map(q=>!q.V||q.V===""?(I=!0,{...q,V:M.toFixed(1)}):q)),V=V.map(q=>{const se={...q},te=parseFloat(q.V),re=parseFloat(q.I),xe=parseFloat(q.R),be=parseFloat(q.P);(q.R===""||isNaN(xe))&&!isNaN(te)&&!isNaN(re)&&re!==0?(se.R=(te/re).toFixed(1),I=!0):(q.R===""||isNaN(xe))&&!isNaN(be)&&!isNaN(re)&&re!==0?(se.R=(be/(re*re)).toFixed(1),I=!0):(q.R===""||isNaN(xe))&&!isNaN(te)&&!isNaN(be)&&be!==0&&(se.R=(te*te/be).toFixed(1),I=!0);const Z=parseFloat(se.R),W=parseFloat(se.V);(q.I===""||isNaN(re))&&!isNaN(W)&&!isNaN(Z)&&Z!==0?(se.I=(W/Z).toFixed(1),I=!0):(q.I===""||isNaN(re))&&!isNaN(be)&&!isNaN(W)&&W!==0?(se.I=(be/W).toFixed(1),I=!0):(q.I===""||isNaN(re))&&!isNaN(be)&&!isNaN(Z)&&Z!==0&&(se.I=Math.sqrt(be/Z).toFixed(1),I=!0);const J=parseFloat(se.I);return(q.P===""||isNaN(be))&&!isNaN(W)&&!isNaN(J)?(se.P=(W*J).toFixed(1),I=!0):(q.P===""||isNaN(be))&&!isNaN(J)&&!isNaN(Z)?(se.P=(J*J*Z).toFixed(1),I=!0):(q.P===""||isNaN(be))&&!isNaN(W)&&!isNaN(Z)&&Z!==0&&(se.P=(W*W/Z).toFixed(1),I=!0),se})}i(V)},$=()=>{i([{id:1,R:"",V:"",I:"",P:""}]),l({R:"",V:"",I:"",P:""})},F=()=>{const S=n.reduce((q,se)=>{const te=parseFloat(se.I);return q+(isNaN(te)?0:te)},0),V=n.reduce((q,se)=>{const te=parseFloat(se.P);return q+(isNaN(te)?0:te)},0),I=n.find(q=>!isNaN(parseFloat(q.V))),w=I?parseFloat(I.V):0,B=n.map(q=>parseFloat(q.R)).filter(q=>!isNaN(q)&&q>0);return{totalR:B.length>0?1/B.reduce((q,se)=>q+1/se,0):0,totalV:w,totalI:S,totalP:V}},oe=async()=>{h(!0),_(!0);try{const S=await $u();g(S)}catch(S){console.error("Error loading jobs:",S),alert("Failed to load jobs. Please try again.")}finally{_(!1)}},ce=async S=>{try{const V=F();await Kf(S,{type:"ohms-law-parallel",data:{components:n,totals:V}}),h(!1),alert("Calculation attached to job successfully!")}catch(V){console.error("Error attaching calculation:",V),alert("Failed to attach calculation. Please try again.")}},D=()=>{if(!n.some(B=>B.R||B.V||B.I||B.P)){alert("Please enter component values before exporting");return}const V=F(),I={};n.forEach((B,M)=>{const q=[];B.R&&q.push(`R=${B.R}`),B.V&&q.push(`V=${B.V}V`),B.I&&q.push(`I=${B.I}A`),B.P&&q.push(`P=${B.P}W`),q.length>0&&(I[`component${M+1}`]=q.join(", "))});const w={calculatorName:"Ohm's Law Calculator - Parallel Circuit",inputs:I,results:{totalResistance:`${V.totalR.toFixed(1)} `,voltage:`${V.totalV.toFixed(1)} V (constant)`,totalCurrent:`${V.totalI.toFixed(1)} A`,totalPower:`${V.totalP.toFixed(1)} W`},additionalInfo:{circuitType:"Parallel Circuit",principle:"Voltage is constant across all components",totalResistanceFormula:"1/R_total = 1/R1 + 1/R2 + 1/R3 + ...",totalCurrentFormula:"I_total = I1 + I2 + I3 + ..."},necReferences:["Parallel circuits: Voltage is the same across all components","Total resistance = 1  (1/R1 + 1/R2 + 1/R3 + ...)","Total current = Sum of currents through each branch","Total power = Sum of power dissipated in each component"]};t(w)},C=n.some(S=>S.R||S.V||S.I||S.P);return o.jsxs("div",{children:[o.jsx("div",{style:{background:"#faf5ff",border:"1px solid #a855f7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(xs,{size:20,color:"#7e22ce",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#7e22ce",lineHeight:"1.5"},children:"Parallel Circuit: Voltage is constant across all components"})]})}),o.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${e.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Totals (Optional)"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"0.5rem"},children:["V","I","R","P"].map(S=>{const V={R:"Ohms (R)",V:"Volts (E)",I:"Amps (I)",P:"Watts (P)"};return o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:V[S]}),o.jsx("input",{type:"number",value:s[S],onChange:I=>l({...s,[S]:I.target.value}),placeholder:"Optional",disabled:v(s,S),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:v(s,S)?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:v(s,S)?"not-allowed":"text"}})]},S)})}),o.jsx("p",{style:{fontSize:"0.8125rem",color:e.subtleText,margin:0,fontStyle:"italic"},children:"Enter known total values to help solve the circuit. Voltage is constant in parallel."})]}),n.map((S,V)=>o.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${e.cardBorder}`},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",marginBottom:"0.75rem",gap:"0.5rem"},children:[o.jsxs("h4",{style:{fontWeight:"600",color:e.labelText,margin:0,fontSize:"0.875rem"},children:["Component ",V+1]}),n.length>1&&o.jsx("button",{onClick:()=>E(S.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Cc,{size:18})})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem"},children:[{field:"V",label:"Volts (E)"},{field:"I",label:"Amps (I)"},{field:"R",label:"Ohms (R)"},{field:"P",label:"Watts (P)"}].map(({field:I,label:w})=>o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"500",color:e.subtleText,marginBottom:"0.25rem"},children:w}),o.jsx("input",{type:"number",value:S[I],onChange:B=>L(S.id,I,B.target.value),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:e.inputBg,color:e.cardText,boxSizing:"border-box"}})]},I))})]},S.id)),o.jsxs("button",{onClick:N,style:{width:"100%",background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[o.jsx(ga,{size:16}),"Add Component"]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[o.jsxs("button",{onClick:O,style:{flex:1,background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(cf,{size:20}),"Calculate"]}),o.jsx("button",{onClick:$,style:{flex:1,background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),o.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem"},children:"Circuit Totals"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[o.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Voltage"}),o.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalV.toFixed(1)}),o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"E"})]}),o.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Amperage"}),o.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalI.toFixed(1)}),o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"I"})]}),o.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Resistance"}),o.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalR.toFixed(1)}),o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"R"})]}),o.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Wattage"}),o.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalP.toFixed(1)}),o.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"P"})]})]})]}),C&&o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[o.jsxs("button",{onClick:D,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:S=>S.currentTarget.style.background="#2563eb",onMouseOut:S=>S.currentTarget.style.background="#3b82f6",children:[o.jsx(Hm,{size:18}),"Export to PDF"]}),o.jsxs("button",{onClick:oe,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:S=>S.currentTarget.style.background="#059669",onMouseOut:S=>S.currentTarget.style.background="#10b981",children:[o.jsx(Lu,{size:18}),"Attach to Job"]})]}),u&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:o.jsxs("div",{style:{background:e.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[o.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:e.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),o.jsx("div",{style:{marginBottom:"1rem"},children:b?o.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:"Loading jobs..."}):d&&d.length>0?d.map(S=>o.jsxs("div",{onClick:()=>ce(S.id),style:{padding:"1rem",background:e.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${e.cardBorder}`,transition:"all 0.2s"},onMouseOver:V=>V.currentTarget.style.transform="translateY(-2px)",onMouseOut:V=>V.currentTarget.style.transform="translateY(0)",children:[o.jsx("div",{style:{fontWeight:"600",color:e.cardText,marginBottom:"0.25rem"},children:S.name}),o.jsx("div",{style:{fontSize:"0.875rem",color:e.labelText},children:S.location||"No location"})]},S.id)):o.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:o.jsx("p",{children:"No jobs found. Create a job first."})})}),o.jsx("button",{onClick:()=>h(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:S=>S.currentTarget.style.background="#4b5563",onMouseOut:S=>S.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})},CN=pe.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=pe.useState("basic"),i={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},s=l=>{un(l)};return pe.useImperativeHandle(e,()=>({exportPDF:()=>{alert("Please use the Export to PDF button within the calculator")}})),o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsxs("div",{style:{background:i.cardBg,border:`1px solid ${i.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem"},children:[o.jsx("button",{onClick:()=>n("basic"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="basic"?"#3b82f6":i.sectionBg,color:t==="basic"?"white":i.labelText,border:`1px solid ${t==="basic"?"#3b82f6":i.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Basic"}),o.jsx("button",{onClick:()=>n("series"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="series"?"#3b82f6":i.sectionBg,color:t==="series"?"white":i.labelText,border:`1px solid ${t==="series"?"#3b82f6":i.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Series"}),o.jsx("button",{onClick:()=>n("parallel"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="parallel"?"#3b82f6":i.sectionBg,color:t==="parallel"?"white":i.labelText,border:`1px solid ${t==="parallel"?"#3b82f6":i.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Parallel"})]}),t==="basic"&&o.jsx(_N,{isDarkMode:r,colors:i,onExport:s}),t==="series"&&o.jsx(TN,{isDarkMode:r,colors:i,onExport:s}),t==="parallel"&&o.jsx(AN,{isDarkMode:r,colors:i,onExport:s}),o.jsxs("div",{style:{background:i.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${i.cardBorder}`,fontSize:"0.8125rem",color:i.labelText,marginTop:"1rem"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:i.cardText},children:"Formulas:"}),o.jsx("div",{children:"E = I  R"}),o.jsx("div",{children:"P = E  I"}),o.jsx("div",{children:"I = E  R"}),o.jsx("div",{children:"P = I  R"}),o.jsx("div",{children:"R = E  I"}),o.jsx("div",{children:"P = E  R"})]})]})}),fu={"4x1.25-round-octagon":{capacity:12.5,name:'4" x 1-1/4" Round/Octagon',type:"round-octagon"},"4x1.5-round-octagon":{capacity:15.5,name:'4" x 1-1/2" Round/Octagon',type:"round-octagon"},"4x2.125-round-octagon":{capacity:21.5,name:'4" x 2-1/8" Round/Octagon',type:"round-octagon"},"4x1.25-square":{capacity:18,name:'4" x 1-1/4" Square',type:"square"},"4x1.5-square":{capacity:21,name:'4" x 1-1/2" Square',type:"square"},"4x2.125-square":{capacity:30.3,name:'4" x 2-1/8" Square',type:"square"},"4-11/16x1.25-square":{capacity:25.5,name:'4-11/16" x 1-1/4" Square',type:"square"},"4-11/16x1.5-square":{capacity:29.5,name:'4-11/16" x 1-1/2" Square',type:"square"},"4-11/16x2.125-square":{capacity:42,name:'4-11/16" x 2-1/8" Square',type:"square"},"3x2x1.5-device":{capacity:7.5,name:'3" x 2" x 1-1/2" Device',type:"device"},"3x2x2-device":{capacity:10,name:'3" x 2" x 2" Device',type:"device"},"3x2x2.25-device":{capacity:10.5,name:'3" x 2" x 2-1/4" Device',type:"device"},"3x2x2.5-device":{capacity:12.5,name:'3" x 2" x 2-1/2" Device',type:"device"},"3x2x2.75-device":{capacity:14,name:'3" x 2" x 2-3/4" Device',type:"device"},"3x2x3.5-device":{capacity:18,name:'3" x 2" x 3-1/2" Device',type:"device"},"4x2.125x1.5-device":{capacity:10.3,name:'4" x 2-1/8" x 1-1/2" Device',type:"device"},"4x2.125x1.875-device":{capacity:13,name:'4" x 2-1/8" x 1-7/8" Device',type:"device"},"4x2.125x2.125-device":{capacity:14.5,name:'4" x 2-1/8" x 2-1/8" Device',type:"device"},"3.5x2x2.5-masonry":{capacity:14,name:'3-1/2" x 2" x 2-1/2" Masonry',type:"masonry"},"3.5x2x3.5-masonry":{capacity:21,name:'3-1/2" x 2" x 3-1/2" Masonry',type:"masonry"},"fs-1.25-single":{capacity:13.5,name:'FS Single Cover/Gang (1-1/4" min)',type:"fs-fd"},"fd-2.125-single":{capacity:18,name:'FD Single Cover/Gang (2-1/8" min)',type:"fs-fd"},"fs-1.25-multiple":{capacity:18,name:'FS Multiple Cover/Gang (1-1/4" min)',type:"fs-fd"},"fd-2.125-multiple":{capacity:24,name:'FD Multiple Cover/Gang (2-1/8" min)',type:"fs-fd"}},kN={18:1.5,16:1.75,14:2,12:2.25,10:2.5,8:3,6:5},IN=["18","16","14","12","10","8","6"],EN=r=>{var e;return((e=fu[r])==null?void 0:e.capacity)||0},jN=r=>{var e;return((e=fu[r])==null?void 0:e.name)||"Unknown Box"},Mb=r=>kN[r]||0,Gp={mainSection:"NEC 314.16 - Number of Conductors in Outlet, Device, and Junction Boxes",calculations:"NEC 314.16(B) - Box Fill Calculations",table:"NEC Table 314.16(B) - Volume Allowance Required per Conductor",rules:["Each conductor = volume from Table 314.16(B)","Each device (receptacle/switch) counts as 2 conductor volumes","All equipment grounding conductors combined count as 1 conductor volume","One or more cable clamps count as 1 conductor volume","Conductor size for devices/clamps/grounds is based on largest conductor entering the box"]},RN=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=pe.useState("4x1.5-square"),[s,l]=pe.useState([{size:"12",count:""}]),[u,h]=pe.useState({outlets:"",switches:"",clamps:"",groundWires:!1}),d={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},g=()=>{l([...s,{size:"12",count:""}])},b=O=>{s.length>1&&l(s.filter(($,F)=>F!==O))},_=(O,$,F)=>{const oe=[...s];oe[O][$]=F,l(oe)},N=(()=>{let O=0;const $=s.map(w=>{const B=parseInt(w.count)||0,M=Mb(w.size),q=M*B;return O+=q,{size:w.size,count:B,allowanceEach:M,subtotal:q}}),F=s.reduce((w,B)=>{if((parseInt(B.count)||0)>0){const q=parseInt(B.size.replace("/",""))||0,se=parseInt(w.replace("/",""))||0;return q<se?B.size:w}return w},"14"),oe=Mb(F),ce=parseInt(u.outlets)||0,D=parseInt(u.switches)||0,C=(ce+D)*2*oe;O+=C;const V=(parseInt(u.clamps)||0)>0?oe:0;O+=V;const I=u.groundWires?oe:0;return O+=I,{conductorDetails:$,deviceFill:C,clampFill:V,groundFill:I,totalFill:O,largestWireSize:F,deviceWireAllowance:oe}})(),E=EN(n),L=E>0?(N.totalFill/E*100).toFixed(1):0,k=N.totalFill>E;return pe.useImperativeHandle(t,()=>({exportPDF:()=>{const O={};s.forEach((C,S)=>{const V=parseInt(C.count)||0;V>0&&(O[`Conductor ${S+1}`]=`${V} ${C.size} AWG`)});const $={};N.conductorDetails.forEach((C,S)=>{C.count>0&&($[`${C.count} ${C.size} AWG`]=`${C.allowanceEach} cu.in. each = ${C.subtotal.toFixed(2)} cu.in. total`)});const F=parseInt(u.outlets)||0,oe=parseInt(u.switches)||0,ce=parseInt(u.clamps)||0,D={calculatorName:"Box Fill Calculator",inputs:{boxType:`${jN(n)} (${E} cu.in.)`,...O,receptaclesOutlets:F>0?`${F} (counts as ${F*2} conductors)`:"0",switches:oe>0?`${oe} (counts as ${oe*2} conductors)`:"0",cableClamps:ce>0?`${ce} (counts as 1 conductor volume)`:"0",equipmentGroundingConductors:u.groundWires?"Yes (counts as 1 conductor volume)":"No"},results:{boxCapacity:`${E} cu.in.`,calculatedFill:`${N.totalFill.toFixed(2)} cu.in.`,fillPercentage:`${L}%`,status:k?" OVERFILLED - Violates NEC 314.16":" Within NEC limits",deviceFill:N.deviceFill>0?`${N.deviceFill.toFixed(2)} cu.in.`:"N/A",clampFill:N.clampFill>0?`${N.clampFill.toFixed(2)} cu.in.`:"N/A",groundFill:N.groundFill>0?`${N.groundFill.toFixed(2)} cu.in.`:"N/A"},additionalInfo:{...$,largestWireSize:`${N.largestWireSize} AWG (used for device/clamp/ground allowance)`,deviceWireAllowance:`${N.deviceWireAllowance} cu.in. per conductor`},necReferences:[Gp.mainSection,Gp.calculations,Gp.table,...Gp.rules,k?"WARNING: This configuration exceeds the maximum allowable box fill":null].filter(Boolean)};un(D)}})),o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Box Selection"}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Box Type"}),o.jsxs("select",{value:n,onChange:O=>i(O.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:[o.jsx("optgroup",{label:"Device Boxes (Single Gang)",children:Object.entries(fu).filter(([O,$])=>$.type==="device-single").map(([O,$])=>o.jsxs("option",{value:O,children:[$.name," - ",$.capacity," cu.in."]},O))}),o.jsx("optgroup",{label:"Device Boxes (Multi-Gang)",children:Object.entries(fu).filter(([O,$])=>$.type==="device-multi").map(([O,$])=>o.jsxs("option",{value:O,children:[$.name," - ",$.capacity," cu.in."]},O))}),o.jsx("optgroup",{label:"Square Boxes",children:Object.entries(fu).filter(([O,$])=>$.type==="square").map(([O,$])=>o.jsxs("option",{value:O,children:[$.name," - ",$.capacity," cu.in."]},O))}),o.jsx("optgroup",{label:"Round/Octagon Boxes",children:Object.entries(fu).filter(([O,$])=>$.type==="round-octagon").map(([O,$])=>o.jsxs("option",{value:O,children:[$.name," - ",$.capacity," cu.in."]},O))}),o.jsx("optgroup",{label:"Masonry Boxes",children:Object.entries(fu).filter(([O,$])=>$.type==="masonry").map(([O,$])=>o.jsxs("option",{value:O,children:[$.name," - ",$.capacity," cu.in."]},O))})]})]})]}),o.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Conductors"}),s.map((O,$)=>o.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${d.cardBorder}`},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[o.jsxs("h4",{style:{fontWeight:"600",color:d.labelText,margin:0,fontSize:"0.875rem"},children:["Wire Size ",$+1]}),s.length>1&&o.jsx("button",{onClick:()=>b($),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:o.jsx(Cc,{size:20})})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[o.jsx("select",{value:O.size,onChange:F=>_($,"size",F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:IN.map(F=>o.jsxs("option",{value:F,children:[F," AWG"]},F))}),o.jsx("input",{type:"number",value:O.count,onChange:F=>_($,"count",F.target.value),placeholder:"Quantity",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}})]})]},$)),o.jsxs("button",{onClick:g,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(ga,{size:16}),"Add Wire Size"]}),o.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.5rem",margin:"0.5rem 0 0 0"},children:"Count all insulated conductors entering, leaving, or passing through the box"})]}),o.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Devices & Other Items"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Receptacles/Outlets"}),o.jsx("input",{type:"number",value:u.outlets,onChange:O=>h({...u,outlets:O.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}}),o.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"Each device counts as 2 conductors"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Switches"}),o.jsx("input",{type:"number",value:u.switches,onChange:O=>h({...u,switches:O.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}}),o.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"Each device counts as 2 conductors"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Cable Clamps"}),o.jsx("input",{type:"number",value:u.clamps,onChange:O=>h({...u,clamps:O.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}}),o.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"One or more = 1 conductor volume"})]})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:u.groundWires,onChange:O=>h({...u,groundWires:O.target.checked}),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),o.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:d.labelText},children:"Equipment Grounding Conductors Present"})]}),o.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginLeft:"2rem",margin:"0.25rem 0 0 2rem"},children:"All grounds combined count as 1 conductor volume"})]}),o.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Box Capacity"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:E}),o.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"cu.in."})]}),o.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Calculated Fill"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:N.totalFill.toFixed(2)}),o.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"cu.in."})]}),o.jsxs("div",{style:{background:k?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:k?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Fill Percentage"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:k?"#dc2626":"#1e40af"},children:[L,"%"]}),o.jsx("div",{style:{fontSize:"0.75rem",color:k?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:k?"OVERFILLED":"Within Limits"})]})]}),N.conductorDetails.length>0&&N.conductorDetails.some(O=>O.count>0)&&o.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${d.cardBorder}`},children:[o.jsx("strong",{style:{color:d.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Conductor Breakdown:"}),N.conductorDetails.map((O,$)=>O.count>0&&o.jsxs("div",{style:{marginTop:$>0?"0.75rem":0,paddingTop:$>0?"0.75rem":0,borderTop:$>0?`1px solid ${d.cardBorder}`:"none",fontSize:"0.875rem",color:d.labelText},children:[o.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:[O.count," ",O.size," AWG"]}),o.jsxs("div",{style:{fontSize:"0.8125rem",color:d.subtleText},children:[O.allowanceEach," cu.in. each = ",O.subtotal.toFixed(2)," cu.in. total"]})]},$))]}),!k&&N.totalFill>0?o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Box fill is within NEC limits"}),N.deviceFill>0&&o.jsxs("div",{children:["Devices: ",N.deviceFill.toFixed(2)," cu.in."]}),N.clampFill>0&&o.jsxs("div",{children:["Clamps: ",N.clampFill.toFixed(2)," cu.in."]}),N.groundFill>0&&o.jsxs("div",{children:["Grounds: ",N.groundFill.toFixed(2)," cu.in."]})]})]})}):k?o.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",fontSize:"0.9375rem"},children:"BOX OVERFILLED - Violates NEC 314.16"}),o.jsx("div",{style:{marginBottom:"0.5rem"},children:"Reduce number of devices or use larger box"}),N.deviceFill>0&&o.jsxs("div",{children:["Devices: ",N.deviceFill.toFixed(2)," cu.in."]}),N.clampFill>0&&o.jsxs("div",{children:["Clamps: ",N.clampFill.toFixed(2)," cu.in."]}),N.groundFill>0&&o.jsxs("div",{children:["Grounds: ",N.groundFill.toFixed(2)," cu.in."]})]})]})}):null]}),o.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${d.cardBorder}`,fontSize:"0.8125rem",color:d.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:d.cardText},children:"NEC 314.16 Requirements:"}),"Conductor = table volume  Device = 2 volumes  All grounds = 1 volume  Clamps = 1 volume"]})]})}),Db=[{value:"straight",label:"Straight Pull"},{value:"angle",label:"Angle Pull (L-shaped)"},{value:"u-pull",label:"U-Pull (Same Side)"}],PN=["0.5","0.75","1","1.25","1.5","2","2.5","3","3.5","4","5","6"],NN={"0.5":'1/2"',"0.75":'3/4"',1:'1"',"1.25":'1-1/4"',"1.5":'1-1/2"',2:'2"',"2.5":'2-1/2"',3:'3"',"3.5":'3-1/2"',4:'4"',5:'5"',6:'6"'},eh={straight:{length:8},angle:{distance:6},uPull:{distance:6}},Zg=r=>NN[r]||r,l2=r=>parseFloat(r),BN=r=>{const e=l2(r),t=e*eh.straight.length;return{minLength:t,formula:`${e}"  ${eh.straight.length} = ${t}"`,necReference:"NEC 314.28(A)(1)"}},LN=r=>{if(!r||r.length===0)return null;const e=r.map(s=>l2(s.size)),t=Math.max(...e),n=e.reduce((s,l)=>s+l,0)-t,i=t*eh.angle.distance+n;return{minDistance:i,largestRaceway:t,sumOfOthers:n,formula:`(${t}"  ${eh.angle.distance}) + ${n}" = ${i}"`,necReference:"NEC 314.28(A)(2)"}},FN=r=>{const e=l2(r),t=e*eh.uPull.distance;return{minDistance:t,formula:`${e}"  ${eh.uPull.distance} = ${t}"`,necReference:"NEC 314.28(A)(2)"}},e1={mainSection:"NEC 314.28 - Pull and Junction Boxes and Conduit Bodies",conductorSize:"Applies to boxes containing conductors 4 AWG or larger",rules:["Straight Pull: Length = 8  trade size of largest raceway","Angle/U Pull: Distance = 6  largest raceway + sum of other raceways on same wall","Rows of conduits: Each row calculated separately","Box depth: Must accommodate the largest conduit locknut and bushing","These are minimum dimensions - larger boxes may be used"]},zN=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=pe.useState("straight"),[s,l]=pe.useState([{size:"1"}]),u={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},h=()=>{l([...s,{size:"1"}])},d=v=>{s.length>1&&l(s.filter((N,E)=>E!==v))},g=(v,N)=>{const E=[...s];E[v].size=N,l(E)},_=(()=>{const N=Math.max(...s.map(E=>parseFloat(E.size))).toString();if(n==="straight")return BN(N);if(n==="angle")return LN(s);if(n==="u-pull")return FN(N)})();return pe.useImperativeHandle(t,()=>({exportPDF:()=>{var L;const v=((L=Db.find(k=>k.value===n))==null?void 0:L.label)||n,N=s.map((k,O)=>`Raceway ${O+1}: ${Zg(k.size)}`).join(", "),E={calculatorName:"Pull Box Calculator",inputs:{pullType:v,numberOfRaceways:s.length,raceways:N,largestRaceway:_?Zg(Math.max(...s.map(k=>k.size)).toString()):"N/A"},results:{minimumDimension:_?`${_.minLength||_.minDistance}" inches`:"N/A",formula:(_==null?void 0:_.formula)||"N/A",necReference:(_==null?void 0:_.necReference)||"N/A"},additionalInfo:{calculation:(_==null?void 0:_.formula)||"N/A",note:"These are minimum dimensions per NEC. Larger boxes may be used.",conductorRequirement:"Applies to conductors 4 AWG or larger"},necReferences:[e1.mainSection,_==null?void 0:_.necReference,e1.conductorSize,...e1.rules].filter(Boolean)};un(E)}})),o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${u.cardBorder}`,paddingBottom:"0.5rem"},children:"Pull Box Configuration"}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:u.labelText,marginBottom:"0.5rem"},children:"Pull Type"}),o.jsx("select",{value:n,onChange:v=>i(v.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"},children:Db.map(v=>o.jsx("option",{value:v.value,children:v.label},v.value))})]}),o.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#dbeafe",border:"1px solid #93c5fd",borderRadius:"8px",fontSize:"0.8125rem",color:"#1e40af",display:"flex",gap:"0.5rem"},children:[o.jsx(xs,{size:16,style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{children:[n==="straight"&&"Straight Pull: Conduits enter and exit on opposite sides",n==="angle"&&"Angle Pull: Conduits enter on one side and exit on adjacent side (L-shaped)",n==="u-pull"&&"U-Pull: Conduits enter and exit on the same side"]})]})]}),o.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${u.cardBorder}`,paddingBottom:"0.5rem"},children:[n==="straight"&&"Raceway Size",n==="angle"&&"Raceways on Same Wall",n==="u-pull"&&"Raceway Size"]}),s.map((v,N)=>o.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${u.cardBorder}`},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[o.jsx("h4",{style:{fontWeight:"600",color:u.labelText,margin:0,fontSize:"0.875rem"},children:n==="angle"?N===0?"Largest Raceway":`Other Raceway ${N}`:"Largest Raceway"}),n==="angle"&&N>0&&o.jsx("button",{onClick:()=>d(N),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:o.jsx(Cc,{size:20})})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:u.labelText,marginBottom:"0.5rem"},children:"Trade Size"}),o.jsx("select",{value:v.size,onChange:E=>g(N,E.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"},children:PN.map(E=>o.jsx("option",{value:E,children:Zg(E)},E))})]})]},N)),n==="angle"&&o.jsxs("button",{onClick:h,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(ga,{size:16}),"Add Other Raceway"]}),o.jsxs("p",{style:{fontSize:"0.75rem",color:u.subtleText,marginTop:"0.5rem",margin:"0.5rem 0 0 0"},children:[n==="straight"&&"Enter the largest raceway entering the box",n==="angle"&&"Enter largest raceway first, then add any other raceways entering on the same wall",n==="u-pull"&&"Enter the largest raceway entering and exiting on the same side"]})]}),_&&o.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem"},children:"Minimum Box Dimensions"}),o.jsxs("div",{style:{background:u.sectionBg,padding:"1.5rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[o.jsxs("div",{style:{fontSize:"0.875rem",color:u.labelText,marginBottom:"0.5rem"},children:["Minimum ",n==="straight"?"Length":"Distance"]}),o.jsxs("div",{style:{fontSize:"3rem",fontWeight:"700",color:"#3b82f6",lineHeight:1},children:[(_.minLength||_.minDistance).toFixed(1),'"']}),o.jsx("div",{style:{fontSize:"0.875rem",color:u.subtleText,marginTop:"0.5rem"},children:_.formula})]}),o.jsx("div",{style:{background:"#dbeafe",border:"1px solid #93c5fd",borderRadius:"8px",padding:"1rem"},children:o.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"NEC Requirement Met"}),o.jsxs("div",{style:{marginBottom:"0.5rem"},children:["Reference: ",_.necReference]}),o.jsx("div",{style:{fontSize:"0.8125rem"},children:"These are minimum dimensions. Larger boxes may be used for ease of installation."})]})}),n==="angle"&&_.largestRaceway&&o.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",marginTop:"1rem",border:`1px solid ${u.cardBorder}`},children:[o.jsx("strong",{style:{color:u.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Angle Pull Calculation:"}),o.jsxs("div",{style:{fontSize:"0.8125rem",color:u.labelText,lineHeight:"1.8"},children:[o.jsxs("div",{style:{marginBottom:"0.5rem"},children:[o.jsx("strong",{children:"Step 1:"})," Largest raceway  6"]}),o.jsxs("div",{style:{paddingLeft:"1rem",color:u.subtleText},children:[_.largestRaceway,'"  6 = ',(_.largestRaceway*6).toFixed(1),'"']}),o.jsxs("div",{style:{marginTop:"0.75rem",marginBottom:"0.5rem"},children:[o.jsx("strong",{children:"Step 2:"})," Add other raceways on same wall"]}),o.jsx("div",{style:{paddingLeft:"1rem",color:u.subtleText},children:_.sumOfOthers>0?`Sum of others = ${_.sumOfOthers.toFixed(1)}"`:"No other raceways"}),o.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:`1px solid ${u.cardBorder}`,fontWeight:"600",color:"#3b82f6"},children:["Total: ",(_.largestRaceway*6).toFixed(1),'" + ',_.sumOfOthers.toFixed(1),'" = ',_.minDistance.toFixed(1),'"']})]})]})]}),o.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${u.cardBorder}`,fontSize:"0.8125rem",color:u.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:u.cardText},children:"NEC 314.28 Requirements:"}),o.jsx("div",{style:{lineHeight:"1.6"},children:"Straight: 8 largest  Angle/U: 6 largest + others  For conductors 4 AWG or larger"})]})]})}),VN=[{value:"emt",label:"EMT - Electrical Metallic Tubing"},{value:"ent",label:"ENT - Electrical Nonmetallic Tubing"},{value:"fmc",label:"FMC - Flexible Metal Conduit"},{value:"imc",label:"IMC - Intermediate Metal Conduit"},{value:"lfnc-b",label:"LFNC-B - Liquidtight Flexible Nonmetallic Conduit (Type B)"},{value:"lfnc-a",label:"LFNC-A - Liquidtight Flexible Nonmetallic Conduit (Type A)"},{value:"lfmc",label:"LFMC - Liquidtight Flexible Metal Conduit"},{value:"rmc",label:"RMC - Rigid Metal Conduit"},{value:"pvc-40",label:"PVC Schedule 40"},{value:"pvc-80",label:"PVC Schedule 80"},{value:"pvc-a",label:"PVC Type A"},{value:"pvc-eb",label:"PVC Type EB"}],ON={"0.375":'3/8"',"0.5":'1/2"',"0.75":'3/4"',1:'1"',"1.25":'1-1/4"',"1.5":'1-1/2"',2:'2"',"2.5":'2-1/2"',3:'3"',"3.5":'3-1/2"',4:'4"',5:'5"',6:'6"'},V4={"emt-0.5":{name:'1/2" EMT',area:.304},"emt-0.75":{name:'3/4" EMT',area:.533},"emt-1":{name:'1" EMT',area:.864},"emt-1.25":{name:'1-1/4" EMT',area:1.496},"emt-1.5":{name:'1-1/2" EMT',area:2.036},"emt-2":{name:'2" EMT',area:3.356},"emt-2.5":{name:'2-1/2" EMT',area:5.858},"emt-3":{name:'3" EMT',area:8.846},"emt-3.5":{name:'3-1/2" EMT',area:11.545},"emt-4":{name:'4" EMT',area:14.753},"ent-0.5":{name:'1/2" ENT',area:.246},"ent-0.75":{name:'3/4" ENT',area:.454},"ent-1":{name:'1" ENT',area:.785},"ent-1.25":{name:'1-1/4" ENT',area:1.41},"ent-1.5":{name:'1-1/2" ENT',area:1.936},"ent-2":{name:'2" ENT',area:3.205},"fmc-0.375":{name:'3/8" FMC',area:.116},"fmc-0.5":{name:'1/2" FMC',area:.317},"fmc-0.75":{name:'3/4" FMC',area:.533},"fmc-1":{name:'1" FMC',area:.817},"fmc-1.25":{name:'1-1/4" FMC',area:1.277},"fmc-1.5":{name:'1-1/2" FMC',area:1.858},"fmc-2":{name:'2" FMC',area:3.269},"fmc-2.5":{name:'2-1/2" FMC',area:4.909},"fmc-3":{name:'3" FMC',area:7.069},"fmc-3.5":{name:'3-1/2" FMC',area:9.621},"fmc-4":{name:'4" FMC',area:12.566},"imc-0.5":{name:'1/2" IMC',area:.342},"imc-0.75":{name:'3/4" IMC',area:.586},"imc-1":{name:'1" IMC',area:.959},"imc-1.25":{name:'1-1/4" IMC',area:1.647},"imc-1.5":{name:'1-1/2" IMC',area:2.225},"imc-2":{name:'2" IMC',area:3.63},"imc-2.5":{name:'2-1/2" IMC',area:5.135},"imc-3":{name:'3" IMC',area:7.922},"imc-3.5":{name:'3-1/2" IMC',area:10.584},"imc-4":{name:'4" IMC',area:13.631},"lfnc-b-0.375":{name:'3/8" LFNC-B',area:.192},"lfnc-b-0.5":{name:'1/2" LFNC-B',area:.314},"lfnc-b-0.75":{name:'3/4" LFNC-B',area:.541},"lfnc-b-1":{name:'1" LFNC-B',area:.873},"lfnc-b-1.25":{name:'1-1/4" LFNC-B',area:1.528},"lfnc-b-1.5":{name:'1-1/2" LFNC-B',area:1.981},"lfnc-b-2":{name:'2" LFNC-B',area:3.246},"lfnc-a-0.375":{name:'3/8" LFNC-A',area:.192},"lfnc-a-0.5":{name:'1/2" LFNC-A',area:.312},"lfnc-a-0.75":{name:'3/4" LFNC-A',area:.535},"lfnc-a-1":{name:'1" LFNC-A',area:.854},"lfnc-a-1.25":{name:'1-1/4" LFNC-A',area:1.502},"lfnc-a-1.5":{name:'1-1/2" LFNC-A',area:2.018},"lfnc-a-2":{name:'2" LFNC-A',area:3.343},"lfmc-0.375":{name:'3/8" LFMC',area:.192},"lfmc-0.5":{name:'1/2" LFMC',area:.314},"lfmc-0.75":{name:'3/4" LFMC',area:.541},"lfmc-1":{name:'1" LFMC',area:.873},"lfmc-1.25":{name:'1-1/4" LFMC',area:1.528},"lfmc-1.5":{name:'1-1/2" LFMC',area:1.981},"lfmc-2":{name:'2" LFMC',area:3.246},"lfmc-2.5":{name:'2-1/2" LFMC',area:4.881},"lfmc-3":{name:'3" LFMC',area:7.475},"lfmc-3.5":{name:'3-1/2" LFMC',area:9.731},"lfmc-4":{name:'4" LFMC',area:12.692},"rmc-0.5":{name:'1/2" RMC',area:.314},"rmc-0.75":{name:'3/4" RMC',area:.549},"rmc-1":{name:'1" RMC',area:.887},"rmc-1.25":{name:'1-1/4" RMC',area:1.526},"rmc-1.5":{name:'1-1/2" RMC',area:2.071},"rmc-2":{name:'2" RMC',area:3.408},"rmc-2.5":{name:'2-1/2" RMC',area:4.866},"rmc-3":{name:'3" RMC',area:7.499},"rmc-3.5":{name:'3-1/2" RMC',area:10.01},"rmc-4":{name:'4" RMC',area:12.882},"rmc-5":{name:'5" RMC',area:20.212},"rmc-6":{name:'6" RMC',area:29.158},"pvc-40-0.5":{name:'1/2" PVC Sch 40',area:.285},"pvc-40-0.75":{name:'3/4" PVC Sch 40',area:.508},"pvc-40-1":{name:'1" PVC Sch 40',area:.832},"pvc-40-1.25":{name:'1-1/4" PVC Sch 40',area:1.453},"pvc-40-1.5":{name:'1-1/2" PVC Sch 40',area:1.986},"pvc-40-2":{name:'2" PVC Sch 40',area:3.291},"pvc-40-2.5":{name:'2-1/2" PVC Sch 40',area:4.695},"pvc-40-3":{name:'3" PVC Sch 40',area:7.268},"pvc-40-3.5":{name:'3-1/2" PVC Sch 40',area:9.737},"pvc-40-4":{name:'4" PVC Sch 40',area:12.554},"pvc-40-5":{name:'5" PVC Sch 40',area:19.761},"pvc-40-6":{name:'6" PVC Sch 40',area:28.567},"pvc-80-0.5":{name:'1/2" PVC Sch 80',area:.217},"pvc-80-0.75":{name:'3/4" PVC Sch 80',area:.409},"pvc-80-1":{name:'1" PVC Sch 80',area:.688},"pvc-80-1.25":{name:'1-1/4" PVC Sch 80',area:1.237},"pvc-80-1.5":{name:'1-1/2" PVC Sch 80',area:1.711},"pvc-80-2":{name:'2" PVC Sch 80',area:2.874},"pvc-80-2.5":{name:'2-1/2" PVC Sch 80',area:4.119},"pvc-80-3":{name:'3" PVC Sch 80',area:6.442},"pvc-80-3.5":{name:'3-1/2" PVC Sch 80',area:8.688},"pvc-80-4":{name:'4" PVC Sch 80',area:11.258},"pvc-80-5":{name:'5" PVC Sch 80',area:17.855},"pvc-80-6":{name:'6" PVC Sch 80',area:25.598},"pvc-a-0.5":{name:'1/2" PVC Type A',area:.385},"pvc-a-0.75":{name:'3/4" PVC Type A',area:.65},"pvc-a-1":{name:'1" PVC Type A',area:1.084},"pvc-a-1.25":{name:'1-1/4" PVC Type A',area:1.767},"pvc-a-1.5":{name:'1-1/2" PVC Type A',area:2.324},"pvc-a-2":{name:'2" PVC Type A',area:3.647},"pvc-a-2.5":{name:'2-1/2" PVC Type A',area:5.453},"pvc-a-3":{name:'3" PVC Type A',area:8.194},"pvc-a-3.5":{name:'3-1/2" PVC Type A',area:10.694},"pvc-a-4":{name:'4" PVC Type A',area:13.723},"pvc-eb-2":{name:'2" PVC Type EB',area:3.874},"pvc-eb-3":{name:'3" PVC Type EB',area:8.709},"pvc-eb-3.5":{name:'3-1/2" PVC Type EB',area:11.365},"pvc-eb-4":{name:'4" PVC Type EB',area:14.448},"pvc-eb-5":{name:'5" PVC Type EB',area:22.195},"pvc-eb-6":{name:'6" PVC Type EB',area:31.53}},Wb=r=>{const e=r+"-";return Object.keys(V4).filter(n=>n.startsWith(e)).map(n=>n.replace(e,"")).sort((n,i)=>parseFloat(n)-parseFloat(i))},MN=(r,e)=>{const t=`${r}-${e}`;return V4[t]||null},DN=[{value:"thhn",label:"THHN/THWN-2"},{value:"thw",label:"THW"},{value:"thhw",label:"THHW"},{value:"xhhw",label:"XHHW-2"},{value:"xhh",label:"XHH"}],WN=["18","16","14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750","800","900","1000","1250","1500","1750","2000"],Q1={thhn:{14:.0097,12:.0133,10:.0211,8:.0366,6:.0507,4:.0824,3:.0973,2:.1158,1:.1562,"1/0":.1855,"2/0":.2223,"3/0":.2679,"4/0":.3237,250:.397,300:.4608,350:.5242,400:.5863,500:.7073,600:.8676,700:.9887,750:1.0496,800:1.1085,900:1.2311,1e3:1.3478},thwn:{14:.0097,12:.0133,10:.0211,8:.0366,6:.0507,4:.0824,3:.0973,2:.1158,1:.1562,"1/0":.1855,"2/0":.2223,"3/0":.2679,"4/0":.3237,250:.397,300:.4608,350:.5242,400:.5863,500:.7073,600:.8676,700:.9887,750:1.0496,800:1.1085,900:1.2311,1e3:1.3478},thw:{14:.0139,12:.0181,10:.0243,8:.0437,6:.0726,4:.0973,3:.1134,2:.1333,1:.1901,"1/0":.2223,"2/0":.2624,"3/0":.3117,"4/0":.3718,250:.4596,300:.5281,350:.5958,400:.6619,500:.7901,600:.9729,700:1.101,750:1.1652,800:1.2272,900:1.3561,1e3:1.4784,1250:1.8602,1500:2.1695,1750:2.4773,2e3:2.7818},thhw:{14:.0139,12:.0181,10:.0243,8:.0437,6:.0726,4:.0973,3:.1134,2:.1333,1:.1901,"1/0":.2223,"2/0":.2624,"3/0":.3117,"4/0":.3718,250:.4596,300:.5281,350:.5958,400:.6619,500:.7901,600:.9729,700:1.101,750:1.1652,800:1.2272,900:1.3561,1e3:1.4784,1250:1.8602,1500:2.1695,1750:2.4773,2e3:2.7818},xhhw:{14:.0139,12:.0181,10:.0243,8:.0437,6:.059,4:.0814,3:.0962,2:.1146,1:.1534,"1/0":.1825,"2/0":.219,"3/0":.2642,"4/0":.3197,250:.3904,300:.4536,350:.5166,400:.5782,500:.6984,600:.8709,700:.9923,750:1.0532,800:1.1122,900:1.2351,1e3:1.3519,1250:1.718,1500:2.0157,1750:2.3127,2e3:2.6073},xhh:{14:.0139,12:.0181,10:.0243,8:.0437,6:.059,4:.0814,3:.0962,2:.1146,1:.1534,"1/0":.1825,"2/0":.219,"3/0":.2642,"4/0":.3197,250:.3904,300:.4536,350:.5166,400:.5782,500:.6984,600:.8709,700:.9923,750:1.0532,800:1.1122,900:1.2351,1e3:1.3519,1250:1.718,1500:2.0157,1750:2.3127,2e3:2.6073}},$N=(r,e)=>{var t;return((t=Q1[r])==null?void 0:t[e])||0},UN=r=>Q1[r]?WN.filter(e=>Q1[r][e]!==void 0):[],qN=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=pe.useState("emt"),[s,l]=pe.useState("0.5"),[u,h]=pe.useState([{wireType:"thwn",size:"12",count:""}]),d={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},g=Wb(n),b=k=>{i(k);const O=Wb(k);O.includes(s)||l(O[0]||"0.5")},_=()=>{h([...u,{wireType:"thwn",size:"12",count:""}])},v=k=>{u.length>1&&h(u.filter((O,$)=>$!==k))},N=(k,O,$)=>{const F=[...u];F[k][O]=$,h(F)},E=()=>{const k=MN(n,s);if(!k)return null;const O=k.area;let $=0,F=0;const oe=u.map(C=>{const S=parseInt(C.count)||0,V=$N(C.wireType,C.size),I=V*S;return $+=I,F+=S,{wireType:C.wireType,size:C.size,count:S,areaEach:V,subtotal:I}}),ce=($/O*100).toFixed(1);let D=40;return F===1?D=53:F===2&&(D=31),{conduitInfo:k,conduitArea:O.toFixed(3),totalWireArea:$.toFixed(3),fillPercentage:parseFloat(ce),maxFill:D,totalWireCount:F,conductorDetails:oe,isOverfilled:parseFloat(ce)>D}};pe.useImperativeHandle(t,()=>({exportPDF:()=>{const k=E();if(k.totalWireCount===0){alert("Please enter at least one conductor with a quantity before exporting");return}const O=k.conductorDetails.filter(F=>F.count>0).map(F=>`${F.count} ${F.size} AWG ${F.wireType.toUpperCase()}-2: ${F.areaEach.toFixed(4)} sq.in. each = ${F.subtotal.toFixed(4)} sq.in. total`).join("; "),$={calculatorName:"Conduit Fill Calculator",inputs:{conduitType:k.conduitInfo.name,totalConductors:k.totalWireCount},results:{conduitArea:`${k.conduitArea} sq.in.`,totalWireArea:`${k.totalWireArea} sq.in.`,fillPercentage:`${k.fillPercentage}%`,maximumAllowedFill:`${k.maxFill}%`,complianceStatus:k.isOverfilled?"OVERFILLED - Violates NEC":"Within NEC Limits"},additionalInfo:{conductorBreakdown:O,fillRule:k.totalWireCount===1?"1 conductor: 53% max fill":k.totalWireCount===2?"2 conductors: 31% max fill":"3+ conductors: 40% max fill",recommendation:k.isOverfilled?"Reduce number of conductors or use larger conduit":"Installation meets NEC requirements"},necReferences:["NEC Chapter 9, Table 1 - Percent of Cross Section of Conduit and Tubing for Conductors","NEC Chapter 9, Table 4 - Dimensions and Percent Area of Conduit and Tubing","NEC Chapter 9, Table 5 - Dimensions of Insulated Conductors and Fixture Wires","1 conductor: 53% max fill","2 conductors: 31% max fill","3+ conductors: 40% max fill","Nipples (24 inches or less): 60% max fill"]};un($)}}));const L=E();return o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Conduit Selection"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Conduit Type"}),o.jsx("select",{value:n,onChange:k=>b(k.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:VN.map(k=>o.jsx("option",{value:k.value,children:k.label},k.value))})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Conduit Size"}),o.jsx("select",{value:s,onChange:k=>l(k.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:g.map(k=>o.jsx("option",{value:k,children:ON[k]||k},k))})]})]})]}),o.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Conductors"}),u.map((k,O)=>o.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${d.cardBorder}`},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[o.jsxs("h4",{style:{fontWeight:"600",color:d.labelText,margin:0,fontSize:"0.875rem"},children:["Conductor ",O+1]}),u.length>1&&o.jsx("button",{onClick:()=>v(O),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:o.jsx(Cc,{size:20})})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"0.75rem"},children:[o.jsx("select",{value:k.wireType,onChange:$=>N(O,"wireType",$.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:DN.map($=>o.jsx("option",{value:$.value,children:$.label},$.value))}),o.jsx("select",{value:k.size,onChange:$=>N(O,"size",$.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:UN(k.wireType).map($=>{const oe=!$.includes("/")&&parseInt($)>=250?"kcmil":"AWG";return o.jsxs("option",{value:$,children:[$," ",oe]},$)})}),o.jsx("input",{type:"number",value:k.count,onChange:$=>N(O,"count",$.target.value),placeholder:"Quantity",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}})]})]},O)),o.jsxs("button",{onClick:_,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(ga,{size:16}),"Add Conductor"]})]}),L&&o.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Conduit Area"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:L.conduitArea}),o.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"sq.in."})]}),o.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Wire Area"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:L.totalWireArea}),o.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"sq.in."})]}),o.jsxs("div",{style:{background:L.isOverfilled?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:L.isOverfilled?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Fill Percentage"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:L.isOverfilled?"#dc2626":"#1e40af"},children:[L.fillPercentage,"%"]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:L.isOverfilled?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:["Max: ",L.maxFill,"%"]})]})]}),L.conductorDetails.length>0&&L.totalWireCount>0&&o.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${d.cardBorder}`},children:[o.jsx("strong",{style:{color:d.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Conductor Breakdown:"}),L.conductorDetails.map((k,O)=>k.count>0&&o.jsxs("div",{style:{marginTop:O>0?"0.75rem":0,paddingTop:O>0?"0.75rem":0,borderTop:O>0?`1px solid ${d.cardBorder}`:"none",fontSize:"0.875rem",color:d.labelText},children:[o.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:[k.count," ",k.size," ",!k.size.includes("/")&&parseInt(k.size)>=250?"kcmil":"AWG"," ",k.wireType.toUpperCase(),"-2"]}),o.jsxs("div",{style:{fontSize:"0.8125rem",color:d.subtleText},children:[k.areaEach.toFixed(4)," sq.in. each = ",k.subtotal.toFixed(4)," sq.in. total"]})]},O))]}),!L.isOverfilled&&L.totalWireCount>0?o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Conduit fill is within NEC limits"}),o.jsxs("div",{children:["Total conductors: ",L.totalWireCount]})]})]})}):L.isOverfilled?o.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",fontSize:"0.9375rem"},children:"CONDUIT OVERFILLED - Violates NEC Chapter 9"}),o.jsx("div",{children:"Reduce number of conductors or use larger conduit"})]})]})}):null]}),o.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${d.cardBorder}`,fontSize:"0.8125rem",color:d.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:d.cardText},children:"NEC Chapter 9, Table 1:"}),'1 conductor: 53%  2 conductors: 31%  3+ conductors: 40%  Nipples (<24"): 60%']})]})}),HN=[{value:"copper",label:"Copper"},{value:"aluminum",label:"Aluminum"}],GN=[{value:"60C",label:"60C (140F)"},{value:"75C",label:"75C (167F)"},{value:"90C",label:"90C (194F)"}],KN=[{value:"18",label:"18 AWG"},{value:"16",label:"16 AWG"},{value:"14",label:"14 AWG"},{value:"12",label:"12 AWG"},{value:"10",label:"10 AWG"},{value:"8",label:"8 AWG"},{value:"6",label:"6 AWG"},{value:"4",label:"4 AWG"},{value:"3",label:"3 AWG"},{value:"2",label:"2 AWG"},{value:"1",label:"1 AWG"},{value:"1/0",label:"1/0 AWG"},{value:"2/0",label:"2/0 AWG"},{value:"3/0",label:"3/0 AWG"},{value:"4/0",label:"4/0 AWG"},{value:"250",label:"250 kcmil"},{value:"300",label:"300 kcmil"},{value:"350",label:"350 kcmil"},{value:"400",label:"400 kcmil"},{value:"500",label:"500 kcmil"},{value:"600",label:"600 kcmil"},{value:"700",label:"700 kcmil"},{value:"750",label:"750 kcmil"},{value:"800",label:"800 kcmil"},{value:"900",label:"900 kcmil"},{value:"1000",label:"1000 kcmil"},{value:"1250",label:"1250 kcmil"},{value:"1500",label:"1500 kcmil"},{value:"1750",label:"1750 kcmil"},{value:"2000",label:"2000 kcmil"}],JN=[{value:"10",label:"10C (50F)"},{value:"15",label:"15C (59F)"},{value:"20",label:"20C (68F)"},{value:"25",label:"25C (77F)"},{value:"30",label:"30C (86F) - Standard"},{value:"35",label:"35C (95F)"},{value:"40",label:"40C (104F)"},{value:"45",label:"45C (113F)"},{value:"50",label:"50C (122F)"}],YN={copper:{"60C":{18:0,16:0,14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:350,700:385,750:400,800:410,900:435,1e3:455,1250:495,1500:525,1750:545,2e3:555},"75C":{18:0,16:0,14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,700:460,750:475,800:490,900:520,1e3:545,1250:590,1500:625,1750:650,2e3:665},"90C":{18:14,16:18,14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535,800:555,900:585,1e3:615,1250:665,1500:705,1750:735,2e3:750}},aluminum:{"60C":{18:0,16:0,14:0,12:15,10:25,8:30,6:40,4:55,3:65,2:75,1:85,"1/0":100,"2/0":115,"3/0":130,"4/0":150,250:170,300:195,350:210,400:225,500:260,600:285,700:310,750:320,800:330,900:355,1e3:375,1250:405,1500:435,1750:455,2e3:470},"75C":{18:0,16:0,14:0,12:20,10:30,8:40,6:50,4:65,3:75,2:90,1:100,"1/0":120,"2/0":135,"3/0":155,"4/0":180,250:205,300:230,350:250,400:270,500:310,600:340,700:375,750:385,800:395,900:425,1e3:445,1250:485,1500:520,1750:545,2e3:560},"90C":{18:0,16:0,14:0,12:25,10:35,8:45,6:55,4:75,3:85,2:100,1:115,"1/0":135,"2/0":150,"3/0":175,"4/0":205,250:230,300:260,350:280,400:305,500:350,600:385,700:420,750:435,800:445,900:480,1e3:500,1250:545,1500:585,1750:615,2e3:630}}},QN={"60C":{10:1.29,15:1.2,20:1.11,25:1.05,30:1,35:.94,40:.88,45:.82,50:.75,55:.67,60:.58,65:.47,70:.33},"75C":{10:1.2,15:1.15,20:1.11,25:1.05,30:1,35:.94,40:.88,45:.82,50:.75,55:.67,60:.58,65:.47,70:.33,75:0},"90C":{10:1.15,15:1.12,20:1.08,25:1.04,30:1,35:.96,40:.91,45:.87,50:.82,55:.76,60:.71,65:.65,70:.58,75:.5,80:.41,85:.29,90:0}},XN={copper:{14:15,12:20,10:30},aluminum:{12:15,10:25}},ZN=(r,e,t)=>{var n,i;return((i=(n=YN[r])==null?void 0:n[e])==null?void 0:i[t])||0},eB=(r,e)=>{var t;return((t=QN[r])==null?void 0:t[e])||1},tB=r=>{const e=parseInt(r);return e<=3?1:e<=6?.8:e<=9?.7:e<=20?.5:e<=30?.45:e<=40?.4:.35},rB=(r,e)=>{var t;return((t=XN[r])==null?void 0:t[e])||null},$b=(r,e)=>e==="18"?"Thermostats, lighting controls, doorbells, signaling circuits":e==="16"?"Electronics, lighting control systems, doorbells, low-voltage applications":r<=15||r<=20?"Lighting circuits, small appliances":r<=25?"General outlets, lighting circuits":r<=30?"Small appliances, dryers (240V)":r<=40?"Electric ranges, large appliances":r<=50?"Electric ranges, welders, heat pumps":r<=100?"Sub-panels, large motors":r<=200?"Main panels, large commercial loads":r<=400?"Service entrances, large commercial/industrial applications":r<=600?"Large service entrances, industrial feeders":"Large industrial services, utility connections",nB=(r,e,t,n,i)=>{const s=eB(e,t),l=tB(n);let u=r*s*l,h=u;return i&&(h=u*.8),{base:r,tempFactor:s,conductorFactor:l,derated:Math.round(u*10)/10,continuous:Math.round(h*10)/10}},Ub=r=>({"60C":"60C (140F)","75C":"75C (167F)","90C":"90C (194F)"})[r]||r,iB=r=>({10:"10C (50F)",15:"15C (59F)",20:"20C (68F)",25:"25C (77F)",30:"30C (86F)",35:"35C (95F)",40:"40C (104F)",45:"45C (113F)",50:"50C (122F)"})[r]||`${r}C`,qb=r=>r.includes("/")?`${r} AWG`:parseInt(r)<=16?`${r} AWG`:`${r} kcmil`,Wh={ampacityTable:"NEC Table 310.16 - Allowable Ampacities of Insulated Conductors",tempCorrection:"NEC 310.15(B)(2)(a) - Temperature Correction Factors",conductorAdjustment:"NEC 310.15(B)(3)(a) - Conductor Bundling Adjustment Factors",ocpdLimit:"NEC 240.4(D) - Small Conductor Overcurrent Protection",continuousLoad:"NEC 210.19(A)(1) - Continuous Load Sizing (125% factor)"},oB=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=pe.useState("12"),[s,l]=pe.useState("copper"),[u,h]=pe.useState("75C"),[d,g]=pe.useState("30"),[b,_]=pe.useState("3"),[v,N]=pe.useState(!1),E={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},L=ZN(s,u,n),k=rB(s,n),O=nB(L,u,d,b,v),$=O.tempFactor!==1||O.conductorFactor!==1||v;return pe.useImperativeHandle(t,()=>({exportPDF:()=>{const F={calculatorName:"Ampacity Lookup Calculator",inputs:{wireSize:qb(n),wireMaterial:s.charAt(0).toUpperCase()+s.slice(1),temperatureRating:Ub(u),ambientTemperature:iB(d),currentCarryingConductors:b,continuousLoad:v?"Yes (3+ hours)":"No"},results:{baseAmpacity:`${O.base} A`,deratedAmpacity:$?`${O.derated} A`:"N/A (no derating applied)",finalAmpacity:`${v?O.continuous:$?O.derated:O.base} A`,ocpdLimit:k?`${k} A (NEC 240.4(D))`:"No special limit",commonApplications:$b(L,n)},additionalInfo:{temperatureCorrectionFactor:`${O.tempFactor.toFixed(2)}`,conductorAdjustmentFactor:`${O.conductorFactor.toFixed(2)}`,continuousLoadFactor:v?"0.80":"Not applied",deratingApplied:$?"Yes":"No"},necReferences:[Wh.ampacityTable,Wh.tempCorrection,Wh.conductorAdjustment,k?Wh.ocpdLimit:null,v?Wh.continuousLoad:null].filter(Boolean)};un(F)}})),o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${E.cardBorder}`,paddingBottom:"0.5rem"},children:"Wire Selection"}),o.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Wire Size"}),o.jsx("select",{value:n,onChange:F=>i(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:KN.map(F=>o.jsx("option",{value:F.value,children:F.label},F.value))})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Wire Material"}),o.jsx("select",{value:s,onChange:F=>l(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:HN.map(F=>o.jsx("option",{value:F.value,children:F.label},F.value))})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Temperature Rating"}),o.jsx("select",{value:u,onChange:F=>h(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:GN.map(F=>o.jsx("option",{value:F.value,children:F.label},F.value))})]})]})]})]}),o.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${E.cardBorder}`,paddingBottom:"0.5rem"},children:"Derating Factors (Optional)"}),o.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Ambient Temp (C)"}),o.jsx("select",{value:d,onChange:F=>g(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:JN.map(F=>o.jsx("option",{value:F.value,children:F.label},F.value))})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Current-Carrying Conductors"}),o.jsx("input",{type:"number",value:b,onChange:F=>_(F.target.value),min:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:v,onChange:F=>N(F.target.checked),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),o.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:E.labelText},children:"Continuous Load (3+ hours) - Apply 80% factor"})]}),o.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${E.cardBorder}`},children:[o.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"0.75rem"},children:"Applied Factors"}),o.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:E.labelText},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{children:"Temperature Factor:"}),o.jsxs("span",{style:{fontWeight:"600",color:E.cardText},children:["",O.tempFactor.toFixed(2)]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{children:"Conductor Adjustment:"}),o.jsxs("span",{style:{fontWeight:"600",color:E.cardText},children:["",O.conductorFactor.toFixed(2)]})]}),v&&o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{children:"Continuous Load:"}),o.jsx("span",{style:{fontWeight:"600",color:E.cardText},children:"0.80"})]})]})]})]})]}),o.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:$?"repeat(3, 1fr)":"1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Base Ampacity"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:[O.base," A"]})]}),$&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Derated Ampacity"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:[O.derated," A"]})]}),o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Final Ampacity"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[v?O.continuous:O.derated," A"]})]})]})]}),o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5",width:"100%"},children:[o.jsxs("div",{style:{marginBottom:"0.5rem"},children:[o.jsx("strong",{children:"Wire:"})," ",qb(n)," ",s]}),o.jsxs("div",{style:{marginBottom:"0.5rem"},children:[o.jsx("strong",{children:"Temperature Rating:"})," ",Ub(u)]})]})]})}),k&&o.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[o.jsx("strong",{children:"NEC 240.4(D) Limit:"})," ",k,"A max overcurrent protection"]})]})}),o.jsx("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${E.cardBorder}`},children:o.jsxs("div",{style:{fontSize:"0.875rem",color:E.labelText,lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",color:E.cardText,marginBottom:"0.5rem"},children:"Common Applications:"}),$b(L,n)]})})]})]})}),sB=({flcData:r,setFlcData:e,colors:t})=>{var u,h;const n={single:{115:{.25:4.4,.33:5.8,.5:7.2,.75:9.8,1:13.8,1.5:20,2:24,3:34,5:56},230:{.25:2.2,.33:2.9,.5:3.6,.75:4.9,1:6.9,1.5:10,2:12,3:17,5:28}},three:{230:{.5:2,.75:2.8,1:3.6,1.5:5.2,2:6.8,3:9.6,5:15.2,7.5:22,10:28,15:42,20:54,25:68,30:80,40:104,50:130,60:154,75:192,100:248,125:312,150:360,200:480},460:{.5:1,.75:1.4,1:1.8,1.5:2.6,2:3.4,3:4.8,5:7.6,7.5:11,10:14,15:21,20:27,25:34,30:40,40:52,50:65,60:77,75:96,100:124,125:156,150:180,200:240},575:{.5:.8,.75:1.1,1:1.4,1.5:2.1,2:2.7,3:3.9,5:6.1,7.5:9,10:11,15:17,20:22,25:27,30:32,40:41,50:52,60:62,75:77,100:99,125:125,150:144,200:192},2300:{250:65,300:77,350:90,400:103,450:116,500:129},4e3:{500:74,600:88,700:103,800:118,900:132,1e3:147}}},s=(()=>{const d=parseFloat(r.horsepower),g=parseInt(r.voltage);if(n[r.phase]&&n[r.phase][g]&&n[r.phase][g][d])return n[r.phase][g][d];const b=parseFloat(r.efficiency),_=parseFloat(r.powerFactor);return r.phase==="single"?d*746/(g*b*_):d*746/(1.732*g*b*_)})(),l=(h=(u=n[r.phase])==null?void 0:u[parseInt(r.voltage)])==null?void 0:h[parseFloat(r.horsepower)];return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Horsepower"}),o.jsxs("select",{value:r.horsepower,onChange:d=>e({...r,horsepower:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"",children:"Select HP"}),o.jsx("option",{value:"0.25",children:"1/4 HP"}),o.jsx("option",{value:"0.33",children:"1/3 HP"}),o.jsx("option",{value:"0.5",children:"1/2 HP"}),o.jsx("option",{value:"0.75",children:"3/4 HP"}),o.jsx("option",{value:"1",children:"1 HP"}),o.jsx("option",{value:"1.5",children:"1.5 HP"}),o.jsx("option",{value:"2",children:"2 HP"}),o.jsx("option",{value:"3",children:"3 HP"}),o.jsx("option",{value:"5",children:"5 HP"}),o.jsx("option",{value:"7.5",children:"7.5 HP"}),o.jsx("option",{value:"10",children:"10 HP"}),o.jsx("option",{value:"15",children:"15 HP"}),o.jsx("option",{value:"20",children:"20 HP"}),o.jsx("option",{value:"25",children:"25 HP"}),o.jsx("option",{value:"30",children:"30 HP"}),o.jsx("option",{value:"40",children:"40 HP"}),o.jsx("option",{value:"50",children:"50 HP"}),o.jsx("option",{value:"75",children:"75 HP"}),o.jsx("option",{value:"100",children:"100 HP"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Voltage"}),o.jsxs("select",{value:r.voltage,onChange:d=>e({...r,voltage:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"115",children:"115V"}),o.jsx("option",{value:"230",children:"230V"}),o.jsx("option",{value:"460",children:"460V"}),o.jsx("option",{value:"480",children:"480V"}),o.jsx("option",{value:"575",children:"575V"}),o.jsx("option",{value:"2300",children:"2300V"}),o.jsx("option",{value:"4000",children:"4000V"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Phase"}),o.jsxs("select",{value:r.phase,onChange:d=>e({...r,phase:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"single",children:"Single Phase"}),o.jsx("option",{value:"three",children:"Three Phase"})]})]})]}),r.horsepower&&!l&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Efficiency"}),o.jsxs("select",{value:r.efficiency,onChange:d=>e({...r,efficiency:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"0.8",children:"80% (Standard)"}),o.jsx("option",{value:"0.85",children:"85% (High Efficiency)"}),o.jsx("option",{value:"0.9",children:"90% (Premium)"}),o.jsx("option",{value:"0.95",children:"95% (Super Premium)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),o.jsxs("select",{value:r.powerFactor,onChange:d=>e({...r,powerFactor:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"0.7",children:"0.7 (Poor)"}),o.jsx("option",{value:"0.8",children:"0.8 (Typical)"}),o.jsx("option",{value:"0.85",children:"0.85 (Good)"}),o.jsx("option",{value:"0.9",children:"0.9 (Excellent)"})]})]})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${t.cardBorder}`},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.5rem",textAlign:"center"},children:"Full Load Current"}),o.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:t.cardText,textAlign:"center"},children:s?s.toFixed(1):"0.0"}),o.jsx("div",{style:{fontSize:"0.875rem",color:t.labelText,textAlign:"center",marginTop:"0.25rem"},children:"Amperes"})]}),l?o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Value from NEC Table 430.250"}),o.jsx("div",{style:{fontSize:"0.8125rem"},children:"Standard full load current from NEC tables"})]})]})}):r.horsepower?o.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Calculated Value"}),o.jsx("div",{style:{fontSize:"0.8125rem"},children:"Not in NEC tables - calculated using efficiency and power factor"})]})]})}):null]})},aB=({protectionData:r,setProtectionData:e,colors:t})=>{const n={"inverse-time-breaker":250,"instantaneous-trip-breaker":800,"inverse-time-fuse":175,"time-delay-fuse":175},s=(()=>{if(!r.flc)return{calculated:"0",standard:0};const l=parseFloat(r.flc),u=n[r.protectionType],h=l*u/100,g=[15,20,25,30,35,40,45,50,60,70,80,90,100,110,125,150,175,200,225,250,300,350,400,450,500,600,700,800,1e3,1200,1600,2e3,2500,3e3,4e3,5e3,6e3].find(b=>b>=h)||h;return{calculated:h.toFixed(1),standard:g,percentage:u}})();return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Full Load Current (FLC)"}),o.jsx("input",{type:"number",value:r.flc,onChange:l=>e({...r,flc:l.target.value}),placeholder:"Enter FLC in amps",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Protection Type"}),o.jsxs("select",{value:r.protectionType,onChange:l=>e({...r,protectionType:l.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"inverse-time-breaker",children:"Inverse Time Breaker"}),o.jsx("option",{value:"instantaneous-trip-breaker",children:"Instantaneous Trip Breaker"}),o.jsx("option",{value:"inverse-time-fuse",children:"Inverse Time Fuse"}),o.jsx("option",{value:"time-delay-fuse",children:"Time Delay Fuse"})]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Calculated Maximum"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:s.calculated}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Standard Size"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:s.standard}),o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),r.flc&&o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.8125rem",color:t.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Reference:"}),"Per NEC Table 430.52 (",s.percentage,"% of FLC)"]})]})},lB=({wireSizeData:r,setWireSizeData:e,colors:t})=>{const i=(()=>{if(!r.flc)return null;const s=parseFloat(r.flc)*1.25,l={"60C":{14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:355,700:385,750:400},"75C":{14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,750:475},"90C":{14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535}},u={14:15,12:20,10:30},d=["14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750"].find(g=>{const b=l[r.tempRating][g]>=s,_=!u[g]||u[g]>=s;return b&&_});return{requiredAmps:s.toFixed(1),wireSize:d||"Larger than 750 kcmil required",ampacity:d?l[r.tempRating][d]:"N/A",ocpdLimit:d&&u[d]?u[d]:null}})();return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Full Load Current (FLC)"}),o.jsx("input",{type:"number",value:r.flc,onChange:s=>e({...r,flc:s.target.value}),placeholder:"Enter FLC in amps",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Temperature Rating"}),o.jsxs("select",{value:r.tempRating,onChange:s=>e({...r,tempRating:s.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"60C",children:"60C (140F) - TW, UF"}),o.jsx("option",{value:"75C",children:"75C (167F) - THWN, XHHW"}),o.jsx("option",{value:"90C",children:"90C (194F) - THHN, XHHW-2"})]})]})]}),i&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${t.cardBorder}`},children:[o.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,marginBottom:"0.75rem"},children:[o.jsx("strong",{style:{color:t.cardText},children:"Required Current Capacity:"})," ",i.requiredAmps," Amps (125% of FLC)"]}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.5rem",textAlign:"center"},children:"Minimum Wire Size"}),o.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:t.cardText,textAlign:"center",marginBottom:"0.5rem"},children:i.wireSize}),i.ampacity!=="N/A"&&o.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,textAlign:"center"},children:["Ampacity: ",i.ampacity," Amps"]})]}),i.ocpdLimit&&o.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"NEC 240.4(D) Limitation"}),o.jsxs("div",{style:{fontSize:"0.8125rem"},children:[i.ocpdLimit,"A maximum overcurrent protection for ",i.wireSize," wire"]})]})]})}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.8125rem",color:t.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Reference:"}),"Per NEC 430.22 - Branch circuit conductors must carry 125% of motor FLC"]})]})]})},cB=pe.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=pe.useState("flc"),[i,s]=pe.useState({horsepower:"",voltage:"480",phase:"three",efficiency:"0.85",powerFactor:"0.8"}),[l,u]=pe.useState({flc:"",protectionType:"inverse-time-breaker"}),[h,d]=pe.useState({flc:"",tempRating:"75C"}),g={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};pe.useImperativeHandle(e,()=>({exportPDF:()=>{var v,N;let _;if(t==="flc"){if(!i.horsepower){alert("Please select motor horsepower before exporting");return}const E={single:{115:{.25:4.4,.33:5.8,.5:7.2,.75:9.8,1:13.8,1.5:20,2:24,3:34,5:56},230:{.25:2.2,.33:2.9,.5:3.6,.75:4.9,1:6.9,1.5:10,2:12,3:17,5:28}},three:{230:{.5:2,.75:2.8,1:3.6,1.5:5.2,2:6.8,3:9.6,5:15.2,7.5:22,10:28,15:42,20:54,25:68,30:80,40:104,50:130,60:154,75:192,100:248,125:312,150:360,200:480},460:{.5:1,.75:1.4,1:1.8,1.5:2.6,2:3.4,3:4.8,5:7.6,7.5:11,10:14,15:21,20:27,25:34,30:40,40:52,50:65,60:77,75:96,100:124,125:156,150:180,200:240},575:{.5:.8,.75:1.1,1:1.4,1.5:2.1,2:2.7,3:3.9,5:6.1,7.5:9,10:11,15:17,20:22,25:27,30:32,40:41,50:52,60:62,75:77,100:99,125:125,150:144,200:192},2300:{250:65,300:77,350:90,400:103,450:116,500:129},4e3:{500:74,600:88,700:103,800:118,900:132,1e3:147}}},L=parseFloat(i.horsepower),k=parseInt(i.voltage);let O,$=!1;if((N=(v=E[i.phase])==null?void 0:v[k])!=null&&N[L])O=E[i.phase][k][L],$=!0;else{const oe=parseFloat(i.efficiency),ce=parseFloat(i.powerFactor);i.phase==="single"?O=L*746/(k*oe*ce):O=L*746/(1.732*k*oe*ce)}const F={motorHorsepower:`${L} HP`,voltage:`${i.voltage}V`,phase:i.phase==="single"?"Single Phase":"Three Phase"};$||(F.motorEfficiency=`${(parseFloat(i.efficiency)*100).toFixed(0)}%`,F.powerFactor=i.powerFactor),_={calculatorName:"Motor Calculations - Full Load Current",inputs:F,results:{fullLoadCurrent:`${O.toFixed(1)} Amperes`,source:$?"NEC Table 430.250":"Calculated"},additionalInfo:$?{note:"Standard full load current from NEC tables"}:{calculation:i.phase==="single"?`FLC = (${L} HP  746)  (${k}V  ${i.efficiency} eff  ${i.powerFactor} pf) = ${O.toFixed(1)}A`:`FLC = (${L} HP  746)  (1.732  ${k}V  ${i.efficiency} eff  ${i.powerFactor} pf) = ${O.toFixed(1)}A`,note:"Calculated value - not in NEC tables"},necReferences:["NEC Table 430.250 - Full-Load Current, Three-Phase Alternating-Current Motors","NEC Table 430.248 - Full-Load Current, Single-Phase Alternating-Current Motors","NEC 430.6 - Ampacity and Motor Rating Determination"]}}else if(t==="protection"){if(!l.flc){alert("Please enter motor FLC before exporting");return}const E={"inverse-time-breaker":"Inverse Time Breaker","instantaneous-trip-breaker":"Instantaneous Trip Breaker","inverse-time-fuse":"Inverse Time Fuse","time-delay-fuse":"Time Delay Fuse"},L={"inverse-time-breaker":250,"instantaneous-trip-breaker":800,"inverse-time-fuse":175,"time-delay-fuse":175},k=parseFloat(l.flc),O=L[l.protectionType],$=k*O/100,oe=[15,20,25,30,35,40,45,50,60,70,80,90,100,110,125,150,175,200,225,250,300,350,400,450,500,600,700,800,1e3,1200,1600,2e3,2500,3e3,4e3,5e3,6e3].find(ce=>ce>=$)||$;_={calculatorName:"Motor Calculations - Branch Circuit Protection",inputs:{motorFullLoadCurrent:`${l.flc} Amps`,protectionType:E[l.protectionType]},results:{calculatedMaximum:`${$.toFixed(1)} Amperes`,standardSize:`${oe} Amperes`},additionalInfo:{calculation:`Maximum = ${k}A  ${O}% = ${$.toFixed(1)}A`,nextStandardSize:`Next standard OCPD size: ${oe}A`},necReferences:[`NEC Table 430.52 - Maximum Rating or Setting of Motor Branch-Circuit Short-Circuit and Ground-Fault Protective Devices (${O}% of FLC)`,"NEC 430.52(C) - Rating or Setting for Individual Motor Circuit","NEC 240.6 - Standard Ampere Ratings"]}}else if(t==="wiresize"){if(!h.flc){alert("Please enter motor FLC before exporting");return}const E={"60C":"60C (140F) - TW, UF","75C":"75C (167F) - THWN, XHHW","90C":"90C (194F) - THHN, XHHW-2"},L=(parseFloat(h.flc)*1.25).toFixed(1),k={"60C":{14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:355,700:385,750:400},"75C":{14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,750:475},"90C":{14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535}},O={14:15,12:20,10:30},F=["14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750"].find(D=>{const C=k[h.tempRating][D]>=parseFloat(L),S=!O[D]||O[D]>=parseFloat(L);return C&&S}),oe=F||"Larger than 750 kcmil required",ce=F?k[h.tempRating][F]:"N/A";_={calculatorName:"Motor Calculations - Wire Sizing",inputs:{motorFullLoadCurrent:`${h.flc} Amps`,temperatureRating:E[h.tempRating]},results:{requiredCapacity:`${L} Amps (125% of FLC)`,minimumWireSize:oe,wireAmpacity:ce!=="N/A"?`${ce} Amps`:"N/A"},additionalInfo:{calculation:`Required capacity = ${h.flc}A  125% = ${L}A`,...F&&O[F]&&{ocpdLimitation:`NEC 240.4(D): ${O[F]}A maximum OCPD for ${oe} wire`}},necReferences:["NEC 430.22 - Single Motor - Conductors supplying a single motor shall have an ampacity not less than 125% of FLC","NEC Table 310.16 - Allowable Ampacities of Insulated Conductors","NEC 240.4(D) - Small Conductors - Unless specifically permitted, overcurrent protection shall not exceed limits"]}}un(_)}}));const b={flc:o.jsx(sB,{flcData:i,setFlcData:s,colors:g}),protection:o.jsx(aB,{protectionData:l,setProtectionData:u,colors:g}),wiresize:o.jsx(lB,{wireSizeData:h,setWireSizeData:d,colors:g})};return o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("div",{style:{background:g.cardBg,border:`1px solid ${g.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:o.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[o.jsx("button",{onClick:()=>n("flc"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="flc"?"#3b82f6":"transparent",color:t==="flc"?"white":g.labelText,border:`1px solid ${t==="flc"?"#3b82f6":g.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Full Load Current"}),o.jsx("button",{onClick:()=>n("protection"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="protection"?"#3b82f6":"transparent",color:t==="protection"?"white":g.labelText,border:`1px solid ${t==="protection"?"#3b82f6":g.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Circuit Protection"}),o.jsx("button",{onClick:()=>n("wiresize"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="wiresize"?"#3b82f6":"transparent",color:t==="wiresize"?"white":g.labelText,border:`1px solid ${t==="wiresize"?"#3b82f6":g.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Wire Sizing"})]})}),o.jsx("div",{style:{background:g.cardBg,border:`1px solid ${g.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:b[t]}),o.jsxs("div",{style:{background:g.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${g.cardBorder}`,fontSize:"0.8125rem",color:g.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:g.cardText},children:"NEC References:"}),"430.22 - Conductors (125% FLC)  430.52 - Circuit protection  430.250 - FLC tables  430.32 - Overload protection"]})]})}),uB=({data:r,setData:e,colors:t})=>{const i=(()=>{const s=parseFloat(r.squareFootage)||0,l=parseFloat(r.smallApplianceCircuits)||0,u=parseFloat(r.laundryCircuits)||0,h=parseFloat(r.rangeKW)||0,d=parseFloat(r.dryerKW)||0,g=parseFloat(r.waterHeaterKW)||0,b=parseFloat(r.hvacKW)||0,_=parseFloat(r.otherLoadsKW)||0,v=parseFloat(r.voltage),N=s*3,E=l*1500,L=u*1500,k=N+E+L;let O=0;k<=3e3?O=k:k<=12e4?O=3e3+(k-3e3)*.35:O=43950+(k-12e4)*.25;let $=0;h>0&&(h<=12?$=8e3:$=8e3+(h-12)*400);const F=Math.max(d*1e3,5e3),oe=g*1e3,ce=b*1e3,D=_*1e3,C=O+$+F+oe+ce+D,S=C/1e3,V=C/v;let I=100;return V>200?I=400:V>150?I=200:V>100&&(I=150),{generalLighting:N,smallApplianceLoad:E,laundryLoad:L,subtotalVA:k,demandLighting:O,rangeDemand:$,dryerDemand:F,waterHeaterDemand:oe,hvacDemand:ce,otherDemand:D,totalDemandVA:C,totalDemandKW:S,totalAmperage:V,recommendedService:I}})();return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem",minHeight:"2.5rem"},children:["Square",o.jsx("br",{}),"Footage",o.jsx("br",{}),"   ",o.jsx("br",{})]}),o.jsx("input",{type:"number",value:r.squareFootage,onChange:s=>e(l=>({...l,squareFootage:s.target.value})),placeholder:"Living area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Small Appliance Circuits"}),o.jsx("input",{type:"number",value:r.smallApplianceCircuits,onChange:s=>e(l=>({...l,smallApplianceCircuits:s.target.value})),placeholder:"Min 2",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"@ 1500 VA each"})]}),o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Laundry Circuits ",o.jsx("br",{}),"   ",o.jsx("br",{})]}),o.jsx("input",{type:"number",value:r.laundryCircuits,onChange:s=>e(l=>({...l,laundryCircuits:s.target.value})),placeholder:"Typically 1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"@ 1500 VA"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Electric Range (kW)"}),o.jsx("input",{type:"number",value:r.rangeKW,onChange:s=>e(l=>({...l,rangeKW:s.target.value})),placeholder:"Nameplate rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Electric Dryer (kW)"}),o.jsx("input",{type:"number",value:r.dryerKW,onChange:s=>e(l=>({...l,dryerKW:s.target.value})),placeholder:"Min 5 kW",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Water Heater (kW)"}),o.jsx("input",{type:"number",value:r.waterHeaterKW,onChange:s=>e(l=>({...l,waterHeaterKW:s.target.value})),placeholder:"Rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"HVAC/Heat (kW)"}),o.jsx("input",{type:"number",value:r.hvacKW,onChange:s=>e(l=>({...l,hvacKW:s.target.value})),placeholder:"Largest load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Other Loads (kW)"}),o.jsx("input",{type:"number",value:r.otherLoadsKW,onChange:s=>e(l=>({...l,otherLoadsKW:s.target.value})),placeholder:"Pool, spa, etc",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),o.jsxs("select",{value:r.voltage,onChange:s=>e(l=>({...l,voltage:s.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"240",children:"240V"}),o.jsx("option",{value:"208",children:"208V"})]}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]})]}),r.squareFootage&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Demand"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.totalDemandKW.toFixed(2)}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Amperage"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.totalAmperage.toFixed(1)}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"amps"})]}),o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Recommended Service"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:i.recommendedService}),o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"amp service"})]})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,marginBottom:"1rem"},children:[o.jsx("div",{style:{fontWeight:"600",color:t.cardText,marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Connected Loads:"}),o.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,display:"grid",gap:"0.25rem"},children:[o.jsxs("div",{children:["General Lighting: ",i.generalLighting.toLocaleString()," VA"]}),o.jsxs("div",{children:["Small Appliance: ",i.smallApplianceLoad.toLocaleString()," VA"]}),o.jsxs("div",{children:["Laundry: ",i.laundryLoad.toLocaleString()," VA"]}),o.jsx("div",{style:{borderTop:`1px solid ${t.cardBorder}`,marginTop:"0.5rem",paddingTop:"0.5rem"},children:o.jsxs("strong",{children:["Subtotal: ",i.subtotalVA.toLocaleString()," VA"]})})]})]}),o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5",width:"100%"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Demand Loads (with factors applied):"}),o.jsxs("div",{children:["Lighting: ",i.demandLighting.toFixed(0)," VA"]}),r.rangeKW>0&&o.jsxs("div",{children:["Range: ",i.rangeDemand.toLocaleString()," W"]}),r.dryerKW>0&&o.jsxs("div",{children:["Dryer: ",i.dryerDemand.toLocaleString()," W"]}),r.waterHeaterKW>0&&o.jsxs("div",{children:["Water Heater: ",i.waterHeaterDemand.toLocaleString()," W"]}),r.hvacKW>0&&o.jsxs("div",{children:["HVAC: ",i.hvacDemand.toLocaleString()," W"]}),r.otherLoadsKW>0&&o.jsxs("div",{children:["Other: ",i.otherDemand.toLocaleString()," W"]})]})]})})]})]})},dB=({data:r,setData:e,colors:t})=>{const n={office:3.5,warehouse:.25,retail:3,school:3,restaurant:2,hotel:2,hospital:2,industrial:2},s=(()=>{const l=parseFloat(r.squareFootage)||0,u=parseFloat(r.hvacLoad)||0,h=parseFloat(r.receptacleLoad)||0,d=parseFloat(r.motorLoads)||0,g=parseFloat(r.otherLoads)||0,b=parseFloat(r.demandFactor)/100,_=parseFloat(r.voltage),v=l*n[r.occupancyType],N=v/1e3+u+h+d+g,E=N*b;let L;return r.phase==="single"?L=E*1e3/_:L=E*1e3/(1.732*_),{lightingVA:v,lightingKW:v/1e3,hvac:u,receptacles:h,motors:d,other:g,totalConnectedKW:N,demandLoadKW:E,amperage:L}})();return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Square Footage"}),o.jsx("input",{type:"number",value:r.squareFootage,onChange:l=>e(u=>({...u,squareFootage:l.target.value})),placeholder:"Building area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Occupancy Type"}),o.jsxs("select",{value:r.occupancyType,onChange:l=>e(u=>({...u,occupancyType:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"office",children:"Office (3.5 VA/sq ft)"}),o.jsx("option",{value:"warehouse",children:"Warehouse (0.25 VA/sq ft)"}),o.jsx("option",{value:"retail",children:"Retail (3.0 VA/sq ft)"}),o.jsx("option",{value:"school",children:"School (3.0 VA/sq ft)"}),o.jsx("option",{value:"restaurant",children:"Restaurant (2.0 VA/sq ft)"}),o.jsx("option",{value:"hotel",children:"Hotel (2.0 VA/sq ft)"}),o.jsx("option",{value:"hospital",children:"Hospital (2.0 VA/sq ft)"}),o.jsx("option",{value:"industrial",children:"Industrial (2.0 VA/sq ft)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"HVAC Load (kW)"}),o.jsx("input",{type:"number",value:r.hvacLoad,onChange:l=>e(u=>({...u,hvacLoad:l.target.value})),placeholder:"Total HVAC",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Receptacle Load (kW)"}),o.jsx("input",{type:"number",value:r.receptacleLoad,onChange:l=>e(u=>({...u,receptacleLoad:l.target.value})),placeholder:"Receptacles",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Loads (kW)"}),o.jsx("input",{type:"number",value:r.motorLoads,onChange:l=>e(u=>({...u,motorLoads:l.target.value})),placeholder:"Total motors",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Other Loads (kW)"}),o.jsx("input",{type:"number",value:r.otherLoads,onChange:l=>e(u=>({...u,otherLoads:l.target.value})),placeholder:"Additional",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Demand Factor (%)"}),o.jsx("input",{type:"number",value:r.demandFactor,onChange:l=>e(u=>({...u,demandFactor:l.target.value})),placeholder:"80-100%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Peak load %"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"System Voltage"}),o.jsxs("select",{value:r.voltage,onChange:l=>e(u=>({...u,voltage:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"208",children:"208V"}),o.jsx("option",{value:"240",children:"240V"}),o.jsx("option",{value:"277",children:"277V"}),o.jsx("option",{value:"480",children:"480V"}),o.jsx("option",{value:"600",children:"600V"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["System",o.jsx("br",{})," Phase"]}),o.jsxs("select",{value:r.phase,onChange:l=>e(u=>({...u,phase:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"single",children:"Single Phase"}),o.jsx("option",{value:"three",children:"Three Phase"})]})]})]}),r.squareFootage&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Connected Load"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:s.totalConnectedKW.toFixed(2)}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Demand Load"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:s.demandLoadKW.toFixed(2)}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Amperage"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:s.amperage.toFixed(1)}),o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"amps"})]})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,marginBottom:"1rem"},children:[o.jsx("div",{style:{fontWeight:"600",color:t.cardText,marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Connected Loads:"}),o.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,display:"grid",gap:"0.25rem"},children:[o.jsxs("div",{children:["Lighting: ",s.lightingKW.toFixed(2)," kW (",s.lightingVA.toFixed(0)," VA)"]}),r.hvacLoad>0&&o.jsxs("div",{children:["HVAC: ",s.hvac.toFixed(2)," kW"]}),r.receptacleLoad>0&&o.jsxs("div",{children:["Receptacles: ",s.receptacles.toFixed(2)," kW"]}),r.motorLoads>0&&o.jsxs("div",{children:["Motors: ",s.motors.toFixed(2)," kW"]}),r.otherLoads>0&&o.jsxs("div",{children:["Other: ",s.other.toFixed(2)," kW"]})]})]}),o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"System Configuration"}),o.jsxs("div",{children:[r.voltage,"V ",r.phase==="single"?"Single":"Three"," Phase"]}),o.jsxs("div",{children:[r.demandFactor,"% demand factor applied"]})]})]})})]})]})},hB=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=pe.useState("residential"),[s,l]=pe.useState({squareFootage:"",smallApplianceCircuits:"2",laundryCircuits:"1",rangeKW:"",dryerKW:"5",waterHeaterKW:"",hvacKW:"",otherLoadsKW:"",voltage:"240"}),[u,h]=pe.useState({squareFootage:"",occupancyType:"office",hvacLoad:"",receptacleLoad:"",motorLoads:"",otherLoads:"",demandFactor:"100",voltage:"480",phase:"three"}),d={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};return pe.useImperativeHandle(t,()=>({exportPDF:()=>{let g;if(n==="residential"){if(!s.squareFootage){alert("Please enter square footage before exporting");return}const b=parseFloat(s.squareFootage),_=parseFloat(s.smallApplianceCircuits)||0,v=parseFloat(s.laundryCircuits)||0,N=parseFloat(s.rangeKW)||0,E=parseFloat(s.dryerKW)||0,L=parseFloat(s.waterHeaterKW)||0,k=parseFloat(s.hvacKW)||0,O=parseFloat(s.otherLoadsKW)||0,$=parseFloat(s.voltage),F=b*3,oe=_*1500,ce=v*1500,D=F+oe+ce;let C=0;D<=3e3?C=D:D<=12e4?C=3e3+(D-3e3)*.35:C=3e3+117e3*.35+(D-12e4)*.25;let S=0;N>0&&(S=N<=12?8e3:8e3+(N-12)*400);const V=Math.max(E*1e3,5e3),I=L*1e3,w=k*1e3,B=O*1e3,M=C+S+V+I+w+B,q=(M/1e3).toFixed(2),se=(M/$).toFixed(1);let te=100;parseFloat(se)>200?te=400:parseFloat(se)>150?te=200:parseFloat(se)>100&&(te=150);const re={squareFootage:`${s.squareFootage} sq ft`,smallApplianceCircuits:`${_} circuits @ 1500 VA each`,laundryCircuits:`${v} circuit @ 1500 VA`,serviceVoltage:`${s.voltage}V`};N>0&&(re.electricRange=`${N} kW`),E>0&&(re.electricDryer=`${E} kW`),L>0&&(re.waterHeater=`${L} kW`),k>0&&(re.hvacHeat=`${k} kW`),O>0&&(re.otherLoads=`${O} kW`),g={calculatorName:"Load Calculations - Residential (NEC 220.82)",inputs:re,results:{totalDemandLoad:`${q} kW (${M.toLocaleString()} VA)`,totalAmperage:`${se} Amps`,recommendedService:`${te} Amp Service`},additionalInfo:{generalLighting:`${F.toLocaleString()} VA (${b} sq ft  3 VA/sq ft)`,smallAppliance:`${oe.toLocaleString()} VA`,laundry:`${ce.toLocaleString()} VA`,lightingSubtotal:`${D.toLocaleString()} VA`,demandLightingAfterFactors:`${C.toFixed(0)} VA`,...N>0&&{rangeDemand:`${S.toLocaleString()} W`},...E>0&&{dryerDemand:`${V.toLocaleString()} W (min 5000 W)`},...L>0&&{waterHeaterDemand:`${I.toLocaleString()} W`},...k>0&&{hvacDemand:`${w.toLocaleString()} W`},...O>0&&{otherDemand:`${B.toLocaleString()} W`}},necReferences:["NEC 220.82 - Dwelling Unit Optional Calculation","NEC 220.83 - Existing Dwelling Unit","NEC Table 220.55 - Demand Factors for Electric Ranges","General lighting: 3 VA per square foot (NEC 220.12)","Demand factors: First 3000 VA @ 100%, Next 117000 VA @ 35%, Remainder @ 25%"]}}else if(n==="commercial"){if(!u.squareFootage){alert("Please enter square footage before exporting");return}const b={office:3.5,warehouse:.25,retail:3,school:3,restaurant:2,hotel:2,hospital:2,industrial:2},_={office:"Office",warehouse:"Warehouse",retail:"Retail",school:"School",restaurant:"Restaurant",hotel:"Hotel",hospital:"Hospital",industrial:"Industrial"},v=parseFloat(u.squareFootage),N=parseFloat(u.hvacLoad)||0,E=parseFloat(u.receptacleLoad)||0,L=parseFloat(u.motorLoads)||0,k=parseFloat(u.otherLoads)||0,O=parseFloat(u.demandFactor)/100,$=parseFloat(u.voltage),F=v*b[u.occupancyType],oe=(F/1e3).toFixed(2),ce=(F/1e3+N+E+L+k).toFixed(2),D=(parseFloat(ce)*O).toFixed(2);let C;u.phase==="single"?C=(parseFloat(D)*1e3/$).toFixed(1):C=(parseFloat(D)*1e3/(1.732*$)).toFixed(1);const S={squareFootage:`${u.squareFootage} sq ft`,occupancyType:`${_[u.occupancyType]} (${b[u.occupancyType]} VA/sq ft)`,demandFactor:`${u.demandFactor}%`,systemConfiguration:`${u.voltage}V ${u.phase==="single"?"Single":"Three"} Phase`};N>0&&(S.hvacLoad=`${N} kW`),E>0&&(S.receptacleLoad=`${E} kW`),L>0&&(S.motorLoads=`${L} kW`),k>0&&(S.otherLoads=`${k} kW`),g={calculatorName:"Load Calculations - Commercial",inputs:S,results:{connectedLoad:`${ce} kW`,demandLoad:`${D} kW`,totalAmperage:`${C} Amps`},additionalInfo:{lighting:`${oe} kW (${F.toFixed(0)} VA)`,calculationMethod:u.phase==="single"?`Amperage = (${D} kW  1000)  ${$}V = ${C} A`:`Amperage = (${D} kW  1000)  (1.732  ${$}V) = ${C} A`,demandFactorNote:`${u.demandFactor}% demand factor applied to total connected load`},necReferences:["NEC Article 220 - Branch-Circuit, Feeder, and Service Load Calculations","NEC Table 220.12 - General Lighting Loads by Occupancy","NEC 220.42 - General Lighting","NEC 220.50 - Motors","Always verify with actual connected loads and local codes"]}}un(g)}})),o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"residential",label:"Residential"},{id:"commercial",label:"Commercial"}].map(g=>o.jsx("button",{onClick:()=>i(g.id),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.625rem 1rem",background:n===g.id?"#3b82f6":d.sectionBg,color:n===g.id?"white":d.labelText,border:`1px solid ${n===g.id?"#3b82f6":d.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:g.label},g.id))}),o.jsx("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:n==="residential"?o.jsx(uB,{data:s,setData:l,colors:d}):o.jsx(dB,{data:u,setData:h,colors:d})})]})}),fB=pe.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=pe.useState("sizing"),[i,s]=pe.useState(""),[l,u]=pe.useState("480"),[h,d]=pe.useState("208"),[g,b]=pe.useState("three"),[_,v]=pe.useState("continuous"),[N,E]=pe.useState("0.85"),[L,k]=pe.useState(""),[O,$]=pe.useState("480"),[F,oe]=pe.useState("208"),[ce,D]=pe.useState("three"),C={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},S=[3,6,9,15,30,45,75,112.5,150,225,300,500,750,1e3,1500,2e3,2500,3e3],V=()=>{const M=parseFloat(i)||0;if(M===0)return null;let q=1;_==="continuous"&&(q=1.25);const se=M*q,te=S.find(re=>re>=se)||se;return{loadKVA:M,requiredKVA:se.toFixed(1),recommendedSize:te,utilizationPercent:(M/te*100).toFixed(1)}},I=()=>{const M=parseFloat(L)||0;if(M===0)return null;const q=parseFloat(O),se=parseFloat(F);let te,re;return ce==="single"?(te=M*1e3/q,re=M*1e3/se):(te=M*1e3/(1.732*q),re=M*1e3/(1.732*se)),{kva:M,primaryCurrent:te.toFixed(1),secondaryCurrent:re.toFixed(1),primaryVoltage:q,secondaryVoltage:se}},w=V(),B=I();return pe.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="sizing"){if(!i){alert("Please enter load (kVA) before exporting to PDF");return}const M={calculatorName:"Transformer Calculations - Transformer Sizing",inputs:{Load:`${i} kVA`,"Primary Voltage":`${l}V`,"Secondary Voltage":`${h}V`,Phase:g==="single"?"Single Phase":"Three Phase","Load Type":_==="continuous"?"Continuous (125% sizing)":"Non-Continuous (100% sizing)","Power Factor":N},results:{"Recommended Transformer Size":`${w.recommendedSize} kVA`,Configuration:`${l}V to ${h}V`,Phase:g==="single"?"Single Phase":"Three Phase","Connected Load":`${w.loadKVA} kVA`,"Required Capacity":`${w.requiredKVA} kVA`,Utilization:`${w.utilizationPercent}%`},additionalInfo:{"Sizing Factor":_==="continuous"?"125% (continuous loads)":"100% (non-continuous loads)","Calculation Method":"Required Capacity = Connected Load  Sizing Factor","Utilization Note":parseFloat(w.utilizationPercent)>80?"WARNING: Utilization above 80% may result in higher operating temperatures and reduced equipment life":"Utilization is within acceptable range"},necReferences:["NEC 450.3 - Overcurrent Protection for Transformers","NEC 450.9 - Ventilation Requirements","NEC 450.11 - Marking Requirements","NEC 450.21 - Dry-Type Transformers Installed Indoors","Size continuous loads at 125% per NEC requirements","Keep utilization below 80% for optimal efficiency and equipment life","Consider future load growth (typically 20-25% spare capacity)","Account for inrush current for motor loads","Consider ambient temperature and ventilation requirements"]};un(M)}else if(t==="currents"){if(!L){alert("Please enter transformer rating (kVA) before exporting to PDF");return}const M=ce==="single"?"I = (kVA  1000)  V":"I = (kVA  1000)  (1.732  V)",q={calculatorName:"Transformer Calculations - Current Calculations",inputs:{"Transformer Rating":`${L} kVA`,"Primary Voltage":`${O}V`,"Secondary Voltage":`${F}V`,Phase:ce==="single"?"Single Phase":"Three Phase"},results:{Configuration:`${B.kva} kVA, ${ce==="single"?"Single":"Three"} Phase`,"Voltage Ratio":`${B.primaryVoltage}V / ${B.secondaryVoltage}V`,"Primary Current":`${B.primaryCurrent} A`,"Secondary Current":`${B.secondaryCurrent} A`},additionalInfo:{"Formula Used":M,"Primary Side":`${B.primaryCurrent}A at ${B.primaryVoltage}V`,"Secondary Side":`${B.secondaryCurrent}A at ${B.secondaryVoltage}V`,Application:"Use these currents for selecting primary and secondary protection devices per NEC Article 450"},necReferences:["NEC Article 450 - Transformers and Transformer Vaults","NEC 450.3 - Overcurrent Protection","Single Phase Formula: I = (kVA  1000)  V","Three Phase Formula: I = (kVA  1000)  (1.732  V)","Primary and secondary protection must be sized per calculated currents","Consider temperature correction and adjustment factors for conductors","Account for voltage drop in feeder calculations"]};un(q)}}})),o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:o.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[o.jsx("button",{onClick:()=>n("sizing"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="sizing"?"#3b82f6":"transparent",color:t==="sizing"?"white":C.labelText,border:`1px solid ${t==="sizing"?"#3b82f6":C.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Transformer Sizing"}),o.jsx("button",{onClick:()=>n("currents"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="currents"?"#3b82f6":"transparent",color:t==="currents"?"white":C.labelText,border:`1px solid ${t==="currents"?"#3b82f6":C.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Current Calculations"})]})}),t==="sizing"?o.jsxs("div",{children:[o.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:C.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${C.cardBorder}`,paddingBottom:"0.5rem"},children:"Transformer Parameters"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Load (kVA)"}),o.jsx("input",{type:"number",value:i,onChange:M=>s(M.target.value),placeholder:"Connected load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:C.subtleText,marginTop:"0.25rem"},children:"Total connected or demand load"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Primary Voltage"}),o.jsxs("select",{value:l,onChange:M=>u(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"208",children:"208V"}),o.jsx("option",{value:"240",children:"240V"}),o.jsx("option",{value:"480",children:"480V"}),o.jsx("option",{value:"600",children:"600V"}),o.jsx("option",{value:"2400",children:"2400V"}),o.jsx("option",{value:"4160",children:"4160V"}),o.jsx("option",{value:"12470",children:"12470V"}),o.jsx("option",{value:"13200",children:"13200V"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Secondary Voltage"}),o.jsxs("select",{value:h,onChange:M=>d(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"120",children:"120V"}),o.jsx("option",{value:"208",children:"208V"}),o.jsx("option",{value:"240",children:"240V"}),o.jsx("option",{value:"277",children:"277V"}),o.jsx("option",{value:"480",children:"480V"}),o.jsx("option",{value:"600",children:"600V"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Phase"}),o.jsxs("select",{value:g,onChange:M=>b(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"single",children:"Single Phase"}),o.jsx("option",{value:"three",children:"Three Phase"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Load Type"}),o.jsxs("select",{value:_,onChange:M=>v(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"continuous",children:"Continuous (125% sizing)"}),o.jsx("option",{value:"noncontinuous",children:"Non-Continuous (100% sizing)"})]}),o.jsx("div",{style:{fontSize:"0.75rem",color:C.subtleText,marginTop:"0.25rem"},children:"Continuous loads operate 3+ hours"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),o.jsxs("select",{value:N,onChange:M=>E(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"1.0",children:"1.0 (Unity)"}),o.jsx("option",{value:"0.95",children:"0.95 (Excellent)"}),o.jsx("option",{value:"0.9",children:"0.9 (Good)"}),o.jsx("option",{value:"0.85",children:"0.85 (Typical)"}),o.jsx("option",{value:"0.8",children:"0.8 (Poor)"})]})]})]})]}),w&&o.jsxs("div",{children:[o.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:C.cardText,marginTop:0,marginBottom:"1rem"},children:"Sizing Calculation"}),o.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${C.cardBorder}`},children:[o.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:C.labelText},children:[o.jsx("strong",{style:{color:C.cardText},children:"Connected Load:"})," ",w.loadKVA," kVA"]}),o.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:C.labelText},children:[o.jsx("strong",{style:{color:C.cardText},children:"Required Capacity:"})," ",w.requiredKVA," kVA"]}),o.jsxs("div",{style:{fontSize:"0.8125rem",color:C.subtleText,fontStyle:"italic"},children:["(",_==="continuous"?"125%":"100%"," sizing factor applied)"]})]})]}),o.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:C.cardText,marginTop:0,marginBottom:"1rem"},children:"Recommended Transformer"}),o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Transformer Size"}),o.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[w.recommendedSize," kVA"]})]}),o.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${C.cardBorder}`,marginBottom:"1rem"},children:[o.jsxs("div",{style:{fontSize:"0.875rem",color:C.labelText,marginBottom:"0.5rem"},children:[o.jsx("strong",{style:{color:C.cardText},children:"Configuration:"})," ",l,"V to ",h,"V"]}),o.jsxs("div",{style:{fontSize:"0.875rem",color:C.labelText},children:[o.jsx("strong",{style:{color:C.cardText},children:"Phase:"})," ",g==="single"?"Single":"Three"," Phase"]})]}),o.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:C.labelText,marginBottom:"0.25rem"},children:"Utilization"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:C.cardText},children:[w.utilizationPercent,"%"]})]})]}),parseFloat(w.utilizationPercent)>80&&o.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"High Utilization Warning"}),o.jsx("div",{style:{fontSize:"0.8125rem"},children:"Transformer utilization above 80% may result in higher operating temperatures and reduced equipment life. Consider next size up for better efficiency."})]})]})})]}),o.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(xs,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Transformer Sizing Guidelines:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[o.jsx("li",{style:{marginBottom:"0.25rem"},children:"Size for continuous loads at 125% per NEC 450.3"}),o.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider future load growth (typically 20-25%)"}),o.jsx("li",{style:{marginBottom:"0.25rem"},children:"Keep utilization below 80% for optimal efficiency"}),o.jsx("li",{style:{marginBottom:"0.25rem"},children:"Account for inrush current for motor loads"}),o.jsx("li",{children:"Consider ambient temperature and ventilation"})]})]})]})})]}):o.jsxs("div",{children:[o.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:C.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${C.cardBorder}`,paddingBottom:"0.5rem"},children:"Transformer Information"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Transformer Rating (kVA)"}),o.jsx("input",{type:"number",value:L,onChange:M=>k(M.target.value),placeholder:"Transformer kVA",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Primary Voltage"}),o.jsxs("select",{value:O,onChange:M=>$(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"208",children:"208V"}),o.jsx("option",{value:"240",children:"240V"}),o.jsx("option",{value:"480",children:"480V"}),o.jsx("option",{value:"600",children:"600V"}),o.jsx("option",{value:"2400",children:"2400V"}),o.jsx("option",{value:"4160",children:"4160V"}),o.jsx("option",{value:"12470",children:"12470V"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Secondary Voltage"}),o.jsxs("select",{value:F,onChange:M=>oe(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"120",children:"120V"}),o.jsx("option",{value:"208",children:"208V"}),o.jsx("option",{value:"240",children:"240V"}),o.jsx("option",{value:"277",children:"277V"}),o.jsx("option",{value:"480",children:"480V"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Phase"}),o.jsxs("select",{value:ce,onChange:M=>D(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"single",children:"Single Phase"}),o.jsx("option",{value:"three",children:"Three Phase"})]})]})]})]}),B&&o.jsxs("div",{children:[o.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:C.cardText,marginTop:0,marginBottom:"1rem"},children:"Transformer Configuration"}),o.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${C.cardBorder}`},children:[o.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:C.labelText},children:[o.jsx("strong",{style:{color:C.cardText},children:"Rating:"})," ",B.kva," kVA, ",ce==="single"?"Single":"Three"," Phase"]}),o.jsxs("div",{style:{fontSize:"0.875rem",color:C.labelText},children:[o.jsx("strong",{style:{color:C.cardText},children:"Configuration:"})," ",B.primaryVoltage,"V / ",B.secondaryVoltage,"V"]})]})]}),o.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#1e40af",marginTop:0,marginBottom:"1rem"},children:"Primary Side"}),o.jsx("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${C.cardBorder}`},children:o.jsxs("div",{style:{fontSize:"0.875rem",color:C.labelText},children:[o.jsx("strong",{style:{color:C.cardText},children:"Voltage:"})," ",B.primaryVoltage,"V"]})}),o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Primary Current"}),o.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:B.primaryCurrent}),o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),o.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#059669",marginTop:0,marginBottom:"1rem"},children:"Secondary Side"}),o.jsx("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${C.cardBorder}`},children:o.jsxs("div",{style:{fontSize:"0.875rem",color:C.labelText},children:[o.jsx("strong",{style:{color:C.cardText},children:"Voltage:"})," ",B.secondaryVoltage,"V"]})}),o.jsxs("div",{style:{background:"#d1fae5",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#059669",marginBottom:"0.25rem"},children:"Secondary Current"}),o.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#059669"},children:B.secondaryCurrent}),o.jsx("div",{style:{fontSize:"0.75rem",color:"#059669",marginTop:"0.25rem"},children:"Amperes"})]})]})]}),o.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(xs,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Current Formulas:"}),o.jsxs("div",{style:{fontSize:"0.8125rem",marginBottom:"0.25rem"},children:[o.jsx("strong",{children:"Single Phase:"})," I = (kVA  1000)  V"]}),o.jsxs("div",{style:{fontSize:"0.8125rem",marginBottom:"0.5rem"},children:[o.jsx("strong",{children:"Three Phase:"})," I = (kVA  1000)  (1.732  V)"]}),o.jsx("div",{style:{fontSize:"0.75rem",fontStyle:"italic"},children:"Note: Use these currents for selecting primary and secondary protection devices per NEC Article 450."})]})]})})]}),o.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${C.cardBorder}`,fontSize:"0.8125rem",color:C.labelText,marginTop:"1rem"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:C.cardText},children:"NEC Article 450 - Transformers and Transformer Vaults:"}),"450.3: Overcurrent protection  450.9: Ventilation requirements  450.11: Marking  450.21: Dry-type transformers indoors"]})]})}),pB=pe.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=pe.useState("residential"),[i,s]=pe.useState(""),[l,u]=pe.useState(""),[h,d]=pe.useState(""),[g,b]=pe.useState(""),[_,v]=pe.useState(""),[N,E]=pe.useState(""),[L,k]=pe.useState("240"),[O,$]=pe.useState(""),[F,oe]=pe.useState("80"),[ce,D]=pe.useState("480"),[C,S]=pe.useState("three"),[V,I]=pe.useState("25"),w={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},B=()=>{const te=parseFloat(i)||0,re=parseFloat(l)||0,xe=parseFloat(h)||0,be=parseFloat(g)||0,Z=parseFloat(_)||0,W=parseFloat(N)||0,J=parseFloat(L),ie=te*3,he=2*1500,ge=1500,_e=ie+he+ge;let fe=0;_e<=3e3?fe=_e:fe=3e3+(_e-3e3)*.35;let ve=0;be>0&&(be<=12e3?ve=8e3:ve=8e3+(be-12e3)*.05);const Ne=Math.max(Z,5e3),Ue=xe,Xe=re,Ze=W,ze=fe+ve+Ne+Ue+Xe+Ze,de=ze/J;let Ft=100;return de>200?Ft=400:de>150?Ft=200:de>100&&(Ft=150),{generalLighting:ie,smallAppliance:he,laundry:ge,subtotal:_e,demandLighting:fe,rangeDemand:ve,dryerDemand:Ne,whDemand:Ue,hvacDemand:Xe,otherDemand:Ze,totalDemand:ze,totalAmperage:de,recommendedService:Ft,conductorSize:{100:"4 AWG",150:"1/0 AWG",200:"2/0 AWG",400:"400 kcmil"}[Ft]}},M=()=>{const te=parseFloat(O)||0,re=parseFloat(F)/100,xe=parseFloat(V)/100,be=parseFloat(ce),Z=te*re,W=Z*(1+xe);let J;C==="single"?J=W*1e3/be:J=W*1e3/(1.732*be);const he=[100,150,200,225,400,600,800,1e3,1200,1600,2e3,2500,3e3,4e3].find(ge=>ge>=J)||Math.ceil(J/100)*100;return{connectedLoad:te,demandLoad:Z,futureLoad:W,amperage:J,recommendedService:he}},q=B(),se=M();return pe.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="residential"){if(!i){alert("Please enter square footage before exporting to PDF");return}const te={calculatorName:"Service Entrance Sizing - Residential",inputs:{"Square Footage":`${i} sq ft`,"HVAC/Heat Load":l?`${l} W`:"Not specified","Water Heater":h?`${h} W`:"Not specified","Range/Oven":g?`${g} W`:"Not specified",Dryer:_?`${_} W`:"Not specified","Other Loads":N?`${N} W`:"Not specified","Service Voltage":`${L}V`},results:{"Recommended Service Size":`${q.recommendedService}A`,"Service Conductors":`${q.conductorSize} Copper`,"Total Demand Load":`${q.totalDemand.toFixed(0)} W`,"Calculated Amperage":`${q.totalAmperage.toFixed(1)} A`},additionalInfo:{"General Lighting Load":`${q.generalLighting.toLocaleString()} VA`,"Small Appliance Circuits":`${q.smallAppliance.toLocaleString()} VA`,"Laundry Circuit":`${q.laundry.toLocaleString()} VA`,"Lighting Demand (after factors)":`${q.demandLighting.toFixed(0)} W`,"Range Demand":g?`${q.rangeDemand.toFixed(0)} W`:"N/A","Dryer Demand":_?`${q.dryerDemand.toFixed(0)} W`:"N/A","Water Heater":h?`${q.whDemand.toFixed(0)} W`:"N/A",HVAC:l?`${q.hvacDemand.toFixed(0)} W`:"N/A","Calculation Method":"NEC Article 220.82 - Dwelling Unit Optional Calculation"},necReferences:["NEC 220.82 - Dwelling Unit Optional Calculation","NEC 230.42 - Minimum Size and Rating (service conductors)","NEC 230.79 - Rating of Service Disconnecting Means","NEC 230.90 - Where Required (overload protection)","NEC Table 310.15(B)(16) - Allowable Ampacities","Service conductors shown are approximate for 75C copper. Consult NEC for exact sizing with all derating factors."]};un(te)}else if(t==="commercial"){if(!O){alert("Please enter total connected load before exporting to PDF");return}const te={calculatorName:"Service Entrance Sizing - Commercial",inputs:{"Total Connected Load":`${O} kW`,"Demand Factor":`${F}%`,"Future Expansion":`${V}%`,"Service Voltage":`${ce}V`,"System Phase":C==="single"?"Single Phase":"Three Phase"},results:{"Recommended Service Size":`${se.recommendedService}A`,"System Configuration":`${ce}V ${C==="single"?"Single":"Three"} Phase`,"Connected Load":`${se.connectedLoad.toFixed(1)} kW`,"Demand Load":`${se.demandLoad.toFixed(1)} kW`,"With Future Expansion":`${se.futureLoad.toFixed(1)} kW`,"Calculated Amperage":`${se.amperage.toFixed(1)} A`},additionalInfo:{"Calculation Method":"Commercial demand calculation with future expansion factor","Demand Factor Applied":`${F}% of connected load`,"Future Growth Allowance":`${V}% spare capacity`,"Formula Used":C==="single"?"Amperage = (kW  1000) / Voltage":"Amperage = (kW  1000) / (1.732  Voltage)"},necReferences:["NEC Article 220 Part IV - Optional Feeder and Service Load Calculations","NEC 220.40 - General (demand factors)","NEC 230.42 - Minimum Size and Rating","NEC 230.79 - Rating of Service Disconnecting Means","Consider demand factors per NEC 220.40 and Article 220 Part IV","Include motor loads, HVAC, and large equipment per NEC requirements","Review utility requirements and available fault current","Future expansion typically 20-30% spare capacity"]};un(te)}}})),o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:o.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[o.jsx("button",{onClick:()=>n("residential"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="residential"?"#3b82f6":"transparent",color:t==="residential"?"white":w.labelText,border:`1px solid ${t==="residential"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Residential"}),o.jsx("button",{onClick:()=>n("commercial"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="commercial"?"#3b82f6":"transparent",color:t==="commercial"?"white":w.labelText,border:`1px solid ${t==="commercial"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Commercial"})]})}),t==="residential"?o.jsxs("div",{children:[o.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Information"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Square Footage"}),o.jsx("input",{type:"number",value:i,onChange:te=>s(te.target.value),placeholder:"Living area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Heated/cooled living space"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"HVAC/Heat Load (Watts)"}),o.jsx("input",{type:"number",value:l,onChange:te=>u(te.target.value),placeholder:"Largest load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Water Heater (Watts)"}),o.jsx("input",{type:"number",value:h,onChange:te=>d(te.target.value),placeholder:"Nameplate rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Range/Oven (Watts)"}),o.jsx("input",{type:"number",value:g,onChange:te=>b(te.target.value),placeholder:"Electric range",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Dryer (Watts)"}),o.jsx("input",{type:"number",value:_,onChange:te=>v(te.target.value),placeholder:"Electric dryer",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Minimum 5000W if electric"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Other Loads (Watts)"}),o.jsx("input",{type:"number",value:N,onChange:te=>E(te.target.value),placeholder:"Pool, spa, etc.",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),o.jsxs("select",{value:L,onChange:te=>k(te.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"240",children:"240V"}),o.jsx("option",{value:"208",children:"208V"})]})]})]})]}),i&&o.jsxs("div",{children:[o.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Breakdown"}),o.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${w.cardBorder}`},children:[o.jsx("strong",{style:{display:"block",marginBottom:"0.5rem",color:w.cardText,fontSize:"0.875rem"},children:"Connected Loads:"}),o.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["General Lighting: ",q.generalLighting.toLocaleString()," VA"]}),o.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Small Appliance: ",q.smallAppliance.toLocaleString()," VA"]}),o.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.5rem"},children:["Laundry: ",q.laundry.toLocaleString()," VA"]}),o.jsxs("div",{style:{fontSize:"0.875rem",color:w.subtleText,paddingTop:"0.5rem",borderTop:`1px solid ${w.cardBorder}`},children:["Subtotal: ",q.subtotal.toLocaleString()," VA"]})]}),o.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[o.jsx("strong",{style:{display:"block",marginBottom:"0.5rem",color:w.cardText,fontSize:"0.875rem"},children:"Demand Loads (after factors):"}),o.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Lighting: ",q.demandLighting.toFixed(0)," W"]}),g&&o.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Range: ",q.rangeDemand.toFixed(0)," W"]}),_&&o.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Dryer: ",q.dryerDemand.toFixed(0)," W"]}),h&&o.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Water Heater: ",q.whDemand.toFixed(0)," W"]}),l&&o.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["HVAC: ",q.hvacDemand.toFixed(0)," W"]}),N&&o.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText},children:["Other: ",q.otherDemand.toFixed(0)," W"]})]})]}),o.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Service Sizing Results"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Total Demand Load"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:q.totalDemand.toFixed(0)}),o.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"Watts"})]}),o.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Calculated Amperage"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:q.totalAmperage.toFixed(1)}),o.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"Amperes"})]})]}),o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Recommended Service Size"}),o.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[q.recommendedService,"A"]})]}),o.jsx("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center",border:`1px solid ${w.cardBorder}`},children:o.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText},children:[o.jsx("strong",{style:{color:w.cardText},children:"Service Conductors:"})," ",q.conductorSize," Copper"]})})]})]}),o.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(xs,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Important Notes:"}),o.jsx("div",{style:{fontSize:"0.8125rem"},children:"Service conductors are approximate for 75C copper. Consult NEC Table 310.15(B)(16) for exact sizing with all derating factors."})]})]})})]}):o.jsxs("div",{children:[o.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Information"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Total Connected Load (kW)"}),o.jsx("input",{type:"number",value:O,onChange:te=>$(te.target.value),placeholder:"Total building load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Demand Factor (%)"}),o.jsx("input",{type:"number",value:F,onChange:te=>oe(te.target.value),placeholder:"Typically 70-90%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Peak demand percentage"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Future Expansion (%)"}),o.jsx("input",{type:"number",value:V,onChange:te=>I(te.target.value),placeholder:"Typically 20-30%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Spare capacity for growth"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),o.jsxs("select",{value:ce,onChange:te=>D(te.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"208",children:"208V"}),o.jsx("option",{value:"240",children:"240V"}),o.jsx("option",{value:"480",children:"480V"}),o.jsx("option",{value:"600",children:"600V"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"System Phase"}),o.jsxs("select",{value:C,onChange:te=>S(te.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"single",children:"Single Phase"}),o.jsx("option",{value:"three",children:"Three Phase"})]})]})]})]}),O&&o.jsxs("div",{children:[o.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Load Calculation"}),o.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`,marginBottom:"1rem"},children:[o.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:w.labelText},children:[o.jsx("strong",{style:{color:w.cardText},children:"Connected Load:"})," ",se.connectedLoad.toFixed(1)," kW"]}),o.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:w.labelText},children:[o.jsxs("strong",{style:{color:w.cardText},children:["Demand Load (",F,"%):"]})," ",se.demandLoad.toFixed(1)," kW"]}),o.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText},children:[o.jsxs("strong",{style:{color:w.cardText},children:["With Future Expansion (",V,"%):"]})," ",se.futureLoad.toFixed(1)," kW"]})]}),o.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Calculated Amperage"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:se.amperage.toFixed(1)}),o.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"Amperes"})]})]}),o.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Recommended Service"}),o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Service Size"}),o.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[se.recommendedService,"A"]})]}),o.jsx("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center",border:`1px solid ${w.cardBorder}`},children:o.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText},children:["@ ",ce,"V ",C==="single"?"Single":"Three"," Phase"]})})]})]}),o.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(xs,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Commercial Service Considerations:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[o.jsx("li",{style:{marginBottom:"0.25rem"},children:"Include demand factors per NEC 220.40 and Article 220 Part IV"}),o.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider future expansion (typically 20-30% spare capacity)"}),o.jsx("li",{style:{marginBottom:"0.25rem"},children:"Account for motor loads, HVAC, and large equipment"}),o.jsx("li",{style:{marginBottom:"0.25rem"},children:"Review utility requirements and available fault current"}),o.jsx("li",{children:"Consider separate services for different occupancies"})]})]})]})})]}),o.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`,fontSize:"0.8125rem",color:w.labelText,marginTop:"1rem"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:w.cardText},children:"NEC Article 230 - Services and Service Equipment:"}),"220.82: Dwelling unit optional calculation  230.42: Minimum conductor size  230.79: Disconnecting means rating  230.90: Overload protection"]})]})}),mB=({gecData:r,setGecData:e,colors:t})=>{const n={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}},s=(()=>{if(!r.serviceSize)return null;const l=r.serviceSize;let u="";const h=["14","12","10","8","6","4","3","2","1"],d=["1/0","2/0","3/0","4/0"],g=parseInt(l);return h.includes(l)?parseInt(l)>=2?u="2 or smaller":l==="1"&&(u="1 or 1/0"):d.includes(l)?l==="1/0"?u="1 or 1/0":l==="2/0"||l==="3/0"?u="2/0 or 3/0":l==="4/0"&&(u="4/0 to 350"):isNaN(g)||(g>=250&&g<=350?u="4/0 to 350":g>=400&&g<=600?u="400 to 600":g>=650&&g<=1100?u="650 to 1100":g>1100&&(u="over 1100")),{serviceSize:l,category:u,gecSize:n[r.conductorMaterial][u]||"N/A"}})();return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Service Conductor Size"}),o.jsxs("select",{value:r.serviceSize,onChange:l=>e(u=>({...u,serviceSize:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"",children:"Select Size"}),o.jsx("option",{value:"8",children:"8 AWG"}),o.jsx("option",{value:"6",children:"6 AWG"}),o.jsx("option",{value:"4",children:"4 AWG"}),o.jsx("option",{value:"2",children:"2 AWG"}),o.jsx("option",{value:"1",children:"1 AWG"}),o.jsx("option",{value:"1/0",children:"1/0 AWG"}),o.jsx("option",{value:"2/0",children:"2/0 AWG"}),o.jsx("option",{value:"3/0",children:"3/0 AWG"}),o.jsx("option",{value:"4/0",children:"4/0 AWG"}),o.jsx("option",{value:"250",children:"250 kcmil"}),o.jsx("option",{value:"350",children:"350 kcmil"}),o.jsx("option",{value:"500",children:"500 kcmil"}),o.jsx("option",{value:"750",children:"750 kcmil"}),o.jsx("option",{value:"1000",children:"1000 kcmil"}),o.jsx("option",{value:"1500",children:"1500 kcmil"})]}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Largest ungrounded service conductor"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"GEC Material"}),o.jsxs("select",{value:r.conductorMaterial,onChange:l=>e(u=>({...u,conductorMaterial:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"copper",children:"Copper"}),o.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]}),s&&s.gecSize!=="N/A"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Grounding Electrode Conductor"}),o.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[s.gecSize," AWG"]}),o.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Per NEC Table 250.66"}),o.jsxs("div",{children:["Service conductor: ",s.serviceSize," AWG ",r.conductorMaterial]})]})]})}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Important Notes:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[o.jsx("li",{children:"GEC to rod/pipe/plate need not be larger than 6 AWG copper"}),o.jsx("li",{children:"GEC to concrete-encased electrode need not be larger than 4 AWG copper"}),o.jsx("li",{children:"Must be continuous without splices (except as permitted)"})]})]})]})]})},gB=({egcData:r,setEgcData:e,colors:t})=>{const n={copper:{15:"14",20:"12",30:"10",40:"10",60:"10",100:"8",200:"6",300:"4",400:"3",500:"2",600:"1",800:"1/0",1e3:"2/0",1200:"3/0",1600:"4/0",2e3:"250",2500:"350",3e3:"400",4e3:"500",5e3:"700",6e3:"800"},aluminum:{15:"12",20:"10",30:"8",40:"8",60:"8",100:"6",200:"4",300:"2",400:"1",500:"1/0",600:"2/0",800:"3/0",1e3:"4/0",1200:"250",1600:"350",2e3:"400",2500:"500",3e3:"600",4e3:"750",5e3:"1000",6e3:"1200"}},s=(()=>{const l=parseInt(r.ocpdRating);if(!l)return null;const u=Object.keys(n[r.conductorMaterial]).map(Number).sort((d,g)=>d-g),h=u.find(d=>d>=l)||u[u.length-1];return{ocpdRating:l,applicableRating:h,egcSize:n[r.conductorMaterial][h]}})();return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Overcurrent Device Rating (A)"}),o.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:r.ocpdRating,onChange:l=>{const u=l.target.value.replace(/[^0-9]/g,"");e(h=>({...h,ocpdRating:u}))},placeholder:"Enter rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Circuit breaker or fuse rating"})]}),o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["EGC Material ",o.jsx("br",{}),"  ",o.jsx("br",{})]}),o.jsxs("select",{value:r.conductorMaterial,onChange:l=>e(u=>({...u,conductorMaterial:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"copper",children:"Copper"}),o.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]}),s&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Equipment Grounding Conductor"}),o.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[s.egcSize," AWG"]}),o.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Per NEC Table 250.122"}),o.jsxs("div",{children:["OCPD rating: ",s.ocpdRating,"A"]})]})]})}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Important Notes:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[o.jsx("li",{children:"Increase proportionally if conductors upsized for voltage drop"}),o.jsx("li",{children:"Size per each raceway if conductors run in parallel"}),o.jsx("li",{children:"Based on rating of OCPD ahead of circuit"})]})]})]})]})},yB=({bondingData:r,setBondingData:e,colors:t})=>{const n={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}},s=(()=>{if(!r.serviceSize)return null;const l=r.serviceSize;let u="";const h=["14","12","10","8","6","4","3","2","1"],d=["1/0","2/0","3/0","4/0"],g=parseInt(l);return h.includes(l)?parseInt(l)>=2?u="2 or smaller":l==="1"&&(u="1 or 1/0"):d.includes(l)?l==="1/0"?u="1 or 1/0":l==="2/0"||l==="3/0"?u="2/0 or 3/0":l==="4/0"&&(u="4/0 to 350"):isNaN(g)||(g>=250&&g<=350?u="4/0 to 350":g>=400&&g<=600?u="400 to 600":g>=650&&g<=1100?u="650 to 1100":g>1100&&(u="over 1100")),{serviceSize:l,jumperSize:n[r.conductorMaterial][u]||"N/A",jumperType:r.jumperType}})();return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Bonding Jumper Type"}),o.jsxs("select",{value:r.jumperType,onChange:l=>e(u=>({...u,jumperType:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"main",children:"Main Bonding Jumper (Service)"}),o.jsx("option",{value:"system",children:"System Bonding Jumper (Separately Derived)"})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Conductor Size"}),o.jsxs("select",{value:r.serviceSize,onChange:l=>e(u=>({...u,serviceSize:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"",children:"Select Size"}),o.jsx("option",{value:"8",children:"8 AWG"}),o.jsx("option",{value:"6",children:"6 AWG"}),o.jsx("option",{value:"4",children:"4 AWG"}),o.jsx("option",{value:"2",children:"2 AWG"}),o.jsx("option",{value:"1",children:"1 AWG"}),o.jsx("option",{value:"1/0",children:"1/0 AWG"}),o.jsx("option",{value:"2/0",children:"2/0 AWG"}),o.jsx("option",{value:"3/0",children:"3/0 AWG"}),o.jsx("option",{value:"4/0",children:"4/0 AWG"}),o.jsx("option",{value:"250",children:"250 kcmil"}),o.jsx("option",{value:"500",children:"500 kcmil"}),o.jsx("option",{value:"750",children:"750 kcmil"}),o.jsx("option",{value:"1000",children:"1000 kcmil"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Material"}),o.jsxs("select",{value:r.conductorMaterial,onChange:l=>e(u=>({...u,conductorMaterial:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"copper",children:"Copper"}),o.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]})]}),s&&s.jumperSize!=="N/A"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[o.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:[r.jumperType==="main"?"Main":"System"," Bonding Jumper"]}),o.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[s.jumperSize," AWG"]}),o.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:["Per NEC ",r.jumperType==="main"?"250.28(D)":"250.30(A)(1)"]}),o.jsxs("div",{children:["Conductor size: ",s.serviceSize," AWG ",r.conductorMaterial]})]})]})}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[o.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:[r.jumperType==="main"?"Main":"System"," Bonding Jumper Requirements:"]}),o.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:r.jumperType==="main"?o.jsxs(o.Fragment,{children:[o.jsx("li",{children:"Connects grounded conductor to equipment grounding conductor"}),o.jsx("li",{children:"Sized per Table 250.66 based on service conductor"}),o.jsx("li",{children:"Can be wire, bus, screw, or similar conductor"})]}):o.jsxs(o.Fragment,{children:[o.jsx("li",{children:"Required for separately derived systems"}),o.jsx("li",{children:"Connects grounded to equipment grounding conductor"}),o.jsx("li",{children:"Installed at same location as GEC connection"})]})})]})]})]})},xB=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=pe.useState("gec"),[s,l]=pe.useState({serviceSize:"",conductorMaterial:"copper"}),[u,h]=pe.useState({ocpdRating:"",conductorMaterial:"copper"}),[d,g]=pe.useState({serviceSize:"",conductorMaterial:"copper",jumperType:"main"}),b=pe.useMemo(()=>({cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"}),[r]);return pe.useImperativeHandle(t,()=>({exportPDF:()=>{let _;if(n==="gec"){if(!s.serviceSize){alert("Please select a service conductor size before exporting");return}const v={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}};let N="";const E=s.serviceSize,L=["14","12","10","8","6","4","3","2","1"],k=["1/0","2/0","3/0","4/0"],O=parseInt(E);L.includes(E)?parseInt(E)>=2?N="2 or smaller":E==="1"&&(N="1 or 1/0"):k.includes(E)?E==="1/0"?N="1 or 1/0":E==="2/0"||E==="3/0"?N="2/0 or 3/0":E==="4/0"&&(N="4/0 to 350"):isNaN(O)||(O>=250&&O<=350?N="4/0 to 350":O>=400&&O<=600?N="400 to 600":O>=650&&O<=1100?N="650 to 1100":O>1100&&(N="over 1100"));const $=v[s.conductorMaterial][N];_={calculatorName:"Grounding & Bonding - Grounding Electrode Conductor",inputs:{serviceConductorSize:`${s.serviceSize} AWG`,material:s.conductorMaterial.charAt(0).toUpperCase()+s.conductorMaterial.slice(1)},results:{groundingElectrodeConductor:`${$} AWG ${s.conductorMaterial}`},additionalInfo:{note1:"GEC to rod/pipe/plate need not be larger than 6 AWG copper",note2:"GEC to concrete-encased electrode need not be larger than 4 AWG copper",note3:"Must be continuous without splices (except as permitted)"},necReferences:["NEC Table 250.66 - Grounding Electrode Conductor for Alternating-Current Systems","NEC 250.64 - Grounding Electrode Conductor Installation","NEC 250.52 - Grounding Electrodes"]}}else if(n==="egc"){if(!u.ocpdRating){alert("Please enter an overcurrent device rating before exporting");return}const v={copper:{15:"14",20:"12",30:"10",40:"10",60:"10",100:"8",200:"6",300:"4",400:"3",500:"2",600:"1",800:"1/0",1e3:"2/0",1200:"3/0",1600:"4/0",2e3:"250",2500:"350",3e3:"400",4e3:"500",5e3:"700",6e3:"800"},aluminum:{15:"12",20:"10",30:"8",40:"8",60:"8",100:"6",200:"4",300:"2",400:"1",500:"1/0",600:"2/0",800:"3/0",1e3:"4/0",1200:"250",1600:"350",2e3:"400",2500:"500",3e3:"600",4e3:"750",5e3:"1000",6e3:"1200"}},N=parseInt(u.ocpdRating),E=Object.keys(v[u.conductorMaterial]).map(Number).sort((O,$)=>O-$),L=E.find(O=>O>=N)||E[E.length-1],k=v[u.conductorMaterial][L];_={calculatorName:"Grounding & Bonding - Equipment Grounding Conductor",inputs:{overcurrentDeviceRating:`${N} Amps`,material:u.conductorMaterial.charAt(0).toUpperCase()+u.conductorMaterial.slice(1)},results:{equipmentGroundingConductor:`${k} AWG ${u.conductorMaterial}`,basedOnOCPDRating:`${L} Amps`},additionalInfo:{note1:"Increase proportionally if conductors upsized for voltage drop",note2:"Size per each raceway if conductors run in parallel",note3:"Based on rating of OCPD ahead of circuit"},necReferences:["NEC Table 250.122 - Minimum Size Equipment Grounding Conductors for Grounding Raceway and Equipment","NEC 250.122(B) - Increased in Size","NEC 250.122(F) - Conductors in Parallel"]}}else if(n==="bonding"){if(!d.serviceSize){alert("Please select a conductor size before exporting");return}const v={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}};let N="";const E=d.serviceSize,L=["14","12","10","8","6","4","3","2","1"],k=["1/0","2/0","3/0","4/0"],O=parseInt(E);L.includes(E)?parseInt(E)>=2?N="2 or smaller":E==="1"&&(N="1 or 1/0"):k.includes(E)?E==="1/0"?N="1 or 1/0":E==="2/0"||E==="3/0"?N="2/0 or 3/0":E==="4/0"&&(N="4/0 to 350"):isNaN(O)||(O>=250&&O<=350?N="4/0 to 350":O>=400&&O<=600?N="400 to 600":O>=650&&O<=1100?N="650 to 1100":O>1100&&(N="over 1100"));const $=v[d.conductorMaterial][N],F=d.jumperType==="main"?"Main Bonding Jumper":"System Bonding Jumper";_={calculatorName:`Grounding & Bonding - ${F}`,inputs:{jumperType:F,conductorSize:`${d.serviceSize} AWG`,material:d.conductorMaterial.charAt(0).toUpperCase()+d.conductorMaterial.slice(1)},results:{bondingJumperSize:`${$} AWG ${d.conductorMaterial}`},additionalInfo:d.jumperType==="main"?{purpose:"Connects grounded conductor to equipment grounding conductor",sizing:"Sized per Table 250.66 based on service conductor",forms:"Can be wire, bus, screw, or similar conductor"}:{purpose:"Required for separately derived systems",connection:"Connects grounded to equipment grounding conductor",location:"Installed at same location as GEC connection"},necReferences:d.jumperType==="main"?["NEC 250.28 - Main Bonding Jumper and System Bonding Jumper","NEC 250.28(D) - Size","NEC Table 250.66 - Sizing Reference"]:["NEC 250.30 - Grounding Separately Derived Alternating-Current Systems","NEC 250.30(A)(1) - System Bonding Jumper","NEC Table 250.66 - Sizing Reference"]}}un(_)}})),o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"gec",label:"Grounding Electrode"},{id:"egc",label:"Equipment Grounding"},{id:"bonding",label:"Bonding Jumpers"}].map(_=>o.jsx("button",{onClick:()=>i(_.id),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.625rem 1rem",background:n===_.id?"#3b82f6":b.sectionBg,color:n===_.id?"white":b.labelText,border:`1px solid ${n===_.id?"#3b82f6":b.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:_.label},_.id))}),o.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[n==="gec"&&o.jsx(mB,{gecData:s,setGecData:l,colors:b}),n==="egc"&&o.jsx(gB,{egcData:u,setEgcData:h,colors:b}),n==="bonding"&&o.jsx(yB,{bondingData:d,setBondingData:g,colors:b})]})]})}),vB=({offsetData:r,setOffsetData:e,colors:t})=>{const n={10:{distance:6,shrink:.01},"22.5":{distance:2.6,shrink:.06},30:{distance:2,shrink:.25},45:{distance:1.4,shrink:.41},60:{distance:1.2,shrink:.58}},s=(()=>{if(!r.obstacleHeight)return null;const l=parseFloat(r.obstacleHeight),u=n[r.bendAngle];return{distanceBetweenBends:(l*u.distance).toFixed(2),shrinkage:(l*u.shrink).toFixed(2),angle:r.bendAngle}})();return o.jsxs("div",{className:th.menu,children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Obstacle Height (inches)"}),o.jsx("input",{type:"number",value:r.obstacleHeight,onChange:l=>e(u=>({...u,obstacleHeight:l.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Height to clear obstacle"})]}),o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Bend Angle ",o.jsx("br",{}),"  ",o.jsx("br",{})]}),o.jsxs("select",{value:r.bendAngle,onChange:l=>e(u=>({...u,bendAngle:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"10",children:"10"}),o.jsx("option",{value:"22.5",children:"22.5"}),o.jsx("option",{value:"30",children:"30"}),o.jsx("option",{value:"45",children:"45"}),o.jsx("option",{value:"60",children:"60"})]}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Most common: 30 or 45"})]})]}),s&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Distance Between Bends"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[s.distanceBetweenBends,'"']})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Shrinkage"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[s.shrinkage,'"']})]})]}),o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"How to Make the Bend"}),o.jsxs("div",{children:["Mark first bend, measure ",s.distanceBetweenBends,'" from center of first bend, then make second bend at ',s.angle,"."]})]})]})}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Offset Bend Tips:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[o.jsx("li",{children:"30 bends are most common for typical offsets"}),o.jsx("li",{children:"45 bends create shorter, steeper offsets"}),o.jsx("li",{children:"Always account for shrinkage in measurements"})]})]})]})]})},bB=({stubUpData:r,setStubUpData:e,colors:t})=>{const n={"1/2":5,"3/4":6,1:8,"1-1/4":11,"1-1/2":14,2:16,"2-1/2":21,3:26,"3-1/2":30,4:34},s=(()=>{if(!r.stubHeight)return null;const l=parseFloat(r.stubHeight),u=n[r.conduitSize];return{markDistance:(l-u).toFixed(2),deduction:u,stubHeight:l.toFixed(2)}})();return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Desired Stub Height (inches)"}),o.jsx("input",{type:"number",value:r.stubHeight,onChange:l=>e(u=>({...u,stubHeight:l.target.value})),placeholder:"Enter stub height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Back of 90 to floor"})]}),o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Conduit Size ",o.jsx("br",{}),"  ",o.jsx("br",{})]}),o.jsx("select",{value:r.conduitSize,onChange:l=>e(u=>({...u,conduitSize:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.keys(n).map(l=>o.jsxs("option",{value:l,children:[l,'"']},l))})]})]}),s&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Mark At"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[s.markDistance,'"']})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Deduction"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[s.deduction,'"']})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Conduit Size"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[r.conduitSize,'"']})]})]}),o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"How to Bend"}),o.jsxs("div",{children:["Measure from end of conduit, mark at ",s.markDistance,'", line up mark with arrow on bender, make 90 bend.']})]})]})}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Stub-Up Tips:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[o.jsx("li",{children:"Deduction accounts for the radius of the bend"}),o.jsx("li",{children:"Larger conduit = larger deduction"}),o.jsx("li",{children:"Always check your bender - deductions vary by manufacturer"})]})]})]})]})},wB=({saddleData:r,setSaddleData:e,colors:t})=>{const i=(()=>{if(!r.obstacleHeight)return null;const s=parseFloat(r.obstacleHeight),l=parseFloat(r.obstacleWidth)||s*4,u=s*.3;return{centerBend:45,outerBends:22.5,distanceToOuter:(l/2).toFixed(2),shrinkage:u.toFixed(2),obstacleHeight:s.toFixed(2)}})();return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Obstacle Height (inches)"}),o.jsx("input",{type:"number",value:r.obstacleHeight,onChange:s=>e(l=>({...l,obstacleHeight:s.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Width ",o.jsx("br",{})," (Optional)"]}),o.jsx("input",{type:"number",value:r.obstacleWidth,onChange:s=>e(l=>({...l,obstacleWidth:s.target.value})),placeholder:"Auto: 4x height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]})]}),i&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Center Bend"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[i.centerBend,""]})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Outer Bends"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[i.outerBends,""]})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Distance to Outer"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[i.distanceToOuter,'"']})]})]}),o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Bending Sequence"}),o.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem"},children:[o.jsx("li",{children:"Mark center of obstacle on conduit"}),o.jsx("li",{children:"Make 45 center bend at mark"}),o.jsxs("li",{children:["Measure ",i.distanceToOuter,'" from center each direction']}),o.jsx("li",{children:"Make 22.5 bends on each side (opposite direction)"})]})]})]})}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"3-Point Saddle Tips:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[o.jsx("li",{children:"Center bend goes up, outer bends go down"}),o.jsx("li",{children:"Most common for going over pipes or other conduits"}),o.jsx("li",{children:"Mark all three bend locations before starting"})]})]})]})]})},SB=({fourPointData:r,setFourPointData:e,colors:t})=>{const i=(()=>{if(!r.obstacleHeight||!r.obstacleWidth)return null;const s=parseFloat(r.obstacleHeight),l=parseFloat(r.obstacleWidth),u=l/2,h=l/4,d=s*.15;return{bendAngle:22.5,distanceToOuter:u.toFixed(2),innerSpacing:h.toFixed(2),shrinkage:d.toFixed(2)}})();return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Height ",o.jsx("br",{})," (inches)"]}),o.jsx("input",{type:"number",value:r.obstacleHeight,onChange:s=>e(l=>({...l,obstacleHeight:s.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Width ",o.jsx("br",{})," (inches)"]}),o.jsx("input",{type:"number",value:r.obstacleWidth,onChange:s=>e(l=>({...l,obstacleWidth:s.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]})]}),i&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"All Bends"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[i.bendAngle,""]})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Outer Distance"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[i.distanceToOuter,'"']})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Inner Spacing"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[i.innerSpacing,'"']})]})]}),o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Bending Sequence"}),o.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem"},children:[o.jsx("li",{children:"Mark center of obstacle on conduit"}),o.jsxs("li",{children:["Measure ",i.distanceToOuter,'" from center (outer bends)']}),o.jsxs("li",{children:["Measure ",i.innerSpacing,'" from center (inner bends)']}),o.jsx("li",{children:"Make all four 22.5 bends: outer up, inner down"})]})]})]})}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"4-Point Saddle Tips:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[o.jsx("li",{children:"Used for larger obstacles where 3-point won't work"}),o.jsx("li",{children:"Outer bends go up, inner bends go down"}),o.jsx("li",{children:"Creates a flatter top for better clearance"})]})]})]})]})},_B=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=pe.useState("offset"),[s,l]=pe.useState({obstacleHeight:"",bendAngle:"30"}),[u,h]=pe.useState({stubHeight:"",conduitSize:"3/4"}),[d,g]=pe.useState({obstacleHeight:"",obstacleWidth:""}),[b,_]=pe.useState({obstacleHeight:"",obstacleWidth:""}),v={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};pe.useImperativeHandle(t,()=>({exportPDF:()=>{let E;if(n==="offset"){if(!s.obstacleHeight){alert("Please enter obstacle height for Offset Bends before exporting");return}const L={10:{distance:6,shrink:.01},"22.5":{distance:2.6,shrink:.06},30:{distance:2,shrink:.25},45:{distance:1.4,shrink:.41},60:{distance:1.2,shrink:.58}},k=parseFloat(s.obstacleHeight),O=L[s.bendAngle],$=(k*O.distance).toFixed(2),F=(k*O.shrink).toFixed(2);E={calculatorName:"Conduit Bending - Offset Bends",inputs:{obstacleHeight:`${s.obstacleHeight} inches`,bendAngle:`${s.bendAngle}`},results:{distanceBetweenBends:`${$} inches`,shrinkage:`${F} inches`},additionalInfo:{instructions:`Mark first bend, measure ${$}" from center of first bend, then make second bend at ${s.bendAngle}`,multiplierUsed:`Distance: ${O.distance}, Shrink: ${O.shrink}`},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","30 bends are most common for typical offsets","45 bends create shorter, steeper offsets"]}}else if(n==="stubup"){if(!u.stubHeight){alert("Please enter stub height for 90 Stub-Up before exporting");return}const L={"1/2":5,"3/4":6,1:8,"1-1/4":11,"1-1/2":14,2:16,"2-1/2":21,3:26,"3-1/2":30,4:34},k=parseFloat(u.stubHeight),O=L[u.conduitSize],$=(k-O).toFixed(2);E={calculatorName:"Conduit Bending - 90 Stub-Up",inputs:{desiredStubHeight:`${u.stubHeight} inches`,conduitSize:`${u.conduitSize}"`},results:{markAt:`${$} inches`,deduction:`${O} inches`},additionalInfo:{instructions:`Measure from end of conduit, mark at ${$}", line up mark with arrow on bender, make 90 bend`,note:"Deduction accounts for the radius of the bend - larger conduit requires larger deduction"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Always check your bender - deductions vary by manufacturer"]}}else if(n==="saddle"){if(!d.obstacleHeight){alert("Please enter obstacle height for 3-Point Saddle before exporting");return}const L=parseFloat(d.obstacleHeight),k=parseFloat(d.obstacleWidth)||L*4,O=(L*.3).toFixed(2),$=(k/2).toFixed(2);E={calculatorName:"Conduit Bending - 3-Point Saddle",inputs:{obstacleHeight:`${d.obstacleHeight} inches`,obstacleWidth:d.obstacleWidth?`${d.obstacleWidth} inches`:`${k} inches (Auto: 4x height)`},results:{centerBend:"45",outerBends:"22.5",distanceToOuter:`${$} inches`,shrinkage:`${O} inches`},additionalInfo:{bendingSequence:`1) Mark center of obstacle on conduit 2) Make 45 center bend at mark 3) Measure ${$}" from center each direction 4) Make 22.5 bends on each side (opposite direction)`,tip:"Center bend goes up, outer bends go down"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Most common for going over pipes or other conduits","Mark all three bend locations before starting"]}}else if(n==="fourpoint"){if(!b.obstacleHeight||!b.obstacleWidth){alert("Please enter both obstacle height and width for 4-Point Saddle before exporting");return}const L=parseFloat(b.obstacleHeight),k=parseFloat(b.obstacleWidth),O=(k/2).toFixed(2),$=(k/4).toFixed(2),F=(L*.15).toFixed(2);E={calculatorName:"Conduit Bending - 4-Point Saddle",inputs:{obstacleHeight:`${b.obstacleHeight} inches`,obstacleWidth:`${b.obstacleWidth} inches`},results:{allBends:"22.5",outerDistance:`${O} inches`,innerSpacing:`${$} inches`,shrinkage:`${F} inches`},additionalInfo:{bendingSequence:`1) Mark center of obstacle on conduit 2) Measure ${O}" from center (outer bends) 3) Measure ${$}" from center (inner bends) 4) Make all four 22.5 bends: outer up, inner down`,tip:"Used for larger obstacles where 3-point saddle will not work"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Creates a flatter top for better clearance over wide obstacles"]}}un(E)}}));const N={offset:o.jsx(vB,{offsetData:s,setOffsetData:l,colors:v}),stubup:o.jsx(bB,{stubUpData:u,setStubUpData:h,colors:v}),saddle:o.jsx(wB,{saddleData:d,setSaddleData:g,colors:v}),fourpoint:o.jsx(SB,{fourPointData:b,setFourPointData:_,colors:v})};return o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"offset",label:"Offset Bends"},{id:"stubup",label:"90 Stub-Up"},{id:"saddle",label:"3-Point Saddle"},{id:"fourpoint",label:"4-Point Saddle"}].map(E=>o.jsx("button",{className:th.btn,onClick:()=>i(E.id),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.625rem 1rem",background:n===E.id?"#3b82f6":v.sectionBg,color:n===E.id?"white":v.labelText,border:`1px solid ${n===E.id?"#3b82f6":v.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:E.label},E.id))}),o.jsx("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:N[n]})]})}),TB=({lumensData:r,setLumensData:e,colors:t})=>{const n={living:10,kitchen:50,bathroom:70,bedroom:10,office:50,workshop:75,garage:50,hallway:5,dining:30,laundry:50},i={living:"Living Room (10 fc)",kitchen:"Kitchen (50 fc)",bathroom:"Bathroom (70 fc)",bedroom:"Bedroom (10 fc)",office:"Office/Study (50 fc)",workshop:"Workshop (75 fc)",garage:"Garage (50 fc)",hallway:"Hallway (5 fc)",dining:"Dining Room (30 fc)",laundry:"Laundry Room (50 fc)"},l=(()=>{if(!r.roomLength||!r.roomWidth)return null;const u=parseFloat(r.roomLength),h=parseFloat(r.roomWidth),d=u*h,g=n[r.roomType],b=g*d;let _=null;if(r.lumensPerFixture){const v=parseFloat(r.lumensPerFixture);_=Math.ceil(b/v)}return{area:d.toFixed(1),footCandles:g,totalLumens:b.toFixed(0),fixturesNeeded:_}})();return o.jsxs("div",{className:th.menu,children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),o.jsx("input",{type:"number",value:r.roomLength,onChange:u=>e(h=>({...h,roomLength:u.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),o.jsx("input",{type:"number",value:r.roomWidth,onChange:u=>e(h=>({...h,roomWidth:u.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Room Type ",o.jsx("br",{}),"  ",o.jsx("br",{})]}),o.jsx("select",{value:r.roomType,onChange:u=>e(h=>({...h,roomType:u.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.entries(i).map(([u,h])=>o.jsx("option",{value:u,children:h},u))}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"fc = foot-candles"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Lumens per Fixture (Optional)"}),o.jsx("input",{type:"number",value:r.lumensPerFixture,onChange:u=>e(h=>({...h,lumensPerFixture:u.target.value})),placeholder:"e.g., 800",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"To calculate fixture count"})]})]}),l&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:l.fixturesNeeded?"repeat(3, 1fr)":"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Room Area"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:l.area}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"sq ft"})]}),o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Lumens Needed"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:l.totalLumens}),o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"lumens"})]}),l.fixturesNeeded&&o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Fixtures Needed"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:l.fixturesNeeded}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"fixtures"})]})]}),o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Lighting Requirements"}),o.jsxs("div",{children:["Recommended level: ",l.footCandles," foot-candles"]}),l.fixturesNeeded&&o.jsxs("div",{children:["Using ",r.lumensPerFixture," lumens per fixture"]})]})]})}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Lighting Tips:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[o.jsx("li",{children:"LED bulbs typically produce 60-100 lumens per watt"}),o.jsx("li",{children:"Layer lighting: combine ambient, task, and accent lighting"}),o.jsx("li",{children:"Dark wall colors absorb light; increase lumens by 10-20%"})]})]})]})]})},AB=({spacingData:r,setSpacingData:e,colors:t})=>{const n={recessed:1.5,pendant:1,track:2,surface:1.5},s=(()=>{if(!r.roomLength||!r.roomWidth)return null;const l=parseFloat(r.roomLength),u=parseFloat(r.roomWidth),h=parseFloat(r.ceilingHeight),d=n[r.fixtureType],g=h*d,b=r.fixtureType==="recessed"?6:g*.8,_=Math.max(2,Math.round(l/b)),v=Math.max(2,Math.round(u/b)),N=_*v,E=l/_,L=u/v,k=E/2,O=L/2;return{maxSpacing:g.toFixed(1),fixturesLength:_,fixturesWidth:v,totalFixtures:N,actualSpacingLength:E.toFixed(1),actualSpacingWidth:L.toFixed(1),wallOffsetLength:k.toFixed(1),wallOffsetWidth:O.toFixed(1)}})();return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),o.jsx("input",{type:"number",value:r.roomLength,onChange:l=>e(u=>({...u,roomLength:l.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),o.jsx("input",{type:"number",value:r.roomWidth,onChange:l=>e(u=>({...u,roomWidth:l.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Ceiling Height (feet)"}),o.jsx("input",{type:"number",value:r.ceilingHeight,onChange:l=>e(u=>({...u,ceilingHeight:l.target.value})),placeholder:"8",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Fixture Type"}),o.jsxs("select",{value:r.fixtureType,onChange:l=>e(u=>({...u,fixtureType:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"recessed",children:"Recessed Can (1.5:1 ratio)"}),o.jsx("option",{value:"pendant",children:"Pendant (1:1 ratio)"}),o.jsx("option",{value:"track",children:"Track Light (2:1 ratio)"}),o.jsx("option",{value:"surface",children:"Surface Mount (1.5:1 ratio)"})]})]})]}),s&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Max Spacing"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:s.maxSpacing}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"feet"})]}),o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Fixtures"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:s.totalFixtures}),o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"fixtures"})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Layout"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[s.fixturesLength,"",s.fixturesWidth]}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"grid"})]})]}),o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Spacing Results"}),o.jsxs("div",{children:["Length spacing: ",s.actualSpacingLength," ft"]}),o.jsxs("div",{children:["Width spacing: ",s.actualSpacingWidth," ft"]}),o.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.8125rem"},children:["Start ",s.wallOffsetLength," ft from walls (length) and ",s.wallOffsetWidth," ft from walls (width)"]})]})]})}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Spacing Guidelines:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[o.jsx("li",{children:"Industry standard: 4-6 feet spacing for recessed cans"}),o.jsx("li",{children:"Spacing ratio = max distance between fixtures  ceiling height"}),o.jsx("li",{children:"Space fixtures evenly with proper wall offsets for uniform coverage"})]})]})]})]})},CB=({wattsData:r,setWattsData:e,colors:t})=>{const n={office:1,retail:1.5,warehouse:.5,school:1.2,hospital:1,hotel:1,restaurant:1.3,residential:1},i={office:"Office Building (1.0 W/sq ft)",retail:"Retail Store (1.5 W/sq ft)",warehouse:"Warehouse (0.5 W/sq ft)",school:"School (1.2 W/sq ft)",hospital:"Hospital (1.0 W/sq ft)",hotel:"Hotel (1.0 W/sq ft)",restaurant:"Restaurant (1.3 W/sq ft)",residential:"Residential (1.0 W/sq ft)"},l=(()=>{if(!r.area)return null;const u=parseFloat(r.area),h=n[r.buildingType],d=u*h,g=d,b=g/120,_=Math.ceil(b/16);return{wattsPerSqFt:h,totalWatts:d.toFixed(0),totalVA:g.toFixed(0),amperage:b.toFixed(1),circuits:_}})();return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Area (square feet)"}),o.jsx("input",{type:"number",value:r.area,onChange:u=>e(h=>({...h,area:u.target.value})),placeholder:"Enter area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Building Type"}),o.jsx("select",{value:r.buildingType,onChange:u=>e(h=>({...h,buildingType:u.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.entries(i).map(([u,h])=>o.jsx("option",{value:u,children:h},u))}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Per NEC Table 220.12"})]})]}),l&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Unit Load"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:l.wattsPerSqFt}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"W/sq ft"})]}),o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Load"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:l.totalWatts}),o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"watts"})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:l.circuits}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"needed"})]})]}),o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Lighting Load Calculation"}),o.jsxs("div",{children:["Total VA: ",l.totalVA," VA"]}),o.jsxs("div",{children:["Current @ 120V: ",l.amperage," A"]})]})]})}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Requirements:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[o.jsx("li",{children:"NEC 220.12 specifies unit lighting loads by occupancy"}),o.jsx("li",{children:"Calculate using building area, not just lit area"}),o.jsx("li",{children:"Continuous loads require 125% conductor/OCPD sizing"})]})]})]})]})},kB=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=pe.useState("lumens"),[s,l]=pe.useState({roomLength:"",roomWidth:"",roomType:"living",lumensPerFixture:""}),[u,h]=pe.useState({roomLength:"",roomWidth:"",ceilingHeight:"8",fixtureType:"recessed"}),[d,g]=pe.useState({area:"",buildingType:"office"}),b={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};pe.useImperativeHandle(t,()=>({exportPDF:()=>{let v;if(n==="lumens"){if(!s.roomLength||!s.roomWidth){alert("Please enter room dimensions before exporting");return}const N={living:"Living Room",kitchen:"Kitchen",bathroom:"Bathroom",bedroom:"Bedroom",office:"Office/Study",workshop:"Workshop",garage:"Garage",hallway:"Hallway",dining:"Dining Room",laundry:"Laundry Room"},E={living:10,kitchen:50,bathroom:70,bedroom:10,office:50,workshop:75,garage:50,hallway:5,dining:30,laundry:50},L=parseFloat(s.roomLength),k=parseFloat(s.roomWidth),O=(L*k).toFixed(1),$=E[s.roomType],F=($*O).toFixed(0),oe={roomLength:`${s.roomLength} feet`,roomWidth:`${s.roomWidth} feet`,roomType:`${N[s.roomType]} (${$} fc)`},ce={roomArea:`${O} sq ft`,totalLumensNeeded:`${F} lumens`};if(s.lumensPerFixture){const D=parseFloat(s.lumensPerFixture),C=Math.ceil(parseFloat(F)/D);oe.lumensPerFixture=`${s.lumensPerFixture} lumens`,ce.fixturesNeeded=`${C} fixtures`}v={calculatorName:"Lighting Calculations - Room Lumens",inputs:oe,results:ce,additionalInfo:{calculation:`Area (${O} sq ft)  Recommended Level (${$} foot-candles) = ${F} lumens`,tip1:"LED bulbs typically produce 60-100 lumens per watt",tip2:"Layer lighting: combine ambient, task, and accent lighting",tip3:"Dark wall colors absorb light; increase lumens by 10-20%"},necReferences:["IES (Illuminating Engineering Society) recommended light levels","Foot-candles measure illuminance on a surface","1 foot-candle = 1 lumen per square foot"]}}else if(n==="spacing"){if(!u.roomLength||!u.roomWidth){alert("Please enter room dimensions before exporting");return}const N={recessed:"Recessed Can (1.5:1 ratio)",pendant:"Pendant (1:1 ratio)",track:"Track Light (2:1 ratio)",surface:"Surface Mount (1.5:1 ratio)"},E={recessed:1.5,pendant:1,track:2,surface:1.5},L=parseFloat(u.roomLength),k=parseFloat(u.roomWidth),O=parseFloat(u.ceilingHeight),$=E[u.fixtureType],F=(O*$).toFixed(1),oe=u.fixtureType==="recessed"?6:parseFloat(F)*.8,ce=Math.max(2,Math.round(L/oe)),D=Math.max(2,Math.round(k/oe)),C=ce*D,S=(L/ce).toFixed(1),V=(k/D).toFixed(1),I=(parseFloat(S)/2).toFixed(1),w=(parseFloat(V)/2).toFixed(1);v={calculatorName:"Lighting Calculations - Fixture Spacing",inputs:{roomLength:`${u.roomLength} feet`,roomWidth:`${u.roomWidth} feet`,ceilingHeight:`${u.ceilingHeight} feet`,fixtureType:N[u.fixtureType]},results:{maximumSpacing:`${F} feet`,totalFixtures:`${C} fixtures`,layoutGrid:`${ce}  ${D}`,lengthSpacing:`${S} feet`,widthSpacing:`${V} feet`},additionalInfo:{wallOffsets:`Start ${I} ft from walls (length) and ${w} ft from walls (width)`,spacingFormula:`Maximum spacing = Ceiling height (${O} ft)  Spacing ratio (${$}) = ${F} ft`,tip1:"Industry standard: 4-6 feet spacing for recessed cans",tip2:"Space fixtures evenly with proper wall offsets for uniform coverage"},necReferences:["Spacing ratio guidelines from IES Lighting Handbook","Recessed fixtures: 1.5:1 ratio (spacing to mounting height)","Pendant fixtures: 1:1 ratio for focused task lighting","Track lights: 2:1 ratio for accent lighting"]}}else if(n==="watts"){if(!d.area){alert("Please enter area before exporting");return}const N={office:"Office Building",retail:"Retail Store",warehouse:"Warehouse",school:"School",hospital:"Hospital",hotel:"Hotel",restaurant:"Restaurant",residential:"Residential"},E={office:1,retail:1.5,warehouse:.5,school:1.2,hospital:1,hotel:1,restaurant:1.3,residential:1},L=parseFloat(d.area),k=E[d.buildingType],O=(L*k).toFixed(0),$=O,F=(parseFloat($)/120).toFixed(1),oe=Math.ceil(parseFloat(F)/16);v={calculatorName:"Lighting Calculations - Watts per Square Foot",inputs:{area:`${d.area} square feet`,buildingType:`${N[d.buildingType]} (${k} W/sq ft)`},results:{unitLoad:`${k} W/sq ft`,totalLoad:`${O} watts`,totalVA:`${$} VA`,currentAt120V:`${F} Amps`,requiredCircuits:`${oe}  20A circuits`},additionalInfo:{calculation:`Area (${L} sq ft)  Unit Load (${k} W/sq ft) = ${O} watts`,circuitCalculation:`Total current (${F} A)  16A (80% of 20A) = ${oe} circuits needed`,note:"Continuous loads require 125% conductor/OCPD sizing"},necReferences:["NEC Table 220.12 - General Lighting Loads by Occupancy","NEC 210.19(A)(1) - Branch Circuit Ampacity","NEC 210.20(A) - Continuous and Noncontinuous Loads","Calculate using building area, not just lit area"]}}un(v)}}));const _={lumens:o.jsx(TB,{lumensData:s,setLumensData:l,colors:b}),spacing:o.jsx(AB,{spacingData:u,setSpacingData:h,colors:b}),watts:o.jsx(CB,{wattsData:d,setWattsData:g,colors:b})};return o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"lumens",label:"Room Lumens"},{id:"spacing",label:"Fixture Spacing"},{id:"watts",label:"Watts/Sq Ft"}].map(v=>o.jsx("button",{className:th.btn,onClick:()=>i(v.id),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.625rem 1rem",background:n===v.id?"#3b82f6":b.sectionBg,color:n===v.id?"white":b.labelText,border:`1px solid ${n===v.id?"#3b82f6":b.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:v.label},v.id))}),o.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:_[n]})]})}),IB=({generalData:r,setGeneralData:e,colors:t})=>{const i=(()=>{if(!r.roomLength||!r.roomWidth)return null;const s=parseFloat(r.roomLength),l=parseFloat(r.roomWidth),u=(s+l)*2,h=Math.max(2,Math.ceil(u/12));let d=0;if(r.hasCounters){const v=parseFloat(r.counterLength)||0;d=Math.max(2,Math.ceil(v/2))}const g=h+d,b=Math.ceil(g/8),_=Math.ceil(g/10);return{perimeter:u.toFixed(1),wallReceptacles:h,counterReceptacles:d,totalReceptacles:g,circuits15A:b,circuits20A:_}})();return o.jsxs("div",{className:th.menu,children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),o.jsx("input",{type:"number",value:r.roomLength,onChange:s=>e(l=>({...l,roomLength:s.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),o.jsx("input",{type:"number",value:r.roomWidth,onChange:s=>e(l=>({...l,roomWidth:s.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),o.jsx("div",{style:{gridColumn:"1 / -1"},children:o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:r.hasCounters,onChange:s=>e(l=>({...l,hasCounters:s.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Room has countertops/islands"]})}),r.hasCounters&&o.jsxs("div",{style:{gridColumn:"1 / -1"},children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Counter Length (feet)"}),o.jsx("input",{type:"number",value:r.counterLength,onChange:s=>e(l=>({...l,counterLength:s.target.value})),placeholder:"Enter counter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"For kitchens/break rooms"})]})]}),i&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:i.counterReceptacles>0?"repeat(3, 1fr)":"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Wall Receptacles"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:i.wallReceptacles})]}),i.counterReceptacles>0&&o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Counter Receptacles"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.counterReceptacles})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Needed"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.totalReceptacles})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"15A Circuits"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.circuits15A})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.circuits20A})]})]}),o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"NEC Requirements Met"}),o.jsxs("div",{children:["Room perimeter: ",i.perimeter," ft"]}),o.jsx("div",{children:"Spacing: One receptacle every 12 feet of wall space"}),i.counterReceptacles>0&&o.jsx("div",{children:"Counter spacing: One receptacle every 2 feet"})]})]})}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC 210.52 Requirements:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[o.jsx("li",{children:"Wall: Receptacle within 6 ft of doorway, then every 12 ft"}),o.jsx("li",{children:"No point along wall more than 6 ft from receptacle"}),o.jsx("li",{children:"Counters: One receptacle every 24 inches of counter space"}),o.jsx("li",{children:"Kitchen requires min. 2 small appliance circuits (20A)"})]})]})]})]})},EB=({kitchenData:r,setKitchenData:e,colors:t})=>{const i=(()=>{if(!r.counterLength)return null;const s=parseFloat(r.counterLength),l=parseFloat(r.islandLength)||0,u=Math.max(2,Math.ceil(s/2)),h=l>=2?Math.max(1,Math.ceil(l/4)):0,d=2,g=u+h;let b=0;return r.dishwasher&&b++,r.disposer&&b++,r.microwave&&b++,r.range&&b++,{counterReceptacles:u,islandReceptacles:h,totalReceptacles:u+h,smallApplianceCircuits:d,dedicatedCircuits:b,gfciRequired:g}})();return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Counter Length (feet)"}),o.jsx("input",{type:"number",value:r.counterLength,onChange:s=>e(l=>({...l,counterLength:s.target.value})),placeholder:"Enter counter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Island Length (feet) - Optional"}),o.jsx("input",{type:"number",value:r.islandLength,onChange:s=>e(l=>({...l,islandLength:s.target.value})),placeholder:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:'Required if island  24" long  12" wide'})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.75rem",color:t.cardText,fontSize:"0.875rem"},children:"Dedicated Appliance Circuits:"}),o.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:r.dishwasher,onChange:s=>e(l=>({...l,dishwasher:s.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Dishwasher (dedicated 15A/20A)"]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:r.disposer,onChange:s=>e(l=>({...l,disposer:s.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Garbage Disposer (dedicated 15A/20A)"]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:r.microwave,onChange:s=>e(l=>({...l,microwave:s.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Microwave (dedicated 20A)"]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:r.range,onChange:s=>e(l=>({...l,range:s.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Range/Cooktop (240V, 40-50A)"]})]})]})]}),i&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Counter Receptacles"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:i.counterReceptacles})]}),i.islandReceptacles>0&&o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Island Receptacles"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.islandReceptacles})]}),i.islandReceptacles===0&&o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"GFCI Required"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.gfciRequired})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Small Appliance Circuits"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.smallApplianceCircuits}),o.jsx("div",{style:{fontSize:"0.65rem",color:t.subtleText,marginTop:"0.25rem"},children:"20A each"})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Dedicated Circuits"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.dedicatedCircuits}),o.jsx("div",{style:{fontSize:"0.65rem",color:t.subtleText,marginTop:"0.25rem"},children:"for appliances"})]})]}),o.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(vc,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"GFCI Protection Required"}),o.jsxs("div",{children:["All ",i.gfciRequired," countertop receptacles require GFCI protection per NEC 210.8(A)"]})]})]})}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Kitchen Requirements:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[o.jsx("li",{children:"Min. 2 small appliance circuits (20A) for countertop receptacles"}),o.jsx("li",{children:"Counter receptacles: One every 24 inches, all GFCI protected"}),o.jsx("li",{children:'Island receptacles required if island  24" long  12" wide'}),o.jsx("li",{children:"Dishwasher, disposer typically need dedicated 15A or 20A circuits"})]})]})]})]})},jB=({bathroomData:r,setBathroomData:e,colors:t})=>{const i=(()=>{const s=parseInt(r.numBasins)||1,l=r.hasTub;let u=Math.max(1,s);l&&(u=Math.max(u,2));const h=r.sharedCircuit?1:s>=2?2:1;return{receptacles:u,dedicatedCircuits:h,gfciRequired:u,numBasins:s}})();return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Number of Sinks/Basins"}),o.jsxs("select",{value:r.numBasins,onChange:s=>e(l=>({...l,numBasins:s.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"1",children:"1 Basin"}),o.jsx("option",{value:"2",children:"2 Basins (Double Vanity)"}),o.jsx("option",{value:"3",children:"3+ Basins"})]})]}),o.jsx("div",{children:o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:r.hasTub,onChange:s=>e(l=>({...l,hasTub:s.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Has Bathtub/Shower Area"]})}),o.jsxs("div",{children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:r.sharedCircuit,onChange:s=>e(l=>({...l,sharedCircuit:s.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Share circuit with other bathrooms"]}),o.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",marginLeft:"1.625rem"},children:"One 20A circuit can serve multiple bathrooms if only serving receptacles"})]})]}),i&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Receptacles Needed"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:i.receptacles})]}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.dedicatedCircuits})]})]}),o.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(vc,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"GFCI Protection Required"}),o.jsxs("div",{children:["All ",i.gfciRequired," bathroom receptacles require GFCI protection per NEC 210.8(A)"]})]})]})}),o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Installation Guidelines"}),o.jsx("div",{children:" At least one receptacle within 3 feet of each basin"}),o.jsx("div",{children:" Receptacles must be readily accessible (not behind toilet)"}),o.jsx("div",{children:" Install at least 12 inches above countertop"})]})]})}),o.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Bathroom Requirements:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[o.jsx("li",{children:"NEC 210.52(D): Min. 1 receptacle within 3 ft of basin"}),o.jsx("li",{children:"NEC 210.11(C)(3): Min. 1 dedicated 20A circuit for bathroom receptacles"}),o.jsx("li",{children:"NEC 210.8(A): All bathroom receptacles require GFCI protection"}),o.jsx("li",{children:"One 20A circuit can serve receptacles in multiple bathrooms"})]})]})]})]})},RB=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=pe.useState("general"),[s,l]=pe.useState({roomLength:"",roomWidth:"",hasCounters:!1,counterLength:""}),[u,h]=pe.useState({counterLength:"",islandLength:"",dishwasher:!1,disposer:!1,microwave:!1,range:!1}),[d,g]=pe.useState({numBasins:"1",hasTub:!1,sharedCircuit:!1}),b={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};pe.useImperativeHandle(t,()=>({exportPDF:()=>{let v;if(n==="general"){if(!s.roomLength||!s.roomWidth){alert("Please enter room dimensions before exporting");return}const N=parseFloat(s.roomLength),E=parseFloat(s.roomWidth),L=((N+E)*2).toFixed(1),k=Math.max(2,Math.ceil(L/12));let O=0;if(s.hasCounters&&s.counterLength){const C=parseFloat(s.counterLength);O=Math.max(2,Math.ceil(C/2))}const $=k+O,F=Math.ceil($/8),oe=Math.ceil($/10),ce={roomLength:`${s.roomLength} feet`,roomWidth:`${s.roomWidth} feet`,roomPerimeter:`${L} feet`};s.hasCounters&&s.counterLength&&(ce.counterLength=`${s.counterLength} feet`);const D={wallReceptacles:`${k} receptacles`,totalReceptacles:`${$} receptacles`,circuits15A:`${F} circuits (15A)`,circuits20A:`${oe} circuits (20A)`};O>0&&(D.counterReceptacles=`${O} receptacles`),v={calculatorName:"Receptacle Calculator - General Room",inputs:ce,results:D,additionalInfo:{spacing:"One receptacle every 12 feet of wall space",rule:"No point along wall more than 6 feet from receptacle",counterRule:O>0?"Counter receptacles: one every 24 inches":null},necReferences:["NEC 210.52(A) - General Provisions","Receptacle within 6 ft of doorway, then every 12 ft","No point along wall more than 6 ft from receptacle","Conservative: 8 receptacles per 15A circuit, 10 per 20A circuit"]}}else if(n==="kitchen"){if(!u.counterLength){alert("Please enter counter length before exporting");return}const N=parseFloat(u.counterLength),E=parseFloat(u.islandLength)||0,L=Math.max(2,Math.ceil(N/2)),k=E>=2?Math.max(1,Math.ceil(E/4)):0,O=L+k,$=2,F=O;let oe=0;const ce=[];u.dishwasher&&(oe++,ce.push("Dishwasher (15A/20A)")),u.disposer&&(oe++,ce.push("Garbage Disposer (15A/20A)")),u.microwave&&(oe++,ce.push("Microwave (20A)")),u.range&&(oe++,ce.push("Range/Cooktop (240V, 40-50A)"));const D={counterLength:`${u.counterLength} feet`};E>0&&(D.islandLength=`${u.islandLength} feet`),ce.length>0&&(D.dedicatedAppliances=ce.join(", "));const C={counterReceptacles:`${L} receptacles`,totalReceptacles:`${O} receptacles`,smallApplianceCircuits:`${$} circuits (20A each)`,gfciRequired:`${F} GFCI-protected receptacles`};k>0&&(C.islandReceptacles=`${k} receptacles`),oe>0&&(C.dedicatedCircuits=`${oe} dedicated circuits`),v={calculatorName:"Receptacle Calculator - Kitchen",inputs:D,results:C,additionalInfo:{counterSpacing:"One receptacle every 24 inches of counter space",islandRequirement:'Island receptacles required if island  24" long  12" wide',gfciNote:"All countertop receptacles require GFCI protection"},necReferences:["NEC 210.52(C) - Countertops","NEC 210.11(C)(1) - Min. 2 small appliance circuits (20A)","NEC 210.8(A) - GFCI protection required for all countertop receptacles",'Island receptacles required if  24" long  12" wide']}}else if(n==="bathroom"){const N=parseInt(d.numBasins)||1,E=d.hasTub;let L=Math.max(1,N);E&&(L=Math.max(L,2));const k=d.sharedCircuit?1:N>=2?2:1,O=L,F={numberOfBasins:N===1?"1 Basin":N===2?"2 Basins (Double Vanity)":"3+ Basins",hasTubShower:E?"Yes":"No",sharedCircuit:d.sharedCircuit?"Yes (shared with other bathrooms)":"No (dedicated)"},oe={receptaclesNeeded:`${L} receptacles`,dedicatedCircuits:`${k} circuits (20A)`,gfciRequired:`${O} GFCI-protected receptacles`};v={calculatorName:"Receptacle Calculator - Bathroom",inputs:F,results:oe,additionalInfo:{spacing:"At least one receptacle within 3 feet of each basin",installation:"Install at least 12 inches above countertop",accessibility:"Receptacles must be readily accessible (not behind toilet)",gfciNote:"All bathroom receptacles require GFCI protection"},necReferences:["NEC 210.52(D) - Min. 1 receptacle within 3 ft of basin","NEC 210.11(C)(3) - Min. 1 dedicated 20A circuit for bathroom receptacles","NEC 210.8(A) - All bathroom receptacles require GFCI protection","One 20A circuit can serve receptacles in multiple bathrooms"]}}un(v)}}));const _={general:o.jsx(IB,{generalData:s,setGeneralData:l,colors:b}),kitchen:o.jsx(EB,{kitchenData:u,setKitchenData:h,colors:b}),bathroom:o.jsx(jB,{bathroomData:d,setBathroomData:g,colors:b})};return o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"general",label:"General Room"},{id:"kitchen",label:"Kitchen"},{id:"bathroom",label:"Bathroom"}].map(v=>o.jsx("button",{className:th.btn,onClick:()=>i(v.id),style:{flex:"1 1 auto",minWidth:"100px",padding:"0.625rem 1rem",background:n===v.id?"#3b82f6":b.sectionBg,color:n===v.id?"white":b.labelText,border:`1px solid ${n===v.id?"#3b82f6":b.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:v.label},v.id))}),o.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:_[n]})]})});function PB({onNavigate:r,currentView:e,isDarkMode:t=!1}){const n={bg:t?"#1a1a1a":"#ffffff",border:t?"#2a2a2a":"#e5e7eb",activeText:"#3b82f6",inactiveText:t?"#999999":"#6b7280"},i=l=>({background:"transparent",border:"0",borderWidth:"0",outline:"none",boxShadow:"none",color:l?n.activeText:n.inactiveText,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",gap:"0.25rem",fontSize:"0.625rem",fontWeight:"500",flex:"1 1 0",padding:"0.5rem 0.25rem",paddingTop:"0.75rem",margin:0,transition:"color 0.2s",WebkitTapHighlightColor:"transparent",WebkitAppearance:"none",MozAppearance:"none",appearance:"none",minWidth:"0"}),s={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",textAlign:"center",lineHeight:"1",marginTop:"0.125rem"};return o.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,width:"100%",background:n.bg,borderTop:`1px solid ${n.border}`,display:"flex",justifyContent:"space-between",alignItems:"stretch",padding:"0.25rem 0.5rem",paddingBottom:"calc(0.25rem + env(safe-area-inset-bottom))",margin:0,zIndex:1e4,minHeight:"80px",boxSizing:"border-box"},children:[o.jsxs("button",{onClick:()=>r("home"),style:i(e==="home"),children:[o.jsx(sw,{size:22,strokeWidth:e==="home"?2.5:2}),o.jsx("span",{style:s,children:"Home"})]}),o.jsxs("button",{onClick:()=>r("calculators"),style:i(e==="calculators"),children:[o.jsx(cf,{size:22,strokeWidth:e==="calculators"?2.5:2}),o.jsx("span",{style:s,children:"Calculators"})]}),o.jsxs("button",{onClick:()=>r("jobs"),style:i(e==="jobs"),children:[o.jsx(Lu,{size:22,strokeWidth:e==="jobs"?2.5:2}),o.jsx("span",{style:s,children:"Jobs"})]}),o.jsxs("button",{onClick:()=>r("estimates"),style:i(e==="estimates"),children:[o.jsx(jf,{size:22,strokeWidth:e==="estimates"?2.5:2}),o.jsx("span",{style:s,children:"Estimates"})]}),o.jsxs("button",{onClick:()=>r("invoices"),style:i(e==="invoices"),children:[o.jsx(e5,{size:22,strokeWidth:e==="invoices"?2.5:2}),o.jsx("span",{style:s,children:"Invoices"})]})]})}const NB=pe.forwardRef(({isDarkMode:r,onBack:e},t)=>{const[n,i]=pe.useState(""),[s,l]=pe.useState("460"),[u,h]=pe.useState("3"),[d,g]=pe.useState("normal"),[b,_]=pe.useState("0"),[v,N]=pe.useState("40"),[E,L]=pe.useState("variable"),k={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},$=((M,q,se)=>{if(!M||!q)return 0;const te=parseFloat(M),re=parseFloat(q);return se==="3"?te*746/(re*1.732*.85*.9):te*746/(re*.85*.9)})(n,s,u),F=M=>{const q=parseFloat(M);return q<=3300?1:q<=5e3?.95:q<=6600?.9:q<=8200?.85:.8},oe=M=>{const q=parseFloat(M);return q<=40?1:q<=45?.97:q<=50?.94:.91},ce=M=>{switch(M){case"heavy":return 1.25;case"normal":return 1.15;case"light":return 1.1;default:return 1.15}},D=F(b),C=oe(v),S=ce(d),V=$*S/(D*C),w=[{amps:2,hp460V:1,hp230V:.5},{amps:3,hp460V:1.5,hp230V:1},{amps:5,hp460V:2,hp230V:1.5},{amps:7,hp460V:3,hp230V:2},{amps:10,hp460V:5,hp230V:3},{amps:14,hp460V:7.5,hp230V:5},{amps:18,hp460V:10,hp230V:7.5},{amps:24,hp460V:15,hp230V:10},{amps:31,hp460V:20,hp230V:15},{amps:40,hp460V:25,hp230V:20},{amps:52,hp460V:30,hp230V:25},{amps:62,hp460V:40,hp230V:30},{amps:77,hp460V:50,hp230V:40},{amps:96,hp460V:60,hp230V:50},{amps:124,hp460V:75,hp230V:60},{amps:156,hp460V:100,hp230V:75},{amps:180,hp460V:125,hp230V:100},{amps:240,hp460V:150,hp230V:125},{amps:302,hp460V:200,hp230V:150}].find(M=>M.amps>=V),B=D<1||C<1||d==="heavy";return pe.useImperativeHandle(t,()=>({exportPDF:()=>{if(!n){alert("Please enter motor horsepower before exporting to PDF");return}const M=E==="variable"?"Variable Torque (Fans, Pumps)":E==="constant"?"Constant Torque (Conveyors)":"High Starting Torque",q=d==="light"?"Light Duty (Intermittent)":d==="normal"?"Normal Duty":"Heavy Duty (Continuous)",se={calculatorName:"VFD Sizing Calculator",inputs:{"Motor Horsepower":`${n} HP`,Voltage:`${s}V`,Phases:u==="1"?"Single Phase":"Three Phase","Load Type":M,"Duty Cycle":q,Altitude:`${b} feet`,"Ambient Temperature":`${v}C`},results:{"Motor Full Load Amperes (FLA)":`${$.toFixed(1)} A`,"Required VFD Current":`${V.toFixed(1)} A`,"Recommended VFD Rating":w?`${w.amps} A`:"N/A","VFD Motor HP (460V)":w?`${w.hp460V} HP`:"N/A","VFD Motor HP (230V)":w?`${w.hp230V} HP`:"N/A","Safety Margin":w?`${((w.amps/V-1)*100).toFixed(0)}%`:"N/A"},additionalInfo:{"Altitude Derating Factor":`${(D*100).toFixed(0)}%`,"Temperature Derating Factor":`${(C*100).toFixed(0)}%`,"Duty Cycle Factor":`${(S*100).toFixed(0)}%`,"Calculation Method":u==="3"?"Three Phase: (HP  746)  (V  1.732  0.85  0.9)":"Single Phase: (HP  746)  (V  0.85  0.9)","Required VFD Current Formula":"Motor FLA  Duty Cycle Factor  (Altitude Factor  Temperature Factor)"},necReferences:["NEC Article 430 - Motors, Motor Circuits, and Controllers","NEC 430.122 - Rating of Motor Control Circuit Overcurrent Protective Device","Always follow VFD manufacturer specifications","Use shielded cables for motor connections to reduce EMI","Install line and load reactors when recommended by manufacturer","Ensure proper grounding and bonding per NEC Article 250","Consider bypass contactor for critical applications","Verify VFD voltage matches motor nameplate voltage","Consider harmonic filtering for sensitive equipment","Ensure adequate cooling and ventilation for VFD enclosure",D<1?`WARNING: High altitude derating applied (${(D*100).toFixed(0)}%)`:"",C<1?`WARNING: High temperature derating applied (${(C*100).toFixed(0)}%)`:"",d==="heavy"?"WARNING: Heavy duty cycle requires oversizing for continuous operation":""].filter(te=>te!=="")};un(se)}})),o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:k.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${k.cardBorder}`,paddingBottom:"0.5rem"},children:"Motor Information"}),o.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Motor Horsepower (HP)"}),o.jsx("input",{type:"number",value:n,onChange:M=>i(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},placeholder:"Enter HP",step:"0.5"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Voltage (V)"}),o.jsxs("select",{value:s,onChange:M=>l(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"230",children:"230V"}),o.jsx("option",{value:"460",children:"460V"}),o.jsx("option",{value:"575",children:"575V"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Phases"}),o.jsxs("select",{value:u,onChange:M=>h(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"1",children:"Single Phase"}),o.jsx("option",{value:"3",children:"Three Phase"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Load Type"}),o.jsxs("select",{value:E,onChange:M=>L(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"variable",children:"Variable Torque (Fans, Pumps)"}),o.jsx("option",{value:"constant",children:"Constant Torque (Conveyors)"}),o.jsx("option",{value:"highTorque",children:"High Starting Torque"})]})]})]})]}),o.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:k.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${k.cardBorder}`,paddingBottom:"0.5rem"},children:"Environmental Conditions"}),o.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Duty Cycle"}),o.jsxs("select",{value:d,onChange:M=>g(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"light",children:"Light Duty (Intermittent)"}),o.jsx("option",{value:"normal",children:"Normal Duty"}),o.jsx("option",{value:"heavy",children:"Heavy Duty (Continuous)"})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Altitude (feet)"}),o.jsx("input",{type:"number",value:b,onChange:M=>_(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},placeholder:"0",step:"100"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Ambient Temp (C)"}),o.jsx("input",{type:"number",value:v,onChange:M=>N(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},placeholder:"40"})]})]}),o.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${k.cardBorder}`},children:[o.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:k.cardText,marginTop:0,marginBottom:"0.75rem"},children:"Derating Factors"}),o.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:k.labelText},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{children:"Altitude Factor:"}),o.jsxs("span",{style:{fontWeight:"600",color:k.cardText},children:[(D*100).toFixed(0),"%"]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{children:"Temperature Factor:"}),o.jsxs("span",{style:{fontWeight:"600",color:k.cardText},children:[(C*100).toFixed(0),"%"]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{children:"Duty Cycle Factor:"}),o.jsxs("span",{style:{fontWeight:"600",color:k.cardText},children:[(S*100).toFixed(0),"%"]})]})]})]})]})]}),n&&o.jsxs("div",{children:[o.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:k.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:k.labelText,marginBottom:"0.25rem"},children:"Motor FLA"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:k.cardText},children:$.toFixed(1)}),o.jsx("div",{style:{fontSize:"0.75rem",color:k.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),o.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:k.labelText,marginBottom:"0.25rem"},children:"Required VFD Current"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:k.cardText},children:V.toFixed(1)}),o.jsx("div",{style:{fontSize:"0.75rem",color:k.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Recommended VFD"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:w?w.amps:"N/A"}),o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),w&&o.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${k.cardBorder}`},children:[o.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:k.cardText,marginTop:0,marginBottom:"0.75rem"},children:"VFD Specifications"}),o.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:k.labelText},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{children:"Current Rating:"}),o.jsxs("span",{style:{fontWeight:"600",color:k.cardText},children:[w.amps," Amperes"]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{children:"Motor HP (460V):"}),o.jsxs("span",{style:{fontWeight:"600",color:k.cardText},children:[w.hp460V," HP"]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{children:"Motor HP (230V):"}),o.jsxs("span",{style:{fontWeight:"600",color:k.cardText},children:[w.hp230V," HP"]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"0.5rem",borderTop:`1px solid ${k.cardBorder}`,marginTop:"0.25rem"},children:[o.jsx("span",{children:"Safety Margin:"}),o.jsxs("span",{style:{fontWeight:"600",color:"#059669"},children:[((w.amps/V-1)*100).toFixed(0),"%"]})]})]})]})]}),w&&!B&&o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"VFD Selection Complete"}),o.jsx("div",{style:{fontSize:"0.8125rem"},children:"Selected VFD meets all requirements with adequate safety margin for reliable operation."})]})]})}),B&&o.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(vc,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{lineHeight:"1.5"},children:[o.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"600",color:"#78350f",marginBottom:"0.5rem"},children:"Important Considerations"}),o.jsxs("ul",{style:{fontSize:"0.8125rem",color:"#92400e",margin:0,paddingLeft:"1.25rem"},children:[D<1&&o.jsxs("li",{style:{marginBottom:"0.25rem"},children:["High altitude installation requires derating (",(D*100).toFixed(0),"% of rated capacity)"]}),C<1&&o.jsxs("li",{style:{marginBottom:"0.25rem"},children:["High ambient temperature requires derating (",(C*100).toFixed(0),"% of rated capacity)"]}),d==="heavy"&&o.jsx("li",{style:{marginBottom:"0.25rem"},children:"Heavy duty cycle applications require oversizing for continuous operation"}),o.jsx("li",{style:{marginBottom:"0.25rem"},children:"Verify VFD voltage matches motor nameplate voltage"}),o.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider harmonic filtering for sensitive equipment"}),o.jsx("li",{children:"Ensure adequate cooling and ventilation"})]})]})]})})]}),o.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${k.cardBorder}`,fontSize:"0.8125rem",color:k.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:k.cardText},children:"VFD Installation Notes:"}),"Always follow manufacturer specifications  Use shielded cables for motor connections  Install line and load reactors when recommended  Ensure proper grounding and bonding  Consider bypass contactor for critical applications"]})]})}),BB=pe.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=pe.useState("inductive"),[i,s]=pe.useState("60"),[l,u]=pe.useState(""),[h,d]=pe.useState("mH"),[g,b]=pe.useState("60"),[_,v]=pe.useState(""),[N,E]=pe.useState("F"),[L,k]=pe.useState(""),[O,$]=pe.useState(""),[F,oe]=pe.useState("inductive"),[ce,D]=pe.useState(""),[C,S]=pe.useState("mH"),[V,I]=pe.useState(""),[w,B]=pe.useState("F"),M={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},q=()=>{if(!i||!l)return null;const J=parseFloat(i);let ie=parseFloat(l);return h==="mH"?ie=ie/1e3:h==="H"&&(ie=ie/1e6),{reactance:(2*Math.PI*J*ie).toFixed(2),frequency:J,inductance:l,unit:h}},se=()=>{if(!g||!_)return null;const J=parseFloat(g);let ie=parseFloat(_);return N==="F"?ie=ie/1e6:N==="nF"?ie=ie/1e9:N==="pF"&&(ie=ie/1e12),{reactance:(1/(2*Math.PI*J*ie)).toFixed(2),frequency:J,capacitance:_,unit:N}},te=()=>{if(!L||!O)return null;const J=parseFloat(L),ie=parseFloat(O),he=Math.sqrt(J*J+ie*ie),ge=Math.atan2(ie,J)*(180/Math.PI);return{impedance:he.toFixed(2),angle:ge.toFixed(2),resistance:J,reactance:ie,type:F}},re=()=>{if(!ce||!V)return null;let J=parseFloat(ce),ie=parseFloat(V);return C==="mH"?J=J/1e3:C==="H"&&(J=J/1e6),w==="F"?ie=ie/1e6:w==="nF"?ie=ie/1e9:w==="pF"&&(ie=ie/1e12),{frequency:(1/(2*Math.PI*Math.sqrt(J*ie))).toFixed(2),inductance:ce,inductanceUnit:C,capacitance:V,capacitanceUnit:w}},xe=q(),be=se(),Z=te(),W=re();return pe.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="inductive"){if(!i||!l){alert("Please enter all required values before exporting to PDF");return}const J={calculatorName:"Reactance & Impedance - Inductive Reactance (XL)",inputs:{Frequency:`${i} Hz`,Inductance:`${l} ${h}`},results:{"Inductive Reactance (XL)":`${xe.reactance} `},additionalInfo:{Formula:"XL = 2fL",Description:"Inductive reactance increases with frequency and opposes changes in current flow"},necReferences:["Inductive reactance is directly proportional to frequency","In AC circuits, inductors oppose current changes","XL increases linearly with both frequency and inductance"]};un(J)}else if(t==="capacitive"){if(!g||!_){alert("Please enter all required values before exporting to PDF");return}const J={calculatorName:"Reactance & Impedance - Capacitive Reactance (XC)",inputs:{Frequency:`${g} Hz`,Capacitance:`${_} ${N}`},results:{"Capacitive Reactance (XC)":`${be.reactance} `},additionalInfo:{Formula:"XC = 1 / (2fC)",Description:"Capacitive reactance decreases with frequency and opposes changes in voltage"},necReferences:["Capacitive reactance is inversely proportional to frequency","In AC circuits, capacitors oppose voltage changes","XC decreases as frequency or capacitance increases"]};un(J)}else if(t==="impedance"){if(!L||!O){alert("Please enter all required values before exporting to PDF");return}const J={calculatorName:"Reactance & Impedance - Impedance Calculator",inputs:{"Reactance Type":F.charAt(0).toUpperCase()+F.slice(1),"Resistance (R)":`${L} `,"Reactance (X)":`${O} `},results:{"Impedance (Z)":`${Z.impedance} `,"Phase Angle ()":`${Z.angle}`,"Phase Relationship":F==="inductive"?"Leading":"Lagging"},additionalInfo:{"Impedance Formula":"Z = (R + X)","Phase Angle Formula":" = arctan(X / R)",Description:"Impedance is the total opposition to current flow in an AC circuit, combining resistance and reactance"},necReferences:["Impedance combines resistive and reactive components","Phase angle indicates the relationship between voltage and current","In inductive circuits, current lags voltage; in capacitive circuits, current leads voltage"]};un(J)}else if(t==="resonance"){if(!ce||!V){alert("Please enter all required values before exporting to PDF");return}const J={calculatorName:"Reactance & Impedance - Resonant Frequency",inputs:{Inductance:`${ce} ${C}`,Capacitance:`${V} ${w}`},results:{"Resonant Frequency (fr)":`${W.frequency} Hz`},additionalInfo:{Formula:"fr = 1 / (2LC)","At Resonance":"Inductive and capacitive reactances are equal and opposite (XL = XC)","Series Circuit":"Minimum impedance at resonance","Parallel Circuit":"Maximum impedance at resonance"},necReferences:["Resonance occurs when XL = XC","At resonant frequency, circuit is purely resistive","Series resonant circuits have minimum impedance","Parallel resonant circuits have maximum impedance"]};un(J)}}})),o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("div",{style:{background:M.cardBg,border:`1px solid ${M.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:o.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[o.jsxs("button",{onClick:()=>n("inductive"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="inductive"?"#3b82f6":"transparent",color:t==="inductive"?"white":M.labelText,border:`1px solid ${t==="inductive"?"#3b82f6":M.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:["Inductive (X",o.jsx("sub",{children:"L"}),")"]}),o.jsxs("button",{onClick:()=>n("capacitive"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="capacitive"?"#3b82f6":"transparent",color:t==="capacitive"?"white":M.labelText,border:`1px solid ${t==="capacitive"?"#3b82f6":M.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:["Capacitive (X",o.jsx("sub",{children:"C"}),")"]}),o.jsx("button",{onClick:()=>n("impedance"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="impedance"?"#3b82f6":"transparent",color:t==="impedance"?"white":M.labelText,border:`1px solid ${t==="impedance"?"#3b82f6":M.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Impedance (Z)"}),o.jsx("button",{onClick:()=>n("resonance"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="resonance"?"#3b82f6":"transparent",color:t==="resonance"?"white":M.labelText,border:`1px solid ${t==="resonance"?"#3b82f6":M.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Resonance"})]})}),t==="inductive"&&o.jsxs("div",{children:[o.jsxs("div",{style:{background:M.cardBg,border:`1px solid ${M.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:M.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${M.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),o.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:M.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),o.jsx("input",{type:"number",value:i,onChange:J=>s(J.target.value),placeholder:"60",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:M.subtleText,marginTop:"0.25rem"},children:"Common: 50 Hz or 60 Hz"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:M.labelText,marginBottom:"0.5rem"},children:"Inductance"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[o.jsx("input",{type:"number",value:l,onChange:J=>u(J.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"}}),o.jsxs("select",{value:h,onChange:J=>d(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"H",children:"H"}),o.jsx("option",{value:"mH",children:"mH"}),o.jsx("option",{value:"H",children:"H"})]})]})]})]})]}),xe&&o.jsx("div",{children:o.jsxs("div",{style:{background:M.cardBg,border:`1px solid ${M.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:M.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[o.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Inductive Reactance (X",o.jsx("sub",{children:"L"}),")"]}),o.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:xe.reactance}),o.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms ()"})]}),o.jsxs("div",{style:{background:M.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${M.cardBorder}`},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:M.labelText,marginBottom:"0.5rem"},children:o.jsx("strong",{style:{color:M.cardText},children:"Circuit Values:"})}),o.jsxs("div",{style:{fontSize:"0.8125rem",color:M.labelText,display:"grid",gap:"0.25rem"},children:[o.jsxs("div",{children:["Frequency: ",xe.frequency," Hz"]}),o.jsxs("div",{children:["Inductance: ",xe.inductance," ",xe.unit]}),o.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:M.subtleText},children:["Formula: X",o.jsx("sub",{children:"L"})," = 2fL"]})]})]})]})})]}),t==="capacitive"&&o.jsxs("div",{children:[o.jsxs("div",{style:{background:M.cardBg,border:`1px solid ${M.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:M.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${M.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),o.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:M.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),o.jsx("input",{type:"number",value:g,onChange:J=>b(J.target.value),placeholder:"60",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:M.subtleText,marginTop:"0.25rem"},children:"Common: 50 Hz or 60 Hz"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:M.labelText,marginBottom:"0.5rem"},children:"Capacitance"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[o.jsx("input",{type:"number",value:_,onChange:J=>v(J.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"}}),o.jsxs("select",{value:N,onChange:J=>E(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"F",children:"F"}),o.jsx("option",{value:"F",children:"F"}),o.jsx("option",{value:"nF",children:"nF"}),o.jsx("option",{value:"pF",children:"pF"})]})]})]})]})]}),be&&o.jsx("div",{children:o.jsxs("div",{style:{background:M.cardBg,border:`1px solid ${M.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:M.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[o.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Capacitive Reactance (X",o.jsx("sub",{children:"C"}),")"]}),o.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:be.reactance}),o.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms ()"})]}),o.jsxs("div",{style:{background:M.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${M.cardBorder}`},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:M.labelText,marginBottom:"0.5rem"},children:o.jsx("strong",{style:{color:M.cardText},children:"Circuit Values:"})}),o.jsxs("div",{style:{fontSize:"0.8125rem",color:M.labelText,display:"grid",gap:"0.25rem"},children:[o.jsxs("div",{children:["Frequency: ",be.frequency," Hz"]}),o.jsxs("div",{children:["Capacitance: ",be.capacitance," ",be.unit]}),o.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:M.subtleText},children:["Formula: X",o.jsx("sub",{children:"C"})," = 1 / (2fC)"]})]})]})]})})]}),t==="impedance"&&o.jsxs("div",{children:[o.jsxs("div",{style:{background:M.cardBg,border:`1px solid ${M.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:M.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${M.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),o.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:M.labelText,marginBottom:"0.5rem"},children:"Reactance Type"}),o.jsxs("select",{value:F,onChange:J=>oe(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"},children:[o.jsxs("option",{value:"inductive",children:["Inductive (X",o.jsx("sub",{children:"L"}),")"]}),o.jsxs("option",{value:"capacitive",children:["Capacitive (X",o.jsx("sub",{children:"C"}),")"]})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:M.labelText,marginBottom:"0.5rem"},children:"Resistance (R) in Ohms"}),o.jsx("input",{type:"number",value:L,onChange:J=>k(J.target.value),placeholder:"Enter resistance",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:M.labelText,marginBottom:"0.5rem"},children:"Reactance (X) in Ohms"}),o.jsx("input",{type:"number",value:O,onChange:J=>$(J.target.value),placeholder:"Enter reactance",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"}})]})]})]}),Z&&o.jsx("div",{children:o.jsxs("div",{style:{background:M.cardBg,border:`1px solid ${M.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:M.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Impedance (Z)"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:Z.impedance}),o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms ()"})]}),o.jsxs("div",{style:{background:M.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:M.labelText,marginBottom:"0.25rem"},children:"Phase Angle ()"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:M.cardText},children:[Z.angle,""]}),o.jsx("div",{style:{fontSize:"0.75rem",color:M.labelText,marginTop:"0.25rem"},children:F==="inductive"?"Leading":"Lagging"})]})]}),o.jsxs("div",{style:{background:M.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${M.cardBorder}`},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:M.labelText,marginBottom:"0.5rem"},children:o.jsx("strong",{style:{color:M.cardText},children:"Circuit Values:"})}),o.jsxs("div",{style:{fontSize:"0.8125rem",color:M.labelText,display:"grid",gap:"0.25rem"},children:[o.jsxs("div",{children:["Resistance (R): ",Z.resistance," "]}),o.jsxs("div",{children:["Reactance (X): ",Z.reactance,"  (",Z.type,")"]}),o.jsx("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:M.subtleText},children:"Formula: Z = (R + X)"}),o.jsx("div",{style:{fontStyle:"italic",color:M.subtleText},children:"Phase Angle:  = arctan(X / R)"})]})]})]})})]}),t==="resonance"&&o.jsxs("div",{children:[o.jsxs("div",{style:{background:M.cardBg,border:`1px solid ${M.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:M.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${M.cardBorder}`,paddingBottom:"0.5rem"},children:"LC Circuit Parameters"}),o.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:M.labelText,marginBottom:"0.5rem"},children:"Inductance"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[o.jsx("input",{type:"number",value:ce,onChange:J=>D(J.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"}}),o.jsxs("select",{value:C,onChange:J=>S(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"H",children:"H"}),o.jsx("option",{value:"mH",children:"mH"}),o.jsx("option",{value:"H",children:"H"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:M.labelText,marginBottom:"0.5rem"},children:"Capacitance"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[o.jsx("input",{type:"number",value:V,onChange:J=>I(J.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"}}),o.jsxs("select",{value:w,onChange:J=>B(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${M.inputBorder}`,borderRadius:"8px",backgroundColor:M.inputBg,color:M.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"F",children:"F"}),o.jsx("option",{value:"F",children:"F"}),o.jsx("option",{value:"nF",children:"nF"}),o.jsx("option",{value:"pF",children:"pF"})]})]})]})]})]}),W&&o.jsxs("div",{children:[o.jsxs("div",{style:{background:M.cardBg,border:`1px solid ${M.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:M.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[o.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Resonant Frequency (f",o.jsx("sub",{children:"r"}),")"]}),o.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:W.frequency}),o.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Hertz (Hz)"})]}),o.jsxs("div",{style:{background:M.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${M.cardBorder}`},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:M.labelText,marginBottom:"0.5rem"},children:o.jsx("strong",{style:{color:M.cardText},children:"Circuit Values:"})}),o.jsxs("div",{style:{fontSize:"0.8125rem",color:M.labelText,display:"grid",gap:"0.25rem"},children:[o.jsxs("div",{children:["Inductance: ",W.inductance," ",W.inductanceUnit]}),o.jsxs("div",{children:["Capacitance: ",W.capacitance," ",W.capacitanceUnit]}),o.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:M.subtleText},children:["Formula: f",o.jsx("sub",{children:"r"})," = 1 / (2LC)"]})]})]})]}),o.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(xs,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"About Resonant Frequency:"}),o.jsx("div",{style:{fontSize:"0.8125rem"},children:"At resonance, inductive and capacitive reactances are equal and opposite, resulting in minimum impedance in series circuits and maximum impedance in parallel circuits."})]})]})})]})]}),o.jsxs("div",{style:{background:M.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${M.cardBorder}`,fontSize:"0.8125rem",color:M.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:M.cardText},children:"Key Concepts:"}),"X",o.jsx("sub",{children:"L"})," increases with frequency  X",o.jsx("sub",{children:"C"})," decreases with frequency  At resonance X",o.jsx("sub",{children:"L"})," = X",o.jsx("sub",{children:"C"}),"  Impedance combines resistance and reactance"]})]})}),LB=pe.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=pe.useState("correction"),[i,s]=pe.useState(""),[l,u]=pe.useState("480"),[h,d]=pe.useState(""),[g,b]=pe.useState("0.95"),[_,v]=pe.useState("60"),[N,E]=pe.useState(""),[L,k]=pe.useState(""),[O,$]=pe.useState("0.95"),[F,oe]=pe.useState(""),[ce,D]=pe.useState(""),[C,S]=pe.useState("8760"),[V,I]=pe.useState(""),w={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},B=()=>{if(!i||!h)return null;const te=parseFloat(i),re=parseFloat(h),xe=parseFloat(g),be=parseFloat(l),Z=parseFloat(_),W=Math.acos(re),J=Math.acos(xe),ie=te*Math.tan(W),he=te*Math.tan(J),_e=ie-he,fe=_e*1e9/(2*Math.PI*Z*be*be),ve=te/re,Ne=te/xe,Ue=ve*1e3/(Math.sqrt(3)*be),Xe=Ne*1e3/(Math.sqrt(3)*be),Ze=(Ue-Xe)/Ue*100;return{kVAR:_e.toFixed(2),capacitance:fe.toFixed(2),existingApparentPower:ve.toFixed(2),correctedApparentPower:Ne.toFixed(2),powerReduction:((ve-Ne)/ve*100).toFixed(1),existingCurrent:Ue.toFixed(2),correctedCurrent:Xe.toFixed(2),currentReduction:Ze.toFixed(1),existingPF:(re*100).toFixed(1),targetPF:(xe*100).toFixed(1)}},M=()=>{if(!N||!L||!F)return null;const te=parseFloat(N),re=parseFloat(L),xe=parseFloat(O),be=parseFloat(F),Z=parseFloat(ce)||0,W=parseFloat(C),J=parseFloat(V)||0,ie=te/re,he=te/xe,ge=ie-he,_e=ge*be,ve=(xe-re)*100*.01,Ne=te*W*(ve/100)*Z,Ue=J*12,Xe=_e*12,Ze=Xe+Ne+Ue,ze=Math.acos(re),de=Math.acos(xe),Ft=te*(Math.tan(ze)-Math.tan(de)),Et=Ft*75,wt=Ze>0?Et/Ze*12:0;return{kVAReduction:ge.toFixed(2),monthlyDemandSavings:_e.toFixed(2),annualDemandSavings:Xe.toFixed(2),annualEnergySavings:Ne.toFixed(2),annualPenaltySavings:Ue.toFixed(2),totalAnnualSavings:Ze.toFixed(2),kVARRequired:Ft.toFixed(2),estimatedCost:Et.toFixed(2),paybackMonths:wt.toFixed(1),paybackYears:(wt/12).toFixed(1),fiveYearSavings:(Ze*5-Et).toFixed(2)}},q=B(),se=M();return pe.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="correction"){if(!i||!h){alert("Please enter all required values before exporting to PDF");return}const te={calculatorName:"Power Factor Correction - Capacitor Sizing",inputs:{"Real Power":`${i} kW`,"System Voltage":`${l}V`,"Existing Power Factor":h,"Target Power Factor":g,Frequency:`${_} Hz`},results:{"Required Capacitor Size":`${q.kVAR} kVAR`,"Capacitance per Phase":`${q.capacitance} F`,"Power Factor Before":`${q.existingPF}%`,"Power Factor After":`${q.targetPF}%`,"Apparent Power Before":`${q.existingApparentPower} kVA`,"Apparent Power After":`${q.correctedApparentPower} kVA`,"Apparent Power Reduction":`${q.powerReduction}%`,"Line Current Before":`${q.existingCurrent} A`,"Line Current After":`${q.correctedCurrent} A`,"Current Reduction":`${q.currentReduction}%`},additionalInfo:{Benefits:"Power factor correction reduces utility demand charges, lowers line losses and voltage drop, increases system capacity, reduces equipment heating, and improves voltage regulation."},necReferences:["NEC Article 460 - Capacitors","NEC 460.8 - Conductors supplying capacitors shall have an ampacity of not less than 135% of the rated current of the capacitor","NEC 460.9 - Rating or Setting of Motor Overload Device"]};un(te)}else if(t==="savings"){if(!N||!L||!F){alert("Please enter all required values before exporting to PDF");return}const te={calculatorName:"Power Factor Correction - Cost Savings Analysis",inputs:{"Real Power":`${N} kW`,"Operating Hours per Year":C,"Existing Power Factor":L,"Target Power Factor":O,"Demand Charge":`$${F}/kVA/month`,"Energy Rate":ce?`$${ce}/kWh`:"Not specified","Monthly PF Penalty":V?`$${V}/month`:"None"},results:{"Total Annual Savings":`$${se.totalAnnualSavings}/year`,"Monthly Demand Savings":`$${se.monthlyDemandSavings}/month`,"Annual Demand Savings":`$${se.annualDemandSavings}/year`,"Annual Energy Savings":`$${se.annualEnergySavings}/year`,"Annual Penalty Savings":`$${se.annualPenaltySavings}/year`,"kVA Reduction":`${se.kVAReduction} kVA`,"Required Capacitor Size":`${se.kVARRequired} kVAR`,"Estimated Equipment Cost":`$${se.estimatedCost}`,"Payback Period":`${se.paybackMonths} months (${se.paybackYears} years)`,"5-Year Net Savings":`$${se.fiveYearSavings}`},additionalInfo:{"Cost Basis":"Estimated at $75 per kVAR installed","Savings Note":"Actual costs and savings may vary based on equipment selection, installation costs, utility rate structures, and load profiles"},necReferences:["NEC Article 460 - Capacitors","NEC 460.8 - Conductors supplying capacitors shall have an ampacity of not less than 135% of the rated current of the capacitor","IEEE Std 18-2012 - Standard for Shunt Power Capacitors"]};un(te)}}})),o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:o.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[o.jsx("button",{onClick:()=>n("correction"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="correction"?"#3b82f6":"transparent",color:t==="correction"?"white":w.labelText,border:`1px solid ${t==="correction"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Capacitor Sizing"}),o.jsx("button",{onClick:()=>n("savings"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="savings"?"#3b82f6":"transparent",color:t==="savings"?"white":w.labelText,border:`1px solid ${t==="savings"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Cost Savings"})]})}),t==="correction"?o.jsxs("div",{children:[o.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"System Parameters"}),o.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Real Power (kW)"}),o.jsx("input",{type:"number",value:i,onChange:te=>s(te.target.value),placeholder:"Enter load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"System Voltage (V)"}),o.jsxs("select",{value:l,onChange:te=>u(te.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"208",children:"208V"}),o.jsx("option",{value:"240",children:"240V"}),o.jsx("option",{value:"480",children:"480V"}),o.jsx("option",{value:"600",children:"600V"})]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Existing Power Factor"}),o.jsx("input",{type:"number",value:h,onChange:te=>d(te.target.value),placeholder:"0.70 - 0.99",step:"0.01",min:"0.5",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Current (uncorrected)"})]}),o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:["Target Power  ",o.jsx("br",{}),"Factor ",o.jsx("br",{})]}),o.jsxs("select",{value:g,onChange:te=>b(te.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"0.90",children:"0.90 (90%)"}),o.jsx("option",{value:"0.95",children:"0.95 (95%) - Recommended"}),o.jsx("option",{value:"0.98",children:"0.98 (98%)"}),o.jsx("option",{value:"0.99",children:"0.99 (99%)"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),o.jsxs("select",{value:_,onChange:te=>v(te.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"50",children:"50 Hz"}),o.jsx("option",{value:"60",children:"60 Hz"})]})]})]})]}),q&&o.jsxs("div",{children:[o.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Required Capacitor Bank"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Capacitor Size"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:q.kVAR}),o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"kVAR"})]}),o.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Capacitance"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:q.capacitance}),o.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"F per phase"})]})]}),o.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.5rem"},children:o.jsx("strong",{style:{color:w.cardText},children:"Power Factor Improvement:"})}),o.jsxs("div",{style:{fontSize:"0.8125rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[o.jsxs("div",{children:["From: ",q.existingPF,"%  To: ",q.targetPF,"%"]}),o.jsxs("div",{children:["Real Power: ",i," kW (constant)"]}),o.jsxs("div",{children:["System Voltage: ",l,"V, ",_," Hz"]})]})]})]}),o.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"System Improvements"}),o.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[o.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:w.cardText,marginBottom:"0.5rem"},children:"Apparent Power Reduction"}),o.jsxs("div",{style:{fontSize:"0.8125rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[o.jsxs("div",{children:["Before: ",q.existingApparentPower," kVA"]}),o.jsxs("div",{children:["After: ",q.correctedApparentPower," kVA"]}),o.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#059669",marginTop:"0.25rem"},children:["Reduction: ",q.powerReduction,"%"]})]})]}),o.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:w.cardText,marginBottom:"0.5rem"},children:"Line Current Reduction"}),o.jsxs("div",{style:{fontSize:"0.8125rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[o.jsxs("div",{children:["Before: ",q.existingCurrent," A"]}),o.jsxs("div",{children:["After: ",q.correctedCurrent," A"]}),o.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#059669",marginTop:"0.25rem"},children:["Reduction: ",q.currentReduction,"%"]})]})]})]})]}),o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(q6,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Benefits of Power Factor Correction:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[o.jsx("li",{style:{marginBottom:"0.25rem"},children:"Reduced utility demand charges"}),o.jsx("li",{style:{marginBottom:"0.25rem"},children:"Lower line losses and voltage drop"}),o.jsx("li",{style:{marginBottom:"0.25rem"},children:"Increased system capacity"}),o.jsx("li",{style:{marginBottom:"0.25rem"},children:"Reduced equipment heating"}),o.jsx("li",{children:"Improved voltage regulation"})]})]})]})})]})]}):o.jsxs("div",{children:[o.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Load & Power Factor"}),o.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:["Real Power ",o.jsx("br",{})," (kW)"]}),o.jsx("input",{type:"number",value:N,onChange:te=>E(te.target.value),placeholder:"Enter load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Operating Hours/Year"}),o.jsx("input",{type:"number",value:C,onChange:te=>S(te.target.value),placeholder:"8760",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"8760 = 24/7 operation"})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Existing Power Factor"}),o.jsx("input",{type:"number",value:L,onChange:te=>k(te.target.value),placeholder:"0.70 - 0.99",step:"0.01",min:"0.5",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:["Target Power ",o.jsx("br",{})," Factor"]}),o.jsxs("select",{value:O,onChange:te=>$(te.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"0.90",children:"0.90 (90%)"}),o.jsx("option",{value:"0.95",children:"0.95 (95%)"}),o.jsx("option",{value:"0.98",children:"0.98 (98%)"})]})]})]})]})]}),o.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Utility Rates"}),o.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Demand Charge ($/kVA/month)"}),o.jsx("input",{type:"number",value:F,onChange:te=>oe(te.target.value),placeholder:"10 - 25",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Check your utility bill"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Energy Rate ($/kWh) - Optional"}),o.jsx("input",{type:"number",value:ce,onChange:te=>D(te.target.value),placeholder:"0.08 - 0.15",step:"0.001",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"For energy loss savings"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Monthly PF Penalty ($/month) - Optional"}),o.jsx("input",{type:"number",value:V,onChange:te=>I(te.target.value),placeholder:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"If utility charges PF penalty"})]})]})]}),se&&o.jsxs("div",{children:[o.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Annual Cost Savings"}),o.jsxs("div",{style:{background:"#d1fae5",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:"#059669",marginBottom:"0.5rem",fontWeight:"600"},children:"Total Annual Savings"}),o.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#059669"},children:["$",se.totalAnnualSavings]}),o.jsx("div",{style:{fontSize:"0.875rem",color:"#059669",marginTop:"0.25rem"},children:"per year"})]}),o.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.5rem"},children:o.jsx("strong",{style:{color:w.cardText},children:"Savings Breakdown:"})}),o.jsxs("div",{style:{fontSize:"0.8125rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[o.jsxs("div",{children:["Demand Charge Savings: $",se.annualDemandSavings,"/year"]}),parseFloat(se.annualEnergySavings)>0&&o.jsxs("div",{children:["Energy Loss Savings: $",se.annualEnergySavings,"/year"]}),parseFloat(se.annualPenaltySavings)>0&&o.jsxs("div",{children:["Penalty Elimination: $",se.annualPenaltySavings,"/year"]}),o.jsxs("div",{style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:`1px solid ${w.cardBorder}`},children:["kVA Reduction: ",se.kVAReduction," kVA"]})]})]})]}),o.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Return on Investment"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Estimated Cost"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:["$",se.estimatedCost]}),o.jsxs("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:[se.kVARRequired," kVAR @ $75/kVAR"]})]}),o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Payback Period"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:se.paybackMonths}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:["months (",se.paybackYears," years)"]})]})]}),o.jsx("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:o.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[o.jsx("div",{children:o.jsx("strong",{style:{color:w.cardText},children:"5-Year Net Savings:"})}),o.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#059669",marginTop:"0.25rem"},children:["$",se.fiveYearSavings]}),o.jsx("div",{style:{fontSize:"0.8125rem",color:w.subtleText,marginTop:"0.25rem"},children:"Total savings minus initial investment"})]})})]}),o.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(xs,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Note:"}),o.jsx("div",{style:{fontSize:"0.8125rem"},children:"Actual costs and savings may vary based on equipment selection, installation costs, utility rate structures, and load profiles. Consult with a qualified electrical engineer for detailed analysis."})]})]})})]})]}),o.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`,fontSize:"0.8125rem",color:w.labelText},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:w.cardText},children:"Power Factor Basics:"}),"PF = Real Power (kW)  Apparent Power (kVA)  Low PF causes higher current and utility charges  Target 0.95+ for optimal efficiency  Capacitors supply reactive power locally"]})]})}),FB=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=pe.useState("from-kw-pf"),[s,l]=pe.useState(""),[u,h]=pe.useState(""),[d,g]=pe.useState(""),[b,_]=pe.useState(""),[v,N]=pe.useState("lagging"),E={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},k=(()=>{let $=0,F=0,oe=0,ce=0,D=0;switch(n){case"from-kw-pf":if(!s||!b)return null;$=parseFloat(s),ce=parseFloat(b),oe=$/ce,D=Math.acos(ce)*(180/Math.PI),F=oe*Math.sin(Math.acos(ce)),v==="leading"&&(F=-F);break;case"from-kw-kvar":if(!s||!u)return null;$=parseFloat(s),F=parseFloat(u),v==="leading"&&(F=-Math.abs(F)),oe=Math.sqrt(Math.pow($,2)+Math.pow(F,2)),ce=$/oe,D=Math.atan(Math.abs(F)/$)*(180/Math.PI);break;case"from-kva-pf":if(!d||!b)return null;oe=parseFloat(d),ce=parseFloat(b),$=oe*ce,D=Math.acos(ce)*(180/Math.PI),F=oe*Math.sin(Math.acos(ce)),v==="leading"&&(F=-F);break;case"from-kva-kw":if(!d||!s||(oe=parseFloat(d),$=parseFloat(s),$>oe))return null;ce=$/oe,D=Math.acos(ce)*(180/Math.PI),F=Math.sqrt(Math.pow(oe,2)-Math.pow($,2)),v==="leading"&&(F=-F);break;default:return null}return{kW:$,kVAR:F,kVA:oe,powerFactor:ce,angle:D,isLeading:v==="leading"}})(),O=$=>{const F=Math.abs($);return F>=.95?{quality:"Excellent",color:"#10b981",bg:"#d1fae5",border:"#6ee7b7"}:F>=.9?{quality:"Good",color:"#3b82f6",bg:"#dbeafe",border:"#93c5fd"}:F>=.85?{quality:"Fair",color:"#f59e0b",bg:"#fef3c7",border:"#fcd34d"}:{quality:"Poor",color:"#ef4444",bg:"#fee2e2",border:"#fca5a5"}};return pe.useImperativeHandle(t,()=>({exportPDF:()=>{if(!k){alert("Please enter values before exporting to PDF");return}const $=O(k.powerFactor),oe={calculatorName:"Power Triangle Calculator",inputs:{calculationMode:{"from-kw-pf":"Real Power (kW) and Power Factor","from-kw-kvar":"Real Power (kW) and Reactive Power (kVAR)","from-kva-pf":"Apparent Power (kVA) and Power Factor","from-kva-kw":"Apparent Power (kVA) and Real Power (kW)"}[n],...s&&{realPower:`${s} kW`},...u&&{reactivePower:`${u} kVAR`},...d&&{apparentPower:`${d} kVA`},...b&&{powerFactor:b},reactiveType:v==="leading"?"Leading (Capacitive)":"Lagging (Inductive)"},results:{realPower:`${k.kW.toFixed(2)} kW`,reactivePower:`${Math.abs(k.kVAR).toFixed(2)} kVAR (${k.isLeading?"Leading":"Lagging"})`,apparentPower:`${k.kVA.toFixed(2)} kVA`,powerFactor:`${k.powerFactor.toFixed(4)} ${k.isLeading?"(Leading)":"(Lagging)"}`,phaseAngle:`${k.angle.toFixed(2)}`,powerFactorQuality:$.quality},additionalInfo:{powerTriangleRelationship:"kVA = kW + kVAR",powerFactorFormula:"PF = kW  kVA = cos()",reactivePowerFormula:"kVAR = kVA  sin()",phaseAngleFormula:" = arccos(PF)",leadingVsLagging:k.isLeading?"Leading PF: Current leads voltage (capacitive loads)":"Lagging PF: Current lags voltage (inductive loads - most common)"},necReferences:["Power Factor: Ratio of real power to apparent power","Leading PF (capacitive): Synchronous motors, over-excited generators, capacitor banks","Lagging PF (inductive): Most common - motors, transformers, inductive loads","Poor power factor results in: Higher current draw, increased losses, utility penalties","Power factor correction: Add capacitors for lagging PF, add inductors for leading PF","Many utilities charge penalties for power factor below 0.90-0.95"]};un(oe)}})),o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${E.cardBorder}`,paddingBottom:"0.5rem"},children:"Calculation Mode"}),o.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:[{value:"from-kw-pf",label:"From kW and Power Factor"},{value:"from-kw-kvar",label:"From kW and kVAR"},{value:"from-kva-pf",label:"From kVA and Power Factor"},{value:"from-kva-kw",label:"From kVA and kW"}].map($=>o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:n===$.value?E.sectionBg:"transparent",border:`1px solid ${n===$.value?"#3b82f6":E.cardBorder}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseOver:F=>{n!==$.value&&(F.currentTarget.style.background=E.sectionBg)},onMouseOut:F=>{n!==$.value&&(F.currentTarget.style.background="transparent")},children:[o.jsx("input",{type:"radio",name:"calculationMode",value:$.value,checked:n===$.value,onChange:F=>i(F.target.value),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),o.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:E.cardText},children:$.label})]},$.value))})]}),o.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${E.cardBorder}`,paddingBottom:"0.5rem"},children:"Input Values"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[(n==="from-kw-pf"||n==="from-kw-kvar"||n==="from-kva-kw")&&o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:["Real Power ",o.jsx("br",{}),"(kW)"]}),o.jsx("input",{type:"number",value:s,onChange:$=>l($.target.value),placeholder:"Enter kW",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]}),n==="from-kw-kvar"&&o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Reactive Power (kVAR)"}),o.jsx("input",{type:"number",value:u,onChange:$=>h($.target.value),placeholder:"Enter kVAR",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]}),(n==="from-kva-pf"||n==="from-kva-kw")&&o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:["Apparent Power ",o.jsx("br",{})," (kVA)"]}),o.jsx("input",{type:"number",value:d,onChange:$=>g($.target.value),placeholder:"Enter kVA",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]}),(n==="from-kw-pf"||n==="from-kva-pf")&&o.jsxs("div",{children:[o.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:["Power Factor ",o.jsx("br",{}),"  ",o.jsx("br",{})]}),o.jsx("input",{type:"number",value:b,onChange:$=>_($.target.value),placeholder:"0.00 to 1.00",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Reactive Power Type"}),o.jsxs("select",{value:v,onChange:$=>N($.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"lagging",children:"Lagging (Inductive - Most Common)"}),o.jsx("option",{value:"leading",children:"Leading (Capacitive)"})]}),o.jsx("div",{style:{fontSize:"0.75rem",color:E.subtleText,marginTop:"0.25rem"},children:"Inductive: Motors, transformers | Capacitive: Capacitor banks, lightly loaded cables"})]})]}),k&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem"},children:"Power Triangle Results"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Real Power (kW)"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:k.kW.toFixed(2)}),o.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginTop:"0.25rem"},children:"Working Power"})]}),o.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Reactive Power (kVAR)"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:Math.abs(k.kVAR).toFixed(2)}),o.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginTop:"0.25rem"},children:k.isLeading?"Leading":"Lagging"})]}),o.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Apparent Power (kVA)"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:k.kVA.toFixed(2)}),o.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginTop:"0.25rem"},children:"Total Power"})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[o.jsxs("div",{style:{background:O(k.powerFactor).bg,border:`1px solid ${O(k.powerFactor).border}`,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:O(k.powerFactor).color,marginBottom:"0.25rem"},children:"Power Factor"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:O(k.powerFactor).color},children:k.powerFactor.toFixed(4)}),o.jsx("div",{style:{fontSize:"0.75rem",color:O(k.powerFactor).color,marginTop:"0.25rem"},children:O(k.powerFactor).quality})]}),o.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Phase Angle ()"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:[k.angle.toFixed(2),""]}),o.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginTop:"0.25rem"},children:"V-I Phase Shift"})]})]})]}),o.jsx("div",{style:{background:E.sectionBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(xs,{size:20,color:"#3b82f6",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:E.labelText,lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",color:E.cardText,marginBottom:"0.5rem"},children:"Power Triangle Relationships:"}),o.jsxs("div",{style:{display:"grid",gap:"0.25rem"},children:[o.jsx("div",{children:" kVA = kW + kVAR (Pythagorean theorem)"}),o.jsx("div",{children:" Power Factor = kW  kVA = cos()"}),o.jsx("div",{children:" kVAR = kVA  sin()"}),o.jsxs("div",{children:[" ",k.isLeading?"Leading PF: Current leads voltage (capacitive loads)":"Lagging PF: Current lags voltage (inductive loads - most common)"]})]})]})]})}),k.powerFactor<.9&&o.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"12px",padding:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(xs,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Low Power Factor Alert"}),o.jsxs("div",{children:["Power factor below 0.90 may result in utility penalties and increased energy costs. Consider power factor correction using ",k.isLeading?"inductors (reactors)":"capacitor banks","to improve efficiency and reduce demand charges."]})]})]})})]})]})}),zB=pe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=pe.useState("find-power"),[s,l]=pe.useState("480"),[u,h]=pe.useState(""),[d,g]=pe.useState("0.85"),[b,_]=pe.useState(""),[v,N]=pe.useState("line-to-line"),[E,L]=pe.useState(""),k={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},$=(()=>{const F=parseFloat(s),oe=parseFloat(u),ce=parseFloat(d),D=parseFloat(b),C=E?parseFloat(E)/100:1;if(n==="find-power"){if(!s||!u||!d)return null;const S=Math.sqrt(3)*F*oe*ce/1e3,V=Math.sqrt(3)*F*oe/1e3,I=Math.sqrt(Math.pow(V,2)-Math.pow(S,2));return{kW:S,kVA:V,kVAR:I,current:oe,voltage:F,powerFactor:ce,amps:oe}}else if(n==="find-current"){if(!s||!b||!d)return null;const S=D*1e3/(Math.sqrt(3)*F*ce),V=Math.sqrt(3)*F*S/1e3,I=Math.sqrt(Math.pow(V,2)-Math.pow(D,2));return{kW:D,kVA:V,kVAR:I,current:S,voltage:F,powerFactor:ce,amps:S}}else if(n==="motor-power"){if(!b||!E)return null;const S=D/C,V=D*1.341;let I=0;return s&&d&&(I=S*1e3/(Math.sqrt(3)*F*ce)),{inputKW:S,outputKW:D,outputHP:V,efficiency:C*100,amps:I,voltage:F,powerFactor:ce}}return null})();return pe.useImperativeHandle(t,()=>({exportPDF:()=>{if(!$){alert("Please enter all required values before exporting to PDF");return}const F={"find-power":"Calculate Power from Voltage & Current","find-current":"Calculate Current from Power & Voltage","motor-power":"Motor Power & Efficiency Calculation"};let oe;n==="motor-power"?oe={calculatorName:"Three-Phase Power Calculator - Motor",inputs:{calculationMode:F[n],outputPower:`${b} kW`,efficiency:`${E}%`,...s&&{voltage:`${s}V (${v==="line-to-line"?"Line-to-Line":"Line-to-Neutral"})`},...d&&{powerFactor:d}},results:{outputPower:`${$.outputKW.toFixed(2)} kW`,outputPowerHP:`${$.outputHP.toFixed(2)} HP`,inputPower:`${$.inputKW.toFixed(2)} kW`,efficiency:`${$.efficiency.toFixed(1)}%`,...$.amps>0&&{estimatedCurrent:`${$.amps.toFixed(2)} A`}},additionalInfo:{formula:"Input Power = Output Power  Efficiency",hpConversion:"1 kW = 1.341 HP",note:E?`At ${E}% efficiency, motor draws ${$.inputKW.toFixed(2)} kW to produce ${$.outputKW.toFixed(2)} kW output`:""}}:oe={calculatorName:"Three-Phase Power Calculator",inputs:{calculationMode:F[n],voltage:`${s}V (${v==="line-to-line"?"Line-to-Line":"Line-to-Neutral"})`,...u&&{current:`${u} A`},...b&&{power:`${b} kW`},powerFactor:d},results:{realPower:`${$.kW.toFixed(2)} kW`,apparentPower:`${$.kVA.toFixed(2)} kVA`,reactivePower:`${$.kVAR.toFixed(2)} kVAR`,current:`${$.amps.toFixed(2)} A`,voltage:`${$.voltage}V`,powerFactor:$.powerFactor},additionalInfo:{powerFormula:"P = 3  V  I  PF (kW)",apparentPowerFormula:"S = 3  V  I (kVA)",currentFormula:"I = P / (3  V  PF)",sqrt3:"3 = 1.732",configuration:v==="line-to-line"?"Line-to-Line (most common)":"Line-to-Neutral",note:"Three-phase systems are more efficient for power transmission and are standard in industrial applications"},necReferences:["Three-phase power: P = 3  VL-L  I  PF","Line-to-Line voltage: Standard between any two phases","Line-to-Neutral voltage: VL-N = VL-L  3","Common voltages: 208V, 240V, 480V, 600V (North America)","Three-phase systems provide constant power delivery","More efficient than single-phase for large loads and motors"]},un(oe)}})),o.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:k.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${k.cardBorder}`,paddingBottom:"0.5rem"},children:"Calculation Mode"}),o.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:[{value:"find-power",label:"Find Power (from Voltage & Current)"},{value:"find-current",label:"Find Current (from Power & Voltage)"},{value:"motor-power",label:"Motor Power & Efficiency"}].map(F=>o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:n===F.value?k.sectionBg:"transparent",border:`1px solid ${n===F.value?"#3b82f6":k.cardBorder}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseOver:oe=>{n!==F.value&&(oe.currentTarget.style.background=k.sectionBg)},onMouseOut:oe=>{n!==F.value&&(oe.currentTarget.style.background="transparent")},children:[o.jsx("input",{type:"radio",name:"calculationMode",value:F.value,checked:n===F.value,onChange:oe=>i(oe.target.value),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),o.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:k.cardText},children:F.label})]},F.value))})]}),o.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:k.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${k.cardBorder}`,paddingBottom:"0.5rem"},children:"Input Values"}),n==="motor-power"?o.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Output Power (kW)"}),o.jsx("input",{type:"number",value:b,onChange:F=>_(F.target.value),placeholder:"Motor output power",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Motor Efficiency (%)"}),o.jsx("input",{type:"number",value:E,onChange:F=>L(F.target.value),placeholder:"85-95% typical",step:"0.1",min:"0",max:"100",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"}}),o.jsx("div",{style:{fontSize:"0.75rem",color:k.subtleText,marginTop:"0.25rem"},children:"Optional: For current calculation, enter voltage and PF below"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Voltage (V) - Optional"}),o.jsxs("select",{value:s,onChange:F=>l(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"",children:"Select"}),o.jsx("option",{value:"208",children:"208V"}),o.jsx("option",{value:"240",children:"240V"}),o.jsx("option",{value:"380",children:"380V"}),o.jsx("option",{value:"400",children:"400V"}),o.jsx("option",{value:"415",children:"415V"}),o.jsx("option",{value:"480",children:"480V"}),o.jsx("option",{value:"600",children:"600V"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Power Factor - Optional"}),o.jsx("input",{type:"number",value:d,onChange:F=>g(F.target.value),placeholder:"0.80-0.95",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"}})]})]})]}):o.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Voltage Configuration"}),o.jsxs("select",{value:v,onChange:F=>N(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"line-to-line",children:"Line-to-Line (Most Common)"}),o.jsx("option",{value:"line-to-neutral",children:"Line-to-Neutral"})]}),o.jsx("div",{style:{fontSize:"0.75rem",color:k.subtleText,marginTop:"0.25rem"},children:"Line-to-Line: Voltage between any two phases"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Voltage (V)"}),o.jsxs("select",{value:s,onChange:F=>l(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[o.jsx("option",{value:"208",children:"208V"}),o.jsx("option",{value:"240",children:"240V"}),o.jsx("option",{value:"380",children:"380V"}),o.jsx("option",{value:"400",children:"400V"}),o.jsx("option",{value:"415",children:"415V"}),o.jsx("option",{value:"480",children:"480V"}),o.jsx("option",{value:"600",children:"600V"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),o.jsx("input",{type:"number",value:d,onChange:F=>g(F.target.value),placeholder:"0.80-0.95",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"}})]})]}),n==="find-power"&&o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Current (Amps)"}),o.jsx("input",{type:"number",value:u,onChange:F=>h(F.target.value),placeholder:"Line current",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"}})]}),n==="find-current"&&o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Power (kW)"}),o.jsx("input",{type:"number",value:b,onChange:F=>_(F.target.value),placeholder:"Real power",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"}})]})]})]}),$&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:k.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),n==="motor-power"?o.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[o.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:k.labelText,marginBottom:"0.25rem"},children:"Output Power"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:k.cardText},children:$.outputKW.toFixed(2)}),o.jsxs("div",{style:{fontSize:"0.75rem",color:k.labelText,marginTop:"0.25rem"},children:["kW (",$.outputHP.toFixed(2)," HP)"]})]}),o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Input Power Required"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:$.inputKW.toFixed(2)}),o.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:["kW @ ",$.efficiency.toFixed(1),"% efficiency"]})]})]}),$.amps>0&&o.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:k.labelText,marginBottom:"0.25rem"},children:"Estimated Current Draw"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:k.cardText},children:$.amps.toFixed(2)}),o.jsxs("div",{style:{fontSize:"0.75rem",color:k.labelText,marginTop:"0.25rem"},children:["Amps @ ",s,"V, PF ",d]})]})]}):o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:k.labelText,marginBottom:"0.25rem"},children:"Real Power (kW)"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:k.cardText},children:$.kW.toFixed(2)}),o.jsx("div",{style:{fontSize:"0.75rem",color:k.labelText,marginTop:"0.25rem"},children:"Working Power"})]}),o.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:k.labelText,marginBottom:"0.25rem"},children:"Apparent Power (kVA)"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:k.cardText},children:$.kVA.toFixed(2)}),o.jsx("div",{style:{fontSize:"0.75rem",color:k.labelText,marginTop:"0.25rem"},children:"Total Power"})]}),o.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Current (A)"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:$.amps.toFixed(2)}),o.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Line Current"})]})]})]}),o.jsx("div",{style:{background:k.sectionBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(xs,{size:20,color:"#3b82f6",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:k.labelText,lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",color:k.cardText,marginBottom:"0.5rem"},children:n==="motor-power"?"Motor Efficiency:":"Three-Phase Formulas:"}),o.jsx("div",{style:{display:"grid",gap:"0.25rem"},children:n==="motor-power"?o.jsxs(o.Fragment,{children:[o.jsx("div",{children:" Input Power = Output Power  Efficiency"}),o.jsx("div",{children:" 1 kW = 1.341 HP"}),o.jsx("div",{children:" Typical motor efficiency: 85-95%"}),o.jsx("div",{children:" Higher efficiency motors use less power"})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{children:" P (kW) = 3  V  I  PF  1000"}),o.jsx("div",{children:" S (kVA) = 3  V  I  1000"}),o.jsx("div",{children:" I (A) = P  1000  (3  V  PF)"}),o.jsx("div",{children:" 3 = 1.732 (constant for 3-phase)"}),o.jsxs("div",{children:[" ",v==="line-to-line"?"Using Line-to-Line voltage":"Using Line-to-Neutral voltage"]})]})})]})]})}),o.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"12px",padding:"1rem"},children:o.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[o.jsx(en,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Three-Phase Advantages:"}),o.jsxs("div",{style:{display:"grid",gap:"0.25rem"},children:[o.jsx("div",{children:" Delivers constant, smooth power (no pulsation)"}),o.jsx("div",{children:" More efficient for high-power applications"}),o.jsx("div",{children:" Smaller conductor sizes for same power"}),o.jsx("div",{children:" Standard for industrial and commercial buildings"}),o.jsx("div",{children:" Required for large motors and heavy equipment"})]})]})]})})]})]})}),VB=({isDarkMode:r})=>{const[e,t]=pe.useState(new Date),[n,i]=pe.useState(new Date),[s,l]=pe.useState([]),[u,h]=pe.useState(!0),d={bg:r?"#000000":"#f9fafb",cardBg:r?"#0a0a0a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#666666":"#6b7280",border:r?"#1a1a1a":"#e5e7eb",selectedDay:"#3b82f6",todayBg:r?"#1a1a1a":"#f3f4f6"},g={scheduled:"#3b82f6","in-progress":"#f59e0b",completed:"#10b981"};pe.useEffect(()=>{const w=Qm(qi,async B=>{if(B)try{const M=await $u();l(M)}catch(M){console.error("Error loading jobs:",M)}finally{h(!1)}else l([]),h(!1)});return()=>w()},[]);const b=s.map(w=>({...w,dateObj:w.date?new Date(w.date+"T00:00:00"):null})),_=w=>new Date(w.getFullYear(),w.getMonth()+1,0).getDate(),v=w=>new Date(w.getFullYear(),w.getMonth(),1).getDay(),N=(w,B)=>!w||!B?!1:w.getDate()===B.getDate()&&w.getMonth()===B.getMonth()&&w.getFullYear()===B.getFullYear(),E=w=>N(w,new Date),L=w=>b.filter(B=>B.dateObj&&N(B.dateObj,w)),k=w=>b.some(B=>B.dateObj&&N(B.dateObj,w)),O=()=>{t(new Date(e.getFullYear(),e.getMonth()-1))},$=()=>{t(new Date(e.getFullYear(),e.getMonth()+1))},F=["January","February","March","April","May","June","July","August","September","October","November","December"],oe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ce=_(e),D=v(e),C=[];for(let w=0;w<D;w++)C.push(null);for(let w=1;w<=ce;w++)C.push(new Date(e.getFullYear(),e.getMonth(),w));const S=L(n),V=new Date,I=b.filter(w=>w.dateObj&&w.dateObj>=V&&w.status==="scheduled").sort((w,B)=>w.dateObj-B.dateObj).slice(0,5);return u?o.jsx("div",{style:{minHeight:"100vh",background:d.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("div",{style:{color:d.text},children:"Loading..."})}):o.jsx("div",{style:{minHeight:"100vh",background:d.bg,paddingBottom:"5rem",maxWidth:"100vw",overflowX:"hidden"},children:o.jsxs("div",{style:{padding:"1rem"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5rem",marginBottom:"1rem",maxWidth:"100%",overflow:"hidden"},children:[o.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#3b82f6",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:I.length}),o.jsx("div",{style:{fontSize:"0.75rem",color:d.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Upcoming"})]}),o.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#f59e0b",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:s.filter(w=>w.status==="in-progress").length}),o.jsx("div",{style:{fontSize:"0.75rem",color:d.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"In Progress"})]}),o.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10b981",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:s.filter(w=>w.status==="completed").length}),o.jsx("div",{style:{fontSize:"0.75rem",color:d.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Completed"})]})]}),o.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem",boxShadow:"none"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[o.jsxs("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:"600",color:d.text},children:[F[e.getMonth()]," ",e.getFullYear()]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsx("button",{onClick:O,style:{background:d.bg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",color:d.text},children:o.jsx(QT,{size:20})}),o.jsx("button",{onClick:$,style:{background:d.bg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",color:d.text},children:o.jsx(ZT,{size:20})})]})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.25rem",marginBottom:"0.5rem"},children:oe.map(w=>o.jsx("div",{style:{textAlign:"center",fontSize:"0.75rem",fontWeight:"600",color:d.subtext,padding:"0.5rem 0"},children:w},w))}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.125rem"},children:C.map((w,B)=>{if(!w)return o.jsx("div",{},`empty-${B}`);const M=N(w,n),q=E(w),se=k(w);return o.jsxs("button",{onClick:()=>i(w),style:{aspectRatio:"1",border:"none",borderRadius:"0.375rem",background:M?d.selectedDay:q?d.todayBg:"transparent",color:M?"white":d.text,cursor:"pointer",fontSize:"0.75rem",fontWeight:M||q?"600":"400",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",padding:"0.25rem",minWidth:0,width:"100%"},onMouseEnter:te=>{M||(te.currentTarget.style.background=d.todayBg)},onMouseLeave:te=>{!M&&!q?te.currentTarget.style.background="transparent":!M&&q&&(te.currentTarget.style.background=d.todayBg)},children:[w.getDate(),se&&o.jsx("div",{style:{position:"absolute",bottom:"0.125rem",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"0.0625rem"},children:L(w).slice(0,3).map((te,re)=>o.jsx("div",{style:{width:"3px",height:"3px",borderRadius:"50%",background:M?"white":g[te.status]}},re))})]},B)})})]}),o.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem",boxShadow:"none"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[o.jsx("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:"600",color:d.text},children:N(n,new Date)?"Today":n.toLocaleDateString("en-US",{month:"long",day:"numeric"})}),o.jsxs("span",{style:{fontSize:"0.75rem",color:d.subtext,background:d.bg,padding:"0.25rem 0.75rem",borderRadius:"1rem"},children:[S.length," ",S.length===1?"job":"jobs"]})]}),S.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem",color:d.subtext},children:[o.jsx(r1,{size:48,style:{margin:"0 auto 0.5rem",opacity:.3}}),o.jsx("p",{style:{margin:0,fontSize:"0.875rem"},children:"No jobs scheduled for this day"})]}):o.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:S.map(w=>o.jsxs("div",{style:{background:d.bg,border:`1px solid ${d.border}`,borderLeft:`4px solid ${g[w.status]}`,borderRadius:"0.5rem",padding:"1rem"},children:[o.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:o.jsxs("div",{children:[o.jsx("h4",{style:{margin:"0 0 0.25rem 0",fontSize:"1rem",fontWeight:"600",color:d.text},children:w.title||w.name}),o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:d.subtext},children:w.client})]})}),o.jsxs("div",{style:{display:"grid",gap:"0.25rem",fontSize:"0.875rem",color:d.subtext},children:[w.time&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(qm,{size:14}),o.jsxs("span",{children:[w.time,w.duration&&` (${w.duration})`]})]}),w.location&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(lw,{size:14}),o.jsx("span",{children:w.location})]}),w.estimatedCost&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(Z1,{size:14}),o.jsxs("span",{children:["$",Number(w.estimatedCost).toLocaleString()]})]})]})]},w.id))})]}),o.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",boxShadow:"none"},children:[o.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"1.125rem",fontWeight:"600",color:d.text},children:"Upcoming Jobs"}),I.length===0?o.jsx("div",{style:{textAlign:"center",padding:"2rem 1rem",color:d.subtext},children:o.jsx("p",{style:{margin:0,fontSize:"0.875rem"},children:"No upcoming jobs scheduled"})}):o.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:I.map(w=>o.jsxs("div",{style:{background:d.bg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{style:{flex:1},children:[o.jsx("h4",{style:{margin:"0 0 0.25rem 0",fontSize:"0.9375rem",fontWeight:"600",color:d.text},children:w.title||w.name}),o.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.8125rem",color:d.subtext},children:w.client}),o.jsxs("div",{style:{fontSize:"0.75rem",color:d.subtext,display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(r1,{size:12}),w.dateObj.toLocaleDateString("en-US",{month:"short",day:"numeric"}),w.time&&` at ${w.time}`]})]}),o.jsx("div",{style:{width:"4px",height:"40px",borderRadius:"2px",background:g[w.status]}})]},w.id))})]})]})})},OB=()=>{const r=new Uint8Array(32);return crypto.getRandomValues(r),Array.from(r,e=>e.toString(16).padStart(2,"0")).join("")},Hb=async(r,e)=>{try{const t=OB(),n=new Date;return n.setHours(n.getHours()+24),await J1(ma(Ro,"verificationTokens",t),{userId:r,email:e,createdAt:Rl(),expiresAt:n.toISOString(),used:!1}),t}catch(t){throw console.error("Error creating verification token:",t),t}},MB=async r=>{try{const e=await R4(ma(Ro,"verificationTokens",r));if(!e.exists())return{success:!1,error:"Invalid verification link"};const t=e.data();return t.used?{success:!1,error:"This verification link has already been used"}:new Date(t.expiresAt)<new Date?{success:!1,error:"This verification link has expired"}:(await J1(ma(Ro,"users",t.userId),{emailVerified:!0,verifiedAt:Rl()},{merge:!0}),await J1(ma(Ro,"verificationTokens",r),{used:!0,usedAt:Rl()},{merge:!0}),{success:!0,userId:t.userId,email:t.email})}catch(e){return console.error("Error verifying token:",e),{success:!1,error:"Verification failed. Please try again."}}},DB=async r=>{try{const e=await R4(ma(Ro,"users",r));return e.exists()&&e.data().emailVerified===!0}catch(e){return console.error("Error checking verification status:",e),!1}},Gb=async(r,e)=>{try{const t=`${window.location.origin}?token=${e}`;if(!(await fetch("/.netlify/functions/send-verification-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,verificationLink:t})})).ok)throw new Error("Failed to send verification email");return{success:!0}}catch(t){throw console.error("Error sending verification email:",t),t}},WB=({isDarkMode:r})=>{const[e,t]=pe.useState(null),[n,i]=pe.useState(!0),[s,l]=pe.useState(!0),[u,h]=pe.useState(""),[d,g]=pe.useState(""),[b,_]=pe.useState(""),[v,N]=pe.useState(""),[E,L]=pe.useState(""),[k,O]=pe.useState(!1),[$,F]=pe.useState(!1),[oe,ce]=pe.useState(!1),[D,C]=pe.useState(!1),S={bg:r?"#000000":"#f9fafb",cardBg:r?"#0a0a0a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#666666":"#6b7280",border:r?"#1a1a1a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"},V={minLength:d.length>=8,hasUpperCase:/[A-Z]/.test(d),hasLowerCase:/[a-z]/.test(d),hasNumber:/[0-9]/.test(d)},I=Object.values(V).every(Boolean),w=d===b&&b!=="";pe.useEffect(()=>{const te=Qm(qi,async re=>{if(t(re),re){const xe=await DB(re.uid);C(xe)}else C(!1);i(!1)});return()=>te()},[]);const B=async()=>{if(e){ce(!0),N(""),L("");try{console.log(" Sending custom verification email to:",e.email);const te=await Hb(e.uid,e.email);await Gb(e.email,te),console.log(" Verification email sent via Resend"),L(`Verification email sent to ${e.email}! Check your inbox.`),setTimeout(()=>L(""),8e3)}catch(te){console.error(" Error sending verification email:",te),N(`Failed to send verification email: ${te.message}`),setTimeout(()=>N(""),5e3)}finally{ce(!1)}}},M=async te=>{if(te.preventDefault(),N(""),L(""),!I){N("Please meet all password requirements");return}if(d!==b){N("Passwords do not match");return}try{const re=await w7(qi,u,d),xe=await Hb(re.user.uid,u);await Gb(u,xe),h(""),g(""),_(""),L("Account created! Please check your email inbox to verify your account.")}catch(re){re.code==="auth/email-already-in-use"?N("This email is already registered. Try logging in instead."):N(re.message)}},q=async te=>{te.preventDefault(),N("");try{await S7(qi,u,d),h(""),g("")}catch(re){re.code==="auth/user-not-found"?N("No account found with this email."):re.code==="auth/wrong-password"?N("Incorrect password."):re.code==="auth/invalid-credential"?N("Invalid email or password."):N(re.message)}},se=async()=>{try{await A7(qi)}catch(te){N(te.message)}};return n?o.jsx("div",{style:{background:S.bg,minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("div",{style:{color:S.text},children:"Loading..."})}):e?o.jsx("div",{style:{background:S.bg,paddingBottom:"5rem"},children:o.jsxs("div",{style:{padding:"1rem"},children:[!D&&o.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem",display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[o.jsx(vc,{size:20,color:"#f59e0b",style:{flexShrink:0,marginTop:"0.125rem"}}),o.jsxs("div",{style:{flex:1},children:[o.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#92400e",fontSize:"0.875rem",fontWeight:"600"},children:"Please verify your email"}),o.jsx("p",{style:{margin:"0 0 0.75rem 0",color:"#92400e",fontSize:"0.8125rem"},children:"Check your inbox for a verification link to activate your account."}),o.jsx("button",{onClick:B,disabled:oe,style:{padding:"0.5rem 1rem",background:"#f59e0b",color:"white",border:"none",borderRadius:"0.375rem",fontSize:"0.8125rem",fontWeight:"600",cursor:oe?"not-allowed":"pointer",opacity:oe?.5:1},children:oe?"Sending...":"Resend Verification Email"})]})]}),E&&o.jsxs("div",{style:{padding:"0.75rem",background:"#dcfce7",border:"1px solid #86efac",borderRadius:"0.5rem",color:"#16a34a",fontSize:"0.875rem",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(en,{size:18}),E]}),v&&o.jsxs("div",{style:{padding:"0.75rem",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"0.5rem",color:"#dc2626",fontSize:"0.875rem",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(vc,{size:18}),v]}),o.jsxs("div",{style:{background:S.cardBg,borderRadius:"0.75rem",border:`1px solid ${S.border}`,padding:"2rem 1rem",marginBottom:"1rem",textAlign:"center",boxShadow:"none"},children:[o.jsxs("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:D?"#10b981":"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",position:"relative"},children:[o.jsx(uf,{size:40,color:"white"}),D&&o.jsx("div",{style:{position:"absolute",bottom:0,right:0,width:"24px",height:"24px",background:"#10b981",borderRadius:"50%",border:`2px solid ${S.cardBg}`,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(en,{size:14,color:"white"})})]}),o.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:S.text,fontSize:"1.25rem",fontWeight:"600"},children:e.email}),o.jsx("p",{style:{margin:0,color:S.subtext,fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.375rem"},children:D?o.jsxs(o.Fragment,{children:[o.jsx(en,{size:16,color:"#10b981"}),o.jsx("span",{children:"Verified Account"})]}):o.jsxs(o.Fragment,{children:[o.jsx(vc,{size:16,color:"#f59e0b"}),o.jsx("span",{children:"Unverified Account"})]})})]}),o.jsxs("div",{style:{background:S.cardBg,borderRadius:"0.75rem",border:`1px solid ${S.border}`,overflow:"hidden",marginBottom:"1rem",boxShadow:"none"},children:[o.jsx("h3",{style:{margin:0,padding:"1rem",color:S.text,fontSize:"1rem",fontWeight:"600",borderBottom:`1px solid ${S.border}`},children:"Account Settings"}),o.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",borderBottom:`1px solid ${S.border}`,display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:S.text},children:[o.jsx(Ty,{size:20,color:S.subtext}),o.jsxs("div",{style:{flex:1,textAlign:"left"},children:[o.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Email"}),o.jsx("div",{style:{fontSize:"0.8125rem",color:S.subtext},children:e.email})]})]}),o.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",borderBottom:`1px solid ${S.border}`,display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:S.text},children:[o.jsx(DT,{size:20,color:S.subtext}),o.jsxs("div",{style:{flex:1,textAlign:"left"},children:[o.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Notifications"}),o.jsx("div",{style:{fontSize:"0.8125rem",color:S.subtext},children:"Manage preferences"})]})]}),o.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:S.text},children:[o.jsx(z6,{size:20,color:S.subtext}),o.jsxs("div",{style:{flex:1,textAlign:"left"},children:[o.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Privacy & Security"}),o.jsx("div",{style:{fontSize:"0.8125rem",color:S.subtext},children:"Account protection"})]})]})]}),o.jsxs("button",{onClick:se,style:{width:"100%",padding:"1rem",background:"#ef4444",color:"white",border:"none",borderRadius:"0.75rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:"none"},children:[o.jsx(_6,{size:20}),"Log Out"]})]})}):o.jsx("div",{style:{background:S.bg,minHeight:"100vh",paddingBottom:"5rem"},children:o.jsx("div",{style:{padding:"1rem"},children:o.jsxs("div",{style:{background:S.cardBg,borderRadius:"0.75rem",border:`1px solid ${S.border}`,padding:"2rem 1rem",marginTop:"2rem",boxShadow:"none"},children:[o.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:o.jsx(uf,{size:40,color:"white"})}),o.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:S.text,fontSize:"1.5rem",fontWeight:"700",textAlign:"center"},children:s?"Welcome Back":"Create Account"}),o.jsx("p",{style:{margin:"0 0 2rem 0",color:S.subtext,fontSize:"0.875rem",textAlign:"center"},children:s?"Sign in to your account":"Sign up to get started"}),v&&o.jsx("div",{style:{padding:"0.75rem",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"0.5rem",color:"#dc2626",fontSize:"0.875rem",marginBottom:"1rem"},children:v}),E&&o.jsx("div",{style:{padding:"0.75rem",background:"#dcfce7",border:"1px solid #86efac",borderRadius:"0.5rem",color:"#16a34a",fontSize:"0.875rem",marginBottom:"1rem"},children:E}),o.jsxs("form",{onSubmit:s?q:M,children:[o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:S.text,fontSize:"0.875rem",fontWeight:"500"},children:"Email"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx(Ty,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:S.subtext}}),o.jsx("input",{type:"email",value:u,onChange:te=>h(te.target.value),placeholder:"your@email.com",required:!0,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}})]})]}),o.jsxs("div",{style:{marginBottom:s?"1.5rem":"1rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:S.text,fontSize:"0.875rem",fontWeight:"500"},children:"Password"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx(_y,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:S.subtext}}),o.jsx("input",{type:k?"text":"password",value:d,onChange:te=>g(te.target.value),placeholder:"",required:!0,style:{width:"100%",padding:"0.75rem 2.5rem 0.75rem 2.5rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}}),o.jsx("button",{type:"button",onClick:()=>O(!k),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:S.subtext,padding:"0.25rem",display:"flex",alignItems:"center"},children:k?o.jsx(wy,{size:18}):o.jsx(Sy,{size:18})})]})]}),!s&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:S.text,fontSize:"0.875rem",fontWeight:"500"},children:"Confirm Password"}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx(_y,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:S.subtext}}),o.jsx("input",{type:$?"text":"password",value:b,onChange:te=>_(te.target.value),placeholder:"",required:!0,style:{width:"100%",padding:"0.75rem 2.5rem 0.75rem 2.5rem",border:`1px solid ${b&&!w?"#ef4444":S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}}),o.jsx("button",{type:"button",onClick:()=>F(!$),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:S.subtext,padding:"0.25rem",display:"flex",alignItems:"center"},children:$?o.jsx(wy,{size:18}):o.jsx(Sy,{size:18})})]}),b&&!w&&o.jsx("p",{style:{margin:"0.5rem 0 0 0",color:"#ef4444",fontSize:"0.8125rem"},children:"Passwords do not match"})]}),o.jsxs("div",{style:{marginBottom:"1.5rem",padding:"0.75rem",background:r?"#1a1a1a":"#f9fafb",borderRadius:"0.5rem",border:`1px solid ${S.border}`},children:[o.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.75rem",fontWeight:"600",color:S.text},children:"Password must have:"}),[{key:"minLength",label:"At least 8 characters"},{key:"hasUpperCase",label:"One uppercase letter"},{key:"hasLowerCase",label:"One lowercase letter"},{key:"hasNumber",label:"One number"}].map(({key:te,label:re})=>o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[o.jsx(en,{size:14,style:{color:V[te]?"#10b981":S.subtext,flexShrink:0}}),o.jsx("span",{style:{fontSize:"0.8125rem",color:V[te]?S.text:S.subtext},children:re})]},te))]})]}),o.jsx("button",{type:"submit",disabled:!s&&(!I||!w),style:{width:"100%",padding:"0.875rem",background:!s&&(!I||!w)?S.border:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",cursor:!s&&(!I||!w)?"not-allowed":"pointer",marginBottom:"1rem",opacity:!s&&(!I||!w)?.5:1},children:s?"Sign In":"Sign Up"}),o.jsxs("div",{style:{textAlign:"center",color:S.subtext,fontSize:"0.875rem"},children:[s?"Don't have an account? ":"Already have an account? ",o.jsx("button",{type:"button",onClick:()=>{l(!s),N(""),L(""),g(""),_("")},style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",textDecoration:"underline"},children:s?"Sign Up":"Sign In"})]})]})]})})})},$B="_addJobButton_euajw_3",UB="_addJobContainer_euajw_19",Kb={addJobButton:$B,addJobContainer:UB},qB="_actionButtons_2jz29_3",HB="_cardHeader_2jz29_42",GB="_cardTitle_2jz29_49",t1={actionButtons:qB,cardHeader:HB,cardTitle:GB},KB=({job:r,statusConfig:e,statusDropdownOpen:t,setStatusDropdownOpen:n,onUpdateStatus:i,onViewJob:s,onViewEstimate:l,onViewInvoice:u,isDarkMode:h,colors:d})=>{const g=pe.useRef(null),[b,_]=pe.useState(!1),v=e[r.status].icon,N=r.title||r.name;return o.jsxs("div",{onClick:()=>_(!b),style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"0.75rem",transition:"all 0.2s",cursor:"pointer",WebkitTapHighlightColor:"transparent",userSelect:"none"},children:[o.jsxs("div",{className:t1.cardHeader,children:[o.jsxs("div",{className:t1.cardTitle,children:[o.jsxs("h3",{style:{margin:"0 0 0.25rem 0",color:d.text,fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[N,b?o.jsx(t6,{size:18}):o.jsx(gm,{size:18})]}),o.jsx("p",{style:{margin:0,color:d.subtext,fontSize:"0.875rem"},children:r.client})]}),o.jsxs("div",{style:{position:"relative"},ref:t===r.id?g:null,children:[o.jsxs("button",{onClick:E=>{E.stopPropagation(),n(t===r.id?null:r.id)},style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",padding:"4px 8px",borderRadius:"4px",background:`${e[r.status].color}20`,color:e[r.status].color,fontSize:"11px",fontWeight:"600",whiteSpace:"nowrap",border:"none",cursor:"pointer",transition:"all 0.2s",lineHeight:"1",minHeight:"unset",minWidth:"unset",height:"fit-content",width:"fit-content",boxSizing:"border-box"},children:[o.jsx(v,{size:12}),o.jsx("span",{children:e[r.status].label})]}),t===r.id&&o.jsx("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.5rem",background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:100,minWidth:"140px",overflow:"hidden"},children:Object.entries(e).map(([E,L])=>{const k=L.icon;return o.jsxs("button",{onClick:O=>{O.stopPropagation(),i(r.id,E)},style:{width:"100%",padding:"0.625rem 0.75rem",background:r.status===E?`${L.color}20`:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:L.color,fontSize:"0.875rem",fontWeight:r.status===E?"600":"500",transition:"background 0.2s"},onMouseEnter:O=>{r.status!==E&&(O.target.style.background=h?"#2a2a2a":"#f3f4f6")},onMouseLeave:O=>{r.status!==E&&(O.target.style.background="transparent")},children:[o.jsx(k,{size:16}),o.jsx("span",{children:L.label})]},E)})})]})]}),(r.location||r.date)&&o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem",color:d.subtext,fontSize:"0.875rem",gap:"1rem"},children:[r.location&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(lw,{size:16}),o.jsx("span",{children:r.location})]}),r.date&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginLeft:"auto"},children:[o.jsx(r1,{size:16}),o.jsxs("span",{children:[new Date(r.date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),r.time&&` (${r.time})`,r.duration&&` ${r.duration}`]})]})]}),b&&o.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:`1px solid ${d.border}`},children:[r.estimatedCost&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:d.subtext,fontSize:"0.875rem"},children:[o.jsx(Z1,{size:16}),o.jsxs("span",{children:["$",Number(r.estimatedCost).toLocaleString()]})]}),r.notes&&o.jsx("div",{style:{marginTop:"0.5rem"},children:o.jsx("p",{style:{margin:0,padding:"0.75rem",background:d.bg,borderRadius:"0.5rem",color:d.text,fontSize:"0.875rem",lineHeight:"1.5"},children:r.notes})})]}),o.jsxs("div",{className:t1.actionButtons,children:[o.jsxs("button",{onClick:E=>{E.stopPropagation(),s(r)},title:"Edit Job",style:{background:"#2563eb",border:"none",borderRadius:"0.5rem",color:"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:"600"},children:[o.jsx(gw,{size:16}),o.jsx("span",{children:"Edit"})]}),o.jsxs("button",{onClick:E=>{E.stopPropagation(),l(r)},title:r.estimateId?"View Estimate":"No estimate linked",style:{background:r.estimateId?"#10b981":d.border,border:"none",borderRadius:"0.5rem",color:"white",cursor:r.estimateId?"pointer":"not-allowed",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:"600",opacity:r.estimateId?1:.5},disabled:!r.estimateId,children:[o.jsx(jf,{size:16}),o.jsx("span",{children:"Estimate"})]}),o.jsxs("button",{onClick:E=>{E.stopPropagation(),u(r)},title:r.invoiceId?"View Invoice":"No invoice linked",style:{background:r.invoiceId?"#f59e0b":d.border,border:"none",borderRadius:"0.5rem",color:"white",cursor:r.invoiceId?"pointer":"not-allowed",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:"600",opacity:r.invoiceId?1:.5},disabled:!r.invoiceId,children:[o.jsx(e5,{size:16}),o.jsx("span",{children:"Invoice"})]})]})]})},JB=({linkedEstimate:r,estimates:e,showMenu:t,setShowMenu:n,onSelectEstimate:i,onCreateNewEstimate:s,onViewEstimate:l,onRemoveEstimate:u,menuRef:h,isDarkMode:d,colors:g})=>r?o.jsxs("div",{style:{marginBottom:"0.75rem"},children:[o.jsxs("button",{type:"button",onClick:()=>l(r.id),style:{width:"100%",padding:"0.75rem",background:g.bg,border:`1px solid ${g.border}`,borderRadius:"0.5rem",cursor:"pointer",textAlign:"left",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:g.text,marginBottom:"0.25rem"},children:r.name}),o.jsxs("div",{style:{fontSize:"0.75rem",color:g.subtext},children:["$",Number(r.total||0).toLocaleString()]})]}),o.jsx("div",{style:{padding:"0.25rem 0.5rem",background:"#2563eb",color:"white",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:"View"})]}),o.jsx("button",{type:"button",onClick:u,style:{width:"100%",padding:"0.5rem",marginTop:"0.5rem",background:"transparent",border:`1px solid ${g.border}`,borderRadius:"0.5rem",color:g.subtext,cursor:"pointer",fontSize:"0.75rem"},children:"Remove Estimate"})]}):o.jsxs("div",{style:{position:"relative",marginBottom:"0.75rem"},ref:t?h:null,children:[o.jsxs("button",{type:"button",onClick:()=>n(!t),style:{width:"100%",padding:"0.75rem",background:g.inputBg,border:`1px solid ${g.border}`,borderRadius:"0.5rem",color:"#2563eb",cursor:"pointer",fontSize:"0.9375rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[o.jsx(ga,{size:18}),"Add Estimate"]}),t&&o.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"0.5rem",background:g.cardBg,border:`1px solid ${g.border}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:100,maxHeight:"200px",overflowY:"auto"},children:[o.jsxs("button",{type:"button",onClick:s,style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${g.border}`,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563eb",fontSize:"0.875rem",fontWeight:"600",textAlign:"left"},onMouseEnter:b=>b.target.style.background=d?"#2a2a2a":"#f3f4f6",onMouseLeave:b=>b.target.style.background="transparent",children:[o.jsx(ga,{size:16}),"Create New Estimate"]}),e.length===0?o.jsx("div",{style:{padding:"1rem",textAlign:"center",color:g.subtext,fontSize:"0.875rem"},children:"No estimates available"}):e.map(b=>o.jsxs("button",{type:"button",onClick:()=>i(b),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${g.border}`,cursor:"pointer",textAlign:"left",color:g.text,fontSize:"0.875rem"},onMouseEnter:_=>_.target.style.background=d?"#2a2a2a":"#f3f4f6",onMouseLeave:_=>_.target.style.background="transparent",children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:b.name||"Untitled Estimate"}),o.jsxs("div",{style:{color:g.subtext,fontSize:"0.75rem"},children:["$",Number(b.total||0).toLocaleString()]})]},b.id))]})]}),O4=({formData:r,setFormData:e,linkedEstimate:t,estimates:n,showEstimateMenu:i,setShowEstimateMenu:s,onSelectEstimate:l,onCreateNewEstimate:u,onViewEstimate:h,onRemoveEstimate:d,estimateMenuRef:g,isDarkMode:b,colors:_})=>o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"text",placeholder:"Job Title *",value:r.title,onChange:v=>e(N=>({...N,title:v.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${_.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:_.inputBg,color:_.text,boxSizing:"border-box"}}),o.jsx("input",{type:"text",placeholder:"Client Name *",value:r.client,onChange:v=>e(N=>({...N,client:v.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${_.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:_.inputBg,color:_.text,boxSizing:"border-box"}}),o.jsx("input",{type:"text",placeholder:"Location",value:r.location,onChange:v=>e(N=>({...N,location:v.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${_.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:_.inputBg,color:_.text,boxSizing:"border-box"}}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[o.jsx("input",{type:"date",value:r.date,onChange:v=>e(N=>({...N,date:v.target.value})),style:{padding:"0.75rem",border:`1px solid ${_.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:_.inputBg,color:_.text,boxSizing:"border-box"}}),o.jsx("input",{type:"time",value:r.time,onChange:v=>e(N=>({...N,time:v.target.value})),style:{padding:"0.75rem",border:`1px solid ${_.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:_.inputBg,color:_.text,boxSizing:"border-box"}})]}),o.jsx(JB,{linkedEstimate:t,estimates:n,showMenu:i,setShowMenu:s,onSelectEstimate:l,onCreateNewEstimate:u,onViewEstimate:h,onRemoveEstimate:d,menuRef:g,isDarkMode:b,colors:_}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[o.jsx("input",{type:"number",placeholder:"Cost ($)",value:r.estimatedCost,onChange:v=>e(N=>({...N,estimatedCost:v.target.value})),style:{padding:"0.75rem",border:`1px solid ${_.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:_.inputBg,color:_.text,boxSizing:"border-box"}}),o.jsx("input",{type:"text",placeholder:"Duration",value:r.duration,onChange:v=>e(N=>({...N,duration:v.target.value})),style:{padding:"0.75rem",border:`1px solid ${_.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:_.inputBg,color:_.text,boxSizing:"border-box"}})]}),o.jsxs("select",{value:r.status,onChange:v=>e(N=>({...N,status:v.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${_.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:_.inputBg,color:_.text,boxSizing:"border-box"},children:[o.jsx("option",{value:"scheduled",children:"Scheduled"}),o.jsx("option",{value:"in-progress",children:"In Progress"}),o.jsx("option",{value:"completed",children:"Completed"})]}),o.jsx("textarea",{placeholder:"Notes",value:r.notes,onChange:v=>e(N=>({...N,notes:v.target.value})),rows:"3",style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${_.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:_.inputBg,color:_.text,boxSizing:"border-box",resize:"vertical"}})]}),YB=({viewingJob:r,formData:e,setFormData:t,linkedEstimate:n,estimates:i,showEstimateMenu:s,setShowEstimateMenu:l,onSelectEstimate:u,onCreateNewEstimate:h,onViewEstimate:d,onRemoveEstimate:g,estimateMenuRef:b,onClose:_,onSave:v,onDelete:N,isDarkMode:E,colors:L})=>r?o.jsxs(o.Fragment,{children:[o.jsx("div",{onClick:_,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:1e3,animation:"fadeIn 0.2s"}}),o.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:L.cardBg,borderRadius:"1rem",padding:"1.5rem",paddingBottom:"calc(100px + env(safe-area-inset-bottom))",width:"90%",maxWidth:"500px",maxHeight:"80vh",overflowY:"auto",zIndex:1001,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.3)",WebkitOverflowScrolling:"touch"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[o.jsx("h2",{style:{margin:0,fontSize:"1.25rem",fontWeight:"600",color:L.text},children:"Job Details"}),o.jsx("button",{onClick:_,style:{background:"transparent",border:"none",cursor:"pointer",padding:"0.5rem",color:L.subtext,display:"flex",alignItems:"center"},children:o.jsx(ww,{size:24})})]}),o.jsxs("div",{children:[o.jsx(O4,{formData:e,setFormData:t,linkedEstimate:n,estimates:i,showEstimateMenu:s,setShowEstimateMenu:l,onSelectEstimate:u,onCreateNewEstimate:h,onViewEstimate:d,onRemoveEstimate:g,estimateMenuRef:b,isDarkMode:E,colors:L}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsx("button",{onClick:v,disabled:!e.title||!e.client,style:{flex:1,padding:"0.75rem",background:!e.title||!e.client?L.border:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:!e.title||!e.client?"not-allowed":"pointer",opacity:!e.title||!e.client?.5:1},children:"Save Changes"}),o.jsx("button",{onClick:()=>N(r.id,r.title||r.name),style:{padding:"0.75rem",background:"transparent",color:"#ef4444",border:"1px solid #ef4444",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.25rem"},children:o.jsx(Cc,{size:16})})]})]})]})]}):null,QB=({activeStatusTab:r,setActiveStatusTab:e,statusCounts:t,statusConfig:n,colors:i})=>o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.375rem",marginBottom:"1rem"},children:[o.jsxs("button",{onClick:()=>e("all"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${r==="all"?i.text:i.border}`,background:r==="all"?i.text:"transparent",color:r==="all"?i.bg:i.text,fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"0.375rem",transition:"all 0.2s"},children:[o.jsx("span",{children:"All"}),o.jsx("span",{style:{background:r==="all"?i.bg:i.cardBg,color:r==="all"?i.text:i.subtext,padding:"0.125rem 0.375rem",borderRadius:"1rem",fontSize:"0.7rem",fontWeight:"700",minWidth:"1.25rem",textAlign:"center"},children:t.all})]}),o.jsxs("button",{onClick:()=>e("scheduled"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${r==="scheduled"?n.scheduled.color:i.border}`,background:r==="scheduled"?`${n.scheduled.color}20`:"transparent",color:r==="scheduled"?n.scheduled.color:i.text,fontSize:"0.7rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.125rem",transition:"all 0.2s"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(qm,{size:12}),o.jsx("span",{style:{background:r==="scheduled"?n.scheduled.color:i.cardBg,color:r==="scheduled"?"white":i.subtext,padding:"0.125rem 0.3rem",borderRadius:"1rem",fontSize:"0.65rem",fontWeight:"700",minWidth:"1.25rem",textAlign:"center"},children:t.scheduled})]}),o.jsx("span",{style:{fontSize:"0.65rem"},children:"Scheduled"})]}),o.jsxs("button",{onClick:()=>e("in-progress"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${r==="in-progress"?n["in-progress"].color:i.border}`,background:r==="in-progress"?`${n["in-progress"].color}20`:"transparent",color:r==="in-progress"?n["in-progress"].color:i.text,fontSize:"0.7rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.125rem",transition:"all 0.2s"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(vc,{size:12}),o.jsx("span",{style:{background:r==="in-progress"?n["in-progress"].color:i.cardBg,color:r==="in-progress"?"white":i.subtext,padding:"0.125rem 0.3rem",borderRadius:"1rem",fontSize:"0.65rem",fontWeight:"700",minWidth:"1.25rem",textAlign:"center"},children:t["in-progress"]})]}),o.jsx("span",{style:{fontSize:"0.65rem"},children:"In Progress"})]}),o.jsxs("button",{onClick:()=>e("completed"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${r==="completed"?n.completed.color:i.border}`,background:r==="completed"?`${n.completed.color}20`:"transparent",color:r==="completed"?n.completed.color:i.text,fontSize:"0.7rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.125rem",transition:"all 0.2s"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx(en,{size:12}),o.jsx("span",{style:{background:r==="completed"?n.completed.color:i.cardBg,color:r==="completed"?"white":i.subtext,padding:"0.125rem 0.3rem",borderRadius:"1rem",fontSize:"0.65rem",fontWeight:"700",minWidth:"1.25rem",textAlign:"center"},children:t.completed})]}),o.jsx("span",{style:{fontSize:"0.65rem"},children:"Completed"})]})]}),XB=({isDarkMode:r,onNavigateToEstimates:e})=>{var _e;const[t,n]=pe.useState([]),[i,s]=pe.useState(!0),[l,u]=pe.useState(!1),[h,d]=pe.useState(null),[g,b]=pe.useState(null),[_,v]=pe.useState(null),[N,E]=pe.useState(!1),[L,k]=pe.useState([]),O=pe.useRef(null),[$,F]=pe.useState(null),[oe,ce]=pe.useState(""),[D,C]=pe.useState("all"),[S,V]=pe.useState({title:"",client:"",location:"",status:"scheduled",date:"",time:"",estimatedCost:"",duration:"",notes:""}),I={bg:r?"#000000":"#f9fafb",cardBg:r?"#1a1a1a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#999999":"#6b7280",border:r?"#2a2a2a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"},w={scheduled:{color:"#3b82f6",icon:qm,label:"Scheduled"},"in-progress":{color:"#f59e0b",icon:vc,label:"In Progress"},completed:{color:"#10b981",icon:en,label:"Completed"}};pe.useEffect(()=>{const fe=Qm(qi,ve=>{ve?B():s(!1)});return()=>fe()},[]),pe.useEffect(()=>{const fe=async()=>{try{const{getUserEstimates:ve}=await pu(async()=>{const{getUserEstimates:Ue}=await Promise.resolve().then(()=>Jb);return{getUserEstimates:Ue}},void 0),Ne=await ve();k(Ne)}catch(ve){console.error("Error loading estimates:",ve)}};qi.currentUser&&fe()},[]),pe.useEffect(()=>{const fe=ve=>{O.current&&!O.current.contains(ve.target)&&E(!1)};return document.addEventListener("mousedown",fe),()=>document.removeEventListener("mousedown",fe)},[]);const B=async()=>{s(!0);try{const fe=await $u();n(fe)}catch(fe){console.error("Error loading jobs:",fe),alert("Failed to load jobs. Please try again.")}finally{s(!1)}},M=()=>{V({title:"",client:"",location:"",status:"scheduled",date:"",time:"",estimatedCost:"",duration:"",notes:""}),u(!1),b(null),d(null),F(null)},q=async()=>{if(S.title&&S.client)try{const fe={name:S.title,title:S.title,client:S.client,location:S.location,status:S.status,date:S.date,time:S.time,estimatedCost:S.estimatedCost,duration:S.duration,notes:S.notes,estimateId:($==null?void 0:$.id)||null};await Y1(fe),M(),B()}catch(fe){console.error("Error adding job:",fe),alert("Failed to add job. Please try again.")}},se=async()=>{if(S.title&&S.client&&g)try{const{updateJob:fe}=await pu(async()=>{const{updateJob:Ne}=await Promise.resolve().then(()=>Ob);return{updateJob:Ne}},void 0),ve={name:S.title,title:S.title,client:S.client,location:S.location,status:S.status,date:S.date,time:S.time,estimatedCost:S.estimatedCost,duration:S.duration,notes:S.notes,estimateId:($==null?void 0:$.id)||null};await fe(g.id,ve),M(),B()}catch(fe){console.error("Error updating job:",fe),alert("Failed to update job. Please try again.")}},te=async(fe,ve)=>{try{const{updateJob:Ne}=await pu(async()=>{const{updateJob:Xe}=await Promise.resolve().then(()=>Ob);return{updateJob:Xe}},void 0),Ue=t.find(Xe=>Xe.id===fe);await Ne(fe,{...Ue,status:ve}),v(null),B()}catch(Ne){console.error("Error updating status:",Ne),alert("Failed to update status. Please try again.")}},re=fe=>{if(d(fe),b(fe),V({title:fe.title||fe.name,client:fe.client,location:fe.location||"",status:fe.status,date:fe.date||"",time:fe.time||"",estimatedCost:fe.estimatedCost||"",duration:fe.duration||"",notes:fe.notes||""}),fe.estimateId){const ve=L.find(Ne=>Ne.id===fe.estimateId);ve&&F(ve)}else F(null)},xe=async(fe,ve)=>{if(window.confirm(`Are you sure you want to delete "${ve}"?`))try{await z4(fe),h&&h.id===fe&&M(),B()}catch(Ne){console.error("Error deleting job:",Ne),alert("Failed to delete job. Please try again.")}},be=fe=>{fe&&(V(ve=>({...ve,estimatedCost:fe.total.toString(),estimateId:fe.id})),F(fe)),E(!1)},Z=async()=>{if(E(!1),l&&S.title&&S.client)try{const fe={name:S.title,title:S.title,client:S.client,location:S.location,status:S.status,date:S.date,time:S.time,estimatedCost:S.estimatedCost,duration:S.duration,notes:S.notes},Ne={jobId:await Y1(fe),jobName:S.title,jobClient:S.client};e&&e(Ne),M(),B()}catch(fe){console.error("Error creating job:",fe),alert("Failed to create job. Please try again.")}else if(h){const fe={jobId:h.id,jobName:h.title||h.name,jobClient:h.client};e&&e(fe)}else alert("Please fill in the job title and client name first.")},W=fe=>{e&&e({viewEstimateId:fe})},J=()=>{F(null),V(fe=>({...fe,estimatedCost:"",estimateId:null}))},ie=async fe=>{if(E(fe),fe===!0)try{const{getUserEstimates:ve}=await pu(async()=>{const{getUserEstimates:Ue}=await Promise.resolve().then(()=>Jb);return{getUserEstimates:Ue}},void 0),Ne=await ve();k(Ne)}catch(ve){console.error("Error loading estimates:",ve)}},he=t.filter(fe=>{if(oe){const ve=oe.toLowerCase(),Ne=(fe.title||fe.name||"").toLowerCase(),Ue=(fe.client||"").toLowerCase(),Xe=(fe.location||"").toLowerCase(),Ze=(fe.notes||"").toLowerCase();if(!(Ne.includes(ve)||Ue.includes(ve)||Xe.includes(ve)||Ze.includes(ve)))return!1}return D==="all"?!0:fe.status===D}),ge={all:t.length,scheduled:t.filter(fe=>fe.status==="scheduled").length,"in-progress":t.filter(fe=>fe.status==="in-progress").length,completed:t.filter(fe=>fe.status==="completed").length};return i?o.jsx("div",{style:{minHeight:"100vh",background:I.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("div",{style:{color:I.subtext},children:"Loading jobs..."})}):o.jsx("div",{className:"jobs-container",children:o.jsxs("div",{style:{minHeight:"100vh",background:I.bg,paddingBottom:"5rem"},children:[o.jsx(YB,{viewingJob:h,formData:S,setFormData:V,linkedEstimate:$,estimates:L,showEstimateMenu:N,setShowEstimateMenu:ie,onSelectEstimate:be,onCreateNewEstimate:Z,onViewEstimate:W,onRemoveEstimate:J,estimateMenuRef:O,onClose:M,onSave:se,onDelete:xe,isDarkMode:r,colors:I}),o.jsxs("div",{style:{padding:"1rem 0.25rem"},children:[o.jsx(QB,{activeStatusTab:D,setActiveStatusTab:C,statusCounts:ge,statusConfig:w,colors:I}),o.jsxs("div",{style:{marginBottom:"1rem",position:"relative"},children:[o.jsx("input",{type:"text",placeholder:"Search jobs...",value:oe,onChange:fe=>ce(fe.target.value),style:{width:"100%",padding:"0.75rem",paddingLeft:"2.5rem",paddingRight:oe?"2.5rem":"0.75rem",border:`1px solid ${I.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:I.inputBg,color:I.text,boxSizing:"border-box"}}),o.jsx(fw,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:I.subtext,pointerEvents:"none"}}),oe&&o.jsx("button",{onClick:()=>ce(""),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:I.subtext,padding:"0.25rem",display:"flex",alignItems:"center"},children:o.jsx(ww,{size:18})})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0 0.25rem"},children:[o.jsx("h3",{style:{margin:0,color:I.text,fontSize:"1.125rem",fontWeight:"600"},children:D==="all"?"All Jobs":D==="scheduled"?"Scheduled Jobs":D==="in-progress"?"In Progress Jobs":"Completed Jobs"}),o.jsxs("span",{style:{fontSize:"0.875rem",color:I.subtext,background:I.cardBg,padding:"0.25rem 0.75rem",borderRadius:"1rem",border:`1px solid ${I.border}`},children:[he.length," ",he.length===1?"job":"jobs"]})]}),o.jsxs("div",{className:Kb.addJobContainer,style:{background:I.cardBg,border:`1px solid ${I.border}`},children:[o.jsxs("button",{onClick:()=>u(!l),className:Kb.addJobButton,style:{color:I.text},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:[o.jsx(ga,{size:18}),"Add New Job"]}),o.jsx(gm,{size:18,style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),l&&o.jsx("div",{style:{padding:"0 1rem 1rem 1rem",borderTop:`1px solid ${I.border}`},children:o.jsxs("div",{style:{paddingTop:"1rem"},children:[o.jsx(O4,{formData:S,setFormData:V,linkedEstimate:$,estimates:L,showEstimateMenu:N,setShowEstimateMenu:ie,onSelectEstimate:be,onCreateNewEstimate:Z,onViewEstimate:W,onRemoveEstimate:J,estimateMenuRef:O,isDarkMode:r,colors:I}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsx("button",{onClick:q,disabled:!S.title||!S.client,style:{flex:1,padding:"0.75rem",background:!S.title||!S.client?I.border:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:!S.title||!S.client?"not-allowed":"pointer",opacity:!S.title||!S.client?.5:1},children:"Add Job"}),o.jsx("button",{onClick:M,style:{flex:1,padding:"0.75rem",background:"transparent",color:I.text,border:`1px solid ${I.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})})]}),he.length===0?o.jsxs("div",{style:{background:I.cardBg,border:`1px solid ${I.border}`,borderRadius:"0.75rem",textAlign:"center",padding:"3rem 1rem",color:I.subtext},children:[o.jsx(Lu,{size:48,style:{margin:"0 auto 1rem",opacity:.5}}),o.jsx("p",{style:{margin:0,fontSize:"0.9375rem"},children:oe?"No jobs match your search.":D==="all"?"No jobs yet. Add your first job above!":`No ${(_e=w[D])==null?void 0:_e.label.toLowerCase()} jobs.`})]}):[...he].sort((fe,ve)=>!fe.date&&!ve.date?0:fe.date?ve.date?new Date(ve.date)-new Date(fe.date):-1:1).map(fe=>o.jsx(KB,{job:fe,statusConfig:w,statusDropdownOpen:_,setStatusDropdownOpen:v,onUpdateStatus:te,onViewJob:re,onViewEstimate:ve=>{ve.estimateId&&e&&e({viewEstimateId:ve.estimateId})},onViewInvoice:ve=>{ve.invoiceId&&console.log("View invoice:",ve.invoiceId)},isDarkMode:r,colors:I},fe.id))]})]})})},M4=async()=>{try{const r=qi.currentUser;if(!r)throw new Error("No user logged in");const e=Hf(Ro,"estimates"),t=I4(e,hN("userId","==",r.uid)),n=await N4(t),i=[];return n.forEach(s=>{var l;i.push({id:s.id,...s.data(),createdAt:((l=s.data().createdAt)==null?void 0:l.toDate())||new Date})}),i}catch(r){throw console.error("Error getting estimates:",r),r}},D4=async r=>{try{const e=qi.currentUser;if(!e)throw new Error("No user logged in");const t=Hf(Ro,"estimates");return(await o2(t,{...r,userId:e.uid,createdAt:Rl(),updatedAt:Rl()})).id}catch(e){throw console.error("Error creating estimate:",e),e}},W4=async(r,e)=>{try{if(!qi.currentUser)throw new Error("No user logged in");const n=ma(Ro,"estimates",r);await B4(n,{...e,updatedAt:Rl()})}catch(t){throw console.error("Error updating estimate:",t),t}},$4=async r=>{try{if(!qi.currentUser)throw new Error("No user logged in");const t=ma(Ro,"estimates",r);await L4(t)}catch(e){throw console.error("Error deleting estimate:",e),e}},Jb=Object.freeze(Object.defineProperty({__proto__:null,createEstimate:D4,deleteEstimate:$4,getUserEstimates:M4,updateEstimate:W4},Symbol.toStringTag,{value:"Module"})),ZB=({isDarkMode:r,jobs:e=[],onApplyToJob:t,pendingEstimateData:n,onClearPendingData:i,navigationData:s})=>{const[l,u]=pe.useState([]),[h,d]=pe.useState(!0),[g,b]=pe.useState(!1),[_,v]=pe.useState(null),[N,E]=pe.useState(null),[L,k]=pe.useState({name:"",laborHours:"",laborRate:"",materials:[],jobId:null}),[O,$]=pe.useState({name:"",cost:""}),F={bg:r?"#000000":"#f9fafb",cardBg:r?"#1a1a1a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#999999":"#6b7280",border:r?"#2a2a2a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"};pe.useEffect(()=>{const q=Qm(qi,se=>{se?oe():d(!1)});return()=>q()},[]),pe.useEffect(()=>{n&&(k({name:n.jobName||"",laborHours:"",laborRate:"",materials:[],jobId:n.jobId||null}),b(!0),i&&i())},[n,i]),pe.useEffect(()=>{if(s!=null&&s.viewEstimateId){const q=l.find(se=>se.id===s.viewEstimateId);q&&w(q)}},[s,l]);const oe=async()=>{d(!0);try{const q=await M4();u(q)}catch(q){console.error("Error loading estimates:",q),alert("Failed to load estimates. Please try again.")}finally{d(!1)}},ce=(q,se,te)=>{const re=(parseFloat(q)||0)*(parseFloat(se)||0),xe=te.reduce((be,Z)=>be+(parseFloat(Z.cost)||0),0);return re+xe},D=ce(L.laborHours,L.laborRate,L.materials),C=()=>{O.name&&O.cost&&(k(q=>({...q,materials:[...q.materials,{...O}]})),$({name:"",cost:""}))},S=q=>{k(se=>({...se,materials:se.materials.filter((te,re)=>re!==q)}))},V=async()=>{if(L.name)try{const q=ce(L.laborHours,L.laborRate,L.materials),se={name:L.name,laborHours:parseFloat(L.laborHours)||0,laborRate:parseFloat(L.laborRate)||0,materials:L.materials,total:q,jobId:L.jobId||null};_?await W4(_.id,se):await D4(se),I(),oe()}catch(q){console.error("Error saving estimate:",q),alert("Failed to save estimate. Please try again.")}},I=()=>{k({name:"",laborHours:"",laborRate:"",materials:[],jobId:null}),$({name:"",cost:""}),b(!1),v(null)},w=q=>{v(q),k({name:q.name,laborHours:q.laborHours.toString(),laborRate:q.laborRate.toString(),materials:[...q.materials],jobId:q.jobId||null}),b(!0),window.scrollTo({top:0,behavior:"smooth"})},B=async(q,se)=>{if(window.confirm(`Delete "${se}"?`))try{await $4(q),oe()}catch(te){console.error("Error deleting estimate:",te),alert("Failed to delete estimate. Please try again.")}},M=(q,se)=>{t&&t(q,se),E(null)};return h?o.jsx("div",{style:{minHeight:"100vh",background:F.bg,display:"flex",alignItems:"center",justifyContent:"center",paddingBottom:"5rem"},children:o.jsx("div",{style:{color:F.subtext},children:"Loading estimates..."})}):o.jsx("div",{style:{background:F.bg,minHeight:"100vh",paddingBottom:"5rem"},children:o.jsxs("div",{style:{padding:"1rem"},children:[o.jsxs("div",{style:{background:F.cardBg,borderRadius:"0.75rem",border:`1px solid ${F.border}`,boxShadow:"none",marginBottom:"1rem",overflow:"hidden"},children:[o.jsxs("button",{onClick:()=>b(!g),style:{width:"100%",padding:"1rem",background:"transparent",border:"none",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",color:F.text},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:[o.jsx(ga,{size:20}),_?"Edit Estimate":"New Estimate"]}),o.jsx(gm,{size:20,style:{transform:g?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),g&&o.jsx("div",{style:{padding:"0 1rem 1rem 1rem",borderTop:`1px solid ${F.border}`},children:o.jsxs("div",{style:{paddingTop:"1rem"},children:[o.jsx("input",{type:"text",placeholder:"Estimate Name *",value:L.name,onChange:q=>k(se=>({...se,name:q.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}}),o.jsx("h4",{style:{margin:"0 0 0.5rem 0",fontSize:"0.875rem",fontWeight:"600",color:F.text},children:"Labor"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[o.jsx("input",{type:"number",placeholder:"Hours",value:L.laborHours,onChange:q=>k(se=>({...se,laborHours:q.target.value})),style:{padding:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}}),o.jsx("input",{type:"number",placeholder:"Rate ($/hr)",value:L.laborRate,onChange:q=>k(se=>({...se,laborRate:q.target.value})),style:{padding:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}})]}),o.jsx("h4",{style:{margin:"1rem 0 0.5rem 0",fontSize:"0.875rem",fontWeight:"600",color:F.text},children:"Materials"}),L.materials.map((q,se)=>o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem",padding:"0.75rem",background:F.bg,borderRadius:"0.5rem"},children:[o.jsxs("div",{style:{flex:1},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:F.text},children:q.name}),o.jsxs("div",{style:{fontSize:"0.75rem",color:F.subtext},children:["$",parseFloat(q.cost).toFixed(2)]})]}),o.jsx("button",{onClick:()=>S(se),style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",padding:"0.25rem"},children:o.jsx(Cc,{size:16})})]},se)),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[o.jsx("input",{type:"text",placeholder:"Material name",value:O.name,onChange:q=>$(se=>({...se,name:q.target.value})),style:{flex:1,padding:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.875rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}}),o.jsx("input",{type:"number",placeholder:"Cost",value:O.cost,onChange:q=>$(se=>({...se,cost:q.target.value})),style:{width:"100px",padding:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.875rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}}),o.jsx("button",{onClick:C,style:{padding:"0.75rem",background:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center"},children:o.jsx(ga,{size:16})})]}),o.jsx("div",{style:{padding:"0.75rem",background:F.bg,borderRadius:"0.5rem",marginBottom:"0.75rem"},children:o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.125rem",fontWeight:"600",color:F.text},children:[o.jsx("span",{children:"Total:"}),o.jsxs("span",{children:["$",D.toFixed(2)]})]})}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs("button",{onClick:V,disabled:!L.name,style:{flex:1,padding:"0.75rem",background:L.name?"#2563eb":F.border,color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:L.name?"pointer":"not-allowed",opacity:L.name?1:.5},children:[_?"Update":"Save"," Estimate"]}),o.jsx("button",{onClick:I,style:{flex:1,padding:"0.75rem",background:"transparent",color:F.text,border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0 0.25rem"},children:[o.jsx("h3",{style:{margin:0,color:F.text,fontSize:"1.125rem",fontWeight:"600"},children:"Saved Estimates"}),o.jsx("span",{style:{fontSize:"0.875rem",color:F.subtext,background:F.cardBg,padding:"0.25rem 0.75rem",borderRadius:"1rem",border:`1px solid ${F.border}`},children:l.length})]}),l.length===0?o.jsxs("div",{style:{background:F.cardBg,border:`1px solid ${F.border}`,borderRadius:"0.75rem",textAlign:"center",padding:"3rem 1rem",color:F.subtext},children:[o.jsx(jf,{size:48,style:{margin:"0 auto 1rem",opacity:.5}}),o.jsx("p",{style:{margin:0,fontSize:"0.9375rem"},children:"No estimates yet. Create one above!"})]}):l.map(q=>{var se;return o.jsxs("div",{style:{background:F.cardBg,border:`1px solid ${F.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"0.75rem",boxShadow:"none"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[o.jsxs("div",{children:[o.jsx("h3",{style:{margin:"0 0 0.25rem 0",color:F.text,fontSize:"1rem",fontWeight:"600"},children:q.name}),o.jsx("p",{style:{margin:0,color:F.subtext,fontSize:"0.75rem"},children:((se=q.createdAt)==null?void 0:se.toLocaleDateString())||"N/A"})]}),o.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10b981"},children:["$",q.total.toFixed(2)]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:F.subtext,fontSize:"0.875rem"},children:[o.jsx(qm,{size:16}),o.jsxs("span",{children:[q.laborHours,"h  $",q.laborRate,"/hr = $",(q.laborHours*q.laborRate).toFixed(2)]})]}),q.materials.length>0&&o.jsx("div",{style:{padding:"0.75rem",background:F.bg,borderRadius:"0.5rem",marginBottom:"0.75rem"},children:q.materials.map((te,re)=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem",color:F.subtext,marginBottom:re<q.materials.length-1?"0.25rem":0},children:[o.jsx("span",{children:te.name}),o.jsxs("span",{children:["$",parseFloat(te.cost).toFixed(2)]})]},re))}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsxs("div",{style:{position:"relative",flex:1},children:[o.jsxs("button",{onClick:()=>E(N===q.id?null:q.id),style:{width:"100%",padding:"0.5rem",background:"#2563eb",border:"none",borderRadius:"0.5rem",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.875rem",fontWeight:"500"},children:[o.jsx(Z1,{size:16}),"Add to Job",o.jsx(gm,{size:14})]}),N===q.id&&o.jsxs(o.Fragment,{children:[o.jsx("div",{onClick:()=>E(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998}}),o.jsxs("div",{style:{position:"absolute",bottom:"100%",left:0,right:0,marginBottom:"0.5rem",background:F.cardBg,border:`1px solid ${F.border}`,borderRadius:"0.5rem",boxShadow:r?"0 4px 12px rgba(0,0,0,0.6)":"0 4px 12px rgba(0,0,0,0.15)",maxHeight:"200px",overflowY:"auto",zIndex:9999},children:[o.jsx("button",{onClick:()=>M(q,"new"),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${F.border}`,color:"#2563eb",cursor:"pointer",textAlign:"left",fontSize:"0.875rem",fontWeight:"500"},children:"+ Create New Job"}),e.map(te=>o.jsx("button",{onClick:()=>M(q,te.id),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${F.border}`,color:F.text,cursor:"pointer",textAlign:"left",fontSize:"0.875rem"},children:te.title||te.name},te.id))]})]})]}),o.jsx("button",{onClick:()=>w(q),style:{padding:"0.5rem",background:"transparent",border:`1px solid ${F.border}`,borderRadius:"0.5rem",color:F.text,cursor:"pointer",display:"flex",alignItems:"center"},children:o.jsx(gw,{size:16})}),o.jsx("button",{onClick:()=>B(q.id,q.name),style:{padding:"0.5rem",background:"transparent",border:"1px solid #ef4444",borderRadius:"0.5rem",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center"},children:o.jsx(Cc,{size:16})})]})]},q.id)})]})})};function eL({isDarkMode:r=!1}){const[e,t]=pe.useState([{id:1,invoiceNumber:"INV-001",client:"ABC Construction",date:"2025-10-01",amount:2500,status:"Paid"},{id:2,invoiceNumber:"INV-002",client:"Smith Residence",date:"2025-10-10",amount:1200,status:"Pending"},{id:3,invoiceNumber:"INV-003",client:"Downtown Office Building",date:"2025-10-12",amount:4800,status:"Overdue"}]),n={bg:r?"#000000":"#f9fafb",cardBg:r?"#111111":"#ffffff",border:r?"#1a1a1a":"#e5e7eb",text:r?"#ffffff":"#111827",textSecondary:r?"#9ca3af":"#6b7280",buttonBg:"#3b82f6",buttonText:"#ffffff",paidBg:r?"#064e3b":"#d1fae5",paidText:r?"#6ee7b7":"#065f46",pendingBg:r?"#78350f":"#fef3c7",pendingText:r?"#fcd34d":"#92400e",overdueBg:r?"#7f1d1d":"#fee2e2",overdueText:r?"#fca5a5":"#991b1b"},i=s=>{switch(s){case"Paid":return{background:n.paidBg,color:n.paidText};case"Pending":return{background:n.pendingBg,color:n.pendingText};case"Overdue":return{background:n.overdueBg,color:n.overdueText};default:return{}}};return o.jsx("div",{style:{minHeight:"100vh",background:n.bg,paddingTop:"1rem"},children:o.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary,marginBottom:"0.25rem"},children:"Total"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:n.text},children:e.length})]}),o.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary,marginBottom:"0.25rem"},children:"Paid"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:n.paidText},children:e.filter(s=>s.status==="Paid").length})]}),o.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary,marginBottom:"0.25rem"},children:"Pending"}),o.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:n.pendingText},children:e.filter(s=>s.status==="Pending").length})]})]}),o.jsxs("button",{style:{width:"100%",background:n.buttonBg,color:n.buttonText,border:"none",borderRadius:"0.5rem",padding:"0.875rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[o.jsx(ga,{size:20}),o.jsx("span",{children:"Create New Invoice"})]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.length===0?o.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"3rem 1rem",textAlign:"center"},children:[o.jsx(jf,{size:48,color:n.textSecondary,style:{margin:"0 auto 1rem"}}),o.jsx("p",{style:{color:n.textSecondary,fontSize:"0.875rem",margin:0},children:"No invoices yet. Create your first invoice!"})]}):e.map(s=>o.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:l=>{l.currentTarget.style.transform="translateY(-2px)",l.currentTarget.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"},onMouseLeave:l=>{l.currentTarget.style.transform="translateY(0)",l.currentTarget.style.boxShadow="none"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:n.text,marginBottom:"0.25rem"},children:s.invoiceNumber}),o.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary},children:s.client})]}),o.jsx("div",{style:{...i(s.status),padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.75rem",fontWeight:"600"},children:s.status})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"0.75rem",borderTop:`1px solid ${n.border}`},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary},children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),o.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"600",color:n.text},children:["$",s.amount.toFixed(2)]})]})]},s.id))})]})})}const tL=({isDarkMode:r,onNavigate:e})=>{const[t,n]=pe.useState("verifying"),[i,s]=pe.useState(""),l={bg:r?"#000000":"#f9fafb",cardBg:r?"#0a0a0a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#666666":"#6b7280",border:r?"#1a1a1a":"#e5e7eb"};return pe.useEffect(()=>{(async()=>{const d=new URLSearchParams(window.location.search).get("token");if(!d){n("error"),s("Invalid verification link. No token provided.");return}try{const g=await MB(d);g.success?(n("success"),s("Your email has been verified successfully!"),window.auth&&window.auth.currentUser&&await window.auth.currentUser.reload(),setTimeout(()=>{e("profile"),window.history.replaceState({},"",window.location.pathname),window.location.reload()},3e3)):(n("error"),s(g.error||"Verification failed"))}catch{n("error"),s("An error occurred during verification. Please try again.")}})()},[e]),o.jsxs("div",{style:{background:l.bg,minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:[o.jsxs("div",{style:{background:l.cardBg,borderRadius:"0.75rem",border:`1px solid ${l.border}`,padding:"3rem 2rem",maxWidth:"500px",width:"100%",textAlign:"center"},children:[o.jsxs("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:t==="verifying"?"#3b82f6":t==="success"?"#10b981":"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 2rem"},children:[t==="verifying"&&o.jsx(b6,{size:40,color:"white",style:{animation:"spin 1s linear infinite"}}),t==="success"&&o.jsx(en,{size:40,color:"white"}),t==="error"&&o.jsx(o6,{size:40,color:"white"})]}),o.jsxs("h2",{style:{margin:"0 0 1rem 0",color:l.text,fontSize:"1.75rem",fontWeight:"700"},children:[t==="verifying"&&"Verifying Your Email...",t==="success"&&"Email Verified!",t==="error"&&"Verification Failed"]}),o.jsxs("p",{style:{margin:"0 0 2rem 0",color:l.subtext,fontSize:"1rem",lineHeight:"1.6"},children:[t==="verifying"&&"Please wait while we verify your email address.",t==="success"&&i,t==="error"&&i]}),t==="success"&&o.jsx("div",{style:{padding:"1rem",background:"#dcfce7",border:"1px solid #86efac",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:o.jsx("p",{style:{margin:0,color:"#16a34a",fontSize:"0.875rem"},children:"Redirecting you to your profile in 3 seconds..."})}),t==="success"&&o.jsx("button",{onClick:()=>e("profile"),style:{width:"100%",padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Go to Profile"}),t==="error"&&o.jsx("button",{onClick:()=>e("profile"),style:{width:"100%",padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Go to Profile"})]}),o.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})};function rL({headerInfo:r,isDarkMode:e,headerVisible:t,showMenu:n,setShowMenu:i,onNavigate:s,setIsDarkMode:l}){const u=r.icon,h={headerBorder:e?"#2a2a2a":"#e5e7eb",menuBg:e?"#1a1a1a":"white",cardBorder:e?"#2a2a2a":"#e5e7eb",cardText:e?"#ffffff":"#111827"};return o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,height:"env(safe-area-inset-top)",background:e?"#1a1a1a":"#2563eb",zIndex:101}}),o.jsxs("div",{style:{background:e?"#1a1a1a":"#2563eb",padding:"0.5rem 1rem",borderBottom:`1px solid ${h.headerBorder}`,position:"fixed",top:"env(safe-area-inset-top)",left:0,right:0,zIndex:100,display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:"48px",transform:t?"translateY(0)":"translateY(calc(-100% - env(safe-area-inset-top)))",transition:"transform 0.3s ease-in-out",paddingLeft:"max(1rem, env(safe-area-inset-left))",paddingRight:"max(1rem, env(safe-area-inset-right))"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx(u,{size:20,color:"white",strokeWidth:2}),o.jsx("h1",{style:{fontSize:"1rem",fontWeight:"600",color:"white",margin:0,letterSpacing:"-0.01em"},children:r.title})]}),o.jsxs("div",{style:{position:"relative"},children:[o.jsx("button",{onClick:()=>i(!n),style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"40px",minHeight:"40px",lineHeight:1},children:o.jsx(k6,{size:24,color:"white",style:{display:"block",flexShrink:0}})}),n&&o.jsxs(o.Fragment,{children:[o.jsx("div",{onClick:()=>i(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:998}}),o.jsx("div",{style:{position:"absolute",top:"2.5rem",right:0,zIndex:999,background:h.menuBg,border:`1px solid ${h.cardBorder}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",minWidth:"200px",overflow:"hidden"},children:o.jsxs("div",{style:{padding:"0.5rem 0"},children:[o.jsxs("button",{onClick:()=>{s("profile"),i(!1)},style:{width:"100%",padding:"0.75rem 1rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:h.cardText,fontSize:"0.875rem",fontWeight:"500"},onMouseEnter:d=>d.target.style.background=e?"#374151":"#f3f4f6",onMouseLeave:d=>d.target.style.background="transparent",children:[o.jsx(uf,{size:16}),o.jsx("span",{children:"Profile"})]}),o.jsx("div",{style:{height:"1px",background:h.cardBorder,margin:"0.5rem 0"}}),o.jsxs("button",{onClick:()=>{l(!e),i(!1)},style:{width:"100%",padding:"0.75rem 1rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",color:h.cardText,fontSize:"0.875rem",fontWeight:"500"},onMouseEnter:d=>d.target.style.background=e?"#374151":"#f3f4f6",onMouseLeave:d=>d.target.style.background="transparent",children:[o.jsx("span",{children:e?"Light Mode":"Dark Mode"}),o.jsx("span",{children:e?"":""})]})]})})]})]})]})]})}function nL(){const[r,e]=pe.useState(()=>new URLSearchParams(window.location.search).get("token")?"verify-email":localStorage.getItem("activeView")||null),[t,n]=pe.useState(()=>localStorage.getItem("isDarkMode")==="true"),[i,s]=pe.useState(!1),[l,u]=pe.useState(!1),[h,d]=pe.useState(null),[g,b]=pe.useState(null),[_,v]=pe.useState(!0),[N,E]=pe.useState(0);pe.useEffect(()=>{const C=S=>{S.state&&S.state.view!==void 0&&e(S.state.view)};return window.addEventListener("popstate",C),window.history.state||window.history.replaceState({view:r},""),()=>{window.removeEventListener("popstate",C)}},[]),pe.useEffect(()=>{window.history.state&&window.history.state.view!==r&&window.history.pushState({view:r},"")},[r]),pe.useEffect(()=>{r===null?localStorage.setItem("activeView",""):r!=="verify-email"&&localStorage.setItem("activeView",r)},[r]),pe.useEffect(()=>{localStorage.setItem("isDarkMode",t)},[t]),pe.useEffect(()=>{const C=t?"#000000":"#f5f5f5",S=document.querySelector('meta[name="theme-color"]');S&&S.setAttribute("content",C),document.body.style.backgroundColor=C,document.documentElement.style.backgroundColor=C},[t]),pe.useEffect(()=>{const C=()=>{const V=document.querySelector('meta[name="theme-color"]');V&&V.setAttribute("content",t?"#1a1a1a":"#2563eb")};C();const S=()=>{document.visibilityState==="visible"&&C()};return document.addEventListener("visibilitychange",S),()=>{document.removeEventListener("visibilitychange",S)}},[t]),pe.useEffect(()=>{window.scrollTo(0,0)},[r]);const L=pe.useRef(null);pe.useEffect(()=>{const C=()=>{const S=window.scrollY;S<10?v(!0):S>N&&S>80?v(!1):S<N&&v(!0),E(S)};return window.addEventListener("scroll",C,{passive:!0}),()=>window.removeEventListener("scroll",C)},[N]),pe.useEffect(()=>{r!=="estimates"&&b(null)},[r]);const k=(C,S=null)=>{C==="home"?e(null):C==="calculators"?e("calculators"):C==="profile"?e("profile"):C==="jobs"?e("jobs"):C==="estimates"?(e("estimates"),S&&(S.viewEstimateId?b(S):d(S))):C==="invoices"?e("invoices"):C==="verify-email"&&e("verify-email")},O=()=>{window.history.back()},$=(C,S)=>{S==="new"?(d(C),e("jobs")):(d({...C,jobId:S}),e("jobs"))},F=()=>{const C=()=>{u(!0),setTimeout(()=>u(!1),3e3)};switch(r){case"voltage-drop":return o.jsx(SN,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"ohms-law":return o.jsx(CN,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"box-fill":return o.jsx(RN,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"conduit-fill":return o.jsx(qN,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"ampacity":return o.jsx(oB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"motor-calculations":return o.jsx(cB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"load-calculations":return o.jsx(hB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"transformer-sizing":return o.jsx(fB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"service-entrance":return o.jsx(pB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"grounding-bonding":return o.jsx(xB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"conduit-bending":return o.jsx(_B,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"lighting":return o.jsx(kB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"receptacles":return o.jsx(RB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"vfd-sizing":return o.jsx(NB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"reactance-impedance":return o.jsx(BB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"power-factor":return o.jsx(LB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"power-triangle":return o.jsx(FB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"three-phase-power":return o.jsx(zB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"pull-box":return o.jsx(zN,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:C});case"calculators":return o.jsx(X6,{isDarkMode:t,onSelectCalculator:e});case"profile":return o.jsx(WB,{isDarkMode:t});case"jobs":return o.jsx(XB,{isDarkMode:t,onNavigateToEstimates:S=>k("estimates",S)});case"estimates":return o.jsx(ZB,{isDarkMode:t,onApplyToJob:$,pendingEstimateData:h,onClearPendingData:()=>d(null),navigationData:g});case"invoices":return o.jsx(eL,{isDarkMode:t});case"verify-email":return o.jsx(tL,{isDarkMode:t,onNavigate:k});default:return o.jsx(VB,{isDarkMode:t})}},ce=r?r==="calculators"?{title:"Calculator Menu",icon:cf}:r==="profile"?{title:"Profile",icon:uf}:r==="jobs"?{title:"Job Log",icon:Lu}:r==="estimates"?{title:"Estimates",icon:jf}:r==="invoices"?{title:"Invoices",icon:e5}:r==="verify-email"?{title:"Verify Email",icon:uf}:{"voltage-drop":{title:"Voltage Drop",icon:vw},"ohms-law":{title:"Ohm's Law",icon:mw},"reactance-impedance":{title:"Reactance & Impedance",icon:cw},"power-factor":{title:"Power Factor Correction",icon:xw},"box-fill":{title:"Box Fill",icon:uw},"conduit-fill":{title:"Conduit Fill",icon:rw},ampacity:{title:"Ampacity",icon:ew},"motor-calculations":{title:"Motors",icon:pw},"load-calculations":{title:"Load Calculations",icon:tw},"transformer-sizing":{title:"Transformers",icon:hw},"service-entrance":{title:"Service Entrance Sizing",icon:Zb},"grounding-bonding":{title:"Grounding & Bonding",icon:ow},"conduit-bending":{title:"Conduit Bending",icon:nw},lighting:{title:"Lighting",icon:aw},receptacles:{title:"Receptacles",icon:dw},"vfd-sizing":{title:"VFD Sizing",icon:iw},"power-triangle":{title:"Power Triangle",icon:bw},"three-phase-power":{title:"Three-Phase Power",icon:yw},"pull-box":{title:"Pull Box Sizing",icon:Xb}}[r]||{title:"Electrician's Toolkit",icon:cf}:{title:"Home",icon:sw},D=r!=="verify-email";return o.jsxs("div",{className:"App",style:{background:t?"#000000":"#ffffff",overscrollBehavior:"none"},children:[o.jsx(rL,{headerInfo:ce,isDarkMode:t,headerVisible:_,showMenu:i,setShowMenu:s,onNavigate:k,setIsDarkMode:n}),o.jsx("div",{style:{paddingBottom:D?"calc(65px + env(safe-area-inset-bottom))":"0",paddingTop:"calc(48px + env(safe-area-inset-top))",paddingLeft:r==="calculators"?"0":"env(safe-area-inset-left)",paddingRight:r==="calculators"?"0":"env(safe-area-inset-right)",position:"relative",minHeight:"100vh",boxSizing:"border-box"},children:r?o.jsx("div",{style:{minHeight:"calc(100vh - 3.5rem)",padding:r==="calculators"||r==="jobs"||r==="profile"||r==="estimates"||r==="invoices"||r==="verify-email"?"0":"1rem",paddingBottom:D?"5rem":"0"},children:F()}):F()}),l&&o.jsxs("div",{style:{position:"fixed",bottom:"6rem",left:"50%",transform:"translateX(-50%)",background:"#10b981",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",animation:"slideUp 0.3s ease-out",maxWidth:"90%",textAlign:"center"},children:[o.jsx("span",{style:{fontSize:"1.25rem"},children:""}),o.jsx("span",{children:"PDF saved to Downloads"})]}),D&&o.jsx(PB,{onNavigate:k,currentView:r==="jobs"?"jobs":r==="estimates"?"estimates":r==="invoices"?"invoices":r==="profile"?"profile":r==="calculators"||r?"calculators":"home",isDarkMode:t})]})}const iL=BT.createRoot(document.getElementById("root"));iL.render(o.jsx(kT.StrictMode,{children:o.jsx(nL,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{if(window.location.hostname==="localhost"){console.log("Skipping service worker on localhost");return}navigator.serviceWorker.register("/electrician-toolkit/service-worker.js").then(r=>{console.log("ServiceWorker registration successful:",r.scope)}).catch(r=>{console.log("ServiceWorker registration failed:",r)})});export{Gr as _,sL as c,Yb as g};
