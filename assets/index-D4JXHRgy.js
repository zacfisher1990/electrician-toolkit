var xT=Object.defineProperty;var vT=(r,e,t)=>e in r?xT(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Hr=(r,e,t)=>vT(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var GB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kb(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var dg={exports:{}},Bh={},hg={exports:{}},fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fy;function bT(){if(fy)return fr;fy=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.iterator;function S(Z){return Z===null||typeof Z!="object"?null:(Z=b&&Z[b]||Z["@@iterator"],typeof Z=="function"?Z:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,E={};function L(Z,W,J){this.props=Z,this.context=W,this.refs=E,this.updater=J||v}L.prototype.isReactComponent={},L.prototype.setState=function(Z,W){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,W,"setState")},L.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function C(){}C.prototype=L.prototype;function M(Z,W,J){this.props=Z,this.context=W,this.refs=E,this.updater=J||v}var $=M.prototype=new C;$.constructor=M,N($,L.prototype),$.isPureReactComponent=!0;var F=Array.isArray,ne=Object.prototype.hasOwnProperty,ue={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function k(Z,W,J){var re,fe={},ge=null,_e=null;if(W!=null)for(re in W.ref!==void 0&&(_e=W.ref),W.key!==void 0&&(ge=""+W.key),W)ne.call(W,re)&&!V.hasOwnProperty(re)&&(fe[re]=W[re]);var he=arguments.length-2;if(he===1)fe.children=J;else if(1<he){for(var xe=Array(he),Pe=0;Pe<he;Pe++)xe[Pe]=arguments[Pe+2];fe.children=xe}if(Z&&Z.defaultProps)for(re in he=Z.defaultProps,he)fe[re]===void 0&&(fe[re]=he[re]);return{$$typeof:r,type:Z,key:ge,ref:_e,props:fe,_owner:ue.current}}function A(Z,W){return{$$typeof:r,type:Z.type,key:W,ref:Z.ref,props:Z.props,_owner:Z._owner}}function O(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===r}function I(Z){var W={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(J){return W[J]})}var w=/\/+/g;function B(Z,W){return typeof Z=="object"&&Z!==null&&Z.key!=null?I(""+Z.key):W.toString(36)}function D(Z,W,J,re,fe){var ge=typeof Z;(ge==="undefined"||ge==="boolean")&&(Z=null);var _e=!1;if(Z===null)_e=!0;else switch(ge){case"string":case"number":_e=!0;break;case"object":switch(Z.$$typeof){case r:case e:_e=!0}}if(_e)return _e=Z,fe=fe(_e),Z=re===""?"."+B(_e,0):re,F(fe)?(J="",Z!=null&&(J=Z.replace(w,"$&/")+"/"),D(fe,W,J,"",function(Pe){return Pe})):fe!=null&&(O(fe)&&(fe=A(fe,J+(!fe.key||_e&&_e.key===fe.key?"":(""+fe.key).replace(w,"$&/")+"/")+Z)),W.push(fe)),1;if(_e=0,re=re===""?".":re+":",F(Z))for(var he=0;he<Z.length;he++){ge=Z[he];var xe=re+B(ge,he);_e+=D(ge,W,J,xe,fe)}else if(xe=S(Z),typeof xe=="function")for(Z=xe.call(Z),he=0;!(ge=Z.next()).done;)ge=ge.value,xe=re+B(ge,he++),_e+=D(ge,W,J,xe,fe);else if(ge==="object")throw W=String(Z),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return _e}function q(Z,W,J){if(Z==null)return Z;var re=[],fe=0;return D(Z,re,"","",function(ge){return W.call(J,ge,fe++)}),re}function oe(Z){if(Z._status===-1){var W=Z._result;W=W(),W.then(function(J){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=J)},function(J){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=J)}),Z._status===-1&&(Z._status=0,Z._result=W)}if(Z._status===1)return Z._result.default;throw Z._result}var se={current:null},ie={transition:null},ve={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:ie,ReactCurrentOwner:ue};function be(){throw Error("act(...) is not supported in production builds of React.")}return fr.Children={map:q,forEach:function(Z,W,J){q(Z,function(){W.apply(this,arguments)},J)},count:function(Z){var W=0;return q(Z,function(){W++}),W},toArray:function(Z){return q(Z,function(W){return W})||[]},only:function(Z){if(!O(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},fr.Component=L,fr.Fragment=t,fr.Profiler=i,fr.PureComponent=M,fr.StrictMode=n,fr.Suspense=h,fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,fr.act=be,fr.cloneElement=function(Z,W,J){if(Z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Z+".");var re=N({},Z.props),fe=Z.key,ge=Z.ref,_e=Z._owner;if(W!=null){if(W.ref!==void 0&&(ge=W.ref,_e=ue.current),W.key!==void 0&&(fe=""+W.key),Z.type&&Z.type.defaultProps)var he=Z.type.defaultProps;for(xe in W)ne.call(W,xe)&&!V.hasOwnProperty(xe)&&(re[xe]=W[xe]===void 0&&he!==void 0?he[xe]:W[xe])}var xe=arguments.length-2;if(xe===1)re.children=J;else if(1<xe){he=Array(xe);for(var Pe=0;Pe<xe;Pe++)he[Pe]=arguments[Pe+2];re.children=he}return{$$typeof:r,type:Z.type,key:fe,ref:ge,props:re,_owner:_e}},fr.createContext=function(Z){return Z={$$typeof:l,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Z.Provider={$$typeof:o,_context:Z},Z.Consumer=Z},fr.createElement=k,fr.createFactory=function(Z){var W=k.bind(null,Z);return W.type=Z,W},fr.createRef=function(){return{current:null}},fr.forwardRef=function(Z){return{$$typeof:u,render:Z}},fr.isValidElement=O,fr.lazy=function(Z){return{$$typeof:g,_payload:{_status:-1,_result:Z},_init:oe}},fr.memo=function(Z,W){return{$$typeof:d,type:Z,compare:W===void 0?null:W}},fr.startTransition=function(Z){var W=ie.transition;ie.transition={};try{Z()}finally{ie.transition=W}},fr.unstable_act=be,fr.useCallback=function(Z,W){return se.current.useCallback(Z,W)},fr.useContext=function(Z){return se.current.useContext(Z)},fr.useDebugValue=function(){},fr.useDeferredValue=function(Z){return se.current.useDeferredValue(Z)},fr.useEffect=function(Z,W){return se.current.useEffect(Z,W)},fr.useId=function(){return se.current.useId()},fr.useImperativeHandle=function(Z,W,J){return se.current.useImperativeHandle(Z,W,J)},fr.useInsertionEffect=function(Z,W){return se.current.useInsertionEffect(Z,W)},fr.useLayoutEffect=function(Z,W){return se.current.useLayoutEffect(Z,W)},fr.useMemo=function(Z,W){return se.current.useMemo(Z,W)},fr.useReducer=function(Z,W,J){return se.current.useReducer(Z,W,J)},fr.useRef=function(Z){return se.current.useRef(Z)},fr.useState=function(Z){return se.current.useState(Z)},fr.useSyncExternalStore=function(Z,W,J){return se.current.useSyncExternalStore(Z,W,J)},fr.useTransition=function(){return se.current.useTransition()},fr.version="18.3.1",fr}var py;function Y1(){return py||(py=1,hg.exports=bT()),hg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function wT(){if(my)return Bh;my=1;var r=Y1(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,d){var g,b={},S=null,v=null;d!==void 0&&(S=""+d),h.key!==void 0&&(S=""+h.key),h.ref!==void 0&&(v=h.ref);for(g in h)n.call(h,g)&&!o.hasOwnProperty(g)&&(b[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps,h)b[g]===void 0&&(b[g]=h[g]);return{$$typeof:e,type:u,key:S,ref:v,props:b,_owner:i.current}}return Bh.Fragment=t,Bh.jsx=l,Bh.jsxs=l,Bh}var gy;function ST(){return gy||(gy=1,dg.exports=wT()),dg.exports}var s=ST(),me=Y1();const _T=Kb(me);var Ip={},fg={exports:{}},Go={},pg={exports:{}},mg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy;function TT(){return yy||(yy=1,(function(r){function e(ie,ve){var be=ie.length;ie.push(ve);e:for(;0<be;){var Z=be-1>>>1,W=ie[Z];if(0<i(W,ve))ie[Z]=ve,ie[be]=W,be=Z;else break e}}function t(ie){return ie.length===0?null:ie[0]}function n(ie){if(ie.length===0)return null;var ve=ie[0],be=ie.pop();if(be!==ve){ie[0]=be;e:for(var Z=0,W=ie.length,J=W>>>1;Z<J;){var re=2*(Z+1)-1,fe=ie[re],ge=re+1,_e=ie[ge];if(0>i(fe,be))ge<W&&0>i(_e,fe)?(ie[Z]=_e,ie[ge]=be,Z=ge):(ie[Z]=fe,ie[re]=be,Z=re);else if(ge<W&&0>i(_e,be))ie[Z]=_e,ie[ge]=be,Z=ge;else break e}}return ve}function i(ie,ve){var be=ie.sortIndex-ve.sortIndex;return be!==0?be:ie.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();r.unstable_now=function(){return l.now()-u}}var h=[],d=[],g=1,b=null,S=3,v=!1,N=!1,E=!1,L=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(ie){for(var ve=t(d);ve!==null;){if(ve.callback===null)n(d);else if(ve.startTime<=ie)n(d),ve.sortIndex=ve.expirationTime,e(h,ve);else break;ve=t(d)}}function F(ie){if(E=!1,$(ie),!N)if(t(h)!==null)N=!0,oe(ne);else{var ve=t(d);ve!==null&&se(F,ve.startTime-ie)}}function ne(ie,ve){N=!1,E&&(E=!1,C(k),k=-1),v=!0;var be=S;try{for($(ve),b=t(h);b!==null&&(!(b.expirationTime>ve)||ie&&!I());){var Z=b.callback;if(typeof Z=="function"){b.callback=null,S=b.priorityLevel;var W=Z(b.expirationTime<=ve);ve=r.unstable_now(),typeof W=="function"?b.callback=W:b===t(h)&&n(h),$(ve)}else n(h);b=t(h)}if(b!==null)var J=!0;else{var re=t(d);re!==null&&se(F,re.startTime-ve),J=!1}return J}finally{b=null,S=be,v=!1}}var ue=!1,V=null,k=-1,A=5,O=-1;function I(){return!(r.unstable_now()-O<A)}function w(){if(V!==null){var ie=r.unstable_now();O=ie;var ve=!0;try{ve=V(!0,ie)}finally{ve?B():(ue=!1,V=null)}}else ue=!1}var B;if(typeof M=="function")B=function(){M(w)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,q=D.port2;D.port1.onmessage=w,B=function(){q.postMessage(null)}}else B=function(){L(w,0)};function oe(ie){V=ie,ue||(ue=!0,B())}function se(ie,ve){k=L(function(){ie(r.unstable_now())},ve)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ie){ie.callback=null},r.unstable_continueExecution=function(){N||v||(N=!0,oe(ne))},r.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ie?Math.floor(1e3/ie):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(ie){switch(S){case 1:case 2:case 3:var ve=3;break;default:ve=S}var be=S;S=ve;try{return ie()}finally{S=be}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ie,ve){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var be=S;S=ie;try{return ve()}finally{S=be}},r.unstable_scheduleCallback=function(ie,ve,be){var Z=r.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Z+be:Z):be=Z,ie){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=be+W,ie={id:g++,callback:ve,priorityLevel:ie,startTime:be,expirationTime:W,sortIndex:-1},be>Z?(ie.sortIndex=be,e(d,ie),t(h)===null&&ie===t(d)&&(E?(C(k),k=-1):E=!0,se(F,be-Z))):(ie.sortIndex=W,e(h,ie),N||v||(N=!0,oe(ne))),ie},r.unstable_shouldYield=I,r.unstable_wrapCallback=function(ie){var ve=S;return function(){var be=S;S=ve;try{return ie.apply(this,arguments)}finally{S=be}}}})(mg)),mg}var xy;function AT(){return xy||(xy=1,pg.exports=TT()),pg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy;function CT(){if(vy)return Go;vy=1;var r=Y1(),e=AT();function t(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,f=1;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function o(a,c){l(a,c),l(a+"Capture",c)}function l(a,c){for(i[a]=c,a=0;a<c.length;a++)n.add(c[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},b={};function S(a){return h.call(b,a)?!0:h.call(g,a)?!1:d.test(a)?b[a]=!0:(g[a]=!0,!1)}function v(a,c,f,y){if(f!==null&&f.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return y?!1:f!==null?!f.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function N(a,c,f,y){if(c===null||typeof c>"u"||v(a,c,f,y))return!0;if(y)return!1;if(f!==null)switch(f.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function E(a,c,f,y,T,P,K){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=y,this.attributeNamespace=T,this.mustUseProperty=f,this.propertyName=a,this.type=c,this.sanitizeURL=P,this.removeEmptyString=K}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){L[a]=new E(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];L[c]=new E(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){L[a]=new E(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){L[a]=new E(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){L[a]=new E(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){L[a]=new E(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){L[a]=new E(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){L[a]=new E(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){L[a]=new E(a,5,!1,a.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function M(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(C,M);L[c]=new E(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(C,M);L[c]=new E(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(C,M);L[c]=new E(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){L[a]=new E(a,1,!1,a.toLowerCase(),null,!1,!1)}),L.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){L[a]=new E(a,1,!1,a.toLowerCase(),null,!0,!0)});function $(a,c,f,y){var T=L.hasOwnProperty(c)?L[c]:null;(T!==null?T.type!==0:y||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(N(c,f,T,y)&&(f=null),y||T===null?S(c)&&(f===null?a.removeAttribute(c):a.setAttribute(c,""+f)):T.mustUseProperty?a[T.propertyName]=f===null?T.type===3?!1:"":f:(c=T.attributeName,y=T.attributeNamespace,f===null?a.removeAttribute(c):(T=T.type,f=T===3||T===4&&f===!0?"":""+f,y?a.setAttributeNS(y,c,f):a.setAttribute(c,f))))}var F=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),ue=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),I=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ve(a){return a===null||typeof a!="object"?null:(a=ie&&a[ie]||a["@@iterator"],typeof a=="function"?a:null)}var be=Object.assign,Z;function W(a){if(Z===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);Z=c&&c[1]||""}return`
`+Z+a}var J=!1;function re(a,c){if(!a||J)return"";J=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(Fe){var y=Fe}Reflect.construct(a,[],c)}else{try{c.call()}catch(Fe){y=Fe}a.call(c.prototype)}else{try{throw Error()}catch(Fe){y=Fe}a()}}catch(Fe){if(Fe&&y&&typeof Fe.stack=="string"){for(var T=Fe.stack.split(`
`),P=y.stack.split(`
`),K=T.length-1,pe=P.length-1;1<=K&&0<=pe&&T[K]!==P[pe];)pe--;for(;1<=K&&0<=pe;K--,pe--)if(T[K]!==P[pe]){if(K!==1||pe!==1)do if(K--,pe--,0>pe||T[K]!==P[pe]){var Se=`
`+T[K].replace(" at new "," at ");return a.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",a.displayName)),Se}while(1<=K&&0<=pe);break}}}finally{J=!1,Error.prepareStackTrace=f}return(a=a?a.displayName||a.name:"")?W(a):""}function fe(a){switch(a.tag){case 5:return W(a.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return a=re(a.type,!1),a;case 11:return a=re(a.type.render,!1),a;case 1:return a=re(a.type,!0),a;default:return""}}function ge(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case V:return"Fragment";case ue:return"Portal";case A:return"Profiler";case k:return"StrictMode";case B:return"Suspense";case D:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case I:return(a.displayName||"Context")+".Consumer";case O:return(a._context.displayName||"Context")+".Provider";case w:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case q:return c=a.displayName||null,c!==null?c:ge(a.type)||"Memo";case oe:c=a._payload,a=a._init;try{return ge(a(c))}catch{}}return null}function _e(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(c);case 8:return c===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function he(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function xe(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Pe(a){var c=xe(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),y=""+a[c];if(!a.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var T=f.get,P=f.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return T.call(this)},set:function(K){y=""+K,P.call(this,K)}}),Object.defineProperty(a,c,{enumerable:f.enumerable}),{getValue:function(){return y},setValue:function(K){y=""+K},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Ue(a){a._valueTracker||(a._valueTracker=Pe(a))}function Xe(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var f=c.getValue(),y="";return a&&(y=xe(a)?a.checked?"true":"false":a.value),a=y,a!==f?(c.setValue(a),!0):!1}function Ze(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function ze(a,c){var f=c.checked;return be({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??a._wrapperState.initialChecked})}function de(a,c){var f=c.defaultValue==null?"":c.defaultValue,y=c.checked!=null?c.checked:c.defaultChecked;f=he(c.value!=null?c.value:f),a._wrapperState={initialChecked:y,initialValue:f,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Lt(a,c){c=c.checked,c!=null&&$(a,"checked",c,!1)}function Et(a,c){Lt(a,c);var f=he(c.value),y=c.type;if(f!=null)y==="number"?(f===0&&a.value===""||a.value!=f)&&(a.value=""+f):a.value!==""+f&&(a.value=""+f);else if(y==="submit"||y==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?He(a,c.type,f):c.hasOwnProperty("defaultValue")&&He(a,c.type,he(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function wt(a,c,f){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var y=c.type;if(!(y!=="submit"&&y!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,f||c===a.value||(a.value=c),a.defaultValue=c}f=a.name,f!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,f!==""&&(a.name=f)}function He(a,c,f){(c!=="number"||Ze(a.ownerDocument)!==a)&&(f==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+f&&(a.defaultValue=""+f))}var ot=Array.isArray;function rt(a,c,f,y){if(a=a.options,c){c={};for(var T=0;T<f.length;T++)c["$"+f[T]]=!0;for(f=0;f<a.length;f++)T=c.hasOwnProperty("$"+a[f].value),a[f].selected!==T&&(a[f].selected=T),T&&y&&(a[f].defaultSelected=!0)}else{for(f=""+he(f),c=null,T=0;T<a.length;T++){if(a[T].value===f){a[T].selected=!0,y&&(a[T].defaultSelected=!0);return}c!==null||a[T].disabled||(c=a[T])}c!==null&&(c.selected=!0)}}function Jt(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return be({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function _t(a,c){var f=c.value;if(f==null){if(f=c.children,c=c.defaultValue,f!=null){if(c!=null)throw Error(t(92));if(ot(f)){if(1<f.length)throw Error(t(93));f=f[0]}c=f}c==null&&(c=""),f=c}a._wrapperState={initialValue:he(f)}}function mr(a,c){var f=he(c.value),y=he(c.defaultValue);f!=null&&(f=""+f,f!==a.value&&(a.value=f),c.defaultValue==null&&a.defaultValue!==f&&(a.defaultValue=f)),y!=null&&(a.defaultValue=""+y)}function Ft(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function qt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vr(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?qt(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Ot,Tt=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,f,y,T){MSApp.execUnsafeLocalFunction(function(){return a(c,f,y,T)})}:a})(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(Ot=Ot||document.createElement("div"),Ot.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Ot.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function jt(a,c){if(c){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=c;return}}a.textContent=c}var pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ir=["Webkit","ms","Moz","O"];Object.keys(pt).forEach(function(a){Ir.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),pt[c]=pt[a]})});function ir(a,c,f){return c==null||typeof c=="boolean"||c===""?"":f||typeof c!="number"||c===0||pt.hasOwnProperty(a)&&pt[a]?(""+c).trim():c+"px"}function ht(a,c){a=a.style;for(var f in c)if(c.hasOwnProperty(f)){var y=f.indexOf("--")===0,T=ir(f,c[f],y);f==="float"&&(f="cssFloat"),y?a.setProperty(f,T):a[f]=T}}var Ht=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sr(a,c){if(c){if(Ht[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function It(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tr=null;function Wt(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Er=null,zr=null,$t=null;function Mt(a){if(a=Hl(a)){if(typeof Er!="function")throw Error(t(280));var c=a.stateNode;c&&(c=Hc(c),Er(a.stateNode,a.type,c))}}function ar(a){zr?$t?$t.push(a):$t=[a]:zr=a}function Hi(){if(zr){var a=zr,c=$t;if($t=zr=null,Mt(a),c)for(a=0;a<c.length;a++)Mt(c[a])}}function zn(a,c){return a(c)}function Ro(){}var Vn=!1;function Rt(a,c,f){if(Vn)return a(c,f);Vn=!0;try{return zn(a,c,f)}finally{Vn=!1,(zr!==null||$t!==null)&&(Ro(),Hi())}}function Pi(a,c){var f=a.stateNode;if(f===null)return null;var y=Hc(f);if(y===null)return null;f=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(t(231,c,typeof f));return f}var mi=!1;if(u)try{var On={};Object.defineProperty(On,"passive",{get:function(){mi=!0}}),window.addEventListener("test",On,On),window.removeEventListener("test",On,On)}catch{mi=!1}function Ni(a,c,f,y,T,P,K,pe,Se){var Fe=Array.prototype.slice.call(arguments,3);try{c.apply(f,Fe)}catch(Je){this.onError(Je)}}var Cr=!1,Vr=null,un=!1,Yn=null,Yo={onError:function(a){Cr=!0,Vr=a}};function Gi(a,c,f,y,T,P,K,pe,Se){Cr=!1,Vr=null,Ni.apply(Yo,arguments)}function Ki(a,c,f,y,T,P,K,pe,Se){if(Gi.apply(this,arguments),Cr){if(Cr){var Fe=Vr;Cr=!1,Vr=null}else throw Error(t(198));un||(un=!0,Yn=Fe)}}function bn(a){var c=a,f=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(f=c.return),a=c.return;while(a)}return c.tag===3?f:null}function Bi(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function Li(a){if(bn(a)!==a)throw Error(t(188))}function bs(a){var c=a.alternate;if(!c){if(c=bn(a),c===null)throw Error(t(188));return c!==a?null:a}for(var f=a,y=c;;){var T=f.return;if(T===null)break;var P=T.alternate;if(P===null){if(y=T.return,y!==null){f=y;continue}break}if(T.child===P.child){for(P=T.child;P;){if(P===f)return Li(T),a;if(P===y)return Li(T),c;P=P.sibling}throw Error(t(188))}if(f.return!==y.return)f=T,y=P;else{for(var K=!1,pe=T.child;pe;){if(pe===f){K=!0,f=T,y=P;break}if(pe===y){K=!0,y=T,f=P;break}pe=pe.sibling}if(!K){for(pe=P.child;pe;){if(pe===f){K=!0,f=P,y=T;break}if(pe===y){K=!0,y=P,f=T;break}pe=pe.sibling}if(!K)throw Error(t(189))}}if(f.alternate!==y)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?a:c}function mo(a){return a=bs(a),a!==null?go(a):null}function go(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=go(a);if(c!==null)return c;a=a.sibling}return null}var ws=e.unstable_scheduleCallback,Qo=e.unstable_cancelCallback,Po=e.unstable_shouldYield,Xo=e.unstable_requestPaint,jr=e.unstable_now,Bl=e.unstable_getCurrentPriorityLevel,Us=e.unstable_ImmediatePriority,gi=e.unstable_UserBlockingPriority,Zo=e.unstable_NormalPriority,wa=e.unstable_LowPriority,Ss=e.unstable_IdlePriority,_s=null,yi=null;function Ya(a){if(yi&&typeof yi.onCommitFiberRoot=="function")try{yi.onCommitFiberRoot(_s,a,void 0,(a.current.flags&128)===128)}catch{}}var Qn=Math.clz32?Math.clz32:Ts,No=Math.log,wr=Math.LN2;function Ts(a){return a>>>=0,a===0?32:31-(No(a)/wr|0)|0}var yo=64,xi=4194304;function lr(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Mn(a,c){var f=a.pendingLanes;if(f===0)return 0;var y=0,T=a.suspendedLanes,P=a.pingedLanes,K=f&268435455;if(K!==0){var pe=K&~T;pe!==0?y=lr(pe):(P&=K,P!==0&&(y=lr(P)))}else K=f&~T,K!==0?y=lr(K):P!==0&&(y=lr(P));if(y===0)return 0;if(c!==0&&c!==y&&(c&T)===0&&(T=y&-y,P=c&-c,T>=P||T===16&&(P&4194240)!==0))return c;if((y&4)!==0&&(y|=f&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=y;0<c;)f=31-Qn(c),T=1<<f,y|=a[f],c&=~T;return y}function xo(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Or(a,c){for(var f=a.suspendedLanes,y=a.pingedLanes,T=a.expirationTimes,P=a.pendingLanes;0<P;){var K=31-Qn(P),pe=1<<K,Se=T[K];Se===-1?((pe&f)===0||(pe&y)!==0)&&(T[K]=xo(pe,c)):Se<=c&&(a.expiredLanes|=pe),P&=~pe}}function qs(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Qa(){var a=yo;return yo<<=1,(yo&4194240)===0&&(yo=64),a}function Xa(a){for(var c=[],f=0;31>f;f++)c.push(a);return c}function Hs(a,c,f){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-Qn(c),a[c]=f}function Bo(a,c){var f=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var y=a.eventTimes;for(a=a.expirationTimes;0<f;){var T=31-Qn(f),P=1<<T;c[T]=0,y[T]=-1,a[T]=-1,f&=~P}}function Sa(a,c){var f=a.entangledLanes|=c;for(a=a.entanglements;f;){var y=31-Qn(f),T=1<<y;T&c|a[y]&c&&(a[y]|=c),f&=~T}}var or=0;function ai(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Gs,_a,Za,el,Ks,vi=!1,vo=[],Lo=null,bi=null,wn=null,Nt=new Map,es=new Map,Fi=[],Ll="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function As(a,c){switch(a){case"focusin":case"focusout":Lo=null;break;case"dragenter":case"dragleave":bi=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":Nt.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":es.delete(c.pointerId)}}function Dn(a,c,f,y,T,P){return a===null||a.nativeEvent!==P?(a={blockedOn:c,domEventName:f,eventSystemFlags:y,nativeEvent:P,targetContainers:[T]},c!==null&&(c=Hl(c),c!==null&&_a(c)),a):(a.eventSystemFlags|=y,c=a.targetContainers,T!==null&&c.indexOf(T)===-1&&c.push(T),a)}function Fo(a,c,f,y,T){switch(c){case"focusin":return Lo=Dn(Lo,a,c,f,y,T),!0;case"dragenter":return bi=Dn(bi,a,c,f,y,T),!0;case"mouseover":return wn=Dn(wn,a,c,f,y,T),!0;case"pointerover":var P=T.pointerId;return Nt.set(P,Dn(Nt.get(P)||null,a,c,f,y,T)),!0;case"gotpointercapture":return P=T.pointerId,es.set(P,Dn(es.get(P)||null,a,c,f,y,T)),!0}return!1}function Ta(a){var c=Na(a.target);if(c!==null){var f=bn(c);if(f!==null){if(c=f.tag,c===13){if(c=Bi(f),c!==null){a.blockedOn=c,Ks(a.priority,function(){Za(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Rr(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var f=Cs(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(f===null){f=a.nativeEvent;var y=new f.constructor(f.type,f);tr=y,f.target.dispatchEvent(y),tr=null}else return c=Hl(f),c!==null&&_a(c),a.blockedOn=f,!1;c.shift()}return!0}function Js(a,c,f){Rr(a)&&f.delete(c)}function tl(){vi=!1,Lo!==null&&Rr(Lo)&&(Lo=null),bi!==null&&Rr(bi)&&(bi=null),wn!==null&&Rr(wn)&&(wn=null),Nt.forEach(Js),es.forEach(Js)}function Ji(a,c){a.blockedOn===c&&(a.blockedOn=null,vi||(vi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,tl)))}function bo(a){function c(T){return Ji(T,a)}if(0<vo.length){Ji(vo[0],a);for(var f=1;f<vo.length;f++){var y=vo[f];y.blockedOn===a&&(y.blockedOn=null)}}for(Lo!==null&&Ji(Lo,a),bi!==null&&Ji(bi,a),wn!==null&&Ji(wn,a),Nt.forEach(c),es.forEach(c),f=0;f<Fi.length;f++)y=Fi[f],y.blockedOn===a&&(y.blockedOn=null);for(;0<Fi.length&&(f=Fi[0],f.blockedOn===null);)Ta(f),f.blockedOn===null&&Fi.shift()}var Yi=F.ReactCurrentBatchConfig,ts=!0;function Qi(a,c,f,y){var T=or,P=Yi.transition;Yi.transition=null;try{or=1,rs(a,c,f,y)}finally{or=T,Yi.transition=P}}function Aa(a,c,f,y){var T=or,P=Yi.transition;Yi.transition=null;try{or=4,rs(a,c,f,y)}finally{or=T,Yi.transition=P}}function rs(a,c,f,y){if(ts){var T=Cs(a,c,f,y);if(T===null)$c(a,c,y,wi,f),As(a,y);else if(Fo(T,a,c,f,y))y.stopPropagation();else if(As(a,y),c&4&&-1<Ll.indexOf(a)){for(;T!==null;){var P=Hl(T);if(P!==null&&Gs(P),P=Cs(a,c,f,y),P===null&&$c(a,c,y,wi,f),P===T)break;T=P}T!==null&&y.stopPropagation()}else $c(a,c,y,null,f)}}var wi=null;function Cs(a,c,f,y){if(wi=null,a=Wt(y),a=Na(a),a!==null)if(c=bn(a),c===null)a=null;else if(f=c.tag,f===13){if(a=Bi(c),a!==null)return a;a=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return wi=a,null}function ns(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bl()){case Us:return 1;case gi:return 4;case Zo:case wa:return 16;case Ss:return 536870912;default:return 16}default:return 16}}var li=null,zo=null,Vo=null;function rl(){if(Vo)return Vo;var a,c=zo,f=c.length,y,T="value"in li?li.value:li.textContent,P=T.length;for(a=0;a<f&&c[a]===T[a];a++);var K=f-a;for(y=1;y<=K&&c[f-y]===T[P-y];y++);return Vo=T.slice(a,1<y?1-y:void 0)}function zi(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Xn(){return!0}function Ca(){return!1}function Wn(a){function c(f,y,T,P,K){this._reactName=f,this._targetInst=T,this.type=y,this.nativeEvent=P,this.target=K,this.currentTarget=null;for(var pe in a)a.hasOwnProperty(pe)&&(f=a[pe],this[pe]=f?f(P):P[pe]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Xn:Ca,this.isPropagationStopped=Ca,this}return be(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),c}var Si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ks=Wn(Si),_=be({},Si,{view:0,detail:0}),H=Wn(_),ce,ye,Ce,De=be({},_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dt,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ce&&(Ce&&a.type==="mousemove"?(ce=a.screenX-Ce.screenX,ye=a.screenY-Ce.screenY):ye=ce=0,Ce=a),ce)},movementY:function(a){return"movementY"in a?a.movementY:ye}}),Ge=Wn(De),lt=be({},De,{dataTransfer:0}),mt=Wn(lt),Bt=be({},_,{relatedTarget:0}),vt=Wn(Bt),gr=be({},Si,{animationName:0,elapsedTime:0,pseudoElement:0}),Qr=Wn(gr),Mr=be({},Si,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),m=Wn(Mr),R=be({},Si,{data:0}),U=Wn(R),ee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ke={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Be={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tt(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=Be[a])?!!c[a]:!1}function Dt(){return tt}var Dr=be({},_,{key:function(a){if(a.key){var c=ee[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=zi(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?ke[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dt,charCode:function(a){return a.type==="keypress"?zi(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?zi(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),dr=Wn(Dr),Xr=be({},De,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$n=Wn(Xr),Vi=be({},_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dt}),en=Wn(Vi),_i=be({},Si,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oo=Wn(_i),Ys=be({},De,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Fc=Wn(Ys),dn=[9,13,27,32],is=u&&"CompositionEvent"in window,Is=null;u&&"documentMode"in document&&(Is=document.documentMode);var $u=u&&"TextEvent"in window&&!Is,wo=u&&(!is||Is&&8<Is&&11>=Is),ka=" ",Fl=!1;function zl(a,c){switch(a){case"keyup":return dn.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qs(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Mo=!1;function So(a,c){switch(a){case"compositionend":return Qs(c);case"keypress":return c.which!==32?null:(Fl=!0,ka);case"textInput":return a=c.data,a===ka&&Fl?null:a;default:return null}}function _o(a,c){if(Mo)return a==="compositionend"||!is&&zl(a,c)?(a=rl(),Vo=zo=li=null,Mo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return wo&&c.locale!=="ko"?null:c.data;default:return null}}var Ia={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Es(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!Ia[a.type]:c==="textarea"}function Xs(a,c,f,y){ar(y),c=Ku(c,"onChange"),0<c.length&&(f=new ks("onChange","change",null,f,y),a.push({event:f,listeners:c}))}var Zs=null,js=null;function Sn(a){Dc(a,0)}function nl(a){var c=fl(a);if(Xe(c))return a}function Rs(a,c){if(a==="change")return c}var os=!1;if(u){var il;if(u){var ol="oninput"in document;if(!ol){var Vl=document.createElement("div");Vl.setAttribute("oninput","return;"),ol=typeof Vl.oninput=="function"}il=ol}else il=!1;os=il&&(!document.documentMode||9<document.documentMode)}function Ol(){Zs&&(Zs.detachEvent("onpropertychange",ea),js=Zs=null)}function ea(a){if(a.propertyName==="value"&&nl(js)){var c=[];Xs(c,js,a,Wt(a)),Rt(Sn,c)}}function Ea(a,c,f){a==="focusin"?(Ol(),Zs=c,js=f,Zs.attachEvent("onpropertychange",ea)):a==="focusout"&&Ol()}function ja(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return nl(js)}function sl(a,c){if(a==="click")return nl(c)}function Ra(a,c){if(a==="input"||a==="change")return nl(c)}function al(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var hn=typeof Object.is=="function"?Object.is:al;function Xi(a,c){if(hn(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var f=Object.keys(a),y=Object.keys(c);if(f.length!==y.length)return!1;for(y=0;y<f.length;y++){var T=f[y];if(!h.call(c,T)||!hn(a[T],c[T]))return!1}return!0}function Sr(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Br(a,c){var f=Sr(a);a=0;for(var y;f;){if(f.nodeType===3){if(y=a+f.textContent.length,a<=c&&y>=c)return{node:f,offset:c-a};a=y}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Sr(f)}}function fn(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?fn(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function jn(){for(var a=window,c=Ze();c instanceof a.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)a=c.contentWindow;else break;c=Ze(a.document)}return c}function ss(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function zc(a){var c=jn(),f=a.focusedElem,y=a.selectionRange;if(c!==f&&f&&f.ownerDocument&&fn(f.ownerDocument.documentElement,f)){if(y!==null&&ss(f)){if(c=y.start,a=y.end,a===void 0&&(a=c),"selectionStart"in f)f.selectionStart=c,f.selectionEnd=Math.min(a,f.value.length);else if(a=(c=f.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var T=f.textContent.length,P=Math.min(y.start,T);y=y.end===void 0?P:Math.min(y.end,T),!a.extend&&P>y&&(T=y,y=P,P=T),T=Br(f,P);var K=Br(f,y);T&&K&&(a.rangeCount!==1||a.anchorNode!==T.node||a.anchorOffset!==T.offset||a.focusNode!==K.node||a.focusOffset!==K.offset)&&(c=c.createRange(),c.setStart(T.node,T.offset),a.removeAllRanges(),P>y?(a.addRange(c),a.extend(K.node,K.offset)):(c.setEnd(K.node,K.offset),a.addRange(c)))}}for(c=[],a=f;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<c.length;f++)a=c[f],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Ml=u&&"documentMode"in document&&11>=document.documentMode,ta=null,Uu=null,Dl=null,qu=!1;function uh(a,c,f){var y=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;qu||ta==null||ta!==Ze(y)||(y=ta,"selectionStart"in y&&ss(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Dl&&Xi(Dl,y)||(Dl=y,y=Ku(Uu,"onSelect"),0<y.length&&(c=new ks("onSelect","select",null,c,f),a.push({event:c,listeners:y}),c.target=ta)))}function Vc(a,c){var f={};return f[a.toLowerCase()]=c.toLowerCase(),f["Webkit"+a]="webkit"+c,f["Moz"+a]="moz"+c,f}var ll={animationend:Vc("Animation","AnimationEnd"),animationiteration:Vc("Animation","AnimationIteration"),animationstart:Vc("Animation","AnimationStart"),transitionend:Vc("Transition","TransitionEnd")},cl={},dh={};u&&(dh=document.createElement("div").style,"AnimationEvent"in window||(delete ll.animationend.animation,delete ll.animationiteration.animation,delete ll.animationstart.animation),"TransitionEvent"in window||delete ll.transitionend.transition);function Oc(a){if(cl[a])return cl[a];if(!ll[a])return a;var c=ll[a],f;for(f in c)if(c.hasOwnProperty(f)&&f in dh)return cl[a]=c[f];return a}var hh=Oc("animationend"),fh=Oc("animationiteration"),ph=Oc("animationstart"),mh=Oc("transitionend"),gh=new Map,yh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ps(a,c){gh.set(a,c),o(c,[a])}for(var Wl=0;Wl<yh.length;Wl++){var Oi=yh[Wl],Do=Oi.toLowerCase(),Hu=Oi[0].toUpperCase()+Oi.slice(1);Ps(Do,"on"+Hu)}Ps(hh,"onAnimationEnd"),Ps(fh,"onAnimationIteration"),Ps(ph,"onAnimationStart"),Ps("dblclick","onDoubleClick"),Ps("focusin","onFocus"),Ps("focusout","onBlur"),Ps(mh,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pa));function Mc(a,c,f){var y=a.type||"unknown-event";a.currentTarget=f,Ki(y,c,void 0,a),a.currentTarget=null}function Dc(a,c){c=(c&4)!==0;for(var f=0;f<a.length;f++){var y=a[f],T=y.event;y=y.listeners;e:{var P=void 0;if(c)for(var K=y.length-1;0<=K;K--){var pe=y[K],Se=pe.instance,Fe=pe.currentTarget;if(pe=pe.listener,Se!==P&&T.isPropagationStopped())break e;Mc(T,pe,Fe),P=Se}else for(K=0;K<y.length;K++){if(pe=y[K],Se=pe.instance,Fe=pe.currentTarget,pe=pe.listener,Se!==P&&T.isPropagationStopped())break e;Mc(T,pe,Fe),P=Se}}}if(un)throw a=Yn,un=!1,Yn=null,a}function Wr(a,c){var f=c[eo];f===void 0&&(f=c[eo]=new Set);var y=a+"__bubble";f.has(y)||(Wc(c,a,2,!1),f.add(y))}function Gu(a,c,f){var y=0;c&&(y|=4),Wc(f,a,y,c)}var $l="_reactListening"+Math.random().toString(36).slice(2);function ul(a){if(!a[$l]){a[$l]=!0,n.forEach(function(f){f!=="selectionchange"&&(Kf.has(f)||Gu(f,!1,a),Gu(f,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[$l]||(c[$l]=!0,Gu("selectionchange",!1,c))}}function Wc(a,c,f,y){switch(ns(c)){case 1:var T=Qi;break;case 4:T=Aa;break;default:T=rs}f=T.bind(null,c,f,a),T=void 0,!mi||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(T=!0),y?T!==void 0?a.addEventListener(c,f,{capture:!0,passive:T}):a.addEventListener(c,f,!0):T!==void 0?a.addEventListener(c,f,{passive:T}):a.addEventListener(c,f,!1)}function $c(a,c,f,y,T){var P=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var K=y.tag;if(K===3||K===4){var pe=y.stateNode.containerInfo;if(pe===T||pe.nodeType===8&&pe.parentNode===T)break;if(K===4)for(K=y.return;K!==null;){var Se=K.tag;if((Se===3||Se===4)&&(Se=K.stateNode.containerInfo,Se===T||Se.nodeType===8&&Se.parentNode===T))return;K=K.return}for(;pe!==null;){if(K=Na(pe),K===null)return;if(Se=K.tag,Se===5||Se===6){y=P=K;continue e}pe=pe.parentNode}}y=y.return}Rt(function(){var Fe=P,Je=Wt(f),Ye=[];e:{var Ke=gh.get(a);if(Ke!==void 0){var at=ks,gt=a;switch(a){case"keypress":if(zi(f)===0)break e;case"keydown":case"keyup":at=dr;break;case"focusin":gt="focus",at=vt;break;case"focusout":gt="blur",at=vt;break;case"beforeblur":case"afterblur":at=vt;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=Ge;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=mt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=en;break;case hh:case fh:case ph:at=Qr;break;case mh:at=Oo;break;case"scroll":at=H;break;case"wheel":at=Fc;break;case"copy":case"cut":case"paste":at=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=$n}var bt=(c&4)!==0,Hn=!bt&&a==="scroll",Re=bt?Ke!==null?Ke+"Capture":null:Ke;bt=[];for(var Ae=Fe,Le;Ae!==null;){Le=Ae;var et=Le.stateNode;if(Le.tag===5&&et!==null&&(Le=et,Re!==null&&(et=Pi(Ae,Re),et!=null&&bt.push(Uc(Ae,et,Le)))),Hn)break;Ae=Ae.return}0<bt.length&&(Ke=new at(Ke,gt,null,f,Je),Ye.push({event:Ke,listeners:bt}))}}if((c&7)===0){e:{if(Ke=a==="mouseover"||a==="pointerover",at=a==="mouseout"||a==="pointerout",Ke&&f!==tr&&(gt=f.relatedTarget||f.fromElement)&&(Na(gt)||gt[Ti]))break e;if((at||Ke)&&(Ke=Je.window===Je?Je:(Ke=Je.ownerDocument)?Ke.defaultView||Ke.parentWindow:window,at?(gt=f.relatedTarget||f.toElement,at=Fe,gt=gt?Na(gt):null,gt!==null&&(Hn=bn(gt),gt!==Hn||gt.tag!==5&&gt.tag!==6)&&(gt=null)):(at=null,gt=Fe),at!==gt)){if(bt=Ge,et="onMouseLeave",Re="onMouseEnter",Ae="mouse",(a==="pointerout"||a==="pointerover")&&(bt=$n,et="onPointerLeave",Re="onPointerEnter",Ae="pointer"),Hn=at==null?Ke:fl(at),Le=gt==null?Ke:fl(gt),Ke=new bt(et,Ae+"leave",at,f,Je),Ke.target=Hn,Ke.relatedTarget=Le,et=null,Na(Je)===Fe&&(bt=new bt(Re,Ae+"enter",gt,f,Je),bt.target=Le,bt.relatedTarget=Hn,et=bt),Hn=et,at&&gt)t:{for(bt=at,Re=gt,Ae=0,Le=bt;Le;Le=dl(Le))Ae++;for(Le=0,et=Re;et;et=dl(et))Le++;for(;0<Ae-Le;)bt=dl(bt),Ae--;for(;0<Le-Ae;)Re=dl(Re),Le--;for(;Ae--;){if(bt===Re||Re!==null&&bt===Re.alternate)break t;bt=dl(bt),Re=dl(Re)}bt=null}else bt=null;at!==null&&Jf(Ye,Ke,at,bt,!1),gt!==null&&Hn!==null&&Jf(Ye,Hn,gt,bt,!0)}}e:{if(Ke=Fe?fl(Fe):window,at=Ke.nodeName&&Ke.nodeName.toLowerCase(),at==="select"||at==="input"&&Ke.type==="file")var At=Rs;else if(Es(Ke))if(os)At=Ra;else{At=ja;var zt=Ea}else(at=Ke.nodeName)&&at.toLowerCase()==="input"&&(Ke.type==="checkbox"||Ke.type==="radio")&&(At=sl);if(At&&(At=At(a,Fe))){Xs(Ye,At,f,Je);break e}zt&&zt(a,Ke,Fe),a==="focusout"&&(zt=Ke._wrapperState)&&zt.controlled&&Ke.type==="number"&&He(Ke,"number",Ke.value)}switch(zt=Fe?fl(Fe):window,a){case"focusin":(Es(zt)||zt.contentEditable==="true")&&(ta=zt,Uu=Fe,Dl=null);break;case"focusout":Dl=Uu=ta=null;break;case"mousedown":qu=!0;break;case"contextmenu":case"mouseup":case"dragend":qu=!1,uh(Ye,f,Je);break;case"selectionchange":if(Ml)break;case"keydown":case"keyup":uh(Ye,f,Je)}var Vt;if(is)e:{switch(a){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else Mo?zl(a,f)&&(Yt="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Yt="onCompositionStart");Yt&&(wo&&f.locale!=="ko"&&(Mo||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Mo&&(Vt=rl()):(li=Je,zo="value"in li?li.value:li.textContent,Mo=!0)),zt=Ku(Fe,Yt),0<zt.length&&(Yt=new U(Yt,a,null,f,Je),Ye.push({event:Yt,listeners:zt}),Vt?Yt.data=Vt:(Vt=Qs(f),Vt!==null&&(Yt.data=Vt)))),(Vt=$u?So(a,f):_o(a,f))&&(Fe=Ku(Fe,"onBeforeInput"),0<Fe.length&&(Je=new U("onBeforeInput","beforeinput",null,f,Je),Ye.push({event:Je,listeners:Fe}),Je.data=Vt))}Dc(Ye,c)})}function Uc(a,c,f){return{instance:a,listener:c,currentTarget:f}}function Ku(a,c){for(var f=c+"Capture",y=[];a!==null;){var T=a,P=T.stateNode;T.tag===5&&P!==null&&(T=P,P=Pi(a,f),P!=null&&y.unshift(Uc(a,P,T)),P=Pi(a,c),P!=null&&y.push(Uc(a,P,T))),a=a.return}return y}function dl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Jf(a,c,f,y,T){for(var P=c._reactName,K=[];f!==null&&f!==y;){var pe=f,Se=pe.alternate,Fe=pe.stateNode;if(Se!==null&&Se===y)break;pe.tag===5&&Fe!==null&&(pe=Fe,T?(Se=Pi(f,P),Se!=null&&K.unshift(Uc(f,Se,pe))):T||(Se=Pi(f,P),Se!=null&&K.push(Uc(f,Se,pe)))),f=f.return}K.length!==0&&a.push({event:c,listeners:K})}var A0=/\r\n?/g,C0=/\u0000|\uFFFD/g;function Yf(a){return(typeof a=="string"?a:""+a).replace(A0,`
`).replace(C0,"")}function Ju(a,c,f){if(c=Yf(c),Yf(a)!==c&&f)throw Error(t(425))}function Ul(){}var qc=null,hl=null;function xh(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var vh=typeof setTimeout=="function"?setTimeout:void 0,Qf=typeof clearTimeout=="function"?clearTimeout:void 0,Xf=typeof Promise=="function"?Promise:void 0,k0=typeof queueMicrotask=="function"?queueMicrotask:typeof Xf<"u"?function(a){return Xf.resolve(null).then(a).catch(I0)}:vh;function I0(a){setTimeout(function(){throw a})}function bh(a,c){var f=c,y=0;do{var T=f.nextSibling;if(a.removeChild(f),T&&T.nodeType===8)if(f=T.data,f==="/$"){if(y===0){a.removeChild(T),bo(c);return}y--}else f!=="$"&&f!=="$?"&&f!=="$!"||y++;f=T}while(f);bo(c)}function Mi(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function Wo(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return a;c--}else f==="/$"&&c++}a=a.previousSibling}return null}var Zi=Math.random().toString(36).slice(2),Ns="__reactFiber$"+Zi,ql="__reactProps$"+Zi,Ti="__reactContainer$"+Zi,eo="__reactEvents$"+Zi,E0="__reactListeners$"+Zi,j0="__reactHandles$"+Zi;function Na(a){var c=a[Ns];if(c)return c;for(var f=a.parentNode;f;){if(c=f[Ti]||f[Ns]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(a=Wo(a);a!==null;){if(f=a[Ns])return f;a=Wo(a)}return c}a=f,f=a.parentNode}return null}function Hl(a){return a=a[Ns]||a[Ti],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function fl(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function Hc(a){return a[ql]||null}var wh=[],ra=-1;function as(a){return{current:a}}function Pr(a){0>ra||(a.current=wh[ra],wh[ra]=null,ra--)}function Lr(a,c){ra++,wh[ra]=a.current,a.current=c}var Ba={},ci=as(Ba),to=as(!1),pl=Ba;function Gl(a,c){var f=a.type.contextTypes;if(!f)return Ba;var y=a.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var T={},P;for(P in f)T[P]=c[P];return y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=T),T}function ro(a){return a=a.childContextTypes,a!=null}function Yu(){Pr(to),Pr(ci)}function Zf(a,c,f){if(ci.current!==Ba)throw Error(t(168));Lr(ci,c),Lr(to,f)}function Sh(a,c,f){var y=a.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return f;y=y.getChildContext();for(var T in y)if(!(T in c))throw Error(t(108,_e(a)||"Unknown",T));return be({},f,y)}function ml(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ba,pl=ci.current,Lr(ci,a),Lr(to,to.current),!0}function ep(a,c,f){var y=a.stateNode;if(!y)throw Error(t(169));f?(a=Sh(a,c,pl),y.__reactInternalMemoizedMergedChildContext=a,Pr(to),Pr(ci),Lr(ci,a)):Pr(to),Lr(to,f)}var na=null,Gc=!1,p=!1;function x(a){na===null?na=[a]:na.push(a)}function j(a){Gc=!0,x(a)}function z(){if(!p&&na!==null){p=!0;var a=0,c=or;try{var f=na;for(or=1;a<f.length;a++){var y=f[a];do y=y(!0);while(y!==null)}na=null,Gc=!1}catch(T){throw na!==null&&(na=na.slice(a+1)),ws(Us,z),T}finally{or=c,p=!1}}return null}var G=[],Y=0,Q=null,X=0,te=[],ae=0,we=null,Ee=1,le="";function Te(a,c){G[Y++]=X,G[Y++]=Q,Q=a,X=c}function Ie(a,c,f){te[ae++]=Ee,te[ae++]=le,te[ae++]=we,we=a;var y=Ee;a=le;var T=32-Qn(y)-1;y&=~(1<<T),f+=1;var P=32-Qn(c)+T;if(30<P){var K=T-T%5;P=(y&(1<<K)-1).toString(32),y>>=K,T-=K,Ee=1<<32-Qn(c)+T|f<<T|y,le=P+a}else Ee=1<<P|f<<T|y,le=a}function Me(a){a.return!==null&&(Te(a,1),Ie(a,1,0))}function Ne(a){for(;a===Q;)Q=G[--Y],G[Y]=null,X=G[--Y],G[Y]=null;for(;a===we;)we=te[--ae],te[ae]=null,le=te[--ae],te[ae]=null,Ee=te[--ae],te[ae]=null}var Ve=null,Oe=null,$e=!1,qe=null;function St(a,c){var f=Vs(5,null,null,0);f.elementType="DELETED",f.stateNode=c,f.return=a,c=a.deletions,c===null?(a.deletions=[f],a.flags|=16):c.push(f)}function ct(a,c){switch(a.tag){case 5:var f=a.type;return c=c.nodeType!==1||f.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,Ve=a,Oe=Mi(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,Ve=a,Oe=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(f=we!==null?{id:Ee,overflow:le}:null,a.memoizedState={dehydrated:c,treeContext:f,retryLane:1073741824},f=Vs(18,null,null,0),f.stateNode=c,f.return=a,a.child=f,Ve=a,Oe=null,!0):!1;default:return!1}}function Xt(a){return(a.mode&1)!==0&&(a.flags&128)===0}function ft(a){if($e){var c=Oe;if(c){var f=c;if(!ct(a,c)){if(Xt(a))throw Error(t(418));c=Mi(f.nextSibling);var y=Ve;c&&ct(a,c)?St(y,f):(a.flags=a.flags&-4097|2,$e=!1,Ve=a)}}else{if(Xt(a))throw Error(t(418));a.flags=a.flags&-4097|2,$e=!1,Ve=a}}}function hr(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Ve=a}function pn(a){if(a!==Ve)return!1;if(!$e)return hr(a),$e=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!xh(a.type,a.memoizedProps)),c&&(c=Oe)){if(Xt(a))throw rr(),Error(t(418));for(;c;)St(a,c),c=Mi(c.nextSibling)}if(hr(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"){if(c===0){Oe=Mi(a.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++}a=a.nextSibling}Oe=null}}else Oe=Ve?Mi(a.stateNode.nextSibling):null;return!0}function rr(){for(var a=Oe;a;)a=Mi(a.nextSibling)}function ut(){Oe=Ve=null,$e=!1}function nt(a){qe===null?qe=[a]:qe.push(a)}var _n=F.ReactCurrentBatchConfig;function Gt(a,c,f){if(a=f.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var y=f.stateNode}if(!y)throw Error(t(147,a));var T=y,P=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===P?c.ref:(c=function(K){var pe=T.refs;K===null?delete pe[P]:pe[P]=K},c._stringRef=P,c)}if(typeof a!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,a))}return a}function cr(a,c){throw a=Object.prototype.toString.call(c),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function Zr(a){var c=a._init;return c(a._payload)}function Zn(a){function c(Re,Ae){if(a){var Le=Re.deletions;Le===null?(Re.deletions=[Ae],Re.flags|=16):Le.push(Ae)}}function f(Re,Ae){if(!a)return null;for(;Ae!==null;)c(Re,Ae),Ae=Ae.sibling;return null}function y(Re,Ae){for(Re=new Map;Ae!==null;)Ae.key!==null?Re.set(Ae.key,Ae):Re.set(Ae.index,Ae),Ae=Ae.sibling;return Re}function T(Re,Ae){return Re=nc(Re,Ae),Re.index=0,Re.sibling=null,Re}function P(Re,Ae,Le){return Re.index=Le,a?(Le=Re.alternate,Le!==null?(Le=Le.index,Le<Ae?(Re.flags|=2,Ae):Le):(Re.flags|=2,Ae)):(Re.flags|=1048576,Ae)}function K(Re){return a&&Re.alternate===null&&(Re.flags|=2),Re}function pe(Re,Ae,Le,et){return Ae===null||Ae.tag!==6?(Ae=og(Le,Re.mode,et),Ae.return=Re,Ae):(Ae=T(Ae,Le),Ae.return=Re,Ae)}function Se(Re,Ae,Le,et){var At=Le.type;return At===V?Je(Re,Ae,Le.props.children,et,Le.key):Ae!==null&&(Ae.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===oe&&Zr(At)===Ae.type)?(et=T(Ae,Le.props),et.ref=Gt(Re,Ae,Le),et.return=Re,et):(et=bp(Le.type,Le.key,Le.props,null,Re.mode,et),et.ref=Gt(Re,Ae,Le),et.return=Re,et)}function Fe(Re,Ae,Le,et){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==Le.containerInfo||Ae.stateNode.implementation!==Le.implementation?(Ae=sg(Le,Re.mode,et),Ae.return=Re,Ae):(Ae=T(Ae,Le.children||[]),Ae.return=Re,Ae)}function Je(Re,Ae,Le,et,At){return Ae===null||Ae.tag!==7?(Ae=tu(Le,Re.mode,et,At),Ae.return=Re,Ae):(Ae=T(Ae,Le),Ae.return=Re,Ae)}function Ye(Re,Ae,Le){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Ae=og(""+Ae,Re.mode,Le),Ae.return=Re,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case ne:return Le=bp(Ae.type,Ae.key,Ae.props,null,Re.mode,Le),Le.ref=Gt(Re,null,Ae),Le.return=Re,Le;case ue:return Ae=sg(Ae,Re.mode,Le),Ae.return=Re,Ae;case oe:var et=Ae._init;return Ye(Re,et(Ae._payload),Le)}if(ot(Ae)||ve(Ae))return Ae=tu(Ae,Re.mode,Le,null),Ae.return=Re,Ae;cr(Re,Ae)}return null}function Ke(Re,Ae,Le,et){var At=Ae!==null?Ae.key:null;if(typeof Le=="string"&&Le!==""||typeof Le=="number")return At!==null?null:pe(Re,Ae,""+Le,et);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case ne:return Le.key===At?Se(Re,Ae,Le,et):null;case ue:return Le.key===At?Fe(Re,Ae,Le,et):null;case oe:return At=Le._init,Ke(Re,Ae,At(Le._payload),et)}if(ot(Le)||ve(Le))return At!==null?null:Je(Re,Ae,Le,et,null);cr(Re,Le)}return null}function at(Re,Ae,Le,et,At){if(typeof et=="string"&&et!==""||typeof et=="number")return Re=Re.get(Le)||null,pe(Ae,Re,""+et,At);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case ne:return Re=Re.get(et.key===null?Le:et.key)||null,Se(Ae,Re,et,At);case ue:return Re=Re.get(et.key===null?Le:et.key)||null,Fe(Ae,Re,et,At);case oe:var zt=et._init;return at(Re,Ae,Le,zt(et._payload),At)}if(ot(et)||ve(et))return Re=Re.get(Le)||null,Je(Ae,Re,et,At,null);cr(Ae,et)}return null}function gt(Re,Ae,Le,et){for(var At=null,zt=null,Vt=Ae,Yt=Ae=0,Ei=null;Vt!==null&&Yt<Le.length;Yt++){Vt.index>Yt?(Ei=Vt,Vt=null):Ei=Vt.sibling;var kr=Ke(Re,Vt,Le[Yt],et);if(kr===null){Vt===null&&(Vt=Ei);break}a&&Vt&&kr.alternate===null&&c(Re,Vt),Ae=P(kr,Ae,Yt),zt===null?At=kr:zt.sibling=kr,zt=kr,Vt=Ei}if(Yt===Le.length)return f(Re,Vt),$e&&Te(Re,Yt),At;if(Vt===null){for(;Yt<Le.length;Yt++)Vt=Ye(Re,Le[Yt],et),Vt!==null&&(Ae=P(Vt,Ae,Yt),zt===null?At=Vt:zt.sibling=Vt,zt=Vt);return $e&&Te(Re,Yt),At}for(Vt=y(Re,Vt);Yt<Le.length;Yt++)Ei=at(Vt,Re,Yt,Le[Yt],et),Ei!==null&&(a&&Ei.alternate!==null&&Vt.delete(Ei.key===null?Yt:Ei.key),Ae=P(Ei,Ae,Yt),zt===null?At=Ei:zt.sibling=Ei,zt=Ei);return a&&Vt.forEach(function(ic){return c(Re,ic)}),$e&&Te(Re,Yt),At}function bt(Re,Ae,Le,et){var At=ve(Le);if(typeof At!="function")throw Error(t(150));if(Le=At.call(Le),Le==null)throw Error(t(151));for(var zt=At=null,Vt=Ae,Yt=Ae=0,Ei=null,kr=Le.next();Vt!==null&&!kr.done;Yt++,kr=Le.next()){Vt.index>Yt?(Ei=Vt,Vt=null):Ei=Vt.sibling;var ic=Ke(Re,Vt,kr.value,et);if(ic===null){Vt===null&&(Vt=Ei);break}a&&Vt&&ic.alternate===null&&c(Re,Vt),Ae=P(ic,Ae,Yt),zt===null?At=ic:zt.sibling=ic,zt=ic,Vt=Ei}if(kr.done)return f(Re,Vt),$e&&Te(Re,Yt),At;if(Vt===null){for(;!kr.done;Yt++,kr=Le.next())kr=Ye(Re,kr.value,et),kr!==null&&(Ae=P(kr,Ae,Yt),zt===null?At=kr:zt.sibling=kr,zt=kr);return $e&&Te(Re,Yt),At}for(Vt=y(Re,Vt);!kr.done;Yt++,kr=Le.next())kr=at(Vt,Re,Yt,kr.value,et),kr!==null&&(a&&kr.alternate!==null&&Vt.delete(kr.key===null?Yt:kr.key),Ae=P(kr,Ae,Yt),zt===null?At=kr:zt.sibling=kr,zt=kr);return a&&Vt.forEach(function(yT){return c(Re,yT)}),$e&&Te(Re,Yt),At}function Hn(Re,Ae,Le,et){if(typeof Le=="object"&&Le!==null&&Le.type===V&&Le.key===null&&(Le=Le.props.children),typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case ne:e:{for(var At=Le.key,zt=Ae;zt!==null;){if(zt.key===At){if(At=Le.type,At===V){if(zt.tag===7){f(Re,zt.sibling),Ae=T(zt,Le.props.children),Ae.return=Re,Re=Ae;break e}}else if(zt.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===oe&&Zr(At)===zt.type){f(Re,zt.sibling),Ae=T(zt,Le.props),Ae.ref=Gt(Re,zt,Le),Ae.return=Re,Re=Ae;break e}f(Re,zt);break}else c(Re,zt);zt=zt.sibling}Le.type===V?(Ae=tu(Le.props.children,Re.mode,et,Le.key),Ae.return=Re,Re=Ae):(et=bp(Le.type,Le.key,Le.props,null,Re.mode,et),et.ref=Gt(Re,Ae,Le),et.return=Re,Re=et)}return K(Re);case ue:e:{for(zt=Le.key;Ae!==null;){if(Ae.key===zt)if(Ae.tag===4&&Ae.stateNode.containerInfo===Le.containerInfo&&Ae.stateNode.implementation===Le.implementation){f(Re,Ae.sibling),Ae=T(Ae,Le.children||[]),Ae.return=Re,Re=Ae;break e}else{f(Re,Ae);break}else c(Re,Ae);Ae=Ae.sibling}Ae=sg(Le,Re.mode,et),Ae.return=Re,Re=Ae}return K(Re);case oe:return zt=Le._init,Hn(Re,Ae,zt(Le._payload),et)}if(ot(Le))return gt(Re,Ae,Le,et);if(ve(Le))return bt(Re,Ae,Le,et);cr(Re,Le)}return typeof Le=="string"&&Le!==""||typeof Le=="number"?(Le=""+Le,Ae!==null&&Ae.tag===6?(f(Re,Ae.sibling),Ae=T(Ae,Le),Ae.return=Re,Re=Ae):(f(Re,Ae),Ae=og(Le,Re.mode,et),Ae.return=Re,Re=Ae),K(Re)):f(Re,Ae)}return Hn}var Rn=Zn(!0),an=Zn(!1),Un=as(null),ei=null,nn=null,pr=null;function _r(){pr=nn=ei=null}function on(a){var c=Un.current;Pr(Un),a._currentValue=c}function Tr(a,c,f){for(;a!==null;){var y=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),a===f)break;a=a.return}}function mn(a,c){ei=a,pr=nn=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(Uo=!0),a.firstContext=null)}function gn(a){var c=a._currentValue;if(pr!==a)if(a={context:a,memoizedValue:c,next:null},nn===null){if(ei===null)throw Error(t(308));nn=a,ei.dependencies={lanes:0,firstContext:a}}else nn=nn.next=a;return c}var $r=null;function Ai(a){$r===null?$r=[a]:$r.push(a)}function Fr(a,c,f,y){var T=c.interleaved;return T===null?(f.next=f,Ai(c)):(f.next=T.next,T.next=f),c.interleaved=f,Ur(a,y)}function Ur(a,c){a.lanes|=c;var f=a.alternate;for(f!==null&&(f.lanes|=c),f=a,a=a.return;a!==null;)a.childLanes|=c,f=a.alternate,f!==null&&(f.childLanes|=c),f=a,a=a.return;return f.tag===3?f.stateNode:null}var Pn=!1;function ui(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function no(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Tn(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function An(a,c,f){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(Ar&2)!==0){var T=y.pending;return T===null?c.next=c:(c.next=T.next,T.next=c),y.pending=c,Ur(a,f)}return T=y.interleaved,T===null?(c.next=c,Ai(y)):(c.next=T.next,T.next=c),y.interleaved=c,Ur(a,f)}function Ci(a,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194240)!==0)){var y=c.lanes;y&=a.pendingLanes,f|=y,c.lanes=f,Sa(a,f)}}function qr(a,c){var f=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,f===y)){var T=null,P=null;if(f=f.firstBaseUpdate,f!==null){do{var K={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};P===null?T=P=K:P=P.next=K,f=f.next}while(f!==null);P===null?T=P=c:P=P.next=c}else T=P=c;f={baseState:y.baseState,firstBaseUpdate:T,lastBaseUpdate:P,shared:y.shared,effects:y.effects},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=c}function ki(a,c,f,y){var T=a.updateQueue;Pn=!1;var P=T.firstBaseUpdate,K=T.lastBaseUpdate,pe=T.shared.pending;if(pe!==null){T.shared.pending=null;var Se=pe,Fe=Se.next;Se.next=null,K===null?P=Fe:K.next=Fe,K=Se;var Je=a.alternate;Je!==null&&(Je=Je.updateQueue,pe=Je.lastBaseUpdate,pe!==K&&(pe===null?Je.firstBaseUpdate=Fe:pe.next=Fe,Je.lastBaseUpdate=Se))}if(P!==null){var Ye=T.baseState;K=0,Je=Fe=Se=null,pe=P;do{var Ke=pe.lane,at=pe.eventTime;if((y&Ke)===Ke){Je!==null&&(Je=Je.next={eventTime:at,lane:0,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null});e:{var gt=a,bt=pe;switch(Ke=c,at=f,bt.tag){case 1:if(gt=bt.payload,typeof gt=="function"){Ye=gt.call(at,Ye,Ke);break e}Ye=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=bt.payload,Ke=typeof gt=="function"?gt.call(at,Ye,Ke):gt,Ke==null)break e;Ye=be({},Ye,Ke);break e;case 2:Pn=!0}}pe.callback!==null&&pe.lane!==0&&(a.flags|=64,Ke=T.effects,Ke===null?T.effects=[pe]:Ke.push(pe))}else at={eventTime:at,lane:Ke,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},Je===null?(Fe=Je=at,Se=Ye):Je=Je.next=at,K|=Ke;if(pe=pe.next,pe===null){if(pe=T.shared.pending,pe===null)break;Ke=pe,pe=Ke.next,Ke.next=null,T.lastBaseUpdate=Ke,T.shared.pending=null}}while(!0);if(Je===null&&(Se=Ye),T.baseState=Se,T.firstBaseUpdate=Fe,T.lastBaseUpdate=Je,c=T.shared.interleaved,c!==null){T=c;do K|=T.lane,T=T.next;while(T!==c)}else P===null&&(T.shared.lanes=0);Qc|=K,a.lanes=K,a.memoizedState=Ye}}function $o(a,c,f){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var y=a[c],T=y.callback;if(T!==null){if(y.callback=null,y=f,typeof T!="function")throw Error(t(191,T));T.call(y)}}}var ls={},ti=as(ls),Cn=as(ls),La=as(ls);function ia(a){if(a===ls)throw Error(t(174));return a}function Kl(a,c){switch(Lr(La,c),Lr(Cn,a),Lr(ti,ls),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:vr(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=vr(c,a)}Pr(ti),Lr(ti,c)}function Bs(){Pr(ti),Pr(Cn),Pr(La)}function tp(a){ia(La.current);var c=ia(ti.current),f=vr(c,a.type);c!==f&&(Lr(Cn,a),Lr(ti,f))}function _h(a){Cn.current===a&&(Pr(ti),Pr(Cn))}var tn=as(0);function cs(a){for(var c=a;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Th=[];function Ah(){for(var a=0;a<Th.length;a++)Th[a]._workInProgressVersionPrimary=null;Th.length=0}var Qu=F.ReactCurrentDispatcher,Xu=F.ReactCurrentBatchConfig,Ls=0,sn=null,Nn=null,kn=null,Jl=!1,oa=!1,Yl=0,R0=0;function qn(){throw Error(t(321))}function Zu(a,c){if(c===null)return!1;for(var f=0;f<c.length&&f<a.length;f++)if(!hn(a[f],c[f]))return!1;return!0}function Kc(a,c,f,y,T,P){if(Ls=P,sn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Qu.current=a===null||a.memoizedState===null?$4:U4,a=f(y,T),oa){P=0;do{if(oa=!1,Yl=0,25<=P)throw Error(t(301));P+=1,kn=Nn=null,c.updateQueue=null,Qu.current=q4,a=f(y,T)}while(oa)}if(Qu.current=sp,c=Nn!==null&&Nn.next!==null,Ls=0,kn=Nn=sn=null,Jl=!1,c)throw Error(t(300));return a}function Fs(){var a=Yl!==0;return Yl=0,a}function us(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?sn.memoizedState=kn=a:kn=kn.next=a,kn}function To(){if(Nn===null){var a=sn.alternate;a=a!==null?a.memoizedState:null}else a=Nn.next;var c=kn===null?sn.memoizedState:kn.next;if(c!==null)kn=c,Nn=a;else{if(a===null)throw Error(t(310));Nn=a,a={memoizedState:Nn.memoizedState,baseState:Nn.baseState,baseQueue:Nn.baseQueue,queue:Nn.queue,next:null},kn===null?sn.memoizedState=kn=a:kn=kn.next=a}return kn}function Jc(a,c){return typeof c=="function"?c(a):c}function ed(a){var c=To(),f=c.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var y=Nn,T=y.baseQueue,P=f.pending;if(P!==null){if(T!==null){var K=T.next;T.next=P.next,P.next=K}y.baseQueue=T=P,f.pending=null}if(T!==null){P=T.next,y=y.baseState;var pe=K=null,Se=null,Fe=P;do{var Je=Fe.lane;if((Ls&Je)===Je)Se!==null&&(Se=Se.next={lane:0,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),y=Fe.hasEagerState?Fe.eagerState:a(y,Fe.action);else{var Ye={lane:Je,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null};Se===null?(pe=Se=Ye,K=y):Se=Se.next=Ye,sn.lanes|=Je,Qc|=Je}Fe=Fe.next}while(Fe!==null&&Fe!==P);Se===null?K=y:Se.next=pe,hn(y,c.memoizedState)||(Uo=!0),c.memoizedState=y,c.baseState=K,c.baseQueue=Se,f.lastRenderedState=y}if(a=f.interleaved,a!==null){T=a;do P=T.lane,sn.lanes|=P,Qc|=P,T=T.next;while(T!==a)}else T===null&&(f.lanes=0);return[c.memoizedState,f.dispatch]}function Fa(a){var c=To(),f=c.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var y=f.dispatch,T=f.pending,P=c.memoizedState;if(T!==null){f.pending=null;var K=T=T.next;do P=a(P,K.action),K=K.next;while(K!==T);hn(P,c.memoizedState)||(Uo=!0),c.memoizedState=P,c.baseQueue===null&&(c.baseState=P),f.lastRenderedState=P}return[P,y]}function rp(){}function Ch(a,c){var f=sn,y=To(),T=c(),P=!hn(y.memoizedState,T);if(P&&(y.memoizedState=T,Uo=!0),y=y.queue,nd(ip.bind(null,f,y,a),[a]),y.getSnapshot!==c||P||kn!==null&&kn.memoizedState.tag&1){if(f.flags|=2048,Ao(9,kh.bind(null,f,y,T,c),void 0,null),Ii===null)throw Error(t(349));(Ls&30)!==0||np(f,c,T)}return T}function np(a,c,f){a.flags|=16384,a={getSnapshot:c,value:f},c=sn.updateQueue,c===null?(c={lastEffect:null,stores:null},sn.updateQueue=c,c.stores=[a]):(f=c.stores,f===null?c.stores=[a]:f.push(a))}function kh(a,c,f,y){c.value=f,c.getSnapshot=y,Ql(c)&&td(a)}function ip(a,c,f){return f(function(){Ql(c)&&td(a)})}function Ql(a){var c=a.getSnapshot;a=a.value;try{var f=c();return!hn(a,f)}catch{return!0}}function td(a){var c=Ur(a,1);c!==null&&ua(c,a,1,-1)}function Yc(a){var c=us();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jc,lastRenderedState:a},c.queue=a,a=a.dispatch=W4.bind(null,sn,a),[c.memoizedState,a]}function Ao(a,c,f,y){return a={tag:a,create:c,destroy:f,deps:y,next:null},c=sn.updateQueue,c===null?(c={lastEffect:null,stores:null},sn.updateQueue=c,c.lastEffect=a.next=a):(f=c.lastEffect,f===null?c.lastEffect=a.next=a:(y=f.next,f.next=a,a.next=y,c.lastEffect=a)),a}function sa(){return To().memoizedState}function ds(a,c,f,y){var T=us();sn.flags|=a,T.memoizedState=Ao(1|c,f,void 0,y===void 0?null:y)}function gl(a,c,f,y){var T=To();y=y===void 0?null:y;var P=void 0;if(Nn!==null){var K=Nn.memoizedState;if(P=K.destroy,y!==null&&Zu(y,K.deps)){T.memoizedState=Ao(c,f,P,y);return}}sn.flags|=a,T.memoizedState=Ao(1|c,f,P,y)}function rd(a,c){return ds(8390656,8,a,c)}function nd(a,c){return gl(2048,8,a,c)}function op(a,c){return gl(4,2,a,c)}function id(a,c){return gl(4,4,a,c)}function od(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function d2(a,c,f){return f=f!=null?f.concat([a]):null,gl(4,4,od.bind(null,c,a),f)}function P0(){}function h2(a,c){var f=To();c=c===void 0?null:c;var y=f.memoizedState;return y!==null&&c!==null&&Zu(c,y[1])?y[0]:(f.memoizedState=[a,c],a)}function f2(a,c){var f=To();c=c===void 0?null:c;var y=f.memoizedState;return y!==null&&c!==null&&Zu(c,y[1])?y[0]:(a=a(),f.memoizedState=[a,c],a)}function p2(a,c,f){return(Ls&21)===0?(a.baseState&&(a.baseState=!1,Uo=!0),a.memoizedState=f):(hn(f,c)||(f=Qa(),sn.lanes|=f,Qc|=f,a.baseState=!0),c)}function M4(a,c){var f=or;or=f!==0&&4>f?f:4,a(!0);var y=Xu.transition;Xu.transition={};try{a(!1),c()}finally{or=f,Xu.transition=y}}function m2(){return To().memoizedState}function D4(a,c,f){var y=tc(a);if(f={lane:y,action:f,hasEagerState:!1,eagerState:null,next:null},g2(a))y2(c,f);else if(f=Fr(a,c,f,y),f!==null){var T=ko();ua(f,a,y,T),x2(f,c,y)}}function W4(a,c,f){var y=tc(a),T={lane:y,action:f,hasEagerState:!1,eagerState:null,next:null};if(g2(a))y2(c,T);else{var P=a.alternate;if(a.lanes===0&&(P===null||P.lanes===0)&&(P=c.lastRenderedReducer,P!==null))try{var K=c.lastRenderedState,pe=P(K,f);if(T.hasEagerState=!0,T.eagerState=pe,hn(pe,K)){var Se=c.interleaved;Se===null?(T.next=T,Ai(c)):(T.next=Se.next,Se.next=T),c.interleaved=T;return}}catch{}finally{}f=Fr(a,c,T,y),f!==null&&(T=ko(),ua(f,a,y,T),x2(f,c,y))}}function g2(a){var c=a.alternate;return a===sn||c!==null&&c===sn}function y2(a,c){oa=Jl=!0;var f=a.pending;f===null?c.next=c:(c.next=f.next,f.next=c),a.pending=c}function x2(a,c,f){if((f&4194240)!==0){var y=c.lanes;y&=a.pendingLanes,f|=y,c.lanes=f,Sa(a,f)}}var sp={readContext:gn,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useInsertionEffect:qn,useLayoutEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useMutableSource:qn,useSyncExternalStore:qn,useId:qn,unstable_isNewReconciler:!1},$4={readContext:gn,useCallback:function(a,c){return us().memoizedState=[a,c===void 0?null:c],a},useContext:gn,useEffect:rd,useImperativeHandle:function(a,c,f){return f=f!=null?f.concat([a]):null,ds(4194308,4,od.bind(null,c,a),f)},useLayoutEffect:function(a,c){return ds(4194308,4,a,c)},useInsertionEffect:function(a,c){return ds(4,2,a,c)},useMemo:function(a,c){var f=us();return c=c===void 0?null:c,a=a(),f.memoizedState=[a,c],a},useReducer:function(a,c,f){var y=us();return c=f!==void 0?f(c):c,y.memoizedState=y.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},y.queue=a,a=a.dispatch=D4.bind(null,sn,a),[y.memoizedState,a]},useRef:function(a){var c=us();return a={current:a},c.memoizedState=a},useState:Yc,useDebugValue:P0,useDeferredValue:function(a){return us().memoizedState=a},useTransition:function(){var a=Yc(!1),c=a[0];return a=M4.bind(null,a[1]),us().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,f){var y=sn,T=us();if($e){if(f===void 0)throw Error(t(407));f=f()}else{if(f=c(),Ii===null)throw Error(t(349));(Ls&30)!==0||np(y,c,f)}T.memoizedState=f;var P={value:f,getSnapshot:c};return T.queue=P,rd(ip.bind(null,y,P,a),[a]),y.flags|=2048,Ao(9,kh.bind(null,y,P,f,c),void 0,null),f},useId:function(){var a=us(),c=Ii.identifierPrefix;if($e){var f=le,y=Ee;f=(y&~(1<<32-Qn(y)-1)).toString(32)+f,c=":"+c+"R"+f,f=Yl++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=R0++,c=":"+c+"r"+f.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},U4={readContext:gn,useCallback:h2,useContext:gn,useEffect:nd,useImperativeHandle:d2,useInsertionEffect:op,useLayoutEffect:id,useMemo:f2,useReducer:ed,useRef:sa,useState:function(){return ed(Jc)},useDebugValue:P0,useDeferredValue:function(a){var c=To();return p2(c,Nn.memoizedState,a)},useTransition:function(){var a=ed(Jc)[0],c=To().memoizedState;return[a,c]},useMutableSource:rp,useSyncExternalStore:Ch,useId:m2,unstable_isNewReconciler:!1},q4={readContext:gn,useCallback:h2,useContext:gn,useEffect:nd,useImperativeHandle:d2,useInsertionEffect:op,useLayoutEffect:id,useMemo:f2,useReducer:Fa,useRef:sa,useState:function(){return Fa(Jc)},useDebugValue:P0,useDeferredValue:function(a){var c=To();return Nn===null?c.memoizedState=a:p2(c,Nn.memoizedState,a)},useTransition:function(){var a=Fa(Jc)[0],c=To().memoizedState;return[a,c]},useMutableSource:rp,useSyncExternalStore:Ch,useId:m2,unstable_isNewReconciler:!1};function aa(a,c){if(a&&a.defaultProps){c=be({},c),a=a.defaultProps;for(var f in a)c[f]===void 0&&(c[f]=a[f]);return c}return c}function N0(a,c,f,y){c=a.memoizedState,f=f(y,c),f=f==null?c:be({},c,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var ap={isMounted:function(a){return(a=a._reactInternals)?bn(a)===a:!1},enqueueSetState:function(a,c,f){a=a._reactInternals;var y=ko(),T=tc(a),P=Tn(y,T);P.payload=c,f!=null&&(P.callback=f),c=An(a,P,T),c!==null&&(ua(c,a,T,y),Ci(c,a,T))},enqueueReplaceState:function(a,c,f){a=a._reactInternals;var y=ko(),T=tc(a),P=Tn(y,T);P.tag=1,P.payload=c,f!=null&&(P.callback=f),c=An(a,P,T),c!==null&&(ua(c,a,T,y),Ci(c,a,T))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var f=ko(),y=tc(a),T=Tn(f,y);T.tag=2,c!=null&&(T.callback=c),c=An(a,T,y),c!==null&&(ua(c,a,y,f),Ci(c,a,y))}};function v2(a,c,f,y,T,P,K){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,P,K):c.prototype&&c.prototype.isPureReactComponent?!Xi(f,y)||!Xi(T,P):!0}function b2(a,c,f){var y=!1,T=Ba,P=c.contextType;return typeof P=="object"&&P!==null?P=gn(P):(T=ro(c)?pl:ci.current,y=c.contextTypes,P=(y=y!=null)?Gl(a,T):Ba),c=new c(f,P),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=ap,a.stateNode=c,c._reactInternals=a,y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=T,a.__reactInternalMemoizedMaskedChildContext=P),c}function w2(a,c,f,y){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,y),c.state!==a&&ap.enqueueReplaceState(c,c.state,null)}function B0(a,c,f,y){var T=a.stateNode;T.props=f,T.state=a.memoizedState,T.refs={},ui(a);var P=c.contextType;typeof P=="object"&&P!==null?T.context=gn(P):(P=ro(c)?pl:ci.current,T.context=Gl(a,P)),T.state=a.memoizedState,P=c.getDerivedStateFromProps,typeof P=="function"&&(N0(a,c,P,f),T.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(c=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),c!==T.state&&ap.enqueueReplaceState(T,T.state,null),ki(a,f,T,y),T.state=a.memoizedState),typeof T.componentDidMount=="function"&&(a.flags|=4194308)}function sd(a,c){try{var f="",y=c;do f+=fe(y),y=y.return;while(y);var T=f}catch(P){T=`
Error generating stack: `+P.message+`
`+P.stack}return{value:a,source:c,stack:T,digest:null}}function L0(a,c,f){return{value:a,source:null,stack:f??null,digest:c??null}}function F0(a,c){try{console.error(c.value)}catch(f){setTimeout(function(){throw f})}}var H4=typeof WeakMap=="function"?WeakMap:Map;function S2(a,c,f){f=Tn(-1,f),f.tag=3,f.payload={element:null};var y=c.value;return f.callback=function(){pp||(pp=!0,Q0=y),F0(a,c)},f}function _2(a,c,f){f=Tn(-1,f),f.tag=3;var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var T=c.value;f.payload=function(){return y(T)},f.callback=function(){F0(a,c)}}var P=a.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(f.callback=function(){F0(a,c),typeof y!="function"&&(Zl===null?Zl=new Set([this]):Zl.add(this));var K=c.stack;this.componentDidCatch(c.value,{componentStack:K!==null?K:""})}),f}function T2(a,c,f){var y=a.pingCache;if(y===null){y=a.pingCache=new H4;var T=new Set;y.set(c,T)}else T=y.get(c),T===void 0&&(T=new Set,y.set(c,T));T.has(f)||(T.add(f),a=sT.bind(null,a,c,f),c.then(a,a))}function A2(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function C2(a,c,f,y,T){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(c=Tn(-1,1),c.tag=2,An(f,c,1))),f.lanes|=1),a):(a.flags|=65536,a.lanes=T,a)}var G4=F.ReactCurrentOwner,Uo=!1;function Co(a,c,f,y){c.child=a===null?an(c,null,f,y):Rn(c,a.child,f,y)}function k2(a,c,f,y,T){f=f.render;var P=c.ref;return mn(c,T),y=Kc(a,c,f,y,P,T),f=Fs(),a!==null&&!Uo?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~T,yl(a,c,T)):($e&&f&&Me(c),c.flags|=1,Co(a,c,y,T),c.child)}function I2(a,c,f,y,T){if(a===null){var P=f.type;return typeof P=="function"&&!ig(P)&&P.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(c.tag=15,c.type=P,E2(a,c,P,y,T)):(a=bp(f.type,null,y,c,c.mode,T),a.ref=c.ref,a.return=c,c.child=a)}if(P=a.child,(a.lanes&T)===0){var K=P.memoizedProps;if(f=f.compare,f=f!==null?f:Xi,f(K,y)&&a.ref===c.ref)return yl(a,c,T)}return c.flags|=1,a=nc(P,y),a.ref=c.ref,a.return=c,c.child=a}function E2(a,c,f,y,T){if(a!==null){var P=a.memoizedProps;if(Xi(P,y)&&a.ref===c.ref)if(Uo=!1,c.pendingProps=y=P,(a.lanes&T)!==0)(a.flags&131072)!==0&&(Uo=!0);else return c.lanes=a.lanes,yl(a,c,T)}return z0(a,c,f,y,T)}function j2(a,c,f){var y=c.pendingProps,T=y.children,P=a!==null?a.memoizedState:null;if(y.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lr(ld,hs),hs|=f;else{if((f&1073741824)===0)return a=P!==null?P.baseLanes|f:f,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,Lr(ld,hs),hs|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=P!==null?P.baseLanes:f,Lr(ld,hs),hs|=y}else P!==null?(y=P.baseLanes|f,c.memoizedState=null):y=f,Lr(ld,hs),hs|=y;return Co(a,c,T,f),c.child}function R2(a,c){var f=c.ref;(a===null&&f!==null||a!==null&&a.ref!==f)&&(c.flags|=512,c.flags|=2097152)}function z0(a,c,f,y,T){var P=ro(f)?pl:ci.current;return P=Gl(c,P),mn(c,T),f=Kc(a,c,f,y,P,T),y=Fs(),a!==null&&!Uo?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~T,yl(a,c,T)):($e&&y&&Me(c),c.flags|=1,Co(a,c,f,T),c.child)}function P2(a,c,f,y,T){if(ro(f)){var P=!0;ml(c)}else P=!1;if(mn(c,T),c.stateNode===null)cp(a,c),b2(c,f,y),B0(c,f,y,T),y=!0;else if(a===null){var K=c.stateNode,pe=c.memoizedProps;K.props=pe;var Se=K.context,Fe=f.contextType;typeof Fe=="object"&&Fe!==null?Fe=gn(Fe):(Fe=ro(f)?pl:ci.current,Fe=Gl(c,Fe));var Je=f.getDerivedStateFromProps,Ye=typeof Je=="function"||typeof K.getSnapshotBeforeUpdate=="function";Ye||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(pe!==y||Se!==Fe)&&w2(c,K,y,Fe),Pn=!1;var Ke=c.memoizedState;K.state=Ke,ki(c,y,K,T),Se=c.memoizedState,pe!==y||Ke!==Se||to.current||Pn?(typeof Je=="function"&&(N0(c,f,Je,y),Se=c.memoizedState),(pe=Pn||v2(c,f,pe,y,Ke,Se,Fe))?(Ye||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(c.flags|=4194308)):(typeof K.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=Se),K.props=y,K.state=Se,K.context=Fe,y=pe):(typeof K.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{K=c.stateNode,no(a,c),pe=c.memoizedProps,Fe=c.type===c.elementType?pe:aa(c.type,pe),K.props=Fe,Ye=c.pendingProps,Ke=K.context,Se=f.contextType,typeof Se=="object"&&Se!==null?Se=gn(Se):(Se=ro(f)?pl:ci.current,Se=Gl(c,Se));var at=f.getDerivedStateFromProps;(Je=typeof at=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(pe!==Ye||Ke!==Se)&&w2(c,K,y,Se),Pn=!1,Ke=c.memoizedState,K.state=Ke,ki(c,y,K,T);var gt=c.memoizedState;pe!==Ye||Ke!==gt||to.current||Pn?(typeof at=="function"&&(N0(c,f,at,y),gt=c.memoizedState),(Fe=Pn||v2(c,f,Fe,y,Ke,gt,Se)||!1)?(Je||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(y,gt,Se),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(y,gt,Se)),typeof K.componentDidUpdate=="function"&&(c.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof K.componentDidUpdate!="function"||pe===a.memoizedProps&&Ke===a.memoizedState||(c.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||pe===a.memoizedProps&&Ke===a.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=gt),K.props=y,K.state=gt,K.context=Se,y=Fe):(typeof K.componentDidUpdate!="function"||pe===a.memoizedProps&&Ke===a.memoizedState||(c.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||pe===a.memoizedProps&&Ke===a.memoizedState||(c.flags|=1024),y=!1)}return V0(a,c,f,y,P,T)}function V0(a,c,f,y,T,P){R2(a,c);var K=(c.flags&128)!==0;if(!y&&!K)return T&&ep(c,f,!1),yl(a,c,P);y=c.stateNode,G4.current=c;var pe=K&&typeof f.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,a!==null&&K?(c.child=Rn(c,a.child,null,P),c.child=Rn(c,null,pe,P)):Co(a,c,pe,P),c.memoizedState=y.state,T&&ep(c,f,!0),c.child}function N2(a){var c=a.stateNode;c.pendingContext?Zf(a,c.pendingContext,c.pendingContext!==c.context):c.context&&Zf(a,c.context,!1),Kl(a,c.containerInfo)}function B2(a,c,f,y,T){return ut(),nt(T),c.flags|=256,Co(a,c,f,y),c.child}var O0={dehydrated:null,treeContext:null,retryLane:0};function M0(a){return{baseLanes:a,cachePool:null,transitions:null}}function L2(a,c,f){var y=c.pendingProps,T=tn.current,P=!1,K=(c.flags&128)!==0,pe;if((pe=K)||(pe=a!==null&&a.memoizedState===null?!1:(T&2)!==0),pe?(P=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(T|=1),Lr(tn,T&1),a===null)return ft(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(K=y.children,a=y.fallback,P?(y=c.mode,P=c.child,K={mode:"hidden",children:K},(y&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=K):P=wp(K,y,0,null),a=tu(a,y,f,null),P.return=c,a.return=c,P.sibling=a,c.child=P,c.child.memoizedState=M0(f),c.memoizedState=O0,a):D0(c,K));if(T=a.memoizedState,T!==null&&(pe=T.dehydrated,pe!==null))return K4(a,c,K,y,pe,T,f);if(P){P=y.fallback,K=c.mode,T=a.child,pe=T.sibling;var Se={mode:"hidden",children:y.children};return(K&1)===0&&c.child!==T?(y=c.child,y.childLanes=0,y.pendingProps=Se,c.deletions=null):(y=nc(T,Se),y.subtreeFlags=T.subtreeFlags&14680064),pe!==null?P=nc(pe,P):(P=tu(P,K,f,null),P.flags|=2),P.return=c,y.return=c,y.sibling=P,c.child=y,y=P,P=c.child,K=a.child.memoizedState,K=K===null?M0(f):{baseLanes:K.baseLanes|f,cachePool:null,transitions:K.transitions},P.memoizedState=K,P.childLanes=a.childLanes&~f,c.memoizedState=O0,y}return P=a.child,a=P.sibling,y=nc(P,{mode:"visible",children:y.children}),(c.mode&1)===0&&(y.lanes=f),y.return=c,y.sibling=null,a!==null&&(f=c.deletions,f===null?(c.deletions=[a],c.flags|=16):f.push(a)),c.child=y,c.memoizedState=null,y}function D0(a,c){return c=wp({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function lp(a,c,f,y){return y!==null&&nt(y),Rn(c,a.child,null,f),a=D0(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function K4(a,c,f,y,T,P,K){if(f)return c.flags&256?(c.flags&=-257,y=L0(Error(t(422))),lp(a,c,K,y)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(P=y.fallback,T=c.mode,y=wp({mode:"visible",children:y.children},T,0,null),P=tu(P,T,K,null),P.flags|=2,y.return=c,P.return=c,y.sibling=P,c.child=y,(c.mode&1)!==0&&Rn(c,a.child,null,K),c.child.memoizedState=M0(K),c.memoizedState=O0,P);if((c.mode&1)===0)return lp(a,c,K,null);if(T.data==="$!"){if(y=T.nextSibling&&T.nextSibling.dataset,y)var pe=y.dgst;return y=pe,P=Error(t(419)),y=L0(P,y,void 0),lp(a,c,K,y)}if(pe=(K&a.childLanes)!==0,Uo||pe){if(y=Ii,y!==null){switch(K&-K){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(y.suspendedLanes|K))!==0?0:T,T!==0&&T!==P.retryLane&&(P.retryLane=T,Ur(a,T),ua(y,a,T,-1))}return ng(),y=L0(Error(t(421))),lp(a,c,K,y)}return T.data==="$?"?(c.flags|=128,c.child=a.child,c=aT.bind(null,a),T._reactRetry=c,null):(a=P.treeContext,Oe=Mi(T.nextSibling),Ve=c,$e=!0,qe=null,a!==null&&(te[ae++]=Ee,te[ae++]=le,te[ae++]=we,Ee=a.id,le=a.overflow,we=c),c=D0(c,y.children),c.flags|=4096,c)}function F2(a,c,f){a.lanes|=c;var y=a.alternate;y!==null&&(y.lanes|=c),Tr(a.return,c,f)}function W0(a,c,f,y,T){var P=a.memoizedState;P===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:f,tailMode:T}:(P.isBackwards=c,P.rendering=null,P.renderingStartTime=0,P.last=y,P.tail=f,P.tailMode=T)}function z2(a,c,f){var y=c.pendingProps,T=y.revealOrder,P=y.tail;if(Co(a,c,y.children,f),y=tn.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&F2(a,f,c);else if(a.tag===19)F2(a,f,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}if(Lr(tn,y),(c.mode&1)===0)c.memoizedState=null;else switch(T){case"forwards":for(f=c.child,T=null;f!==null;)a=f.alternate,a!==null&&cs(a)===null&&(T=f),f=f.sibling;f=T,f===null?(T=c.child,c.child=null):(T=f.sibling,f.sibling=null),W0(c,!1,T,f,P);break;case"backwards":for(f=null,T=c.child,c.child=null;T!==null;){if(a=T.alternate,a!==null&&cs(a)===null){c.child=T;break}a=T.sibling,T.sibling=f,f=T,T=a}W0(c,!0,f,null,P);break;case"together":W0(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function cp(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function yl(a,c,f){if(a!==null&&(c.dependencies=a.dependencies),Qc|=c.lanes,(f&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(t(153));if(c.child!==null){for(a=c.child,f=nc(a,a.pendingProps),c.child=f,f.return=c;a.sibling!==null;)a=a.sibling,f=f.sibling=nc(a,a.pendingProps),f.return=c;f.sibling=null}return c.child}function J4(a,c,f){switch(c.tag){case 3:N2(c),ut();break;case 5:tp(c);break;case 1:ro(c.type)&&ml(c);break;case 4:Kl(c,c.stateNode.containerInfo);break;case 10:var y=c.type._context,T=c.memoizedProps.value;Lr(Un,y._currentValue),y._currentValue=T;break;case 13:if(y=c.memoizedState,y!==null)return y.dehydrated!==null?(Lr(tn,tn.current&1),c.flags|=128,null):(f&c.child.childLanes)!==0?L2(a,c,f):(Lr(tn,tn.current&1),a=yl(a,c,f),a!==null?a.sibling:null);Lr(tn,tn.current&1);break;case 19:if(y=(f&c.childLanes)!==0,(a.flags&128)!==0){if(y)return z2(a,c,f);c.flags|=128}if(T=c.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Lr(tn,tn.current),y)break;return null;case 22:case 23:return c.lanes=0,j2(a,c,f)}return yl(a,c,f)}var V2,$0,O2,M2;V2=function(a,c){for(var f=c.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},$0=function(){},O2=function(a,c,f,y){var T=a.memoizedProps;if(T!==y){a=c.stateNode,ia(ti.current);var P=null;switch(f){case"input":T=ze(a,T),y=ze(a,y),P=[];break;case"select":T=be({},T,{value:void 0}),y=be({},y,{value:void 0}),P=[];break;case"textarea":T=Jt(a,T),y=Jt(a,y),P=[];break;default:typeof T.onClick!="function"&&typeof y.onClick=="function"&&(a.onclick=Ul)}sr(f,y);var K;f=null;for(Fe in T)if(!y.hasOwnProperty(Fe)&&T.hasOwnProperty(Fe)&&T[Fe]!=null)if(Fe==="style"){var pe=T[Fe];for(K in pe)pe.hasOwnProperty(K)&&(f||(f={}),f[K]="")}else Fe!=="dangerouslySetInnerHTML"&&Fe!=="children"&&Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&Fe!=="autoFocus"&&(i.hasOwnProperty(Fe)?P||(P=[]):(P=P||[]).push(Fe,null));for(Fe in y){var Se=y[Fe];if(pe=T!=null?T[Fe]:void 0,y.hasOwnProperty(Fe)&&Se!==pe&&(Se!=null||pe!=null))if(Fe==="style")if(pe){for(K in pe)!pe.hasOwnProperty(K)||Se&&Se.hasOwnProperty(K)||(f||(f={}),f[K]="");for(K in Se)Se.hasOwnProperty(K)&&pe[K]!==Se[K]&&(f||(f={}),f[K]=Se[K])}else f||(P||(P=[]),P.push(Fe,f)),f=Se;else Fe==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,pe=pe?pe.__html:void 0,Se!=null&&pe!==Se&&(P=P||[]).push(Fe,Se)):Fe==="children"?typeof Se!="string"&&typeof Se!="number"||(P=P||[]).push(Fe,""+Se):Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&(i.hasOwnProperty(Fe)?(Se!=null&&Fe==="onScroll"&&Wr("scroll",a),P||pe===Se||(P=[])):(P=P||[]).push(Fe,Se))}f&&(P=P||[]).push("style",f);var Fe=P;(c.updateQueue=Fe)&&(c.flags|=4)}},M2=function(a,c,f,y){f!==y&&(c.flags|=4)};function Ih(a,c){if(!$e)switch(a.tailMode){case"hidden":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function io(a){var c=a.alternate!==null&&a.alternate.child===a.child,f=0,y=0;if(c)for(var T=a.child;T!==null;)f|=T.lanes|T.childLanes,y|=T.subtreeFlags&14680064,y|=T.flags&14680064,T.return=a,T=T.sibling;else for(T=a.child;T!==null;)f|=T.lanes|T.childLanes,y|=T.subtreeFlags,y|=T.flags,T.return=a,T=T.sibling;return a.subtreeFlags|=y,a.childLanes=f,c}function Y4(a,c,f){var y=c.pendingProps;switch(Ne(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return io(c),null;case 1:return ro(c.type)&&Yu(),io(c),null;case 3:return y=c.stateNode,Bs(),Pr(to),Pr(ci),Ah(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(a===null||a.child===null)&&(pn(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,qe!==null&&(eg(qe),qe=null))),$0(a,c),io(c),null;case 5:_h(c);var T=ia(La.current);if(f=c.type,a!==null&&c.stateNode!=null)O2(a,c,f,y,T),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(t(166));return io(c),null}if(a=ia(ti.current),pn(c)){y=c.stateNode,f=c.type;var P=c.memoizedProps;switch(y[Ns]=c,y[ql]=P,a=(c.mode&1)!==0,f){case"dialog":Wr("cancel",y),Wr("close",y);break;case"iframe":case"object":case"embed":Wr("load",y);break;case"video":case"audio":for(T=0;T<Pa.length;T++)Wr(Pa[T],y);break;case"source":Wr("error",y);break;case"img":case"image":case"link":Wr("error",y),Wr("load",y);break;case"details":Wr("toggle",y);break;case"input":de(y,P),Wr("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!P.multiple},Wr("invalid",y);break;case"textarea":_t(y,P),Wr("invalid",y)}sr(f,P),T=null;for(var K in P)if(P.hasOwnProperty(K)){var pe=P[K];K==="children"?typeof pe=="string"?y.textContent!==pe&&(P.suppressHydrationWarning!==!0&&Ju(y.textContent,pe,a),T=["children",pe]):typeof pe=="number"&&y.textContent!==""+pe&&(P.suppressHydrationWarning!==!0&&Ju(y.textContent,pe,a),T=["children",""+pe]):i.hasOwnProperty(K)&&pe!=null&&K==="onScroll"&&Wr("scroll",y)}switch(f){case"input":Ue(y),wt(y,P,!0);break;case"textarea":Ue(y),Ft(y);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(y.onclick=Ul)}y=T,c.updateQueue=y,y!==null&&(c.flags|=4)}else{K=T.nodeType===9?T:T.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=qt(f)),a==="http://www.w3.org/1999/xhtml"?f==="script"?(a=K.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof y.is=="string"?a=K.createElement(f,{is:y.is}):(a=K.createElement(f),f==="select"&&(K=a,y.multiple?K.multiple=!0:y.size&&(K.size=y.size))):a=K.createElementNS(a,f),a[Ns]=c,a[ql]=y,V2(a,c,!1,!1),c.stateNode=a;e:{switch(K=It(f,y),f){case"dialog":Wr("cancel",a),Wr("close",a),T=y;break;case"iframe":case"object":case"embed":Wr("load",a),T=y;break;case"video":case"audio":for(T=0;T<Pa.length;T++)Wr(Pa[T],a);T=y;break;case"source":Wr("error",a),T=y;break;case"img":case"image":case"link":Wr("error",a),Wr("load",a),T=y;break;case"details":Wr("toggle",a),T=y;break;case"input":de(a,y),T=ze(a,y),Wr("invalid",a);break;case"option":T=y;break;case"select":a._wrapperState={wasMultiple:!!y.multiple},T=be({},y,{value:void 0}),Wr("invalid",a);break;case"textarea":_t(a,y),T=Jt(a,y),Wr("invalid",a);break;default:T=y}sr(f,T),pe=T;for(P in pe)if(pe.hasOwnProperty(P)){var Se=pe[P];P==="style"?ht(a,Se):P==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,Se!=null&&Tt(a,Se)):P==="children"?typeof Se=="string"?(f!=="textarea"||Se!=="")&&jt(a,Se):typeof Se=="number"&&jt(a,""+Se):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(i.hasOwnProperty(P)?Se!=null&&P==="onScroll"&&Wr("scroll",a):Se!=null&&$(a,P,Se,K))}switch(f){case"input":Ue(a),wt(a,y,!1);break;case"textarea":Ue(a),Ft(a);break;case"option":y.value!=null&&a.setAttribute("value",""+he(y.value));break;case"select":a.multiple=!!y.multiple,P=y.value,P!=null?rt(a,!!y.multiple,P,!1):y.defaultValue!=null&&rt(a,!!y.multiple,y.defaultValue,!0);break;default:typeof T.onClick=="function"&&(a.onclick=Ul)}switch(f){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return io(c),null;case 6:if(a&&c.stateNode!=null)M2(a,c,a.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(t(166));if(f=ia(La.current),ia(ti.current),pn(c)){if(y=c.stateNode,f=c.memoizedProps,y[Ns]=c,(P=y.nodeValue!==f)&&(a=Ve,a!==null))switch(a.tag){case 3:Ju(y.nodeValue,f,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Ju(y.nodeValue,f,(a.mode&1)!==0)}P&&(c.flags|=4)}else y=(f.nodeType===9?f:f.ownerDocument).createTextNode(y),y[Ns]=c,c.stateNode=y}return io(c),null;case 13:if(Pr(tn),y=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if($e&&Oe!==null&&(c.mode&1)!==0&&(c.flags&128)===0)rr(),ut(),c.flags|=98560,P=!1;else if(P=pn(c),y!==null&&y.dehydrated!==null){if(a===null){if(!P)throw Error(t(318));if(P=c.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(t(317));P[Ns]=c}else ut(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;io(c),P=!1}else qe!==null&&(eg(qe),qe=null),P=!0;if(!P)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=f,c):(y=y!==null,y!==(a!==null&&a.memoizedState!==null)&&y&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(tn.current&1)!==0?di===0&&(di=3):ng())),c.updateQueue!==null&&(c.flags|=4),io(c),null);case 4:return Bs(),$0(a,c),a===null&&ul(c.stateNode.containerInfo),io(c),null;case 10:return on(c.type._context),io(c),null;case 17:return ro(c.type)&&Yu(),io(c),null;case 19:if(Pr(tn),P=c.memoizedState,P===null)return io(c),null;if(y=(c.flags&128)!==0,K=P.rendering,K===null)if(y)Ih(P,!1);else{if(di!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(K=cs(a),K!==null){for(c.flags|=128,Ih(P,!1),y=K.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),c.subtreeFlags=0,y=f,f=c.child;f!==null;)P=f,a=y,P.flags&=14680066,K=P.alternate,K===null?(P.childLanes=0,P.lanes=a,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=K.childLanes,P.lanes=K.lanes,P.child=K.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=K.memoizedProps,P.memoizedState=K.memoizedState,P.updateQueue=K.updateQueue,P.type=K.type,a=K.dependencies,P.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),f=f.sibling;return Lr(tn,tn.current&1|2),c.child}a=a.sibling}P.tail!==null&&jr()>cd&&(c.flags|=128,y=!0,Ih(P,!1),c.lanes=4194304)}else{if(!y)if(a=cs(K),a!==null){if(c.flags|=128,y=!0,f=a.updateQueue,f!==null&&(c.updateQueue=f,c.flags|=4),Ih(P,!0),P.tail===null&&P.tailMode==="hidden"&&!K.alternate&&!$e)return io(c),null}else 2*jr()-P.renderingStartTime>cd&&f!==1073741824&&(c.flags|=128,y=!0,Ih(P,!1),c.lanes=4194304);P.isBackwards?(K.sibling=c.child,c.child=K):(f=P.last,f!==null?f.sibling=K:c.child=K,P.last=K)}return P.tail!==null?(c=P.tail,P.rendering=c,P.tail=c.sibling,P.renderingStartTime=jr(),c.sibling=null,f=tn.current,Lr(tn,y?f&1|2:f&1),c):(io(c),null);case 22:case 23:return rg(),y=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==y&&(c.flags|=8192),y&&(c.mode&1)!==0?(hs&1073741824)!==0&&(io(c),c.subtreeFlags&6&&(c.flags|=8192)):io(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function Q4(a,c){switch(Ne(c),c.tag){case 1:return ro(c.type)&&Yu(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Bs(),Pr(to),Pr(ci),Ah(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return _h(c),null;case 13:if(Pr(tn),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(t(340));ut()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return Pr(tn),null;case 4:return Bs(),null;case 10:return on(c.type._context),null;case 22:case 23:return rg(),null;case 24:return null;default:return null}}var up=!1,oo=!1,X4=typeof WeakSet=="function"?WeakSet:Set,dt=null;function ad(a,c){var f=a.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(y){Bn(a,c,y)}else f.current=null}function U0(a,c,f){try{f()}catch(y){Bn(a,c,y)}}var D2=!1;function Z4(a,c){if(qc=ts,a=jn(),ss(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var y=f.getSelection&&f.getSelection();if(y&&y.rangeCount!==0){f=y.anchorNode;var T=y.anchorOffset,P=y.focusNode;y=y.focusOffset;try{f.nodeType,P.nodeType}catch{f=null;break e}var K=0,pe=-1,Se=-1,Fe=0,Je=0,Ye=a,Ke=null;t:for(;;){for(var at;Ye!==f||T!==0&&Ye.nodeType!==3||(pe=K+T),Ye!==P||y!==0&&Ye.nodeType!==3||(Se=K+y),Ye.nodeType===3&&(K+=Ye.nodeValue.length),(at=Ye.firstChild)!==null;)Ke=Ye,Ye=at;for(;;){if(Ye===a)break t;if(Ke===f&&++Fe===T&&(pe=K),Ke===P&&++Je===y&&(Se=K),(at=Ye.nextSibling)!==null)break;Ye=Ke,Ke=Ye.parentNode}Ye=at}f=pe===-1||Se===-1?null:{start:pe,end:Se}}else f=null}f=f||{start:0,end:0}}else f=null;for(hl={focusedElem:a,selectionRange:f},ts=!1,dt=c;dt!==null;)if(c=dt,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,dt=a;else for(;dt!==null;){c=dt;try{var gt=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(gt!==null){var bt=gt.memoizedProps,Hn=gt.memoizedState,Re=c.stateNode,Ae=Re.getSnapshotBeforeUpdate(c.elementType===c.type?bt:aa(c.type,bt),Hn);Re.__reactInternalSnapshotBeforeUpdate=Ae}break;case 3:var Le=c.stateNode.containerInfo;Le.nodeType===1?Le.textContent="":Le.nodeType===9&&Le.documentElement&&Le.removeChild(Le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(et){Bn(c,c.return,et)}if(a=c.sibling,a!==null){a.return=c.return,dt=a;break}dt=c.return}return gt=D2,D2=!1,gt}function Eh(a,c,f){var y=c.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var T=y=y.next;do{if((T.tag&a)===a){var P=T.destroy;T.destroy=void 0,P!==void 0&&U0(c,f,P)}T=T.next}while(T!==y)}}function dp(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&a)===a){var y=f.create;f.destroy=y()}f=f.next}while(f!==c)}}function q0(a){var c=a.ref;if(c!==null){var f=a.stateNode;switch(a.tag){case 5:a=f;break;default:a=f}typeof c=="function"?c(a):c.current=a}}function W2(a){var c=a.alternate;c!==null&&(a.alternate=null,W2(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[Ns],delete c[ql],delete c[eo],delete c[E0],delete c[j0])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function $2(a){return a.tag===5||a.tag===3||a.tag===4}function U2(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||$2(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function H0(a,c,f){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?f.nodeType===8?f.parentNode.insertBefore(a,c):f.insertBefore(a,c):(f.nodeType===8?(c=f.parentNode,c.insertBefore(a,f)):(c=f,c.appendChild(a)),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=Ul));else if(y!==4&&(a=a.child,a!==null))for(H0(a,c,f),a=a.sibling;a!==null;)H0(a,c,f),a=a.sibling}function G0(a,c,f){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?f.insertBefore(a,c):f.appendChild(a);else if(y!==4&&(a=a.child,a!==null))for(G0(a,c,f),a=a.sibling;a!==null;)G0(a,c,f),a=a.sibling}var Di=null,la=!1;function Xl(a,c,f){for(f=f.child;f!==null;)q2(a,c,f),f=f.sibling}function q2(a,c,f){if(yi&&typeof yi.onCommitFiberUnmount=="function")try{yi.onCommitFiberUnmount(_s,f)}catch{}switch(f.tag){case 5:oo||ad(f,c);case 6:var y=Di,T=la;Di=null,Xl(a,c,f),Di=y,la=T,Di!==null&&(la?(a=Di,f=f.stateNode,a.nodeType===8?a.parentNode.removeChild(f):a.removeChild(f)):Di.removeChild(f.stateNode));break;case 18:Di!==null&&(la?(a=Di,f=f.stateNode,a.nodeType===8?bh(a.parentNode,f):a.nodeType===1&&bh(a,f),bo(a)):bh(Di,f.stateNode));break;case 4:y=Di,T=la,Di=f.stateNode.containerInfo,la=!0,Xl(a,c,f),Di=y,la=T;break;case 0:case 11:case 14:case 15:if(!oo&&(y=f.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){T=y=y.next;do{var P=T,K=P.destroy;P=P.tag,K!==void 0&&((P&2)!==0||(P&4)!==0)&&U0(f,c,K),T=T.next}while(T!==y)}Xl(a,c,f);break;case 1:if(!oo&&(ad(f,c),y=f.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=f.memoizedProps,y.state=f.memoizedState,y.componentWillUnmount()}catch(pe){Bn(f,c,pe)}Xl(a,c,f);break;case 21:Xl(a,c,f);break;case 22:f.mode&1?(oo=(y=oo)||f.memoizedState!==null,Xl(a,c,f),oo=y):Xl(a,c,f);break;default:Xl(a,c,f)}}function H2(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var f=a.stateNode;f===null&&(f=a.stateNode=new X4),c.forEach(function(y){var T=lT.bind(null,a,y);f.has(y)||(f.add(y),y.then(T,T))})}}function ca(a,c){var f=c.deletions;if(f!==null)for(var y=0;y<f.length;y++){var T=f[y];try{var P=a,K=c,pe=K;e:for(;pe!==null;){switch(pe.tag){case 5:Di=pe.stateNode,la=!1;break e;case 3:Di=pe.stateNode.containerInfo,la=!0;break e;case 4:Di=pe.stateNode.containerInfo,la=!0;break e}pe=pe.return}if(Di===null)throw Error(t(160));q2(P,K,T),Di=null,la=!1;var Se=T.alternate;Se!==null&&(Se.return=null),T.return=null}catch(Fe){Bn(T,c,Fe)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)G2(c,a),c=c.sibling}function G2(a,c){var f=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(ca(c,a),za(a),y&4){try{Eh(3,a,a.return),dp(3,a)}catch(bt){Bn(a,a.return,bt)}try{Eh(5,a,a.return)}catch(bt){Bn(a,a.return,bt)}}break;case 1:ca(c,a),za(a),y&512&&f!==null&&ad(f,f.return);break;case 5:if(ca(c,a),za(a),y&512&&f!==null&&ad(f,f.return),a.flags&32){var T=a.stateNode;try{jt(T,"")}catch(bt){Bn(a,a.return,bt)}}if(y&4&&(T=a.stateNode,T!=null)){var P=a.memoizedProps,K=f!==null?f.memoizedProps:P,pe=a.type,Se=a.updateQueue;if(a.updateQueue=null,Se!==null)try{pe==="input"&&P.type==="radio"&&P.name!=null&&Lt(T,P),It(pe,K);var Fe=It(pe,P);for(K=0;K<Se.length;K+=2){var Je=Se[K],Ye=Se[K+1];Je==="style"?ht(T,Ye):Je==="dangerouslySetInnerHTML"?Tt(T,Ye):Je==="children"?jt(T,Ye):$(T,Je,Ye,Fe)}switch(pe){case"input":Et(T,P);break;case"textarea":mr(T,P);break;case"select":var Ke=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!P.multiple;var at=P.value;at!=null?rt(T,!!P.multiple,at,!1):Ke!==!!P.multiple&&(P.defaultValue!=null?rt(T,!!P.multiple,P.defaultValue,!0):rt(T,!!P.multiple,P.multiple?[]:"",!1))}T[ql]=P}catch(bt){Bn(a,a.return,bt)}}break;case 6:if(ca(c,a),za(a),y&4){if(a.stateNode===null)throw Error(t(162));T=a.stateNode,P=a.memoizedProps;try{T.nodeValue=P}catch(bt){Bn(a,a.return,bt)}}break;case 3:if(ca(c,a),za(a),y&4&&f!==null&&f.memoizedState.isDehydrated)try{bo(c.containerInfo)}catch(bt){Bn(a,a.return,bt)}break;case 4:ca(c,a),za(a);break;case 13:ca(c,a),za(a),T=a.child,T.flags&8192&&(P=T.memoizedState!==null,T.stateNode.isHidden=P,!P||T.alternate!==null&&T.alternate.memoizedState!==null||(Y0=jr())),y&4&&H2(a);break;case 22:if(Je=f!==null&&f.memoizedState!==null,a.mode&1?(oo=(Fe=oo)||Je,ca(c,a),oo=Fe):ca(c,a),za(a),y&8192){if(Fe=a.memoizedState!==null,(a.stateNode.isHidden=Fe)&&!Je&&(a.mode&1)!==0)for(dt=a,Je=a.child;Je!==null;){for(Ye=dt=Je;dt!==null;){switch(Ke=dt,at=Ke.child,Ke.tag){case 0:case 11:case 14:case 15:Eh(4,Ke,Ke.return);break;case 1:ad(Ke,Ke.return);var gt=Ke.stateNode;if(typeof gt.componentWillUnmount=="function"){y=Ke,f=Ke.return;try{c=y,gt.props=c.memoizedProps,gt.state=c.memoizedState,gt.componentWillUnmount()}catch(bt){Bn(y,f,bt)}}break;case 5:ad(Ke,Ke.return);break;case 22:if(Ke.memoizedState!==null){Y2(Ye);continue}}at!==null?(at.return=Ke,dt=at):Y2(Ye)}Je=Je.sibling}e:for(Je=null,Ye=a;;){if(Ye.tag===5){if(Je===null){Je=Ye;try{T=Ye.stateNode,Fe?(P=T.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(pe=Ye.stateNode,Se=Ye.memoizedProps.style,K=Se!=null&&Se.hasOwnProperty("display")?Se.display:null,pe.style.display=ir("display",K))}catch(bt){Bn(a,a.return,bt)}}}else if(Ye.tag===6){if(Je===null)try{Ye.stateNode.nodeValue=Fe?"":Ye.memoizedProps}catch(bt){Bn(a,a.return,bt)}}else if((Ye.tag!==22&&Ye.tag!==23||Ye.memoizedState===null||Ye===a)&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===a)break e;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===a)break e;Je===Ye&&(Je=null),Ye=Ye.return}Je===Ye&&(Je=null),Ye.sibling.return=Ye.return,Ye=Ye.sibling}}break;case 19:ca(c,a),za(a),y&4&&H2(a);break;case 21:break;default:ca(c,a),za(a)}}function za(a){var c=a.flags;if(c&2){try{e:{for(var f=a.return;f!==null;){if($2(f)){var y=f;break e}f=f.return}throw Error(t(160))}switch(y.tag){case 5:var T=y.stateNode;y.flags&32&&(jt(T,""),y.flags&=-33);var P=U2(a);G0(a,P,T);break;case 3:case 4:var K=y.stateNode.containerInfo,pe=U2(a);H0(a,pe,K);break;default:throw Error(t(161))}}catch(Se){Bn(a,a.return,Se)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function eT(a,c,f){dt=a,K2(a)}function K2(a,c,f){for(var y=(a.mode&1)!==0;dt!==null;){var T=dt,P=T.child;if(T.tag===22&&y){var K=T.memoizedState!==null||up;if(!K){var pe=T.alternate,Se=pe!==null&&pe.memoizedState!==null||oo;pe=up;var Fe=oo;if(up=K,(oo=Se)&&!Fe)for(dt=T;dt!==null;)K=dt,Se=K.child,K.tag===22&&K.memoizedState!==null?Q2(T):Se!==null?(Se.return=K,dt=Se):Q2(T);for(;P!==null;)dt=P,K2(P),P=P.sibling;dt=T,up=pe,oo=Fe}J2(a)}else(T.subtreeFlags&8772)!==0&&P!==null?(P.return=T,dt=P):J2(a)}}function J2(a){for(;dt!==null;){var c=dt;if((c.flags&8772)!==0){var f=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:oo||dp(5,c);break;case 1:var y=c.stateNode;if(c.flags&4&&!oo)if(f===null)y.componentDidMount();else{var T=c.elementType===c.type?f.memoizedProps:aa(c.type,f.memoizedProps);y.componentDidUpdate(T,f.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var P=c.updateQueue;P!==null&&$o(c,P,y);break;case 3:var K=c.updateQueue;if(K!==null){if(f=null,c.child!==null)switch(c.child.tag){case 5:f=c.child.stateNode;break;case 1:f=c.child.stateNode}$o(c,K,f)}break;case 5:var pe=c.stateNode;if(f===null&&c.flags&4){f=pe;var Se=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Se.autoFocus&&f.focus();break;case"img":Se.src&&(f.src=Se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var Fe=c.alternate;if(Fe!==null){var Je=Fe.memoizedState;if(Je!==null){var Ye=Je.dehydrated;Ye!==null&&bo(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}oo||c.flags&512&&q0(c)}catch(Ke){Bn(c,c.return,Ke)}}if(c===a){dt=null;break}if(f=c.sibling,f!==null){f.return=c.return,dt=f;break}dt=c.return}}function Y2(a){for(;dt!==null;){var c=dt;if(c===a){dt=null;break}var f=c.sibling;if(f!==null){f.return=c.return,dt=f;break}dt=c.return}}function Q2(a){for(;dt!==null;){var c=dt;try{switch(c.tag){case 0:case 11:case 15:var f=c.return;try{dp(4,c)}catch(Se){Bn(c,f,Se)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var T=c.return;try{y.componentDidMount()}catch(Se){Bn(c,T,Se)}}var P=c.return;try{q0(c)}catch(Se){Bn(c,P,Se)}break;case 5:var K=c.return;try{q0(c)}catch(Se){Bn(c,K,Se)}}}catch(Se){Bn(c,c.return,Se)}if(c===a){dt=null;break}var pe=c.sibling;if(pe!==null){pe.return=c.return,dt=pe;break}dt=c.return}}var tT=Math.ceil,hp=F.ReactCurrentDispatcher,K0=F.ReactCurrentOwner,zs=F.ReactCurrentBatchConfig,Ar=0,Ii=null,ri=null,Wi=0,hs=0,ld=as(0),di=0,jh=null,Qc=0,fp=0,J0=0,Rh=null,qo=null,Y0=0,cd=1/0,xl=null,pp=!1,Q0=null,Zl=null,mp=!1,ec=null,gp=0,Ph=0,X0=null,yp=-1,xp=0;function ko(){return(Ar&6)!==0?jr():yp!==-1?yp:yp=jr()}function tc(a){return(a.mode&1)===0?1:(Ar&2)!==0&&Wi!==0?Wi&-Wi:_n.transition!==null?(xp===0&&(xp=Qa()),xp):(a=or,a!==0||(a=window.event,a=a===void 0?16:ns(a.type)),a)}function ua(a,c,f,y){if(50<Ph)throw Ph=0,X0=null,Error(t(185));Hs(a,f,y),((Ar&2)===0||a!==Ii)&&(a===Ii&&((Ar&2)===0&&(fp|=f),di===4&&rc(a,Wi)),Ho(a,y),f===1&&Ar===0&&(c.mode&1)===0&&(cd=jr()+500,Gc&&z()))}function Ho(a,c){var f=a.callbackNode;Or(a,c);var y=Mn(a,a===Ii?Wi:0);if(y===0)f!==null&&Qo(f),a.callbackNode=null,a.callbackPriority=0;else if(c=y&-y,a.callbackPriority!==c){if(f!=null&&Qo(f),c===1)a.tag===0?j(Z2.bind(null,a)):x(Z2.bind(null,a)),k0(function(){(Ar&6)===0&&z()}),f=null;else{switch(ai(y)){case 1:f=Us;break;case 4:f=gi;break;case 16:f=Zo;break;case 536870912:f=Ss;break;default:f=Zo}f=ay(f,X2.bind(null,a))}a.callbackPriority=c,a.callbackNode=f}}function X2(a,c){if(yp=-1,xp=0,(Ar&6)!==0)throw Error(t(327));var f=a.callbackNode;if(ud()&&a.callbackNode!==f)return null;var y=Mn(a,a===Ii?Wi:0);if(y===0)return null;if((y&30)!==0||(y&a.expiredLanes)!==0||c)c=vp(a,y);else{c=y;var T=Ar;Ar|=2;var P=ty();(Ii!==a||Wi!==c)&&(xl=null,cd=jr()+500,Zc(a,c));do try{iT();break}catch(pe){ey(a,pe)}while(!0);_r(),hp.current=P,Ar=T,ri!==null?c=0:(Ii=null,Wi=0,c=di)}if(c!==0){if(c===2&&(T=qs(a),T!==0&&(y=T,c=Z0(a,T))),c===1)throw f=jh,Zc(a,0),rc(a,y),Ho(a,jr()),f;if(c===6)rc(a,y);else{if(T=a.current.alternate,(y&30)===0&&!rT(T)&&(c=vp(a,y),c===2&&(P=qs(a),P!==0&&(y=P,c=Z0(a,P))),c===1))throw f=jh,Zc(a,0),rc(a,y),Ho(a,jr()),f;switch(a.finishedWork=T,a.finishedLanes=y,c){case 0:case 1:throw Error(t(345));case 2:eu(a,qo,xl);break;case 3:if(rc(a,y),(y&130023424)===y&&(c=Y0+500-jr(),10<c)){if(Mn(a,0)!==0)break;if(T=a.suspendedLanes,(T&y)!==y){ko(),a.pingedLanes|=a.suspendedLanes&T;break}a.timeoutHandle=vh(eu.bind(null,a,qo,xl),c);break}eu(a,qo,xl);break;case 4:if(rc(a,y),(y&4194240)===y)break;for(c=a.eventTimes,T=-1;0<y;){var K=31-Qn(y);P=1<<K,K=c[K],K>T&&(T=K),y&=~P}if(y=T,y=jr()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*tT(y/1960))-y,10<y){a.timeoutHandle=vh(eu.bind(null,a,qo,xl),y);break}eu(a,qo,xl);break;case 5:eu(a,qo,xl);break;default:throw Error(t(329))}}}return Ho(a,jr()),a.callbackNode===f?X2.bind(null,a):null}function Z0(a,c){var f=Rh;return a.current.memoizedState.isDehydrated&&(Zc(a,c).flags|=256),a=vp(a,c),a!==2&&(c=qo,qo=f,c!==null&&eg(c)),a}function eg(a){qo===null?qo=a:qo.push.apply(qo,a)}function rT(a){for(var c=a;;){if(c.flags&16384){var f=c.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var y=0;y<f.length;y++){var T=f[y],P=T.getSnapshot;T=T.value;try{if(!hn(P(),T))return!1}catch{return!1}}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function rc(a,c){for(c&=~J0,c&=~fp,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var f=31-Qn(c),y=1<<f;a[f]=-1,c&=~y}}function Z2(a){if((Ar&6)!==0)throw Error(t(327));ud();var c=Mn(a,0);if((c&1)===0)return Ho(a,jr()),null;var f=vp(a,c);if(a.tag!==0&&f===2){var y=qs(a);y!==0&&(c=y,f=Z0(a,y))}if(f===1)throw f=jh,Zc(a,0),rc(a,c),Ho(a,jr()),f;if(f===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,eu(a,qo,xl),Ho(a,jr()),null}function tg(a,c){var f=Ar;Ar|=1;try{return a(c)}finally{Ar=f,Ar===0&&(cd=jr()+500,Gc&&z())}}function Xc(a){ec!==null&&ec.tag===0&&(Ar&6)===0&&ud();var c=Ar;Ar|=1;var f=zs.transition,y=or;try{if(zs.transition=null,or=1,a)return a()}finally{or=y,zs.transition=f,Ar=c,(Ar&6)===0&&z()}}function rg(){hs=ld.current,Pr(ld)}function Zc(a,c){a.finishedWork=null,a.finishedLanes=0;var f=a.timeoutHandle;if(f!==-1&&(a.timeoutHandle=-1,Qf(f)),ri!==null)for(f=ri.return;f!==null;){var y=f;switch(Ne(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Yu();break;case 3:Bs(),Pr(to),Pr(ci),Ah();break;case 5:_h(y);break;case 4:Bs();break;case 13:Pr(tn);break;case 19:Pr(tn);break;case 10:on(y.type._context);break;case 22:case 23:rg()}f=f.return}if(Ii=a,ri=a=nc(a.current,null),Wi=hs=c,di=0,jh=null,J0=fp=Qc=0,qo=Rh=null,$r!==null){for(c=0;c<$r.length;c++)if(f=$r[c],y=f.interleaved,y!==null){f.interleaved=null;var T=y.next,P=f.pending;if(P!==null){var K=P.next;P.next=T,y.next=K}f.pending=y}$r=null}return a}function ey(a,c){do{var f=ri;try{if(_r(),Qu.current=sp,Jl){for(var y=sn.memoizedState;y!==null;){var T=y.queue;T!==null&&(T.pending=null),y=y.next}Jl=!1}if(Ls=0,kn=Nn=sn=null,oa=!1,Yl=0,K0.current=null,f===null||f.return===null){di=1,jh=c,ri=null;break}e:{var P=a,K=f.return,pe=f,Se=c;if(c=Wi,pe.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var Fe=Se,Je=pe,Ye=Je.tag;if((Je.mode&1)===0&&(Ye===0||Ye===11||Ye===15)){var Ke=Je.alternate;Ke?(Je.updateQueue=Ke.updateQueue,Je.memoizedState=Ke.memoizedState,Je.lanes=Ke.lanes):(Je.updateQueue=null,Je.memoizedState=null)}var at=A2(K);if(at!==null){at.flags&=-257,C2(at,K,pe,P,c),at.mode&1&&T2(P,Fe,c),c=at,Se=Fe;var gt=c.updateQueue;if(gt===null){var bt=new Set;bt.add(Se),c.updateQueue=bt}else gt.add(Se);break e}else{if((c&1)===0){T2(P,Fe,c),ng();break e}Se=Error(t(426))}}else if($e&&pe.mode&1){var Hn=A2(K);if(Hn!==null){(Hn.flags&65536)===0&&(Hn.flags|=256),C2(Hn,K,pe,P,c),nt(sd(Se,pe));break e}}P=Se=sd(Se,pe),di!==4&&(di=2),Rh===null?Rh=[P]:Rh.push(P),P=K;do{switch(P.tag){case 3:P.flags|=65536,c&=-c,P.lanes|=c;var Re=S2(P,Se,c);qr(P,Re);break e;case 1:pe=Se;var Ae=P.type,Le=P.stateNode;if((P.flags&128)===0&&(typeof Ae.getDerivedStateFromError=="function"||Le!==null&&typeof Le.componentDidCatch=="function"&&(Zl===null||!Zl.has(Le)))){P.flags|=65536,c&=-c,P.lanes|=c;var et=_2(P,pe,c);qr(P,et);break e}}P=P.return}while(P!==null)}ny(f)}catch(At){c=At,ri===f&&f!==null&&(ri=f=f.return);continue}break}while(!0)}function ty(){var a=hp.current;return hp.current=sp,a===null?sp:a}function ng(){(di===0||di===3||di===2)&&(di=4),Ii===null||(Qc&268435455)===0&&(fp&268435455)===0||rc(Ii,Wi)}function vp(a,c){var f=Ar;Ar|=2;var y=ty();(Ii!==a||Wi!==c)&&(xl=null,Zc(a,c));do try{nT();break}catch(T){ey(a,T)}while(!0);if(_r(),Ar=f,hp.current=y,ri!==null)throw Error(t(261));return Ii=null,Wi=0,di}function nT(){for(;ri!==null;)ry(ri)}function iT(){for(;ri!==null&&!Po();)ry(ri)}function ry(a){var c=sy(a.alternate,a,hs);a.memoizedProps=a.pendingProps,c===null?ny(a):ri=c,K0.current=null}function ny(a){var c=a;do{var f=c.alternate;if(a=c.return,(c.flags&32768)===0){if(f=Y4(f,c,hs),f!==null){ri=f;return}}else{if(f=Q4(f,c),f!==null){f.flags&=32767,ri=f;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{di=6,ri=null;return}}if(c=c.sibling,c!==null){ri=c;return}ri=c=a}while(c!==null);di===0&&(di=5)}function eu(a,c,f){var y=or,T=zs.transition;try{zs.transition=null,or=1,oT(a,c,f,y)}finally{zs.transition=T,or=y}return null}function oT(a,c,f,y){do ud();while(ec!==null);if((Ar&6)!==0)throw Error(t(327));f=a.finishedWork;var T=a.finishedLanes;if(f===null)return null;if(a.finishedWork=null,a.finishedLanes=0,f===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var P=f.lanes|f.childLanes;if(Bo(a,P),a===Ii&&(ri=Ii=null,Wi=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||mp||(mp=!0,ay(Zo,function(){return ud(),null})),P=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||P){P=zs.transition,zs.transition=null;var K=or;or=1;var pe=Ar;Ar|=4,K0.current=null,Z4(a,f),G2(f,a),zc(hl),ts=!!qc,hl=qc=null,a.current=f,eT(f),Xo(),Ar=pe,or=K,zs.transition=P}else a.current=f;if(mp&&(mp=!1,ec=a,gp=T),P=a.pendingLanes,P===0&&(Zl=null),Ya(f.stateNode),Ho(a,jr()),c!==null)for(y=a.onRecoverableError,f=0;f<c.length;f++)T=c[f],y(T.value,{componentStack:T.stack,digest:T.digest});if(pp)throw pp=!1,a=Q0,Q0=null,a;return(gp&1)!==0&&a.tag!==0&&ud(),P=a.pendingLanes,(P&1)!==0?a===X0?Ph++:(Ph=0,X0=a):Ph=0,z(),null}function ud(){if(ec!==null){var a=ai(gp),c=zs.transition,f=or;try{if(zs.transition=null,or=16>a?16:a,ec===null)var y=!1;else{if(a=ec,ec=null,gp=0,(Ar&6)!==0)throw Error(t(331));var T=Ar;for(Ar|=4,dt=a.current;dt!==null;){var P=dt,K=P.child;if((dt.flags&16)!==0){var pe=P.deletions;if(pe!==null){for(var Se=0;Se<pe.length;Se++){var Fe=pe[Se];for(dt=Fe;dt!==null;){var Je=dt;switch(Je.tag){case 0:case 11:case 15:Eh(8,Je,P)}var Ye=Je.child;if(Ye!==null)Ye.return=Je,dt=Ye;else for(;dt!==null;){Je=dt;var Ke=Je.sibling,at=Je.return;if(W2(Je),Je===Fe){dt=null;break}if(Ke!==null){Ke.return=at,dt=Ke;break}dt=at}}}var gt=P.alternate;if(gt!==null){var bt=gt.child;if(bt!==null){gt.child=null;do{var Hn=bt.sibling;bt.sibling=null,bt=Hn}while(bt!==null)}}dt=P}}if((P.subtreeFlags&2064)!==0&&K!==null)K.return=P,dt=K;else e:for(;dt!==null;){if(P=dt,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:Eh(9,P,P.return)}var Re=P.sibling;if(Re!==null){Re.return=P.return,dt=Re;break e}dt=P.return}}var Ae=a.current;for(dt=Ae;dt!==null;){K=dt;var Le=K.child;if((K.subtreeFlags&2064)!==0&&Le!==null)Le.return=K,dt=Le;else e:for(K=Ae;dt!==null;){if(pe=dt,(pe.flags&2048)!==0)try{switch(pe.tag){case 0:case 11:case 15:dp(9,pe)}}catch(At){Bn(pe,pe.return,At)}if(pe===K){dt=null;break e}var et=pe.sibling;if(et!==null){et.return=pe.return,dt=et;break e}dt=pe.return}}if(Ar=T,z(),yi&&typeof yi.onPostCommitFiberRoot=="function")try{yi.onPostCommitFiberRoot(_s,a)}catch{}y=!0}return y}finally{or=f,zs.transition=c}}return!1}function iy(a,c,f){c=sd(f,c),c=S2(a,c,1),a=An(a,c,1),c=ko(),a!==null&&(Hs(a,1,c),Ho(a,c))}function Bn(a,c,f){if(a.tag===3)iy(a,a,f);else for(;c!==null;){if(c.tag===3){iy(c,a,f);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Zl===null||!Zl.has(y))){a=sd(f,a),a=_2(c,a,1),c=An(c,a,1),a=ko(),c!==null&&(Hs(c,1,a),Ho(c,a));break}}c=c.return}}function sT(a,c,f){var y=a.pingCache;y!==null&&y.delete(c),c=ko(),a.pingedLanes|=a.suspendedLanes&f,Ii===a&&(Wi&f)===f&&(di===4||di===3&&(Wi&130023424)===Wi&&500>jr()-Y0?Zc(a,0):J0|=f),Ho(a,c)}function oy(a,c){c===0&&((a.mode&1)===0?c=1:(c=xi,xi<<=1,(xi&130023424)===0&&(xi=4194304)));var f=ko();a=Ur(a,c),a!==null&&(Hs(a,c,f),Ho(a,f))}function aT(a){var c=a.memoizedState,f=0;c!==null&&(f=c.retryLane),oy(a,f)}function lT(a,c){var f=0;switch(a.tag){case 13:var y=a.stateNode,T=a.memoizedState;T!==null&&(f=T.retryLane);break;case 19:y=a.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(c),oy(a,f)}var sy;sy=function(a,c,f){if(a!==null)if(a.memoizedProps!==c.pendingProps||to.current)Uo=!0;else{if((a.lanes&f)===0&&(c.flags&128)===0)return Uo=!1,J4(a,c,f);Uo=(a.flags&131072)!==0}else Uo=!1,$e&&(c.flags&1048576)!==0&&Ie(c,X,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;cp(a,c),a=c.pendingProps;var T=Gl(c,ci.current);mn(c,f),T=Kc(null,c,y,a,T,f);var P=Fs();return c.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,ro(y)?(P=!0,ml(c)):P=!1,c.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,ui(c),T.updater=ap,c.stateNode=T,T._reactInternals=c,B0(c,y,a,f),c=V0(null,c,y,!0,P,f)):(c.tag=0,$e&&P&&Me(c),Co(null,c,T,f),c=c.child),c;case 16:y=c.elementType;e:{switch(cp(a,c),a=c.pendingProps,T=y._init,y=T(y._payload),c.type=y,T=c.tag=uT(y),a=aa(y,a),T){case 0:c=z0(null,c,y,a,f);break e;case 1:c=P2(null,c,y,a,f);break e;case 11:c=k2(null,c,y,a,f);break e;case 14:c=I2(null,c,y,aa(y.type,a),f);break e}throw Error(t(306,y,""))}return c;case 0:return y=c.type,T=c.pendingProps,T=c.elementType===y?T:aa(y,T),z0(a,c,y,T,f);case 1:return y=c.type,T=c.pendingProps,T=c.elementType===y?T:aa(y,T),P2(a,c,y,T,f);case 3:e:{if(N2(c),a===null)throw Error(t(387));y=c.pendingProps,P=c.memoizedState,T=P.element,no(a,c),ki(c,y,null,f);var K=c.memoizedState;if(y=K.element,P.isDehydrated)if(P={element:y,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},c.updateQueue.baseState=P,c.memoizedState=P,c.flags&256){T=sd(Error(t(423)),c),c=B2(a,c,y,f,T);break e}else if(y!==T){T=sd(Error(t(424)),c),c=B2(a,c,y,f,T);break e}else for(Oe=Mi(c.stateNode.containerInfo.firstChild),Ve=c,$e=!0,qe=null,f=an(c,null,y,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(ut(),y===T){c=yl(a,c,f);break e}Co(a,c,y,f)}c=c.child}return c;case 5:return tp(c),a===null&&ft(c),y=c.type,T=c.pendingProps,P=a!==null?a.memoizedProps:null,K=T.children,xh(y,T)?K=null:P!==null&&xh(y,P)&&(c.flags|=32),R2(a,c),Co(a,c,K,f),c.child;case 6:return a===null&&ft(c),null;case 13:return L2(a,c,f);case 4:return Kl(c,c.stateNode.containerInfo),y=c.pendingProps,a===null?c.child=Rn(c,null,y,f):Co(a,c,y,f),c.child;case 11:return y=c.type,T=c.pendingProps,T=c.elementType===y?T:aa(y,T),k2(a,c,y,T,f);case 7:return Co(a,c,c.pendingProps,f),c.child;case 8:return Co(a,c,c.pendingProps.children,f),c.child;case 12:return Co(a,c,c.pendingProps.children,f),c.child;case 10:e:{if(y=c.type._context,T=c.pendingProps,P=c.memoizedProps,K=T.value,Lr(Un,y._currentValue),y._currentValue=K,P!==null)if(hn(P.value,K)){if(P.children===T.children&&!to.current){c=yl(a,c,f);break e}}else for(P=c.child,P!==null&&(P.return=c);P!==null;){var pe=P.dependencies;if(pe!==null){K=P.child;for(var Se=pe.firstContext;Se!==null;){if(Se.context===y){if(P.tag===1){Se=Tn(-1,f&-f),Se.tag=2;var Fe=P.updateQueue;if(Fe!==null){Fe=Fe.shared;var Je=Fe.pending;Je===null?Se.next=Se:(Se.next=Je.next,Je.next=Se),Fe.pending=Se}}P.lanes|=f,Se=P.alternate,Se!==null&&(Se.lanes|=f),Tr(P.return,f,c),pe.lanes|=f;break}Se=Se.next}}else if(P.tag===10)K=P.type===c.type?null:P.child;else if(P.tag===18){if(K=P.return,K===null)throw Error(t(341));K.lanes|=f,pe=K.alternate,pe!==null&&(pe.lanes|=f),Tr(K,f,c),K=P.sibling}else K=P.child;if(K!==null)K.return=P;else for(K=P;K!==null;){if(K===c){K=null;break}if(P=K.sibling,P!==null){P.return=K.return,K=P;break}K=K.return}P=K}Co(a,c,T.children,f),c=c.child}return c;case 9:return T=c.type,y=c.pendingProps.children,mn(c,f),T=gn(T),y=y(T),c.flags|=1,Co(a,c,y,f),c.child;case 14:return y=c.type,T=aa(y,c.pendingProps),T=aa(y.type,T),I2(a,c,y,T,f);case 15:return E2(a,c,c.type,c.pendingProps,f);case 17:return y=c.type,T=c.pendingProps,T=c.elementType===y?T:aa(y,T),cp(a,c),c.tag=1,ro(y)?(a=!0,ml(c)):a=!1,mn(c,f),b2(c,y,T),B0(c,y,T,f),V0(null,c,y,!0,a,f);case 19:return z2(a,c,f);case 22:return j2(a,c,f)}throw Error(t(156,c.tag))};function ay(a,c){return ws(a,c)}function cT(a,c,f,y){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vs(a,c,f,y){return new cT(a,c,f,y)}function ig(a){return a=a.prototype,!(!a||!a.isReactComponent)}function uT(a){if(typeof a=="function")return ig(a)?1:0;if(a!=null){if(a=a.$$typeof,a===w)return 11;if(a===q)return 14}return 2}function nc(a,c){var f=a.alternate;return f===null?(f=Vs(a.tag,c,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=c,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&14680064,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,c=a.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f}function bp(a,c,f,y,T,P){var K=2;if(y=a,typeof a=="function")ig(a)&&(K=1);else if(typeof a=="string")K=5;else e:switch(a){case V:return tu(f.children,T,P,c);case k:K=8,T|=8;break;case A:return a=Vs(12,f,c,T|2),a.elementType=A,a.lanes=P,a;case B:return a=Vs(13,f,c,T),a.elementType=B,a.lanes=P,a;case D:return a=Vs(19,f,c,T),a.elementType=D,a.lanes=P,a;case se:return wp(f,T,P,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case O:K=10;break e;case I:K=9;break e;case w:K=11;break e;case q:K=14;break e;case oe:K=16,y=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return c=Vs(K,f,c,T),c.elementType=a,c.type=y,c.lanes=P,c}function tu(a,c,f,y){return a=Vs(7,a,y,c),a.lanes=f,a}function wp(a,c,f,y){return a=Vs(22,a,y,c),a.elementType=se,a.lanes=f,a.stateNode={isHidden:!1},a}function og(a,c,f){return a=Vs(6,a,null,c),a.lanes=f,a}function sg(a,c,f){return c=Vs(4,a.children!==null?a.children:[],a.key,c),c.lanes=f,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function dT(a,c,f,y,T){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xa(0),this.expirationTimes=Xa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xa(0),this.identifierPrefix=y,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function ag(a,c,f,y,T,P,K,pe,Se){return a=new dT(a,c,f,pe,Se),c===1?(c=1,P===!0&&(c|=8)):c=0,P=Vs(3,null,null,c),a.current=P,P.stateNode=a,P.memoizedState={element:y,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},ui(P),a}function hT(a,c,f){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ue,key:y==null?null:""+y,children:a,containerInfo:c,implementation:f}}function ly(a){if(!a)return Ba;a=a._reactInternals;e:{if(bn(a)!==a||a.tag!==1)throw Error(t(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(ro(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(a.tag===1){var f=a.type;if(ro(f))return Sh(a,f,c)}return c}function cy(a,c,f,y,T,P,K,pe,Se){return a=ag(f,y,!0,a,T,P,K,pe,Se),a.context=ly(null),f=a.current,y=ko(),T=tc(f),P=Tn(y,T),P.callback=c??null,An(f,P,T),a.current.lanes=T,Hs(a,T,y),Ho(a,y),a}function Sp(a,c,f,y){var T=c.current,P=ko(),K=tc(T);return f=ly(f),c.context===null?c.context=f:c.pendingContext=f,c=Tn(P,K),c.payload={element:a},y=y===void 0?null:y,y!==null&&(c.callback=y),a=An(T,c,K),a!==null&&(ua(a,T,K,P),Ci(a,T,K)),K}function _p(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function uy(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<c?f:c}}function lg(a,c){uy(a,c),(a=a.alternate)&&uy(a,c)}function fT(){return null}var dy=typeof reportError=="function"?reportError:function(a){console.error(a)};function cg(a){this._internalRoot=a}Tp.prototype.render=cg.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(t(409));Sp(a,c,null,null)},Tp.prototype.unmount=cg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;Xc(function(){Sp(null,a,null,null)}),c[Ti]=null}};function Tp(a){this._internalRoot=a}Tp.prototype.unstable_scheduleHydration=function(a){if(a){var c=el();a={blockedOn:null,target:a,priority:c};for(var f=0;f<Fi.length&&c!==0&&c<Fi[f].priority;f++);Fi.splice(f,0,a),f===0&&Ta(a)}};function ug(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Ap(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function hy(){}function pT(a,c,f,y,T){if(T){if(typeof y=="function"){var P=y;y=function(){var Fe=_p(K);P.call(Fe)}}var K=cy(c,y,a,0,null,!1,!1,"",hy);return a._reactRootContainer=K,a[Ti]=K.current,ul(a.nodeType===8?a.parentNode:a),Xc(),K}for(;T=a.lastChild;)a.removeChild(T);if(typeof y=="function"){var pe=y;y=function(){var Fe=_p(Se);pe.call(Fe)}}var Se=ag(a,0,!1,null,null,!1,!1,"",hy);return a._reactRootContainer=Se,a[Ti]=Se.current,ul(a.nodeType===8?a.parentNode:a),Xc(function(){Sp(c,Se,f,y)}),Se}function Cp(a,c,f,y,T){var P=f._reactRootContainer;if(P){var K=P;if(typeof T=="function"){var pe=T;T=function(){var Se=_p(K);pe.call(Se)}}Sp(c,K,a,T)}else K=pT(f,c,a,T,y);return _p(K)}Gs=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var f=lr(c.pendingLanes);f!==0&&(Sa(c,f|1),Ho(c,jr()),(Ar&6)===0&&(cd=jr()+500,z()))}break;case 13:Xc(function(){var y=Ur(a,1);if(y!==null){var T=ko();ua(y,a,1,T)}}),lg(a,1)}},_a=function(a){if(a.tag===13){var c=Ur(a,134217728);if(c!==null){var f=ko();ua(c,a,134217728,f)}lg(a,134217728)}},Za=function(a){if(a.tag===13){var c=tc(a),f=Ur(a,c);if(f!==null){var y=ko();ua(f,a,c,y)}lg(a,c)}},el=function(){return or},Ks=function(a,c){var f=or;try{return or=a,c()}finally{or=f}},Er=function(a,c,f){switch(c){case"input":if(Et(a,f),c=f.name,f.type==="radio"&&c!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<f.length;c++){var y=f[c];if(y!==a&&y.form===a.form){var T=Hc(y);if(!T)throw Error(t(90));Xe(y),Et(y,T)}}}break;case"textarea":mr(a,f);break;case"select":c=f.value,c!=null&&rt(a,!!f.multiple,c,!1)}},zn=tg,Ro=Xc;var mT={usingClientEntryPoint:!1,Events:[Hl,fl,Hc,ar,Hi,tg]},Nh={findFiberByHostInstance:Na,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gT={bundleType:Nh.bundleType,version:Nh.version,rendererPackageName:Nh.rendererPackageName,rendererConfig:Nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=mo(a),a===null?null:a.stateNode},findFiberByHostInstance:Nh.findFiberByHostInstance||fT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kp.isDisabled&&kp.supportsFiber)try{_s=kp.inject(gT),yi=kp}catch{}}return Go.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mT,Go.createPortal=function(a,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ug(c))throw Error(t(200));return hT(a,c,null,f)},Go.createRoot=function(a,c){if(!ug(a))throw Error(t(299));var f=!1,y="",T=dy;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(T=c.onRecoverableError)),c=ag(a,1,!1,null,null,f,!1,y,T),a[Ti]=c.current,ul(a.nodeType===8?a.parentNode:a),new cg(c)},Go.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=mo(c),a=a===null?null:a.stateNode,a},Go.flushSync=function(a){return Xc(a)},Go.hydrate=function(a,c,f){if(!Ap(c))throw Error(t(200));return Cp(null,a,c,!0,f)},Go.hydrateRoot=function(a,c,f){if(!ug(a))throw Error(t(405));var y=f!=null&&f.hydratedSources||null,T=!1,P="",K=dy;if(f!=null&&(f.unstable_strictMode===!0&&(T=!0),f.identifierPrefix!==void 0&&(P=f.identifierPrefix),f.onRecoverableError!==void 0&&(K=f.onRecoverableError)),c=cy(c,null,a,1,f??null,T,!1,P,K),a[Ti]=c.current,ul(a),y)for(a=0;a<y.length;a++)f=y[a],T=f._getVersion,T=T(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,T]:c.mutableSourceEagerHydrationData.push(f,T);return new Tp(c)},Go.render=function(a,c,f){if(!Ap(c))throw Error(t(200));return Cp(null,a,c,!1,f)},Go.unmountComponentAtNode=function(a){if(!Ap(a))throw Error(t(40));return a._reactRootContainer?(Xc(function(){Cp(null,null,a,!1,function(){a._reactRootContainer=null,a[Ti]=null})}),!0):!1},Go.unstable_batchedUpdates=tg,Go.unstable_renderSubtreeIntoContainer=function(a,c,f,y){if(!Ap(f))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return Cp(a,c,f,!1,y)},Go.version="18.3.1-next-f1338f8080-20240426",Go}var by;function kT(){if(by)return fg.exports;by=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),fg.exports=CT(),fg.exports}var wy;function IT(){if(wy)return Ip;wy=1;var r=kT();return Ip.createRoot=r.createRoot,Ip.hydrateRoot=r.hydrateRoot,Ip}var ET=IT();const jT=Kb(ET);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PT=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),Sy=r=>{const e=PT(r);return e.charAt(0).toUpperCase()+e.slice(1)},Jb=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),NT=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=me.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:o,iconNode:l,...u},h)=>me.createElement("svg",{ref:h,...BT,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:Jb("lucide",i),...!o&&!NT(u)&&{"aria-hidden":"true"},...u},[...l.map(([d,g])=>me.createElement(d,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=(r,e)=>{const t=me.forwardRef(({className:n,...i},o)=>me.createElement(LT,{ref:o,iconNode:e,className:Jb(`lucide-${RT(Sy(r))}`,`lucide-${r}`,n),...i}));return t.displayName=Sy(r),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],zT=Ut("bell",FT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Yb=Ut("box",VT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Lu=Ut("briefcase",OT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Qb=Ut("building",MT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=[["path",{d:"M17 19a1 1 0 0 1-1-1v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a1 1 0 0 1-1 1z",key:"trhst0"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M19 14V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V10",key:"1mo9zo"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M4 10a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2z",key:"1dd30t"}],["path",{d:"M7 5V3",key:"1t1388"}]],Xb=Ut("cable",DT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],cf=Ut("calculator",WT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],e1=Ut("calendar",$T);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Zb=Ut("chart-column",UT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],mm=Ut("chevron-down",qT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],GT=Ut("chevron-left",HT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],JT=Ut("chevron-right",KT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],QT=Ut("chevron-up",YT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ef=Ut("circle-alert",XT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],En=Ut("circle-check-big",ZT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ew=Ut("circle",e6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qm=Ut("clock",t6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],tw=Ut("corner-down-right",r6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Q1=Ut("dollar-sign",n6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],Hm=Ut("file-down",i6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],jf=Ut("file-text",o6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],rw=Ut("gauge",s6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],nw=Ut("globe",a6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],iw=Ut("house",l6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],xs=Ut("info",c6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],ow=Ut("lightbulb",u6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],h6=Ut("lock",d6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],p6=Ut("log-out",f6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],_y=Ut("mail",m6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],sw=Ut("map-pin",g6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],x6=Ut("menu",y6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"M3 20h4.5a.5.5 0 0 0 .5-.5v-.282a.52.52 0 0 0-.247-.437 8 8 0 1 1 8.494-.001.52.52 0 0 0-.247.438v.282a.5.5 0 0 0 .5.5H21",key:"1x94xo"}]],aw=Ut("omega",v6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],lw=Ut("package",b6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],cw=Ut("plug",w6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ma=Ut("plus",S6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],uw=Ut("radio",_6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],X1=Ut("receipt",T6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],dw=Ut("search",A6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hw=Ut("settings",C6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],I6=Ut("shield",k6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}],["line",{x1:"12",x2:"12",y1:"16",y2:"16",key:"aqc6ln"}],["line",{x1:"12",x2:"12",y1:"8",y2:"8",key:"1mkcni"}]],fw=Ut("square-divide",E6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],pw=Ut("square-pen",j6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"M4 4v16",key:"6qkkli"}],["path",{d:"M9 4v16",key:"81ygyz"}],["path",{d:"M14 4v16",key:"12vmem"}]],mw=Ut("tally-3",R6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],gw=Ut("target",P6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Tc=Ut("trash-2",N6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],yw=Ut("trending-down",B6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],F6=Ut("trending-up",L6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Fu=Ut("triangle-alert",z6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]],xw=Ut("triangle",V6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gm=Ut("user",O6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],vw=Ut("x",M6),D6="_container_1f4gz_47",W6="_menu_1f4gz_73",$6="_btn_1f4gz_75",ys={container:D6,menu:W6,btn:$6};function U6({onSelectCalculator:r,isDarkMode:e}){const[t,n]=me.useState(""),i=[{name:"Power Calculations",calculators:[{id:"voltage-drop",name:"Voltage Drop",icon:yw,keywords:"voltage drop vd wire circuit"},{id:"ohms-law",name:"Ohm's Law",icon:fw,keywords:"ohms law voltage current resistance power series parallel circuit"},{id:"reactance-impedance",name:"Reactance",icon:aw,keywords:"reactance impedance xl xc capacitive inductive resonance frequency ac circuit"},{id:"power-factor",name:"Power Factor",icon:gw,keywords:"power factor correction pf capacitor kvar cos phi efficiency demand charge penalty savings"},{id:"power-triangle",name:"Power Triangle",icon:xw,keywords:"power triangle kva kw kvar apparent real reactive power factor angle phase"},{id:"three-phase-power",name:"Three-Phase",icon:mw,keywords:"three phase power 3 phase current voltage kw kva motor industrial commercial wye delta line"}]},{name:"Sizing & Rating",calculators:[{id:"ampacity",name:"Ampacity",icon:Xb,keywords:"ampacity current rating 310 temperature"},{id:"load-calculations",name:"Load Calculations",icon:Zb,keywords:"load calculation service size residential commercial demand"},{id:"service-entrance",name:"Service Entrance",icon:Qb,keywords:"service entrance sizing panel main 230"},{id:"grounding-bonding",name:"Grounding & Bonding",icon:nw,keywords:"grounding bonding ground electrode equipment gec egc jumper 250"}]},{name:"Equipment",calculators:[{id:"motor-calculations",name:"Motors",icon:hw,keywords:"motor flc protection starter 430"},{id:"transformer-sizing",name:"Transformers",icon:uw,keywords:"transformer kva sizing current primary secondary 450"},{id:"vfd-sizing",name:"VFD Sizing",icon:rw,keywords:"vfd variable frequency drive motor speed control inverter ac drive"}]},{name:"Installation",calculators:[{id:"box-fill",name:"Box Fill",icon:lw,keywords:"box fill junction cubic inch volume 314"},{id:"pull-box",name:"Pull Box",icon:Yb,keywords:"pull box junction sizing straight angle u-pull 314.28 raceway conduit"},{id:"conduit-fill",name:"Conduit Fill",icon:ew,keywords:"conduit fill emt pvc rigid raceway chapter 9"},{id:"conduit-bending",name:"Conduit Bending",icon:tw,keywords:"conduit bending offset saddle stub bend emt"},{id:"receptacles",name:"Receptacles",icon:cw,keywords:"receptacle outlet gfci plug socket 210.52 counter kitchen bathroom wall spacing"},{id:"lighting",name:"Lighting",icon:ow,keywords:"lighting lumens foot candles fixtures spacing watts illumination"}]}],o={"Power Calculations":"#3b82f6","Sizing & Rating":"#10b981",Equipment:"#f59e0b",Installation:"#8b5cf6",Safety:"#ef4444"},l={mainBg:e?"#000000":"#f3f4f6",cardText:e?"#ffffff":"#111827",inputBg:e?"#0a0a0a":"#ffffff",inputBorder:e?"#1a1a1a":"#d1d5db",inputText:e?"#ffffff":"#111827",placeholderText:e?"#666666":"#6b7280",categoryHeaderText:e?"#cccccc":"#4b5563"},u=i.flatMap(d=>d.calculators.map(g=>({...g,category:d.name}))),h=t?u.filter(d=>{const g=t.toLowerCase();return d.name.toLowerCase().includes(g)||d.keywords.toLowerCase().includes(g)}):null;return s.jsx("div",{style:{minHeight:"100vh",background:l.mainBg,padding:"0"},children:s.jsx("div",{style:{maxWidth:"64rem",margin:"0 auto"},children:s.jsxs("div",{style:{padding:"1.25rem",boxSizing:"border-box"},children:[s.jsxs("div",{style:{marginBottom:"1.5rem",position:"relative"},children:[s.jsx(dw,{size:20,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:l.placeholderText}}),s.jsx("input",{type:"text",placeholder:"Search calculators...",value:t,onChange:d=>n(d.target.value),style:{width:"100%",padding:"0.875rem 1rem 0.875rem 3rem",fontSize:"0.9375rem",border:`1px solid ${l.inputBorder}`,borderRadius:"12px",backgroundColor:l.inputBg,color:l.inputText,boxSizing:"border-box",outline:"none",transition:"all 0.2s ease"},onFocus:d=>{d.target.style.borderColor="#3b82f6",d.target.style.backgroundColor=e?"#000000":"#ffffff",d.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:d=>{d.target.style.borderColor=l.inputBorder,d.target.style.backgroundColor=l.inputBg,d.target.style.boxShadow="none"}})]}),h?s.jsxs("div",{children:[s.jsxs("div",{style:{fontSize:"0.875rem",color:l.placeholderText,marginBottom:"1rem",paddingLeft:"0"},children:[h.length," ",h.length===1?"result":"results"," found"]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.25rem",marginBottom:"1rem",boxSizing:"border-box",width:"100%"},children:h.length>0?h.map(d=>{const g=d.icon,b=o[d.category]||"#3b82f6";return s.jsxs("div",{onClick:()=>{console.log("Clicked calculator:",d.id),r(d.id)},style:{cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[s.jsx("button",{style:{backgroundColor:e?"#1a1a1a":"#ffffff",border:`2px solid ${e?"#2a2a2a":"#d1d5db"}`,borderRadius:"12px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"70px",height:"70px",minWidth:"70px",minHeight:"70px",maxWidth:"70px",maxHeight:"70px",flexShrink:0,boxShadow:e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseOver:S=>{S.currentTarget.style.transform="translateY(-4px) scale(1.05)",S.currentTarget.style.backgroundColor=e?"#252525":"#ffffff",S.currentTarget.style.borderColor=b,S.currentTarget.style.boxShadow=`0 8px 16px ${b}30, 0 4px 6px ${b}20`},onMouseOut:S=>{S.currentTarget.style.transform="translateY(0) scale(1)",S.currentTarget.style.backgroundColor=e?"#1a1a1a":"#ffffff",S.currentTarget.style.borderColor=e?"#2a2a2a":"#d1d5db",S.currentTarget.style.boxShadow=e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)"},onMouseDown:S=>{S.currentTarget.style.transform="translateY(-2px) scale(0.95)"},onMouseUp:S=>{S.currentTarget.style.transform="translateY(-4px) scale(1.05)"},children:s.jsx(g,{size:28,strokeWidth:2,color:b})}),s.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",textAlign:"center",lineHeight:"1.2",color:l.cardText,maxWidth:"90px"},children:d.name})]},d.id)}):s.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem 1rem",color:l.placeholderText,fontSize:"0.9375rem"},children:"No calculators found"})})]}):i.map((d,g)=>s.jsxs("div",{style:{marginBottom:"2rem"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem",paddingLeft:"0"},children:[s.jsx("div",{style:{width:"4px",height:"20px",backgroundColor:o[d.name],borderRadius:"2px"}}),s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:l.categoryHeaderText,margin:0,letterSpacing:"-0.01em"},children:d.name})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.25rem",marginBottom:g<i.length-1?"1.5rem":"1rem",boxSizing:"border-box",width:"100%"},children:d.calculators.map(b=>{const S=b.icon,v=o[d.name];return s.jsxs("div",{onClick:()=>{console.log("Clicked calculator:",b.id),r(b.id)},style:{cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[s.jsx("button",{style:{backgroundColor:e?"#1a1a1a":"#ffffff",border:`2px solid ${e?"#2a2a2a":"#d1d5db"}`,borderRadius:"12px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"70px",height:"70px",minWidth:"70px",minHeight:"70px",maxWidth:"70px",maxHeight:"70px",flexShrink:0,boxShadow:e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseOver:N=>{N.currentTarget.style.transform="translateY(-4px) scale(1.05)",N.currentTarget.style.backgroundColor=e?"#252525":"#ffffff",N.currentTarget.style.borderColor=v,N.currentTarget.style.boxShadow=`0 8px 16px ${v}30, 0 4px 6px ${v}20`},onMouseOut:N=>{N.currentTarget.style.transform="translateY(0) scale(1)",N.currentTarget.style.backgroundColor=e?"#1a1a1a":"#ffffff",N.currentTarget.style.borderColor=e?"#2a2a2a":"#d1d5db",N.currentTarget.style.boxShadow=e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)"},onMouseDown:N=>{N.currentTarget.style.transform="translateY(-2px) scale(0.95)"},onMouseUp:N=>{N.currentTarget.style.transform="translateY(-4px) scale(1.05)"},children:s.jsx(S,{size:28,strokeWidth:2,color:v})}),s.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",textAlign:"center",lineHeight:"1.2",color:l.cardText,maxWidth:"90px"},children:b.name})]},b.id)})})]},d.name))]})})})}const q6="modulepreload",H6=function(r){return"/electrician-toolkit/"+r},Ty={},fu=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let l=function(d){return Promise.all(d.map(g=>Promise.resolve(g).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=l(t.map(d=>{if(d=H6(d),d in Ty)return;Ty[d]=!0;const g=d.endsWith(".css"),b=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${b}`))return;const S=document.createElement("link");if(S.rel=g?"stylesheet":q6,g||(S.as="script"),S.crossOrigin="",S.href=d,h&&S.setAttribute("nonce",h),document.head.appendChild(S),g)return new Promise((v,N)=>{S.addEventListener("load",v),S.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};function Gr(r){"@babel/helpers - typeof";return Gr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gr(r)}var ga=Uint8Array,ms=Uint16Array,Z1=Int32Array,e5=new ga([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),t5=new ga([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ay=new ga([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bw=function(r,e){for(var t=new ms(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new Z1(t[30]),n=1;n<30;++n)for(var o=t[n];o<t[n+1];++o)i[o]=o-t[n]<<5|n;return{b:t,r:i}},ww=bw(e5,2),G6=ww.b,t1=ww.r;G6[28]=258,t1[258]=28;var K6=bw(t5,0),Cy=K6.r,r1=new ms(32768);for(var ln=0;ln<32768;++ln){var oc=(ln&43690)>>1|(ln&21845)<<1;oc=(oc&52428)>>2|(oc&13107)<<2,oc=(oc&61680)>>4|(oc&3855)<<4,r1[ln]=((oc&65280)>>8|(oc&255)<<8)>>1}var Yh=(function(r,e,t){for(var n=r.length,i=0,o=new ms(e);i<n;++i)r[i]&&++o[r[i]-1];var l=new ms(e);for(i=1;i<e;++i)l[i]=l[i-1]+o[i-1]<<1;var u;if(t){u=new ms(1<<e);var h=15-e;for(i=0;i<n;++i)if(r[i])for(var d=i<<4|r[i],g=e-r[i],b=l[r[i]-1]++<<g,S=b|(1<<g)-1;b<=S;++b)u[r1[b]>>h]=d}else for(u=new ms(n),i=0;i<n;++i)r[i]&&(u[i]=r1[l[r[i]-1]++]>>15-r[i]);return u}),wu=new ga(288);for(var ln=0;ln<144;++ln)wu[ln]=8;for(var ln=144;ln<256;++ln)wu[ln]=9;for(var ln=256;ln<280;++ln)wu[ln]=7;for(var ln=280;ln<288;++ln)wu[ln]=8;var ym=new ga(32);for(var ln=0;ln<32;++ln)ym[ln]=5;var J6=Yh(wu,9,0),Y6=Yh(ym,5,0),Sw=function(r){return(r+7)/8|0},Q6=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new ga(r.subarray(e,t))},vl=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},Lh=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},gg=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var i=t.length,o=t.slice();if(!i)return{t:Tw,l:0};if(i==1){var l=new ga(t[0].s+1);return l[t[0].s]=1,{t:l,l:1}}t.sort(function(ne,ue){return ne.f-ue.f}),t.push({s:-1,f:25001});var u=t[0],h=t[1],d=0,g=1,b=2;for(t[0]={s:-1,f:u.f+h.f,l:u,r:h};g!=i-1;)u=t[t[d].f<t[b].f?d++:b++],h=t[d!=g&&t[d].f<t[b].f?d++:b++],t[g++]={s:-1,f:u.f+h.f,l:u,r:h};for(var S=o[0].s,n=1;n<i;++n)o[n].s>S&&(S=o[n].s);var v=new ms(S+1),N=n1(t[g-1],v,0);if(N>e){var n=0,E=0,L=N-e,C=1<<L;for(o.sort(function(ue,V){return v[V.s]-v[ue.s]||ue.f-V.f});n<i;++n){var M=o[n].s;if(v[M]>e)E+=C-(1<<N-v[M]),v[M]=e;else break}for(E>>=L;E>0;){var $=o[n].s;v[$]<e?E-=1<<e-v[$]++-1:++n}for(;n>=0&&E;--n){var F=o[n].s;v[F]==e&&(--v[F],++E)}N=e}return{t:new ga(v),l:N}},n1=function(r,e,t){return r.s==-1?Math.max(n1(r.l,e,t+1),n1(r.r,e,t+1)):e[r.s]=t},ky=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new ms(++e),n=0,i=r[0],o=1,l=function(h){t[n++]=h},u=1;u<=e;++u)if(r[u]==i&&u!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)l(32754);o>2&&(l(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(l(i),--o;o>6;o-=6)l(8304);o>2&&(l(o-3<<5|8208),o=0)}for(;o--;)l(i);o=1,i=r[u]}return{c:t.subarray(0,n),n:e}},Fh=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},_w=function(r,e,t){var n=t.length,i=Sw(e+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var o=0;o<n;++o)r[i+o+4]=t[o];return(i+4+n)*8},Iy=function(r,e,t,n,i,o,l,u,h,d,g){vl(e,g++,t),++i[256];for(var b=gg(i,15),S=b.t,v=b.l,N=gg(o,15),E=N.t,L=N.l,C=ky(S),M=C.c,$=C.n,F=ky(E),ne=F.c,ue=F.n,V=new ms(19),k=0;k<M.length;++k)++V[M[k]&31];for(var k=0;k<ne.length;++k)++V[ne[k]&31];for(var A=gg(V,7),O=A.t,I=A.l,w=19;w>4&&!O[Ay[w-1]];--w);var B=d+5<<3,D=Fh(i,wu)+Fh(o,ym)+l,q=Fh(i,S)+Fh(o,E)+l+14+3*w+Fh(V,O)+2*V[16]+3*V[17]+7*V[18];if(h>=0&&B<=D&&B<=q)return _w(e,g,r.subarray(h,h+d));var oe,se,ie,ve;if(vl(e,g,1+(q<D)),g+=2,q<D){oe=Yh(S,v,0),se=S,ie=Yh(E,L,0),ve=E;var be=Yh(O,I,0);vl(e,g,$-257),vl(e,g+5,ue-1),vl(e,g+10,w-4),g+=14;for(var k=0;k<w;++k)vl(e,g+3*k,O[Ay[k]]);g+=3*w;for(var Z=[M,ne],W=0;W<2;++W)for(var J=Z[W],k=0;k<J.length;++k){var re=J[k]&31;vl(e,g,be[re]),g+=O[re],re>15&&(vl(e,g,J[k]>>5&127),g+=J[k]>>12)}}else oe=J6,se=wu,ie=Y6,ve=ym;for(var k=0;k<u;++k){var fe=n[k];if(fe>255){var re=fe>>18&31;Lh(e,g,oe[re+257]),g+=se[re+257],re>7&&(vl(e,g,fe>>23&31),g+=e5[re]);var ge=fe&31;Lh(e,g,ie[ge]),g+=ve[ge],ge>3&&(Lh(e,g,fe>>5&8191),g+=t5[ge])}else Lh(e,g,oe[fe]),g+=se[fe]}return Lh(e,g,oe[256]),g+se[256]},X6=new Z1([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Tw=new ga(0),Z6=function(r,e,t,n,i,o){var l=o.z||r.length,u=new ga(n+l+5*(1+Math.ceil(l/7e3))+i),h=u.subarray(n,u.length-i),d=o.l,g=(o.r||0)&7;if(e){g&&(h[0]=o.r>>3);for(var b=X6[e-1],S=b>>13,v=b&8191,N=(1<<t)-1,E=o.p||new ms(32768),L=o.h||new ms(N+1),C=Math.ceil(t/3),M=2*C,$=function(ze){return(r[ze]^r[ze+1]<<C^r[ze+2]<<M)&N},F=new Z1(25e3),ne=new ms(288),ue=new ms(32),V=0,k=0,A=o.i||0,O=0,I=o.w||0,w=0;A+2<l;++A){var B=$(A),D=A&32767,q=L[B];if(E[D]=q,L[B]=D,I<=A){var oe=l-A;if((V>7e3||O>24576)&&(oe>423||!d)){g=Iy(r,h,0,F,ne,ue,k,O,w,A-w,g),O=V=k=0,w=A;for(var se=0;se<286;++se)ne[se]=0;for(var se=0;se<30;++se)ue[se]=0}var ie=2,ve=0,be=v,Z=D-q&32767;if(oe>2&&B==$(A-Z))for(var W=Math.min(S,oe)-1,J=Math.min(32767,A),re=Math.min(258,oe);Z<=J&&--be&&D!=q;){if(r[A+ie]==r[A+ie-Z]){for(var fe=0;fe<re&&r[A+fe]==r[A+fe-Z];++fe);if(fe>ie){if(ie=fe,ve=Z,fe>W)break;for(var ge=Math.min(Z,fe-2),_e=0,se=0;se<ge;++se){var he=A-Z+se&32767,xe=E[he],Pe=he-xe&32767;Pe>_e&&(_e=Pe,q=he)}}}D=q,q=E[D],Z+=D-q&32767}if(ve){F[O++]=268435456|t1[ie]<<18|Cy[ve];var Ue=t1[ie]&31,Xe=Cy[ve]&31;k+=e5[Ue]+t5[Xe],++ne[257+Ue],++ue[Xe],I=A+ie,++V}else F[O++]=r[A],++ne[r[A]]}}for(A=Math.max(A,I);A<l;++A)F[O++]=r[A],++ne[r[A]];g=Iy(r,h,d,F,ne,ue,k,O,w,A-w,g),d||(o.r=g&7|h[g/8|0]<<3,g-=7,o.h=L,o.p=E,o.i=A,o.w=I)}else{for(var A=o.w||0;A<l+d;A+=65535){var Ze=A+65535;Ze>=l&&(h[g/8|0]=d,Ze=l),g=_w(h,g+1,r.subarray(A,Ze))}o.i=l}return Q6(u,0,n+Sw(g)+i)},Aw=function(){var r=1,e=0;return{p:function(t){for(var n=r,i=e,o=t.length|0,l=0;l!=o;){for(var u=Math.min(l+2655,o);l<u;++l)i+=n+=t[l];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}r=n,e=i},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},eA=function(r,e,t,n,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),l=new ga(o.length+r.length);l.set(o),l.set(r,o.length),r=l,i.w=o.length}return Z6(r,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,i)},Cw=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},tA=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var i=Aw();i.p(e.dictionary),Cw(r,2,i.d())}};function i1(r,e){e||(e={});var t=Aw();t.p(r);var n=eA(r,e,e.dictionary?6:2,4);return tA(n,e),Cw(n,n.length-4,t.d()),n}var rA=typeof TextDecoder<"u"&&new TextDecoder,nA=0;try{rA.decode(Tw,{stream:!0}),nA=1}catch{}function iA(r){if(Array.isArray(r))return r}function oA(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,o,l,u=[],h=!0,d=!1;try{if(o=(t=t.call(r)).next,e!==0)for(;!(h=(n=o.call(t)).done)&&(u.push(n.value),u.length!==e);h=!0);}catch(g){d=!0,i=g}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(d)throw i}}return u}}function Ey(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function sA(r,e){if(r){if(typeof r=="string")return Ey(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ey(r,e):void 0}}function aA(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jy(r,e){return iA(r)||oA(r,e)||sA(r,e)||aA()}function Ry(r,e="utf8"){return new TextDecoder(e).decode(r)}const lA=new TextEncoder;function cA(r){return lA.encode(r)}const uA=1024*8,dA=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),yg={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class r5{constructor(e=uA,t={}){Hr(this,"buffer");Hr(this,"byteLength");Hr(this,"byteOffset");Hr(this,"length");Hr(this,"offset");Hr(this,"lastWrittenByte");Hr(this,"littleEndian");Hr(this,"_data");Hr(this,"_mark");Hr(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,o=e.byteLength-i;let l=i;(ArrayBuffer.isView(e)||e instanceof r5)&&(e.byteLength!==e.buffer.byteLength&&(l=e.byteOffset+i),e=e.buffer),n?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const n=yg[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+n);if(this.littleEndian===dA&&t!=="uint8"&&t!=="int8"){const u=new Uint8Array(this.buffer.slice(i,i+n));u.reverse();const h=new yg[t](u.buffer);return this.offset+=n,h.reverse(),h}const l=new yg[t](o);return this.offset+=n,l}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(e=1){return Ry(this.readBytes(e))}decodeText(e=1,t="utf8"){return Ry(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(cA(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function eh(r){let e=r.length;for(;--e>=0;)r[e]=0}const hA=3,fA=258,kw=29,pA=256,mA=pA+1+kw,Iw=30,gA=512,yA=new Array((mA+2)*2);eh(yA);const xA=new Array(Iw*2);eh(xA);const vA=new Array(gA);eh(vA);const bA=new Array(fA-hA+1);eh(bA);const wA=new Array(kw);eh(wA);const SA=new Array(Iw);eh(SA);const _A=(r,e,t,n)=>{let i=r&65535|0,o=r>>>16&65535|0,l=0;for(;t!==0;){l=t>2e3?2e3:t,t-=l;do i=i+e[n++]|0,o=o+i|0;while(--l);i%=65521,o%=65521}return i|o<<16|0};var o1=_A;const TA=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},AA=new Uint32Array(TA()),CA=(r,e,t,n)=>{const i=AA,o=n+t;r^=-1;for(let l=n;l<o;l++)r=r>>>8^i[(r^e[l])&255];return r^-1};var Va=CA,s1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ew={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const kA=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var IA=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)kA(t,n)&&(r[n]=t[n])}}return r},EA=r=>{let e=0;for(let n=0,i=r.length;n<i;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,i=0,o=r.length;n<o;n++){let l=r[n];t.set(l,i),i+=l.length}return t},jw={assign:IA,flattenChunks:EA};let Rw=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Rw=!1}const uf=new Uint8Array(256);for(let r=0;r<256;r++)uf[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;uf[254]=uf[254]=1;var jA=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,i,o,l=r.length,u=0;for(i=0;i<l;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<l&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),u+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(u),o=0,i=0;o<u;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<l&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const RA=(r,e)=>{if(e<65534&&r.subarray&&Rw)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var PA=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,i;const o=new Array(t*2);for(i=0,n=0;n<t;){let l=r[n++];if(l<128){o[i++]=l;continue}let u=uf[l];if(u>4){o[i++]=65533,n+=u-1;continue}for(l&=u===2?31:u===3?15:7;u>1&&n<t;)l=l<<6|r[n++]&63,u--;if(u>1){o[i++]=65533;continue}l<65536?o[i++]=l:(l-=65536,o[i++]=55296|l>>10&1023,o[i++]=56320|l&1023)}return RA(o,i)},NA=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+uf[r[t]]>e?t:e},a1={string2buf:jA,buf2string:PA,utf8border:NA};function BA(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var LA=BA;const Ep=16209,FA=16191;var zA=function(e,t){let n,i,o,l,u,h,d,g,b,S,v,N,E,L,C,M,$,F,ne,ue,V,k,A,O;const I=e.state;n=e.next_in,A=e.input,i=n+(e.avail_in-5),o=e.next_out,O=e.output,l=o-(t-e.avail_out),u=o+(e.avail_out-257),h=I.dmax,d=I.wsize,g=I.whave,b=I.wnext,S=I.window,v=I.hold,N=I.bits,E=I.lencode,L=I.distcode,C=(1<<I.lenbits)-1,M=(1<<I.distbits)-1;e:do{N<15&&(v+=A[n++]<<N,N+=8,v+=A[n++]<<N,N+=8),$=E[v&C];t:for(;;){if(F=$>>>24,v>>>=F,N-=F,F=$>>>16&255,F===0)O[o++]=$&65535;else if(F&16){ne=$&65535,F&=15,F&&(N<F&&(v+=A[n++]<<N,N+=8),ne+=v&(1<<F)-1,v>>>=F,N-=F),N<15&&(v+=A[n++]<<N,N+=8,v+=A[n++]<<N,N+=8),$=L[v&M];r:for(;;){if(F=$>>>24,v>>>=F,N-=F,F=$>>>16&255,F&16){if(ue=$&65535,F&=15,N<F&&(v+=A[n++]<<N,N+=8,N<F&&(v+=A[n++]<<N,N+=8)),ue+=v&(1<<F)-1,ue>h){e.msg="invalid distance too far back",I.mode=Ep;break e}if(v>>>=F,N-=F,F=o-l,ue>F){if(F=ue-F,F>g&&I.sane){e.msg="invalid distance too far back",I.mode=Ep;break e}if(V=0,k=S,b===0){if(V+=d-F,F<ne){ne-=F;do O[o++]=S[V++];while(--F);V=o-ue,k=O}}else if(b<F){if(V+=d+b-F,F-=b,F<ne){ne-=F;do O[o++]=S[V++];while(--F);if(V=0,b<ne){F=b,ne-=F;do O[o++]=S[V++];while(--F);V=o-ue,k=O}}}else if(V+=b-F,F<ne){ne-=F;do O[o++]=S[V++];while(--F);V=o-ue,k=O}for(;ne>2;)O[o++]=k[V++],O[o++]=k[V++],O[o++]=k[V++],ne-=3;ne&&(O[o++]=k[V++],ne>1&&(O[o++]=k[V++]))}else{V=o-ue;do O[o++]=O[V++],O[o++]=O[V++],O[o++]=O[V++],ne-=3;while(ne>2);ne&&(O[o++]=O[V++],ne>1&&(O[o++]=O[V++]))}}else if((F&64)===0){$=L[($&65535)+(v&(1<<F)-1)];continue r}else{e.msg="invalid distance code",I.mode=Ep;break e}break}}else if((F&64)===0){$=E[($&65535)+(v&(1<<F)-1)];continue t}else if(F&32){I.mode=FA;break e}else{e.msg="invalid literal/length code",I.mode=Ep;break e}break}}while(n<i&&o<u);ne=N>>3,n-=ne,N-=ne<<3,v&=(1<<N)-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=o<u?257+(u-o):257-(o-u),I.hold=v,I.bits=N};const dd=15,Py=852,Ny=592,By=0,xg=1,Ly=2,VA=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),OA=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),MA=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),DA=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),WA=(r,e,t,n,i,o,l,u)=>{const h=u.bits;let d=0,g=0,b=0,S=0,v=0,N=0,E=0,L=0,C=0,M=0,$,F,ne,ue,V,k=null,A;const O=new Uint16Array(dd+1),I=new Uint16Array(dd+1);let w=null,B,D,q;for(d=0;d<=dd;d++)O[d]=0;for(g=0;g<n;g++)O[e[t+g]]++;for(v=h,S=dd;S>=1&&O[S]===0;S--);if(v>S&&(v=S),S===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,u.bits=1,0;for(b=1;b<S&&O[b]===0;b++);for(v<b&&(v=b),L=1,d=1;d<=dd;d++)if(L<<=1,L-=O[d],L<0)return-1;if(L>0&&(r===By||S!==1))return-1;for(I[1]=0,d=1;d<dd;d++)I[d+1]=I[d]+O[d];for(g=0;g<n;g++)e[t+g]!==0&&(l[I[e[t+g]]++]=g);if(r===By?(k=w=l,A=20):r===xg?(k=VA,w=OA,A=257):(k=MA,w=DA,A=0),M=0,g=0,d=b,V=o,N=v,E=0,ne=-1,C=1<<v,ue=C-1,r===xg&&C>Py||r===Ly&&C>Ny)return 1;for(;;){B=d-E,l[g]+1<A?(D=0,q=l[g]):l[g]>=A?(D=w[l[g]-A],q=k[l[g]-A]):(D=96,q=0),$=1<<d-E,F=1<<N,b=F;do F-=$,i[V+(M>>E)+F]=B<<24|D<<16|q|0;while(F!==0);for($=1<<d-1;M&$;)$>>=1;if($!==0?(M&=$-1,M+=$):M=0,g++,--O[d]===0){if(d===S)break;d=e[t+l[g]]}if(d>v&&(M&ue)!==ne){for(E===0&&(E=v),V+=b,N=d-E,L=1<<N;N+E<S&&(L-=O[N+E],!(L<=0));)N++,L<<=1;if(C+=1<<N,r===xg&&C>Py||r===Ly&&C>Ny)return 1;ne=M&ue,i[ne]=v<<24|N<<16|V-o|0}}return M!==0&&(i[V+M]=d-E<<24|64<<16|0),u.bits=v,0};var Qh=WA;const $A=0,Pw=1,Nw=2,{Z_FINISH:Fy,Z_BLOCK:UA,Z_TREES:jp,Z_OK:Su,Z_STREAM_END:qA,Z_NEED_DICT:HA,Z_STREAM_ERROR:$s,Z_DATA_ERROR:Bw,Z_MEM_ERROR:Lw,Z_BUF_ERROR:GA,Z_DEFLATED:zy}=Ew,Gm=16180,Vy=16181,Oy=16182,My=16183,Dy=16184,Wy=16185,$y=16186,Uy=16187,qy=16188,Hy=16189,xm=16190,bl=16191,vg=16192,Gy=16193,bg=16194,Ky=16195,Jy=16196,Yy=16197,Qy=16198,Rp=16199,Pp=16200,Xy=16201,Zy=16202,ex=16203,tx=16204,rx=16205,wg=16206,nx=16207,ix=16208,yn=16209,Fw=16210,zw=16211,KA=852,JA=592,YA=15,QA=YA,ox=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function XA(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const zu=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<Gm||e.mode>zw?1:0},Vw=r=>{if(zu(r))return $s;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=Gm,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(KA),e.distcode=e.distdyn=new Int32Array(JA),e.sane=1,e.back=-1,Su},Ow=r=>{if(zu(r))return $s;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,Vw(r)},Mw=(r,e)=>{let t;if(zu(r))return $s;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?$s:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,Ow(r))},Dw=(r,e)=>{if(!r)return $s;const t=new XA;r.state=t,t.strm=r,t.window=null,t.mode=Gm;const n=Mw(r,e);return n!==Su&&(r.state=null),n},ZA=r=>Dw(r,QA);let sx=!0,Sg,_g;const eC=r=>{if(sx){Sg=new Int32Array(512),_g=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(Qh(Pw,r.lens,0,288,Sg,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;Qh(Nw,r.lens,0,32,_g,0,r.work,{bits:5}),sx=!1}r.lencode=Sg,r.lenbits=9,r.distcode=_g,r.distbits=5},Ww=(r,e,t,n)=>{let i;const o=r.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(e.subarray(t-n,t-n+i),o.wnext),n-=i,n?(o.window.set(e.subarray(t-n,t),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},tC=(r,e)=>{let t,n,i,o,l,u,h,d,g,b,S,v,N,E,L=0,C,M,$,F,ne,ue,V,k;const A=new Uint8Array(4);let O,I;const w=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(zu(r)||!r.output||!r.input&&r.avail_in!==0)return $s;t=r.state,t.mode===bl&&(t.mode=vg),l=r.next_out,i=r.output,h=r.avail_out,o=r.next_in,n=r.input,u=r.avail_in,d=t.hold,g=t.bits,b=u,S=h,k=Su;e:for(;;)switch(t.mode){case Gm:if(t.wrap===0){t.mode=vg;break}for(;g<16;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if(t.wrap&2&&d===35615){t.wbits===0&&(t.wbits=15),t.check=0,A[0]=d&255,A[1]=d>>>8&255,t.check=Va(t.check,A,2,0),d=0,g=0,t.mode=Vy;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((d&255)<<8)+(d>>8))%31){r.msg="incorrect header check",t.mode=yn;break}if((d&15)!==zy){r.msg="unknown compression method",t.mode=yn;break}if(d>>>=4,g-=4,V=(d&15)+8,t.wbits===0&&(t.wbits=V),V>15||V>t.wbits){r.msg="invalid window size",t.mode=yn;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=d&512?Hy:bl,d=0,g=0;break;case Vy:for(;g<16;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if(t.flags=d,(t.flags&255)!==zy){r.msg="unknown compression method",t.mode=yn;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=yn;break}t.head&&(t.head.text=d>>8&1),t.flags&512&&t.wrap&4&&(A[0]=d&255,A[1]=d>>>8&255,t.check=Va(t.check,A,2,0)),d=0,g=0,t.mode=Oy;case Oy:for(;g<32;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}t.head&&(t.head.time=d),t.flags&512&&t.wrap&4&&(A[0]=d&255,A[1]=d>>>8&255,A[2]=d>>>16&255,A[3]=d>>>24&255,t.check=Va(t.check,A,4,0)),d=0,g=0,t.mode=My;case My:for(;g<16;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}t.head&&(t.head.xflags=d&255,t.head.os=d>>8),t.flags&512&&t.wrap&4&&(A[0]=d&255,A[1]=d>>>8&255,t.check=Va(t.check,A,2,0)),d=0,g=0,t.mode=Dy;case Dy:if(t.flags&1024){for(;g<16;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}t.length=d,t.head&&(t.head.extra_len=d),t.flags&512&&t.wrap&4&&(A[0]=d&255,A[1]=d>>>8&255,t.check=Va(t.check,A,2,0)),d=0,g=0}else t.head&&(t.head.extra=null);t.mode=Wy;case Wy:if(t.flags&1024&&(v=t.length,v>u&&(v=u),v&&(t.head&&(V=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(o,o+v),V)),t.flags&512&&t.wrap&4&&(t.check=Va(t.check,n,v,o)),u-=v,o+=v,t.length-=v),t.length))break e;t.length=0,t.mode=$y;case $y:if(t.flags&2048){if(u===0)break e;v=0;do V=n[o+v++],t.head&&V&&t.length<65536&&(t.head.name+=String.fromCharCode(V));while(V&&v<u);if(t.flags&512&&t.wrap&4&&(t.check=Va(t.check,n,v,o)),u-=v,o+=v,V)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Uy;case Uy:if(t.flags&4096){if(u===0)break e;v=0;do V=n[o+v++],t.head&&V&&t.length<65536&&(t.head.comment+=String.fromCharCode(V));while(V&&v<u);if(t.flags&512&&t.wrap&4&&(t.check=Va(t.check,n,v,o)),u-=v,o+=v,V)break e}else t.head&&(t.head.comment=null);t.mode=qy;case qy:if(t.flags&512){for(;g<16;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if(t.wrap&4&&d!==(t.check&65535)){r.msg="header crc mismatch",t.mode=yn;break}d=0,g=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=bl;break;case Hy:for(;g<32;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}r.adler=t.check=ox(d),d=0,g=0,t.mode=xm;case xm:if(t.havedict===0)return r.next_out=l,r.avail_out=h,r.next_in=o,r.avail_in=u,t.hold=d,t.bits=g,HA;r.adler=t.check=1,t.mode=bl;case bl:if(e===UA||e===jp)break e;case vg:if(t.last){d>>>=g&7,g-=g&7,t.mode=wg;break}for(;g<3;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}switch(t.last=d&1,d>>>=1,g-=1,d&3){case 0:t.mode=Gy;break;case 1:if(eC(t),t.mode=Rp,e===jp){d>>>=2,g-=2;break e}break;case 2:t.mode=Jy;break;case 3:r.msg="invalid block type",t.mode=yn}d>>>=2,g-=2;break;case Gy:for(d>>>=g&7,g-=g&7;g<32;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if((d&65535)!==(d>>>16^65535)){r.msg="invalid stored block lengths",t.mode=yn;break}if(t.length=d&65535,d=0,g=0,t.mode=bg,e===jp)break e;case bg:t.mode=Ky;case Ky:if(v=t.length,v){if(v>u&&(v=u),v>h&&(v=h),v===0)break e;i.set(n.subarray(o,o+v),l),u-=v,o+=v,h-=v,l+=v,t.length-=v;break}t.mode=bl;break;case Jy:for(;g<14;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if(t.nlen=(d&31)+257,d>>>=5,g-=5,t.ndist=(d&31)+1,d>>>=5,g-=5,t.ncode=(d&15)+4,d>>>=4,g-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=yn;break}t.have=0,t.mode=Yy;case Yy:for(;t.have<t.ncode;){for(;g<3;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}t.lens[w[t.have++]]=d&7,d>>>=3,g-=3}for(;t.have<19;)t.lens[w[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,O={bits:t.lenbits},k=Qh($A,t.lens,0,19,t.lencode,0,t.work,O),t.lenbits=O.bits,k){r.msg="invalid code lengths set",t.mode=yn;break}t.have=0,t.mode=Qy;case Qy:for(;t.have<t.nlen+t.ndist;){for(;L=t.lencode[d&(1<<t.lenbits)-1],C=L>>>24,M=L>>>16&255,$=L&65535,!(C<=g);){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if($<16)d>>>=C,g-=C,t.lens[t.have++]=$;else{if($===16){for(I=C+2;g<I;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if(d>>>=C,g-=C,t.have===0){r.msg="invalid bit length repeat",t.mode=yn;break}V=t.lens[t.have-1],v=3+(d&3),d>>>=2,g-=2}else if($===17){for(I=C+3;g<I;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}d>>>=C,g-=C,V=0,v=3+(d&7),d>>>=3,g-=3}else{for(I=C+7;g<I;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}d>>>=C,g-=C,V=0,v=11+(d&127),d>>>=7,g-=7}if(t.have+v>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=yn;break}for(;v--;)t.lens[t.have++]=V}}if(t.mode===yn)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=yn;break}if(t.lenbits=9,O={bits:t.lenbits},k=Qh(Pw,t.lens,0,t.nlen,t.lencode,0,t.work,O),t.lenbits=O.bits,k){r.msg="invalid literal/lengths set",t.mode=yn;break}if(t.distbits=6,t.distcode=t.distdyn,O={bits:t.distbits},k=Qh(Nw,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,O),t.distbits=O.bits,k){r.msg="invalid distances set",t.mode=yn;break}if(t.mode=Rp,e===jp)break e;case Rp:t.mode=Pp;case Pp:if(u>=6&&h>=258){r.next_out=l,r.avail_out=h,r.next_in=o,r.avail_in=u,t.hold=d,t.bits=g,zA(r,S),l=r.next_out,i=r.output,h=r.avail_out,o=r.next_in,n=r.input,u=r.avail_in,d=t.hold,g=t.bits,t.mode===bl&&(t.back=-1);break}for(t.back=0;L=t.lencode[d&(1<<t.lenbits)-1],C=L>>>24,M=L>>>16&255,$=L&65535,!(C<=g);){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if(M&&(M&240)===0){for(F=C,ne=M,ue=$;L=t.lencode[ue+((d&(1<<F+ne)-1)>>F)],C=L>>>24,M=L>>>16&255,$=L&65535,!(F+C<=g);){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}d>>>=F,g-=F,t.back+=F}if(d>>>=C,g-=C,t.back+=C,t.length=$,M===0){t.mode=rx;break}if(M&32){t.back=-1,t.mode=bl;break}if(M&64){r.msg="invalid literal/length code",t.mode=yn;break}t.extra=M&15,t.mode=Xy;case Xy:if(t.extra){for(I=t.extra;g<I;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}t.length+=d&(1<<t.extra)-1,d>>>=t.extra,g-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Zy;case Zy:for(;L=t.distcode[d&(1<<t.distbits)-1],C=L>>>24,M=L>>>16&255,$=L&65535,!(C<=g);){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if((M&240)===0){for(F=C,ne=M,ue=$;L=t.distcode[ue+((d&(1<<F+ne)-1)>>F)],C=L>>>24,M=L>>>16&255,$=L&65535,!(F+C<=g);){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}d>>>=F,g-=F,t.back+=F}if(d>>>=C,g-=C,t.back+=C,M&64){r.msg="invalid distance code",t.mode=yn;break}t.offset=$,t.extra=M&15,t.mode=ex;case ex:if(t.extra){for(I=t.extra;g<I;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}t.offset+=d&(1<<t.extra)-1,d>>>=t.extra,g-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=yn;break}t.mode=tx;case tx:if(h===0)break e;if(v=S-h,t.offset>v){if(v=t.offset-v,v>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=yn;break}v>t.wnext?(v-=t.wnext,N=t.wsize-v):N=t.wnext-v,v>t.length&&(v=t.length),E=t.window}else E=i,N=l-t.offset,v=t.length;v>h&&(v=h),h-=v,t.length-=v;do i[l++]=E[N++];while(--v);t.length===0&&(t.mode=Pp);break;case rx:if(h===0)break e;i[l++]=t.length,h--,t.mode=Pp;break;case wg:if(t.wrap){for(;g<32;){if(u===0)break e;u--,d|=n[o++]<<g,g+=8}if(S-=h,r.total_out+=S,t.total+=S,t.wrap&4&&S&&(r.adler=t.check=t.flags?Va(t.check,i,S,l-S):o1(t.check,i,S,l-S)),S=h,t.wrap&4&&(t.flags?d:ox(d))!==t.check){r.msg="incorrect data check",t.mode=yn;break}d=0,g=0}t.mode=nx;case nx:if(t.wrap&&t.flags){for(;g<32;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if(t.wrap&4&&d!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=yn;break}d=0,g=0}t.mode=ix;case ix:k=qA;break e;case yn:k=Bw;break e;case Fw:return Lw;case zw:default:return $s}return r.next_out=l,r.avail_out=h,r.next_in=o,r.avail_in=u,t.hold=d,t.bits=g,(t.wsize||S!==r.avail_out&&t.mode<yn&&(t.mode<wg||e!==Fy))&&Ww(r,r.output,r.next_out,S-r.avail_out),b-=r.avail_in,S-=r.avail_out,r.total_in+=b,r.total_out+=S,t.total+=S,t.wrap&4&&S&&(r.adler=t.check=t.flags?Va(t.check,i,S,r.next_out-S):o1(t.check,i,S,r.next_out-S)),r.data_type=t.bits+(t.last?64:0)+(t.mode===bl?128:0)+(t.mode===Rp||t.mode===bg?256:0),(b===0&&S===0||e===Fy)&&k===Su&&(k=GA),k},rC=r=>{if(zu(r))return $s;let e=r.state;return e.window&&(e.window=null),r.state=null,Su},nC=(r,e)=>{if(zu(r))return $s;const t=r.state;return(t.wrap&2)===0?$s:(t.head=e,e.done=!1,Su)},iC=(r,e)=>{const t=e.length;let n,i,o;return zu(r)||(n=r.state,n.wrap!==0&&n.mode!==xm)?$s:n.mode===xm&&(i=1,i=o1(i,e,t,0),i!==n.check)?Bw:(o=Ww(r,e,t,t),o?(n.mode=Fw,Lw):(n.havedict=1,Su))};var oC=Ow,sC=Mw,aC=Vw,lC=ZA,cC=Dw,uC=tC,dC=rC,hC=nC,fC=iC,pC="pako inflate (from Nodeca project)",wl={inflateReset:oC,inflateReset2:sC,inflateResetKeep:aC,inflateInit:lC,inflateInit2:cC,inflate:uC,inflateEnd:dC,inflateGetHeader:hC,inflateSetDictionary:fC,inflateInfo:pC};function mC(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gC=mC;const $w=Object.prototype.toString,{Z_NO_FLUSH:yC,Z_FINISH:xC,Z_OK:df,Z_STREAM_END:Tg,Z_NEED_DICT:Ag,Z_STREAM_ERROR:vC,Z_DATA_ERROR:ax,Z_MEM_ERROR:bC}=Ew;function Rf(r){this.options=jw.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new LA,this.strm.avail_out=0;let t=wl.inflateInit2(this.strm,e.windowBits);if(t!==df)throw new Error(s1[t]);if(this.header=new gC,wl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=a1.string2buf(e.dictionary):$w.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=wl.inflateSetDictionary(this.strm,e.dictionary),t!==df)))throw new Error(s1[t])}Rf.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let o,l,u;if(this.ended)return!1;for(e===~~e?l=e:l=e===!0?xC:yC,$w.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),o=wl.inflate(t,l),o===Ag&&i&&(o=wl.inflateSetDictionary(t,i),o===df?o=wl.inflate(t,l):o===ax&&(o=Ag));t.avail_in>0&&o===Tg&&t.state.wrap>0&&r[t.next_in]!==0;)wl.inflateReset(t),o=wl.inflate(t,l);switch(o){case vC:case ax:case Ag:case bC:return this.onEnd(o),this.ended=!0,!1}if(u=t.avail_out,t.next_out&&(t.avail_out===0||o===Tg))if(this.options.to==="string"){let h=a1.utf8border(t.output,t.next_out),d=t.next_out-h,g=a1.buf2string(t.output,h);t.next_out=d,t.avail_out=n-d,d&&t.output.set(t.output.subarray(h,h+d),0),this.onData(g)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===df&&u===0)){if(o===Tg)return o=wl.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Rf.prototype.onData=function(r){this.chunks.push(r)};Rf.prototype.onEnd=function(r){r===df&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=jw.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function wC(r,e){const t=new Rf(e);if(t.push(r),t.err)throw t.msg||s1[t.err];return t.result}var SC=Rf,_C=wC,TC={Inflate:SC,inflate:_C};const{Inflate:AC,inflate:CC}=TC;var lx=AC,kC=CC;const Uw=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;Uw[r]=e}const cx=4294967295;function IC(r,e,t){let n=r;for(let i=0;i<t;i++)n=Uw[(n^e[i])&255]^n>>>8;return n}function EC(r,e){return(IC(cx,r,e)^cx)>>>0}function ux(r,e,t){const n=r.readUint32(),i=EC(new Uint8Array(r.buffer,r.byteOffset+r.offset-e-4,e),e);if(i!==n)throw new Error(`CRC mismatch for chunk ${t}. Expected ${n}, found ${i}`)}function qw(r,e,t){for(let n=0;n<t;n++)e[n]=r[n]}function Hw(r,e,t,n){let i=0;for(;i<n;i++)e[i]=r[i];for(;i<t;i++)e[i]=r[i]+e[i-n]&255}function Gw(r,e,t,n){let i=0;if(t.length===0)for(;i<n;i++)e[i]=r[i];else for(;i<n;i++)e[i]=r[i]+t[i]&255}function Kw(r,e,t,n,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=r[o];for(;o<n;o++)e[o]=r[o]+(e[o-i]>>1)&255}else{for(;o<i;o++)e[o]=r[o]+(t[o]>>1)&255;for(;o<n;o++)e[o]=r[o]+(e[o-i]+t[o]>>1)&255}}function Jw(r,e,t,n,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=r[o];for(;o<n;o++)e[o]=r[o]+e[o-i]&255}else{for(;o<i;o++)e[o]=r[o]+t[o]&255;for(;o<n;o++)e[o]=r[o]+jC(e[o-i],t[o],t[o-i])&255}}function jC(r,e,t){const n=r+e-t,i=Math.abs(n-r),o=Math.abs(n-e),l=Math.abs(n-t);return i<=o&&i<=l?r:o<=l?e:t}function RC(r,e,t,n,i,o){switch(r){case 0:qw(e,t,i);break;case 1:Hw(e,t,i,o);break;case 2:Gw(e,t,n,i);break;case 3:Kw(e,t,n,i,o);break;case 4:Jw(e,t,n,i,o);break;default:throw new Error(`Unsupported filter: ${r}`)}}const PC=new Uint16Array([255]),NC=new Uint8Array(PC.buffer),BC=NC[0]===255;function LC(r){const{data:e,width:t,height:n,channels:i,depth:o}=r,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(o/8)*i,h=new Uint8Array(n*t*u);let d=0;for(let g=0;g<7;g++){const b=l[g],S=Math.ceil((t-b.x)/b.xStep),v=Math.ceil((n-b.y)/b.yStep);if(S<=0||v<=0)continue;const N=S*u,E=new Uint8Array(N);for(let L=0;L<v;L++){const C=e[d++],M=e.subarray(d,d+N);d+=N;const $=new Uint8Array(N);RC(C,M,$,E,N,u),E.set($);for(let F=0;F<S;F++){const ne=b.x+F*b.xStep,ue=b.y+L*b.yStep;if(!(ne>=t||ue>=n))for(let V=0;V<u;V++)h[(ue*t+ne)*u+V]=$[F*u+V]}}}if(o===16){const g=new Uint16Array(h.buffer);if(BC)for(let b=0;b<g.length;b++)g[b]=FC(g[b]);return g}else return h}function FC(r){return(r&255)<<8|r>>8&255}const zC=new Uint16Array([255]),VC=new Uint8Array(zC.buffer),OC=VC[0]===255,MC=new Uint8Array(0);function dx(r){const{data:e,width:t,height:n,channels:i,depth:o}=r,l=Math.ceil(o/8)*i,u=Math.ceil(o/8*i*t),h=new Uint8Array(n*u);let d=MC,g=0,b,S;for(let v=0;v<n;v++){switch(b=e.subarray(g+1,g+1+u),S=h.subarray(v*u,(v+1)*u),e[g]){case 0:qw(b,S,u);break;case 1:Hw(b,S,u,l);break;case 2:Gw(b,S,d,u);break;case 3:Kw(b,S,d,u,l);break;case 4:Jw(b,S,d,u,l);break;default:throw new Error(`Unsupported filter: ${e[g]}`)}d=S,g+=u+1}if(o===16){const v=new Uint16Array(h.buffer);if(OC)for(let N=0;N<v.length;N++)v[N]=DC(v[N]);return v}else return h}function DC(r){return(r&255)<<8|r>>8&255}const Gp=Uint8Array.of(137,80,78,71,13,10,26,10);function hx(r){if(!WC(r.readBytes(Gp.length)))throw new Error("wrong PNG signature")}function WC(r){if(r.length<Gp.length)return!1;for(let e=0;e<Gp.length;e++)if(r[e]!==Gp[e])return!1;return!0}const $C="tEXt",UC=0,Yw=new TextDecoder("latin1");function qC(r){if(GC(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const HC=/^[\u0000-\u00FF]*$/;function GC(r){if(!HC.test(r))throw new Error("invalid latin1 text")}function KC(r,e,t){const n=Qw(e);r[n]=JC(e,t-n.length-1)}function Qw(r){for(r.mark();r.readByte()!==UC;);const e=r.offset;r.reset();const t=Yw.decode(r.readBytes(e-r.offset-1));return r.skip(1),qC(t),t}function JC(r,e){return Yw.decode(r.readBytes(e))}const fs={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Cg={UNKNOWN:-1,DEFLATE:0},fx={UNKNOWN:-1,ADAPTIVE:0},kg={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Np={NONE:0,BACKGROUND:1,PREVIOUS:2},Ig={SOURCE:0,OVER:1};class YC extends r5{constructor(t,n={}){super(t);Hr(this,"_checkCrc");Hr(this,"_inflator");Hr(this,"_png");Hr(this,"_apng");Hr(this,"_end");Hr(this,"_hasPalette");Hr(this,"_palette");Hr(this,"_hasTransparency");Hr(this,"_transparency");Hr(this,"_compressionMethod");Hr(this,"_filterMethod");Hr(this,"_interlaceMethod");Hr(this,"_colorType");Hr(this,"_isAnimated");Hr(this,"_numberOfFrames");Hr(this,"_numberOfPlays");Hr(this,"_frames");Hr(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new lx,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Cg.UNKNOWN,this._filterMethod=fx.UNKNOWN,this._interlaceMethod=kg.UNKNOWN,this._colorType=fs.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(hx(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeChunk(t,n)}return this.decodeImage(),this._png}decodeApng(){for(hx(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(t,n)}return this.decodeApngImage(),this._apng}decodeChunk(t,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case $C:KC(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?ux(this,t+4,n):this.skip(4)}decodeApngChunk(t,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,n),this.offset=i+t;break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?ux(this,t+4,n):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=QC(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case fs.GREYSCALE:i=1;break;case fs.TRUECOLOUR:i=3;break;case fs.INDEXED_COLOUR:i=1;break;case fs.GREYSCALE_ALPHA:i=2;break;case fs.TRUECOLOUR_ALPHA:i=4;break;case fs.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==Cg.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const n=t/3;this._hasPalette=!0;const i=[];this._palette=i;for(let o=0;o<n;o++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const n=t,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let n=t,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case fs.GREYSCALE:case fs.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let n=0;n<t/2;n++)this._transparency[n]=this.readUint16();break}case fs.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let n=0;for(;n<t;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case fs.UNKNOWN:case fs.GREYSCALE_ALPHA:case fs.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const n=Qw(this),i=this.readUint8();if(i!==Cg.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const o=this.readBytes(t-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:kC(o)}}decodepHYs(){const t=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:t,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const n={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(t);if(i){if(i.data=dx({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const o=this._apng.frames.at(t-1);this.disposeFrame(i,o,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(t,n,i){switch(t.disposeOp){case Np.NONE:break;case Np.BACKGROUND:for(let o=0;o<this._png.height;o++)for(let l=0;l<this._png.width;l++){const u=(o*t.width+l)*this._png.channels;for(let h=0;h<this._png.channels;h++)i.data[u+h]=0}break;case Np.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,n){const i=1<<this._png.depth,o=(l,u)=>{const h=((l+n.yOffset)*this._png.width+n.xOffset+u)*this._png.channels,d=(l*n.width+u)*this._png.channels;return{index:h,frameIndex:d}};switch(n.blendOp){case Ig.SOURCE:for(let l=0;l<n.height;l++)for(let u=0;u<n.width;u++){const{index:h,frameIndex:d}=o(l,u);for(let g=0;g<this._png.channels;g++)t.data[h+g]=n.data[d+g]}break;case Ig.OVER:for(let l=0;l<n.height;l++)for(let u=0;u<n.width;u++){const{index:h,frameIndex:d}=o(l,u);for(let g=0;g<this._png.channels;g++){const b=n.data[d+this._png.channels-1]/i,S=g%(this._png.channels-1)===0?1:n.data[d+g],v=Math.floor(b*S+(1-b)*t.data[h+g]);t.data[h+g]+=v}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==fx.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===kg.NO_INTERLACE)this._png.data=dx({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===kg.ADAM7)this._png.data=LC({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,n=this._frames.at(-1);n?n.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Np.NONE,blendOp:Ig.SOURCE,data:t}),this._inflator=new lx,this._writingDataChunks=!1}}function QC(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var px;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(px||(px={}));function XC(r,e){return new YC(r,e).decode()}var Qt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Eg(){Qt.console&&typeof Qt.console.log=="function"&&Qt.console.log.apply(Qt.console,arguments)}var rn={log:Eg,warn:function(r){Qt.console&&(typeof Qt.console.warn=="function"?Qt.console.warn.apply(Qt.console,arguments):Eg.call(null,arguments))},error:function(r){Qt.console&&(typeof Qt.console.error=="function"?Qt.console.error.apply(Qt.console,arguments):Eg(r))}};function jg(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){nu(n.response,e,t)},n.onerror=function(){rn.error("could not download file")},n.send()}function mx(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Bp(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var nu=Qt.saveAs||((typeof window>"u"?"undefined":Gr(window))!=="object"||window!==Qt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=Qt.URL||Qt.webkitURL,i=document.createElement("a");e=e||r.name||"download",i.download=e,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin!==location.origin?mx(i.href)?jg(r,e,t):Bp(i,i.target="_blank"):Bp(i)):(i.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Bp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(mx(r))jg(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){Bp(n)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:Gr(o)!=="object"&&(rn.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return jg(r,e,t);var i=r.type==="application/octet-stream",o=/constructor/i.test(Qt.HTMLElement)||Qt.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||i&&o)&&(typeof FileReader>"u"?"undefined":Gr(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var g=u.result;g=l?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=g:location=g,n=null},u.readAsDataURL(r)}else{var h=Qt.URL||Qt.webkitURL,d=h.createObjectURL(r);n?n.location=d:location.href=d,n=null,setTimeout(function(){h.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Xw(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],n=0;n<t.length;n++){var i=t[n].re,o=t[n].process,l=i.exec(r);l&&(e=o(l),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),h=this.g.toString(16),d=this.b.toString(16);return u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),d.length==1&&(d="0"+d),"#"+u+h+d}}var Kp=Qt.atob.bind(Qt),gx=Qt.btoa.bind(Qt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Rg(r,e){var t=r[0],n=r[1],i=r[2],o=r[3];t=so(t,n,i,o,e[0],7,-680876936),o=so(o,t,n,i,e[1],12,-389564586),i=so(i,o,t,n,e[2],17,606105819),n=so(n,i,o,t,e[3],22,-1044525330),t=so(t,n,i,o,e[4],7,-176418897),o=so(o,t,n,i,e[5],12,1200080426),i=so(i,o,t,n,e[6],17,-1473231341),n=so(n,i,o,t,e[7],22,-45705983),t=so(t,n,i,o,e[8],7,1770035416),o=so(o,t,n,i,e[9],12,-1958414417),i=so(i,o,t,n,e[10],17,-42063),n=so(n,i,o,t,e[11],22,-1990404162),t=so(t,n,i,o,e[12],7,1804603682),o=so(o,t,n,i,e[13],12,-40341101),i=so(i,o,t,n,e[14],17,-1502002290),t=ao(t,n=so(n,i,o,t,e[15],22,1236535329),i,o,e[1],5,-165796510),o=ao(o,t,n,i,e[6],9,-1069501632),i=ao(i,o,t,n,e[11],14,643717713),n=ao(n,i,o,t,e[0],20,-373897302),t=ao(t,n,i,o,e[5],5,-701558691),o=ao(o,t,n,i,e[10],9,38016083),i=ao(i,o,t,n,e[15],14,-660478335),n=ao(n,i,o,t,e[4],20,-405537848),t=ao(t,n,i,o,e[9],5,568446438),o=ao(o,t,n,i,e[14],9,-1019803690),i=ao(i,o,t,n,e[3],14,-187363961),n=ao(n,i,o,t,e[8],20,1163531501),t=ao(t,n,i,o,e[13],5,-1444681467),o=ao(o,t,n,i,e[2],9,-51403784),i=ao(i,o,t,n,e[7],14,1735328473),t=lo(t,n=ao(n,i,o,t,e[12],20,-1926607734),i,o,e[5],4,-378558),o=lo(o,t,n,i,e[8],11,-2022574463),i=lo(i,o,t,n,e[11],16,1839030562),n=lo(n,i,o,t,e[14],23,-35309556),t=lo(t,n,i,o,e[1],4,-1530992060),o=lo(o,t,n,i,e[4],11,1272893353),i=lo(i,o,t,n,e[7],16,-155497632),n=lo(n,i,o,t,e[10],23,-1094730640),t=lo(t,n,i,o,e[13],4,681279174),o=lo(o,t,n,i,e[0],11,-358537222),i=lo(i,o,t,n,e[3],16,-722521979),n=lo(n,i,o,t,e[6],23,76029189),t=lo(t,n,i,o,e[9],4,-640364487),o=lo(o,t,n,i,e[12],11,-421815835),i=lo(i,o,t,n,e[15],16,530742520),t=co(t,n=lo(n,i,o,t,e[2],23,-995338651),i,o,e[0],6,-198630844),o=co(o,t,n,i,e[7],10,1126891415),i=co(i,o,t,n,e[14],15,-1416354905),n=co(n,i,o,t,e[5],21,-57434055),t=co(t,n,i,o,e[12],6,1700485571),o=co(o,t,n,i,e[3],10,-1894986606),i=co(i,o,t,n,e[10],15,-1051523),n=co(n,i,o,t,e[1],21,-2054922799),t=co(t,n,i,o,e[8],6,1873313359),o=co(o,t,n,i,e[15],10,-30611744),i=co(i,o,t,n,e[6],15,-1560198380),n=co(n,i,o,t,e[13],21,1309151649),t=co(t,n,i,o,e[4],6,-145523070),o=co(o,t,n,i,e[11],10,-1120210379),i=co(i,o,t,n,e[2],15,718787259),n=co(n,i,o,t,e[9],21,-343485551),r[0]=gc(t,r[0]),r[1]=gc(n,r[1]),r[2]=gc(i,r[2]),r[3]=gc(o,r[3])}function Km(r,e,t,n,i,o){return e=gc(gc(e,r),gc(n,o)),gc(e<<i|e>>>32-i,t)}function so(r,e,t,n,i,o,l){return Km(e&t|~e&n,r,e,i,o,l)}function ao(r,e,t,n,i,o,l){return Km(e&n|t&~n,r,e,i,o,l)}function lo(r,e,t,n,i,o,l){return Km(e^t^n,r,e,i,o,l)}function co(r,e,t,n,i,o,l){return Km(t^(e|~n),r,e,i,o,l)}function Zw(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)Rg(n,ZC(r.substring(e-64,e)));r=r.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Rg(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Rg(n,i),n}function ZC(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}var yx="0123456789abcdef".split("");function ek(r){for(var e="",t=0;t<4;t++)e+=yx[r>>8*t+4&15]+yx[r>>8*t&15];return e}function tk(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function l1(r){return Zw(r).map(tk).join("")}var rk=(function(r){for(var e=0;e<r.length;e++)r[e]=ek(r[e]);return r.join("")})(Zw("hello"))!="5d41402abc4b2a76b9719d911017c592";function gc(r,e){if(rk){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function c1(r,e){var t,n,i,o;if(r!==t){for(var l=(i=r,o=1+(256/r.length|0),new Array(o+1).join(i)),u=[],h=0;h<256;h++)u[h]=h;var d=0;for(h=0;h<256;h++){var g=u[h];d=(d+g+l.charCodeAt(h))%256,u[h]=u[d],u[d]=g}t=r,n=u}else u=n;var b=e.length,S=0,v=0,N="";for(h=0;h<b;h++)v=(v+(g=u[S=(S+1)%256]))%256,u[S]=u[v],u[v]=g,l=u[(u[S]+u[v])%256],N+=String.fromCharCode(e.charCodeAt(h)^l);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var xx={print:4,modify:8,copy:16,"annot-forms":32};function bd(r,e,t,n){this.v=1,this.r=2;var i=192;r.forEach(function(u){if(xx.perm!==void 0)throw new Error("Invalid permission: "+u);i+=xx[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),l=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,l),this.P=-(1+(255^i)),this.encryptionKey=l1(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=c1(this.encryptionKey,this.padding)}function wd(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var i=r.charCodeAt(n);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):r[n]}return e}function vx(r){if(Gr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,i){if(i=i||!1,typeof t!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[n,!!i],o},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[t]){var l=e[t][o];try{l[0].apply(r,n)}catch(u){Qt.console&&rn.error("jsPDF PubSub Error",u.message,u)}l[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function vm(r){if(!(this instanceof vm))return new vm(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function eS(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function au(r,e,t,n,i){if(!(this instanceof au))return new au(r,e,t,n,i);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,eS.call(this,n,i)}function kd(r,e,t,n,i){if(!(this instanceof kd))return new kd(r,e,t,n,i);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,eS.call(this,n,i)}function Ct(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],o=arguments[3],l=[],u=1,h=16,d="S",g=null;Gr(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,i=r.format||i,o=r.compress||r.compressPdf||o,(g=r.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),u=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(h=r.floatPrecision),d=r.defaultPathOperation||"S"),l=r.filters||(o===!0?["FlateEncode"]:l),n=n||"mm",t=(""+(t||"P")).toLowerCase();var b=r.putOnlyUsedFonts||!1,S={},v={internal:{},__private__:{}};v.__private__.PubSub=vx;var N="1.3",E=v.__private__.getPdfVersion=function(){return N};v.__private__.setPdfVersion=function(_){N=_};var L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return L};var C=v.__private__.getPageFormat=function(_){return L[_]};i=i||"a4";var M="compat",$="advanced",F=M;function ne(){this.saveGraphicsState(),de(new Rt(jt,0,0,-jt,0,Si()*jt).toString()+" cm"),this.setFontSize(this.getFontSize()/jt),d="n",F=$}function ue(){this.restoreGraphicsState(),d="S",F=M}var V=v.__private__.combineFontStyleAndFontWeight=function(_,H){if(_=="bold"&&H=="normal"||_=="bold"&&H==400||_=="normal"&&H=="italic"||_=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(_=H==400||H==="normal"?_==="italic"?"italic":"normal":H!=700&&H!=="bold"||_!=="normal"?(H==700?"bold":H)+""+_:"bold"),_};v.advancedAPI=function(_){var H=F===M;return H&&ne.call(this),typeof _!="function"||(_(this),H&&ue.call(this)),this},v.compatAPI=function(_){var H=F===$;return H&&ue.call(this),typeof _!="function"||(_(this),H&&ne.call(this)),this},v.isAdvancedAPI=function(){return F===$};var k,A=function(_){if(F!==$)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=v.roundToPrecision=v.__private__.roundToPrecision=function(_,H){var ce=e||H;if(isNaN(_)||isNaN(ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(ce).replace(/0+$/,"")};k=v.hpf=v.__private__.hpf=typeof h=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return O(_,h)}:h==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return O(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return O(_,16)};var I=v.f2=v.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return O(_,2)},w=v.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return O(_,3)},B=v.scale=v.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return F===M?_*jt:F===$?_:void 0},D=function(_){return B((function(H){return F===M?Si()-H:F===$?H:void 0})(_))};v.__private__.setPrecision=v.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(e=parseInt(_,10))};var q,oe="00000000000000000000000000000000",se=v.__private__.getFileId=function(){return oe},ie=v.__private__.setFileId=function(_){return oe=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():oe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(Or=new bd(g.userPermissions,g.userPassword,g.ownerPassword,oe)),oe};v.setFileId=function(_){return ie(_),this},v.getFileId=function(){return se()};var ve=v.__private__.convertDateToPDFDate=function(_){var H=_.getTimezoneOffset(),ce=H<0?"+":"-",ye=Math.floor(Math.abs(H/60)),Ce=Math.abs(H%60),De=[ce,re(ye),"'",re(Ce),"'"].join("");return["D:",_.getFullYear(),re(_.getMonth()+1),re(_.getDate()),re(_.getHours()),re(_.getMinutes()),re(_.getSeconds()),De].join("")},be=v.__private__.convertPDFDateToDate=function(_){var H=parseInt(_.substr(2,4),10),ce=parseInt(_.substr(6,2),10)-1,ye=parseInt(_.substr(8,2),10),Ce=parseInt(_.substr(10,2),10),De=parseInt(_.substr(12,2),10),Ge=parseInt(_.substr(14,2),10);return new Date(H,ce,ye,Ce,De,Ge,0)},Z=v.__private__.setCreationDate=function(_){var H;if(_===void 0&&(_=new Date),_ instanceof Date)H=ve(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=_}return q=H},W=v.__private__.getCreationDate=function(_){var H=q;return _==="jsDate"&&(H=be(q)),H};v.setCreationDate=function(_){return Z(_),this},v.getCreationDate=function(_){return W(_)};var J,re=v.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},fe=v.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},ge=0,_e=[],he=[],xe=0,Pe=[],Ue=[],Xe=!1,Ze=he;v.__private__.setCustomOutputDestination=function(_){Xe=!0,Ze=_};var ze=function(_){Xe||(Ze=_)};v.__private__.resetCustomOutputDestination=function(){Xe=!1,Ze=he};var de=v.__private__.out=function(_){return _=_.toString(),xe+=_.length+1,Ze.push(_),Ze},Lt=v.__private__.write=function(_){return de(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},Et=v.__private__.getArrayBuffer=function(_){for(var H=_.length,ce=new ArrayBuffer(H),ye=new Uint8Array(ce);H--;)ye[H]=_.charCodeAt(H);return ce},wt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return wt};var He=r.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(_){return He=F===$?_/jt:_,this};var ot,rt=v.__private__.getFontSize=v.getFontSize=function(){return F===M?He:He*jt},Jt=r.R2L||!1;v.__private__.setR2L=v.setR2L=function(_){return Jt=_,this},v.__private__.getR2L=v.getR2L=function(){return Jt};var _t,mr=v.__private__.setZoomMode=function(_){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))ot=_;else if(isNaN(_)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');ot=_}else ot=parseInt(_,10)};v.__private__.getZoomMode=function(){return ot};var Ft,qt=v.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');_t=_};v.__private__.getPageMode=function(){return _t};var vr=v.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');Ft=_};v.__private__.getLayoutMode=function(){return Ft},v.__private__.setDisplayMode=v.setDisplayMode=function(_,H,ce){return mr(_),vr(H),qt(ce),this};var Ot={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(_){if(Object.keys(Ot).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ot[_]},v.__private__.getDocumentProperties=function(){return Ot},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(_){for(var H in Ot)Ot.hasOwnProperty(H)&&_[H]&&(Ot[H]=_[H]);return this},v.__private__.setDocumentProperty=function(_,H){if(Object.keys(Ot).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ot[_]=H};var Tt,jt,pt,Ir,ir,ht={},Ht={},sr=[],It={},tr={},Wt={},Er={},zr=null,$t=0,Mt=[],ar=new vx(v),Hi=r.hotfixes||[],zn={},Ro={},Vn=[],Rt=function _(H,ce,ye,Ce,De,Ge){if(!(this instanceof _))return new _(H,ce,ye,Ce,De,Ge);isNaN(H)&&(H=1),isNaN(ce)&&(ce=0),isNaN(ye)&&(ye=0),isNaN(Ce)&&(Ce=1),isNaN(De)&&(De=0),isNaN(Ge)&&(Ge=0),this._matrix=[H,ce,ye,Ce,De,Ge]};Object.defineProperty(Rt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Rt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Rt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Rt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Rt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Rt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Rt.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Rt.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Rt.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Rt.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Rt.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Rt.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Rt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Rt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Rt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Rt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Rt.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(k).join(_)},Rt.prototype.multiply=function(_){var H=_.sx*this.sx+_.shy*this.shx,ce=_.sx*this.shy+_.shy*this.sy,ye=_.shx*this.sx+_.sy*this.shx,Ce=_.shx*this.shy+_.sy*this.sy,De=_.tx*this.sx+_.ty*this.shx+this.tx,Ge=_.tx*this.shy+_.ty*this.sy+this.ty;return new Rt(H,ce,ye,Ce,De,Ge)},Rt.prototype.decompose=function(){var _=this.sx,H=this.shy,ce=this.shx,ye=this.sy,Ce=this.tx,De=this.ty,Ge=Math.sqrt(_*_+H*H),lt=(_/=Ge)*ce+(H/=Ge)*ye;ce-=_*lt,ye-=H*lt;var mt=Math.sqrt(ce*ce+ye*ye);return lt/=mt,_*(ye/=mt)<H*(ce/=mt)&&(_=-_,H=-H,lt=-lt,Ge=-Ge),{scale:new Rt(Ge,0,0,mt,0,0),translate:new Rt(1,0,0,1,Ce,De),rotate:new Rt(_,H,-H,_,0,0),skew:new Rt(1,0,lt,1,0,0)}},Rt.prototype.toString=function(_){return this.join(" ")},Rt.prototype.inversed=function(){var _=this.sx,H=this.shy,ce=this.shx,ye=this.sy,Ce=this.tx,De=this.ty,Ge=1/(_*ye-H*ce),lt=ye*Ge,mt=-H*Ge,Bt=-ce*Ge,vt=_*Ge;return new Rt(lt,mt,Bt,vt,-lt*Ce-Bt*De,-mt*Ce-vt*De)},Rt.prototype.applyToPoint=function(_){var H=_.x*this.sx+_.y*this.shx+this.tx,ce=_.x*this.shy+_.y*this.sy+this.ty;return new wi(H,ce)},Rt.prototype.applyToRectangle=function(_){var H=this.applyToPoint(_),ce=this.applyToPoint(new wi(_.x+_.w,_.y+_.h));return new Cs(H.x,H.y,ce.x-H.x,ce.y-H.y)},Rt.prototype.clone=function(){var _=this.sx,H=this.shy,ce=this.shx,ye=this.sy,Ce=this.tx,De=this.ty;return new Rt(_,H,ce,ye,Ce,De)},v.Matrix=Rt;var Pi=v.matrixMult=function(_,H){return H.multiply(_)},mi=new Rt(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=mi;var On=function(_,H){if(!tr[_]){var ce=(H instanceof au?"Sh":"P")+(Object.keys(It).length+1).toString(10);H.id=ce,tr[_]=ce,It[ce]=H,ar.publish("addPattern",H)}};v.ShadingPattern=au,v.TilingPattern=kd,v.addShadingPattern=function(_,H){return A("addShadingPattern()"),On(_,H),this},v.beginTilingPattern=function(_){A("beginTilingPattern()"),li(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},v.endTilingPattern=function(_,H){A("endTilingPattern()"),H.stream=Ue[J].join(`
`),On(_,H),ar.publish("endTilingPattern",H),Vn.pop().restore()};var Ni,Cr=v.__private__.newObject=function(){var _=Vr();return un(_,!0),_},Vr=v.__private__.newObjectDeferred=function(){return ge++,_e[ge]=function(){return xe},ge},un=function(_,H){return H=typeof H=="boolean"&&H,_e[_]=xe,H&&de(_+" 0 obj"),_},Yn=v.__private__.newAdditionalObject=function(){var _={objId:Vr(),content:""};return Pe.push(_),_},Yo=Vr(),Gi=Vr(),Ki=v.__private__.decodeColorString=function(_){var H=_.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length!==5||H[4]!=="k"&&H[4]!=="K"||(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var ce=parseFloat(H[0]);H=[ce,ce,ce,"r"]}for(var ye="#",Ce=0;Ce<3;Ce++)ye+=("0"+Math.floor(255*parseFloat(H[Ce])).toString(16)).slice(-2);return ye},bn=v.__private__.encodeColorString=function(_){var H;typeof _=="string"&&(_={ch1:_});var ce=_.ch1,ye=_.ch2,Ce=_.ch3,De=_.ch4,Ge=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ce=="string"&&ce.charAt(0)!=="#"){var lt=new Xw(ce);if(lt.ok)ce=lt.toHex();else if(!/^\d*\.?\d*$/.test(ce))throw new Error('Invalid color "'+ce+'" passed to jsPDF.encodeColorString.')}if(typeof ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ce)&&(ce="#"+ce[1]+ce[1]+ce[2]+ce[2]+ce[3]+ce[3]),typeof ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ce)){var mt=parseInt(ce.substr(1),16);ce=mt>>16&255,ye=mt>>8&255,Ce=255&mt}if(ye===void 0||De===void 0&&ce===ye&&ye===Ce)H=typeof ce=="string"?ce+" "+Ge[0]:_.precision===2?I(ce/255)+" "+Ge[0]:w(ce/255)+" "+Ge[0];else if(De===void 0||Gr(De)==="object"){if(De&&!isNaN(De.a)&&De.a===0)return["1.","1.","1.",Ge[1]].join(" ");H=typeof ce=="string"?[ce,ye,Ce,Ge[1]].join(" "):_.precision===2?[I(ce/255),I(ye/255),I(Ce/255),Ge[1]].join(" "):[w(ce/255),w(ye/255),w(Ce/255),Ge[1]].join(" ")}else H=typeof ce=="string"?[ce,ye,Ce,De,Ge[2]].join(" "):_.precision===2?[I(ce),I(ye),I(Ce),I(De),Ge[2]].join(" "):[w(ce),w(ye),w(Ce),w(De),Ge[2]].join(" ");return H},Bi=v.__private__.getFilters=function(){return l},Li=v.__private__.putStream=function(_){var H=(_=_||{}).data||"",ce=_.filters||Bi(),ye=_.alreadyAppliedFilters||[],Ce=_.addLength1||!1,De=H.length,Ge=_.objectId,lt=function(R){return R};if(g!==null&&Ge===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(lt=Or.encryptor(Ge,0));var mt={};ce===!0&&(ce=["FlateEncode"]);var Bt=_.additionalKeyValues||[],vt=(mt=Ct.API.processDataByFilters!==void 0?Ct.API.processDataByFilters(H,ce):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(ye)?ye.join(" "):ye.toString());if(mt.data.length!==0&&(Bt.push({key:"Length",value:mt.data.length}),Ce===!0&&Bt.push({key:"Length1",value:De})),vt.length!=0)if(vt.split("/").length-1==1)Bt.push({key:"Filter",value:vt});else{Bt.push({key:"Filter",value:"["+vt+"]"});for(var gr=0;gr<Bt.length;gr+=1)if(Bt[gr].key==="DecodeParms"){for(var Qr=[],Mr=0;Mr<mt.reverseChain.split("/").length-1;Mr+=1)Qr.push("null");Qr.push(Bt[gr].value),Bt[gr].value="["+Qr.join(" ")+"]"}}de("<<");for(var m=0;m<Bt.length;m++)de("/"+Bt[m].key+" "+Bt[m].value);de(">>"),mt.data.length!==0&&(de("stream"),de(lt(mt.data)),de("endstream"))},bs=v.__private__.putPage=function(_){var H=_.number,ce=_.data,ye=_.objId,Ce=_.contentsObjId;un(ye,!0),de("<</Type /Page"),de("/Parent "+_.rootDictionaryObjId+" 0 R"),de("/Resources "+_.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(k(_.mediaBox.bottomLeftX))+" "+parseFloat(k(_.mediaBox.bottomLeftY))+" "+k(_.mediaBox.topRightX)+" "+k(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&de("/CropBox ["+k(_.cropBox.bottomLeftX)+" "+k(_.cropBox.bottomLeftY)+" "+k(_.cropBox.topRightX)+" "+k(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&de("/BleedBox ["+k(_.bleedBox.bottomLeftX)+" "+k(_.bleedBox.bottomLeftY)+" "+k(_.bleedBox.topRightX)+" "+k(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&de("/TrimBox ["+k(_.trimBox.bottomLeftX)+" "+k(_.trimBox.bottomLeftY)+" "+k(_.trimBox.topRightX)+" "+k(_.trimBox.topRightY)+"]"),_.artBox!==null&&de("/ArtBox ["+k(_.artBox.bottomLeftX)+" "+k(_.artBox.bottomLeftY)+" "+k(_.artBox.topRightX)+" "+k(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&de("/UserUnit "+_.userUnit),ar.publish("putPage",{objId:ye,pageContext:Mt[H],pageNumber:H,page:ce}),de("/Contents "+Ce+" 0 R"),de(">>"),de("endobj");var De=ce.join(`
`);return F===$&&(De+=`
Q`),un(Ce,!0),Li({data:De,filters:Bi(),objectId:Ce}),de("endobj"),ye},mo=v.__private__.putPages=function(){var _,H,ce=[];for(_=1;_<=$t;_++)Mt[_].objId=Vr(),Mt[_].contentsObjId=Vr();for(_=1;_<=$t;_++)ce.push(bs({number:_,data:Ue[_],objId:Mt[_].objId,contentsObjId:Mt[_].contentsObjId,mediaBox:Mt[_].mediaBox,cropBox:Mt[_].cropBox,bleedBox:Mt[_].bleedBox,trimBox:Mt[_].trimBox,artBox:Mt[_].artBox,userUnit:Mt[_].userUnit,rootDictionaryObjId:Yo,resourceDictionaryObjId:Gi}));un(Yo,!0),de("<</Type /Pages");var ye="/Kids [";for(H=0;H<$t;H++)ye+=ce[H]+" 0 R ";de(ye+"]"),de("/Count "+$t),de(">>"),de("endobj"),ar.publish("postPutPages")},go=function(_){ar.publish("putFont",{font:_,out:de,newObject:Cr,putStream:Li}),_.isAlreadyPutted!==!0&&(_.objectNumber=Cr(),de("<<"),de("/Type /Font"),de("/BaseFont /"+wd(_.postScriptName)),de("/Subtype /Type1"),typeof _.encoding=="string"&&de("/Encoding /"+_.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},ws=function(_){_.objectNumber=Cr();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[k(_.x),k(_.y),k(_.x+_.width),k(_.y+_.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var ce=_.pages[1].join(`
`);Li({data:ce,additionalKeyValues:H,objectId:_.objectNumber}),de("endobj")},Qo=function(_,H){H||(H=21);var ce=Cr(),ye=(function(Ge,lt){var mt,Bt=[],vt=1/(lt-1);for(mt=0;mt<1;mt+=vt)Bt.push(mt);if(Bt.push(1),Ge[0].offset!=0){var gr={offset:0,color:Ge[0].color};Ge.unshift(gr)}if(Ge[Ge.length-1].offset!=1){var Qr={offset:1,color:Ge[Ge.length-1].color};Ge.push(Qr)}for(var Mr="",m=0,R=0;R<Bt.length;R++){for(mt=Bt[R];mt>Ge[m+1].offset;)m++;var U=Ge[m].offset,ee=(mt-U)/(Ge[m+1].offset-U),ke=Ge[m].color,Be=Ge[m+1].color;Mr+=fe(Math.round((1-ee)*ke[0]+ee*Be[0]).toString(16))+fe(Math.round((1-ee)*ke[1]+ee*Be[1]).toString(16))+fe(Math.round((1-ee)*ke[2]+ee*Be[2]).toString(16))}return Mr.trim()})(_.colors,H),Ce=[];Ce.push({key:"FunctionType",value:"0"}),Ce.push({key:"Domain",value:"[0.0 1.0]"}),Ce.push({key:"Size",value:"["+H+"]"}),Ce.push({key:"BitsPerSample",value:"8"}),Ce.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ce.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Li({data:ye,additionalKeyValues:Ce,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ce}),de("endobj"),_.objectNumber=Cr(),de("<< /ShadingType "+_.type),de("/ColorSpace /DeviceRGB");var De="/Coords ["+k(parseFloat(_.coords[0]))+" "+k(parseFloat(_.coords[1]))+" ";_.type===2?De+=k(parseFloat(_.coords[2]))+" "+k(parseFloat(_.coords[3])):De+=k(parseFloat(_.coords[2]))+" "+k(parseFloat(_.coords[3]))+" "+k(parseFloat(_.coords[4]))+" "+k(parseFloat(_.coords[5])),de(De+="]"),_.matrix&&de("/Matrix ["+_.matrix.toString()+"]"),de("/Function "+ce+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},Po=function(_,H){var ce=Vr(),ye=Cr();H.push({resourcesOid:ce,objectOid:ye}),_.objectNumber=ye;var Ce=[];Ce.push({key:"Type",value:"/Pattern"}),Ce.push({key:"PatternType",value:"1"}),Ce.push({key:"PaintType",value:"1"}),Ce.push({key:"TilingType",value:"1"}),Ce.push({key:"BBox",value:"["+_.boundingBox.map(k).join(" ")+"]"}),Ce.push({key:"XStep",value:k(_.xStep)}),Ce.push({key:"YStep",value:k(_.yStep)}),Ce.push({key:"Resources",value:ce+" 0 R"}),_.matrix&&Ce.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),Li({data:_.stream,additionalKeyValues:Ce,objectId:_.objectNumber}),de("endobj")},Xo=function(_){for(var H in _.objectNumber=Cr(),de("<<"),_)switch(H){case"opacity":de("/ca "+I(_[H]));break;case"stroke-opacity":de("/CA "+I(_[H]))}de(">>"),de("endobj")},jr=function(_){un(_.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var H in de("/Font <<"),ht)ht.hasOwnProperty(H)&&(b===!1||b===!0&&S.hasOwnProperty(H))&&de("/"+H+" "+ht[H].objectNumber+" 0 R");de(">>")})(),(function(){if(Object.keys(It).length>0){for(var H in de("/Shading <<"),It)It.hasOwnProperty(H)&&It[H]instanceof au&&It[H].objectNumber>=0&&de("/"+H+" "+It[H].objectNumber+" 0 R");ar.publish("putShadingPatternDict"),de(">>")}})(),(function(H){if(Object.keys(It).length>0){for(var ce in de("/Pattern <<"),It)It.hasOwnProperty(ce)&&It[ce]instanceof v.TilingPattern&&It[ce].objectNumber>=0&&It[ce].objectNumber<H&&de("/"+ce+" "+It[ce].objectNumber+" 0 R");ar.publish("putTilingPatternDict"),de(">>")}})(_.objectOid),(function(){if(Object.keys(Wt).length>0){var H;for(H in de("/ExtGState <<"),Wt)Wt.hasOwnProperty(H)&&Wt[H].objectNumber>=0&&de("/"+H+" "+Wt[H].objectNumber+" 0 R");ar.publish("putGStateDict"),de(">>")}})(),(function(){for(var H in de("/XObject <<"),zn)zn.hasOwnProperty(H)&&zn[H].objectNumber>=0&&de("/"+H+" "+zn[H].objectNumber+" 0 R");ar.publish("putXobjectDict"),de(">>")})(),de(">>"),de("endobj")},Bl=function(_){Ht[_.fontName]=Ht[_.fontName]||{},Ht[_.fontName][_.fontStyle]=_.id},Us=function(_,H,ce,ye,Ce){var De={id:"F"+(Object.keys(ht).length+1).toString(10),postScriptName:_,fontName:H,fontStyle:ce,encoding:ye,isStandardFont:Ce||!1,metadata:{}};return ar.publish("addFont",{font:De,instance:this}),ht[De.id]=De,Bl(De),De.id},gi=v.__private__.pdfEscape=v.pdfEscape=function(_,H){return(function(ce,ye){var Ce,De,Ge,lt,mt,Bt,vt,gr,Qr;if(Ge=(ye=ye||{}).sourceEncoding||"Unicode",mt=ye.outputEncoding,(ye.autoencode||mt)&&ht[Tt].metadata&&ht[Tt].metadata[Ge]&&ht[Tt].metadata[Ge].encoding&&(lt=ht[Tt].metadata[Ge].encoding,!mt&&ht[Tt].encoding&&(mt=ht[Tt].encoding),!mt&&lt.codePages&&(mt=lt.codePages[0]),typeof mt=="string"&&(mt=lt[mt]),mt)){for(vt=!1,Bt=[],Ce=0,De=ce.length;Ce<De;Ce++)(gr=mt[ce.charCodeAt(Ce)])?Bt.push(String.fromCharCode(gr)):Bt.push(ce[Ce]),Bt[Ce].charCodeAt(0)>>8&&(vt=!0);ce=Bt.join("")}for(Ce=ce.length;vt===void 0&&Ce!==0;)ce.charCodeAt(Ce-1)>>8&&(vt=!0),Ce--;if(!vt)return ce;for(Bt=ye.noBOM?[]:[254,255],Ce=0,De=ce.length;Ce<De;Ce++){if((Qr=(gr=ce.charCodeAt(Ce))>>8)>>8)throw new Error("Character at position "+Ce+" of string '"+ce+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Bt.push(Qr),Bt.push(gr-(Qr<<8))}return String.fromCharCode.apply(void 0,Bt)})(_,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zo=v.__private__.beginPage=function(_){Ue[++$t]=[],Mt[$t]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},_s($t),ze(Ue[J])},wa=function(_,H){var ce,ye,Ce;switch(t=H||t,typeof _=="string"&&(ce=C(_.toLowerCase()),Array.isArray(ce)&&(ye=ce[0],Ce=ce[1])),Array.isArray(_)&&(ye=_[0]*jt,Ce=_[1]*jt),isNaN(ye)&&(ye=i[0],Ce=i[1]),(ye>14400||Ce>14400)&&(rn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ye=Math.min(14400,ye),Ce=Math.min(14400,Ce)),i=[ye,Ce],t.substr(0,1)){case"l":Ce>ye&&(i=[Ce,ye]);break;case"p":ye>Ce&&(i=[Ce,ye])}Zo(i),es(wn),de(Js),Qi!==0&&de(Qi+" J"),Aa!==0&&de(Aa+" j"),ar.publish("addPage",{pageNumber:$t})},Ss=function(_){_>0&&_<=$t&&(Ue.splice(_,1),Mt.splice(_,1),$t--,J>$t&&(J=$t),this.setPage(J))},_s=function(_){_>0&&_<=$t&&(J=_)},yi=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return Ue.length-1},Ya=function(_,H,ce){var ye,Ce=void 0;return ce=ce||{},_=_!==void 0?_:ht[Tt].fontName,H=H!==void 0?H:ht[Tt].fontStyle,ye=_.toLowerCase(),Ht[ye]!==void 0&&Ht[ye][H]!==void 0?Ce=Ht[ye][H]:Ht[_]!==void 0&&Ht[_][H]!==void 0?Ce=Ht[_][H]:ce.disableWarning===!1&&rn.warn("Unable to look up font label for font '"+_+"', '"+H+"'. Refer to getFontList() for available fonts."),Ce||ce.noFallback||(Ce=Ht.times[H])==null&&(Ce=Ht.times.normal),Ce},Qn=v.__private__.putInfo=function(){var _=Cr(),H=function(ye){return ye};for(var ce in g!==null&&(H=Or.encryptor(_,0)),de("<<"),de("/Producer ("+gi(H("jsPDF "+Ct.version))+")"),Ot)Ot.hasOwnProperty(ce)&&Ot[ce]&&de("/"+ce.substr(0,1).toUpperCase()+ce.substr(1)+" ("+gi(H(Ot[ce]))+")");de("/CreationDate ("+gi(H(q))+")"),de(">>"),de("endobj")},No=v.__private__.putCatalog=function(_){var H=(_=_||{}).rootDictionaryObjId||Yo;switch(Cr(),de("<<"),de("/Type /Catalog"),de("/Pages "+H+" 0 R"),ot||(ot="fullwidth"),ot){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ce=""+ot;ce.substr(ce.length-1)==="%"&&(ot=parseInt(ot)/100),typeof ot=="number"&&de("/OpenAction [3 0 R /XYZ null null "+I(ot)+"]")}switch(Ft||(Ft="continuous"),Ft){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}_t&&de("/PageMode /"+_t),ar.publish("putCatalog"),de(">>"),de("endobj")},wr=v.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(ge+1)),de("/Root "+ge+" 0 R"),de("/Info "+(ge-1)+" 0 R"),g!==null&&de("/Encrypt "+Or.oid+" 0 R"),de("/ID [ <"+oe+"> <"+oe+"> ]"),de(">>")},Ts=v.__private__.putHeader=function(){de("%PDF-"+N),de("%")},yo=v.__private__.putXRef=function(){var _="0000000000";de("xref"),de("0 "+(ge+1)),de("0000000000 65535 f ");for(var H=1;H<=ge;H++)typeof _e[H]=="function"?de((_+_e[H]()).slice(-10)+" 00000 n "):_e[H]!==void 0?de((_+_e[H]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},xi=v.__private__.buildDocument=function(){var _;ge=0,xe=0,he=[],_e=[],Pe=[],Yo=Vr(),Gi=Vr(),ze(he),ar.publish("buildDocument"),Ts(),mo(),(function(){ar.publish("putAdditionalObjects");for(var ce=0;ce<Pe.length;ce++){var ye=Pe[ce];un(ye.objId,!0),de(ye.content),de("endobj")}ar.publish("postPutAdditionalObjects")})(),_=[],(function(){for(var ce in ht)ht.hasOwnProperty(ce)&&(b===!1||b===!0&&S.hasOwnProperty(ce))&&go(ht[ce])})(),(function(){var ce;for(ce in Wt)Wt.hasOwnProperty(ce)&&Xo(Wt[ce])})(),(function(){for(var ce in zn)zn.hasOwnProperty(ce)&&ws(zn[ce])})(),(function(ce){var ye;for(ye in It)It.hasOwnProperty(ye)&&(It[ye]instanceof au?Qo(It[ye]):It[ye]instanceof kd&&Po(It[ye],ce))})(_),ar.publish("putResources"),_.forEach(jr),jr({resourcesOid:Gi,objectOid:Number.MAX_SAFE_INTEGER}),ar.publish("postPutResources"),g!==null&&(Or.oid=Cr(),de("<<"),de("/Filter /Standard"),de("/V "+Or.v),de("/R "+Or.r),de("/U <"+Or.toHexString(Or.U)+">"),de("/O <"+Or.toHexString(Or.O)+">"),de("/P "+Or.P),de(">>"),de("endobj")),Qn(),No();var H=xe;return yo(),wr(),de("startxref"),de(""+H),de("%%EOF"),ze(Ue[J]),he.join(`
`)},lr=v.__private__.getBlob=function(_){return new Blob([Et(_)],{type:"application/pdf"})},Mn=v.output=v.__private__.output=(Ni=function(_,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",_){case void 0:return xi();case"save":v.save(H.filename);break;case"arraybuffer":return Et(xi());case"blob":return lr(xi());case"bloburi":case"bloburl":if(Qt.URL!==void 0&&typeof Qt.URL.createObjectURL=="function")return Qt.URL&&Qt.URL.createObjectURL(lr(xi()))||void 0;rn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ce="",ye=xi();try{ce=gx(ye)}catch{ce=gx(unescape(encodeURIComponent(ye)))}return"data:application/pdf;filename="+H.filename+";base64,"+ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Qt)==="[object Window]"){var Ce="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",De=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(Ce=H.pdfObjectUrl,De="");var Ge='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ce+'"'+De+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",lt=Qt.open();return lt!==null&&lt.document.write(Ge),lt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Qt)==="[object Window]"){var mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',Bt=Qt.open();if(Bt!==null){Bt.document.write(mt);var vt=this;Bt.document.documentElement.querySelector("#pdfViewer").onload=function(){Bt.document.title=H.filename,Bt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(vt.output("bloburl"))}}return Bt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Qt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var gr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',Qr=Qt.open();if(Qr!==null&&(Qr.document.write(gr),Qr.document.title=H.filename),Qr||typeof safari>"u")return Qr;break;case"datauri":case"dataurl":return Qt.document.location.href=this.output("datauristring",H);default:return null}},Ni.foo=function(){try{return Ni.apply(this,arguments)}catch(ce){var _=ce.stack||"";~_.indexOf(" at ")&&(_=_.split(" at ")[1]);var H="Error in function "+_.split(`
`)[0].split("<")[0]+": "+ce.message;if(!Qt.console)throw new Error(H);Qt.console.error(H,ce),Qt.alert&&alert(H)}},Ni.foo.bar=Ni,Ni.foo),xo=function(_){return Array.isArray(Hi)===!0&&Hi.indexOf(_)>-1};switch(n){case"pt":jt=1;break;case"mm":jt=72/25.4;break;case"cm":jt=72/2.54;break;case"in":jt=72;break;case"px":jt=xo("px_scaling")==1?.75:96/72;break;case"pc":case"em":jt=12;break;case"ex":jt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);jt=n}var Or=null;Z(),ie();var qs=v.__private__.getPageInfo=v.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Mt[_].objId,pageNumber:_,pageContext:Mt[_]}},Qa=v.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in Mt)if(Mt[H].objId===_)break;return qs(H)},Xa=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:Mt[J].objId,pageNumber:J,pageContext:Mt[J]}};v.addPage=function(){return wa.apply(this,arguments),this},v.setPage=function(){return _s.apply(this,arguments),ze.call(this,Ue[J]),this},v.insertPage=function(_){return this.addPage(),this.movePage(J,_),this},v.movePage=function(_,H){var ce,ye;if(_>H){ce=Ue[_],ye=Mt[_];for(var Ce=_;Ce>H;Ce--)Ue[Ce]=Ue[Ce-1],Mt[Ce]=Mt[Ce-1];Ue[H]=ce,Mt[H]=ye,this.setPage(H)}else if(_<H){ce=Ue[_],ye=Mt[_];for(var De=_;De<H;De++)Ue[De]=Ue[De+1],Mt[De]=Mt[De+1];Ue[H]=ce,Mt[H]=ye,this.setPage(H)}return this},v.deletePage=function(){return Ss.apply(this,arguments),this},v.__private__.text=v.text=function(_,H,ce,ye,Ce){var De,Ge,lt,mt,Bt,vt,gr,Qr,Mr,m=(ye=ye||{}).scope||this;if(typeof _=="number"&&typeof H=="number"&&(typeof ce=="string"||Array.isArray(ce))){var R=ce;ce=H,H=_,_=R}if(arguments[3]instanceof Rt==0?(lt=arguments[4],mt=arguments[5],Gr(gr=arguments[3])==="object"&&gr!==null||(typeof lt=="string"&&(mt=lt,lt=null),typeof gr=="string"&&(mt=gr,gr=null),typeof gr=="number"&&(lt=gr,gr=null),ye={flags:gr,angle:lt,align:mt})):(A("The transform parameter of text() with a Matrix value"),Mr=Ce),isNaN(H)||isNaN(ce)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return m;var U,ee="",ke=typeof ye.lineHeightFactor=="number"?ye.lineHeightFactor:bi,Be=m.internal.scaleFactor;function tt(Sr){return Sr=Sr.split("	").join(Array(ye.TabLen||9).join(" ")),gi(Sr,gr)}function Dt(Sr){for(var Br,fn=Sr.concat(),jn=[],ss=fn.length;ss--;)typeof(Br=fn.shift())=="string"?jn.push(Br):Array.isArray(Sr)&&(Br.length===1||Br[1]===void 0&&Br[2]===void 0)?jn.push(Br[0]):jn.push([Br[0],Br[1],Br[2]]);return jn}function Dr(Sr,Br){var fn;if(typeof Sr=="string")fn=Br(Sr)[0];else if(Array.isArray(Sr)){for(var jn,ss,zc=Sr.concat(),Ml=[],ta=zc.length;ta--;)typeof(jn=zc.shift())=="string"?Ml.push(Br(jn)[0]):Array.isArray(jn)&&typeof jn[0]=="string"&&(ss=Br(jn[0],jn[1],jn[2]),Ml.push([ss[0],ss[1],ss[2]]));fn=Ml}return fn}var dr=!1,Xr=!0;if(typeof _=="string")dr=!0;else if(Array.isArray(_)){var $n=_.concat();Ge=[];for(var Vi,en=$n.length;en--;)(typeof(Vi=$n.shift())!="string"||Array.isArray(Vi)&&typeof Vi[0]!="string")&&(Xr=!1);dr=Xr}if(dr===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var _i=He/m.internal.scaleFactor,Oo=_i*(ke-1);switch(ye.baseline){case"bottom":ce-=Oo;break;case"top":ce+=_i-Oo;break;case"hanging":ce+=_i-2*Oo;break;case"middle":ce+=_i/2-Oo}if((vt=ye.maxWidth||0)>0&&(typeof _=="string"?_=m.splitTextToSize(_,vt):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(Sr,Br){return Sr.concat(m.splitTextToSize(Br,vt))},[]))),De={text:_,x:H,y:ce,options:ye,mutex:{pdfEscape:gi,activeFontKey:Tt,fonts:ht,activeFontSize:He}},ar.publish("preProcessText",De),_=De.text,lt=(ye=De.options).angle,Mr instanceof Rt==0&&lt&&typeof lt=="number"){lt*=Math.PI/180,ye.rotationDirection===0&&(lt=-lt),F===$&&(lt=-lt);var Ys=Math.cos(lt),Fc=Math.sin(lt);Mr=new Rt(Ys,Fc,-Fc,Ys,0,0)}else lt&&lt instanceof Rt&&(Mr=lt);F!==$||Mr||(Mr=mi),(Bt=ye.charSpace||Yi)!==void 0&&(ee+=k(B(Bt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Qr=ye.horizontalScale)!==void 0&&(ee+=k(100*Qr)+` Tz
`),ye.lang;var dn=-1,is=ye.renderingMode!==void 0?ye.renderingMode:ye.stroke,Is=m.internal.getCurrentPageInfo().pageContext;switch(is){case 0:case!1:case"fill":dn=0;break;case 1:case!0:case"stroke":dn=1;break;case 2:case"fillThenStroke":dn=2;break;case 3:case"invisible":dn=3;break;case 4:case"fillAndAddForClipping":dn=4;break;case 5:case"strokeAndAddPathForClipping":dn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":dn=6;break;case 7:case"addToPathForClipping":dn=7}var $u=Is.usedRenderingMode!==void 0?Is.usedRenderingMode:-1;dn!==-1?ee+=dn+` Tr
`:$u!==-1&&(ee+=`0 Tr
`),dn!==-1&&(Is.usedRenderingMode=dn),mt=ye.align||"left";var wo,ka=He*ke,Fl=m.internal.pageSize.getWidth(),zl=ht[Tt];Bt=ye.charSpace||Yi,vt=ye.maxWidth||0,gr=Object.assign({autoencode:!0,noBOM:!0},ye.flags);var Qs=[],Mo=function(Sr){return m.getStringUnitWidth(Sr,{font:zl,charSpace:Bt,fontSize:He,doKerning:!1})*He/Be};if(Object.prototype.toString.call(_)==="[object Array]"){var So;Ge=Dt(_),mt!=="left"&&(wo=Ge.map(Mo));var _o,Ia=0;if(mt==="right"){H-=wo[0],_=[],en=Ge.length;for(var Es=0;Es<en;Es++)Es===0?(_o=Dn(H),So=Fo(ce)):(_o=B(Ia-wo[Es]),So=-ka),_.push([Ge[Es],_o,So]),Ia=wo[Es]}else if(mt==="center"){H-=wo[0]/2,_=[],en=Ge.length;for(var Xs=0;Xs<en;Xs++)Xs===0?(_o=Dn(H),So=Fo(ce)):(_o=B((Ia-wo[Xs])/2),So=-ka),_.push([Ge[Xs],_o,So]),Ia=wo[Xs]}else if(mt==="left"){_=[],en=Ge.length;for(var Zs=0;Zs<en;Zs++)_.push(Ge[Zs])}else if(mt==="justify"&&zl.encoding==="Identity-H"){_=[],en=Ge.length,vt=vt!==0?vt:Fl;for(var js=0,Sn=0;Sn<en;Sn++)if(So=Sn===0?Fo(ce):-ka,_o=Sn===0?Dn(H):js,Sn<en-1){var nl=B((vt-wo[Sn])/(Ge[Sn].split(" ").length-1)),Rs=Ge[Sn].split(" ");_.push([Rs[0]+" ",_o,So]),js=0;for(var os=1;os<Rs.length;os++){var il=(Mo(Rs[os-1]+" "+Rs[os])-Mo(Rs[os]))*Be+nl;os==Rs.length-1?_.push([Rs[os],il,0]):_.push([Rs[os]+" ",il,0]),js-=il}}else _.push([Ge[Sn],_o,So]);_.push(["",js,0])}else{if(mt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],en=Ge.length,vt=vt!==0?vt:Fl,Sn=0;Sn<en;Sn++){So=Sn===0?Fo(ce):-ka,_o=Sn===0?Dn(H):0;var ol=Ge[Sn].split(" ").length-1,Vl=ol>0?(vt-wo[Sn])/ol:0;Sn<en-1?Qs.push(k(B(Vl))):Qs.push(0),_.push([Ge[Sn],_o,So])}}}(typeof ye.R2L=="boolean"?ye.R2L:Jt)===!0&&(_=Dr(_,function(Sr,Br,fn){return[Sr.split("").reverse().join(""),Br,fn]})),De={text:_,x:H,y:ce,options:ye,mutex:{pdfEscape:gi,activeFontKey:Tt,fonts:ht,activeFontSize:He}},ar.publish("postProcessText",De),_=De.text,U=De.mutex.isHex||!1;var Ol=ht[Tt].encoding;Ol!=="WinAnsiEncoding"&&Ol!=="StandardEncoding"||(_=Dr(_,function(Sr,Br,fn){return[tt(Sr),Br,fn]})),Ge=Dt(_),_=[];for(var ea,Ea,ja,sl=Array.isArray(Ge[0])?1:0,Ra="",al=function(Sr,Br,fn){var jn="";return fn instanceof Rt?(fn=typeof ye.angle=="number"?Pi(fn,new Rt(1,0,0,1,Sr,Br)):Pi(new Rt(1,0,0,1,Sr,Br),fn),F===$&&(fn=Pi(new Rt(1,0,0,-1,0,0),fn)),jn=fn.join(" ")+` Tm
`):jn=k(Sr)+" "+k(Br)+` Td
`,jn},hn=0;hn<Ge.length;hn++){switch(Ra="",sl){case 1:ja=(U?"<":"(")+Ge[hn][0]+(U?">":")"),ea=parseFloat(Ge[hn][1]),Ea=parseFloat(Ge[hn][2]);break;case 0:ja=(U?"<":"(")+Ge[hn]+(U?">":")"),ea=Dn(H),Ea=Fo(ce)}Qs!==void 0&&Qs[hn]!==void 0&&(Ra=Qs[hn]+` Tw
`),hn===0?_.push(Ra+al(ea,Ea,Mr)+ja):sl===0?_.push(Ra+ja):sl===1&&_.push(Ra+al(ea,Ea,Mr)+ja)}_=sl===0?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var Xi=`BT
/`;return Xi+=Tt+" "+He+` Tf
`,Xi+=k(He*ke)+` TL
`,Xi+=Ji+`
`,Xi+=ee,Xi+=_,de(Xi+="ET"),S[Tt]=!0,m};var Hs=v.__private__.clip=v.clip=function(_){return de(_==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return Hs("evenodd")},v.__private__.discardPath=v.discardPath=function(){return de("n"),this};var Bo=v.__private__.isValidStyle=function(_){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&(H=!0),H};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(_){return Bo(_)&&(d=_),this};var Sa=v.__private__.getStyle=v.getStyle=function(_){var H=d;switch(_){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=_}return H},or=v.close=function(){return de("h"),this};v.stroke=function(){return de("S"),this},v.fill=function(_){return ai("f",_),this},v.fillEvenOdd=function(_){return ai("f*",_),this},v.fillStroke=function(_){return ai("B",_),this},v.fillStrokeEvenOdd=function(_){return ai("B*",_),this};var ai=function(_,H){Gr(H)==="object"?Za(H,_):de(_)},Gs=function(_){_===null||F===$&&_===void 0||(_=Sa(_),de(_))};function _a(_,H,ce,ye,Ce){var De=new kd(H||this.boundingBox,ce||this.xStep,ye||this.yStep,this.gState,Ce||this.matrix);De.stream=this.stream;var Ge=_+"$$"+this.cloneIndex+++"$$";return On(Ge,De),De}var Za=function(_,H){var ce=tr[_.key],ye=It[ce];if(ye instanceof au)de("q"),de(el(H)),ye.gState&&v.setGState(ye.gState),de(_.matrix.toString()+" cm"),de("/"+ce+" sh"),de("Q");else if(ye instanceof kd){var Ce=new Rt(1,0,0,-1,0,Si());_.matrix&&(Ce=Ce.multiply(_.matrix||mi),ce=_a.call(ye,_.key,_.boundingBox,_.xStep,_.yStep,Ce).id),de("q"),de("/Pattern cs"),de("/"+ce+" scn"),ye.gState&&v.setGState(ye.gState),de(H),de("Q")}},el=function(_){switch(_){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ks=v.moveTo=function(_,H){return de(k(B(_))+" "+k(D(H))+" m"),this},vi=v.lineTo=function(_,H){return de(k(B(_))+" "+k(D(H))+" l"),this},vo=v.curveTo=function(_,H,ce,ye,Ce,De){return de([k(B(_)),k(D(H)),k(B(ce)),k(D(ye)),k(B(Ce)),k(D(De)),"c"].join(" ")),this};v.__private__.line=v.line=function(_,H,ce,ye,Ce){if(isNaN(_)||isNaN(H)||isNaN(ce)||isNaN(ye)||!Bo(Ce))throw new Error("Invalid arguments passed to jsPDF.line");return F===M?this.lines([[ce-_,ye-H]],_,H,[1,1],Ce||"S"):this.lines([[ce-_,ye-H]],_,H,[1,1]).stroke()},v.__private__.lines=v.lines=function(_,H,ce,ye,Ce,De){var Ge,lt,mt,Bt,vt,gr,Qr,Mr,m,R,U,ee;if(typeof _=="number"&&(ee=ce,ce=H,H=_,_=ee),ye=ye||[1,1],De=De||!1,isNaN(H)||isNaN(ce)||!Array.isArray(_)||!Array.isArray(ye)||!Bo(Ce)||typeof De!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ks(H,ce),Ge=ye[0],lt=ye[1],Bt=_.length,R=H,U=ce,mt=0;mt<Bt;mt++)(vt=_[mt]).length===2?(R=vt[0]*Ge+R,U=vt[1]*lt+U,vi(R,U)):(gr=vt[0]*Ge+R,Qr=vt[1]*lt+U,Mr=vt[2]*Ge+R,m=vt[3]*lt+U,R=vt[4]*Ge+R,U=vt[5]*lt+U,vo(gr,Qr,Mr,m,R,U));return De&&or(),Gs(Ce),this},v.path=function(_){for(var H=0;H<_.length;H++){var ce=_[H],ye=ce.c;switch(ce.op){case"m":Ks(ye[0],ye[1]);break;case"l":vi(ye[0],ye[1]);break;case"c":vo.apply(this,ye);break;case"h":or()}}return this},v.__private__.rect=v.rect=function(_,H,ce,ye,Ce){if(isNaN(_)||isNaN(H)||isNaN(ce)||isNaN(ye)||!Bo(Ce))throw new Error("Invalid arguments passed to jsPDF.rect");return F===M&&(ye=-ye),de([k(B(_)),k(D(H)),k(B(ce)),k(B(ye)),"re"].join(" ")),Gs(Ce),this},v.__private__.triangle=v.triangle=function(_,H,ce,ye,Ce,De,Ge){if(isNaN(_)||isNaN(H)||isNaN(ce)||isNaN(ye)||isNaN(Ce)||isNaN(De)||!Bo(Ge))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ce-_,ye-H],[Ce-ce,De-ye],[_-Ce,H-De]],_,H,[1,1],Ge,!0),this},v.__private__.roundedRect=v.roundedRect=function(_,H,ce,ye,Ce,De,Ge){if(isNaN(_)||isNaN(H)||isNaN(ce)||isNaN(ye)||isNaN(Ce)||isNaN(De)||!Bo(Ge))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var lt=4/3*(Math.SQRT2-1);return Ce=Math.min(Ce,.5*ce),De=Math.min(De,.5*ye),this.lines([[ce-2*Ce,0],[Ce*lt,0,Ce,De-De*lt,Ce,De],[0,ye-2*De],[0,De*lt,-Ce*lt,De,-Ce,De],[2*Ce-ce,0],[-Ce*lt,0,-Ce,-De*lt,-Ce,-De],[0,2*De-ye],[0,-De*lt,Ce*lt,-De,Ce,-De]],_+Ce,H,[1,1],Ge,!0),this},v.__private__.ellipse=v.ellipse=function(_,H,ce,ye,Ce){if(isNaN(_)||isNaN(H)||isNaN(ce)||isNaN(ye)||!Bo(Ce))throw new Error("Invalid arguments passed to jsPDF.ellipse");var De=4/3*(Math.SQRT2-1)*ce,Ge=4/3*(Math.SQRT2-1)*ye;return Ks(_+ce,H),vo(_+ce,H-Ge,_+De,H-ye,_,H-ye),vo(_-De,H-ye,_-ce,H-Ge,_-ce,H),vo(_-ce,H+Ge,_-De,H+ye,_,H+ye),vo(_+De,H+ye,_+ce,H+Ge,_+ce,H),Gs(Ce),this},v.__private__.circle=v.circle=function(_,H,ce,ye){if(isNaN(_)||isNaN(H)||isNaN(ce)||!Bo(ye))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,H,ce,ce,ye)},v.setFont=function(_,H,ce){return ce&&(H=V(H,ce)),Tt=Ya(_,H,{disableWarning:!1}),this};var Lo=v.__private__.getFont=v.getFont=function(){return ht[Ya.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var _,H,ce={};for(_ in Ht)if(Ht.hasOwnProperty(_))for(H in ce[_]=[],Ht[_])Ht[_].hasOwnProperty(H)&&ce[_].push(H);return ce},v.addFont=function(_,H,ce,ye,Ce){var De=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&De.indexOf(arguments[3])!==-1?Ce=arguments[3]:arguments[3]&&De.indexOf(arguments[3])==-1&&(ce=V(ce,ye)),Us.call(this,_,H,ce,Ce=Ce||"Identity-H")};var bi,wn=r.lineWidth||.200025,Nt=v.__private__.getLineWidth=v.getLineWidth=function(){return wn},es=v.__private__.setLineWidth=v.setLineWidth=function(_){return wn=_,de(k(B(_))+" w"),this};v.__private__.setLineDash=Ct.API.setLineDash=Ct.API.setLineDashPattern=function(_,H){if(_=_||[],H=H||0,isNaN(H)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(ce){return k(B(ce))}).join(" "),H=k(B(H)),de("["+_+"] "+H+" d"),this};var Fi=v.__private__.getLineHeight=v.getLineHeight=function(){return He*bi};v.__private__.getLineHeight=v.getLineHeight=function(){return He*bi};var Ll=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(bi=_),this},As=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return bi};Ll(r.lineHeight);var Dn=v.__private__.getHorizontalCoordinate=function(_){return B(_)},Fo=v.__private__.getVerticalCoordinate=function(_){return F===$?_:Mt[J].mediaBox.topRightY-Mt[J].mediaBox.bottomLeftY-B(_)},Ta=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(_){return k(Dn(_))},Rr=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(_){return k(Fo(_))},Js=r.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return Ki(Js)},v.__private__.setStrokeColor=v.setDrawColor=function(_,H,ce,ye){return Js=bn({ch1:_,ch2:H,ch3:ce,ch4:ye,pdfColorType:"draw",precision:2}),de(Js),this};var tl=r.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return Ki(tl)},v.__private__.setFillColor=v.setFillColor=function(_,H,ce,ye){return tl=bn({ch1:_,ch2:H,ch3:ce,ch4:ye,pdfColorType:"fill",precision:2}),de(tl),this};var Ji=r.textColor||"0 g",bo=v.__private__.getTextColor=v.getTextColor=function(){return Ki(Ji)};v.__private__.setTextColor=v.setTextColor=function(_,H,ce,ye){return Ji=bn({ch1:_,ch2:H,ch3:ce,ch4:ye,pdfColorType:"text",precision:3}),this};var Yi=r.charSpace,ts=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(Yi||0)};v.__private__.setCharSpace=v.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Yi=_,this};var Qi=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(_){var H=v.CapJoinStyles[_];if(H===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qi=H,de(H+" J"),this};var Aa=0;v.__private__.setLineJoin=v.setLineJoin=function(_){var H=v.CapJoinStyles[_];if(H===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Aa=H,de(H+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(k(B(_))+" M"),this},v.GState=vm,v.setGState=function(_){(_=typeof _=="string"?Wt[Er[_]]:rs(null,_)).equals(zr)||(de("/"+_.id+" gs"),zr=_)};var rs=function(_,H){if(!_||!Er[_]){var ce=!1;for(var ye in Wt)if(Wt.hasOwnProperty(ye)&&Wt[ye].equals(H)){ce=!0;break}if(ce)H=Wt[ye];else{var Ce="GS"+(Object.keys(Wt).length+1).toString(10);Wt[Ce]=H,H.id=Ce}return _&&(Er[_]=H.id),ar.publish("addGState",H),H}};v.addGState=function(_,H){return rs(_,H),this},v.saveGraphicsState=function(){return de("q"),sr.push({key:Tt,size:He,color:Ji}),this},v.restoreGraphicsState=function(){de("Q");var _=sr.pop();return Tt=_.key,He=_.size,Ji=_.color,zr=null,this},v.setCurrentTransformationMatrix=function(_){return de(_.toString()+" cm"),this},v.comment=function(_){return de("#"+_),this};var wi=function(_,H){var ce=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ce},set:function(De){isNaN(De)||(ce=parseFloat(De))}});var ye=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ye},set:function(De){isNaN(De)||(ye=parseFloat(De))}});var Ce="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ce},set:function(De){Ce=De.toString()}}),this},Cs=function(_,H,ce,ye){wi.call(this,_,H),this.type="rect";var Ce=ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ce},set:function(Ge){isNaN(Ge)||(Ce=parseFloat(Ge))}});var De=ye||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return De},set:function(Ge){isNaN(Ge)||(De=parseFloat(Ge))}}),this},ns=function(){this.page=$t,this.currentPage=J,this.pages=Ue.slice(0),this.pagesContext=Mt.slice(0),this.x=pt,this.y=Ir,this.matrix=ir,this.width=Vo(J),this.height=zi(J),this.outputDestination=Ze,this.id="",this.objectNumber=-1};ns.prototype.restore=function(){$t=this.page,J=this.currentPage,Mt=this.pagesContext,Ue=this.pages,pt=this.x,Ir=this.y,ir=this.matrix,rl(J,this.width),Xn(J,this.height),Ze=this.outputDestination};var li=function(_,H,ce,ye,Ce){Vn.push(new ns),$t=J=0,Ue=[],pt=_,Ir=H,ir=Ce,Zo([ce,ye])};for(var zo in v.beginFormObject=function(_,H,ce,ye,Ce){return li(_,H,ce,ye,Ce),this},v.endFormObject=function(_){return(function(H){if(Ro[H])Vn.pop().restore();else{var ce=new ns,ye="Xo"+(Object.keys(zn).length+1).toString(10);ce.id=ye,Ro[H]=ye,zn[ye]=ce,ar.publish("addFormObject",ce),Vn.pop().restore()}})(_),this},v.doFormObject=function(_,H){var ce=zn[Ro[_]];return de("q"),de(H.toString()+" cm"),de("/"+ce.id+" Do"),de("Q"),this},v.getFormObject=function(_){var H=zn[Ro[_]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},v.save=function(_,H){return _=_||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(nu(lr(xi()),_),typeof nu.unload=="function"&&Qt.setTimeout&&setTimeout(nu.unload,911),this):new Promise(function(ce,ye){try{var Ce=nu(lr(xi()),_);typeof nu.unload=="function"&&Qt.setTimeout&&setTimeout(nu.unload,911),ce(Ce)}catch(De){ye(De.message)}})},Ct.API)Ct.API.hasOwnProperty(zo)&&(zo==="events"&&Ct.API.events.length?(function(_,H){var ce,ye,Ce;for(Ce=H.length-1;Ce!==-1;Ce--)ce=H[Ce][0],ye=H[Ce][1],_.subscribe.apply(_,[ce].concat(typeof ye=="function"?[ye]:ye))})(ar,Ct.API.events):v[zo]=Ct.API[zo]);function Vo(_){return Mt[_].mediaBox.topRightX-Mt[_].mediaBox.bottomLeftX}function rl(_,H){Mt[_].mediaBox.topRightX=H+Mt[_].mediaBox.bottomLeftX}function zi(_){return Mt[_].mediaBox.topRightY-Mt[_].mediaBox.bottomLeftY}function Xn(_,H){Mt[_].mediaBox.topRightY=H+Mt[_].mediaBox.bottomLeftY}var Ca=v.getPageWidth=function(_){return Vo(_=_||J)/jt},Wn=v.setPageWidth=function(_,H){rl(_,H*jt)},Si=v.getPageHeight=function(_){return zi(_=_||J)/jt},ks=v.setPageHeight=function(_,H){Xn(_,H*jt)};return v.internal={pdfEscape:gi,getStyle:Sa,getFont:Lo,getFontSize:rt,getCharSpace:ts,getTextColor:bo,getLineHeight:Fi,getLineHeightFactor:As,getLineWidth:Nt,write:Lt,getHorizontalCoordinate:Dn,getVerticalCoordinate:Fo,getCoordinateString:Ta,getVerticalCoordinateString:Rr,collections:{},newObject:Cr,newAdditionalObject:Yn,newObjectDeferred:Vr,newObjectDeferredBegin:un,getFilters:Bi,putStream:Li,events:ar,scaleFactor:jt,pageSize:{getWidth:function(){return Ca(J)},setWidth:function(_){Wn(J,_)},getHeight:function(){return Si(J)},setHeight:function(_){ks(J,_)}},encryptionOptions:g,encryption:Or,getEncryptor:function(_){return g!==null?Or.encryptor(_,0):function(H){return H}},output:Mn,getNumberOfPages:yi,pages:Ue,out:de,f2:I,f3:w,getPageInfo:qs,getPageInfoByObjId:Qa,getCurrentPageInfo:Xa,getPDFVersion:E,Point:wi,Rectangle:Cs,Matrix:Rt,hasHotfix:xo},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return Ca(J)},set:function(_){Wn(J,_)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return Si(J)},set:function(_){ks(J,_)},enumerable:!0,configurable:!0}),(function(_){for(var H=0,ce=wt.length;H<ce;H++){var ye=Us.call(this,_[H][0],_[H][1],_[H][2],wt[H][3],!0);b===!1&&(S[ye]=!0);var Ce=_[H][0].split("-");Bl({id:ye,fontName:Ce[0],fontStyle:Ce[1]||""})}ar.publish("addFonts",{fonts:ht,dictionary:Ht})}).call(v,wt),Tt="F1",wa(i,t),ar.publish("initialized"),v}bd.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},bd.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},bd.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},bd.prototype.processOwnerPassword=function(r,e){return c1(l1(e).substr(0,5),r)},bd.prototype.encryptor=function(r,e){var t=l1(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return c1(t,n)}},vm.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||Gr(r)!==Gr(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},Ct.API={events:[]},Ct.version="3.0.3";var Ln=Ct.API,n5=1,Vu=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},hd=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},nr=function(r){return r.toFixed(2)},sc=function(r){return r.toFixed(5)};Ln.__acroform__={};var Jo=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},bx=function(r){return r*n5},Oa=function(r){var e=new rS,t=yt.internal.getHeight(r)||0,n=yt.internal.getWidth(r)||0;return e.BBox=[0,0,Number(nr(n)),Number(nr(t))],e},nk=Ln.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},ik=Ln.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},ok=Ln.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},Gn=Ln.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ok(r,e-1)},Kn=Ln.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return nk(r,e-1)},Jn=Ln.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return ik(r,e-1)},sk=Ln.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=r[0],o=r[1],l=r[2],u=r[3],h={};return h.lowerLeft_X=t(i)||0,h.lowerLeft_Y=n(o+u)||0,h.upperRight_X=t(i+l)||0,h.upperRight_Y=n(o)||0,[Number(nr(h.lowerLeft_X)),Number(nr(h.lowerLeft_Y)),Number(nr(h.upperRight_X)),Number(nr(h.upperRight_Y))]},ak=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=u1(r,t),i=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+i+" "+nr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Oa(r);return o.scope=r.scope,o.stream=e.join(`
`),o}},u1=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=r.multiline?i.map(function(I){return I.split(`
`)}):i.map(function(I){return[I]});var o=t,l=yt.internal.getHeight(r)||0;l=l<0?-l:l;var u=yt.internal.getWidth(r)||0;u=u<0?-u:u;var h=function(I,w,B){if(I+1<i.length){var D=w+" "+i[I+1][0];return Lp(D,r,B).width<=u-4}return!1};o++;e:for(;o>0;){e="",o--;var d,g,b=Lp("3",r,o).height,S=r.multiline?l-o:(l-b)/2,v=S+=2,N=0,E=0,L=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+Lp(e,r,o=12).width+", FieldWidth:"+u+`
`;break}for(var C="",M=0,$=0;$<i.length;$++)if(i.hasOwnProperty($)){var F=!1;if(i[$].length!==1&&L!==i[$].length-1){if((b+2)*(M+2)+2>l)continue e;C+=i[$][L],F=!0,E=$,$--}else{C=(C+=i[$][L]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var ne=parseInt($),ue=h(ne,C,o),V=$>=i.length-1;if(ue&&!V){C+=" ",L=0;continue}if(ue||V){if(V)E=ne;else if(r.multiline&&(b+2)*(M+2)+2>l)continue e}else{if(!r.multiline||(b+2)*(M+2)+2>l)continue e;E=ne}}for(var k="",A=N;A<=E;A++){var O=i[A];if(r.multiline){if(A===E){k+=O[L]+" ",L=(L+1)%O.length;continue}if(A===N){k+=O[O.length-1]+" ";continue}}k+=O[0]+" "}switch(k=k.substr(k.length-1)==" "?k.substr(0,k.length-1):k,g=Lp(k,r,o).width,r.textAlign){case"right":d=u-g-2;break;case"center":d=(u-g)/2;break;default:d=2}e+=nr(d)+" "+nr(v)+` Td
`,e+="("+Vu(k)+`) Tj
`,e+=-nr(d)+` 0 Td
`,v=-(o+2),g=0,N=F?E:E+1,M++,C=""}break}return n.text=e,n.fontSize=o,n},Lp=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},lk={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ck=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},uk=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(xa.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(lk)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");n5=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new nS,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];o.objId=void 0,o.hasAnnotation&&ck(o,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,i){var o=!n;for(var l in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(l)){var u=n[l],h=[],d=u.Rect;if(u.Rect&&(u.Rect=sk(u.Rect,i)),i.internal.newObjectDeferredBegin(u.objId,!0),u.DA=yt.createDefaultAppearanceStream(u),Gr(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(h=u.getKeyValueListForStream()),u.Rect=d,u.hasAppearanceStream&&!u.appearanceStreamContent){var g=ak(u);h.push({key:"AP",value:"<</N "+g+">>"}),i.internal.acroformPlugin.xForms.push(g)}if(u.appearanceStreamContent){var b="";for(var S in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(S)){var v=u.appearanceStreamContent[S];if(b+="/"+S+" ",b+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var l in v)if(v.hasOwnProperty(l)){var N=v[l];typeof N=="function"&&(N=N.call(i,u)),b+="/"+l+" "+N+" ",i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N)}}else typeof(N=v)=="function"&&(N=N.call(i,u)),b+="/"+l+" "+N,i.internal.acroformPlugin.xForms.indexOf(N)>=0||i.internal.acroformPlugin.xForms.push(N);b+=">>"}h.push({key:"AP",value:`<<
`+b+">>"})}i.internal.putStream({additionalKeyValues:h,objectId:u.objId}),i.internal.out("endobj")}o&&(function(E,L){for(var C in E)if(E.hasOwnProperty(C)){var M=C,$=E[C];L.internal.newObjectDeferredBegin($.objId,!0),Gr($)==="object"&&typeof $.putStream=="function"&&$.putStream(),delete E[M]}})(i.internal.acroformPlugin.xForms,i)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},tS=Ln.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(l){return l};if(Array.isArray(r)){for(var i="[",o=0;o<r.length;o++)switch(o!==0&&(i+=" "),Gr(r[o])){case"boolean":case"number":case"object":i+=r[o].toString();break;case"string":r[o].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),i+="("+Vu(n(r[o].toString()))+")"):i+=r[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Pg=function(r,e,t){var n=function(i){return i};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+Vu(n(r))+")"},Da=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Da.prototype.toString=function(){return this.objId+" 0 R"},Da.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Da.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],i=this[n];i&&(Array.isArray(i)?r.push({key:n,value:tS(i,this.objId,this.scope)}):i instanceof Da?(i.scope=this.scope,r.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&r.push({key:n,value:i}))}return r};var rS=function(){Da.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};Jo(rS,Da);var nS=function(){Da.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Vu(t(r))+")"}},set:function(t){r=t}})};Jo(nS,Da);var xa=function r(){Da.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');e=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Gn(e,3)},set:function(C){C?this.F=Kn(e,3):this.F=Jn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');t=C}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(C){n=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(C){n[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(C){n[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(C){n[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(C){n[3]=C}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof bm)return;o="FieldObject"+r.FieldNum++}var C=function(M){return M};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+Vu(C(o))+")"},set:function(C){o=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(C){o=C}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(C){l=C}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(C){u=C}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(C){h=C}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/n5:d},set:function(C){d=C}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(C){g=C}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof bm||this instanceof mu))return Pg(b,this.objId,this.scope)},set:function(C){C=C.toString(),b=C}});var S=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof Ri==0?Pg(S,this.objId,this.scope):S},set:function(C){C=C.toString(),S=this instanceof Ri==0?C.substr(0,1)==="("?hd(C.substr(1,C.length-2)):hd(C):C}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ri==1?hd(S.substr(1,S.length-1)):S},set:function(C){C=C.toString(),S=this instanceof Ri==1?"/"+C:C}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Ri==0?Pg(v,this.objId,this.scope):v},set:function(C){C=C.toString(),v=this instanceof Ri==0?C.substr(0,1)==="("?hd(C.substr(1,C.length-2)):hd(C):C}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ri==1?hd(v.substr(1,v.length-1)):v},set:function(C){C=C.toString(),v=this instanceof Ri==1?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(C){C=!!C,E=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(C){N=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,1)},set:function(C){C?this.Ff=Kn(this.Ff,1):this.Ff=Jn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,2)},set:function(C){C?this.Ff=Kn(this.Ff,2):this.Ff=Jn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,3)},set:function(C){C?this.Ff=Kn(this.Ff,3):this.Ff=Jn(this.Ff,3)}});var L=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(L!==null)return L},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');L=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(L){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:L=2;break;case"center":case 1:L=1;break;default:L=0}}})};Jo(xa,Da);var Ed=function(){xa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return tS(e,this.objId,this.scope)},set:function(t){var n,i;i=[],typeof(n=t)=="string"&&(i=(function(o,l,u){u||(u=1);for(var h,d=[];h=l.exec(o);)d.push(h[u]);return d})(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,18)},set:function(t){t?this.Ff=Kn(this.Ff,18):this.Ff=Jn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Kn(this.Ff,19):this.Ff=Jn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,20)},set:function(t){t?(this.Ff=Kn(this.Ff,20),e.sort()):this.Ff=Jn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,22)},set:function(t){t?this.Ff=Kn(this.Ff,22):this.Ff=Jn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,23)},set:function(t){t?this.Ff=Kn(this.Ff,23):this.Ff=Jn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,27)},set:function(t){t?this.Ff=Kn(this.Ff,27):this.Ff=Jn(this.Ff,27)}}),this.hasAppearanceStream=!1};Jo(Ed,xa);var jd=function(){Ed.call(this),this.fontName="helvetica",this.combo=!1};Jo(jd,Ed);var Rd=function(){jd.call(this),this.combo=!0};Jo(Rd,jd);var Jp=function(){Rd.call(this),this.edit=!0};Jo(Jp,Rd);var Ri=function(){xa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,15)},set:function(t){t?this.Ff=Kn(this.Ff,15):this.Ff=Jn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,16)},set:function(t){t?this.Ff=Kn(this.Ff,16):this.Ff=Jn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,17)},set:function(t){t?this.Ff=Kn(this.Ff,17):this.Ff=Jn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,26)},set:function(t){t?this.Ff=Kn(this.Ff,26):this.Ff=Jn(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+Vu(t(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Gr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};Jo(Ri,xa);var Yp=function(){Ri.call(this),this.pushButton=!0};Jo(Yp,Ri);var Pd=function(){Ri.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};Jo(Pd,Ri);var bm=function(){var r,e;xa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,l=[];for(o in l.push("<<"),n)l.push("/"+o+" ("+Vu(i(n[o]))+")");return l.push(">>"),l.join(`
`)},set:function(i){Gr(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Jo(bm,xa),Pd.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},Pd.prototype.createOption=function(r){var e=new bm;return e.Parent=this,e.optionName=r,this.Kids.push(e),dk.call(this.scope,e),e};var Qp=function(){Ri.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yt.CheckBox.createAppearanceStream()};Jo(Qp,Ri);var mu=function(){xa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,13)},set:function(e){e?this.Ff=Kn(this.Ff,13):this.Ff=Jn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,21)},set:function(e){e?this.Ff=Kn(this.Ff,21):this.Ff=Jn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,23)},set:function(e){e?this.Ff=Kn(this.Ff,23):this.Ff=Jn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,24)},set:function(e){e?this.Ff=Kn(this.Ff,24):this.Ff=Jn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,25)},set:function(e){e?this.Ff=Kn(this.Ff,25):this.Ff=Jn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,26)},set:function(e){e?this.Ff=Kn(this.Ff,26):this.Ff=Jn(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Jo(mu,xa);var Xp=function(){mu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,14)},set:function(r){r?this.Ff=Kn(this.Ff,14):this.Ff=Jn(this.Ff,14)}}),this.password=!0};Jo(Xp,mu);var yt={CheckBox:{createAppearanceStream:function(){return{N:{On:yt.CheckBox.YesNormal},D:{On:yt.CheckBox.YesPushDown,Off:yt.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=Oa(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),o=u1(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+nr(yt.internal.getWidth(r))+" "+nr(yt.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+nr(o.fontSize)+" Tf "+i),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=Oa(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),i=[],o=yt.internal.getHeight(r),l=yt.internal.getWidth(r),u=u1(r,r.caption);return i.push("1 g"),i.push("0 0 "+nr(l)+" "+nr(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+nr(l-1)+" "+nr(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+nr(u.fontSize)+" Tf "+n),i.push(u.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(r){var e=Oa(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+nr(yt.internal.getWidth(r))+" "+nr(yt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:yt.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=yt.RadioButton.Circle.YesNormal,e.D[r]=yt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=Oa(r);e.scope=r.scope;var t=[],n=yt.internal.getWidth(r)<=yt.internal.getHeight(r)?yt.internal.getWidth(r)/4:yt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=yt.internal.Bezier_C,o=Number((n*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+sc(yt.internal.getWidth(r)/2)+" "+sc(yt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),t.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),t.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),t.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Oa(r);e.scope=r.scope;var t=[],n=yt.internal.getWidth(r)<=yt.internal.getHeight(r)?yt.internal.getWidth(r)/4:yt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*yt.internal.Bezier_C).toFixed(5)),l=Number((n*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+sc(yt.internal.getWidth(r)/2)+" "+sc(yt.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+sc(yt.internal.getWidth(r)/2)+" "+sc(yt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+l+" "+l+" "+n+" 0 "+n+" c"),t.push("-"+l+" "+n+" -"+n+" "+l+" -"+n+" 0 c"),t.push("-"+n+" -"+l+" -"+l+" -"+n+" 0 -"+n+" c"),t.push(l+" -"+n+" "+n+" -"+l+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=Oa(r);e.scope=r.scope;var t=[],n=yt.internal.getWidth(r)<=yt.internal.getHeight(r)?yt.internal.getWidth(r)/4:yt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+sc(yt.internal.getWidth(r)/2)+" "+sc(yt.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:yt.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=yt.RadioButton.Cross.YesNormal,e.D[r]=yt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=Oa(r);e.scope=r.scope;var t=[],n=yt.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+nr(yt.internal.getWidth(r)-2)+" "+nr(yt.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(nr(n.x1.x)+" "+nr(n.x1.y)+" m"),t.push(nr(n.x2.x)+" "+nr(n.x2.y)+" l"),t.push(nr(n.x4.x)+" "+nr(n.x4.y)+" m"),t.push(nr(n.x3.x)+" "+nr(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Oa(r);e.scope=r.scope;var t=yt.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+nr(yt.internal.getWidth(r))+" "+nr(yt.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+nr(yt.internal.getWidth(r)-2)+" "+nr(yt.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(nr(t.x1.x)+" "+nr(t.x1.y)+" m"),n.push(nr(t.x2.x)+" "+nr(t.x2.y)+" l"),n.push(nr(t.x4.x)+" "+nr(t.x4.y)+" m"),n.push(nr(t.x3.x)+" "+nr(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=Oa(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+nr(yt.internal.getWidth(r))+" "+nr(yt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};yt.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=yt.internal.getWidth(r),t=yt.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},yt.internal.getWidth=function(r){var e=0;return Gr(r)==="object"&&(e=bx(r.Rect[2])),e},yt.internal.getHeight=function(r){var e=0;return Gr(r)==="object"&&(e=bx(r.Rect[3])),e};var dk=Ln.addField=function(r){if(uk(this,r),!(r instanceof xa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};Ln.AcroFormChoiceField=Ed,Ln.AcroFormListBox=jd,Ln.AcroFormComboBox=Rd,Ln.AcroFormEditBox=Jp,Ln.AcroFormButton=Ri,Ln.AcroFormPushButton=Yp,Ln.AcroFormRadioButton=Pd,Ln.AcroFormCheckBox=Qp,Ln.AcroFormTextField=mu,Ln.AcroFormPasswordField=Xp,Ln.AcroFormAppearance=yt,Ln.AcroForm={ChoiceField:Ed,ListBox:jd,ComboBox:Rd,EditBox:Jp,Button:Ri,PushButton:Yp,RadioButton:Pd,CheckBox:Qp,TextField:mu,PasswordField:Xp,Appearance:yt},Ct.AcroForm={ChoiceField:Ed,ListBox:jd,ComboBox:Rd,EditBox:Jp,Button:Ri,PushButton:Yp,RadioButton:Pd,CheckBox:Qp,TextField:mu,PasswordField:Xp,Appearance:yt};Ct.AcroForm;function iS(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){var e="addImage_";r.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=r.__addimage__.getImageFileTypeByImageData=function(I,w){var B,D,q,oe,se,ie=t;if((w=w||t)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(ue(I))for(se in n)for(q=n[se],B=0;B<q.length;B+=1){for(oe=!0,D=0;D<q[B].length;D+=1)if(q[B][D]!==void 0&&q[B][D]!==I[D]){oe=!1;break}if(oe===!0){ie=se;break}}else for(se in n)for(q=n[se],B=0;B<q.length;B+=1){for(oe=!0,D=0;D<q[B].length;D+=1)if(q[B][D]!==void 0&&q[B][D]!==I.charCodeAt(D)){oe=!1;break}if(oe===!0){ie=se;break}}return ie===t&&w!==t&&(ie=w),ie},o=function I(w){for(var B=this.internal.write,D=this.internal.putStream,q=(0,this.internal.getFilters)();q.indexOf("FlateEncode")!==-1;)q.splice(q.indexOf("FlateEncode"),1);w.objectId=this.internal.newObject();var oe=[];if(oe.push({key:"Type",value:"/XObject"}),oe.push({key:"Subtype",value:"/Image"}),oe.push({key:"Width",value:w.width}),oe.push({key:"Height",value:w.height}),w.colorSpace===C.INDEXED?oe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(w.palette.length/3-1)+" "+("sMask"in w&&w.sMask!==void 0?w.objectId+2:w.objectId+1)+" 0 R]"}):(oe.push({key:"ColorSpace",value:"/"+w.colorSpace}),w.colorSpace===C.DEVICE_CMYK&&oe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),oe.push({key:"BitsPerComponent",value:w.bitsPerComponent}),"decodeParameters"in w&&w.decodeParameters!==void 0&&oe.push({key:"DecodeParms",value:"<<"+w.decodeParameters+">>"}),"transparency"in w&&Array.isArray(w.transparency)&&w.transparency.length>0){for(var se="",ie=0,ve=w.transparency.length;ie<ve;ie++)se+=w.transparency[ie]+" "+w.transparency[ie]+" ";oe.push({key:"Mask",value:"["+se+"]"})}w.sMask!==void 0&&oe.push({key:"SMask",value:w.objectId+1+" 0 R"});var be=w.filter!==void 0?["/"+w.filter]:void 0;if(D({data:w.data,additionalKeyValues:oe,alreadyAppliedFilters:be,objectId:w.objectId}),B("endobj"),"sMask"in w&&w.sMask!==void 0){var Z,W=(Z=w.sMaskBitsPerComponent)!==null&&Z!==void 0?Z:w.bitsPerComponent,J={width:w.width,height:w.height,colorSpace:"DeviceGray",bitsPerComponent:W,data:w.sMask};"filter"in w&&(J.decodeParameters="/Predictor ".concat(w.predictor," /Colors 1 /BitsPerComponent ").concat(W," /Columns ").concat(w.width),J.filter=w.filter),I.call(this,J)}if(w.colorSpace===C.INDEXED){var re=this.internal.newObject();D({data:k(new Uint8Array(w.palette)),objectId:re}),B("endobj")}},l=function(){var I=this.internal.collections[e+"images"];for(var w in I)o.call(this,I[w])},u=function(){var I,w=this.internal.collections[e+"images"],B=this.internal.write;for(var D in w)B("/I"+(I=w[D]).index,I.objectId,"0","R")},h=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",u))},d=function(){var I=this.internal.collections[e+"images"];return h.call(this),I},g=function(){return Object.keys(this.internal.collections[e+"images"]).length},b=function(I){return typeof r["process"+I.toUpperCase()]=="function"},S=function(I){return Gr(I)==="object"&&I.nodeType===1},v=function(I,w){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var B=""+I.getAttribute("src");if(B.indexOf("data:image/")===0)return Kp(unescape(B).split("base64,").pop());var D=r.loadFile(B,!0);if(D!==void 0)return D}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var q;switch(w){case"PNG":q="image/png";break;case"WEBP":q="image/webp";break;default:q="image/jpeg"}return Kp(I.toDataURL(q,1).split("base64,").pop())}},N=function(I){var w=this.internal.collections[e+"images"];if(w){for(var B in w)if(I===w[B].alias)return w[B]}},E=function(I,w,B){return I||w||(I=-96,w=-96),I<0&&(I=-1*B.width*72/I/this.internal.scaleFactor),w<0&&(w=-1*B.height*72/w/this.internal.scaleFactor),I===0&&(I=w*B.width/B.height),w===0&&(w=I*B.height/B.width),[I,w]},L=function(I,w,B,D,q,oe){var se=E.call(this,B,D,q),ie=this.internal.getCoordinateString,ve=this.internal.getVerticalCoordinateString,be=d.call(this);if(B=se[0],D=se[1],be[q.index]=q,oe){oe*=Math.PI/180;var Z=Math.cos(oe),W=Math.sin(oe),J=function(fe){return fe.toFixed(4)},re=[J(Z),J(W),J(-1*W),J(Z),0,0,"cm"]}this.internal.write("q"),oe?(this.internal.write([1,"0","0",1,ie(I),ve(w+D),"cm"].join(" ")),this.internal.write(re.join(" ")),this.internal.write([ie(B),"0","0",ie(D),"0","0","cm"].join(" "))):this.internal.write([ie(B),"0","0",ie(D),ie(I),ve(w+D),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+q.index+" Do"),this.internal.write("Q")},C=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var M=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},$=r.__addimage__.sHashCode=function(I){var w,B,D=0;if(typeof I=="string")for(B=I.length,w=0;w<B;w++)D=(D<<5)-D+I.charCodeAt(w),D|=0;else if(ue(I))for(B=I.byteLength/2,w=0;w<B;w++)D=(D<<5)-D+I[w],D|=0;return D},F=r.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var w=!0;return I.length===0&&(w=!1),I.length%4!=0&&(w=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(w=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(w=!1),w},ne=r.__addimage__.extractImageFromDataUrl=function(I){if(I==null||!(I=I.trim()).startsWith("data:"))return null;var w=I.indexOf(",");return w<0?null:I.substring(0,w).trim().endsWith("base64")?I.substring(w+1):null};r.__addimage__.isArrayBuffer=function(I){return I instanceof ArrayBuffer};var ue=r.__addimage__.isArrayBufferView=function(I){return I instanceof Int8Array||I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array},V=r.__addimage__.binaryStringToUint8Array=function(I){for(var w=I.length,B=new Uint8Array(w),D=0;D<w;D++)B[D]=I.charCodeAt(D);return B},k=r.__addimage__.arrayBufferToBinaryString=function(I){for(var w="",B=ue(I)?I:new Uint8Array(I),D=0;D<B.length;D+=8192)w+=String.fromCharCode.apply(null,B.subarray(D,D+8192));return w};r.addImage=function(){var I,w,B,D,q,oe,se,ie,ve;if(typeof arguments[1]=="number"?(w=t,B=arguments[1],D=arguments[2],q=arguments[3],oe=arguments[4],se=arguments[5],ie=arguments[6],ve=arguments[7]):(w=arguments[1],B=arguments[2],D=arguments[3],q=arguments[4],oe=arguments[5],se=arguments[6],ie=arguments[7],ve=arguments[8]),Gr(I=arguments[0])==="object"&&!S(I)&&"imageData"in I){var be=I;I=be.imageData,w=be.format||w||t,B=be.x||B||0,D=be.y||D||0,q=be.w||be.width||q,oe=be.h||be.height||oe,se=be.alias||se,ie=be.compression||ie,ve=be.rotation||be.angle||ve}var Z=this.internal.getFilters();if(ie===void 0&&Z.indexOf("FlateEncode")!==-1&&(ie="SLOW"),isNaN(B)||isNaN(D))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var W=A.call(this,I,w,se,ie);return L.call(this,B,D,q,oe,W,ve),this};var A=function(I,w,B,D){var q,oe,se;if(typeof I=="string"&&i(I)===t){I=unescape(I);var ie=O(I,!1);(ie!==""||(ie=r.loadFile(I,!0))!==void 0)&&(I=ie)}if(S(I)&&(I=v(I,w)),w=i(I,w),!b(w))throw new Error("addImage does not support files of type '"+w+"', please ensure that a plugin for '"+w+"' support is added.");if(((se=B)==null||se.length===0)&&(B=(function(ve){return typeof ve=="string"||ue(ve)?$(ve):ue(ve.data)?$(ve.data):null})(I)),(q=N.call(this,B))||(I instanceof Uint8Array||w==="RGBA"||(oe=I,I=V(I)),q=this["process"+w.toUpperCase()](I,g.call(this),B,(function(ve){return ve&&typeof ve=="string"&&(ve=ve.toUpperCase()),ve in r.image_compression?ve:M.NONE})(D),oe)),!q)throw new Error("An unknown error occurred whilst processing the image.");return q},O=r.__addimage__.convertBase64ToBinaryString=function(I,w){w=typeof w!="boolean"||w;var B,D="";if(typeof I=="string"){var q;B=(q=ne(I))!==null&&q!==void 0?q:I;try{D=Kp(B)}catch(oe){if(w)throw F(B)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+oe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return D};r.getImageProperties=function(I){var w,B,D="";if(S(I)&&(I=v(I)),typeof I=="string"&&i(I)===t&&((D=O(I,!1))===""&&(D=r.loadFile(I)||""),I=D),B=i(I),!b(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(I instanceof Uint8Array||(I=V(I)),!(w=this["process"+B.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return w.fileType=B,w}})(Ct.API),(function(r){var e=function(t){if(t!==void 0&&t!="")return!0};Ct.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,i,o,l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,g=!1,b=0;b<d.length&&!g;b++)switch((n=d[b]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var S=0;S<d.length;S++){n=d[S];var v=this.internal.pdfEscape,N=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),L=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(E.objId),M=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+l(n.bounds.x)+" "+u(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y)+"] ")+"/Contents ("+v(C(n.contents))+")",o+=" /Popup "+L.objId+" 0 R",o+=" /P "+h.objId+" 0 R",o+=" /T ("+v(C(M))+") >>",E.content=o;var $=E.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+l(n.bounds.x+30)+" "+u(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w+30)+" "+u(n.bounds.y)+"] ")+" /Parent "+$,n.open&&(o+=" /Open true"),o+=" >>",L.content=o,this.internal.write(E.objId,"0 R",L.objId,"0 R");break;case"freetext":i="/Rect ["+l(n.bounds.x)+" "+u(n.bounds.y)+" "+l(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y+n.bounds.h)+"] ";var F=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+v(N(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var ne=this.annotations._nameMap[n.options.name];n.options.pageNumber=ne.page,n.options.top=ne.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+v(N(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;default:var ue=u(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+ue+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,i,o,l){var u=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:h(t),y:d(n),w:h(t+i),h:d(n+o)},options:l,type:"link"})},r.textWithLink=function(t,n,i,o){var l,u,h=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){u=o.maxWidth;var g=this.splitTextToSize(t,u).length;l=Math.ceil(d*g)}else u=h,l=d;return this.text(t,n,i,o),i+=.2*d,o.align==="center"&&(n-=h/2),o.align==="right"&&(n-=h),this.link(n,i-d,u,l,o),h},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}})(Ct.API),(function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];r.__arabicParser__={};var o=r.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},l=r.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},u=r.__arabicParser__.isArabicEndLetter=function(E){return l(E)&&o(E)&&e[E.charCodeAt(0)].length<=2},h=r.__arabicParser__.isArabicAlfLetter=function(E){return l(E)&&i.indexOf(E.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return l(E)&&o(E)&&e[E.charCodeAt(0)].length>=1};var d=r.__arabicParser__.arabicLetterHasFinalForm=function(E){return l(E)&&o(E)&&e[E.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(E){return l(E)&&o(E)&&e[E.charCodeAt(0)].length>=3};var g=r.__arabicParser__.arabicLetterHasMedialForm=function(E){return l(E)&&o(E)&&e[E.charCodeAt(0)].length==4},b=r.__arabicParser__.resolveLigatures=function(E){var L=0,C=t,M="",$=0;for(L=0;L<E.length;L+=1)C[E.charCodeAt(L)]!==void 0?($++,typeof(C=C[E.charCodeAt(L)])=="number"&&(M+=String.fromCharCode(C),C=t,$=0),L===E.length-1&&(C=t,M+=E.charAt(L-($-1)),L-=$-1,$=0)):(C=t,M+=E.charAt(L-$),L-=$,$=0);return M};r.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&n[E.charCodeAt(0)]!==void 0};var S=r.__arabicParser__.getCorrectForm=function(E,L,C){return l(E)?o(E)===!1?-1:!d(E)||!l(L)&&!l(C)||!l(C)&&u(L)||u(E)&&!l(L)||u(E)&&h(L)||u(E)&&u(L)?0:g(E)&&l(L)&&!u(L)&&l(C)&&d(C)?3:u(E)||!l(C)?1:2:-1},v=function(E){var L=0,C=0,M=0,$="",F="",ne="",ue=(E=E||"").split("\\s+"),V=[];for(L=0;L<ue.length;L+=1){for(V.push(""),C=0;C<ue[L].length;C+=1)$=ue[L][C],F=ue[L][C-1],ne=ue[L][C+1],l($)?(M=S($,F,ne),V[L]+=M!==-1?String.fromCharCode(e[$.charCodeAt(0)][M]):$):V[L]+=$;V[L]=b(V[L])}return V.join(" ")},N=r.__arabicParser__.processArabic=r.processArabic=function(){var E,L=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(L)){var M=0;for(C=[],M=0;M<L.length;M+=1)Array.isArray(L[M])?C.push([v(L[M][0]),L[M][1],L[M][2]]):C.push([v(L[M])]);E=C}else E=v(L);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};r.events.push(["preProcessText",N])})(Ct.API),Ct.API.autoPrint=function(r){var e;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(u){t=u}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(u){n=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(u){o=u}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(u){l=u}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var i;if((t=t||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Ct.API),(function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(E){h=E}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(E){d=E}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(E){g=E}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(E){b=E}});var S=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return S},set:function(E){S=E}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(E){v=E}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(E){N=E}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(h){return n.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},r.getTextDimensions=function(h,d){n.call(this);var g=(d=d||{}).fontSize||this.getFontSize(),b=d.font||this.getFont(),S=d.scaleFactor||this.internal.scaleFactor,v=0,N=0,E=0,L=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var C=d.maxWidth;C>0?typeof h=="string"?h=this.splitTextToSize(h,C):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function($,F){return $.concat(L.splitTextToSize(F,C))},[])):h=Array.isArray(h)?h:[h];for(var M=0;M<h.length;M++)v<(E=this.getStringUnitWidth(h[M],{font:b})*g)&&(v=E);return v!==0&&(N=h.length),{w:v/=S,h:Math.max((N*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/S,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=r.cell=function(){var h;h=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,b=this.internal.__cell__.margins||e,S=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===h.lineNumber?(h.x=(d.x||0)+(d.width||0),h.y=d.y||0):d.y+d.height+h.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=b.top,v&&S&&(this.printHeaderRow(h.lineNumber,!0),h.y+=S[0].height)):h.y=d.y+d.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-g,h.y+g,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+g,{align:"center",baseline:"top",maxWidth:h.width-g-g}):this.text(h.text,h.x+g,h.y+g,{align:"left",baseline:"top",maxWidth:h.width-g-g})),this.internal.__cell__.lastCell=h,this};r.table=function(h,d,g,b,S){if(n.call(this),!g)throw new Error("No data for PDF table.");var v,N,E,L,C=[],M=[],$=[],F={},ne={},ue=[],V=[],k=(S=S||{}).autoSize||!1,A=S.printHeaders!==!1,O=S.css&&S.css["font-size"]!==void 0?16*S.css["font-size"]:S.fontSize||12,I=S.margins||Object.assign({width:this.getPageWidth()},e),w=typeof S.padding=="number"?S.padding:3,B=S.headerBackgroundColor||"#c8c8c8",D=S.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=A,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=w,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=D,this.setFontSize(O),b==null)M=C=Object.keys(g[0]),$=C.map(function(){return"left"});else if(Array.isArray(b)&&Gr(b[0])==="object")for(C=b.map(function(be){return be.name}),M=b.map(function(be){return be.prompt||be.name||""}),$=b.map(function(be){return be.align||"left"}),v=0;v<b.length;v+=1)ne[b[v].name]=.7499990551181103*b[v].width;else Array.isArray(b)&&typeof b[0]=="string"&&(M=C=b,$=C.map(function(){return"left"}));if(k||Array.isArray(b)&&typeof b[0]=="string")for(v=0;v<C.length;v+=1){for(F[L=C[v]]=g.map(function(be){return be[L]}),this.setFont(void 0,"bold"),ue.push(this.getTextDimensions(M[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=F[L],this.setFont(void 0,"normal"),E=0;E<N.length;E+=1)ue.push(this.getTextDimensions(N[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ne[L]=Math.max.apply(null,ue)+w+w,ue=[]}if(A){var q={};for(v=0;v<C.length;v+=1)q[C[v]]={},q[C[v]].text=M[v],q[C[v]].align=$[v];var oe=u.call(this,q,ne);V=C.map(function(be){return new o(h,d,ne[be],oe,q[be].text,void 0,q[be].align)}),this.setTableHeaderRow(V),this.printHeaderRow(1,!1)}var se=b.reduce(function(be,Z){return be[Z.name]=Z.align,be},{});for(v=0;v<g.length;v+=1){"rowStart"in S&&S.rowStart instanceof Function&&S.rowStart({row:v,data:g[v]},this);var ie=u.call(this,g[v],ne);for(E=0;E<C.length;E+=1){var ve=g[v][C[E]];"cellStart"in S&&S.cellStart instanceof Function&&S.cellStart({row:v,col:E,data:ve},this),l.call(this,new o(h,d,ne[C[E]],ie,ve,v+2,se[C[E]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=d,this};var u=function(h,d){var g=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,S=this.internal.scaleFactor;return Object.keys(h).map(function(v){var N=h[v];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,d[v]-g-g)},this).map(function(v){return this.getLineHeightFactor()*v.length*b/S+g+g},this).reduce(function(v,N){return Math.max(v,N)},0)};r.setTableHeaderRow=function(h){n.call(this),this.internal.__cell__.tableHeaderRow=h},r.printHeaderRow=function(h,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var S=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){g=this.internal.__cell__.tableHeaderRow[v].clone(),d&&(g.y=this.internal.__cell__.margins.top||0,S.push(g)),g.lineNumber=h;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,g),this.setTextColor(N)}S.length>0&&this.setTableHeaderRow(S),this.setFont(void 0,"normal"),t=!1}})(Ct.API);var oS={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},sS=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],d1=iS(sS),aS=[100,200,300,400,500,600,700,800,900],hk=iS(aS);function Ng(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return oS[o=o||"normal"]?o:"normal"})(r.style),n=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(r.weight),i=(function(o){return typeof d1[o=o||"normal"]=="number"?o:"normal"})(r.stretch);return{family:e,style:t,weight:n,stretch:i,src:r.src||[],ref:r.ref||{name:e,style:[i,t,n].join(" ")}}}function wx(r,e,t,n){var i;for(i=t;i>=0&&i<e.length;i+=n)if(r[e[i]])return r[e[i]];for(i=t;i>=0&&i<e.length;i-=n)if(r[e[i]])return r[e[i]]}var fk={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Sx={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function _x(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function Tx(r){return r.trimLeft()}function pk(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function mk(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var Fp,Ax,Cx,fd,zp,kx,Ix,Ex,Bg=["times"];function jx(r,e,t,n,i){var o=4,l=Px;switch(i){case Ct.API.image_compression.FAST:o=1,l=Rx;break;case Ct.API.image_compression.MEDIUM:o=6,l=Nx;break;case Ct.API.image_compression.SLOW:o=9,l=Bx}r=(function(h,d,g,b){for(var S,v=h.length/d,N=new Uint8Array(h.length+v),E=[gk,Rx,Px,Nx,Bx],L=0;L<v;L+=1){var C=L*d,M=h.subarray(C,C+d);if(b)N.set(b(M,g,S),C+L);else{for(var $=E.length,F=[],ne=0;ne<$;ne+=1)F[ne]=E[ne](M,g,S);var ue=xk(F.concat());N.set(F[ue],C+L)}S=M}return N})(r,e,Math.ceil(t*n/8),l);var u=i1(r,{level:o});return Ct.API.__addimage__.arrayBufferToBinaryString(u)}function gk(r){var e=Array.apply([],r);return e.unshift(0),e}function Rx(r,e){var t=r.length,n=[];n[0]=1;for(var i=0;i<t;i+=1){var o=r[i-e]||0;n[i+1]=r[i]-o+256&255}return n}function Px(r,e,t){var n=r.length,i=[];i[0]=2;for(var o=0;o<n;o+=1){var l=t&&t[o]||0;i[o+1]=r[o]-l+256&255}return i}function Nx(r,e,t){var n=r.length,i=[];i[0]=3;for(var o=0;o<n;o+=1){var l=r[o-e]||0,u=t&&t[o]||0;i[o+1]=r[o]+256-(l+u>>>1)&255}return i}function Bx(r,e,t){var n=r.length,i=[];i[0]=4;for(var o=0;o<n;o+=1){var l=yk(r[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);i[o+1]=r[o]-l+256&255}return i}function yk(r,e,t){if(r===e&&e===t)return r;var n=Math.abs(e-t),i=Math.abs(r-t),o=Math.abs(r+e-t-t);return n<=i&&n<=o?r:i<=o?e:t}function xk(r){var e=r.map(function(t){return t.reduce(function(n,i){return n+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function Lg(r,e,t){var n=e*t,i=Math.floor(n/8),o=16-(n-8*i+t),l=(1<<t)-1;return lS(r,i)>>o&l}function Lx(r,e,t,n){var i=t*n,o=Math.floor(i/8),l=16-(i-8*o+n),u=(1<<n)-1,h=(e&u)<<l;(function(d,g,b){if(g+1<d.byteLength)d.setUint16(g,b,!1);else{var S=b>>8&255;d.setUint8(g,S)}})(r,o,lS(r,o)&~(u<<l)&65535|h)}function lS(r,e){return e+1<r.byteLength?r.getUint16(e,!1):r.getUint8(e)<<8}function vk(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,i=r[e++],o=i>>7,l=1<<1+(7&i);r[e++],r[e++];var u=null,h=null;o&&(u=e,h=l,e+=3*l);var d=!0,g=[],b=0,S=null,v=0,N=null;for(this.width=t,this.height=n;d&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,N=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((I=r[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=r[e++];b=r[e++]|r[e++]<<8,S=r[e++],1&E||(S=null),v=E>>2&7,e++;break;case 254:for(;;){if(!((I=r[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var L=r[e++]|r[e++]<<8,C=r[e++]|r[e++]<<8,M=r[e++]|r[e++]<<8,$=r[e++]|r[e++]<<8,F=r[e++],ne=F>>6&1,ue=1<<1+(7&F),V=u,k=h,A=!1;F>>7&&(A=!0,V=e,k=ue,e+=3*ue);var O=e;for(e++;;){var I;if(!((I=r[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}g.push({x:L,y:C,width:M,height:$,has_local_palette:A,palette_offset:V,palette_size:k,data_offset:O,data_length:e-O,transparent_index:S,interlaced:!!ne,delay:b,disposal:v});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return N},this.frameInfo=function(w){if(w<0||w>=g.length)throw new Error("Frame index out of range.");return g[w]},this.decodeAndBlitFrameBGRA=function(w,B){var D=this.frameInfo(w),q=D.width*D.height,oe=new Uint8Array(q);Fx(r,D.data_offset,oe,q);var se=D.palette_offset,ie=D.transparent_index;ie===null&&(ie=256);var ve=D.width,be=t-ve,Z=ve,W=4*(D.y*t+D.x),J=4*((D.y+D.height)*t+D.x),re=W,fe=4*be;D.interlaced===!0&&(fe+=4*t*7);for(var ge=8,_e=0,he=oe.length;_e<he;++_e){var xe=oe[_e];if(Z===0&&(Z=ve,(re+=fe)>=J&&(fe=4*be+4*t*(ge-1),re=W+(ve+be)*(ge<<1),ge>>=1)),xe===ie)re+=4;else{var Pe=r[se+3*xe],Ue=r[se+3*xe+1],Xe=r[se+3*xe+2];B[re++]=Xe,B[re++]=Ue,B[re++]=Pe,B[re++]=255}--Z}},this.decodeAndBlitFrameRGBA=function(w,B){var D=this.frameInfo(w),q=D.width*D.height,oe=new Uint8Array(q);Fx(r,D.data_offset,oe,q);var se=D.palette_offset,ie=D.transparent_index;ie===null&&(ie=256);var ve=D.width,be=t-ve,Z=ve,W=4*(D.y*t+D.x),J=4*((D.y+D.height)*t+D.x),re=W,fe=4*be;D.interlaced===!0&&(fe+=4*t*7);for(var ge=8,_e=0,he=oe.length;_e<he;++_e){var xe=oe[_e];if(Z===0&&(Z=ve,(re+=fe)>=J&&(fe=4*be+4*t*(ge-1),re=W+(ve+be)*(ge<<1),ge>>=1)),xe===ie)re+=4;else{var Pe=r[se+3*xe],Ue=r[se+3*xe+1],Xe=r[se+3*xe+2];B[re++]=Pe,B[re++]=Ue,B[re++]=Xe,B[re++]=255}--Z}}}function Fx(r,e,t,n){for(var i=r[e++],o=1<<i,l=o+1,u=l+1,h=i+1,d=(1<<h)-1,g=0,b=0,S=0,v=r[e++],N=new Int32Array(4096),E=null;;){for(;g<16&&v!==0;)b|=r[e++]<<g,g+=8,v===1?v=r[e++]:--v;if(g<h)break;var L=b&d;if(b>>=h,g-=h,L!==o){if(L===l)break;for(var C=L<u?L:E,M=0,$=C;$>o;)$=N[$]>>8,++M;var F=$;if(S+M+(C!==L?1:0)>n)return void rn.log("Warning, gif stream longer than expected.");t[S++]=F;var ne=S+=M;for(C!==L&&(t[S++]=F),$=C;M--;)$=N[$],t[--ne]=255&$,$>>=8;E!==null&&u<4096&&(N[u++]=E<<8|F,u>=d+1&&h<12&&(++h,d=d<<1|1)),E=L}else u=l+1,d=(1<<(h=i+1))-1,E=null}return S!==n&&rn.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Fg(r){var e,t,n,i,o,l=Math.floor,u=new Array(64),h=new Array(64),d=new Array(64),g=new Array(64),b=new Array(65535),S=new Array(65535),v=new Array(64),N=new Array(64),E=[],L=0,C=7,M=new Array(64),$=new Array(64),F=new Array(64),ne=new Array(256),ue=new Array(2048),V=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],w=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function oe(W,J){for(var re=0,fe=0,ge=new Array,_e=1;_e<=16;_e++){for(var he=1;he<=W[_e];he++)ge[J[fe]]=[],ge[J[fe]][0]=re,ge[J[fe]][1]=_e,fe++,re++;re*=2}return ge}function se(W){for(var J=W[0],re=W[1]-1;re>=0;)J&1<<re&&(L|=1<<C),re--,--C<0&&(L==255?(ie(255),ie(0)):ie(L),C=7,L=0)}function ie(W){E.push(W)}function ve(W){ie(W>>8&255),ie(255&W)}function be(W,J,re,fe,ge){for(var _e,he=ge[0],xe=ge[240],Pe=(function(He,ot){var rt,Jt,_t,mr,Ft,qt,vr,Ot,Tt,jt,pt=0;for(Tt=0;Tt<8;++Tt){rt=He[pt],Jt=He[pt+1],_t=He[pt+2],mr=He[pt+3],Ft=He[pt+4],qt=He[pt+5],vr=He[pt+6];var Ir=rt+(Ot=He[pt+7]),ir=rt-Ot,ht=Jt+vr,Ht=Jt-vr,sr=_t+qt,It=_t-qt,tr=mr+Ft,Wt=mr-Ft,Er=Ir+tr,zr=Ir-tr,$t=ht+sr,Mt=ht-sr;He[pt]=Er+$t,He[pt+4]=Er-$t;var ar=.707106781*(Mt+zr);He[pt+2]=zr+ar,He[pt+6]=zr-ar;var Hi=.382683433*((Er=Wt+It)-(Mt=Ht+ir)),zn=.5411961*Er+Hi,Ro=1.306562965*Mt+Hi,Vn=.707106781*($t=It+Ht),Rt=ir+Vn,Pi=ir-Vn;He[pt+5]=Pi+zn,He[pt+3]=Pi-zn,He[pt+1]=Rt+Ro,He[pt+7]=Rt-Ro,pt+=8}for(pt=0,Tt=0;Tt<8;++Tt){rt=He[pt],Jt=He[pt+8],_t=He[pt+16],mr=He[pt+24],Ft=He[pt+32],qt=He[pt+40],vr=He[pt+48];var mi=rt+(Ot=He[pt+56]),On=rt-Ot,Ni=Jt+vr,Cr=Jt-vr,Vr=_t+qt,un=_t-qt,Yn=mr+Ft,Yo=mr-Ft,Gi=mi+Yn,Ki=mi-Yn,bn=Ni+Vr,Bi=Ni-Vr;He[pt]=Gi+bn,He[pt+32]=Gi-bn;var Li=.707106781*(Bi+Ki);He[pt+16]=Ki+Li,He[pt+48]=Ki-Li;var bs=.382683433*((Gi=Yo+un)-(Bi=Cr+On)),mo=.5411961*Gi+bs,go=1.306562965*Bi+bs,ws=.707106781*(bn=un+Cr),Qo=On+ws,Po=On-ws;He[pt+40]=Po+mo,He[pt+24]=Po-mo,He[pt+8]=Qo+go,He[pt+56]=Qo-go,pt++}for(Tt=0;Tt<64;++Tt)jt=He[Tt]*ot[Tt],v[Tt]=jt>0?jt+.5|0:jt-.5|0;return v})(W,J),Ue=0;Ue<64;++Ue)N[V[Ue]]=Pe[Ue];var Xe=N[0]-re;re=N[0],Xe==0?se(fe[0]):(se(fe[S[_e=32767+Xe]]),se(b[_e]));for(var Ze=63;Ze>0&&N[Ze]==0;)Ze--;if(Ze==0)return se(he),re;for(var ze,de=1;de<=Ze;){for(var Lt=de;N[de]==0&&de<=Ze;)++de;var Et=de-Lt;if(Et>=16){ze=Et>>4;for(var wt=1;wt<=ze;++wt)se(xe);Et&=15}_e=32767+N[de],se(ge[(Et<<4)+S[_e]]),se(b[_e]),de++}return Ze!=63&&se(he),re}function Z(W){W=Math.min(Math.max(W,1),100),o!=W&&((function(J){for(var re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],fe=0;fe<64;fe++){var ge=l((re[fe]*J+50)/100);ge=Math.min(Math.max(ge,1),255),u[V[fe]]=ge}for(var _e=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var xe=l((_e[he]*J+50)/100);xe=Math.min(Math.max(xe,1),255),h[V[he]]=xe}for(var Pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ue=0,Xe=0;Xe<8;Xe++)for(var Ze=0;Ze<8;Ze++)d[Ue]=1/(u[V[Ue]]*Pe[Xe]*Pe[Ze]*8),g[Ue]=1/(h[V[Ue]]*Pe[Xe]*Pe[Ze]*8),Ue++})(W<50?Math.floor(5e3/W):Math.floor(200-2*W)),o=W)}this.encode=function(W,J){J&&Z(J),E=new Array,L=0,C=7,ve(65496),ve(65504),ve(16),ie(74),ie(70),ie(73),ie(70),ie(0),ie(1),ie(1),ie(0),ve(1),ve(1),ie(0),ie(0),(function(){ve(65499),ve(132),ie(0);for(var Jt=0;Jt<64;Jt++)ie(u[Jt]);ie(1);for(var _t=0;_t<64;_t++)ie(h[_t])})(),(function(Jt,_t){ve(65472),ve(17),ie(8),ve(_t),ve(Jt),ie(3),ie(1),ie(17),ie(0),ie(2),ie(17),ie(1),ie(3),ie(17),ie(1)})(W.width,W.height),(function(){ve(65476),ve(418),ie(0);for(var Jt=0;Jt<16;Jt++)ie(k[Jt+1]);for(var _t=0;_t<=11;_t++)ie(A[_t]);ie(16);for(var mr=0;mr<16;mr++)ie(O[mr+1]);for(var Ft=0;Ft<=161;Ft++)ie(I[Ft]);ie(1);for(var qt=0;qt<16;qt++)ie(w[qt+1]);for(var vr=0;vr<=11;vr++)ie(B[vr]);ie(17);for(var Ot=0;Ot<16;Ot++)ie(D[Ot+1]);for(var Tt=0;Tt<=161;Tt++)ie(q[Tt])})(),ve(65498),ve(12),ie(3),ie(1),ie(0),ie(2),ie(17),ie(3),ie(17),ie(0),ie(63),ie(0);var re=0,fe=0,ge=0;L=0,C=7,this.encode.displayName="_encode_";for(var _e,he,xe,Pe,Ue,Xe,Ze,ze,de,Lt=W.data,Et=W.width,wt=W.height,He=4*Et,ot=0;ot<wt;){for(_e=0;_e<He;){for(Ue=He*ot+_e,Ze=-1,ze=0,de=0;de<64;de++)Xe=Ue+(ze=de>>3)*He+(Ze=4*(7&de)),ot+ze>=wt&&(Xe-=He*(ot+1+ze-wt)),_e+Ze>=He&&(Xe-=_e+Ze-He+4),he=Lt[Xe++],xe=Lt[Xe++],Pe=Lt[Xe++],M[de]=(ue[he]+ue[xe+256|0]+ue[Pe+512|0]>>16)-128,$[de]=(ue[he+768|0]+ue[xe+1024|0]+ue[Pe+1280|0]>>16)-128,F[de]=(ue[he+1280|0]+ue[xe+1536|0]+ue[Pe+1792|0]>>16)-128;re=be(M,d,re,e,n),fe=be($,g,fe,t,i),ge=be(F,g,ge,t,i),_e+=32}ot+=8}if(C>=0){var rt=[];rt[1]=C+1,rt[0]=(1<<C+1)-1,se(rt)}return ve(65497),new Uint8Array(E)},r=r||50,(function(){for(var W=String.fromCharCode,J=0;J<256;J++)ne[J]=W(J)})(),e=oe(k,A),t=oe(w,B),n=oe(O,I),i=oe(D,q),(function(){for(var W=1,J=2,re=1;re<=15;re++){for(var fe=W;fe<J;fe++)S[32767+fe]=re,b[32767+fe]=[],b[32767+fe][1]=re,b[32767+fe][0]=fe;for(var ge=-(J-1);ge<=-W;ge++)S[32767+ge]=re,b[32767+ge]=[],b[32767+ge][1]=re,b[32767+ge][0]=J-1+ge;W<<=1,J<<=1}})(),(function(){for(var W=0;W<256;W++)ue[W]=19595*W,ue[W+256|0]=38470*W,ue[W+512|0]=7471*W+32768,ue[W+768|0]=-11059*W,ue[W+1024|0]=-21709*W,ue[W+1280|0]=32768*W+8421375,ue[W+1536|0]=-27439*W,ue[W+1792|0]=-5329*W})(),Z(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function da(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function zx(r){function e(A){if(!A)throw Error("assert :P")}function t(A,O,I){for(var w=0;4>w;w++)if(A[O+w]!=I.charCodeAt(w))return!0;return!1}function n(A,O,I,w,B){for(var D=0;D<B;D++)A[O+D]=I[w+D]}function i(A,O,I,w){for(var B=0;B<w;B++)A[O+B]=I}function o(A){return new Int32Array(A)}function l(A,O){for(var I=[],w=0;w<A;w++)I.push(new O);return I}function u(A,O){var I=[];return(function w(B,D,q){for(var oe=q[D],se=0;se<oe&&(B.push(q.length>D+1?[]:new O),!(q.length<D+1));se++)w(B[se],D+1,q)})(I,0,A),I}var h=function(){var A=this;function O(p,x){for(var j=1<<x-1>>>0;p&j;)j>>>=1;return j?(p&j-1)+j:p}function I(p,x,j,z,G){e(!(z%j));do p[x+(z-=j)]=G;while(0<z)}function w(p,x,j,z,G){if(e(2328>=G),512>=G)var Y=o(512);else if((Y=o(G))==null)return 0;return(function(Q,X,te,ae,we,Ee){var le,Te,Ie=X,Me=1<<te,Ne=o(16),Ve=o(16);for(e(we!=0),e(ae!=null),e(Q!=null),e(0<te),Te=0;Te<we;++Te){if(15<ae[Te])return 0;++Ne[ae[Te]]}if(Ne[0]==we)return 0;for(Ve[1]=0,le=1;15>le;++le){if(Ne[le]>1<<le)return 0;Ve[le+1]=Ve[le]+Ne[le]}for(Te=0;Te<we;++Te)le=ae[Te],0<ae[Te]&&(Ee[Ve[le]++]=Te);if(Ve[15]==1)return(ae=new B).g=0,ae.value=Ee[0],I(Q,Ie,1,Me,ae),Me;var Oe,$e=-1,qe=Me-1,St=0,ct=1,Xt=1,ft=1<<te;for(Te=0,le=1,we=2;le<=te;++le,we<<=1){if(ct+=Xt<<=1,0>(Xt-=Ne[le]))return 0;for(;0<Ne[le];--Ne[le])(ae=new B).g=le,ae.value=Ee[Te++],I(Q,Ie+St,we,ft,ae),St=O(St,le)}for(le=te+1,we=2;15>=le;++le,we<<=1){if(ct+=Xt<<=1,0>(Xt-=Ne[le]))return 0;for(;0<Ne[le];--Ne[le]){if(ae=new B,(St&qe)!=$e){for(Ie+=ft,Oe=1<<($e=le)-te;15>$e&&!(0>=(Oe-=Ne[$e]));)++$e,Oe<<=1;Me+=ft=1<<(Oe=$e-te),Q[X+($e=St&qe)].g=Oe+te,Q[X+$e].value=Ie-X-$e}ae.g=le-te,ae.value=Ee[Te++],I(Q,Ie+(St>>te),we,ft,ae),St=O(St,le)}}return ct!=2*Ve[15]-1?0:Me})(p,x,j,z,G,Y)}function B(){this.value=this.g=0}function D(){this.value=this.g=0}function q(){this.G=l(5,B),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Mo,D)}function oe(p,x,j,z){e(p!=null),e(x!=null),e(2147483648>z),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=x,p.pa=j,p.Jd=x,p.Yc=j+z,p.Zc=4<=z?j+z-4+1:j,he(p)}function se(p,x){for(var j=0;0<x--;)j|=Pe(p,128)<<x;return j}function ie(p,x){var j=se(p,x);return xe(p)?-j:j}function ve(p,x,j,z){var G,Y=0;for(e(p!=null),e(x!=null),e(4294967288>z),p.Sb=z,p.Ra=0,p.u=0,p.h=0,4<z&&(z=4),G=0;G<z;++G)Y+=x[j+G]<<8*G;p.Ra=Y,p.bb=z,p.oa=x,p.pa=j}function be(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<Ia-8>>>0,++p.bb,p.u-=8;fe(p)&&(p.h=1,p.u=0)}function Z(p,x){if(e(0<=x),!p.h&&x<=_o){var j=re(p)&So[x];return p.u+=x,be(p),j}return p.h=1,p.u=0}function W(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function J(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function re(p){return p.Ra>>>(p.u&Ia-1)>>>0}function fe(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>Ia}function ge(p,x){p.u=x,p.h=fe(p)}function _e(p){p.u>=Es&&(e(p.u>=Es),be(p))}function he(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function xe(p){return se(p,1)}function Pe(p,x){var j=p.Ca;0>p.b&&he(p);var z=p.b,G=j*x>>>8,Y=(p.I>>>z>G)+0;for(Y?(j-=G,p.I-=G+1<<z>>>0):j=G+1,z=j,G=0;256<=z;)G+=8,z>>=8;return z=7^G+Xs[z],p.b-=z,p.Ca=(j<<z)-1,Y}function Ue(p,x,j){p[x+0]=j>>24&255,p[x+1]=j>>16&255,p[x+2]=j>>8&255,p[x+3]=255&j}function Xe(p,x){return p[x+0]|p[x+1]<<8}function Ze(p,x){return Xe(p,x)|p[x+2]<<16}function ze(p,x){return Xe(p,x)|Xe(p,x+2)<<16}function de(p,x){var j=1<<x;return e(p!=null),e(0<x),p.X=o(j),p.X==null?0:(p.Mb=32-x,p.Xa=x,1)}function Lt(p,x){e(p!=null),e(x!=null),e(p.Xa==x.Xa),n(x.X,0,p.X,0,1<<x.Xa)}function Et(){this.X=[],this.Xa=this.Mb=0}function wt(p,x,j,z){e(j!=null),e(z!=null);var G=j[0],Y=z[0];return G==0&&(G=(p*Y+x/2)/x),Y==0&&(Y=(x*G+p/2)/p),0>=G||0>=Y?0:(j[0]=G,z[0]=Y,1)}function He(p,x){return p+(1<<x)-1>>>x}function ot(p,x){return((4278255360&p)+(4278255360&x)>>>0&4278255360)+((16711935&p)+(16711935&x)>>>0&16711935)>>>0}function rt(p,x){A[x]=function(j,z,G,Y,Q,X,te){var ae;for(ae=0;ae<Q;++ae){var we=A[p](X[te+ae-1],G,Y+ae);X[te+ae]=ot(j[z+ae],we)}}}function Jt(){this.ud=this.hd=this.jd=0}function _t(p,x){return((4278124286&(p^x))>>>1)+(p&x)>>>0}function mr(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function Ft(p,x){return mr(p+(p-x+.5>>1))}function qt(p,x,j){return Math.abs(x-j)-Math.abs(p-j)}function vr(p,x,j,z,G,Y,Q){for(z=Y[Q-1],j=0;j<G;++j)Y[Q+j]=z=ot(p[x+j],z)}function Ot(p,x,j,z,G){var Y;for(Y=0;Y<j;++Y){var Q=p[x+Y],X=Q>>8&255,te=16711935&(te=(te=16711935&Q)+((X<<16)+X));z[G+Y]=(4278255360&Q)+te>>>0}}function Tt(p,x){x.jd=255&p,x.hd=p>>8&255,x.ud=p>>16&255}function jt(p,x,j,z,G,Y){var Q;for(Q=0;Q<z;++Q){var X=x[j+Q],te=X>>>8,ae=X,we=255&(we=(we=X>>>16)+((p.jd<<24>>24)*(te<<24>>24)>>>5));ae=255&(ae=(ae+=(p.hd<<24>>24)*(te<<24>>24)>>>5)+((p.ud<<24>>24)*(we<<24>>24)>>>5)),G[Y+Q]=(4278255360&X)+(we<<16)+ae}}function pt(p,x,j,z,G){A[x]=function(Y,Q,X,te,ae,we,Ee,le,Te){for(te=Ee;te<le;++te)for(Ee=0;Ee<Te;++Ee)ae[we++]=G(X[z(Y[Q++])])},A[p]=function(Y,Q,X,te,ae,we,Ee){var le=8>>Y.b,Te=Y.Ea,Ie=Y.K[0],Me=Y.w;if(8>le)for(Y=(1<<Y.b)-1,Me=(1<<le)-1;Q<X;++Q){var Ne,Ve=0;for(Ne=0;Ne<Te;++Ne)Ne&Y||(Ve=z(te[ae++])),we[Ee++]=G(Ie[Ve&Me]),Ve>>=le}else A["VP8LMapColor"+j](te,ae,Ie,Me,we,Ee,Q,X,Te)}}function Ir(p,x,j,z,G){for(j=x+j;x<j;){var Y=p[x++];z[G++]=Y>>16&255,z[G++]=Y>>8&255,z[G++]=255&Y}}function ir(p,x,j,z,G){for(j=x+j;x<j;){var Y=p[x++];z[G++]=Y>>16&255,z[G++]=Y>>8&255,z[G++]=255&Y,z[G++]=Y>>24&255}}function ht(p,x,j,z,G){for(j=x+j;x<j;){var Y=(Q=p[x++])>>16&240|Q>>12&15,Q=240&Q|Q>>28&15;z[G++]=Y,z[G++]=Q}}function Ht(p,x,j,z,G){for(j=x+j;x<j;){var Y=(Q=p[x++])>>16&248|Q>>13&7,Q=Q>>5&224|Q>>3&31;z[G++]=Y,z[G++]=Q}}function sr(p,x,j,z,G){for(j=x+j;x<j;){var Y=p[x++];z[G++]=255&Y,z[G++]=Y>>8&255,z[G++]=Y>>16&255}}function It(p,x,j,z,G,Y){if(Y==0)for(j=x+j;x<j;)Ue(z,((Y=p[x++])[0]>>24|Y[1]>>8&65280|Y[2]<<8&16711680|Y[3]<<24)>>>0),G+=32;else n(z,G,p,x,j)}function tr(p,x){A[x][0]=A[p+"0"],A[x][1]=A[p+"1"],A[x][2]=A[p+"2"],A[x][3]=A[p+"3"],A[x][4]=A[p+"4"],A[x][5]=A[p+"5"],A[x][6]=A[p+"6"],A[x][7]=A[p+"7"],A[x][8]=A[p+"8"],A[x][9]=A[p+"9"],A[x][10]=A[p+"10"],A[x][11]=A[p+"11"],A[x][12]=A[p+"12"],A[x][13]=A[p+"13"],A[x][14]=A[p+"0"],A[x][15]=A[p+"0"]}function Wt(p){return p==$l||p==ul||p==Wc||p==$c}function Er(){this.eb=[],this.size=this.A=this.fb=0}function zr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function $t(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Er,this.f.kb=new zr,this.sd=null}function Mt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ar(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Hi(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function zn(p,x){var j=p.T,z=x.ba.f.RGBA,G=z.eb,Y=z.fb+p.ka*z.A,Q=eo[x.ba.S],X=p.y,te=p.O,ae=p.f,we=p.N,Ee=p.ea,le=p.W,Te=x.cc,Ie=x.dc,Me=x.Mc,Ne=x.Nc,Ve=p.ka,Oe=p.ka+p.T,$e=p.U,qe=$e+1>>1;for(Ve==0?Q(X,te,null,null,ae,we,Ee,le,ae,we,Ee,le,G,Y,null,null,$e):(Q(x.ec,x.fc,X,te,Te,Ie,Me,Ne,ae,we,Ee,le,G,Y-z.A,G,Y,$e),++j);Ve+2<Oe;Ve+=2)Te=ae,Ie=we,Me=Ee,Ne=le,we+=p.Rc,le+=p.Rc,Y+=2*z.A,Q(X,(te+=2*p.fa)-p.fa,X,te,Te,Ie,Me,Ne,ae,we,Ee,le,G,Y-z.A,G,Y,$e);return te+=p.fa,p.j+Oe<p.o?(n(x.ec,x.fc,X,te,$e),n(x.cc,x.dc,ae,we,qe),n(x.Mc,x.Nc,Ee,le,qe),j--):1&Oe||Q(X,te,null,null,ae,we,Ee,le,ae,we,Ee,le,G,Y+z.A,null,null,$e),j}function Ro(p,x,j){var z=p.F,G=[p.J];if(z!=null){var Y=p.U,Q=x.ba.S,X=Q==Dc||Q==Wc;x=x.ba.f.RGBA;var te=[0],ae=p.ka;te[0]=p.T,p.Kb&&(ae==0?--te[0]:(--ae,G[0]-=p.width),p.j+p.ka+p.T==p.o&&(te[0]=p.o-p.j-ae));var we=x.eb;ae=x.fb+ae*x.A,p=Oc(z,G[0],p.width,Y,te,we,ae+(X?0:3),x.A),e(j==te),p&&Wt(Q)&&cl(we,ae,X,Y,te,x.A)}return 0}function Vn(p){var x=p.ma,j=x.ba.S,z=11>j,G=j==Pa||j==Mc||j==Dc||j==Wr||j==12||Wt(j);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!Fl(x.Oa,p,G?11:12))return 0;if(G&&Wt(j)&&tt(),p.da)alert("todo:use_scaling");else{if(z){if(x.Ib=Hi,p.Kb){if(j=p.U+1>>1,x.memory=o(p.U+2*j),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+p.U,x.Mc=x.cc,x.Nc=x.dc+j,x.Ib=zn,tt()}}else alert("todo:EmitYUV");G&&(x.Jb=Ro,z&&ke())}if(z&&!ci){for(p=0;256>p;++p)to[p]=89858*(p-128)+as>>ra,ro[p]=-22014*(p-128)+as,Gl[p]=-45773*(p-128),pl[p]=113618*(p-128)+as>>ra;for(p=Pr;p<Lr;++p)x=76283*(p-16)+as>>ra,Yu[p-Pr]=dn(x,255),Zf[p-Pr]=dn(x+8>>4,15);ci=1}return 1}function Rt(p){var x=p.ma,j=p.U,z=p.T;return e(!(1&p.ka)),0>=j||0>=z?0:(j=x.Ib(p,x),x.Jb!=null&&x.Jb(p,x,j),x.Dc+=j,1)}function Pi(p){p.ma.memory=null}function mi(p,x,j,z){return Z(p,8)!=47?0:(x[0]=Z(p,14)+1,j[0]=Z(p,14)+1,z[0]=Z(p,1),Z(p,3)!=0?0:!p.h)}function On(p,x){if(4>p)return p+1;var j=p-2>>1;return(2+(1&p)<<j)+Z(x,j)+1}function Ni(p,x){return 120<x?x-120:1<=(j=((j=C0[x-1])>>4)*p+(8-(15&j)))?j:1;var j}function Cr(p,x,j){var z=re(j),G=p[x+=255&z].g-8;return 0<G&&(ge(j,j.u+8),z=re(j),x+=p[x].value,x+=z&(1<<G)-1),ge(j,j.u+p[x].g),p[x].value}function Vr(p,x,j){return j.g+=p.g,j.value+=p.value<<x>>>0,e(8>=j.g),p.g}function un(p,x,j){var z=p.xc;return e((x=z==0?0:p.vc[p.md*(j>>z)+(x>>z)])<p.Wb),p.Ya[x]}function Yn(p,x,j,z){var G=p.ab,Y=p.c*x,Q=p.C;x=Q+x;var X=j,te=z;for(z=p.Ta,j=p.Ua;0<G--;){var ae=p.gc[G],we=Q,Ee=x,le=X,Te=te,Ie=(te=z,X=j,ae.Ea);switch(e(we<Ee),e(Ee<=ae.nc),ae.hc){case 2:Sn(le,Te,(Ee-we)*Ie,te,X);break;case 0:var Me=we,Ne=Ee,Ve=te,Oe=X,$e=(ft=ae).Ea;Me==0&&(Zs(le,Te,null,null,1,Ve,Oe),vr(le,Te+1,0,0,$e-1,Ve,Oe+1),Te+=$e,Oe+=$e,++Me);for(var qe=1<<ft.b,St=qe-1,ct=He($e,ft.b),Xt=ft.K,ft=ft.w+(Me>>ft.b)*ct;Me<Ne;){var hr=Xt,pn=ft,rr=1;for(js(le,Te,Ve,Oe-$e,1,Ve,Oe);rr<$e;){var ut=(rr&~St)+qe;ut>$e&&(ut=$e),(0,ol[hr[pn++]>>8&15])(le,Te+ +rr,Ve,Oe+rr-$e,ut-rr,Ve,Oe+rr),rr=ut}Te+=$e,Oe+=$e,++Me&St||(ft+=ct)}Ee!=ae.nc&&n(te,X-Ie,te,X+(Ee-we-1)*Ie,Ie);break;case 1:for(Ie=le,Ne=Te,$e=(le=ae.Ea)-(Oe=le&~(Ve=(Te=1<<ae.b)-1)),Me=He(le,ae.b),qe=ae.K,ae=ae.w+(we>>ae.b)*Me;we<Ee;){for(St=qe,ct=ae,Xt=new Jt,ft=Ne+Oe,hr=Ne+le;Ne<ft;)Tt(St[ct++],Xt),Vl(Xt,Ie,Ne,Te,te,X),Ne+=Te,X+=Te;Ne<hr&&(Tt(St[ct++],Xt),Vl(Xt,Ie,Ne,$e,te,X),Ne+=$e,X+=$e),++we&Ve||(ae+=Me)}break;case 3:if(le==te&&Te==X&&0<ae.b){for(Ne=te,le=Ie=X+(Ee-we)*Ie-(Oe=(Ee-we)*He(ae.Ea,ae.b)),Te=te,Ve=X,Me=[],Oe=($e=Oe)-1;0<=Oe;--Oe)Me[Oe]=Te[Ve+Oe];for(Oe=$e-1;0<=Oe;--Oe)Ne[le+Oe]=Me[Oe];nl(ae,we,Ee,te,Ie,te,X)}else nl(ae,we,Ee,le,Te,te,X)}X=z,te=j}te!=j&&n(z,j,X,te,Y)}function Yo(p,x){var j=p.V,z=p.Ba+p.c*p.C,G=x-p.C;if(e(x<=p.l.o),e(16>=G),0<G){var Y=p.l,Q=p.Ta,X=p.Ua,te=Y.width;if(Yn(p,G,j,z),G=X=[X],e((j=p.C)<(z=x)),e(Y.v<Y.va),z>Y.o&&(z=Y.o),j<Y.j){var ae=Y.j-j;j=Y.j,G[0]+=ae*te}if(j>=z?j=0:(G[0]+=4*Y.v,Y.ka=j-Y.j,Y.U=Y.va-Y.v,Y.T=z-j,j=1),j){if(X=X[0],11>(j=p.ca).S){var we=j.f.RGBA,Ee=(z=j.S,G=Y.U,Y=Y.T,ae=we.eb,we.A),le=Y;for(we=we.fb+p.Ma*we.A;0<le--;){var Te=Q,Ie=X,Me=G,Ne=ae,Ve=we;switch(z){case Hu:Ol(Te,Ie,Me,Ne,Ve);break;case Pa:ea(Te,Ie,Me,Ne,Ve);break;case $l:ea(Te,Ie,Me,Ne,Ve),cl(Ne,Ve,0,Me,1,0);break;case Kf:sl(Te,Ie,Me,Ne,Ve);break;case Mc:It(Te,Ie,Me,Ne,Ve,1);break;case ul:It(Te,Ie,Me,Ne,Ve,1),cl(Ne,Ve,0,Me,1,0);break;case Dc:It(Te,Ie,Me,Ne,Ve,0);break;case Wc:It(Te,Ie,Me,Ne,Ve,0),cl(Ne,Ve,1,Me,1,0);break;case Wr:Ea(Te,Ie,Me,Ne,Ve);break;case $c:Ea(Te,Ie,Me,Ne,Ve),dh(Ne,Ve,Me,1,0);break;case Gu:ja(Te,Ie,Me,Ne,Ve);break;default:e(0)}X+=te,we+=Ee}p.Ma+=Y}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=j.height)}}p.C=x,e(p.C<=p.i)}function Gi(p){var x;if(0<p.ua)return 0;for(x=0;x<p.Wb;++x){var j=p.Ya[x].G,z=p.Ya[x].H;if(0<j[1][z[1]+0].g||0<j[2][z[2]+0].g||0<j[3][z[3]+0].g)return 0}return 1}function Ki(p,x,j,z,G,Y){if(p.Z!=0){var Q=p.qd,X=p.rd;for(e(Ti[p.Z]!=null);x<j;++x)Ti[p.Z](Q,X,z,G,z,G,Y),Q=z,X=G,G+=Y;p.qd=Q,p.rd=X}}function bn(p,x){var j=p.l.ma,z=j.Z==0||j.Z==1?p.l.j:p.C;if(z=p.C<z?z:p.C,e(x<=p.l.o),x>z){var G=p.l.width,Y=j.ca,Q=j.tb+G*z,X=p.V,te=p.Ba+p.c*z,ae=p.gc;e(p.ab==1),e(ae[0].hc==3),os(ae[0],z,x,X,te,Y,Q),Ki(j,z,x,Y,Q,G)}p.C=p.Ma=x}function Bi(p,x,j,z,G,Y,Q){var X=p.$/z,te=p.$%z,ae=p.m,we=p.s,Ee=j+p.$,le=Ee;G=j+z*G;var Te=j+z*Y,Ie=280+we.ua,Me=p.Pb?X:16777216,Ne=0<we.ua?we.Wa:null,Ve=we.wc,Oe=Ee<Te?un(we,te,X):null;e(p.C<Y),e(Te<=G);var $e=!1;e:for(;;){for(;$e||Ee<Te;){var qe=0;if(X>=Me){var St=Ee-j;e((Me=p).Pb),Me.wd=Me.m,Me.xd=St,0<Me.s.ua&&Lt(Me.s.Wa,Me.s.vb),Me=X+Ju}if(te&Ve||(Oe=un(we,te,X)),e(Oe!=null),Oe.Qb&&(x[Ee]=Oe.qb,$e=!0),!$e)if(_e(ae),Oe.jc){qe=ae,St=x;var ct=Ee,Xt=Oe.pd[re(qe)&Mo-1];e(Oe.jc),256>Xt.g?(ge(qe,qe.u+Xt.g),St[ct]=Xt.value,qe=0):(ge(qe,qe.u+Xt.g-256),e(256<=Xt.value),qe=Xt.value),qe==0&&($e=!0)}else qe=Cr(Oe.G[0],Oe.H[0],ae);if(ae.h)break;if($e||256>qe){if(!$e)if(Oe.nd)x[Ee]=(Oe.qb|qe<<8)>>>0;else{if(_e(ae),$e=Cr(Oe.G[1],Oe.H[1],ae),_e(ae),St=Cr(Oe.G[2],Oe.H[2],ae),ct=Cr(Oe.G[3],Oe.H[3],ae),ae.h)break;x[Ee]=(ct<<24|$e<<16|qe<<8|St)>>>0}if($e=!1,++Ee,++te>=z&&(te=0,++X,Q!=null&&X<=Y&&!(X%16)&&Q(p,X),Ne!=null))for(;le<Ee;)qe=x[le++],Ne.X[(506832829*qe&4294967295)>>>Ne.Mb]=qe}else if(280>qe){if(qe=On(qe-256,ae),St=Cr(Oe.G[4],Oe.H[4],ae),_e(ae),St=Ni(z,St=On(St,ae)),ae.h)break;if(Ee-j<St||G-Ee<qe)break e;for(ct=0;ct<qe;++ct)x[Ee+ct]=x[Ee+ct-St];for(Ee+=qe,te+=qe;te>=z;)te-=z,++X,Q!=null&&X<=Y&&!(X%16)&&Q(p,X);if(e(Ee<=G),te&Ve&&(Oe=un(we,te,X)),Ne!=null)for(;le<Ee;)qe=x[le++],Ne.X[(506832829*qe&4294967295)>>>Ne.Mb]=qe}else{if(!(qe<Ie))break e;for($e=qe-280,e(Ne!=null);le<Ee;)qe=x[le++],Ne.X[(506832829*qe&4294967295)>>>Ne.Mb]=qe;qe=Ee,e(!($e>>>(St=Ne).Xa)),x[qe]=St.X[$e],$e=!0}$e||e(ae.h==fe(ae))}if(p.Pb&&ae.h&&Ee<G)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&Lt(p.s.vb,p.s.Wa);else{if(ae.h)break e;Q!=null&&Q(p,X>Y?Y:X),p.a=0,p.$=Ee-j}return 1}return p.a=3,0}function Li(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var x=p.Wa;x!=null&&(x.X=null),p.vb=null,e(p!=null)}function bs(){var p=new mt;return p==null?null:(p.a=0,p.xb=ql,tr("Predictor","VP8LPredictors"),tr("Predictor","VP8LPredictors_C"),tr("PredictorAdd","VP8LPredictorsAdd"),tr("PredictorAdd","VP8LPredictorsAdd_C"),Sn=Ot,Vl=jt,Ol=Ir,ea=ir,Ea=ht,ja=Ht,sl=sr,A.VP8LMapColor32b=Rs,A.VP8LMapColor8b=il,p)}function mo(p,x,j,z,G){var Y=1,Q=[p],X=[x],te=z.m,ae=z.s,we=null,Ee=0;e:for(;;){if(j)for(;Y&&Z(te,1);){var le=Q,Te=X,Ie=z,Me=1,Ne=Ie.m,Ve=Ie.gc[Ie.ab],Oe=Z(Ne,2);if(Ie.Oc&1<<Oe)Y=0;else{switch(Ie.Oc|=1<<Oe,Ve.hc=Oe,Ve.Ea=le[0],Ve.nc=Te[0],Ve.K=[null],++Ie.ab,e(4>=Ie.ab),Oe){case 0:case 1:Ve.b=Z(Ne,3)+2,Me=mo(He(Ve.Ea,Ve.b),He(Ve.nc,Ve.b),0,Ie,Ve.K),Ve.K=Ve.K[0];break;case 3:var $e,qe=Z(Ne,8)+1,St=16<qe?0:4<qe?1:2<qe?2:3;if(le[0]=He(Ve.Ea,St),Ve.b=St,$e=Me=mo(qe,1,0,Ie,Ve.K)){var ct,Xt=qe,ft=Ve,hr=1<<(8>>ft.b),pn=o(hr);if(pn==null)$e=0;else{var rr=ft.K[0],ut=ft.w;for(pn[0]=ft.K[0][0],ct=1;ct<1*Xt;++ct)pn[ct]=ot(rr[ut+ct],pn[ct-1]);for(;ct<4*hr;++ct)pn[ct]=0;ft.K[0]=null,ft.K[0]=pn,$e=1}}Me=$e;break;case 2:break;default:e(0)}Y=Me}}if(Q=Q[0],X=X[0],Y&&Z(te,1)&&!(Y=1<=(Ee=Z(te,4))&&11>=Ee)){z.a=3;break e}var nt;if(nt=Y)t:{var _n,Gt,cr,Zr=z,Zn=Q,Rn=X,an=Ee,Un=j,ei=Zr.m,nn=Zr.s,pr=[null],_r=1,on=0,Tr=Yf[an];r:for(;;){if(Un&&Z(ei,1)){var mn=Z(ei,3)+2,gn=He(Zn,mn),$r=He(Rn,mn),Ai=gn*$r;if(!mo(gn,$r,0,Zr,pr))break r;for(pr=pr[0],nn.xc=mn,_n=0;_n<Ai;++_n){var Fr=pr[_n]>>8&65535;pr[_n]=Fr,Fr>=_r&&(_r=Fr+1)}}if(ei.h)break r;for(Gt=0;5>Gt;++Gt){var Ur=dl[Gt];!Gt&&0<an&&(Ur+=1<<an),on<Ur&&(on=Ur)}var Pn=l(_r*Tr,B),ui=_r,no=l(ui,q);if(no==null)var Tn=null;else e(65536>=ui),Tn=no;var An=o(on);if(Tn==null||An==null||Pn==null){Zr.a=1;break r}var Ci=Pn;for(_n=cr=0;_n<_r;++_n){var qr=Tn[_n],ki=qr.G,$o=qr.H,ls=0,ti=1,Cn=0;for(Gt=0;5>Gt;++Gt){Ur=dl[Gt],ki[Gt]=Ci,$o[Gt]=cr,!Gt&&0<an&&(Ur+=1<<an);i:{var La,ia=Ur,Kl=Zr,Bs=An,tp=Ci,_h=cr,tn=0,cs=Kl.m,Th=Z(cs,1);if(i(Bs,0,0,ia),Th){var Ah=Z(cs,1)+1,Qu=Z(cs,1),Xu=Z(cs,Qu==0?1:8);Bs[Xu]=1,Ah==2&&(Bs[Xu=Z(cs,8)]=1);var Ls=1}else{var sn=o(19),Nn=Z(cs,4)+4;if(19<Nn){Kl.a=3;var kn=0;break i}for(La=0;La<Nn;++La)sn[A0[La]]=Z(cs,3);var Jl=void 0,oa=void 0,Yl=Kl,R0=sn,qn=ia,Zu=Bs,Kc=0,Fs=Yl.m,us=8,To=l(128,B);n:for(;w(To,0,7,R0,19);){if(Z(Fs,1)){var Jc=2+2*Z(Fs,3);if((Jl=2+Z(Fs,Jc))>qn)break n}else Jl=qn;for(oa=0;oa<qn&&Jl--;){_e(Fs);var ed=To[0+(127&re(Fs))];ge(Fs,Fs.u+ed.g);var Fa=ed.value;if(16>Fa)Zu[oa++]=Fa,Fa!=0&&(us=Fa);else{var rp=Fa==16,Ch=Fa-16,np=Ku[Ch],kh=Z(Fs,Uc[Ch])+np;if(oa+kh>qn)break n;for(var ip=rp?us:0;0<kh--;)Zu[oa++]=ip}}Kc=1;break n}Kc||(Yl.a=3),Ls=Kc}(Ls=Ls&&!cs.h)&&(tn=w(tp,_h,8,Bs,ia)),Ls&&tn!=0?kn=tn:(Kl.a=3,kn=0)}if(kn==0)break r;if(ti&&Jf[Gt]==1&&(ti=Ci[cr].g==0),ls+=Ci[cr].g,cr+=kn,3>=Gt){var Ql,td=An[0];for(Ql=1;Ql<Ur;++Ql)An[Ql]>td&&(td=An[Ql]);Cn+=td}}if(qr.nd=ti,qr.Qb=0,ti&&(qr.qb=(ki[3][$o[3]+0].value<<24|ki[1][$o[1]+0].value<<16|ki[2][$o[2]+0].value)>>>0,ls==0&&256>ki[0][$o[0]+0].value&&(qr.Qb=1,qr.qb+=ki[0][$o[0]+0].value<<8)),qr.jc=!qr.Qb&&6>Cn,qr.jc){var Yc,Ao=qr;for(Yc=0;Yc<Mo;++Yc){var sa=Yc,ds=Ao.pd[sa],gl=Ao.G[0][Ao.H[0]+sa];256<=gl.value?(ds.g=gl.g+256,ds.value=gl.value):(ds.g=0,ds.value=0,sa>>=Vr(gl,8,ds),sa>>=Vr(Ao.G[1][Ao.H[1]+sa],16,ds),sa>>=Vr(Ao.G[2][Ao.H[2]+sa],0,ds),Vr(Ao.G[3][Ao.H[3]+sa],24,ds))}}}nn.vc=pr,nn.Wb=_r,nn.Ya=Tn,nn.yc=Pn,nt=1;break t}nt=0}if(!(Y=nt)){z.a=3;break e}if(0<Ee){if(ae.ua=1<<Ee,!de(ae.Wa,Ee)){z.a=1,Y=0;break e}}else ae.ua=0;var rd=z,nd=Q,op=X,id=rd.s,od=id.xc;if(rd.c=nd,rd.i=op,id.md=He(nd,od),id.wc=od==0?-1:(1<<od)-1,j){z.xb=Ns;break e}if((we=o(Q*X))==null){z.a=1,Y=0;break e}Y=(Y=Bi(z,we,0,Q,X,X,null))&&!te.h;break e}return Y?(G!=null?G[0]=we:(e(we==null),e(j)),z.$=0,j||Li(ae)):Li(ae),Y}function go(p,x){var j=p.c*p.i,z=j+x+16*x;return e(p.c<=x),p.V=o(z),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+j+x,1)}function ws(p,x){var j=p.C,z=x-j,G=p.V,Y=p.Ba+p.c*j;for(e(x<=p.l.o);0<z;){var Q=16<z?16:z,X=p.l.ma,te=p.l.width,ae=te*Q,we=X.ca,Ee=X.tb+te*j,le=p.Ta,Te=p.Ua;Yn(p,Q,G,Y),hh(le,Te,we,Ee,ae),Ki(X,j,j+Q,we,Ee,te),z-=Q,G+=Q*p.c,j+=Q}e(j==x),p.C=p.Ma=x}function Qo(){this.ub=this.yd=this.td=this.Rb=0}function Po(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Xo(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function jr(){this.Yb=(function(){var p=[];return(function x(j,z,G){for(var Y=G[z],Q=0;Q<Y&&(j.push(G.length>z+1?[]:0),!(G.length<z+1));Q++)x(j[Q],z+1,G)})(p,0,[3,11]),p})()}function Bl(){this.jb=o(3),this.Wc=u([4,8],jr),this.Xc=u([4,17],jr)}function Us(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function gi(){this.ld=this.La=this.dd=this.tc=0}function Zo(){this.Na=this.la=0}function wa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ss(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function _s(){this.uc=this.M=this.Nb=0,this.wa=Array(new gi),this.Y=0,this.ya=Array(new Ss),this.aa=0,this.l=new Qn}function yi(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Ya(){this.cb=this.a=0,this.sc="",this.m=new W,this.Od=new Qo,this.Kc=new Po,this.ed=new Us,this.Qa=new Xo,this.Ic=this.$c=this.Aa=0,this.D=new _s,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,W),this.ia=0,this.pb=l(4,wa),this.Pa=new Bl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new yi),this.Hd=0,this.rb=Array(new Zo),this.sb=0,this.wa=Array(new gi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ss),this.L=this.aa=0,this.gd=u([4,2],gi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Qn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function No(){var p=new Ya;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,hl||(hl=xi)),p}function wr(p,x,j){return p.a==0&&(p.a=x,p.sc=j,p.cb=0),0}function Ts(p,x,j){return 3<=j&&p[x+0]==157&&p[x+1]==1&&p[x+2]==42}function yo(p,x){if(p==null)return 0;if(p.a=0,p.sc="OK",x==null)return wr(p,2,"null VP8Io passed to VP8GetHeaders()");var j=x.data,z=x.w,G=x.ha;if(4>G)return wr(p,7,"Truncated header.");var Y=j[z+0]|j[z+1]<<8|j[z+2]<<16,Q=p.Od;if(Q.Rb=!(1&Y),Q.td=Y>>1&7,Q.yd=Y>>4&1,Q.ub=Y>>5,3<Q.td)return wr(p,3,"Incorrect keyframe parameters.");if(!Q.yd)return wr(p,4,"Frame not displayable.");z+=3,G-=3;var X=p.Kc;if(Q.Rb){if(7>G)return wr(p,7,"cannot parse picture header");if(!Ts(j,z,G))return wr(p,3,"Bad code word");X.c=16383&(j[z+4]<<8|j[z+3]),X.Td=j[z+4]>>6,X.i=16383&(j[z+6]<<8|j[z+5]),X.Ud=j[z+6]>>6,z+=7,G-=7,p.za=X.c+15>>4,p.Ub=X.i+15>>4,x.width=X.c,x.height=X.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,i((Y=p.Pa).jb,0,255,Y.jb.length),e((Y=p.Qa)!=null),Y.Cb=0,Y.Bb=0,Y.Fb=1,i(Y.Zb,0,0,Y.Zb.length),i(Y.Lb,0,0,Y.Lb)}if(Q.ub>G)return wr(p,7,"bad partition length");oe(Y=p.m,j,z,Q.ub),z+=Q.ub,G-=Q.ub,Q.Rb&&(X.Ld=xe(Y),X.Kd=xe(Y)),X=p.Qa;var te,ae=p.Pa;if(e(Y!=null),e(X!=null),X.Cb=xe(Y),X.Cb){if(X.Bb=xe(Y),xe(Y)){for(X.Fb=xe(Y),te=0;4>te;++te)X.Zb[te]=xe(Y)?ie(Y,7):0;for(te=0;4>te;++te)X.Lb[te]=xe(Y)?ie(Y,6):0}if(X.Bb)for(te=0;3>te;++te)ae.jb[te]=xe(Y)?se(Y,8):255}else X.Bb=0;if(Y.Ka)return wr(p,3,"cannot parse segment header");if((X=p.ed).zd=xe(Y),X.Tb=se(Y,6),X.wb=se(Y,3),X.Pc=xe(Y),X.Pc&&xe(Y)){for(ae=0;4>ae;++ae)xe(Y)&&(X.vd[ae]=ie(Y,6));for(ae=0;4>ae;++ae)xe(Y)&&(X.od[ae]=ie(Y,6))}if(p.L=X.Tb==0?0:X.zd?1:2,Y.Ka)return wr(p,3,"cannot parse filter header");var we=G;if(G=te=z,z=te+we,X=we,p.Xb=(1<<se(p.m,2))-1,we<3*(ae=p.Xb))j=7;else{for(te+=3*ae,X-=3*ae,we=0;we<ae;++we){var Ee=j[G+0]|j[G+1]<<8|j[G+2]<<16;Ee>X&&(Ee=X),oe(p.Jc[+we],j,te,Ee),te+=Ee,X-=Ee,G+=3}oe(p.Jc[+ae],j,te,X),j=te<z?0:5}if(j!=0)return wr(p,j,"cannot parse partitions");for(j=se(te=p.m,7),G=xe(te)?ie(te,4):0,z=xe(te)?ie(te,4):0,X=xe(te)?ie(te,4):0,ae=xe(te)?ie(te,4):0,te=xe(te)?ie(te,4):0,we=p.Qa,Ee=0;4>Ee;++Ee){if(we.Cb){var le=we.Zb[Ee];we.Fb||(le+=j)}else{if(0<Ee){p.pb[Ee]=p.pb[0];continue}le=j}var Te=p.pb[Ee];Te.Sc[0]=Ul[dn(le+G,127)],Te.Sc[1]=qc[dn(le+0,127)],Te.Eb[0]=2*Ul[dn(le+z,127)],Te.Eb[1]=101581*qc[dn(le+X,127)]>>16,8>Te.Eb[1]&&(Te.Eb[1]=8),Te.Qc[0]=Ul[dn(le+ae,117)],Te.Qc[1]=qc[dn(le+te,127)],Te.lc=le+te}if(!Q.Rb)return wr(p,4,"Not a key frame.");for(xe(Y),Q=p.Pa,j=0;4>j;++j){for(G=0;8>G;++G)for(z=0;3>z;++z)for(X=0;11>X;++X)ae=Pe(Y,I0[j][G][z][X])?se(Y,8):Xf[j][G][z][X],Q.Wc[j][G].Yb[z][X]=ae;for(G=0;17>G;++G)Q.Xc[j][G]=Q.Wc[j][bh[G]]}return p.kc=xe(Y),p.kc&&(p.Bd=se(Y,8)),p.cb=1}function xi(p,x,j,z,G,Y,Q){var X=x[G].Yb[j];for(j=0;16>G;++G){if(!Pe(p,X[j+0]))return G;for(;!Pe(p,X[j+1]);)if(X=x[++G].Yb[0],j=0,G==16)return 16;var te=x[G+1].Yb;if(Pe(p,X[j+2])){var ae=p,we=0;if(Pe(ae,(le=X)[(Ee=j)+3]))if(Pe(ae,le[Ee+6])){for(X=0,Ee=2*(we=Pe(ae,le[Ee+8]))+(le=Pe(ae,le[Ee+9+we])),we=0,le=xh[Ee];le[X];++X)we+=we+Pe(ae,le[X]);we+=3+(8<<Ee)}else Pe(ae,le[Ee+7])?(we=7+2*Pe(ae,165),we+=Pe(ae,145)):we=5+Pe(ae,159);else we=Pe(ae,le[Ee+4])?3+Pe(ae,le[Ee+5]):2;X=te[2]}else we=1,X=te[1];te=Q+vh[G],0>(ae=p).b&&he(ae);var Ee,le=ae.b,Te=(Ee=ae.Ca>>1)-(ae.I>>le)>>31;--ae.b,ae.Ca+=Te,ae.Ca|=1,ae.I-=(Ee+1&Te)<<le,Y[te]=((we^Te)-Te)*z[(0<G)+0]}return 16}function lr(p){var x=p.rb[p.sb-1];x.la=0,x.Na=0,i(p.zc,0,0,p.zc.length),p.ja=0}function Mn(p,x,j,z,G){G=p[x+j+32*z]+(G>>3),p[x+j+32*z]=-256&G?0>G?0:255:G}function xo(p,x,j,z,G,Y){Mn(p,x,0,j,z+G),Mn(p,x,1,j,z+Y),Mn(p,x,2,j,z-Y),Mn(p,x,3,j,z-G)}function Or(p){return(20091*p>>16)+p}function qs(p,x,j,z){var G,Y=0,Q=o(16);for(G=0;4>G;++G){var X=p[x+0]+p[x+8],te=p[x+0]-p[x+8],ae=(35468*p[x+4]>>16)-Or(p[x+12]),we=Or(p[x+4])+(35468*p[x+12]>>16);Q[Y+0]=X+we,Q[Y+1]=te+ae,Q[Y+2]=te-ae,Q[Y+3]=X-we,Y+=4,x++}for(G=Y=0;4>G;++G)X=(p=Q[Y+0]+4)+Q[Y+8],te=p-Q[Y+8],ae=(35468*Q[Y+4]>>16)-Or(Q[Y+12]),Mn(j,z,0,0,X+(we=Or(Q[Y+4])+(35468*Q[Y+12]>>16))),Mn(j,z,1,0,te+ae),Mn(j,z,2,0,te-ae),Mn(j,z,3,0,X-we),Y++,z+=32}function Qa(p,x,j,z){var G=p[x+0]+4,Y=35468*p[x+4]>>16,Q=Or(p[x+4]),X=35468*p[x+1]>>16;xo(j,z,0,G+Q,p=Or(p[x+1]),X),xo(j,z,1,G+Y,p,X),xo(j,z,2,G-Y,p,X),xo(j,z,3,G-Q,p,X)}function Xa(p,x,j,z,G){qs(p,x,j,z),G&&qs(p,x+16,j,z+4)}function Hs(p,x,j,z){al(p,x+0,j,z,1),al(p,x+32,j,z+128,1)}function Bo(p,x,j,z){var G;for(p=p[x+0]+4,G=0;4>G;++G)for(x=0;4>x;++x)Mn(j,z,x,G,p)}function Sa(p,x,j,z){p[x+0]&&Sr(p,x+0,j,z),p[x+16]&&Sr(p,x+16,j,z+4),p[x+32]&&Sr(p,x+32,j,z+128),p[x+48]&&Sr(p,x+48,j,z+128+4)}function or(p,x,j,z){var G,Y=o(16);for(G=0;4>G;++G){var Q=p[x+0+G]+p[x+12+G],X=p[x+4+G]+p[x+8+G],te=p[x+4+G]-p[x+8+G],ae=p[x+0+G]-p[x+12+G];Y[0+G]=Q+X,Y[8+G]=Q-X,Y[4+G]=ae+te,Y[12+G]=ae-te}for(G=0;4>G;++G)Q=(p=Y[0+4*G]+3)+Y[3+4*G],X=Y[1+4*G]+Y[2+4*G],te=Y[1+4*G]-Y[2+4*G],ae=p-Y[3+4*G],j[z+0]=Q+X>>3,j[z+16]=ae+te>>3,j[z+32]=Q-X>>3,j[z+48]=ae-te>>3,z+=64}function ai(p,x,j){var z,G=x-32,Y=Oi,Q=255-p[G-1];for(z=0;z<j;++z){var X,te=Y,ae=Q+p[x-1];for(X=0;X<j;++X)p[x+X]=te[ae+p[G+X]];x+=32}}function Gs(p,x){ai(p,x,4)}function _a(p,x){ai(p,x,8)}function Za(p,x){ai(p,x,16)}function el(p,x){var j;for(j=0;16>j;++j)n(p,x+32*j,p,x-32,16)}function Ks(p,x){var j;for(j=16;0<j;--j)i(p,x,p[x-1],16),x+=32}function vi(p,x,j){var z;for(z=0;16>z;++z)i(x,j+32*z,p,16)}function vo(p,x){var j,z=16;for(j=0;16>j;++j)z+=p[x-1+32*j]+p[x+j-32];vi(z>>5,p,x)}function Lo(p,x){var j,z=8;for(j=0;16>j;++j)z+=p[x-1+32*j];vi(z>>4,p,x)}function bi(p,x){var j,z=8;for(j=0;16>j;++j)z+=p[x+j-32];vi(z>>4,p,x)}function wn(p,x){vi(128,p,x)}function Nt(p,x,j){return p+2*x+j+2>>2}function es(p,x){var j,z=x-32;for(z=new Uint8Array([Nt(p[z-1],p[z+0],p[z+1]),Nt(p[z+0],p[z+1],p[z+2]),Nt(p[z+1],p[z+2],p[z+3]),Nt(p[z+2],p[z+3],p[z+4])]),j=0;4>j;++j)n(p,x+32*j,z,0,z.length)}function Fi(p,x){var j=p[x-1],z=p[x-1+32],G=p[x-1+64],Y=p[x-1+96];Ue(p,x+0,16843009*Nt(p[x-1-32],j,z)),Ue(p,x+32,16843009*Nt(j,z,G)),Ue(p,x+64,16843009*Nt(z,G,Y)),Ue(p,x+96,16843009*Nt(G,Y,Y))}function Ll(p,x){var j,z=4;for(j=0;4>j;++j)z+=p[x+j-32]+p[x-1+32*j];for(z>>=3,j=0;4>j;++j)i(p,x+32*j,z,4)}function As(p,x){var j=p[x-1+0],z=p[x-1+32],G=p[x-1+64],Y=p[x-1-32],Q=p[x+0-32],X=p[x+1-32],te=p[x+2-32],ae=p[x+3-32];p[x+0+96]=Nt(z,G,p[x-1+96]),p[x+1+96]=p[x+0+64]=Nt(j,z,G),p[x+2+96]=p[x+1+64]=p[x+0+32]=Nt(Y,j,z),p[x+3+96]=p[x+2+64]=p[x+1+32]=p[x+0+0]=Nt(Q,Y,j),p[x+3+64]=p[x+2+32]=p[x+1+0]=Nt(X,Q,Y),p[x+3+32]=p[x+2+0]=Nt(te,X,Q),p[x+3+0]=Nt(ae,te,X)}function Dn(p,x){var j=p[x+1-32],z=p[x+2-32],G=p[x+3-32],Y=p[x+4-32],Q=p[x+5-32],X=p[x+6-32],te=p[x+7-32];p[x+0+0]=Nt(p[x+0-32],j,z),p[x+1+0]=p[x+0+32]=Nt(j,z,G),p[x+2+0]=p[x+1+32]=p[x+0+64]=Nt(z,G,Y),p[x+3+0]=p[x+2+32]=p[x+1+64]=p[x+0+96]=Nt(G,Y,Q),p[x+3+32]=p[x+2+64]=p[x+1+96]=Nt(Y,Q,X),p[x+3+64]=p[x+2+96]=Nt(Q,X,te),p[x+3+96]=Nt(X,te,te)}function Fo(p,x){var j=p[x-1+0],z=p[x-1+32],G=p[x-1+64],Y=p[x-1-32],Q=p[x+0-32],X=p[x+1-32],te=p[x+2-32],ae=p[x+3-32];p[x+0+0]=p[x+1+64]=Y+Q+1>>1,p[x+1+0]=p[x+2+64]=Q+X+1>>1,p[x+2+0]=p[x+3+64]=X+te+1>>1,p[x+3+0]=te+ae+1>>1,p[x+0+96]=Nt(G,z,j),p[x+0+64]=Nt(z,j,Y),p[x+0+32]=p[x+1+96]=Nt(j,Y,Q),p[x+1+32]=p[x+2+96]=Nt(Y,Q,X),p[x+2+32]=p[x+3+96]=Nt(Q,X,te),p[x+3+32]=Nt(X,te,ae)}function Ta(p,x){var j=p[x+0-32],z=p[x+1-32],G=p[x+2-32],Y=p[x+3-32],Q=p[x+4-32],X=p[x+5-32],te=p[x+6-32],ae=p[x+7-32];p[x+0+0]=j+z+1>>1,p[x+1+0]=p[x+0+64]=z+G+1>>1,p[x+2+0]=p[x+1+64]=G+Y+1>>1,p[x+3+0]=p[x+2+64]=Y+Q+1>>1,p[x+0+32]=Nt(j,z,G),p[x+1+32]=p[x+0+96]=Nt(z,G,Y),p[x+2+32]=p[x+1+96]=Nt(G,Y,Q),p[x+3+32]=p[x+2+96]=Nt(Y,Q,X),p[x+3+64]=Nt(Q,X,te),p[x+3+96]=Nt(X,te,ae)}function Rr(p,x){var j=p[x-1+0],z=p[x-1+32],G=p[x-1+64],Y=p[x-1+96];p[x+0+0]=j+z+1>>1,p[x+2+0]=p[x+0+32]=z+G+1>>1,p[x+2+32]=p[x+0+64]=G+Y+1>>1,p[x+1+0]=Nt(j,z,G),p[x+3+0]=p[x+1+32]=Nt(z,G,Y),p[x+3+32]=p[x+1+64]=Nt(G,Y,Y),p[x+3+64]=p[x+2+64]=p[x+0+96]=p[x+1+96]=p[x+2+96]=p[x+3+96]=Y}function Js(p,x){var j=p[x-1+0],z=p[x-1+32],G=p[x-1+64],Y=p[x-1+96],Q=p[x-1-32],X=p[x+0-32],te=p[x+1-32],ae=p[x+2-32];p[x+0+0]=p[x+2+32]=j+Q+1>>1,p[x+0+32]=p[x+2+64]=z+j+1>>1,p[x+0+64]=p[x+2+96]=G+z+1>>1,p[x+0+96]=Y+G+1>>1,p[x+3+0]=Nt(X,te,ae),p[x+2+0]=Nt(Q,X,te),p[x+1+0]=p[x+3+32]=Nt(j,Q,X),p[x+1+32]=p[x+3+64]=Nt(z,j,Q),p[x+1+64]=p[x+3+96]=Nt(G,z,j),p[x+1+96]=Nt(Y,G,z)}function tl(p,x){var j;for(j=0;8>j;++j)n(p,x+32*j,p,x-32,8)}function Ji(p,x){var j;for(j=0;8>j;++j)i(p,x,p[x-1],8),x+=32}function bo(p,x,j){var z;for(z=0;8>z;++z)i(x,j+32*z,p,8)}function Yi(p,x){var j,z=8;for(j=0;8>j;++j)z+=p[x+j-32]+p[x-1+32*j];bo(z>>4,p,x)}function ts(p,x){var j,z=4;for(j=0;8>j;++j)z+=p[x+j-32];bo(z>>3,p,x)}function Qi(p,x){var j,z=4;for(j=0;8>j;++j)z+=p[x-1+32*j];bo(z>>3,p,x)}function Aa(p,x){bo(128,p,x)}function rs(p,x,j){var z=p[x-j],G=p[x+0],Y=3*(G-z)+Ps[1020+p[x-2*j]-p[x+j]],Q=Wl[112+(Y+4>>3)];p[x-j]=Oi[255+z+Wl[112+(Y+3>>3)]],p[x+0]=Oi[255+G-Q]}function wi(p,x,j,z){var G=p[x+0],Y=p[x+j];return Do[255+p[x-2*j]-p[x-j]]>z||Do[255+Y-G]>z}function Cs(p,x,j,z){return 4*Do[255+p[x-j]-p[x+0]]+Do[255+p[x-2*j]-p[x+j]]<=z}function ns(p,x,j,z,G){var Y=p[x-3*j],Q=p[x-2*j],X=p[x-j],te=p[x+0],ae=p[x+j],we=p[x+2*j],Ee=p[x+3*j];return 4*Do[255+X-te]+Do[255+Q-ae]>z?0:Do[255+p[x-4*j]-Y]<=G&&Do[255+Y-Q]<=G&&Do[255+Q-X]<=G&&Do[255+Ee-we]<=G&&Do[255+we-ae]<=G&&Do[255+ae-te]<=G}function li(p,x,j,z){var G=2*z+1;for(z=0;16>z;++z)Cs(p,x+z,j,G)&&rs(p,x+z,j)}function zo(p,x,j,z){var G=2*z+1;for(z=0;16>z;++z)Cs(p,x+z*j,1,G)&&rs(p,x+z*j,1)}function Vo(p,x,j,z){var G;for(G=3;0<G;--G)li(p,x+=4*j,j,z)}function rl(p,x,j,z){var G;for(G=3;0<G;--G)zo(p,x+=4,j,z)}function zi(p,x,j,z,G,Y,Q,X){for(Y=2*Y+1;0<G--;){if(ns(p,x,j,Y,Q))if(wi(p,x,j,X))rs(p,x,j);else{var te=p,ae=x,we=j,Ee=te[ae-2*we],le=te[ae-we],Te=te[ae+0],Ie=te[ae+we],Me=te[ae+2*we],Ne=27*(Oe=Ps[1020+3*(Te-le)+Ps[1020+Ee-Ie]])+63>>7,Ve=18*Oe+63>>7,Oe=9*Oe+63>>7;te[ae-3*we]=Oi[255+te[ae-3*we]+Oe],te[ae-2*we]=Oi[255+Ee+Ve],te[ae-we]=Oi[255+le+Ne],te[ae+0]=Oi[255+Te-Ne],te[ae+we]=Oi[255+Ie-Ve],te[ae+2*we]=Oi[255+Me-Oe]}x+=z}}function Xn(p,x,j,z,G,Y,Q,X){for(Y=2*Y+1;0<G--;){if(ns(p,x,j,Y,Q))if(wi(p,x,j,X))rs(p,x,j);else{var te=p,ae=x,we=j,Ee=te[ae-we],le=te[ae+0],Te=te[ae+we],Ie=Wl[112+(4+(Me=3*(le-Ee))>>3)],Me=Wl[112+(Me+3>>3)],Ne=Ie+1>>1;te[ae-2*we]=Oi[255+te[ae-2*we]+Ne],te[ae-we]=Oi[255+Ee+Me],te[ae+0]=Oi[255+le-Ie],te[ae+we]=Oi[255+Te-Ne]}x+=z}}function Ca(p,x,j,z,G,Y){zi(p,x,j,1,16,z,G,Y)}function Wn(p,x,j,z,G,Y){zi(p,x,1,j,16,z,G,Y)}function Si(p,x,j,z,G,Y){var Q;for(Q=3;0<Q;--Q)Xn(p,x+=4*j,j,1,16,z,G,Y)}function ks(p,x,j,z,G,Y){var Q;for(Q=3;0<Q;--Q)Xn(p,x+=4,1,j,16,z,G,Y)}function _(p,x,j,z,G,Y,Q,X){zi(p,x,G,1,8,Y,Q,X),zi(j,z,G,1,8,Y,Q,X)}function H(p,x,j,z,G,Y,Q,X){zi(p,x,1,G,8,Y,Q,X),zi(j,z,1,G,8,Y,Q,X)}function ce(p,x,j,z,G,Y,Q,X){Xn(p,x+4*G,G,1,8,Y,Q,X),Xn(j,z+4*G,G,1,8,Y,Q,X)}function ye(p,x,j,z,G,Y,Q,X){Xn(p,x+4,1,G,8,Y,Q,X),Xn(j,z+4,1,G,8,Y,Q,X)}function Ce(){this.ba=new $t,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ar,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function De(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ge(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function lt(){this.ua=0,this.Wa=new Et,this.vb=new Et,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new B}function mt(){this.xb=this.a=0,this.l=new Qn,this.ca=new $t,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new J,this.Pb=0,this.wd=new J,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new lt,this.ab=0,this.gc=l(4,Ge),this.Oc=0}function Bt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Qn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function vt(p,x,j,z,G,Y,Q){for(p=p==null?0:p[x+0],x=0;x<Q;++x)G[Y+x]=p+j[z+x]&255,p=G[Y+x]}function gr(p,x,j,z,G,Y,Q){var X;if(p==null)vt(null,null,j,z,G,Y,Q);else for(X=0;X<Q;++X)G[Y+X]=p[x+X]+j[z+X]&255}function Qr(p,x,j,z,G,Y,Q){if(p==null)vt(null,null,j,z,G,Y,Q);else{var X,te=p[x+0],ae=te,we=te;for(X=0;X<Q;++X)ae=we+(te=p[x+X])-ae,we=j[z+X]+(-256&ae?0>ae?0:255:ae)&255,ae=te,G[Y+X]=we}}function Mr(p,x,j,z){var G=x.width,Y=x.o;if(e(p!=null&&x!=null),0>j||0>=z||j+z>Y)return null;if(!p.Cc){if(p.ga==null){var Q;if(p.ga=new Bt,(Q=p.ga==null)||(Q=x.width*x.o,e(p.Gb.length==0),p.Gb=o(Q),p.Uc=0,p.Gb==null?Q=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,Q=1),Q=!Q),!Q){Q=p.ga;var X=p.Fa,te=p.P,ae=p.qc,we=p.mb,Ee=p.nb,le=te+1,Te=ae-1,Ie=Q.l;if(e(X!=null&&we!=null&&x!=null),Ti[0]=null,Ti[1]=vt,Ti[2]=gr,Ti[3]=Qr,Q.ca=we,Q.tb=Ee,Q.c=x.width,Q.i=x.height,e(0<Q.c&&0<Q.i),1>=ae)x=0;else if(Q.$a=3&X[te+0],Q.Z=X[te+0]>>2&3,Q.Lc=X[te+0]>>4&3,te=X[te+0]>>6&3,0>Q.$a||1<Q.$a||4<=Q.Z||1<Q.Lc||te)x=0;else if(Ie.put=Rt,Ie.ac=Vn,Ie.bc=Pi,Ie.ma=Q,Ie.width=x.width,Ie.height=x.height,Ie.Da=x.Da,Ie.v=x.v,Ie.va=x.va,Ie.j=x.j,Ie.o=x.o,Q.$a)e:{e(Q.$a==1),x=bs();t:for(;;){if(x==null){x=0;break e}if(e(Q!=null),Q.mc=x,x.c=Q.c,x.i=Q.i,x.l=Q.l,x.l.ma=Q,x.l.width=Q.c,x.l.height=Q.i,x.a=0,ve(x.m,X,le,Te),!mo(Q.c,Q.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&Gi(x.s)?(Q.ic=1,X=x.c*x.i,x.Ta=null,x.Ua=0,x.V=o(X),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(Q.ic=0,x=go(x,Q.c)),!x))break t;x=1;break e}Q.mc=null,x=0}else x=Te>=Q.c*Q.i;Q=!x}if(Q)return null;p.ga.Lc!=1?p.Ga=0:z=Y-j}e(p.ga!=null),e(j+z<=Y);e:{if(x=(X=p.ga).c,Y=X.l.o,X.$a==0){if(le=p.rc,Te=p.Vc,Ie=p.Fa,te=p.P+1+j*x,ae=p.mb,we=p.nb+j*x,e(te<=p.P+p.qc),X.Z!=0)for(e(Ti[X.Z]!=null),Q=0;Q<z;++Q)Ti[X.Z](le,Te,Ie,te,ae,we,x),le=ae,Te=we,we+=x,te+=x;else for(Q=0;Q<z;++Q)n(ae,we,Ie,te,x),le=ae,Te=we,we+=x,te+=x;p.rc=le,p.Vc=Te}else{if(e(X.mc!=null),x=j+z,e((Q=X.mc)!=null),e(x<=Q.i),Q.C>=x)x=1;else if(X.ic||ke(),X.ic){X=Q.V,le=Q.Ba,Te=Q.c;var Me=Q.i,Ne=(Ie=1,te=Q.$/Te,ae=Q.$%Te,we=Q.m,Ee=Q.s,Q.$),Ve=Te*Me,Oe=Te*x,$e=Ee.wc,qe=Ne<Oe?un(Ee,ae,te):null;e(Ne<=Ve),e(x<=Me),e(Gi(Ee));t:for(;;){for(;!we.h&&Ne<Oe;){if(ae&$e||(qe=un(Ee,ae,te)),e(qe!=null),_e(we),256>(Me=Cr(qe.G[0],qe.H[0],we)))X[le+Ne]=Me,++Ne,++ae>=Te&&(ae=0,++te<=x&&!(te%16)&&bn(Q,te));else{if(!(280>Me)){Ie=0;break t}Me=On(Me-256,we);var St,ct=Cr(qe.G[4],qe.H[4],we);if(_e(we),!(Ne>=(ct=Ni(Te,ct=On(ct,we)))&&Ve-Ne>=Me)){Ie=0;break t}for(St=0;St<Me;++St)X[le+Ne+St]=X[le+Ne+St-ct];for(Ne+=Me,ae+=Me;ae>=Te;)ae-=Te,++te<=x&&!(te%16)&&bn(Q,te);Ne<Oe&&ae&$e&&(qe=un(Ee,ae,te))}e(we.h==fe(we))}bn(Q,te>x?x:te);break t}!Ie||we.h&&Ne<Ve?(Ie=0,Q.a=we.h?5:3):Q.$=Ne,x=Ie}else x=Bi(Q,Q.V,Q.Ba,Q.c,Q.i,x,ws);if(!x){z=0;break e}}j+z>=Y&&(p.Cc=1),z=1}if(!z)return null;if(p.Cc&&((z=p.ga)!=null&&(z.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+j*G}function m(p,x,j,z,G,Y){for(;0<G--;){var Q,X=p,te=x+(j?1:0),ae=p,we=x+(j?0:3);for(Q=0;Q<z;++Q){var Ee=ae[we+4*Q];Ee!=255&&(Ee*=32897,X[te+4*Q+0]=X[te+4*Q+0]*Ee>>23,X[te+4*Q+1]=X[te+4*Q+1]*Ee>>23,X[te+4*Q+2]=X[te+4*Q+2]*Ee>>23)}x+=Y}}function R(p,x,j,z,G){for(;0<z--;){var Y;for(Y=0;Y<j;++Y){var Q=p[x+2*Y+0],X=15&(ae=p[x+2*Y+1]),te=4369*X,ae=(240&ae|ae>>4)*te>>16;p[x+2*Y+0]=(240&Q|Q>>4)*te>>16&240|(15&Q|Q<<4)*te>>16>>4&15,p[x+2*Y+1]=240&ae|X}x+=G}}function U(p,x,j,z,G,Y,Q,X){var te,ae,we=255;for(ae=0;ae<G;++ae){for(te=0;te<z;++te){var Ee=p[x+te];Y[Q+4*te]=Ee,we&=Ee}x+=j,Q+=X}return we!=255}function ee(p,x,j,z,G){var Y;for(Y=0;Y<G;++Y)j[z+Y]=p[x+Y]>>8}function ke(){cl=m,dh=R,Oc=U,hh=ee}function Be(p,x,j){A[p]=function(z,G,Y,Q,X,te,ae,we,Ee,le,Te,Ie,Me,Ne,Ve,Oe,$e){var qe,St=$e-1>>1,ct=X[te+0]|ae[we+0]<<16,Xt=Ee[le+0]|Te[Ie+0]<<16;e(z!=null);var ft=3*ct+Xt+131074>>2;for(x(z[G+0],255&ft,ft>>16,Me,Ne),Y!=null&&(ft=3*Xt+ct+131074>>2,x(Y[Q+0],255&ft,ft>>16,Ve,Oe)),qe=1;qe<=St;++qe){var hr=X[te+qe]|ae[we+qe]<<16,pn=Ee[le+qe]|Te[Ie+qe]<<16,rr=ct+hr+Xt+pn+524296,ut=rr+2*(hr+Xt)>>3;ft=ut+ct>>1,ct=(rr=rr+2*(ct+pn)>>3)+hr>>1,x(z[G+2*qe-1],255&ft,ft>>16,Me,Ne+(2*qe-1)*j),x(z[G+2*qe-0],255&ct,ct>>16,Me,Ne+(2*qe-0)*j),Y!=null&&(ft=rr+Xt>>1,ct=ut+pn>>1,x(Y[Q+2*qe-1],255&ft,ft>>16,Ve,Oe+(2*qe-1)*j),x(Y[Q+2*qe+0],255&ct,ct>>16,Ve,Oe+(2*qe+0)*j)),ct=hr,Xt=pn}1&$e||(ft=3*ct+Xt+131074>>2,x(z[G+$e-1],255&ft,ft>>16,Me,Ne+($e-1)*j),Y!=null&&(ft=3*Xt+ct+131074>>2,x(Y[Q+$e-1],255&ft,ft>>16,Ve,Oe+($e-1)*j)))}}function tt(){eo[Hu]=E0,eo[Pa]=Na,eo[Kf]=j0,eo[Mc]=Hl,eo[Dc]=fl,eo[Wr]=Hc,eo[Gu]=wh,eo[$l]=Na,eo[ul]=Hl,eo[Wc]=fl,eo[$c]=Hc}function Dt(p){return p&-16384?0>p?0:255:p>>Ba}function Dr(p,x){return Dt((19077*p>>8)+(26149*x>>8)-14234)}function dr(p,x,j){return Dt((19077*p>>8)-(6419*x>>8)-(13320*j>>8)+8708)}function Xr(p,x){return Dt((19077*p>>8)+(33050*x>>8)-17685)}function $n(p,x,j,z,G){z[G+0]=Dr(p,j),z[G+1]=dr(p,x,j),z[G+2]=Xr(p,x)}function Vi(p,x,j,z,G){z[G+0]=Xr(p,x),z[G+1]=dr(p,x,j),z[G+2]=Dr(p,j)}function en(p,x,j,z,G){var Y=dr(p,x,j);x=Y<<3&224|Xr(p,x)>>3,z[G+0]=248&Dr(p,j)|Y>>5,z[G+1]=x}function _i(p,x,j,z,G){var Y=240&Xr(p,x)|15;z[G+0]=240&Dr(p,j)|dr(p,x,j)>>4,z[G+1]=Y}function Oo(p,x,j,z,G){z[G+0]=255,$n(p,x,j,z,G+1)}function Ys(p,x,j,z,G){Vi(p,x,j,z,G),z[G+3]=255}function Fc(p,x,j,z,G){$n(p,x,j,z,G),z[G+3]=255}function dn(p,x){return 0>p?0:p>x?x:p}function is(p,x,j){A[p]=function(z,G,Y,Q,X,te,ae,we,Ee){for(var le=we+(-2&Ee)*j;we!=le;)x(z[G+0],Y[Q+0],X[te+0],ae,we),x(z[G+1],Y[Q+0],X[te+0],ae,we+j),G+=2,++Q,++te,we+=2*j;1&Ee&&x(z[G+0],Y[Q+0],X[te+0],ae,we)}}function Is(p,x,j){return j==0?p==0?x==0?6:5:x==0?4:0:j}function $u(p,x,j,z,G){switch(p>>>30){case 3:al(x,j,z,G,0);break;case 2:hn(x,j,z,G);break;case 1:Sr(x,j,z,G)}}function wo(p,x){var j,z,G=x.M,Y=x.Nb,Q=p.oc,X=p.pc+40,te=p.oc,ae=p.pc+584,we=p.oc,Ee=p.pc+600;for(j=0;16>j;++j)Q[X+32*j-1]=129;for(j=0;8>j;++j)te[ae+32*j-1]=129,we[Ee+32*j-1]=129;for(0<G?Q[X-1-32]=te[ae-1-32]=we[Ee-1-32]=129:(i(Q,X-32-1,127,21),i(te,ae-32-1,127,9),i(we,Ee-32-1,127,9)),z=0;z<p.za;++z){var le=x.ya[x.aa+z];if(0<z){for(j=-1;16>j;++j)n(Q,X+32*j-4,Q,X+32*j+12,4);for(j=-1;8>j;++j)n(te,ae+32*j-4,te,ae+32*j+4,4),n(we,Ee+32*j-4,we,Ee+32*j+4,4)}var Te=p.Gd,Ie=p.Hd+z,Me=le.ad,Ne=le.Hc;if(0<G&&(n(Q,X-32,Te[Ie].y,0,16),n(te,ae-32,Te[Ie].f,0,8),n(we,Ee-32,Te[Ie].ea,0,8)),le.Za){var Ve=Q,Oe=X-32+16;for(0<G&&(z>=p.za-1?i(Ve,Oe,Te[Ie].y[15],4):n(Ve,Oe,Te[Ie+1].y,0,4)),j=0;4>j;j++)Ve[Oe+128+j]=Ve[Oe+256+j]=Ve[Oe+384+j]=Ve[Oe+0+j];for(j=0;16>j;++j,Ne<<=2)Ve=Q,Oe=X+Sh[j],Wo[le.Ob[j]](Ve,Oe),$u(Ne,Me,16*+j,Ve,Oe)}else if(Ve=Is(z,G,le.Ob[0]),Mi[Ve](Q,X),Ne!=0)for(j=0;16>j;++j,Ne<<=2)$u(Ne,Me,16*+j,Q,X+Sh[j]);for(j=le.Gc,Ve=Is(z,G,le.Dd),Zi[Ve](te,ae),Zi[Ve](we,Ee),Ne=Me,Ve=te,Oe=ae,255&(le=0|j)&&(170&le?Xi(Ne,256,Ve,Oe):Br(Ne,256,Ve,Oe)),le=we,Ne=Ee,255&(j>>=8)&&(170&j?Xi(Me,320,le,Ne):Br(Me,320,le,Ne)),G<p.Ub-1&&(n(Te[Ie].y,0,Q,X+480,16),n(Te[Ie].f,0,te,ae+224,8),n(Te[Ie].ea,0,we,Ee+224,8)),j=8*Y*p.B,Te=p.sa,Ie=p.ta+16*z+16*Y*p.R,Me=p.qa,le=p.ra+8*z+j,Ne=p.Ha,Ve=p.Ia+8*z+j,j=0;16>j;++j)n(Te,Ie+j*p.R,Q,X+32*j,16);for(j=0;8>j;++j)n(Me,le+j*p.B,te,ae+32*j,8),n(Ne,Ve+j*p.B,we,Ee+32*j,8)}}function ka(p,x,j,z,G,Y,Q,X,te){var ae=[0],we=[0],Ee=0,le=te!=null?te.kd:0,Te=te??new De;if(p==null||12>j)return 7;Te.data=p,Te.w=x,Te.ha=j,x=[x],j=[j],Te.gb=[Te.gb];e:{var Ie=x,Me=j,Ne=Te.gb;if(e(p!=null),e(Me!=null),e(Ne!=null),Ne[0]=0,12<=Me[0]&&!t(p,Ie[0],"RIFF")){if(t(p,Ie[0]+8,"WEBP")){Ne=3;break e}var Ve=ze(p,Ie[0]+4);if(12>Ve||4294967286<Ve){Ne=3;break e}if(le&&Ve>Me[0]-8){Ne=7;break e}Ne[0]=Ve,Ie[0]+=12,Me[0]-=12}Ne=0}if(Ne!=0)return Ne;for(Ve=0<Te.gb[0],j=j[0];;){e:{var Oe=p;Me=x,Ne=j;var $e=ae,qe=we,St=Ie=[0];if((ft=Ee=[Ee])[0]=0,8>Ne[0])Ne=7;else{if(!t(Oe,Me[0],"VP8X")){if(ze(Oe,Me[0]+4)!=10){Ne=3;break e}if(18>Ne[0]){Ne=7;break e}var ct=ze(Oe,Me[0]+8),Xt=1+Ze(Oe,Me[0]+12);if(2147483648<=Xt*(Oe=1+Ze(Oe,Me[0]+15))){Ne=3;break e}St!=null&&(St[0]=ct),$e!=null&&($e[0]=Xt),qe!=null&&(qe[0]=Oe),Me[0]+=18,Ne[0]-=18,ft[0]=1}Ne=0}}if(Ee=Ee[0],Ie=Ie[0],Ne!=0)return Ne;if(Me=!!(2&Ie),!Ve&&Ee)return 3;if(Y!=null&&(Y[0]=!!(16&Ie)),Q!=null&&(Q[0]=Me),X!=null&&(X[0]=0),Q=ae[0],Ie=we[0],Ee&&Me&&te==null){Ne=0;break}if(4>j){Ne=7;break}if(Ve&&Ee||!Ve&&!Ee&&!t(p,x[0],"ALPH")){j=[j],Te.na=[Te.na],Te.P=[Te.P],Te.Sa=[Te.Sa];e:{ct=p,Ne=x,Ve=j;var ft=Te.gb;$e=Te.na,qe=Te.P,St=Te.Sa,Xt=22,e(ct!=null),e(Ve!=null),Oe=Ne[0];var hr=Ve[0];for(e($e!=null),e(St!=null),$e[0]=null,qe[0]=null,St[0]=0;;){if(Ne[0]=Oe,Ve[0]=hr,8>hr){Ne=7;break e}var pn=ze(ct,Oe+4);if(4294967286<pn){Ne=3;break e}var rr=8+pn+1&-2;if(Xt+=rr,0<ft&&Xt>ft){Ne=3;break e}if(!t(ct,Oe,"VP8 ")||!t(ct,Oe,"VP8L")){Ne=0;break e}if(hr[0]<rr){Ne=7;break e}t(ct,Oe,"ALPH")||($e[0]=ct,qe[0]=Oe+8,St[0]=pn),Oe+=rr,hr-=rr}}if(j=j[0],Te.na=Te.na[0],Te.P=Te.P[0],Te.Sa=Te.Sa[0],Ne!=0)break}j=[j],Te.Ja=[Te.Ja],Te.xa=[Te.xa];e:if(ft=p,Ne=x,Ve=j,$e=Te.gb[0],qe=Te.Ja,St=Te.xa,ct=Ne[0],Oe=!t(ft,ct,"VP8 "),Xt=!t(ft,ct,"VP8L"),e(ft!=null),e(Ve!=null),e(qe!=null),e(St!=null),8>Ve[0])Ne=7;else{if(Oe||Xt){if(ft=ze(ft,ct+4),12<=$e&&ft>$e-12){Ne=3;break e}if(le&&ft>Ve[0]-8){Ne=7;break e}qe[0]=ft,Ne[0]+=8,Ve[0]-=8,St[0]=Xt}else St[0]=5<=Ve[0]&&ft[ct+0]==47&&!(ft[ct+4]>>5),qe[0]=Ve[0];Ne=0}if(j=j[0],Te.Ja=Te.Ja[0],Te.xa=Te.xa[0],x=x[0],Ne!=0)break;if(4294967286<Te.Ja)return 3;if(X==null||Me||(X[0]=Te.xa?2:1),Q=[Q],Ie=[Ie],Te.xa){if(5>j){Ne=7;break}X=Q,le=Ie,Me=Y,p==null||5>j?p=0:5<=j&&p[x+0]==47&&!(p[x+4]>>5)?(Ve=[0],ft=[0],$e=[0],ve(qe=new J,p,x,j),mi(qe,Ve,ft,$e)?(X!=null&&(X[0]=Ve[0]),le!=null&&(le[0]=ft[0]),Me!=null&&(Me[0]=$e[0]),p=1):p=0):p=0}else{if(10>j){Ne=7;break}X=Ie,p==null||10>j||!Ts(p,x+3,j-3)?p=0:(le=p[x+0]|p[x+1]<<8|p[x+2]<<16,Me=16383&(p[x+7]<<8|p[x+6]),p=16383&(p[x+9]<<8|p[x+8]),1&le||3<(le>>1&7)||!(le>>4&1)||le>>5>=Te.Ja||!Me||!p?p=0:(Q&&(Q[0]=Me),X&&(X[0]=p),p=1))}if(!p||(Q=Q[0],Ie=Ie[0],Ee&&(ae[0]!=Q||we[0]!=Ie)))return 3;te!=null&&(te[0]=Te,te.offset=x-te.w,e(4294967286>x-te.w),e(te.offset==te.ha-j));break}return Ne==0||Ne==7&&Ee&&te==null?(Y!=null&&(Y[0]|=Te.na!=null&&0<Te.na.length),z!=null&&(z[0]=Q),G!=null&&(G[0]=Ie),0):Ne}function Fl(p,x,j){var z=x.width,G=x.height,Y=0,Q=0,X=z,te=G;if(x.Da=p!=null&&0<p.Da,x.Da&&(X=p.cd,te=p.bd,Y=p.v,Q=p.j,11>j||(Y&=-2,Q&=-2),0>Y||0>Q||0>=X||0>=te||Y+X>z||Q+te>G))return 0;if(x.v=Y,x.j=Q,x.va=Y+X,x.o=Q+te,x.U=X,x.T=te,x.da=p!=null&&0<p.da,x.da){if(!wt(X,te,j=[p.ib],Y=[p.hb]))return 0;x.ib=j[0],x.hb=Y[0]}return x.ob=p!=null&&p.ob,x.Kb=p==null||!p.Sd,x.da&&(x.ob=x.ib<3*z/4&&x.hb<3*G/4,x.Kb=0),1}function zl(p){if(p==null)return 2;if(11>p.S){var x=p.f.RGBA;x.fb+=(p.height-1)*x.A,x.A=-x.A}else x=p.f.kb,p=p.height,x.O+=(p-1)*x.fa,x.fa=-x.fa,x.N+=(p-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(p-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(p-1)*x.lb,x.lb=-x.lb);return 0}function Qs(p,x,j,z){if(z==null||0>=p||0>=x)return 2;if(j!=null){if(j.Da){var G=j.cd,Y=j.bd,Q=-2&j.v,X=-2&j.j;if(0>Q||0>X||0>=G||0>=Y||Q+G>p||X+Y>x)return 2;p=G,x=Y}if(j.da){if(!wt(p,x,G=[j.ib],Y=[j.hb]))return 2;p=G[0],x=Y[0]}}z.width=p,z.height=x;e:{var te=z.width,ae=z.height;if(p=z.S,0>=te||0>=ae||!(p>=Hu&&13>p))p=2;else{if(0>=z.Rd&&z.sd==null){Q=Y=G=x=0;var we=(X=te*Gc[p])*ae;if(11>p||(Y=(ae+1)/2*(x=(te+1)/2),p==12&&(Q=(G=te)*ae)),(ae=o(we+2*Y+Q))==null){p=1;break e}z.sd=ae,11>p?((te=z.f.RGBA).eb=ae,te.fb=0,te.A=X,te.size=we):((te=z.f.kb).y=ae,te.O=0,te.fa=X,te.Fd=we,te.f=ae,te.N=0+we,te.Ab=x,te.Cd=Y,te.ea=ae,te.W=0+we+Y,te.Db=x,te.Ed=Y,p==12&&(te.F=ae,te.J=0+we+2*Y),te.Tc=Q,te.lb=G)}if(x=1,G=z.S,Y=z.width,Q=z.height,G>=Hu&&13>G)if(11>G)p=z.f.RGBA,x&=(X=Math.abs(p.A))*(Q-1)+Y<=p.size,x&=X>=Y*Gc[G],x&=p.eb!=null;else{p=z.f.kb,X=(Y+1)/2,we=(Q+1)/2,te=Math.abs(p.fa),ae=Math.abs(p.Ab);var Ee=Math.abs(p.Db),le=Math.abs(p.lb),Te=le*(Q-1)+Y;x&=te*(Q-1)+Y<=p.Fd,x&=ae*(we-1)+X<=p.Cd,x=(x&=Ee*(we-1)+X<=p.Ed)&te>=Y&ae>=X&Ee>=X,x&=p.y!=null,x&=p.f!=null,x&=p.ea!=null,G==12&&(x&=le>=Y,x&=Te<=p.Tc,x&=p.F!=null)}else x=0;p=x?0:2}}return p!=0||j!=null&&j.fd&&(p=zl(z)),p}var Mo=64,So=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],_o=24,Ia=32,Es=8,Xs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];rt("Predictor0","PredictorAdd0"),A.Predictor0=function(){return 4278190080},A.Predictor1=function(p){return p},A.Predictor2=function(p,x,j){return x[j+0]},A.Predictor3=function(p,x,j){return x[j+1]},A.Predictor4=function(p,x,j){return x[j-1]},A.Predictor5=function(p,x,j){return _t(_t(p,x[j+1]),x[j+0])},A.Predictor6=function(p,x,j){return _t(p,x[j-1])},A.Predictor7=function(p,x,j){return _t(p,x[j+0])},A.Predictor8=function(p,x,j){return _t(x[j-1],x[j+0])},A.Predictor9=function(p,x,j){return _t(x[j+0],x[j+1])},A.Predictor10=function(p,x,j){return _t(_t(p,x[j-1]),_t(x[j+0],x[j+1]))},A.Predictor11=function(p,x,j){var z=x[j+0];return 0>=qt(z>>24&255,p>>24&255,(x=x[j-1])>>24&255)+qt(z>>16&255,p>>16&255,x>>16&255)+qt(z>>8&255,p>>8&255,x>>8&255)+qt(255&z,255&p,255&x)?z:p},A.Predictor12=function(p,x,j){var z=x[j+0];return(mr((p>>24&255)+(z>>24&255)-((x=x[j-1])>>24&255))<<24|mr((p>>16&255)+(z>>16&255)-(x>>16&255))<<16|mr((p>>8&255)+(z>>8&255)-(x>>8&255))<<8|mr((255&p)+(255&z)-(255&x)))>>>0},A.Predictor13=function(p,x,j){var z=x[j-1];return(Ft((p=_t(p,x[j+0]))>>24&255,z>>24&255)<<24|Ft(p>>16&255,z>>16&255)<<16|Ft(p>>8&255,z>>8&255)<<8|Ft(255&p,255&z))>>>0};var Zs=A.PredictorAdd0;A.PredictorAdd1=vr,rt("Predictor2","PredictorAdd2"),rt("Predictor3","PredictorAdd3"),rt("Predictor4","PredictorAdd4"),rt("Predictor5","PredictorAdd5"),rt("Predictor6","PredictorAdd6"),rt("Predictor7","PredictorAdd7"),rt("Predictor8","PredictorAdd8"),rt("Predictor9","PredictorAdd9"),rt("Predictor10","PredictorAdd10"),rt("Predictor11","PredictorAdd11"),rt("Predictor12","PredictorAdd12"),rt("Predictor13","PredictorAdd13");var js=A.PredictorAdd2;pt("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),pt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var Sn,nl=A.ColorIndexInverseTransform,Rs=A.MapARGB,os=A.VP8LColorIndexInverseTransformAlpha,il=A.MapAlpha,ol=A.VP8LPredictorsAdd=[];ol.length=16,(A.VP8LPredictors=[]).length=16,(A.VP8LPredictorsAdd_C=[]).length=16,(A.VP8LPredictors_C=[]).length=16;var Vl,Ol,ea,Ea,ja,sl,Ra,al,hn,Xi,Sr,Br,fn,jn,ss,zc,Ml,ta,Uu,Dl,qu,uh,Vc,ll,cl,dh,Oc,hh,fh=o(511),ph=o(2041),mh=o(225),gh=o(767),yh=0,Ps=ph,Wl=mh,Oi=gh,Do=fh,Hu=0,Pa=1,Kf=2,Mc=3,Dc=4,Wr=5,Gu=6,$l=7,ul=8,Wc=9,$c=10,Uc=[2,3,7],Ku=[3,3,11],dl=[280,256,256,256,40],Jf=[0,1,1,1,0],A0=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],C0=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Yf=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ju=8,Ul=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],qc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],hl=null,xh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],vh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Qf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Xf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],k0=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],I0=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],bh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Mi=[],Wo=[],Zi=[],Ns=1,ql=2,Ti=[],eo=[];Be("UpsampleRgbLinePair",$n,3),Be("UpsampleBgrLinePair",Vi,3),Be("UpsampleRgbaLinePair",Fc,4),Be("UpsampleBgraLinePair",Ys,4),Be("UpsampleArgbLinePair",Oo,4),Be("UpsampleRgba4444LinePair",_i,2),Be("UpsampleRgb565LinePair",en,2);var E0=A.UpsampleRgbLinePair,j0=A.UpsampleBgrLinePair,Na=A.UpsampleRgbaLinePair,Hl=A.UpsampleBgraLinePair,fl=A.UpsampleArgbLinePair,Hc=A.UpsampleRgba4444LinePair,wh=A.UpsampleRgb565LinePair,ra=16,as=1<<ra-1,Pr=-227,Lr=482,Ba=6,ci=0,to=o(256),pl=o(256),Gl=o(256),ro=o(256),Yu=o(Lr-Pr),Zf=o(Lr-Pr);is("YuvToRgbRow",$n,3),is("YuvToBgrRow",Vi,3),is("YuvToRgbaRow",Fc,4),is("YuvToBgraRow",Ys,4),is("YuvToArgbRow",Oo,4),is("YuvToRgba4444Row",_i,2),is("YuvToRgb565Row",en,2);var Sh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ml=[0,2,8],ep=[8,7,6,4,4,2,2,2,1,1,1,1],na=1;this.WebPDecodeRGBA=function(p,x,j,z,G){var Y=Pa,Q=new Ce,X=new $t;Q.ba=X,X.S=Y,X.width=[X.width],X.height=[X.height];var te=X.width,ae=X.height,we=new Mt;if(we==null||p==null)var Ee=2;else e(we!=null),Ee=ka(p,x,j,we.width,we.height,we.Pd,we.Qd,we.format,null);if(Ee!=0?te=0:(te!=null&&(te[0]=we.width[0]),ae!=null&&(ae[0]=we.height[0]),te=1),te){X.width=X.width[0],X.height=X.height[0],z!=null&&(z[0]=X.width),G!=null&&(G[0]=X.height);e:{if(z=new Qn,(G=new De).data=p,G.w=x,G.ha=j,G.kd=1,x=[0],e(G!=null),((p=ka(G.data,G.w,G.ha,null,null,null,x,null,G))==0||p==7)&&x[0]&&(p=4),(x=p)==0){if(e(Q!=null),z.data=G.data,z.w=G.w+G.offset,z.ha=G.ha-G.offset,z.put=Rt,z.ac=Vn,z.bc=Pi,z.ma=Q,G.xa){if((p=bs())==null){Q=1;break e}if((function(le,Te){var Ie=[0],Me=[0],Ne=[0];t:for(;;){if(le==null)return 0;if(Te==null)return le.a=2,0;if(le.l=Te,le.a=0,ve(le.m,Te.data,Te.w,Te.ha),!mi(le.m,Ie,Me,Ne)){le.a=3;break t}if(le.xb=ql,Te.width=Ie[0],Te.height=Me[0],!mo(Ie[0],Me[0],1,le,null))break t;return 1}return e(le.a!=0),0})(p,z)){if(z=(x=Qs(z.width,z.height,Q.Oa,Q.ba))==0){t:{z=p;r:for(;;){if(z==null){z=0;break t}if(e(z.s.yc!=null),e(z.s.Ya!=null),e(0<z.s.Wb),e((j=z.l)!=null),e((G=j.ma)!=null),z.xb!=0){if(z.ca=G.ba,z.tb=G.tb,e(z.ca!=null),!Fl(G.Oa,j,Mc)){z.a=2;break r}if(!go(z,j.width)||j.da)break r;if((j.da||Wt(z.ca.S))&&ke(),11>z.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),z.ca.f.kb.F!=null&&ke()),z.Pb&&0<z.s.ua&&z.s.vb.X==null&&!de(z.s.vb,z.s.Wa.Xa)){z.a=1;break r}z.xb=0}if(!Bi(z,z.V,z.Ba,z.c,z.i,j.o,Yo))break r;G.Dc=z.Ma,z=1;break t}e(z.a!=0),z=0}z=!z}z&&(x=p.a)}else x=p.a}else{if((p=new No)==null){Q=1;break e}if(p.Fa=G.na,p.P=G.P,p.qc=G.Sa,yo(p,z)){if((x=Qs(z.width,z.height,Q.Oa,Q.ba))==0){if(p.Aa=0,j=Q.Oa,e((G=p)!=null),j!=null){if(0<(te=0>(te=j.Md)?0:100<te?255:255*te/100)){for(ae=we=0;4>ae;++ae)12>(Ee=G.pb[ae]).lc&&(Ee.ia=te*ep[0>Ee.lc?0:Ee.lc]>>3),we|=Ee.ia;we&&(alert("todo:VP8InitRandom"),G.ia=1)}G.Ga=j.Id,100<G.Ga?G.Ga=100:0>G.Ga&&(G.Ga=0)}(function(le,Te){if(le==null)return 0;if(Te==null)return wr(le,2,"NULL VP8Io parameter in VP8Decode().");if(!le.cb&&!yo(le,Te))return 0;if(e(le.cb),Te.ac==null||Te.ac(Te)){Te.ob&&(le.L=0);var Ie=ml[le.L];if(le.L==2?(le.yb=0,le.zb=0):(le.yb=Te.v-Ie>>4,le.zb=Te.j-Ie>>4,0>le.yb&&(le.yb=0),0>le.zb&&(le.zb=0)),le.Va=Te.o+15+Ie>>4,le.Hb=Te.va+15+Ie>>4,le.Hb>le.za&&(le.Hb=le.za),le.Va>le.Ub&&(le.Va=le.Ub),0<le.L){var Me=le.ed;for(Ie=0;4>Ie;++Ie){var Ne;if(le.Qa.Cb){var Ve=le.Qa.Lb[Ie];le.Qa.Fb||(Ve+=Me.Tb)}else Ve=Me.Tb;for(Ne=0;1>=Ne;++Ne){var Oe=le.gd[Ie][Ne],$e=Ve;if(Me.Pc&&($e+=Me.vd[0],Ne&&($e+=Me.od[0])),0<($e=0>$e?0:63<$e?63:$e)){var qe=$e;0<Me.wb&&(qe=4<Me.wb?qe>>2:qe>>1)>9-Me.wb&&(qe=9-Me.wb),1>qe&&(qe=1),Oe.dd=qe,Oe.tc=2*$e+qe,Oe.ld=40<=$e?2:15<=$e?1:0}else Oe.tc=0;Oe.La=Ne}}}Ie=0}else wr(le,6,"Frame setup failed"),Ie=le.a;if(Ie=Ie==0){if(Ie){le.$c=0,0<le.Aa||(le.Ic=na);t:{Ie=le.Ic,Me=4*(qe=le.za);var St=32*qe,ct=qe+1,Xt=0<le.L?qe*(0<le.Aa?2:1):0,ft=(le.Aa==2?2:1)*qe;if((Oe=Me+832+(Ne=3*(16*Ie+ml[le.L])/2*St)+(Ve=le.Fa!=null&&0<le.Fa.length?le.Kc.c*le.Kc.i:0))!=Oe)Ie=0;else{if(Oe>le.Vb){if(le.Vb=0,le.Ec=o(Oe),le.Fc=0,le.Ec==null){Ie=wr(le,1,"no memory during frame initialization.");break t}le.Vb=Oe}Oe=le.Ec,$e=le.Fc,le.Ac=Oe,le.Bc=$e,$e+=Me,le.Gd=l(St,yi),le.Hd=0,le.rb=l(ct+1,Zo),le.sb=1,le.wa=Xt?l(Xt,gi):null,le.Y=0,le.D.Nb=0,le.D.wa=le.wa,le.D.Y=le.Y,0<le.Aa&&(le.D.Y+=qe),e(!0),le.oc=Oe,le.pc=$e,$e+=832,le.ya=l(ft,Ss),le.aa=0,le.D.ya=le.ya,le.D.aa=le.aa,le.Aa==2&&(le.D.aa+=qe),le.R=16*qe,le.B=8*qe,qe=(St=ml[le.L])*le.R,St=St/2*le.B,le.sa=Oe,le.ta=$e+qe,le.qa=le.sa,le.ra=le.ta+16*Ie*le.R+St,le.Ha=le.qa,le.Ia=le.ra+8*Ie*le.B+St,le.$c=0,$e+=Ne,le.mb=Ve?Oe:null,le.nb=Ve?$e:null,e($e+Ve<=le.Fc+le.Vb),lr(le),i(le.Ac,le.Bc,0,Me),Ie=1}}if(Ie){if(Te.ka=0,Te.y=le.sa,Te.O=le.ta,Te.f=le.qa,Te.N=le.ra,Te.ea=le.Ha,Te.Vd=le.Ia,Te.fa=le.R,Te.Rc=le.B,Te.F=null,Te.J=0,!yh){for(Ie=-255;255>=Ie;++Ie)fh[255+Ie]=0>Ie?-Ie:Ie;for(Ie=-1020;1020>=Ie;++Ie)ph[1020+Ie]=-128>Ie?-128:127<Ie?127:Ie;for(Ie=-112;112>=Ie;++Ie)mh[112+Ie]=-16>Ie?-16:15<Ie?15:Ie;for(Ie=-255;510>=Ie;++Ie)gh[255+Ie]=0>Ie?0:255<Ie?255:Ie;yh=1}Ra=or,al=Xa,Xi=Hs,Sr=Bo,Br=Sa,hn=Qa,fn=Ca,jn=Wn,ss=_,zc=H,Ml=Si,ta=ks,Uu=ce,Dl=ye,qu=li,uh=zo,Vc=Vo,ll=rl,Wo[0]=Ll,Wo[1]=Gs,Wo[2]=es,Wo[3]=Fi,Wo[4]=As,Wo[5]=Fo,Wo[6]=Dn,Wo[7]=Ta,Wo[8]=Js,Wo[9]=Rr,Mi[0]=vo,Mi[1]=Za,Mi[2]=el,Mi[3]=Ks,Mi[4]=Lo,Mi[5]=bi,Mi[6]=wn,Zi[0]=Yi,Zi[1]=_a,Zi[2]=tl,Zi[3]=Ji,Zi[4]=Qi,Zi[5]=ts,Zi[6]=Aa,Ie=1}else Ie=0}Ie&&(Ie=(function(hr,pn){for(hr.M=0;hr.M<hr.Va;++hr.M){var rr,ut=hr.Jc[hr.M&hr.Xb],nt=hr.m,_n=hr;for(rr=0;rr<_n.za;++rr){var Gt=nt,cr=_n,Zr=cr.Ac,Zn=cr.Bc+4*rr,Rn=cr.zc,an=cr.ya[cr.aa+rr];if(cr.Qa.Bb?an.$b=Pe(Gt,cr.Pa.jb[0])?2+Pe(Gt,cr.Pa.jb[2]):Pe(Gt,cr.Pa.jb[1]):an.$b=0,cr.kc&&(an.Ad=Pe(Gt,cr.Bd)),an.Za=!Pe(Gt,145)+0,an.Za){var Un=an.Ob,ei=0;for(cr=0;4>cr;++cr){var nn,pr=Rn[0+cr];for(nn=0;4>nn;++nn){pr=k0[Zr[Zn+nn]][pr];for(var _r=Qf[Pe(Gt,pr[0])];0<_r;)_r=Qf[2*_r+Pe(Gt,pr[_r])];pr=-_r,Zr[Zn+nn]=pr}n(Un,ei,Zr,Zn,4),ei+=4,Rn[0+cr]=pr}}else pr=Pe(Gt,156)?Pe(Gt,128)?1:3:Pe(Gt,163)?2:0,an.Ob[0]=pr,i(Zr,Zn,pr,4),i(Rn,0,pr,4);an.Dd=Pe(Gt,142)?Pe(Gt,114)?Pe(Gt,183)?1:3:2:0}if(_n.m.Ka)return wr(hr,7,"Premature end-of-partition0 encountered.");for(;hr.ja<hr.za;++hr.ja){if(_n=ut,Gt=(nt=hr).rb[nt.sb-1],Zr=nt.rb[nt.sb+nt.ja],rr=nt.ya[nt.aa+nt.ja],Zn=nt.kc?rr.Ad:0)Gt.la=Zr.la=0,rr.Za||(Gt.Na=Zr.Na=0),rr.Hc=0,rr.Gc=0,rr.ia=0;else{var on,Tr;if(Gt=Zr,Zr=_n,Zn=nt.Pa.Xc,Rn=nt.ya[nt.aa+nt.ja],an=nt.pb[Rn.$b],cr=Rn.ad,Un=0,ei=nt.rb[nt.sb-1],pr=nn=0,i(cr,Un,0,384),Rn.Za)var mn=0,gn=Zn[3];else{_r=o(16);var $r=Gt.Na+ei.Na;if($r=hl(Zr,Zn[1],$r,an.Eb,0,_r,0),Gt.Na=ei.Na=(0<$r)+0,1<$r)Ra(_r,0,cr,Un);else{var Ai=_r[0]+3>>3;for(_r=0;256>_r;_r+=16)cr[Un+_r]=Ai}mn=1,gn=Zn[0]}var Fr=15&Gt.la,Ur=15&ei.la;for(_r=0;4>_r;++_r){var Pn=1&Ur;for(Ai=Tr=0;4>Ai;++Ai)Fr=Fr>>1|(Pn=($r=hl(Zr,gn,$r=Pn+(1&Fr),an.Sc,mn,cr,Un))>mn)<<7,Tr=Tr<<2|(3<$r?3:1<$r?2:cr[Un+0]!=0),Un+=16;Fr>>=4,Ur=Ur>>1|Pn<<7,nn=(nn<<8|Tr)>>>0}for(gn=Fr,mn=Ur>>4,on=0;4>on;on+=2){for(Tr=0,Fr=Gt.la>>4+on,Ur=ei.la>>4+on,_r=0;2>_r;++_r){for(Pn=1&Ur,Ai=0;2>Ai;++Ai)$r=Pn+(1&Fr),Fr=Fr>>1|(Pn=0<($r=hl(Zr,Zn[2],$r,an.Qc,0,cr,Un)))<<3,Tr=Tr<<2|(3<$r?3:1<$r?2:cr[Un+0]!=0),Un+=16;Fr>>=2,Ur=Ur>>1|Pn<<5}pr|=Tr<<4*on,gn|=Fr<<4<<on,mn|=(240&Ur)<<on}Gt.la=gn,ei.la=mn,Rn.Hc=nn,Rn.Gc=pr,Rn.ia=43690&pr?0:an.ia,Zn=!(nn|pr)}if(0<nt.L&&(nt.wa[nt.Y+nt.ja]=nt.gd[rr.$b][rr.Za],nt.wa[nt.Y+nt.ja].La|=!Zn),_n.Ka)return wr(hr,7,"Premature end-of-file encountered.")}if(lr(hr),nt=pn,_n=1,rr=(ut=hr).D,Gt=0<ut.L&&ut.M>=ut.zb&&ut.M<=ut.Va,ut.Aa==0)t:{if(rr.M=ut.M,rr.uc=Gt,wo(ut,rr),_n=1,rr=(Tr=ut.D).Nb,Gt=(pr=ml[ut.L])*ut.R,Zr=pr/2*ut.B,_r=16*rr*ut.R,Ai=8*rr*ut.B,Zn=ut.sa,Rn=ut.ta-Gt+_r,an=ut.qa,cr=ut.ra-Zr+Ai,Un=ut.Ha,ei=ut.Ia-Zr+Ai,Ur=(Fr=Tr.M)==0,nn=Fr>=ut.Va-1,ut.Aa==2&&wo(ut,Tr),Tr.uc)for(Pn=($r=ut).D.M,e($r.D.uc),Tr=$r.yb;Tr<$r.Hb;++Tr){mn=Tr,gn=Pn;var ui=(no=(Cn=$r).D).Nb;on=Cn.R;var no=no.wa[no.Y+mn],Tn=Cn.sa,An=Cn.ta+16*ui*on+16*mn,Ci=no.dd,qr=no.tc;if(qr!=0)if(e(3<=qr),Cn.L==1)0<mn&&uh(Tn,An,on,qr+4),no.La&&ll(Tn,An,on,qr),0<gn&&qu(Tn,An,on,qr+4),no.La&&Vc(Tn,An,on,qr);else{var ki=Cn.B,$o=Cn.qa,ls=Cn.ra+8*ui*ki+8*mn,ti=Cn.Ha,Cn=Cn.Ia+8*ui*ki+8*mn;ui=no.ld,0<mn&&(jn(Tn,An,on,qr+4,Ci,ui),zc($o,ls,ti,Cn,ki,qr+4,Ci,ui)),no.La&&(ta(Tn,An,on,qr,Ci,ui),Dl($o,ls,ti,Cn,ki,qr,Ci,ui)),0<gn&&(fn(Tn,An,on,qr+4,Ci,ui),ss($o,ls,ti,Cn,ki,qr+4,Ci,ui)),no.La&&(Ml(Tn,An,on,qr,Ci,ui),Uu($o,ls,ti,Cn,ki,qr,Ci,ui))}}if(ut.ia&&alert("todo:DitherRow"),nt.put!=null){if(Tr=16*Fr,Fr=16*(Fr+1),Ur?(nt.y=ut.sa,nt.O=ut.ta+_r,nt.f=ut.qa,nt.N=ut.ra+Ai,nt.ea=ut.Ha,nt.W=ut.Ia+Ai):(Tr-=pr,nt.y=Zn,nt.O=Rn,nt.f=an,nt.N=cr,nt.ea=Un,nt.W=ei),nn||(Fr-=pr),Fr>nt.o&&(Fr=nt.o),nt.F=null,nt.J=null,ut.Fa!=null&&0<ut.Fa.length&&Tr<Fr&&(nt.J=Mr(ut,nt,Tr,Fr-Tr),nt.F=ut.mb,nt.F==null&&nt.F.length==0)){_n=wr(ut,3,"Could not decode alpha data.");break t}Tr<nt.j&&(pr=nt.j-Tr,Tr=nt.j,e(!(1&pr)),nt.O+=ut.R*pr,nt.N+=ut.B*(pr>>1),nt.W+=ut.B*(pr>>1),nt.F!=null&&(nt.J+=nt.width*pr)),Tr<Fr&&(nt.O+=nt.v,nt.N+=nt.v>>1,nt.W+=nt.v>>1,nt.F!=null&&(nt.J+=nt.v),nt.ka=Tr-nt.j,nt.U=nt.va-nt.v,nt.T=Fr-Tr,_n=nt.put(nt))}rr+1!=ut.Ic||nn||(n(ut.sa,ut.ta-Gt,Zn,Rn+16*ut.R,Gt),n(ut.qa,ut.ra-Zr,an,cr+8*ut.B,Zr),n(ut.Ha,ut.Ia-Zr,Un,ei+8*ut.B,Zr))}if(!_n)return wr(hr,6,"Output aborted.")}return 1})(le,Te)),Te.bc!=null&&Te.bc(Te),Ie&=1}return Ie?(le.cb=0,Ie):0})(p,z)||(x=p.a)}}else x=p.a}x==0&&Q.Oa!=null&&Q.Oa.fd&&(x=zl(Q.ba))}Q=x}Y=Q!=0?null:11>Y?X.f.RGBA.eb:X.f.kb.y}else Y=null;return Y};var Gc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(A,O){for(var I="",w=0;w<4;w++)I+=String.fromCharCode(A[O++]);return I}function g(A,O){return A[O+0]|A[O+1]<<8}function b(A,O){return(A[O+0]|A[O+1]<<8|A[O+2]<<16)>>>0}function S(A,O){return(A[O+0]|A[O+1]<<8|A[O+2]<<16|A[O+3]<<24)>>>0}new h;var v=[0],N=[0],E=[],L=new h,C=r,M=(function(A,O){var I={},w=0,B=!1,D=0,q=0;if(I.frames=[],!(function(W,J){for(var re=0;re<4;re++)if(W[J+re]!="RIFF".charCodeAt(re))return!0;return!1})(A,O)){for(S(A,O+=4),O+=8;O<A.length;){var oe=d(A,O),se=S(A,O+=4);O+=4;var ie=se+(1&se);switch(oe){case"VP8 ":case"VP8L":I.frames[w]===void 0&&(I.frames[w]={}),(Z=I.frames[w]).src_off=B?q:O-8,Z.src_size=D+se+8,w++,B&&(B=!1,D=0,q=0);break;case"VP8X":(Z=I.header={}).feature_flags=A[O];var ve=O+4;Z.canvas_width=1+b(A,ve),ve+=3,Z.canvas_height=1+b(A,ve),ve+=3;break;case"ALPH":B=!0,D=ie+8,q=O-8;break;case"ANIM":(Z=I.header).bgcolor=S(A,O),ve=O+4,Z.loop_count=g(A,ve),ve+=2;break;case"ANMF":var be,Z;(Z=I.frames[w]={}).offset_x=2*b(A,O),O+=3,Z.offset_y=2*b(A,O),O+=3,Z.width=1+b(A,O),O+=3,Z.height=1+b(A,O),O+=3,Z.duration=b(A,O),O+=3,be=A[O++],Z.dispose=1&be,Z.blend=be>>1&1}oe!="ANMF"&&(O+=ie)}return I}})(C,0);M.response=C,M.rgbaoutput=!0,M.dataurl=!1;var $=M.header?M.header:null,F=M.frames?M.frames:null;if($){$.loop_counter=$.loop_count,v=[$.canvas_height],N=[$.canvas_width];for(var ne=0;ne<F.length&&F[ne].blend!=0;ne++);}var ue=F[0],V=L.WebPDecodeRGBA(C,ue.src_off,ue.src_size,N,v);ue.rgba=V,ue.imgwidth=N[0],ue.imgheight=v[0];for(var k=0;k<N[0]*v[0]*4;k++)E[k]=V[k];return this.width=N,this.height=v,this.data=E,this}(function(r){var e,t,n,i,o,l,u,h,d,g=function(W){return W=W||{},this.isStrokeTransparent=W.isStrokeTransparent||!1,this.strokeOpacity=W.strokeOpacity||1,this.strokeStyle=W.strokeStyle||"#000000",this.fillStyle=W.fillStyle||"#000000",this.isFillTransparent=W.isFillTransparent||!1,this.fillOpacity=W.fillOpacity||1,this.font=W.font||"10px sans-serif",this.textBaseline=W.textBaseline||"alphabetic",this.textAlign=W.textAlign||"left",this.lineWidth=W.lineWidth||1,this.lineJoin=W.lineJoin||"miter",this.lineCap=W.lineCap||"butt",this.path=W.path||[],this.transform=W.transform!==void 0?W.transform.clone():new h,this.globalCompositeOperation=W.globalCompositeOperation||"normal",this.globalAlpha=W.globalAlpha||1,this.clip_path=W.clip_path||[],this.currentPoint=W.currentPoint||new l,this.miterLimit=W.miterLimit||10,this.lastPoint=W.lastPoint||new l,this.lineDashOffset=W.lineDashOffset||0,this.lineDash=W.lineDash||[],this.margin=W.margin||[0,0,0,0],this.prevPageLastElemOffset=W.prevPageLastElemOffset||0,this.ignoreClearRect=typeof W.ignoreClearRect!="boolean"||W.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new b(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,l=this.internal.Point,u=this.internal.Rectangle,h=this.internal.Matrix,d=new g}]);var b=function(W){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var J=W;Object.defineProperty(this,"pdf",{get:function(){return J}});var re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return re},set:function(ze){re=!!ze}});var fe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return fe},set:function(ze){fe=!!ze}});var ge=0;Object.defineProperty(this,"posX",{get:function(){return ge},set:function(ze){isNaN(ze)||(ge=ze)}});var _e=0;Object.defineProperty(this,"posY",{get:function(){return _e},set:function(ze){isNaN(ze)||(_e=ze)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ze){var de;typeof ze=="number"?de=[ze,ze,ze,ze]:((de=new Array(4))[0]=ze[0],de[1]=ze.length>=2?ze[1]:de[0],de[2]=ze.length>=3?ze[2]:de[0],de[3]=ze.length>=4?ze[3]:de[1]),d.margin=de}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(ze){he=ze}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(ze){xe=ze}});var Pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Pe},set:function(ze){Pe=ze}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ze){ze instanceof g&&(d=ze)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ze){d.path=ze}});var Ue=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ue},set:function(ze){Ue=ze}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ze){var de;de=S(ze),this.ctx.fillStyle=de.style,this.ctx.isFillTransparent=de.a===0,this.ctx.fillOpacity=de.a,this.pdf.setFillColor(de.r,de.g,de.b,{a:de.a}),this.pdf.setTextColor(de.r,de.g,de.b,{a:de.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ze){var de=S(ze);this.ctx.strokeStyle=de.style,this.ctx.isStrokeTransparent=de.a===0,this.ctx.strokeOpacity=de.a,de.a===0?this.pdf.setDrawColor(255,255,255):(de.a,this.pdf.setDrawColor(de.r,de.g,de.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ze){["butt","round","square"].indexOf(ze)!==-1&&(this.ctx.lineCap=ze,this.pdf.setLineCap(ze))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ze){isNaN(ze)||(this.ctx.lineWidth=ze,this.pdf.setLineWidth(ze))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ze){["bevel","round","miter"].indexOf(ze)!==-1&&(this.ctx.lineJoin=ze,this.pdf.setLineJoin(ze))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ze){isNaN(ze)||(this.ctx.miterLimit=ze,this.pdf.setMiterLimit(ze))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ze){this.ctx.textBaseline=ze}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ze){["right","end","center","left","start"].indexOf(ze)!==-1&&(this.ctx.textAlign=ze)}});var Xe=null,Ze=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ze},set:function(ze){Xe=null,Ze=ze}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ze){var de;if(this.ctx.font=ze,(de=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ze))!==null){var Lt=de[1];de[2];var Et=de[3],wt=de[4];de[5];var He=de[6],ot=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(wt)[2];wt=Math.floor(ot==="px"?parseFloat(wt)*this.pdf.internal.scaleFactor:ot==="em"?parseFloat(wt)*this.pdf.getFontSize():parseFloat(wt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(wt);var rt=(function(jt){var pt,Ir,ir=[],ht=jt.trim();if(ht==="")return Bg;if(ht in Sx)return[Sx[ht]];for(;ht!=="";){switch(Ir=null,pt=(ht=Tx(ht)).charAt(0)){case'"':case"'":Ir=pk(ht.substring(1),pt);break;default:Ir=mk(ht)}if(Ir===null||(ir.push(Ir[0]),(ht=Tx(Ir[1]))!==""&&ht.charAt(0)!==","))return Bg;ht=ht.replace(/^,/,"")}return ir})(He);if(this.fontFaces){var Jt=(function(jt,pt){if(Xe===null){var Ir=(function(ir){var ht=[];return Object.keys(ir).forEach(function(Ht){ir[Ht].forEach(function(sr){var It=null;switch(sr){case"bold":It={family:Ht,weight:"bold"};break;case"italic":It={family:Ht,style:"italic"};break;case"bolditalic":It={family:Ht,weight:"bold",style:"italic"};break;case"":case"normal":It={family:Ht}}It!==null&&(It.ref={name:Ht,style:sr},ht.push(It))})}),ht})(jt.getFontList());Xe=(function(ir){for(var ht={},Ht=0;Ht<ir.length;++Ht){var sr=Ng(ir[Ht]),It=sr.family,tr=sr.stretch,Wt=sr.style,Er=sr.weight;ht[It]=ht[It]||{},ht[It][tr]=ht[It][tr]||{},ht[It][tr][Wt]=ht[It][tr][Wt]||{},ht[It][tr][Wt][Er]=sr}return ht})(Ir.concat(pt))}return Xe})(this.pdf,this.fontFaces),_t=rt.map(function(jt){return{family:jt,stretch:"normal",weight:Et,style:Lt}}),mr=(function(jt,pt,Ir){for(var ir=(Ir=Ir||{}).defaultFontFamily||"times",ht=Object.assign({},fk,Ir.genericFontFamilies||{}),Ht=null,sr=null,It=0;It<pt.length;++It)if(ht[(Ht=Ng(pt[It])).family]&&(Ht.family=ht[Ht.family]),jt.hasOwnProperty(Ht.family)){sr=jt[Ht.family];break}if(!(sr=sr||jt[ir]))throw new Error("Could not find a font-family for the rule '"+_x(Ht)+"' and default family '"+ir+"'.");if(sr=(function(tr,Wt){if(Wt[tr])return Wt[tr];var Er=d1[tr],zr=Er<=d1.normal?-1:1,$t=wx(Wt,sS,Er,zr);if(!$t)throw new Error("Could not find a matching font-stretch value for "+tr);return $t})(Ht.stretch,sr),sr=(function(tr,Wt){if(Wt[tr])return Wt[tr];for(var Er=oS[tr],zr=0;zr<Er.length;++zr)if(Wt[Er[zr]])return Wt[Er[zr]];throw new Error("Could not find a matching font-style for "+tr)})(Ht.style,sr),!(sr=(function(tr,Wt){if(Wt[tr])return Wt[tr];if(tr===400&&Wt[500])return Wt[500];if(tr===500&&Wt[400])return Wt[400];var Er=hk[tr],zr=wx(Wt,aS,Er,tr<400?-1:1);if(!zr)throw new Error("Could not find a matching font-weight for value "+tr);return zr})(Ht.weight,sr)))throw new Error("Failed to resolve a font for the rule '"+_x(Ht)+"'.");return sr})(Jt,_t);this.pdf.setFont(mr.ref.name,mr.ref.style)}else{var Ft="";(Et==="bold"||parseInt(Et,10)>=700||Lt==="bold")&&(Ft="bold"),Lt==="italic"&&(Ft+="italic"),Ft.length===0&&(Ft="normal");for(var qt="",vr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ot=0;Ot<rt.length;Ot++){if(this.pdf.internal.getFont(rt[Ot],Ft,{noFallback:!0,disableWarning:!0})!==void 0){qt=rt[Ot];break}if(Ft==="bolditalic"&&this.pdf.internal.getFont(rt[Ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)qt=rt[Ot],Ft="bold";else if(this.pdf.internal.getFont(rt[Ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){qt=rt[Ot],Ft="normal";break}}if(qt===""){for(var Tt=0;Tt<rt.length;Tt++)if(vr[rt[Tt]]){qt=vr[rt[Tt]];break}}qt=qt===""?"Times":qt,this.pdf.setFont(qt,Ft)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ze){this.ctx.globalCompositeOperation=ze}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ze){this.ctx.globalAlpha=ze}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ze){this.ctx.lineDashOffset=ze,Z.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ze){this.ctx.lineDash=ze,Z.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ze){this.ctx.ignoreClearRect=!!ze}})};b.prototype.setLineDash=function(W){this.lineDash=W},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){F.call(this,"fill",!1)},b.prototype.stroke=function(){F.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(W,J){if(isNaN(W)||isNaN(J))throw rn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var re=this.ctx.transform.applyToPoint(new l(W,J));this.path.push({type:"mt",x:re.x,y:re.y}),this.ctx.lastPoint=new l(W,J)},b.prototype.closePath=function(){var W=new l(0,0),J=0;for(J=this.path.length-1;J!==-1;J--)if(this.path[J].type==="begin"&&Gr(this.path[J+1])==="object"&&typeof this.path[J+1].x=="number"){W=new l(this.path[J+1].x,this.path[J+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(W.x,W.y)},b.prototype.lineTo=function(W,J){if(isNaN(W)||isNaN(J))throw rn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var re=this.ctx.transform.applyToPoint(new l(W,J));this.path.push({type:"lt",x:re.x,y:re.y}),this.ctx.lastPoint=new l(re.x,re.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},b.prototype.quadraticCurveTo=function(W,J,re,fe){if(isNaN(re)||isNaN(fe)||isNaN(W)||isNaN(J))throw rn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ge=this.ctx.transform.applyToPoint(new l(re,fe)),_e=this.ctx.transform.applyToPoint(new l(W,J));this.path.push({type:"qct",x1:_e.x,y1:_e.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new l(ge.x,ge.y)},b.prototype.bezierCurveTo=function(W,J,re,fe,ge,_e){if(isNaN(ge)||isNaN(_e)||isNaN(W)||isNaN(J)||isNaN(re)||isNaN(fe))throw rn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new l(ge,_e)),xe=this.ctx.transform.applyToPoint(new l(W,J)),Pe=this.ctx.transform.applyToPoint(new l(re,fe));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:Pe.x,y2:Pe.y,x:he.x,y:he.y}),this.ctx.lastPoint=new l(he.x,he.y)},b.prototype.arc=function(W,J,re,fe,ge,_e){if(isNaN(W)||isNaN(J)||isNaN(re)||isNaN(fe)||isNaN(ge))throw rn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(_e=!!_e,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new l(W,J));W=he.x,J=he.y;var xe=this.ctx.transform.applyToPoint(new l(0,re)),Pe=this.ctx.transform.applyToPoint(new l(0,0));re=Math.sqrt(Math.pow(xe.x-Pe.x,2)+Math.pow(xe.y-Pe.y,2))}Math.abs(ge-fe)>=2*Math.PI&&(fe=0,ge=2*Math.PI),this.path.push({type:"arc",x:W,y:J,radius:re,startAngle:fe,endAngle:ge,counterclockwise:_e})},b.prototype.arcTo=function(W,J,re,fe,ge){throw new Error("arcTo not implemented.")},b.prototype.rect=function(W,J,re,fe){if(isNaN(W)||isNaN(J)||isNaN(re)||isNaN(fe))throw rn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(W,J),this.lineTo(W+re,J),this.lineTo(W+re,J+fe),this.lineTo(W,J+fe),this.lineTo(W,J),this.lineTo(W+re,J),this.lineTo(W,J)},b.prototype.fillRect=function(W,J,re,fe){if(isNaN(W)||isNaN(J)||isNaN(re)||isNaN(fe))throw rn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var ge={};this.lineCap!=="butt"&&(ge.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ge.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(W,J,re,fe),this.fill(),ge.hasOwnProperty("lineCap")&&(this.lineCap=ge.lineCap),ge.hasOwnProperty("lineJoin")&&(this.lineJoin=ge.lineJoin)}},b.prototype.strokeRect=function(W,J,re,fe){if(isNaN(W)||isNaN(J)||isNaN(re)||isNaN(fe))throw rn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(W,J,re,fe),this.stroke())},b.prototype.clearRect=function(W,J,re,fe){if(isNaN(W)||isNaN(J)||isNaN(re)||isNaN(fe))throw rn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(W,J,re,fe))},b.prototype.save=function(W){W=typeof W!="boolean"||W;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("q");if(this.pdf.setPage(J),W){this.ctx.fontSize=this.pdf.internal.getFontSize();var fe=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=fe}},b.prototype.restore=function(W){W=typeof W!="boolean"||W;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("Q");this.pdf.setPage(J),W&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var S=function(W){var J,re,fe,ge;if(W.isCanvasGradient===!0&&(W=W.getColor()),!W)return{r:0,g:0,b:0,a:0,style:W};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(W))J=0,re=0,fe=0,ge=0;else{var _e=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(W);if(_e!==null)J=parseInt(_e[1]),re=parseInt(_e[2]),fe=parseInt(_e[3]),ge=1;else if((_e=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(W))!==null)J=parseInt(_e[1]),re=parseInt(_e[2]),fe=parseInt(_e[3]),ge=parseFloat(_e[4]);else{if(ge=1,typeof W=="string"&&W.charAt(0)!=="#"){var he=new Xw(W);W=he.ok?he.toHex():"#000000"}W.length===4?(J=W.substring(1,2),J+=J,re=W.substring(2,3),re+=re,fe=W.substring(3,4),fe+=fe):(J=W.substring(1,3),re=W.substring(3,5),fe=W.substring(5,7)),J=parseInt(J,16),re=parseInt(re,16),fe=parseInt(fe,16)}}return{r:J,g:re,b:fe,a:ge,style:W}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(W,J,re,fe){if(isNaN(J)||isNaN(re)||typeof W!="string")throw rn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(fe=isNaN(fe)?void 0:fe,!v.call(this)){var ge=ie(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;w.call(this,{text:W,x:J,y:re,scale:_e,angle:ge,align:this.textAlign,maxWidth:fe})}},b.prototype.strokeText=function(W,J,re,fe){if(isNaN(J)||isNaN(re)||typeof W!="string")throw rn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){fe=isNaN(fe)?void 0:fe;var ge=ie(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;w.call(this,{text:W,x:J,y:re,scale:_e,renderingMode:"stroke",angle:ge,align:this.textAlign,maxWidth:fe})}},b.prototype.measureText=function(W){if(typeof W!="string")throw rn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var J=this.pdf,re=this.pdf.internal.scaleFactor,fe=J.internal.getFontSize(),ge=J.getStringUnitWidth(W)*fe/J.internal.scaleFactor;return new function(_e){var he=(_e=_e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this}({width:ge*=Math.round(96*re/72*1e4)/1e4})},b.prototype.scale=function(W,J){if(isNaN(W)||isNaN(J))throw rn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var re=new h(W,0,0,J,0,0);this.ctx.transform=this.ctx.transform.multiply(re)},b.prototype.rotate=function(W){if(isNaN(W))throw rn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var J=new h(Math.cos(W),Math.sin(W),-Math.sin(W),Math.cos(W),0,0);this.ctx.transform=this.ctx.transform.multiply(J)},b.prototype.translate=function(W,J){if(isNaN(W)||isNaN(J))throw rn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var re=new h(1,0,0,1,W,J);this.ctx.transform=this.ctx.transform.multiply(re)},b.prototype.transform=function(W,J,re,fe,ge,_e){if(isNaN(W)||isNaN(J)||isNaN(re)||isNaN(fe)||isNaN(ge)||isNaN(_e))throw rn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new h(W,J,re,fe,ge,_e);this.ctx.transform=this.ctx.transform.multiply(he)},b.prototype.setTransform=function(W,J,re,fe,ge,_e){W=isNaN(W)?1:W,J=isNaN(J)?0:J,re=isNaN(re)?0:re,fe=isNaN(fe)?1:fe,ge=isNaN(ge)?0:ge,_e=isNaN(_e)?0:_e,this.ctx.transform=new h(W,J,re,fe,ge,_e)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(W,J,re,fe,ge,_e,he,xe,Pe){var Ue=this.pdf.getImageProperties(W),Xe=1,Ze=1,ze=1,de=1;fe!==void 0&&xe!==void 0&&(ze=xe/fe,de=Pe/ge,Xe=Ue.width/fe*xe/fe,Ze=Ue.height/ge*Pe/ge),_e===void 0&&(_e=J,he=re,J=0,re=0),fe!==void 0&&xe===void 0&&(xe=fe,Pe=ge),fe===void 0&&xe===void 0&&(xe=Ue.width,Pe=Ue.height);for(var Lt,Et=this.ctx.transform.decompose(),wt=ie(Et.rotate.shx),He=new h,ot=(He=(He=(He=He.multiply(Et.translate)).multiply(Et.skew)).multiply(Et.scale)).applyToRectangle(new u(_e-J*ze,he-re*de,fe*Xe,ge*Ze)),rt=L.call(this,ot),Jt=[],_t=0;_t<rt.length;_t+=1)Jt.indexOf(rt[_t])===-1&&Jt.push(rt[_t]);if($(Jt),this.autoPaging)for(var mr=Jt[0],Ft=Jt[Jt.length-1],qt=mr;qt<Ft+1;qt++){this.pdf.setPage(qt);var vr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ot=qt===1?this.posY+this.margin[0]:this.margin[0],Tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],jt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=qt===1?0:Tt+(qt-2)*jt;if(this.ctx.clip_path.length!==0){var Ir=this.path;Lt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(Lt,this.posX+this.margin[3],-pt+Ot+this.ctx.prevPageLastElemOffset),ne.call(this,"fill",!0),this.path=Ir}var ir=JSON.parse(JSON.stringify(ot));ir=M([ir],this.posX+this.margin[3],-pt+Ot+this.ctx.prevPageLastElemOffset)[0];var ht=(qt>mr||qt<Ft)&&E.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vr,jt,null).clip().discardPath()),this.pdf.addImage(W,"JPEG",ir.x,ir.y,ir.w,ir.h,null,null,wt),ht&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(W,"JPEG",ot.x,ot.y,ot.w,ot.h,null,null,wt)};var L=function(W,J,re){var fe=[];J=J||this.pdf.internal.pageSize.width,re=re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ge=this.posY+this.ctx.prevPageLastElemOffset;switch(W.type){default:case"mt":case"lt":fe.push(Math.floor((W.y+ge)/re)+1);break;case"arc":fe.push(Math.floor((W.y+ge-W.radius)/re)+1),fe.push(Math.floor((W.y+ge+W.radius)/re)+1);break;case"qct":var _e=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,W.x1,W.y1,W.x,W.y);fe.push(Math.floor((_e.y+ge)/re)+1),fe.push(Math.floor((_e.y+_e.h+ge)/re)+1);break;case"bct":var he=be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,W.x1,W.y1,W.x2,W.y2,W.x,W.y);fe.push(Math.floor((he.y+ge)/re)+1),fe.push(Math.floor((he.y+he.h+ge)/re)+1);break;case"rect":fe.push(Math.floor((W.y+ge)/re)+1),fe.push(Math.floor((W.y+W.h+ge)/re)+1)}for(var xe=0;xe<fe.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<fe[xe];)C.call(this);return fe},C=function(){var W=this.fillStyle,J=this.strokeStyle,re=this.font,fe=this.lineCap,ge=this.lineWidth,_e=this.lineJoin;this.pdf.addPage(),this.fillStyle=W,this.strokeStyle=J,this.font=re,this.lineCap=fe,this.lineWidth=ge,this.lineJoin=_e},M=function(W,J,re){for(var fe=0;fe<W.length;fe++)switch(W[fe].type){case"bct":W[fe].x2+=J,W[fe].y2+=re;case"qct":W[fe].x1+=J,W[fe].y1+=re;default:W[fe].x+=J,W[fe].y+=re}return W},$=function(W){return W.sort(function(J,re){return J-re})},F=function(W,J){for(var re,fe,ge=this.fillStyle,_e=this.strokeStyle,he=this.lineCap,xe=this.lineWidth,Pe=Math.abs(xe*this.ctx.transform.scaleX),Ue=this.lineJoin,Xe=JSON.parse(JSON.stringify(this.path)),Ze=JSON.parse(JSON.stringify(this.path)),ze=[],de=0;de<Ze.length;de++)if(Ze[de].x!==void 0)for(var Lt=L.call(this,Ze[de]),Et=0;Et<Lt.length;Et+=1)ze.indexOf(Lt[Et])===-1&&ze.push(Lt[Et]);for(var wt=0;wt<ze.length;wt++)for(;this.pdf.internal.getNumberOfPages()<ze[wt];)C.call(this);if($(ze),this.autoPaging)for(var He=ze[0],ot=ze[ze.length-1],rt=He;rt<ot+1;rt++){this.pdf.setPage(rt),this.fillStyle=ge,this.strokeStyle=_e,this.lineCap=he,this.lineWidth=Pe,this.lineJoin=Ue;var Jt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_t=rt===1?this.posY+this.margin[0]:this.margin[0],mr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],qt=rt===1?0:mr+(rt-2)*Ft;if(this.ctx.clip_path.length!==0){var vr=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(re,this.posX+this.margin[3],-qt+_t+this.ctx.prevPageLastElemOffset),ne.call(this,W,!0),this.path=vr}if(fe=JSON.parse(JSON.stringify(Xe)),this.path=M(fe,this.posX+this.margin[3],-qt+_t+this.ctx.prevPageLastElemOffset),J===!1||rt===0){var Ot=(rt>He||rt<ot)&&E.call(this);Ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Jt,Ft,null).clip().discardPath()),ne.call(this,W,J),Ot&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}else this.lineWidth=Pe,ne.call(this,W,J),this.lineWidth=xe;this.path=Xe},ne=function(W,J){if((W!=="stroke"||J||!N.call(this))&&(W==="stroke"||J||!v.call(this))){for(var re,fe,ge=[],_e=this.path,he=0;he<_e.length;he++){var xe=_e[he];switch(xe.type){case"begin":ge.push({begin:!0});break;case"close":ge.push({close:!0});break;case"mt":ge.push({start:xe,deltas:[],abs:[]});break;case"lt":var Pe=ge.length;if(_e[he-1]&&!isNaN(_e[he-1].x)&&(re=[xe.x-_e[he-1].x,xe.y-_e[he-1].y],Pe>0)){for(;Pe>=0;Pe--)if(ge[Pe-1].close!==!0&&ge[Pe-1].begin!==!0){ge[Pe-1].deltas.push(re),ge[Pe-1].abs.push(xe);break}}break;case"bct":re=[xe.x1-_e[he-1].x,xe.y1-_e[he-1].y,xe.x2-_e[he-1].x,xe.y2-_e[he-1].y,xe.x-_e[he-1].x,xe.y-_e[he-1].y],ge[ge.length-1].deltas.push(re);break;case"qct":var Ue=_e[he-1].x+2/3*(xe.x1-_e[he-1].x),Xe=_e[he-1].y+2/3*(xe.y1-_e[he-1].y),Ze=xe.x+2/3*(xe.x1-xe.x),ze=xe.y+2/3*(xe.y1-xe.y),de=xe.x,Lt=xe.y;re=[Ue-_e[he-1].x,Xe-_e[he-1].y,Ze-_e[he-1].x,ze-_e[he-1].y,de-_e[he-1].x,Lt-_e[he-1].y],ge[ge.length-1].deltas.push(re);break;case"arc":ge.push({deltas:[],abs:[],arc:!0}),Array.isArray(ge[ge.length-1].abs)&&ge[ge.length-1].abs.push(xe)}}fe=J?null:W==="stroke"?"stroke":"fill";for(var Et=!1,wt=0;wt<ge.length;wt++)if(ge[wt].arc)for(var He=ge[wt].abs,ot=0;ot<He.length;ot++){var rt=He[ot];rt.type==="arc"?k.call(this,rt.x,rt.y,rt.radius,rt.startAngle,rt.endAngle,rt.counterclockwise,void 0,J,!Et):B.call(this,rt.x,rt.y),Et=!0}else if(ge[wt].close===!0)this.pdf.internal.out("h"),Et=!1;else if(ge[wt].begin!==!0){var Jt=ge[wt].start.x,_t=ge[wt].start.y;D.call(this,ge[wt].deltas,Jt,_t),Et=!0}fe&&A.call(this,fe),J&&O.call(this)}},ue=function(W){var J=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,re=J*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return W-re;case"top":return W+J-re;case"hanging":return W+J-2*re;case"middle":return W+J/2-re;default:return W}},V=function(W){return W+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var W=function(){};return W.colorStops=[],W.addColorStop=function(J,re){this.colorStops.push([J,re])},W.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},W.isCanvasGradient=!0,W},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(W,J,re,fe,ge,_e,he,xe,Pe){for(var Ue=oe.call(this,re,fe,ge,_e),Xe=0;Xe<Ue.length;Xe++){var Ze=Ue[Xe];Xe===0&&(Pe?I.call(this,Ze.x1+W,Ze.y1+J):B.call(this,Ze.x1+W,Ze.y1+J)),q.call(this,W,J,Ze.x2,Ze.y2,Ze.x3,Ze.y3,Ze.x4,Ze.y4)}xe?O.call(this):A.call(this,he)},A=function(W){switch(W){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(W,J){this.pdf.internal.out(t(W)+" "+n(J)+" m")},w=function(W){var J;switch(W.align){case"right":case"end":J="right";break;case"center":J="center";break;default:J="left"}var re=this.pdf.getTextDimensions(W.text),fe=ue.call(this,W.y),ge=V.call(this,fe)-re.h,_e=this.ctx.transform.applyToPoint(new l(W.x,fe)),he=this.ctx.transform.decompose(),xe=new h;xe=(xe=(xe=xe.multiply(he.translate)).multiply(he.skew)).multiply(he.scale);for(var Pe,Ue,Xe,Ze=this.ctx.transform.applyToRectangle(new u(W.x,fe,re.w,re.h)),ze=xe.applyToRectangle(new u(W.x,ge,re.w,re.h)),de=L.call(this,ze),Lt=[],Et=0;Et<de.length;Et+=1)Lt.indexOf(de[Et])===-1&&Lt.push(de[Et]);if($(Lt),this.autoPaging)for(var wt=Lt[0],He=Lt[Lt.length-1],ot=wt;ot<He+1;ot++){this.pdf.setPage(ot);var rt=ot===1?this.posY+this.margin[0]:this.margin[0],Jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_t=this.pdf.internal.pageSize.height-this.margin[2],mr=_t-this.margin[0],Ft=this.pdf.internal.pageSize.width-this.margin[1],qt=Ft-this.margin[3],vr=ot===1?0:Jt+(ot-2)*mr;if(this.ctx.clip_path.length!==0){var Ot=this.path;Pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(Pe,this.posX+this.margin[3],-1*vr+rt),ne.call(this,"fill",!0),this.path=Ot}var Tt=M([JSON.parse(JSON.stringify(ze))],this.posX+this.margin[3],-vr+rt+this.ctx.prevPageLastElemOffset)[0];W.scale>=.01&&(Ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ue*W.scale),Xe=this.lineWidth,this.lineWidth=Xe*W.scale);var jt=this.autoPaging!=="text";if(jt||Tt.y+Tt.h<=_t){if(jt||Tt.y>=rt&&Tt.x<=Ft){var pt=jt?W.text:this.pdf.splitTextToSize(W.text,W.maxWidth||Ft-Tt.x)[0],Ir=M([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-vr+rt+this.ctx.prevPageLastElemOffset)[0],ir=jt&&(ot>wt||ot<He)&&E.call(this);ir&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qt,mr,null).clip().discardPath()),this.pdf.text(pt,Ir.x,Ir.y,{angle:W.angle,align:J,renderingMode:W.renderingMode}),ir&&this.pdf.restoreGraphicsState()}}else Tt.y<_t&&(this.ctx.prevPageLastElemOffset+=_t-Tt.y);W.scale>=.01&&(this.pdf.setFontSize(Ue),this.lineWidth=Xe)}else W.scale>=.01&&(Ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ue*W.scale),Xe=this.lineWidth,this.lineWidth=Xe*W.scale),this.pdf.text(W.text,_e.x+this.posX,_e.y+this.posY,{angle:W.angle,align:J,renderingMode:W.renderingMode,maxWidth:W.maxWidth}),W.scale>=.01&&(this.pdf.setFontSize(Ue),this.lineWidth=Xe)},B=function(W,J,re,fe){re=re||0,fe=fe||0,this.pdf.internal.out(t(W+re)+" "+n(J+fe)+" l")},D=function(W,J,re){return this.pdf.lines(W,J,re,null,null)},q=function(W,J,re,fe,ge,_e,he,xe){this.pdf.internal.out([e(i(re+W)),e(o(fe+J)),e(i(ge+W)),e(o(_e+J)),e(i(he+W)),e(o(xe+J)),"c"].join(" "))},oe=function(W,J,re,fe){for(var ge=2*Math.PI,_e=Math.PI/2;J>re;)J-=ge;var he=Math.abs(re-J);he<ge&&fe&&(he=ge-he);for(var xe=[],Pe=fe?-1:1,Ue=J;he>1e-5;){var Xe=Ue+Pe*Math.min(he,_e);xe.push(se.call(this,W,Ue,Xe)),he-=Math.abs(Xe-Ue),Ue=Xe}return xe},se=function(W,J,re){var fe=(re-J)/2,ge=W*Math.cos(fe),_e=W*Math.sin(fe),he=ge,xe=-_e,Pe=he*he+xe*xe,Ue=Pe+he*ge+xe*_e,Xe=4/3*(Math.sqrt(2*Pe*Ue)-Ue)/(he*_e-xe*ge),Ze=he-Xe*xe,ze=xe+Xe*he,de=Ze,Lt=-ze,Et=fe+J,wt=Math.cos(Et),He=Math.sin(Et);return{x1:W*Math.cos(J),y1:W*Math.sin(J),x2:Ze*wt-ze*He,y2:Ze*He+ze*wt,x3:de*wt-Lt*He,y3:de*He+Lt*wt,x4:W*Math.cos(re),y4:W*Math.sin(re)}},ie=function(W){return 180*W/Math.PI},ve=function(W,J,re,fe,ge,_e){var he=W+.5*(re-W),xe=J+.5*(fe-J),Pe=ge+.5*(re-ge),Ue=_e+.5*(fe-_e),Xe=Math.min(W,ge,he,Pe),Ze=Math.max(W,ge,he,Pe),ze=Math.min(J,_e,xe,Ue),de=Math.max(J,_e,xe,Ue);return new u(Xe,ze,Ze-Xe,de-ze)},be=function(W,J,re,fe,ge,_e,he,xe){var Pe,Ue,Xe,Ze,ze,de,Lt,Et,wt,He,ot,rt,Jt,_t,mr=re-W,Ft=fe-J,qt=ge-re,vr=_e-fe,Ot=he-ge,Tt=xe-_e;for(Ue=0;Ue<41;Ue++)wt=(Lt=(Xe=W+(Pe=Ue/40)*mr)+Pe*((ze=re+Pe*qt)-Xe))+Pe*(ze+Pe*(ge+Pe*Ot-ze)-Lt),He=(Et=(Ze=J+Pe*Ft)+Pe*((de=fe+Pe*vr)-Ze))+Pe*(de+Pe*(_e+Pe*Tt-de)-Et),Ue==0?(ot=wt,rt=He,Jt=wt,_t=He):(ot=Math.min(ot,wt),rt=Math.min(rt,He),Jt=Math.max(Jt,wt),_t=Math.max(_t,He));return new u(Math.round(ot),Math.round(rt),Math.round(Jt-ot),Math.round(_t-rt))},Z=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var W,J,re=(W=this.ctx.lineDash,J=this.ctx.lineDashOffset,JSON.stringify({lineDash:W,lineDashOffset:J}));this.prevLineDash!==re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=re)}}})(Ct.API),(function(r){var e=function(l){var u,h,d,g,b,S,v,N,E,L;for(h=[],d=0,g=(l+=u="\0\0\0\0".slice(l.length%4||4)).length;g>d;d+=4)(b=(l.charCodeAt(d)<<24)+(l.charCodeAt(d+1)<<16)+(l.charCodeAt(d+2)<<8)+l.charCodeAt(d+3))!==0?(S=(b=((b=((b=((b=(b-(L=b%85))/85)-(E=b%85))/85)-(N=b%85))/85)-(v=b%85))/85)%85,h.push(S+33,v+33,N+33,E+33,L+33)):h.push(122);return(function(C,M){for(var $=M;$>0;$--)C.pop()})(h,u.length),String.fromCharCode.apply(String,h)+"~>"},t=function(l){var u,h,d,g,b,S=String,v="length",N=255,E="charCodeAt",L="slice",C="replace";for(l[L](-2),l=l[L](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),d=[],g=0,b=(l+=u="uuuuu"[L](l[v]%5||5))[v];b>g;g+=5)h=52200625*(l[E](g)-33)+614125*(l[E](g+1)-33)+7225*(l[E](g+2)-33)+85*(l[E](g+3)-33)+(l[E](g+4)-33),d.push(N&h>>24,N&h>>16,N&h>>8,N&h);return(function(M,$){for(var F=$;F>0;F--)M.pop()})(d,u[v]),S.fromCharCode.apply(S,d)},n=function(l){return l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(l){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),u.test(l)===!1)return"";for(var h="",d=0;d<l.length;d+=2)h+=String.fromCharCode("0x"+(l[d]+l[d+1]));return h},o=function(l){for(var u=new Uint8Array(l.length),h=l.length;h--;)u[h]=l.charCodeAt(h);return(u=i1(u)).reduce(function(d,g){return d+String.fromCharCode(g)},"")};r.processDataByFilters=function(l,u){var h=0,d=l||"",g=[];for(typeof(u=u||[])=="string"&&(u=[u]),h=0;h<u.length;h+=1)switch(u[h]){case"ASCII85Decode":case"/ASCII85Decode":d=t(d),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=i(d),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=n(d),g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=o(d),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[h]+'" is not implemented')}return{data:d,reverseChain:g.reverse().join(" ")}}})(Ct.API),(function(r){r.loadFile=function(e,t,n){return(function(i,o,l){o=o!==!1,l=typeof l=="function"?l:function(){};var u=void 0;try{u=(function(h,d,g){var b=new XMLHttpRequest,S=0,v=function(N){var E=N.length,L=[],C=String.fromCharCode;for(S=0;S<E;S+=1)L.push(C(255&N.charCodeAt(S)));return L.join("")};if(b.open("GET",h,!d),b.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(b.onload=function(){b.status===200?g(v(this.responseText)):g(void 0)}),b.send(null),d&&b.status===200)return v(b.responseText)})(i,o,l)}catch{}return u})(e,t,n)},r.loadImageFile=r.loadFile})(Ct.API),(function(r){function e(){return(Qt.html2canvas?Promise.resolve(Qt.html2canvas):fu(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function t(){return(Qt.DOMPurify?Promise.resolve(Qt.DOMPurify):fu(()=>import("./purify.es-aGzT-_H7.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var n=function(u){var h=Gr(u);return h==="undefined"?"undefined":h==="string"||u instanceof String?"string":h==="number"||u instanceof Number?"number":h==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":h==="object"?"object":"unknown"},i=function(u,h){var d=document.createElement(u);for(var g in h.className&&(d.className=h.className),h.innerHTML&&h.dompurify&&(d.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)d.style[g]=h.style[g];return d},o=function u(h,d){for(var g=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),b=h.firstChild;b;b=b.nextSibling)d!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||g.appendChild(u(b,d));return h.nodeType===1&&(h.nodeName==="CANVAS"?(g.width=h.width,g.height=h.height,g.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(g.value=h.value),g.addEventListener("load",function(){g.scrollTop=h.scrollTop,g.scrollLeft=h.scrollLeft},!0)),g},l=function u(h){var d=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),g=u.convert(Promise.resolve(),d);return(g=g.setProgress(1,u,1,[u])).set(h)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(u,h){return u.__proto__=h||l.prototype,u},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(u,h){return this.then(function(){switch(h=h||(function(d){switch(n(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(u),h){case"string":return this.then(t).then(function(d){return this.set({src:i("div",{innerHTML:u,dompurify:d})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},l.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(h){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,h(this.prop.container,d)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(h){var d=this.opt.jsPDF,g=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,S=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete S.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=g,g)for(var v=0;v<g.length;++v){var N=g[v],E=N.src.find(function(L){return L.format==="truetype"});E&&d.addFont(E.url,N.ref.name,N.ref.style)}return S.windowHeight=S.windowHeight||0,S.windowHeight=S.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):S.windowHeight,d.context2d.save(!0),h(this.prop.container,S)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(u,h,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(u,h):this.outputPdf(u,h)},l.prototype.outputPdf=function(u,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,h)})},l.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},l.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(u){if(n(u)!=="object")return this;var h=Object.keys(u||{}).map(function(d){if(d in l.template.prop)return function(){this.prop[d]=u[d]};switch(d){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[d]=u[d]}}},this);return this.then(function(){return this.thenList(h)})},l.prototype.get=function(u,h){return this.then(function(){var d=u in l.template.prop?this.prop[u]:this.opt[u];return h?h(d):d})},l.prototype.setMargin=function(u){return this.then(function(){switch(n(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},l.prototype.setPageSize=function(u){function h(d,g){return Math.floor(d*g/72*96)}return this.then(function(){(u=u||Ct.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:h(u.inner.width,u.k),height:h(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},l.prototype.setProgress=function(u,h,d,g){return u!=null&&(this.progress.val=u),h!=null&&(this.progress.state=h),d!=null&&(this.progress.n=d),g!=null&&(this.progress.stack=g),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(u,h,d,g){return this.setProgress(u?this.progress.val+u:null,h||null,d?this.progress.n+d:null,g?this.progress.stack.concat(g):null)},l.prototype.then=function(u,h){var d=this;return this.thenCore(u,h,function(g,b){return d.updateProgress(null,null,1,[g]),Promise.prototype.then.call(this,function(S){return d.updateProgress(null,g),S}).then(g,b).then(function(S){return d.updateProgress(1),S})})},l.prototype.thenCore=function(u,h,d){d=d||Promise.prototype.then;var g=this;u&&(u=u.bind(g)),h&&(h=h.bind(g));var b=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?g:l.convert(Object.assign({},g),Promise.prototype),S=d.call(b,u,h);return l.convert(S,g.__proto__)},l.prototype.thenExternal=function(u,h){return Promise.prototype.then.call(this,u,h)},l.prototype.thenList=function(u){var h=this;return u.forEach(function(d){h=h.thenCore(d)}),h},l.prototype.catch=function(u){u&&(u=u.bind(this));var h=Promise.prototype.catch.call(this,u);return l.convert(h,this)},l.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},l.prototype.error=function(u){return this.then(function(){throw new Error(u)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Ct.getPageSize=function(u,h,d){if(Gr(u)==="object"){var g=u;u=g.orientation,h=g.unit||h,d=g.format||d}h=h||"mm",d=d||"a4",u=(""+(u||"P")).toLowerCase();var b,S=(""+d).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+h}var N,E=0,L=0;if(v.hasOwnProperty(S))E=v[S][1]/b,L=v[S][0]/b;else try{E=d[1],L=d[0]}catch{throw new Error("Invalid format: "+d)}if(u==="p"||u==="portrait")u="p",L>E&&(N=L,L=E,E=N);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",E>L&&(N=L,L=E,E=N)}return{width:L,height:E,unit:h,k:b,orientation:u}},r.html=function(u,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(Ng):null;var d=new l(h);return h.worker?d:d.from(u).doCallback()}})(Ct.API),Ct.API.addJS=function(r){return Cx=r,this.internal.events.subscribe("postPutResources",function(){Fp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Fp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ax=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Cx+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Fp!==void 0&&Ax!==void 0&&this.internal.out("/Names <</JavaScript "+Fp+" 0 R>>")}),this},(function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),o=0;o<i.length;o++){var l=i[o],u=n.exec(l);if(u!=null){var h=u[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(l)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,g=[];for(o=0;o<d;o++){var b=t.internal.newObject();g.push(b);var S=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+S.objId+" 0 R /XYZ null null null]>> endobj")}var v=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<g.length;o++)t.internal.write("(page_"+(o+1)+")"+g[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+v+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,i,o){var l={title:i,options:o,children:[]};return n==null&&(n=this.root),n.children.push(l),l},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var l=n.children[o];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var u=this.count=this.count_r({count:0},l);if(u>0&&this.line("/Count "+u),l.options&&l.options.pageNumber){var h=t.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,i){for(var o=0;o<i.children.length;o++)n.count++,this.count_r(n,i.children[o]);return n.count}}])})(Ct.API),(function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,i,o,l,u){var h,d=this.decode.DCT_DECODE,g=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=l||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,h=(function(b){for(var S,v=256*b.charCodeAt(4)+b.charCodeAt(5),N=b.length,E={width:0,height:0,numcomponents:1},L=4;L<N;L+=2){if(L+=v,e.indexOf(b.charCodeAt(L+1))!==-1){S=256*b.charCodeAt(L+5)+b.charCodeAt(L+6),E={width:256*b.charCodeAt(L+7)+b.charCodeAt(L+8),height:S,numcomponents:b.charCodeAt(L+9)};break}v=256*b.charCodeAt(L+2)+b.charCodeAt(L+3)}return E})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),h.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}g={data:t,width:h.width,height:h.height,colorSpace:u,bitsPerComponent:8,filter:d,index:n,alias:i}}return g}})(Ct.API),Ct.API.processPNG=function(r,e,t,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var i,o=XC(r,{checkCrc:!0}),l=o.width,u=o.height,h=o.channels,d=o.palette,g=o.depth;i=d&&h===1?(function(k){for(var A=k.width,O=k.height,I=k.data,w=k.palette,B=k.depth,D=!1,q=[],oe=[],se=void 0,ie=!1,ve=0,be=0;be<w.length;be++){var Z=jy(w[be],4),W=Z[0],J=Z[1],re=Z[2],fe=Z[3];q.push(W,J,re),fe!=null&&(fe===0?(ve++,oe.length<1&&oe.push(be)):fe<255&&(ie=!0))}if(ie||ve>1){D=!0,oe=void 0;var ge=A*O;se=new Uint8Array(ge);for(var _e=new DataView(I.buffer),he=0;he<ge;he++){var xe=Lg(_e,he,B),Pe=jy(w[xe],4)[3];se[he]=Pe}}else ve===0&&(oe=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:D?8:void 0,colorBytes:I,alphaBytes:se,needSMask:D,palette:q,mask:oe}})(o):h===2||h===4?(function(k){for(var A=k.data,O=k.width,I=k.height,w=k.channels,B=k.depth,D=w===2?"DeviceGray":"DeviceRGB",q=w-1,oe=O*I,se=q,ie=oe*se,ve=1*oe,be=Math.ceil(ie*B/8),Z=Math.ceil(ve*B/8),W=new Uint8Array(be),J=new Uint8Array(Z),re=new DataView(A.buffer),fe=new DataView(W.buffer),ge=new DataView(J.buffer),_e=!1,he=0;he<oe;he++){for(var xe=he*w,Pe=0;Pe<se;Pe++)Lx(fe,Lg(re,xe+Pe,B),he*se+Pe,B);var Ue=Lg(re,xe+se,B);Ue<(1<<B)-1&&(_e=!0),Lx(ge,Ue,1*he,B)}return{colorSpace:D,colorsPerPixel:q,sMaskBitsPerComponent:_e?B:void 0,colorBytes:W,alphaBytes:J,needSMask:_e}})(o):(function(k){var A=k.data,O=k.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:O,colorsPerPixel:O==="DeviceGray"?1:3,colorBytes:A instanceof Uint16Array?(function(I){for(var w=I.length,B=new Uint8Array(2*w),D=new DataView(B.buffer,B.byteOffset,B.byteLength),q=0;q<w;q++)D.setUint16(2*q,I[q],!1);return B})(A):A,needSMask:!1}})(o);var b,S,v,N=i,E=N.colorSpace,L=N.colorsPerPixel,C=N.sMaskBitsPerComponent,M=N.colorBytes,$=N.alphaBytes,F=N.needSMask,ne=N.palette,ue=N.mask,V=null;return n!==Ct.API.image_compression.NONE&&typeof i1=="function"?(V=(function(k){var A;switch(k){case Ct.API.image_compression.FAST:A=11;break;case Ct.API.image_compression.MEDIUM:A=13;break;case Ct.API.image_compression.SLOW:A=14;break;default:A=12}return A})(n),b=this.decode.FLATE_DECODE,S="/Predictor ".concat(V," /Colors ").concat(L," /BitsPerComponent ").concat(g," /Columns ").concat(l),r=jx(M,Math.ceil(l*L*g/8),L,g,n),F&&(v=jx($,Math.ceil(l*C/8),1,C,n))):(b=void 0,S=void 0,r=M,F&&(v=$)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(v&&this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),{alias:t,data:r,index:e,filter:b,decodeParameters:S,transparency:ue,palette:ne,sMask:v,predictor:V,width:l,height:u,bitsPerComponent:g,sMaskBitsPerComponent:C,colorSpace:E}}},(function(r){r.processGIF89A=function(e,t,n,i){var o=new vk(e),l=o.width,u=o.height,h=[];o.decodeAndBlitFrameRGBA(0,h);var d={data:h,width:l,height:u},g=new Fg(100).encode(d,100);return r.processJPEG.call(this,g,t,n,i)},r.processGIF87A=r.processGIF89A})(Ct.API),da.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},da.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){rn.log("bit decode error:"+t)}},da.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+8*i*4,u=0;u<8&&8*i+u<this.width;u++){var h=this.palette[o>>7-u&1];this.data[l+4*u]=h.blue,this.data[l+4*u+1]=h.green,this.data[l+4*u+2]=h.red,this.data[l+4*u+3]=255}t!==0&&(this.pos+=4-t)}},da.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<r;i++){var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+2*i*4,u=o>>4,h=15&o,d=this.palette[u];if(this.data[l]=d.blue,this.data[l+1]=d.green,this.data[l+2]=d.red,this.data[l+3]=255,2*i+1>=this.width)break;d=this.palette[h],this.data[l+4]=d.blue,this.data[l+4+1]=d.green,this.data[l+4+2]=d.red,this.data[l+4+3]=255}e!==0&&(this.pos+=4-e)}},da.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;if(i<this.palette.length){var l=this.palette[i];this.data[o]=l.red,this.data[o+1]=l.green,this.data[o+2]=l.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}r!==0&&(this.pos+=4-r)}},da.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,u=(o>>5&e)/e*255|0,h=(o>>10&e)/e*255|0,d=o>>15?255:0,g=n*this.width*4+4*i;this.data[g]=h,this.data[g+1]=u,this.data[g+2]=l,this.data[g+3]=d}this.pos+=r}},da.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(l&e)/e*255|0,h=(l>>5&t)/t*255|0,d=(l>>11)/e*255|0,g=i*this.width*4+4*o;this.data[g]=d,this.data[g+1]=h,this.data[g+2]=u,this.data[g+3]=255}this.pos+=r}},da.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*t;this.data[l]=o,this.data[l+1]=i,this.data[l+2]=n,this.data[l+3]=255}this.pos+=this.width%4}},da.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=o,this.data[u+1]=i,this.data[u+2]=n,this.data[u+3]=l}},da.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(e,t,n,i){var o=new da(e,!1),l=o.width,u=o.height,h={data:o.getData(),width:l,height:u},d=new Fg(100).encode(h,100);return r.processJPEG.call(this,d,t,n,i)}})(Ct.API),zx.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(e,t,n,i){var o=new zx(e),l=o.width,u=o.height,h={data:o.getData(),width:l,height:u},d=new Fg(100).encode(h,100);return r.processJPEG.call(this,d,t,n,i)}})(Ct.API),Ct.API.processRGBA=function(r,e,t){for(var n=r.data,i=n.length,o=new Uint8Array(i/4*3),l=new Uint8Array(i/4),u=0,h=0,d=0;d<i;d+=4){var g=n[d],b=n[d+1],S=n[d+2],v=n[d+3];o[u++]=g,o[u++]=b,o[u++]=S,l[h++]=v}var N=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:N,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Ct.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},fd=Ct.API,zp=fd.getCharWidthsArray=function(r,e){var t,n,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),l=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:i.metadata.Unicode.widths,h=u.fof?u.fof:1,d=e.kerning?e.kerning:i.metadata.Unicode.kerning,g=d.fof?d.fof:1,b=e.doKerning!==!1,S=0,v=r.length,N=0,E=u[0]||h,L=[];for(t=0;t<v;t++)n=r.charCodeAt(t),typeof i.metadata.widthOfString=="function"?L.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+l*(1e3/o)||0)/1e3):(S=b&&Gr(d[n])==="object"&&!isNaN(parseInt(d[n][N],10))?d[n][N]/g:0,L.push((u[n]||E)/h+S)),N=n;return L},kx=fd.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return fd.processArabic&&(r=fd.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,i)/t:zp.apply(this,arguments).reduce(function(o,l){return o+l},0)},Ix=function(r,e,t,n){for(var i=[],o=0,l=r.length,u=0;o!==l&&u+e[o]<t;)u+=e[o],o++;i.push(r.slice(0,o));var h=o;for(u=0;o!==l;)u+e[o]>n&&(i.push(r.slice(h,o)),u=0,h=o),u+=e[o],o++;return h!==o&&i.push(r.slice(h,o)),i},Ex=function(r,e,t){t||(t={});var n,i,o,l,u,h,d,g=[],b=[g],S=t.textIndent||0,v=0,N=0,E=r.split(" "),L=zp.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?E[0].length+2:t.lineIndent||0){var C=Array(h).join(" "),M=[];E.map(function(F){(F=F.split(/\s*\n/)).length>1?M=M.concat(F.map(function(ne,ue){return(ue&&ne.length?`
`:"")+ne})):M.push(F[0])}),E=M,h=kx.apply(this,[C,t])}for(o=0,l=E.length;o<l;o++){var $=0;if(n=E[o],h&&n[0]==`
`&&(n=n.substr(1),$=1),S+v+(N=(i=zp.apply(this,[n,t])).reduce(function(F,ne){return F+ne},0))>e||$){if(N>e){for(u=Ix.apply(this,[n,i,e-(S+v),e]),g.push(u.shift()),g=[u.pop()];u.length;)b.push([u.shift()]);N=i.slice(n.length-(g[0]?g[0].length:0)).reduce(function(F,ne){return F+ne},0)}else g=[n];b.push(g),S=N+h,v=L}else g.push(n),S+=v+N,v=L}return d=h?function(F,ne){return(ne?C:"")+F.join(" ")}:function(F){return F.join(" ")},b.map(d)},fd.splitTextToSize=function(r,e,t){var n,i=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var b=this.internal.getFont(g.fontName,g.fontStyle),S="Unicode";return b.metadata[S]?{widths:b.metadata[S].widths||{0:1},kerning:b.metadata[S].kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var l=1*this.internal.scaleFactor*e/i;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=t.lineIndent;var u,h,d=[];for(u=0,h=n.length;u<h;u++)d=d.concat(Ex.apply(this,[n[u],l,o]));return d},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",n={},i={},o=0;o<16;o++)n[t[o]]=e[o],i[e[o]]=t[o];var l=function(S){return"0x"+parseInt(S,10).toString(16)},u=r.__fontmetrics__.compress=function(S){var v,N,E,L,C=["{"];for(var M in S){if(v=S[M],isNaN(parseInt(M,10))?N="'"+M+"'":(M=parseInt(M,10),N=(N=l(M).slice(2)).slice(0,-1)+i[N.slice(-1)]),typeof v=="number")v<0?(E=l(v).slice(3),L="-"):(E=l(v).slice(2),L=""),E=L+E.slice(0,-1)+i[E.slice(-1)];else{if(Gr(v)!=="object")throw new Error("Don't know what to do with value type "+Gr(v)+".");E=u(v)}C.push(N+E)}return C.push("}"),C.join("")},h=r.__fontmetrics__.uncompress=function(S){if(typeof S!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,N,E,L,C={},M=1,$=C,F=[],ne="",ue="",V=S.length-1,k=1;k<V;k+=1)(L=S[k])=="'"?v?(E=v.join(""),v=void 0):v=[]:v?v.push(L):L=="{"?(F.push([$,E]),$={},E=void 0):L=="}"?((N=F.pop())[0][N[1]]=$,E=void 0,$=N[0]):L=="-"?M=-1:E===void 0?n.hasOwnProperty(L)?(ne+=n[L],E=parseInt(ne,16)*M,M=1,ne=""):ne+=L:n.hasOwnProperty(L)?(ue+=n[L],$[E]=parseInt(ue,16)*M,M=1,E=void 0,ue=""):ue+=L;return C},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},b={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(S){var v=S.font,N=b.Unicode[v.postScriptName];N&&(v.metadata.Unicode={},v.metadata.Unicode.widths=N.widths,v.metadata.Unicode.kerning=N.kerning);var E=g.Unicode[v.postScriptName];E&&(v.metadata.Unicode.encoding=E,v.encoding=E.codePages[0])}])})(Ct.API),(function(r){var e=function(t){for(var n=t.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=t.charCodeAt(o);return i};r.API.events.push(["addFont",function(t){var n=void 0,i=t.font,o=t.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(l,u){u=/^\x00\x01\x00\x00/.test(u)?e(u):e(Kp(u)),l.metadata=r.API.TTFFont.open(u),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(i,n)}}])})(Ct),Ct.API.addSvgAsImage=function(r,e,t,n,i,o,l,u){if(isNaN(e)||isNaN(t))throw rn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw rn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=n,h.height=i;var d=h.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,h.width,h.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return(Qt.canvg?Promise.resolve(Qt.canvg):fu(()=>import("./index.es-DJOU6meJ.js"),[])).catch(function(S){return Promise.reject(new Error("Could not load canvg: "+S))}).then(function(S){return S.default?S.default:S}).then(function(S){return S.fromString(d,r,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(S){return S.render(g)}).then(function(){b.addImage(h.toDataURL("image/jpeg",1),e,t,n,i,l,u)})},Ct.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,t);return this},Ct.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,i,o,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(l),h=[],d=0,g=0,b=0;function S(N,E){var L,C=!1;for(L=0;L<N.length;L+=1)N[L]===E&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var v=u.length;for(b=0;b<v;b+=1)t[u[b]].value=t[u[b]].defaultValue,t[u[b]].explicitSet=!1}if(Gr(r)==="object"){for(i in r)if(o=r[i],S(u,i)&&o!==void 0){if(t[i].type==="boolean"&&typeof o=="boolean")t[i].value=o;else if(t[i].type==="name"&&S(t[i].valueSet,o))t[i].value=o;else if(t[i].type==="integer"&&Number.isInteger(o))t[i].value=o;else if(t[i].type==="array"){for(d=0;d<o.length;d+=1)if(n=!0,o[d].length===1&&typeof o[d][0]=="number")h.push(String(o[d]-1));else if(o[d].length>1){for(g=0;g<o[d].length;g+=1)typeof o[d][g]!="number"&&(n=!1);n===!0&&h.push([o[d][0]-1,o[d][1]-1].join(" "))}t[i].value="["+h.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,E=[];for(N in t)t[N].explicitSet===!0&&(t[N].type==="name"?E.push("/"+N+" /"+t[N].value):E.push("/"+N+" "+t[N].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),d=o.length+l.length+u.length+i.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+o+l+u+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Ct.API),(function(r){var e=r.API,t=e.pdfEscape16=function(o,l){for(var u,h=l.metadata.Unicode.widths,d=["","0","00","000","0000"],g=[""],b=0,S=o.length;b<S;++b){if(u=l.metadata.characterToGlyph(o.charCodeAt(b)),l.metadata.glyIdsUsed.push(u),l.metadata.toUnicode[u]=o.charCodeAt(b),h.indexOf(u)==-1&&(h.push(u),h.push([parseInt(l.metadata.widthOfGlyph(u),10)])),u=="0")return g.join("");u=u.toString(16),g.push(d[4-u.length],u)}return g.join("")},n=function(o){var l,u,h,d,g,b,S;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],b=0,S=(u=Object.keys(o).sort(function(v,N){return v-N})).length;b<S;b++)l=u[b],h.length>=100&&(g+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),o[l]!==void 0&&o[l]!==null&&typeof o[l].toString=="function"&&(d=("0000"+o[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),h.push("<"+l+"><"+d+">"));return h.length&&(g+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),g+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(l){var u=l.font,h=l.out,d=l.newObject,g=l.putStream;if(u.metadata instanceof r.API.TTFFont&&u.encoding==="Identity-H"){for(var b=u.metadata.Unicode.widths,S=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),v="",N=0;N<S.length;N++)v+=String.fromCharCode(S[N]);var E=d();g({data:v,addLength1:!0,objectId:E}),h("endobj");var L=d();g({data:n(u.metadata.toUnicode),addLength1:!0,objectId:L}),h("endobj");var C=d();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+wd(u.fontName)),h("/FontFile2 "+E+" 0 R"),h("/FontBBox "+r.API.PDFObject.convert(u.metadata.bbox)),h("/Flags "+u.metadata.flags),h("/StemV "+u.metadata.stemV),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h(">>"),h("endobj");var M=d();h("<<"),h("/Type /Font"),h("/BaseFont /"+wd(u.fontName)),h("/FontDescriptor "+C+" 0 R"),h("/W "+r.API.PDFObject.convert(b)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+u.encoding+")"),h(">>"),h(">>"),h("endobj"),u.objectNumber=d(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+L+" 0 R"),h("/BaseFont /"+wd(u.fontName)),h("/Encoding /"+u.encoding),h("/DescendantFonts ["+M+" 0 R]"),h(">>"),h("endobj"),u.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(l){var u=l.font,h=l.out,d=l.newObject,g=l.putStream;if(u.metadata instanceof r.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var b=u.metadata.rawData,S="",v=0;v<b.length;v++)S+=String.fromCharCode(b[v]);var N=d();g({data:S,addLength1:!0,objectId:N}),h("endobj");var E=d();g({data:n(u.metadata.toUnicode),addLength1:!0,objectId:E}),h("endobj");var L=d();h("<<"),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h("/StemV "+u.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+N+" 0 R"),h("/Flags 96"),h("/FontBBox "+r.API.PDFObject.convert(u.metadata.bbox)),h("/FontName /"+wd(u.fontName)),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h(">>"),h("endobj"),u.objectNumber=d();for(var C=0;C<u.metadata.hmtx.widths.length;C++)u.metadata.hmtx.widths[C]=parseInt(u.metadata.hmtx.widths[C]*(1e3/u.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+wd(u.fontName)+"/FontDescriptor "+L+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),h("endobj"),u.isAlreadyPutted=!0}})(o)}]);var i=function(o){var l,u=o.text||"",h=o.x,d=o.y,g=o.options||{},b=o.mutex||{},S=b.pdfEscape,v=b.activeFontKey,N=b.fonts,E=v,L="",C=0,M="",$=N[E].encoding;if(N[E].encoding!=="Identity-H")return{text:u,x:h,y:d,options:g,mutex:b};for(M=u,E=v,Array.isArray(u)&&(M=u[0]),C=0;C<M.length;C+=1)N[E].metadata.hasOwnProperty("cmap")&&(l=N[E].metadata.cmap.unicode.codeMap[M[C].charCodeAt(0)]),l||M[C].charCodeAt(0)<256&&N[E].metadata.hasOwnProperty("Unicode")?L+=M[C]:L+="";var F="";return parseInt(E.slice(1))<14||$==="WinAnsiEncoding"?F=S(L,E).split("").map(function(ne){return ne.charCodeAt(0).toString(16)}).join(""):$==="Identity-H"&&(F=t(L,N[E])),b.isHex=!0,{text:F,x:h,y:d,options:g,mutex:b}};e.events.push(["postProcessText",function(o){var l=o.text||"",u=[],h={text:l,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(l)){var d=0;for(d=0;d<l.length;d+=1)Array.isArray(l[d])&&l[d].length===3?u.push([i(Object.assign({},h,{text:l[d][0]})).text,l[d][1],l[d][2]]):u.push(i(Object.assign({},h,{text:l[d]})).text);o.text=u}else o.text=i(Object.assign({},h,{text:l})).text}])})(Ct),(function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Ct.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var i,o,l,u,h,d,g,b=e,S=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},L=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),M=!1,$=0;this.__bidiEngine__={};var F=function(I){var w=I.charCodeAt(),B=w>>8,D=E[B];return D!==void 0?b[256*D+(255&w)]:B===252||B===253?"AL":C.test(B)?"L":B===8?"R":"N"},ne=function(I){for(var w,B=0;B<I.length;B++){if((w=F(I.charAt(B)))==="L")return!1;if(w==="R")return!0}return!1},ue=function(I,w,B,D){var q,oe,se,ie,ve=w[D];switch(ve){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":M=!1;break;case"N":case"AN":break;case"EN":M&&(ve="AN");break;case"AL":M=!0,ve="R";break;case"WS":case"BN":ve="N";break;case"CS":D<1||D+1>=w.length||(q=B[D-1])!=="EN"&&q!=="AN"||(oe=w[D+1])!=="EN"&&oe!=="AN"?ve="N":M&&(oe="AN"),ve=oe===q?oe:"N";break;case"ES":ve=(q=D>0?B[D-1]:"B")==="EN"&&D+1<w.length&&w[D+1]==="EN"?"EN":"N";break;case"ET":if(D>0&&B[D-1]==="EN"){ve="EN";break}if(M){ve="N";break}for(se=D+1,ie=w.length;se<ie&&w[se]==="ET";)se++;ve=se<ie&&w[se]==="EN"?"EN":"N";break;case"NSM":if(l&&!u){for(ie=w.length,se=D+1;se<ie&&w[se]==="NSM";)se++;if(se<ie){var be=I[D],Z=be>=1425&&be<=2303||be===64286;if(q=w[se],Z&&(q==="R"||q==="AL")){ve="R";break}}}ve=D<1||(q=w[D-1])==="B"?"N":B[D-1];break;case"B":M=!1,i=!0,ve=$;break;case"S":o=!0,ve="N"}return ve},V=function(I,w,B){var D=I.split("");return B&&k(D,B,{hiLevel:$}),D.reverse(),w&&w.reverse(),D.join("")},k=function(I,w,B){var D,q,oe,se,ie,ve=-1,be=I.length,Z=0,W=[],J=$?v:S,re=[];for(M=!1,i=!1,o=!1,q=0;q<be;q++)re[q]=F(I[q]);for(oe=0;oe<be;oe++){if(ie=Z,W[oe]=ue(I,re,W,oe),D=240&(Z=J[ie][N[W[oe]]]),Z&=15,w[oe]=se=J[Z][5],D>0)if(D===16){for(q=ve;q<oe;q++)w[q]=1;ve=-1}else ve=-1;if(J[Z][6])ve===-1&&(ve=oe);else if(ve>-1){for(q=ve;q<oe;q++)w[q]=se;ve=-1}re[oe]==="B"&&(w[oe]=0),B.hiLevel|=se}o&&(function(fe,ge,_e){for(var he=0;he<_e;he++)if(fe[he]==="S"){ge[he]=$;for(var xe=he-1;xe>=0&&fe[xe]==="WS";xe--)ge[xe]=$}})(re,w,be)},A=function(I,w,B,D,q){if(!(q.hiLevel<I)){if(I===1&&$===1&&!i)return w.reverse(),void(B&&B.reverse());for(var oe,se,ie,ve,be=w.length,Z=0;Z<be;){if(D[Z]>=I){for(ie=Z+1;ie<be&&D[ie]>=I;)ie++;for(ve=Z,se=ie-1;ve<se;ve++,se--)oe=w[ve],w[ve]=w[se],w[se]=oe,B&&(oe=B[ve],B[ve]=B[se],B[se]=oe);Z=ie}Z++}}},O=function(I,w,B){var D=I.split(""),q={hiLevel:$};return B||(B=[]),k(D,B,q),(function(oe,se,ie){if(ie.hiLevel!==0&&g)for(var ve,be=0;be<oe.length;be++)se[be]===1&&(ve=L.indexOf(oe[be]))>=0&&(oe[be]=L[ve+1])})(D,B,q),A(2,D,w,B,q),A(1,D,w,B,q),D.join("")};return this.__bidiEngine__.doBidiReorder=function(I,w,B){if((function(q,oe){if(oe)for(var se=0;se<q.length;se++)oe[se]=se;u===void 0&&(u=ne(q)),d===void 0&&(d=ne(q))})(I,w),l||!h||d)if(l&&h&&u^d)$=u?1:0,I=V(I,w,B);else if(!l&&h&&d)$=u?1:0,I=O(I,w,B),I=V(I,w);else if(!l||u||h||d){if(l&&!h&&u^d)I=V(I,w),u?($=0,I=O(I,w,B)):($=1,I=O(I,w,B),I=V(I,w));else if(l&&u&&!h&&d)$=1,I=O(I,w,B),I=V(I,w);else if(!l&&!h&&u^d){var D=g;u?($=1,I=O(I,w,B),$=0,g=!1,I=O(I,w,B),g=D):($=0,I=O(I,w,B),I=V(I,w),$=1,g=!1,I=O(I,w,B),g=D,I=V(I,w))}}else $=0,I=O(I,w,B);else $=u?1:0,I=O(I,w,B);return I},this.__bidiEngine__.setOptions=function(I){I&&(l=I.isInputVisual,h=I.isOutputVisual,u=I.isInputRtl,d=I.isOutputRtl,g=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var o=n.options||{};n.mutex,o.lang;var l=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var u=0;for(l=[],u=0;u<i.length;u+=1)Object.prototype.toString.call(i[u])==="[object Array]"?l.push([t.doBidiReorder(i[u][0]),i[u][1],i[u][2]]):l.push([t.doBidiReorder(i[u])]);n.text=l}else n.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(Ct),Ct.API.TTFFont=(function(){function r(e){var t;if(this.rawData=e,t=this.contents=new Ac(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Bk(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new bk(this.contents),this.head=new Sk(this),this.name=new kk(this),this.cmap=new cS(this),this.toUnicode={},this.hhea=new _k(this),this.maxp=new Ik(this),this.hmtx=new Ek(this),this.post=new Ak(this),this.os2=new Tk(this),this.loca=new Nk(this),this.glyf=new jk(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,u,h,d;for(d=[],l=0,u=(h=this.bbox).length;l<u;l++)e=h[l],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var i,o,l,u;for(l=0,o=0,u=(e=""+e).length;0<=u?o<u:o>u;o=0<=u?++o:--o)i=e.charCodeAt(o),l+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/t)||0;return l*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r})();var va,Ac=(function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,i;for(i=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,i,o,l,u,h;return e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),u=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^o)+65536*(255^l)+256*(255^u)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*i+16777216*o+65536*l+256*u+h},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,i,o;for(o=[],n=0,i=e.length;n<i;n++)t=e[n],o.push(this.writeByte(t));return o},r})(),bk=(function(){var r;function e(t){var n,i,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,i,o,l,u,h,d,g,b,S,v,N,E;for(E in v=Object.keys(t).length,h=Math.log(2),b=16*Math.floor(Math.log(v)/h),l=Math.floor(b/h),g=16*v-b,(i=new Ac).writeInt(this.scalarType),i.writeShort(v),i.writeShort(b),i.writeShort(l),i.writeShort(g),o=16*v,d=i.pos+o,u=null,N=[],t)for(S=t[E],i.writeString(E),i.writeInt(r(S)),i.writeInt(d),i.writeInt(S.length),N=N.concat(S),E==="head"&&(u=d),d+=S.length;d%4;)N.push(0),d++;return i.write(N),n=2981146554-r(i.data),i.pos=u+8,i.writeUInt32(n),i.data},r=function(t){var n,i,o,l;for(t=uS.call(t);t.length%4;)t.push(0);for(o=new Ac(t),i=0,n=0,l=t.length;n<l;n=n+=4)i+=o.readUInt32();return 4294967295&i},e})(),wk={}.hasOwnProperty,Ja=function(r,e){for(var t in e)wk.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};va=(function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var Sk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var t;return(t=new Ac).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},r})(),Vx=(function(){function r(e,t){var n,i,o,l,u,h,d,g,b,S,v,N,E,L,C,M,$;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),b=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(v=e.readUInt16(),S=v/2,e.pos+=6,o=(function(){var F,ne;for(ne=[],h=F=0;0<=S?F<S:F>S;h=0<=S?++F:--F)ne.push(e.readUInt16());return ne})(),e.pos+=2,E=(function(){var F,ne;for(ne=[],h=F=0;0<=S?F<S:F>S;h=0<=S?++F:--F)ne.push(e.readUInt16());return ne})(),d=(function(){var F,ne;for(ne=[],h=F=0;0<=S?F<S:F>S;h=0<=S?++F:--F)ne.push(e.readUInt16());return ne})(),g=(function(){var F,ne;for(ne=[],h=F=0;0<=S?F<S:F>S;h=0<=S?++F:--F)ne.push(e.readUInt16());return ne})(),i=(this.length-e.pos+this.offset)/2,u=(function(){var F,ne;for(ne=[],h=F=0;0<=i?F<i:F>i;h=0<=i?++F:--F)ne.push(e.readUInt16());return ne})(),h=C=0,$=o.length;C<$;h=++C)for(L=o[h],n=M=N=E[h];N<=L?M<=L:M>=L;n=N<=L?++M:--M)g[h]===0?l=n+d[h]:(l=u[g[h]/2+(n-N)-(S-h)]||0)!==0&&(l+=d[h]),this.codeMap[n]=65535&l}e.pos=b}return r.encode=function(e,t){var n,i,o,l,u,h,d,g,b,S,v,N,E,L,C,M,$,F,ne,ue,V,k,A,O,I,w,B,D,q,oe,se,ie,ve,be,Z,W,J,re,fe,ge,_e,he,xe,Pe,Ue,Xe;switch(D=new Ac,l=Object.keys(e).sort(function(Ze,ze){return Ze-ze}),t){case"macroman":for(E=0,L=(function(){var Ze=[];for(N=0;N<256;++N)Ze.push(0);return Ze})(),M={0:0},o={},q=0,ve=l.length;q<ve;q++)M[xe=e[i=l[q]]]==null&&(M[xe]=++E),o[i]={old:e[i],new:M[e[i]]},L[i]=M[e[i]];return D.writeUInt16(1),D.writeUInt16(0),D.writeUInt32(12),D.writeUInt16(0),D.writeUInt16(262),D.writeUInt16(0),D.write(L),{charMap:o,subtable:D.data,maxGlyphID:E+1};case"unicode":for(w=[],b=[],$=0,M={},n={},C=d=null,oe=0,be=l.length;oe<be;oe++)M[ne=e[i=l[oe]]]==null&&(M[ne]=++$),n[i]={old:ne,new:M[ne]},u=M[ne]-i,C!=null&&u===d||(C&&b.push(C),w.push(i),d=u),C=i;for(C&&b.push(C),b.push(65535),w.push(65535),O=2*(A=w.length),k=2*Math.pow(Math.log(A)/Math.LN2,2),S=Math.log(k/2)/Math.LN2,V=2*A-k,h=[],ue=[],v=[],N=se=0,Z=w.length;se<Z;N=++se){if(I=w[N],g=b[N],I===65535){h.push(0),ue.push(0);break}if(I-(B=n[I].new)>=32768)for(h.push(0),ue.push(2*(v.length+A-N)),i=ie=I;I<=g?ie<=g:ie>=g;i=I<=g?++ie:--ie)v.push(n[i].new);else h.push(B-I),ue.push(0)}for(D.writeUInt16(3),D.writeUInt16(1),D.writeUInt32(12),D.writeUInt16(4),D.writeUInt16(16+8*A+2*v.length),D.writeUInt16(0),D.writeUInt16(O),D.writeUInt16(k),D.writeUInt16(S),D.writeUInt16(V),_e=0,W=b.length;_e<W;_e++)i=b[_e],D.writeUInt16(i);for(D.writeUInt16(0),he=0,J=w.length;he<J;he++)i=w[he],D.writeUInt16(i);for(Pe=0,re=h.length;Pe<re;Pe++)u=h[Pe],D.writeUInt16(u);for(Ue=0,fe=ue.length;Ue<fe;Ue++)F=ue[Ue],D.writeUInt16(F);for(Xe=0,ge=v.length;Xe<ge;Xe++)E=v[Xe],D.writeUInt16(E);return{charMap:n,subtable:D.data,maxGlyphID:$+1}}},r})(),cS=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="cmap",r.prototype.parse=function(e){var t,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)t=new Vx(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},r.encode=function(e,t){var n,i;return t==null&&(t="macroman"),n=Vx.encode(e,t),(i=new Ac).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},r})(),_k=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r})(),Tk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n})(),this.charRange=(function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r})(),Ak=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="post",r.prototype.parse=function(e){var t,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(n=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var l,u,h;for(h=[],o=l=0,u=this.file.maxp.numGlyphs;0<=u?l<u:l>u;o=0<=u?++l:--l)h.push(e.readUInt32());return h}).call(this)}},r})(),Ck=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},kk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="name",r.prototype.parse=function(e){var t,n,i,o,l,u,h,d,g,b,S;for(e.pos=this.offset,e.readShort(),t=e.readShort(),u=e.readShort(),n=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+u+e.readShort()});for(h={},o=g=0,b=n.length;g<b;o=++g)i=n[o],e.pos=i.offset,d=e.readString(i.length),l=new Ck(d,i),h[S=i.nameID]==null&&(h[S]=[]),h[i.nameID].push(l);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},r})(),Ik=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r})(),Ek=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="hmtx",r.prototype.parse=function(e){var t,n,i,o,l,u,h;for(e.pos=this.offset,this.metrics=[],t=0,u=this.file.hhea.numberOfMetrics;0<=u?t<u:t>u;t=0<=u?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,g;for(g=[],t=d=0;0<=i?d<i:d>i;t=0<=i?++d:--d)g.push(e.readInt16());return g})(),this.widths=(function(){var d,g,b,S;for(S=[],d=0,g=(b=this.metrics).length;d<g;d++)o=b[d],S.push(o.advance);return S}).call(this),n=this.widths[this.widths.length-1],h=[],t=l=0;0<=i?l<i:l>i;t=0<=i?++l:--l)h.push(this.widths.push(n));return h},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r})(),uS=[].slice,jk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var t,n,i,o,l,u,h,d,g,b;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,n=o.indexOf(e),(i=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+n,l=(u=new Ac(t.read(i))).readShort(),d=u.readShort(),b=u.readShort(),h=u.readShort(),g=u.readShort(),this.cache[e]=l===-1?new Pk(u,d,b,h,g):new Rk(u,l,d,b,h,g),this.cache[e]))},r.prototype.encode=function(e,t,n){var i,o,l,u,h;for(l=[],o=[],u=0,h=t.length;u<h;u++)i=e[t[u]],o.push(l.length),i&&(l=l.concat(i.encode(n)));return o.push(l.length),{table:l,offsets:o}},r})(),Rk=(function(){function r(e,t,n,i,o,l){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=l,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),Pk=(function(){function r(e,t,n,i,o){var l,u;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;u=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&u;)l.pos+=1&u?4:2,128&u?l.pos+=8:64&u?l.pos+=4:8&u&&(l.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new Ac(uS.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r})(),Nk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="loca",r.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=4)o.push(e.readUInt32());return o}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<n.length;++l)if(n[l]=i,o<t.length&&t[o]==l){++o,n[l]=i;var u=this.offsets[l],h=this.offsets[l+1]-u;h>0&&(i+=h)}for(var d=new Array(4*n.length),g=0;g<n.length;++g)d[4*g+3]=255&n[g],d[4*g+2]=(65280&n[g])>>8,d[4*g+1]=(16711680&n[g])>>16,d[4*g]=(4278190080&n[g])>>24;return d},r})(),Bk=(function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,i,o;for(t in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)n=o[t],e[t]=i[n];return e},r.prototype.glyphsFor=function(e){var t,n,i,o,l,u,h;for(i={},l=0,u=e.length;l<u;l++)i[o=e[l]]=this.font.glyf.glyphFor(o);for(o in t=[],i)(n=i[o])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(o in h=this.glyphsFor(t))n=h[o],i[o]=n;return i},r.prototype.encode=function(e,t){var n,i,o,l,u,h,d,g,b,S,v,N,E,L,C;for(i in n=cS.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(e),v={0:0},C=n.charMap)v[(h=C[i]).old]=h.new;for(N in S=n.maxGlyphID,l)N in v||(v[N]=S++);return g=(function(M){var $,F;for($ in F={},M)F[M[$]]=$;return F})(v),b=Object.keys(g).sort(function(M,$){return M-$}),E=(function(){var M,$,F;for(F=[],M=0,$=b.length;M<$;M++)u=b[M],F.push(g[u]);return F})(),o=this.font.glyf.encode(l,E,v),d=this.font.loca.encode(o.offsets,E),L={cmap:this.font.cmap.raw(),glyf:o.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(L["OS/2"]=this.font.os2.raw()),this.font.directory.encode(L)},r})();Ct.API.PDFObject=(function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,i,o,l;if(Array.isArray(t))return"["+(function(){var u,h,d;for(d=[],u=0,h=t.length;u<h;u++)n=t[u],d.push(e.convert(n));return d})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in o=["<<"],t)l=t[i],o.push("/"+i+" "+e.convert(l));return o.push(">>"),o.join(`
`)}return""+t},e})();const cn=r=>{const{calculatorName:e,inputs:t,results:n,necReferences:i,additionalInfo:o}=r,l=new Ct({orientation:"portrait",unit:"mm",format:"letter"}),u=l.internal.pageSize.getWidth(),h=l.internal.pageSize.getHeight(),d=15,g=u-d*2;let b=d;const S=ne=>b+ne>h-d?(l.addPage(),b=d,!0):!1,v=(ne,ue,V,k,A=10)=>{l.setFontSize(A);const O=l.splitTextToSize(ne,k);return l.text(O,ue,V),O.length*(A*.4)};l.setFillColor(37,99,235),l.rect(0,0,u,25,"F"),l.setTextColor(255,255,255),l.setFontSize(20),l.setFont("helvetica","bold"),l.text("Electrician Toolkit",d,12),l.setFontSize(12),l.setFont("helvetica","normal"),l.text(e,d,19),l.setFontSize(9);const N=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});l.text(N,u-d-l.getTextWidth(N),19),b=35,l.setTextColor(0,0,0),l.setFontSize(14),l.setFont("helvetica","bold"),l.text("Input Parameters",d,b),b+=7,l.setDrawColor(37,99,235),l.setLineWidth(.5),l.line(d,b,u-d,b),b+=5,l.setFontSize(10),l.setFont("helvetica","normal"),Object.entries(t).forEach(([ne,ue])=>{S(10);const V=ne.replace(/([A-Z])/g," $1").trim(),k=V.charAt(0).toUpperCase()+V.slice(1);l.setFont("helvetica","bold");const A=`${k}:`;l.text(A,d+5,b);const O=l.getTextWidth(A);l.setFont("helvetica","normal"),l.text(String(ue),d+5+O+3,b),b+=6}),b+=5,S(20),l.setFontSize(14),l.setFont("helvetica","bold"),l.text("Results",d,b),b+=7,l.setDrawColor(37,99,235),l.line(d,b,u-d,b),b+=5,l.setFontSize(10),l.setFont("helvetica","normal"),Object.entries(n).forEach(([ne,ue])=>{S(10);const V=ne.replace(/([A-Z])/g," $1").trim(),k=V.charAt(0).toUpperCase()+V.slice(1);l.setFont("helvetica","bold");const A=`${k}:`;l.text(A,d+5,b);let O=String(ue);typeof ue=="boolean"&&(O=ue?"Yes":"No");const I=l.getTextWidth(A);l.setFont("helvetica","normal"),l.text(O,d+5+I+3,b),b+=6}),b+=5,o&&Object.keys(o).length>0&&(S(20),l.setFontSize(14),l.setFont("helvetica","bold"),l.text("Calculation Details",d,b),b+=7,l.setDrawColor(37,99,235),l.line(d,b,u-d,b),b+=5,l.setFontSize(10),l.setFont("helvetica","normal"),Object.entries(o).forEach(([ne,ue])=>{S(10);const V=ne.replace(/([A-Z])/g," $1").trim(),k=V.charAt(0).toUpperCase()+V.slice(1),A=v(`${k}: ${ue}`,d+5,b,g-10,10);b+=A+2}),b+=5),i&&(S(20),l.setFontSize(14),l.setFont("helvetica","bold"),l.text("NEC Code References",d,b),b+=7,l.setDrawColor(37,99,235),l.line(d,b,u-d,b),b+=5,l.setFontSize(10),l.setFont("helvetica","normal"),(Array.isArray(i)?i:[i]).forEach(ue=>{S(15);const V=v(` ${ue}`,d+5,b,g-10,10);b+=V+2}));const E=h-10;l.setFontSize(8),l.setTextColor(100,100,100),l.setFont("helvetica","italic");const L="This calculation is for reference only. Always verify with current NEC and local codes.",C=l.getTextWidth(L);l.text(L,(u-C)/2,E);const M=e.toLowerCase().replace(/\s+/g,"-"),$=new Date().toISOString().split("T")[0],F=`${M}-${$}.pdf`;l.save(F)},Lk=()=>{};var Ox={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Fk=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const o=r[t++];e[n++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=r[t++],l=r[t++],u=r[t++],h=((i&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(h>>10)),e[n++]=String.fromCharCode(56320+(h&1023))}else{const o=r[t++],l=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},hS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const o=r[i],l=i+1<r.length,u=l?r[i+1]:0,h=i+2<r.length,d=h?r[i+2]:0,g=o>>2,b=(o&3)<<4|u>>4;let S=(u&15)<<2|d>>6,v=d&63;h||(v=64,l||(S=64)),n.push(t[g],t[b],t[S],t[v])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(dS(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Fk(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const o=t[r.charAt(i++)],u=i<r.length?t[r.charAt(i)]:0;++i;const d=i<r.length?t[r.charAt(i)]:64;++i;const b=i<r.length?t[r.charAt(i)]:64;if(++i,o==null||u==null||d==null||b==null)throw new zk;const S=o<<2|u>>4;if(n.push(S),d!==64){const v=u<<4&240|d>>2;if(n.push(v),b!==64){const N=d<<6&192|b;n.push(N)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class zk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vk=function(r){const e=dS(r);return hS.encodeByteArray(e,!0)},wm=function(r){return Vk(r).replace(/\./g,"")},fS=function(r){try{return hS.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=()=>pS().__FIREBASE_DEFAULTS__,Mk=()=>{if(typeof process>"u"||typeof Ox>"u")return;const r=Ox.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Dk=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&fS(r[1]);return e&&JSON.parse(e)},Jm=()=>{try{return Lk()||Ok()||Mk()||Dk()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},mS=r=>{var e,t;return(t=(e=Jm())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},Wk=r=>{const e=mS(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},gS=()=>{var r;return(r=Jm())==null?void 0:r.config},yS=r=>{var e;return(e=Jm())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xS(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,o=r.sub||r.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...r};return[wm(JSON.stringify(t)),wm(JSON.stringify(l)),""].join(".")}const Xh={};function qk(){const r={prod:[],emulator:[]};for(const e of Object.keys(Xh))Xh[e]?r.emulator.push(e):r.prod.push(e);return r}function Hk(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Mx=!1;function vS(r,e){if(typeof window>"u"||typeof document>"u"||!th(window.location.host)||Xh[r]===e||Xh[r]||Mx)return;Xh[r]=e;function t(S){return`__firebase__banner__${S}`}const n="__firebase__banner",o=qk().prod.length>0;function l(){const S=document.getElementById(n);S&&S.remove()}function u(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function h(S,v){S.setAttribute("width","24"),S.setAttribute("id",v),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function d(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Mx=!0,l()},S}function g(S,v){S.setAttribute("id",v),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function b(){const S=Hk(n),v=t("text"),N=document.getElementById(v)||document.createElement("span"),E=t("learnmore"),L=document.getElementById(E)||document.createElement("a"),C=t("preprendIcon"),M=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const $=S.element;u($),g(L,E);const F=d();h(M,C),$.append(M,N,L,F),document.body.appendChild($)}o?(N.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Gk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hi())}function bS(){var e;const r=(e=Jm())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Kk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Jk(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Yk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Qk(){const r=hi();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function wS(){return!bS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SS(){return!bS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function _S(){try{return typeof indexedDB=="object"}catch{return!1}}function Xk(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="FirebaseError";class Rl extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=Zk,Object.setPrototypeOf(this,Rl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pf.prototype.create)}}class Pf{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?eI(o,n):"Error",u=`${this.serviceName}: ${l} (${i}).`;return new Rl(i,u,n)}}function eI(r,e){return r.replace(tI,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const tI=/\{\$([^}]+)}/g;function rI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function _u(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const o=r[i],l=e[i];if(Dx(o)&&Dx(l)){if(!_u(o,l))return!1}else if(o!==l)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function Dx(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function $h(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,o]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Uh(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function nI(r,e){const t=new iI(r,e);return t.subscribe.bind(t)}class iI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");oI(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=zg),i.error===void 0&&(i.error=zg),i.complete===void 0&&(i.complete=zg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function zg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(r){return r&&r._delegate?r._delegate:r}class Tu{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new $k;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lI(e))try{this.getOrInitializeService({instanceIdentifier:iu})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});n.resolve(o)}catch{}}}}clearInstance(e=iu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=iu){return this.instances.has(e)}getOptions(e=iu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);n===u&&l.resolve(i)}return i}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const o=this.instances.get(n);return o&&e(o,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:aI(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=iu){return this.component?this.component.multipleInstances?e:iu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aI(r){return r===iu?void 0:r}function lI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yr;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(yr||(yr={}));const uI={debug:yr.DEBUG,verbose:yr.VERBOSE,info:yr.INFO,warn:yr.WARN,error:yr.ERROR,silent:yr.SILENT},dI=yr.INFO,hI={[yr.DEBUG]:"log",[yr.VERBOSE]:"log",[yr.INFO]:"info",[yr.WARN]:"warn",[yr.ERROR]:"error"},fI=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=hI[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class i5{constructor(e){this.name=e,this._logLevel=dI,this._logHandler=fI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,yr.DEBUG,...e),this._logHandler(this,yr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,yr.VERBOSE,...e),this._logHandler(this,yr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,yr.INFO,...e),this._logHandler(this,yr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,yr.WARN,...e),this._logHandler(this,yr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,yr.ERROR,...e),this._logHandler(this,yr.ERROR,...e)}}const pI=(r,e)=>e.some(t=>r instanceof t);let Wx,$x;function mI(){return Wx||(Wx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gI(){return $x||($x=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TS=new WeakMap,h1=new WeakMap,AS=new WeakMap,Vg=new WeakMap,o5=new WeakMap;function yI(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",o),r.removeEventListener("error",l)},o=()=>{t(xc(r.result)),i()},l=()=>{n(r.error),i()};r.addEventListener("success",o),r.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&TS.set(t,r)}).catch(()=>{}),o5.set(e,r),e}function xI(r){if(h1.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",l),r.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",o),r.addEventListener("error",l),r.addEventListener("abort",l)});h1.set(r,e)}let f1={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return h1.get(r);if(e==="objectStoreNames")return r.objectStoreNames||AS.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xc(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function vI(r){f1=r(f1)}function bI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Og(this),e,...t);return AS.set(n,e.sort?e.sort():[e]),xc(n)}:gI().includes(r)?function(...e){return r.apply(Og(this),e),xc(TS.get(this))}:function(...e){return xc(r.apply(Og(this),e))}}function wI(r){return typeof r=="function"?bI(r):(r instanceof IDBTransaction&&xI(r),pI(r,mI())?new Proxy(r,f1):r)}function xc(r){if(r instanceof IDBRequest)return yI(r);if(Vg.has(r))return Vg.get(r);const e=wI(r);return e!==r&&(Vg.set(r,e),o5.set(e,r)),e}const Og=r=>o5.get(r);function SI(r,e,{blocked:t,upgrade:n,blocking:i,terminated:o}={}){const l=indexedDB.open(r,e),u=xc(l);return n&&l.addEventListener("upgradeneeded",h=>{n(xc(l.result),h.oldVersion,h.newVersion,xc(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const _I=["get","getKey","getAll","getAllKeys","count"],TI=["put","add","delete","clear"],Mg=new Map;function Ux(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Mg.get(e))return Mg.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=TI.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||_I.includes(t)))return;const o=async function(l,...u){const h=this.transaction(l,i?"readwrite":"readonly");let d=h.store;return n&&(d=d.index(u.shift())),(await Promise.all([d[t](...u),i&&h.done]))[0]};return Mg.set(e,o),o}vI(r=>({...r,get:(e,t,n)=>Ux(e,t)||r.get(e,t,n),has:(e,t)=>!!Ux(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(CI(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function CI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const p1="@firebase/app",qx="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=new i5("@firebase/app"),kI="@firebase/app-compat",II="@firebase/analytics-compat",EI="@firebase/analytics",jI="@firebase/app-check-compat",RI="@firebase/app-check",PI="@firebase/auth",NI="@firebase/auth-compat",BI="@firebase/database",LI="@firebase/data-connect",FI="@firebase/database-compat",zI="@firebase/functions",VI="@firebase/functions-compat",OI="@firebase/installations",MI="@firebase/installations-compat",DI="@firebase/messaging",WI="@firebase/messaging-compat",$I="@firebase/performance",UI="@firebase/performance-compat",qI="@firebase/remote-config",HI="@firebase/remote-config-compat",GI="@firebase/storage",KI="@firebase/storage-compat",JI="@firebase/firestore",YI="@firebase/ai",QI="@firebase/firestore-compat",XI="firebase",ZI="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="[DEFAULT]",eE={[p1]:"fire-core",[kI]:"fire-core-compat",[EI]:"fire-analytics",[II]:"fire-analytics-compat",[RI]:"fire-app-check",[jI]:"fire-app-check-compat",[PI]:"fire-auth",[NI]:"fire-auth-compat",[BI]:"fire-rtdb",[LI]:"fire-data-connect",[FI]:"fire-rtdb-compat",[zI]:"fire-fn",[VI]:"fire-fn-compat",[OI]:"fire-iid",[MI]:"fire-iid-compat",[DI]:"fire-fcm",[WI]:"fire-fcm-compat",[$I]:"fire-perf",[UI]:"fire-perf-compat",[qI]:"fire-rc",[HI]:"fire-rc-compat",[GI]:"fire-gcs",[KI]:"fire-gcs-compat",[JI]:"fire-fst",[QI]:"fire-fst-compat",[YI]:"fire-vertex","fire-js":"fire-js",[XI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=new Map,tE=new Map,g1=new Map;function Hx(r,e){try{r.container.addComponent(e)}catch(t){kl.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function zd(r){const e=r.name;if(g1.has(e))return kl.debug(`There were multiple attempts to register component ${e}.`),!1;g1.set(e,r);for(const t of Sm.values())Hx(t,r);for(const t of tE.values())Hx(t,r);return!0}function s5(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Os(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vc=new Pf("app","Firebase",rE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Tu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=ZI;function CS(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:m1,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw vc.create("bad-app-name",{appName:String(i)});if(t||(t=gS()),!t)throw vc.create("no-options");const o=Sm.get(i);if(o){if(_u(t,o.options)&&_u(n,o.config))return o;throw vc.create("duplicate-app",{appName:i})}const l=new cI(i);for(const h of g1.values())l.addComponent(h);const u=new nE(t,n,l);return Sm.set(i,u),u}function kS(r=m1){const e=Sm.get(r);if(!e&&r===m1&&gS())return CS();if(!e)throw vc.create("no-app",{appName:r});return e}function bc(r,e,t){let n=eE[r]??r;t&&(n+=`-${t}`);const i=n.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${n}" with version "${e}":`];i&&l.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kl.warn(l.join(" "));return}zd(new Tu(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="firebase-heartbeat-database",oE=1,hf="firebase-heartbeat-store";let Dg=null;function IS(){return Dg||(Dg=SI(iE,oE,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(hf)}catch(t){console.warn(t)}}}}).catch(r=>{throw vc.create("idb-open",{originalErrorMessage:r.message})})),Dg}async function sE(r){try{const t=(await IS()).transaction(hf),n=await t.objectStore(hf).get(ES(r));return await t.done,n}catch(e){if(e instanceof Rl)kl.warn(e.message);else{const t=vc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kl.warn(t.message)}}}async function Gx(r,e){try{const n=(await IS()).transaction(hf,"readwrite");await n.objectStore(hf).put(e,ES(r)),await n.done}catch(t){if(t instanceof Rl)kl.warn(t.message);else{const n=vc.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});kl.warn(n.message)}}}function ES(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=1024,lE=30;class cE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dE(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Kx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>lE){const l=hE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){kl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Kx(),{heartbeatsToSend:n,unsentEntries:i}=uE(this._heartbeatsCache.heartbeats),o=wm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return kl.warn(t),""}}}function Kx(){return new Date().toISOString().substring(0,10)}function uE(r,e=aE){const t=[];let n=r.slice();for(const i of r){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),Jx(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Jx(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class dE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _S()?Xk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await sE(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Gx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Gx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Jx(r){return wm(JSON.stringify({version:2,heartbeats:r})).length}function hE(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(r){zd(new Tu("platform-logger",e=>new AI(e),"PRIVATE")),zd(new Tu("heartbeat",e=>new cE(e),"PRIVATE")),bc(p1,qx,r),bc(p1,qx,"esm2020"),bc("fire-js","")}fE("");var pE="firebase",mE="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bc(pE,mE,"app");function jS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gE=jS,RS=new Pf("auth","Firebase",jS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m=new i5("@firebase/auth");function yE(r,...e){_m.logLevel<=yr.WARN&&_m.warn(`Auth (${rh}): ${r}`,...e)}function Zp(r,...e){_m.logLevel<=yr.ERROR&&_m.error(`Auth (${rh}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(r,...e){throw a5(r,...e)}function Ua(r,...e){return a5(r,...e)}function PS(r,e,t){const n={...gE(),[e]:t};return new Pf("auth","Firebase",n).create(e,{appName:r.name})}function Al(r){return PS(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function a5(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return RS.create(r,...e)}function Kt(r,e,...t){if(!r)throw a5(e,...t)}function Sl(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Zp(e),new Error(e)}function Il(r,e){r||Sl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function xE(){return Yx()==="http:"||Yx()==="https:"}function Yx(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xE()||Jk()||"connection"in navigator)?navigator.onLine:!0}function bE(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t){this.shortDelay=e,this.longDelay=t,Il(t>e,"Short delay should be less than long delay!"),this.isMobile=Gk()||Yk()}get(){return vE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(r,e){Il(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_E=new Bf(3e4,6e4);function Rc(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Pc(r,e,t,n,i={}){return BS(r,i,async()=>{let o={},l={};n&&(e==="GET"?l=n:o={body:JSON.stringify(n)});const u=Nf({key:r.config.apiKey,...l}).slice(1),h=await r._getAdditionalHeaders();h["Content-Type"]="application/json",r.languageCode&&(h["X-Firebase-Locale"]=r.languageCode);const d={method:e,headers:h,...o};return Kk()||(d.referrerPolicy="no-referrer"),r.emulatorConfig&&th(r.emulatorConfig.host)&&(d.credentials="include"),NS.fetch()(await LS(r,r.config.apiHost,t,u),d)})}async function BS(r,e,t){r._canInitEmulator=!1;const n={...wE,...e};try{const i=new AE(r),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Vp(r,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[h,d]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vp(r,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Vp(r,"email-already-in-use",l);if(h==="USER_DISABLED")throw Vp(r,"user-disabled",l);const g=n[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw PS(r,g,d);ya(r,g)}}catch(i){if(i instanceof Rl)throw i;ya(r,"network-request-failed",{message:String(i)})}}async function Lf(r,e,t,n,i={}){const o=await Pc(r,e,t,n,i);return"mfaPendingCredential"in o&&ya(r,"multi-factor-auth-required",{_serverResponse:o}),o}async function LS(r,e,t,n){const i=`${e}${t}?${n}`,o=r,l=o.config.emulator?l5(r.config,i):`${r.config.apiScheme}://${i}`;return SE.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function TE(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class AE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Ua(this.auth,"network-request-failed")),_E.get())})}}function Vp(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=Ua(r,e,n);return i.customData._tokenResponse=t,i}function Qx(r){return r!==void 0&&r.enterprise!==void 0}class CE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return TE(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kE(r,e){return Pc(r,"GET","/v2/recaptchaConfig",Rc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IE(r,e){return Pc(r,"POST","/v1/accounts:delete",e)}async function Tm(r,e){return Pc(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function EE(r,e=!1){const t=fi(r),n=await t.getIdToken(e),i=c5(n);Kt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:n,authTime:Zh(Wg(i.auth_time)),issuedAtTime:Zh(Wg(i.iat)),expirationTime:Zh(Wg(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Wg(r){return Number(r)*1e3}function c5(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Zp("JWT malformed, contained fewer than 3 sections"),null;try{const i=fS(t);return i?JSON.parse(i):(Zp("Failed to decode base64 JWT payload"),null)}catch(i){return Zp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Xx(r){const e=c5(r);return Kt(e,"internal-error"),Kt(typeof e.exp<"u","internal-error"),Kt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ff(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Rl&&jE(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function jE({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zh(this.lastLoginAt),this.creationTime=Zh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Am(r){var b;const e=r.auth,t=await r.getIdToken(),n=await ff(r,Tm(e,{idToken:t}));Kt(n==null?void 0:n.users.length,e,"internal-error");const i=n.users[0];r._notifyReloadListener(i);const o=(b=i.providerUserInfo)!=null&&b.length?FS(i.providerUserInfo):[],l=NE(r.providerData,o),u=r.isAnonymous,h=!(r.email&&i.passwordHash)&&!(l!=null&&l.length),d=u?h:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new x1(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(r,g)}async function PE(r){const e=fi(r);await Am(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NE(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function FS(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BE(r,e){const t=await BS(r,{},async()=>{const n=Nf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=r.config,l=await LS(r,i,"/v1/token",`key=${o}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:n};return r.emulatorConfig&&th(r.emulatorConfig.host)&&(h.credentials="include"),NS.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function LE(r,e){return Pc(r,"POST","/v2/accounts:revokeToken",Rc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Kt(e.idToken,"internal-error"),Kt(typeof e.idToken<"u","internal-error"),Kt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Kt(e.length!==0,"internal-error");const t=Xx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Kt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:o}=await BE(e,t);this.updateTokensAndExpiration(n,i,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:o}=t,l=new Nd;return n&&(Kt(typeof n=="string","internal-error",{appName:e}),l.refreshToken=n),i&&(Kt(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Kt(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nd,this.toJSON())}_performRefresh(){return Sl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(r,e){Kt(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class fa{constructor({uid:e,auth:t,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new RE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new x1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ff(this,this.stsTokenManager.getToken(this.auth,e));return Kt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return EE(this,e)}reload(){return PE(this)}_assign(e){this!==e&&(Kt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Kt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Am(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Os(this.auth.app))return Promise.reject(Al(this.auth));const e=await this.getIdToken();return await ff(this,IE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,u=t.tenantId??void 0,h=t._redirectEventId??void 0,d=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:b,emailVerified:S,isAnonymous:v,providerData:N,stsTokenManager:E}=t;Kt(b&&E,e,"internal-error");const L=Nd.fromJSON(this.name,E);Kt(typeof b=="string",e,"internal-error"),ac(n,e.name),ac(i,e.name),Kt(typeof S=="boolean",e,"internal-error"),Kt(typeof v=="boolean",e,"internal-error"),ac(o,e.name),ac(l,e.name),ac(u,e.name),ac(h,e.name),ac(d,e.name),ac(g,e.name);const C=new fa({uid:b,auth:e,email:i,emailVerified:S,displayName:n,isAnonymous:v,photoURL:l,phoneNumber:o,tenantId:u,stsTokenManager:L,createdAt:d,lastLoginAt:g});return N&&Array.isArray(N)&&(C.providerData=N.map(M=>({...M}))),h&&(C._redirectEventId=h),C}static async _fromIdTokenResponse(e,t,n=!1){const i=new Nd;i.updateFromServerResponse(t);const o=new fa({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Am(o),o}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];Kt(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?FS(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),u=new Nd;u.updateFromIdToken(n);const h=new fa({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:l}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new x1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,d),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=new Map;function _l(r){Il(r instanceof Function,"Expected a class definition");let e=Zx.get(r);return e?(Il(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Zx.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zS.type="NONE";const ev=zS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(r,e,t){return`firebase:${r}:${e}:${t}`}class Bd{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:o}=this.auth;this.fullUserKey=em(this.userKey,i.apiKey,o),this.fullPersistenceKey=em("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Tm(this.auth,{idToken:e}).catch(()=>{});return t?fa._fromGetAccountInfoResponse(this.auth,t,e):null}return fa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Bd(_l(ev),e,n);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=i[0]||_l(ev);const l=em(n,e.config.apiKey,e.name);let u=null;for(const d of t)try{const g=await d._get(l);if(g){let b;if(typeof g=="string"){const S=await Tm(e,{idToken:g}).catch(()=>{});if(!S)break;b=await fa._fromGetAccountInfoResponse(e,S,g)}else b=fa._fromJSON(e,g);d!==o&&(u=b),o=d;break}}catch{}const h=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Bd(o,e,n):(o=h[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async d=>{if(d!==o)try{await d._remove(l)}catch{}})),new Bd(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($S(e))return"Blackberry";if(US(e))return"Webos";if(OS(e))return"Safari";if((e.includes("chrome/")||MS(e))&&!e.includes("edge/"))return"Chrome";if(WS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function VS(r=hi()){return/firefox\//i.test(r)}function OS(r=hi()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MS(r=hi()){return/crios\//i.test(r)}function DS(r=hi()){return/iemobile/i.test(r)}function WS(r=hi()){return/android/i.test(r)}function $S(r=hi()){return/blackberry/i.test(r)}function US(r=hi()){return/webos/i.test(r)}function u5(r=hi()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function FE(r=hi()){var e;return u5(r)&&!!((e=window.navigator)!=null&&e.standalone)}function zE(){return Qk()&&document.documentMode===10}function qS(r=hi()){return u5(r)||WS(r)||US(r)||$S(r)||/windows phone/i.test(r)||DS(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(r,e=[]){let t;switch(r){case"Browser":t=tv(hi());break;case"Worker":t=`${tv(hi())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${rh}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=o=>new Promise((l,u)=>{try{const h=e(o);l(h)}catch(h){u(h)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OE(r,e={}){return Pc(r,"GET","/v2/passwordPolicy",Rc(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=6;class DE{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ME,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rv(this),this.idTokenSubscription=new rv(this),this.beforeStateQueue=new VE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_l(t)),this._initializationPromise=this.queue(async()=>{var n,i,o;if(!this._deleted&&(this.persistenceManager=await Bd.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Tm(this,{idToken:e}),n=await fa._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Os(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=n==null?void 0:n._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===u)&&(h!=null&&h.user)&&(n=h.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(l){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Kt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Am(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Os(this.app))return Promise.reject(Al(this));const t=e?fi(e):null;return t&&Kt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Kt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Os(this.app)?Promise.reject(Al(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Os(this.app)?Promise.reject(Al(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_l(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await OE(this),t=new DE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pf("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await LE(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_l(e)||this._popupRedirectResolver;Kt(t,this,"argument-error"),this.redirectPersistenceManager=await Bd.create(this,[_l(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Kt(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,n,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Kt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(Os(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&yE(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ou(r){return fi(r)}class rv{constructor(e){this.auth=e,this.observer=null,this.addObserver=nI(t=>this.observer=t)}get next(){return Kt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ym={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $E(r){Ym=r}function GS(r){return Ym.loadJS(r)}function UE(){return Ym.recaptchaEnterpriseScript}function qE(){return Ym.gapiScript}function HE(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class GE{constructor(){this.enterprise=new KE}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class KE{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const JE="recaptcha-enterprise",KS="NO_RECAPTCHA";class YE{constructor(e){this.type=JE,this.auth=Ou(e)}async verify(e="verify",t=!1){async function n(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{kE(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new CE(h);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,l(d.siteKey)}}).catch(h=>{u(h)})})}function i(o,l,u){const h=window.grecaptcha;Qx(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(d=>{l(d)}).catch(()=>{l(KS)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GE().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{n(this.auth).then(u=>{if(!t&&Qx(window.grecaptcha))i(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=UE();h.length!==0&&(h+=u),GS(h).then(()=>{i(u,o,l)}).catch(d=>{l(d)})}}).catch(u=>{l(u)})})}}async function nv(r,e,t,n=!1,i=!1){const o=new YE(r);let l;if(i)l=KS;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,d=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function v1(r,e,t,n,i){var o;if((o=r._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await nv(r,e,t,t==="getOobCode");return n(r,l)}else return n(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await nv(r,e,t,t==="getOobCode");return n(r,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(r,e){const t=s5(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(_u(o,e??{}))return i;ya(i,"already-initialized")}return t.initialize({options:e})}function XE(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(_l);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function ZE(r,e,t){const n=Ou(r);Kt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,o=JS(e),{host:l,port:u}=e8(e),h=u===null?"":`:${u}`,d={url:`${o}//${l}${h}/`},g=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){Kt(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Kt(_u(d,n.config.emulator)&&_u(g,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=g,n.settings.appVerificationDisabledForTesting=!0,th(l)?(xS(`${o}//${l}${h}`),vS("Auth",!0)):t8()}function JS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function e8(r){const e=JS(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const o=i[1];return{host:o,port:iv(n.substr(o.length+1))}}else{const[o,l]=n.split(":");return{host:o,port:iv(l)}}}function iv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function t8(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Sl("not implemented")}_getIdTokenResponse(e){return Sl("not implemented")}_linkToIdToken(e,t){return Sl("not implemented")}_getReauthenticationResolver(e){return Sl("not implemented")}}async function r8(r,e){return Pc(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n8(r,e){return Lf(r,"POST","/v1/accounts:signInWithPassword",Rc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i8(r,e){return Lf(r,"POST","/v1/accounts:signInWithEmailLink",Rc(r,e))}async function o8(r,e){return Lf(r,"POST","/v1/accounts:signInWithEmailLink",Rc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf extends d5{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new pf(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new pf(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return v1(e,t,"signInWithPassword",n8);case"emailLink":return i8(e,{email:this._email,oobCode:this._password});default:ya(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return v1(e,n,"signUpPassword",r8);case"emailLink":return o8(e,{idToken:t,email:this._email,oobCode:this._password});default:ya(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ld(r,e){return Lf(r,"POST","/v1/accounts:signInWithIdp",Rc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8="http://localhost";class Au extends d5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Au(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ya("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...o}=t;if(!n||!i)return null;const l=new Au(n,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ld(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ld(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ld(e,t)}buildRequest(){const e={requestUri:s8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a8(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function l8(r){const e=$h(Uh(r)).link,t=e?$h(Uh(e)).deep_link_id:null,n=$h(Uh(r)).deep_link_id;return(n?$h(Uh(n)).link:null)||n||t||e||r}class h5{constructor(e){const t=$h(Uh(e)),n=t.apiKey??null,i=t.oobCode??null,o=a8(t.mode??null);Kt(n&&i&&o,"argument-error"),this.apiKey=n,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=l8(e);try{return new h5(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(){this.providerId=nh.PROVIDER_ID}static credential(e,t){return pf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=h5.parseLink(t);return Kt(n,"argument-error"),pf._fromEmailAndCode(e,n.code,n.tenantId)}}nh.PROVIDER_ID="password";nh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff extends YS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends Ff{constructor(){super("facebook.com")}static credential(e){return Au._fromParams({providerId:dc.PROVIDER_ID,signInMethod:dc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dc.credentialFromTaggedObject(e)}static credentialFromError(e){return dc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dc.credential(e.oauthAccessToken)}catch{return null}}}dc.FACEBOOK_SIGN_IN_METHOD="facebook.com";dc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends Ff{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Au._fromParams({providerId:hc.PROVIDER_ID,signInMethod:hc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return hc.credentialFromTaggedObject(e)}static credentialFromError(e){return hc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return hc.credential(t,n)}catch{return null}}}hc.GOOGLE_SIGN_IN_METHOD="google.com";hc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends Ff{constructor(){super("github.com")}static credential(e){return Au._fromParams({providerId:fc.PROVIDER_ID,signInMethod:fc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fc.credentialFromTaggedObject(e)}static credentialFromError(e){return fc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fc.credential(e.oauthAccessToken)}catch{return null}}}fc.GITHUB_SIGN_IN_METHOD="github.com";fc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends Ff{constructor(){super("twitter.com")}static credential(e,t){return Au._fromParams({providerId:pc.PROVIDER_ID,signInMethod:pc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return pc.credentialFromTaggedObject(e)}static credentialFromError(e){return pc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return pc.credential(t,n)}catch{return null}}}pc.TWITTER_SIGN_IN_METHOD="twitter.com";pc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c8(r,e){return Lf(r,"POST","/v1/accounts:signUp",Rc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const o=await fa._fromIdTokenResponse(e,n,i),l=ov(n);return new Cu({user:o,providerId:l,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=ov(n);return new Cu({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function ov(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm extends Rl{constructor(e,t,n,i){super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Cm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Cm(e,t,n,i)}}function QS(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Cm._fromErrorAndOperation(r,o,e,n):o})}async function u8(r,e,t=!1){const n=await ff(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Cu._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d8(r,e,t=!1){const{auth:n}=r;if(Os(n.app))return Promise.reject(Al(n));const i="reauthenticate";try{const o=await ff(r,QS(n,i,e,r),t);Kt(o.idToken,n,"internal-error");const l=c5(o.idToken);Kt(l,n,"internal-error");const{sub:u}=l;return Kt(r.uid===u,n,"user-mismatch"),Cu._forOperation(r,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ya(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XS(r,e,t=!1){if(Os(r.app))return Promise.reject(Al(r));const n="signIn",i=await QS(r,n,e),o=await Cu._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(o.user),o}async function h8(r,e){return XS(Ou(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZS(r){const e=Ou(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function f8(r,e,t){if(Os(r.app))return Promise.reject(Al(r));const n=Ou(r),l=await v1(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",c8).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&ZS(r),h}),u=await Cu._fromIdTokenResponse(n,"signIn",l);return await n._updateCurrentUser(u.user),u}function p8(r,e,t){return Os(r.app)?Promise.reject(Al(r)):h8(fi(r),nh.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&ZS(r),n})}function m8(r,e,t,n){return fi(r).onIdTokenChanged(e,t,n)}function g8(r,e,t){return fi(r).beforeAuthStateChanged(e,t)}function Qm(r,e,t,n){return fi(r).onAuthStateChanged(e,t,n)}function y8(r){return fi(r).signOut()}const km="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(km,"1"),this.storage.removeItem(km),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x8=1e3,v8=10;class t_ extends e_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,h)=>{this.notifyListeners(l,h)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(n);!t&&this.localCache[n]===l||this.notifyListeners(n,l)},o=this.storage.getItem(n);zE()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,v8):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},x8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}t_.type="LOCAL";const b8=t_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_ extends e_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}r_.type="SESSION";const n_=r_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new Xm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const u=Array.from(l).map(async d=>d(t.origin,o)),h=await w8(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((u,h)=>{const d=f5("",20);i.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},n);l={messageChannel:i,onMessage(b){const S=b;if(S.data.eventId===d)switch(S.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(S.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(){return window}function _8(r){qa().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(){return typeof qa().WorkerGlobalScope<"u"&&typeof qa().importScripts=="function"}async function T8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function A8(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function C8(){return i_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="firebaseLocalStorageDb",k8=1,Im="firebaseLocalStorage",s_="fbase_key";class zf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Zm(r,e){return r.transaction([Im],e?"readwrite":"readonly").objectStore(Im)}function I8(){const r=indexedDB.deleteDatabase(o_);return new zf(r).toPromise()}function b1(){const r=indexedDB.open(o_,k8);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(Im,{keyPath:s_})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(Im)?e(n):(n.close(),await I8(),e(await b1()))})})}async function sv(r,e,t){const n=Zm(r,!0).put({[s_]:e,value:t});return new zf(n).toPromise()}async function E8(r,e){const t=Zm(r,!1).get(e),n=await new zf(t).toPromise();return n===void 0?null:n.value}function av(r,e){const t=Zm(r,!0).delete(e);return new zf(t).toPromise()}const j8=800,R8=3;class a_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await b1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>R8)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return i_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xm._getInstance(C8()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await T8(),!this.activeServiceWorker)return;this.sender=new S8(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||A8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await b1();return await sv(e,km,"1"),await av(e,km),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>sv(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>E8(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>av(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Zm(i,!1).getAll();return new zf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),j8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}a_.type="LOCAL";const P8=a_;new Bf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N8(r,e){return e?_l(e):(Kt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5 extends d5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ld(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ld(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ld(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function B8(r){return XS(r.auth,new p5(r),r.bypassAuthState)}function L8(r){const{auth:e,user:t}=r;return Kt(t,e,"internal-error"),d8(t,new p5(r),r.bypassAuthState)}async function F8(r){const{auth:e,user:t}=r;return Kt(t,e,"internal-error"),u8(t,new p5(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e,t,n,i,o=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B8;case"linkViaPopup":case"linkViaRedirect":return F8;case"reauthViaPopup":case"reauthViaRedirect":return L8;default:ya(this.auth,"internal-error")}}resolve(e){Il(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Il(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8=new Bf(2e3,1e4);class Id extends l_{constructor(e,t,n,i,o){super(e,t,i,o),this.provider=n,this.authWindow=null,this.pollId=null,Id.currentPopupAction&&Id.currentPopupAction.cancel(),Id.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Kt(e,this.auth,"internal-error"),e}async onExecution(){Il(this.filter.length===1,"Popup operations only handle one event");const e=f5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ua(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ua(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Id.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ua(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,z8.get())};e()}}Id.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8="pendingRedirect",tm=new Map;class O8 extends l_{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=tm.get(this.auth._key());if(!e){try{const n=await M8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}tm.set(this.auth._key(),e)}return this.bypassAuthState||tm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function M8(r,e){const t=$8(e),n=W8(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function D8(r,e){tm.set(r._key(),e)}function W8(r){return _l(r._redirectPersistence)}function $8(r){return em(V8,r.config.apiKey,r.name)}async function U8(r,e,t=!1){if(Os(r.app))return Promise.reject(Al(r));const n=Ou(r),i=N8(n,e),l=await new O8(n,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await n._persistUserIfCurrent(l.user),await n._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8=600*1e3;class H8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!G8(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!c_(e)){const i=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ua(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=q8&&this.cachedEventUids.clear(),this.cachedEventUids.has(lv(e))}saveEventToCache(e){this.cachedEventUids.add(lv(e)),this.lastProcessedEventTime=Date.now()}}function lv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function c_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function G8(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return c_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K8(r,e={}){return Pc(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y8=/^https?/;async function Q8(r){if(r.config.emulator)return;const{authorizedDomains:e}=await K8(r);for(const t of e)try{if(X8(t))return}catch{}ya(r,"unauthorized-domain")}function X8(r){const e=y1(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const l=new URL(r);return l.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===n}if(!Y8.test(t))return!1;if(J8.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8=new Bf(3e4,6e4);function cv(){const r=qa().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function e7(r){return new Promise((e,t)=>{var i,o,l;function n(){cv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cv(),t(Ua(r,"network-request-failed"))},timeout:Z8.get()})}if((o=(i=qa().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=qa().gapi)!=null&&l.load)n();else{const u=HE("iframefcb");return qa()[u]=()=>{gapi.load?n():t(Ua(r,"network-request-failed"))},GS(`${qE()}?onload=${u}`).catch(h=>t(h))}}).catch(e=>{throw rm=null,e})}let rm=null;function t7(r){return rm=rm||e7(r),rm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7=new Bf(5e3,15e3),n7="__/auth/iframe",i7="emulator/auth/iframe",o7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a7(r){const e=r.config;Kt(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?l5(e,i7):`https://${r.config.authDomain}/${n7}`,n={apiKey:e.apiKey,appName:r.name,v:rh},i=s7.get(r.config.apiHost);i&&(n.eid=i);const o=r._getFrameworks();return o.length&&(n.fw=o.join(",")),`${t}?${Nf(n).slice(1)}`}async function l7(r){const e=await t7(r),t=qa().gapi;return Kt(t,r,"internal-error"),e.open({where:document.body,url:a7(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o7,dontclear:!0},n=>new Promise(async(i,o)=>{await n.restyle({setHideOnLeave:!1});const l=Ua(r,"network-request-failed"),u=qa().setTimeout(()=>{o(l)},r7.get());function h(){qa().clearTimeout(u),i(n)}n.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u7=500,d7=600,h7="_blank",f7="http://localhost";class uv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function p7(r,e,t,n=u7,i=d7){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const h={...c7,width:n.toString(),height:i.toString(),top:o,left:l},d=hi().toLowerCase();t&&(u=MS(d)?h7:t),VS(d)&&(e=e||f7,h.scrollbars="yes");const g=Object.entries(h).reduce((S,[v,N])=>`${S}${v}=${N},`,"");if(FE(d)&&u!=="_self")return m7(e||"",u),new uv(null);const b=window.open(e||"",u,g);Kt(b,r,"popup-blocked");try{b.focus()}catch{}return new uv(b)}function m7(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7="__/auth/handler",y7="emulator/auth/handler",x7=encodeURIComponent("fac");async function dv(r,e,t,n,i,o){Kt(r.config.authDomain,r,"auth-domain-config-required"),Kt(r.config.apiKey,r,"invalid-api-key");const l={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:rh,eventId:i};if(e instanceof YS){e.setDefaultLanguage(r.languageCode),l.providerId=e.providerId||"",rI(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,b]of Object.entries({}))l[g]=b}if(e instanceof Ff){const g=e.getScopes().filter(b=>b!=="");g.length>0&&(l.scopes=g.join(","))}r.tenantId&&(l.tid=r.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await r._getAppCheckToken(),d=h?`#${x7}=${encodeURIComponent(h)}`:"";return`${v7(r)}?${Nf(u).slice(1)}${d}`}function v7({config:r}){return r.emulator?l5(r,y7):`https://${r.authDomain}/${g7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="webStorageSupport";class b7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=n_,this._completeRedirectFn=U8,this._overrideRedirectResult=D8}async _openPopup(e,t,n,i){var l;Il((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await dv(e,t,n,y1(),i);return p7(e,o,f5())}async _openRedirect(e,t,n,i){await this._originValidation(e);const o=await dv(e,t,n,y1(),i);return _8(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Il(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await l7(e),n=new H8(e);return t.register("authEvent",i=>(Kt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($g,{type:$g},i=>{var l;const o=(l=i==null?void 0:i[0])==null?void 0:l[$g];o!==void 0&&t(!!o),ya(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Q8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qS()||OS()||u5()}}const w7=b7;var hv="@firebase/auth",fv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Kt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _7(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function T7(r){zd(new Tu("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=n.options;Kt(l&&!l.includes(":"),"invalid-api-key",{appName:n.name});const h={apiKey:l,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HS(r)},d=new WE(n,i,o,h);return XE(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),zd(new Tu("auth-internal",e=>{const t=Ou(e.getProvider("auth").getImmediate());return(n=>new S7(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bc(hv,fv,_7(r)),bc(hv,fv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7=300,C7=yS("authIdTokenMaxAge")||A7;let pv=null;const k7=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>C7)return;const i=t==null?void 0:t.token;pv!==i&&(pv=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function I7(r=kS()){const e=s5(r,"auth");if(e.isInitialized())return e.getImmediate();const t=QE(r,{popupRedirectResolver:w7,persistence:[P8,b8,n_]}),n=yS("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const l=k7(o.toString());g8(t,l,()=>l(t.currentUser)),m8(t,u=>l(u))}}const i=mS("auth");return i&&ZE(t,`http://${i}`),t}function E7(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}$E({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const o=Ua("internal-error");o.customData=i,t(o)},n.type="text/javascript",n.charset="UTF-8",E7().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});T7("Browser");var mv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wc,u_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,k){function A(){}A.prototype=k.prototype,V.F=k.prototype,V.prototype=new A,V.prototype.constructor=V,V.D=function(O,I,w){for(var B=Array(arguments.length-2),D=2;D<arguments.length;D++)B[D-2]=arguments[D];return k.prototype[I].apply(O,B)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(V,k,A){A||(A=0);const O=Array(16);if(typeof k=="string")for(var I=0;I<16;++I)O[I]=k.charCodeAt(A++)|k.charCodeAt(A++)<<8|k.charCodeAt(A++)<<16|k.charCodeAt(A++)<<24;else for(I=0;I<16;++I)O[I]=k[A++]|k[A++]<<8|k[A++]<<16|k[A++]<<24;k=V.g[0],A=V.g[1],I=V.g[2];let w=V.g[3],B;B=k+(w^A&(I^w))+O[0]+3614090360&4294967295,k=A+(B<<7&4294967295|B>>>25),B=w+(I^k&(A^I))+O[1]+3905402710&4294967295,w=k+(B<<12&4294967295|B>>>20),B=I+(A^w&(k^A))+O[2]+606105819&4294967295,I=w+(B<<17&4294967295|B>>>15),B=A+(k^I&(w^k))+O[3]+3250441966&4294967295,A=I+(B<<22&4294967295|B>>>10),B=k+(w^A&(I^w))+O[4]+4118548399&4294967295,k=A+(B<<7&4294967295|B>>>25),B=w+(I^k&(A^I))+O[5]+1200080426&4294967295,w=k+(B<<12&4294967295|B>>>20),B=I+(A^w&(k^A))+O[6]+2821735955&4294967295,I=w+(B<<17&4294967295|B>>>15),B=A+(k^I&(w^k))+O[7]+4249261313&4294967295,A=I+(B<<22&4294967295|B>>>10),B=k+(w^A&(I^w))+O[8]+1770035416&4294967295,k=A+(B<<7&4294967295|B>>>25),B=w+(I^k&(A^I))+O[9]+2336552879&4294967295,w=k+(B<<12&4294967295|B>>>20),B=I+(A^w&(k^A))+O[10]+4294925233&4294967295,I=w+(B<<17&4294967295|B>>>15),B=A+(k^I&(w^k))+O[11]+2304563134&4294967295,A=I+(B<<22&4294967295|B>>>10),B=k+(w^A&(I^w))+O[12]+1804603682&4294967295,k=A+(B<<7&4294967295|B>>>25),B=w+(I^k&(A^I))+O[13]+4254626195&4294967295,w=k+(B<<12&4294967295|B>>>20),B=I+(A^w&(k^A))+O[14]+2792965006&4294967295,I=w+(B<<17&4294967295|B>>>15),B=A+(k^I&(w^k))+O[15]+1236535329&4294967295,A=I+(B<<22&4294967295|B>>>10),B=k+(I^w&(A^I))+O[1]+4129170786&4294967295,k=A+(B<<5&4294967295|B>>>27),B=w+(A^I&(k^A))+O[6]+3225465664&4294967295,w=k+(B<<9&4294967295|B>>>23),B=I+(k^A&(w^k))+O[11]+643717713&4294967295,I=w+(B<<14&4294967295|B>>>18),B=A+(w^k&(I^w))+O[0]+3921069994&4294967295,A=I+(B<<20&4294967295|B>>>12),B=k+(I^w&(A^I))+O[5]+3593408605&4294967295,k=A+(B<<5&4294967295|B>>>27),B=w+(A^I&(k^A))+O[10]+38016083&4294967295,w=k+(B<<9&4294967295|B>>>23),B=I+(k^A&(w^k))+O[15]+3634488961&4294967295,I=w+(B<<14&4294967295|B>>>18),B=A+(w^k&(I^w))+O[4]+3889429448&4294967295,A=I+(B<<20&4294967295|B>>>12),B=k+(I^w&(A^I))+O[9]+568446438&4294967295,k=A+(B<<5&4294967295|B>>>27),B=w+(A^I&(k^A))+O[14]+3275163606&4294967295,w=k+(B<<9&4294967295|B>>>23),B=I+(k^A&(w^k))+O[3]+4107603335&4294967295,I=w+(B<<14&4294967295|B>>>18),B=A+(w^k&(I^w))+O[8]+1163531501&4294967295,A=I+(B<<20&4294967295|B>>>12),B=k+(I^w&(A^I))+O[13]+2850285829&4294967295,k=A+(B<<5&4294967295|B>>>27),B=w+(A^I&(k^A))+O[2]+4243563512&4294967295,w=k+(B<<9&4294967295|B>>>23),B=I+(k^A&(w^k))+O[7]+1735328473&4294967295,I=w+(B<<14&4294967295|B>>>18),B=A+(w^k&(I^w))+O[12]+2368359562&4294967295,A=I+(B<<20&4294967295|B>>>12),B=k+(A^I^w)+O[5]+4294588738&4294967295,k=A+(B<<4&4294967295|B>>>28),B=w+(k^A^I)+O[8]+2272392833&4294967295,w=k+(B<<11&4294967295|B>>>21),B=I+(w^k^A)+O[11]+1839030562&4294967295,I=w+(B<<16&4294967295|B>>>16),B=A+(I^w^k)+O[14]+4259657740&4294967295,A=I+(B<<23&4294967295|B>>>9),B=k+(A^I^w)+O[1]+2763975236&4294967295,k=A+(B<<4&4294967295|B>>>28),B=w+(k^A^I)+O[4]+1272893353&4294967295,w=k+(B<<11&4294967295|B>>>21),B=I+(w^k^A)+O[7]+4139469664&4294967295,I=w+(B<<16&4294967295|B>>>16),B=A+(I^w^k)+O[10]+3200236656&4294967295,A=I+(B<<23&4294967295|B>>>9),B=k+(A^I^w)+O[13]+681279174&4294967295,k=A+(B<<4&4294967295|B>>>28),B=w+(k^A^I)+O[0]+3936430074&4294967295,w=k+(B<<11&4294967295|B>>>21),B=I+(w^k^A)+O[3]+3572445317&4294967295,I=w+(B<<16&4294967295|B>>>16),B=A+(I^w^k)+O[6]+76029189&4294967295,A=I+(B<<23&4294967295|B>>>9),B=k+(A^I^w)+O[9]+3654602809&4294967295,k=A+(B<<4&4294967295|B>>>28),B=w+(k^A^I)+O[12]+3873151461&4294967295,w=k+(B<<11&4294967295|B>>>21),B=I+(w^k^A)+O[15]+530742520&4294967295,I=w+(B<<16&4294967295|B>>>16),B=A+(I^w^k)+O[2]+3299628645&4294967295,A=I+(B<<23&4294967295|B>>>9),B=k+(I^(A|~w))+O[0]+4096336452&4294967295,k=A+(B<<6&4294967295|B>>>26),B=w+(A^(k|~I))+O[7]+1126891415&4294967295,w=k+(B<<10&4294967295|B>>>22),B=I+(k^(w|~A))+O[14]+2878612391&4294967295,I=w+(B<<15&4294967295|B>>>17),B=A+(w^(I|~k))+O[5]+4237533241&4294967295,A=I+(B<<21&4294967295|B>>>11),B=k+(I^(A|~w))+O[12]+1700485571&4294967295,k=A+(B<<6&4294967295|B>>>26),B=w+(A^(k|~I))+O[3]+2399980690&4294967295,w=k+(B<<10&4294967295|B>>>22),B=I+(k^(w|~A))+O[10]+4293915773&4294967295,I=w+(B<<15&4294967295|B>>>17),B=A+(w^(I|~k))+O[1]+2240044497&4294967295,A=I+(B<<21&4294967295|B>>>11),B=k+(I^(A|~w))+O[8]+1873313359&4294967295,k=A+(B<<6&4294967295|B>>>26),B=w+(A^(k|~I))+O[15]+4264355552&4294967295,w=k+(B<<10&4294967295|B>>>22),B=I+(k^(w|~A))+O[6]+2734768916&4294967295,I=w+(B<<15&4294967295|B>>>17),B=A+(w^(I|~k))+O[13]+1309151649&4294967295,A=I+(B<<21&4294967295|B>>>11),B=k+(I^(A|~w))+O[4]+4149444226&4294967295,k=A+(B<<6&4294967295|B>>>26),B=w+(A^(k|~I))+O[11]+3174756917&4294967295,w=k+(B<<10&4294967295|B>>>22),B=I+(k^(w|~A))+O[2]+718787259&4294967295,I=w+(B<<15&4294967295|B>>>17),B=A+(w^(I|~k))+O[9]+3951481745&4294967295,V.g[0]=V.g[0]+k&4294967295,V.g[1]=V.g[1]+(I+(B<<21&4294967295|B>>>11))&4294967295,V.g[2]=V.g[2]+I&4294967295,V.g[3]=V.g[3]+w&4294967295}n.prototype.v=function(V,k){k===void 0&&(k=V.length);const A=k-this.blockSize,O=this.C;let I=this.h,w=0;for(;w<k;){if(I==0)for(;w<=A;)i(this,V,w),w+=this.blockSize;if(typeof V=="string"){for(;w<k;)if(O[I++]=V.charCodeAt(w++),I==this.blockSize){i(this,O),I=0;break}}else for(;w<k;)if(O[I++]=V[w++],I==this.blockSize){i(this,O),I=0;break}}this.h=I,this.o+=k},n.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var k=1;k<V.length-8;++k)V[k]=0;k=this.o*8;for(var A=V.length-8;A<V.length;++A)V[A]=k&255,k/=256;for(this.v(V),V=Array(16),k=0,A=0;A<4;++A)for(let O=0;O<32;O+=8)V[k++]=this.g[A]>>>O&255;return V};function o(V,k){var A=u;return Object.prototype.hasOwnProperty.call(A,V)?A[V]:A[V]=k(V)}function l(V,k){this.h=k;const A=[];let O=!0;for(let I=V.length-1;I>=0;I--){const w=V[I]|0;O&&w==k||(A[I]=w,O=!1)}this.g=A}var u={};function h(V){return-128<=V&&V<128?o(V,function(k){return new l([k|0],k<0?-1:0)}):new l([V|0],V<0?-1:0)}function d(V){if(isNaN(V)||!isFinite(V))return b;if(V<0)return L(d(-V));const k=[];let A=1;for(let O=0;V>=A;O++)k[O]=V/A|0,A*=4294967296;return new l(k,0)}function g(V,k){if(V.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(V.charAt(0)=="-")return L(g(V.substring(1),k));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=d(Math.pow(k,8));let O=b;for(let w=0;w<V.length;w+=8){var I=Math.min(8,V.length-w);const B=parseInt(V.substring(w,w+I),k);I<8?(I=d(Math.pow(k,I)),O=O.j(I).add(d(B))):(O=O.j(A),O=O.add(d(B)))}return O}var b=h(0),S=h(1),v=h(16777216);r=l.prototype,r.m=function(){if(E(this))return-L(this).m();let V=0,k=1;for(let A=0;A<this.g.length;A++){const O=this.i(A);V+=(O>=0?O:4294967296+O)*k,k*=4294967296}return V},r.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(N(this))return"0";if(E(this))return"-"+L(this).toString(V);const k=d(Math.pow(V,6));var A=this;let O="";for(;;){const I=F(A,k).g;A=C(A,I.j(k));let w=((A.g.length>0?A.g[0]:A.h)>>>0).toString(V);if(A=I,N(A))return w+O;for(;w.length<6;)w="0"+w;O=w+O}},r.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function N(V){if(V.h!=0)return!1;for(let k=0;k<V.g.length;k++)if(V.g[k]!=0)return!1;return!0}function E(V){return V.h==-1}r.l=function(V){return V=C(this,V),E(V)?-1:N(V)?0:1};function L(V){const k=V.g.length,A=[];for(let O=0;O<k;O++)A[O]=~V.g[O];return new l(A,~V.h).add(S)}r.abs=function(){return E(this)?L(this):this},r.add=function(V){const k=Math.max(this.g.length,V.g.length),A=[];let O=0;for(let I=0;I<=k;I++){let w=O+(this.i(I)&65535)+(V.i(I)&65535),B=(w>>>16)+(this.i(I)>>>16)+(V.i(I)>>>16);O=B>>>16,w&=65535,B&=65535,A[I]=B<<16|w}return new l(A,A[A.length-1]&-2147483648?-1:0)};function C(V,k){return V.add(L(k))}r.j=function(V){if(N(this)||N(V))return b;if(E(this))return E(V)?L(this).j(L(V)):L(L(this).j(V));if(E(V))return L(this.j(L(V)));if(this.l(v)<0&&V.l(v)<0)return d(this.m()*V.m());const k=this.g.length+V.g.length,A=[];for(var O=0;O<2*k;O++)A[O]=0;for(O=0;O<this.g.length;O++)for(let I=0;I<V.g.length;I++){const w=this.i(O)>>>16,B=this.i(O)&65535,D=V.i(I)>>>16,q=V.i(I)&65535;A[2*O+2*I]+=B*q,M(A,2*O+2*I),A[2*O+2*I+1]+=w*q,M(A,2*O+2*I+1),A[2*O+2*I+1]+=B*D,M(A,2*O+2*I+1),A[2*O+2*I+2]+=w*D,M(A,2*O+2*I+2)}for(V=0;V<k;V++)A[V]=A[2*V+1]<<16|A[2*V];for(V=k;V<2*k;V++)A[V]=0;return new l(A,0)};function M(V,k){for(;(V[k]&65535)!=V[k];)V[k+1]+=V[k]>>>16,V[k]&=65535,k++}function $(V,k){this.g=V,this.h=k}function F(V,k){if(N(k))throw Error("division by zero");if(N(V))return new $(b,b);if(E(V))return k=F(L(V),k),new $(L(k.g),L(k.h));if(E(k))return k=F(V,L(k)),new $(L(k.g),k.h);if(V.g.length>30){if(E(V)||E(k))throw Error("slowDivide_ only works with positive integers.");for(var A=S,O=k;O.l(V)<=0;)A=ne(A),O=ne(O);var I=ue(A,1),w=ue(O,1);for(O=ue(O,2),A=ue(A,2);!N(O);){var B=w.add(O);B.l(V)<=0&&(I=I.add(A),w=B),O=ue(O,1),A=ue(A,1)}return k=C(V,I.j(k)),new $(I,k)}for(I=b;V.l(k)>=0;){for(A=Math.max(1,Math.floor(V.m()/k.m())),O=Math.ceil(Math.log(A)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),w=d(A),B=w.j(k);E(B)||B.l(V)>0;)A-=O,w=d(A),B=w.j(k);N(w)&&(w=S),I=I.add(w),V=C(V,B)}return new $(I,V)}r.B=function(V){return F(this,V).h},r.and=function(V){const k=Math.max(this.g.length,V.g.length),A=[];for(let O=0;O<k;O++)A[O]=this.i(O)&V.i(O);return new l(A,this.h&V.h)},r.or=function(V){const k=Math.max(this.g.length,V.g.length),A=[];for(let O=0;O<k;O++)A[O]=this.i(O)|V.i(O);return new l(A,this.h|V.h)},r.xor=function(V){const k=Math.max(this.g.length,V.g.length),A=[];for(let O=0;O<k;O++)A[O]=this.i(O)^V.i(O);return new l(A,this.h^V.h)};function ne(V){const k=V.g.length+1,A=[];for(let O=0;O<k;O++)A[O]=V.i(O)<<1|V.i(O-1)>>>31;return new l(A,V.h)}function ue(V,k){const A=k>>5;k%=32;const O=V.g.length-A,I=[];for(let w=0;w<O;w++)I[w]=k>0?V.i(w+A)>>>k|V.i(w+A+1)<<32-k:V.i(w+A);return new l(I,V.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,u_=n,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=g,wc=l}).apply(typeof mv<"u"?mv:typeof self<"u"?self:typeof window<"u"?window:{});var Op=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var d_,qh,h_,nm,w1,f_,p_,m_;(function(){var r,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Op=="object"&&Op];for(var R=0;R<m.length;++R){var U=m[R];if(U&&U.Math==Math)return U}throw Error("Cannot find global object")}var n=t(this);function i(m,R){if(R)e:{var U=n;m=m.split(".");for(var ee=0;ee<m.length-1;ee++){var ke=m[ee];if(!(ke in U))break e;U=U[ke]}m=m[m.length-1],ee=U[m],R=R(ee),R!=ee&&R!=null&&e(U,m,{configurable:!0,writable:!0,value:R})}}i("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(m){return m||function(R){var U=[],ee;for(ee in R)Object.prototype.hasOwnProperty.call(R,ee)&&U.push([ee,R[ee]]);return U}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(m){var R=typeof m;return R=="object"&&m!=null||R=="function"}function h(m,R,U){return m.call.apply(m.bind,arguments)}function d(m,R,U){return d=h,d.apply(null,arguments)}function g(m,R){var U=Array.prototype.slice.call(arguments,1);return function(){var ee=U.slice();return ee.push.apply(ee,arguments),m.apply(this,ee)}}function b(m,R){function U(){}U.prototype=R.prototype,m.Z=R.prototype,m.prototype=new U,m.prototype.constructor=m,m.Ob=function(ee,ke,Be){for(var tt=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)tt[Dt-2]=arguments[Dt];return R.prototype[ke].apply(ee,tt)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function v(m){const R=m.length;if(R>0){const U=Array(R);for(let ee=0;ee<R;ee++)U[ee]=m[ee];return U}return[]}function N(m,R){for(let ee=1;ee<arguments.length;ee++){const ke=arguments[ee];var U=typeof ke;if(U=U!="object"?U:ke?Array.isArray(ke)?"array":U:"null",U=="array"||U=="object"&&typeof ke.length=="number"){U=m.length||0;const Be=ke.length||0;m.length=U+Be;for(let tt=0;tt<Be;tt++)m[U+tt]=ke[tt]}else m.push(ke)}}class E{constructor(R,U){this.i=R,this.j=U,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function L(m){l.setTimeout(()=>{throw m},0)}function C(){var m=V;let R=null;return m.g&&(R=m.g,m.g=m.g.next,m.g||(m.h=null),R.next=null),R}class M{constructor(){this.h=this.g=null}add(R,U){const ee=$.get();ee.set(R,U),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var $=new E(()=>new F,m=>m.reset());class F{constructor(){this.next=this.g=this.h=null}set(R,U){this.h=R,this.g=U,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,ue=!1,V=new M,k=()=>{const m=Promise.resolve(void 0);ne=()=>{m.then(A)}};function A(){for(var m;m=C();){try{m.h.call(m.g)}catch(U){L(U)}var R=$;R.j(m),R.h<100&&(R.h++,m.next=R.g,R.g=m)}ue=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(m,R){this.type=m,this.g=this.target=R,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var w=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,R=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const U=()=>{};l.addEventListener("test",U,R),l.removeEventListener("test",U,R)}catch{}return m})();function B(m){return/^[\s\xa0]*$/.test(m)}function D(m,R){I.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,R)}b(D,I),D.prototype.init=function(m,R){const U=this.type=m.type,ee=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=R,R=m.relatedTarget,R||(U=="mouseover"?R=m.fromElement:U=="mouseout"&&(R=m.toElement)),this.relatedTarget=R,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&D.Z.h.call(this)},D.prototype.h=function(){D.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var q="closure_listenable_"+(Math.random()*1e6|0),oe=0;function se(m,R,U,ee,ke){this.listener=m,this.proxy=null,this.src=R,this.type=U,this.capture=!!ee,this.ha=ke,this.key=++oe,this.da=this.fa=!1}function ie(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ve(m,R,U){for(const ee in m)R.call(U,m[ee],ee,m)}function be(m,R){for(const U in m)R.call(void 0,m[U],U,m)}function Z(m){const R={};for(const U in m)R[U]=m[U];return R}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(m,R){let U,ee;for(let ke=1;ke<arguments.length;ke++){ee=arguments[ke];for(U in ee)m[U]=ee[U];for(let Be=0;Be<W.length;Be++)U=W[Be],Object.prototype.hasOwnProperty.call(ee,U)&&(m[U]=ee[U])}}function re(m){this.src=m,this.g={},this.h=0}re.prototype.add=function(m,R,U,ee,ke){const Be=m.toString();m=this.g[Be],m||(m=this.g[Be]=[],this.h++);const tt=ge(m,R,ee,ke);return tt>-1?(R=m[tt],U||(R.fa=!1)):(R=new se(R,this.src,Be,!!ee,ke),R.fa=U,m.push(R)),R};function fe(m,R){const U=R.type;if(U in m.g){var ee=m.g[U],ke=Array.prototype.indexOf.call(ee,R,void 0),Be;(Be=ke>=0)&&Array.prototype.splice.call(ee,ke,1),Be&&(ie(R),m.g[U].length==0&&(delete m.g[U],m.h--))}}function ge(m,R,U,ee){for(let ke=0;ke<m.length;++ke){const Be=m[ke];if(!Be.da&&Be.listener==R&&Be.capture==!!U&&Be.ha==ee)return ke}return-1}var _e="closure_lm_"+(Math.random()*1e6|0),he={};function xe(m,R,U,ee,ke){if(Array.isArray(R)){for(let Be=0;Be<R.length;Be++)xe(m,R[Be],U,ee,ke);return null}return U=wt(U),m&&m[q]?m.J(R,U,u(ee)?!!ee.capture:!1,ke):Pe(m,R,U,!1,ee,ke)}function Pe(m,R,U,ee,ke,Be){if(!R)throw Error("Invalid event type");const tt=u(ke)?!!ke.capture:!!ke;let Dt=Lt(m);if(Dt||(m[_e]=Dt=new re(m)),U=Dt.add(R,U,ee,tt,Be),U.proxy)return U;if(ee=Ue(),U.proxy=ee,ee.src=m,ee.listener=U,m.addEventListener)w||(ke=tt),ke===void 0&&(ke=!1),m.addEventListener(R.toString(),ee,ke);else if(m.attachEvent)m.attachEvent(ze(R.toString()),ee);else if(m.addListener&&m.removeListener)m.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return U}function Ue(){function m(U){return R.call(m.src,m.listener,U)}const R=de;return m}function Xe(m,R,U,ee,ke){if(Array.isArray(R))for(var Be=0;Be<R.length;Be++)Xe(m,R[Be],U,ee,ke);else ee=u(ee)?!!ee.capture:!!ee,U=wt(U),m&&m[q]?(m=m.i,Be=String(R).toString(),Be in m.g&&(R=m.g[Be],U=ge(R,U,ee,ke),U>-1&&(ie(R[U]),Array.prototype.splice.call(R,U,1),R.length==0&&(delete m.g[Be],m.h--)))):m&&(m=Lt(m))&&(R=m.g[R.toString()],m=-1,R&&(m=ge(R,U,ee,ke)),(U=m>-1?R[m]:null)&&Ze(U))}function Ze(m){if(typeof m!="number"&&m&&!m.da){var R=m.src;if(R&&R[q])fe(R.i,m);else{var U=m.type,ee=m.proxy;R.removeEventListener?R.removeEventListener(U,ee,m.capture):R.detachEvent?R.detachEvent(ze(U),ee):R.addListener&&R.removeListener&&R.removeListener(ee),(U=Lt(R))?(fe(U,m),U.h==0&&(U.src=null,R[_e]=null)):ie(m)}}}function ze(m){return m in he?he[m]:he[m]="on"+m}function de(m,R){if(m.da)m=!0;else{R=new D(R,this);const U=m.listener,ee=m.ha||m.src;m.fa&&Ze(m),m=U.call(ee,R)}return m}function Lt(m){return m=m[_e],m instanceof re?m:null}var Et="__closure_events_fn_"+(Math.random()*1e9>>>0);function wt(m){return typeof m=="function"?m:(m[Et]||(m[Et]=function(R){return m.handleEvent(R)}),m[Et])}function He(){O.call(this),this.i=new re(this),this.M=this,this.G=null}b(He,O),He.prototype[q]=!0,He.prototype.removeEventListener=function(m,R,U,ee){Xe(this,m,R,U,ee)};function ot(m,R){var U,ee=m.G;if(ee)for(U=[];ee;ee=ee.G)U.push(ee);if(m=m.M,ee=R.type||R,typeof R=="string")R=new I(R,m);else if(R instanceof I)R.target=R.target||m;else{var ke=R;R=new I(ee,m),J(R,ke)}ke=!0;let Be,tt;if(U)for(tt=U.length-1;tt>=0;tt--)Be=R.g=U[tt],ke=rt(Be,ee,!0,R)&&ke;if(Be=R.g=m,ke=rt(Be,ee,!0,R)&&ke,ke=rt(Be,ee,!1,R)&&ke,U)for(tt=0;tt<U.length;tt++)Be=R.g=U[tt],ke=rt(Be,ee,!1,R)&&ke}He.prototype.N=function(){if(He.Z.N.call(this),this.i){var m=this.i;for(const R in m.g){const U=m.g[R];for(let ee=0;ee<U.length;ee++)ie(U[ee]);delete m.g[R],m.h--}}this.G=null},He.prototype.J=function(m,R,U,ee){return this.i.add(String(m),R,!1,U,ee)},He.prototype.K=function(m,R,U,ee){return this.i.add(String(m),R,!0,U,ee)};function rt(m,R,U,ee){if(R=m.i.g[String(R)],!R)return!0;R=R.concat();let ke=!0;for(let Be=0;Be<R.length;++Be){const tt=R[Be];if(tt&&!tt.da&&tt.capture==U){const Dt=tt.listener,Dr=tt.ha||tt.src;tt.fa&&fe(m.i,tt),ke=Dt.call(Dr,ee)!==!1&&ke}}return ke&&!ee.defaultPrevented}function Jt(m,R){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=d(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:l.setTimeout(m,R||0)}function _t(m){m.g=Jt(()=>{m.g=null,m.i&&(m.i=!1,_t(m))},m.l);const R=m.h;m.h=null,m.m.apply(null,R)}class mr extends O{constructor(R,U){super(),this.m=R,this.l=U,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ft(m){O.call(this),this.h=m,this.g={}}b(Ft,O);var qt=[];function vr(m){ve(m.g,function(R,U){this.g.hasOwnProperty(U)&&Ze(R)},m),m.g={}}Ft.prototype.N=function(){Ft.Z.N.call(this),vr(this)},Ft.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ot=l.JSON.stringify,Tt=l.JSON.parse,jt=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function pt(){}function Ir(){}var ir={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ht(){I.call(this,"d")}b(ht,I);function Ht(){I.call(this,"c")}b(Ht,I);var sr={},It=null;function tr(){return It=It||new He}sr.Ia="serverreachability";function Wt(m){I.call(this,sr.Ia,m)}b(Wt,I);function Er(m){const R=tr();ot(R,new Wt(R))}sr.STAT_EVENT="statevent";function zr(m,R){I.call(this,sr.STAT_EVENT,m),this.stat=R}b(zr,I);function $t(m){const R=tr();ot(R,new zr(R,m))}sr.Ja="timingevent";function Mt(m,R){I.call(this,sr.Ja,m),this.size=R}b(Mt,I);function ar(m,R){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},R)}function Hi(){this.g=!0}Hi.prototype.ua=function(){this.g=!1};function zn(m,R,U,ee,ke,Be){m.info(function(){if(m.g)if(Be){var tt="",Dt=Be.split("&");for(let dr=0;dr<Dt.length;dr++){var Dr=Dt[dr].split("=");if(Dr.length>1){const Xr=Dr[0];Dr=Dr[1];const $n=Xr.split("_");tt=$n.length>=2&&$n[1]=="type"?tt+(Xr+"="+Dr+"&"):tt+(Xr+"=redacted&")}}}else tt=null;else tt=Be;return"XMLHTTP REQ ("+ee+") [attempt "+ke+"]: "+R+`
`+U+`
`+tt})}function Ro(m,R,U,ee,ke,Be,tt){m.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+ke+"]: "+R+`
`+U+`
`+Be+" "+tt})}function Vn(m,R,U,ee){m.info(function(){return"XMLHTTP TEXT ("+R+"): "+Pi(m,U)+(ee?" "+ee:"")})}function Rt(m,R){m.info(function(){return"TIMEOUT: "+R})}Hi.prototype.info=function(){};function Pi(m,R){if(!m.g)return R;if(!R)return null;try{const Be=JSON.parse(R);if(Be){for(m=0;m<Be.length;m++)if(Array.isArray(Be[m])){var U=Be[m];if(!(U.length<2)){var ee=U[1];if(Array.isArray(ee)&&!(ee.length<1)){var ke=ee[0];if(ke!="noop"&&ke!="stop"&&ke!="close")for(let tt=1;tt<ee.length;tt++)ee[tt]=""}}}}return Ot(Be)}catch{return R}}var mi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},On={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ni;function Cr(){}b(Cr,pt),Cr.prototype.g=function(){return new XMLHttpRequest},Ni=new Cr;function Vr(m){return encodeURIComponent(String(m))}function un(m){var R=1;m=m.split(":");const U=[];for(;R>0&&m.length;)U.push(m.shift()),R--;return m.length&&U.push(m.join(":")),U}function Yn(m,R,U,ee){this.j=m,this.i=R,this.l=U,this.S=ee||1,this.V=new Ft(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Yo}function Yo(){this.i=null,this.g="",this.h=!1}var Gi={},Ki={};function bn(m,R,U){m.M=1,m.A=Mn(wr(R)),m.u=U,m.R=!0,Bi(m,null)}function Bi(m,R){m.F=Date.now(),go(m),m.B=wr(m.A);var U=m.B,ee=m.S;Array.isArray(ee)||(ee=[String(ee)]),el(U.i,"t",ee),m.C=0,U=m.j.L,m.h=new Yo,m.g=lt(m.j,U?R:null,!m.u),m.P>0&&(m.O=new mr(d(m.Y,m,m.g),m.P)),R=m.V,U=m.g,ee=m.ba;var ke="readystatechange";Array.isArray(ke)||(ke&&(qt[0]=ke.toString()),ke=qt);for(let Be=0;Be<ke.length;Be++){const tt=xe(U,ke[Be],ee||R.handleEvent,!1,R.h||R);if(!tt)break;R.g[tt.key]=tt}R=m.J?Z(m.J):{},m.u?(m.v||(m.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,R)):(m.v="GET",m.g.ea(m.B,m.v,null,R)),Er(),zn(m.i,m.v,m.B,m.l,m.S,m.u)}Yn.prototype.ba=function(m){m=m.target;const R=this.O;R&&Qi(m)==3?R.j():this.Y(m)},Yn.prototype.Y=function(m){try{if(m==this.g)e:{const Dt=Qi(this.g),Dr=this.g.ya(),dr=this.g.ca();if(!(Dt<3)&&(Dt!=3||this.g&&(this.h.h||this.g.la()||Aa(this.g)))){this.K||Dt!=4||Dr==7||(Dr==8||dr<=0?Er(3):Er(2)),Qo(this);var R=this.g.ca();this.X=R;var U=Li(this);if(this.o=R==200,Ro(this.i,this.v,this.B,this.l,this.S,Dt,R),this.o){if(this.U&&!this.L){t:{if(this.g){var ee,ke=this.g;if((ee=ke.g?ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(ee)){var Be=ee;break t}}Be=null}if(m=Be)Vn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,jr(this,m);else{this.o=!1,this.m=3,$t(12),Xo(this),Po(this);break e}}if(this.R){m=!0;let Xr;for(;!this.K&&this.C<U.length;)if(Xr=mo(this,U),Xr==Ki){Dt==4&&(this.m=4,$t(14),m=!1),Vn(this.i,this.l,null,"[Incomplete Response]");break}else if(Xr==Gi){this.m=4,$t(15),Vn(this.i,this.l,U,"[Invalid Chunk]"),m=!1;break}else Vn(this.i,this.l,Xr,null),jr(this,Xr);if(bs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||U.length!=0||this.h.h||(this.m=1,$t(16),m=!1),this.o=this.o&&m,!m)Vn(this.i,this.l,U,"[Invalid Chunked Response]"),Xo(this),Po(this);else if(U.length>0&&!this.W){this.W=!0;var tt=this.j;tt.g==this&&tt.aa&&!tt.P&&(tt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),ks(tt),tt.P=!0,$t(11))}}else Vn(this.i,this.l,U,null),jr(this,U);Dt==4&&Xo(this),this.o&&!this.K&&(Dt==4?ce(this.j,this):(this.o=!1,go(this)))}else rs(this.g),R==400&&U.indexOf("Unknown SID")>0?(this.m=3,$t(12)):(this.m=0,$t(13)),Xo(this),Po(this)}}}catch{}finally{}};function Li(m){if(!bs(m))return m.g.la();const R=Aa(m.g);if(R==="")return"";let U="";const ee=R.length,ke=Qi(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Xo(m),Po(m),"";m.h.i=new l.TextDecoder}for(let Be=0;Be<ee;Be++)m.h.h=!0,U+=m.h.i.decode(R[Be],{stream:!(ke&&Be==ee-1)});return R.length=0,m.h.g+=U,m.C=0,m.h.g}function bs(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function mo(m,R){var U=m.C,ee=R.indexOf(`
`,U);return ee==-1?Ki:(U=Number(R.substring(U,ee)),isNaN(U)?Gi:(ee+=1,ee+U>R.length?Ki:(R=R.slice(ee,ee+U),m.C=ee+U,R)))}Yn.prototype.cancel=function(){this.K=!0,Xo(this)};function go(m){m.T=Date.now()+m.H,ws(m,m.H)}function ws(m,R){if(m.D!=null)throw Error("WatchDog timer not null");m.D=ar(d(m.aa,m),R)}function Qo(m){m.D&&(l.clearTimeout(m.D),m.D=null)}Yn.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Rt(this.i,this.B),this.M!=2&&(Er(),$t(17)),Xo(this),this.m=2,Po(this)):ws(this,this.T-m)};function Po(m){m.j.I==0||m.K||ce(m.j,m)}function Xo(m){Qo(m);var R=m.O;R&&typeof R.dispose=="function"&&R.dispose(),m.O=null,vr(m.V),m.g&&(R=m.g,m.g=null,R.abort(),R.dispose())}function jr(m,R){try{var U=m.j;if(U.I!=0&&(U.g==m||wa(U.h,m))){if(!m.L&&wa(U.h,m)&&U.I==3){try{var ee=U.Ba.g.parse(R)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var ke=ee;if(ke[0]==0){e:if(!U.v){if(U.g)if(U.g.F+3e3<m.F)H(U),li(U);else break e;Si(U),$t(18)}}else U.xa=ke[1],0<U.xa-U.K&&ke[2]<37500&&U.F&&U.A==0&&!U.C&&(U.C=ar(d(U.Va,U),6e3));Zo(U.h)<=1&&U.ta&&(U.ta=void 0)}else Ce(U,11)}else if((m.L||U.g==m)&&H(U),!B(R))for(ke=U.Ba.g.parse(R),R=0;R<ke.length;R++){let dr=ke[R];const Xr=dr[0];if(!(Xr<=U.K))if(U.K=Xr,dr=dr[1],U.I==2)if(dr[0]=="c"){U.M=dr[1],U.ba=dr[2];const $n=dr[3];$n!=null&&(U.ka=$n,U.j.info("VER="+U.ka));const Vi=dr[4];Vi!=null&&(U.za=Vi,U.j.info("SVER="+U.za));const en=dr[5];en!=null&&typeof en=="number"&&en>0&&(ee=1.5*en,U.O=ee,U.j.info("backChannelRequestTimeoutMs_="+ee)),ee=U;const _i=m.g;if(_i){const Oo=_i.g?_i.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oo){var Be=ee.h;Be.g||Oo.indexOf("spdy")==-1&&Oo.indexOf("quic")==-1&&Oo.indexOf("h2")==-1||(Be.j=Be.l,Be.g=new Set,Be.h&&(Ss(Be,Be.h),Be.h=null))}if(ee.G){const Ys=_i.g?_i.g.getResponseHeader("X-HTTP-Session-Id"):null;Ys&&(ee.wa=Ys,lr(ee.J,ee.G,Ys))}}U.I=3,U.l&&U.l.ra(),U.aa&&(U.T=Date.now()-m.F,U.j.info("Handshake RTT: "+U.T+"ms")),ee=U;var tt=m;if(ee.na=Ge(ee,ee.L?ee.ba:null,ee.W),tt.L){_s(ee.h,tt);var Dt=tt,Dr=ee.O;Dr&&(Dt.H=Dr),Dt.D&&(Qo(Dt),go(Dt)),ee.g=tt}else Wn(ee);U.i.length>0&&Vo(U)}else dr[0]!="stop"&&dr[0]!="close"||Ce(U,7);else U.I==3&&(dr[0]=="stop"||dr[0]=="close"?dr[0]=="stop"?Ce(U,7):ns(U):dr[0]!="noop"&&U.l&&U.l.qa(dr),U.A=0)}}Er(4)}catch{}}var Bl=class{constructor(m,R){this.g=m,this.map=R}};function Us(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function gi(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Zo(m){return m.h?1:m.g?m.g.size:0}function wa(m,R){return m.h?m.h==R:m.g?m.g.has(R):!1}function Ss(m,R){m.g?m.g.add(R):m.h=R}function _s(m,R){m.h&&m.h==R?m.h=null:m.g&&m.g.has(R)&&m.g.delete(R)}Us.prototype.cancel=function(){if(this.i=yi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function yi(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let R=m.i;for(const U of m.g.values())R=R.concat(U.G);return R}return v(m.i)}var Ya=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qn(m,R){if(m){m=m.split("&");for(let U=0;U<m.length;U++){const ee=m[U].indexOf("=");let ke,Be=null;ee>=0?(ke=m[U].substring(0,ee),Be=m[U].substring(ee+1)):ke=m[U],R(ke,Be?decodeURIComponent(Be.replace(/\+/g," ")):"")}}}function No(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;m instanceof No?(this.l=m.l,Ts(this,m.j),this.o=m.o,this.g=m.g,yo(this,m.u),this.h=m.h,xi(this,Ks(m.i)),this.m=m.m):m&&(R=String(m).match(Ya))?(this.l=!1,Ts(this,R[1]||"",!0),this.o=xo(R[2]||""),this.g=xo(R[3]||"",!0),yo(this,R[4]),this.h=xo(R[5]||"",!0),xi(this,R[6]||"",!0),this.m=xo(R[7]||"")):(this.l=!1,this.i=new or(null,this.l))}No.prototype.toString=function(){const m=[];var R=this.j;R&&m.push(Or(R,Qa,!0),":");var U=this.g;return(U||R=="file")&&(m.push("//"),(R=this.o)&&m.push(Or(R,Qa,!0),"@"),m.push(Vr(U).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U=this.u,U!=null&&m.push(":",String(U))),(U=this.h)&&(this.g&&U.charAt(0)!="/"&&m.push("/"),m.push(Or(U,U.charAt(0)=="/"?Hs:Xa,!0))),(U=this.i.toString())&&m.push("?",U),(U=this.m)&&m.push("#",Or(U,Sa)),m.join("")},No.prototype.resolve=function(m){const R=wr(this);let U=!!m.j;U?Ts(R,m.j):U=!!m.o,U?R.o=m.o:U=!!m.g,U?R.g=m.g:U=m.u!=null;var ee=m.h;if(U)yo(R,m.u);else if(U=!!m.h){if(ee.charAt(0)!="/")if(this.g&&!this.h)ee="/"+ee;else{var ke=R.h.lastIndexOf("/");ke!=-1&&(ee=R.h.slice(0,ke+1)+ee)}if(ke=ee,ke==".."||ke==".")ee="";else if(ke.indexOf("./")!=-1||ke.indexOf("/.")!=-1){ee=ke.lastIndexOf("/",0)==0,ke=ke.split("/");const Be=[];for(let tt=0;tt<ke.length;){const Dt=ke[tt++];Dt=="."?ee&&tt==ke.length&&Be.push(""):Dt==".."?((Be.length>1||Be.length==1&&Be[0]!="")&&Be.pop(),ee&&tt==ke.length&&Be.push("")):(Be.push(Dt),ee=!0)}ee=Be.join("/")}else ee=ke}return U?R.h=ee:U=m.i.toString()!=="",U?xi(R,Ks(m.i)):U=!!m.m,U&&(R.m=m.m),R};function wr(m){return new No(m)}function Ts(m,R,U){m.j=U?xo(R,!0):R,m.j&&(m.j=m.j.replace(/:$/,""))}function yo(m,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);m.u=R}else m.u=null}function xi(m,R,U){R instanceof or?(m.i=R,vo(m.i,m.l)):(U||(R=Or(R,Bo)),m.i=new or(R,m.l))}function lr(m,R,U){m.i.set(R,U)}function Mn(m){return lr(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function xo(m,R){return m?R?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Or(m,R,U){return typeof m=="string"?(m=encodeURI(m).replace(R,qs),U&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function qs(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Qa=/[#\/\?@]/g,Xa=/[#\?:]/g,Hs=/[#\?]/g,Bo=/[#\?@]/g,Sa=/#/g;function or(m,R){this.h=this.g=null,this.i=m||null,this.j=!!R}function ai(m){m.g||(m.g=new Map,m.h=0,m.i&&Qn(m.i,function(R,U){m.add(decodeURIComponent(R.replace(/\+/g," ")),U)}))}r=or.prototype,r.add=function(m,R){ai(this),this.i=null,m=vi(this,m);let U=this.g.get(m);return U||this.g.set(m,U=[]),U.push(R),this.h+=1,this};function Gs(m,R){ai(m),R=vi(m,R),m.g.has(R)&&(m.i=null,m.h-=m.g.get(R).length,m.g.delete(R))}function _a(m,R){return ai(m),R=vi(m,R),m.g.has(R)}r.forEach=function(m,R){ai(this),this.g.forEach(function(U,ee){U.forEach(function(ke){m.call(R,ke,ee,this)},this)},this)};function Za(m,R){ai(m);let U=[];if(typeof R=="string")_a(m,R)&&(U=U.concat(m.g.get(vi(m,R))));else for(m=Array.from(m.g.values()),R=0;R<m.length;R++)U=U.concat(m[R]);return U}r.set=function(m,R){return ai(this),this.i=null,m=vi(this,m),_a(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[R]),this.h+=1,this},r.get=function(m,R){return m?(m=Za(this,m),m.length>0?String(m[0]):R):R};function el(m,R,U){Gs(m,R),U.length>0&&(m.i=null,m.g.set(vi(m,R),v(U)),m.h+=U.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],R=Array.from(this.g.keys());for(let ee=0;ee<R.length;ee++){var U=R[ee];const ke=Vr(U);U=Za(this,U);for(let Be=0;Be<U.length;Be++){let tt=ke;U[Be]!==""&&(tt+="="+Vr(U[Be])),m.push(tt)}}return this.i=m.join("&")};function Ks(m){const R=new or;return R.i=m.i,m.g&&(R.g=new Map(m.g),R.h=m.h),R}function vi(m,R){return R=String(R),m.j&&(R=R.toLowerCase()),R}function vo(m,R){R&&!m.j&&(ai(m),m.i=null,m.g.forEach(function(U,ee){const ke=ee.toLowerCase();ee!=ke&&(Gs(this,ee),el(this,ke,U))},m)),m.j=R}function Lo(m,R){const U=new Hi;if(l.Image){const ee=new Image;ee.onload=g(wn,U,"TestLoadImage: loaded",!0,R,ee),ee.onerror=g(wn,U,"TestLoadImage: error",!1,R,ee),ee.onabort=g(wn,U,"TestLoadImage: abort",!1,R,ee),ee.ontimeout=g(wn,U,"TestLoadImage: timeout",!1,R,ee),l.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=m}else R(!1)}function bi(m,R){const U=new Hi,ee=new AbortController,ke=setTimeout(()=>{ee.abort(),wn(U,"TestPingServer: timeout",!1,R)},1e4);fetch(m,{signal:ee.signal}).then(Be=>{clearTimeout(ke),Be.ok?wn(U,"TestPingServer: ok",!0,R):wn(U,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(ke),wn(U,"TestPingServer: error",!1,R)})}function wn(m,R,U,ee,ke){try{ke&&(ke.onload=null,ke.onerror=null,ke.onabort=null,ke.ontimeout=null),ee(U)}catch{}}function Nt(){this.g=new jt}function es(m){this.i=m.Sb||null,this.h=m.ab||!1}b(es,pt),es.prototype.g=function(){return new Fi(this.i,this.h)};function Fi(m,R){He.call(this),this.H=m,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Fi,He),r=Fi.prototype,r.open=function(m,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=R,this.readyState=1,Dn(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(R.body=m),(this.H||l).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,As(this)),this.readyState=0},r.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Dn(this)),this.g&&(this.readyState=3,Dn(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ll(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ll(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}r.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var R=m.value?m.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!m.done}))&&(this.response=this.responseText+=R)}m.done?As(this):Dn(this),this.readyState==3&&Ll(this)}},r.Oa=function(m){this.g&&(this.response=this.responseText=m,As(this))},r.Na=function(m){this.g&&(this.response=m,As(this))},r.ga=function(){this.g&&As(this)};function As(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Dn(m)}r.setRequestHeader=function(m,R){this.A.append(m,R)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],R=this.h.entries();for(var U=R.next();!U.done;)U=U.value,m.push(U[0]+": "+U[1]),U=R.next();return m.join(`\r
`)};function Dn(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Fo(m){let R="";return ve(m,function(U,ee){R+=ee,R+=":",R+=U,R+=`\r
`}),R}function Ta(m,R,U){e:{for(ee in U){var ee=!1;break e}ee=!0}ee||(U=Fo(U),typeof m=="string"?U!=null&&Vr(U):lr(m,R,U))}function Rr(m){He.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Rr,He);var Js=/^https?$/i,tl=["POST","PUT"];r=Rr.prototype,r.Fa=function(m){this.H=m},r.ea=function(m,R,U,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);R=R?R.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ni.g(),this.g.onreadystatechange=S(d(this.Ca,this));try{this.B=!0,this.g.open(R,String(m),!0),this.B=!1}catch(Be){Ji(this,Be);return}if(m=U||"",U=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var ke in ee)U.set(ke,ee[ke]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const Be of ee.keys())U.set(Be,ee.get(Be));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from(U.keys()).find(Be=>Be.toLowerCase()=="content-type"),ke=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(tl,R,void 0)>=0)||ee||ke||U.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Be,tt]of U)this.g.setRequestHeader(Be,tt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Be){Ji(this,Be)}};function Ji(m,R){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=R,m.o=5,bo(m),ts(m)}function bo(m){m.A||(m.A=!0,ot(m,"complete"),ot(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,ot(this,"complete"),ot(this,"abort"),ts(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ts(this,!0)),Rr.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Yi(this):this.Xa())},r.Xa=function(){Yi(this)};function Yi(m){if(m.h&&typeof o<"u"){if(m.v&&Qi(m)==4)setTimeout(m.Ca.bind(m),0);else if(ot(m,"readystatechange"),Qi(m)==4){m.h=!1;try{const Be=m.ca();e:switch(Be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var U;if(!(U=R)){var ee;if(ee=Be===0){let tt=String(m.D).match(Ya)[1]||null;!tt&&l.self&&l.self.location&&(tt=l.self.location.protocol.slice(0,-1)),ee=!Js.test(tt?tt.toLowerCase():"")}U=ee}if(U)ot(m,"complete"),ot(m,"success");else{m.o=6;try{var ke=Qi(m)>2?m.g.statusText:""}catch{ke=""}m.l=ke+" ["+m.ca()+"]",bo(m)}}finally{ts(m)}}}}function ts(m,R){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const U=m.g;m.g=null,R||ot(m,"ready");try{U.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Qi(m){return m.g?m.g.readyState:0}r.ca=function(){try{return Qi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(m){if(this.g){var R=this.g.responseText;return m&&R.indexOf(m)==0&&(R=R.substring(m.length)),Tt(R)}};function Aa(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function rs(m){const R={};m=(m.g&&Qi(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<m.length;ee++){if(B(m[ee]))continue;var U=un(m[ee]);const ke=U[0];if(U=U[1],typeof U!="string")continue;U=U.trim();const Be=R[ke]||[];R[ke]=Be,Be.push(U)}be(R,function(ee){return ee.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(m,R,U){return U&&U.internalChannelParams&&U.internalChannelParams[m]||R}function Cs(m){this.za=0,this.i=[],this.j=new Hi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wi("baseRetryDelayMs",5e3,m),this.Za=wi("retryDelaySeedMs",1e4,m),this.Ta=wi("forwardChannelMaxRetries",2,m),this.va=wi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Us(m&&m.concurrentRequestLimit),this.Ba=new Nt,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Cs.prototype,r.ka=8,r.I=1,r.connect=function(m,R,U,ee){$t(0),this.W=m,this.H=R||{},U&&ee!==void 0&&(this.H.OSID=U,this.H.OAID=ee),this.F=this.X,this.J=Ge(this,null,this.W),Vo(this)};function ns(m){if(zo(m),m.I==3){var R=m.V++,U=wr(m.J);if(lr(U,"SID",m.M),lr(U,"RID",R),lr(U,"TYPE","terminate"),Xn(m,U),R=new Yn(m,m.j,R),R.M=2,R.A=Mn(wr(U)),U=!1,l.navigator&&l.navigator.sendBeacon)try{U=l.navigator.sendBeacon(R.A.toString(),"")}catch{}!U&&l.Image&&(new Image().src=R.A,U=!0),U||(R.g=lt(R.j,null),R.g.ea(R.A)),R.F=Date.now(),go(R)}De(m)}function li(m){m.g&&(ks(m),m.g.cancel(),m.g=null)}function zo(m){li(m),m.v&&(l.clearTimeout(m.v),m.v=null),H(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function Vo(m){if(!gi(m.h)&&!m.m){m.m=!0;var R=m.Ea;ne||k(),ue||(ne(),ue=!0),V.add(R,m),m.D=0}}function rl(m,R){return Zo(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=R.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=ar(d(m.Ea,m,R),ye(m,m.D)),m.D++,!0)}r.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const ke=new Yn(this,this.j,m);let Be=this.o;if(this.U&&(Be?(Be=Z(Be),J(Be,this.U)):Be=this.U),this.u!==null||this.R||(ke.J=Be,Be=null),this.S)e:{for(var R=0,U=0;U<this.i.length;U++){t:{var ee=this.i[U];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(R+=ee,R>4096){R=U;break e}if(R===4096||U===this.i.length-1){R=U+1;break e}}R=1e3}else R=1e3;R=Ca(this,ke,R),U=wr(this.J),lr(U,"RID",m),lr(U,"CVER",22),this.G&&lr(U,"X-HTTP-Session-Id",this.G),Xn(this,U),Be&&(this.R?R="headers="+Vr(Fo(Be))+"&"+R:this.u&&Ta(U,this.u,Be)),Ss(this.h,ke),this.Ra&&lr(U,"TYPE","init"),this.S?(lr(U,"$req",R),lr(U,"SID","null"),ke.U=!0,bn(ke,U,null)):bn(ke,U,R),this.I=2}}else this.I==3&&(m?zi(this,m):this.i.length==0||gi(this.h)||zi(this))};function zi(m,R){var U;R?U=R.l:U=m.V++;const ee=wr(m.J);lr(ee,"SID",m.M),lr(ee,"RID",U),lr(ee,"AID",m.K),Xn(m,ee),m.u&&m.o&&Ta(ee,m.u,m.o),U=new Yn(m,m.j,U,m.D+1),m.u===null&&(U.J=m.o),R&&(m.i=R.G.concat(m.i)),R=Ca(m,U,1e3),U.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Ss(m.h,U),bn(U,ee,R)}function Xn(m,R){m.H&&ve(m.H,function(U,ee){lr(R,ee,U)}),m.l&&ve({},function(U,ee){lr(R,ee,U)})}function Ca(m,R,U){U=Math.min(m.i.length,U);const ee=m.l?d(m.l.Ka,m.l,m):null;e:{var ke=m.i;let Dt=-1;for(;;){const Dr=["count="+U];Dt==-1?U>0?(Dt=ke[0].g,Dr.push("ofs="+Dt)):Dt=0:Dr.push("ofs="+Dt);let dr=!0;for(let Xr=0;Xr<U;Xr++){var Be=ke[Xr].g;const $n=ke[Xr].map;if(Be-=Dt,Be<0)Dt=Math.max(0,ke[Xr].g-100),dr=!1;else try{Be="req"+Be+"_"||"";try{var tt=$n instanceof Map?$n:Object.entries($n);for(const[Vi,en]of tt){let _i=en;u(en)&&(_i=Ot(en)),Dr.push(Be+Vi+"="+encodeURIComponent(_i))}}catch(Vi){throw Dr.push(Be+"type="+encodeURIComponent("_badmap")),Vi}}catch{ee&&ee($n)}}if(dr){tt=Dr.join("&");break e}}tt=void 0}return m=m.i.splice(0,U),R.G=m,tt}function Wn(m){if(!m.g&&!m.v){m.Y=1;var R=m.Da;ne||k(),ue||(ne(),ue=!0),V.add(R,m),m.A=0}}function Si(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=ar(d(m.Da,m),ye(m,m.A)),m.A++,!0)}r.Da=function(){if(this.v=null,_(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=ar(d(this.Wa,this),m)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,$t(10),li(this),_(this))};function ks(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function _(m){m.g=new Yn(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var R=wr(m.na);lr(R,"RID","rpc"),lr(R,"SID",m.M),lr(R,"AID",m.K),lr(R,"CI",m.F?"0":"1"),!m.F&&m.ia&&lr(R,"TO",m.ia),lr(R,"TYPE","xmlhttp"),Xn(m,R),m.u&&m.o&&Ta(R,m.u,m.o),m.O&&(m.g.H=m.O);var U=m.g;m=m.ba,U.M=1,U.A=Mn(wr(R)),U.u=null,U.R=!0,Bi(U,m)}r.Va=function(){this.C!=null&&(this.C=null,li(this),Si(this),$t(19))};function H(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function ce(m,R){var U=null;if(m.g==R){H(m),ks(m),m.g=null;var ee=2}else if(wa(m.h,R))U=R.G,_s(m.h,R),ee=1;else return;if(m.I!=0){if(R.o)if(ee==1){U=R.u?R.u.length:0,R=Date.now()-R.F;var ke=m.D;ee=tr(),ot(ee,new Mt(ee,U)),Vo(m)}else Wn(m);else if(ke=R.m,ke==3||ke==0&&R.X>0||!(ee==1&&rl(m,R)||ee==2&&Si(m)))switch(U&&U.length>0&&(R=m.h,R.i=R.i.concat(U)),ke){case 1:Ce(m,5);break;case 4:Ce(m,10);break;case 3:Ce(m,6);break;default:Ce(m,2)}}}function ye(m,R){let U=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(U*=2),U*R}function Ce(m,R){if(m.j.info("Error code "+R),R==2){var U=d(m.bb,m),ee=m.Ua;const ke=!ee;ee=new No(ee||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ts(ee,"https"),Mn(ee),ke?Lo(ee.toString(),U):bi(ee.toString(),U)}else $t(2);m.I=0,m.l&&m.l.pa(R),De(m),zo(m)}r.bb=function(m){m?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function De(m){if(m.I=0,m.ja=[],m.l){const R=yi(m.h);(R.length!=0||m.i.length!=0)&&(N(m.ja,R),N(m.ja,m.i),m.h.i.length=0,v(m.i),m.i.length=0),m.l.oa()}}function Ge(m,R,U){var ee=U instanceof No?wr(U):new No(U);if(ee.g!="")R&&(ee.g=R+"."+ee.g),yo(ee,ee.u);else{var ke=l.location;ee=ke.protocol,R=R?R+"."+ke.hostname:ke.hostname,ke=+ke.port;const Be=new No(null);ee&&Ts(Be,ee),R&&(Be.g=R),ke&&yo(Be,ke),U&&(Be.h=U),ee=Be}return U=m.G,R=m.wa,U&&R&&lr(ee,U,R),lr(ee,"VER",m.ka),Xn(m,ee),ee}function lt(m,R,U){if(R&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=m.Aa&&!m.ma?new Rr(new es({ab:U})):new Rr(m.ma),R.Fa(m.L),R}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function mt(){}r=mt.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Bt(){}Bt.prototype.g=function(m,R){return new vt(m,R)};function vt(m,R){He.call(this),this.g=new Cs(R),this.l=m,this.h=R&&R.messageUrlParams||null,m=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(m?m["X-WebChannel-Content-Type"]=R.messageContentType:m={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(m?m["X-WebChannel-Client-Profile"]=R.sa:m={"X-WebChannel-Client-Profile":R.sa}),this.g.U=m,(m=R&&R.Qb)&&!B(m)&&(this.g.u=m),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!B(R)&&(this.g.G=R,m=this.h,m!==null&&R in m&&(m=this.h,R in m&&delete m[R])),this.j=new Mr(this)}b(vt,He),vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vt.prototype.close=function(){ns(this.g)},vt.prototype.o=function(m){var R=this.g;if(typeof m=="string"){var U={};U.__data__=m,m=U}else this.v&&(U={},U.__data__=Ot(m),m=U);R.i.push(new Bl(R.Ya++,m)),R.I==3&&Vo(R)},vt.prototype.N=function(){this.g.l=null,delete this.j,ns(this.g),delete this.g,vt.Z.N.call(this)};function gr(m){ht.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var R=m.__sm__;if(R){e:{for(const U in R){m=U;break e}m=void 0}(this.i=m)&&(m=this.i,R=R!==null&&m in R?R[m]:void 0),this.data=R}else this.data=m}b(gr,ht);function Qr(){Ht.call(this),this.status=1}b(Qr,Ht);function Mr(m){this.g=m}b(Mr,mt),Mr.prototype.ra=function(){ot(this.g,"a")},Mr.prototype.qa=function(m){ot(this.g,new gr(m))},Mr.prototype.pa=function(m){ot(this.g,new Qr)},Mr.prototype.oa=function(){ot(this.g,"b")},Bt.prototype.createWebChannel=Bt.prototype.g,vt.prototype.send=vt.prototype.o,vt.prototype.open=vt.prototype.m,vt.prototype.close=vt.prototype.close,m_=function(){return new Bt},p_=function(){return tr()},f_=sr,w1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},mi.NO_ERROR=0,mi.TIMEOUT=8,mi.HTTP_ERROR=6,nm=mi,On.COMPLETE="complete",h_=On,Ir.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",He.prototype.listen=He.prototype.J,qh=Ir,Rr.prototype.listenOnce=Rr.prototype.K,Rr.prototype.getLastError=Rr.prototype.Ha,Rr.prototype.getLastErrorCode=Rr.prototype.ya,Rr.prototype.getStatus=Rr.prototype.ca,Rr.prototype.getResponseJson=Rr.prototype.La,Rr.prototype.getResponseText=Rr.prototype.la,Rr.prototype.send=Rr.prototype.ea,Rr.prototype.setWithCredentials=Rr.prototype.Fa,d_=Rr}).apply(typeof Op<"u"?Op:typeof self<"u"?self:typeof window<"u"?window:{});const gv="@firebase/firestore",yv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$i.UNAUTHENTICATED=new $i(null),$i.GOOGLE_CREDENTIALS=new $i("google-credentials-uid"),$i.FIRST_PARTY=new $i("first-party-uid"),$i.MOCK_USER=new $i("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=new i5("@firebase/firestore");function Sd(){return ku.logLevel}function Qe(r,...e){if(ku.logLevel<=yr.DEBUG){const t=e.map(m5);ku.debug(`Firestore (${ih}): ${r}`,...t)}}function Io(r,...e){if(ku.logLevel<=yr.ERROR){const t=e.map(m5);ku.error(`Firestore (${ih}): ${r}`,...t)}}function Iu(r,...e){if(ku.logLevel<=yr.WARN){const t=e.map(m5);ku.warn(`Firestore (${ih}): ${r}`,...t)}}function m5(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,g_(r,n,t)}function g_(r,e,t){let n=`FIRESTORE (${ih}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Io(n),new Error(n)}function kt(r,e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,r||g_(e,i,n)}function er(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class it extends Rl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class j7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($i.UNAUTHENTICATED)))}shutdown(){}}class R7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class P7{constructor(e){this.t=e,this.currentUser=$i.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){kt(this.o===void 0,42304);let n=this.i;const i=h=>this.i!==n?(n=this.i,t(h)):Promise.resolve();let o=new Cl;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Cl,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},u=h=>{Qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Cl)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(Qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(kt(typeof n.accessToken=="string",31837,{l:n}),new y_(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return kt(e===null||typeof e=="string",2055,{h:e}),new $i(e)}}class N7{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=$i.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class B7{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new N7(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t($i.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L7{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Os(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){kt(this.o===void 0,3512);const n=o=>{o.error!=null&&Qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,Qe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>n(o)))};const i=o=>{Qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new xv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(kt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new xv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F7(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=F7(40);for(let o=0;o<i.length;++o)n.length<20&&i[o]<t&&(n+=e.charAt(i[o]%62))}return n}}function Zt(r,e){return r<e?-1:r>e?1:0}function S1(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const i=r.charAt(n),o=e.charAt(n);if(i!==o)return Ug(i)===Ug(o)?Zt(i,o):Ug(i)?1:-1}return Zt(r.length,e.length)}const z7=55296,V7=57343;function Ug(r){const e=r.charCodeAt(0);return e>=z7&&e<=V7}function Vd(r,e,t){return r.length===e.length&&r.every(((n,i)=>t(n,e[i])))}function x_(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="__name__";class Ma{constructor(e,t,n){t===void 0?t=0:t>e.length&&xt(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&xt(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Ma.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ma?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const o=Ma.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Zt(e.length,t.length)}static compareSegments(e,t){const n=Ma.isNumericId(e),i=Ma.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?Ma.extractNumericId(e).compare(Ma.extractNumericId(t)):S1(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wc.fromString(e.substring(4,e.length-2))}}class Nr extends Ma{construct(e,t,n){return new Nr(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new it(We.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((i=>i.length>0)))}return new Nr(t)}static emptyPath(){return new Nr([])}}const O7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends Ma{construct(e,t,n){return new In(e,t,n)}static isValidIdentifier(e){return O7.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vv}static keyField(){return new In([vv])}static fromServerFormat(e){const t=[];let n="",i=0;const o=()=>{if(n.length===0)throw new it(We.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let l=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new it(We.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new it(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=h,i+=2}else u==="`"?(l=!l,i++):u!=="."||l?(n+=u,i++):(o(),i++)}if(o(),l)throw new it(We.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(t)}static emptyPath(){return new In([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.path=e}static fromPath(e){return new st(Nr.fromString(e))}static fromName(e){return new st(Nr.fromString(e).popFirst(5))}static empty(){return new st(Nr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Nr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new st(new Nr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(r,e,t){if(!t)throw new it(We.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function M7(r,e,t,n){if(e===!0&&n===!0)throw new it(We.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function bv(r){if(!st.isDocumentKey(r))throw new it(We.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function wv(r){if(st.isDocumentKey(r))throw new it(We.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function b_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function e0(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":xt(12329,{type:typeof r})}function pa(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new it(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=e0(r);throw new it(We.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(r,e){const t={typeString:r};return e&&(t.value=e),t}function Vf(r,e){if(!b_(r))throw new it(We.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const i=e[n].typeString,o="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const l=r[n];if(i&&typeof l!==i){t=`JSON field '${n}' must be a ${i}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${n}' field to equal '${o.value}'`;break}}if(t)throw new it(We.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=-62135596800,_v=1e6;class Kr{static now(){return Kr.fromMillis(Date.now())}static fromDate(e){return Kr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*_v);return new Kr(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new it(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new it(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sv)throw new it(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new it(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_v}_compareTo(e){return this.seconds===e.seconds?Zt(this.nanoseconds,e.nanoseconds):Zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Kr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vf(e,Kr._jsonSchema))return new Kr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Kr._jsonSchemaVersion="firestore/timestamp/1.0",Kr._jsonSchema={type:ii("string",Kr._jsonSchemaVersion),seconds:ii("number"),nanoseconds:ii("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{static fromTimestamp(e){return new Pt(e)}static min(){return new Pt(new Kr(0,0))}static max(){return new Pt(new Kr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=-1;class Em{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}function _1(r){return r.fields.find((e=>e.kind===2))}function ou(r){return r.fields.filter((e=>e.kind!==2))}Em.UNKNOWN_ID=-1;class im{constructor(e,t){this.fieldPath=e,this.kind=t}}class gf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new gf(0,vs.min())}}function D7(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=Pt.fromTimestamp(n===1e9?new Kr(t+1,0):new Kr(t,n));return new vs(i,st.empty(),e)}function w_(r){return new vs(r.readTime,r.key,mf)}class vs{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new vs(Pt.min(),st.empty(),mf)}static max(){return new vs(Pt.max(),st.empty(),mf)}}function y5(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=st.comparator(r.documentKey,e.documentKey),t!==0?t:Zt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class __{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mu(r){if(r.code!==We.FAILED_PRECONDITION||r.message!==S_)throw r;Qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new je(((n,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof je?t:je.resolve(t)}catch(t){return je.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):je.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):je.reject(t)}static resolve(e){return new je(((t,n)=>{t(e)}))}static reject(e){return new je(((t,n)=>{n(e)}))}static waitFor(e){return new je(((t,n)=>{let i=0,o=0,l=!1;e.forEach((u=>{++i,u.next((()=>{++o,l&&o===i&&t()}),(h=>n(h)))})),l=!0,o===i&&t()}))}static or(e){let t=je.resolve(!1);for(const n of e)t=t.next((i=>i?je.resolve(i):n()));return t}static forEach(e,t){const n=[];return e.forEach(((i,o)=>{n.push(t.call(this,i,o))})),this.waitFor(n)}static mapArray(e,t){return new je(((n,i)=>{const o=e.length,l=new Array(o);let u=0;for(let h=0;h<o;h++){const d=h;t(e[d]).next((g=>{l[d]=g,++u,u===o&&n(l)}),(g=>i(g)))}}))}static doWhile(e,t){return new je(((n,i)=>{const o=()=>{e()===!0?t().next((()=>{o()}),i):n()};o()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="SimpleDb";class t0{static open(e,t,n,i){try{return new t0(t,e.transaction(i,n))}catch(o){throw new ef(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Cl,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ef(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const i=x5(n.target.error);this.S.reject(new ef(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Qe(ps,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new $7(t)}}class Sc{static delete(e){return Qe(ps,"Removing database:",e),lu(pS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!_S())return!1;if(Sc.F())return!0;const e=hi(),t=Sc.M(e),n=0<t&&t<10,i=T_(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,Sc.M(hi())===12.2&&Io("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Qe(ps,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const l=o.target.result;t(l)},i.onblocked=()=>{n(new ef(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const l=o.target.error;l.name==="VersionError"?n(new it(We.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?n(new it(We.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):n(new ef(e,l))},i.onupgradeneeded=o=>{Qe(ps,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.N.k(l,i.transaction,o.oldVersion,this.version).next((()=>{Qe(ps,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,i){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const u=t0.open(this.db,e,o?"readonly":"readwrite",n),h=i(u).next((d=>(u.C(),d))).catch((d=>(u.abort(d),je.reject(d)))).toPromise();return h.catch((()=>{})),await u.D,h}catch(u){const h=u,d=h.name!=="FirebaseError"&&l<3;if(Qe(ps,"Transaction failed with error:",h.message,"Retrying:",d),this.close(),!d)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function T_(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class W7{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return lu(this.U.delete())}}class ef extends it{constructor(e,t){super(We.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Nc(r){return r.name==="IndexedDbTransactionError"}class $7{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(Qe(ps,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(Qe(ps,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),lu(n)}add(e){return Qe(ps,"ADD",this.store.name,e,e),lu(this.store.add(e))}get(e){return lu(this.store.get(e)).next((t=>(t===void 0&&(t=null),Qe(ps,"GET",this.store.name,e,t),t)))}delete(e){return Qe(ps,"DELETE",this.store.name,e),lu(this.store.delete(e))}count(){return Qe(ps,"COUNT",this.store.name),lu(this.store.count())}J(e,t){const n=this.options(e,t),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(n.range);return new je(((l,u)=>{o.onerror=h=>{u(h.target.error)},o.onsuccess=h=>{l(h.target.result)}}))}{const o=this.cursor(n),l=[];return this.H(o,((u,h)=>{l.push(h)})).next((()=>l))}}Y(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new je(((i,o)=>{n.onerror=l=>{o(l.target.error)},n.onsuccess=l=>{i(l.target.result)}}))}Z(e,t){Qe(ps,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const i=this.cursor(n);return this.H(i,((o,l,u)=>u.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.H(i,t)}te(e){const t=this.cursor({});return new je(((n,i)=>{t.onerror=o=>{const l=x5(o.target.error);i(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next((u=>{u?l.continue():n()})):n()}}))}H(e,t){const n=[];return new je(((i,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const u=l.target.result;if(!u)return void i();const h=new W7(u),d=t(u.primaryKey,u.value,h);if(d instanceof je){const g=d.catch((b=>(h.done(),je.reject(b))));n.push(g)}h.isDone?i():h.G===null?u.continue():u.continue(h.G)}})).next((()=>je.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function lu(r){return new je(((e,t)=>{r.onsuccess=n=>{const i=n.target.result;e(i)},r.onerror=n=>{const i=x5(n.target.error);t(i)}}))}let Tv=!1;function x5(r){const e=Sc.M(hi());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new it("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Tv||(Tv=!0,setTimeout((()=>{throw n}),0)),n}}return r}const tf="IndexBackfiller";class U7{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Qe(tf,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();Qe(tf,`Documents written: ${t}`)}catch(t){Nc(t)?Qe(tf,"Ignoring IndexedDB error during index backfill: ",t):await Mu(t)}await this.re(6e4)}))}}class q7{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const n=new Set;let i=t,o=!0;return je.doWhile((()=>o===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!n.has(l))return Qe(tf,`Processing collection: ${l}`),this.oe(e,l,i).next((u=>{i-=u,n.add(l)}));o=!1})))).next((()=>t-i))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,n).next((o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(i,o))).next((u=>(Qe(tf,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>l.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((i,o)=>{const l=w_(o);y5(l,n)>0&&(n=l)})),new vs(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ds.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=-1;function r0(r){return r==null}function yf(r){return r===0&&1/r==-1/0}function H7(r){return typeof r=="number"&&Number.isInteger(r)&&!yf(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="";function po(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Av(e)),e=G7(r.get(t),e);return Av(e)}function G7(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const o=r.charAt(i);switch(o){case"\0":t+="";break;case jm:t+="";break;default:t+=o}}return t}function Av(r){return r+jm+""}function Wa(r){const e=r.length;if(kt(e>=2,64408,{path:r}),e===2)return kt(r.charAt(0)===jm&&r.charAt(1)==="",56145,{path:r}),Nr.emptyPath();const t=e-2,n=[];let i="";for(let o=0;o<e;){const l=r.indexOf(jm,o);switch((l<0||l>t)&&xt(50515,{path:r}),r.charAt(l+1)){case"":const u=r.substring(o,l);let h;i.length===0?h=u:(i+=u,h=i,i=""),n.push(h);break;case"":i+=r.substring(o,l),i+="\0";break;case"":i+=r.substring(o,l+1);break;default:xt(61167,{path:r})}o=l+2}return new Nr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su="remoteDocuments",Of="owner",pd="owner",xf="mutationQueues",K7="userId",ha="mutations",Cv="batchId",pu="userMutationsIndex",kv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(r,e){return[r,po(e)]}function A_(r,e,t){return[r,po(e),t]}const J7={},Od="documentMutations",Rm="remoteDocumentsV14",Y7=["prefixPath","collectionGroup","readTime","documentId"],sm="documentKeyIndex",Q7=["prefixPath","collectionGroup","documentId"],C_="collectionGroupIndex",X7=["collectionGroup","readTime","prefixPath","documentId"],vf="remoteDocumentGlobal",T1="remoteDocumentGlobalKey",Md="targets",k_="queryTargetsIndex",Z7=["canonicalId","targetId"],Dd="targetDocuments",ej=["targetId","path"],v5="documentTargetsIndex",tj=["path","targetId"],Pm="targetGlobalKey",yu="targetGlobal",bf="collectionParents",rj=["collectionId","parent"],Wd="clientMetadata",nj="clientId",n0="bundles",ij="bundleId",i0="namedQueries",oj="name",b5="indexConfiguration",sj="indexId",A1="collectionGroupIndex",aj="collectionGroup",rf="indexState",lj=["indexId","uid"],I_="sequenceNumberIndex",cj=["uid","sequenceNumber"],nf="indexEntries",uj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],E_="documentKeyIndex",dj=["indexId","uid","orderedDocumentKey"],o0="documentOverlays",hj=["userId","collectionPath","documentId"],C1="collectionPathOverlayIndex",fj=["userId","collectionPath","largestBatchId"],j_="collectionGroupOverlayIndex",pj=["userId","collectionGroup","largestBatchId"],w5="globals",mj="name",R_=[xf,ha,Od,su,Md,Of,yu,Dd,Wd,vf,bf,n0,i0],gj=[...R_,o0],P_=[xf,ha,Od,Rm,Md,Of,yu,Dd,Wd,vf,bf,n0,i0,o0],N_=P_,S5=[...N_,b5,rf,nf],yj=S5,B_=[...S5,w5],xj=B_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1 extends __{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function pi(r,e){const t=er(r);return Sc.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Bc(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function L_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,t){this.comparator=e,this.root=t||Ui.EMPTY}insert(e,t){return new vn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ui.BLACK,null,null))}remove(e){return new vn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ui.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mp(this.root,e,this.comparator,!0)}}class Mp{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ui{constructor(e,t,n,i,o){this.key=e,this.value=t,this.color=n??Ui.RED,this.left=i??Ui.EMPTY,this.right=o??Ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,o){return new Ui(e??this.key,t??this.value,n??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const o=n(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,n),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Ui.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xt(27949);return e+(this.isRed()?0:1)}}Ui.EMPTY=null,Ui.RED=!0,Ui.BLACK=!1;Ui.EMPTY=new class{constructor(){this.size=0}get key(){throw xt(57766)}get value(){throw xt(16141)}get color(){throw xt(16727)}get left(){throw xt(29726)}get right(){throw xt(36894)}copy(e,t,n,i,o){return this}insert(e,t,n){return new Ui(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this.comparator=e,this.data=new vn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ev(this.data.getIterator())}getIteratorFrom(e){return new Ev(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof Yr)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=n.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Yr(this.comparator);return t.data=e,t}}class Ev{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function md(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new Ko([])}unionWith(e){let t=new Yr(In.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ko(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vd(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new F_("Invalid base64 string: "+o):o}})(e);return new si(t)}static fromUint8Array(e){const t=(function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o})(e);return new si(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}si.EMPTY_BYTE_STRING=new si("");const vj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function El(r){if(kt(!!r,39018),typeof r=="string"){let e=0;const t=vj.exec(r);if(kt(!!t,46558,{timestamp:r}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:xn(r.seconds),nanos:xn(r.nanos)}}function xn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function jl(r){return typeof r=="string"?si.fromBase64String(r):si.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="server_timestamp",V_="__type__",O_="__previous_value__",M_="__local_write_time__";function _5(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[V_])==null?void 0:n.stringValue)===z_}function s0(r){const e=r.mapValue.fields[O_];return _5(e)?s0(e):e}function wf(r){const e=El(r.mapValue.fields[M_].timestampValue);return new Kr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,t,n,i,o,l,u,h,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=d,this.isUsingEmulator=g}}const Nm="(default)";class Eu{constructor(e,t){this.projectId=e,this.database=t||Nm}static empty(){return new Eu("","")}get isDefaultDatabase(){return this.database===Nm}isEqual(e){return e instanceof Eu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5="__type__",D_="__max__",yc={mapValue:{fields:{__type__:{stringValue:D_}}}},A5="__vector__",$d="value",am={nullValue:"NULL_VALUE"};function Cc(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?_5(r)?4:W_(r)?9007199254740991:a0(r)?10:11:xt(28295,{value:r})}function Ka(r,e){if(r===e)return!0;const t=Cc(r);if(t!==Cc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return wf(r).isEqual(wf(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=El(i.timestampValue),u=El(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(i,o){return jl(i.bytesValue).isEqual(jl(o.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(i,o){return xn(i.geoPointValue.latitude)===xn(o.geoPointValue.latitude)&&xn(i.geoPointValue.longitude)===xn(o.geoPointValue.longitude)})(r,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return xn(i.integerValue)===xn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=xn(i.doubleValue),u=xn(o.doubleValue);return l===u?yf(l)===yf(u):isNaN(l)&&isNaN(u)}return!1})(r,e);case 9:return Vd(r.arrayValue.values||[],e.arrayValue.values||[],Ka);case 10:case 11:return(function(i,o){const l=i.mapValue.fields||{},u=o.mapValue.fields||{};if(Iv(l)!==Iv(u))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(u[h]===void 0||!Ka(l[h],u[h])))return!1;return!0})(r,e);default:return xt(52216,{left:r})}}function Sf(r,e){return(r.values||[]).find((t=>Ka(t,e)))!==void 0}function kc(r,e){if(r===e)return 0;const t=Cc(r),n=Cc(e);if(t!==n)return Zt(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Zt(r.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=xn(o.integerValue||o.doubleValue),h=xn(l.integerValue||l.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(r,e);case 3:return jv(r.timestampValue,e.timestampValue);case 4:return jv(wf(r),wf(e));case 5:return S1(r.stringValue,e.stringValue);case 6:return(function(o,l){const u=jl(o),h=jl(l);return u.compareTo(h)})(r.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),h=l.split("/");for(let d=0;d<u.length&&d<h.length;d++){const g=Zt(u[d],h[d]);if(g!==0)return g}return Zt(u.length,h.length)})(r.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=Zt(xn(o.latitude),xn(l.latitude));return u!==0?u:Zt(xn(o.longitude),xn(l.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Rv(r.arrayValue,e.arrayValue);case 10:return(function(o,l){var S,v,N,E;const u=o.fields||{},h=l.fields||{},d=(S=u[$d])==null?void 0:S.arrayValue,g=(v=h[$d])==null?void 0:v.arrayValue,b=Zt(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((E=g==null?void 0:g.values)==null?void 0:E.length)||0);return b!==0?b:Rv(d,g)})(r.mapValue,e.mapValue);case 11:return(function(o,l){if(o===yc.mapValue&&l===yc.mapValue)return 0;if(o===yc.mapValue)return 1;if(l===yc.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),d=l.fields||{},g=Object.keys(d);h.sort(),g.sort();for(let b=0;b<h.length&&b<g.length;++b){const S=S1(h[b],g[b]);if(S!==0)return S;const v=kc(u[h[b]],d[g[b]]);if(v!==0)return v}return Zt(h.length,g.length)})(r.mapValue,e.mapValue);default:throw xt(23264,{he:t})}}function jv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Zt(r,e);const t=El(r),n=El(e),i=Zt(t.seconds,n.seconds);return i!==0?i:Zt(t.nanos,n.nanos)}function Rv(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const o=kc(t[i],n[i]);if(o)return o}return Zt(t.length,n.length)}function Ud(r){return I1(r)}function I1(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=El(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return jl(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return st.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",i=!0;for(const o of t.values||[])i?i=!1:n+=",",n+=I1(o);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of n)o?o=!1:i+=",",i+=`${l}:${I1(t.fields[l])}`;return i+"}"})(r.mapValue):xt(61005,{value:r})}function lm(r){switch(Cc(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=s0(r);return e?16+lm(e):16;case 5:return 2*r.stringValue.length;case 6:return jl(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,o)=>i+lm(o)),0)})(r.arrayValue);case 10:case 11:return(function(n){let i=0;return Bc(n.fields,((o,l)=>{i+=o.length+lm(l)})),i})(r.mapValue);default:throw xt(13486,{value:r})}}function _f(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function E1(r){return!!r&&"integerValue"in r}function Tf(r){return!!r&&"arrayValue"in r}function Pv(r){return!!r&&"nullValue"in r}function Nv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function cm(r){return!!r&&"mapValue"in r}function a0(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[T5])==null?void 0:n.stringValue)===A5}function of(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Bc(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=of(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=of(r.arrayValue.values[t]);return e}return{...r}}function W_(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===D_}const $_={mapValue:{fields:{[T5]:{stringValue:A5},[$d]:{arrayValue:{}}}}};function wj(r){return"nullValue"in r?am:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?_f(Eu.empty(),st.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?a0(r)?$_:{mapValue:{}}:xt(35942,{value:r})}function Sj(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?_f(Eu.empty(),st.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?$_:"mapValue"in r?a0(r)?{mapValue:{}}:yc:xt(61959,{value:r})}function Bv(r,e){const t=kc(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Lv(r,e){const t=kc(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.value=e}static empty(){return new fo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!cm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=of(t)}setAll(e){let t=In.emptyPath(),n={},i=[];e.forEach(((l,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,n,i),n={},i=[],t=u.popLast()}l?n[u.lastSegment()]=of(l):i.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,n,i)}delete(e){const t=this.field(e.popLast());cm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ka(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];cm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Bc(t,((i,o)=>e[i]=o));for(const i of n)delete e[i]}clone(){return new fo(of(this.value))}}function U_(r){const e=[];return Bc(r.fields,((t,n)=>{const i=new In([t]);if(cm(n)){const o=U_(n.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)})),new Ko(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,t,n,i,o,l,u){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Fn(e,0,Pt.min(),Pt.min(),Pt.min(),fo.empty(),0)}static newFoundDocument(e,t,n,i){return new Fn(e,1,t,Pt.min(),n,i,0)}static newNoDocument(e,t){return new Fn(e,2,t,Pt.min(),Pt.min(),fo.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,Pt.min(),Pt.min(),fo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t){this.position=e,this.inclusive=t}}function Fv(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const o=e[i],l=r.position[i];if(o.field.isKeyField()?n=st.comparator(st.fromName(l.referenceValue),t.key):n=kc(l,t.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function zv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ka(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t="asc"){this.field=e,this.dir=t}}function _j(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{}class xr extends q_{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new Tj(e,t,n):t==="array-contains"?new kj(e,n):t==="in"?new Q_(e,n):t==="not-in"?new Ij(e,n):t==="array-contains-any"?new Ej(e,n):new xr(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new Aj(e,n):new Cj(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(kc(t,this.value)):t!==null&&Cc(this.value)===Cc(t)&&this.matchesComparison(kc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jr extends q_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Jr(e,t)}matches(e){return Hd(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Hd(r){return r.op==="and"}function j1(r){return r.op==="or"}function C5(r){return H_(r)&&Hd(r)}function H_(r){for(const e of r.filters)if(e instanceof Jr)return!1;return!0}function R1(r){if(r instanceof xr)return r.field.canonicalString()+r.op.toString()+Ud(r.value);if(C5(r))return r.filters.map((e=>R1(e))).join(",");{const e=r.filters.map((t=>R1(t))).join(",");return`${r.op}(${e})`}}function G_(r,e){return r instanceof xr?(function(n,i){return i instanceof xr&&n.op===i.op&&n.field.isEqual(i.field)&&Ka(n.value,i.value)})(r,e):r instanceof Jr?(function(n,i){return i instanceof Jr&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((o,l,u)=>o&&G_(l,i.filters[u])),!0):!1})(r,e):void xt(19439)}function K_(r,e){const t=r.filters.concat(e);return Jr.create(t,r.op)}function J_(r){return r instanceof xr?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ud(t.value)}`})(r):r instanceof Jr?(function(t){return t.op.toString()+" {"+t.getFilters().map(J_).join(" ,")+"}"})(r):"Filter"}class Tj extends xr{constructor(e,t,n){super(e,t,n),this.key=st.fromName(n.referenceValue)}matches(e){const t=st.comparator(e.key,this.key);return this.matchesComparison(t)}}class Aj extends xr{constructor(e,t){super(e,"in",t),this.keys=Y_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Cj extends xr{constructor(e,t){super(e,"not-in",t),this.keys=Y_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Y_(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((n=>st.fromName(n.referenceValue)))}class kj extends xr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Tf(t)&&Sf(t.arrayValue,this.value)}}class Q_ extends xr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Sf(this.value.arrayValue,t)}}class Ij extends xr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Sf(this.value.arrayValue,t)}}class Ej extends xr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Tf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>Sf(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,t=null,n=[],i=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=o,this.startAt=l,this.endAt=u,this.Te=null}}function P1(r,e=null,t=[],n=[],i=null,o=null,l=null){return new jj(r,e,t,n,i,o,l)}function ju(r){const e=er(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>R1(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(o){return o.field.canonicalString()+o.dir})(n))).join(","),r0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>Ud(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>Ud(n))).join(",")),e.Te=t}return e.Te}function Mf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!_j(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!G_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!zv(r.startAt,e.startAt)&&zv(r.endAt,e.endAt)}function Bm(r){return st.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Lm(r,e){return r.filters.filter((t=>t instanceof xr&&t.field.isEqual(e)))}function Vv(r,e,t){let n=am,i=!0;for(const o of Lm(r,e)){let l=am,u=!0;switch(o.op){case"<":case"<=":l=wj(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,u=!1;break;case"!=":case"not-in":l=am}Bv({value:n,inclusive:i},{value:l,inclusive:u})<0&&(n=l,i=u)}if(t!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(e)){const l=t.position[o];Bv({value:n,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(n=l,i=t.inclusive);break}}return{value:n,inclusive:i}}function Ov(r,e,t){let n=yc,i=!0;for(const o of Lm(r,e)){let l=yc,u=!0;switch(o.op){case">=":case">":l=Sj(o.value),u=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,u=!1;break;case"!=":case"not-in":l=yc}Lv({value:n,inclusive:i},{value:l,inclusive:u})>0&&(n=l,i=u)}if(t!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(e)){const l=t.position[o];Lv({value:n,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(n=l,i=t.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,t=null,n=[],i=[],o=null,l="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Rj(r,e,t,n,i,o,l,u){return new oh(r,e,t,n,i,o,l,u)}function l0(r){return new oh(r)}function Mv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function X_(r){return r.collectionGroup!==null}function sf(r){const e=er(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Yr(In.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((d=>{d.isInequality()&&(u=u.add(d.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Af(o,n))})),t.has(In.keyField().canonicalString())||e.Ie.push(new Af(In.keyField(),n))}return e.Ie}function Ws(r){const e=er(r);return e.Ee||(e.Ee=Pj(e,sf(r))),e.Ee}function Pj(r,e){if(r.limitType==="F")return P1(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new Af(i.field,o)}));const t=r.endAt?new qd(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new qd(r.startAt.position,r.startAt.inclusive):null;return P1(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function N1(r,e){const t=r.filters.concat([e]);return new oh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function B1(r,e,t){return new oh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function c0(r,e){return Mf(Ws(r),Ws(e))&&r.limitType===e.limitType}function Z_(r){return`${ju(Ws(r))}|lt:${r.limitType}`}function _d(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((i=>J_(i))).join(", ")}]`),r0(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((i=>Ud(i))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((i=>Ud(i))).join(",")),`Target(${n})`})(Ws(r))}; limitType=${r.limitType})`}function Df(r,e){return e.isFoundDocument()&&(function(n,i){const o=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):st.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)})(r,e)&&(function(n,i){for(const o of sf(n))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(r,e)&&(function(n,i){for(const o of n.filters)if(!o.matches(i))return!1;return!0})(r,e)&&(function(n,i){return!(n.startAt&&!(function(l,u,h){const d=Fv(l,u,h);return l.inclusive?d<=0:d<0})(n.startAt,sf(n),i)||n.endAt&&!(function(l,u,h){const d=Fv(l,u,h);return l.inclusive?d>=0:d>0})(n.endAt,sf(n),i))})(r,e)}function Nj(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function e3(r){return(e,t)=>{let n=!1;for(const i of sf(r)){const o=Bj(i,e,t);if(o!==0)return o;n=n||i.field.isKeyField()}return 0}}function Bj(r,e,t){const n=r.field.isKeyField()?st.comparator(e.key,t.key):(function(o,l,u){const h=l.data.field(o),d=u.data.field(o);return h!==null&&d!==null?kc(h,d):xt(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return xt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,o]of n)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bc(this.inner,((t,n)=>{for(const[i,o]of n)e(i,o)}))}isEmpty(){return L_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=new vn(st.comparator);function gs(){return Lj}const t3=new vn(st.comparator);function Hh(...r){let e=t3;for(const t of r)e=e.insert(t.key,t);return e}function r3(r){let e=t3;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function $a(){return af()}function n3(){return af()}function af(){return new Pl((r=>r.toString()),((r,e)=>r.isEqual(e)))}const Fj=new vn(st.comparator),zj=new Yr(st.comparator);function ur(...r){let e=zj;for(const t of r)e=e.add(t);return e}const Vj=new Yr(Zt);function Oj(){return Vj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yf(e)?"-0":e}}function i3(r){return{integerValue:""+r}}function Mj(r,e){return H7(e)?i3(e):k5(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(){this._=void 0}}function Dj(r,e,t){return r instanceof Gd?(function(i,o){const l={fields:{[V_]:{stringValue:z_},[M_]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&_5(o)&&(o=s0(o)),o&&(l.fields[O_]=o),{mapValue:l}})(t,e):r instanceof Kd?s3(r,e):r instanceof Jd?a3(r,e):(function(i,o){const l=o3(i,o),u=Dv(l)+Dv(i.Ae);return E1(l)&&E1(i.Ae)?i3(u):k5(i.serializer,u)})(r,e)}function Wj(r,e,t){return r instanceof Kd?s3(r,e):r instanceof Jd?a3(r,e):t}function o3(r,e){return r instanceof Cf?(function(n){return E1(n)||(function(o){return!!o&&"doubleValue"in o})(n)})(e)?e:{integerValue:0}:null}class Gd extends u0{}class Kd extends u0{constructor(e){super(),this.elements=e}}function s3(r,e){const t=l3(e);for(const n of r.elements)t.some((i=>Ka(i,n)))||t.push(n);return{arrayValue:{values:t}}}class Jd extends u0{constructor(e){super(),this.elements=e}}function a3(r,e){let t=l3(e);for(const n of r.elements)t=t.filter((i=>!Ka(i,n)));return{arrayValue:{values:t}}}class Cf extends u0{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Dv(r){return xn(r.integerValue||r.doubleValue)}function l3(r){return Tf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,t){this.field=e,this.transform=t}}function $j(r,e){return r.field.isEqual(e.field)&&(function(n,i){return n instanceof Kd&&i instanceof Kd||n instanceof Jd&&i instanceof Jd?Vd(n.elements,i.elements,Ka):n instanceof Cf&&i instanceof Cf?Ka(n.Ae,i.Ae):n instanceof Gd&&i instanceof Gd})(r.transform,e.transform)}class Uj{constructor(e,t){this.version=e,this.transformResults=t}}class Eo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Eo}static exists(e){return new Eo(void 0,e)}static updateTime(e){return new Eo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function um(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class d0{}function u3(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new h0(r.key,Eo.none()):new sh(r.key,r.data,Eo.none());{const t=r.data,n=fo.empty();let i=new Yr(In.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?n.delete(o):n.set(o,l),i=i.add(o)}return new Nl(r.key,n,new Ko(i.toArray()),Eo.none())}}function qj(r,e,t){r instanceof sh?(function(i,o,l){const u=i.value.clone(),h=$v(i.fieldTransforms,o,l.transformResults);u.setAll(h),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(r,e,t):r instanceof Nl?(function(i,o,l){if(!um(i.precondition,o))return void o.convertToUnknownDocument(l.version);const u=$v(i.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(d3(i)),h.setAll(u),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(r,e,t):(function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function lf(r,e,t,n){return r instanceof sh?(function(o,l,u,h){if(!um(o.precondition,l))return u;const d=o.value.clone(),g=Uv(o.fieldTransforms,h,l);return d.setAll(g),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null})(r,e,t,n):r instanceof Nl?(function(o,l,u,h){if(!um(o.precondition,l))return u;const d=Uv(o.fieldTransforms,h,l),g=l.data;return g.setAll(d3(o)),g.setAll(d),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(r,e,t,n):(function(o,l,u){return um(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(r,e,t)}function Hj(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),o=o3(n.transform,i||null);o!=null&&(t===null&&(t=fo.empty()),t.set(n.field,o))}return t||null}function Wv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Vd(n,i,((o,l)=>$j(o,l)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class sh extends d0{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Nl extends d0{constructor(e,t,n,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function d3(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function $v(r,e,t){const n=new Map;kt(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let i=0;i<t.length;i++){const o=r[i],l=o.transform,u=e.data.field(o.field);n.set(o.field,Wj(l,u,t[i]))}return n}function Uv(r,e,t){const n=new Map;for(const i of r){const o=i.transform,l=t.data.field(i.field);n.set(i.field,Dj(o,l,e))}return n}class h0 extends d0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h3 extends d0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&qj(o,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=lf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=lf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=n3();return this.mutations.forEach((i=>{const o=e.get(i.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(i.key)?null:u;const h=u3(l,u);h!==null&&n.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(Pt.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ur())}isEqual(e){return this.batchId===e.batchId&&Vd(this.mutations,e.mutations,((t,n)=>Wv(t,n)))&&Vd(this.baseMutations,e.baseMutations,((t,n)=>Wv(t,n)))}}class E5{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){kt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=(function(){return Fj})();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,n[l].version);return new E5(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ni,br;function Kj(r){switch(r){case We.OK:return xt(64938);case We.CANCELLED:case We.UNKNOWN:case We.DEADLINE_EXCEEDED:case We.RESOURCE_EXHAUSTED:case We.INTERNAL:case We.UNAVAILABLE:case We.UNAUTHENTICATED:return!1;case We.INVALID_ARGUMENT:case We.NOT_FOUND:case We.ALREADY_EXISTS:case We.PERMISSION_DENIED:case We.FAILED_PRECONDITION:case We.ABORTED:case We.OUT_OF_RANGE:case We.UNIMPLEMENTED:case We.DATA_LOSS:return!0;default:return xt(15467,{code:r})}}function f3(r){if(r===void 0)return Io("GRPC error has no .code"),We.UNKNOWN;switch(r){case ni.OK:return We.OK;case ni.CANCELLED:return We.CANCELLED;case ni.UNKNOWN:return We.UNKNOWN;case ni.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case ni.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case ni.INTERNAL:return We.INTERNAL;case ni.UNAVAILABLE:return We.UNAVAILABLE;case ni.UNAUTHENTICATED:return We.UNAUTHENTICATED;case ni.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case ni.NOT_FOUND:return We.NOT_FOUND;case ni.ALREADY_EXISTS:return We.ALREADY_EXISTS;case ni.PERMISSION_DENIED:return We.PERMISSION_DENIED;case ni.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case ni.ABORTED:return We.ABORTED;case ni.OUT_OF_RANGE:return We.OUT_OF_RANGE;case ni.UNIMPLEMENTED:return We.UNIMPLEMENTED;case ni.DATA_LOSS:return We.DATA_LOSS;default:return xt(39323,{code:r})}}(br=ni||(ni={}))[br.OK=0]="OK",br[br.CANCELLED=1]="CANCELLED",br[br.UNKNOWN=2]="UNKNOWN",br[br.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",br[br.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",br[br.NOT_FOUND=5]="NOT_FOUND",br[br.ALREADY_EXISTS=6]="ALREADY_EXISTS",br[br.PERMISSION_DENIED=7]="PERMISSION_DENIED",br[br.UNAUTHENTICATED=16]="UNAUTHENTICATED",br[br.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",br[br.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",br[br.ABORTED=10]="ABORTED",br[br.OUT_OF_RANGE=11]="OUT_OF_RANGE",br[br.UNIMPLEMENTED=12]="UNIMPLEMENTED",br[br.INTERNAL=13]="INTERNAL",br[br.UNAVAILABLE=14]="UNAVAILABLE",br[br.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=new wc([4294967295,4294967295],0);function qv(r){const e=Jj().encode(r),t=new u_;return t.update(e),new Uint8Array(t.digest())}function Hv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new wc([t,n],0),new wc([i,o],0)]}class R5{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Gh(`Invalid padding: ${t}`);if(n<0)throw new Gh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Gh(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Gh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=wc.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(wc.fromNumber(n)));return i.compare(Yj)===1&&(i=new wc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=qv(e),[n,i]=Hv(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(n,i,o);if(!this.we(l))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new R5(o,i,t);return n.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const t=qv(e),[n,i]=Hv(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(n,i,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Gh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,t,n,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,Wf.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new f0(Pt.min(),i,new vn(Zt),gs(),ur())}}class Wf{constructor(e,t,n,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Wf(n,t,ur(),ur(),ur())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,t,n,i){this.be=e,this.removedTargetIds=t,this.key=n,this.De=i}}class p3{constructor(e,t){this.targetId=e,this.Ce=t}}class m3{constructor(e,t,n=si.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Gv{constructor(){this.ve=0,this.Fe=Kv(),this.Me=si.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ur(),t=ur(),n=ur();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:xt(38017,{changeType:o})}})),new Wf(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Kv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,kt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Qj{constructor(e){this.Ge=e,this.ze=new Map,this.je=gs(),this.Je=Dp(),this.He=Dp(),this.Ye=new vn(Zt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:xt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,n=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(Bm(o))if(n===0){const l=new st(o.path);this.et(t,l,Fn.newNoDocument(l,Pt.min()))}else kt(n===1,20013,{expectedCount:n});else{const l=this._t(t);if(l!==n){const u=this.ut(e),h=u?this.ct(u,e,l):1;if(h!==0){this.it(t);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:o=0}=t;let l,u;try{l=jl(n).toUint8Array()}catch(h){if(h instanceof F_)return Iu("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new R5(l,i,o)}catch(h){return Iu(h instanceof Gh?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let i=0;return n.forEach((o=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const u=this.ot(l);if(u){if(o.current&&Bm(u.target)){const h=new st(u.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,Fn.newNoDocument(h,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let n=ur();this.He.forEach(((o,l)=>{let u=!0;l.forEachWhile((h=>{const d=this.ot(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const i=new f0(e,t,this.Ye,this.je,n);return this.je=gs(),this.Je=Dp(),this.He=Dp(),this.Ye=new vn(Zt),i}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Gv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Yr(Zt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Yr(Zt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Qe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Gv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Dp(){return new vn(st.comparator)}function Kv(){return new vn(st.comparator)}const Xj={asc:"ASCENDING",desc:"DESCENDING"},Zj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eR={and:"AND",or:"OR"};class tR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function L1(r,e){return r.useProto3Json||r0(e)?e:{value:e}}function Yd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function g3(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function rR(r,e){return Yd(r,e.toTimestamp())}function jo(r){return kt(!!r,49232),Pt.fromTimestamp((function(t){const n=El(t);return new Kr(n.seconds,n.nanos)})(r))}function P5(r,e){return F1(r,e).canonicalString()}function F1(r,e){const t=(function(i){return new Nr(["projects",i.projectId,"databases",i.database])})(r).child("documents");return e===void 0?t:t.child(e)}function y3(r){const e=Nr.fromString(r);return kt(C3(e),10190,{key:e.toString()}),e}function Fm(r,e){return P5(r.databaseId,e.path)}function xu(r,e){const t=y3(e);if(t.get(1)!==r.databaseId.projectId)throw new it(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new it(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new st(b3(t))}function x3(r,e){return P5(r.databaseId,e)}function v3(r){const e=y3(r);return e.length===4?Nr.emptyPath():b3(e)}function z1(r){return new Nr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function b3(r){return kt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Jv(r,e,t){return{name:Fm(r,e),fields:t.value.mapValue.fields}}function nR(r,e,t){const n=xu(r,e.name),i=jo(e.updateTime),o=e.createTime?jo(e.createTime):Pt.min(),l=new fo({mapValue:{fields:e.fields}}),u=Fn.newFoundDocument(n,i,o,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function iR(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:xt(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(d,g){return d.useProto3Json?(kt(g===void 0||typeof g=="string",58123),si.fromBase64String(g||"")):(kt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),si.fromUint8Array(g||new Uint8Array))})(r,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(d){const g=d.code===void 0?We.UNKNOWN:f3(d.code);return new it(g,d.message||"")})(l);t=new m3(n,i,o,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=xu(r,n.document.name),o=jo(n.document.updateTime),l=n.document.createTime?jo(n.document.createTime):Pt.min(),u=new fo({mapValue:{fields:n.document.fields}}),h=Fn.newFoundDocument(i,o,l,u),d=n.targetIds||[],g=n.removedTargetIds||[];t=new dm(d,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=xu(r,n.document),o=n.readTime?jo(n.readTime):Pt.min(),l=Fn.newNoDocument(i,o),u=n.removedTargetIds||[];t=new dm([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=xu(r,n.document),o=n.removedTargetIds||[];t=new dm([],o,i,null)}else{if(!("filter"in e))return xt(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:o}=n,l=new Gj(i,o),u=n.targetId;t=new p3(u,l)}}return t}function zm(r,e){let t;if(e instanceof sh)t={update:Jv(r,e.key,e.value)};else if(e instanceof h0)t={delete:Fm(r,e.key)};else if(e instanceof Nl)t={update:Jv(r,e.key,e.data),updateMask:uR(e.fieldMask)};else{if(!(e instanceof h3))return xt(16599,{Vt:e.type});t={verify:Fm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(o,l){const u=l.transform;if(u instanceof Gd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Kd)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Jd)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Cf)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw xt(20930,{transform:l.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:rR(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:xt(27497)})(r,e.precondition)),t}function V1(r,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?Eo.updateTime(jo(o.updateTime)):o.exists!==void 0?Eo.exists(o.exists):Eo.none()})(e.currentDocument):Eo.none(),n=e.updateTransforms?e.updateTransforms.map((i=>(function(l,u){let h=null;if("setToServerValue"in u)kt(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),h=new Gd;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];h=new Kd(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];h=new Jd(g)}else"increment"in u?h=new Cf(l,u.increment):xt(16584,{proto:u});const d=In.fromServerFormat(u.fieldPath);return new c3(d,h)})(r,i))):[];if(e.update){e.update.name;const i=xu(r,e.update.name),o=new fo({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(h){const d=h.fieldPaths||[];return new Ko(d.map((g=>In.fromServerFormat(g))))})(e.updateMask);return new Nl(i,o,l,t,n)}return new sh(i,o,t,n)}if(e.delete){const i=xu(r,e.delete);return new h0(i,t)}if(e.verify){const i=xu(r,e.verify);return new h3(i,t)}return xt(1463,{proto:e})}function oR(r,e){return r&&r.length>0?(kt(e!==void 0,14353),r.map((t=>(function(i,o){let l=i.updateTime?jo(i.updateTime):jo(o);return l.isEqual(Pt.min())&&(l=jo(o)),new Uj(l,i.transformResults||[])})(t,e)))):[]}function w3(r,e){return{documents:[x3(r,e.path)]}}function S3(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=x3(r,i);const o=(function(d){if(d.length!==0)return A3(Jr.create(d,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(d){if(d.length!==0)return d.map((g=>(function(S){return{field:Td(S.field),direction:aR(S.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=L1(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function _3(r){let e=v3(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){kt(n===1,65062);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(b){const S=T3(b);return S instanceof Jr&&C5(S)?S.getFilters():[S]})(t.where));let l=[];t.orderBy&&(l=(function(b){return b.map((S=>(function(N){return new Af(Ad(N.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(S)))})(t.orderBy));let u=null;t.limit&&(u=(function(b){let S;return S=typeof b=="object"?b.value:b,r0(S)?null:S})(t.limit));let h=null;t.startAt&&(h=(function(b){const S=!!b.before,v=b.values||[];return new qd(v,S)})(t.startAt));let d=null;return t.endAt&&(d=(function(b){const S=!b.before,v=b.values||[];return new qd(v,S)})(t.endAt)),Rj(e,i,l,o,u,"F",h,d)}function sR(r,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function T3(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Ad(t.unaryFilter.field);return xr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Ad(t.unaryFilter.field);return xr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ad(t.unaryFilter.field);return xr.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ad(t.unaryFilter.field);return xr.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xt(61313);default:return xt(60726)}})(r):r.fieldFilter!==void 0?(function(t){return xr.create(Ad(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xt(58110);default:return xt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Jr.create(t.compositeFilter.filters.map((n=>T3(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xt(1026)}})(t.compositeFilter.op))})(r):xt(30097,{filter:r})}function aR(r){return Xj[r]}function lR(r){return Zj[r]}function cR(r){return eR[r]}function Td(r){return{fieldPath:r.canonicalString()}}function Ad(r){return In.fromServerFormat(r.fieldPath)}function A3(r){return r instanceof xr?(function(t){if(t.op==="=="){if(Nv(t.value))return{unaryFilter:{field:Td(t.field),op:"IS_NAN"}};if(Pv(t.value))return{unaryFilter:{field:Td(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Nv(t.value))return{unaryFilter:{field:Td(t.field),op:"IS_NOT_NAN"}};if(Pv(t.value))return{unaryFilter:{field:Td(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Td(t.field),op:lR(t.op),value:t.value}}})(r):r instanceof Jr?(function(t){const n=t.getFilters().map((i=>A3(i)));return n.length===1?n[0]:{compositeFilter:{op:cR(t.op),filters:n}}})(r):xt(54877,{filter:r})}function uR(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function C3(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,t,n,i,o=Pt.min(),l=Pt.min(),u=si.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Tl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.yt=e}}function dR(r,e){let t;if(e.document)t=nR(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=st.fromSegments(e.noDocument.path),i=Pu(e.noDocument.readTime);t=Fn.newNoDocument(n,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return xt(56709);{const n=st.fromSegments(e.unknownDocument.path),i=Pu(e.unknownDocument.version);t=Fn.newUnknownDocument(n,i)}}return e.readTime&&t.setReadTime((function(i){const o=new Kr(i[0],i[1]);return Pt.fromTimestamp(o)})(e.readTime)),t}function Yv(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Vm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(o,l){return{name:Fm(o,l.key),fields:l.data.value.mapValue.fields,updateTime:Yd(o,l.version.toTimestamp()),createTime:Yd(o,l.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:Ru(e.version)};else{if(!e.isUnknownDocument())return xt(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:Ru(e.version)}}return n}function Vm(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Ru(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pu(r){const e=new Kr(r.seconds,r.nanoseconds);return Pt.fromTimestamp(e)}function cu(r,e){const t=(e.baseMutations||[]).map((o=>V1(r.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];l.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const n=e.mutations.map((o=>V1(r.yt,o))),i=Kr.fromMillis(e.localWriteTimeMs);return new I5(e.batchId,i,t,n)}function Kh(r){const e=Pu(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Pu(r.lastLimboFreeSnapshotVersion):Pt.min();let n;return n=(function(o){return o.documents!==void 0})(r.query)?(function(o){const l=o.documents.length;return kt(l===1,1966,{count:l}),Ws(l0(v3(o.documents[0])))})(r.query):(function(o){return Ws(_3(o))})(r.query),new Tl(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,si.fromBase64String(r.resumeToken))}function I3(r,e){const t=Ru(e.snapshotVersion),n=Ru(e.lastLimboFreeSnapshotVersion);let i;i=Bm(e.target)?w3(r.yt,e.target):S3(r.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ju(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function E3(r){const e=_3({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?B1(e,e.limit,"L"):e}function qg(r,e){return new j5(e.largestBatchId,V1(r.yt,e.overlayMutation))}function Qv(r,e){const t=e.path.lastSegment();return[r,po(e.path.popLast()),t]}function Xv(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:Ru(n.readTime),documentKey:po(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{getBundleMetadata(e,t){return Zv(e).get(t).next((n=>{if(n)return(function(o){return{id:o.bundleId,createTime:Pu(o.createTime),version:o.version}})(n)}))}saveBundleMetadata(e,t){return Zv(e).put((function(i){return{bundleId:i.id,createTime:Ru(jo(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return eb(e).get(t).next((n=>{if(n)return(function(o){return{name:o.name,query:E3(o.bundledQuery),readTime:Pu(o.readTime)}})(n)}))}saveNamedQuery(e,t){return eb(e).put((function(i){return{name:i.name,readTime:Ru(jo(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function Zv(r){return pi(r,n0)}function eb(r){return pi(r,i0)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new p0(e,n)}getOverlay(e,t){return zh(e).get(Qv(this.userId,t)).next((n=>n?qg(this.serializer,n):null))}getOverlays(e,t){const n=$a();return je.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&n.set(i,o)})))).next((()=>n))}saveOverlays(e,t,n){const i=[];return n.forEach(((o,l)=>{const u=new j5(t,l);i.push(this.St(e,u))})),je.waitFor(i)}removeOverlaysForBatchId(e,t,n){const i=new Set;t.forEach((l=>i.add(po(l.getCollectionPath()))));const o=[];return i.forEach((l=>{const u=IDBKeyRange.bound([this.userId,l,n],[this.userId,l,n+1],!1,!0);o.push(zh(e).Z(C1,u))})),je.waitFor(o)}getOverlaysForCollection(e,t,n){const i=$a(),o=po(t),l=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return zh(e).J(C1,l).next((u=>{for(const h of u){const d=qg(this.serializer,h);i.set(d.getKey(),d)}return i}))}getOverlaysForCollectionGroup(e,t,n,i){const o=$a();let l;const u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zh(e).ee({index:j_,range:u},((h,d,g)=>{const b=qg(this.serializer,d);o.size()<i||b.largestBatchId===l?(o.set(b.getKey(),b),l=b.largestBatchId):g.done()})).next((()=>o))}St(e,t){return zh(e).put((function(i,o,l){const[u,h,d]=Qv(o,l.mutation.key);return{userId:o,collectionPath:h,documentId:d,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:zm(i.yt,l.mutation)}})(this.serializer,this.userId,t))}}function zh(r){return pi(r,o0)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{bt(e){return pi(e,w5)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const n=t==null?void 0:t.value;return n?si.fromUint8Array(n):si.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(xn(e.integerValue));else if("doubleValue"in e){const n=xn(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),yf(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),typeof n=="string"&&(n=El(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(jl(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?W_(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):a0(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):xt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const i of Object.keys(n))this.Ot(i,t),this.Ct(n[i],t)}kt(e,t){var l,u;const n=e.fields||{};this.Ft(t,53);const i=$d,o=((u=(l=n[i].arrayValue)==null?void 0:l.values)==null?void 0:u.length)||0;this.Ft(t,15),t.Mt(xn(o)),this.Ot(i,t),this.Ct(n[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const i of n)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),st.fromName(e).path.forEach((n=>{this.Ft(t,60),this.Ut(n,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}uu.Kt=new uu;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=255;function pR(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function tb(r){const e=64-(function(n){let i=0;for(let o=0;o<8;++o){const l=pR(255&n[o]);if(i+=l,l!==8)break}return i})(r);return Math.ceil(e/8)}class mR{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),n=tb(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),n=tb(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(gd),this.sn(255)}_n(){this.an(gd),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let i=1;i<t.length;++i)t[i]^=n?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===gd?(this.sn(gd),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===gd?(this.an(gd),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class gR{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class yR{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Vh{constructor(){this.cn=new mR,this.ln=new gR(this.cn),this.hn=new yR(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,t,n,i){this.Tn=e,this.In=t,this.En=n,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new du(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:hm(this.En),directionalValue:hm(this.dn),orderedDocumentKey:hm(t),documentKey:n.path.toArray()}}Vn(e,t,n){const i=this.Rn(e,t,n);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function lc(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=rb(r.En,e.En),t!==0?t:(t=rb(r.dn,e.dn),t!==0?t:st.comparator(r.In,e.In)))}function rb(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}function hm(r){return SS()?(function(t){let n="";for(let i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return n})(r):r}function nb(r){return typeof r!="string"?r:(function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n})(r)}class ib{constructor(e){this.mn=new Yr(((t,n)=>In.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const n=t;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(kt(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=_1(e);if(t!==void 0&&!this.wn(t))return!1;const n=ou(e);let i=new Set,o=0,l=0;for(;o<n.length&&this.wn(n[o]);++o)i=i.add(n[o].fieldPath.canonicalString());if(o===n.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!i.has(u.field.canonicalString())){const h=n[o];if(!this.Sn(u,h)||!this.bn(this.fn[l++],h))return!1}++o}for(;o<n.length;++o){const u=n[o];if(l>=this.fn.length||!this.bn(this.fn[l++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new Yr(In.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new im(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new im(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new im(n.field,n.dir==="asc"?0:1)));return new Em(Em.UNKNOWN_ID,this.collectionId,t,gf.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(r){var t,n;if(kt(r instanceof xr||r instanceof Jr,20012),r instanceof xr){if(r instanceof Q_){const i=((n=(t=r.value.arrayValue)==null?void 0:t.values)==null?void 0:n.map((o=>xr.create(r.field,"==",o))))||[];return Jr.create(i,"or")}return r}const e=r.filters.map((i=>j3(i)));return Jr.create(e,r.op)}function xR(r){if(r.getFilters().length===0)return[];const e=D1(j3(r));return kt(R3(e),7391),O1(e)||M1(e)?[e]:e.getFilters()}function O1(r){return r instanceof xr}function M1(r){return r instanceof Jr&&C5(r)}function R3(r){return O1(r)||M1(r)||(function(t){if(t instanceof Jr&&j1(t)){for(const n of t.getFilters())if(!O1(n)&&!M1(n))return!1;return!0}return!1})(r)}function D1(r){if(kt(r instanceof xr||r instanceof Jr,34018),r instanceof xr)return r;if(r.filters.length===1)return D1(r.filters[0]);const e=r.filters.map((n=>D1(n)));let t=Jr.create(e,r.op);return t=Om(t),R3(t)?t:(kt(t instanceof Jr,64498),kt(Hd(t),40251),kt(t.filters.length>1,57927),t.filters.reduce(((n,i)=>N5(n,i))))}function N5(r,e){let t;return kt(r instanceof xr||r instanceof Jr,38388),kt(e instanceof xr||e instanceof Jr,25473),t=r instanceof xr?e instanceof xr?(function(i,o){return Jr.create([i,o],"and")})(r,e):ob(r,e):e instanceof xr?ob(e,r):(function(i,o){if(kt(i.filters.length>0&&o.filters.length>0,48005),Hd(i)&&Hd(o))return K_(i,o.getFilters());const l=j1(i)?i:o,u=j1(i)?o:i,h=l.filters.map((d=>N5(d,u)));return Jr.create(h,"or")})(r,e),Om(t)}function ob(r,e){if(Hd(e))return K_(e,r.getFilters());{const t=e.filters.map((n=>N5(r,n)));return Jr.create(t,"or")}}function Om(r){if(kt(r instanceof xr||r instanceof Jr,11850),r instanceof xr)return r;const e=r.getFilters();if(e.length===1)return Om(e[0]);if(H_(r))return r;const t=e.map((i=>Om(i))),n=[];return t.forEach((i=>{i instanceof xr?n.push(i):i instanceof Jr&&(i.op===r.op?n.push(...i.filters):n.push(i))})),n.length===1?n[0]:Jr.create(n,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.Cn=new B5}addToCollectionParentIndex(e,t){return this.Cn.add(t),je.resolve()}getCollectionParents(e,t){return je.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return je.resolve()}deleteFieldIndex(e,t){return je.resolve()}deleteAllFieldIndexes(e){return je.resolve()}createTargetIndexes(e,t){return je.resolve()}getDocumentsMatchingTarget(e,t){return je.resolve(null)}getIndexType(e,t){return je.resolve(0)}getFieldIndexes(e,t){return je.resolve([])}getNextCollectionGroupToUpdate(e){return je.resolve(null)}getMinOffset(e,t){return je.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,t){return je.resolve(vs.min())}updateCollectionGroup(e,t,n){return je.resolve()}updateIndexEntries(e,t){return je.resolve()}}class B5{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Yr(Nr.comparator),o=!i.has(n);return this.index[t]=i.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Yr(Nr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="IndexedDbIndexManager",Wp=new Uint8Array(0);class bR{constructor(e,t){this.databaseId=t,this.vn=new B5,this.Fn=new Pl((n=>ju(n)),((n,i)=>Mf(n,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:n,parent:po(i)};return ab(e).put(o)}return je.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[x_(t),""],!1,!0);return ab(e).J(i).next((o=>{for(const l of o){if(l.collectionId!==t)break;n.push(Wa(l.parent))}return n}))}addFieldIndex(e,t){const n=Oh(e),i=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(t);delete i.indexId;const o=n.add(i);if(t.indexState){const l=xd(e);return o.next((u=>{l.put(Xv(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const n=Oh(e),i=xd(e),o=yd(e);return n.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Oh(e),n=yd(e),i=xd(e);return t.Z().next((()=>n.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return je.forEach(this.Mn(t),(n=>this.getIndexType(e,n).next((i=>{if(i===0||i===1){const o=new ib(n).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const n=yd(e);let i=!0;const o=new Map;return je.forEach(this.Mn(t),(l=>this.xn(e,l).next((u=>{i&&(i=!!u),o.set(l,u)})))).next((()=>{if(i){let l=ur();const u=[];return je.forEach(o,((h,d)=>{Qe(sb,`Using index ${(function($){return`id=${$.indexId}|cg=${$.collectionGroup}|f=${$.fields.map((F=>`${F.fieldPath}:${F.kind}`)).join(",")}`})(h)} to execute ${ju(t)}`);const g=(function($,F){const ne=_1(F);if(ne===void 0)return null;for(const ue of Lm($,ne.fieldPath))switch(ue.op){case"array-contains-any":return ue.value.arrayValue.values||[];case"array-contains":return[ue.value]}return null})(d,h),b=(function($,F){const ne=new Map;for(const ue of ou(F))for(const V of Lm($,ue.fieldPath))switch(V.op){case"==":case"in":ne.set(ue.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return ne.set(ue.fieldPath.canonicalString(),V.value),Array.from(ne.values())}return null})(d,h),S=(function($,F){const ne=[];let ue=!0;for(const V of ou(F)){const k=V.kind===0?Vv($,V.fieldPath,$.startAt):Ov($,V.fieldPath,$.startAt);ne.push(k.value),ue&&(ue=k.inclusive)}return new qd(ne,ue)})(d,h),v=(function($,F){const ne=[];let ue=!0;for(const V of ou(F)){const k=V.kind===0?Ov($,V.fieldPath,$.endAt):Vv($,V.fieldPath,$.endAt);ne.push(k.value),ue&&(ue=k.inclusive)}return new qd(ne,ue)})(d,h),N=this.On(h,d,S),E=this.On(h,d,v),L=this.Nn(h,d,b),C=this.Bn(h.indexId,g,N,S.inclusive,E,v.inclusive,L);return je.forEach(C,(M=>n.Y(M,t.limit).next(($=>{$.forEach((F=>{const ne=st.fromSegments(F.documentKey);l.has(ne)||(l=l.add(ne),u.push(ne))}))}))))})).next((()=>u))}return je.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=xR(Jr.create(e.filters,"and")).map((n=>P1(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,n,i,o,l,u){const h=(t!=null?t.length:1)*Math.max(n.length,o.length),d=h/(t!=null?t.length:1),g=[];for(let b=0;b<h;++b){const S=t?this.Ln(t[b/d]):Wp,v=this.kn(e,S,n[b%d],i),N=this.qn(e,S,o[b%d],l),E=u.map((L=>this.kn(e,S,L,!0)));g.push(...this.createRange(v,N,E))}return g}kn(e,t,n,i){const o=new du(e,st.empty(),t,n);return i?o:o.An()}qn(e,t,n,i){const o=new du(e,st.empty(),t,n);return i?o.An():o}xn(e,t){const n=new ib(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((o=>{let l=null;for(const u of o)n.yn(u)&&(!l||u.fields.length>l.fields.length)&&(l=u);return l}))}getIndexType(e,t){let n=2;const i=this.Mn(t);return je.forEach(i,(o=>this.xn(e,o).next((l=>{l?n!==0&&l.fields.length<(function(h){let d=new Yr(In.comparator),g=!1;for(const b of h.filters)for(const S of b.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?g=!0:d=d.add(S.field));for(const b of h.orderBy)b.field.isKeyField()||(d=d.add(b.field));return d.size+(g?1:0)})(o)&&(n=1):n=0})))).next((()=>(function(l){return l.limit!==null})(t)&&i.length>1&&n===2?1:n))}Qn(e,t){const n=new Vh;for(const i of ou(e)){const o=t.data.field(i.fieldPath);if(o==null)return null;const l=n.Pn(i.kind);uu.Kt.Dt(o,l)}return n.un()}Ln(e){const t=new Vh;return uu.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new Vh;return uu.Kt.Dt(_f(this.databaseId,t),n.Pn((function(o){const l=ou(o);return l.length===0?0:l[l.length-1].kind})(e))),n.un()}Nn(e,t,n){if(n===null)return[];let i=[];i.push(new Vh);let o=0;for(const l of ou(e)){const u=n[o++];for(const h of i)if(this.Un(t,l.fieldPath)&&Tf(u))i=this.Kn(i,l,u);else{const d=h.Pn(l.kind);uu.Kt.Dt(u,d)}}return this.Wn(i)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const i=[...e],o=[];for(const l of n.arrayValue.values||[])for(const u of i){const h=new Vh;h.seed(u.un()),uu.Kt.Dt(l,h.Pn(t.kind)),o.push(h)}return o}Un(e,t){return!!e.filters.find((n=>n instanceof xr&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=Oh(e),i=xd(e);return(t?n.J(A1,IDBKeyRange.bound(t,t)):n.J()).next((o=>{const l=[];return je.forEach(o,(u=>i.get([u.indexId,this.uid]).next((h=>{l.push((function(g,b){const S=b?new gf(b.sequenceNumber,new vs(Pu(b.readTime),new st(Wa(b.documentKey)),b.largestBatchId)):gf.empty(),v=g.fields.map((([N,E])=>new im(In.fromServerFormat(N),E)));return new Em(g.indexId,g.collectionGroup,v,S)})(u,h))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,i)=>{const o=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Zt(n.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const i=Oh(e),o=xd(e);return this.Gn(e).next((l=>i.J(A1,IDBKeyRange.bound(t,t)).next((u=>je.forEach(u,(h=>o.put(Xv(h.indexId,this.uid,l,n))))))))}updateIndexEntries(e,t){const n=new Map;return je.forEach(t,((i,o)=>{const l=n.get(i.collectionGroup);return(l?je.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next((u=>(n.set(i.collectionGroup,u),je.forEach(u,(h=>this.zn(e,i,h).next((d=>{const g=this.jn(o,h);return d.isEqual(g)?je.resolve():this.Jn(e,o,h,d,g)})))))))}))}Hn(e,t,n,i){return yd(e).put(i.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,i){return yd(e).delete(i.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const i=yd(e);let o=new Yr(lc);return i.ee({index:E_,range:IDBKeyRange.only([n.indexId,this.uid,hm(this.$n(n,t))])},((l,u)=>{o=o.add(new du(n.indexId,t,nb(u.arrayValue),nb(u.directionalValue)))})).next((()=>o))}jn(e,t){let n=new Yr(lc);const i=this.Qn(t,e);if(i==null)return n;const o=_1(t);if(o!=null){const l=e.data.field(o.fieldPath);if(Tf(l))for(const u of l.arrayValue.values||[])n=n.add(new du(t.indexId,e.key,this.Ln(u),i))}else n=n.add(new du(t.indexId,e.key,Wp,i));return n}Jn(e,t,n,i,o){Qe(sb,"Updating index entries for document '%s'",t.key);const l=[];return(function(h,d,g,b,S){const v=h.getIterator(),N=d.getIterator();let E=md(v),L=md(N);for(;E||L;){let C=!1,M=!1;if(E&&L){const $=g(E,L);$<0?M=!0:$>0&&(C=!0)}else E!=null?M=!0:C=!0;C?(b(L),L=md(N)):M?(S(E),E=md(v)):(E=md(v),L=md(N))}})(i,o,lc,(u=>{l.push(this.Hn(e,t,n,u))}),(u=>{l.push(this.Yn(e,t,n,u))})),je.waitFor(l)}Gn(e){let t=1;return xd(e).ee({index:I_,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,i,o)=>{o.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((l,u)=>lc(l,u))).filter(((l,u,h)=>!u||lc(l,h[u-1])!==0));const i=[];i.push(e);for(const l of n){const u=lc(l,e),h=lc(l,t);if(u===0)i[0]=e.An();else if(u>0&&h<0)i.push(l),i.push(l.An());else if(h>0)break}i.push(t);const o=[];for(let l=0;l<i.length;l+=2){if(this.Zn(i[l],i[l+1]))return[];const u=i[l].Vn(this.uid,Wp,st.empty()),h=i[l+1].Vn(this.uid,Wp,st.empty());o.push(IDBKeyRange.bound(u,h))}return o}Zn(e,t){return lc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(lb)}getMinOffset(e,t){return je.mapArray(this.Mn(t),(n=>this.xn(e,n).next((i=>i||xt(44426))))).next(lb)}}function ab(r){return pi(r,bf)}function yd(r){return pi(r,nf)}function Oh(r){return pi(r,b5)}function xd(r){return pi(r,rf)}function lb(r){kt(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const i=r[n].indexState.offset;y5(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new vs(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},P3=41943040;class ho{static withCacheSize(e){return new ho(e,ho.DEFAULT_COLLECTION_PERCENTILE,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(r,e,t){const n=r.store(ha),i=r.store(Od),o=[],l=IDBKeyRange.only(t.batchId);let u=0;const h=n.ee({range:l},((g,b,S)=>(u++,S.delete())));o.push(h.next((()=>{kt(u===1,47070,{batchId:t.batchId})})));const d=[];for(const g of t.mutations){const b=A_(e,g.key.path,t.batchId);o.push(i.delete(b)),d.push(g.key)}return je.waitFor(o).next((()=>d))}function Mm(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw xt(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ho.DEFAULT_COLLECTION_PERCENTILE=10,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ho.DEFAULT=new ho(P3,ho.DEFAULT_COLLECTION_PERCENTILE,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ho.DISABLED=new ho(-1,0,0);class m0{constructor(e,t,n,i){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=i,this.Xn={}}static wt(e,t,n,i){kt(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new m0(o,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cc(e).ee({index:pu,range:n},((i,o,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,n,i){const o=Cd(e),l=cc(e);return l.add({}).next((u=>{kt(typeof u=="number",49019);const h=new I5(u,t,n,i),d=(function(v,N,E){const L=E.baseMutations.map((M=>zm(v.yt,M))),C=E.mutations.map((M=>zm(v.yt,M)));return{userId:N,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:L,mutations:C}})(this.serializer,this.userId,h),g=[];let b=new Yr(((S,v)=>Zt(S.canonicalString(),v.canonicalString())));for(const S of i){const v=A_(this.userId,S.key.path,u);b=b.add(S.key.path.popLast()),g.push(l.put(d)),g.push(o.put(v,J7))}return b.forEach((S=>{g.push(this.indexManager.addToCollectionParentIndex(e,S))})),e.addOnCommittedListener((()=>{this.Xn[u]=h.keys()})),je.waitFor(g).next((()=>h))}))}lookupMutationBatch(e,t){return cc(e).get(t).next((n=>n?(kt(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),cu(this.serializer,n)):null))}er(e,t){return this.Xn[t]?je.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const i=n.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let o=null;return cc(e).ee({index:pu,range:i},((l,u,h)=>{u.userId===this.userId&&(kt(u.batchId>=n,47524,{tr:n}),o=cu(this.serializer,u)),h.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=gu;return cc(e).ee({index:pu,range:t,reverse:!0},((i,o,l)=>{n=o.batchId,l.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,gu],[this.userId,Number.POSITIVE_INFINITY]);return cc(e).J(pu,t).next((n=>n.map((i=>cu(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=om(this.userId,t.path),i=IDBKeyRange.lowerBound(n),o=[];return Cd(e).ee({range:i},((l,u,h)=>{const[d,g,b]=l,S=Wa(g);if(d===this.userId&&t.path.isEqual(S))return cc(e).get(b).next((v=>{if(!v)throw xt(61480,{nr:l,batchId:b});kt(v.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:v.userId,batchId:b}),o.push(cu(this.serializer,v))}));h.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Yr(Zt);const i=[];return t.forEach((o=>{const l=om(this.userId,o.path),u=IDBKeyRange.lowerBound(l),h=Cd(e).ee({range:u},((d,g,b)=>{const[S,v,N]=d,E=Wa(v);S===this.userId&&o.path.isEqual(E)?n=n.add(N):b.done()}));i.push(h)})),je.waitFor(i).next((()=>this.rr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,o=om(this.userId,n),l=IDBKeyRange.lowerBound(o);let u=new Yr(Zt);return Cd(e).ee({range:l},((h,d,g)=>{const[b,S,v]=h,N=Wa(S);b===this.userId&&n.isPrefixOf(N)?N.length===i&&(u=u.add(v)):g.done()})).next((()=>this.rr(e,u)))}rr(e,t){const n=[],i=[];return t.forEach((o=>{i.push(cc(e).get(o).next((l=>{if(l===null)throw xt(35274,{batchId:o});kt(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:o}),n.push(cu(this.serializer,l))})))})),je.waitFor(i).next((()=>n))}removeMutationBatch(e,t){return N3(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),je.forEach(n,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return je.resolve();const n=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),i=[];return Cd(e).ee({range:n},((o,l,u)=>{if(o[0]===this.userId){const h=Wa(o[1]);i.push(h)}else u.done()})).next((()=>{kt(i.length===0,56720,{sr:i.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return B3(e,this.userId,t)}_r(e){return L3(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:gu,lastStreamToken:""}))}}function B3(r,e,t){const n=om(e,t.path),i=n[1],o=IDBKeyRange.lowerBound(n);let l=!1;return Cd(r).ee({range:o,X:!0},((u,h,d)=>{const[g,b,S]=u;g===e&&b===i&&(l=!0),d.done()})).next((()=>l))}function cc(r){return pi(r,ha)}function Cd(r){return pi(r,Od)}function L3(r){return pi(r,xf)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Nu(0)}static cr(){return new Nu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const n=new Nu(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Pt.fromTimestamp(new Kr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>vd(e).delete(t.targetId))).next((()=>this.lr(e))).next((n=>(kt(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n))))}removeTargets(e,t,n){let i=0;const o=[];return vd(e).ee(((l,u)=>{const h=Kh(u);h.sequenceNumber<=t&&n.get(h.targetId)===null&&(i++,o.push(this.removeTargetData(e,h)))})).next((()=>je.waitFor(o))).next((()=>i))}forEachTarget(e,t){return vd(e).ee(((n,i)=>{const o=Kh(i);t(o)}))}lr(e){return ub(e).get(Pm).next((t=>(kt(t!==null,2888),t)))}hr(e,t){return ub(e).put(Pm,t)}Pr(e,t){return vd(e).put(I3(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const n=ju(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let o=null;return vd(e).ee({range:i,index:k_},((l,u,h)=>{const d=Kh(u);Mf(t,d.target)&&(o=d,h.done())})).next((()=>o))}addMatchingKeys(e,t,n){const i=[],o=mc(e);return t.forEach((l=>{const u=po(l.path);i.push(o.put({targetId:n,path:u})),i.push(this.referenceDelegate.addReference(e,n,l))})),je.waitFor(i)}removeMatchingKeys(e,t,n){const i=mc(e);return je.forEach(t,(o=>{const l=po(o.path);return je.waitFor([i.delete([n,l]),this.referenceDelegate.removeReference(e,n,o)])}))}removeMatchingKeysForTargetId(e,t){const n=mc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=mc(e);let o=ur();return i.ee({range:n,X:!0},((l,u,h)=>{const d=Wa(l[1]),g=new st(d);o=o.add(g)})).next((()=>o))}containsKey(e,t){const n=po(t.path),i=IDBKeyRange.bound([n],[x_(n)],!1,!0);let o=0;return mc(e).ee({index:v5,X:!0,range:i},(([l,u],h,d)=>{l!==0&&(o++,d.done())})).next((()=>o>0))}At(e,t){return vd(e).get(t).next((n=>n?Kh(n):null))}}function vd(r){return pi(r,Md)}function ub(r){return pi(r,yu)}function mc(r){return pi(r,Dd)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="LruGarbageCollector",SR=1048576;function hb([r,e],[t,n]){const i=Zt(r,t);return i===0?Zt(e,n):i}class _R{constructor(e){this.Ir=e,this.buffer=new Yr(hb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();hb(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class F3{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Qe(db,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Nc(t)?Qe(db,"Ignoring IndexedDB error during garbage collection: ",t):await Mu(t)}await this.Vr(3e5)}))}}class TR{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return je.resolve(Ds.ce);const n=new _R(t);return this.mr.forEachTarget(e,(i=>n.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>n.Ar(i))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Qe("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(cb)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,i,o,l,u,h,d;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(Qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),i=this.params.maximumSequenceNumbersToCollect):i=b,l=Date.now(),this.nthSequenceNumber(e,i)))).next((b=>(n=b,u=Date.now(),this.removeTargets(e,n,t)))).next((b=>(o=b,h=Date.now(),this.removeOrphanedDocuments(e,n)))).next((b=>(d=Date.now(),Sd()<=yr.DEBUG&&Qe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${i} in `+(u-l)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${b} documents in `+(d-h)+`ms
Total Duration: ${d-g}ms`),je.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:b}))))}}function z3(r,e){return new TR(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,t){this.db=e,this.garbageCollector=z3(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((i=>n+i))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((n,i)=>t(i)))}addReference(e,t,n){return $p(e,n)}removeReference(e,t,n){return $p(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return $p(e,t)}br(e,t){return(function(i,o){let l=!1;return L3(i).te((u=>B3(i,u,o).next((h=>(h&&(l=!0),je.resolve(!h)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Sr(e,((l,u)=>{if(u<=t){const h=this.br(e,l).next((d=>{if(!d)return o++,n.getEntry(e,l).next((()=>(n.removeEntry(l,Pt.min()),mc(e).delete((function(b){return[0,po(b.path)]})(l)))))}));i.push(h)}})).next((()=>je.waitFor(i))).next((()=>n.apply(e))).next((()=>o))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return $p(e,t)}Sr(e,t){const n=mc(e);let i,o=Ds.ce;return n.ee({index:v5},(([l,u],{path:h,sequenceNumber:d})=>{l===0?(o!==Ds.ce&&t(new st(Wa(i)),o),o=d,i=h):o=Ds.ce})).next((()=>{o!==Ds.ce&&t(new st(Wa(i)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $p(r,e){return mc(r).put((function(n,i){return{targetId:0,path:po(n.path),sequenceNumber:i}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(){this.changes=new Pl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?je.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return ru(e).put(n)}removeEntry(e,t,n){return ru(e).delete((function(o,l){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Vm(l),u[u.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Dr(e,n))))}getEntry(e,t){let n=Fn.newInvalidDocument(t);return ru(e).ee({index:sm,range:IDBKeyRange.only(Mh(t))},((i,o)=>{n=this.Cr(t,o)})).next((()=>n))}vr(e,t){let n={size:0,document:Fn.newInvalidDocument(t)};return ru(e).ee({index:sm,range:IDBKeyRange.only(Mh(t))},((i,o)=>{n={document:this.Cr(t,o),size:Mm(o)}})).next((()=>n))}getEntries(e,t){let n=gs();return this.Fr(e,t,((i,o)=>{const l=this.Cr(i,o);n=n.insert(i,l)})).next((()=>n))}Mr(e,t){let n=gs(),i=new vn(st.comparator);return this.Fr(e,t,((o,l)=>{const u=this.Cr(o,l);n=n.insert(o,u),i=i.insert(o,Mm(l))})).next((()=>({documents:n,Or:i})))}Fr(e,t,n){if(t.isEmpty())return je.resolve();let i=new Yr(mb);t.forEach((h=>i=i.add(h)));const o=IDBKeyRange.bound(Mh(i.first()),Mh(i.last())),l=i.getIterator();let u=l.getNext();return ru(e).ee({index:sm,range:o},((h,d,g)=>{const b=st.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;u&&mb(u,b)<0;)n(u,null),u=l.getNext();u&&u.isEqual(b)&&(n(u,d),u=l.hasNext()?l.getNext():null),u?g.j(Mh(u)):g.done()})).next((()=>{for(;u;)n(u,null),u=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,n,i,o){const l=t.path,u=[l.popLast().toArray(),l.lastSegment(),Vm(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],h=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ru(e).J(IDBKeyRange.bound(u,h,!0)).next((d=>{o==null||o.incrementDocumentReadCount(d.length);let g=gs();for(const b of d){const S=this.Cr(st.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);S.isFoundDocument()&&(Df(t,S)||i.has(S.key))&&(g=g.insert(S.key,S))}return g}))}getAllFromCollectionGroup(e,t,n,i){let o=gs();const l=pb(t,n),u=pb(t,vs.max());return ru(e).ee({index:C_,range:IDBKeyRange.bound(l,u,!0)},((h,d,g)=>{const b=this.Cr(st.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);o=o.insert(b.key,b),o.size===i&&g.done()})).next((()=>o))}newChangeBuffer(e){return new kR(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return fb(e).get(T1).next((t=>(kt(!!t,20021),t)))}Dr(e,t){return fb(e).put(T1,t)}Cr(e,t){if(t){const n=dR(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(Pt.min())))return n}return Fn.newInvalidDocument(e)}}function O3(r){return new CR(r)}class kR extends V3{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Pl((n=>n.toString()),((n,i)=>n.isEqual(i)))}applyChanges(e){const t=[];let n=0,i=new Yr(((o,l)=>Zt(o.canonicalString(),l.canonicalString())));return this.changes.forEach(((o,l)=>{const u=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,u.readTime)),l.isValidDocument()){const h=Yv(this.Nr.serializer,l);i=i.add(o.path.popLast());const d=Mm(h);n+=d-u.size,t.push(this.Nr.addEntry(e,o,h))}else if(n-=u.size,this.trackRemovals){const h=Yv(this.Nr.serializer,l.convertToNoDocument(Pt.min()));t.push(this.Nr.addEntry(e,o,h))}})),i.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,n)),je.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((n=>(this.Br.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:n,Or:i})=>(i.forEach(((o,l)=>{this.Br.set(o,{size:l,readTime:n.get(o).readTime})})),n)))}}function fb(r){return pi(r,vf)}function ru(r){return pi(r,Rm)}function Mh(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function pb(r,e){const t=e.documentKey.path.toArray();return[r,Vm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function mb(r,e){const t=r.path.toArray(),n=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<n.length-2;++o)if(i=Zt(t[o],n[o]),i)return i;return i=Zt(t.length,n.length),i||(i=Zt(t[t.length-2],n[n.length-2]),i||Zt(t[t.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(n!==null&&lf(n.mutation,i,Ko.empty(),Kr.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,ur()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=ur()){const i=$a();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((o=>{let l=Hh();return o.forEach(((u,h)=>{l=l.insert(u,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const n=$a();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,ur())))}populateOverlays(e,t,n){const i=[];return n.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((l,u)=>{t.set(l,u)}))}))}computeViews(e,t,n,i){let o=gs();const l=af(),u=(function(){return af()})();return t.forEach(((h,d)=>{const g=n.get(d.key);i.has(d.key)&&(g===void 0||g.mutation instanceof Nl)?o=o.insert(d.key,d):g!==void 0?(l.set(d.key,g.mutation.getFieldMask()),lf(g.mutation,d,g.mutation.getFieldMask(),Kr.now())):l.set(d.key,Ko.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((d,g)=>l.set(d,g))),t.forEach(((d,g)=>u.set(d,new IR(g,l.get(d)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=af();let i=new vn(((l,u)=>l-u)),o=ur();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const u of l)u.keys().forEach((h=>{const d=t.get(h);if(d===null)return;let g=n.get(h)||Ko.empty();g=u.applyToLocalView(d,g),n.set(h,g);const b=(i.get(u.batchId)||ur()).add(h);i=i.insert(u.batchId,b)}))})).next((()=>{const l=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),d=h.key,g=h.value,b=n3();g.forEach((S=>{if(!o.has(S)){const v=u3(t.get(S),n.get(S));v!==null&&b.set(S,v),o=o.add(S)}})),l.push(this.documentOverlayCache.saveOverlays(e,d,b))}return je.waitFor(l)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,i){return(function(l){return st.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):X_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-o.size):je.resolve($a());let u=mf,h=o;return l.next((d=>je.forEach(d,((g,b)=>(u<b.largestBatchId&&(u=b.largestBatchId),o.get(g)?je.resolve():this.remoteDocumentCache.getEntry(e,g).next((S=>{h=h.insert(g,S)}))))).next((()=>this.populateOverlays(e,d,o))).next((()=>this.computeViews(e,h,d,ur()))).next((g=>({batchId:u,changes:r3(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new st(t)).next((n=>{let i=Hh();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const o=t.collectionGroup;let l=Hh();return this.indexManager.getCollectionParents(e,o).next((u=>je.forEach(u,(h=>{const d=(function(b,S){return new oh(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,n,i).next((g=>{g.forEach(((b,S)=>{l=l.insert(b,S)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,i)))).next((l=>{o.forEach(((h,d)=>{const g=d.getKey();l.get(g)===null&&(l=l.insert(g,Fn.newInvalidDocument(g)))}));let u=Hh();return l.forEach(((h,d)=>{const g=o.get(h);g!==void 0&&lf(g.mutation,d,Ko.empty(),Kr.now()),Df(t,d)&&(u=u.insert(h,d))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return je.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:jo(i.createTime)}})(t)),je.resolve()}getNamedQuery(e,t){return je.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:E3(i.bundledQuery),readTime:jo(i.readTime)}})(t)),je.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(){this.overlays=new vn(st.comparator),this.qr=new Map}getOverlay(e,t){return je.resolve(this.overlays.get(t))}getOverlays(e,t){const n=$a();return je.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&n.set(i,o)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((i,o)=>{this.St(e,t,o)})),je.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(n)),je.resolve()}getOverlaysForCollection(e,t,n){const i=$a(),o=t.length+1,l=new st(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const h=u.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&h.largestBatchId>n&&i.set(h.getKey(),h)}return je.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let o=new vn(((d,g)=>d-g));const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>n){let g=o.get(d.largestBatchId);g===null&&(g=$a(),o=o.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const u=$a(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((d,g)=>u.set(d,g))),!(u.size()>=i)););return je.resolve(u)}St(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(n.key,new j5(t,n));let o=this.qr.get(t);o===void 0&&(o=ur(),this.qr.set(t,o)),this.qr.set(t,o.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.sessionToken=si.EMPTY_BYTE_STRING}getSessionToken(e){return je.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,je.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(){this.Qr=new Yr(ji.$r),this.Ur=new Yr(ji.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new ji(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new ji(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new st(new Nr([])),n=new ji(t,e),i=new ji(t,e+1),o=[];return this.Ur.forEachInRange([n,i],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new st(new Nr([])),n=new ji(t,e),i=new ji(t,e+1);let o=ur();return this.Ur.forEachInRange([n,i],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new ji(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class ji{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return st.comparator(e.key,t.key)||Zt(e.Yr,t.Yr)}static Kr(e,t){return Zt(e.Yr,t.Yr)||st.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Yr(ji.$r)}checkEmpty(e){return je.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new I5(o,t,n,i);this.mutationQueue.push(l);for(const u of i)this.Zr=this.Zr.add(new ji(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return je.resolve(l)}lookupMutationBatch(e,t){return je.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.ei(n),o=i<0?0:i;return je.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(this.mutationQueue.length===0?gu:this.tr-1)}getAllMutationBatches(e){return je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ji(t,0),i=new ji(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,i],(l=>{const u=this.Xr(l.Yr);o.push(u)})),je.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Yr(Zt);return t.forEach((i=>{const o=new ji(i,0),l=new ji(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(u=>{n=n.add(u.Yr)}))})),je.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let o=n;st.isDocumentKey(o)||(o=o.child(""));const l=new ji(new st(o),0);let u=new Yr(Zt);return this.Zr.forEachWhile((h=>{const d=h.key.path;return!!n.isPrefixOf(d)&&(d.length===i&&(u=u.add(h.Yr)),!0)}),l),je.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((n=>{const i=this.Xr(n);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){kt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return je.forEach(t.mutations,(i=>{const o=new ji(i.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new ji(t,0),i=this.Zr.firstAfterOrEqual(n);return je.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,je.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.ri=e,this.docs=(function(){return new vn(st.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),o=i?i.size:0,l=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return je.resolve(n?n.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let n=gs();return t.forEach((i=>{const o=this.docs.get(i);n=n.insert(i,o?o.document.mutableCopy():Fn.newInvalidDocument(i))})),je.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let o=gs();const l=t.path,u=new st(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:d,value:{document:g}}=h.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||y5(w_(g),n)<=0||(i.has(g.key)||Df(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return je.resolve(o)}getAllFromCollectionGroup(e,t,n,i){xt(9500)}ii(e,t){return je.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new BR(this)}getSize(e){return je.resolve(this.size)}}class BR extends V3{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)})),je.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.persistence=e,this.si=new Pl((t=>ju(t)),Mf),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.oi=0,this._i=new L5,this.targetCount=0,this.ai=Nu.ur()}forEachTarget(e,t){return this.si.forEach(((n,i)=>t(i))),je.resolve()}getLastRemoteSnapshotVersion(e){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return je.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),je.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Nu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,je.resolve()}updateTargetData(e,t){return this.Pr(t),je.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,je.resolve()}removeTargets(e,t,n){let i=0;const o=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),je.waitFor(o).next((()=>i))}getTargetCount(e){return je.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return je.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),je.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((l=>{o.push(i.markPotentiallyOrphaned(e,l))})),je.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),je.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return je.resolve(n)}containsKey(e,t){return je.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ds(0),this.li=!1,this.li=!0,this.hi=new RR,this.referenceDelegate=e(this),this.Pi=new LR(this),this.indexManager=new vR,this.remoteDocumentCache=(function(i){return new NR(i)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new k3(t),this.Ii=new ER(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new PR(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Qe("MemoryPersistence","Starting transaction:",e);const i=new FR(this.ci.next());return this.referenceDelegate.Ei(),n(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,t){return je.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class FR extends __{constructor(e){super(),this.currentSequenceNumber=e}}class g0{constructor(e){this.persistence=e,this.Ri=new L5,this.Vi=null}static mi(e){return new g0(e)}get fi(){if(this.Vi)return this.Vi;throw xt(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),je.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),je.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),je.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.fi,(n=>{const i=st.fromPath(n);return this.gi(e,i).next((o=>{o||t.removeEntry(i,Pt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return je.or([()=>je.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Dm{constructor(e,t){this.persistence=e,this.pi=new Pl((n=>po(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=z3(this,t)}static mi(e,t){return new Dm(e,t)}Ei(){}di(e){return je.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((i=>n+i))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return je.forEach(this.pi,((n,i)=>this.br(e,n,i).next((o=>o?je.resolve():t(i)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(l=>this.br(e,l,t).next((u=>{u||(n++,o.removeEntry(l,Pt.min()))})))).next((()=>o.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),je.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),je.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),je.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),je.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=lm(e.data.value)),t}br(e,t,n){return je.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return je.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.serializer=e}k(e,t,n,i){const o=new t0("createOrUpgrade",t);n<1&&i>=1&&((function(h){h.createObjectStore(Of)})(e),(function(h){h.createObjectStore(xf,{keyPath:K7}),h.createObjectStore(ha,{keyPath:Cv,autoIncrement:!0}).createIndex(pu,kv,{unique:!0}),h.createObjectStore(Od)})(e),gb(e),(function(h){h.createObjectStore(su)})(e));let l=je.resolve();return n<3&&i>=3&&(n!==0&&((function(h){h.deleteObjectStore(Dd),h.deleteObjectStore(Md),h.deleteObjectStore(yu)})(e),gb(e)),l=l.next((()=>(function(h){const d=h.store(yu),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pt.min().toTimestamp(),targetCount:0};return d.put(Pm,g)})(o)))),n<4&&i>=4&&(n!==0&&(l=l.next((()=>(function(h,d){return d.store(ha).J().next((b=>{h.deleteObjectStore(ha),h.createObjectStore(ha,{keyPath:Cv,autoIncrement:!0}).createIndex(pu,kv,{unique:!0});const S=d.store(ha),v=b.map((N=>S.put(N)));return je.waitFor(v)}))})(e,o)))),l=l.next((()=>{(function(h){h.createObjectStore(Wd,{keyPath:nj})})(e)}))),n<5&&i>=5&&(l=l.next((()=>this.yi(o)))),n<6&&i>=6&&(l=l.next((()=>((function(h){h.createObjectStore(vf)})(e),this.wi(o))))),n<7&&i>=7&&(l=l.next((()=>this.Si(o)))),n<8&&i>=8&&(l=l.next((()=>this.bi(e,o)))),n<9&&i>=9&&(l=l.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&i>=10&&(l=l.next((()=>this.Di(o)))),n<11&&i>=11&&(l=l.next((()=>{(function(h){h.createObjectStore(n0,{keyPath:ij})})(e),(function(h){h.createObjectStore(i0,{keyPath:oj})})(e)}))),n<12&&i>=12&&(l=l.next((()=>{(function(h){const d=h.createObjectStore(o0,{keyPath:hj});d.createIndex(C1,fj,{unique:!1}),d.createIndex(j_,pj,{unique:!1})})(e)}))),n<13&&i>=13&&(l=l.next((()=>(function(h){const d=h.createObjectStore(Rm,{keyPath:Y7});d.createIndex(sm,Q7),d.createIndex(C_,X7)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(su)))),n<14&&i>=14&&(l=l.next((()=>this.Fi(e,o)))),n<15&&i>=15&&(l=l.next((()=>(function(h){h.createObjectStore(b5,{keyPath:sj,autoIncrement:!0}).createIndex(A1,aj,{unique:!1}),h.createObjectStore(rf,{keyPath:lj}).createIndex(I_,cj,{unique:!1}),h.createObjectStore(nf,{keyPath:uj}).createIndex(E_,dj,{unique:!1})})(e)))),n<16&&i>=16&&(l=l.next((()=>{t.objectStore(rf).clear()})).next((()=>{t.objectStore(nf).clear()}))),n<17&&i>=17&&(l=l.next((()=>{(function(h){h.createObjectStore(w5,{keyPath:mj})})(e)}))),n<18&&i>=18&&SS()&&(l=l.next((()=>{t.objectStore(rf).clear()})).next((()=>{t.objectStore(nf).clear()}))),l}wi(e){let t=0;return e.store(su).ee(((n,i)=>{t+=Mm(i)})).next((()=>{const n={byteSize:t};return e.store(vf).put(T1,n)}))}yi(e){const t=e.store(xf),n=e.store(ha);return t.J().next((i=>je.forEach(i,(o=>{const l=IDBKeyRange.bound([o.userId,gu],[o.userId,o.lastAcknowledgedBatchId]);return n.J(pu,l).next((u=>je.forEach(u,(h=>{kt(h.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:h.batchId});const d=cu(this.serializer,h);return N3(e,o.userId,d).next((()=>{}))}))))}))))}Si(e){const t=e.store(Dd),n=e.store(su);return e.store(yu).get(Pm).next((i=>{const o=[];return n.ee(((l,u)=>{const h=new Nr(l),d=(function(b){return[0,po(b)]})(h);o.push(t.get(d).next((g=>g?je.resolve():(b=>t.put({targetId:0,path:po(b),sequenceNumber:i.highestListenSequenceNumber}))(h))))})).next((()=>je.waitFor(o)))}))}bi(e,t){e.createObjectStore(bf,{keyPath:rj});const n=t.store(bf),i=new B5,o=l=>{if(i.add(l)){const u=l.lastSegment(),h=l.popLast();return n.put({collectionId:u,parent:po(h)})}};return t.store(su).ee({X:!0},((l,u)=>{const h=new Nr(l);return o(h.popLast())})).next((()=>t.store(Od).ee({X:!0},(([l,u,h],d)=>{const g=Wa(u);return o(g.popLast())}))))}Di(e){const t=e.store(Md);return t.ee(((n,i)=>{const o=Kh(i),l=I3(this.serializer,o);return t.put(l)}))}Ci(e,t){const n=t.store(su),i=[];return n.ee(((o,l)=>{const u=t.store(Rm),h=(function(b){return b.document?new st(Nr.fromString(b.document.name).popFirst(5)):b.noDocument?st.fromSegments(b.noDocument.path):b.unknownDocument?st.fromSegments(b.unknownDocument.path):xt(36783)})(l).path.toArray(),d={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(u.put(d))})).next((()=>je.waitFor(i)))}Fi(e,t){const n=t.store(ha),i=O3(this.serializer),o=new F5(g0.mi,this.serializer.yt);return n.J().next((l=>{const u=new Map;return l.forEach((h=>{let d=u.get(h.userId)??ur();cu(this.serializer,h).keys().forEach((g=>d=d.add(g))),u.set(h.userId,d)})),je.forEach(u,((h,d)=>{const g=new $i(d),b=p0.wt(this.serializer,g),S=o.getIndexManager(g),v=m0.wt(g,this.serializer,S,o.referenceDelegate);return new M3(i,v,b,S).recalculateAndSaveOverlaysForDocumentKeys(new k1(t,Ds.ce),h).next()}))}))}}function gb(r){r.createObjectStore(Dd,{keyPath:ej}).createIndex(v5,tj,{unique:!0}),r.createObjectStore(Md,{keyPath:"targetId"}).createIndex(k_,Z7,{unique:!0}),r.createObjectStore(yu)}const uc="IndexedDbPersistence",Hg=18e5,Gg=5e3,Kg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",VR="main";class z5{constructor(e,t,n,i,o,l,u,h,d,g,b=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=o,this.window=l,this.document=u,this.xi=d,this.Oi=g,this.Ni=b,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=S=>Promise.resolve(),!z5.v())throw new it(We.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AR(this,i),this.$i=t+VR,this.serializer=new k3(h),this.Ui=new Sc(this.$i,this.Ni,new zR(this.serializer)),this.hi=new fR,this.Pi=new wR(this.referenceDelegate,this.serializer),this.remoteDocumentCache=O3(this.serializer),this.Ii=new hR,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Io(uc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new it(We.FAILED_PRECONDITION,Kg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Ds(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Up(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Nc(e))return Qe(uc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Qe(uc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Dh(e).get(pd).next((t=>je.resolve(this.es(t))))}ts(e){return Up(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Hg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=pi(t,Wd);return n.J().next((i=>{const o=this.ss(i,Hg),l=i.filter((u=>o.indexOf(u)===-1));return je.forEach(l,(u=>n.delete(u.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?je.resolve(!0):Dh(e).get(pd).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Gg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new it(We.FAILED_PRECONDITION,Kg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Up(e).J().next((n=>this.ss(n,Gg).find((i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(o||l&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Qe(uc,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Of,Wd],(e=>{const t=new k1(e,Ds.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((n=>this.rs(n.updateTimeMs,t)&&!this.us(n.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Up(e).J().next((t=>this.ss(t,Hg).map((n=>n.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return m0.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bR(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return p0.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){Qe(uc,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",o=(function(h){return h===18?xj:h===17?B_:h===16?yj:h===15?S5:h===14?N_:h===13?P_:h===12?gj:h===11?R_:void xt(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,i,o,(u=>(l=new k1(u,this.ci?this.ci.next():Ds.ce),t==="readwrite-primary"?this.Hi(l).next((h=>!!h||this.Yi(l))).next((h=>{if(!h)throw Io(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new it(We.FAILED_PRECONDITION,S_);return n(l)})).next((h=>this.Xi(l).next((()=>h)))):this.Is(l).next((()=>n(l)))))).then((u=>(l.raiseOnCommittedEvent(),u)))}Is(e){return Dh(e).get(pd).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Gg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new it(We.FAILED_PRECONDITION,Kg)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Dh(e).put(pd,t)}static v(){return Sc.v()}Zi(e){const t=Dh(e);return t.get(pd).next((n=>this.es(n)?(Qe(uc,"Releasing primary lease."),t.delete(pd)):je.resolve()))}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Io(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;wS()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const n=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return Qe(uc,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Io(uc,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Io("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Dh(r){return pi(r,Of)}function Up(r){return pi(r,Wd)}function OR(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=i}static As(e,t){let n=ur(),i=ur();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new V5(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return wS()?8:T_(hi())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,i){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,i,n).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new MR;return this.Ss(e,t,l).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,l,u.size)}))})).next((()=>o.result))}bs(e,t,n,i){return n.documentReadCount<this.fs?(Sd()<=yr.DEBUG&&Qe("QueryEngine","SDK will not create cache indexes for query:",_d(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),je.resolve()):(Sd()<=yr.DEBUG&&Qe("QueryEngine","Query:",_d(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(Sd()<=yr.DEBUG&&Qe("QueryEngine","The SDK decides to create cache indexes for query:",_d(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ws(t))):je.resolve())}ys(e,t){if(Mv(t))return je.resolve(null);let n=Ws(t);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=B1(t,null,"F"),n=Ws(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((o=>{const l=ur(...o);return this.ps.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,n).next((h=>{const d=this.Ds(t,u);return this.Cs(t,d,l,h.readTime)?this.ys(e,B1(t,null,"F")):this.vs(e,d,t,h)}))))})))))}ws(e,t,n,i){return Mv(t)||i.isEqual(Pt.min())?je.resolve(null):this.ps.getDocuments(e,n).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,n,i)?je.resolve(null):(Sd()<=yr.DEBUG&&Qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_d(t)),this.vs(e,l,t,D7(i,mf)).next((u=>u)))}))}Ds(e,t){let n=new Yr(e3(e));return t.forEach(((i,o)=>{Df(e,o)&&(n=n.add(o))})),n}Cs(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,n){return Sd()<=yr.DEBUG&&Qe("QueryEngine","Using full collection scan to execute query:",_d(t)),this.ps.getDocumentsMatchingQuery(e,t,vs.min(),n)}vs(e,t,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5="LocalStore",DR=3e8;class WR{constructor(e,t,n,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new vn(Zt),this.xs=new Pl((o=>ju(o)),Mf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new M3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function W3(r,e,t,n){return new WR(r,e,t,n)}async function $3(r,e){const t=er(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next((o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((o=>{const l=[],u=[];let h=ur();for(const d of i){l.push(d.batchId);for(const g of d.mutations)h=h.add(g.key)}for(const d of o){u.push(d.batchId);for(const g of d.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(n,h).next((d=>({Ls:d,removedBatchIds:l,addedBatchIds:u})))}))}))}function $R(r,e){const t=er(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,h,d,g){const b=d.batch,S=b.keys();let v=je.resolve();return S.forEach((N=>{v=v.next((()=>g.getEntry(h,N))).next((E=>{const L=d.docVersions.get(N);kt(L!==null,48541),E.version.compareTo(L)<0&&(b.applyToRemoteDocument(E,d),E.isValidDocument()&&(E.setReadTime(d.commitVersion),g.addEntry(E)))}))})),v.next((()=>u.mutationQueue.removeMutationBatch(h,b)))})(t,n,e,o).next((()=>o.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let h=ur();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(h=h.add(u.batch.mutations[d].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(n,i)))}))}function U3(r){const e=er(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function UR(r,e){const t=er(r),n=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const u=[];e.targetChanges.forEach(((g,b)=>{const S=i.get(b);if(!S)return;u.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,b))));let v=S.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?v=v.withResumeToken(si.EMPTY_BYTE_STRING,Pt.min()).withLastLimboFreeSnapshotVersion(Pt.min()):g.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(g.resumeToken,n)),i=i.insert(b,v),(function(E,L,C){return E.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=DR?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0})(S,v,g)&&u.push(t.Pi.updateTargetData(o,v))}));let h=gs(),d=ur();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),u.push(qR(o,l,e.documentUpdates).next((g=>{h=g.ks,d=g.qs}))),!n.isEqual(Pt.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((b=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n)));u.push(g)}return je.waitFor(u).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,h,d))).next((()=>h))})).then((o=>(t.Ms=i,o)))}function qR(r,e,t){let n=ur(),i=ur();return t.forEach((o=>n=n.add(o))),e.getEntries(r,n).next((o=>{let l=gs();return t.forEach(((u,h)=>{const d=o.get(u);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(Pt.min())?(e.removeEntry(u,h.readTime),l=l.insert(u,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),l=l.insert(u,h)):Qe(O5,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",h.version)})),{ks:l,qs:i}}))}function HR(r,e){const t=er(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=gu),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function GR(r,e){const t=er(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return t.Pi.getTargetData(n,e).next((o=>o?(i=o,je.resolve(i)):t.Pi.allocateTargetId(n).next((l=>(i=new Tl(e,l,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=t.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function W1(r,e,t){const n=er(r),i=n.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",o,(l=>n.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Nc(l))throw l;Qe(O5,`Failed to update sequence numbers for target ${e}: ${l}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function yb(r,e,t){const n=er(r);let i=Pt.min(),o=ur();return n.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,d,g){const b=er(h),S=b.xs.get(g);return S!==void 0?je.resolve(b.Ms.get(S)):b.Pi.getTargetData(d,g)})(n,l,Ws(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(l,u.targetId).next((h=>{o=h}))})).next((()=>n.Fs.getDocumentsMatchingQuery(l,e,t?i:Pt.min(),t?o:ur()))).next((u=>(KR(n,Nj(e),u),{documents:u,Qs:o})))))}function KR(r,e,t){let n=r.Os.get(e)||Pt.min();t.forEach(((i,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)})),r.Os.set(e,n)}class xb{constructor(){this.activeTargetIds=Oj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class q3{constructor(){this.Mo=new xb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new xb,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="ConnectivityMonitor";class bb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Qe(vb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Qe(vb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qp=null;function $1(){return qp===null?qp=(function(){return 268435456+Math.round(2147483648*Math.random())})():qp++,"0x"+qp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="RestConnection",YR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===Nm?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,t,n,i,o){const l=$1(),u=this.zo(e,t.toUriEncodedString());Qe(Jg,`Sending RPC '${e}' ${l}:`,u,n);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,i,o);const{host:d}=new URL(u),g=th(d);return this.Jo(e,u,h,n,g).then((b=>(Qe(Jg,`Received RPC '${e}' ${l}: `,b),b)),(b=>{throw Iu(Jg,`RPC '${e}' ${l} failed with error: `,b,"url: ",u,"request:",n),b}))}Ho(e,t,n,i,o,l){return this.Go(e,t,n,i,o)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ih})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),n&&n.headers.forEach(((i,o)=>e[o]=i))}zo(e,t){const n=YR[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="WebChannelConnection";class ZR extends QR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,i,o){const l=$1();return new Promise(((u,h)=>{const d=new d_;d.setWithCredentials(!0),d.listenOnce(h_.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case nm.NO_ERROR:const b=d.getResponseJson();Qe(uo,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(b)),u(b);break;case nm.TIMEOUT:Qe(uo,`RPC '${e}' ${l} timed out`),h(new it(We.DEADLINE_EXCEEDED,"Request time out"));break;case nm.HTTP_ERROR:const S=d.getStatus();if(Qe(uo,`RPC '${e}' ${l} failed with status:`,S,"response text:",d.getResponseText()),S>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const N=v==null?void 0:v.error;if(N&&N.status&&N.message){const E=(function(C){const M=C.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(M)>=0?M:We.UNKNOWN})(N.status);h(new it(E,N.message))}else h(new it(We.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new it(We.UNAVAILABLE,"Connection failed."));break;default:xt(9055,{l_:e,streamId:l,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Qe(uo,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(i);Qe(uo,`RPC '${e}' ${l} sending request:`,i),d.send(t,"POST",g,n,15)}))}T_(e,t,n){const i=$1(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=m_(),u=p_(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,n),h.encodeInitMessageHeaders=!0;const g=o.join("");Qe(uo,`Creating RPC '${e}' stream ${i}: ${g}`,h);const b=l.createWebChannel(g,h);this.I_(b);let S=!1,v=!1;const N=new XR({Yo:L=>{v?Qe(uo,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(S||(Qe(uo,`Opening RPC '${e}' stream ${i} transport.`),b.open(),S=!0),Qe(uo,`RPC '${e}' stream ${i} sending:`,L),b.send(L))},Zo:()=>b.close()}),E=(L,C,M)=>{L.listen(C,($=>{try{M($)}catch(F){setTimeout((()=>{throw F}),0)}}))};return E(b,qh.EventType.OPEN,(()=>{v||(Qe(uo,`RPC '${e}' stream ${i} transport opened.`),N.o_())})),E(b,qh.EventType.CLOSE,(()=>{v||(v=!0,Qe(uo,`RPC '${e}' stream ${i} transport closed`),N.a_(),this.E_(b))})),E(b,qh.EventType.ERROR,(L=>{v||(v=!0,Iu(uo,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),N.a_(new it(We.UNAVAILABLE,"The operation could not be completed")))})),E(b,qh.EventType.MESSAGE,(L=>{var C;if(!v){const M=L.data[0];kt(!!M,16349);const $=M,F=($==null?void 0:$.error)||((C=$[0])==null?void 0:C.error);if(F){Qe(uo,`RPC '${e}' stream ${i} received error:`,F);const ne=F.status;let ue=(function(A){const O=ni[A];if(O!==void 0)return f3(O)})(ne),V=F.message;ue===void 0&&(ue=We.INTERNAL,V="Unknown error status: "+ne+" with message "+F.message),v=!0,N.a_(new it(ue,V)),b.close()}else Qe(uo,`RPC '${e}' stream ${i} received:`,M),N.u_(M)}})),E(u,f_.STAT_EVENT,(L=>{L.stat===w1.PROXY?Qe(uo,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===w1.NOPROXY&&Qe(uo,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(){return typeof window<"u"?window:null}function fm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(r){return new tR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,t,n=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-n);i>0&&Qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="PersistentStream";class G3{constructor(e,t,n,i,o,l,u,h){this.Mi=e,this.S_=n,this.b_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new H3(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===We.RESOURCE_EXHAUSTED?(Io(t.toString()),Io("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===We.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.D_===t&&this.G_(n,i)}),(n=>{e((()=>{const i=new it(We.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{n((()=>this.z_(i)))})),this.stream.onMessage((i=>{n((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Qe(wb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Qe(wb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class tP extends G3{constructor(e,t,n,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=iR(this.serializer,e),n=(function(o){if(!("targetChange"in o))return Pt.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Pt.min():l.readTime?jo(l.readTime):Pt.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=z1(this.serializer),t.addTarget=(function(o,l){let u;const h=l.target;if(u=Bm(h)?{documents:w3(o,h)}:{query:S3(o,h).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=g3(o,l.resumeToken);const d=L1(o,l.expectedCount);d!==null&&(u.expectedCount=d)}else if(l.snapshotVersion.compareTo(Pt.min())>0){u.readTime=Yd(o,l.snapshotVersion.toTimestamp());const d=L1(o,l.expectedCount);d!==null&&(u.expectedCount=d)}return u})(this.serializer,e);const n=sR(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=z1(this.serializer),t.removeTarget=e,this.q_(t)}}class rP extends G3{constructor(e,t,n,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return kt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,kt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){kt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=oR(e.writeResults,e.commitTime),n=jo(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=z1(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>zm(this.serializer,n)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{}class iP extends nP{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new it(We.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,F1(t,n),i,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new it(We.UNKNOWN,o.toString())}))}Ho(e,t,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(e,F1(t,n),i,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new it(We.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class oP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Io(t),this.aa=!1):Qe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu="RemoteStore";class sP{constructor(e,t,n,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{n.enqueueAndForget((async()=>{Du(this)&&(Qe(Bu,"Restarting streams for network reachability change."),await(async function(h){const d=er(h);d.Ea.add(4),await $f(d),d.Ra.set("Unknown"),d.Ea.delete(4),await x0(d)})(this))}))})),this.Ra=new oP(n,i)}}async function x0(r){if(Du(r))for(const e of r.da)await e(!0)}async function $f(r){for(const e of r.da)await e(!1)}function K3(r,e){const t=er(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),$5(t)?W5(t):ah(t).O_()&&D5(t,e))}function M5(r,e){const t=er(r),n=ah(t);t.Ia.delete(e),n.O_()&&J3(t,e),t.Ia.size===0&&(n.O_()?n.L_():Du(t)&&t.Ra.set("Unknown"))}function D5(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ah(r).Y_(e)}function J3(r,e){r.Va.Ue(e),ah(r).Z_(e)}function W5(r){r.Va=new Qj({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),ah(r).start(),r.Ra.ua()}function $5(r){return Du(r)&&!ah(r).x_()&&r.Ia.size>0}function Du(r){return er(r).Ea.size===0}function Y3(r){r.Va=void 0}async function aP(r){r.Ra.set("Online")}async function lP(r){r.Ia.forEach(((e,t)=>{D5(r,e)}))}async function cP(r,e){Y3(r),$5(r)?(r.Ra.ha(e),W5(r)):r.Ra.set("Unknown")}async function uP(r,e,t){if(r.Ra.set("Online"),e instanceof m3&&e.state===2&&e.cause)try{await(async function(i,o){const l=o.cause;for(const u of o.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,l),i.Ia.delete(u),i.Va.removeTarget(u))})(r,e)}catch(n){Qe(Bu,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Wm(r,n)}else if(e instanceof dm?r.Va.Ze(e):e instanceof p3?r.Va.st(e):r.Va.tt(e),!t.isEqual(Pt.min()))try{const n=await U3(r.localStore);t.compareTo(n)>=0&&await(function(o,l){const u=o.Va.Tt(l);return u.targetChanges.forEach(((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.Ia.get(d);g&&o.Ia.set(d,g.withResumeToken(h.resumeToken,l))}})),u.targetMismatches.forEach(((h,d)=>{const g=o.Ia.get(h);if(!g)return;o.Ia.set(h,g.withResumeToken(si.EMPTY_BYTE_STRING,g.snapshotVersion)),J3(o,h);const b=new Tl(g.target,h,d,g.sequenceNumber);D5(o,b)})),o.remoteSyncer.applyRemoteEvent(u)})(r,t)}catch(n){Qe(Bu,"Failed to raise snapshot:",n),await Wm(r,n)}}async function Wm(r,e,t){if(!Nc(e))throw e;r.Ea.add(1),await $f(r),r.Ra.set("Offline"),t||(t=()=>U3(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Qe(Bu,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await x0(r)}))}function Q3(r,e){return e().catch((t=>Wm(r,t,e)))}async function Uf(r){const e=er(r),t=Ic(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gu;for(;dP(e);)try{const i=await HR(e.localStore,n);if(i===null){e.Ta.length===0&&t.L_();break}n=i.batchId,hP(e,i)}catch(i){await Wm(e,i)}X3(e)&&Z3(e)}function dP(r){return Du(r)&&r.Ta.length<10}function hP(r,e){r.Ta.push(e);const t=Ic(r);t.O_()&&t.X_&&t.ea(e.mutations)}function X3(r){return Du(r)&&!Ic(r).x_()&&r.Ta.length>0}function Z3(r){Ic(r).start()}async function fP(r){Ic(r).ra()}async function pP(r){const e=Ic(r);for(const t of r.Ta)e.ea(t.mutations)}async function mP(r,e,t){const n=r.Ta.shift(),i=E5.from(n,e,t);await Q3(r,(()=>r.remoteSyncer.applySuccessfulWrite(i))),await Uf(r)}async function gP(r,e){e&&Ic(r).X_&&await(async function(n,i){if((function(l){return Kj(l)&&l!==We.ABORTED})(i.code)){const o=n.Ta.shift();Ic(n).B_(),await Q3(n,(()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i))),await Uf(n)}})(r,e),X3(r)&&Z3(r)}async function Sb(r,e){const t=er(r);t.asyncQueue.verifyOperationInProgress(),Qe(Bu,"RemoteStore received new credentials");const n=Du(t);t.Ea.add(3),await $f(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await x0(t)}async function yP(r,e){const t=er(r);e?(t.Ea.delete(2),await x0(t)):e||(t.Ea.add(2),await $f(t),t.Ra.set("Unknown"))}function ah(r){return r.ma||(r.ma=(function(t,n,i){const o=er(t);return o.sa(),new tP(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(r.datastore,r.asyncQueue,{Xo:aP.bind(null,r),t_:lP.bind(null,r),r_:cP.bind(null,r),H_:uP.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),$5(r)?W5(r):r.Ra.set("Unknown")):(await r.ma.stop(),Y3(r))}))),r.ma}function Ic(r){return r.fa||(r.fa=(function(t,n,i){const o=er(t);return o.sa(),new rP(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:fP.bind(null,r),r_:gP.bind(null,r),ta:pP.bind(null,r),na:mP.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Uf(r)):(await r.fa.stop(),r.Ta.length>0&&(Qe(Bu,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,t,n,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=o,this.deferred=new Cl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,o){const l=Date.now()+n,u=new U5(e,t,l,i,o);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new it(We.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function q5(r,e){if(Io("AsyncQueue",`${e}: ${r}`),Nc(r))return new it(We.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{static emptySet(e){return new Fd(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||st.comparator(t.key,n.key):(t,n)=>st.comparator(t.key,n.key),this.keyedMap=Hh(),this.sortedSet=new vn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=n.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Fd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.ga=new vn(st.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Qd{constructor(e,t,n,i,o,l,u,h,d){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,t,n,i,o){const l=[];return t.forEach((u=>{l.push({type:0,doc:u})})),new Qd(e,t,Fd.emptySet(t),l,n,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&c0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class vP{constructor(){this.queries=Tb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const i=er(t),o=i.queries;i.queries=Tb(),o.forEach(((l,u)=>{for(const h of u.Sa)h.onError(n)}))})(this,new it(We.ABORTED,"Firestore shutting down"))}}function Tb(){return new Pl((r=>Z_(r)),c0)}async function e4(r,e){const t=er(r);let n=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(n=2):(o=new xP,n=e.Da()?0:1);try{switch(n){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const u=q5(l,`Initialization of query '${_d(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&H5(t)}async function t4(r,e){const t=er(r),n=e.query;let i=3;const o=t.queries.get(n);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function bP(r,e){const t=er(r);let n=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const u of l.Sa)u.Fa(i)&&(n=!0);l.wa=i}}n&&H5(t)}function wP(r,e,t){const n=er(r),i=n.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);n.queries.delete(e)}function H5(r){r.Ca.forEach((e=>{e.next()}))}var U1,Ab;(Ab=U1||(U1={})).Ma="default",Ab.Cache="cache";class r4{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Qd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Qd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==U1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e){this.key=e}}class i4{constructor(e){this.key=e}}class SP{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ur(),this.mutatedKeys=ur(),this.eu=e3(e),this.tu=new Fd(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new _b,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,u=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((g,b)=>{const S=i.get(g),v=Df(this.query,b)?b:null,N=!!S&&this.mutatedKeys.has(S.key),E=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let L=!1;S&&v?S.data.isEqual(v.data)?N!==E&&(n.track({type:3,doc:v}),L=!0):this.su(S,v)||(n.track({type:2,doc:v}),L=!0,(h&&this.eu(v,h)>0||d&&this.eu(v,d)<0)&&(u=!0)):!S&&v?(n.track({type:0,doc:v}),L=!0):S&&!v&&(n.track({type:1,doc:S}),L=!0,(h||d)&&(u=!0)),L&&(v?(l=l.add(v),o=E?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),n.track({type:1,doc:g})}return{tu:l,iu:n,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,b)=>(function(v,N){const E=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xt(20277,{Rt:L})}};return E(v)-E(N)})(g.type,b.type)||this.eu(g.doc,b.doc))),this.ou(n),i=i??!1;const u=t&&!i?this._u():[],h=this.Xa.size===0&&this.current&&!i?1:0,d=h!==this.Za;return this.Za=h,l.length!==0||d?{snapshot:new Qd(this.query,e.tu,o,l,e.mutatedKeys,h===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _b,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ur(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new i4(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new n4(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=ur();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Qd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const G5="SyncEngine";class _P{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class TP{constructor(e){this.key=e,this.hu=!1}}class AP{constructor(e,t,n,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Pl((u=>Z_(u)),c0),this.Iu=new Map,this.Eu=new Set,this.du=new vn(st.comparator),this.Au=new Map,this.Ru=new L5,this.Vu={},this.mu=new Map,this.fu=Nu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function CP(r,e,t=!0){const n=u4(r);let i;const o=n.Tu.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await o4(n,e,t,!0),i}async function kP(r,e){const t=u4(r);await o4(t,e,!0,!1)}async function o4(r,e,t,n){const i=await GR(r.localStore,Ws(e)),o=i.targetId,l=r.sharedClientState.addLocalQueryTarget(o,t);let u;return n&&(u=await IP(r,e,o,l==="current",i.resumeToken)),r.isPrimaryClient&&t&&K3(r.remoteStore,i),u}async function IP(r,e,t,n,i){r.pu=(b,S,v)=>(async function(E,L,C,M){let $=L.view.ru(C);$.Cs&&($=await yb(E.localStore,L.query,!1).then((({documents:V})=>L.view.ru(V,$))));const F=M&&M.targetChanges.get(L.targetId),ne=M&&M.targetMismatches.get(L.targetId)!=null,ue=L.view.applyChanges($,E.isPrimaryClient,F,ne);return kb(E,L.targetId,ue.au),ue.snapshot})(r,b,S,v);const o=await yb(r.localStore,e,!0),l=new SP(e,o.Qs),u=l.ru(o.documents),h=Wf.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),d=l.applyChanges(u,r.isPrimaryClient,h);kb(r,t,d.au);const g=new _P(e,t,l);return r.Tu.set(e,g),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),d.snapshot}async function EP(r,e,t){const n=er(r),i=n.Tu.get(e),o=n.Iu.get(i.targetId);if(o.length>1)return n.Iu.set(i.targetId,o.filter((l=>!c0(l,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await W1(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),t&&M5(n.remoteStore,i.targetId),q1(n,i.targetId)})).catch(Mu)):(q1(n,i.targetId),await W1(n.localStore,i.targetId,!0))}async function jP(r,e){const t=er(r),n=t.Tu.get(e),i=t.Iu.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),M5(t.remoteStore,n.targetId))}async function RP(r,e,t){const n=d4(r);try{const i=await(function(l,u){const h=er(l),d=Kr.now(),g=u.reduce(((v,N)=>v.add(N.key)),ur());let b,S;return h.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let N=gs(),E=ur();return h.Ns.getEntries(v,g).next((L=>{N=L,N.forEach(((C,M)=>{M.isValidDocument()||(E=E.add(C))}))})).next((()=>h.localDocuments.getOverlayedDocuments(v,N))).next((L=>{b=L;const C=[];for(const M of u){const $=Hj(M,b.get(M.key).overlayedDocument);$!=null&&C.push(new Nl(M.key,$,U_($.value.mapValue),Eo.exists(!0)))}return h.mutationQueue.addMutationBatch(v,d,C,u)})).next((L=>{S=L;const C=L.applyToLocalDocumentSet(b,E);return h.documentOverlayCache.saveOverlays(v,L.batchId,C)}))})).then((()=>({batchId:S.batchId,changes:r3(b)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(l,u,h){let d=l.Vu[l.currentUser.toKey()];d||(d=new vn(Zt)),d=d.insert(u,h),l.Vu[l.currentUser.toKey()]=d})(n,i.batchId,t),await qf(n,i.changes),await Uf(n.remoteStore)}catch(i){const o=q5(i,"Failed to persist write");t.reject(o)}}async function s4(r,e){const t=er(r);try{const n=await UR(t.localStore,e);e.targetChanges.forEach(((i,o)=>{const l=t.Au.get(o);l&&(kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?kt(l.hu,14607):i.removedDocuments.size>0&&(kt(l.hu,42227),l.hu=!1))})),await qf(t,n,e)}catch(n){await Mu(n)}}function Cb(r,e,t){const n=er(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.Tu.forEach(((o,l)=>{const u=l.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(l,u){const h=er(l);h.onlineState=u;let d=!1;h.queries.forEach(((g,b)=>{for(const S of b.Sa)S.va(u)&&(d=!0)})),d&&H5(h)})(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function PP(r,e,t){const n=er(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Au.get(e),o=i&&i.key;if(o){let l=new vn(st.comparator);l=l.insert(o,Fn.newNoDocument(o,Pt.min()));const u=ur().add(o),h=new f0(Pt.min(),new Map,new vn(Zt),l,u);await s4(n,h),n.du=n.du.remove(o),n.Au.delete(e),K5(n)}else await W1(n.localStore,e,!1).then((()=>q1(n,e,t))).catch(Mu)}async function NP(r,e){const t=er(r),n=e.batch.batchId;try{const i=await $R(t.localStore,e);l4(t,n,null),a4(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await qf(t,i)}catch(i){await Mu(i)}}async function BP(r,e,t){const n=er(r);try{const i=await(function(l,u){const h=er(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let g;return h.mutationQueue.lookupMutationBatch(d,u).next((b=>(kt(b!==null,37113),g=b.keys(),h.mutationQueue.removeMutationBatch(d,b)))).next((()=>h.mutationQueue.performConsistencyCheck(d))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(d,g,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g))).next((()=>h.localDocuments.getDocuments(d,g)))}))})(n.localStore,e);l4(n,e,t),a4(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await qf(n,i)}catch(i){await Mu(i)}}function a4(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function l4(r,e,t){const n=er(r);let i=n.Vu[n.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function q1(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||c4(r,n)}))}function c4(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(M5(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),K5(r))}function kb(r,e,t){for(const n of t)n instanceof n4?(r.Ru.addReference(n.key,e),LP(r,n)):n instanceof i4?(Qe(G5,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||c4(r,n.key)):xt(19791,{wu:n})}function LP(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(Qe(G5,"New document in limbo: "+t),r.Eu.add(n),K5(r))}function K5(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new st(Nr.fromString(e)),n=r.fu.next();r.Au.set(n,new TP(t)),r.du=r.du.insert(t,n),K3(r.remoteStore,new Tl(Ws(l0(t.path)),n,"TargetPurposeLimboResolution",Ds.ce))}}async function qf(r,e,t){const n=er(r),i=[],o=[],l=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,h)=>{l.push(n.pu(h,e,t).then((d=>{var g;if((d||t)&&n.isPrimaryClient){const b=d?!d.fromCache:(g=t==null?void 0:t.targetChanges.get(h.targetId))==null?void 0:g.current;n.sharedClientState.updateQueryState(h.targetId,b?"current":"not-current")}if(d){i.push(d);const b=V5.As(h.targetId,d);o.push(b)}})))})),await Promise.all(l),n.Pu.H_(i),await(async function(h,d){const g=er(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>je.forEach(d,(S=>je.forEach(S.Es,(v=>g.persistence.referenceDelegate.addReference(b,S.targetId,v))).next((()=>je.forEach(S.ds,(v=>g.persistence.referenceDelegate.removeReference(b,S.targetId,v)))))))))}catch(b){if(!Nc(b))throw b;Qe(O5,"Failed to update sequence numbers: "+b)}for(const b of d){const S=b.targetId;if(!b.fromCache){const v=g.Ms.get(S),N=v.snapshotVersion,E=v.withLastLimboFreeSnapshotVersion(N);g.Ms=g.Ms.insert(S,E)}}})(n.localStore,o))}async function FP(r,e){const t=er(r);if(!t.currentUser.isEqual(e)){Qe(G5,"User change. New user:",e.toKey());const n=await $3(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((u=>{u.forEach((h=>{h.reject(new it(We.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await qf(t,n.Ls)}}function zP(r,e){const t=er(r),n=t.Au.get(e);if(n&&n.hu)return ur().add(n.key);{let i=ur();const o=t.Iu.get(e);if(!o)return i;for(const l of o){const u=t.Tu.get(l);i=i.unionWith(u.view.nu)}return i}}function u4(r){const e=er(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=s4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PP.bind(null,e),e.Pu.H_=bP.bind(null,e.eventManager),e.Pu.yu=wP.bind(null,e.eventManager),e}function d4(r){const e=er(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BP.bind(null,e),e}class kf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=y0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return W3(this.persistence,new D3,e.initialUser,this.serializer)}Cu(e){return new F5(g0.mi,this.serializer)}Du(e){return new q3}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kf.provider={build:()=>new kf};class VP extends kf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){kt(this.persistence.referenceDelegate instanceof Dm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new F3(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ho.withCacheSize(this.cacheSizeBytes):ho.DEFAULT;return new F5((n=>Dm.mi(n,t)),this.serializer)}}class OP extends kf{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await d4(this.xu.syncEngine),await Uf(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return W3(this.persistence,new D3,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new F3(n,e.asyncQueue,t)}Mu(e,t){const n=new q7(t,this.persistence);return new U7(e.asyncQueue,n)}Cu(e){const t=OR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ho.withCacheSize(this.cacheSizeBytes):ho.DEFAULT;return new z5(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,eP(),fm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new q3}}class $m{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Cb(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=FP.bind(null,this.syncEngine),await yP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new vP})()}createDatastore(e){const t=y0(e.databaseInfo.databaseId),n=(function(o){return new ZR(o)})(e.databaseInfo);return(function(o,l,u,h){return new iP(o,l,u,h)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,i,o,l,u){return new sP(n,i,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>Cb(this.syncEngine,t,0)),(function(){return bb.v()?new bb:new JR})())}createSyncEngine(e,t){return(function(i,o,l,u,h,d,g){const b=new AP(i,o,l,u,h,d);return g&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const o=er(i);Qe(Bu,"RemoteStore shutting down."),o.Ea.add(5),await $f(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}$m.provider={build:()=>new $m};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Io("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec="FirestoreClient";class MP{constructor(e,t,n,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=$i.UNAUTHENTICATED,this.clientId=g5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,(async l=>{Qe(Ec,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(n,(l=>(Qe(Ec,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=q5(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Yg(r,e){r.asyncQueue.verifyOperationInProgress(),Qe(Ec,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async i=>{n.isEqual(i)||(await $3(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Ib(r,e){r.asyncQueue.verifyOperationInProgress();const t=await DP(r);Qe(Ec,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>Sb(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,i)=>Sb(e.remoteStore,i))),r._onlineComponents=e}async function DP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Qe(Ec,"Using user provided OfflineComponentProvider");try{await Yg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===We.FAILED_PRECONDITION||i.code===We.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Iu("Error using user provided cache. Falling back to memory cache: "+t),await Yg(r,new kf)}}else Qe(Ec,"Using default OfflineComponentProvider"),await Yg(r,new VP(void 0));return r._offlineComponents}async function f4(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Qe(Ec,"Using user provided OnlineComponentProvider"),await Ib(r,r._uninitializedComponentsProvider._online)):(Qe(Ec,"Using default OnlineComponentProvider"),await Ib(r,new $m))),r._onlineComponents}function WP(r){return f4(r).then((e=>e.syncEngine))}async function H1(r){const e=await f4(r),t=e.eventManager;return t.onListen=CP.bind(null,e.syncEngine),t.onUnlisten=EP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jP.bind(null,e.syncEngine),t}function $P(r,e,t={}){const n=new Cl;return r.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,h,d){const g=new h4({next:S=>{g.Nu(),l.enqueueAndForget((()=>t4(o,b))),S.fromCache&&h.source==="server"?d.reject(new it(We.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(S)},error:S=>d.reject(S)}),b=new r4(u,g,{includeMetadataChanges:!0,qa:!0});return e4(o,b)})(await H1(r),r.asyncQueue,e,t,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4="firestore.googleapis.com",jb=!0;class Rb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new it(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=m4,this.ssl=jb}else this.host=e.host,this.ssl=e.ssl??jb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=P3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SR)throw new it(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}M7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=p4(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new it(We.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new it(We.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new it(We.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class v0{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new it(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new it(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new j7;switch(n.type){case"firstParty":return new B7(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new it(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=Eb.get(t);n&&(Qe("ComponentProvider","Removing Datastore"),Eb.delete(t),n.terminate())})(this),Promise.resolve()}}function UP(r,e,t,n={}){var d;r=pa(r,v0);const i=th(e),o=r._getSettings(),l={...o,emulatorOptions:r._getEmulatorOptions()},u=`${e}:${t}`;i&&(xS(`https://${u}`),vS("Firestore",!0)),o.host!==m4&&o.host!==u&&Iu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:i,emulatorOptions:n};if(!_u(h,l)&&(r._setSettings(h),n.mockUserToken)){let g,b;if(typeof n.mockUserToken=="string")g=n.mockUserToken,b=$i.MOCK_USER;else{g=Uk(n.mockUserToken,(d=r._app)==null?void 0:d.options.projectId);const S=n.mockUserToken.sub||n.mockUserToken.user_id;if(!S)throw new it(We.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new $i(S)}r._authCredentials=new R7(new y_(g,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Lc(this.firestore,e,this._query)}}class oi{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _c(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new oi(this.firestore,e,this._key)}toJSON(){return{type:oi._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Vf(t,oi._jsonSchema))return new oi(e,n||null,new st(Nr.fromString(t.referencePath)))}}oi._jsonSchemaVersion="firestore/documentReference/1.0",oi._jsonSchema={type:ii("string",oi._jsonSchemaVersion),referencePath:ii("string")};class _c extends Lc{constructor(e,t,n){super(e,t,l0(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new oi(this.firestore,null,new st(e))}withConverter(e){return new _c(this.firestore,e,this._path)}}function lh(r,e,...t){if(r=fi(r),v_("collection","path",e),r instanceof v0){const n=Nr.fromString(e,...t);return wv(n),new _c(r,null,n)}{if(!(r instanceof oi||r instanceof _c))throw new it(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Nr.fromString(e,...t));return wv(n),new _c(r.firestore,null,n)}}function ch(r,e,...t){if(r=fi(r),arguments.length===1&&(e=g5.newId()),v_("doc","path",e),r instanceof v0){const n=Nr.fromString(e,...t);return bv(n),new oi(r,null,new st(n))}{if(!(r instanceof oi||r instanceof _c))throw new it(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Nr.fromString(e,...t));return bv(n),new oi(r.firestore,r instanceof _c?r.converter:null,new st(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="AsyncQueue";class Nb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new H3(this,"async_queue_retry"),this._c=()=>{const n=fm();n&&Qe(Pb,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=fm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=fm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Cl;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Nc(e))throw e;Qe(Pb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Io("INTERNAL UNHANDLED ERROR: ",Bb(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=U5.createAndSchedule(this,e,t,n,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&xt(47125,{Pc:Bb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Bb(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of n)if(o in i&&typeof i[o]=="function")return!0;return!1})(r,["next","error","complete"])}class jc extends v0{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new Nb,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Nb(e),this._firestoreClient=void 0,await e}}}function qP(r,e){const t=typeof r=="object"?r:kS(),n=typeof r=="string"?r:Nm,i=s5(t,"firestore").getImmediate({identifier:n});if(!i._initialized){const o=Wk("firestore");o&&UP(i,...o)}return i}function J5(r){if(r._terminated)throw new it(We.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||g4(r),r._firestoreClient}function g4(r){var n,i,o;const e=r._freezeSettings(),t=(function(u,h,d,g){return new bj(u,h,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,p4(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(r._databaseId,((n=r._app)==null?void 0:n.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new MP(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}})(r._componentsProvider))}function HP(r,e){Iu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return GP(r,$m.provider,{build:n=>new OP(n,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function GP(r,e,t){if((r=pa(r,jc))._firestoreClient||r._terminated)throw new it(We.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new it(We.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},g4(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ms(si.fromBase64String(e))}catch(t){throw new it(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ms(si.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ms._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vf(e,Ms._jsonSchema))return Ms.fromBase64String(e.bytes)}}Ms._jsonSchemaVersion="firestore/bytes/1.0",Ms._jsonSchema={type:ii("string",Ms._jsonSchemaVersion),bytes:ii("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new it(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new it(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new it(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Zt(this._lat,e._lat)||Zt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ha._jsonSchemaVersion}}static fromJSON(e){if(Vf(e,Ha._jsonSchema))return new Ha(e.latitude,e.longitude)}}Ha._jsonSchemaVersion="firestore/geoPoint/1.0",Ha._jsonSchema={type:ii("string",Ha._jsonSchemaVersion),latitude:ii("number"),longitude:ii("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ga._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vf(e,Ga._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ga(e.vectorValues);throw new it(We.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ga._jsonSchemaVersion="firestore/vectorValue/1.0",Ga._jsonSchema={type:ii("string",Ga._jsonSchemaVersion),vectorValues:ii("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=/^__.*__$/;class JP{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Nl(e,this.data,this.fieldMask,t,this.fieldTransforms):new sh(e,this.data,t,this.fieldTransforms)}}class y4{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Nl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function x4(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xt(40011,{Ac:r})}}class Y5{constructor(e,t,n,i,o,l){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Y5({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Um(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(x4(this.Ac)&&KP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class YP{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||y0(e)}Cc(e,t,n,i=!1){return new Y5({Ac:e,methodName:t,Dc:n,path:In.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Q5(r){const e=r._freezeSettings(),t=y0(r._databaseId);return new YP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function QP(r,e,t,n,i,o={}){const l=r.Cc(o.merge||o.mergeFields?2:0,e,t,i);Z5("Data must be an object, but it was:",l,n);const u=v4(n,l);let h,d;if(o.merge)h=new Ko(l.fieldMask),d=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const b of o.mergeFields){const S=G1(e,b,t);if(!l.contains(S))throw new it(We.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);w4(g,S)||g.push(S)}h=new Ko(g),d=l.fieldTransforms.filter((b=>h.covers(b.field)))}else h=null,d=l.fieldTransforms;return new JP(new fo(u),h,d)}class S0 extends w0{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof S0}}class X5 extends w0{_toFieldTransform(e){return new c3(e.path,new Gd)}isEqual(e){return e instanceof X5}}function XP(r,e,t,n){const i=r.Cc(1,e,t);Z5("Data must be an object, but it was:",i,n);const o=[],l=fo.empty();Bc(n,((h,d)=>{const g=e2(e,h,t);d=fi(d);const b=i.yc(g);if(d instanceof S0)o.push(g);else{const S=Hf(d,b);S!=null&&(o.push(g),l.set(g,S))}}));const u=new Ko(o);return new y4(l,u,i.fieldTransforms)}function ZP(r,e,t,n,i,o){const l=r.Cc(1,e,t),u=[G1(e,n,t)],h=[i];if(o.length%2!=0)throw new it(We.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<o.length;S+=2)u.push(G1(e,o[S])),h.push(o[S+1]);const d=[],g=fo.empty();for(let S=u.length-1;S>=0;--S)if(!w4(d,u[S])){const v=u[S];let N=h[S];N=fi(N);const E=l.yc(v);if(N instanceof S0)d.push(v);else{const L=Hf(N,E);L!=null&&(d.push(v),g.set(v,L))}}const b=new Ko(d);return new y4(g,b,l.fieldTransforms)}function eN(r,e,t,n=!1){return Hf(t,r.Cc(n?4:3,e))}function Hf(r,e){if(b4(r=fi(r)))return Z5("Unsupported field value:",e,r),v4(r,e);if(r instanceof w0)return(function(n,i){if(!x4(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,i){const o=[];let l=0;for(const u of n){let h=Hf(u,i.wc(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}})(r,e)}return(function(n,i){if((n=fi(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Mj(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=Kr.fromDate(n);return{timestampValue:Yd(i.serializer,o)}}if(n instanceof Kr){const o=new Kr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Yd(i.serializer,o)}}if(n instanceof Ha)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ms)return{bytesValue:g3(i.serializer,n._byteString)};if(n instanceof oi){const o=i.databaseId,l=n.firestore._databaseId;if(!l.isEqual(o))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:P5(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Ga)return(function(l,u){return{mapValue:{fields:{[T5]:{stringValue:A5},[$d]:{arrayValue:{values:l.toArray().map((d=>{if(typeof d!="number")throw u.Sc("VectorValues must only contain numeric values.");return k5(u.serializer,d)}))}}}}}})(n,i);throw i.Sc(`Unsupported field value: ${e0(n)}`)})(r,e)}function v4(r,e){const t={};return L_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bc(r,((n,i)=>{const o=Hf(i,e.mc(n));o!=null&&(t[n]=o)})),{mapValue:{fields:t}}}function b4(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Kr||r instanceof Ha||r instanceof Ms||r instanceof oi||r instanceof w0||r instanceof Ga)}function Z5(r,e,t){if(!b4(t)||!b_(t)){const n=e0(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function G1(r,e,t){if((e=fi(e))instanceof b0)return e._internalPath;if(typeof e=="string")return e2(r,e);throw Um("Field path arguments must be of type string or ",r,!1,void 0,t)}const tN=new RegExp("[~\\*/\\[\\]]");function e2(r,e,t){if(e.search(tN)>=0)throw Um(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new b0(...e.split("."))._internalPath}catch{throw Um(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Um(r,e,t,n,i){const o=n&&!n.isEmpty(),l=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${n}`),l&&(h+=` in document ${i}`),h+=")"),new it(We.INVALID_ARGUMENT,u+r+h)}function w4(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,t,n,i,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new oi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class rN extends S4{data(){return super.data()}}function _0(r,e){return typeof e=="string"?e2(r,e):e instanceof b0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new it(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class t2{}class T4 extends t2{}function r2(r,e,...t){let n=[];e instanceof t2&&n.push(e),n=n.concat(t),(function(o){const l=o.filter((h=>h instanceof n2)).length,u=o.filter((h=>h instanceof T0)).length;if(l>1||l>0&&u>0)throw new it(We.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)r=i._apply(r);return r}class T0 extends T4{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new T0(e,t,n)}_apply(e){const t=this._parse(e);return C4(e._query,t),new Lc(e.firestore,e.converter,N1(e._query,t))}_parse(e){const t=Q5(e.firestore);return(function(o,l,u,h,d,g,b){let S;if(d.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new it(We.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){zb(b,g);const N=[];for(const E of b)N.push(Fb(h,o,E));S={arrayValue:{values:N}}}else S=Fb(h,o,b)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||zb(b,g),S=eN(u,l,b,g==="in"||g==="not-in");return xr.create(d,g,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function nN(r,e,t){const n=e,i=_0("where",r);return T0._create(i,n,t)}class n2 extends t2{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n2(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:Jr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let l=i;const u=o.getFlattenedFilters();for(const h of u)C4(l,h),l=N1(l,h)})(e._query,t),new Lc(e.firestore,e.converter,N1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class i2 extends T4{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new i2(e,t)}_apply(e){const t=(function(i,o,l){if(i.startAt!==null)throw new it(We.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new it(We.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Af(o,l)})(e._query,this._field,this._direction);return new Lc(e.firestore,e.converter,(function(i,o){const l=i.explicitOrderBy.concat([o]);return new oh(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function A4(r,e="asc"){const t=e,n=_0("orderBy",r);return i2._create(n,t)}function Fb(r,e,t){if(typeof(t=fi(t))=="string"){if(t==="")throw new it(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!X_(e)&&t.indexOf("/")!==-1)throw new it(We.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Nr.fromString(t));if(!st.isDocumentKey(n))throw new it(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return _f(r,new st(n))}if(t instanceof oi)return _f(r,t._key);throw new it(We.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${e0(t)}.`)}function zb(r,e){if(!Array.isArray(r)||r.length===0)throw new it(We.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function C4(r,e){const t=(function(i,o){for(const l of i)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(r.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new it(We.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new it(We.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class iN{convertValue(e,t="none"){switch(Cc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Bc(e,((i,o)=>{n[i]=this.convertValue(o,t)})),n}convertVectorValue(e){var n,i,o;const t=(o=(i=(n=e.fields)==null?void 0:n[$d].arrayValue)==null?void 0:i.values)==null?void 0:o.map((l=>xn(l.doubleValue)));return new Ga(t)}convertGeoPoint(e){return new Ha(xn(e.latitude),xn(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=s0(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(wf(e));default:return null}}convertTimestamp(e){const t=El(e);return new Kr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Nr.fromString(e);kt(C3(n),9688,{name:e});const i=new Eu(n.get(1),n.get(3)),o=new st(n.popFirst(5));return i.isEqual(t)||Io(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(r,e,t){let n;return n=r?r.toFirestore(e):e,n}class Jh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vu extends S4{constructor(e,t,n,i,o,l){super(e,t,n,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(_0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new it(We.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=vu._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}vu._jsonSchemaVersion="firestore/documentSnapshot/1.0",vu._jsonSchema={type:ii("string",vu._jsonSchemaVersion),bundleSource:ii("string","DocumentSnapshot"),bundleName:ii("string"),bundle:ii("string")};class pm extends vu{data(e={}){return super.data(e)}}class bu{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Jh(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new pm(this._firestore,this._userDataWriter,n.key,n,new Jh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new it(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((u=>{const h=new pm(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Jh(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const h=new pm(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Jh(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,g=-1;return u.type!==0&&(d=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),g=l.indexOf(u.doc.key)),{type:sN(u.type),doc:h,oldIndex:d,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new it(We.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=g5.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function sN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xt(61501,{type:r})}}bu._jsonSchemaVersion="firestore/querySnapshot/1.0",bu._jsonSchema={type:ii("string",bu._jsonSchemaVersion),bundleSource:ii("string","QuerySnapshot"),bundleName:ii("string"),bundle:ii("string")};class o2 extends iN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ms(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new oi(this.firestore,null,t)}}function k4(r){r=pa(r,Lc);const e=pa(r.firestore,jc),t=J5(e),n=new o2(e);return _4(r._query),$P(t,r._query).then((i=>new bu(e,n,r,i)))}function I4(r,e,t,...n){r=pa(r,oi);const i=pa(r.firestore,jc),o=Q5(i);let l;return l=typeof(e=fi(e))=="string"||e instanceof b0?ZP(o,"updateDoc",r._key,e,t,n):XP(o,"updateDoc",r._key,e),a2(i,[l.toMutation(r._key,Eo.exists(!0))])}function E4(r){return a2(pa(r.firestore,jc),[new h0(r._key,Eo.none())])}function s2(r,e){const t=pa(r.firestore,jc),n=ch(r),i=oN(r.converter,e);return a2(t,[QP(Q5(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,Eo.exists(!1))]).then((()=>n))}function aN(r,...e){var h,d,g;r=fi(r);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||Lb(e[n])||(t=e[n++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Lb(e[n])){const b=e[n];e[n]=(h=b.next)==null?void 0:h.bind(b),e[n+1]=(d=b.error)==null?void 0:d.bind(b),e[n+2]=(g=b.complete)==null?void 0:g.bind(b)}let o,l,u;if(r instanceof oi)l=pa(r.firestore,jc),u=l0(r._key.path),o={next:b=>{e[n]&&e[n](lN(l,r,b))},error:e[n+1],complete:e[n+2]};else{const b=pa(r,Lc);l=pa(b.firestore,jc),u=b._query;const S=new o2(l);o={next:v=>{e[n]&&e[n](new bu(l,S,b,v))},error:e[n+1],complete:e[n+2]},_4(r._query)}return(function(S,v,N,E){const L=new h4(E),C=new r4(v,L,N);return S.asyncQueue.enqueueAndForget((async()=>e4(await H1(S),C))),()=>{L.Nu(),S.asyncQueue.enqueueAndForget((async()=>t4(await H1(S),C)))}})(J5(l),u,i,o)}function a2(r,e){return(function(n,i){const o=new Cl;return n.asyncQueue.enqueueAndForget((async()=>RP(await WP(n),i,o))),o.promise})(J5(r),e)}function lN(r,e,t){const n=t.docs.get(e._key),i=new o2(r);return new vu(r,i,e._key,n,new Jh(t.hasPendingWrites,t.fromCache),e.converter)}function Xd(){return new X5("serverTimestamp")}(function(e,t=!0){(function(i){ih=i})(rh),zd(new Tu("firestore",((n,{instanceIdentifier:i,options:o})=>{const l=n.getProvider("app").getImmediate(),u=new jc(new P7(n.getProvider("auth-internal")),new L7(l,n.getProvider("app-check-internal")),(function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new it(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eu(d.options.projectId,g)})(l,i),l);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),bc(gv,yv,e),bc(gv,yv,"esm2020")})();const cN={apiKey:"AIzaSyCyIga2EWsEZLqApS633i9uRIy5p745EJg",authDomain:"electrician-toolkit-33497.firebaseapp.com",projectId:"electrician-toolkit-33497",storageBucket:"electrician-toolkit-33497.firebasestorage.app",messagingSenderId:"878846360709",appId:"1:878846360709:web:af750d7f4d2a9495b17dec",measurementId:"G-JWZ1TDP25R"},j4=CS(cN),qi=I7(j4),ba=qP(j4);HP(ba).then(()=>{console.log(" Firebase offline persistence enabled")}).catch(r=>{r.code==="failed-precondition"?console.warn(" Multiple tabs open, persistence only enabled in first tab"):r.code==="unimplemented"?console.warn(" Browser doesn't support persistence"):console.error(" Error enabling persistence:",r)});const l2="jobs_cache_v1",c2="jobs_cache_timestamp_v1",uN=300*1e3,R4=(r,e)=>{try{const t={userId:e,jobs:r,timestamp:Date.now()};localStorage.setItem(l2,JSON.stringify(t)),localStorage.setItem(c2,Date.now().toString())}catch(t){console.warn("Failed to cache jobs:",t)}},dN=r=>{try{const e=localStorage.getItem(l2);if(!e)return null;const t=JSON.parse(e);if(t.userId!==r)return If(),null;const n=parseInt(localStorage.getItem(c2)||"0");return Date.now()-n>uN?(If(),null):t.jobs}catch(e){return console.warn("Failed to load cached jobs:",e),null}},If=()=>{try{localStorage.removeItem(l2),localStorage.removeItem(c2)}catch(r){console.warn("Failed to clear cache:",r)}},Wu=async()=>{var r;try{const e=(r=qi.currentUser)==null?void 0:r.uid;if(!e)throw new Error("User not authenticated");const t=dN(e);return t?(console.log(" Loaded jobs from localStorage cache (instant)"),Vb(e),t):(console.log(" Fetching jobs from Firebase..."),await Vb(e))}catch(e){throw console.error("Error fetching jobs:",e),e}},Vb=async r=>{const e=lh(ba,"users",r,"jobs"),t=r2(e,A4("createdAt","desc")),i=(await k4(t)).docs.map(o=>({id:o.id,...o.data()}));return R4(i,r),i},P4=(r,e)=>{if(!r)throw new Error("User not authenticated");const t=lh(ba,"users",r,"jobs"),n=r2(t,A4("createdAt","desc"));return aN(n,i=>{const o=i.docs.map(l=>({id:l.id,...l.data()}));console.log(` Real-time update: ${o.length} jobs (from ${i.metadata.fromCache?"cache":"server"})`),R4(o,r),e(o)},i=>{console.error("Error in real-time listener:",i)})},K1=async r=>{var e;try{const t=(e=qi.currentUser)==null?void 0:e.uid;if(!t)throw new Error("User not authenticated");const n=lh(ba,"users",t,"jobs"),i={...r,createdAt:Xd(),status:r.status||"active"},o=await s2(n,i);return If(),console.log(" Job created:",o.id),o.id}catch(t){throw console.error("Error creating job:",t),t}},hN=async(r,e)=>{var t;try{const n=(t=qi.currentUser)==null?void 0:t.uid;if(!n)throw new Error("User not authenticated");const i=ch(ba,"users",n,"jobs",r);await I4(i,{...e,updatedAt:Xd()}),If(),console.log(" Job updated:",r)}catch(n){throw console.error("Error updating job:",n),n}},N4=async r=>{var e;try{const t=(e=qi.currentUser)==null?void 0:e.uid;if(!t)throw new Error("User not authenticated");const n=ch(ba,"users",t,"jobs",r);await E4(n),If(),console.log(" Job deleted:",r)}catch(t){throw console.error("Error deleting job:",t),t}},Gf=async(r,e)=>{var t;try{const n=(t=qi.currentUser)==null?void 0:t.uid;if(!n)throw new Error("User not authenticated");const i=ch(ba,"users",n,"jobs",r),o=lh(i,"calculations"),l={...e,createdAt:Xd()},u=await s2(o,l);return console.log(" Calculation added:",u.id),u.id}catch(n){throw console.error("Error adding calculation:",n),n}},Ob=Object.freeze(Object.defineProperty({__proto__:null,addCalculationToJob:Gf,createJob:K1,deleteJob:N4,getUserJobs:Wu,subscribeToJobs:P4,updateJob:hN},Symbol.toStringTag,{value:"Module"})),fN=me.forwardRef(({isDarkMode:r=!1,onExportSuccess:e},t)=>{const[n,i]=me.useState(""),[o,l]=me.useState(""),[u,h]=me.useState(""),[d,g]=me.useState("12"),[b,S]=me.useState("single"),[v,N]=me.useState("copper"),[E,L]=me.useState("1.0"),[C,M]=me.useState(!1),[$,F]=me.useState([]),[ne,ue]=me.useState(!1),V={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},k={14:4110,12:6530,10:10380,8:16510,6:26240,4:41740,3:52620,2:66360,1:83690,"1/0":105600,"2/0":133100,"3/0":167800,"4/0":211600,250:25e4,300:3e5,350:35e4,400:4e5,500:5e5,600:6e5,750:75e4,1e3:1e6},A={copper:{dc:10.8,ac:12.9},aluminum:{dc:17.4,ac:21.2}},I=(()=>{if(!n||!o||!u)return{drop:"0.00",percentage:"0.00",excessive:!1};const q=parseFloat(n),oe=parseFloat(o),se=parseFloat(u),ie=k[d],ve=parseFloat(E),be=A[v].ac;let Z;b==="single"?Z=2*be*oe*se*ve/ie:Z=1.732*be*oe*se*ve/ie;const W=Z/q*100,J=W>3;return{drop:Z.toFixed(2),percentage:W.toFixed(2),excessive:J}})(),w=async()=>{M(!0),ue(!0);try{const q=await Wu();F(q)}catch(q){console.error("Error loading jobs:",q),alert("Failed to load jobs. Please try again.")}finally{ue(!1)}},B=async q=>{try{const oe={type:"voltage-drop",data:{voltage:parseFloat(n),current:parseFloat(o),distance:parseFloat(u),wireSize:d,phaseType:b,conductorType:v,powerFactor:parseFloat(E),results:{voltageDrop:I.drop,percentageDrop:I.percentage,excessive:I.excessive}}};await Gf(q,oe),M(!1),alert("Calculation attached to job successfully!")}catch(oe){console.error("Error attaching calculation:",oe),alert("Failed to attach calculation. Please try again.")}},D=()=>{if(!n||!o||!u){alert("Please enter all required values before exporting to PDF");return}const q={calculatorName:"Voltage Drop Calculator",inputs:{systemType:b==="single"?"Single Phase":"Three Phase",conductorMaterial:v.charAt(0).toUpperCase()+v.slice(1),systemVoltage:`${n} V`,loadCurrent:`${o} A`,oneWayDistance:`${u} ft`,wireSize:d.includes("/")?`${d} AWG`:`${d} ${parseInt(d)<=4?"AWG":"kcmil"}`,powerFactor:E},results:{voltageDrop:`${I.drop} V`,percentageDrop:`${I.percentage}%`,necCompliant:I.excessive?"NO - Exceeds 3% limit":"YES - Within 3% limit",status:I.excessive?" WARNING: Exceeds NEC 3% Limit":" Within NEC limits"},additionalInfo:{formula:b==="single"?"2  K  I  L  PF  CM":"1.732  K  I  L  PF  CM",kConstant:`${A[v].ac} (${v} AC)`,circularMils:k[d].toLocaleString(),powerFactorUsed:E,systemConfiguration:b==="single"?"Single phase":"Three phase"},necReferences:["NEC Guidelines: Branch circuits - 3% max","Feeders - 3% max","Combined branch circuit and feeder - 5% max","Note: Excessive voltage drop can cause equipment malfunction and reduced efficiency"]};cn(q),e&&e()};return me.useImperativeHandle(t,()=>({exportPDF:D})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{background:V.cardBg,border:`1px solid ${V.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:V.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${V.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:V.labelText,marginBottom:"0.5rem"},children:"System Type"}),s.jsxs("select",{value:b,onChange:q=>S(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${V.inputBorder}`,borderRadius:"8px",backgroundColor:V.inputBg,color:V.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"single",children:"Single Phase"}),s.jsx("option",{value:"three",children:"Three Phase"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:V.labelText,marginBottom:"0.5rem"},children:"Conductor Material"}),s.jsxs("select",{value:v,onChange:q=>N(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${V.inputBorder}`,borderRadius:"8px",backgroundColor:V.inputBg,color:V.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"copper",children:"Copper"}),s.jsx("option",{value:"aluminum",children:"Aluminum"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:V.labelText,marginBottom:"0.5rem"},children:"System Voltage (V)"}),s.jsx("input",{type:"number",value:n,onChange:q=>i(q.target.value),placeholder:"120, 240, 480",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${V.inputBorder}`,borderRadius:"8px",backgroundColor:V.inputBg,color:V.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:V.labelText,marginBottom:"0.5rem"},children:"Load Current (Amps)"}),s.jsx("input",{type:"number",value:o,onChange:q=>l(q.target.value),placeholder:"15, 20, 30",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${V.inputBorder}`,borderRadius:"8px",backgroundColor:V.inputBg,color:V.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:V.labelText,marginBottom:"0.5rem"},children:"One-Way Distance (feet)"}),s.jsx("input",{type:"number",value:u,onChange:q=>h(q.target.value),placeholder:"100, 200, 500",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${V.inputBorder}`,borderRadius:"8px",backgroundColor:V.inputBg,color:V.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:V.labelText,marginBottom:"0.5rem"},children:"Wire Size (AWG/kcmil)"}),s.jsxs("select",{value:d,onChange:q=>g(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${V.inputBorder}`,borderRadius:"8px",backgroundColor:V.inputBg,color:V.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"14",children:"14 AWG"}),s.jsx("option",{value:"12",children:"12 AWG"}),s.jsx("option",{value:"10",children:"10 AWG"}),s.jsx("option",{value:"8",children:"8 AWG"}),s.jsx("option",{value:"6",children:"6 AWG"}),s.jsx("option",{value:"4",children:"4 AWG"}),s.jsx("option",{value:"3",children:"3 AWG"}),s.jsx("option",{value:"2",children:"2 AWG"}),s.jsx("option",{value:"1",children:"1 AWG"}),s.jsx("option",{value:"1/0",children:"1/0 AWG"}),s.jsx("option",{value:"2/0",children:"2/0 AWG"}),s.jsx("option",{value:"3/0",children:"3/0 AWG"}),s.jsx("option",{value:"4/0",children:"4/0 AWG"}),s.jsx("option",{value:"250",children:"250 kcmil"}),s.jsx("option",{value:"300",children:"300 kcmil"}),s.jsx("option",{value:"350",children:"350 kcmil"}),s.jsx("option",{value:"400",children:"400 kcmil"}),s.jsx("option",{value:"500",children:"500 kcmil"}),s.jsx("option",{value:"600",children:"600 kcmil"}),s.jsx("option",{value:"750",children:"750 kcmil"}),s.jsx("option",{value:"1000",children:"1000 kcmil"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:V.labelText,marginBottom:"0.5rem"},children:"Power Factor (AC loads)"}),s.jsxs("select",{value:E,onChange:q=>L(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${V.inputBorder}`,borderRadius:"8px",backgroundColor:V.inputBg,color:V.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"1.0",children:"1.0 (Resistive loads)"}),s.jsx("option",{value:"0.9",children:"0.9 (Most motors)"}),s.jsx("option",{value:"0.85",children:"0.85 (Typical mixed load)"}),s.jsx("option",{value:"0.8",children:"0.8 (Poor power factor)"})]})]})]})]}),n&&o&&u&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:V.cardBg,border:`1px solid ${V.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:V.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:V.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:V.labelText,marginBottom:"0.25rem"},children:"Voltage Drop"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:V.cardText},children:I.drop}),s.jsx("div",{style:{fontSize:"0.75rem",color:V.labelText,marginTop:"0.25rem"},children:"Volts"})]}),s.jsxs("div",{style:{background:I.excessive?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:I.excessive?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Percentage Drop"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:I.excessive?"#dc2626":"#1e40af"},children:[I.percentage,"%"]}),s.jsx("div",{style:{fontSize:"0.75rem",color:I.excessive?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:"Max: 3%"})]})]}),s.jsxs("div",{style:{background:V.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${V.cardBorder}`},children:[s.jsx("strong",{style:{color:V.cardText,display:"block",marginBottom:"0.5rem",fontSize:"0.875rem"},children:"Calculation Details:"}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:V.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["Formula: ",b==="single"?"2":"1.732","  K  I  L  PF  CM"]}),s.jsxs("div",{children:["K constant (",v,"): ",A[v].ac]}),s.jsxs("div",{children:["Circular mils: ",k[d].toLocaleString()]}),s.jsxs("div",{children:["Power factor: ",E]}),s.jsxs("div",{children:["System: ",b==="single"?"Single":"Three"," phase"]})]})]})]}),I.excessive?s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem",fontSize:"0.9375rem"},children:"WARNING: Exceeds NEC 3% Limit"}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"Consider using larger wire size to reduce voltage drop. Excessive voltage drop can cause equipment malfunction and reduced efficiency."})]})]})}):s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Voltage drop is within NEC limits"}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"This circuit meets the NEC recommended 3% maximum voltage drop for branch circuits."})]})]})}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[s.jsxs("button",{onClick:D,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:q=>q.currentTarget.style.background="#2563eb",onMouseOut:q=>q.currentTarget.style.background="#3b82f6",children:[s.jsx(Hm,{size:18}),"Export to PDF"]}),s.jsxs("button",{onClick:w,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:q=>q.currentTarget.style.background="#059669",onMouseOut:q=>q.currentTarget.style.background="#10b981",children:[s.jsx(Lu,{size:18}),"Attach to Job"]})]})]}),s.jsxs("div",{style:{background:V.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${V.cardBorder}`,fontSize:"0.8125rem",color:V.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:V.cardText},children:"NEC Guidelines:"}),"Branch circuits: 3% max  Feeders: 3% max  Combined: 5% max"]}),C&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:s.jsxs("div",{style:{background:V.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[s.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:V.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),s.jsx("div",{style:{marginBottom:"1rem"},children:ne?s.jsx("div",{style:{textAlign:"center",padding:"2rem",color:V.labelText},children:"Loading jobs..."}):$&&$.length>0?$.map(q=>s.jsxs("div",{onClick:()=>B(q.id),style:{padding:"1rem",background:V.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${V.cardBorder}`,transition:"all 0.2s"},onMouseOver:oe=>oe.currentTarget.style.transform="translateY(-2px)",onMouseOut:oe=>oe.currentTarget.style.transform="translateY(0)",children:[s.jsx("div",{style:{fontWeight:"600",color:V.cardText,marginBottom:"0.25rem"},children:q.name}),s.jsx("div",{style:{fontSize:"0.875rem",color:V.labelText},children:q.location||"No location"})]},q.id)):s.jsx("div",{style:{textAlign:"center",padding:"2rem",color:V.labelText},children:s.jsx("p",{children:"No jobs found. Create a job first."})})}),s.jsx("button",{onClick:()=>M(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:q=>q.currentTarget.style.background="#4b5563",onMouseOut:q=>q.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})}),pN=({isDarkMode:r,colors:e,onExport:t})=>{const[n,i]=me.useState(""),[o,l]=me.useState(""),[u,h]=me.useState(""),[d,g]=me.useState(""),[b,S]=me.useState({V:"",I:"",R:"",P:""}),[v,N]=me.useState(!1),[E,L]=me.useState([]),[C,M]=me.useState(!1);me.useEffect(()=>{$()},[n,o,u,d]);const $=()=>{const k=parseFloat(n)||0,A=parseFloat(o)||0,O=parseFloat(u)||0,I=parseFloat(d)||0,w={V:"",I:"",R:"",P:""};!n&&A&&O?w.V=(A*O).toFixed(1):!n&&I&&A&&A!==0?w.V=(I/A).toFixed(1):!n&&I&&O?w.V=Math.sqrt(I*O).toFixed(1):n&&(w.V=k.toFixed(1)),!o&&k&&O&&O!==0?w.I=(k/O).toFixed(1):!o&&I&&k&&k!==0?w.I=(I/k).toFixed(1):!o&&I&&O&&O!==0?w.I=Math.sqrt(I/O).toFixed(1):o&&(w.I=A.toFixed(1)),!u&&k&&A&&A!==0?w.R=(k/A).toFixed(1):!u&&k&&I&&I!==0?w.R=(k*k/I).toFixed(1):!u&&I&&A&&A!==0?w.R=(I/(A*A)).toFixed(1):u&&(w.R=O.toFixed(1)),!d&&k&&A?w.P=(k*A).toFixed(1):!d&&A&&O?w.P=(A*A*O).toFixed(1):!d&&k&&O&&O!==0?w.P=(k*k/O).toFixed(1):d&&(w.P=I.toFixed(1)),S(w)},F=()=>{i(""),l(""),h(""),g(""),S({V:"",I:"",R:"",P:""})},ne=async()=>{N(!0),M(!0);try{const k=await Wu();L(k)}catch(k){console.error("Error loading jobs:",k),alert("Failed to load jobs. Please try again.")}finally{M(!1)}},ue=async k=>{try{const A={type:"ohms-law-basic",data:{voltage:parseFloat(n)||parseFloat(b.V)||0,current:parseFloat(o)||parseFloat(b.I)||0,resistance:parseFloat(u)||parseFloat(b.R)||0,power:parseFloat(d)||parseFloat(b.P)||0}};await Gf(k,A),N(!1),alert("Calculation attached to job successfully!")}catch(A){console.error("Error attaching calculation:",A),alert("Failed to attach calculation. Please try again.")}},V=()=>{if(!(n||o||u||d||b.V||b.I||b.R||b.P)){alert("Please enter at least 2 values before exporting");return}const A={},O={};n&&(A.voltage=`${n} V`),o&&(A.current=`${o} A`),u&&(A.resistance=`${u} `),d&&(A.power=`${d} W`),b.V&&(O.voltage=`${b.V} V`),b.I&&(O.current=`${b.I} A`),b.R&&(O.resistance=`${b.R} `),b.P&&(O.power=`${b.P} W`),t({calculatorName:"Ohm's Law Calculator - Basic",inputs:A,results:O,additionalInfo:{note:"Calculations based on fundamental electrical formulas"},necReferences:["Ohm's Law: E = I  R","Power formulas: P = E  I, P = I  R, P = E  R","Current: I = E  R, I = P  E, I = (P  R)","Resistance: R = E  I, R = E  P, R = P  I"]})};return s.jsxs("div",{children:[s.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:"Enter any 2 known values to calculate the remaining values"})]})}),s.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Volts (E)"}),s.jsx("input",{type:"number",value:n||b.V,onChange:k=>i(k.target.value),placeholder:"Enter voltage",disabled:o&&u||o&&d||u&&d,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:o&&u||o&&d||u&&d?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:o&&u||o&&d||u&&d?"not-allowed":"text"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Amps (I)"}),s.jsx("input",{type:"number",value:o||b.I,onChange:k=>l(k.target.value),placeholder:"Enter current",disabled:n&&u||n&&d||u&&d,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:n&&u||n&&d||u&&d?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:n&&u||n&&d||u&&d?"not-allowed":"text"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Ohms (R)"}),s.jsx("input",{type:"number",value:u||b.R,onChange:k=>h(k.target.value),placeholder:"Enter resistance",disabled:n&&o||n&&d||o&&d,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:n&&o||n&&d||o&&d?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:n&&o||n&&d||o&&d?"not-allowed":"text"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Watts (P)"}),s.jsx("input",{type:"number",value:d||b.P,onChange:k=>g(k.target.value),placeholder:"Enter power",disabled:n&&o||n&&u||o&&u,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:n&&o||n&&u||o&&u?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:n&&o||n&&u||o&&u?"not-allowed":"text"}})]})]}),s.jsx("button",{onClick:F,style:{width:"100%",background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),(b.V||b.I||b.R||b.P)&&s.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[b.V&&s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Voltage"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:b.V}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Volts"})]}),b.I&&s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Current"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:b.I}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),b.R&&s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Resistance"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:b.R}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Ohms"})]}),b.P&&s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Power"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:b.P}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Watts"})]})]})]}),(n||o||u||d)&&s.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[s.jsxs("button",{onClick:V,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:k=>k.currentTarget.style.background="#2563eb",onMouseOut:k=>k.currentTarget.style.background="#3b82f6",children:[s.jsx(Hm,{size:18}),"Export to PDF"]}),s.jsxs("button",{onClick:ne,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:k=>k.currentTarget.style.background="#059669",onMouseOut:k=>k.currentTarget.style.background="#10b981",children:[s.jsx(Lu,{size:18}),"Attach to Job"]})]}),v&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:s.jsxs("div",{style:{background:e.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[s.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:e.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),s.jsx("div",{style:{marginBottom:"1rem"},children:C?s.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:"Loading jobs..."}):E&&E.length>0?E.map(k=>s.jsxs("div",{onClick:()=>ue(k.id),style:{padding:"1rem",background:e.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${e.cardBorder}`,transition:"all 0.2s"},onMouseOver:A=>A.currentTarget.style.transform="translateY(-2px)",onMouseOut:A=>A.currentTarget.style.transform="translateY(0)",children:[s.jsx("div",{style:{fontWeight:"600",color:e.cardText,marginBottom:"0.25rem"},children:k.name}),s.jsx("div",{style:{fontSize:"0.875rem",color:e.labelText},children:k.location||"No location"})]},k.id)):s.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:s.jsx("p",{children:"No jobs found. Create a job first."})})}),s.jsx("button",{onClick:()=>N(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:k=>k.currentTarget.style.background="#4b5563",onMouseOut:k=>k.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})},mN=({isDarkMode:r,colors:e,onExport:t})=>{const[n,i]=me.useState([{id:1,R:"",V:"",I:"",P:""}]),[o,l]=me.useState({R:"",V:"",I:"",P:""}),[u,h]=me.useState(!1),[d,g]=me.useState([]),[b,S]=me.useState(!1),v=(A,O)=>Object.entries(A).filter(([w,B])=>w!==O&&B&&B!=="").map(([w])=>w).length>=2,N=()=>{const A=Math.max(...n.map(O=>O.id),0)+1;i([...n,{id:A,R:"",V:"",I:"",P:""}])},E=A=>{n.length>1&&i(n.filter(O=>O.id!==A))},L=(A,O,I)=>{i(n.map(w=>w.id===A?{...w,[O]:I}:w))},C=(A,O)=>{const I=[];if(O.I&&O.I!==""){const w=parseFloat(O.I);A.forEach((B,D)=>{if(B.I&&B.I!==""){const q=parseFloat(B.I);Math.abs(q-w)>.01&&I.push(`Total current (${w}A) conflicts with Component ${D+1} current (${q}A)`)}})}return I},M=()=>{const A=C(n,o);if(A.length>0){alert(`Conflicts detected:
`+A.join(`
`));return}let O=[...n];if(o.I&&o.I!==""){const D=parseFloat(o.I);O=O.map(q=>!q.I||q.I===""?{...q,I:D.toFixed(1)}:q)}let I=!0,w=0;const B=50;for(;I&&w<B;){I=!1,w++;let D=null;for(let q of O)if(q.I&&!isNaN(parseFloat(q.I))){D=parseFloat(q.I);break}if(D===null)for(let q of O){const oe=parseFloat(q.V),se=parseFloat(q.R),ie=parseFloat(q.P);if(!isNaN(oe)&&!isNaN(se)&&se!==0){D=oe/se;break}else if(!isNaN(ie)&&!isNaN(oe)&&oe!==0){D=ie/oe;break}else if(!isNaN(ie)&&!isNaN(se)&&se!==0){D=Math.sqrt(ie/se);break}}D!==null&&(O=O.map(q=>!q.I||q.I===""?(I=!0,{...q,I:D.toFixed(1)}):q)),O=O.map(q=>{const oe={...q},se=parseFloat(q.V),ie=parseFloat(q.I),ve=parseFloat(q.R),be=parseFloat(q.P);(q.R===""||isNaN(ve))&&!isNaN(se)&&!isNaN(ie)&&ie!==0?(oe.R=(se/ie).toFixed(1),I=!0):(q.R===""||isNaN(ve))&&!isNaN(be)&&!isNaN(ie)&&ie!==0?(oe.R=(be/(ie*ie)).toFixed(1),I=!0):(q.R===""||isNaN(ve))&&!isNaN(se)&&!isNaN(be)&&be!==0&&(oe.R=(se*se/be).toFixed(1),I=!0);const Z=parseFloat(oe.R),W=parseFloat(oe.I);(q.V===""||isNaN(se))&&!isNaN(W)&&!isNaN(Z)?(oe.V=(W*Z).toFixed(1),I=!0):(q.V===""||isNaN(se))&&!isNaN(be)&&!isNaN(W)&&W!==0?(oe.V=(be/W).toFixed(1),I=!0):(q.V===""||isNaN(se))&&!isNaN(be)&&!isNaN(Z)&&(oe.V=Math.sqrt(be*Z).toFixed(1),I=!0);const J=parseFloat(oe.V);return(q.P===""||isNaN(be))&&!isNaN(J)&&!isNaN(W)?(oe.P=(J*W).toFixed(1),I=!0):(q.P===""||isNaN(be))&&!isNaN(W)&&!isNaN(Z)?(oe.P=(W*W*Z).toFixed(1),I=!0):(q.P===""||isNaN(be))&&!isNaN(J)&&!isNaN(Z)&&Z!==0&&(oe.P=(J*J/Z).toFixed(1),I=!0),oe})}i(O)},$=()=>{i([{id:1,R:"",V:"",I:"",P:""}]),l({R:"",V:"",I:"",P:""})},F=()=>{const A=n.reduce((D,q)=>{const oe=parseFloat(q.R);return D+(isNaN(oe)?0:oe)},0),O=n.reduce((D,q)=>{const oe=parseFloat(q.V);return D+(isNaN(oe)?0:oe)},0),I=n.reduce((D,q)=>{const oe=parseFloat(q.P);return D+(isNaN(oe)?0:oe)},0),w=n.find(D=>!isNaN(parseFloat(D.I))),B=w?parseFloat(w.I):0;return{totalR:A,totalV:O,totalI:B,totalP:I}},ne=async()=>{h(!0),S(!0);try{const A=await Wu();g(A)}catch(A){console.error("Error loading jobs:",A),alert("Failed to load jobs. Please try again.")}finally{S(!1)}},ue=async A=>{try{const O=F();await Gf(A,{type:"ohms-law-series",data:{components:n,totals:O}}),h(!1),alert("Calculation attached to job successfully!")}catch(O){console.error("Error attaching calculation:",O),alert("Failed to attach calculation. Please try again.")}},V=()=>{if(!n.some(B=>B.R||B.V||B.I||B.P)){alert("Please enter component values before exporting");return}const O=F(),I={};n.forEach((B,D)=>{const q=[];B.R&&q.push(`R=${B.R}`),B.V&&q.push(`V=${B.V}V`),B.I&&q.push(`I=${B.I}A`),B.P&&q.push(`P=${B.P}W`),q.length>0&&(I[`component${D+1}`]=q.join(", "))});const w={calculatorName:"Ohm's Law Calculator - Series Circuit",inputs:I,results:{totalResistance:`${O.totalR.toFixed(1)} `,totalVoltage:`${O.totalV.toFixed(1)} V`,current:`${O.totalI.toFixed(1)} A (constant)`,totalPower:`${O.totalP.toFixed(1)} W`},additionalInfo:{circuitType:"Series Circuit",principle:"Current is constant across all components",totalResistanceFormula:"R_total = R1 + R2 + R3 + ...",totalVoltageFormula:"V_total = V1 + V2 + V3 + ..."},necReferences:["Series circuits: Current is the same through all components","Total resistance = Sum of all resistances","Total voltage = Sum of voltage drops across components","Total power = Sum of power dissipated in each component"]};t(w)},k=n.some(A=>A.R||A.V||A.I||A.P);return s.jsxs("div",{children:[s.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:"Series Circuit: Current is constant across all components"})]})}),s.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${e.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Totals (Optional)"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"0.5rem"},children:["V","I","R","P"].map(A=>{const O={R:"Ohms (R)",V:"Volts (E)",I:"Amps (I)",P:"Watts (P)"};return s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:O[A]}),s.jsx("input",{type:"number",value:o[A],onChange:I=>l({...o,[A]:I.target.value}),placeholder:"Optional",disabled:v(o,A),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:v(o,A)?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:v(o,A)?"not-allowed":"text"}})]},A)})}),s.jsx("p",{style:{fontSize:"0.8125rem",color:e.subtleText,margin:0,fontStyle:"italic"},children:"Enter known total values to help solve the circuit. Current is constant in series."})]}),n.map((A,O)=>s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${e.cardBorder}`},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",marginBottom:"0.75rem",gap:"0.5rem"},children:[s.jsxs("h4",{style:{fontWeight:"600",color:e.labelText,margin:0,fontSize:"0.875rem"},children:["Component ",O+1]}),n.length>1&&s.jsx("button",{onClick:()=>E(A.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:s.jsx(Tc,{size:18})})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem"},children:[{field:"V",label:"Volts (E)"},{field:"I",label:"Amps (I)"},{field:"R",label:"Ohms (R)"},{field:"P",label:"Watts (P)"}].map(({field:I,label:w})=>s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"500",color:e.subtleText,marginBottom:"0.25rem"},children:w}),s.jsx("input",{type:"number",value:A[I],onChange:B=>L(A.id,I,B.target.value),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:e.inputBg,color:e.cardText,boxSizing:"border-box"}})]},I))})]},A.id)),s.jsxs("button",{onClick:N,style:{width:"100%",background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[s.jsx(ma,{size:16}),"Add Component"]}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[s.jsxs("button",{onClick:M,style:{flex:1,background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[s.jsx(cf,{size:20}),"Calculate"]}),s.jsx("button",{onClick:$,style:{flex:1,background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),s.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem"},children:"Circuit Totals"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Voltage"}),s.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalV.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"E"})]}),s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Amperage"}),s.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalI.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"I"})]}),s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Resistance"}),s.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalR.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"R"})]}),s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Wattage"}),s.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalP.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"P"})]})]})]}),k&&s.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[s.jsxs("button",{onClick:V,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:A=>A.currentTarget.style.background="#2563eb",onMouseOut:A=>A.currentTarget.style.background="#3b82f6",children:[s.jsx(Hm,{size:18}),"Export to PDF"]}),s.jsxs("button",{onClick:ne,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:A=>A.currentTarget.style.background="#059669",onMouseOut:A=>A.currentTarget.style.background="#10b981",children:[s.jsx(Lu,{size:18}),"Attach to Job"]})]}),u&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:s.jsxs("div",{style:{background:e.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[s.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:e.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),s.jsx("div",{style:{marginBottom:"1rem"},children:b?s.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:"Loading jobs..."}):d&&d.length>0?d.map(A=>s.jsxs("div",{onClick:()=>ue(A.id),style:{padding:"1rem",background:e.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${e.cardBorder}`,transition:"all 0.2s"},onMouseOver:O=>O.currentTarget.style.transform="translateY(-2px)",onMouseOut:O=>O.currentTarget.style.transform="translateY(0)",children:[s.jsx("div",{style:{fontWeight:"600",color:e.cardText,marginBottom:"0.25rem"},children:A.name}),s.jsx("div",{style:{fontSize:"0.875rem",color:e.labelText},children:A.location||"No location"})]},A.id)):s.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:s.jsx("p",{children:"No jobs found. Create a job first."})})}),s.jsx("button",{onClick:()=>h(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:A=>A.currentTarget.style.background="#4b5563",onMouseOut:A=>A.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})},gN=({isDarkMode:r,colors:e,onExport:t})=>{const[n,i]=me.useState([{id:1,R:"",V:"",I:"",P:""}]),[o,l]=me.useState({R:"",V:"",I:"",P:""}),[u,h]=me.useState(!1),[d,g]=me.useState([]),[b,S]=me.useState(!1),v=(A,O)=>Object.entries(A).filter(([w,B])=>w!==O&&B&&B!=="").map(([w])=>w).length>=2,N=()=>{const A=Math.max(...n.map(O=>O.id),0)+1;i([...n,{id:A,R:"",V:"",I:"",P:""}])},E=A=>{n.length>1&&i(n.filter(O=>O.id!==A))},L=(A,O,I)=>{i(n.map(w=>w.id===A?{...w,[O]:I}:w))},C=(A,O)=>{const I=[];if(O.V&&O.V!==""){const w=parseFloat(O.V);A.forEach((B,D)=>{if(B.V&&B.V!==""){const q=parseFloat(B.V);Math.abs(q-w)>.01&&I.push(`Total voltage (${w}V) conflicts with Component ${D+1} voltage (${q}V)`)}})}return I},M=()=>{const A=C(n,o);if(A.length>0){alert(`Conflicts detected:
`+A.join(`
`));return}let O=[...n];if(o.V&&o.V!==""){const D=parseFloat(o.V);O=O.map(q=>!q.V||q.V===""?{...q,V:D.toFixed(1)}:q)}let I=!0,w=0;const B=50;for(;I&&w<B;){I=!1,w++;let D=null;for(let q of O)if(q.V&&!isNaN(parseFloat(q.V))){D=parseFloat(q.V);break}if(D===null)for(let q of O){const oe=parseFloat(q.I),se=parseFloat(q.R),ie=parseFloat(q.P);if(!isNaN(oe)&&!isNaN(se)){D=oe*se;break}else if(!isNaN(ie)&&!isNaN(oe)&&oe!==0){D=ie/oe;break}else if(!isNaN(ie)&&!isNaN(se)){D=Math.sqrt(ie*se);break}}D!==null&&(O=O.map(q=>!q.V||q.V===""?(I=!0,{...q,V:D.toFixed(1)}):q)),O=O.map(q=>{const oe={...q},se=parseFloat(q.V),ie=parseFloat(q.I),ve=parseFloat(q.R),be=parseFloat(q.P);(q.R===""||isNaN(ve))&&!isNaN(se)&&!isNaN(ie)&&ie!==0?(oe.R=(se/ie).toFixed(1),I=!0):(q.R===""||isNaN(ve))&&!isNaN(be)&&!isNaN(ie)&&ie!==0?(oe.R=(be/(ie*ie)).toFixed(1),I=!0):(q.R===""||isNaN(ve))&&!isNaN(se)&&!isNaN(be)&&be!==0&&(oe.R=(se*se/be).toFixed(1),I=!0);const Z=parseFloat(oe.R),W=parseFloat(oe.V);(q.I===""||isNaN(ie))&&!isNaN(W)&&!isNaN(Z)&&Z!==0?(oe.I=(W/Z).toFixed(1),I=!0):(q.I===""||isNaN(ie))&&!isNaN(be)&&!isNaN(W)&&W!==0?(oe.I=(be/W).toFixed(1),I=!0):(q.I===""||isNaN(ie))&&!isNaN(be)&&!isNaN(Z)&&Z!==0&&(oe.I=Math.sqrt(be/Z).toFixed(1),I=!0);const J=parseFloat(oe.I);return(q.P===""||isNaN(be))&&!isNaN(W)&&!isNaN(J)?(oe.P=(W*J).toFixed(1),I=!0):(q.P===""||isNaN(be))&&!isNaN(J)&&!isNaN(Z)?(oe.P=(J*J*Z).toFixed(1),I=!0):(q.P===""||isNaN(be))&&!isNaN(W)&&!isNaN(Z)&&Z!==0&&(oe.P=(W*W/Z).toFixed(1),I=!0),oe})}i(O)},$=()=>{i([{id:1,R:"",V:"",I:"",P:""}]),l({R:"",V:"",I:"",P:""})},F=()=>{const A=n.reduce((q,oe)=>{const se=parseFloat(oe.I);return q+(isNaN(se)?0:se)},0),O=n.reduce((q,oe)=>{const se=parseFloat(oe.P);return q+(isNaN(se)?0:se)},0),I=n.find(q=>!isNaN(parseFloat(q.V))),w=I?parseFloat(I.V):0,B=n.map(q=>parseFloat(q.R)).filter(q=>!isNaN(q)&&q>0);return{totalR:B.length>0?1/B.reduce((q,oe)=>q+1/oe,0):0,totalV:w,totalI:A,totalP:O}},ne=async()=>{h(!0),S(!0);try{const A=await Wu();g(A)}catch(A){console.error("Error loading jobs:",A),alert("Failed to load jobs. Please try again.")}finally{S(!1)}},ue=async A=>{try{const O=F();await Gf(A,{type:"ohms-law-parallel",data:{components:n,totals:O}}),h(!1),alert("Calculation attached to job successfully!")}catch(O){console.error("Error attaching calculation:",O),alert("Failed to attach calculation. Please try again.")}},V=()=>{if(!n.some(B=>B.R||B.V||B.I||B.P)){alert("Please enter component values before exporting");return}const O=F(),I={};n.forEach((B,D)=>{const q=[];B.R&&q.push(`R=${B.R}`),B.V&&q.push(`V=${B.V}V`),B.I&&q.push(`I=${B.I}A`),B.P&&q.push(`P=${B.P}W`),q.length>0&&(I[`component${D+1}`]=q.join(", "))});const w={calculatorName:"Ohm's Law Calculator - Parallel Circuit",inputs:I,results:{totalResistance:`${O.totalR.toFixed(1)} `,voltage:`${O.totalV.toFixed(1)} V (constant)`,totalCurrent:`${O.totalI.toFixed(1)} A`,totalPower:`${O.totalP.toFixed(1)} W`},additionalInfo:{circuitType:"Parallel Circuit",principle:"Voltage is constant across all components",totalResistanceFormula:"1/R_total = 1/R1 + 1/R2 + 1/R3 + ...",totalCurrentFormula:"I_total = I1 + I2 + I3 + ..."},necReferences:["Parallel circuits: Voltage is the same across all components","Total resistance = 1  (1/R1 + 1/R2 + 1/R3 + ...)","Total current = Sum of currents through each branch","Total power = Sum of power dissipated in each component"]};t(w)},k=n.some(A=>A.R||A.V||A.I||A.P);return s.jsxs("div",{children:[s.jsx("div",{style:{background:"#faf5ff",border:"1px solid #a855f7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#7e22ce",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#7e22ce",lineHeight:"1.5"},children:"Parallel Circuit: Voltage is constant across all components"})]})}),s.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${e.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Totals (Optional)"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"0.5rem"},children:["V","I","R","P"].map(A=>{const O={R:"Ohms (R)",V:"Volts (E)",I:"Amps (I)",P:"Watts (P)"};return s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:O[A]}),s.jsx("input",{type:"number",value:o[A],onChange:I=>l({...o,[A]:I.target.value}),placeholder:"Optional",disabled:v(o,A),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:v(o,A)?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:v(o,A)?"not-allowed":"text"}})]},A)})}),s.jsx("p",{style:{fontSize:"0.8125rem",color:e.subtleText,margin:0,fontStyle:"italic"},children:"Enter known total values to help solve the circuit. Voltage is constant in parallel."})]}),n.map((A,O)=>s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${e.cardBorder}`},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",marginBottom:"0.75rem",gap:"0.5rem"},children:[s.jsxs("h4",{style:{fontWeight:"600",color:e.labelText,margin:0,fontSize:"0.875rem"},children:["Component ",O+1]}),n.length>1&&s.jsx("button",{onClick:()=>E(A.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:s.jsx(Tc,{size:18})})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem"},children:[{field:"V",label:"Volts (E)"},{field:"I",label:"Amps (I)"},{field:"R",label:"Ohms (R)"},{field:"P",label:"Watts (P)"}].map(({field:I,label:w})=>s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"500",color:e.subtleText,marginBottom:"0.25rem"},children:w}),s.jsx("input",{type:"number",value:A[I],onChange:B=>L(A.id,I,B.target.value),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:e.inputBg,color:e.cardText,boxSizing:"border-box"}})]},I))})]},A.id)),s.jsxs("button",{onClick:N,style:{width:"100%",background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[s.jsx(ma,{size:16}),"Add Component"]}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[s.jsxs("button",{onClick:M,style:{flex:1,background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[s.jsx(cf,{size:20}),"Calculate"]}),s.jsx("button",{onClick:$,style:{flex:1,background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),s.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem"},children:"Circuit Totals"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Voltage"}),s.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalV.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"E"})]}),s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Amperage"}),s.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalI.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"I"})]}),s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Resistance"}),s.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalR.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"R"})]}),s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Wattage"}),s.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalP.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"P"})]})]})]}),k&&s.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[s.jsxs("button",{onClick:V,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:A=>A.currentTarget.style.background="#2563eb",onMouseOut:A=>A.currentTarget.style.background="#3b82f6",children:[s.jsx(Hm,{size:18}),"Export to PDF"]}),s.jsxs("button",{onClick:ne,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:A=>A.currentTarget.style.background="#059669",onMouseOut:A=>A.currentTarget.style.background="#10b981",children:[s.jsx(Lu,{size:18}),"Attach to Job"]})]}),u&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:s.jsxs("div",{style:{background:e.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[s.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:e.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),s.jsx("div",{style:{marginBottom:"1rem"},children:b?s.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:"Loading jobs..."}):d&&d.length>0?d.map(A=>s.jsxs("div",{onClick:()=>ue(A.id),style:{padding:"1rem",background:e.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${e.cardBorder}`,transition:"all 0.2s"},onMouseOver:O=>O.currentTarget.style.transform="translateY(-2px)",onMouseOut:O=>O.currentTarget.style.transform="translateY(0)",children:[s.jsx("div",{style:{fontWeight:"600",color:e.cardText,marginBottom:"0.25rem"},children:A.name}),s.jsx("div",{style:{fontSize:"0.875rem",color:e.labelText},children:A.location||"No location"})]},A.id)):s.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:s.jsx("p",{children:"No jobs found. Create a job first."})})}),s.jsx("button",{onClick:()=>h(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:A=>A.currentTarget.style.background="#4b5563",onMouseOut:A=>A.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})},yN=me.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=me.useState("basic"),i={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},o=l=>{cn(l)};return me.useImperativeHandle(e,()=>({exportPDF:()=>{alert("Please use the Export to PDF button within the calculator")}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{background:i.cardBg,border:`1px solid ${i.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem"},children:[s.jsx("button",{onClick:()=>n("basic"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="basic"?"#3b82f6":i.sectionBg,color:t==="basic"?"white":i.labelText,border:`1px solid ${t==="basic"?"#3b82f6":i.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Basic"}),s.jsx("button",{onClick:()=>n("series"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="series"?"#3b82f6":i.sectionBg,color:t==="series"?"white":i.labelText,border:`1px solid ${t==="series"?"#3b82f6":i.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Series"}),s.jsx("button",{onClick:()=>n("parallel"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="parallel"?"#3b82f6":i.sectionBg,color:t==="parallel"?"white":i.labelText,border:`1px solid ${t==="parallel"?"#3b82f6":i.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Parallel"})]}),t==="basic"&&s.jsx(pN,{isDarkMode:r,colors:i,onExport:o}),t==="series"&&s.jsx(mN,{isDarkMode:r,colors:i,onExport:o}),t==="parallel"&&s.jsx(gN,{isDarkMode:r,colors:i,onExport:o}),s.jsxs("div",{style:{background:i.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${i.cardBorder}`,fontSize:"0.8125rem",color:i.labelText,marginTop:"1rem"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:i.cardText},children:"Formulas:"}),s.jsx("div",{children:"E = I  R"}),s.jsx("div",{children:"P = E  I"}),s.jsx("div",{children:"I = E  R"}),s.jsx("div",{children:"P = I  R"}),s.jsx("div",{children:"R = E  I"}),s.jsx("div",{children:"P = E  R"})]})]})}),hu={"4x1.25-round-octagon":{capacity:12.5,name:'4" x 1-1/4" Round/Octagon',type:"round-octagon"},"4x1.5-round-octagon":{capacity:15.5,name:'4" x 1-1/2" Round/Octagon',type:"round-octagon"},"4x2.125-round-octagon":{capacity:21.5,name:'4" x 2-1/8" Round/Octagon',type:"round-octagon"},"4x1.25-square":{capacity:18,name:'4" x 1-1/4" Square',type:"square"},"4x1.5-square":{capacity:21,name:'4" x 1-1/2" Square',type:"square"},"4x2.125-square":{capacity:30.3,name:'4" x 2-1/8" Square',type:"square"},"4-11/16x1.25-square":{capacity:25.5,name:'4-11/16" x 1-1/4" Square',type:"square"},"4-11/16x1.5-square":{capacity:29.5,name:'4-11/16" x 1-1/2" Square',type:"square"},"4-11/16x2.125-square":{capacity:42,name:'4-11/16" x 2-1/8" Square',type:"square"},"3x2x1.5-device":{capacity:7.5,name:'3" x 2" x 1-1/2" Device',type:"device"},"3x2x2-device":{capacity:10,name:'3" x 2" x 2" Device',type:"device"},"3x2x2.25-device":{capacity:10.5,name:'3" x 2" x 2-1/4" Device',type:"device"},"3x2x2.5-device":{capacity:12.5,name:'3" x 2" x 2-1/2" Device',type:"device"},"3x2x2.75-device":{capacity:14,name:'3" x 2" x 2-3/4" Device',type:"device"},"3x2x3.5-device":{capacity:18,name:'3" x 2" x 3-1/2" Device',type:"device"},"4x2.125x1.5-device":{capacity:10.3,name:'4" x 2-1/8" x 1-1/2" Device',type:"device"},"4x2.125x1.875-device":{capacity:13,name:'4" x 2-1/8" x 1-7/8" Device',type:"device"},"4x2.125x2.125-device":{capacity:14.5,name:'4" x 2-1/8" x 2-1/8" Device',type:"device"},"3.5x2x2.5-masonry":{capacity:14,name:'3-1/2" x 2" x 2-1/2" Masonry',type:"masonry"},"3.5x2x3.5-masonry":{capacity:21,name:'3-1/2" x 2" x 3-1/2" Masonry',type:"masonry"},"fs-1.25-single":{capacity:13.5,name:'FS Single Cover/Gang (1-1/4" min)',type:"fs-fd"},"fd-2.125-single":{capacity:18,name:'FD Single Cover/Gang (2-1/8" min)',type:"fs-fd"},"fs-1.25-multiple":{capacity:18,name:'FS Multiple Cover/Gang (1-1/4" min)',type:"fs-fd"},"fd-2.125-multiple":{capacity:24,name:'FD Multiple Cover/Gang (2-1/8" min)',type:"fs-fd"}},xN={18:1.5,16:1.75,14:2,12:2.25,10:2.5,8:3,6:5},vN=["18","16","14","12","10","8","6"],bN=r=>{var e;return((e=hu[r])==null?void 0:e.capacity)||0},wN=r=>{var e;return((e=hu[r])==null?void 0:e.name)||"Unknown Box"},Mb=r=>xN[r]||0,Hp={mainSection:"NEC 314.16 - Number of Conductors in Outlet, Device, and Junction Boxes",calculations:"NEC 314.16(B) - Box Fill Calculations",table:"NEC Table 314.16(B) - Volume Allowance Required per Conductor",rules:["Each conductor = volume from Table 314.16(B)","Each device (receptacle/switch) counts as 2 conductor volumes","All equipment grounding conductors combined count as 1 conductor volume","One or more cable clamps count as 1 conductor volume","Conductor size for devices/clamps/grounds is based on largest conductor entering the box"]},SN=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=me.useState("4x1.5-square"),[o,l]=me.useState([{size:"12",count:""}]),[u,h]=me.useState({outlets:"",switches:"",clamps:"",groundWires:!1}),d={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},g=()=>{l([...o,{size:"12",count:""}])},b=M=>{o.length>1&&l(o.filter(($,F)=>F!==M))},S=(M,$,F)=>{const ne=[...o];ne[M][$]=F,l(ne)},N=(()=>{let M=0;const $=o.map(w=>{const B=parseInt(w.count)||0,D=Mb(w.size),q=D*B;return M+=q,{size:w.size,count:B,allowanceEach:D,subtotal:q}}),F=o.reduce((w,B)=>{if((parseInt(B.count)||0)>0){const q=parseInt(B.size.replace("/",""))||0,oe=parseInt(w.replace("/",""))||0;return q<oe?B.size:w}return w},"14"),ne=Mb(F),ue=parseInt(u.outlets)||0,V=parseInt(u.switches)||0,k=(ue+V)*2*ne;M+=k;const O=(parseInt(u.clamps)||0)>0?ne:0;M+=O;const I=u.groundWires?ne:0;return M+=I,{conductorDetails:$,deviceFill:k,clampFill:O,groundFill:I,totalFill:M,largestWireSize:F,deviceWireAllowance:ne}})(),E=bN(n),L=E>0?(N.totalFill/E*100).toFixed(1):0,C=N.totalFill>E;return me.useImperativeHandle(t,()=>({exportPDF:()=>{const M={};o.forEach((k,A)=>{const O=parseInt(k.count)||0;O>0&&(M[`Conductor ${A+1}`]=`${O} ${k.size} AWG`)});const $={};N.conductorDetails.forEach((k,A)=>{k.count>0&&($[`${k.count} ${k.size} AWG`]=`${k.allowanceEach} cu.in. each = ${k.subtotal.toFixed(2)} cu.in. total`)});const F=parseInt(u.outlets)||0,ne=parseInt(u.switches)||0,ue=parseInt(u.clamps)||0,V={calculatorName:"Box Fill Calculator",inputs:{boxType:`${wN(n)} (${E} cu.in.)`,...M,receptaclesOutlets:F>0?`${F} (counts as ${F*2} conductors)`:"0",switches:ne>0?`${ne} (counts as ${ne*2} conductors)`:"0",cableClamps:ue>0?`${ue} (counts as 1 conductor volume)`:"0",equipmentGroundingConductors:u.groundWires?"Yes (counts as 1 conductor volume)":"No"},results:{boxCapacity:`${E} cu.in.`,calculatedFill:`${N.totalFill.toFixed(2)} cu.in.`,fillPercentage:`${L}%`,status:C?" OVERFILLED - Violates NEC 314.16":" Within NEC limits",deviceFill:N.deviceFill>0?`${N.deviceFill.toFixed(2)} cu.in.`:"N/A",clampFill:N.clampFill>0?`${N.clampFill.toFixed(2)} cu.in.`:"N/A",groundFill:N.groundFill>0?`${N.groundFill.toFixed(2)} cu.in.`:"N/A"},additionalInfo:{...$,largestWireSize:`${N.largestWireSize} AWG (used for device/clamp/ground allowance)`,deviceWireAllowance:`${N.deviceWireAllowance} cu.in. per conductor`},necReferences:[Hp.mainSection,Hp.calculations,Hp.table,...Hp.rules,C?"WARNING: This configuration exceeds the maximum allowable box fill":null].filter(Boolean)};cn(V)}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Box Selection"}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Box Type"}),s.jsxs("select",{value:n,onChange:M=>i(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:[s.jsx("optgroup",{label:"Device Boxes (Single Gang)",children:Object.entries(hu).filter(([M,$])=>$.type==="device-single").map(([M,$])=>s.jsxs("option",{value:M,children:[$.name," - ",$.capacity," cu.in."]},M))}),s.jsx("optgroup",{label:"Device Boxes (Multi-Gang)",children:Object.entries(hu).filter(([M,$])=>$.type==="device-multi").map(([M,$])=>s.jsxs("option",{value:M,children:[$.name," - ",$.capacity," cu.in."]},M))}),s.jsx("optgroup",{label:"Square Boxes",children:Object.entries(hu).filter(([M,$])=>$.type==="square").map(([M,$])=>s.jsxs("option",{value:M,children:[$.name," - ",$.capacity," cu.in."]},M))}),s.jsx("optgroup",{label:"Round/Octagon Boxes",children:Object.entries(hu).filter(([M,$])=>$.type==="round-octagon").map(([M,$])=>s.jsxs("option",{value:M,children:[$.name," - ",$.capacity," cu.in."]},M))}),s.jsx("optgroup",{label:"Masonry Boxes",children:Object.entries(hu).filter(([M,$])=>$.type==="masonry").map(([M,$])=>s.jsxs("option",{value:M,children:[$.name," - ",$.capacity," cu.in."]},M))})]})]})]}),s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Conductors"}),o.map((M,$)=>s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${d.cardBorder}`},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[s.jsxs("h4",{style:{fontWeight:"600",color:d.labelText,margin:0,fontSize:"0.875rem"},children:["Wire Size ",$+1]}),o.length>1&&s.jsx("button",{onClick:()=>b($),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:s.jsx(Tc,{size:20})})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[s.jsx("select",{value:M.size,onChange:F=>S($,"size",F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:vN.map(F=>s.jsxs("option",{value:F,children:[F," AWG"]},F))}),s.jsx("input",{type:"number",value:M.count,onChange:F=>S($,"count",F.target.value),placeholder:"Quantity",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}})]})]},$)),s.jsxs("button",{onClick:g,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[s.jsx(ma,{size:16}),"Add Wire Size"]}),s.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.5rem",margin:"0.5rem 0 0 0"},children:"Count all insulated conductors entering, leaving, or passing through the box"})]}),s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Devices & Other Items"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Receptacles/Outlets"}),s.jsx("input",{type:"number",value:u.outlets,onChange:M=>h({...u,outlets:M.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}}),s.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"Each device counts as 2 conductors"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Switches"}),s.jsx("input",{type:"number",value:u.switches,onChange:M=>h({...u,switches:M.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}}),s.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"Each device counts as 2 conductors"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Cable Clamps"}),s.jsx("input",{type:"number",value:u.clamps,onChange:M=>h({...u,clamps:M.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}}),s.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"One or more = 1 conductor volume"})]})]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:u.groundWires,onChange:M=>h({...u,groundWires:M.target.checked}),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),s.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:d.labelText},children:"Equipment Grounding Conductors Present"})]}),s.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginLeft:"2rem",margin:"0.25rem 0 0 2rem"},children:"All grounds combined count as 1 conductor volume"})]}),s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Box Capacity"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:E}),s.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"cu.in."})]}),s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Calculated Fill"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:N.totalFill.toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"cu.in."})]}),s.jsxs("div",{style:{background:C?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:C?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Fill Percentage"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:C?"#dc2626":"#1e40af"},children:[L,"%"]}),s.jsx("div",{style:{fontSize:"0.75rem",color:C?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:C?"OVERFILLED":"Within Limits"})]})]}),N.conductorDetails.length>0&&N.conductorDetails.some(M=>M.count>0)&&s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${d.cardBorder}`},children:[s.jsx("strong",{style:{color:d.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Conductor Breakdown:"}),N.conductorDetails.map((M,$)=>M.count>0&&s.jsxs("div",{style:{marginTop:$>0?"0.75rem":0,paddingTop:$>0?"0.75rem":0,borderTop:$>0?`1px solid ${d.cardBorder}`:"none",fontSize:"0.875rem",color:d.labelText},children:[s.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:[M.count," ",M.size," AWG"]}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:d.subtleText},children:[M.allowanceEach," cu.in. each = ",M.subtotal.toFixed(2)," cu.in. total"]})]},$))]}),!C&&N.totalFill>0?s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Box fill is within NEC limits"}),N.deviceFill>0&&s.jsxs("div",{children:["Devices: ",N.deviceFill.toFixed(2)," cu.in."]}),N.clampFill>0&&s.jsxs("div",{children:["Clamps: ",N.clampFill.toFixed(2)," cu.in."]}),N.groundFill>0&&s.jsxs("div",{children:["Grounds: ",N.groundFill.toFixed(2)," cu.in."]})]})]})}):C?s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",fontSize:"0.9375rem"},children:"BOX OVERFILLED - Violates NEC 314.16"}),s.jsx("div",{style:{marginBottom:"0.5rem"},children:"Reduce number of devices or use larger box"}),N.deviceFill>0&&s.jsxs("div",{children:["Devices: ",N.deviceFill.toFixed(2)," cu.in."]}),N.clampFill>0&&s.jsxs("div",{children:["Clamps: ",N.clampFill.toFixed(2)," cu.in."]}),N.groundFill>0&&s.jsxs("div",{children:["Grounds: ",N.groundFill.toFixed(2)," cu.in."]})]})]})}):null]}),s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${d.cardBorder}`,fontSize:"0.8125rem",color:d.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:d.cardText},children:"NEC 314.16 Requirements:"}),"Conductor = table volume  Device = 2 volumes  All grounds = 1 volume  Clamps = 1 volume"]})]})}),Db=[{value:"straight",label:"Straight Pull"},{value:"angle",label:"Angle Pull (L-shaped)"},{value:"u-pull",label:"U-Pull (Same Side)"}],_N=["0.5","0.75","1","1.25","1.5","2","2.5","3","3.5","4","5","6"],TN={"0.5":'1/2"',"0.75":'3/4"',1:'1"',"1.25":'1-1/4"',"1.5":'1-1/2"',2:'2"',"2.5":'2-1/2"',3:'3"',"3.5":'3-1/2"',4:'4"',5:'5"',6:'6"'},Zd={straight:{length:8},angle:{distance:6},uPull:{distance:6}},Qg=r=>TN[r]||r,u2=r=>parseFloat(r),AN=r=>{const e=u2(r),t=e*Zd.straight.length;return{minLength:t,formula:`${e}"  ${Zd.straight.length} = ${t}"`,necReference:"NEC 314.28(A)(1)"}},CN=r=>{if(!r||r.length===0)return null;const e=r.map(o=>u2(o.size)),t=Math.max(...e),n=e.reduce((o,l)=>o+l,0)-t,i=t*Zd.angle.distance+n;return{minDistance:i,largestRaceway:t,sumOfOthers:n,formula:`(${t}"  ${Zd.angle.distance}) + ${n}" = ${i}"`,necReference:"NEC 314.28(A)(2)"}},kN=r=>{const e=u2(r),t=e*Zd.uPull.distance;return{minDistance:t,formula:`${e}"  ${Zd.uPull.distance} = ${t}"`,necReference:"NEC 314.28(A)(2)"}},Xg={mainSection:"NEC 314.28 - Pull and Junction Boxes and Conduit Bodies",conductorSize:"Applies to boxes containing conductors 4 AWG or larger",rules:["Straight Pull: Length = 8  trade size of largest raceway","Angle/U Pull: Distance = 6  largest raceway + sum of other raceways on same wall","Rows of conduits: Each row calculated separately","Box depth: Must accommodate the largest conduit locknut and bushing","These are minimum dimensions - larger boxes may be used"]},IN=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=me.useState("straight"),[o,l]=me.useState([{size:"1"}]),u={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},h=()=>{l([...o,{size:"1"}])},d=v=>{o.length>1&&l(o.filter((N,E)=>E!==v))},g=(v,N)=>{const E=[...o];E[v].size=N,l(E)},S=(()=>{const N=Math.max(...o.map(E=>parseFloat(E.size))).toString();if(n==="straight")return AN(N);if(n==="angle")return CN(o);if(n==="u-pull")return kN(N)})();return me.useImperativeHandle(t,()=>({exportPDF:()=>{var L;const v=((L=Db.find(C=>C.value===n))==null?void 0:L.label)||n,N=o.map((C,M)=>`Raceway ${M+1}: ${Qg(C.size)}`).join(", "),E={calculatorName:"Pull Box Calculator",inputs:{pullType:v,numberOfRaceways:o.length,raceways:N,largestRaceway:S?Qg(Math.max(...o.map(C=>C.size)).toString()):"N/A"},results:{minimumDimension:S?`${S.minLength||S.minDistance}" inches`:"N/A",formula:(S==null?void 0:S.formula)||"N/A",necReference:(S==null?void 0:S.necReference)||"N/A"},additionalInfo:{calculation:(S==null?void 0:S.formula)||"N/A",note:"These are minimum dimensions per NEC. Larger boxes may be used.",conductorRequirement:"Applies to conductors 4 AWG or larger"},necReferences:[Xg.mainSection,S==null?void 0:S.necReference,Xg.conductorSize,...Xg.rules].filter(Boolean)};cn(E)}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${u.cardBorder}`,paddingBottom:"0.5rem"},children:"Pull Box Configuration"}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:u.labelText,marginBottom:"0.5rem"},children:"Pull Type"}),s.jsx("select",{value:n,onChange:v=>i(v.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"},children:Db.map(v=>s.jsx("option",{value:v.value,children:v.label},v.value))})]}),s.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#dbeafe",border:"1px solid #93c5fd",borderRadius:"8px",fontSize:"0.8125rem",color:"#1e40af",display:"flex",gap:"0.5rem"},children:[s.jsx(xs,{size:16,style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{children:[n==="straight"&&"Straight Pull: Conduits enter and exit on opposite sides",n==="angle"&&"Angle Pull: Conduits enter on one side and exit on adjacent side (L-shaped)",n==="u-pull"&&"U-Pull: Conduits enter and exit on the same side"]})]})]}),s.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${u.cardBorder}`,paddingBottom:"0.5rem"},children:[n==="straight"&&"Raceway Size",n==="angle"&&"Raceways on Same Wall",n==="u-pull"&&"Raceway Size"]}),o.map((v,N)=>s.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${u.cardBorder}`},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[s.jsx("h4",{style:{fontWeight:"600",color:u.labelText,margin:0,fontSize:"0.875rem"},children:n==="angle"?N===0?"Largest Raceway":`Other Raceway ${N}`:"Largest Raceway"}),n==="angle"&&N>0&&s.jsx("button",{onClick:()=>d(N),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:s.jsx(Tc,{size:20})})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:u.labelText,marginBottom:"0.5rem"},children:"Trade Size"}),s.jsx("select",{value:v.size,onChange:E=>g(N,E.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"},children:_N.map(E=>s.jsx("option",{value:E,children:Qg(E)},E))})]})]},N)),n==="angle"&&s.jsxs("button",{onClick:h,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[s.jsx(ma,{size:16}),"Add Other Raceway"]}),s.jsxs("p",{style:{fontSize:"0.75rem",color:u.subtleText,marginTop:"0.5rem",margin:"0.5rem 0 0 0"},children:[n==="straight"&&"Enter the largest raceway entering the box",n==="angle"&&"Enter largest raceway first, then add any other raceways entering on the same wall",n==="u-pull"&&"Enter the largest raceway entering and exiting on the same side"]})]}),S&&s.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem"},children:"Minimum Box Dimensions"}),s.jsxs("div",{style:{background:u.sectionBg,padding:"1.5rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsxs("div",{style:{fontSize:"0.875rem",color:u.labelText,marginBottom:"0.5rem"},children:["Minimum ",n==="straight"?"Length":"Distance"]}),s.jsxs("div",{style:{fontSize:"3rem",fontWeight:"700",color:"#3b82f6",lineHeight:1},children:[(S.minLength||S.minDistance).toFixed(1),'"']}),s.jsx("div",{style:{fontSize:"0.875rem",color:u.subtleText,marginTop:"0.5rem"},children:S.formula})]}),s.jsx("div",{style:{background:"#dbeafe",border:"1px solid #93c5fd",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"NEC Requirement Met"}),s.jsxs("div",{style:{marginBottom:"0.5rem"},children:["Reference: ",S.necReference]}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"These are minimum dimensions. Larger boxes may be used for ease of installation."})]})}),n==="angle"&&S.largestRaceway&&s.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",marginTop:"1rem",border:`1px solid ${u.cardBorder}`},children:[s.jsx("strong",{style:{color:u.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Angle Pull Calculation:"}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:u.labelText,lineHeight:"1.8"},children:[s.jsxs("div",{style:{marginBottom:"0.5rem"},children:[s.jsx("strong",{children:"Step 1:"})," Largest raceway  6"]}),s.jsxs("div",{style:{paddingLeft:"1rem",color:u.subtleText},children:[S.largestRaceway,'"  6 = ',(S.largestRaceway*6).toFixed(1),'"']}),s.jsxs("div",{style:{marginTop:"0.75rem",marginBottom:"0.5rem"},children:[s.jsx("strong",{children:"Step 2:"})," Add other raceways on same wall"]}),s.jsx("div",{style:{paddingLeft:"1rem",color:u.subtleText},children:S.sumOfOthers>0?`Sum of others = ${S.sumOfOthers.toFixed(1)}"`:"No other raceways"}),s.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:`1px solid ${u.cardBorder}`,fontWeight:"600",color:"#3b82f6"},children:["Total: ",(S.largestRaceway*6).toFixed(1),'" + ',S.sumOfOthers.toFixed(1),'" = ',S.minDistance.toFixed(1),'"']})]})]})]}),s.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${u.cardBorder}`,fontSize:"0.8125rem",color:u.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:u.cardText},children:"NEC 314.28 Requirements:"}),s.jsx("div",{style:{lineHeight:"1.6"},children:"Straight: 8 largest  Angle/U: 6 largest + others  For conductors 4 AWG or larger"})]})]})}),EN=[{value:"emt",label:"EMT - Electrical Metallic Tubing"},{value:"ent",label:"ENT - Electrical Nonmetallic Tubing"},{value:"fmc",label:"FMC - Flexible Metal Conduit"},{value:"imc",label:"IMC - Intermediate Metal Conduit"},{value:"lfnc-b",label:"LFNC-B - Liquidtight Flexible Nonmetallic Conduit (Type B)"},{value:"lfnc-a",label:"LFNC-A - Liquidtight Flexible Nonmetallic Conduit (Type A)"},{value:"lfmc",label:"LFMC - Liquidtight Flexible Metal Conduit"},{value:"rmc",label:"RMC - Rigid Metal Conduit"},{value:"pvc-40",label:"PVC Schedule 40"},{value:"pvc-80",label:"PVC Schedule 80"},{value:"pvc-a",label:"PVC Type A"},{value:"pvc-eb",label:"PVC Type EB"}],jN={"0.375":'3/8"',"0.5":'1/2"',"0.75":'3/4"',1:'1"',"1.25":'1-1/4"',"1.5":'1-1/2"',2:'2"',"2.5":'2-1/2"',3:'3"',"3.5":'3-1/2"',4:'4"',5:'5"',6:'6"'},B4={"emt-0.5":{name:'1/2" EMT',area:.304},"emt-0.75":{name:'3/4" EMT',area:.533},"emt-1":{name:'1" EMT',area:.864},"emt-1.25":{name:'1-1/4" EMT',area:1.496},"emt-1.5":{name:'1-1/2" EMT',area:2.036},"emt-2":{name:'2" EMT',area:3.356},"emt-2.5":{name:'2-1/2" EMT',area:5.858},"emt-3":{name:'3" EMT',area:8.846},"emt-3.5":{name:'3-1/2" EMT',area:11.545},"emt-4":{name:'4" EMT',area:14.753},"ent-0.5":{name:'1/2" ENT',area:.246},"ent-0.75":{name:'3/4" ENT',area:.454},"ent-1":{name:'1" ENT',area:.785},"ent-1.25":{name:'1-1/4" ENT',area:1.41},"ent-1.5":{name:'1-1/2" ENT',area:1.936},"ent-2":{name:'2" ENT',area:3.205},"fmc-0.375":{name:'3/8" FMC',area:.116},"fmc-0.5":{name:'1/2" FMC',area:.317},"fmc-0.75":{name:'3/4" FMC',area:.533},"fmc-1":{name:'1" FMC',area:.817},"fmc-1.25":{name:'1-1/4" FMC',area:1.277},"fmc-1.5":{name:'1-1/2" FMC',area:1.858},"fmc-2":{name:'2" FMC',area:3.269},"fmc-2.5":{name:'2-1/2" FMC',area:4.909},"fmc-3":{name:'3" FMC',area:7.069},"fmc-3.5":{name:'3-1/2" FMC',area:9.621},"fmc-4":{name:'4" FMC',area:12.566},"imc-0.5":{name:'1/2" IMC',area:.342},"imc-0.75":{name:'3/4" IMC',area:.586},"imc-1":{name:'1" IMC',area:.959},"imc-1.25":{name:'1-1/4" IMC',area:1.647},"imc-1.5":{name:'1-1/2" IMC',area:2.225},"imc-2":{name:'2" IMC',area:3.63},"imc-2.5":{name:'2-1/2" IMC',area:5.135},"imc-3":{name:'3" IMC',area:7.922},"imc-3.5":{name:'3-1/2" IMC',area:10.584},"imc-4":{name:'4" IMC',area:13.631},"lfnc-b-0.375":{name:'3/8" LFNC-B',area:.192},"lfnc-b-0.5":{name:'1/2" LFNC-B',area:.314},"lfnc-b-0.75":{name:'3/4" LFNC-B',area:.541},"lfnc-b-1":{name:'1" LFNC-B',area:.873},"lfnc-b-1.25":{name:'1-1/4" LFNC-B',area:1.528},"lfnc-b-1.5":{name:'1-1/2" LFNC-B',area:1.981},"lfnc-b-2":{name:'2" LFNC-B',area:3.246},"lfnc-a-0.375":{name:'3/8" LFNC-A',area:.192},"lfnc-a-0.5":{name:'1/2" LFNC-A',area:.312},"lfnc-a-0.75":{name:'3/4" LFNC-A',area:.535},"lfnc-a-1":{name:'1" LFNC-A',area:.854},"lfnc-a-1.25":{name:'1-1/4" LFNC-A',area:1.502},"lfnc-a-1.5":{name:'1-1/2" LFNC-A',area:2.018},"lfnc-a-2":{name:'2" LFNC-A',area:3.343},"lfmc-0.375":{name:'3/8" LFMC',area:.192},"lfmc-0.5":{name:'1/2" LFMC',area:.314},"lfmc-0.75":{name:'3/4" LFMC',area:.541},"lfmc-1":{name:'1" LFMC',area:.873},"lfmc-1.25":{name:'1-1/4" LFMC',area:1.528},"lfmc-1.5":{name:'1-1/2" LFMC',area:1.981},"lfmc-2":{name:'2" LFMC',area:3.246},"lfmc-2.5":{name:'2-1/2" LFMC',area:4.881},"lfmc-3":{name:'3" LFMC',area:7.475},"lfmc-3.5":{name:'3-1/2" LFMC',area:9.731},"lfmc-4":{name:'4" LFMC',area:12.692},"rmc-0.5":{name:'1/2" RMC',area:.314},"rmc-0.75":{name:'3/4" RMC',area:.549},"rmc-1":{name:'1" RMC',area:.887},"rmc-1.25":{name:'1-1/4" RMC',area:1.526},"rmc-1.5":{name:'1-1/2" RMC',area:2.071},"rmc-2":{name:'2" RMC',area:3.408},"rmc-2.5":{name:'2-1/2" RMC',area:4.866},"rmc-3":{name:'3" RMC',area:7.499},"rmc-3.5":{name:'3-1/2" RMC',area:10.01},"rmc-4":{name:'4" RMC',area:12.882},"rmc-5":{name:'5" RMC',area:20.212},"rmc-6":{name:'6" RMC',area:29.158},"pvc-40-0.5":{name:'1/2" PVC Sch 40',area:.285},"pvc-40-0.75":{name:'3/4" PVC Sch 40',area:.508},"pvc-40-1":{name:'1" PVC Sch 40',area:.832},"pvc-40-1.25":{name:'1-1/4" PVC Sch 40',area:1.453},"pvc-40-1.5":{name:'1-1/2" PVC Sch 40',area:1.986},"pvc-40-2":{name:'2" PVC Sch 40',area:3.291},"pvc-40-2.5":{name:'2-1/2" PVC Sch 40',area:4.695},"pvc-40-3":{name:'3" PVC Sch 40',area:7.268},"pvc-40-3.5":{name:'3-1/2" PVC Sch 40',area:9.737},"pvc-40-4":{name:'4" PVC Sch 40',area:12.554},"pvc-40-5":{name:'5" PVC Sch 40',area:19.761},"pvc-40-6":{name:'6" PVC Sch 40',area:28.567},"pvc-80-0.5":{name:'1/2" PVC Sch 80',area:.217},"pvc-80-0.75":{name:'3/4" PVC Sch 80',area:.409},"pvc-80-1":{name:'1" PVC Sch 80',area:.688},"pvc-80-1.25":{name:'1-1/4" PVC Sch 80',area:1.237},"pvc-80-1.5":{name:'1-1/2" PVC Sch 80',area:1.711},"pvc-80-2":{name:'2" PVC Sch 80',area:2.874},"pvc-80-2.5":{name:'2-1/2" PVC Sch 80',area:4.119},"pvc-80-3":{name:'3" PVC Sch 80',area:6.442},"pvc-80-3.5":{name:'3-1/2" PVC Sch 80',area:8.688},"pvc-80-4":{name:'4" PVC Sch 80',area:11.258},"pvc-80-5":{name:'5" PVC Sch 80',area:17.855},"pvc-80-6":{name:'6" PVC Sch 80',area:25.598},"pvc-a-0.5":{name:'1/2" PVC Type A',area:.385},"pvc-a-0.75":{name:'3/4" PVC Type A',area:.65},"pvc-a-1":{name:'1" PVC Type A',area:1.084},"pvc-a-1.25":{name:'1-1/4" PVC Type A',area:1.767},"pvc-a-1.5":{name:'1-1/2" PVC Type A',area:2.324},"pvc-a-2":{name:'2" PVC Type A',area:3.647},"pvc-a-2.5":{name:'2-1/2" PVC Type A',area:5.453},"pvc-a-3":{name:'3" PVC Type A',area:8.194},"pvc-a-3.5":{name:'3-1/2" PVC Type A',area:10.694},"pvc-a-4":{name:'4" PVC Type A',area:13.723},"pvc-eb-2":{name:'2" PVC Type EB',area:3.874},"pvc-eb-3":{name:'3" PVC Type EB',area:8.709},"pvc-eb-3.5":{name:'3-1/2" PVC Type EB',area:11.365},"pvc-eb-4":{name:'4" PVC Type EB',area:14.448},"pvc-eb-5":{name:'5" PVC Type EB',area:22.195},"pvc-eb-6":{name:'6" PVC Type EB',area:31.53}},Wb=r=>{const e=r+"-";return Object.keys(B4).filter(n=>n.startsWith(e)).map(n=>n.replace(e,"")).sort((n,i)=>parseFloat(n)-parseFloat(i))},RN=(r,e)=>{const t=`${r}-${e}`;return B4[t]||null},PN=[{value:"thhn",label:"THHN/THWN-2"},{value:"thw",label:"THW"},{value:"thhw",label:"THHW"},{value:"xhhw",label:"XHHW-2"},{value:"xhh",label:"XHH"}],NN=["18","16","14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750","800","900","1000","1250","1500","1750","2000"],J1={thhn:{14:.0097,12:.0133,10:.0211,8:.0366,6:.0507,4:.0824,3:.0973,2:.1158,1:.1562,"1/0":.1855,"2/0":.2223,"3/0":.2679,"4/0":.3237,250:.397,300:.4608,350:.5242,400:.5863,500:.7073,600:.8676,700:.9887,750:1.0496,800:1.1085,900:1.2311,1e3:1.3478},thwn:{14:.0097,12:.0133,10:.0211,8:.0366,6:.0507,4:.0824,3:.0973,2:.1158,1:.1562,"1/0":.1855,"2/0":.2223,"3/0":.2679,"4/0":.3237,250:.397,300:.4608,350:.5242,400:.5863,500:.7073,600:.8676,700:.9887,750:1.0496,800:1.1085,900:1.2311,1e3:1.3478},thw:{14:.0139,12:.0181,10:.0243,8:.0437,6:.0726,4:.0973,3:.1134,2:.1333,1:.1901,"1/0":.2223,"2/0":.2624,"3/0":.3117,"4/0":.3718,250:.4596,300:.5281,350:.5958,400:.6619,500:.7901,600:.9729,700:1.101,750:1.1652,800:1.2272,900:1.3561,1e3:1.4784,1250:1.8602,1500:2.1695,1750:2.4773,2e3:2.7818},thhw:{14:.0139,12:.0181,10:.0243,8:.0437,6:.0726,4:.0973,3:.1134,2:.1333,1:.1901,"1/0":.2223,"2/0":.2624,"3/0":.3117,"4/0":.3718,250:.4596,300:.5281,350:.5958,400:.6619,500:.7901,600:.9729,700:1.101,750:1.1652,800:1.2272,900:1.3561,1e3:1.4784,1250:1.8602,1500:2.1695,1750:2.4773,2e3:2.7818},xhhw:{14:.0139,12:.0181,10:.0243,8:.0437,6:.059,4:.0814,3:.0962,2:.1146,1:.1534,"1/0":.1825,"2/0":.219,"3/0":.2642,"4/0":.3197,250:.3904,300:.4536,350:.5166,400:.5782,500:.6984,600:.8709,700:.9923,750:1.0532,800:1.1122,900:1.2351,1e3:1.3519,1250:1.718,1500:2.0157,1750:2.3127,2e3:2.6073},xhh:{14:.0139,12:.0181,10:.0243,8:.0437,6:.059,4:.0814,3:.0962,2:.1146,1:.1534,"1/0":.1825,"2/0":.219,"3/0":.2642,"4/0":.3197,250:.3904,300:.4536,350:.5166,400:.5782,500:.6984,600:.8709,700:.9923,750:1.0532,800:1.1122,900:1.2351,1e3:1.3519,1250:1.718,1500:2.0157,1750:2.3127,2e3:2.6073}},BN=(r,e)=>{var t;return((t=J1[r])==null?void 0:t[e])||0},LN=r=>J1[r]?NN.filter(e=>J1[r][e]!==void 0):[],FN=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=me.useState("emt"),[o,l]=me.useState("0.5"),[u,h]=me.useState([{wireType:"thwn",size:"12",count:""}]),d={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},g=Wb(n),b=C=>{i(C);const M=Wb(C);M.includes(o)||l(M[0]||"0.5")},S=()=>{h([...u,{wireType:"thwn",size:"12",count:""}])},v=C=>{u.length>1&&h(u.filter((M,$)=>$!==C))},N=(C,M,$)=>{const F=[...u];F[C][M]=$,h(F)},E=()=>{const C=RN(n,o);if(!C)return null;const M=C.area;let $=0,F=0;const ne=u.map(k=>{const A=parseInt(k.count)||0,O=BN(k.wireType,k.size),I=O*A;return $+=I,F+=A,{wireType:k.wireType,size:k.size,count:A,areaEach:O,subtotal:I}}),ue=($/M*100).toFixed(1);let V=40;return F===1?V=53:F===2&&(V=31),{conduitInfo:C,conduitArea:M.toFixed(3),totalWireArea:$.toFixed(3),fillPercentage:parseFloat(ue),maxFill:V,totalWireCount:F,conductorDetails:ne,isOverfilled:parseFloat(ue)>V}};me.useImperativeHandle(t,()=>({exportPDF:()=>{const C=E();if(C.totalWireCount===0){alert("Please enter at least one conductor with a quantity before exporting");return}const M=C.conductorDetails.filter(F=>F.count>0).map(F=>`${F.count} ${F.size} AWG ${F.wireType.toUpperCase()}-2: ${F.areaEach.toFixed(4)} sq.in. each = ${F.subtotal.toFixed(4)} sq.in. total`).join("; "),$={calculatorName:"Conduit Fill Calculator",inputs:{conduitType:C.conduitInfo.name,totalConductors:C.totalWireCount},results:{conduitArea:`${C.conduitArea} sq.in.`,totalWireArea:`${C.totalWireArea} sq.in.`,fillPercentage:`${C.fillPercentage}%`,maximumAllowedFill:`${C.maxFill}%`,complianceStatus:C.isOverfilled?"OVERFILLED - Violates NEC":"Within NEC Limits"},additionalInfo:{conductorBreakdown:M,fillRule:C.totalWireCount===1?"1 conductor: 53% max fill":C.totalWireCount===2?"2 conductors: 31% max fill":"3+ conductors: 40% max fill",recommendation:C.isOverfilled?"Reduce number of conductors or use larger conduit":"Installation meets NEC requirements"},necReferences:["NEC Chapter 9, Table 1 - Percent of Cross Section of Conduit and Tubing for Conductors","NEC Chapter 9, Table 4 - Dimensions and Percent Area of Conduit and Tubing","NEC Chapter 9, Table 5 - Dimensions of Insulated Conductors and Fixture Wires","1 conductor: 53% max fill","2 conductors: 31% max fill","3+ conductors: 40% max fill","Nipples (24 inches or less): 60% max fill"]};cn($)}}));const L=E();return s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Conduit Selection"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Conduit Type"}),s.jsx("select",{value:n,onChange:C=>b(C.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:EN.map(C=>s.jsx("option",{value:C.value,children:C.label},C.value))})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Conduit Size"}),s.jsx("select",{value:o,onChange:C=>l(C.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:g.map(C=>s.jsx("option",{value:C,children:jN[C]||C},C))})]})]})]}),s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Conductors"}),u.map((C,M)=>s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${d.cardBorder}`},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[s.jsxs("h4",{style:{fontWeight:"600",color:d.labelText,margin:0,fontSize:"0.875rem"},children:["Conductor ",M+1]}),u.length>1&&s.jsx("button",{onClick:()=>v(M),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:s.jsx(Tc,{size:20})})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"0.75rem"},children:[s.jsx("select",{value:C.wireType,onChange:$=>N(M,"wireType",$.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:PN.map($=>s.jsx("option",{value:$.value,children:$.label},$.value))}),s.jsx("select",{value:C.size,onChange:$=>N(M,"size",$.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:LN(C.wireType).map($=>{const ne=!$.includes("/")&&parseInt($)>=250?"kcmil":"AWG";return s.jsxs("option",{value:$,children:[$," ",ne]},$)})}),s.jsx("input",{type:"number",value:C.count,onChange:$=>N(M,"count",$.target.value),placeholder:"Quantity",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}})]})]},M)),s.jsxs("button",{onClick:S,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[s.jsx(ma,{size:16}),"Add Conductor"]})]}),L&&s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Conduit Area"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:L.conduitArea}),s.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"sq.in."})]}),s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Wire Area"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:L.totalWireArea}),s.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"sq.in."})]}),s.jsxs("div",{style:{background:L.isOverfilled?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:L.isOverfilled?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Fill Percentage"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:L.isOverfilled?"#dc2626":"#1e40af"},children:[L.fillPercentage,"%"]}),s.jsxs("div",{style:{fontSize:"0.75rem",color:L.isOverfilled?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:["Max: ",L.maxFill,"%"]})]})]}),L.conductorDetails.length>0&&L.totalWireCount>0&&s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${d.cardBorder}`},children:[s.jsx("strong",{style:{color:d.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Conductor Breakdown:"}),L.conductorDetails.map((C,M)=>C.count>0&&s.jsxs("div",{style:{marginTop:M>0?"0.75rem":0,paddingTop:M>0?"0.75rem":0,borderTop:M>0?`1px solid ${d.cardBorder}`:"none",fontSize:"0.875rem",color:d.labelText},children:[s.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:[C.count," ",C.size," ",!C.size.includes("/")&&parseInt(C.size)>=250?"kcmil":"AWG"," ",C.wireType.toUpperCase(),"-2"]}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:d.subtleText},children:[C.areaEach.toFixed(4)," sq.in. each = ",C.subtotal.toFixed(4)," sq.in. total"]})]},M))]}),!L.isOverfilled&&L.totalWireCount>0?s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Conduit fill is within NEC limits"}),s.jsxs("div",{children:["Total conductors: ",L.totalWireCount]})]})]})}):L.isOverfilled?s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",fontSize:"0.9375rem"},children:"CONDUIT OVERFILLED - Violates NEC Chapter 9"}),s.jsx("div",{children:"Reduce number of conductors or use larger conduit"})]})]})}):null]}),s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${d.cardBorder}`,fontSize:"0.8125rem",color:d.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:d.cardText},children:"NEC Chapter 9, Table 1:"}),'1 conductor: 53%  2 conductors: 31%  3+ conductors: 40%  Nipples (<24"): 60%']})]})}),zN=[{value:"copper",label:"Copper"},{value:"aluminum",label:"Aluminum"}],VN=[{value:"60C",label:"60C (140F)"},{value:"75C",label:"75C (167F)"},{value:"90C",label:"90C (194F)"}],ON=[{value:"18",label:"18 AWG"},{value:"16",label:"16 AWG"},{value:"14",label:"14 AWG"},{value:"12",label:"12 AWG"},{value:"10",label:"10 AWG"},{value:"8",label:"8 AWG"},{value:"6",label:"6 AWG"},{value:"4",label:"4 AWG"},{value:"3",label:"3 AWG"},{value:"2",label:"2 AWG"},{value:"1",label:"1 AWG"},{value:"1/0",label:"1/0 AWG"},{value:"2/0",label:"2/0 AWG"},{value:"3/0",label:"3/0 AWG"},{value:"4/0",label:"4/0 AWG"},{value:"250",label:"250 kcmil"},{value:"300",label:"300 kcmil"},{value:"350",label:"350 kcmil"},{value:"400",label:"400 kcmil"},{value:"500",label:"500 kcmil"},{value:"600",label:"600 kcmil"},{value:"700",label:"700 kcmil"},{value:"750",label:"750 kcmil"},{value:"800",label:"800 kcmil"},{value:"900",label:"900 kcmil"},{value:"1000",label:"1000 kcmil"},{value:"1250",label:"1250 kcmil"},{value:"1500",label:"1500 kcmil"},{value:"1750",label:"1750 kcmil"},{value:"2000",label:"2000 kcmil"}],MN=[{value:"10",label:"10C (50F)"},{value:"15",label:"15C (59F)"},{value:"20",label:"20C (68F)"},{value:"25",label:"25C (77F)"},{value:"30",label:"30C (86F) - Standard"},{value:"35",label:"35C (95F)"},{value:"40",label:"40C (104F)"},{value:"45",label:"45C (113F)"},{value:"50",label:"50C (122F)"}],DN={copper:{"60C":{18:0,16:0,14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:350,700:385,750:400,800:410,900:435,1e3:455,1250:495,1500:525,1750:545,2e3:555},"75C":{18:0,16:0,14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,700:460,750:475,800:490,900:520,1e3:545,1250:590,1500:625,1750:650,2e3:665},"90C":{18:14,16:18,14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535,800:555,900:585,1e3:615,1250:665,1500:705,1750:735,2e3:750}},aluminum:{"60C":{18:0,16:0,14:0,12:15,10:25,8:30,6:40,4:55,3:65,2:75,1:85,"1/0":100,"2/0":115,"3/0":130,"4/0":150,250:170,300:195,350:210,400:225,500:260,600:285,700:310,750:320,800:330,900:355,1e3:375,1250:405,1500:435,1750:455,2e3:470},"75C":{18:0,16:0,14:0,12:20,10:30,8:40,6:50,4:65,3:75,2:90,1:100,"1/0":120,"2/0":135,"3/0":155,"4/0":180,250:205,300:230,350:250,400:270,500:310,600:340,700:375,750:385,800:395,900:425,1e3:445,1250:485,1500:520,1750:545,2e3:560},"90C":{18:0,16:0,14:0,12:25,10:35,8:45,6:55,4:75,3:85,2:100,1:115,"1/0":135,"2/0":150,"3/0":175,"4/0":205,250:230,300:260,350:280,400:305,500:350,600:385,700:420,750:435,800:445,900:480,1e3:500,1250:545,1500:585,1750:615,2e3:630}}},WN={"60C":{10:1.29,15:1.2,20:1.11,25:1.05,30:1,35:.94,40:.88,45:.82,50:.75,55:.67,60:.58,65:.47,70:.33},"75C":{10:1.2,15:1.15,20:1.11,25:1.05,30:1,35:.94,40:.88,45:.82,50:.75,55:.67,60:.58,65:.47,70:.33,75:0},"90C":{10:1.15,15:1.12,20:1.08,25:1.04,30:1,35:.96,40:.91,45:.87,50:.82,55:.76,60:.71,65:.65,70:.58,75:.5,80:.41,85:.29,90:0}},$N={copper:{14:15,12:20,10:30},aluminum:{12:15,10:25}},UN=(r,e,t)=>{var n,i;return((i=(n=DN[r])==null?void 0:n[e])==null?void 0:i[t])||0},qN=(r,e)=>{var t;return((t=WN[r])==null?void 0:t[e])||1},HN=r=>{const e=parseInt(r);return e<=3?1:e<=6?.8:e<=9?.7:e<=20?.5:e<=30?.45:e<=40?.4:.35},GN=(r,e)=>{var t;return((t=$N[r])==null?void 0:t[e])||null},$b=(r,e)=>e==="18"?"Thermostats, lighting controls, doorbells, signaling circuits":e==="16"?"Electronics, lighting control systems, doorbells, low-voltage applications":r<=15||r<=20?"Lighting circuits, small appliances":r<=25?"General outlets, lighting circuits":r<=30?"Small appliances, dryers (240V)":r<=40?"Electric ranges, large appliances":r<=50?"Electric ranges, welders, heat pumps":r<=100?"Sub-panels, large motors":r<=200?"Main panels, large commercial loads":r<=400?"Service entrances, large commercial/industrial applications":r<=600?"Large service entrances, industrial feeders":"Large industrial services, utility connections",KN=(r,e,t,n,i)=>{const o=qN(e,t),l=HN(n);let u=r*o*l,h=u;return i&&(h=u*.8),{base:r,tempFactor:o,conductorFactor:l,derated:Math.round(u*10)/10,continuous:Math.round(h*10)/10}},Ub=r=>({"60C":"60C (140F)","75C":"75C (167F)","90C":"90C (194F)"})[r]||r,JN=r=>({10:"10C (50F)",15:"15C (59F)",20:"20C (68F)",25:"25C (77F)",30:"30C (86F)",35:"35C (95F)",40:"40C (104F)",45:"45C (113F)",50:"50C (122F)"})[r]||`${r}C`,qb=r=>r.includes("/")?`${r} AWG`:parseInt(r)<=16?`${r} AWG`:`${r} kcmil`,Wh={ampacityTable:"NEC Table 310.16 - Allowable Ampacities of Insulated Conductors",tempCorrection:"NEC 310.15(B)(2)(a) - Temperature Correction Factors",conductorAdjustment:"NEC 310.15(B)(3)(a) - Conductor Bundling Adjustment Factors",ocpdLimit:"NEC 240.4(D) - Small Conductor Overcurrent Protection",continuousLoad:"NEC 210.19(A)(1) - Continuous Load Sizing (125% factor)"},YN=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=me.useState("12"),[o,l]=me.useState("copper"),[u,h]=me.useState("75C"),[d,g]=me.useState("30"),[b,S]=me.useState("3"),[v,N]=me.useState(!1),E={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},L=UN(o,u,n),C=GN(o,n),M=KN(L,u,d,b,v),$=M.tempFactor!==1||M.conductorFactor!==1||v;return me.useImperativeHandle(t,()=>({exportPDF:()=>{const F={calculatorName:"Ampacity Lookup Calculator",inputs:{wireSize:qb(n),wireMaterial:o.charAt(0).toUpperCase()+o.slice(1),temperatureRating:Ub(u),ambientTemperature:JN(d),currentCarryingConductors:b,continuousLoad:v?"Yes (3+ hours)":"No"},results:{baseAmpacity:`${M.base} A`,deratedAmpacity:$?`${M.derated} A`:"N/A (no derating applied)",finalAmpacity:`${v?M.continuous:$?M.derated:M.base} A`,ocpdLimit:C?`${C} A (NEC 240.4(D))`:"No special limit",commonApplications:$b(L,n)},additionalInfo:{temperatureCorrectionFactor:`${M.tempFactor.toFixed(2)}`,conductorAdjustmentFactor:`${M.conductorFactor.toFixed(2)}`,continuousLoadFactor:v?"0.80":"Not applied",deratingApplied:$?"Yes":"No"},necReferences:[Wh.ampacityTable,Wh.tempCorrection,Wh.conductorAdjustment,C?Wh.ocpdLimit:null,v?Wh.continuousLoad:null].filter(Boolean)};cn(F)}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${E.cardBorder}`,paddingBottom:"0.5rem"},children:"Wire Selection"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Wire Size"}),s.jsx("select",{value:n,onChange:F=>i(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:ON.map(F=>s.jsx("option",{value:F.value,children:F.label},F.value))})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Wire Material"}),s.jsx("select",{value:o,onChange:F=>l(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:zN.map(F=>s.jsx("option",{value:F.value,children:F.label},F.value))})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Temperature Rating"}),s.jsx("select",{value:u,onChange:F=>h(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:VN.map(F=>s.jsx("option",{value:F.value,children:F.label},F.value))})]})]})]})]}),s.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${E.cardBorder}`,paddingBottom:"0.5rem"},children:"Derating Factors (Optional)"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Ambient Temp (C)"}),s.jsx("select",{value:d,onChange:F=>g(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:MN.map(F=>s.jsx("option",{value:F.value,children:F.label},F.value))})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Current-Carrying Conductors"}),s.jsx("input",{type:"number",value:b,onChange:F=>S(F.target.value),min:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]})]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:v,onChange:F=>N(F.target.checked),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),s.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:E.labelText},children:"Continuous Load (3+ hours) - Apply 80% factor"})]}),s.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${E.cardBorder}`},children:[s.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"0.75rem"},children:"Applied Factors"}),s.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:E.labelText},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Temperature Factor:"}),s.jsxs("span",{style:{fontWeight:"600",color:E.cardText},children:["",M.tempFactor.toFixed(2)]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Conductor Adjustment:"}),s.jsxs("span",{style:{fontWeight:"600",color:E.cardText},children:["",M.conductorFactor.toFixed(2)]})]}),v&&s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Continuous Load:"}),s.jsx("span",{style:{fontWeight:"600",color:E.cardText},children:"0.80"})]})]})]})]})]}),s.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:$?"repeat(3, 1fr)":"1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Base Ampacity"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:[M.base," A"]})]}),$&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Derated Ampacity"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:[M.derated," A"]})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Final Ampacity"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[v?M.continuous:M.derated," A"]})]})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5",width:"100%"},children:[s.jsxs("div",{style:{marginBottom:"0.5rem"},children:[s.jsx("strong",{children:"Wire:"})," ",qb(n)," ",o]}),s.jsxs("div",{style:{marginBottom:"0.5rem"},children:[s.jsx("strong",{children:"Temperature Rating:"})," ",Ub(u)]})]})]})}),C&&s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("strong",{children:"NEC 240.4(D) Limit:"})," ",C,"A max overcurrent protection"]})]})}),s.jsx("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${E.cardBorder}`},children:s.jsxs("div",{style:{fontSize:"0.875rem",color:E.labelText,lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",color:E.cardText,marginBottom:"0.5rem"},children:"Common Applications:"}),$b(L,n)]})})]})]})}),QN=({flcData:r,setFlcData:e,colors:t})=>{var u,h;const n={single:{115:{.25:4.4,.33:5.8,.5:7.2,.75:9.8,1:13.8,1.5:20,2:24,3:34,5:56},230:{.25:2.2,.33:2.9,.5:3.6,.75:4.9,1:6.9,1.5:10,2:12,3:17,5:28}},three:{230:{.5:2,.75:2.8,1:3.6,1.5:5.2,2:6.8,3:9.6,5:15.2,7.5:22,10:28,15:42,20:54,25:68,30:80,40:104,50:130,60:154,75:192,100:248,125:312,150:360,200:480},460:{.5:1,.75:1.4,1:1.8,1.5:2.6,2:3.4,3:4.8,5:7.6,7.5:11,10:14,15:21,20:27,25:34,30:40,40:52,50:65,60:77,75:96,100:124,125:156,150:180,200:240},575:{.5:.8,.75:1.1,1:1.4,1.5:2.1,2:2.7,3:3.9,5:6.1,7.5:9,10:11,15:17,20:22,25:27,30:32,40:41,50:52,60:62,75:77,100:99,125:125,150:144,200:192},2300:{250:65,300:77,350:90,400:103,450:116,500:129},4e3:{500:74,600:88,700:103,800:118,900:132,1e3:147}}},o=(()=>{const d=parseFloat(r.horsepower),g=parseInt(r.voltage);if(n[r.phase]&&n[r.phase][g]&&n[r.phase][g][d])return n[r.phase][g][d];const b=parseFloat(r.efficiency),S=parseFloat(r.powerFactor);return r.phase==="single"?d*746/(g*b*S):d*746/(1.732*g*b*S)})(),l=(h=(u=n[r.phase])==null?void 0:u[parseInt(r.voltage)])==null?void 0:h[parseFloat(r.horsepower)];return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Horsepower"}),s.jsxs("select",{value:r.horsepower,onChange:d=>e({...r,horsepower:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"",children:"Select HP"}),s.jsx("option",{value:"0.25",children:"1/4 HP"}),s.jsx("option",{value:"0.33",children:"1/3 HP"}),s.jsx("option",{value:"0.5",children:"1/2 HP"}),s.jsx("option",{value:"0.75",children:"3/4 HP"}),s.jsx("option",{value:"1",children:"1 HP"}),s.jsx("option",{value:"1.5",children:"1.5 HP"}),s.jsx("option",{value:"2",children:"2 HP"}),s.jsx("option",{value:"3",children:"3 HP"}),s.jsx("option",{value:"5",children:"5 HP"}),s.jsx("option",{value:"7.5",children:"7.5 HP"}),s.jsx("option",{value:"10",children:"10 HP"}),s.jsx("option",{value:"15",children:"15 HP"}),s.jsx("option",{value:"20",children:"20 HP"}),s.jsx("option",{value:"25",children:"25 HP"}),s.jsx("option",{value:"30",children:"30 HP"}),s.jsx("option",{value:"40",children:"40 HP"}),s.jsx("option",{value:"50",children:"50 HP"}),s.jsx("option",{value:"75",children:"75 HP"}),s.jsx("option",{value:"100",children:"100 HP"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Voltage"}),s.jsxs("select",{value:r.voltage,onChange:d=>e({...r,voltage:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"115",children:"115V"}),s.jsx("option",{value:"230",children:"230V"}),s.jsx("option",{value:"460",children:"460V"}),s.jsx("option",{value:"480",children:"480V"}),s.jsx("option",{value:"575",children:"575V"}),s.jsx("option",{value:"2300",children:"2300V"}),s.jsx("option",{value:"4000",children:"4000V"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Phase"}),s.jsxs("select",{value:r.phase,onChange:d=>e({...r,phase:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"single",children:"Single Phase"}),s.jsx("option",{value:"three",children:"Three Phase"})]})]})]}),r.horsepower&&!l&&s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Efficiency"}),s.jsxs("select",{value:r.efficiency,onChange:d=>e({...r,efficiency:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"0.8",children:"80% (Standard)"}),s.jsx("option",{value:"0.85",children:"85% (High Efficiency)"}),s.jsx("option",{value:"0.9",children:"90% (Premium)"}),s.jsx("option",{value:"0.95",children:"95% (Super Premium)"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),s.jsxs("select",{value:r.powerFactor,onChange:d=>e({...r,powerFactor:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"0.7",children:"0.7 (Poor)"}),s.jsx("option",{value:"0.8",children:"0.8 (Typical)"}),s.jsx("option",{value:"0.85",children:"0.85 (Good)"}),s.jsx("option",{value:"0.9",children:"0.9 (Excellent)"})]})]})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${t.cardBorder}`},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.5rem",textAlign:"center"},children:"Full Load Current"}),s.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:t.cardText,textAlign:"center"},children:o?o.toFixed(1):"0.0"}),s.jsx("div",{style:{fontSize:"0.875rem",color:t.labelText,textAlign:"center",marginTop:"0.25rem"},children:"Amperes"})]}),l?s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Value from NEC Table 430.250"}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"Standard full load current from NEC tables"})]})]})}):r.horsepower?s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Calculated Value"}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"Not in NEC tables - calculated using efficiency and power factor"})]})]})}):null]})},XN=({protectionData:r,setProtectionData:e,colors:t})=>{const n={"inverse-time-breaker":250,"instantaneous-trip-breaker":800,"inverse-time-fuse":175,"time-delay-fuse":175},o=(()=>{if(!r.flc)return{calculated:"0",standard:0};const l=parseFloat(r.flc),u=n[r.protectionType],h=l*u/100,g=[15,20,25,30,35,40,45,50,60,70,80,90,100,110,125,150,175,200,225,250,300,350,400,450,500,600,700,800,1e3,1200,1600,2e3,2500,3e3,4e3,5e3,6e3].find(b=>b>=h)||h;return{calculated:h.toFixed(1),standard:g,percentage:u}})();return s.jsxs("div",{className:ys.container,children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Full Load Current (FLC)"}),s.jsx("input",{type:"number",value:r.flc,onChange:l=>e({...r,flc:l.target.value}),placeholder:"Enter FLC in amps",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Protection Type"}),s.jsxs("select",{value:r.protectionType,onChange:l=>e({...r,protectionType:l.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"inverse-time-breaker",children:"Inverse Time Breaker"}),s.jsx("option",{value:"instantaneous-trip-breaker",children:"Instantaneous Trip Breaker"}),s.jsx("option",{value:"inverse-time-fuse",children:"Inverse Time Fuse"}),s.jsx("option",{value:"time-delay-fuse",children:"Time Delay Fuse"})]})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Calculated Maximum"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.calculated}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Standard Size"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.standard}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),r.flc&&s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.8125rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Reference:"}),"Per NEC Table 430.52 (",o.percentage,"% of FLC)"]})]})},ZN=({wireSizeData:r,setWireSizeData:e,colors:t})=>{const i=(()=>{if(!r.flc)return null;const o=parseFloat(r.flc)*1.25,l={"60C":{14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:355,700:385,750:400},"75C":{14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,750:475},"90C":{14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535}},u={14:15,12:20,10:30},d=["14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750"].find(g=>{const b=l[r.tempRating][g]>=o,S=!u[g]||u[g]>=o;return b&&S});return{requiredAmps:o.toFixed(1),wireSize:d||"Larger than 750 kcmil required",ampacity:d?l[r.tempRating][d]:"N/A",ocpdLimit:d&&u[d]?u[d]:null}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Full Load Current (FLC)"}),s.jsx("input",{type:"number",value:r.flc,onChange:o=>e({...r,flc:o.target.value}),placeholder:"Enter FLC in amps",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Temperature Rating"}),s.jsxs("select",{value:r.tempRating,onChange:o=>e({...r,tempRating:o.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"60C",children:"60C (140F) - TW, UF"}),s.jsx("option",{value:"75C",children:"75C (167F) - THWN, XHHW"}),s.jsx("option",{value:"90C",children:"90C (194F) - THHN, XHHW-2"})]})]})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${t.cardBorder}`},children:[s.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,marginBottom:"0.75rem"},children:[s.jsx("strong",{style:{color:t.cardText},children:"Required Current Capacity:"})," ",i.requiredAmps," Amps (125% of FLC)"]}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.5rem",textAlign:"center"},children:"Minimum Wire Size"}),s.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:t.cardText,textAlign:"center",marginBottom:"0.5rem"},children:i.wireSize}),i.ampacity!=="N/A"&&s.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,textAlign:"center"},children:["Ampacity: ",i.ampacity," Amps"]})]}),i.ocpdLimit&&s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"NEC 240.4(D) Limitation"}),s.jsxs("div",{style:{fontSize:"0.8125rem"},children:[i.ocpdLimit,"A maximum overcurrent protection for ",i.wireSize," wire"]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.8125rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Reference:"}),"Per NEC 430.22 - Branch circuit conductors must carry 125% of motor FLC"]})]})]})},eB=me.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=me.useState("flc"),[i,o]=me.useState({horsepower:"",voltage:"480",phase:"three",efficiency:"0.85",powerFactor:"0.8"}),[l,u]=me.useState({flc:"",protectionType:"inverse-time-breaker"}),[h,d]=me.useState({flc:"",tempRating:"75C"}),g={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};me.useImperativeHandle(e,()=>({exportPDF:()=>{var v,N;let S;if(t==="flc"){if(!i.horsepower){alert("Please select motor horsepower before exporting");return}const E={single:{115:{.25:4.4,.33:5.8,.5:7.2,.75:9.8,1:13.8,1.5:20,2:24,3:34,5:56},230:{.25:2.2,.33:2.9,.5:3.6,.75:4.9,1:6.9,1.5:10,2:12,3:17,5:28}},three:{230:{.5:2,.75:2.8,1:3.6,1.5:5.2,2:6.8,3:9.6,5:15.2,7.5:22,10:28,15:42,20:54,25:68,30:80,40:104,50:130,60:154,75:192,100:248,125:312,150:360,200:480},460:{.5:1,.75:1.4,1:1.8,1.5:2.6,2:3.4,3:4.8,5:7.6,7.5:11,10:14,15:21,20:27,25:34,30:40,40:52,50:65,60:77,75:96,100:124,125:156,150:180,200:240},575:{.5:.8,.75:1.1,1:1.4,1.5:2.1,2:2.7,3:3.9,5:6.1,7.5:9,10:11,15:17,20:22,25:27,30:32,40:41,50:52,60:62,75:77,100:99,125:125,150:144,200:192},2300:{250:65,300:77,350:90,400:103,450:116,500:129},4e3:{500:74,600:88,700:103,800:118,900:132,1e3:147}}},L=parseFloat(i.horsepower),C=parseInt(i.voltage);let M,$=!1;if((N=(v=E[i.phase])==null?void 0:v[C])!=null&&N[L])M=E[i.phase][C][L],$=!0;else{const ne=parseFloat(i.efficiency),ue=parseFloat(i.powerFactor);i.phase==="single"?M=L*746/(C*ne*ue):M=L*746/(1.732*C*ne*ue)}const F={motorHorsepower:`${L} HP`,voltage:`${i.voltage}V`,phase:i.phase==="single"?"Single Phase":"Three Phase"};$||(F.motorEfficiency=`${(parseFloat(i.efficiency)*100).toFixed(0)}%`,F.powerFactor=i.powerFactor),S={calculatorName:"Motor Calculations - Full Load Current",inputs:F,results:{fullLoadCurrent:`${M.toFixed(1)} Amperes`,source:$?"NEC Table 430.250":"Calculated"},additionalInfo:$?{note:"Standard full load current from NEC tables"}:{calculation:i.phase==="single"?`FLC = (${L} HP  746)  (${C}V  ${i.efficiency} eff  ${i.powerFactor} pf) = ${M.toFixed(1)}A`:`FLC = (${L} HP  746)  (1.732  ${C}V  ${i.efficiency} eff  ${i.powerFactor} pf) = ${M.toFixed(1)}A`,note:"Calculated value - not in NEC tables"},necReferences:["NEC Table 430.250 - Full-Load Current, Three-Phase Alternating-Current Motors","NEC Table 430.248 - Full-Load Current, Single-Phase Alternating-Current Motors","NEC 430.6 - Ampacity and Motor Rating Determination"]}}else if(t==="protection"){if(!l.flc){alert("Please enter motor FLC before exporting");return}const E={"inverse-time-breaker":"Inverse Time Breaker","instantaneous-trip-breaker":"Instantaneous Trip Breaker","inverse-time-fuse":"Inverse Time Fuse","time-delay-fuse":"Time Delay Fuse"},L={"inverse-time-breaker":250,"instantaneous-trip-breaker":800,"inverse-time-fuse":175,"time-delay-fuse":175},C=parseFloat(l.flc),M=L[l.protectionType],$=C*M/100,ne=[15,20,25,30,35,40,45,50,60,70,80,90,100,110,125,150,175,200,225,250,300,350,400,450,500,600,700,800,1e3,1200,1600,2e3,2500,3e3,4e3,5e3,6e3].find(ue=>ue>=$)||$;S={calculatorName:"Motor Calculations - Branch Circuit Protection",inputs:{motorFullLoadCurrent:`${l.flc} Amps`,protectionType:E[l.protectionType]},results:{calculatedMaximum:`${$.toFixed(1)} Amperes`,standardSize:`${ne} Amperes`},additionalInfo:{calculation:`Maximum = ${C}A  ${M}% = ${$.toFixed(1)}A`,nextStandardSize:`Next standard OCPD size: ${ne}A`},necReferences:[`NEC Table 430.52 - Maximum Rating or Setting of Motor Branch-Circuit Short-Circuit and Ground-Fault Protective Devices (${M}% of FLC)`,"NEC 430.52(C) - Rating or Setting for Individual Motor Circuit","NEC 240.6 - Standard Ampere Ratings"]}}else if(t==="wiresize"){if(!h.flc){alert("Please enter motor FLC before exporting");return}const E={"60C":"60C (140F) - TW, UF","75C":"75C (167F) - THWN, XHHW","90C":"90C (194F) - THHN, XHHW-2"},L=(parseFloat(h.flc)*1.25).toFixed(1),C={"60C":{14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:355,700:385,750:400},"75C":{14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,750:475},"90C":{14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535}},M={14:15,12:20,10:30},F=["14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750"].find(V=>{const k=C[h.tempRating][V]>=parseFloat(L),A=!M[V]||M[V]>=parseFloat(L);return k&&A}),ne=F||"Larger than 750 kcmil required",ue=F?C[h.tempRating][F]:"N/A";S={calculatorName:"Motor Calculations - Wire Sizing",inputs:{motorFullLoadCurrent:`${h.flc} Amps`,temperatureRating:E[h.tempRating]},results:{requiredCapacity:`${L} Amps (125% of FLC)`,minimumWireSize:ne,wireAmpacity:ue!=="N/A"?`${ue} Amps`:"N/A"},additionalInfo:{calculation:`Required capacity = ${h.flc}A  125% = ${L}A`,...F&&M[F]&&{ocpdLimitation:`NEC 240.4(D): ${M[F]}A maximum OCPD for ${ne} wire`}},necReferences:["NEC 430.22 - Single Motor - Conductors supplying a single motor shall have an ampacity not less than 125% of FLC","NEC Table 310.16 - Allowable Ampacities of Insulated Conductors","NEC 240.4(D) - Small Conductors - Unless specifically permitted, overcurrent protection shall not exceed limits"]}}cn(S)}}));const b={flc:s.jsx(QN,{flcData:i,setFlcData:o,colors:g}),protection:s.jsx(XN,{protectionData:l,setProtectionData:u,colors:g}),wiresize:s.jsx(ZN,{wireSizeData:h,setWireSizeData:d,colors:g})};return s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:g.cardBg,border:`1px solid ${g.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:s.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[s.jsx("button",{className:ys.btn,onClick:()=>n("flc"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="flc"?"#3b82f6":"transparent",color:t==="flc"?"white":g.labelText,border:`1px solid ${t==="flc"?"#3b82f6":g.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Full Load Current"}),s.jsx("button",{className:ys.btn,onClick:()=>n("protection"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="protection"?"#3b82f6":"transparent",color:t==="protection"?"white":g.labelText,border:`1px solid ${t==="protection"?"#3b82f6":g.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Circuit Protection"}),s.jsx("button",{className:ys.btn,onClick:()=>n("wiresize"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="wiresize"?"#3b82f6":"transparent",color:t==="wiresize"?"white":g.labelText,border:`1px solid ${t==="wiresize"?"#3b82f6":g.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Wire Sizing"})]})}),s.jsx("div",{style:{background:g.cardBg,border:`1px solid ${g.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:b[t]}),s.jsxs("div",{style:{background:g.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${g.cardBorder}`,fontSize:"0.8125rem",color:g.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:g.cardText},children:"NEC References:"}),"430.22 - Conductors (125% FLC)  430.52 - Circuit protection  430.250 - FLC tables  430.32 - Overload protection"]})]})}),tB=({data:r,setData:e,colors:t})=>{const i=(()=>{const o=parseFloat(r.squareFootage)||0,l=parseFloat(r.smallApplianceCircuits)||0,u=parseFloat(r.laundryCircuits)||0,h=parseFloat(r.rangeKW)||0,d=parseFloat(r.dryerKW)||0,g=parseFloat(r.waterHeaterKW)||0,b=parseFloat(r.hvacKW)||0,S=parseFloat(r.otherLoadsKW)||0,v=parseFloat(r.voltage),N=o*3,E=l*1500,L=u*1500,C=N+E+L;let M=0;C<=3e3?M=C:C<=12e4?M=3e3+(C-3e3)*.35:M=43950+(C-12e4)*.25;let $=0;h>0&&(h<=12?$=8e3:$=8e3+(h-12)*400);const F=Math.max(d*1e3,5e3),ne=g*1e3,ue=b*1e3,V=S*1e3,k=M+$+F+ne+ue+V,A=k/1e3,O=k/v;let I=100;return O>200?I=400:O>150?I=200:O>100&&(I=150),{generalLighting:N,smallApplianceLoad:E,laundryLoad:L,subtotalVA:C,demandLighting:M,rangeDemand:$,dryerDemand:F,waterHeaterDemand:ne,hvacDemand:ue,otherDemand:V,totalDemandVA:k,totalDemandKW:A,totalAmperage:O,recommendedService:I}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem",minHeight:"2.5rem"},children:["Square",s.jsx("br",{}),"Footage",s.jsx("br",{}),"   ",s.jsx("br",{})]}),s.jsx("input",{type:"number",value:r.squareFootage,onChange:o=>e(l=>({...l,squareFootage:o.target.value})),placeholder:"Living area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Small Appliance Circuits"}),s.jsx("input",{type:"number",value:r.smallApplianceCircuits,onChange:o=>e(l=>({...l,smallApplianceCircuits:o.target.value})),placeholder:"Min 2",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"@ 1500 VA each"})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Laundry Circuits ",s.jsx("br",{}),"   ",s.jsx("br",{})]}),s.jsx("input",{type:"number",value:r.laundryCircuits,onChange:o=>e(l=>({...l,laundryCircuits:o.target.value})),placeholder:"Typically 1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"@ 1500 VA"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Electric Range (kW)"}),s.jsx("input",{type:"number",value:r.rangeKW,onChange:o=>e(l=>({...l,rangeKW:o.target.value})),placeholder:"Nameplate rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Electric Dryer (kW)"}),s.jsx("input",{type:"number",value:r.dryerKW,onChange:o=>e(l=>({...l,dryerKW:o.target.value})),placeholder:"Min 5 kW",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Water Heater (kW)"}),s.jsx("input",{type:"number",value:r.waterHeaterKW,onChange:o=>e(l=>({...l,waterHeaterKW:o.target.value})),placeholder:"Rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"HVAC/Heat (kW)"}),s.jsx("input",{type:"number",value:r.hvacKW,onChange:o=>e(l=>({...l,hvacKW:o.target.value})),placeholder:"Largest load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Other Loads (kW)"}),s.jsx("input",{type:"number",value:r.otherLoadsKW,onChange:o=>e(l=>({...l,otherLoadsKW:o.target.value})),placeholder:"Pool, spa, etc",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),s.jsxs("select",{value:r.voltage,onChange:o=>e(l=>({...l,voltage:o.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"208",children:"208V"})]}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]})]}),r.squareFootage&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Demand"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.totalDemandKW.toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Amperage"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.totalAmperage.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"amps"})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Recommended Service"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:i.recommendedService}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"amp service"})]})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,marginBottom:"1rem"},children:[s.jsx("div",{style:{fontWeight:"600",color:t.cardText,marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Connected Loads:"}),s.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["General Lighting: ",i.generalLighting.toLocaleString()," VA"]}),s.jsxs("div",{children:["Small Appliance: ",i.smallApplianceLoad.toLocaleString()," VA"]}),s.jsxs("div",{children:["Laundry: ",i.laundryLoad.toLocaleString()," VA"]}),s.jsx("div",{style:{borderTop:`1px solid ${t.cardBorder}`,marginTop:"0.5rem",paddingTop:"0.5rem"},children:s.jsxs("strong",{children:["Subtotal: ",i.subtotalVA.toLocaleString()," VA"]})})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5",width:"100%"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Demand Loads (with factors applied):"}),s.jsxs("div",{children:["Lighting: ",i.demandLighting.toFixed(0)," VA"]}),r.rangeKW>0&&s.jsxs("div",{children:["Range: ",i.rangeDemand.toLocaleString()," W"]}),r.dryerKW>0&&s.jsxs("div",{children:["Dryer: ",i.dryerDemand.toLocaleString()," W"]}),r.waterHeaterKW>0&&s.jsxs("div",{children:["Water Heater: ",i.waterHeaterDemand.toLocaleString()," W"]}),r.hvacKW>0&&s.jsxs("div",{children:["HVAC: ",i.hvacDemand.toLocaleString()," W"]}),r.otherLoadsKW>0&&s.jsxs("div",{children:["Other: ",i.otherDemand.toLocaleString()," W"]})]})]})})]})]})},rB=({data:r,setData:e,colors:t})=>{const n={office:3.5,warehouse:.25,retail:3,school:3,restaurant:2,hotel:2,hospital:2,industrial:2},o=(()=>{const l=parseFloat(r.squareFootage)||0,u=parseFloat(r.hvacLoad)||0,h=parseFloat(r.receptacleLoad)||0,d=parseFloat(r.motorLoads)||0,g=parseFloat(r.otherLoads)||0,b=parseFloat(r.demandFactor)/100,S=parseFloat(r.voltage),v=l*n[r.occupancyType],N=v/1e3+u+h+d+g,E=N*b;let L;return r.phase==="single"?L=E*1e3/S:L=E*1e3/(1.732*S),{lightingVA:v,lightingKW:v/1e3,hvac:u,receptacles:h,motors:d,other:g,totalConnectedKW:N,demandLoadKW:E,amperage:L}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Square Footage"}),s.jsx("input",{type:"number",value:r.squareFootage,onChange:l=>e(u=>({...u,squareFootage:l.target.value})),placeholder:"Building area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Occupancy Type"}),s.jsxs("select",{value:r.occupancyType,onChange:l=>e(u=>({...u,occupancyType:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"office",children:"Office (3.5 VA/sq ft)"}),s.jsx("option",{value:"warehouse",children:"Warehouse (0.25 VA/sq ft)"}),s.jsx("option",{value:"retail",children:"Retail (3.0 VA/sq ft)"}),s.jsx("option",{value:"school",children:"School (3.0 VA/sq ft)"}),s.jsx("option",{value:"restaurant",children:"Restaurant (2.0 VA/sq ft)"}),s.jsx("option",{value:"hotel",children:"Hotel (2.0 VA/sq ft)"}),s.jsx("option",{value:"hospital",children:"Hospital (2.0 VA/sq ft)"}),s.jsx("option",{value:"industrial",children:"Industrial (2.0 VA/sq ft)"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"HVAC Load (kW)"}),s.jsx("input",{type:"number",value:r.hvacLoad,onChange:l=>e(u=>({...u,hvacLoad:l.target.value})),placeholder:"Total HVAC",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Receptacle Load (kW)"}),s.jsx("input",{type:"number",value:r.receptacleLoad,onChange:l=>e(u=>({...u,receptacleLoad:l.target.value})),placeholder:"Receptacles",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Loads (kW)"}),s.jsx("input",{type:"number",value:r.motorLoads,onChange:l=>e(u=>({...u,motorLoads:l.target.value})),placeholder:"Total motors",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Other Loads (kW)"}),s.jsx("input",{type:"number",value:r.otherLoads,onChange:l=>e(u=>({...u,otherLoads:l.target.value})),placeholder:"Additional",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Demand Factor (%)"}),s.jsx("input",{type:"number",value:r.demandFactor,onChange:l=>e(u=>({...u,demandFactor:l.target.value})),placeholder:"80-100%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Peak load %"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"System Voltage"}),s.jsxs("select",{value:r.voltage,onChange:l=>e(u=>({...u,voltage:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"208",children:"208V"}),s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"277",children:"277V"}),s.jsx("option",{value:"480",children:"480V"}),s.jsx("option",{value:"600",children:"600V"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["System",s.jsx("br",{})," Phase"]}),s.jsxs("select",{value:r.phase,onChange:l=>e(u=>({...u,phase:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"single",children:"Single Phase"}),s.jsx("option",{value:"three",children:"Three Phase"})]})]})]}),r.squareFootage&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Connected Load"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.totalConnectedKW.toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Demand Load"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.demandLoadKW.toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Amperage"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.amperage.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"amps"})]})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,marginBottom:"1rem"},children:[s.jsx("div",{style:{fontWeight:"600",color:t.cardText,marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Connected Loads:"}),s.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["Lighting: ",o.lightingKW.toFixed(2)," kW (",o.lightingVA.toFixed(0)," VA)"]}),r.hvacLoad>0&&s.jsxs("div",{children:["HVAC: ",o.hvac.toFixed(2)," kW"]}),r.receptacleLoad>0&&s.jsxs("div",{children:["Receptacles: ",o.receptacles.toFixed(2)," kW"]}),r.motorLoads>0&&s.jsxs("div",{children:["Motors: ",o.motors.toFixed(2)," kW"]}),r.otherLoads>0&&s.jsxs("div",{children:["Other: ",o.other.toFixed(2)," kW"]})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"System Configuration"}),s.jsxs("div",{children:[r.voltage,"V ",r.phase==="single"?"Single":"Three"," Phase"]}),s.jsxs("div",{children:[r.demandFactor,"% demand factor applied"]})]})]})})]})]})},nB=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=me.useState("residential"),[o,l]=me.useState({squareFootage:"",smallApplianceCircuits:"2",laundryCircuits:"1",rangeKW:"",dryerKW:"5",waterHeaterKW:"",hvacKW:"",otherLoadsKW:"",voltage:"240"}),[u,h]=me.useState({squareFootage:"",occupancyType:"office",hvacLoad:"",receptacleLoad:"",motorLoads:"",otherLoads:"",demandFactor:"100",voltage:"480",phase:"three"}),d={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};return me.useImperativeHandle(t,()=>({exportPDF:()=>{let g;if(n==="residential"){if(!o.squareFootage){alert("Please enter square footage before exporting");return}const b=parseFloat(o.squareFootage),S=parseFloat(o.smallApplianceCircuits)||0,v=parseFloat(o.laundryCircuits)||0,N=parseFloat(o.rangeKW)||0,E=parseFloat(o.dryerKW)||0,L=parseFloat(o.waterHeaterKW)||0,C=parseFloat(o.hvacKW)||0,M=parseFloat(o.otherLoadsKW)||0,$=parseFloat(o.voltage),F=b*3,ne=S*1500,ue=v*1500,V=F+ne+ue;let k=0;V<=3e3?k=V:V<=12e4?k=3e3+(V-3e3)*.35:k=3e3+117e3*.35+(V-12e4)*.25;let A=0;N>0&&(A=N<=12?8e3:8e3+(N-12)*400);const O=Math.max(E*1e3,5e3),I=L*1e3,w=C*1e3,B=M*1e3,D=k+A+O+I+w+B,q=(D/1e3).toFixed(2),oe=(D/$).toFixed(1);let se=100;parseFloat(oe)>200?se=400:parseFloat(oe)>150?se=200:parseFloat(oe)>100&&(se=150);const ie={squareFootage:`${o.squareFootage} sq ft`,smallApplianceCircuits:`${S} circuits @ 1500 VA each`,laundryCircuits:`${v} circuit @ 1500 VA`,serviceVoltage:`${o.voltage}V`};N>0&&(ie.electricRange=`${N} kW`),E>0&&(ie.electricDryer=`${E} kW`),L>0&&(ie.waterHeater=`${L} kW`),C>0&&(ie.hvacHeat=`${C} kW`),M>0&&(ie.otherLoads=`${M} kW`),g={calculatorName:"Load Calculations - Residential (NEC 220.82)",inputs:ie,results:{totalDemandLoad:`${q} kW (${D.toLocaleString()} VA)`,totalAmperage:`${oe} Amps`,recommendedService:`${se} Amp Service`},additionalInfo:{generalLighting:`${F.toLocaleString()} VA (${b} sq ft  3 VA/sq ft)`,smallAppliance:`${ne.toLocaleString()} VA`,laundry:`${ue.toLocaleString()} VA`,lightingSubtotal:`${V.toLocaleString()} VA`,demandLightingAfterFactors:`${k.toFixed(0)} VA`,...N>0&&{rangeDemand:`${A.toLocaleString()} W`},...E>0&&{dryerDemand:`${O.toLocaleString()} W (min 5000 W)`},...L>0&&{waterHeaterDemand:`${I.toLocaleString()} W`},...C>0&&{hvacDemand:`${w.toLocaleString()} W`},...M>0&&{otherDemand:`${B.toLocaleString()} W`}},necReferences:["NEC 220.82 - Dwelling Unit Optional Calculation","NEC 220.83 - Existing Dwelling Unit","NEC Table 220.55 - Demand Factors for Electric Ranges","General lighting: 3 VA per square foot (NEC 220.12)","Demand factors: First 3000 VA @ 100%, Next 117000 VA @ 35%, Remainder @ 25%"]}}else if(n==="commercial"){if(!u.squareFootage){alert("Please enter square footage before exporting");return}const b={office:3.5,warehouse:.25,retail:3,school:3,restaurant:2,hotel:2,hospital:2,industrial:2},S={office:"Office",warehouse:"Warehouse",retail:"Retail",school:"School",restaurant:"Restaurant",hotel:"Hotel",hospital:"Hospital",industrial:"Industrial"},v=parseFloat(u.squareFootage),N=parseFloat(u.hvacLoad)||0,E=parseFloat(u.receptacleLoad)||0,L=parseFloat(u.motorLoads)||0,C=parseFloat(u.otherLoads)||0,M=parseFloat(u.demandFactor)/100,$=parseFloat(u.voltage),F=v*b[u.occupancyType],ne=(F/1e3).toFixed(2),ue=(F/1e3+N+E+L+C).toFixed(2),V=(parseFloat(ue)*M).toFixed(2);let k;u.phase==="single"?k=(parseFloat(V)*1e3/$).toFixed(1):k=(parseFloat(V)*1e3/(1.732*$)).toFixed(1);const A={squareFootage:`${u.squareFootage} sq ft`,occupancyType:`${S[u.occupancyType]} (${b[u.occupancyType]} VA/sq ft)`,demandFactor:`${u.demandFactor}%`,systemConfiguration:`${u.voltage}V ${u.phase==="single"?"Single":"Three"} Phase`};N>0&&(A.hvacLoad=`${N} kW`),E>0&&(A.receptacleLoad=`${E} kW`),L>0&&(A.motorLoads=`${L} kW`),C>0&&(A.otherLoads=`${C} kW`),g={calculatorName:"Load Calculations - Commercial",inputs:A,results:{connectedLoad:`${ue} kW`,demandLoad:`${V} kW`,totalAmperage:`${k} Amps`},additionalInfo:{lighting:`${ne} kW (${F.toFixed(0)} VA)`,calculationMethod:u.phase==="single"?`Amperage = (${V} kW  1000)  ${$}V = ${k} A`:`Amperage = (${V} kW  1000)  (1.732  ${$}V) = ${k} A`,demandFactorNote:`${u.demandFactor}% demand factor applied to total connected load`},necReferences:["NEC Article 220 - Branch-Circuit, Feeder, and Service Load Calculations","NEC Table 220.12 - General Lighting Loads by Occupancy","NEC 220.42 - General Lighting","NEC 220.50 - Motors","Always verify with actual connected loads and local codes"]}}cn(g)}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"residential",label:"Residential"},{id:"commercial",label:"Commercial"}].map(g=>s.jsx("button",{onClick:()=>i(g.id),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.625rem 1rem",background:n===g.id?"#3b82f6":d.sectionBg,color:n===g.id?"white":d.labelText,border:`1px solid ${n===g.id?"#3b82f6":d.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:g.label},g.id))}),s.jsx("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:n==="residential"?s.jsx(tB,{data:o,setData:l,colors:d}):s.jsx(rB,{data:u,setData:h,colors:d})})]})}),iB=me.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=me.useState("sizing"),[i,o]=me.useState(""),[l,u]=me.useState("480"),[h,d]=me.useState("208"),[g,b]=me.useState("three"),[S,v]=me.useState("continuous"),[N,E]=me.useState("0.85"),[L,C]=me.useState(""),[M,$]=me.useState("480"),[F,ne]=me.useState("208"),[ue,V]=me.useState("three"),k={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},A=[3,6,9,15,30,45,75,112.5,150,225,300,500,750,1e3,1500,2e3,2500,3e3],O=()=>{const D=parseFloat(i)||0;if(D===0)return null;let q=1;S==="continuous"&&(q=1.25);const oe=D*q,se=A.find(ie=>ie>=oe)||oe;return{loadKVA:D,requiredKVA:oe.toFixed(1),recommendedSize:se,utilizationPercent:(D/se*100).toFixed(1)}},I=()=>{const D=parseFloat(L)||0;if(D===0)return null;const q=parseFloat(M),oe=parseFloat(F);let se,ie;return ue==="single"?(se=D*1e3/q,ie=D*1e3/oe):(se=D*1e3/(1.732*q),ie=D*1e3/(1.732*oe)),{kva:D,primaryCurrent:se.toFixed(1),secondaryCurrent:ie.toFixed(1),primaryVoltage:q,secondaryVoltage:oe}},w=O(),B=I();return me.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="sizing"){if(!i){alert("Please enter load (kVA) before exporting to PDF");return}const D={calculatorName:"Transformer Calculations - Transformer Sizing",inputs:{Load:`${i} kVA`,"Primary Voltage":`${l}V`,"Secondary Voltage":`${h}V`,Phase:g==="single"?"Single Phase":"Three Phase","Load Type":S==="continuous"?"Continuous (125% sizing)":"Non-Continuous (100% sizing)","Power Factor":N},results:{"Recommended Transformer Size":`${w.recommendedSize} kVA`,Configuration:`${l}V to ${h}V`,Phase:g==="single"?"Single Phase":"Three Phase","Connected Load":`${w.loadKVA} kVA`,"Required Capacity":`${w.requiredKVA} kVA`,Utilization:`${w.utilizationPercent}%`},additionalInfo:{"Sizing Factor":S==="continuous"?"125% (continuous loads)":"100% (non-continuous loads)","Calculation Method":"Required Capacity = Connected Load  Sizing Factor","Utilization Note":parseFloat(w.utilizationPercent)>80?"WARNING: Utilization above 80% may result in higher operating temperatures and reduced equipment life":"Utilization is within acceptable range"},necReferences:["NEC 450.3 - Overcurrent Protection for Transformers","NEC 450.9 - Ventilation Requirements","NEC 450.11 - Marking Requirements","NEC 450.21 - Dry-Type Transformers Installed Indoors","Size continuous loads at 125% per NEC requirements","Keep utilization below 80% for optimal efficiency and equipment life","Consider future load growth (typically 20-25% spare capacity)","Account for inrush current for motor loads","Consider ambient temperature and ventilation requirements"]};cn(D)}else if(t==="currents"){if(!L){alert("Please enter transformer rating (kVA) before exporting to PDF");return}const D=ue==="single"?"I = (kVA  1000)  V":"I = (kVA  1000)  (1.732  V)",q={calculatorName:"Transformer Calculations - Current Calculations",inputs:{"Transformer Rating":`${L} kVA`,"Primary Voltage":`${M}V`,"Secondary Voltage":`${F}V`,Phase:ue==="single"?"Single Phase":"Three Phase"},results:{Configuration:`${B.kva} kVA, ${ue==="single"?"Single":"Three"} Phase`,"Voltage Ratio":`${B.primaryVoltage}V / ${B.secondaryVoltage}V`,"Primary Current":`${B.primaryCurrent} A`,"Secondary Current":`${B.secondaryCurrent} A`},additionalInfo:{"Formula Used":D,"Primary Side":`${B.primaryCurrent}A at ${B.primaryVoltage}V`,"Secondary Side":`${B.secondaryCurrent}A at ${B.secondaryVoltage}V`,Application:"Use these currents for selecting primary and secondary protection devices per NEC Article 450"},necReferences:["NEC Article 450 - Transformers and Transformer Vaults","NEC 450.3 - Overcurrent Protection","Single Phase Formula: I = (kVA  1000)  V","Three Phase Formula: I = (kVA  1000)  (1.732  V)","Primary and secondary protection must be sized per calculated currents","Consider temperature correction and adjustment factors for conductors","Account for voltage drop in feeder calculations"]};cn(q)}}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:s.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[s.jsx("button",{onClick:()=>n("sizing"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="sizing"?"#3b82f6":"transparent",color:t==="sizing"?"white":k.labelText,border:`1px solid ${t==="sizing"?"#3b82f6":k.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Transformer Sizing"}),s.jsx("button",{onClick:()=>n("currents"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="currents"?"#3b82f6":"transparent",color:t==="currents"?"white":k.labelText,border:`1px solid ${t==="currents"?"#3b82f6":k.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Current Calculations"})]})}),t==="sizing"?s.jsxs("div",{children:[s.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:k.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${k.cardBorder}`,paddingBottom:"0.5rem"},children:"Transformer Parameters"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Load (kVA)"}),s.jsx("input",{type:"number",value:i,onChange:D=>o(D.target.value),placeholder:"Connected load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:k.subtleText,marginTop:"0.25rem"},children:"Total connected or demand load"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Primary Voltage"}),s.jsxs("select",{value:l,onChange:D=>u(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"208",children:"208V"}),s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"480",children:"480V"}),s.jsx("option",{value:"600",children:"600V"}),s.jsx("option",{value:"2400",children:"2400V"}),s.jsx("option",{value:"4160",children:"4160V"}),s.jsx("option",{value:"12470",children:"12470V"}),s.jsx("option",{value:"13200",children:"13200V"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Secondary Voltage"}),s.jsxs("select",{value:h,onChange:D=>d(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"120",children:"120V"}),s.jsx("option",{value:"208",children:"208V"}),s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"277",children:"277V"}),s.jsx("option",{value:"480",children:"480V"}),s.jsx("option",{value:"600",children:"600V"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Phase"}),s.jsxs("select",{value:g,onChange:D=>b(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"single",children:"Single Phase"}),s.jsx("option",{value:"three",children:"Three Phase"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Load Type"}),s.jsxs("select",{value:S,onChange:D=>v(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"continuous",children:"Continuous (125% sizing)"}),s.jsx("option",{value:"noncontinuous",children:"Non-Continuous (100% sizing)"})]}),s.jsx("div",{style:{fontSize:"0.75rem",color:k.subtleText,marginTop:"0.25rem"},children:"Continuous loads operate 3+ hours"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),s.jsxs("select",{value:N,onChange:D=>E(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"1.0",children:"1.0 (Unity)"}),s.jsx("option",{value:"0.95",children:"0.95 (Excellent)"}),s.jsx("option",{value:"0.9",children:"0.9 (Good)"}),s.jsx("option",{value:"0.85",children:"0.85 (Typical)"}),s.jsx("option",{value:"0.8",children:"0.8 (Poor)"})]})]})]})]}),w&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:k.cardText,marginTop:0,marginBottom:"1rem"},children:"Sizing Calculation"}),s.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${k.cardBorder}`},children:[s.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:k.labelText},children:[s.jsx("strong",{style:{color:k.cardText},children:"Connected Load:"})," ",w.loadKVA," kVA"]}),s.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:k.labelText},children:[s.jsx("strong",{style:{color:k.cardText},children:"Required Capacity:"})," ",w.requiredKVA," kVA"]}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:k.subtleText,fontStyle:"italic"},children:["(",S==="continuous"?"125%":"100%"," sizing factor applied)"]})]})]}),s.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:k.cardText,marginTop:0,marginBottom:"1rem"},children:"Recommended Transformer"}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Transformer Size"}),s.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[w.recommendedSize," kVA"]})]}),s.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${k.cardBorder}`,marginBottom:"1rem"},children:[s.jsxs("div",{style:{fontSize:"0.875rem",color:k.labelText,marginBottom:"0.5rem"},children:[s.jsx("strong",{style:{color:k.cardText},children:"Configuration:"})," ",l,"V to ",h,"V"]}),s.jsxs("div",{style:{fontSize:"0.875rem",color:k.labelText},children:[s.jsx("strong",{style:{color:k.cardText},children:"Phase:"})," ",g==="single"?"Single":"Three"," Phase"]})]}),s.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:k.labelText,marginBottom:"0.25rem"},children:"Utilization"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:k.cardText},children:[w.utilizationPercent,"%"]})]})]}),parseFloat(w.utilizationPercent)>80&&s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"High Utilization Warning"}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"Transformer utilization above 80% may result in higher operating temperatures and reduced equipment life. Consider next size up for better efficiency."})]})]})})]}),s.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Transformer Sizing Guidelines:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Size for continuous loads at 125% per NEC 450.3"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider future load growth (typically 20-25%)"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Keep utilization below 80% for optimal efficiency"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Account for inrush current for motor loads"}),s.jsx("li",{children:"Consider ambient temperature and ventilation"})]})]})]})})]}):s.jsxs("div",{children:[s.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:k.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${k.cardBorder}`,paddingBottom:"0.5rem"},children:"Transformer Information"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Transformer Rating (kVA)"}),s.jsx("input",{type:"number",value:L,onChange:D=>C(D.target.value),placeholder:"Transformer kVA",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Primary Voltage"}),s.jsxs("select",{value:M,onChange:D=>$(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"208",children:"208V"}),s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"480",children:"480V"}),s.jsx("option",{value:"600",children:"600V"}),s.jsx("option",{value:"2400",children:"2400V"}),s.jsx("option",{value:"4160",children:"4160V"}),s.jsx("option",{value:"12470",children:"12470V"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Secondary Voltage"}),s.jsxs("select",{value:F,onChange:D=>ne(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"120",children:"120V"}),s.jsx("option",{value:"208",children:"208V"}),s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"277",children:"277V"}),s.jsx("option",{value:"480",children:"480V"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Phase"}),s.jsxs("select",{value:ue,onChange:D=>V(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"single",children:"Single Phase"}),s.jsx("option",{value:"three",children:"Three Phase"})]})]})]})]}),B&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:k.cardText,marginTop:0,marginBottom:"1rem"},children:"Transformer Configuration"}),s.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${k.cardBorder}`},children:[s.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:k.labelText},children:[s.jsx("strong",{style:{color:k.cardText},children:"Rating:"})," ",B.kva," kVA, ",ue==="single"?"Single":"Three"," Phase"]}),s.jsxs("div",{style:{fontSize:"0.875rem",color:k.labelText},children:[s.jsx("strong",{style:{color:k.cardText},children:"Configuration:"})," ",B.primaryVoltage,"V / ",B.secondaryVoltage,"V"]})]})]}),s.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#1e40af",marginTop:0,marginBottom:"1rem"},children:"Primary Side"}),s.jsx("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${k.cardBorder}`},children:s.jsxs("div",{style:{fontSize:"0.875rem",color:k.labelText},children:[s.jsx("strong",{style:{color:k.cardText},children:"Voltage:"})," ",B.primaryVoltage,"V"]})}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Primary Current"}),s.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:B.primaryCurrent}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),s.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#059669",marginTop:0,marginBottom:"1rem"},children:"Secondary Side"}),s.jsx("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${k.cardBorder}`},children:s.jsxs("div",{style:{fontSize:"0.875rem",color:k.labelText},children:[s.jsx("strong",{style:{color:k.cardText},children:"Voltage:"})," ",B.secondaryVoltage,"V"]})}),s.jsxs("div",{style:{background:"#d1fae5",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#059669",marginBottom:"0.25rem"},children:"Secondary Current"}),s.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#059669"},children:B.secondaryCurrent}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#059669",marginTop:"0.25rem"},children:"Amperes"})]})]})]}),s.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Current Formulas:"}),s.jsxs("div",{style:{fontSize:"0.8125rem",marginBottom:"0.25rem"},children:[s.jsx("strong",{children:"Single Phase:"})," I = (kVA  1000)  V"]}),s.jsxs("div",{style:{fontSize:"0.8125rem",marginBottom:"0.5rem"},children:[s.jsx("strong",{children:"Three Phase:"})," I = (kVA  1000)  (1.732  V)"]}),s.jsx("div",{style:{fontSize:"0.75rem",fontStyle:"italic"},children:"Note: Use these currents for selecting primary and secondary protection devices per NEC Article 450."})]})]})})]}),s.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${k.cardBorder}`,fontSize:"0.8125rem",color:k.labelText,marginTop:"1rem"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:k.cardText},children:"NEC Article 450 - Transformers and Transformer Vaults:"}),"450.3: Overcurrent protection  450.9: Ventilation requirements  450.11: Marking  450.21: Dry-type transformers indoors"]})]})}),oB=me.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=me.useState("residential"),[i,o]=me.useState(""),[l,u]=me.useState(""),[h,d]=me.useState(""),[g,b]=me.useState(""),[S,v]=me.useState(""),[N,E]=me.useState(""),[L,C]=me.useState("240"),[M,$]=me.useState(""),[F,ne]=me.useState("80"),[ue,V]=me.useState("480"),[k,A]=me.useState("three"),[O,I]=me.useState("25"),w={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},B=()=>{const se=parseFloat(i)||0,ie=parseFloat(l)||0,ve=parseFloat(h)||0,be=parseFloat(g)||0,Z=parseFloat(S)||0,W=parseFloat(N)||0,J=parseFloat(L),re=se*3,fe=2*1500,ge=1500,_e=re+fe+ge;let he=0;_e<=3e3?he=_e:he=3e3+(_e-3e3)*.35;let xe=0;be>0&&(be<=12e3?xe=8e3:xe=8e3+(be-12e3)*.05);const Pe=Math.max(Z,5e3),Ue=ve,Xe=ie,Ze=W,ze=he+xe+Pe+Ue+Xe+Ze,de=ze/J;let Lt=100;return de>200?Lt=400:de>150?Lt=200:de>100&&(Lt=150),{generalLighting:re,smallAppliance:fe,laundry:ge,subtotal:_e,demandLighting:he,rangeDemand:xe,dryerDemand:Pe,whDemand:Ue,hvacDemand:Xe,otherDemand:Ze,totalDemand:ze,totalAmperage:de,recommendedService:Lt,conductorSize:{100:"4 AWG",150:"1/0 AWG",200:"2/0 AWG",400:"400 kcmil"}[Lt]}},D=()=>{const se=parseFloat(M)||0,ie=parseFloat(F)/100,ve=parseFloat(O)/100,be=parseFloat(ue),Z=se*ie,W=Z*(1+ve);let J;k==="single"?J=W*1e3/be:J=W*1e3/(1.732*be);const fe=[100,150,200,225,400,600,800,1e3,1200,1600,2e3,2500,3e3,4e3].find(ge=>ge>=J)||Math.ceil(J/100)*100;return{connectedLoad:se,demandLoad:Z,futureLoad:W,amperage:J,recommendedService:fe}},q=B(),oe=D();return me.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="residential"){if(!i){alert("Please enter square footage before exporting to PDF");return}const se={calculatorName:"Service Entrance Sizing - Residential",inputs:{"Square Footage":`${i} sq ft`,"HVAC/Heat Load":l?`${l} W`:"Not specified","Water Heater":h?`${h} W`:"Not specified","Range/Oven":g?`${g} W`:"Not specified",Dryer:S?`${S} W`:"Not specified","Other Loads":N?`${N} W`:"Not specified","Service Voltage":`${L}V`},results:{"Recommended Service Size":`${q.recommendedService}A`,"Service Conductors":`${q.conductorSize} Copper`,"Total Demand Load":`${q.totalDemand.toFixed(0)} W`,"Calculated Amperage":`${q.totalAmperage.toFixed(1)} A`},additionalInfo:{"General Lighting Load":`${q.generalLighting.toLocaleString()} VA`,"Small Appliance Circuits":`${q.smallAppliance.toLocaleString()} VA`,"Laundry Circuit":`${q.laundry.toLocaleString()} VA`,"Lighting Demand (after factors)":`${q.demandLighting.toFixed(0)} W`,"Range Demand":g?`${q.rangeDemand.toFixed(0)} W`:"N/A","Dryer Demand":S?`${q.dryerDemand.toFixed(0)} W`:"N/A","Water Heater":h?`${q.whDemand.toFixed(0)} W`:"N/A",HVAC:l?`${q.hvacDemand.toFixed(0)} W`:"N/A","Calculation Method":"NEC Article 220.82 - Dwelling Unit Optional Calculation"},necReferences:["NEC 220.82 - Dwelling Unit Optional Calculation","NEC 230.42 - Minimum Size and Rating (service conductors)","NEC 230.79 - Rating of Service Disconnecting Means","NEC 230.90 - Where Required (overload protection)","NEC Table 310.15(B)(16) - Allowable Ampacities","Service conductors shown are approximate for 75C copper. Consult NEC for exact sizing with all derating factors."]};cn(se)}else if(t==="commercial"){if(!M){alert("Please enter total connected load before exporting to PDF");return}const se={calculatorName:"Service Entrance Sizing - Commercial",inputs:{"Total Connected Load":`${M} kW`,"Demand Factor":`${F}%`,"Future Expansion":`${O}%`,"Service Voltage":`${ue}V`,"System Phase":k==="single"?"Single Phase":"Three Phase"},results:{"Recommended Service Size":`${oe.recommendedService}A`,"System Configuration":`${ue}V ${k==="single"?"Single":"Three"} Phase`,"Connected Load":`${oe.connectedLoad.toFixed(1)} kW`,"Demand Load":`${oe.demandLoad.toFixed(1)} kW`,"With Future Expansion":`${oe.futureLoad.toFixed(1)} kW`,"Calculated Amperage":`${oe.amperage.toFixed(1)} A`},additionalInfo:{"Calculation Method":"Commercial demand calculation with future expansion factor","Demand Factor Applied":`${F}% of connected load`,"Future Growth Allowance":`${O}% spare capacity`,"Formula Used":k==="single"?"Amperage = (kW  1000) / Voltage":"Amperage = (kW  1000) / (1.732  Voltage)"},necReferences:["NEC Article 220 Part IV - Optional Feeder and Service Load Calculations","NEC 220.40 - General (demand factors)","NEC 230.42 - Minimum Size and Rating","NEC 230.79 - Rating of Service Disconnecting Means","Consider demand factors per NEC 220.40 and Article 220 Part IV","Include motor loads, HVAC, and large equipment per NEC requirements","Review utility requirements and available fault current","Future expansion typically 20-30% spare capacity"]};cn(se)}}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:s.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[s.jsx("button",{onClick:()=>n("residential"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="residential"?"#3b82f6":"transparent",color:t==="residential"?"white":w.labelText,border:`1px solid ${t==="residential"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Residential"}),s.jsx("button",{onClick:()=>n("commercial"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="commercial"?"#3b82f6":"transparent",color:t==="commercial"?"white":w.labelText,border:`1px solid ${t==="commercial"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Commercial"})]})}),t==="residential"?s.jsxs("div",{children:[s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Information"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Square Footage"}),s.jsx("input",{type:"number",value:i,onChange:se=>o(se.target.value),placeholder:"Living area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Heated/cooled living space"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"HVAC/Heat Load (Watts)"}),s.jsx("input",{type:"number",value:l,onChange:se=>u(se.target.value),placeholder:"Largest load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Water Heater (Watts)"}),s.jsx("input",{type:"number",value:h,onChange:se=>d(se.target.value),placeholder:"Nameplate rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Range/Oven (Watts)"}),s.jsx("input",{type:"number",value:g,onChange:se=>b(se.target.value),placeholder:"Electric range",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Dryer (Watts)"}),s.jsx("input",{type:"number",value:S,onChange:se=>v(se.target.value),placeholder:"Electric dryer",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Minimum 5000W if electric"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Other Loads (Watts)"}),s.jsx("input",{type:"number",value:N,onChange:se=>E(se.target.value),placeholder:"Pool, spa, etc.",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),s.jsxs("select",{value:L,onChange:se=>C(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"208",children:"208V"})]})]})]})]}),i&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Breakdown"}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${w.cardBorder}`},children:[s.jsx("strong",{style:{display:"block",marginBottom:"0.5rem",color:w.cardText,fontSize:"0.875rem"},children:"Connected Loads:"}),s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["General Lighting: ",q.generalLighting.toLocaleString()," VA"]}),s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Small Appliance: ",q.smallAppliance.toLocaleString()," VA"]}),s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.5rem"},children:["Laundry: ",q.laundry.toLocaleString()," VA"]}),s.jsxs("div",{style:{fontSize:"0.875rem",color:w.subtleText,paddingTop:"0.5rem",borderTop:`1px solid ${w.cardBorder}`},children:["Subtotal: ",q.subtotal.toLocaleString()," VA"]})]}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[s.jsx("strong",{style:{display:"block",marginBottom:"0.5rem",color:w.cardText,fontSize:"0.875rem"},children:"Demand Loads (after factors):"}),s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Lighting: ",q.demandLighting.toFixed(0)," W"]}),g&&s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Range: ",q.rangeDemand.toFixed(0)," W"]}),S&&s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Dryer: ",q.dryerDemand.toFixed(0)," W"]}),h&&s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Water Heater: ",q.whDemand.toFixed(0)," W"]}),l&&s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["HVAC: ",q.hvacDemand.toFixed(0)," W"]}),N&&s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText},children:["Other: ",q.otherDemand.toFixed(0)," W"]})]})]}),s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Service Sizing Results"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Total Demand Load"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:q.totalDemand.toFixed(0)}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"Watts"})]}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Calculated Amperage"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:q.totalAmperage.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"Amperes"})]})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Recommended Service Size"}),s.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[q.recommendedService,"A"]})]}),s.jsx("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center",border:`1px solid ${w.cardBorder}`},children:s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText},children:[s.jsx("strong",{style:{color:w.cardText},children:"Service Conductors:"})," ",q.conductorSize," Copper"]})})]})]}),s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Important Notes:"}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"Service conductors are approximate for 75C copper. Consult NEC Table 310.15(B)(16) for exact sizing with all derating factors."})]})]})})]}):s.jsxs("div",{children:[s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Information"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Total Connected Load (kW)"}),s.jsx("input",{type:"number",value:M,onChange:se=>$(se.target.value),placeholder:"Total building load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Demand Factor (%)"}),s.jsx("input",{type:"number",value:F,onChange:se=>ne(se.target.value),placeholder:"Typically 70-90%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Peak demand percentage"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Future Expansion (%)"}),s.jsx("input",{type:"number",value:O,onChange:se=>I(se.target.value),placeholder:"Typically 20-30%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Spare capacity for growth"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),s.jsxs("select",{value:ue,onChange:se=>V(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"208",children:"208V"}),s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"480",children:"480V"}),s.jsx("option",{value:"600",children:"600V"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"System Phase"}),s.jsxs("select",{value:k,onChange:se=>A(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"single",children:"Single Phase"}),s.jsx("option",{value:"three",children:"Three Phase"})]})]})]})]}),M&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Load Calculation"}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`,marginBottom:"1rem"},children:[s.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:w.labelText},children:[s.jsx("strong",{style:{color:w.cardText},children:"Connected Load:"})," ",oe.connectedLoad.toFixed(1)," kW"]}),s.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:w.labelText},children:[s.jsxs("strong",{style:{color:w.cardText},children:["Demand Load (",F,"%):"]})," ",oe.demandLoad.toFixed(1)," kW"]}),s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText},children:[s.jsxs("strong",{style:{color:w.cardText},children:["With Future Expansion (",O,"%):"]})," ",oe.futureLoad.toFixed(1)," kW"]})]}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Calculated Amperage"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:oe.amperage.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"Amperes"})]})]}),s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Recommended Service"}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Service Size"}),s.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[oe.recommendedService,"A"]})]}),s.jsx("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center",border:`1px solid ${w.cardBorder}`},children:s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText},children:["@ ",ue,"V ",k==="single"?"Single":"Three"," Phase"]})})]})]}),s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Commercial Service Considerations:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Include demand factors per NEC 220.40 and Article 220 Part IV"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider future expansion (typically 20-30% spare capacity)"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Account for motor loads, HVAC, and large equipment"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Review utility requirements and available fault current"}),s.jsx("li",{children:"Consider separate services for different occupancies"})]})]})]})})]}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`,fontSize:"0.8125rem",color:w.labelText,marginTop:"1rem"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:w.cardText},children:"NEC Article 230 - Services and Service Equipment:"}),"220.82: Dwelling unit optional calculation  230.42: Minimum conductor size  230.79: Disconnecting means rating  230.90: Overload protection"]})]})}),sB=({gecData:r,setGecData:e,colors:t})=>{const n={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}},o=(()=>{if(!r.serviceSize)return null;const l=r.serviceSize;let u="";const h=["14","12","10","8","6","4","3","2","1"],d=["1/0","2/0","3/0","4/0"],g=parseInt(l);return h.includes(l)?parseInt(l)>=2?u="2 or smaller":l==="1"&&(u="1 or 1/0"):d.includes(l)?l==="1/0"?u="1 or 1/0":l==="2/0"||l==="3/0"?u="2/0 or 3/0":l==="4/0"&&(u="4/0 to 350"):isNaN(g)||(g>=250&&g<=350?u="4/0 to 350":g>=400&&g<=600?u="400 to 600":g>=650&&g<=1100?u="650 to 1100":g>1100&&(u="over 1100")),{serviceSize:l,category:u,gecSize:n[r.conductorMaterial][u]||"N/A"}})();return s.jsxs("div",{className:ys.container,children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Service Conductor",s.jsx("br",{})," Size"]}),s.jsxs("select",{value:r.serviceSize,onChange:l=>e(u=>({...u,serviceSize:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"",children:"Select Size"}),s.jsx("option",{value:"8",children:"8 AWG"}),s.jsx("option",{value:"6",children:"6 AWG"}),s.jsx("option",{value:"4",children:"4 AWG"}),s.jsx("option",{value:"2",children:"2 AWG"}),s.jsx("option",{value:"1",children:"1 AWG"}),s.jsx("option",{value:"1/0",children:"1/0 AWG"}),s.jsx("option",{value:"2/0",children:"2/0 AWG"}),s.jsx("option",{value:"3/0",children:"3/0 AWG"}),s.jsx("option",{value:"4/0",children:"4/0 AWG"}),s.jsx("option",{value:"250",children:"250 kcmil"}),s.jsx("option",{value:"350",children:"350 kcmil"}),s.jsx("option",{value:"500",children:"500 kcmil"}),s.jsx("option",{value:"750",children:"750 kcmil"}),s.jsx("option",{value:"1000",children:"1000 kcmil"}),s.jsx("option",{value:"1500",children:"1500 kcmil"})]}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Largest ungrounded service conductor"})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["GEC ",s.jsx("br",{}),"Material"]}),s.jsxs("select",{value:r.conductorMaterial,onChange:l=>e(u=>({...u,conductorMaterial:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"copper",children:"Copper"}),s.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]}),o&&o.gecSize!=="N/A"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Grounding Electrode Conductor"}),s.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[o.gecSize," AWG"]}),s.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Per NEC Table 250.66"}),s.jsxs("div",{children:["Service conductor: ",o.serviceSize," AWG ",r.conductorMaterial]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Important Notes:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"GEC to rod/pipe/plate need not be larger than 6 AWG copper"}),s.jsx("li",{children:"GEC to concrete-encased electrode need not be larger than 4 AWG copper"}),s.jsx("li",{children:"Must be continuous without splices (except as permitted)"})]})]})]})]})},aB=({egcData:r,setEgcData:e,colors:t})=>{const n={copper:{15:"14",20:"12",30:"10",40:"10",60:"10",100:"8",200:"6",300:"4",400:"3",500:"2",600:"1",800:"1/0",1e3:"2/0",1200:"3/0",1600:"4/0",2e3:"250",2500:"350",3e3:"400",4e3:"500",5e3:"700",6e3:"800"},aluminum:{15:"12",20:"10",30:"8",40:"8",60:"8",100:"6",200:"4",300:"2",400:"1",500:"1/0",600:"2/0",800:"3/0",1e3:"4/0",1200:"250",1600:"350",2e3:"400",2500:"500",3e3:"600",4e3:"750",5e3:"1000",6e3:"1200"}},o=(()=>{const l=parseInt(r.ocpdRating);if(!l)return null;const u=Object.keys(n[r.conductorMaterial]).map(Number).sort((d,g)=>d-g),h=u.find(d=>d>=l)||u[u.length-1];return{ocpdRating:l,applicableRating:h,egcSize:n[r.conductorMaterial][h]}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Overcurrent Device Rating (A)"}),s.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:r.ocpdRating,onChange:l=>{const u=l.target.value.replace(/[^0-9]/g,"");e(h=>({...h,ocpdRating:u}))},placeholder:"Enter rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Circuit breaker or fuse rating"})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["EGC ",s.jsx("br",{})," Material"]}),s.jsxs("select",{value:r.conductorMaterial,onChange:l=>e(u=>({...u,conductorMaterial:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"copper",children:"Copper"}),s.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]}),o&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Equipment Grounding Conductor"}),s.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[o.egcSize," AWG"]}),s.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Per NEC Table 250.122"}),s.jsxs("div",{children:["OCPD rating: ",o.ocpdRating,"A"]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Important Notes:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Increase proportionally if conductors upsized for voltage drop"}),s.jsx("li",{children:"Size per each raceway if conductors run in parallel"}),s.jsx("li",{children:"Based on rating of OCPD ahead of circuit"})]})]})]})]})},lB=({bondingData:r,setBondingData:e,colors:t})=>{const n={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}},o=(()=>{if(!r.serviceSize)return null;const l=r.serviceSize;let u="";const h=["14","12","10","8","6","4","3","2","1"],d=["1/0","2/0","3/0","4/0"],g=parseInt(l);return h.includes(l)?parseInt(l)>=2?u="2 or smaller":l==="1"&&(u="1 or 1/0"):d.includes(l)?l==="1/0"?u="1 or 1/0":l==="2/0"||l==="3/0"?u="2/0 or 3/0":l==="4/0"&&(u="4/0 to 350"):isNaN(g)||(g>=250&&g<=350?u="4/0 to 350":g>=400&&g<=600?u="400 to 600":g>=650&&g<=1100?u="650 to 1100":g>1100&&(u="over 1100")),{serviceSize:l,jumperSize:n[r.conductorMaterial][u]||"N/A",jumperType:r.jumperType}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Bonding Jumper Type"}),s.jsxs("select",{value:r.jumperType,onChange:l=>e(u=>({...u,jumperType:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"main",children:"Main Bonding Jumper (Service)"}),s.jsx("option",{value:"system",children:"System Bonding Jumper (Separately Derived)"})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Conductor Size"}),s.jsxs("select",{value:r.serviceSize,onChange:l=>e(u=>({...u,serviceSize:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"",children:"Select Size"}),s.jsx("option",{value:"8",children:"8 AWG"}),s.jsx("option",{value:"6",children:"6 AWG"}),s.jsx("option",{value:"4",children:"4 AWG"}),s.jsx("option",{value:"2",children:"2 AWG"}),s.jsx("option",{value:"1",children:"1 AWG"}),s.jsx("option",{value:"1/0",children:"1/0 AWG"}),s.jsx("option",{value:"2/0",children:"2/0 AWG"}),s.jsx("option",{value:"3/0",children:"3/0 AWG"}),s.jsx("option",{value:"4/0",children:"4/0 AWG"}),s.jsx("option",{value:"250",children:"250 kcmil"}),s.jsx("option",{value:"500",children:"500 kcmil"}),s.jsx("option",{value:"750",children:"750 kcmil"}),s.jsx("option",{value:"1000",children:"1000 kcmil"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Material"}),s.jsxs("select",{value:r.conductorMaterial,onChange:l=>e(u=>({...u,conductorMaterial:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"copper",children:"Copper"}),s.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]})]}),o&&o.jumperSize!=="N/A"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:[r.jumperType==="main"?"Main":"System"," Bonding Jumper"]}),s.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[o.jumperSize," AWG"]}),s.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:["Per NEC ",r.jumperType==="main"?"250.28(D)":"250.30(A)(1)"]}),s.jsxs("div",{children:["Conductor size: ",o.serviceSize," AWG ",r.conductorMaterial]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:[r.jumperType==="main"?"Main":"System"," Bonding Jumper Requirements:"]}),s.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:r.jumperType==="main"?s.jsxs(s.Fragment,{children:[s.jsx("li",{children:"Connects grounded conductor to equipment grounding conductor"}),s.jsx("li",{children:"Sized per Table 250.66 based on service conductor"}),s.jsx("li",{children:"Can be wire, bus, screw, or similar conductor"})]}):s.jsxs(s.Fragment,{children:[s.jsx("li",{children:"Required for separately derived systems"}),s.jsx("li",{children:"Connects grounded to equipment grounding conductor"}),s.jsx("li",{children:"Installed at same location as GEC connection"})]})})]})]})]})},cB=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=me.useState("gec"),[o,l]=me.useState({serviceSize:"",conductorMaterial:"copper"}),[u,h]=me.useState({ocpdRating:"",conductorMaterial:"copper"}),[d,g]=me.useState({serviceSize:"",conductorMaterial:"copper",jumperType:"main"}),b=me.useMemo(()=>({cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"}),[r]);return me.useImperativeHandle(t,()=>({exportPDF:()=>{let S;if(n==="gec"){if(!o.serviceSize){alert("Please select a service conductor size before exporting");return}const v={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}};let N="";const E=o.serviceSize,L=["14","12","10","8","6","4","3","2","1"],C=["1/0","2/0","3/0","4/0"],M=parseInt(E);L.includes(E)?parseInt(E)>=2?N="2 or smaller":E==="1"&&(N="1 or 1/0"):C.includes(E)?E==="1/0"?N="1 or 1/0":E==="2/0"||E==="3/0"?N="2/0 or 3/0":E==="4/0"&&(N="4/0 to 350"):isNaN(M)||(M>=250&&M<=350?N="4/0 to 350":M>=400&&M<=600?N="400 to 600":M>=650&&M<=1100?N="650 to 1100":M>1100&&(N="over 1100"));const $=v[o.conductorMaterial][N];S={calculatorName:"Grounding & Bonding - Grounding Electrode Conductor",inputs:{serviceConductorSize:`${o.serviceSize} AWG`,material:o.conductorMaterial.charAt(0).toUpperCase()+o.conductorMaterial.slice(1)},results:{groundingElectrodeConductor:`${$} AWG ${o.conductorMaterial}`},additionalInfo:{note1:"GEC to rod/pipe/plate need not be larger than 6 AWG copper",note2:"GEC to concrete-encased electrode need not be larger than 4 AWG copper",note3:"Must be continuous without splices (except as permitted)"},necReferences:["NEC Table 250.66 - Grounding Electrode Conductor for Alternating-Current Systems","NEC 250.64 - Grounding Electrode Conductor Installation","NEC 250.52 - Grounding Electrodes"]}}else if(n==="egc"){if(!u.ocpdRating){alert("Please enter an overcurrent device rating before exporting");return}const v={copper:{15:"14",20:"12",30:"10",40:"10",60:"10",100:"8",200:"6",300:"4",400:"3",500:"2",600:"1",800:"1/0",1e3:"2/0",1200:"3/0",1600:"4/0",2e3:"250",2500:"350",3e3:"400",4e3:"500",5e3:"700",6e3:"800"},aluminum:{15:"12",20:"10",30:"8",40:"8",60:"8",100:"6",200:"4",300:"2",400:"1",500:"1/0",600:"2/0",800:"3/0",1e3:"4/0",1200:"250",1600:"350",2e3:"400",2500:"500",3e3:"600",4e3:"750",5e3:"1000",6e3:"1200"}},N=parseInt(u.ocpdRating),E=Object.keys(v[u.conductorMaterial]).map(Number).sort((M,$)=>M-$),L=E.find(M=>M>=N)||E[E.length-1],C=v[u.conductorMaterial][L];S={calculatorName:"Grounding & Bonding - Equipment Grounding Conductor",inputs:{overcurrentDeviceRating:`${N} Amps`,material:u.conductorMaterial.charAt(0).toUpperCase()+u.conductorMaterial.slice(1)},results:{equipmentGroundingConductor:`${C} AWG ${u.conductorMaterial}`,basedOnOCPDRating:`${L} Amps`},additionalInfo:{note1:"Increase proportionally if conductors upsized for voltage drop",note2:"Size per each raceway if conductors run in parallel",note3:"Based on rating of OCPD ahead of circuit"},necReferences:["NEC Table 250.122 - Minimum Size Equipment Grounding Conductors for Grounding Raceway and Equipment","NEC 250.122(B) - Increased in Size","NEC 250.122(F) - Conductors in Parallel"]}}else if(n==="bonding"){if(!d.serviceSize){alert("Please select a conductor size before exporting");return}const v={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}};let N="";const E=d.serviceSize,L=["14","12","10","8","6","4","3","2","1"],C=["1/0","2/0","3/0","4/0"],M=parseInt(E);L.includes(E)?parseInt(E)>=2?N="2 or smaller":E==="1"&&(N="1 or 1/0"):C.includes(E)?E==="1/0"?N="1 or 1/0":E==="2/0"||E==="3/0"?N="2/0 or 3/0":E==="4/0"&&(N="4/0 to 350"):isNaN(M)||(M>=250&&M<=350?N="4/0 to 350":M>=400&&M<=600?N="400 to 600":M>=650&&M<=1100?N="650 to 1100":M>1100&&(N="over 1100"));const $=v[d.conductorMaterial][N],F=d.jumperType==="main"?"Main Bonding Jumper":"System Bonding Jumper";S={calculatorName:`Grounding & Bonding - ${F}`,inputs:{jumperType:F,conductorSize:`${d.serviceSize} AWG`,material:d.conductorMaterial.charAt(0).toUpperCase()+d.conductorMaterial.slice(1)},results:{bondingJumperSize:`${$} AWG ${d.conductorMaterial}`},additionalInfo:d.jumperType==="main"?{purpose:"Connects grounded conductor to equipment grounding conductor",sizing:"Sized per Table 250.66 based on service conductor",forms:"Can be wire, bus, screw, or similar conductor"}:{purpose:"Required for separately derived systems",connection:"Connects grounded to equipment grounding conductor",location:"Installed at same location as GEC connection"},necReferences:d.jumperType==="main"?["NEC 250.28 - Main Bonding Jumper and System Bonding Jumper","NEC 250.28(D) - Size","NEC Table 250.66 - Sizing Reference"]:["NEC 250.30 - Grounding Separately Derived Alternating-Current Systems","NEC 250.30(A)(1) - System Bonding Jumper","NEC Table 250.66 - Sizing Reference"]}}cn(S)}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"gec",label:"Grounding Electrode"},{id:"egc",label:"Equipment Grounding"},{id:"bonding",label:"Bonding Jumpers"}].map(S=>s.jsx("button",{className:ys.btn,onClick:()=>i(S.id),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.625rem 1rem",background:n===S.id?"#3b82f6":b.sectionBg,color:n===S.id?"white":b.labelText,border:`1px solid ${n===S.id?"#3b82f6":b.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:S.label},S.id))}),s.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[n==="gec"&&s.jsx(sB,{gecData:o,setGecData:l,colors:b}),n==="egc"&&s.jsx(aB,{egcData:u,setEgcData:h,colors:b}),n==="bonding"&&s.jsx(lB,{bondingData:d,setBondingData:g,colors:b})]})]})}),uB=({offsetData:r,setOffsetData:e,colors:t})=>{const n={10:{distance:6,shrink:.01},"22.5":{distance:2.6,shrink:.06},30:{distance:2,shrink:.25},45:{distance:1.4,shrink:.41},60:{distance:1.2,shrink:.58}},o=(()=>{if(!r.obstacleHeight)return null;const l=parseFloat(r.obstacleHeight),u=n[r.bendAngle];return{distanceBetweenBends:(l*u.distance).toFixed(2),shrinkage:(l*u.shrink).toFixed(2),angle:r.bendAngle}})();return s.jsxs("div",{className:ys.menu,children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Obstacle Height (inches)"}),s.jsx("input",{type:"number",value:r.obstacleHeight,onChange:l=>e(u=>({...u,obstacleHeight:l.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Height to clear obstacle"})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Bend Angle ",s.jsx("br",{}),"  ",s.jsx("br",{})]}),s.jsxs("select",{value:r.bendAngle,onChange:l=>e(u=>({...u,bendAngle:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"10",children:"10"}),s.jsx("option",{value:"22.5",children:"22.5"}),s.jsx("option",{value:"30",children:"30"}),s.jsx("option",{value:"45",children:"45"}),s.jsx("option",{value:"60",children:"60"})]}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Most common: 30 or 45"})]})]}),o&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Distance Between Bends"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[o.distanceBetweenBends,'"']})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Shrinkage"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.shrinkage,'"']})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"How to Make the Bend"}),s.jsxs("div",{children:["Mark first bend, measure ",o.distanceBetweenBends,'" from center of first bend, then make second bend at ',o.angle,"."]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Offset Bend Tips:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"30 bends are most common for typical offsets"}),s.jsx("li",{children:"45 bends create shorter, steeper offsets"}),s.jsx("li",{children:"Always account for shrinkage in measurements"})]})]})]})]})},dB=({stubUpData:r,setStubUpData:e,colors:t})=>{const n={"1/2":5,"3/4":6,1:8,"1-1/4":11,"1-1/2":14,2:16,"2-1/2":21,3:26,"3-1/2":30,4:34},o=(()=>{if(!r.stubHeight)return null;const l=parseFloat(r.stubHeight),u=n[r.conduitSize];return{markDistance:(l-u).toFixed(2),deduction:u,stubHeight:l.toFixed(2)}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Desired Stub Height (inches)"}),s.jsx("input",{type:"number",value:r.stubHeight,onChange:l=>e(u=>({...u,stubHeight:l.target.value})),placeholder:"Enter stub height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Back of 90 to floor"})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Conduit Size ",s.jsx("br",{}),"  ",s.jsx("br",{})]}),s.jsx("select",{value:r.conduitSize,onChange:l=>e(u=>({...u,conduitSize:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.keys(n).map(l=>s.jsxs("option",{value:l,children:[l,'"']},l))})]})]}),o&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Mark At"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[o.markDistance,'"']})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Deduction"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.deduction,'"']})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Conduit Size"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[r.conduitSize,'"']})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"How to Bend"}),s.jsxs("div",{children:["Measure from end of conduit, mark at ",o.markDistance,'", line up mark with arrow on bender, make 90 bend.']})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Stub-Up Tips:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Deduction accounts for the radius of the bend"}),s.jsx("li",{children:"Larger conduit = larger deduction"}),s.jsx("li",{children:"Always check your bender - deductions vary by manufacturer"})]})]})]})]})},hB=({saddleData:r,setSaddleData:e,colors:t})=>{const i=(()=>{if(!r.obstacleHeight)return null;const o=parseFloat(r.obstacleHeight),l=parseFloat(r.obstacleWidth)||o*4,u=o*.3;return{centerBend:45,outerBends:22.5,distanceToOuter:(l/2).toFixed(2),shrinkage:u.toFixed(2),obstacleHeight:o.toFixed(2)}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Obstacle Height (inches)"}),s.jsx("input",{type:"number",value:r.obstacleHeight,onChange:o=>e(l=>({...l,obstacleHeight:o.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Width ",s.jsx("br",{})," (Optional)"]}),s.jsx("input",{type:"number",value:r.obstacleWidth,onChange:o=>e(l=>({...l,obstacleWidth:o.target.value})),placeholder:"Auto: 4x height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Center Bend"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[i.centerBend,""]})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Outer Bends"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[i.outerBends,""]})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Distance to Outer"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[i.distanceToOuter,'"']})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Bending Sequence"}),s.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Mark center of obstacle on conduit"}),s.jsx("li",{children:"Make 45 center bend at mark"}),s.jsxs("li",{children:["Measure ",i.distanceToOuter,'" from center each direction']}),s.jsx("li",{children:"Make 22.5 bends on each side (opposite direction)"})]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"3-Point Saddle Tips:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Center bend goes up, outer bends go down"}),s.jsx("li",{children:"Most common for going over pipes or other conduits"}),s.jsx("li",{children:"Mark all three bend locations before starting"})]})]})]})]})},fB=({fourPointData:r,setFourPointData:e,colors:t})=>{const i=(()=>{if(!r.obstacleHeight||!r.obstacleWidth)return null;const o=parseFloat(r.obstacleHeight),l=parseFloat(r.obstacleWidth),u=l/2,h=l/4,d=o*.15;return{bendAngle:22.5,distanceToOuter:u.toFixed(2),innerSpacing:h.toFixed(2),shrinkage:d.toFixed(2)}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Height ",s.jsx("br",{})," (inches)"]}),s.jsx("input",{type:"number",value:r.obstacleHeight,onChange:o=>e(l=>({...l,obstacleHeight:o.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Width ",s.jsx("br",{})," (inches)"]}),s.jsx("input",{type:"number",value:r.obstacleWidth,onChange:o=>e(l=>({...l,obstacleWidth:o.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"All Bends"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[i.bendAngle,""]})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Outer Distance"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[i.distanceToOuter,'"']})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Inner Spacing"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[i.innerSpacing,'"']})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Bending Sequence"}),s.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Mark center of obstacle on conduit"}),s.jsxs("li",{children:["Measure ",i.distanceToOuter,'" from center (outer bends)']}),s.jsxs("li",{children:["Measure ",i.innerSpacing,'" from center (inner bends)']}),s.jsx("li",{children:"Make all four 22.5 bends: outer up, inner down"})]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"4-Point Saddle Tips:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Used for larger obstacles where 3-point won't work"}),s.jsx("li",{children:"Outer bends go up, inner bends go down"}),s.jsx("li",{children:"Creates a flatter top for better clearance"})]})]})]})]})},pB=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=me.useState("offset"),[o,l]=me.useState({obstacleHeight:"",bendAngle:"30"}),[u,h]=me.useState({stubHeight:"",conduitSize:"3/4"}),[d,g]=me.useState({obstacleHeight:"",obstacleWidth:""}),[b,S]=me.useState({obstacleHeight:"",obstacleWidth:""}),v={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};me.useImperativeHandle(t,()=>({exportPDF:()=>{let E;if(n==="offset"){if(!o.obstacleHeight){alert("Please enter obstacle height for Offset Bends before exporting");return}const L={10:{distance:6,shrink:.01},"22.5":{distance:2.6,shrink:.06},30:{distance:2,shrink:.25},45:{distance:1.4,shrink:.41},60:{distance:1.2,shrink:.58}},C=parseFloat(o.obstacleHeight),M=L[o.bendAngle],$=(C*M.distance).toFixed(2),F=(C*M.shrink).toFixed(2);E={calculatorName:"Conduit Bending - Offset Bends",inputs:{obstacleHeight:`${o.obstacleHeight} inches`,bendAngle:`${o.bendAngle}`},results:{distanceBetweenBends:`${$} inches`,shrinkage:`${F} inches`},additionalInfo:{instructions:`Mark first bend, measure ${$}" from center of first bend, then make second bend at ${o.bendAngle}`,multiplierUsed:`Distance: ${M.distance}, Shrink: ${M.shrink}`},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","30 bends are most common for typical offsets","45 bends create shorter, steeper offsets"]}}else if(n==="stubup"){if(!u.stubHeight){alert("Please enter stub height for 90 Stub-Up before exporting");return}const L={"1/2":5,"3/4":6,1:8,"1-1/4":11,"1-1/2":14,2:16,"2-1/2":21,3:26,"3-1/2":30,4:34},C=parseFloat(u.stubHeight),M=L[u.conduitSize],$=(C-M).toFixed(2);E={calculatorName:"Conduit Bending - 90 Stub-Up",inputs:{desiredStubHeight:`${u.stubHeight} inches`,conduitSize:`${u.conduitSize}"`},results:{markAt:`${$} inches`,deduction:`${M} inches`},additionalInfo:{instructions:`Measure from end of conduit, mark at ${$}", line up mark with arrow on bender, make 90 bend`,note:"Deduction accounts for the radius of the bend - larger conduit requires larger deduction"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Always check your bender - deductions vary by manufacturer"]}}else if(n==="saddle"){if(!d.obstacleHeight){alert("Please enter obstacle height for 3-Point Saddle before exporting");return}const L=parseFloat(d.obstacleHeight),C=parseFloat(d.obstacleWidth)||L*4,M=(L*.3).toFixed(2),$=(C/2).toFixed(2);E={calculatorName:"Conduit Bending - 3-Point Saddle",inputs:{obstacleHeight:`${d.obstacleHeight} inches`,obstacleWidth:d.obstacleWidth?`${d.obstacleWidth} inches`:`${C} inches (Auto: 4x height)`},results:{centerBend:"45",outerBends:"22.5",distanceToOuter:`${$} inches`,shrinkage:`${M} inches`},additionalInfo:{bendingSequence:`1) Mark center of obstacle on conduit 2) Make 45 center bend at mark 3) Measure ${$}" from center each direction 4) Make 22.5 bends on each side (opposite direction)`,tip:"Center bend goes up, outer bends go down"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Most common for going over pipes or other conduits","Mark all three bend locations before starting"]}}else if(n==="fourpoint"){if(!b.obstacleHeight||!b.obstacleWidth){alert("Please enter both obstacle height and width for 4-Point Saddle before exporting");return}const L=parseFloat(b.obstacleHeight),C=parseFloat(b.obstacleWidth),M=(C/2).toFixed(2),$=(C/4).toFixed(2),F=(L*.15).toFixed(2);E={calculatorName:"Conduit Bending - 4-Point Saddle",inputs:{obstacleHeight:`${b.obstacleHeight} inches`,obstacleWidth:`${b.obstacleWidth} inches`},results:{allBends:"22.5",outerDistance:`${M} inches`,innerSpacing:`${$} inches`,shrinkage:`${F} inches`},additionalInfo:{bendingSequence:`1) Mark center of obstacle on conduit 2) Measure ${M}" from center (outer bends) 3) Measure ${$}" from center (inner bends) 4) Make all four 22.5 bends: outer up, inner down`,tip:"Used for larger obstacles where 3-point saddle will not work"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Creates a flatter top for better clearance over wide obstacles"]}}cn(E)}}));const N={offset:s.jsx(uB,{offsetData:o,setOffsetData:l,colors:v}),stubup:s.jsx(dB,{stubUpData:u,setStubUpData:h,colors:v}),saddle:s.jsx(hB,{saddleData:d,setSaddleData:g,colors:v}),fourpoint:s.jsx(fB,{fourPointData:b,setFourPointData:S,colors:v})};return s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"offset",label:"Offset Bends"},{id:"stubup",label:"90 Stub-Up"},{id:"saddle",label:"3-Point Saddle"},{id:"fourpoint",label:"4-Point Saddle"}].map(E=>s.jsx("button",{className:ys.btn,onClick:()=>i(E.id),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.625rem 1rem",background:n===E.id?"#3b82f6":v.sectionBg,color:n===E.id?"white":v.labelText,border:`1px solid ${n===E.id?"#3b82f6":v.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:E.label},E.id))}),s.jsx("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:N[n]})]})}),mB=({lumensData:r,setLumensData:e,colors:t})=>{const n={living:10,kitchen:50,bathroom:70,bedroom:10,office:50,workshop:75,garage:50,hallway:5,dining:30,laundry:50},i={living:"Living Room (10 fc)",kitchen:"Kitchen (50 fc)",bathroom:"Bathroom (70 fc)",bedroom:"Bedroom (10 fc)",office:"Office/Study (50 fc)",workshop:"Workshop (75 fc)",garage:"Garage (50 fc)",hallway:"Hallway (5 fc)",dining:"Dining Room (30 fc)",laundry:"Laundry Room (50 fc)"},l=(()=>{if(!r.roomLength||!r.roomWidth)return null;const u=parseFloat(r.roomLength),h=parseFloat(r.roomWidth),d=u*h,g=n[r.roomType],b=g*d;let S=null;if(r.lumensPerFixture){const v=parseFloat(r.lumensPerFixture);S=Math.ceil(b/v)}return{area:d.toFixed(1),footCandles:g,totalLumens:b.toFixed(0),fixturesNeeded:S}})();return s.jsxs("div",{className:ys.menu,children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),s.jsx("input",{type:"number",value:r.roomLength,onChange:u=>e(h=>({...h,roomLength:u.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),s.jsx("input",{type:"number",value:r.roomWidth,onChange:u=>e(h=>({...h,roomWidth:u.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Room Type ",s.jsx("br",{}),"  ",s.jsx("br",{})]}),s.jsx("select",{value:r.roomType,onChange:u=>e(h=>({...h,roomType:u.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.entries(i).map(([u,h])=>s.jsx("option",{value:u,children:h},u))}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"fc = foot-candles"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Lumens per Fixture (Optional)"}),s.jsx("input",{type:"number",value:r.lumensPerFixture,onChange:u=>e(h=>({...h,lumensPerFixture:u.target.value})),placeholder:"e.g., 800",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"To calculate fixture count"})]})]}),l&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:l.fixturesNeeded?"repeat(3, 1fr)":"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Room Area"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:l.area}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"sq ft"})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Lumens Needed"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:l.totalLumens}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"lumens"})]}),l.fixturesNeeded&&s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Fixtures Needed"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:l.fixturesNeeded}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"fixtures"})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Lighting Requirements"}),s.jsxs("div",{children:["Recommended level: ",l.footCandles," foot-candles"]}),l.fixturesNeeded&&s.jsxs("div",{children:["Using ",r.lumensPerFixture," lumens per fixture"]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Lighting Tips:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"LED bulbs typically produce 60-100 lumens per watt"}),s.jsx("li",{children:"Layer lighting: combine ambient, task, and accent lighting"}),s.jsx("li",{children:"Dark wall colors absorb light; increase lumens by 10-20%"})]})]})]})]})},gB=({spacingData:r,setSpacingData:e,colors:t})=>{const n={recessed:1.5,pendant:1,track:2,surface:1.5},o=(()=>{if(!r.roomLength||!r.roomWidth)return null;const l=parseFloat(r.roomLength),u=parseFloat(r.roomWidth),h=parseFloat(r.ceilingHeight),d=n[r.fixtureType],g=h*d,b=r.fixtureType==="recessed"?6:g*.8,S=Math.max(2,Math.round(l/b)),v=Math.max(2,Math.round(u/b)),N=S*v,E=l/S,L=u/v,C=E/2,M=L/2;return{maxSpacing:g.toFixed(1),fixturesLength:S,fixturesWidth:v,totalFixtures:N,actualSpacingLength:E.toFixed(1),actualSpacingWidth:L.toFixed(1),wallOffsetLength:C.toFixed(1),wallOffsetWidth:M.toFixed(1)}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),s.jsx("input",{type:"number",value:r.roomLength,onChange:l=>e(u=>({...u,roomLength:l.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),s.jsx("input",{type:"number",value:r.roomWidth,onChange:l=>e(u=>({...u,roomWidth:l.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Ceiling Height (feet)"}),s.jsx("input",{type:"number",value:r.ceilingHeight,onChange:l=>e(u=>({...u,ceilingHeight:l.target.value})),placeholder:"8",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Fixture Type"}),s.jsxs("select",{value:r.fixtureType,onChange:l=>e(u=>({...u,fixtureType:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"recessed",children:"Recessed Can (1.5:1 ratio)"}),s.jsx("option",{value:"pendant",children:"Pendant (1:1 ratio)"}),s.jsx("option",{value:"track",children:"Track Light (2:1 ratio)"}),s.jsx("option",{value:"surface",children:"Surface Mount (1.5:1 ratio)"})]})]})]}),o&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Max Spacing"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.maxSpacing}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"feet"})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Fixtures"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.totalFixtures}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"fixtures"})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Layout"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.fixturesLength,"",o.fixturesWidth]}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"grid"})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Spacing Results"}),s.jsxs("div",{children:["Length spacing: ",o.actualSpacingLength," ft"]}),s.jsxs("div",{children:["Width spacing: ",o.actualSpacingWidth," ft"]}),s.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.8125rem"},children:["Start ",o.wallOffsetLength," ft from walls (length) and ",o.wallOffsetWidth," ft from walls (width)"]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Spacing Guidelines:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Industry standard: 4-6 feet spacing for recessed cans"}),s.jsx("li",{children:"Spacing ratio = max distance between fixtures  ceiling height"}),s.jsx("li",{children:"Space fixtures evenly with proper wall offsets for uniform coverage"})]})]})]})]})},yB=({wattsData:r,setWattsData:e,colors:t})=>{const n={office:1,retail:1.5,warehouse:.5,school:1.2,hospital:1,hotel:1,restaurant:1.3,residential:1},i={office:"Office Building (1.0 W/sq ft)",retail:"Retail Store (1.5 W/sq ft)",warehouse:"Warehouse (0.5 W/sq ft)",school:"School (1.2 W/sq ft)",hospital:"Hospital (1.0 W/sq ft)",hotel:"Hotel (1.0 W/sq ft)",restaurant:"Restaurant (1.3 W/sq ft)",residential:"Residential (1.0 W/sq ft)"},l=(()=>{if(!r.area)return null;const u=parseFloat(r.area),h=n[r.buildingType],d=u*h,g=d,b=g/120,S=Math.ceil(b/16);return{wattsPerSqFt:h,totalWatts:d.toFixed(0),totalVA:g.toFixed(0),amperage:b.toFixed(1),circuits:S}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Area (square feet)"}),s.jsx("input",{type:"number",value:r.area,onChange:u=>e(h=>({...h,area:u.target.value})),placeholder:"Enter area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Building Type"}),s.jsx("select",{value:r.buildingType,onChange:u=>e(h=>({...h,buildingType:u.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.entries(i).map(([u,h])=>s.jsx("option",{value:u,children:h},u))}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Per NEC Table 220.12"})]})]}),l&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Unit Load"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:l.wattsPerSqFt}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"W/sq ft"})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Load"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:l.totalWatts}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"watts"})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:l.circuits}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"needed"})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Lighting Load Calculation"}),s.jsxs("div",{children:["Total VA: ",l.totalVA," VA"]}),s.jsxs("div",{children:["Current @ 120V: ",l.amperage," A"]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Requirements:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"NEC 220.12 specifies unit lighting loads by occupancy"}),s.jsx("li",{children:"Calculate using building area, not just lit area"}),s.jsx("li",{children:"Continuous loads require 125% conductor/OCPD sizing"})]})]})]})]})},xB=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=me.useState("lumens"),[o,l]=me.useState({roomLength:"",roomWidth:"",roomType:"living",lumensPerFixture:""}),[u,h]=me.useState({roomLength:"",roomWidth:"",ceilingHeight:"8",fixtureType:"recessed"}),[d,g]=me.useState({area:"",buildingType:"office"}),b={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};me.useImperativeHandle(t,()=>({exportPDF:()=>{let v;if(n==="lumens"){if(!o.roomLength||!o.roomWidth){alert("Please enter room dimensions before exporting");return}const N={living:"Living Room",kitchen:"Kitchen",bathroom:"Bathroom",bedroom:"Bedroom",office:"Office/Study",workshop:"Workshop",garage:"Garage",hallway:"Hallway",dining:"Dining Room",laundry:"Laundry Room"},E={living:10,kitchen:50,bathroom:70,bedroom:10,office:50,workshop:75,garage:50,hallway:5,dining:30,laundry:50},L=parseFloat(o.roomLength),C=parseFloat(o.roomWidth),M=(L*C).toFixed(1),$=E[o.roomType],F=($*M).toFixed(0),ne={roomLength:`${o.roomLength} feet`,roomWidth:`${o.roomWidth} feet`,roomType:`${N[o.roomType]} (${$} fc)`},ue={roomArea:`${M} sq ft`,totalLumensNeeded:`${F} lumens`};if(o.lumensPerFixture){const V=parseFloat(o.lumensPerFixture),k=Math.ceil(parseFloat(F)/V);ne.lumensPerFixture=`${o.lumensPerFixture} lumens`,ue.fixturesNeeded=`${k} fixtures`}v={calculatorName:"Lighting Calculations - Room Lumens",inputs:ne,results:ue,additionalInfo:{calculation:`Area (${M} sq ft)  Recommended Level (${$} foot-candles) = ${F} lumens`,tip1:"LED bulbs typically produce 60-100 lumens per watt",tip2:"Layer lighting: combine ambient, task, and accent lighting",tip3:"Dark wall colors absorb light; increase lumens by 10-20%"},necReferences:["IES (Illuminating Engineering Society) recommended light levels","Foot-candles measure illuminance on a surface","1 foot-candle = 1 lumen per square foot"]}}else if(n==="spacing"){if(!u.roomLength||!u.roomWidth){alert("Please enter room dimensions before exporting");return}const N={recessed:"Recessed Can (1.5:1 ratio)",pendant:"Pendant (1:1 ratio)",track:"Track Light (2:1 ratio)",surface:"Surface Mount (1.5:1 ratio)"},E={recessed:1.5,pendant:1,track:2,surface:1.5},L=parseFloat(u.roomLength),C=parseFloat(u.roomWidth),M=parseFloat(u.ceilingHeight),$=E[u.fixtureType],F=(M*$).toFixed(1),ne=u.fixtureType==="recessed"?6:parseFloat(F)*.8,ue=Math.max(2,Math.round(L/ne)),V=Math.max(2,Math.round(C/ne)),k=ue*V,A=(L/ue).toFixed(1),O=(C/V).toFixed(1),I=(parseFloat(A)/2).toFixed(1),w=(parseFloat(O)/2).toFixed(1);v={calculatorName:"Lighting Calculations - Fixture Spacing",inputs:{roomLength:`${u.roomLength} feet`,roomWidth:`${u.roomWidth} feet`,ceilingHeight:`${u.ceilingHeight} feet`,fixtureType:N[u.fixtureType]},results:{maximumSpacing:`${F} feet`,totalFixtures:`${k} fixtures`,layoutGrid:`${ue}  ${V}`,lengthSpacing:`${A} feet`,widthSpacing:`${O} feet`},additionalInfo:{wallOffsets:`Start ${I} ft from walls (length) and ${w} ft from walls (width)`,spacingFormula:`Maximum spacing = Ceiling height (${M} ft)  Spacing ratio (${$}) = ${F} ft`,tip1:"Industry standard: 4-6 feet spacing for recessed cans",tip2:"Space fixtures evenly with proper wall offsets for uniform coverage"},necReferences:["Spacing ratio guidelines from IES Lighting Handbook","Recessed fixtures: 1.5:1 ratio (spacing to mounting height)","Pendant fixtures: 1:1 ratio for focused task lighting","Track lights: 2:1 ratio for accent lighting"]}}else if(n==="watts"){if(!d.area){alert("Please enter area before exporting");return}const N={office:"Office Building",retail:"Retail Store",warehouse:"Warehouse",school:"School",hospital:"Hospital",hotel:"Hotel",restaurant:"Restaurant",residential:"Residential"},E={office:1,retail:1.5,warehouse:.5,school:1.2,hospital:1,hotel:1,restaurant:1.3,residential:1},L=parseFloat(d.area),C=E[d.buildingType],M=(L*C).toFixed(0),$=M,F=(parseFloat($)/120).toFixed(1),ne=Math.ceil(parseFloat(F)/16);v={calculatorName:"Lighting Calculations - Watts per Square Foot",inputs:{area:`${d.area} square feet`,buildingType:`${N[d.buildingType]} (${C} W/sq ft)`},results:{unitLoad:`${C} W/sq ft`,totalLoad:`${M} watts`,totalVA:`${$} VA`,currentAt120V:`${F} Amps`,requiredCircuits:`${ne}  20A circuits`},additionalInfo:{calculation:`Area (${L} sq ft)  Unit Load (${C} W/sq ft) = ${M} watts`,circuitCalculation:`Total current (${F} A)  16A (80% of 20A) = ${ne} circuits needed`,note:"Continuous loads require 125% conductor/OCPD sizing"},necReferences:["NEC Table 220.12 - General Lighting Loads by Occupancy","NEC 210.19(A)(1) - Branch Circuit Ampacity","NEC 210.20(A) - Continuous and Noncontinuous Loads","Calculate using building area, not just lit area"]}}cn(v)}}));const S={lumens:s.jsx(mB,{lumensData:o,setLumensData:l,colors:b}),spacing:s.jsx(gB,{spacingData:u,setSpacingData:h,colors:b}),watts:s.jsx(yB,{wattsData:d,setWattsData:g,colors:b})};return s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"lumens",label:"Room Lumens"},{id:"spacing",label:"Fixture Spacing"},{id:"watts",label:"Watts/Sq Ft"}].map(v=>s.jsx("button",{className:ys.btn,onClick:()=>i(v.id),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.625rem 1rem",background:n===v.id?"#3b82f6":b.sectionBg,color:n===v.id?"white":b.labelText,border:`1px solid ${n===v.id?"#3b82f6":b.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:v.label},v.id))}),s.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:S[n]})]})}),vB=({generalData:r,setGeneralData:e,colors:t})=>{const i=(()=>{if(!r.roomLength||!r.roomWidth)return null;const o=parseFloat(r.roomLength),l=parseFloat(r.roomWidth),u=(o+l)*2,h=Math.max(2,Math.ceil(u/12));let d=0;if(r.hasCounters){const v=parseFloat(r.counterLength)||0;d=Math.max(2,Math.ceil(v/2))}const g=h+d,b=Math.ceil(g/8),S=Math.ceil(g/10);return{perimeter:u.toFixed(1),wallReceptacles:h,counterReceptacles:d,totalReceptacles:g,circuits15A:b,circuits20A:S}})();return s.jsxs("div",{className:ys.menu,children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),s.jsx("input",{type:"number",value:r.roomLength,onChange:o=>e(l=>({...l,roomLength:o.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),s.jsx("input",{type:"number",value:r.roomWidth,onChange:o=>e(l=>({...l,roomWidth:o.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsx("div",{style:{gridColumn:"1 / -1"},children:s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:r.hasCounters,onChange:o=>e(l=>({...l,hasCounters:o.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Room has countertops/islands"]})}),r.hasCounters&&s.jsxs("div",{style:{gridColumn:"1 / -1"},children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Counter Length (feet)"}),s.jsx("input",{type:"number",value:r.counterLength,onChange:o=>e(l=>({...l,counterLength:o.target.value})),placeholder:"Enter counter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"For kitchens/break rooms"})]})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:i.counterReceptacles>0?"repeat(3, 1fr)":"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Wall Receptacles"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:i.wallReceptacles})]}),i.counterReceptacles>0&&s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Counter Receptacles"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.counterReceptacles})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Needed"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.totalReceptacles})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"15A Circuits"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.circuits15A})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.circuits20A})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"NEC Requirements Met"}),s.jsxs("div",{children:["Room perimeter: ",i.perimeter," ft"]}),s.jsx("div",{children:"Spacing: One receptacle every 12 feet of wall space"}),i.counterReceptacles>0&&s.jsx("div",{children:"Counter spacing: One receptacle every 2 feet"})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC 210.52 Requirements:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Wall: Receptacle within 6 ft of doorway, then every 12 ft"}),s.jsx("li",{children:"No point along wall more than 6 ft from receptacle"}),s.jsx("li",{children:"Counters: One receptacle every 24 inches of counter space"}),s.jsx("li",{children:"Kitchen requires min. 2 small appliance circuits (20A)"})]})]})]})]})},bB=({kitchenData:r,setKitchenData:e,colors:t})=>{const i=(()=>{if(!r.counterLength)return null;const o=parseFloat(r.counterLength),l=parseFloat(r.islandLength)||0,u=Math.max(2,Math.ceil(o/2)),h=l>=2?Math.max(1,Math.ceil(l/4)):0,d=2,g=u+h;let b=0;return r.dishwasher&&b++,r.disposer&&b++,r.microwave&&b++,r.range&&b++,{counterReceptacles:u,islandReceptacles:h,totalReceptacles:u+h,smallApplianceCircuits:d,dedicatedCircuits:b,gfciRequired:g}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Counter Length (feet)"}),s.jsx("input",{type:"number",value:r.counterLength,onChange:o=>e(l=>({...l,counterLength:o.target.value})),placeholder:"Enter counter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Island Length (feet) - Optional"}),s.jsx("input",{type:"number",value:r.islandLength,onChange:o=>e(l=>({...l,islandLength:o.target.value})),placeholder:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:'Required if island  24" long  12" wide'})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.75rem",color:t.cardText,fontSize:"0.875rem"},children:"Dedicated Appliance Circuits:"}),s.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:r.dishwasher,onChange:o=>e(l=>({...l,dishwasher:o.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Dishwasher (dedicated 15A/20A)"]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:r.disposer,onChange:o=>e(l=>({...l,disposer:o.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Garbage Disposer (dedicated 15A/20A)"]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:r.microwave,onChange:o=>e(l=>({...l,microwave:o.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Microwave (dedicated 20A)"]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:r.range,onChange:o=>e(l=>({...l,range:o.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Range/Cooktop (240V, 40-50A)"]})]})]})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Counter Receptacles"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:i.counterReceptacles})]}),i.islandReceptacles>0&&s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Island Receptacles"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.islandReceptacles})]}),i.islandReceptacles===0&&s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"GFCI Required"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.gfciRequired})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Small Appliance Circuits"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.smallApplianceCircuits}),s.jsx("div",{style:{fontSize:"0.65rem",color:t.subtleText,marginTop:"0.25rem"},children:"20A each"})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Dedicated Circuits"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.dedicatedCircuits}),s.jsx("div",{style:{fontSize:"0.65rem",color:t.subtleText,marginTop:"0.25rem"},children:"for appliances"})]})]}),s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(Ef,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"GFCI Protection Required"}),s.jsxs("div",{children:["All ",i.gfciRequired," countertop receptacles require GFCI protection per NEC 210.8(A)"]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Kitchen Requirements:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Min. 2 small appliance circuits (20A) for countertop receptacles"}),s.jsx("li",{children:"Counter receptacles: One every 24 inches, all GFCI protected"}),s.jsx("li",{children:'Island receptacles required if island  24" long  12" wide'}),s.jsx("li",{children:"Dishwasher, disposer typically need dedicated 15A or 20A circuits"})]})]})]})]})},wB=({bathroomData:r,setBathroomData:e,colors:t})=>{const i=(()=>{const o=parseInt(r.numBasins)||1,l=r.hasTub;let u=Math.max(1,o);l&&(u=Math.max(u,2));const h=r.sharedCircuit?1:o>=2?2:1;return{receptacles:u,dedicatedCircuits:h,gfciRequired:u,numBasins:o}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Number of Sinks/Basins"}),s.jsxs("select",{value:r.numBasins,onChange:o=>e(l=>({...l,numBasins:o.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"1",children:"1 Basin"}),s.jsx("option",{value:"2",children:"2 Basins (Double Vanity)"}),s.jsx("option",{value:"3",children:"3+ Basins"})]})]}),s.jsx("div",{children:s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:r.hasTub,onChange:o=>e(l=>({...l,hasTub:o.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Has Bathtub/Shower Area"]})}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:r.sharedCircuit,onChange:o=>e(l=>({...l,sharedCircuit:o.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Share circuit with other bathrooms"]}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",marginLeft:"1.625rem"},children:"One 20A circuit can serve multiple bathrooms if only serving receptacles"})]})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Receptacles Needed"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:i.receptacles})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.dedicatedCircuits})]})]}),s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(Ef,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"GFCI Protection Required"}),s.jsxs("div",{children:["All ",i.gfciRequired," bathroom receptacles require GFCI protection per NEC 210.8(A)"]})]})]})}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Installation Guidelines"}),s.jsx("div",{children:" At least one receptacle within 3 feet of each basin"}),s.jsx("div",{children:" Receptacles must be readily accessible (not behind toilet)"}),s.jsx("div",{children:" Install at least 12 inches above countertop"})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Bathroom Requirements:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"NEC 210.52(D): Min. 1 receptacle within 3 ft of basin"}),s.jsx("li",{children:"NEC 210.11(C)(3): Min. 1 dedicated 20A circuit for bathroom receptacles"}),s.jsx("li",{children:"NEC 210.8(A): All bathroom receptacles require GFCI protection"}),s.jsx("li",{children:"One 20A circuit can serve receptacles in multiple bathrooms"})]})]})]})]})},SB=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=me.useState("general"),[o,l]=me.useState({roomLength:"",roomWidth:"",hasCounters:!1,counterLength:""}),[u,h]=me.useState({counterLength:"",islandLength:"",dishwasher:!1,disposer:!1,microwave:!1,range:!1}),[d,g]=me.useState({numBasins:"1",hasTub:!1,sharedCircuit:!1}),b={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};me.useImperativeHandle(t,()=>({exportPDF:()=>{let v;if(n==="general"){if(!o.roomLength||!o.roomWidth){alert("Please enter room dimensions before exporting");return}const N=parseFloat(o.roomLength),E=parseFloat(o.roomWidth),L=((N+E)*2).toFixed(1),C=Math.max(2,Math.ceil(L/12));let M=0;if(o.hasCounters&&o.counterLength){const k=parseFloat(o.counterLength);M=Math.max(2,Math.ceil(k/2))}const $=C+M,F=Math.ceil($/8),ne=Math.ceil($/10),ue={roomLength:`${o.roomLength} feet`,roomWidth:`${o.roomWidth} feet`,roomPerimeter:`${L} feet`};o.hasCounters&&o.counterLength&&(ue.counterLength=`${o.counterLength} feet`);const V={wallReceptacles:`${C} receptacles`,totalReceptacles:`${$} receptacles`,circuits15A:`${F} circuits (15A)`,circuits20A:`${ne} circuits (20A)`};M>0&&(V.counterReceptacles=`${M} receptacles`),v={calculatorName:"Receptacle Calculator - General Room",inputs:ue,results:V,additionalInfo:{spacing:"One receptacle every 12 feet of wall space",rule:"No point along wall more than 6 feet from receptacle",counterRule:M>0?"Counter receptacles: one every 24 inches":null},necReferences:["NEC 210.52(A) - General Provisions","Receptacle within 6 ft of doorway, then every 12 ft","No point along wall more than 6 ft from receptacle","Conservative: 8 receptacles per 15A circuit, 10 per 20A circuit"]}}else if(n==="kitchen"){if(!u.counterLength){alert("Please enter counter length before exporting");return}const N=parseFloat(u.counterLength),E=parseFloat(u.islandLength)||0,L=Math.max(2,Math.ceil(N/2)),C=E>=2?Math.max(1,Math.ceil(E/4)):0,M=L+C,$=2,F=M;let ne=0;const ue=[];u.dishwasher&&(ne++,ue.push("Dishwasher (15A/20A)")),u.disposer&&(ne++,ue.push("Garbage Disposer (15A/20A)")),u.microwave&&(ne++,ue.push("Microwave (20A)")),u.range&&(ne++,ue.push("Range/Cooktop (240V, 40-50A)"));const V={counterLength:`${u.counterLength} feet`};E>0&&(V.islandLength=`${u.islandLength} feet`),ue.length>0&&(V.dedicatedAppliances=ue.join(", "));const k={counterReceptacles:`${L} receptacles`,totalReceptacles:`${M} receptacles`,smallApplianceCircuits:`${$} circuits (20A each)`,gfciRequired:`${F} GFCI-protected receptacles`};C>0&&(k.islandReceptacles=`${C} receptacles`),ne>0&&(k.dedicatedCircuits=`${ne} dedicated circuits`),v={calculatorName:"Receptacle Calculator - Kitchen",inputs:V,results:k,additionalInfo:{counterSpacing:"One receptacle every 24 inches of counter space",islandRequirement:'Island receptacles required if island  24" long  12" wide',gfciNote:"All countertop receptacles require GFCI protection"},necReferences:["NEC 210.52(C) - Countertops","NEC 210.11(C)(1) - Min. 2 small appliance circuits (20A)","NEC 210.8(A) - GFCI protection required for all countertop receptacles",'Island receptacles required if  24" long  12" wide']}}else if(n==="bathroom"){const N=parseInt(d.numBasins)||1,E=d.hasTub;let L=Math.max(1,N);E&&(L=Math.max(L,2));const C=d.sharedCircuit?1:N>=2?2:1,M=L,F={numberOfBasins:N===1?"1 Basin":N===2?"2 Basins (Double Vanity)":"3+ Basins",hasTubShower:E?"Yes":"No",sharedCircuit:d.sharedCircuit?"Yes (shared with other bathrooms)":"No (dedicated)"},ne={receptaclesNeeded:`${L} receptacles`,dedicatedCircuits:`${C} circuits (20A)`,gfciRequired:`${M} GFCI-protected receptacles`};v={calculatorName:"Receptacle Calculator - Bathroom",inputs:F,results:ne,additionalInfo:{spacing:"At least one receptacle within 3 feet of each basin",installation:"Install at least 12 inches above countertop",accessibility:"Receptacles must be readily accessible (not behind toilet)",gfciNote:"All bathroom receptacles require GFCI protection"},necReferences:["NEC 210.52(D) - Min. 1 receptacle within 3 ft of basin","NEC 210.11(C)(3) - Min. 1 dedicated 20A circuit for bathroom receptacles","NEC 210.8(A) - All bathroom receptacles require GFCI protection","One 20A circuit can serve receptacles in multiple bathrooms"]}}cn(v)}}));const S={general:s.jsx(vB,{generalData:o,setGeneralData:l,colors:b}),kitchen:s.jsx(bB,{kitchenData:u,setKitchenData:h,colors:b}),bathroom:s.jsx(wB,{bathroomData:d,setBathroomData:g,colors:b})};return s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"general",label:"General Room"},{id:"kitchen",label:"Kitchen"},{id:"bathroom",label:"Bathroom"}].map(v=>s.jsx("button",{className:ys.btn,onClick:()=>i(v.id),style:{flex:"1 1 auto",minWidth:"100px",padding:"0.625rem 1rem",background:n===v.id?"#3b82f6":b.sectionBg,color:n===v.id?"white":b.labelText,border:`1px solid ${n===v.id?"#3b82f6":b.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:v.label},v.id))}),s.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:S[n]})]})});function _B({onNavigate:r,currentView:e,isDarkMode:t=!1}){const n={bg:t?"#1a1a1a":"#ffffff",border:t?"#2a2a2a":"#e5e7eb",activeText:"#3b82f6",inactiveText:t?"#999999":"#6b7280"},i=l=>({background:"transparent",border:"0",borderWidth:"0",outline:"none",boxShadow:"none",color:l?n.activeText:n.inactiveText,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",gap:"0.25rem",fontSize:"0.625rem",fontWeight:"500",flex:"1 1 0",padding:"0.5rem 0.25rem",paddingTop:"0.75rem",margin:0,transition:"color 0.2s",WebkitTapHighlightColor:"transparent",WebkitAppearance:"none",MozAppearance:"none",appearance:"none",minWidth:"0"}),o={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",textAlign:"center",lineHeight:"1",marginTop:"0.125rem"};return s.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,width:"100%",background:n.bg,borderTop:`1px solid ${n.border}`,display:"flex",justifyContent:"space-between",alignItems:"stretch",padding:"0.25rem 0.5rem",paddingBottom:"calc(0.25rem + env(safe-area-inset-bottom))",margin:0,zIndex:1e4,minHeight:"80px",boxSizing:"border-box"},children:[s.jsxs("button",{onClick:()=>r("home"),style:i(e==="home"),children:[s.jsx(iw,{size:22,strokeWidth:e==="home"?2.5:2}),s.jsx("span",{style:o,children:"Home"})]}),s.jsxs("button",{onClick:()=>r("calculators"),style:i(e==="calculators"),children:[s.jsx(cf,{size:22,strokeWidth:e==="calculators"?2.5:2}),s.jsx("span",{style:o,children:"Calculators"})]}),s.jsxs("button",{onClick:()=>r("jobs"),style:i(e==="jobs"),children:[s.jsx(Lu,{size:22,strokeWidth:e==="jobs"?2.5:2}),s.jsx("span",{style:o,children:"Jobs"})]}),s.jsxs("button",{onClick:()=>r("estimates"),style:i(e==="estimates"),children:[s.jsx(jf,{size:22,strokeWidth:e==="estimates"?2.5:2}),s.jsx("span",{style:o,children:"Estimates"})]}),s.jsxs("button",{onClick:()=>r("invoices"),style:i(e==="invoices"),children:[s.jsx(X1,{size:22,strokeWidth:e==="invoices"?2.5:2}),s.jsx("span",{style:o,children:"Invoices"})]})]})}const TB=me.forwardRef(({isDarkMode:r,onBack:e},t)=>{const[n,i]=me.useState(""),[o,l]=me.useState("460"),[u,h]=me.useState("3"),[d,g]=me.useState("normal"),[b,S]=me.useState("0"),[v,N]=me.useState("40"),[E,L]=me.useState("variable"),C={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},$=((D,q,oe)=>{if(!D||!q)return 0;const se=parseFloat(D),ie=parseFloat(q);return oe==="3"?se*746/(ie*1.732*.85*.9):se*746/(ie*.85*.9)})(n,o,u),F=D=>{const q=parseFloat(D);return q<=3300?1:q<=5e3?.95:q<=6600?.9:q<=8200?.85:.8},ne=D=>{const q=parseFloat(D);return q<=40?1:q<=45?.97:q<=50?.94:.91},ue=D=>{switch(D){case"heavy":return 1.25;case"normal":return 1.15;case"light":return 1.1;default:return 1.15}},V=F(b),k=ne(v),A=ue(d),O=$*A/(V*k),w=[{amps:2,hp460V:1,hp230V:.5},{amps:3,hp460V:1.5,hp230V:1},{amps:5,hp460V:2,hp230V:1.5},{amps:7,hp460V:3,hp230V:2},{amps:10,hp460V:5,hp230V:3},{amps:14,hp460V:7.5,hp230V:5},{amps:18,hp460V:10,hp230V:7.5},{amps:24,hp460V:15,hp230V:10},{amps:31,hp460V:20,hp230V:15},{amps:40,hp460V:25,hp230V:20},{amps:52,hp460V:30,hp230V:25},{amps:62,hp460V:40,hp230V:30},{amps:77,hp460V:50,hp230V:40},{amps:96,hp460V:60,hp230V:50},{amps:124,hp460V:75,hp230V:60},{amps:156,hp460V:100,hp230V:75},{amps:180,hp460V:125,hp230V:100},{amps:240,hp460V:150,hp230V:125},{amps:302,hp460V:200,hp230V:150}].find(D=>D.amps>=O),B=V<1||k<1||d==="heavy";return me.useImperativeHandle(t,()=>({exportPDF:()=>{if(!n){alert("Please enter motor horsepower before exporting to PDF");return}const D=E==="variable"?"Variable Torque (Fans, Pumps)":E==="constant"?"Constant Torque (Conveyors)":"High Starting Torque",q=d==="light"?"Light Duty (Intermittent)":d==="normal"?"Normal Duty":"Heavy Duty (Continuous)",oe={calculatorName:"VFD Sizing Calculator",inputs:{"Motor Horsepower":`${n} HP`,Voltage:`${o}V`,Phases:u==="1"?"Single Phase":"Three Phase","Load Type":D,"Duty Cycle":q,Altitude:`${b} feet`,"Ambient Temperature":`${v}C`},results:{"Motor Full Load Amperes (FLA)":`${$.toFixed(1)} A`,"Required VFD Current":`${O.toFixed(1)} A`,"Recommended VFD Rating":w?`${w.amps} A`:"N/A","VFD Motor HP (460V)":w?`${w.hp460V} HP`:"N/A","VFD Motor HP (230V)":w?`${w.hp230V} HP`:"N/A","Safety Margin":w?`${((w.amps/O-1)*100).toFixed(0)}%`:"N/A"},additionalInfo:{"Altitude Derating Factor":`${(V*100).toFixed(0)}%`,"Temperature Derating Factor":`${(k*100).toFixed(0)}%`,"Duty Cycle Factor":`${(A*100).toFixed(0)}%`,"Calculation Method":u==="3"?"Three Phase: (HP  746)  (V  1.732  0.85  0.9)":"Single Phase: (HP  746)  (V  0.85  0.9)","Required VFD Current Formula":"Motor FLA  Duty Cycle Factor  (Altitude Factor  Temperature Factor)"},necReferences:["NEC Article 430 - Motors, Motor Circuits, and Controllers","NEC 430.122 - Rating of Motor Control Circuit Overcurrent Protective Device","Always follow VFD manufacturer specifications","Use shielded cables for motor connections to reduce EMI","Install line and load reactors when recommended by manufacturer","Ensure proper grounding and bonding per NEC Article 250","Consider bypass contactor for critical applications","Verify VFD voltage matches motor nameplate voltage","Consider harmonic filtering for sensitive equipment","Ensure adequate cooling and ventilation for VFD enclosure",V<1?`WARNING: High altitude derating applied (${(V*100).toFixed(0)}%)`:"",k<1?`WARNING: High temperature derating applied (${(k*100).toFixed(0)}%)`:"",d==="heavy"?"WARNING: Heavy duty cycle requires oversizing for continuous operation":""].filter(se=>se!=="")};cn(oe)}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:C.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${C.cardBorder}`,paddingBottom:"0.5rem"},children:"Motor Information"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Motor Horsepower (HP)"}),s.jsx("input",{type:"number",value:n,onChange:D=>i(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},placeholder:"Enter HP",step:"0.5"})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Voltage (V)"}),s.jsxs("select",{value:o,onChange:D=>l(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"230",children:"230V"}),s.jsx("option",{value:"460",children:"460V"}),s.jsx("option",{value:"575",children:"575V"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Phases"}),s.jsxs("select",{value:u,onChange:D=>h(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"1",children:"Single Phase"}),s.jsx("option",{value:"3",children:"Three Phase"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Load Type"}),s.jsxs("select",{value:E,onChange:D=>L(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"variable",children:"Variable Torque (Fans, Pumps)"}),s.jsx("option",{value:"constant",children:"Constant Torque (Conveyors)"}),s.jsx("option",{value:"highTorque",children:"High Starting Torque"})]})]})]})]}),s.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:C.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${C.cardBorder}`,paddingBottom:"0.5rem"},children:"Environmental Conditions"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Duty Cycle"}),s.jsxs("select",{value:d,onChange:D=>g(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"light",children:"Light Duty (Intermittent)"}),s.jsx("option",{value:"normal",children:"Normal Duty"}),s.jsx("option",{value:"heavy",children:"Heavy Duty (Continuous)"})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Altitude (feet)"}),s.jsx("input",{type:"number",value:b,onChange:D=>S(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},placeholder:"0",step:"100"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Ambient Temp (C)"}),s.jsx("input",{type:"number",value:v,onChange:D=>N(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},placeholder:"40"})]})]}),s.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${C.cardBorder}`},children:[s.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:C.cardText,marginTop:0,marginBottom:"0.75rem"},children:"Derating Factors"}),s.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:C.labelText},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Altitude Factor:"}),s.jsxs("span",{style:{fontWeight:"600",color:C.cardText},children:[(V*100).toFixed(0),"%"]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Temperature Factor:"}),s.jsxs("span",{style:{fontWeight:"600",color:C.cardText},children:[(k*100).toFixed(0),"%"]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Duty Cycle Factor:"}),s.jsxs("span",{style:{fontWeight:"600",color:C.cardText},children:[(A*100).toFixed(0),"%"]})]})]})]})]})]}),n&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:C.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:C.labelText,marginBottom:"0.25rem"},children:"Motor FLA"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:C.cardText},children:$.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:C.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),s.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:C.labelText,marginBottom:"0.25rem"},children:"Required VFD Current"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:C.cardText},children:O.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:C.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Recommended VFD"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:w?w.amps:"N/A"}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),w&&s.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${C.cardBorder}`},children:[s.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:C.cardText,marginTop:0,marginBottom:"0.75rem"},children:"VFD Specifications"}),s.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:C.labelText},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Current Rating:"}),s.jsxs("span",{style:{fontWeight:"600",color:C.cardText},children:[w.amps," Amperes"]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Motor HP (460V):"}),s.jsxs("span",{style:{fontWeight:"600",color:C.cardText},children:[w.hp460V," HP"]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Motor HP (230V):"}),s.jsxs("span",{style:{fontWeight:"600",color:C.cardText},children:[w.hp230V," HP"]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"0.5rem",borderTop:`1px solid ${C.cardBorder}`,marginTop:"0.25rem"},children:[s.jsx("span",{children:"Safety Margin:"}),s.jsxs("span",{style:{fontWeight:"600",color:"#059669"},children:[((w.amps/O-1)*100).toFixed(0),"%"]})]})]})]})]}),w&&!B&&s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"VFD Selection Complete"}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"Selected VFD meets all requirements with adequate safety margin for reliable operation."})]})]})}),B&&s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(Ef,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{lineHeight:"1.5"},children:[s.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"600",color:"#78350f",marginBottom:"0.5rem"},children:"Important Considerations"}),s.jsxs("ul",{style:{fontSize:"0.8125rem",color:"#92400e",margin:0,paddingLeft:"1.25rem"},children:[V<1&&s.jsxs("li",{style:{marginBottom:"0.25rem"},children:["High altitude installation requires derating (",(V*100).toFixed(0),"% of rated capacity)"]}),k<1&&s.jsxs("li",{style:{marginBottom:"0.25rem"},children:["High ambient temperature requires derating (",(k*100).toFixed(0),"% of rated capacity)"]}),d==="heavy"&&s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Heavy duty cycle applications require oversizing for continuous operation"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Verify VFD voltage matches motor nameplate voltage"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider harmonic filtering for sensitive equipment"}),s.jsx("li",{children:"Ensure adequate cooling and ventilation"})]})]})]})})]}),s.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${C.cardBorder}`,fontSize:"0.8125rem",color:C.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:C.cardText},children:"VFD Installation Notes:"}),"Always follow manufacturer specifications  Use shielded cables for motor connections  Install line and load reactors when recommended  Ensure proper grounding and bonding  Consider bypass contactor for critical applications"]})]})}),AB=me.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=me.useState("inductive"),[i,o]=me.useState("60"),[l,u]=me.useState(""),[h,d]=me.useState("mH"),[g,b]=me.useState("60"),[S,v]=me.useState(""),[N,E]=me.useState("F"),[L,C]=me.useState(""),[M,$]=me.useState(""),[F,ne]=me.useState("inductive"),[ue,V]=me.useState(""),[k,A]=me.useState("mH"),[O,I]=me.useState(""),[w,B]=me.useState("F"),D={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},q=()=>{if(!i||!l)return null;const J=parseFloat(i);let re=parseFloat(l);return h==="mH"?re=re/1e3:h==="H"&&(re=re/1e6),{reactance:(2*Math.PI*J*re).toFixed(2),frequency:J,inductance:l,unit:h}},oe=()=>{if(!g||!S)return null;const J=parseFloat(g);let re=parseFloat(S);return N==="F"?re=re/1e6:N==="nF"?re=re/1e9:N==="pF"&&(re=re/1e12),{reactance:(1/(2*Math.PI*J*re)).toFixed(2),frequency:J,capacitance:S,unit:N}},se=()=>{if(!L||!M)return null;const J=parseFloat(L),re=parseFloat(M),fe=Math.sqrt(J*J+re*re),ge=Math.atan2(re,J)*(180/Math.PI);return{impedance:fe.toFixed(2),angle:ge.toFixed(2),resistance:J,reactance:re,type:F}},ie=()=>{if(!ue||!O)return null;let J=parseFloat(ue),re=parseFloat(O);return k==="mH"?J=J/1e3:k==="H"&&(J=J/1e6),w==="F"?re=re/1e6:w==="nF"?re=re/1e9:w==="pF"&&(re=re/1e12),{frequency:(1/(2*Math.PI*Math.sqrt(J*re))).toFixed(2),inductance:ue,inductanceUnit:k,capacitance:O,capacitanceUnit:w}},ve=q(),be=oe(),Z=se(),W=ie();return me.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="inductive"){if(!i||!l){alert("Please enter all required values before exporting to PDF");return}const J={calculatorName:"Reactance & Impedance - Inductive Reactance (XL)",inputs:{Frequency:`${i} Hz`,Inductance:`${l} ${h}`},results:{"Inductive Reactance (XL)":`${ve.reactance} `},additionalInfo:{Formula:"XL = 2fL",Description:"Inductive reactance increases with frequency and opposes changes in current flow"},necReferences:["Inductive reactance is directly proportional to frequency","In AC circuits, inductors oppose current changes","XL increases linearly with both frequency and inductance"]};cn(J)}else if(t==="capacitive"){if(!g||!S){alert("Please enter all required values before exporting to PDF");return}const J={calculatorName:"Reactance & Impedance - Capacitive Reactance (XC)",inputs:{Frequency:`${g} Hz`,Capacitance:`${S} ${N}`},results:{"Capacitive Reactance (XC)":`${be.reactance} `},additionalInfo:{Formula:"XC = 1 / (2fC)",Description:"Capacitive reactance decreases with frequency and opposes changes in voltage"},necReferences:["Capacitive reactance is inversely proportional to frequency","In AC circuits, capacitors oppose voltage changes","XC decreases as frequency or capacitance increases"]};cn(J)}else if(t==="impedance"){if(!L||!M){alert("Please enter all required values before exporting to PDF");return}const J={calculatorName:"Reactance & Impedance - Impedance Calculator",inputs:{"Reactance Type":F.charAt(0).toUpperCase()+F.slice(1),"Resistance (R)":`${L} `,"Reactance (X)":`${M} `},results:{"Impedance (Z)":`${Z.impedance} `,"Phase Angle ()":`${Z.angle}`,"Phase Relationship":F==="inductive"?"Leading":"Lagging"},additionalInfo:{"Impedance Formula":"Z = (R + X)","Phase Angle Formula":" = arctan(X / R)",Description:"Impedance is the total opposition to current flow in an AC circuit, combining resistance and reactance"},necReferences:["Impedance combines resistive and reactive components","Phase angle indicates the relationship between voltage and current","In inductive circuits, current lags voltage; in capacitive circuits, current leads voltage"]};cn(J)}else if(t==="resonance"){if(!ue||!O){alert("Please enter all required values before exporting to PDF");return}const J={calculatorName:"Reactance & Impedance - Resonant Frequency",inputs:{Inductance:`${ue} ${k}`,Capacitance:`${O} ${w}`},results:{"Resonant Frequency (fr)":`${W.frequency} Hz`},additionalInfo:{Formula:"fr = 1 / (2LC)","At Resonance":"Inductive and capacitive reactances are equal and opposite (XL = XC)","Series Circuit":"Minimum impedance at resonance","Parallel Circuit":"Maximum impedance at resonance"},necReferences:["Resonance occurs when XL = XC","At resonant frequency, circuit is purely resistive","Series resonant circuits have minimum impedance","Parallel resonant circuits have maximum impedance"]};cn(J)}}})),s.jsx("div",{className:ys.container,children:s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:s.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[s.jsxs("button",{onClick:()=>n("inductive"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="inductive"?"#3b82f6":"transparent",color:t==="inductive"?"white":D.labelText,border:`1px solid ${t==="inductive"?"#3b82f6":D.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:["Inductive (X",s.jsx("sub",{children:"L"}),")"]}),s.jsxs("button",{onClick:()=>n("capacitive"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="capacitive"?"#3b82f6":"transparent",color:t==="capacitive"?"white":D.labelText,border:`1px solid ${t==="capacitive"?"#3b82f6":D.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:["Capacitive (X",s.jsx("sub",{children:"C"}),")"]}),s.jsx("button",{onClick:()=>n("impedance"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="impedance"?"#3b82f6":"transparent",color:t==="impedance"?"white":D.labelText,border:`1px solid ${t==="impedance"?"#3b82f6":D.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Impedance (Z)"}),s.jsx("button",{onClick:()=>n("resonance"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="resonance"?"#3b82f6":"transparent",color:t==="resonance"?"white":D.labelText,border:`1px solid ${t==="resonance"?"#3b82f6":D.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Resonance"})]})}),t==="inductive"&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${D.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),s.jsx("input",{type:"number",value:i,onChange:J=>o(J.target.value),placeholder:"60",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:D.subtleText,marginTop:"0.25rem"},children:"Common: 50 Hz or 60 Hz"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Inductance"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[s.jsx("input",{type:"number",value:l,onChange:J=>u(J.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}}),s.jsxs("select",{value:h,onChange:J=>d(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"H",children:"H"}),s.jsx("option",{value:"mH",children:"mH"}),s.jsx("option",{value:"H",children:"H"})]})]})]})]})]}),ve&&s.jsx("div",{children:s.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Inductive Reactance (X",s.jsx("sub",{children:"L"}),")"]}),s.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:ve.reactance}),s.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms ()"})]}),s.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${D.cardBorder}`},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:D.labelText,marginBottom:"0.5rem"},children:s.jsx("strong",{style:{color:D.cardText},children:"Circuit Values:"})}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:D.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["Frequency: ",ve.frequency," Hz"]}),s.jsxs("div",{children:["Inductance: ",ve.inductance," ",ve.unit]}),s.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:D.subtleText},children:["Formula: X",s.jsx("sub",{children:"L"})," = 2fL"]})]})]})]})})]}),t==="capacitive"&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${D.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),s.jsx("input",{type:"number",value:g,onChange:J=>b(J.target.value),placeholder:"60",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:D.subtleText,marginTop:"0.25rem"},children:"Common: 50 Hz or 60 Hz"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Capacitance"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[s.jsx("input",{type:"number",value:S,onChange:J=>v(J.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}}),s.jsxs("select",{value:N,onChange:J=>E(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"F",children:"F"}),s.jsx("option",{value:"F",children:"F"}),s.jsx("option",{value:"nF",children:"nF"}),s.jsx("option",{value:"pF",children:"pF"})]})]})]})]})]}),be&&s.jsx("div",{children:s.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Capacitive Reactance (X",s.jsx("sub",{children:"C"}),")"]}),s.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:be.reactance}),s.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms ()"})]}),s.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${D.cardBorder}`},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:D.labelText,marginBottom:"0.5rem"},children:s.jsx("strong",{style:{color:D.cardText},children:"Circuit Values:"})}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:D.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["Frequency: ",be.frequency," Hz"]}),s.jsxs("div",{children:["Capacitance: ",be.capacitance," ",be.unit]}),s.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:D.subtleText},children:["Formula: X",s.jsx("sub",{children:"C"})," = 1 / (2fC)"]})]})]})]})})]}),t==="impedance"&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${D.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Reactance Type"}),s.jsxs("select",{value:F,onChange:J=>ne(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[s.jsxs("option",{value:"inductive",children:["Inductive (X",s.jsx("sub",{children:"L"}),")"]}),s.jsxs("option",{value:"capacitive",children:["Capacitive (X",s.jsx("sub",{children:"C"}),")"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Resistance (R) in Ohms"}),s.jsx("input",{type:"number",value:L,onChange:J=>C(J.target.value),placeholder:"Enter resistance",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Reactance (X) in Ohms"}),s.jsx("input",{type:"number",value:M,onChange:J=>$(J.target.value),placeholder:"Enter reactance",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}})]})]})]}),Z&&s.jsx("div",{children:s.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Impedance (Z)"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:Z.impedance}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms ()"})]}),s.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:D.labelText,marginBottom:"0.25rem"},children:"Phase Angle ()"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:D.cardText},children:[Z.angle,""]}),s.jsx("div",{style:{fontSize:"0.75rem",color:D.labelText,marginTop:"0.25rem"},children:F==="inductive"?"Leading":"Lagging"})]})]}),s.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${D.cardBorder}`},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:D.labelText,marginBottom:"0.5rem"},children:s.jsx("strong",{style:{color:D.cardText},children:"Circuit Values:"})}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:D.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["Resistance (R): ",Z.resistance," "]}),s.jsxs("div",{children:["Reactance (X): ",Z.reactance,"  (",Z.type,")"]}),s.jsx("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:D.subtleText},children:"Formula: Z = (R + X)"}),s.jsx("div",{style:{fontStyle:"italic",color:D.subtleText},children:"Phase Angle:  = arctan(X / R)"})]})]})]})})]}),t==="resonance"&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${D.cardBorder}`,paddingBottom:"0.5rem"},children:"LC Circuit Parameters"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Inductance"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[s.jsx("input",{type:"number",value:ue,onChange:J=>V(J.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}}),s.jsxs("select",{value:k,onChange:J=>A(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"H",children:"H"}),s.jsx("option",{value:"mH",children:"mH"}),s.jsx("option",{value:"H",children:"H"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Capacitance"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[s.jsx("input",{type:"number",value:O,onChange:J=>I(J.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}}),s.jsxs("select",{value:w,onChange:J=>B(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"F",children:"F"}),s.jsx("option",{value:"F",children:"F"}),s.jsx("option",{value:"nF",children:"nF"}),s.jsx("option",{value:"pF",children:"pF"})]})]})]})]})]}),W&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Resonant Frequency (f",s.jsx("sub",{children:"r"}),")"]}),s.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:W.frequency}),s.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Hertz (Hz)"})]}),s.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${D.cardBorder}`},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:D.labelText,marginBottom:"0.5rem"},children:s.jsx("strong",{style:{color:D.cardText},children:"Circuit Values:"})}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:D.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["Inductance: ",W.inductance," ",W.inductanceUnit]}),s.jsxs("div",{children:["Capacitance: ",W.capacitance," ",W.capacitanceUnit]}),s.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:D.subtleText},children:["Formula: f",s.jsx("sub",{children:"r"})," = 1 / (2LC)"]})]})]})]}),s.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"About Resonant Frequency:"}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"At resonance, inductive and capacitive reactances are equal and opposite, resulting in minimum impedance in series circuits and maximum impedance in parallel circuits."})]})]})})]})]}),s.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${D.cardBorder}`,fontSize:"0.8125rem",color:D.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:D.cardText},children:"Key Concepts:"}),"X",s.jsx("sub",{children:"L"})," increases with frequency  X",s.jsx("sub",{children:"C"})," decreases with frequency  At resonance X",s.jsx("sub",{children:"L"})," = X",s.jsx("sub",{children:"C"}),"  Impedance combines resistance and reactance"]})]})})}),CB=me.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=me.useState("correction"),[i,o]=me.useState(""),[l,u]=me.useState("480"),[h,d]=me.useState(""),[g,b]=me.useState("0.95"),[S,v]=me.useState("60"),[N,E]=me.useState(""),[L,C]=me.useState(""),[M,$]=me.useState("0.95"),[F,ne]=me.useState(""),[ue,V]=me.useState(""),[k,A]=me.useState("8760"),[O,I]=me.useState(""),w={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},B=()=>{if(!i||!h)return null;const se=parseFloat(i),ie=parseFloat(h),ve=parseFloat(g),be=parseFloat(l),Z=parseFloat(S),W=Math.acos(ie),J=Math.acos(ve),re=se*Math.tan(W),fe=se*Math.tan(J),_e=re-fe,he=_e*1e9/(2*Math.PI*Z*be*be),xe=se/ie,Pe=se/ve,Ue=xe*1e3/(Math.sqrt(3)*be),Xe=Pe*1e3/(Math.sqrt(3)*be),Ze=(Ue-Xe)/Ue*100;return{kVAR:_e.toFixed(2),capacitance:he.toFixed(2),existingApparentPower:xe.toFixed(2),correctedApparentPower:Pe.toFixed(2),powerReduction:((xe-Pe)/xe*100).toFixed(1),existingCurrent:Ue.toFixed(2),correctedCurrent:Xe.toFixed(2),currentReduction:Ze.toFixed(1),existingPF:(ie*100).toFixed(1),targetPF:(ve*100).toFixed(1)}},D=()=>{if(!N||!L||!F)return null;const se=parseFloat(N),ie=parseFloat(L),ve=parseFloat(M),be=parseFloat(F),Z=parseFloat(ue)||0,W=parseFloat(k),J=parseFloat(O)||0,re=se/ie,fe=se/ve,ge=re-fe,_e=ge*be,xe=(ve-ie)*100*.01,Pe=se*W*(xe/100)*Z,Ue=J*12,Xe=_e*12,Ze=Xe+Pe+Ue,ze=Math.acos(ie),de=Math.acos(ve),Lt=se*(Math.tan(ze)-Math.tan(de)),Et=Lt*75,wt=Ze>0?Et/Ze*12:0;return{kVAReduction:ge.toFixed(2),monthlyDemandSavings:_e.toFixed(2),annualDemandSavings:Xe.toFixed(2),annualEnergySavings:Pe.toFixed(2),annualPenaltySavings:Ue.toFixed(2),totalAnnualSavings:Ze.toFixed(2),kVARRequired:Lt.toFixed(2),estimatedCost:Et.toFixed(2),paybackMonths:wt.toFixed(1),paybackYears:(wt/12).toFixed(1),fiveYearSavings:(Ze*5-Et).toFixed(2)}},q=B(),oe=D();return me.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="correction"){if(!i||!h){alert("Please enter all required values before exporting to PDF");return}const se={calculatorName:"Power Factor Correction - Capacitor Sizing",inputs:{"Real Power":`${i} kW`,"System Voltage":`${l}V`,"Existing Power Factor":h,"Target Power Factor":g,Frequency:`${S} Hz`},results:{"Required Capacitor Size":`${q.kVAR} kVAR`,"Capacitance per Phase":`${q.capacitance} F`,"Power Factor Before":`${q.existingPF}%`,"Power Factor After":`${q.targetPF}%`,"Apparent Power Before":`${q.existingApparentPower} kVA`,"Apparent Power After":`${q.correctedApparentPower} kVA`,"Apparent Power Reduction":`${q.powerReduction}%`,"Line Current Before":`${q.existingCurrent} A`,"Line Current After":`${q.correctedCurrent} A`,"Current Reduction":`${q.currentReduction}%`},additionalInfo:{Benefits:"Power factor correction reduces utility demand charges, lowers line losses and voltage drop, increases system capacity, reduces equipment heating, and improves voltage regulation."},necReferences:["NEC Article 460 - Capacitors","NEC 460.8 - Conductors supplying capacitors shall have an ampacity of not less than 135% of the rated current of the capacitor","NEC 460.9 - Rating or Setting of Motor Overload Device"]};cn(se)}else if(t==="savings"){if(!N||!L||!F){alert("Please enter all required values before exporting to PDF");return}const se={calculatorName:"Power Factor Correction - Cost Savings Analysis",inputs:{"Real Power":`${N} kW`,"Operating Hours per Year":k,"Existing Power Factor":L,"Target Power Factor":M,"Demand Charge":`$${F}/kVA/month`,"Energy Rate":ue?`$${ue}/kWh`:"Not specified","Monthly PF Penalty":O?`$${O}/month`:"None"},results:{"Total Annual Savings":`$${oe.totalAnnualSavings}/year`,"Monthly Demand Savings":`$${oe.monthlyDemandSavings}/month`,"Annual Demand Savings":`$${oe.annualDemandSavings}/year`,"Annual Energy Savings":`$${oe.annualEnergySavings}/year`,"Annual Penalty Savings":`$${oe.annualPenaltySavings}/year`,"kVA Reduction":`${oe.kVAReduction} kVA`,"Required Capacitor Size":`${oe.kVARRequired} kVAR`,"Estimated Equipment Cost":`$${oe.estimatedCost}`,"Payback Period":`${oe.paybackMonths} months (${oe.paybackYears} years)`,"5-Year Net Savings":`$${oe.fiveYearSavings}`},additionalInfo:{"Cost Basis":"Estimated at $75 per kVAR installed","Savings Note":"Actual costs and savings may vary based on equipment selection, installation costs, utility rate structures, and load profiles"},necReferences:["NEC Article 460 - Capacitors","NEC 460.8 - Conductors supplying capacitors shall have an ampacity of not less than 135% of the rated current of the capacitor","IEEE Std 18-2012 - Standard for Shunt Power Capacitors"]};cn(se)}}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:s.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[s.jsx("button",{onClick:()=>n("correction"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="correction"?"#3b82f6":"transparent",color:t==="correction"?"white":w.labelText,border:`1px solid ${t==="correction"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Capacitor Sizing"}),s.jsx("button",{onClick:()=>n("savings"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="savings"?"#3b82f6":"transparent",color:t==="savings"?"white":w.labelText,border:`1px solid ${t==="savings"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Cost Savings"})]})}),t==="correction"?s.jsxs("div",{children:[s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"System Parameters"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Real Power (kW)"}),s.jsx("input",{type:"number",value:i,onChange:se=>o(se.target.value),placeholder:"Enter load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"System Voltage (V)"}),s.jsxs("select",{value:l,onChange:se=>u(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"208",children:"208V"}),s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"480",children:"480V"}),s.jsx("option",{value:"600",children:"600V"})]})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Existing Power Factor"}),s.jsx("input",{type:"number",value:h,onChange:se=>d(se.target.value),placeholder:"0.70 - 0.99",step:"0.01",min:"0.5",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Current (uncorrected)"})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:["Target Power  ",s.jsx("br",{}),"Factor ",s.jsx("br",{})]}),s.jsxs("select",{value:g,onChange:se=>b(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"0.90",children:"0.90 (90%)"}),s.jsx("option",{value:"0.95",children:"0.95 (95%) - Recommended"}),s.jsx("option",{value:"0.98",children:"0.98 (98%)"}),s.jsx("option",{value:"0.99",children:"0.99 (99%)"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),s.jsxs("select",{value:S,onChange:se=>v(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"50",children:"50 Hz"}),s.jsx("option",{value:"60",children:"60 Hz"})]})]})]})]}),q&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Required Capacitor Bank"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Capacitor Size"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:q.kVAR}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"kVAR"})]}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Capacitance"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:q.capacitance}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"F per phase"})]})]}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.5rem"},children:s.jsx("strong",{style:{color:w.cardText},children:"Power Factor Improvement:"})}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["From: ",q.existingPF,"%  To: ",q.targetPF,"%"]}),s.jsxs("div",{children:["Real Power: ",i," kW (constant)"]}),s.jsxs("div",{children:["System Voltage: ",l,"V, ",S," Hz"]})]})]})]}),s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"System Improvements"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[s.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:w.cardText,marginBottom:"0.5rem"},children:"Apparent Power Reduction"}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["Before: ",q.existingApparentPower," kVA"]}),s.jsxs("div",{children:["After: ",q.correctedApparentPower," kVA"]}),s.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#059669",marginTop:"0.25rem"},children:["Reduction: ",q.powerReduction,"%"]})]})]}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[s.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:w.cardText,marginBottom:"0.5rem"},children:"Line Current Reduction"}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["Before: ",q.existingCurrent," A"]}),s.jsxs("div",{children:["After: ",q.correctedCurrent," A"]}),s.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#059669",marginTop:"0.25rem"},children:["Reduction: ",q.currentReduction,"%"]})]})]})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(F6,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Benefits of Power Factor Correction:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Reduced utility demand charges"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Lower line losses and voltage drop"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Increased system capacity"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Reduced equipment heating"}),s.jsx("li",{children:"Improved voltage regulation"})]})]})]})})]})]}):s.jsxs("div",{children:[s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Load & Power Factor"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:["Real Power ",s.jsx("br",{})," (kW)"]}),s.jsx("input",{type:"number",value:N,onChange:se=>E(se.target.value),placeholder:"Enter load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Operating Hours/Year"}),s.jsx("input",{type:"number",value:k,onChange:se=>A(se.target.value),placeholder:"8760",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"8760 = 24/7 operation"})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Existing Power Factor"}),s.jsx("input",{type:"number",value:L,onChange:se=>C(se.target.value),placeholder:"0.70 - 0.99",step:"0.01",min:"0.5",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:["Target Power ",s.jsx("br",{})," Factor"]}),s.jsxs("select",{value:M,onChange:se=>$(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"0.90",children:"0.90 (90%)"}),s.jsx("option",{value:"0.95",children:"0.95 (95%)"}),s.jsx("option",{value:"0.98",children:"0.98 (98%)"})]})]})]})]})]}),s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Utility Rates"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Demand Charge ($/kVA/month)"}),s.jsx("input",{type:"number",value:F,onChange:se=>ne(se.target.value),placeholder:"10 - 25",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Check your utility bill"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Energy Rate ($/kWh) - Optional"}),s.jsx("input",{type:"number",value:ue,onChange:se=>V(se.target.value),placeholder:"0.08 - 0.15",step:"0.001",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"For energy loss savings"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Monthly PF Penalty ($/month) - Optional"}),s.jsx("input",{type:"number",value:O,onChange:se=>I(se.target.value),placeholder:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"If utility charges PF penalty"})]})]})]}),oe&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Annual Cost Savings"}),s.jsxs("div",{style:{background:"#d1fae5",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:"#059669",marginBottom:"0.5rem",fontWeight:"600"},children:"Total Annual Savings"}),s.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#059669"},children:["$",oe.totalAnnualSavings]}),s.jsx("div",{style:{fontSize:"0.875rem",color:"#059669",marginTop:"0.25rem"},children:"per year"})]}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.5rem"},children:s.jsx("strong",{style:{color:w.cardText},children:"Savings Breakdown:"})}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["Demand Charge Savings: $",oe.annualDemandSavings,"/year"]}),parseFloat(oe.annualEnergySavings)>0&&s.jsxs("div",{children:["Energy Loss Savings: $",oe.annualEnergySavings,"/year"]}),parseFloat(oe.annualPenaltySavings)>0&&s.jsxs("div",{children:["Penalty Elimination: $",oe.annualPenaltySavings,"/year"]}),s.jsxs("div",{style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:`1px solid ${w.cardBorder}`},children:["kVA Reduction: ",oe.kVAReduction," kVA"]})]})]})]}),s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Return on Investment"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Estimated Cost"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:["$",oe.estimatedCost]}),s.jsxs("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:[oe.kVARRequired," kVAR @ $75/kVAR"]})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Payback Period"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:oe.paybackMonths}),s.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:["months (",oe.paybackYears," years)"]})]})]}),s.jsx("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[s.jsx("div",{children:s.jsx("strong",{style:{color:w.cardText},children:"5-Year Net Savings:"})}),s.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#059669",marginTop:"0.25rem"},children:["$",oe.fiveYearSavings]}),s.jsx("div",{style:{fontSize:"0.8125rem",color:w.subtleText,marginTop:"0.25rem"},children:"Total savings minus initial investment"})]})})]}),s.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Note:"}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"Actual costs and savings may vary based on equipment selection, installation costs, utility rate structures, and load profiles. Consult with a qualified electrical engineer for detailed analysis."})]})]})})]})]}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`,fontSize:"0.8125rem",color:w.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:w.cardText},children:"Power Factor Basics:"}),"PF = Real Power (kW)  Apparent Power (kVA)  Low PF causes higher current and utility charges  Target 0.95+ for optimal efficiency  Capacitors supply reactive power locally"]})]})}),kB=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=me.useState("from-kw-pf"),[o,l]=me.useState(""),[u,h]=me.useState(""),[d,g]=me.useState(""),[b,S]=me.useState(""),[v,N]=me.useState("lagging"),E={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},C=(()=>{let $=0,F=0,ne=0,ue=0,V=0;switch(n){case"from-kw-pf":if(!o||!b)return null;$=parseFloat(o),ue=parseFloat(b),ne=$/ue,V=Math.acos(ue)*(180/Math.PI),F=ne*Math.sin(Math.acos(ue)),v==="leading"&&(F=-F);break;case"from-kw-kvar":if(!o||!u)return null;$=parseFloat(o),F=parseFloat(u),v==="leading"&&(F=-Math.abs(F)),ne=Math.sqrt(Math.pow($,2)+Math.pow(F,2)),ue=$/ne,V=Math.atan(Math.abs(F)/$)*(180/Math.PI);break;case"from-kva-pf":if(!d||!b)return null;ne=parseFloat(d),ue=parseFloat(b),$=ne*ue,V=Math.acos(ue)*(180/Math.PI),F=ne*Math.sin(Math.acos(ue)),v==="leading"&&(F=-F);break;case"from-kva-kw":if(!d||!o||(ne=parseFloat(d),$=parseFloat(o),$>ne))return null;ue=$/ne,V=Math.acos(ue)*(180/Math.PI),F=Math.sqrt(Math.pow(ne,2)-Math.pow($,2)),v==="leading"&&(F=-F);break;default:return null}return{kW:$,kVAR:F,kVA:ne,powerFactor:ue,angle:V,isLeading:v==="leading"}})(),M=$=>{const F=Math.abs($);return F>=.95?{quality:"Excellent",color:"#10b981",bg:"#d1fae5",border:"#6ee7b7"}:F>=.9?{quality:"Good",color:"#3b82f6",bg:"#dbeafe",border:"#93c5fd"}:F>=.85?{quality:"Fair",color:"#f59e0b",bg:"#fef3c7",border:"#fcd34d"}:{quality:"Poor",color:"#ef4444",bg:"#fee2e2",border:"#fca5a5"}};return me.useImperativeHandle(t,()=>({exportPDF:()=>{if(!C){alert("Please enter values before exporting to PDF");return}const $=M(C.powerFactor),ne={calculatorName:"Power Triangle Calculator",inputs:{calculationMode:{"from-kw-pf":"Real Power (kW) and Power Factor","from-kw-kvar":"Real Power (kW) and Reactive Power (kVAR)","from-kva-pf":"Apparent Power (kVA) and Power Factor","from-kva-kw":"Apparent Power (kVA) and Real Power (kW)"}[n],...o&&{realPower:`${o} kW`},...u&&{reactivePower:`${u} kVAR`},...d&&{apparentPower:`${d} kVA`},...b&&{powerFactor:b},reactiveType:v==="leading"?"Leading (Capacitive)":"Lagging (Inductive)"},results:{realPower:`${C.kW.toFixed(2)} kW`,reactivePower:`${Math.abs(C.kVAR).toFixed(2)} kVAR (${C.isLeading?"Leading":"Lagging"})`,apparentPower:`${C.kVA.toFixed(2)} kVA`,powerFactor:`${C.powerFactor.toFixed(4)} ${C.isLeading?"(Leading)":"(Lagging)"}`,phaseAngle:`${C.angle.toFixed(2)}`,powerFactorQuality:$.quality},additionalInfo:{powerTriangleRelationship:"kVA = kW + kVAR",powerFactorFormula:"PF = kW  kVA = cos()",reactivePowerFormula:"kVAR = kVA  sin()",phaseAngleFormula:" = arccos(PF)",leadingVsLagging:C.isLeading?"Leading PF: Current leads voltage (capacitive loads)":"Lagging PF: Current lags voltage (inductive loads - most common)"},necReferences:["Power Factor: Ratio of real power to apparent power","Leading PF (capacitive): Synchronous motors, over-excited generators, capacitor banks","Lagging PF (inductive): Most common - motors, transformers, inductive loads","Poor power factor results in: Higher current draw, increased losses, utility penalties","Power factor correction: Add capacitors for lagging PF, add inductors for leading PF","Many utilities charge penalties for power factor below 0.90-0.95"]};cn(ne)}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${E.cardBorder}`,paddingBottom:"0.5rem"},children:"Calculation Mode"}),s.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:[{value:"from-kw-pf",label:"From kW and Power Factor"},{value:"from-kw-kvar",label:"From kW and kVAR"},{value:"from-kva-pf",label:"From kVA and Power Factor"},{value:"from-kva-kw",label:"From kVA and kW"}].map($=>s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:n===$.value?E.sectionBg:"transparent",border:`1px solid ${n===$.value?"#3b82f6":E.cardBorder}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseOver:F=>{n!==$.value&&(F.currentTarget.style.background=E.sectionBg)},onMouseOut:F=>{n!==$.value&&(F.currentTarget.style.background="transparent")},children:[s.jsx("input",{type:"radio",name:"calculationMode",value:$.value,checked:n===$.value,onChange:F=>i(F.target.value),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),s.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:E.cardText},children:$.label})]},$.value))})]}),s.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${E.cardBorder}`,paddingBottom:"0.5rem"},children:"Input Values"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[(n==="from-kw-pf"||n==="from-kw-kvar"||n==="from-kva-kw")&&s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:["Real Power ",s.jsx("br",{}),"(kW)"]}),s.jsx("input",{type:"number",value:o,onChange:$=>l($.target.value),placeholder:"Enter kW",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]}),n==="from-kw-kvar"&&s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Reactive Power (kVAR)"}),s.jsx("input",{type:"number",value:u,onChange:$=>h($.target.value),placeholder:"Enter kVAR",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]}),(n==="from-kva-pf"||n==="from-kva-kw")&&s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:["Apparent Power ",s.jsx("br",{})," (kVA)"]}),s.jsx("input",{type:"number",value:d,onChange:$=>g($.target.value),placeholder:"Enter kVA",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]}),(n==="from-kw-pf"||n==="from-kva-pf")&&s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:["Power Factor ",s.jsx("br",{}),"  ",s.jsx("br",{})]}),s.jsx("input",{type:"number",value:b,onChange:$=>S($.target.value),placeholder:"0.00 to 1.00",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Reactive Power Type"}),s.jsxs("select",{value:v,onChange:$=>N($.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"lagging",children:"Lagging (Inductive - Most Common)"}),s.jsx("option",{value:"leading",children:"Leading (Capacitive)"})]}),s.jsx("div",{style:{fontSize:"0.75rem",color:E.subtleText,marginTop:"0.25rem"},children:"Inductive: Motors, transformers | Capacitive: Capacitor banks, lightly loaded cables"})]})]}),C&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem"},children:"Power Triangle Results"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Real Power (kW)"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:C.kW.toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginTop:"0.25rem"},children:"Working Power"})]}),s.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Reactive Power (kVAR)"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:Math.abs(C.kVAR).toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginTop:"0.25rem"},children:C.isLeading?"Leading":"Lagging"})]}),s.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Apparent Power (kVA)"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:C.kVA.toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginTop:"0.25rem"},children:"Total Power"})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[s.jsxs("div",{style:{background:M(C.powerFactor).bg,border:`1px solid ${M(C.powerFactor).border}`,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:M(C.powerFactor).color,marginBottom:"0.25rem"},children:"Power Factor"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:M(C.powerFactor).color},children:C.powerFactor.toFixed(4)}),s.jsx("div",{style:{fontSize:"0.75rem",color:M(C.powerFactor).color,marginTop:"0.25rem"},children:M(C.powerFactor).quality})]}),s.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Phase Angle ()"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:[C.angle.toFixed(2),""]}),s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginTop:"0.25rem"},children:"V-I Phase Shift"})]})]})]}),s.jsx("div",{style:{background:E.sectionBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#3b82f6",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:E.labelText,lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",color:E.cardText,marginBottom:"0.5rem"},children:"Power Triangle Relationships:"}),s.jsxs("div",{style:{display:"grid",gap:"0.25rem"},children:[s.jsx("div",{children:" kVA = kW + kVAR (Pythagorean theorem)"}),s.jsx("div",{children:" Power Factor = kW  kVA = cos()"}),s.jsx("div",{children:" kVAR = kVA  sin()"}),s.jsxs("div",{children:[" ",C.isLeading?"Leading PF: Current leads voltage (capacitive loads)":"Lagging PF: Current lags voltage (inductive loads - most common)"]})]})]})]})}),C.powerFactor<.9&&s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"12px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Low Power Factor Alert"}),s.jsxs("div",{children:["Power factor below 0.90 may result in utility penalties and increased energy costs. Consider power factor correction using ",C.isLeading?"inductors (reactors)":"capacitor banks","to improve efficiency and reduce demand charges."]})]})]})})]})]})}),IB=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=me.useState("find-power"),[o,l]=me.useState("480"),[u,h]=me.useState(""),[d,g]=me.useState("0.85"),[b,S]=me.useState(""),[v,N]=me.useState("line-to-line"),[E,L]=me.useState(""),C={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},$=(()=>{const F=parseFloat(o),ne=parseFloat(u),ue=parseFloat(d),V=parseFloat(b),k=E?parseFloat(E)/100:1;if(n==="find-power"){if(!o||!u||!d)return null;const A=Math.sqrt(3)*F*ne*ue/1e3,O=Math.sqrt(3)*F*ne/1e3,I=Math.sqrt(Math.pow(O,2)-Math.pow(A,2));return{kW:A,kVA:O,kVAR:I,current:ne,voltage:F,powerFactor:ue,amps:ne}}else if(n==="find-current"){if(!o||!b||!d)return null;const A=V*1e3/(Math.sqrt(3)*F*ue),O=Math.sqrt(3)*F*A/1e3,I=Math.sqrt(Math.pow(O,2)-Math.pow(V,2));return{kW:V,kVA:O,kVAR:I,current:A,voltage:F,powerFactor:ue,amps:A}}else if(n==="motor-power"){if(!b||!E)return null;const A=V/k,O=V*1.341;let I=0;return o&&d&&(I=A*1e3/(Math.sqrt(3)*F*ue)),{inputKW:A,outputKW:V,outputHP:O,efficiency:k*100,amps:I,voltage:F,powerFactor:ue}}return null})();return me.useImperativeHandle(t,()=>({exportPDF:()=>{if(!$){alert("Please enter all required values before exporting to PDF");return}const F={"find-power":"Calculate Power from Voltage & Current","find-current":"Calculate Current from Power & Voltage","motor-power":"Motor Power & Efficiency Calculation"};let ne;n==="motor-power"?ne={calculatorName:"Three-Phase Power Calculator - Motor",inputs:{calculationMode:F[n],outputPower:`${b} kW`,efficiency:`${E}%`,...o&&{voltage:`${o}V (${v==="line-to-line"?"Line-to-Line":"Line-to-Neutral"})`},...d&&{powerFactor:d}},results:{outputPower:`${$.outputKW.toFixed(2)} kW`,outputPowerHP:`${$.outputHP.toFixed(2)} HP`,inputPower:`${$.inputKW.toFixed(2)} kW`,efficiency:`${$.efficiency.toFixed(1)}%`,...$.amps>0&&{estimatedCurrent:`${$.amps.toFixed(2)} A`}},additionalInfo:{formula:"Input Power = Output Power  Efficiency",hpConversion:"1 kW = 1.341 HP",note:E?`At ${E}% efficiency, motor draws ${$.inputKW.toFixed(2)} kW to produce ${$.outputKW.toFixed(2)} kW output`:""}}:ne={calculatorName:"Three-Phase Power Calculator",inputs:{calculationMode:F[n],voltage:`${o}V (${v==="line-to-line"?"Line-to-Line":"Line-to-Neutral"})`,...u&&{current:`${u} A`},...b&&{power:`${b} kW`},powerFactor:d},results:{realPower:`${$.kW.toFixed(2)} kW`,apparentPower:`${$.kVA.toFixed(2)} kVA`,reactivePower:`${$.kVAR.toFixed(2)} kVAR`,current:`${$.amps.toFixed(2)} A`,voltage:`${$.voltage}V`,powerFactor:$.powerFactor},additionalInfo:{powerFormula:"P = 3  V  I  PF (kW)",apparentPowerFormula:"S = 3  V  I (kVA)",currentFormula:"I = P / (3  V  PF)",sqrt3:"3 = 1.732",configuration:v==="line-to-line"?"Line-to-Line (most common)":"Line-to-Neutral",note:"Three-phase systems are more efficient for power transmission and are standard in industrial applications"},necReferences:["Three-phase power: P = 3  VL-L  I  PF","Line-to-Line voltage: Standard between any two phases","Line-to-Neutral voltage: VL-N = VL-L  3","Common voltages: 208V, 240V, 480V, 600V (North America)","Three-phase systems provide constant power delivery","More efficient than single-phase for large loads and motors"]},cn(ne)}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:C.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${C.cardBorder}`,paddingBottom:"0.5rem"},children:"Calculation Mode"}),s.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:[{value:"find-power",label:"Find Power (from Voltage & Current)"},{value:"find-current",label:"Find Current (from Power & Voltage)"},{value:"motor-power",label:"Motor Power & Efficiency"}].map(F=>s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:n===F.value?C.sectionBg:"transparent",border:`1px solid ${n===F.value?"#3b82f6":C.cardBorder}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseOver:ne=>{n!==F.value&&(ne.currentTarget.style.background=C.sectionBg)},onMouseOut:ne=>{n!==F.value&&(ne.currentTarget.style.background="transparent")},children:[s.jsx("input",{type:"radio",name:"calculationMode",value:F.value,checked:n===F.value,onChange:ne=>i(ne.target.value),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),s.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:C.cardText},children:F.label})]},F.value))})]}),s.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:C.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${C.cardBorder}`,paddingBottom:"0.5rem"},children:"Input Values"}),n==="motor-power"?s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Output Power (kW)"}),s.jsx("input",{type:"number",value:b,onChange:F=>S(F.target.value),placeholder:"Motor output power",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Motor Efficiency (%)"}),s.jsx("input",{type:"number",value:E,onChange:F=>L(F.target.value),placeholder:"85-95% typical",step:"0.1",min:"0",max:"100",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:C.subtleText,marginTop:"0.25rem"},children:"Optional: For current calculation, enter voltage and PF below"})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Voltage (V) - Optional"}),s.jsxs("select",{value:o,onChange:F=>l(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"",children:"Select"}),s.jsx("option",{value:"208",children:"208V"}),s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"380",children:"380V"}),s.jsx("option",{value:"400",children:"400V"}),s.jsx("option",{value:"415",children:"415V"}),s.jsx("option",{value:"480",children:"480V"}),s.jsx("option",{value:"600",children:"600V"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Power Factor - Optional"}),s.jsx("input",{type:"number",value:d,onChange:F=>g(F.target.value),placeholder:"0.80-0.95",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"}})]})]})]}):s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Voltage Configuration"}),s.jsxs("select",{value:v,onChange:F=>N(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"line-to-line",children:"Line-to-Line (Most Common)"}),s.jsx("option",{value:"line-to-neutral",children:"Line-to-Neutral"})]}),s.jsx("div",{style:{fontSize:"0.75rem",color:C.subtleText,marginTop:"0.25rem"},children:"Line-to-Line: Voltage between any two phases"})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Voltage (V)"}),s.jsxs("select",{value:o,onChange:F=>l(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"208",children:"208V"}),s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"380",children:"380V"}),s.jsx("option",{value:"400",children:"400V"}),s.jsx("option",{value:"415",children:"415V"}),s.jsx("option",{value:"480",children:"480V"}),s.jsx("option",{value:"600",children:"600V"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),s.jsx("input",{type:"number",value:d,onChange:F=>g(F.target.value),placeholder:"0.80-0.95",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"}})]})]}),n==="find-power"&&s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Current (Amps)"}),s.jsx("input",{type:"number",value:u,onChange:F=>h(F.target.value),placeholder:"Line current",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"}})]}),n==="find-current"&&s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Power (kW)"}),s.jsx("input",{type:"number",value:b,onChange:F=>S(F.target.value),placeholder:"Real power",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"}})]})]})]}),$&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:C.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),n==="motor-power"?s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[s.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:C.labelText,marginBottom:"0.25rem"},children:"Output Power"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:C.cardText},children:$.outputKW.toFixed(2)}),s.jsxs("div",{style:{fontSize:"0.75rem",color:C.labelText,marginTop:"0.25rem"},children:["kW (",$.outputHP.toFixed(2)," HP)"]})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Input Power Required"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:$.inputKW.toFixed(2)}),s.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:["kW @ ",$.efficiency.toFixed(1),"% efficiency"]})]})]}),$.amps>0&&s.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:C.labelText,marginBottom:"0.25rem"},children:"Estimated Current Draw"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:C.cardText},children:$.amps.toFixed(2)}),s.jsxs("div",{style:{fontSize:"0.75rem",color:C.labelText,marginTop:"0.25rem"},children:["Amps @ ",o,"V, PF ",d]})]})]}):s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:C.labelText,marginBottom:"0.25rem"},children:"Real Power (kW)"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:C.cardText},children:$.kW.toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:C.labelText,marginTop:"0.25rem"},children:"Working Power"})]}),s.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:C.labelText,marginBottom:"0.25rem"},children:"Apparent Power (kVA)"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:C.cardText},children:$.kVA.toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:C.labelText,marginTop:"0.25rem"},children:"Total Power"})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Current (A)"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:$.amps.toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Line Current"})]})]})]}),s.jsx("div",{style:{background:C.sectionBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#3b82f6",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:C.labelText,lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",color:C.cardText,marginBottom:"0.5rem"},children:n==="motor-power"?"Motor Efficiency:":"Three-Phase Formulas:"}),s.jsx("div",{style:{display:"grid",gap:"0.25rem"},children:n==="motor-power"?s.jsxs(s.Fragment,{children:[s.jsx("div",{children:" Input Power = Output Power  Efficiency"}),s.jsx("div",{children:" 1 kW = 1.341 HP"}),s.jsx("div",{children:" Typical motor efficiency: 85-95%"}),s.jsx("div",{children:" Higher efficiency motors use less power"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{children:" P (kW) = 3  V  I  PF  1000"}),s.jsx("div",{children:" S (kVA) = 3  V  I  1000"}),s.jsx("div",{children:" I (A) = P  1000  (3  V  PF)"}),s.jsx("div",{children:" 3 = 1.732 (constant for 3-phase)"}),s.jsxs("div",{children:[" ",v==="line-to-line"?"Using Line-to-Line voltage":"Using Line-to-Neutral voltage"]})]})})]})]})}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"12px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Three-Phase Advantages:"}),s.jsxs("div",{style:{display:"grid",gap:"0.25rem"},children:[s.jsx("div",{children:" Delivers constant, smooth power (no pulsation)"}),s.jsx("div",{children:" More efficient for high-power applications"}),s.jsx("div",{children:" Smaller conductor sizes for same power"}),s.jsx("div",{children:" Standard for industrial and commercial buildings"}),s.jsx("div",{children:" Required for large motors and heavy equipment"})]})]})]})})]})]})}),EB=({isDarkMode:r})=>{const[e,t]=me.useState(new Date),[n,i]=me.useState(new Date),[o,l]=me.useState([]),[u,h]=me.useState(!0),d={bg:r?"#000000":"#f9fafb",cardBg:r?"#0a0a0a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#666666":"#6b7280",border:r?"#1a1a1a":"#e5e7eb",selectedDay:"#3b82f6",todayBg:r?"#1a1a1a":"#f3f4f6"},g={scheduled:"#3b82f6","in-progress":"#f59e0b",completed:"#10b981"};me.useEffect(()=>{const w=Qm(qi,async B=>{if(B)try{const D=await Wu();l(D)}catch(D){console.error("Error loading jobs:",D)}finally{h(!1)}else l([]),h(!1)});return()=>w()},[]);const b=o.map(w=>({...w,dateObj:w.date?new Date(w.date+"T00:00:00"):null})),S=w=>new Date(w.getFullYear(),w.getMonth()+1,0).getDate(),v=w=>new Date(w.getFullYear(),w.getMonth(),1).getDay(),N=(w,B)=>!w||!B?!1:w.getDate()===B.getDate()&&w.getMonth()===B.getMonth()&&w.getFullYear()===B.getFullYear(),E=w=>N(w,new Date),L=w=>b.filter(B=>B.dateObj&&N(B.dateObj,w)),C=w=>b.some(B=>B.dateObj&&N(B.dateObj,w)),M=()=>{t(new Date(e.getFullYear(),e.getMonth()-1))},$=()=>{t(new Date(e.getFullYear(),e.getMonth()+1))},F=["January","February","March","April","May","June","July","August","September","October","November","December"],ne=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ue=S(e),V=v(e),k=[];for(let w=0;w<V;w++)k.push(null);for(let w=1;w<=ue;w++)k.push(new Date(e.getFullYear(),e.getMonth(),w));const A=L(n),O=new Date,I=b.filter(w=>w.dateObj&&w.dateObj>=O&&w.status==="scheduled").sort((w,B)=>w.dateObj-B.dateObj).slice(0,5);return u?s.jsx("div",{style:{minHeight:"100vh",background:d.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("div",{style:{color:d.text},children:"Loading..."})}):s.jsx("div",{style:{minHeight:"100vh",background:d.bg,paddingBottom:"5rem",maxWidth:"100vw",overflowX:"hidden"},children:s.jsxs("div",{style:{padding:"1rem"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5rem",marginBottom:"1rem",maxWidth:"100%",overflow:"hidden"},children:[s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#3b82f6",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:I.length}),s.jsx("div",{style:{fontSize:"0.75rem",color:d.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Upcoming"})]}),s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#f59e0b",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:o.filter(w=>w.status==="in-progress").length}),s.jsx("div",{style:{fontSize:"0.75rem",color:d.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"In Progress"})]}),s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10b981",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:o.filter(w=>w.status==="completed").length}),s.jsx("div",{style:{fontSize:"0.75rem",color:d.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Completed"})]})]}),s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem",boxShadow:"none"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[s.jsxs("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:"600",color:d.text},children:[F[e.getMonth()]," ",e.getFullYear()]}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsx("button",{onClick:M,style:{background:d.bg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",color:d.text},children:s.jsx(GT,{size:20})}),s.jsx("button",{onClick:$,style:{background:d.bg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",color:d.text},children:s.jsx(JT,{size:20})})]})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.25rem",marginBottom:"0.5rem"},children:ne.map(w=>s.jsx("div",{style:{textAlign:"center",fontSize:"0.75rem",fontWeight:"600",color:d.subtext,padding:"0.5rem 0"},children:w},w))}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.125rem"},children:k.map((w,B)=>{if(!w)return s.jsx("div",{},`empty-${B}`);const D=N(w,n),q=E(w),oe=C(w);return s.jsxs("button",{onClick:()=>i(w),style:{aspectRatio:"1",border:"none",borderRadius:"0.375rem",background:D?d.selectedDay:q?d.todayBg:"transparent",color:D?"white":d.text,cursor:"pointer",fontSize:"0.75rem",fontWeight:D||q?"600":"400",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",padding:"0.25rem",minWidth:0,width:"100%"},onMouseEnter:se=>{D||(se.currentTarget.style.background=d.todayBg)},onMouseLeave:se=>{!D&&!q?se.currentTarget.style.background="transparent":!D&&q&&(se.currentTarget.style.background=d.todayBg)},children:[w.getDate(),oe&&s.jsx("div",{style:{position:"absolute",bottom:"0.125rem",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"0.0625rem"},children:L(w).slice(0,3).map((se,ie)=>s.jsx("div",{style:{width:"3px",height:"3px",borderRadius:"50%",background:D?"white":g[se.status]}},ie))})]},B)})})]}),s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem",boxShadow:"none"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[s.jsx("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:"600",color:d.text},children:N(n,new Date)?"Today":n.toLocaleDateString("en-US",{month:"long",day:"numeric"})}),s.jsxs("span",{style:{fontSize:"0.75rem",color:d.subtext,background:d.bg,padding:"0.25rem 0.75rem",borderRadius:"1rem"},children:[A.length," ",A.length===1?"job":"jobs"]})]}),A.length===0?s.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem",color:d.subtext},children:[s.jsx(e1,{size:48,style:{margin:"0 auto 0.5rem",opacity:.3}}),s.jsx("p",{style:{margin:0,fontSize:"0.875rem"},children:"No jobs scheduled for this day"})]}):s.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:A.map(w=>s.jsxs("div",{style:{background:d.bg,border:`1px solid ${d.border}`,borderLeft:`4px solid ${g[w.status]}`,borderRadius:"0.5rem",padding:"1rem"},children:[s.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:s.jsxs("div",{children:[s.jsx("h4",{style:{margin:"0 0 0.25rem 0",fontSize:"1rem",fontWeight:"600",color:d.text},children:w.title||w.name}),s.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:d.subtext},children:w.client})]})}),s.jsxs("div",{style:{display:"grid",gap:"0.25rem",fontSize:"0.875rem",color:d.subtext},children:[w.time&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx(qm,{size:14}),s.jsxs("span",{children:[w.time,w.duration&&` (${w.duration})`]})]}),w.location&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx(sw,{size:14}),s.jsx("span",{children:w.location})]}),w.estimatedCost&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx(Q1,{size:14}),s.jsxs("span",{children:["$",Number(w.estimatedCost).toLocaleString()]})]})]})]},w.id))})]}),s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",boxShadow:"none"},children:[s.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"1.125rem",fontWeight:"600",color:d.text},children:"Upcoming Jobs"}),I.length===0?s.jsx("div",{style:{textAlign:"center",padding:"2rem 1rem",color:d.subtext},children:s.jsx("p",{style:{margin:0,fontSize:"0.875rem"},children:"No upcoming jobs scheduled"})}):s.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:I.map(w=>s.jsxs("div",{style:{background:d.bg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("h4",{style:{margin:"0 0 0.25rem 0",fontSize:"0.9375rem",fontWeight:"600",color:d.text},children:w.title||w.name}),s.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.8125rem",color:d.subtext},children:w.client}),s.jsxs("div",{style:{fontSize:"0.75rem",color:d.subtext,display:"flex",alignItems:"center",gap:"0.25rem"},children:[s.jsx(e1,{size:12}),w.dateObj.toLocaleDateString("en-US",{month:"short",day:"numeric"}),w.time&&` at ${w.time}`]})]}),s.jsx("div",{style:{width:"4px",height:"40px",borderRadius:"2px",background:g[w.status]}})]},w.id))})]})]})})},jB=({isDarkMode:r})=>{const[e,t]=me.useState(null),[n,i]=me.useState(!0),[o,l]=me.useState(!0),[u,h]=me.useState(""),[d,g]=me.useState(""),[b,S]=me.useState(""),v={bg:r?"#000000":"#f9fafb",cardBg:r?"#0a0a0a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#666666":"#6b7280",border:r?"#1a1a1a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"};me.useEffect(()=>{const C=Qm(qi,M=>{t(M),i(!1)});return()=>C()},[]);const N=async C=>{C.preventDefault(),S("");try{const M=await f8(qi,u,d);try{await fetch("/.netlify/functions/send-welcome-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u})})}catch($){console.error("Welcome email failed:",$)}alert("Welcome! Please check your email to verify your account."),h(""),g("")}catch(M){S(M.message)}},E=async C=>{C.preventDefault(),S("");try{await p8(qi,u,d),h(""),g("")}catch(M){S(M.message)}},L=async()=>{try{await y8(qi)}catch(C){S(C.message)}};return n?s.jsx("div",{style:{background:v.bg,minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("div",{style:{color:v.text},children:"Loading..."})}):e?s.jsx("div",{style:{background:v.bg,paddingBottom:"5rem"},children:s.jsxs("div",{style:{padding:"1rem"},children:[s.jsxs("div",{style:{background:v.cardBg,borderRadius:"0.75rem",border:`1px solid ${v.border}`,padding:"2rem 1rem",marginBottom:"1rem",textAlign:"center",boxShadow:"none"},children:[s.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:s.jsx(gm,{size:40,color:"white"})}),s.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:v.text,fontSize:"1.25rem",fontWeight:"600"},children:e.email}),s.jsx("p",{style:{margin:0,color:v.subtext,fontSize:"0.875rem"},children:"Electrician Account"})]}),s.jsxs("div",{style:{background:v.cardBg,borderRadius:"0.75rem",border:`1px solid ${v.border}`,overflow:"hidden",marginBottom:"1rem",boxShadow:"none"},children:[s.jsx("h3",{style:{margin:0,padding:"1rem",color:v.text,fontSize:"1rem",fontWeight:"600",borderBottom:`1px solid ${v.border}`},children:"Account Settings"}),s.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",borderBottom:`1px solid ${v.border}`,display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:v.text},children:[s.jsx(_y,{size:20,color:v.subtext}),s.jsxs("div",{style:{flex:1,textAlign:"left"},children:[s.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Email"}),s.jsx("div",{style:{fontSize:"0.8125rem",color:v.subtext},children:e.email})]})]}),s.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",borderBottom:`1px solid ${v.border}`,display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:v.text},children:[s.jsx(zT,{size:20,color:v.subtext}),s.jsxs("div",{style:{flex:1,textAlign:"left"},children:[s.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Notifications"}),s.jsx("div",{style:{fontSize:"0.8125rem",color:v.subtext},children:"Manage preferences"})]})]}),s.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:v.text},children:[s.jsx(I6,{size:20,color:v.subtext}),s.jsxs("div",{style:{flex:1,textAlign:"left"},children:[s.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Privacy & Security"}),s.jsx("div",{style:{fontSize:"0.8125rem",color:v.subtext},children:"Account protection"})]})]})]}),s.jsxs("button",{onClick:L,style:{width:"100%",padding:"1rem",background:"#ef4444",color:"white",border:"none",borderRadius:"0.75rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:"none"},children:[s.jsx(p6,{size:20}),"Log Out"]})]})}):s.jsx("div",{style:{background:v.bg,minHeight:"100vh",paddingBottom:"5rem"},children:s.jsx("div",{style:{padding:"1rem"},children:s.jsxs("div",{style:{background:v.cardBg,borderRadius:"0.75rem",border:`1px solid ${v.border}`,padding:"2rem 1rem",marginTop:"2rem",boxShadow:"none"},children:[s.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:s.jsx(gm,{size:40,color:"white"})}),s.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:v.text,fontSize:"1.5rem",fontWeight:"700",textAlign:"center"},children:o?"Welcome Back":"Create Account"}),s.jsx("p",{style:{margin:"0 0 2rem 0",color:v.subtext,fontSize:"0.875rem",textAlign:"center"},children:o?"Sign in to your account":"Sign up to get started"}),b&&s.jsx("div",{style:{padding:"0.75rem",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"0.5rem",color:"#dc2626",fontSize:"0.875rem",marginBottom:"1rem"},children:b}),s.jsxs("form",{onSubmit:o?E:N,children:[s.jsxs("div",{style:{marginBottom:"1rem"},children:[s.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:v.text,fontSize:"0.875rem",fontWeight:"500"},children:"Email"}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx(_y,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:v.subtext}}),s.jsx("input",{type:"email",value:u,onChange:C=>h(C.target.value),placeholder:"your@email.com",required:!0,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:`1px solid ${v.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:v.inputBg,color:v.text,boxSizing:"border-box"}})]})]}),s.jsxs("div",{style:{marginBottom:"1.5rem"},children:[s.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:v.text,fontSize:"0.875rem",fontWeight:"500"},children:"Password"}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx(h6,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:v.subtext}}),s.jsx("input",{type:"password",value:d,onChange:C=>g(C.target.value),placeholder:"",required:!0,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:`1px solid ${v.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:v.inputBg,color:v.text,boxSizing:"border-box"}})]})]}),s.jsx("button",{type:"submit",style:{width:"100%",padding:"0.875rem",background:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",marginBottom:"1rem"},children:o?"Sign In":"Sign Up"}),s.jsxs("div",{style:{textAlign:"center",color:v.subtext,fontSize:"0.875rem"},children:[o?"Don't have an account? ":"Already have an account? ",s.jsx("button",{type:"button",onClick:()=>{l(!o),S("")},style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",textDecoration:"underline"},children:o?"Sign Up":"Sign In"})]})]})]})})})},RB="_addJobButton_euajw_3",PB="_addJobContainer_euajw_19",Hb={addJobButton:RB,addJobContainer:PB},NB="_actionButtons_2jz29_3",BB="_cardHeader_2jz29_42",LB="_cardTitle_2jz29_49",Zg={actionButtons:NB,cardHeader:BB,cardTitle:LB},FB=({job:r,statusConfig:e,statusDropdownOpen:t,setStatusDropdownOpen:n,onUpdateStatus:i,onViewJob:o,onViewEstimate:l,onViewInvoice:u,isDarkMode:h,colors:d})=>{const g=me.useRef(null),[b,S]=me.useState(!1),v=e[r.status].icon,N=r.title||r.name;return s.jsxs("div",{onClick:()=>S(!b),style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"0.75rem",transition:"all 0.2s",cursor:"pointer",WebkitTapHighlightColor:"transparent",userSelect:"none"},children:[s.jsxs("div",{className:Zg.cardHeader,children:[s.jsxs("div",{className:Zg.cardTitle,children:[s.jsxs("h3",{style:{margin:"0 0 0.25rem 0",color:d.text,fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[N,b?s.jsx(QT,{size:18}):s.jsx(mm,{size:18})]}),s.jsx("p",{style:{margin:0,color:d.subtext,fontSize:"0.875rem"},children:r.client})]}),s.jsxs("div",{style:{position:"relative"},ref:t===r.id?g:null,children:[s.jsxs("button",{onClick:E=>{E.stopPropagation(),n(t===r.id?null:r.id)},style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",padding:"4px 8px",borderRadius:"4px",background:`${e[r.status].color}20`,color:e[r.status].color,fontSize:"11px",fontWeight:"600",whiteSpace:"nowrap",border:"none",cursor:"pointer",transition:"all 0.2s",lineHeight:"1",minHeight:"unset",minWidth:"unset",height:"fit-content",width:"fit-content",boxSizing:"border-box"},children:[s.jsx(v,{size:12}),s.jsx("span",{children:e[r.status].label})]}),t===r.id&&s.jsx("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.5rem",background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:100,minWidth:"140px",overflow:"hidden"},children:Object.entries(e).map(([E,L])=>{const C=L.icon;return s.jsxs("button",{onClick:M=>{M.stopPropagation(),i(r.id,E)},style:{width:"100%",padding:"0.625rem 0.75rem",background:r.status===E?`${L.color}20`:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:L.color,fontSize:"0.875rem",fontWeight:r.status===E?"600":"500",transition:"background 0.2s"},onMouseEnter:M=>{r.status!==E&&(M.target.style.background=h?"#2a2a2a":"#f3f4f6")},onMouseLeave:M=>{r.status!==E&&(M.target.style.background="transparent")},children:[s.jsx(C,{size:16}),s.jsx("span",{children:L.label})]},E)})})]})]}),(r.location||r.date)&&s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem",color:d.subtext,fontSize:"0.875rem",gap:"1rem"},children:[r.location&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx(sw,{size:16}),s.jsx("span",{children:r.location})]}),r.date&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginLeft:"auto"},children:[s.jsx(e1,{size:16}),s.jsxs("span",{children:[new Date(r.date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),r.time&&` (${r.time})`,r.duration&&` ${r.duration}`]})]})]}),b&&s.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:`1px solid ${d.border}`},children:[r.estimatedCost&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:d.subtext,fontSize:"0.875rem"},children:[s.jsx(Q1,{size:16}),s.jsxs("span",{children:["$",Number(r.estimatedCost).toLocaleString()]})]}),r.notes&&s.jsx("div",{style:{marginTop:"0.5rem"},children:s.jsx("p",{style:{margin:0,padding:"0.75rem",background:d.bg,borderRadius:"0.5rem",color:d.text,fontSize:"0.875rem",lineHeight:"1.5"},children:r.notes})})]}),s.jsxs("div",{className:Zg.actionButtons,children:[s.jsxs("button",{onClick:E=>{E.stopPropagation(),o(r)},title:"Edit Job",style:{background:"#2563eb",border:"none",borderRadius:"0.5rem",color:"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:"600"},children:[s.jsx(pw,{size:16}),s.jsx("span",{children:"Edit"})]}),s.jsxs("button",{onClick:E=>{E.stopPropagation(),l(r)},title:r.estimateId?"View Estimate":"No estimate linked",style:{background:r.estimateId?"#10b981":d.border,border:"none",borderRadius:"0.5rem",color:"white",cursor:r.estimateId?"pointer":"not-allowed",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:"600",opacity:r.estimateId?1:.5},disabled:!r.estimateId,children:[s.jsx(jf,{size:16}),s.jsx("span",{children:"Estimate"})]}),s.jsxs("button",{onClick:E=>{E.stopPropagation(),u(r)},title:r.invoiceId?"View Invoice":"No invoice linked",style:{background:r.invoiceId?"#f59e0b":d.border,border:"none",borderRadius:"0.5rem",color:"white",cursor:r.invoiceId?"pointer":"not-allowed",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:"600",opacity:r.invoiceId?1:.5},disabled:!r.invoiceId,children:[s.jsx(X1,{size:16}),s.jsx("span",{children:"Invoice"})]})]})]})},zB=({linkedEstimate:r,estimates:e,showMenu:t,setShowMenu:n,onSelectEstimate:i,onCreateNewEstimate:o,onViewEstimate:l,onRemoveEstimate:u,menuRef:h,isDarkMode:d,colors:g})=>r?s.jsxs("div",{style:{marginBottom:"0.75rem"},children:[s.jsxs("button",{type:"button",onClick:()=>l(r.id),style:{width:"100%",padding:"0.75rem",background:g.bg,border:`1px solid ${g.border}`,borderRadius:"0.5rem",cursor:"pointer",textAlign:"left",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:g.text,marginBottom:"0.25rem"},children:r.name}),s.jsxs("div",{style:{fontSize:"0.75rem",color:g.subtext},children:["$",Number(r.total||0).toLocaleString()]})]}),s.jsx("div",{style:{padding:"0.25rem 0.5rem",background:"#2563eb",color:"white",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:"View"})]}),s.jsx("button",{type:"button",onClick:u,style:{width:"100%",padding:"0.5rem",marginTop:"0.5rem",background:"transparent",border:`1px solid ${g.border}`,borderRadius:"0.5rem",color:g.subtext,cursor:"pointer",fontSize:"0.75rem"},children:"Remove Estimate"})]}):s.jsxs("div",{style:{position:"relative",marginBottom:"0.75rem"},ref:t?h:null,children:[s.jsxs("button",{type:"button",onClick:()=>n(!t),style:{width:"100%",padding:"0.75rem",background:g.inputBg,border:`1px solid ${g.border}`,borderRadius:"0.5rem",color:"#2563eb",cursor:"pointer",fontSize:"0.9375rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[s.jsx(ma,{size:18}),"Add Estimate"]}),t&&s.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"0.5rem",background:g.cardBg,border:`1px solid ${g.border}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:100,maxHeight:"200px",overflowY:"auto"},children:[s.jsxs("button",{type:"button",onClick:o,style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${g.border}`,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563eb",fontSize:"0.875rem",fontWeight:"600",textAlign:"left"},onMouseEnter:b=>b.target.style.background=d?"#2a2a2a":"#f3f4f6",onMouseLeave:b=>b.target.style.background="transparent",children:[s.jsx(ma,{size:16}),"Create New Estimate"]}),e.length===0?s.jsx("div",{style:{padding:"1rem",textAlign:"center",color:g.subtext,fontSize:"0.875rem"},children:"No estimates available"}):e.map(b=>s.jsxs("button",{type:"button",onClick:()=>i(b),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${g.border}`,cursor:"pointer",textAlign:"left",color:g.text,fontSize:"0.875rem"},onMouseEnter:S=>S.target.style.background=d?"#2a2a2a":"#f3f4f6",onMouseLeave:S=>S.target.style.background="transparent",children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:b.name||"Untitled Estimate"}),s.jsxs("div",{style:{color:g.subtext,fontSize:"0.75rem"},children:["$",Number(b.total||0).toLocaleString()]})]},b.id))]})]}),L4=({formData:r,setFormData:e,linkedEstimate:t,estimates:n,showEstimateMenu:i,setShowEstimateMenu:o,onSelectEstimate:l,onCreateNewEstimate:u,onViewEstimate:h,onRemoveEstimate:d,estimateMenuRef:g,isDarkMode:b,colors:S})=>s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"text",placeholder:"Job Title *",value:r.title,onChange:v=>e(N=>({...N,title:v.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}}),s.jsx("input",{type:"text",placeholder:"Client Name *",value:r.client,onChange:v=>e(N=>({...N,client:v.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}}),s.jsx("input",{type:"text",placeholder:"Location",value:r.location,onChange:v=>e(N=>({...N,location:v.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[s.jsx("input",{type:"date",value:r.date,onChange:v=>e(N=>({...N,date:v.target.value})),style:{padding:"0.75rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}}),s.jsx("input",{type:"time",value:r.time,onChange:v=>e(N=>({...N,time:v.target.value})),style:{padding:"0.75rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}})]}),s.jsx(zB,{linkedEstimate:t,estimates:n,showMenu:i,setShowMenu:o,onSelectEstimate:l,onCreateNewEstimate:u,onViewEstimate:h,onRemoveEstimate:d,menuRef:g,isDarkMode:b,colors:S}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[s.jsx("input",{type:"number",placeholder:"Cost ($)",value:r.estimatedCost,onChange:v=>e(N=>({...N,estimatedCost:v.target.value})),style:{padding:"0.75rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}}),s.jsx("input",{type:"text",placeholder:"Duration",value:r.duration,onChange:v=>e(N=>({...N,duration:v.target.value})),style:{padding:"0.75rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}})]}),s.jsxs("select",{value:r.status,onChange:v=>e(N=>({...N,status:v.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"},children:[s.jsx("option",{value:"scheduled",children:"Scheduled"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"})]}),s.jsx("textarea",{placeholder:"Notes",value:r.notes,onChange:v=>e(N=>({...N,notes:v.target.value})),rows:"3",style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box",resize:"vertical"}})]}),VB=({viewingJob:r,formData:e,setFormData:t,linkedEstimate:n,estimates:i,showEstimateMenu:o,setShowEstimateMenu:l,onSelectEstimate:u,onCreateNewEstimate:h,onViewEstimate:d,onRemoveEstimate:g,estimateMenuRef:b,onClose:S,onSave:v,onDelete:N,isDarkMode:E,colors:L})=>r?s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:S,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:1e3,animation:"fadeIn 0.2s"}}),s.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:L.cardBg,borderRadius:"1rem",padding:"1.5rem",paddingBottom:"calc(100px + env(safe-area-inset-bottom))",width:"90%",maxWidth:"500px",maxHeight:"80vh",overflowY:"auto",zIndex:1001,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.3)",WebkitOverflowScrolling:"touch"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[s.jsx("h2",{style:{margin:0,fontSize:"1.25rem",fontWeight:"600",color:L.text},children:"Job Details"}),s.jsx("button",{onClick:S,style:{background:"transparent",border:"none",cursor:"pointer",padding:"0.5rem",color:L.subtext,display:"flex",alignItems:"center"},children:s.jsx(vw,{size:24})})]}),s.jsxs("div",{children:[s.jsx(L4,{formData:e,setFormData:t,linkedEstimate:n,estimates:i,showEstimateMenu:o,setShowEstimateMenu:l,onSelectEstimate:u,onCreateNewEstimate:h,onViewEstimate:d,onRemoveEstimate:g,estimateMenuRef:b,isDarkMode:E,colors:L}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsx("button",{onClick:v,disabled:!e.title||!e.client,style:{flex:1,padding:"0.75rem",background:!e.title||!e.client?L.border:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:!e.title||!e.client?"not-allowed":"pointer",opacity:!e.title||!e.client?.5:1},children:"Save Changes"}),s.jsx("button",{onClick:()=>N(r.id,r.title||r.name),style:{padding:"0.75rem",background:"transparent",color:"#ef4444",border:"1px solid #ef4444",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.25rem"},children:s.jsx(Tc,{size:16})})]})]})]})]}):null,OB=({activeStatusTab:r,setActiveStatusTab:e,statusCounts:t,statusConfig:n,colors:i})=>s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.375rem",marginBottom:"1rem"},children:[s.jsxs("button",{onClick:()=>e("all"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${r==="all"?i.text:i.border}`,background:r==="all"?i.text:"transparent",color:r==="all"?i.bg:i.text,fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"0.375rem",transition:"all 0.2s"},children:[s.jsx("span",{children:"All"}),s.jsx("span",{style:{background:r==="all"?i.bg:i.cardBg,color:r==="all"?i.text:i.subtext,padding:"0.125rem 0.375rem",borderRadius:"1rem",fontSize:"0.7rem",fontWeight:"700",minWidth:"1.25rem",textAlign:"center"},children:t.all})]}),s.jsxs("button",{onClick:()=>e("scheduled"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${r==="scheduled"?n.scheduled.color:i.border}`,background:r==="scheduled"?`${n.scheduled.color}20`:"transparent",color:r==="scheduled"?n.scheduled.color:i.text,fontSize:"0.7rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.125rem",transition:"all 0.2s"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[s.jsx(qm,{size:12}),s.jsx("span",{style:{background:r==="scheduled"?n.scheduled.color:i.cardBg,color:r==="scheduled"?"white":i.subtext,padding:"0.125rem 0.3rem",borderRadius:"1rem",fontSize:"0.65rem",fontWeight:"700",minWidth:"1.25rem",textAlign:"center"},children:t.scheduled})]}),s.jsx("span",{style:{fontSize:"0.65rem"},children:"Scheduled"})]}),s.jsxs("button",{onClick:()=>e("in-progress"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${r==="in-progress"?n["in-progress"].color:i.border}`,background:r==="in-progress"?`${n["in-progress"].color}20`:"transparent",color:r==="in-progress"?n["in-progress"].color:i.text,fontSize:"0.7rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.125rem",transition:"all 0.2s"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[s.jsx(Ef,{size:12}),s.jsx("span",{style:{background:r==="in-progress"?n["in-progress"].color:i.cardBg,color:r==="in-progress"?"white":i.subtext,padding:"0.125rem 0.3rem",borderRadius:"1rem",fontSize:"0.65rem",fontWeight:"700",minWidth:"1.25rem",textAlign:"center"},children:t["in-progress"]})]}),s.jsx("span",{style:{fontSize:"0.65rem"},children:"In Progress"})]}),s.jsxs("button",{onClick:()=>e("completed"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${r==="completed"?n.completed.color:i.border}`,background:r==="completed"?`${n.completed.color}20`:"transparent",color:r==="completed"?n.completed.color:i.text,fontSize:"0.7rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.125rem",transition:"all 0.2s"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[s.jsx(En,{size:12}),s.jsx("span",{style:{background:r==="completed"?n.completed.color:i.cardBg,color:r==="completed"?"white":i.subtext,padding:"0.125rem 0.3rem",borderRadius:"1rem",fontSize:"0.65rem",fontWeight:"700",minWidth:"1.25rem",textAlign:"center"},children:t.completed})]}),s.jsx("span",{style:{fontSize:"0.65rem"},children:"Completed"})]})]}),MB=({isDarkMode:r,onNavigateToEstimates:e})=>{var _e;const[t,n]=me.useState([]),[i,o]=me.useState(!0),[l,u]=me.useState(!1),[h,d]=me.useState(null),[g,b]=me.useState(null),[S,v]=me.useState(null),[N,E]=me.useState(!1),[L,C]=me.useState([]),M=me.useRef(null),[$,F]=me.useState(null),[ne,ue]=me.useState(""),[V,k]=me.useState("all"),[A,O]=me.useState({title:"",client:"",location:"",status:"scheduled",date:"",time:"",estimatedCost:"",duration:"",notes:""}),I={bg:r?"#000000":"#f9fafb",cardBg:r?"#1a1a1a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#999999":"#6b7280",border:r?"#2a2a2a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"},w={scheduled:{color:"#3b82f6",icon:qm,label:"Scheduled"},"in-progress":{color:"#f59e0b",icon:Ef,label:"In Progress"},completed:{color:"#10b981",icon:En,label:"Completed"}};me.useEffect(()=>{let he=null;const xe=Qm(qi,async Pe=>{Pe?(B(),he=P4(Pe.uid,Ue=>{console.log(" Real-time update received"),n(Ue),o(!1)})):o(!1)});return()=>{xe(),he&&he()}},[]),me.useEffect(()=>{const he=async()=>{try{const{getUserEstimates:xe}=await fu(async()=>{const{getUserEstimates:Ue}=await Promise.resolve().then(()=>Gb);return{getUserEstimates:Ue}},void 0),Pe=await xe();C(Pe)}catch(xe){console.error("Error loading estimates:",xe)}};qi.currentUser&&he()},[]),me.useEffect(()=>{const he=xe=>{M.current&&!M.current.contains(xe.target)&&E(!1)};return document.addEventListener("mousedown",he),()=>document.removeEventListener("mousedown",he)},[]);const B=async()=>{o(!0);try{const he=await Wu();n(he)}catch(he){console.error("Error loading jobs:",he),alert("Failed to load jobs. Please try again.")}finally{o(!1)}},D=()=>{O({title:"",client:"",location:"",status:"scheduled",date:"",time:"",estimatedCost:"",duration:"",notes:""}),u(!1),b(null),d(null),F(null)},q=async()=>{if(A.title&&A.client)try{const he={name:A.title,title:A.title,client:A.client,location:A.location,status:A.status,date:A.date,time:A.time,estimatedCost:A.estimatedCost,duration:A.duration,notes:A.notes,estimateId:($==null?void 0:$.id)||null};await K1(he),D()}catch(he){console.error("Error adding job:",he),alert("Failed to add job. Please try again.")}},oe=async()=>{if(A.title&&A.client&&g)try{const{updateJob:he}=await fu(async()=>{const{updateJob:Pe}=await Promise.resolve().then(()=>Ob);return{updateJob:Pe}},void 0),xe={name:A.title,title:A.title,client:A.client,location:A.location,status:A.status,date:A.date,time:A.time,estimatedCost:A.estimatedCost,duration:A.duration,notes:A.notes,estimateId:($==null?void 0:$.id)||null};await he(g.id,xe),D()}catch(he){console.error("Error updating job:",he),alert("Failed to update job. Please try again.")}},se=async(he,xe)=>{try{const{updateJob:Pe}=await fu(async()=>{const{updateJob:Xe}=await Promise.resolve().then(()=>Ob);return{updateJob:Xe}},void 0),Ue=t.find(Xe=>Xe.id===he);await Pe(he,{...Ue,status:xe}),v(null)}catch(Pe){console.error("Error updating status:",Pe),alert("Failed to update status. Please try again.")}},ie=he=>{if(d(he),b(he),O({title:he.title||he.name,client:he.client,location:he.location||"",status:he.status,date:he.date||"",time:he.time||"",estimatedCost:he.estimatedCost||"",duration:he.duration||"",notes:he.notes||""}),he.estimateId){const xe=L.find(Pe=>Pe.id===he.estimateId);xe&&F(xe)}else F(null)},ve=async(he,xe)=>{if(window.confirm(`Are you sure you want to delete "${xe}"?`))try{await N4(he),h&&h.id===he&&D()}catch(Pe){console.error("Error deleting job:",Pe),alert("Failed to delete job. Please try again.")}},be=he=>{he&&(O(xe=>({...xe,estimatedCost:he.total.toString(),estimateId:he.id})),F(he)),E(!1)},Z=async()=>{if(E(!1),l&&A.title&&A.client)try{const he={name:A.title,title:A.title,client:A.client,location:A.location,status:A.status,date:A.date,time:A.time,estimatedCost:A.estimatedCost,duration:A.duration,notes:A.notes},Pe={jobId:await K1(he),jobName:A.title,jobClient:A.client};e&&e(Pe),D()}catch(he){console.error("Error creating job:",he),alert("Failed to create job. Please try again.")}else if(h){const he={jobId:h.id,jobName:h.title||h.name,jobClient:h.client};e&&e(he)}else alert("Please fill in the job title and client name first.")},W=he=>{e&&e({viewEstimateId:he})},J=()=>{F(null),O(he=>({...he,estimatedCost:"",estimateId:null}))},re=async he=>{if(E(he),he===!0)try{const{getUserEstimates:xe}=await fu(async()=>{const{getUserEstimates:Ue}=await Promise.resolve().then(()=>Gb);return{getUserEstimates:Ue}},void 0),Pe=await xe();C(Pe)}catch(xe){console.error("Error loading estimates:",xe)}},fe=t.filter(he=>{if(ne){const xe=ne.toLowerCase(),Pe=(he.title||he.name||"").toLowerCase(),Ue=(he.client||"").toLowerCase(),Xe=(he.location||"").toLowerCase(),Ze=(he.notes||"").toLowerCase();if(!(Pe.includes(xe)||Ue.includes(xe)||Xe.includes(xe)||Ze.includes(xe)))return!1}return V==="all"?!0:he.status===V}),ge={all:t.length,scheduled:t.filter(he=>he.status==="scheduled").length,"in-progress":t.filter(he=>he.status==="in-progress").length,completed:t.filter(he=>he.status==="completed").length};return i?s.jsx("div",{style:{minHeight:"100vh",background:I.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("div",{style:{color:I.subtext},children:"Loading jobs..."})}):s.jsx("div",{className:"jobs-container",children:s.jsxs("div",{style:{minHeight:"100vh",background:I.bg,paddingBottom:"5rem"},children:[s.jsx(VB,{viewingJob:h,formData:A,setFormData:O,linkedEstimate:$,estimates:L,showEstimateMenu:N,setShowEstimateMenu:re,onSelectEstimate:be,onCreateNewEstimate:Z,onViewEstimate:W,onRemoveEstimate:J,estimateMenuRef:M,onClose:D,onSave:oe,onDelete:ve,isDarkMode:r,colors:I}),s.jsxs("div",{style:{padding:"1rem 0.25rem"},children:[s.jsx(OB,{activeStatusTab:V,setActiveStatusTab:k,statusCounts:ge,statusConfig:w,colors:I}),s.jsxs("div",{style:{marginBottom:"1rem",position:"relative"},children:[s.jsx("input",{type:"text",placeholder:"Search jobs...",value:ne,onChange:he=>ue(he.target.value),style:{width:"100%",padding:"0.75rem",paddingLeft:"2.5rem",paddingRight:ne?"2.5rem":"0.75rem",border:`1px solid ${I.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:I.inputBg,color:I.text,boxSizing:"border-box"}}),s.jsx(dw,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:I.subtext,pointerEvents:"none"}}),ne&&s.jsx("button",{onClick:()=>ue(""),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:I.subtext,padding:"0.25rem",display:"flex",alignItems:"center"},children:s.jsx(vw,{size:18})})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0 0.25rem"},children:[s.jsx("h3",{style:{margin:0,color:I.text,fontSize:"1.125rem",fontWeight:"600"},children:V==="all"?"All Jobs":V==="scheduled"?"Scheduled Jobs":V==="in-progress"?"In Progress Jobs":"Completed Jobs"}),s.jsxs("span",{style:{fontSize:"0.875rem",color:I.subtext,background:I.cardBg,padding:"0.25rem 0.75rem",borderRadius:"1rem",border:`1px solid ${I.border}`},children:[fe.length," ",fe.length===1?"job":"jobs"]})]}),s.jsxs("div",{className:Hb.addJobContainer,style:{background:I.cardBg,border:`1px solid ${I.border}`},children:[s.jsxs("button",{onClick:()=>u(!l),className:Hb.addJobButton,style:{color:I.text},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:[s.jsx(ma,{size:18}),"Add New Job"]}),s.jsx(mm,{size:18,style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),l&&s.jsx("div",{style:{padding:"0 1rem 1rem 1rem",borderTop:`1px solid ${I.border}`},children:s.jsxs("div",{style:{paddingTop:"1rem"},children:[s.jsx(L4,{formData:A,setFormData:O,linkedEstimate:$,estimates:L,showEstimateMenu:N,setShowEstimateMenu:re,onSelectEstimate:be,onCreateNewEstimate:Z,onViewEstimate:W,onRemoveEstimate:J,estimateMenuRef:M,isDarkMode:r,colors:I}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsx("button",{onClick:q,disabled:!A.title||!A.client,style:{flex:1,padding:"0.75rem",background:!A.title||!A.client?I.border:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:!A.title||!A.client?"not-allowed":"pointer",opacity:!A.title||!A.client?.5:1},children:"Add Job"}),s.jsx("button",{onClick:D,style:{flex:1,padding:"0.75rem",background:"transparent",color:I.text,border:`1px solid ${I.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})})]}),fe.length===0?s.jsxs("div",{style:{background:I.cardBg,border:`1px solid ${I.border}`,borderRadius:"0.75rem",textAlign:"center",padding:"3rem 1rem",color:I.subtext},children:[s.jsx(Lu,{size:48,style:{margin:"0 auto 1rem",opacity:.5}}),s.jsx("p",{style:{margin:0,fontSize:"0.9375rem"},children:ne?"No jobs match your search.":V==="all"?"No jobs yet. Add your first job above!":`No ${(_e=w[V])==null?void 0:_e.label.toLowerCase()} jobs.`})]}):[...fe].sort((he,xe)=>!he.date&&!xe.date?0:he.date?xe.date?new Date(xe.date)-new Date(he.date):-1:1).map(he=>s.jsx(FB,{job:he,statusConfig:w,statusDropdownOpen:S,setStatusDropdownOpen:v,onUpdateStatus:se,onViewJob:ie,onViewEstimate:xe=>{xe.estimateId&&e&&e({viewEstimateId:xe.estimateId})},onViewInvoice:xe=>{xe.invoiceId&&console.log("View invoice:",xe.invoiceId)},isDarkMode:r,colors:I},he.id))]})]})})},F4=async()=>{try{const r=qi.currentUser;if(!r)throw new Error("No user logged in");const e=lh(ba,"estimates"),t=r2(e,nN("userId","==",r.uid)),n=await k4(t),i=[];return n.forEach(o=>{var l;i.push({id:o.id,...o.data(),createdAt:((l=o.data().createdAt)==null?void 0:l.toDate())||new Date})}),i}catch(r){throw console.error("Error getting estimates:",r),r}},z4=async r=>{try{const e=qi.currentUser;if(!e)throw new Error("No user logged in");const t=lh(ba,"estimates");return(await s2(t,{...r,userId:e.uid,createdAt:Xd(),updatedAt:Xd()})).id}catch(e){throw console.error("Error creating estimate:",e),e}},V4=async(r,e)=>{try{if(!qi.currentUser)throw new Error("No user logged in");const n=ch(ba,"estimates",r);await I4(n,{...e,updatedAt:Xd()})}catch(t){throw console.error("Error updating estimate:",t),t}},O4=async r=>{try{if(!qi.currentUser)throw new Error("No user logged in");const t=ch(ba,"estimates",r);await E4(t)}catch(e){throw console.error("Error deleting estimate:",e),e}},Gb=Object.freeze(Object.defineProperty({__proto__:null,createEstimate:z4,deleteEstimate:O4,getUserEstimates:F4,updateEstimate:V4},Symbol.toStringTag,{value:"Module"})),DB=({isDarkMode:r,jobs:e=[],onApplyToJob:t,pendingEstimateData:n,onClearPendingData:i,navigationData:o})=>{const[l,u]=me.useState([]),[h,d]=me.useState(!0),[g,b]=me.useState(!1),[S,v]=me.useState(null),[N,E]=me.useState(null),[L,C]=me.useState({name:"",laborHours:"",laborRate:"",materials:[],jobId:null}),[M,$]=me.useState({name:"",cost:""}),F={bg:r?"#000000":"#f9fafb",cardBg:r?"#1a1a1a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#999999":"#6b7280",border:r?"#2a2a2a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"};me.useEffect(()=>{const q=Qm(qi,oe=>{oe?ne():d(!1)});return()=>q()},[]),me.useEffect(()=>{n&&(C({name:n.jobName||"",laborHours:"",laborRate:"",materials:[],jobId:n.jobId||null}),b(!0),i&&i())},[n,i]),me.useEffect(()=>{if(o!=null&&o.viewEstimateId){const q=l.find(oe=>oe.id===o.viewEstimateId);q&&w(q)}},[o,l]);const ne=async()=>{d(!0);try{const q=await F4();u(q)}catch(q){console.error("Error loading estimates:",q),alert("Failed to load estimates. Please try again.")}finally{d(!1)}},ue=(q,oe,se)=>{const ie=(parseFloat(q)||0)*(parseFloat(oe)||0),ve=se.reduce((be,Z)=>be+(parseFloat(Z.cost)||0),0);return ie+ve},V=ue(L.laborHours,L.laborRate,L.materials),k=()=>{M.name&&M.cost&&(C(q=>({...q,materials:[...q.materials,{...M}]})),$({name:"",cost:""}))},A=q=>{C(oe=>({...oe,materials:oe.materials.filter((se,ie)=>ie!==q)}))},O=async()=>{if(L.name)try{const q=ue(L.laborHours,L.laborRate,L.materials),oe={name:L.name,laborHours:parseFloat(L.laborHours)||0,laborRate:parseFloat(L.laborRate)||0,materials:L.materials,total:q,jobId:L.jobId||null};S?await V4(S.id,oe):await z4(oe),I(),ne()}catch(q){console.error("Error saving estimate:",q),alert("Failed to save estimate. Please try again.")}},I=()=>{C({name:"",laborHours:"",laborRate:"",materials:[],jobId:null}),$({name:"",cost:""}),b(!1),v(null)},w=q=>{v(q),C({name:q.name,laborHours:q.laborHours.toString(),laborRate:q.laborRate.toString(),materials:[...q.materials],jobId:q.jobId||null}),b(!0),window.scrollTo({top:0,behavior:"smooth"})},B=async(q,oe)=>{if(window.confirm(`Delete "${oe}"?`))try{await O4(q),ne()}catch(se){console.error("Error deleting estimate:",se),alert("Failed to delete estimate. Please try again.")}},D=(q,oe)=>{t&&t(q,oe),E(null)};return h?s.jsx("div",{style:{minHeight:"100vh",background:F.bg,display:"flex",alignItems:"center",justifyContent:"center",paddingBottom:"5rem"},children:s.jsx("div",{style:{color:F.subtext},children:"Loading estimates..."})}):s.jsx("div",{style:{background:F.bg,minHeight:"100vh",paddingBottom:"5rem"},children:s.jsxs("div",{style:{padding:"1rem"},children:[s.jsxs("div",{style:{background:F.cardBg,borderRadius:"0.75rem",border:`1px solid ${F.border}`,boxShadow:"none",marginBottom:"1rem",overflow:"hidden"},children:[s.jsxs("button",{onClick:()=>b(!g),style:{width:"100%",padding:"1rem",background:"transparent",border:"none",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",color:F.text},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:[s.jsx(ma,{size:20}),S?"Edit Estimate":"New Estimate"]}),s.jsx(mm,{size:20,style:{transform:g?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),g&&s.jsx("div",{style:{padding:"0 1rem 1rem 1rem",borderTop:`1px solid ${F.border}`},children:s.jsxs("div",{style:{paddingTop:"1rem"},children:[s.jsx("input",{type:"text",placeholder:"Estimate Name *",value:L.name,onChange:q=>C(oe=>({...oe,name:q.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}}),s.jsx("h4",{style:{margin:"0 0 0.5rem 0",fontSize:"0.875rem",fontWeight:"600",color:F.text},children:"Labor"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[s.jsx("input",{type:"number",placeholder:"Hours",value:L.laborHours,onChange:q=>C(oe=>({...oe,laborHours:q.target.value})),style:{padding:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}}),s.jsx("input",{type:"number",placeholder:"Rate ($/hr)",value:L.laborRate,onChange:q=>C(oe=>({...oe,laborRate:q.target.value})),style:{padding:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}})]}),s.jsx("h4",{style:{margin:"1rem 0 0.5rem 0",fontSize:"0.875rem",fontWeight:"600",color:F.text},children:"Materials"}),L.materials.map((q,oe)=>s.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem",padding:"0.75rem",background:F.bg,borderRadius:"0.5rem"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:F.text},children:q.name}),s.jsxs("div",{style:{fontSize:"0.75rem",color:F.subtext},children:["$",parseFloat(q.cost).toFixed(2)]})]}),s.jsx("button",{onClick:()=>A(oe),style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",padding:"0.25rem"},children:s.jsx(Tc,{size:16})})]},oe)),s.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[s.jsx("input",{type:"text",placeholder:"Material name",value:M.name,onChange:q=>$(oe=>({...oe,name:q.target.value})),style:{flex:1,padding:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.875rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}}),s.jsx("input",{type:"number",placeholder:"Cost",value:M.cost,onChange:q=>$(oe=>({...oe,cost:q.target.value})),style:{width:"100px",padding:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.875rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}}),s.jsx("button",{onClick:k,style:{padding:"0.75rem",background:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center"},children:s.jsx(ma,{size:16})})]}),s.jsx("div",{style:{padding:"0.75rem",background:F.bg,borderRadius:"0.5rem",marginBottom:"0.75rem"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.125rem",fontWeight:"600",color:F.text},children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{children:["$",V.toFixed(2)]})]})}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsxs("button",{onClick:O,disabled:!L.name,style:{flex:1,padding:"0.75rem",background:L.name?"#2563eb":F.border,color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:L.name?"pointer":"not-allowed",opacity:L.name?1:.5},children:[S?"Update":"Save"," Estimate"]}),s.jsx("button",{onClick:I,style:{flex:1,padding:"0.75rem",background:"transparent",color:F.text,border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0 0.25rem"},children:[s.jsx("h3",{style:{margin:0,color:F.text,fontSize:"1.125rem",fontWeight:"600"},children:"Saved Estimates"}),s.jsx("span",{style:{fontSize:"0.875rem",color:F.subtext,background:F.cardBg,padding:"0.25rem 0.75rem",borderRadius:"1rem",border:`1px solid ${F.border}`},children:l.length})]}),l.length===0?s.jsxs("div",{style:{background:F.cardBg,border:`1px solid ${F.border}`,borderRadius:"0.75rem",textAlign:"center",padding:"3rem 1rem",color:F.subtext},children:[s.jsx(jf,{size:48,style:{margin:"0 auto 1rem",opacity:.5}}),s.jsx("p",{style:{margin:0,fontSize:"0.9375rem"},children:"No estimates yet. Create one above!"})]}):l.map(q=>{var oe;return s.jsxs("div",{style:{background:F.cardBg,border:`1px solid ${F.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"0.75rem",boxShadow:"none"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[s.jsxs("div",{children:[s.jsx("h3",{style:{margin:"0 0 0.25rem 0",color:F.text,fontSize:"1rem",fontWeight:"600"},children:q.name}),s.jsx("p",{style:{margin:0,color:F.subtext,fontSize:"0.75rem"},children:((oe=q.createdAt)==null?void 0:oe.toLocaleDateString())||"N/A"})]}),s.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10b981"},children:["$",q.total.toFixed(2)]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:F.subtext,fontSize:"0.875rem"},children:[s.jsx(qm,{size:16}),s.jsxs("span",{children:[q.laborHours,"h  $",q.laborRate,"/hr = $",(q.laborHours*q.laborRate).toFixed(2)]})]}),q.materials.length>0&&s.jsx("div",{style:{padding:"0.75rem",background:F.bg,borderRadius:"0.5rem",marginBottom:"0.75rem"},children:q.materials.map((se,ie)=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem",color:F.subtext,marginBottom:ie<q.materials.length-1?"0.25rem":0},children:[s.jsx("span",{children:se.name}),s.jsxs("span",{children:["$",parseFloat(se.cost).toFixed(2)]})]},ie))}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsxs("div",{style:{position:"relative",flex:1},children:[s.jsxs("button",{onClick:()=>E(N===q.id?null:q.id),style:{width:"100%",padding:"0.5rem",background:"#2563eb",border:"none",borderRadius:"0.5rem",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.875rem",fontWeight:"500"},children:[s.jsx(Q1,{size:16}),"Add to Job",s.jsx(mm,{size:14})]}),N===q.id&&s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:()=>E(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998}}),s.jsxs("div",{style:{position:"absolute",bottom:"100%",left:0,right:0,marginBottom:"0.5rem",background:F.cardBg,border:`1px solid ${F.border}`,borderRadius:"0.5rem",boxShadow:r?"0 4px 12px rgba(0,0,0,0.6)":"0 4px 12px rgba(0,0,0,0.15)",maxHeight:"200px",overflowY:"auto",zIndex:9999},children:[s.jsx("button",{onClick:()=>D(q,"new"),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${F.border}`,color:"#2563eb",cursor:"pointer",textAlign:"left",fontSize:"0.875rem",fontWeight:"500"},children:"+ Create New Job"}),e.map(se=>s.jsx("button",{onClick:()=>D(q,se.id),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${F.border}`,color:F.text,cursor:"pointer",textAlign:"left",fontSize:"0.875rem"},children:se.title||se.name},se.id))]})]})]}),s.jsx("button",{onClick:()=>w(q),style:{padding:"0.5rem",background:"transparent",border:`1px solid ${F.border}`,borderRadius:"0.5rem",color:F.text,cursor:"pointer",display:"flex",alignItems:"center"},children:s.jsx(pw,{size:16})}),s.jsx("button",{onClick:()=>B(q.id,q.name),style:{padding:"0.5rem",background:"transparent",border:"1px solid #ef4444",borderRadius:"0.5rem",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center"},children:s.jsx(Tc,{size:16})})]})]},q.id)})]})})};function WB({isDarkMode:r=!1}){const[e,t]=me.useState([{id:1,invoiceNumber:"INV-001",client:"ABC Construction",date:"2025-10-01",amount:2500,status:"Paid"},{id:2,invoiceNumber:"INV-002",client:"Smith Residence",date:"2025-10-10",amount:1200,status:"Pending"},{id:3,invoiceNumber:"INV-003",client:"Downtown Office Building",date:"2025-10-12",amount:4800,status:"Overdue"}]),n={bg:r?"#000000":"#f9fafb",cardBg:r?"#111111":"#ffffff",border:r?"#1a1a1a":"#e5e7eb",text:r?"#ffffff":"#111827",textSecondary:r?"#9ca3af":"#6b7280",buttonBg:"#3b82f6",buttonText:"#ffffff",paidBg:r?"#064e3b":"#d1fae5",paidText:r?"#6ee7b7":"#065f46",pendingBg:r?"#78350f":"#fef3c7",pendingText:r?"#fcd34d":"#92400e",overdueBg:r?"#7f1d1d":"#fee2e2",overdueText:r?"#fca5a5":"#991b1b"},i=o=>{switch(o){case"Paid":return{background:n.paidBg,color:n.paidText};case"Pending":return{background:n.pendingBg,color:n.pendingText};case"Overdue":return{background:n.overdueBg,color:n.overdueText};default:return{}}};return s.jsx("div",{style:{minHeight:"100vh",background:n.bg,paddingTop:"1rem"},children:s.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[s.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary,marginBottom:"0.25rem"},children:"Total"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:n.text},children:e.length})]}),s.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary,marginBottom:"0.25rem"},children:"Paid"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:n.paidText},children:e.filter(o=>o.status==="Paid").length})]}),s.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary,marginBottom:"0.25rem"},children:"Pending"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:n.pendingText},children:e.filter(o=>o.status==="Pending").length})]})]}),s.jsxs("button",{style:{width:"100%",background:n.buttonBg,color:n.buttonText,border:"none",borderRadius:"0.5rem",padding:"0.875rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[s.jsx(ma,{size:20}),s.jsx("span",{children:"Create New Invoice"})]}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.length===0?s.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"3rem 1rem",textAlign:"center"},children:[s.jsx(jf,{size:48,color:n.textSecondary,style:{margin:"0 auto 1rem"}}),s.jsx("p",{style:{color:n.textSecondary,fontSize:"0.875rem",margin:0},children:"No invoices yet. Create your first invoice!"})]}):e.map(o=>s.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:l=>{l.currentTarget.style.transform="translateY(-2px)",l.currentTarget.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"},onMouseLeave:l=>{l.currentTarget.style.transform="translateY(0)",l.currentTarget.style.boxShadow="none"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:n.text,marginBottom:"0.25rem"},children:o.invoiceNumber}),s.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary},children:o.client})]}),s.jsx("div",{style:{...i(o.status),padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.75rem",fontWeight:"600"},children:o.status})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"0.75rem",borderTop:`1px solid ${n.border}`},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary},children:new Date(o.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),s.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"600",color:n.text},children:["$",o.amount.toFixed(2)]})]})]},o.id))})]})})}function $B({headerInfo:r,isDarkMode:e,headerVisible:t,showMenu:n,setShowMenu:i,onNavigate:o,setIsDarkMode:l}){const u=r.icon,h={headerBorder:e?"#2a2a2a":"#e5e7eb",menuBg:e?"#1a1a1a":"white",cardBorder:e?"#2a2a2a":"#e5e7eb",cardText:e?"#ffffff":"#111827"};return s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,height:"env(safe-area-inset-top)",background:e?"#1a1a1a":"#2563eb",zIndex:101}}),s.jsxs("div",{style:{background:e?"#1a1a1a":"#2563eb",padding:"0.5rem 1rem",borderBottom:`1px solid ${h.headerBorder}`,position:"fixed",top:"env(safe-area-inset-top)",left:0,right:0,zIndex:100,display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:"48px",transform:t?"translateY(0)":"translateY(calc(-100% - env(safe-area-inset-top)))",transition:"transform 0.3s ease-in-out",paddingLeft:"max(1rem, env(safe-area-inset-left))",paddingRight:"max(1rem, env(safe-area-inset-right))"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx(u,{size:20,color:"white",strokeWidth:2}),s.jsx("h1",{style:{fontSize:"1rem",fontWeight:"600",color:"white",margin:0,letterSpacing:"-0.01em"},children:r.title})]}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("button",{onClick:()=>i(!n),style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"40px",minHeight:"40px",lineHeight:1},children:s.jsx(x6,{size:24,color:"white",style:{display:"block",flexShrink:0}})}),n&&s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:()=>i(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:998}}),s.jsx("div",{style:{position:"absolute",top:"2.5rem",right:0,zIndex:999,background:h.menuBg,border:`1px solid ${h.cardBorder}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",minWidth:"200px",overflow:"hidden"},children:s.jsxs("div",{style:{padding:"0.5rem 0"},children:[s.jsxs("button",{onClick:()=>{o("profile"),i(!1)},style:{width:"100%",padding:"0.75rem 1rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:h.cardText,fontSize:"0.875rem",fontWeight:"500"},onMouseEnter:d=>d.target.style.background=e?"#374151":"#f3f4f6",onMouseLeave:d=>d.target.style.background="transparent",children:[s.jsx(gm,{size:16}),s.jsx("span",{children:"Profile"})]}),s.jsx("div",{style:{height:"1px",background:h.cardBorder,margin:"0.5rem 0"}}),s.jsxs("button",{onClick:()=>{l(!e),i(!1)},style:{width:"100%",padding:"0.75rem 1rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",color:h.cardText,fontSize:"0.875rem",fontWeight:"500"},onMouseEnter:d=>d.target.style.background=e?"#374151":"#f3f4f6",onMouseLeave:d=>d.target.style.background="transparent",children:[s.jsx("span",{children:e?"Light Mode":"Dark Mode"}),s.jsx("span",{children:e?"":""})]})]})})]})]})]})]})}function UB(){const[r,e]=me.useState(()=>localStorage.getItem("activeView")||null),[t,n]=me.useState(()=>localStorage.getItem("isDarkMode")==="true"),[i,o]=me.useState(!1),[l,u]=me.useState(!1),[h,d]=me.useState(null),[g,b]=me.useState(null),[S,v]=me.useState(!0),[N,E]=me.useState(0);me.useEffect(()=>{const V=k=>{k.state&&k.state.view!==void 0&&e(k.state.view)};return window.addEventListener("popstate",V),window.history.state||window.history.replaceState({view:r},""),()=>{window.removeEventListener("popstate",V)}},[]),me.useEffect(()=>{window.history.state&&window.history.state.view!==r&&window.history.pushState({view:r},"")},[r]),me.useEffect(()=>{r===null?localStorage.setItem("activeView",""):localStorage.setItem("activeView",r)},[r]),me.useEffect(()=>{localStorage.setItem("isDarkMode",t)},[t]),me.useEffect(()=>{const V=t?"#000000":"#f5f5f5",k=document.querySelector('meta[name="theme-color"]');k&&k.setAttribute("content",V),document.body.style.backgroundColor=V,document.documentElement.style.backgroundColor=V},[t]),me.useEffect(()=>{const V=()=>{const A=document.querySelector('meta[name="theme-color"]');A&&A.setAttribute("content",t?"#1a1a1a":"#2563eb")};V();const k=()=>{document.visibilityState==="visible"&&V()};return document.addEventListener("visibilitychange",k),()=>{document.removeEventListener("visibilitychange",k)}},[t]),me.useEffect(()=>{window.scrollTo(0,0)},[r]);const L=me.useRef(null);me.useEffect(()=>{const V=()=>{const k=window.scrollY;k<10?v(!0):k>N&&k>80?v(!1):k<N&&v(!0),E(k)};return window.addEventListener("scroll",V,{passive:!0}),()=>window.removeEventListener("scroll",V)},[N]),me.useEffect(()=>{r!=="estimates"&&b(null)},[r]);const C=(V,k=null)=>{V==="home"?e(null):V==="calculators"?e("calculators"):V==="profile"?e("profile"):V==="jobs"?e("jobs"):V==="estimates"?(e("estimates"),k&&(k.viewEstimateId?b(k):d(k))):V==="invoices"&&e("invoices")},M=()=>{window.history.back()},$=(V,k)=>{k==="new"?(d(V),e("jobs")):(d({...V,jobId:k}),e("jobs"))},F=()=>{const V=()=>{u(!0),setTimeout(()=>u(!1),3e3)};switch(r){case"voltage-drop":return s.jsx(fN,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"ohms-law":return s.jsx(yN,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"box-fill":return s.jsx(SN,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"conduit-fill":return s.jsx(FN,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"ampacity":return s.jsx(YN,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"motor-calculations":return s.jsx(eB,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"load-calculations":return s.jsx(nB,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"transformer-sizing":return s.jsx(iB,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"service-entrance":return s.jsx(oB,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"grounding-bonding":return s.jsx(cB,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"conduit-bending":return s.jsx(pB,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"lighting":return s.jsx(xB,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"receptacles":return s.jsx(SB,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"vfd-sizing":return s.jsx(TB,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"reactance-impedance":return s.jsx(AB,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"power-factor":return s.jsx(CB,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"power-triangle":return s.jsx(kB,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"three-phase-power":return s.jsx(IB,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"pull-box":return s.jsx(IN,{ref:L,isDarkMode:t,onBack:M,onExportSuccess:V});case"calculators":return s.jsx(U6,{isDarkMode:t,onSelectCalculator:e});case"profile":return s.jsx(jB,{isDarkMode:t});case"jobs":return s.jsx(MB,{isDarkMode:t,onNavigateToEstimates:k=>C("estimates",k)});case"estimates":return s.jsx(DB,{isDarkMode:t,onApplyToJob:$,pendingEstimateData:h,onClearPendingData:()=>d(null),navigationData:g});case"invoices":return s.jsx(WB,{isDarkMode:t});default:return s.jsx(EB,{isDarkMode:t})}},ue=r?r==="calculators"?{title:"Calculator Menu",icon:cf}:r==="profile"?{title:"Profile",icon:gm}:r==="jobs"?{title:"Job Log",icon:Lu}:r==="estimates"?{title:"Estimates",icon:jf}:r==="invoices"?{title:"Invoices",icon:X1}:{"voltage-drop":{title:"Voltage Drop",icon:yw},"ohms-law":{title:"Ohm's Law",icon:fw},"reactance-impedance":{title:"Reactance & Impedance",icon:aw},"power-factor":{title:"Power Factor Correction",icon:gw},"box-fill":{title:"Box Fill",icon:lw},"conduit-fill":{title:"Conduit Fill",icon:ew},ampacity:{title:"Ampacity",icon:Xb},"motor-calculations":{title:"Motors",icon:hw},"load-calculations":{title:"Load Calculations",icon:Zb},"transformer-sizing":{title:"Transformers",icon:uw},"service-entrance":{title:"Service Entrance Sizing",icon:Qb},"grounding-bonding":{title:"Grounding & Bonding",icon:nw},"conduit-bending":{title:"Conduit Bending",icon:tw},lighting:{title:"Lighting",icon:ow},receptacles:{title:"Receptacles",icon:cw},"vfd-sizing":{title:"VFD Sizing",icon:rw},"power-triangle":{title:"Power Triangle",icon:xw},"three-phase-power":{title:"Three-Phase Power",icon:mw},"pull-box":{title:"Pull Box Sizing",icon:Yb}}[r]||{title:"Electrician's Toolkit",icon:cf}:{title:"Home",icon:iw};return s.jsxs("div",{className:"App",style:{background:t?"#000000":"#ffffff",overscrollBehavior:"none"},children:[s.jsx($B,{headerInfo:ue,isDarkMode:t,headerVisible:S,showMenu:i,setShowMenu:o,onNavigate:C,setIsDarkMode:n}),s.jsx("div",{style:{paddingBottom:"calc(65px + env(safe-area-inset-bottom))",paddingTop:"calc(48px + env(safe-area-inset-top))",paddingLeft:r==="calculators"?"0":"env(safe-area-inset-left)",paddingRight:r==="calculators"?"0":"env(safe-area-inset-right)",position:"relative",minHeight:"100vh",boxSizing:"border-box"},children:r?s.jsx("div",{style:{minHeight:"calc(100vh - 3.5rem)",padding:r==="calculators"||r==="jobs"||r==="profile"||r==="estimates"||r==="invoices"?"0":"1rem",paddingBottom:"5rem"},children:F()}):F()}),l&&s.jsxs("div",{style:{position:"fixed",bottom:"6rem",left:"50%",transform:"translateX(-50%)",background:"#10b981",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",animation:"slideUp 0.3s ease-out",maxWidth:"90%",textAlign:"center"},children:[s.jsx("span",{style:{fontSize:"1.25rem"},children:""}),s.jsx("span",{children:"PDF saved to Downloads"})]}),s.jsx(_B,{onNavigate:C,currentView:r==="jobs"?"jobs":r==="estimates"?"estimates":r==="invoices"?"invoices":r==="profile"?"profile":r==="calculators"||r?"calculators":"home",isDarkMode:t})]})}const qB=jT.createRoot(document.getElementById("root"));qB.render(s.jsx(_T.StrictMode,{children:s.jsx(UB,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{if(window.location.hostname==="localhost"){console.log("Skipping service worker on localhost");return}navigator.serviceWorker.register("/electrician-toolkit/service-worker.js").then(r=>{console.log("ServiceWorker registration successful:",r.scope)}).catch(r=>{console.log("ServiceWorker registration failed:",r)})});export{Gr as _,GB as c,Kb as g};
