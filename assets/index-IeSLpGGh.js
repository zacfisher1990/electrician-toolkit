var JS=Object.defineProperty;var YS=(r,e,t)=>e in r?JS(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ur=(r,e,t)=>YS(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();var dR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bx(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var N0={exports:{}},Md={},B0={exports:{}},ur={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u5;function QS(){if(u5)return ur;u5=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function C(Z){return Z===null||typeof Z!="object"?null:(Z=w&&Z[w]||Z["@@iterator"],typeof Z=="function"?Z:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,I={};function z(Z,W,J){this.props=Z,this.context=W,this.refs=I,this.updater=J||v}z.prototype.isReactComponent={},z.prototype.setState=function(Z,W){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,W,"setState")},z.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function A(){}A.prototype=z.prototype;function M(Z,W,J){this.props=Z,this.context=W,this.refs=I,this.updater=J||v}var U=M.prototype=new A;U.constructor=M,B(U,z.prototype),U.isPureReactComponent=!0;var F=Array.isArray,se=Object.prototype.hasOwnProperty,ue={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function j(Z,W,J){var re,he={},ge=null,_e=null;if(W!=null)for(re in W.ref!==void 0&&(_e=W.ref),W.key!==void 0&&(ge=""+W.key),W)se.call(W,re)&&!L.hasOwnProperty(re)&&(he[re]=W[re]);var fe=arguments.length-2;if(fe===1)he.children=J;else if(1<fe){for(var xe=Array(fe),Pe=0;Pe<fe;Pe++)xe[Pe]=arguments[Pe+2];he.children=xe}if(Z&&Z.defaultProps)for(re in fe=Z.defaultProps,fe)he[re]===void 0&&(he[re]=fe[re]);return{$$typeof:r,type:Z,key:ge,ref:_e,props:he,_owner:ue.current}}function T(Z,W){return{$$typeof:r,type:Z.type,key:W,ref:Z.ref,props:Z.props,_owner:Z._owner}}function V(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===r}function k(Z){var W={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(J){return W[J]})}var b=/\/+/g;function N(Z,W){return typeof Z=="object"&&Z!==null&&Z.key!=null?k(""+Z.key):W.toString(36)}function D(Z,W,J,re,he){var ge=typeof Z;(ge==="undefined"||ge==="boolean")&&(Z=null);var _e=!1;if(Z===null)_e=!0;else switch(ge){case"string":case"number":_e=!0;break;case"object":switch(Z.$$typeof){case r:case e:_e=!0}}if(_e)return _e=Z,he=he(_e),Z=re===""?"."+N(_e,0):re,F(he)?(J="",Z!=null&&(J=Z.replace(b,"$&/")+"/"),D(he,W,J,"",function(Pe){return Pe})):he!=null&&(V(he)&&(he=T(he,J+(!he.key||_e&&_e.key===he.key?"":(""+he.key).replace(b,"$&/")+"/")+Z)),W.push(he)),1;if(_e=0,re=re===""?".":re+":",F(Z))for(var fe=0;fe<Z.length;fe++){ge=Z[fe];var xe=re+N(ge,fe);_e+=D(ge,W,J,xe,he)}else if(xe=C(Z),typeof xe=="function")for(Z=xe.call(Z),fe=0;!(ge=Z.next()).done;)ge=ge.value,xe=re+N(ge,fe++),_e+=D(ge,W,J,xe,he);else if(ge==="object")throw W=String(Z),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return _e}function q(Z,W,J){if(Z==null)return Z;var re=[],he=0;return D(Z,re,"","",function(ge){return W.call(J,ge,he++)}),re}function ie(Z){if(Z._status===-1){var W=Z._result;W=W(),W.then(function(J){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=J)},function(J){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=J)}),Z._status===-1&&(Z._status=0,Z._result=W)}if(Z._status===1)return Z._result.default;throw Z._result}var oe={current:null},ne={transition:null},ve={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:ne,ReactCurrentOwner:ue};function be(){throw Error("act(...) is not supported in production builds of React.")}return ur.Children={map:q,forEach:function(Z,W,J){q(Z,function(){W.apply(this,arguments)},J)},count:function(Z){var W=0;return q(Z,function(){W++}),W},toArray:function(Z){return q(Z,function(W){return W})||[]},only:function(Z){if(!V(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},ur.Component=z,ur.Fragment=t,ur.Profiler=o,ur.PureComponent=M,ur.StrictMode=n,ur.Suspense=f,ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,ur.act=be,ur.cloneElement=function(Z,W,J){if(Z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Z+".");var re=B({},Z.props),he=Z.key,ge=Z.ref,_e=Z._owner;if(W!=null){if(W.ref!==void 0&&(ge=W.ref,_e=ue.current),W.key!==void 0&&(he=""+W.key),Z.type&&Z.type.defaultProps)var fe=Z.type.defaultProps;for(xe in W)se.call(W,xe)&&!L.hasOwnProperty(xe)&&(re[xe]=W[xe]===void 0&&fe!==void 0?fe[xe]:W[xe])}var xe=arguments.length-2;if(xe===1)re.children=J;else if(1<xe){fe=Array(xe);for(var Pe=0;Pe<xe;Pe++)fe[Pe]=arguments[Pe+2];re.children=fe}return{$$typeof:r,type:Z.type,key:he,ref:ge,props:re,_owner:_e}},ur.createContext=function(Z){return Z={$$typeof:c,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Z.Provider={$$typeof:a,_context:Z},Z.Consumer=Z},ur.createElement=j,ur.createFactory=function(Z){var W=j.bind(null,Z);return W.type=Z,W},ur.createRef=function(){return{current:null}},ur.forwardRef=function(Z){return{$$typeof:u,render:Z}},ur.isValidElement=V,ur.lazy=function(Z){return{$$typeof:y,_payload:{_status:-1,_result:Z},_init:ie}},ur.memo=function(Z,W){return{$$typeof:d,type:Z,compare:W===void 0?null:W}},ur.startTransition=function(Z){var W=ne.transition;ne.transition={};try{Z()}finally{ne.transition=W}},ur.unstable_act=be,ur.useCallback=function(Z,W){return oe.current.useCallback(Z,W)},ur.useContext=function(Z){return oe.current.useContext(Z)},ur.useDebugValue=function(){},ur.useDeferredValue=function(Z){return oe.current.useDeferredValue(Z)},ur.useEffect=function(Z,W){return oe.current.useEffect(Z,W)},ur.useId=function(){return oe.current.useId()},ur.useImperativeHandle=function(Z,W,J){return oe.current.useImperativeHandle(Z,W,J)},ur.useInsertionEffect=function(Z,W){return oe.current.useInsertionEffect(Z,W)},ur.useLayoutEffect=function(Z,W){return oe.current.useLayoutEffect(Z,W)},ur.useMemo=function(Z,W){return oe.current.useMemo(Z,W)},ur.useReducer=function(Z,W,J){return oe.current.useReducer(Z,W,J)},ur.useRef=function(Z){return oe.current.useRef(Z)},ur.useState=function(Z){return oe.current.useState(Z)},ur.useSyncExternalStore=function(Z,W,J){return oe.current.useSyncExternalStore(Z,W,J)},ur.useTransition=function(){return oe.current.useTransition()},ur.version="18.3.1",ur}var d5;function ag(){return d5||(d5=1,B0.exports=QS()),B0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h5;function XS(){if(h5)return Md;h5=1;var r=ag(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,f,d){var y,w={},C=null,v=null;d!==void 0&&(C=""+d),f.key!==void 0&&(C=""+f.key),f.ref!==void 0&&(v=f.ref);for(y in f)n.call(f,y)&&!a.hasOwnProperty(y)&&(w[y]=f[y]);if(u&&u.defaultProps)for(y in f=u.defaultProps,f)w[y]===void 0&&(w[y]=f[y]);return{$$typeof:e,type:u,key:C,ref:v,props:w,_owner:o.current}}return Md.Fragment=t,Md.jsx=c,Md.jsxs=c,Md}var f5;function ZS(){return f5||(f5=1,N0.exports=XS()),N0.exports}var i=ZS(),me=ag();const e3=bx(me);var gf={},L0={exports:{}},Vo={},F0={exports:{}},z0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p5;function t3(){return p5||(p5=1,(function(r){function e(ne,ve){var be=ne.length;ne.push(ve);e:for(;0<be;){var Z=be-1>>>1,W=ne[Z];if(0<o(W,ve))ne[Z]=ve,ne[be]=W,be=Z;else break e}}function t(ne){return ne.length===0?null:ne[0]}function n(ne){if(ne.length===0)return null;var ve=ne[0],be=ne.pop();if(be!==ve){ne[0]=be;e:for(var Z=0,W=ne.length,J=W>>>1;Z<J;){var re=2*(Z+1)-1,he=ne[re],ge=re+1,_e=ne[ge];if(0>o(he,be))ge<W&&0>o(_e,he)?(ne[Z]=_e,ne[ge]=be,Z=ge):(ne[Z]=he,ne[re]=be,Z=re);else if(ge<W&&0>o(_e,be))ne[Z]=_e,ne[ge]=be,Z=ge;else break e}}return ve}function o(ne,ve){var be=ne.sortIndex-ve.sortIndex;return be!==0?be:ne.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var f=[],d=[],y=1,w=null,C=3,v=!1,B=!1,I=!1,z=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(ne){for(var ve=t(d);ve!==null;){if(ve.callback===null)n(d);else if(ve.startTime<=ne)n(d),ve.sortIndex=ve.expirationTime,e(f,ve);else break;ve=t(d)}}function F(ne){if(I=!1,U(ne),!B)if(t(f)!==null)B=!0,ie(se);else{var ve=t(d);ve!==null&&oe(F,ve.startTime-ne)}}function se(ne,ve){B=!1,I&&(I=!1,A(j),j=-1),v=!0;var be=C;try{for(U(ve),w=t(f);w!==null&&(!(w.expirationTime>ve)||ne&&!k());){var Z=w.callback;if(typeof Z=="function"){w.callback=null,C=w.priorityLevel;var W=Z(w.expirationTime<=ve);ve=r.unstable_now(),typeof W=="function"?w.callback=W:w===t(f)&&n(f),U(ve)}else n(f);w=t(f)}if(w!==null)var J=!0;else{var re=t(d);re!==null&&oe(F,re.startTime-ve),J=!1}return J}finally{w=null,C=be,v=!1}}var ue=!1,L=null,j=-1,T=5,V=-1;function k(){return!(r.unstable_now()-V<T)}function b(){if(L!==null){var ne=r.unstable_now();V=ne;var ve=!0;try{ve=L(!0,ne)}finally{ve?N():(ue=!1,L=null)}}else ue=!1}var N;if(typeof M=="function")N=function(){M(b)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,q=D.port2;D.port1.onmessage=b,N=function(){q.postMessage(null)}}else N=function(){z(b,0)};function ie(ne){L=ne,ue||(ue=!0,N())}function oe(ne,ve){j=z(function(){ne(r.unstable_now())},ve)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ne){ne.callback=null},r.unstable_continueExecution=function(){B||v||(B=!0,ie(se))},r.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<ne?Math.floor(1e3/ne):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_getFirstCallbackNode=function(){return t(f)},r.unstable_next=function(ne){switch(C){case 1:case 2:case 3:var ve=3;break;default:ve=C}var be=C;C=ve;try{return ne()}finally{C=be}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ne,ve){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var be=C;C=ne;try{return ve()}finally{C=be}},r.unstable_scheduleCallback=function(ne,ve,be){var Z=r.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Z+be:Z):be=Z,ne){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=be+W,ne={id:y++,callback:ve,priorityLevel:ne,startTime:be,expirationTime:W,sortIndex:-1},be>Z?(ne.sortIndex=be,e(d,ne),t(f)===null&&ne===t(d)&&(I?(A(j),j=-1):I=!0,oe(F,be-Z))):(ne.sortIndex=W,e(f,ne),B||v||(B=!0,ie(se))),ne},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(ne){var ve=C;return function(){var be=C;C=ve;try{return ne.apply(this,arguments)}finally{C=be}}}})(z0)),z0}var m5;function r3(){return m5||(m5=1,F0.exports=t3()),F0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g5;function n3(){if(g5)return Vo;g5=1;var r=ag(),e=r3();function t(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,o={};function a(s,l){c(s,l),c(s+"Capture",l)}function c(s,l){for(o[s]=l,s=0;s<l.length;s++)n.add(l[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},w={};function C(s){return f.call(w,s)?!0:f.call(y,s)?!1:d.test(s)?w[s]=!0:(y[s]=!0,!1)}function v(s,l,h,g){if(h!==null&&h.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function B(s,l,h,g){if(l===null||typeof l>"u"||v(s,l,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function I(s,l,h,g,_,P,K){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=_,this.mustUseProperty=h,this.propertyName=s,this.type=l,this.sanitizeURL=P,this.removeEmptyString=K}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){z[s]=new I(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];z[l]=new I(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){z[s]=new I(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){z[s]=new I(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){z[s]=new I(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){z[s]=new I(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){z[s]=new I(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){z[s]=new I(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){z[s]=new I(s,5,!1,s.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function M(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(A,M);z[l]=new I(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(A,M);z[l]=new I(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(A,M);z[l]=new I(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){z[s]=new I(s,1,!1,s.toLowerCase(),null,!1,!1)}),z.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){z[s]=new I(s,1,!1,s.toLowerCase(),null,!0,!0)});function U(s,l,h,g){var _=z.hasOwnProperty(l)?z[l]:null;(_!==null?_.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(B(l,h,_,g)&&(h=null),g||_===null?C(l)&&(h===null?s.removeAttribute(l):s.setAttribute(l,""+h)):_.mustUseProperty?s[_.propertyName]=h===null?_.type===3?!1:"":h:(l=_.attributeName,g=_.attributeNamespace,h===null?s.removeAttribute(l):(_=_.type,h=_===3||_===4&&h===!0?"":""+h,g?s.setAttributeNS(g,l,h):s.setAttribute(l,h))))}var F=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,se=Symbol.for("react.element"),ue=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),k=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),ne=Symbol.iterator;function ve(s){return s===null||typeof s!="object"?null:(s=ne&&s[ne]||s["@@iterator"],typeof s=="function"?s:null)}var be=Object.assign,Z;function W(s){if(Z===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);Z=l&&l[1]||""}return`
`+Z+s}var J=!1;function re(s,l){if(!s||J)return"";J=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Le){var g=Le}Reflect.construct(s,[],l)}else{try{l.call()}catch(Le){g=Le}s.call(l.prototype)}else{try{throw Error()}catch(Le){g=Le}s()}}catch(Le){if(Le&&g&&typeof Le.stack=="string"){for(var _=Le.stack.split(`
`),P=g.stack.split(`
`),K=_.length-1,pe=P.length-1;1<=K&&0<=pe&&_[K]!==P[pe];)pe--;for(;1<=K&&0<=pe;K--,pe--)if(_[K]!==P[pe]){if(K!==1||pe!==1)do if(K--,pe--,0>pe||_[K]!==P[pe]){var Se=`
`+_[K].replace(" at new "," at ");return s.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",s.displayName)),Se}while(1<=K&&0<=pe);break}}}finally{J=!1,Error.prepareStackTrace=h}return(s=s?s.displayName||s.name:"")?W(s):""}function he(s){switch(s.tag){case 5:return W(s.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return s=re(s.type,!1),s;case 11:return s=re(s.type.render,!1),s;case 1:return s=re(s.type,!0),s;default:return""}}function ge(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case L:return"Fragment";case ue:return"Portal";case T:return"Profiler";case j:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case k:return(s.displayName||"Context")+".Consumer";case V:return(s._context.displayName||"Context")+".Provider";case b:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case q:return l=s.displayName||null,l!==null?l:ge(s.type)||"Memo";case ie:l=s._payload,s=s._init;try{return ge(s(l))}catch{}}return null}function _e(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(l);case 8:return l===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function fe(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function xe(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Pe(s){var l=xe(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),g=""+s[l];if(!s.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var _=h.get,P=h.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return _.call(this)},set:function(K){g=""+K,P.call(this,K)}}),Object.defineProperty(s,l,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(K){g=""+K},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function We(s){s._valueTracker||(s._valueTracker=Pe(s))}function Qe(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var h=l.getValue(),g="";return s&&(g=xe(s)?s.checked?"true":"false":s.value),s=g,s!==h?(l.setValue(s),!0):!1}function Xe(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Fe(s,l){var h=l.checked;return be({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??s._wrapperState.initialChecked})}function de(s,l){var h=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;h=fe(l.value!=null?l.value:h),s._wrapperState={initialChecked:g,initialValue:h,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Pt(s,l){l=l.checked,l!=null&&U(s,"checked",l,!1)}function At(s,l){Pt(s,l);var h=fe(l.value),g=l.type;if(h!=null)g==="number"?(h===0&&s.value===""||s.value!=h)&&(s.value=""+h):s.value!==""+h&&(s.value=""+h);else if(g==="submit"||g==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?qe(s,l.type,h):l.hasOwnProperty("defaultValue")&&qe(s,l.type,fe(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function vt(s,l,h){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,h||l===s.value||(s.value=l),s.defaultValue=l}h=s.name,h!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,h!==""&&(s.name=h)}function qe(s,l,h){(l!=="number"||Xe(s.ownerDocument)!==s)&&(h==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+h&&(s.defaultValue=""+h))}var nt=Array.isArray;function tt(s,l,h,g){if(s=s.options,l){l={};for(var _=0;_<h.length;_++)l["$"+h[_]]=!0;for(h=0;h<s.length;h++)_=l.hasOwnProperty("$"+s[h].value),s[h].selected!==_&&(s[h].selected=_),_&&g&&(s[h].defaultSelected=!0)}else{for(h=""+fe(h),l=null,_=0;_<s.length;_++){if(s[_].value===h){s[_].selected=!0,g&&(s[_].defaultSelected=!0);return}l!==null||s[_].disabled||(l=s[_])}l!==null&&(l.selected=!0)}}function Gt(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return be({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function wt(s,l){var h=l.value;if(h==null){if(h=l.children,l=l.defaultValue,h!=null){if(l!=null)throw Error(t(92));if(nt(h)){if(1<h.length)throw Error(t(93));h=h[0]}l=h}l==null&&(l=""),h=l}s._wrapperState={initialValue:fe(h)}}function hr(s,l){var h=fe(l.value),g=fe(l.defaultValue);h!=null&&(h=""+h,h!==s.value&&(s.value=h),l.defaultValue==null&&s.defaultValue!==h&&(s.defaultValue=h)),g!=null&&(s.defaultValue=""+g)}function Nt(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function Wt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yr(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?Wt(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Ft,St=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,g,_){MSApp.execUnsafeLocalFunction(function(){return s(l,h,g,_)})}:s})(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(Ft=Ft||document.createElement("div"),Ft.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Ft.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function kt(s,l){if(l){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=l;return}}s.textContent=l}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ar=["Webkit","ms","Moz","O"];Object.keys(ft).forEach(function(s){Ar.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),ft[l]=ft[s]})});function rr(s,l,h){return l==null||typeof l=="boolean"||l===""?"":h||typeof l!="number"||l===0||ft.hasOwnProperty(s)&&ft[s]?(""+l).trim():l+"px"}function dt(s,l){s=s.style;for(var h in l)if(l.hasOwnProperty(h)){var g=h.indexOf("--")===0,_=rr(h,l[h],g);h==="float"&&(h="cssFloat"),g?s.setProperty(h,_):s[h]=_}}var $t=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ir(s,l){if(l){if($t[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Ct(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xt=null;function Vt(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var kr=null,Lr=null,Mt=null;function zt(s){if(s=Rl(s)){if(typeof kr!="function")throw Error(t(280));var l=s.stateNode;l&&(l=kc(l),kr(s.stateNode,s.type,l))}}function or(s){Lr?Mt?Mt.push(s):Mt=[s]:Lr=s}function Di(){if(Lr){var s=Lr,l=Mt;if(Mt=Lr=null,zt(s),l)for(s=0;s<l.length;s++)zt(l[s])}}function Rn(s,l){return s(l)}function _o(){}var Pn=!1;function jt(s,l,h){if(Pn)return s(l,h);Pn=!0;try{return Rn(s,l,h)}finally{Pn=!1,(Lr!==null||Mt!==null)&&(_o(),Di())}}function ki(s,l){var h=s.stateNode;if(h===null)return null;var g=kc(h);if(g===null)return null;h=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(t(231,l,typeof h));return h}var ci=!1;if(u)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){ci=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{ci=!1}function ji(s,l,h,g,_,P,K,pe,Se){var Le=Array.prototype.slice.call(arguments,3);try{l.apply(h,Le)}catch(Je){this.onError(Je)}}var Tr=!1,Fr=null,an=!1,qn=null,$o={onError:function(s){Tr=!0,Fr=s}};function Wi(s,l,h,g,_,P,K,pe,Se){Tr=!1,Fr=null,ji.apply($o,arguments)}function $i(s,l,h,g,_,P,K,pe,Se){if(Wi.apply(this,arguments),Tr){if(Tr){var Le=Fr;Tr=!1,Fr=null}else throw Error(t(198));an||(an=!0,qn=Le)}}function mn(s){var l=s,h=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(h=l.return),s=l.return;while(s)}return l.tag===3?h:null}function Ei(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function Ii(s){if(mn(s)!==s)throw Error(t(188))}function ds(s){var l=s.alternate;if(!l){if(l=mn(s),l===null)throw Error(t(188));return l!==s?null:s}for(var h=s,g=l;;){var _=h.return;if(_===null)break;var P=_.alternate;if(P===null){if(g=_.return,g!==null){h=g;continue}break}if(_.child===P.child){for(P=_.child;P;){if(P===h)return Ii(_),s;if(P===g)return Ii(_),l;P=P.sibling}throw Error(t(188))}if(h.return!==g.return)h=_,g=P;else{for(var K=!1,pe=_.child;pe;){if(pe===h){K=!0,h=_,g=P;break}if(pe===g){K=!0,g=_,h=P;break}pe=pe.sibling}if(!K){for(pe=P.child;pe;){if(pe===h){K=!0,h=P,g=_;break}if(pe===g){K=!0,g=P,h=_;break}pe=pe.sibling}if(!K)throw Error(t(189))}}if(h.alternate!==g)throw Error(t(190))}if(h.tag!==3)throw Error(t(188));return h.stateNode.current===h?s:l}function co(s){return s=ds(s),s!==null?uo(s):null}function uo(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=uo(s);if(l!==null)return l;s=s.sibling}return null}var hs=e.unstable_scheduleCallback,Uo=e.unstable_cancelCallback,To=e.unstable_shouldYield,qo=e.unstable_requestPaint,jr=e.unstable_now,vl=e.unstable_getCurrentPriorityLevel,Ns=e.unstable_ImmediatePriority,ui=e.unstable_UserBlockingPriority,Ho=e.unstable_NormalPriority,ca=e.unstable_LowPriority,fs=e.unstable_IdlePriority,ps=null,di=null;function Oa(s){if(di&&typeof di.onCommitFiberRoot=="function")try{di.onCommitFiberRoot(ps,s,void 0,(s.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:ms,Co=Math.log,vr=Math.LN2;function ms(s){return s>>>=0,s===0?32:31-(Co(s)/vr|0)|0}var ho=64,hi=4194304;function sr(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Bn(s,l){var h=s.pendingLanes;if(h===0)return 0;var g=0,_=s.suspendedLanes,P=s.pingedLanes,K=h&268435455;if(K!==0){var pe=K&~_;pe!==0?g=sr(pe):(P&=K,P!==0&&(g=sr(P)))}else K=h&~_,K!==0?g=sr(K):P!==0&&(g=sr(P));if(g===0)return 0;if(l!==0&&l!==g&&(l&_)===0&&(_=g&-g,P=l&-l,_>=P||_===16&&(P&4194240)!==0))return l;if((g&4)!==0&&(g|=h&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=g;0<l;)h=31-Hn(l),_=1<<h,g|=s[h],l&=~_;return g}function fo(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zr(s,l){for(var h=s.suspendedLanes,g=s.pingedLanes,_=s.expirationTimes,P=s.pendingLanes;0<P;){var K=31-Hn(P),pe=1<<K,Se=_[K];Se===-1?((pe&h)===0||(pe&g)!==0)&&(_[K]=fo(pe,l)):Se<=l&&(s.expiredLanes|=pe),P&=~pe}}function Bs(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Va(){var s=ho;return ho<<=1,(ho&4194240)===0&&(ho=64),s}function Ma(s){for(var l=[],h=0;31>h;h++)l.push(s);return l}function Ls(s,l,h){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-Hn(l),s[l]=h}function Ao(s,l){var h=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var g=s.eventTimes;for(s=s.expirationTimes;0<h;){var _=31-Hn(h),P=1<<_;l[_]=0,g[_]=-1,s[_]=-1,h&=~P}}function ua(s,l){var h=s.entangledLanes|=l;for(s=s.entanglements;h;){var g=31-Hn(h),_=1<<g;_&l|s[g]&l&&(s[g]|=l),h&=~_}}var nr=0;function ri(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Fs,da,Da,Wa,zs,fi=!1,po=[],ko=null,pi=null,gn=null,It=new Map,Go=new Map,Ri=[],bl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gs(s,l){switch(s){case"focusin":case"focusout":ko=null;break;case"dragenter":case"dragleave":pi=null;break;case"mouseover":case"mouseout":gn=null;break;case"pointerover":case"pointerout":It.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(l.pointerId)}}function Ln(s,l,h,g,_,P){return s===null||s.nativeEvent!==P?(s={blockedOn:l,domEventName:h,eventSystemFlags:g,nativeEvent:P,targetContainers:[_]},l!==null&&(l=Rl(l),l!==null&&da(l)),s):(s.eventSystemFlags|=g,l=s.targetContainers,_!==null&&l.indexOf(_)===-1&&l.push(_),s)}function jo(s,l,h,g,_){switch(l){case"focusin":return ko=Ln(ko,s,l,h,g,_),!0;case"dragenter":return pi=Ln(pi,s,l,h,g,_),!0;case"mouseover":return gn=Ln(gn,s,l,h,g,_),!0;case"pointerover":var P=_.pointerId;return It.set(P,Ln(It.get(P)||null,s,l,h,g,_)),!0;case"gotpointercapture":return P=_.pointerId,Go.set(P,Ln(Go.get(P)||null,s,l,h,g,_)),!0}return!1}function ha(s){var l=wa(s.target);if(l!==null){var h=mn(l);if(h!==null){if(l=h.tag,l===13){if(l=Ei(h),l!==null){s.blockedOn=l,zs(s.priority,function(){Da(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Er(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var h=ys(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(h===null){h=s.nativeEvent;var g=new h.constructor(h.type,h);Xt=g,h.target.dispatchEvent(g),Xt=null}else return l=Rl(h),l!==null&&da(l),s.blockedOn=h,!1;l.shift()}return!0}function Os(s,l,h){Er(s)&&h.delete(l)}function $a(){fi=!1,ko!==null&&Er(ko)&&(ko=null),pi!==null&&Er(pi)&&(pi=null),gn!==null&&Er(gn)&&(gn=null),It.forEach(Os),Go.forEach(Os)}function Ui(s,l){s.blockedOn===l&&(s.blockedOn=null,fi||(fi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$a)))}function mo(s){function l(_){return Ui(_,s)}if(0<po.length){Ui(po[0],s);for(var h=1;h<po.length;h++){var g=po[h];g.blockedOn===s&&(g.blockedOn=null)}}for(ko!==null&&Ui(ko,s),pi!==null&&Ui(pi,s),gn!==null&&Ui(gn,s),It.forEach(l),Go.forEach(l),h=0;h<Ri.length;h++)g=Ri[h],g.blockedOn===s&&(g.blockedOn=null);for(;0<Ri.length&&(h=Ri[0],h.blockedOn===null);)ha(h),h.blockedOn===null&&Ri.shift()}var qi=F.ReactCurrentBatchConfig,Ko=!0;function Hi(s,l,h,g){var _=nr,P=qi.transition;qi.transition=null;try{nr=1,Jo(s,l,h,g)}finally{nr=_,qi.transition=P}}function fa(s,l,h,g){var _=nr,P=qi.transition;qi.transition=null;try{nr=4,Jo(s,l,h,g)}finally{nr=_,qi.transition=P}}function Jo(s,l,h,g){if(Ko){var _=ys(s,l,h,g);if(_===null)Tc(s,l,g,mi,h),gs(s,g);else if(jo(_,s,l,h,g))g.stopPropagation();else if(gs(s,g),l&4&&-1<bl.indexOf(s)){for(;_!==null;){var P=Rl(_);if(P!==null&&Fs(P),P=ys(s,l,h,g),P===null&&Tc(s,l,g,mi,h),P===_)break;_=P}_!==null&&g.stopPropagation()}else Tc(s,l,g,null,h)}}var mi=null;function ys(s,l,h,g){if(mi=null,s=Vt(g),s=wa(s),s!==null)if(l=mn(s),l===null)s=null;else if(h=l.tag,h===13){if(s=Ei(l),s!==null)return s;s=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return mi=s,null}function Yo(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vl()){case Ns:return 1;case ui:return 4;case Ho:case ca:return 16;case fs:return 536870912;default:return 16}default:return 16}}var ni=null,Eo=null,Io=null;function Ua(){if(Io)return Io;var s,l=Eo,h=l.length,g,_="value"in ni?ni.value:ni.textContent,P=_.length;for(s=0;s<h&&l[s]===_[s];s++);var K=h-s;for(g=1;g<=K&&l[h-g]===_[P-g];g++);return Io=_.slice(s,1<g?1-g:void 0)}function Pi(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Gn(){return!0}function pa(){return!1}function Fn(s){function l(h,g,_,P,K){this._reactName=h,this._targetInst=_,this.type=g,this.nativeEvent=P,this.target=K,this.currentTarget=null;for(var pe in s)s.hasOwnProperty(pe)&&(h=s[pe],this[pe]=h?h(P):P[pe]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Gn:pa,this.isPropagationStopped=pa,this}return be(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){},isPersistent:Gn}),l}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xs=Fn(gi),S=be({},gi,{view:0,detail:0}),H=Fn(S),ce,ye,Ae,Me=be({},S,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ot,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ae&&(Ae&&s.type==="mousemove"?(ce=s.screenX-Ae.screenX,ye=s.screenY-Ae.screenY):ye=ce=0,Ae=s),ce)},movementY:function(s){return"movementY"in s?s.movementY:ye}}),He=Fn(Me),st=be({},Me,{dataTransfer:0}),pt=Fn(st),Rt=be({},S,{relatedTarget:0}),yt=Fn(Rt),fr=be({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Hr=Fn(fr),Or=be({},gi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),m=Fn(Or),R=be({},gi,{data:0}),$=Fn(R),ee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ke={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ne={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function et(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Ne[s])?!!l[s]:!1}function Ot(){return et}var Vr=be({},S,{key:function(s){if(s.key){var l=ee[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Pi(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ke[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ot,charCode:function(s){return s.type==="keypress"?Pi(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Pi(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),lr=Fn(Vr),Gr=be({},Me,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zn=Fn(Gr),Ni=be({},S,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ot}),Jr=Fn(Ni),yi=be({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ro=Fn(yi),Vs=be({},Me,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),yc=Fn(Vs),ln=[9,13,27,32],Qo=u&&"CompositionEvent"in window,vs=null;u&&"documentMode"in document&&(vs=document.documentMode);var lu=u&&"TextEvent"in window&&!vs,go=u&&(!Qo||vs&&8<vs&&11>=vs),ma=" ",wl=!1;function Sl(s,l){switch(s){case"keyup":return ln.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ms(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Po=!1;function yo(s,l){switch(s){case"compositionend":return Ms(l);case"keypress":return l.which!==32?null:(wl=!0,ma);case"textInput":return s=l.data,s===ma&&wl?null:s;default:return null}}function xo(s,l){if(Po)return s==="compositionend"||!Qo&&Sl(s,l)?(s=Ua(),Io=Eo=ni=null,Po=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return go&&l.locale!=="ko"?null:l.data;default:return null}}var ga={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bs(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!ga[s.type]:l==="textarea"}function Ds(s,l,h,g){or(g),l=fu(l,"onChange"),0<l.length&&(h=new xs("onChange","change",null,h,g),s.push({event:h,listeners:l}))}var Ws=null,ws=null;function yn(s){Sc(s,0)}function qa(s){var l=tl(s);if(Qe(l))return s}function Ss(s,l){if(s==="change")return l}var Xo=!1;if(u){var Ha;if(u){var Ga="oninput"in document;if(!Ga){var _l=document.createElement("div");_l.setAttribute("oninput","return;"),Ga=typeof _l.oninput=="function"}Ha=Ga}else Ha=!1;Xo=Ha&&(!document.documentMode||9<document.documentMode)}function Tl(){Ws&&(Ws.detachEvent("onpropertychange",$s),ws=Ws=null)}function $s(s){if(s.propertyName==="value"&&qa(ws)){var l=[];Ds(l,ws,s,Vt(s)),jt(yn,l)}}function ya(s,l,h){s==="focusin"?(Tl(),Ws=l,ws=h,Ws.attachEvent("onpropertychange",$s)):s==="focusout"&&Tl()}function xa(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return qa(ws)}function Ka(s,l){if(s==="click")return qa(l)}function va(s,l){if(s==="input"||s==="change")return qa(l)}function Ja(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var cn=typeof Object.is=="function"?Object.is:Ja;function Gi(s,l){if(cn(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var h=Object.keys(s),g=Object.keys(l);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var _=h[g];if(!f.call(l,_)||!cn(s[_],l[_]))return!1}return!0}function br(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Rr(s,l){var h=br(s);s=0;for(var g;h;){if(h.nodeType===3){if(g=s+h.textContent.length,s<=l&&g>=l)return{node:h,offset:l-s};s=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=br(h)}}function un(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?un(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Cn(){for(var s=window,l=Xe();l instanceof s.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)s=l.contentWindow;else break;l=Xe(s.document)}return l}function Zo(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function xc(s){var l=Cn(),h=s.focusedElem,g=s.selectionRange;if(l!==h&&h&&h.ownerDocument&&un(h.ownerDocument.documentElement,h)){if(g!==null&&Zo(h)){if(l=g.start,s=g.end,s===void 0&&(s=l),"selectionStart"in h)h.selectionStart=l,h.selectionEnd=Math.min(s,h.value.length);else if(s=(l=h.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var _=h.textContent.length,P=Math.min(g.start,_);g=g.end===void 0?P:Math.min(g.end,_),!s.extend&&P>g&&(_=g,g=P,P=_),_=Rr(h,P);var K=Rr(h,g);_&&K&&(s.rangeCount!==1||s.anchorNode!==_.node||s.anchorOffset!==_.offset||s.focusNode!==K.node||s.focusOffset!==K.offset)&&(l=l.createRange(),l.setStart(_.node,_.offset),s.removeAllRanges(),P>g?(s.addRange(l),s.extend(K.node,K.offset)):(l.setEnd(K.node,K.offset),s.addRange(l)))}}for(l=[],s=h;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<l.length;h++)s=l[h],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Cl=u&&"documentMode"in document&&11>=document.documentMode,Us=null,cu=null,Al=null,uu=!1;function gd(s,l,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;uu||Us==null||Us!==Xe(g)||(g=Us,"selectionStart"in g&&Zo(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Al&&Gi(Al,g)||(Al=g,g=fu(cu,"onSelect"),0<g.length&&(l=new xs("onSelect","select",null,l,h),s.push({event:l,listeners:g}),l.target=Us)))}function vc(s,l){var h={};return h[s.toLowerCase()]=l.toLowerCase(),h["Webkit"+s]="webkit"+l,h["Moz"+s]="moz"+l,h}var Ya={animationend:vc("Animation","AnimationEnd"),animationiteration:vc("Animation","AnimationIteration"),animationstart:vc("Animation","AnimationStart"),transitionend:vc("Transition","TransitionEnd")},Qa={},yd={};u&&(yd=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function bc(s){if(Qa[s])return Qa[s];if(!Ya[s])return s;var l=Ya[s],h;for(h in l)if(l.hasOwnProperty(h)&&h in yd)return Qa[s]=l[h];return s}var xd=bc("animationend"),vd=bc("animationiteration"),bd=bc("animationstart"),wd=bc("transitionend"),Sd=new Map,_d="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _s(s,l){Sd.set(s,l),a(l,[s])}for(var kl=0;kl<_d.length;kl++){var Bi=_d[kl],No=Bi.toLowerCase(),du=Bi[0].toUpperCase()+Bi.slice(1);_s(No,"on"+du)}_s(xd,"onAnimationEnd"),_s(vd,"onAnimationIteration"),_s(bd,"onAnimationStart"),_s("dblclick","onDoubleClick"),_s("focusin","onFocus"),_s("focusout","onBlur"),_s(wd,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lh=new Set("cancel close invalid load scroll toggle".split(" ").concat(ba));function wc(s,l,h){var g=s.type||"unknown-event";s.currentTarget=h,$i(g,l,void 0,s),s.currentTarget=null}function Sc(s,l){l=(l&4)!==0;for(var h=0;h<s.length;h++){var g=s[h],_=g.event;g=g.listeners;e:{var P=void 0;if(l)for(var K=g.length-1;0<=K;K--){var pe=g[K],Se=pe.instance,Le=pe.currentTarget;if(pe=pe.listener,Se!==P&&_.isPropagationStopped())break e;wc(_,pe,Le),P=Se}else for(K=0;K<g.length;K++){if(pe=g[K],Se=pe.instance,Le=pe.currentTarget,pe=pe.listener,Se!==P&&_.isPropagationStopped())break e;wc(_,pe,Le),P=Se}}}if(an)throw s=qn,an=!1,qn=null,s}function Mr(s,l){var h=l[Ji];h===void 0&&(h=l[Ji]=new Set);var g=s+"__bubble";h.has(g)||(_c(l,s,2,!1),h.add(g))}function hu(s,l,h){var g=0;l&&(g|=4),_c(h,s,g,l)}var jl="_reactListening"+Math.random().toString(36).slice(2);function Xa(s){if(!s[jl]){s[jl]=!0,n.forEach(function(h){h!=="selectionchange"&&(Lh.has(h)||hu(h,!1,s),hu(h,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[jl]||(l[jl]=!0,hu("selectionchange",!1,l))}}function _c(s,l,h,g){switch(Yo(l)){case 1:var _=Hi;break;case 4:_=fa;break;default:_=Jo}h=_.bind(null,l,h,s),_=void 0,!ci||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(_=!0),g?_!==void 0?s.addEventListener(l,h,{capture:!0,passive:_}):s.addEventListener(l,h,!0):_!==void 0?s.addEventListener(l,h,{passive:_}):s.addEventListener(l,h,!1)}function Tc(s,l,h,g,_){var P=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var K=g.tag;if(K===3||K===4){var pe=g.stateNode.containerInfo;if(pe===_||pe.nodeType===8&&pe.parentNode===_)break;if(K===4)for(K=g.return;K!==null;){var Se=K.tag;if((Se===3||Se===4)&&(Se=K.stateNode.containerInfo,Se===_||Se.nodeType===8&&Se.parentNode===_))return;K=K.return}for(;pe!==null;){if(K=wa(pe),K===null)return;if(Se=K.tag,Se===5||Se===6){g=P=K;continue e}pe=pe.parentNode}}g=g.return}jt(function(){var Le=P,Je=Vt(h),Ye=[];e:{var Ke=Sd.get(s);if(Ke!==void 0){var ot=xs,mt=s;switch(s){case"keypress":if(Pi(h)===0)break e;case"keydown":case"keyup":ot=lr;break;case"focusin":mt="focus",ot=yt;break;case"focusout":mt="blur",ot=yt;break;case"beforeblur":case"afterblur":ot=yt;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=He;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=pt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=Jr;break;case xd:case vd:case bd:ot=Hr;break;case wd:ot=Ro;break;case"scroll":ot=H;break;case"wheel":ot=yc;break;case"copy":case"cut":case"paste":ot=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=zn}var xt=(l&4)!==0,Mn=!xt&&s==="scroll",Ie=xt?Ke!==null?Ke+"Capture":null:Ke;xt=[];for(var Ce=Le,Be;Ce!==null;){Be=Ce;var Ze=Be.stateNode;if(Be.tag===5&&Ze!==null&&(Be=Ze,Ie!==null&&(Ze=ki(Ce,Ie),Ze!=null&&xt.push(Cc(Ce,Ze,Be)))),Mn)break;Ce=Ce.return}0<xt.length&&(Ke=new ot(Ke,mt,null,h,Je),Ye.push({event:Ke,listeners:xt}))}}if((l&7)===0){e:{if(Ke=s==="mouseover"||s==="pointerover",ot=s==="mouseout"||s==="pointerout",Ke&&h!==Xt&&(mt=h.relatedTarget||h.fromElement)&&(wa(mt)||mt[xi]))break e;if((ot||Ke)&&(Ke=Je.window===Je?Je:(Ke=Je.ownerDocument)?Ke.defaultView||Ke.parentWindow:window,ot?(mt=h.relatedTarget||h.toElement,ot=Le,mt=mt?wa(mt):null,mt!==null&&(Mn=mn(mt),mt!==Mn||mt.tag!==5&&mt.tag!==6)&&(mt=null)):(ot=null,mt=Le),ot!==mt)){if(xt=He,Ze="onMouseLeave",Ie="onMouseEnter",Ce="mouse",(s==="pointerout"||s==="pointerover")&&(xt=zn,Ze="onPointerLeave",Ie="onPointerEnter",Ce="pointer"),Mn=ot==null?Ke:tl(ot),Be=mt==null?Ke:tl(mt),Ke=new xt(Ze,Ce+"leave",ot,h,Je),Ke.target=Mn,Ke.relatedTarget=Be,Ze=null,wa(Je)===Le&&(xt=new xt(Ie,Ce+"enter",mt,h,Je),xt.target=Be,xt.relatedTarget=Mn,Ze=xt),Mn=Ze,ot&&mt)t:{for(xt=ot,Ie=mt,Ce=0,Be=xt;Be;Be=Za(Be))Ce++;for(Be=0,Ze=Ie;Ze;Ze=Za(Ze))Be++;for(;0<Ce-Be;)xt=Za(xt),Ce--;for(;0<Be-Ce;)Ie=Za(Ie),Be--;for(;Ce--;){if(xt===Ie||Ie!==null&&xt===Ie.alternate)break t;xt=Za(xt),Ie=Za(Ie)}xt=null}else xt=null;ot!==null&&Fh(Ye,Ke,ot,xt,!1),mt!==null&&Mn!==null&&Fh(Ye,Mn,mt,xt,!0)}}e:{if(Ke=Le?tl(Le):window,ot=Ke.nodeName&&Ke.nodeName.toLowerCase(),ot==="select"||ot==="input"&&Ke.type==="file")var _t=Ss;else if(bs(Ke))if(Xo)_t=va;else{_t=xa;var Bt=ya}else(ot=Ke.nodeName)&&ot.toLowerCase()==="input"&&(Ke.type==="checkbox"||Ke.type==="radio")&&(_t=Ka);if(_t&&(_t=_t(s,Le))){Ds(Ye,_t,h,Je);break e}Bt&&Bt(s,Ke,Le),s==="focusout"&&(Bt=Ke._wrapperState)&&Bt.controlled&&Ke.type==="number"&&qe(Ke,"number",Ke.value)}switch(Bt=Le?tl(Le):window,s){case"focusin":(bs(Bt)||Bt.contentEditable==="true")&&(Us=Bt,cu=Le,Al=null);break;case"focusout":Al=cu=Us=null;break;case"mousedown":uu=!0;break;case"contextmenu":case"mouseup":case"dragend":uu=!1,gd(Ye,h,Je);break;case"selectionchange":if(Cl)break;case"keydown":case"keyup":gd(Ye,h,Je)}var Lt;if(Qo)e:{switch(s){case"compositionstart":var Kt="onCompositionStart";break e;case"compositionend":Kt="onCompositionEnd";break e;case"compositionupdate":Kt="onCompositionUpdate";break e}Kt=void 0}else Po?Sl(s,h)&&(Kt="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(Kt="onCompositionStart");Kt&&(go&&h.locale!=="ko"&&(Po||Kt!=="onCompositionStart"?Kt==="onCompositionEnd"&&Po&&(Lt=Ua()):(ni=Je,Eo="value"in ni?ni.value:ni.textContent,Po=!0)),Bt=fu(Le,Kt),0<Bt.length&&(Kt=new $(Kt,s,null,h,Je),Ye.push({event:Kt,listeners:Bt}),Lt?Kt.data=Lt:(Lt=Ms(h),Lt!==null&&(Kt.data=Lt)))),(Lt=lu?yo(s,h):xo(s,h))&&(Le=fu(Le,"onBeforeInput"),0<Le.length&&(Je=new $("onBeforeInput","beforeinput",null,h,Je),Ye.push({event:Je,listeners:Le}),Je.data=Lt))}Sc(Ye,l)})}function Cc(s,l,h){return{instance:s,listener:l,currentTarget:h}}function fu(s,l){for(var h=l+"Capture",g=[];s!==null;){var _=s,P=_.stateNode;_.tag===5&&P!==null&&(_=P,P=ki(s,h),P!=null&&g.unshift(Cc(s,P,_)),P=ki(s,l),P!=null&&g.push(Cc(s,P,_))),s=s.return}return g}function Za(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Fh(s,l,h,g,_){for(var P=l._reactName,K=[];h!==null&&h!==g;){var pe=h,Se=pe.alternate,Le=pe.stateNode;if(Se!==null&&Se===g)break;pe.tag===5&&Le!==null&&(pe=Le,_?(Se=ki(h,P),Se!=null&&K.unshift(Cc(h,Se,pe))):_||(Se=ki(h,P),Se!=null&&K.push(Cc(h,Se,pe)))),h=h.return}K.length!==0&&s.push({event:l,listeners:K})}var Gp=/\r\n?/g,Kp=/\u0000|\uFFFD/g;function zh(s){return(typeof s=="string"?s:""+s).replace(Gp,`
`).replace(Kp,"")}function pu(s,l,h){if(l=zh(l),zh(s)!==l&&h)throw Error(t(425))}function El(){}var Ac=null,el=null;function Td(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Cd=typeof setTimeout=="function"?setTimeout:void 0,Oh=typeof clearTimeout=="function"?clearTimeout:void 0,Vh=typeof Promise=="function"?Promise:void 0,Jp=typeof queueMicrotask=="function"?queueMicrotask:typeof Vh<"u"?function(s){return Vh.resolve(null).then(s).catch(Yp)}:Cd;function Yp(s){setTimeout(function(){throw s})}function Ad(s,l){var h=l,g=0;do{var _=h.nextSibling;if(s.removeChild(h),_&&_.nodeType===8)if(h=_.data,h==="/$"){if(g===0){s.removeChild(_),mo(l);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=_}while(h);mo(l)}function Li(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function Bo(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return s;l--}else h==="/$"&&l++}s=s.previousSibling}return null}var Ki=Math.random().toString(36).slice(2),Ts="__reactFiber$"+Ki,Il="__reactProps$"+Ki,xi="__reactContainer$"+Ki,Ji="__reactEvents$"+Ki,Qp="__reactListeners$"+Ki,Xp="__reactHandles$"+Ki;function wa(s){var l=s[Ts];if(l)return l;for(var h=s.parentNode;h;){if(l=h[xi]||h[Ts]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(s=Bo(s);s!==null;){if(h=s[Ts])return h;s=Bo(s)}return l}s=h,h=s.parentNode}return null}function Rl(s){return s=s[Ts]||s[xi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function tl(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function kc(s){return s[Il]||null}var kd=[],qs=-1;function es(s){return{current:s}}function Ir(s){0>qs||(s.current=kd[qs],kd[qs]=null,qs--)}function Pr(s,l){qs++,kd[qs]=s.current,s.current=l}var Sa={},ii=es(Sa),Yi=es(!1),rl=Sa;function Pl(s,l){var h=s.type.contextTypes;if(!h)return Sa;var g=s.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var _={},P;for(P in h)_[P]=l[P];return g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=_),_}function Qi(s){return s=s.childContextTypes,s!=null}function mu(){Ir(Yi),Ir(ii)}function Mh(s,l,h){if(ii.current!==Sa)throw Error(t(168));Pr(ii,l),Pr(Yi,h)}function jd(s,l,h){var g=s.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var _ in g)if(!(_ in l))throw Error(t(108,_e(s)||"Unknown",_));return be({},h,g)}function nl(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Sa,rl=ii.current,Pr(ii,s),Pr(Yi,Yi.current),!0}function Dh(s,l,h){var g=s.stateNode;if(!g)throw Error(t(169));h?(s=jd(s,l,rl),g.__reactInternalMemoizedMergedChildContext=s,Ir(Yi),Ir(ii),Pr(ii,s)):Ir(Yi),Pr(Yi,h)}var Hs=null,jc=!1,p=!1;function x(s){Hs===null?Hs=[s]:Hs.push(s)}function E(s){jc=!0,x(s)}function O(){if(!p&&Hs!==null){p=!0;var s=0,l=nr;try{var h=Hs;for(nr=1;s<h.length;s++){var g=h[s];do g=g(!0);while(g!==null)}Hs=null,jc=!1}catch(_){throw Hs!==null&&(Hs=Hs.slice(s+1)),hs(Ns,O),_}finally{nr=l,p=!1}}return null}var G=[],Y=0,Q=null,X=0,te=[],ae=0,we=null,Ee=1,le="";function Te(s,l){G[Y++]=X,G[Y++]=Q,Q=s,X=l}function je(s,l,h){te[ae++]=Ee,te[ae++]=le,te[ae++]=we,we=s;var g=Ee;s=le;var _=32-Hn(g)-1;g&=~(1<<_),h+=1;var P=32-Hn(l)+_;if(30<P){var K=_-_%5;P=(g&(1<<K)-1).toString(32),g>>=K,_-=K,Ee=1<<32-Hn(l)+_|h<<_|g,le=P+s}else Ee=1<<P|h<<_|g,le=s}function Ve(s){s.return!==null&&(Te(s,1),je(s,1,0))}function Re(s){for(;s===Q;)Q=G[--Y],G[Y]=null,X=G[--Y],G[Y]=null;for(;s===we;)we=te[--ae],te[ae]=null,le=te[--ae],te[ae]=null,Ee=te[--ae],te[ae]=null}var ze=null,Oe=null,De=!1,$e=null;function bt(s,l){var h=Es(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=s,l=s.deletions,l===null?(s.deletions=[h],s.flags|=16):l.push(h)}function at(s,l){switch(s.tag){case 5:var h=s.type;return l=l.nodeType!==1||h.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,ze=s,Oe=Li(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,ze=s,Oe=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(h=we!==null?{id:Ee,overflow:le}:null,s.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=Es(18,null,null,0),h.stateNode=l,h.return=s,s.child=h,ze=s,Oe=null,!0):!1;default:return!1}}function Yt(s){return(s.mode&1)!==0&&(s.flags&128)===0}function ht(s){if(De){var l=Oe;if(l){var h=l;if(!at(s,l)){if(Yt(s))throw Error(t(418));l=Li(h.nextSibling);var g=ze;l&&at(s,l)?bt(g,h):(s.flags=s.flags&-4097|2,De=!1,ze=s)}}else{if(Yt(s))throw Error(t(418));s.flags=s.flags&-4097|2,De=!1,ze=s}}}function cr(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;ze=s}function dn(s){if(s!==ze)return!1;if(!De)return cr(s),De=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!Td(s.type,s.memoizedProps)),l&&(l=Oe)){if(Yt(s))throw Zt(),Error(t(418));for(;l;)bt(s,l),l=Li(l.nextSibling)}if(cr(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"){if(l===0){Oe=Li(s.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++}s=s.nextSibling}Oe=null}}else Oe=ze?Li(s.stateNode.nextSibling):null;return!0}function Zt(){for(var s=Oe;s;)s=Li(s.nextSibling)}function lt(){Oe=ze=null,De=!1}function rt(s){$e===null?$e=[s]:$e.push(s)}var xn=F.ReactCurrentBatchConfig;function Ut(s,l,h){if(s=h.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(t(309));var g=h.stateNode}if(!g)throw Error(t(147,s));var _=g,P=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===P?l.ref:(l=function(K){var pe=_.refs;K===null?delete pe[P]:pe[P]=K},l._stringRef=P,l)}if(typeof s!="string")throw Error(t(284));if(!h._owner)throw Error(t(290,s))}return s}function ar(s,l){throw s=Object.prototype.toString.call(l),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function Kr(s){var l=s._init;return l(s._payload)}function Kn(s){function l(Ie,Ce){if(s){var Be=Ie.deletions;Be===null?(Ie.deletions=[Ce],Ie.flags|=16):Be.push(Ce)}}function h(Ie,Ce){if(!s)return null;for(;Ce!==null;)l(Ie,Ce),Ce=Ce.sibling;return null}function g(Ie,Ce){for(Ie=new Map;Ce!==null;)Ce.key!==null?Ie.set(Ce.key,Ce):Ie.set(Ce.index,Ce),Ce=Ce.sibling;return Ie}function _(Ie,Ce){return Ie=Wl(Ie,Ce),Ie.index=0,Ie.sibling=null,Ie}function P(Ie,Ce,Be){return Ie.index=Be,s?(Be=Ie.alternate,Be!==null?(Be=Be.index,Be<Ce?(Ie.flags|=2,Ce):Be):(Ie.flags|=2,Ce)):(Ie.flags|=1048576,Ce)}function K(Ie){return s&&Ie.alternate===null&&(Ie.flags|=2),Ie}function pe(Ie,Ce,Be,Ze){return Ce===null||Ce.tag!==6?(Ce=k0(Be,Ie.mode,Ze),Ce.return=Ie,Ce):(Ce=_(Ce,Be),Ce.return=Ie,Ce)}function Se(Ie,Ce,Be,Ze){var _t=Be.type;return _t===L?Je(Ie,Ce,Be.props.children,Ze,Be.key):Ce!==null&&(Ce.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===ie&&Kr(_t)===Ce.type)?(Ze=_(Ce,Be.props),Ze.ref=Ut(Ie,Ce,Be),Ze.return=Ie,Ze):(Ze=lf(Be.type,Be.key,Be.props,null,Ie.mode,Ze),Ze.ref=Ut(Ie,Ce,Be),Ze.return=Ie,Ze)}function Le(Ie,Ce,Be,Ze){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Be.containerInfo||Ce.stateNode.implementation!==Be.implementation?(Ce=j0(Be,Ie.mode,Ze),Ce.return=Ie,Ce):(Ce=_(Ce,Be.children||[]),Ce.return=Ie,Ce)}function Je(Ie,Ce,Be,Ze,_t){return Ce===null||Ce.tag!==7?(Ce=Fc(Be,Ie.mode,Ze,_t),Ce.return=Ie,Ce):(Ce=_(Ce,Be),Ce.return=Ie,Ce)}function Ye(Ie,Ce,Be){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ce=k0(""+Ce,Ie.mode,Be),Ce.return=Ie,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case se:return Be=lf(Ce.type,Ce.key,Ce.props,null,Ie.mode,Be),Be.ref=Ut(Ie,null,Ce),Be.return=Ie,Be;case ue:return Ce=j0(Ce,Ie.mode,Be),Ce.return=Ie,Ce;case ie:var Ze=Ce._init;return Ye(Ie,Ze(Ce._payload),Be)}if(nt(Ce)||ve(Ce))return Ce=Fc(Ce,Ie.mode,Be,null),Ce.return=Ie,Ce;ar(Ie,Ce)}return null}function Ke(Ie,Ce,Be,Ze){var _t=Ce!==null?Ce.key:null;if(typeof Be=="string"&&Be!==""||typeof Be=="number")return _t!==null?null:pe(Ie,Ce,""+Be,Ze);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case se:return Be.key===_t?Se(Ie,Ce,Be,Ze):null;case ue:return Be.key===_t?Le(Ie,Ce,Be,Ze):null;case ie:return _t=Be._init,Ke(Ie,Ce,_t(Be._payload),Ze)}if(nt(Be)||ve(Be))return _t!==null?null:Je(Ie,Ce,Be,Ze,null);ar(Ie,Be)}return null}function ot(Ie,Ce,Be,Ze,_t){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number")return Ie=Ie.get(Be)||null,pe(Ce,Ie,""+Ze,_t);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case se:return Ie=Ie.get(Ze.key===null?Be:Ze.key)||null,Se(Ce,Ie,Ze,_t);case ue:return Ie=Ie.get(Ze.key===null?Be:Ze.key)||null,Le(Ce,Ie,Ze,_t);case ie:var Bt=Ze._init;return ot(Ie,Ce,Be,Bt(Ze._payload),_t)}if(nt(Ze)||ve(Ze))return Ie=Ie.get(Be)||null,Je(Ce,Ie,Ze,_t,null);ar(Ce,Ze)}return null}function mt(Ie,Ce,Be,Ze){for(var _t=null,Bt=null,Lt=Ce,Kt=Ce=0,_i=null;Lt!==null&&Kt<Be.length;Kt++){Lt.index>Kt?(_i=Lt,Lt=null):_i=Lt.sibling;var Cr=Ke(Ie,Lt,Be[Kt],Ze);if(Cr===null){Lt===null&&(Lt=_i);break}s&&Lt&&Cr.alternate===null&&l(Ie,Lt),Ce=P(Cr,Ce,Kt),Bt===null?_t=Cr:Bt.sibling=Cr,Bt=Cr,Lt=_i}if(Kt===Be.length)return h(Ie,Lt),De&&Te(Ie,Kt),_t;if(Lt===null){for(;Kt<Be.length;Kt++)Lt=Ye(Ie,Be[Kt],Ze),Lt!==null&&(Ce=P(Lt,Ce,Kt),Bt===null?_t=Lt:Bt.sibling=Lt,Bt=Lt);return De&&Te(Ie,Kt),_t}for(Lt=g(Ie,Lt);Kt<Be.length;Kt++)_i=ot(Lt,Ie,Kt,Be[Kt],Ze),_i!==null&&(s&&_i.alternate!==null&&Lt.delete(_i.key===null?Kt:_i.key),Ce=P(_i,Ce,Kt),Bt===null?_t=_i:Bt.sibling=_i,Bt=_i);return s&&Lt.forEach(function($l){return l(Ie,$l)}),De&&Te(Ie,Kt),_t}function xt(Ie,Ce,Be,Ze){var _t=ve(Be);if(typeof _t!="function")throw Error(t(150));if(Be=_t.call(Be),Be==null)throw Error(t(151));for(var Bt=_t=null,Lt=Ce,Kt=Ce=0,_i=null,Cr=Be.next();Lt!==null&&!Cr.done;Kt++,Cr=Be.next()){Lt.index>Kt?(_i=Lt,Lt=null):_i=Lt.sibling;var $l=Ke(Ie,Lt,Cr.value,Ze);if($l===null){Lt===null&&(Lt=_i);break}s&&Lt&&$l.alternate===null&&l(Ie,Lt),Ce=P($l,Ce,Kt),Bt===null?_t=$l:Bt.sibling=$l,Bt=$l,Lt=_i}if(Cr.done)return h(Ie,Lt),De&&Te(Ie,Kt),_t;if(Lt===null){for(;!Cr.done;Kt++,Cr=Be.next())Cr=Ye(Ie,Cr.value,Ze),Cr!==null&&(Ce=P(Cr,Ce,Kt),Bt===null?_t=Cr:Bt.sibling=Cr,Bt=Cr);return De&&Te(Ie,Kt),_t}for(Lt=g(Ie,Lt);!Cr.done;Kt++,Cr=Be.next())Cr=ot(Lt,Ie,Kt,Cr.value,Ze),Cr!==null&&(s&&Cr.alternate!==null&&Lt.delete(Cr.key===null?Kt:Cr.key),Ce=P(Cr,Ce,Kt),Bt===null?_t=Cr:Bt.sibling=Cr,Bt=Cr);return s&&Lt.forEach(function(KS){return l(Ie,KS)}),De&&Te(Ie,Kt),_t}function Mn(Ie,Ce,Be,Ze){if(typeof Be=="object"&&Be!==null&&Be.type===L&&Be.key===null&&(Be=Be.props.children),typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case se:e:{for(var _t=Be.key,Bt=Ce;Bt!==null;){if(Bt.key===_t){if(_t=Be.type,_t===L){if(Bt.tag===7){h(Ie,Bt.sibling),Ce=_(Bt,Be.props.children),Ce.return=Ie,Ie=Ce;break e}}else if(Bt.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===ie&&Kr(_t)===Bt.type){h(Ie,Bt.sibling),Ce=_(Bt,Be.props),Ce.ref=Ut(Ie,Bt,Be),Ce.return=Ie,Ie=Ce;break e}h(Ie,Bt);break}else l(Ie,Bt);Bt=Bt.sibling}Be.type===L?(Ce=Fc(Be.props.children,Ie.mode,Ze,Be.key),Ce.return=Ie,Ie=Ce):(Ze=lf(Be.type,Be.key,Be.props,null,Ie.mode,Ze),Ze.ref=Ut(Ie,Ce,Be),Ze.return=Ie,Ie=Ze)}return K(Ie);case ue:e:{for(Bt=Be.key;Ce!==null;){if(Ce.key===Bt)if(Ce.tag===4&&Ce.stateNode.containerInfo===Be.containerInfo&&Ce.stateNode.implementation===Be.implementation){h(Ie,Ce.sibling),Ce=_(Ce,Be.children||[]),Ce.return=Ie,Ie=Ce;break e}else{h(Ie,Ce);break}else l(Ie,Ce);Ce=Ce.sibling}Ce=j0(Be,Ie.mode,Ze),Ce.return=Ie,Ie=Ce}return K(Ie);case ie:return Bt=Be._init,Mn(Ie,Ce,Bt(Be._payload),Ze)}if(nt(Be))return mt(Ie,Ce,Be,Ze);if(ve(Be))return xt(Ie,Ce,Be,Ze);ar(Ie,Be)}return typeof Be=="string"&&Be!==""||typeof Be=="number"?(Be=""+Be,Ce!==null&&Ce.tag===6?(h(Ie,Ce.sibling),Ce=_(Ce,Be),Ce.return=Ie,Ie=Ce):(h(Ie,Ce),Ce=k0(Be,Ie.mode,Ze),Ce.return=Ie,Ie=Ce),K(Ie)):h(Ie,Ce)}return Mn}var An=Kn(!0),rn=Kn(!1),On=es(null),Jn=null,Xr=null,dr=null;function wr(){dr=Xr=Jn=null}function Zr(s){var l=On.current;Ir(On),s._currentValue=l}function Sr(s,l,h){for(;s!==null;){var g=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),s===h)break;s=s.return}}function hn(s,l){Jn=s,dr=Xr=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(Fo=!0),s.firstContext=null)}function fn(s){var l=s._currentValue;if(dr!==s)if(s={context:s,memoizedValue:l,next:null},Xr===null){if(Jn===null)throw Error(t(308));Xr=s,Jn.dependencies={lanes:0,firstContext:s}}else Xr=Xr.next=s;return l}var Dr=null;function vi(s){Dr===null?Dr=[s]:Dr.push(s)}function Nr(s,l,h,g){var _=l.interleaved;return _===null?(h.next=h,vi(l)):(h.next=_.next,_.next=h),l.interleaved=h,Wr(s,g)}function Wr(s,l){s.lanes|=l;var h=s.alternate;for(h!==null&&(h.lanes|=l),h=s,s=s.return;s!==null;)s.childLanes|=l,h=s.alternate,h!==null&&(h.childLanes|=l),h=s,s=s.return;return h.tag===3?h.stateNode:null}var kn=!1;function oi(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xi(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function vn(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function bn(s,l,h){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(_r&2)!==0){var _=g.pending;return _===null?l.next=l:(l.next=_.next,_.next=l),g.pending=l,Wr(s,h)}return _=g.interleaved,_===null?(l.next=l,vi(g)):(l.next=_.next,_.next=l),g.interleaved=l,Wr(s,h)}function bi(s,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var g=l.lanes;g&=s.pendingLanes,h|=g,l.lanes=h,ua(s,h)}}function $r(s,l){var h=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var _=null,P=null;if(h=h.firstBaseUpdate,h!==null){do{var K={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};P===null?_=P=K:P=P.next=K,h=h.next}while(h!==null);P===null?_=P=l:P=P.next=l}else _=P=l;h={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:P,shared:g.shared,effects:g.effects},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=l:s.next=l,h.lastBaseUpdate=l}function wi(s,l,h,g){var _=s.updateQueue;kn=!1;var P=_.firstBaseUpdate,K=_.lastBaseUpdate,pe=_.shared.pending;if(pe!==null){_.shared.pending=null;var Se=pe,Le=Se.next;Se.next=null,K===null?P=Le:K.next=Le,K=Se;var Je=s.alternate;Je!==null&&(Je=Je.updateQueue,pe=Je.lastBaseUpdate,pe!==K&&(pe===null?Je.firstBaseUpdate=Le:pe.next=Le,Je.lastBaseUpdate=Se))}if(P!==null){var Ye=_.baseState;K=0,Je=Le=Se=null,pe=P;do{var Ke=pe.lane,ot=pe.eventTime;if((g&Ke)===Ke){Je!==null&&(Je=Je.next={eventTime:ot,lane:0,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null});e:{var mt=s,xt=pe;switch(Ke=l,ot=h,xt.tag){case 1:if(mt=xt.payload,typeof mt=="function"){Ye=mt.call(ot,Ye,Ke);break e}Ye=mt;break e;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=xt.payload,Ke=typeof mt=="function"?mt.call(ot,Ye,Ke):mt,Ke==null)break e;Ye=be({},Ye,Ke);break e;case 2:kn=!0}}pe.callback!==null&&pe.lane!==0&&(s.flags|=64,Ke=_.effects,Ke===null?_.effects=[pe]:Ke.push(pe))}else ot={eventTime:ot,lane:Ke,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},Je===null?(Le=Je=ot,Se=Ye):Je=Je.next=ot,K|=Ke;if(pe=pe.next,pe===null){if(pe=_.shared.pending,pe===null)break;Ke=pe,pe=Ke.next,Ke.next=null,_.lastBaseUpdate=Ke,_.shared.pending=null}}while(!0);if(Je===null&&(Se=Ye),_.baseState=Se,_.firstBaseUpdate=Le,_.lastBaseUpdate=Je,l=_.shared.interleaved,l!==null){_=l;do K|=_.lane,_=_.next;while(_!==l)}else P===null&&(_.shared.lanes=0);Pc|=K,s.lanes=K,s.memoizedState=Ye}}function Lo(s,l,h){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var g=s[l],_=g.callback;if(_!==null){if(g.callback=null,g=h,typeof _!="function")throw Error(t(191,_));_.call(g)}}}var ts={},Yn=es(ts),wn=es(ts),_a=es(ts);function Gs(s){if(s===ts)throw Error(t(174));return s}function Nl(s,l){switch(Pr(_a,l),Pr(wn,s),Pr(Yn,ts),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:yr(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=yr(l,s)}Ir(Yn),Pr(Yn,l)}function Cs(){Ir(Yn),Ir(wn),Ir(_a)}function Wh(s){Gs(_a.current);var l=Gs(Yn.current),h=yr(l,s.type);l!==h&&(Pr(wn,s),Pr(Yn,h))}function Ed(s){wn.current===s&&(Ir(Yn),Ir(wn))}var Yr=es(0);function rs(s){for(var l=s;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Id=[];function Rd(){for(var s=0;s<Id.length;s++)Id[s]._workInProgressVersionPrimary=null;Id.length=0}var gu=F.ReactCurrentDispatcher,yu=F.ReactCurrentBatchConfig,As=0,en=null,jn=null,Sn=null,Bl=!1,Ks=!1,Ll=0,Zp=0;function Vn(){throw Error(t(321))}function xu(s,l){if(l===null)return!1;for(var h=0;h<l.length&&h<s.length;h++)if(!cn(s[h],l[h]))return!1;return!0}function Ec(s,l,h,g,_,P){if(As=P,en=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,gu.current=s===null||s.memoizedState===null?bS:wS,s=h(g,_),Ks){P=0;do{if(Ks=!1,Ll=0,25<=P)throw Error(t(301));P+=1,Sn=jn=null,l.updateQueue=null,gu.current=SS,s=h(g,_)}while(Ks)}if(gu.current=Gh,l=jn!==null&&jn.next!==null,As=0,Sn=jn=en=null,Bl=!1,l)throw Error(t(300));return s}function ks(){var s=Ll!==0;return Ll=0,s}function ns(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?en.memoizedState=Sn=s:Sn=Sn.next=s,Sn}function vo(){if(jn===null){var s=en.alternate;s=s!==null?s.memoizedState:null}else s=jn.next;var l=Sn===null?en.memoizedState:Sn.next;if(l!==null)Sn=l,jn=s;else{if(s===null)throw Error(t(310));jn=s,s={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},Sn===null?en.memoizedState=Sn=s:Sn=Sn.next=s}return Sn}function Ic(s,l){return typeof l=="function"?l(s):l}function vu(s){var l=vo(),h=l.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=s;var g=jn,_=g.baseQueue,P=h.pending;if(P!==null){if(_!==null){var K=_.next;_.next=P.next,P.next=K}g.baseQueue=_=P,h.pending=null}if(_!==null){P=_.next,g=g.baseState;var pe=K=null,Se=null,Le=P;do{var Je=Le.lane;if((As&Je)===Je)Se!==null&&(Se=Se.next={lane:0,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),g=Le.hasEagerState?Le.eagerState:s(g,Le.action);else{var Ye={lane:Je,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null};Se===null?(pe=Se=Ye,K=g):Se=Se.next=Ye,en.lanes|=Je,Pc|=Je}Le=Le.next}while(Le!==null&&Le!==P);Se===null?K=g:Se.next=pe,cn(g,l.memoizedState)||(Fo=!0),l.memoizedState=g,l.baseState=K,l.baseQueue=Se,h.lastRenderedState=g}if(s=h.interleaved,s!==null){_=s;do P=_.lane,en.lanes|=P,Pc|=P,_=_.next;while(_!==s)}else _===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function Ta(s){var l=vo(),h=l.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=s;var g=h.dispatch,_=h.pending,P=l.memoizedState;if(_!==null){h.pending=null;var K=_=_.next;do P=s(P,K.action),K=K.next;while(K!==_);cn(P,l.memoizedState)||(Fo=!0),l.memoizedState=P,l.baseQueue===null&&(l.baseState=P),h.lastRenderedState=P}return[P,g]}function $h(){}function Pd(s,l){var h=en,g=vo(),_=l(),P=!cn(g.memoizedState,_);if(P&&(g.memoizedState=_,Fo=!0),g=g.queue,Su(qh.bind(null,h,g,s),[s]),g.getSnapshot!==l||P||Sn!==null&&Sn.memoizedState.tag&1){if(h.flags|=2048,bo(9,Nd.bind(null,h,g,_,l),void 0,null),Si===null)throw Error(t(349));(As&30)!==0||Uh(h,l,_)}return _}function Uh(s,l,h){s.flags|=16384,s={getSnapshot:l,value:h},l=en.updateQueue,l===null?(l={lastEffect:null,stores:null},en.updateQueue=l,l.stores=[s]):(h=l.stores,h===null?l.stores=[s]:h.push(s))}function Nd(s,l,h,g){l.value=h,l.getSnapshot=g,Fl(l)&&bu(s)}function qh(s,l,h){return h(function(){Fl(l)&&bu(s)})}function Fl(s){var l=s.getSnapshot;s=s.value;try{var h=l();return!cn(s,h)}catch{return!0}}function bu(s){var l=Wr(s,1);l!==null&&Zs(l,s,1,-1)}function Rc(s){var l=ns();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ic,lastRenderedState:s},l.queue=s,s=s.dispatch=vS.bind(null,en,s),[l.memoizedState,s]}function bo(s,l,h,g){return s={tag:s,create:l,destroy:h,deps:g,next:null},l=en.updateQueue,l===null?(l={lastEffect:null,stores:null},en.updateQueue=l,l.lastEffect=s.next=s):(h=l.lastEffect,h===null?l.lastEffect=s.next=s:(g=h.next,h.next=s,s.next=g,l.lastEffect=s)),s}function Js(){return vo().memoizedState}function is(s,l,h,g){var _=ns();en.flags|=s,_.memoizedState=bo(1|l,h,void 0,g===void 0?null:g)}function il(s,l,h,g){var _=vo();g=g===void 0?null:g;var P=void 0;if(jn!==null){var K=jn.memoizedState;if(P=K.destroy,g!==null&&xu(g,K.deps)){_.memoizedState=bo(l,h,P,g);return}}en.flags|=s,_.memoizedState=bo(1|l,h,P,g)}function wu(s,l){return is(8390656,8,s,l)}function Su(s,l){return il(2048,8,s,l)}function Hh(s,l){return il(4,2,s,l)}function _u(s,l){return il(4,4,s,l)}function Tu(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function l1(s,l,h){return h=h!=null?h.concat([s]):null,il(4,4,Tu.bind(null,l,s),h)}function e0(){}function c1(s,l){var h=vo();l=l===void 0?null:l;var g=h.memoizedState;return g!==null&&l!==null&&xu(l,g[1])?g[0]:(h.memoizedState=[s,l],s)}function u1(s,l){var h=vo();l=l===void 0?null:l;var g=h.memoizedState;return g!==null&&l!==null&&xu(l,g[1])?g[0]:(s=s(),h.memoizedState=[s,l],s)}function d1(s,l,h){return(As&21)===0?(s.baseState&&(s.baseState=!1,Fo=!0),s.memoizedState=h):(cn(h,l)||(h=Va(),en.lanes|=h,Pc|=h,s.baseState=!0),l)}function yS(s,l){var h=nr;nr=h!==0&&4>h?h:4,s(!0);var g=yu.transition;yu.transition={};try{s(!1),l()}finally{nr=h,yu.transition=g}}function h1(){return vo().memoizedState}function xS(s,l,h){var g=Ml(s);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},f1(s))p1(l,h);else if(h=Nr(s,l,h,g),h!==null){var _=So();Zs(h,s,g,_),m1(h,l,g)}}function vS(s,l,h){var g=Ml(s),_={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(f1(s))p1(l,_);else{var P=s.alternate;if(s.lanes===0&&(P===null||P.lanes===0)&&(P=l.lastRenderedReducer,P!==null))try{var K=l.lastRenderedState,pe=P(K,h);if(_.hasEagerState=!0,_.eagerState=pe,cn(pe,K)){var Se=l.interleaved;Se===null?(_.next=_,vi(l)):(_.next=Se.next,Se.next=_),l.interleaved=_;return}}catch{}finally{}h=Nr(s,l,_,g),h!==null&&(_=So(),Zs(h,s,g,_),m1(h,l,g))}}function f1(s){var l=s.alternate;return s===en||l!==null&&l===en}function p1(s,l){Ks=Bl=!0;var h=s.pending;h===null?l.next=l:(l.next=h.next,h.next=l),s.pending=l}function m1(s,l,h){if((h&4194240)!==0){var g=l.lanes;g&=s.pendingLanes,h|=g,l.lanes=h,ua(s,h)}}var Gh={readContext:fn,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useInsertionEffect:Vn,useLayoutEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useMutableSource:Vn,useSyncExternalStore:Vn,useId:Vn,unstable_isNewReconciler:!1},bS={readContext:fn,useCallback:function(s,l){return ns().memoizedState=[s,l===void 0?null:l],s},useContext:fn,useEffect:wu,useImperativeHandle:function(s,l,h){return h=h!=null?h.concat([s]):null,is(4194308,4,Tu.bind(null,l,s),h)},useLayoutEffect:function(s,l){return is(4194308,4,s,l)},useInsertionEffect:function(s,l){return is(4,2,s,l)},useMemo:function(s,l){var h=ns();return l=l===void 0?null:l,s=s(),h.memoizedState=[s,l],s},useReducer:function(s,l,h){var g=ns();return l=h!==void 0?h(l):l,g.memoizedState=g.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},g.queue=s,s=s.dispatch=xS.bind(null,en,s),[g.memoizedState,s]},useRef:function(s){var l=ns();return s={current:s},l.memoizedState=s},useState:Rc,useDebugValue:e0,useDeferredValue:function(s){return ns().memoizedState=s},useTransition:function(){var s=Rc(!1),l=s[0];return s=yS.bind(null,s[1]),ns().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,h){var g=en,_=ns();if(De){if(h===void 0)throw Error(t(407));h=h()}else{if(h=l(),Si===null)throw Error(t(349));(As&30)!==0||Uh(g,l,h)}_.memoizedState=h;var P={value:h,getSnapshot:l};return _.queue=P,wu(qh.bind(null,g,P,s),[s]),g.flags|=2048,bo(9,Nd.bind(null,g,P,h,l),void 0,null),h},useId:function(){var s=ns(),l=Si.identifierPrefix;if(De){var h=le,g=Ee;h=(g&~(1<<32-Hn(g)-1)).toString(32)+h,l=":"+l+"R"+h,h=Ll++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=Zp++,l=":"+l+"r"+h.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},wS={readContext:fn,useCallback:c1,useContext:fn,useEffect:Su,useImperativeHandle:l1,useInsertionEffect:Hh,useLayoutEffect:_u,useMemo:u1,useReducer:vu,useRef:Js,useState:function(){return vu(Ic)},useDebugValue:e0,useDeferredValue:function(s){var l=vo();return d1(l,jn.memoizedState,s)},useTransition:function(){var s=vu(Ic)[0],l=vo().memoizedState;return[s,l]},useMutableSource:$h,useSyncExternalStore:Pd,useId:h1,unstable_isNewReconciler:!1},SS={readContext:fn,useCallback:c1,useContext:fn,useEffect:Su,useImperativeHandle:l1,useInsertionEffect:Hh,useLayoutEffect:_u,useMemo:u1,useReducer:Ta,useRef:Js,useState:function(){return Ta(Ic)},useDebugValue:e0,useDeferredValue:function(s){var l=vo();return jn===null?l.memoizedState=s:d1(l,jn.memoizedState,s)},useTransition:function(){var s=Ta(Ic)[0],l=vo().memoizedState;return[s,l]},useMutableSource:$h,useSyncExternalStore:Pd,useId:h1,unstable_isNewReconciler:!1};function Ys(s,l){if(s&&s.defaultProps){l=be({},l),s=s.defaultProps;for(var h in s)l[h]===void 0&&(l[h]=s[h]);return l}return l}function t0(s,l,h,g){l=s.memoizedState,h=h(g,l),h=h==null?l:be({},l,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var Kh={isMounted:function(s){return(s=s._reactInternals)?mn(s)===s:!1},enqueueSetState:function(s,l,h){s=s._reactInternals;var g=So(),_=Ml(s),P=vn(g,_);P.payload=l,h!=null&&(P.callback=h),l=bn(s,P,_),l!==null&&(Zs(l,s,_,g),bi(l,s,_))},enqueueReplaceState:function(s,l,h){s=s._reactInternals;var g=So(),_=Ml(s),P=vn(g,_);P.tag=1,P.payload=l,h!=null&&(P.callback=h),l=bn(s,P,_),l!==null&&(Zs(l,s,_,g),bi(l,s,_))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var h=So(),g=Ml(s),_=vn(h,g);_.tag=2,l!=null&&(_.callback=l),l=bn(s,_,g),l!==null&&(Zs(l,s,g,h),bi(l,s,g))}};function g1(s,l,h,g,_,P,K){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,P,K):l.prototype&&l.prototype.isPureReactComponent?!Gi(h,g)||!Gi(_,P):!0}function y1(s,l,h){var g=!1,_=Sa,P=l.contextType;return typeof P=="object"&&P!==null?P=fn(P):(_=Qi(l)?rl:ii.current,g=l.contextTypes,P=(g=g!=null)?Pl(s,_):Sa),l=new l(h,P),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Kh,s.stateNode=l,l._reactInternals=s,g&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=_,s.__reactInternalMemoizedMaskedChildContext=P),l}function x1(s,l,h,g){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,g),l.state!==s&&Kh.enqueueReplaceState(l,l.state,null)}function r0(s,l,h,g){var _=s.stateNode;_.props=h,_.state=s.memoizedState,_.refs={},oi(s);var P=l.contextType;typeof P=="object"&&P!==null?_.context=fn(P):(P=Qi(l)?rl:ii.current,_.context=Pl(s,P)),_.state=s.memoizedState,P=l.getDerivedStateFromProps,typeof P=="function"&&(t0(s,l,P,h),_.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(l=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),l!==_.state&&Kh.enqueueReplaceState(_,_.state,null),wi(s,h,_,g),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308)}function Cu(s,l){try{var h="",g=l;do h+=he(g),g=g.return;while(g);var _=h}catch(P){_=`
Error generating stack: `+P.message+`
`+P.stack}return{value:s,source:l,stack:_,digest:null}}function n0(s,l,h){return{value:s,source:null,stack:h??null,digest:l??null}}function i0(s,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var _S=typeof WeakMap=="function"?WeakMap:Map;function v1(s,l,h){h=vn(-1,h),h.tag=3,h.payload={element:null};var g=l.value;return h.callback=function(){tf||(tf=!0,v0=g),i0(s,l)},h}function b1(s,l,h){h=vn(-1,h),h.tag=3;var g=s.type.getDerivedStateFromError;if(typeof g=="function"){var _=l.value;h.payload=function(){return g(_)},h.callback=function(){i0(s,l)}}var P=s.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(h.callback=function(){i0(s,l),typeof g!="function"&&(Ol===null?Ol=new Set([this]):Ol.add(this));var K=l.stack;this.componentDidCatch(l.value,{componentStack:K!==null?K:""})}),h}function w1(s,l,h){var g=s.pingCache;if(g===null){g=s.pingCache=new _S;var _=new Set;g.set(l,_)}else _=g.get(l),_===void 0&&(_=new Set,g.set(l,_));_.has(h)||(_.add(h),s=zS.bind(null,s,l,h),l.then(s,s))}function S1(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function _1(s,l,h,g,_){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=vn(-1,1),l.tag=2,bn(h,l,1))),h.lanes|=1),s):(s.flags|=65536,s.lanes=_,s)}var TS=F.ReactCurrentOwner,Fo=!1;function wo(s,l,h,g){l.child=s===null?rn(l,null,h,g):An(l,s.child,h,g)}function T1(s,l,h,g,_){h=h.render;var P=l.ref;return hn(l,_),g=Ec(s,l,h,g,P,_),h=ks(),s!==null&&!Fo?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~_,ol(s,l,_)):(De&&h&&Ve(l),l.flags|=1,wo(s,l,g,_),l.child)}function C1(s,l,h,g,_){if(s===null){var P=h.type;return typeof P=="function"&&!A0(P)&&P.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=P,A1(s,l,P,g,_)):(s=lf(h.type,null,g,l,l.mode,_),s.ref=l.ref,s.return=l,l.child=s)}if(P=s.child,(s.lanes&_)===0){var K=P.memoizedProps;if(h=h.compare,h=h!==null?h:Gi,h(K,g)&&s.ref===l.ref)return ol(s,l,_)}return l.flags|=1,s=Wl(P,g),s.ref=l.ref,s.return=l,l.child=s}function A1(s,l,h,g,_){if(s!==null){var P=s.memoizedProps;if(Gi(P,g)&&s.ref===l.ref)if(Fo=!1,l.pendingProps=g=P,(s.lanes&_)!==0)(s.flags&131072)!==0&&(Fo=!0);else return l.lanes=s.lanes,ol(s,l,_)}return o0(s,l,h,g,_)}function k1(s,l,h){var g=l.pendingProps,_=g.children,P=s!==null?s.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pr(ku,os),os|=h;else{if((h&1073741824)===0)return s=P!==null?P.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,Pr(ku,os),os|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=P!==null?P.baseLanes:h,Pr(ku,os),os|=g}else P!==null?(g=P.baseLanes|h,l.memoizedState=null):g=h,Pr(ku,os),os|=g;return wo(s,l,_,h),l.child}function j1(s,l){var h=l.ref;(s===null&&h!==null||s!==null&&s.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function o0(s,l,h,g,_){var P=Qi(h)?rl:ii.current;return P=Pl(l,P),hn(l,_),h=Ec(s,l,h,g,P,_),g=ks(),s!==null&&!Fo?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~_,ol(s,l,_)):(De&&g&&Ve(l),l.flags|=1,wo(s,l,h,_),l.child)}function E1(s,l,h,g,_){if(Qi(h)){var P=!0;nl(l)}else P=!1;if(hn(l,_),l.stateNode===null)Yh(s,l),y1(l,h,g),r0(l,h,g,_),g=!0;else if(s===null){var K=l.stateNode,pe=l.memoizedProps;K.props=pe;var Se=K.context,Le=h.contextType;typeof Le=="object"&&Le!==null?Le=fn(Le):(Le=Qi(h)?rl:ii.current,Le=Pl(l,Le));var Je=h.getDerivedStateFromProps,Ye=typeof Je=="function"||typeof K.getSnapshotBeforeUpdate=="function";Ye||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(pe!==g||Se!==Le)&&x1(l,K,g,Le),kn=!1;var Ke=l.memoizedState;K.state=Ke,wi(l,g,K,_),Se=l.memoizedState,pe!==g||Ke!==Se||Yi.current||kn?(typeof Je=="function"&&(t0(l,h,Je,g),Se=l.memoizedState),(pe=kn||g1(l,h,pe,g,Ke,Se,Le))?(Ye||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(l.flags|=4194308)):(typeof K.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=Se),K.props=g,K.state=Se,K.context=Le,g=pe):(typeof K.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{K=l.stateNode,Xi(s,l),pe=l.memoizedProps,Le=l.type===l.elementType?pe:Ys(l.type,pe),K.props=Le,Ye=l.pendingProps,Ke=K.context,Se=h.contextType,typeof Se=="object"&&Se!==null?Se=fn(Se):(Se=Qi(h)?rl:ii.current,Se=Pl(l,Se));var ot=h.getDerivedStateFromProps;(Je=typeof ot=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(pe!==Ye||Ke!==Se)&&x1(l,K,g,Se),kn=!1,Ke=l.memoizedState,K.state=Ke,wi(l,g,K,_);var mt=l.memoizedState;pe!==Ye||Ke!==mt||Yi.current||kn?(typeof ot=="function"&&(t0(l,h,ot,g),mt=l.memoizedState),(Le=kn||g1(l,h,Le,g,Ke,mt,Se)||!1)?(Je||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(g,mt,Se),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(g,mt,Se)),typeof K.componentDidUpdate=="function"&&(l.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof K.componentDidUpdate!="function"||pe===s.memoizedProps&&Ke===s.memoizedState||(l.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||pe===s.memoizedProps&&Ke===s.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=mt),K.props=g,K.state=mt,K.context=Se,g=Le):(typeof K.componentDidUpdate!="function"||pe===s.memoizedProps&&Ke===s.memoizedState||(l.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||pe===s.memoizedProps&&Ke===s.memoizedState||(l.flags|=1024),g=!1)}return s0(s,l,h,g,P,_)}function s0(s,l,h,g,_,P){j1(s,l);var K=(l.flags&128)!==0;if(!g&&!K)return _&&Dh(l,h,!1),ol(s,l,P);g=l.stateNode,TS.current=l;var pe=K&&typeof h.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,s!==null&&K?(l.child=An(l,s.child,null,P),l.child=An(l,null,pe,P)):wo(s,l,pe,P),l.memoizedState=g.state,_&&Dh(l,h,!0),l.child}function I1(s){var l=s.stateNode;l.pendingContext?Mh(s,l.pendingContext,l.pendingContext!==l.context):l.context&&Mh(s,l.context,!1),Nl(s,l.containerInfo)}function R1(s,l,h,g,_){return lt(),rt(_),l.flags|=256,wo(s,l,h,g),l.child}var a0={dehydrated:null,treeContext:null,retryLane:0};function l0(s){return{baseLanes:s,cachePool:null,transitions:null}}function P1(s,l,h){var g=l.pendingProps,_=Yr.current,P=!1,K=(l.flags&128)!==0,pe;if((pe=K)||(pe=s!==null&&s.memoizedState===null?!1:(_&2)!==0),pe?(P=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(_|=1),Pr(Yr,_&1),s===null)return ht(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(K=g.children,s=g.fallback,P?(g=l.mode,P=l.child,K={mode:"hidden",children:K},(g&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=K):P=cf(K,g,0,null),s=Fc(s,g,h,null),P.return=l,s.return=l,P.sibling=s,l.child=P,l.child.memoizedState=l0(h),l.memoizedState=a0,s):c0(l,K));if(_=s.memoizedState,_!==null&&(pe=_.dehydrated,pe!==null))return CS(s,l,K,g,pe,_,h);if(P){P=g.fallback,K=l.mode,_=s.child,pe=_.sibling;var Se={mode:"hidden",children:g.children};return(K&1)===0&&l.child!==_?(g=l.child,g.childLanes=0,g.pendingProps=Se,l.deletions=null):(g=Wl(_,Se),g.subtreeFlags=_.subtreeFlags&14680064),pe!==null?P=Wl(pe,P):(P=Fc(P,K,h,null),P.flags|=2),P.return=l,g.return=l,g.sibling=P,l.child=g,g=P,P=l.child,K=s.child.memoizedState,K=K===null?l0(h):{baseLanes:K.baseLanes|h,cachePool:null,transitions:K.transitions},P.memoizedState=K,P.childLanes=s.childLanes&~h,l.memoizedState=a0,g}return P=s.child,s=P.sibling,g=Wl(P,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=h),g.return=l,g.sibling=null,s!==null&&(h=l.deletions,h===null?(l.deletions=[s],l.flags|=16):h.push(s)),l.child=g,l.memoizedState=null,g}function c0(s,l){return l=cf({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function Jh(s,l,h,g){return g!==null&&rt(g),An(l,s.child,null,h),s=c0(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function CS(s,l,h,g,_,P,K){if(h)return l.flags&256?(l.flags&=-257,g=n0(Error(t(422))),Jh(s,l,K,g)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(P=g.fallback,_=l.mode,g=cf({mode:"visible",children:g.children},_,0,null),P=Fc(P,_,K,null),P.flags|=2,g.return=l,P.return=l,g.sibling=P,l.child=g,(l.mode&1)!==0&&An(l,s.child,null,K),l.child.memoizedState=l0(K),l.memoizedState=a0,P);if((l.mode&1)===0)return Jh(s,l,K,null);if(_.data==="$!"){if(g=_.nextSibling&&_.nextSibling.dataset,g)var pe=g.dgst;return g=pe,P=Error(t(419)),g=n0(P,g,void 0),Jh(s,l,K,g)}if(pe=(K&s.childLanes)!==0,Fo||pe){if(g=Si,g!==null){switch(K&-K){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(g.suspendedLanes|K))!==0?0:_,_!==0&&_!==P.retryLane&&(P.retryLane=_,Wr(s,_),Zs(g,s,_,-1))}return C0(),g=n0(Error(t(421))),Jh(s,l,K,g)}return _.data==="$?"?(l.flags|=128,l.child=s.child,l=OS.bind(null,s),_._reactRetry=l,null):(s=P.treeContext,Oe=Li(_.nextSibling),ze=l,De=!0,$e=null,s!==null&&(te[ae++]=Ee,te[ae++]=le,te[ae++]=we,Ee=s.id,le=s.overflow,we=l),l=c0(l,g.children),l.flags|=4096,l)}function N1(s,l,h){s.lanes|=l;var g=s.alternate;g!==null&&(g.lanes|=l),Sr(s.return,l,h)}function u0(s,l,h,g,_){var P=s.memoizedState;P===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:_}:(P.isBackwards=l,P.rendering=null,P.renderingStartTime=0,P.last=g,P.tail=h,P.tailMode=_)}function B1(s,l,h){var g=l.pendingProps,_=g.revealOrder,P=g.tail;if(wo(s,l,g.children,h),g=Yr.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&N1(s,h,l);else if(s.tag===19)N1(s,h,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}g&=1}if(Pr(Yr,g),(l.mode&1)===0)l.memoizedState=null;else switch(_){case"forwards":for(h=l.child,_=null;h!==null;)s=h.alternate,s!==null&&rs(s)===null&&(_=h),h=h.sibling;h=_,h===null?(_=l.child,l.child=null):(_=h.sibling,h.sibling=null),u0(l,!1,_,h,P);break;case"backwards":for(h=null,_=l.child,l.child=null;_!==null;){if(s=_.alternate,s!==null&&rs(s)===null){l.child=_;break}s=_.sibling,_.sibling=h,h=_,_=s}u0(l,!0,h,null,P);break;case"together":u0(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Yh(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function ol(s,l,h){if(s!==null&&(l.dependencies=s.dependencies),Pc|=l.lanes,(h&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(t(153));if(l.child!==null){for(s=l.child,h=Wl(s,s.pendingProps),l.child=h,h.return=l;s.sibling!==null;)s=s.sibling,h=h.sibling=Wl(s,s.pendingProps),h.return=l;h.sibling=null}return l.child}function AS(s,l,h){switch(l.tag){case 3:I1(l),lt();break;case 5:Wh(l);break;case 1:Qi(l.type)&&nl(l);break;case 4:Nl(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,_=l.memoizedProps.value;Pr(On,g._currentValue),g._currentValue=_;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(Pr(Yr,Yr.current&1),l.flags|=128,null):(h&l.child.childLanes)!==0?P1(s,l,h):(Pr(Yr,Yr.current&1),s=ol(s,l,h),s!==null?s.sibling:null);Pr(Yr,Yr.current&1);break;case 19:if(g=(h&l.childLanes)!==0,(s.flags&128)!==0){if(g)return B1(s,l,h);l.flags|=128}if(_=l.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Pr(Yr,Yr.current),g)break;return null;case 22:case 23:return l.lanes=0,k1(s,l,h)}return ol(s,l,h)}var L1,d0,F1,z1;L1=function(s,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},d0=function(){},F1=function(s,l,h,g){var _=s.memoizedProps;if(_!==g){s=l.stateNode,Gs(Yn.current);var P=null;switch(h){case"input":_=Fe(s,_),g=Fe(s,g),P=[];break;case"select":_=be({},_,{value:void 0}),g=be({},g,{value:void 0}),P=[];break;case"textarea":_=Gt(s,_),g=Gt(s,g),P=[];break;default:typeof _.onClick!="function"&&typeof g.onClick=="function"&&(s.onclick=El)}ir(h,g);var K;h=null;for(Le in _)if(!g.hasOwnProperty(Le)&&_.hasOwnProperty(Le)&&_[Le]!=null)if(Le==="style"){var pe=_[Le];for(K in pe)pe.hasOwnProperty(K)&&(h||(h={}),h[K]="")}else Le!=="dangerouslySetInnerHTML"&&Le!=="children"&&Le!=="suppressContentEditableWarning"&&Le!=="suppressHydrationWarning"&&Le!=="autoFocus"&&(o.hasOwnProperty(Le)?P||(P=[]):(P=P||[]).push(Le,null));for(Le in g){var Se=g[Le];if(pe=_!=null?_[Le]:void 0,g.hasOwnProperty(Le)&&Se!==pe&&(Se!=null||pe!=null))if(Le==="style")if(pe){for(K in pe)!pe.hasOwnProperty(K)||Se&&Se.hasOwnProperty(K)||(h||(h={}),h[K]="");for(K in Se)Se.hasOwnProperty(K)&&pe[K]!==Se[K]&&(h||(h={}),h[K]=Se[K])}else h||(P||(P=[]),P.push(Le,h)),h=Se;else Le==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,pe=pe?pe.__html:void 0,Se!=null&&pe!==Se&&(P=P||[]).push(Le,Se)):Le==="children"?typeof Se!="string"&&typeof Se!="number"||(P=P||[]).push(Le,""+Se):Le!=="suppressContentEditableWarning"&&Le!=="suppressHydrationWarning"&&(o.hasOwnProperty(Le)?(Se!=null&&Le==="onScroll"&&Mr("scroll",s),P||pe===Se||(P=[])):(P=P||[]).push(Le,Se))}h&&(P=P||[]).push("style",h);var Le=P;(l.updateQueue=Le)&&(l.flags|=4)}},z1=function(s,l,h,g){h!==g&&(l.flags|=4)};function Bd(s,l){if(!De)switch(s.tailMode){case"hidden":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function Zi(s){var l=s.alternate!==null&&s.alternate.child===s.child,h=0,g=0;if(l)for(var _=s.child;_!==null;)h|=_.lanes|_.childLanes,g|=_.subtreeFlags&14680064,g|=_.flags&14680064,_.return=s,_=_.sibling;else for(_=s.child;_!==null;)h|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=s,_=_.sibling;return s.subtreeFlags|=g,s.childLanes=h,l}function kS(s,l,h){var g=l.pendingProps;switch(Re(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zi(l),null;case 1:return Qi(l.type)&&mu(),Zi(l),null;case 3:return g=l.stateNode,Cs(),Ir(Yi),Ir(ii),Rd(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(dn(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,$e!==null&&(S0($e),$e=null))),d0(s,l),Zi(l),null;case 5:Ed(l);var _=Gs(_a.current);if(h=l.type,s!==null&&l.stateNode!=null)F1(s,l,h,g,_),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(t(166));return Zi(l),null}if(s=Gs(Yn.current),dn(l)){g=l.stateNode,h=l.type;var P=l.memoizedProps;switch(g[Ts]=l,g[Il]=P,s=(l.mode&1)!==0,h){case"dialog":Mr("cancel",g),Mr("close",g);break;case"iframe":case"object":case"embed":Mr("load",g);break;case"video":case"audio":for(_=0;_<ba.length;_++)Mr(ba[_],g);break;case"source":Mr("error",g);break;case"img":case"image":case"link":Mr("error",g),Mr("load",g);break;case"details":Mr("toggle",g);break;case"input":de(g,P),Mr("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!P.multiple},Mr("invalid",g);break;case"textarea":wt(g,P),Mr("invalid",g)}ir(h,P),_=null;for(var K in P)if(P.hasOwnProperty(K)){var pe=P[K];K==="children"?typeof pe=="string"?g.textContent!==pe&&(P.suppressHydrationWarning!==!0&&pu(g.textContent,pe,s),_=["children",pe]):typeof pe=="number"&&g.textContent!==""+pe&&(P.suppressHydrationWarning!==!0&&pu(g.textContent,pe,s),_=["children",""+pe]):o.hasOwnProperty(K)&&pe!=null&&K==="onScroll"&&Mr("scroll",g)}switch(h){case"input":We(g),vt(g,P,!0);break;case"textarea":We(g),Nt(g);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(g.onclick=El)}g=_,l.updateQueue=g,g!==null&&(l.flags|=4)}else{K=_.nodeType===9?_:_.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Wt(h)),s==="http://www.w3.org/1999/xhtml"?h==="script"?(s=K.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof g.is=="string"?s=K.createElement(h,{is:g.is}):(s=K.createElement(h),h==="select"&&(K=s,g.multiple?K.multiple=!0:g.size&&(K.size=g.size))):s=K.createElementNS(s,h),s[Ts]=l,s[Il]=g,L1(s,l,!1,!1),l.stateNode=s;e:{switch(K=Ct(h,g),h){case"dialog":Mr("cancel",s),Mr("close",s),_=g;break;case"iframe":case"object":case"embed":Mr("load",s),_=g;break;case"video":case"audio":for(_=0;_<ba.length;_++)Mr(ba[_],s);_=g;break;case"source":Mr("error",s),_=g;break;case"img":case"image":case"link":Mr("error",s),Mr("load",s),_=g;break;case"details":Mr("toggle",s),_=g;break;case"input":de(s,g),_=Fe(s,g),Mr("invalid",s);break;case"option":_=g;break;case"select":s._wrapperState={wasMultiple:!!g.multiple},_=be({},g,{value:void 0}),Mr("invalid",s);break;case"textarea":wt(s,g),_=Gt(s,g),Mr("invalid",s);break;default:_=g}ir(h,_),pe=_;for(P in pe)if(pe.hasOwnProperty(P)){var Se=pe[P];P==="style"?dt(s,Se):P==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,Se!=null&&St(s,Se)):P==="children"?typeof Se=="string"?(h!=="textarea"||Se!=="")&&kt(s,Se):typeof Se=="number"&&kt(s,""+Se):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(o.hasOwnProperty(P)?Se!=null&&P==="onScroll"&&Mr("scroll",s):Se!=null&&U(s,P,Se,K))}switch(h){case"input":We(s),vt(s,g,!1);break;case"textarea":We(s),Nt(s);break;case"option":g.value!=null&&s.setAttribute("value",""+fe(g.value));break;case"select":s.multiple=!!g.multiple,P=g.value,P!=null?tt(s,!!g.multiple,P,!1):g.defaultValue!=null&&tt(s,!!g.multiple,g.defaultValue,!0);break;default:typeof _.onClick=="function"&&(s.onclick=El)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Zi(l),null;case 6:if(s&&l.stateNode!=null)z1(s,l,s.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(t(166));if(h=Gs(_a.current),Gs(Yn.current),dn(l)){if(g=l.stateNode,h=l.memoizedProps,g[Ts]=l,(P=g.nodeValue!==h)&&(s=ze,s!==null))switch(s.tag){case 3:pu(g.nodeValue,h,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&pu(g.nodeValue,h,(s.mode&1)!==0)}P&&(l.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[Ts]=l,l.stateNode=g}return Zi(l),null;case 13:if(Ir(Yr),g=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(De&&Oe!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Zt(),lt(),l.flags|=98560,P=!1;else if(P=dn(l),g!==null&&g.dehydrated!==null){if(s===null){if(!P)throw Error(t(318));if(P=l.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(t(317));P[Ts]=l}else lt(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Zi(l),P=!1}else $e!==null&&(S0($e),$e=null),P=!0;if(!P)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=h,l):(g=g!==null,g!==(s!==null&&s.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(Yr.current&1)!==0?si===0&&(si=3):C0())),l.updateQueue!==null&&(l.flags|=4),Zi(l),null);case 4:return Cs(),d0(s,l),s===null&&Xa(l.stateNode.containerInfo),Zi(l),null;case 10:return Zr(l.type._context),Zi(l),null;case 17:return Qi(l.type)&&mu(),Zi(l),null;case 19:if(Ir(Yr),P=l.memoizedState,P===null)return Zi(l),null;if(g=(l.flags&128)!==0,K=P.rendering,K===null)if(g)Bd(P,!1);else{if(si!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(K=rs(s),K!==null){for(l.flags|=128,Bd(P,!1),g=K.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=h,h=l.child;h!==null;)P=h,s=g,P.flags&=14680066,K=P.alternate,K===null?(P.childLanes=0,P.lanes=s,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=K.childLanes,P.lanes=K.lanes,P.child=K.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=K.memoizedProps,P.memoizedState=K.memoizedState,P.updateQueue=K.updateQueue,P.type=K.type,s=K.dependencies,P.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),h=h.sibling;return Pr(Yr,Yr.current&1|2),l.child}s=s.sibling}P.tail!==null&&jr()>ju&&(l.flags|=128,g=!0,Bd(P,!1),l.lanes=4194304)}else{if(!g)if(s=rs(K),s!==null){if(l.flags|=128,g=!0,h=s.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),Bd(P,!0),P.tail===null&&P.tailMode==="hidden"&&!K.alternate&&!De)return Zi(l),null}else 2*jr()-P.renderingStartTime>ju&&h!==1073741824&&(l.flags|=128,g=!0,Bd(P,!1),l.lanes=4194304);P.isBackwards?(K.sibling=l.child,l.child=K):(h=P.last,h!==null?h.sibling=K:l.child=K,P.last=K)}return P.tail!==null?(l=P.tail,P.rendering=l,P.tail=l.sibling,P.renderingStartTime=jr(),l.sibling=null,h=Yr.current,Pr(Yr,g?h&1|2:h&1),l):(Zi(l),null);case 22:case 23:return T0(),g=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(os&1073741824)!==0&&(Zi(l),l.subtreeFlags&6&&(l.flags|=8192)):Zi(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function jS(s,l){switch(Re(l),l.tag){case 1:return Qi(l.type)&&mu(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Cs(),Ir(Yi),Ir(ii),Rd(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return Ed(l),null;case 13:if(Ir(Yr),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(t(340));lt()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Ir(Yr),null;case 4:return Cs(),null;case 10:return Zr(l.type._context),null;case 22:case 23:return T0(),null;case 24:return null;default:return null}}var Qh=!1,eo=!1,ES=typeof WeakSet=="function"?WeakSet:Set,ut=null;function Au(s,l){var h=s.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){En(s,l,g)}else h.current=null}function h0(s,l,h){try{h()}catch(g){En(s,l,g)}}var O1=!1;function IS(s,l){if(Ac=Ko,s=Cn(),Zo(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var _=g.anchorOffset,P=g.focusNode;g=g.focusOffset;try{h.nodeType,P.nodeType}catch{h=null;break e}var K=0,pe=-1,Se=-1,Le=0,Je=0,Ye=s,Ke=null;t:for(;;){for(var ot;Ye!==h||_!==0&&Ye.nodeType!==3||(pe=K+_),Ye!==P||g!==0&&Ye.nodeType!==3||(Se=K+g),Ye.nodeType===3&&(K+=Ye.nodeValue.length),(ot=Ye.firstChild)!==null;)Ke=Ye,Ye=ot;for(;;){if(Ye===s)break t;if(Ke===h&&++Le===_&&(pe=K),Ke===P&&++Je===g&&(Se=K),(ot=Ye.nextSibling)!==null)break;Ye=Ke,Ke=Ye.parentNode}Ye=ot}h=pe===-1||Se===-1?null:{start:pe,end:Se}}else h=null}h=h||{start:0,end:0}}else h=null;for(el={focusedElem:s,selectionRange:h},Ko=!1,ut=l;ut!==null;)if(l=ut,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,ut=s;else for(;ut!==null;){l=ut;try{var mt=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(mt!==null){var xt=mt.memoizedProps,Mn=mt.memoizedState,Ie=l.stateNode,Ce=Ie.getSnapshotBeforeUpdate(l.elementType===l.type?xt:Ys(l.type,xt),Mn);Ie.__reactInternalSnapshotBeforeUpdate=Ce}break;case 3:var Be=l.stateNode.containerInfo;Be.nodeType===1?Be.textContent="":Be.nodeType===9&&Be.documentElement&&Be.removeChild(Be.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ze){En(l,l.return,Ze)}if(s=l.sibling,s!==null){s.return=l.return,ut=s;break}ut=l.return}return mt=O1,O1=!1,mt}function Ld(s,l,h){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var _=g=g.next;do{if((_.tag&s)===s){var P=_.destroy;_.destroy=void 0,P!==void 0&&h0(l,h,P)}_=_.next}while(_!==g)}}function Xh(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&s)===s){var g=h.create;h.destroy=g()}h=h.next}while(h!==l)}}function f0(s){var l=s.ref;if(l!==null){var h=s.stateNode;switch(s.tag){case 5:s=h;break;default:s=h}typeof l=="function"?l(s):l.current=s}}function V1(s){var l=s.alternate;l!==null&&(s.alternate=null,V1(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[Ts],delete l[Il],delete l[Ji],delete l[Qp],delete l[Xp])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function M1(s){return s.tag===5||s.tag===3||s.tag===4}function D1(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||M1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function p0(s,l,h){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(s,l):h.insertBefore(s,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(s,h)):(l=h,l.appendChild(s)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=El));else if(g!==4&&(s=s.child,s!==null))for(p0(s,l,h),s=s.sibling;s!==null;)p0(s,l,h),s=s.sibling}function m0(s,l,h){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?h.insertBefore(s,l):h.appendChild(s);else if(g!==4&&(s=s.child,s!==null))for(m0(s,l,h),s=s.sibling;s!==null;)m0(s,l,h),s=s.sibling}var Fi=null,Qs=!1;function zl(s,l,h){for(h=h.child;h!==null;)W1(s,l,h),h=h.sibling}function W1(s,l,h){if(di&&typeof di.onCommitFiberUnmount=="function")try{di.onCommitFiberUnmount(ps,h)}catch{}switch(h.tag){case 5:eo||Au(h,l);case 6:var g=Fi,_=Qs;Fi=null,zl(s,l,h),Fi=g,Qs=_,Fi!==null&&(Qs?(s=Fi,h=h.stateNode,s.nodeType===8?s.parentNode.removeChild(h):s.removeChild(h)):Fi.removeChild(h.stateNode));break;case 18:Fi!==null&&(Qs?(s=Fi,h=h.stateNode,s.nodeType===8?Ad(s.parentNode,h):s.nodeType===1&&Ad(s,h),mo(s)):Ad(Fi,h.stateNode));break;case 4:g=Fi,_=Qs,Fi=h.stateNode.containerInfo,Qs=!0,zl(s,l,h),Fi=g,Qs=_;break;case 0:case 11:case 14:case 15:if(!eo&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){_=g=g.next;do{var P=_,K=P.destroy;P=P.tag,K!==void 0&&((P&2)!==0||(P&4)!==0)&&h0(h,l,K),_=_.next}while(_!==g)}zl(s,l,h);break;case 1:if(!eo&&(Au(h,l),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(pe){En(h,l,pe)}zl(s,l,h);break;case 21:zl(s,l,h);break;case 22:h.mode&1?(eo=(g=eo)||h.memoizedState!==null,zl(s,l,h),eo=g):zl(s,l,h);break;default:zl(s,l,h)}}function $1(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var h=s.stateNode;h===null&&(h=s.stateNode=new ES),l.forEach(function(g){var _=VS.bind(null,s,g);h.has(g)||(h.add(g),g.then(_,_))})}}function Xs(s,l){var h=l.deletions;if(h!==null)for(var g=0;g<h.length;g++){var _=h[g];try{var P=s,K=l,pe=K;e:for(;pe!==null;){switch(pe.tag){case 5:Fi=pe.stateNode,Qs=!1;break e;case 3:Fi=pe.stateNode.containerInfo,Qs=!0;break e;case 4:Fi=pe.stateNode.containerInfo,Qs=!0;break e}pe=pe.return}if(Fi===null)throw Error(t(160));W1(P,K,_),Fi=null,Qs=!1;var Se=_.alternate;Se!==null&&(Se.return=null),_.return=null}catch(Le){En(_,l,Le)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)U1(l,s),l=l.sibling}function U1(s,l){var h=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Xs(l,s),Ca(s),g&4){try{Ld(3,s,s.return),Xh(3,s)}catch(xt){En(s,s.return,xt)}try{Ld(5,s,s.return)}catch(xt){En(s,s.return,xt)}}break;case 1:Xs(l,s),Ca(s),g&512&&h!==null&&Au(h,h.return);break;case 5:if(Xs(l,s),Ca(s),g&512&&h!==null&&Au(h,h.return),s.flags&32){var _=s.stateNode;try{kt(_,"")}catch(xt){En(s,s.return,xt)}}if(g&4&&(_=s.stateNode,_!=null)){var P=s.memoizedProps,K=h!==null?h.memoizedProps:P,pe=s.type,Se=s.updateQueue;if(s.updateQueue=null,Se!==null)try{pe==="input"&&P.type==="radio"&&P.name!=null&&Pt(_,P),Ct(pe,K);var Le=Ct(pe,P);for(K=0;K<Se.length;K+=2){var Je=Se[K],Ye=Se[K+1];Je==="style"?dt(_,Ye):Je==="dangerouslySetInnerHTML"?St(_,Ye):Je==="children"?kt(_,Ye):U(_,Je,Ye,Le)}switch(pe){case"input":At(_,P);break;case"textarea":hr(_,P);break;case"select":var Ke=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!P.multiple;var ot=P.value;ot!=null?tt(_,!!P.multiple,ot,!1):Ke!==!!P.multiple&&(P.defaultValue!=null?tt(_,!!P.multiple,P.defaultValue,!0):tt(_,!!P.multiple,P.multiple?[]:"",!1))}_[Il]=P}catch(xt){En(s,s.return,xt)}}break;case 6:if(Xs(l,s),Ca(s),g&4){if(s.stateNode===null)throw Error(t(162));_=s.stateNode,P=s.memoizedProps;try{_.nodeValue=P}catch(xt){En(s,s.return,xt)}}break;case 3:if(Xs(l,s),Ca(s),g&4&&h!==null&&h.memoizedState.isDehydrated)try{mo(l.containerInfo)}catch(xt){En(s,s.return,xt)}break;case 4:Xs(l,s),Ca(s);break;case 13:Xs(l,s),Ca(s),_=s.child,_.flags&8192&&(P=_.memoizedState!==null,_.stateNode.isHidden=P,!P||_.alternate!==null&&_.alternate.memoizedState!==null||(x0=jr())),g&4&&$1(s);break;case 22:if(Je=h!==null&&h.memoizedState!==null,s.mode&1?(eo=(Le=eo)||Je,Xs(l,s),eo=Le):Xs(l,s),Ca(s),g&8192){if(Le=s.memoizedState!==null,(s.stateNode.isHidden=Le)&&!Je&&(s.mode&1)!==0)for(ut=s,Je=s.child;Je!==null;){for(Ye=ut=Je;ut!==null;){switch(Ke=ut,ot=Ke.child,Ke.tag){case 0:case 11:case 14:case 15:Ld(4,Ke,Ke.return);break;case 1:Au(Ke,Ke.return);var mt=Ke.stateNode;if(typeof mt.componentWillUnmount=="function"){g=Ke,h=Ke.return;try{l=g,mt.props=l.memoizedProps,mt.state=l.memoizedState,mt.componentWillUnmount()}catch(xt){En(g,h,xt)}}break;case 5:Au(Ke,Ke.return);break;case 22:if(Ke.memoizedState!==null){G1(Ye);continue}}ot!==null?(ot.return=Ke,ut=ot):G1(Ye)}Je=Je.sibling}e:for(Je=null,Ye=s;;){if(Ye.tag===5){if(Je===null){Je=Ye;try{_=Ye.stateNode,Le?(P=_.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(pe=Ye.stateNode,Se=Ye.memoizedProps.style,K=Se!=null&&Se.hasOwnProperty("display")?Se.display:null,pe.style.display=rr("display",K))}catch(xt){En(s,s.return,xt)}}}else if(Ye.tag===6){if(Je===null)try{Ye.stateNode.nodeValue=Le?"":Ye.memoizedProps}catch(xt){En(s,s.return,xt)}}else if((Ye.tag!==22&&Ye.tag!==23||Ye.memoizedState===null||Ye===s)&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===s)break e;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===s)break e;Je===Ye&&(Je=null),Ye=Ye.return}Je===Ye&&(Je=null),Ye.sibling.return=Ye.return,Ye=Ye.sibling}}break;case 19:Xs(l,s),Ca(s),g&4&&$1(s);break;case 21:break;default:Xs(l,s),Ca(s)}}function Ca(s){var l=s.flags;if(l&2){try{e:{for(var h=s.return;h!==null;){if(M1(h)){var g=h;break e}h=h.return}throw Error(t(160))}switch(g.tag){case 5:var _=g.stateNode;g.flags&32&&(kt(_,""),g.flags&=-33);var P=D1(s);m0(s,P,_);break;case 3:case 4:var K=g.stateNode.containerInfo,pe=D1(s);p0(s,pe,K);break;default:throw Error(t(161))}}catch(Se){En(s,s.return,Se)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function RS(s,l,h){ut=s,q1(s)}function q1(s,l,h){for(var g=(s.mode&1)!==0;ut!==null;){var _=ut,P=_.child;if(_.tag===22&&g){var K=_.memoizedState!==null||Qh;if(!K){var pe=_.alternate,Se=pe!==null&&pe.memoizedState!==null||eo;pe=Qh;var Le=eo;if(Qh=K,(eo=Se)&&!Le)for(ut=_;ut!==null;)K=ut,Se=K.child,K.tag===22&&K.memoizedState!==null?K1(_):Se!==null?(Se.return=K,ut=Se):K1(_);for(;P!==null;)ut=P,q1(P),P=P.sibling;ut=_,Qh=pe,eo=Le}H1(s)}else(_.subtreeFlags&8772)!==0&&P!==null?(P.return=_,ut=P):H1(s)}}function H1(s){for(;ut!==null;){var l=ut;if((l.flags&8772)!==0){var h=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:eo||Xh(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!eo)if(h===null)g.componentDidMount();else{var _=l.elementType===l.type?h.memoizedProps:Ys(l.type,h.memoizedProps);g.componentDidUpdate(_,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var P=l.updateQueue;P!==null&&Lo(l,P,g);break;case 3:var K=l.updateQueue;if(K!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=l.child.stateNode;break;case 1:h=l.child.stateNode}Lo(l,K,h)}break;case 5:var pe=l.stateNode;if(h===null&&l.flags&4){h=pe;var Se=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Se.autoFocus&&h.focus();break;case"img":Se.src&&(h.src=Se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Le=l.alternate;if(Le!==null){var Je=Le.memoizedState;if(Je!==null){var Ye=Je.dehydrated;Ye!==null&&mo(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}eo||l.flags&512&&f0(l)}catch(Ke){En(l,l.return,Ke)}}if(l===s){ut=null;break}if(h=l.sibling,h!==null){h.return=l.return,ut=h;break}ut=l.return}}function G1(s){for(;ut!==null;){var l=ut;if(l===s){ut=null;break}var h=l.sibling;if(h!==null){h.return=l.return,ut=h;break}ut=l.return}}function K1(s){for(;ut!==null;){var l=ut;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{Xh(4,l)}catch(Se){En(l,h,Se)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var _=l.return;try{g.componentDidMount()}catch(Se){En(l,_,Se)}}var P=l.return;try{f0(l)}catch(Se){En(l,P,Se)}break;case 5:var K=l.return;try{f0(l)}catch(Se){En(l,K,Se)}}}catch(Se){En(l,l.return,Se)}if(l===s){ut=null;break}var pe=l.sibling;if(pe!==null){pe.return=l.return,ut=pe;break}ut=l.return}}var PS=Math.ceil,Zh=F.ReactCurrentDispatcher,g0=F.ReactCurrentOwner,js=F.ReactCurrentBatchConfig,_r=0,Si=null,Qn=null,zi=0,os=0,ku=es(0),si=0,Fd=null,Pc=0,ef=0,y0=0,zd=null,zo=null,x0=0,ju=1/0,sl=null,tf=!1,v0=null,Ol=null,rf=!1,Vl=null,nf=0,Od=0,b0=null,of=-1,sf=0;function So(){return(_r&6)!==0?jr():of!==-1?of:of=jr()}function Ml(s){return(s.mode&1)===0?1:(_r&2)!==0&&zi!==0?zi&-zi:xn.transition!==null?(sf===0&&(sf=Va()),sf):(s=nr,s!==0||(s=window.event,s=s===void 0?16:Yo(s.type)),s)}function Zs(s,l,h,g){if(50<Od)throw Od=0,b0=null,Error(t(185));Ls(s,h,g),((_r&2)===0||s!==Si)&&(s===Si&&((_r&2)===0&&(ef|=h),si===4&&Dl(s,zi)),Oo(s,g),h===1&&_r===0&&(l.mode&1)===0&&(ju=jr()+500,jc&&O()))}function Oo(s,l){var h=s.callbackNode;zr(s,l);var g=Bn(s,s===Si?zi:0);if(g===0)h!==null&&Uo(h),s.callbackNode=null,s.callbackPriority=0;else if(l=g&-g,s.callbackPriority!==l){if(h!=null&&Uo(h),l===1)s.tag===0?E(Y1.bind(null,s)):x(Y1.bind(null,s)),Jp(function(){(_r&6)===0&&O()}),h=null;else{switch(ri(g)){case 1:h=Ns;break;case 4:h=ui;break;case 16:h=Ho;break;case 536870912:h=fs;break;default:h=Ho}h=i5(h,J1.bind(null,s))}s.callbackPriority=l,s.callbackNode=h}}function J1(s,l){if(of=-1,sf=0,(_r&6)!==0)throw Error(t(327));var h=s.callbackNode;if(Eu()&&s.callbackNode!==h)return null;var g=Bn(s,s===Si?zi:0);if(g===0)return null;if((g&30)!==0||(g&s.expiredLanes)!==0||l)l=af(s,g);else{l=g;var _=_r;_r|=2;var P=X1();(Si!==s||zi!==l)&&(sl=null,ju=jr()+500,Bc(s,l));do try{LS();break}catch(pe){Q1(s,pe)}while(!0);wr(),Zh.current=P,_r=_,Qn!==null?l=0:(Si=null,zi=0,l=si)}if(l!==0){if(l===2&&(_=Bs(s),_!==0&&(g=_,l=w0(s,_))),l===1)throw h=Fd,Bc(s,0),Dl(s,g),Oo(s,jr()),h;if(l===6)Dl(s,g);else{if(_=s.current.alternate,(g&30)===0&&!NS(_)&&(l=af(s,g),l===2&&(P=Bs(s),P!==0&&(g=P,l=w0(s,P))),l===1))throw h=Fd,Bc(s,0),Dl(s,g),Oo(s,jr()),h;switch(s.finishedWork=_,s.finishedLanes=g,l){case 0:case 1:throw Error(t(345));case 2:Lc(s,zo,sl);break;case 3:if(Dl(s,g),(g&130023424)===g&&(l=x0+500-jr(),10<l)){if(Bn(s,0)!==0)break;if(_=s.suspendedLanes,(_&g)!==g){So(),s.pingedLanes|=s.suspendedLanes&_;break}s.timeoutHandle=Cd(Lc.bind(null,s,zo,sl),l);break}Lc(s,zo,sl);break;case 4:if(Dl(s,g),(g&4194240)===g)break;for(l=s.eventTimes,_=-1;0<g;){var K=31-Hn(g);P=1<<K,K=l[K],K>_&&(_=K),g&=~P}if(g=_,g=jr()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*PS(g/1960))-g,10<g){s.timeoutHandle=Cd(Lc.bind(null,s,zo,sl),g);break}Lc(s,zo,sl);break;case 5:Lc(s,zo,sl);break;default:throw Error(t(329))}}}return Oo(s,jr()),s.callbackNode===h?J1.bind(null,s):null}function w0(s,l){var h=zd;return s.current.memoizedState.isDehydrated&&(Bc(s,l).flags|=256),s=af(s,l),s!==2&&(l=zo,zo=h,l!==null&&S0(l)),s}function S0(s){zo===null?zo=s:zo.push.apply(zo,s)}function NS(s){for(var l=s;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var _=h[g],P=_.getSnapshot;_=_.value;try{if(!cn(P(),_))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Dl(s,l){for(l&=~y0,l&=~ef,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var h=31-Hn(l),g=1<<h;s[h]=-1,l&=~g}}function Y1(s){if((_r&6)!==0)throw Error(t(327));Eu();var l=Bn(s,0);if((l&1)===0)return Oo(s,jr()),null;var h=af(s,l);if(s.tag!==0&&h===2){var g=Bs(s);g!==0&&(l=g,h=w0(s,g))}if(h===1)throw h=Fd,Bc(s,0),Dl(s,l),Oo(s,jr()),h;if(h===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,Lc(s,zo,sl),Oo(s,jr()),null}function _0(s,l){var h=_r;_r|=1;try{return s(l)}finally{_r=h,_r===0&&(ju=jr()+500,jc&&O())}}function Nc(s){Vl!==null&&Vl.tag===0&&(_r&6)===0&&Eu();var l=_r;_r|=1;var h=js.transition,g=nr;try{if(js.transition=null,nr=1,s)return s()}finally{nr=g,js.transition=h,_r=l,(_r&6)===0&&O()}}function T0(){os=ku.current,Ir(ku)}function Bc(s,l){s.finishedWork=null,s.finishedLanes=0;var h=s.timeoutHandle;if(h!==-1&&(s.timeoutHandle=-1,Oh(h)),Qn!==null)for(h=Qn.return;h!==null;){var g=h;switch(Re(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&mu();break;case 3:Cs(),Ir(Yi),Ir(ii),Rd();break;case 5:Ed(g);break;case 4:Cs();break;case 13:Ir(Yr);break;case 19:Ir(Yr);break;case 10:Zr(g.type._context);break;case 22:case 23:T0()}h=h.return}if(Si=s,Qn=s=Wl(s.current,null),zi=os=l,si=0,Fd=null,y0=ef=Pc=0,zo=zd=null,Dr!==null){for(l=0;l<Dr.length;l++)if(h=Dr[l],g=h.interleaved,g!==null){h.interleaved=null;var _=g.next,P=h.pending;if(P!==null){var K=P.next;P.next=_,g.next=K}h.pending=g}Dr=null}return s}function Q1(s,l){do{var h=Qn;try{if(wr(),gu.current=Gh,Bl){for(var g=en.memoizedState;g!==null;){var _=g.queue;_!==null&&(_.pending=null),g=g.next}Bl=!1}if(As=0,Sn=jn=en=null,Ks=!1,Ll=0,g0.current=null,h===null||h.return===null){si=1,Fd=l,Qn=null;break}e:{var P=s,K=h.return,pe=h,Se=l;if(l=zi,pe.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var Le=Se,Je=pe,Ye=Je.tag;if((Je.mode&1)===0&&(Ye===0||Ye===11||Ye===15)){var Ke=Je.alternate;Ke?(Je.updateQueue=Ke.updateQueue,Je.memoizedState=Ke.memoizedState,Je.lanes=Ke.lanes):(Je.updateQueue=null,Je.memoizedState=null)}var ot=S1(K);if(ot!==null){ot.flags&=-257,_1(ot,K,pe,P,l),ot.mode&1&&w1(P,Le,l),l=ot,Se=Le;var mt=l.updateQueue;if(mt===null){var xt=new Set;xt.add(Se),l.updateQueue=xt}else mt.add(Se);break e}else{if((l&1)===0){w1(P,Le,l),C0();break e}Se=Error(t(426))}}else if(De&&pe.mode&1){var Mn=S1(K);if(Mn!==null){(Mn.flags&65536)===0&&(Mn.flags|=256),_1(Mn,K,pe,P,l),rt(Cu(Se,pe));break e}}P=Se=Cu(Se,pe),si!==4&&(si=2),zd===null?zd=[P]:zd.push(P),P=K;do{switch(P.tag){case 3:P.flags|=65536,l&=-l,P.lanes|=l;var Ie=v1(P,Se,l);$r(P,Ie);break e;case 1:pe=Se;var Ce=P.type,Be=P.stateNode;if((P.flags&128)===0&&(typeof Ce.getDerivedStateFromError=="function"||Be!==null&&typeof Be.componentDidCatch=="function"&&(Ol===null||!Ol.has(Be)))){P.flags|=65536,l&=-l,P.lanes|=l;var Ze=b1(P,pe,l);$r(P,Ze);break e}}P=P.return}while(P!==null)}e5(h)}catch(_t){l=_t,Qn===h&&h!==null&&(Qn=h=h.return);continue}break}while(!0)}function X1(){var s=Zh.current;return Zh.current=Gh,s===null?Gh:s}function C0(){(si===0||si===3||si===2)&&(si=4),Si===null||(Pc&268435455)===0&&(ef&268435455)===0||Dl(Si,zi)}function af(s,l){var h=_r;_r|=2;var g=X1();(Si!==s||zi!==l)&&(sl=null,Bc(s,l));do try{BS();break}catch(_){Q1(s,_)}while(!0);if(wr(),_r=h,Zh.current=g,Qn!==null)throw Error(t(261));return Si=null,zi=0,si}function BS(){for(;Qn!==null;)Z1(Qn)}function LS(){for(;Qn!==null&&!To();)Z1(Qn)}function Z1(s){var l=n5(s.alternate,s,os);s.memoizedProps=s.pendingProps,l===null?e5(s):Qn=l,g0.current=null}function e5(s){var l=s;do{var h=l.alternate;if(s=l.return,(l.flags&32768)===0){if(h=kS(h,l,os),h!==null){Qn=h;return}}else{if(h=jS(h,l),h!==null){h.flags&=32767,Qn=h;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{si=6,Qn=null;return}}if(l=l.sibling,l!==null){Qn=l;return}Qn=l=s}while(l!==null);si===0&&(si=5)}function Lc(s,l,h){var g=nr,_=js.transition;try{js.transition=null,nr=1,FS(s,l,h,g)}finally{js.transition=_,nr=g}return null}function FS(s,l,h,g){do Eu();while(Vl!==null);if((_r&6)!==0)throw Error(t(327));h=s.finishedWork;var _=s.finishedLanes;if(h===null)return null;if(s.finishedWork=null,s.finishedLanes=0,h===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var P=h.lanes|h.childLanes;if(Ao(s,P),s===Si&&(Qn=Si=null,zi=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||rf||(rf=!0,i5(Ho,function(){return Eu(),null})),P=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||P){P=js.transition,js.transition=null;var K=nr;nr=1;var pe=_r;_r|=4,g0.current=null,IS(s,h),U1(h,s),xc(el),Ko=!!Ac,el=Ac=null,s.current=h,RS(h),qo(),_r=pe,nr=K,js.transition=P}else s.current=h;if(rf&&(rf=!1,Vl=s,nf=_),P=s.pendingLanes,P===0&&(Ol=null),Oa(h.stateNode),Oo(s,jr()),l!==null)for(g=s.onRecoverableError,h=0;h<l.length;h++)_=l[h],g(_.value,{componentStack:_.stack,digest:_.digest});if(tf)throw tf=!1,s=v0,v0=null,s;return(nf&1)!==0&&s.tag!==0&&Eu(),P=s.pendingLanes,(P&1)!==0?s===b0?Od++:(Od=0,b0=s):Od=0,O(),null}function Eu(){if(Vl!==null){var s=ri(nf),l=js.transition,h=nr;try{if(js.transition=null,nr=16>s?16:s,Vl===null)var g=!1;else{if(s=Vl,Vl=null,nf=0,(_r&6)!==0)throw Error(t(331));var _=_r;for(_r|=4,ut=s.current;ut!==null;){var P=ut,K=P.child;if((ut.flags&16)!==0){var pe=P.deletions;if(pe!==null){for(var Se=0;Se<pe.length;Se++){var Le=pe[Se];for(ut=Le;ut!==null;){var Je=ut;switch(Je.tag){case 0:case 11:case 15:Ld(8,Je,P)}var Ye=Je.child;if(Ye!==null)Ye.return=Je,ut=Ye;else for(;ut!==null;){Je=ut;var Ke=Je.sibling,ot=Je.return;if(V1(Je),Je===Le){ut=null;break}if(Ke!==null){Ke.return=ot,ut=Ke;break}ut=ot}}}var mt=P.alternate;if(mt!==null){var xt=mt.child;if(xt!==null){mt.child=null;do{var Mn=xt.sibling;xt.sibling=null,xt=Mn}while(xt!==null)}}ut=P}}if((P.subtreeFlags&2064)!==0&&K!==null)K.return=P,ut=K;else e:for(;ut!==null;){if(P=ut,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:Ld(9,P,P.return)}var Ie=P.sibling;if(Ie!==null){Ie.return=P.return,ut=Ie;break e}ut=P.return}}var Ce=s.current;for(ut=Ce;ut!==null;){K=ut;var Be=K.child;if((K.subtreeFlags&2064)!==0&&Be!==null)Be.return=K,ut=Be;else e:for(K=Ce;ut!==null;){if(pe=ut,(pe.flags&2048)!==0)try{switch(pe.tag){case 0:case 11:case 15:Xh(9,pe)}}catch(_t){En(pe,pe.return,_t)}if(pe===K){ut=null;break e}var Ze=pe.sibling;if(Ze!==null){Ze.return=pe.return,ut=Ze;break e}ut=pe.return}}if(_r=_,O(),di&&typeof di.onPostCommitFiberRoot=="function")try{di.onPostCommitFiberRoot(ps,s)}catch{}g=!0}return g}finally{nr=h,js.transition=l}}return!1}function t5(s,l,h){l=Cu(h,l),l=v1(s,l,1),s=bn(s,l,1),l=So(),s!==null&&(Ls(s,1,l),Oo(s,l))}function En(s,l,h){if(s.tag===3)t5(s,s,h);else for(;l!==null;){if(l.tag===3){t5(l,s,h);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ol===null||!Ol.has(g))){s=Cu(h,s),s=b1(l,s,1),l=bn(l,s,1),s=So(),l!==null&&(Ls(l,1,s),Oo(l,s));break}}l=l.return}}function zS(s,l,h){var g=s.pingCache;g!==null&&g.delete(l),l=So(),s.pingedLanes|=s.suspendedLanes&h,Si===s&&(zi&h)===h&&(si===4||si===3&&(zi&130023424)===zi&&500>jr()-x0?Bc(s,0):y0|=h),Oo(s,l)}function r5(s,l){l===0&&((s.mode&1)===0?l=1:(l=hi,hi<<=1,(hi&130023424)===0&&(hi=4194304)));var h=So();s=Wr(s,l),s!==null&&(Ls(s,l,h),Oo(s,h))}function OS(s){var l=s.memoizedState,h=0;l!==null&&(h=l.retryLane),r5(s,h)}function VS(s,l){var h=0;switch(s.tag){case 13:var g=s.stateNode,_=s.memoizedState;_!==null&&(h=_.retryLane);break;case 19:g=s.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(l),r5(s,h)}var n5;n5=function(s,l,h){if(s!==null)if(s.memoizedProps!==l.pendingProps||Yi.current)Fo=!0;else{if((s.lanes&h)===0&&(l.flags&128)===0)return Fo=!1,AS(s,l,h);Fo=(s.flags&131072)!==0}else Fo=!1,De&&(l.flags&1048576)!==0&&je(l,X,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;Yh(s,l),s=l.pendingProps;var _=Pl(l,ii.current);hn(l,h),_=Ec(null,l,g,s,_,h);var P=ks();return l.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Qi(g)?(P=!0,nl(l)):P=!1,l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,oi(l),_.updater=Kh,l.stateNode=_,_._reactInternals=l,r0(l,g,s,h),l=s0(null,l,g,!0,P,h)):(l.tag=0,De&&P&&Ve(l),wo(null,l,_,h),l=l.child),l;case 16:g=l.elementType;e:{switch(Yh(s,l),s=l.pendingProps,_=g._init,g=_(g._payload),l.type=g,_=l.tag=DS(g),s=Ys(g,s),_){case 0:l=o0(null,l,g,s,h);break e;case 1:l=E1(null,l,g,s,h);break e;case 11:l=T1(null,l,g,s,h);break e;case 14:l=C1(null,l,g,Ys(g.type,s),h);break e}throw Error(t(306,g,""))}return l;case 0:return g=l.type,_=l.pendingProps,_=l.elementType===g?_:Ys(g,_),o0(s,l,g,_,h);case 1:return g=l.type,_=l.pendingProps,_=l.elementType===g?_:Ys(g,_),E1(s,l,g,_,h);case 3:e:{if(I1(l),s===null)throw Error(t(387));g=l.pendingProps,P=l.memoizedState,_=P.element,Xi(s,l),wi(l,g,null,h);var K=l.memoizedState;if(g=K.element,P.isDehydrated)if(P={element:g,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},l.updateQueue.baseState=P,l.memoizedState=P,l.flags&256){_=Cu(Error(t(423)),l),l=R1(s,l,g,h,_);break e}else if(g!==_){_=Cu(Error(t(424)),l),l=R1(s,l,g,h,_);break e}else for(Oe=Li(l.stateNode.containerInfo.firstChild),ze=l,De=!0,$e=null,h=rn(l,null,g,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(lt(),g===_){l=ol(s,l,h);break e}wo(s,l,g,h)}l=l.child}return l;case 5:return Wh(l),s===null&&ht(l),g=l.type,_=l.pendingProps,P=s!==null?s.memoizedProps:null,K=_.children,Td(g,_)?K=null:P!==null&&Td(g,P)&&(l.flags|=32),j1(s,l),wo(s,l,K,h),l.child;case 6:return s===null&&ht(l),null;case 13:return P1(s,l,h);case 4:return Nl(l,l.stateNode.containerInfo),g=l.pendingProps,s===null?l.child=An(l,null,g,h):wo(s,l,g,h),l.child;case 11:return g=l.type,_=l.pendingProps,_=l.elementType===g?_:Ys(g,_),T1(s,l,g,_,h);case 7:return wo(s,l,l.pendingProps,h),l.child;case 8:return wo(s,l,l.pendingProps.children,h),l.child;case 12:return wo(s,l,l.pendingProps.children,h),l.child;case 10:e:{if(g=l.type._context,_=l.pendingProps,P=l.memoizedProps,K=_.value,Pr(On,g._currentValue),g._currentValue=K,P!==null)if(cn(P.value,K)){if(P.children===_.children&&!Yi.current){l=ol(s,l,h);break e}}else for(P=l.child,P!==null&&(P.return=l);P!==null;){var pe=P.dependencies;if(pe!==null){K=P.child;for(var Se=pe.firstContext;Se!==null;){if(Se.context===g){if(P.tag===1){Se=vn(-1,h&-h),Se.tag=2;var Le=P.updateQueue;if(Le!==null){Le=Le.shared;var Je=Le.pending;Je===null?Se.next=Se:(Se.next=Je.next,Je.next=Se),Le.pending=Se}}P.lanes|=h,Se=P.alternate,Se!==null&&(Se.lanes|=h),Sr(P.return,h,l),pe.lanes|=h;break}Se=Se.next}}else if(P.tag===10)K=P.type===l.type?null:P.child;else if(P.tag===18){if(K=P.return,K===null)throw Error(t(341));K.lanes|=h,pe=K.alternate,pe!==null&&(pe.lanes|=h),Sr(K,h,l),K=P.sibling}else K=P.child;if(K!==null)K.return=P;else for(K=P;K!==null;){if(K===l){K=null;break}if(P=K.sibling,P!==null){P.return=K.return,K=P;break}K=K.return}P=K}wo(s,l,_.children,h),l=l.child}return l;case 9:return _=l.type,g=l.pendingProps.children,hn(l,h),_=fn(_),g=g(_),l.flags|=1,wo(s,l,g,h),l.child;case 14:return g=l.type,_=Ys(g,l.pendingProps),_=Ys(g.type,_),C1(s,l,g,_,h);case 15:return A1(s,l,l.type,l.pendingProps,h);case 17:return g=l.type,_=l.pendingProps,_=l.elementType===g?_:Ys(g,_),Yh(s,l),l.tag=1,Qi(g)?(s=!0,nl(l)):s=!1,hn(l,h),y1(l,g,_),r0(l,g,_,h),s0(null,l,g,!0,s,h);case 19:return B1(s,l,h);case 22:return k1(s,l,h)}throw Error(t(156,l.tag))};function i5(s,l){return hs(s,l)}function MS(s,l,h,g){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Es(s,l,h,g){return new MS(s,l,h,g)}function A0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function DS(s){if(typeof s=="function")return A0(s)?1:0;if(s!=null){if(s=s.$$typeof,s===b)return 11;if(s===q)return 14}return 2}function Wl(s,l){var h=s.alternate;return h===null?(h=Es(s.tag,l,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=l,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&14680064,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,l=s.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h}function lf(s,l,h,g,_,P){var K=2;if(g=s,typeof s=="function")A0(s)&&(K=1);else if(typeof s=="string")K=5;else e:switch(s){case L:return Fc(h.children,_,P,l);case j:K=8,_|=8;break;case T:return s=Es(12,h,l,_|2),s.elementType=T,s.lanes=P,s;case N:return s=Es(13,h,l,_),s.elementType=N,s.lanes=P,s;case D:return s=Es(19,h,l,_),s.elementType=D,s.lanes=P,s;case oe:return cf(h,_,P,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case V:K=10;break e;case k:K=9;break e;case b:K=11;break e;case q:K=14;break e;case ie:K=16,g=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return l=Es(K,h,l,_),l.elementType=s,l.type=g,l.lanes=P,l}function Fc(s,l,h,g){return s=Es(7,s,g,l),s.lanes=h,s}function cf(s,l,h,g){return s=Es(22,s,g,l),s.elementType=oe,s.lanes=h,s.stateNode={isHidden:!1},s}function k0(s,l,h){return s=Es(6,s,null,l),s.lanes=h,s}function j0(s,l,h){return l=Es(4,s.children!==null?s.children:[],s.key,l),l.lanes=h,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function WS(s,l,h,g,_){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ma(0),this.expirationTimes=Ma(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ma(0),this.identifierPrefix=g,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function E0(s,l,h,g,_,P,K,pe,Se){return s=new WS(s,l,h,pe,Se),l===1?(l=1,P===!0&&(l|=8)):l=0,P=Es(3,null,null,l),s.current=P,P.stateNode=s,P.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},oi(P),s}function $S(s,l,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ue,key:g==null?null:""+g,children:s,containerInfo:l,implementation:h}}function o5(s){if(!s)return Sa;s=s._reactInternals;e:{if(mn(s)!==s||s.tag!==1)throw Error(t(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Qi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(s.tag===1){var h=s.type;if(Qi(h))return jd(s,h,l)}return l}function s5(s,l,h,g,_,P,K,pe,Se){return s=E0(h,g,!0,s,_,P,K,pe,Se),s.context=o5(null),h=s.current,g=So(),_=Ml(h),P=vn(g,_),P.callback=l??null,bn(h,P,_),s.current.lanes=_,Ls(s,_,g),Oo(s,g),s}function uf(s,l,h,g){var _=l.current,P=So(),K=Ml(_);return h=o5(h),l.context===null?l.context=h:l.pendingContext=h,l=vn(P,K),l.payload={element:s},g=g===void 0?null:g,g!==null&&(l.callback=g),s=bn(_,l,K),s!==null&&(Zs(s,_,K,P),bi(s,_,K)),K}function df(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function a5(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<l?h:l}}function I0(s,l){a5(s,l),(s=s.alternate)&&a5(s,l)}function US(){return null}var l5=typeof reportError=="function"?reportError:function(s){console.error(s)};function R0(s){this._internalRoot=s}hf.prototype.render=R0.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(t(409));uf(s,l,null,null)},hf.prototype.unmount=R0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Nc(function(){uf(null,s,null,null)}),l[xi]=null}};function hf(s){this._internalRoot=s}hf.prototype.unstable_scheduleHydration=function(s){if(s){var l=Wa();s={blockedOn:null,target:s,priority:l};for(var h=0;h<Ri.length&&l!==0&&l<Ri[h].priority;h++);Ri.splice(h,0,s),h===0&&ha(s)}};function P0(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function ff(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function c5(){}function qS(s,l,h,g,_){if(_){if(typeof g=="function"){var P=g;g=function(){var Le=df(K);P.call(Le)}}var K=s5(l,g,s,0,null,!1,!1,"",c5);return s._reactRootContainer=K,s[xi]=K.current,Xa(s.nodeType===8?s.parentNode:s),Nc(),K}for(;_=s.lastChild;)s.removeChild(_);if(typeof g=="function"){var pe=g;g=function(){var Le=df(Se);pe.call(Le)}}var Se=E0(s,0,!1,null,null,!1,!1,"",c5);return s._reactRootContainer=Se,s[xi]=Se.current,Xa(s.nodeType===8?s.parentNode:s),Nc(function(){uf(l,Se,h,g)}),Se}function pf(s,l,h,g,_){var P=h._reactRootContainer;if(P){var K=P;if(typeof _=="function"){var pe=_;_=function(){var Se=df(K);pe.call(Se)}}uf(l,K,s,_)}else K=qS(h,l,s,_,g);return df(K)}Fs=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var h=sr(l.pendingLanes);h!==0&&(ua(l,h|1),Oo(l,jr()),(_r&6)===0&&(ju=jr()+500,O()))}break;case 13:Nc(function(){var g=Wr(s,1);if(g!==null){var _=So();Zs(g,s,1,_)}}),I0(s,1)}},da=function(s){if(s.tag===13){var l=Wr(s,134217728);if(l!==null){var h=So();Zs(l,s,134217728,h)}I0(s,134217728)}},Da=function(s){if(s.tag===13){var l=Ml(s),h=Wr(s,l);if(h!==null){var g=So();Zs(h,s,l,g)}I0(s,l)}},Wa=function(){return nr},zs=function(s,l){var h=nr;try{return nr=s,l()}finally{nr=h}},kr=function(s,l,h){switch(l){case"input":if(At(s,h),l=h.name,h.type==="radio"&&l!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<h.length;l++){var g=h[l];if(g!==s&&g.form===s.form){var _=kc(g);if(!_)throw Error(t(90));Qe(g),At(g,_)}}}break;case"textarea":hr(s,h);break;case"select":l=h.value,l!=null&&tt(s,!!h.multiple,l,!1)}},Rn=_0,_o=Nc;var HS={usingClientEntryPoint:!1,Events:[Rl,tl,kc,or,Di,_0]},Vd={findFiberByHostInstance:wa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GS={bundleType:Vd.bundleType,version:Vd.version,rendererPackageName:Vd.rendererPackageName,rendererConfig:Vd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=co(s),s===null?null:s.stateNode},findFiberByHostInstance:Vd.findFiberByHostInstance||US,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mf.isDisabled&&mf.supportsFiber)try{ps=mf.inject(GS),di=mf}catch{}}return Vo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HS,Vo.createPortal=function(s,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!P0(l))throw Error(t(200));return $S(s,l,null,h)},Vo.createRoot=function(s,l){if(!P0(s))throw Error(t(299));var h=!1,g="",_=l5;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(_=l.onRecoverableError)),l=E0(s,1,!1,null,null,h,!1,g,_),s[xi]=l.current,Xa(s.nodeType===8?s.parentNode:s),new R0(l)},Vo.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=co(l),s=s===null?null:s.stateNode,s},Vo.flushSync=function(s){return Nc(s)},Vo.hydrate=function(s,l,h){if(!ff(l))throw Error(t(200));return pf(null,s,l,!0,h)},Vo.hydrateRoot=function(s,l,h){if(!P0(s))throw Error(t(405));var g=h!=null&&h.hydratedSources||null,_=!1,P="",K=l5;if(h!=null&&(h.unstable_strictMode===!0&&(_=!0),h.identifierPrefix!==void 0&&(P=h.identifierPrefix),h.onRecoverableError!==void 0&&(K=h.onRecoverableError)),l=s5(l,null,s,1,h??null,_,!1,P,K),s[xi]=l.current,Xa(s),g)for(s=0;s<g.length;s++)h=g[s],_=h._getVersion,_=_(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,_]:l.mutableSourceEagerHydrationData.push(h,_);return new hf(l)},Vo.render=function(s,l,h){if(!ff(l))throw Error(t(200));return pf(null,s,l,!1,h)},Vo.unmountComponentAtNode=function(s){if(!ff(s))throw Error(t(40));return s._reactRootContainer?(Nc(function(){pf(null,null,s,!1,function(){s._reactRootContainer=null,s[xi]=null})}),!0):!1},Vo.unstable_batchedUpdates=_0,Vo.unstable_renderSubtreeIntoContainer=function(s,l,h,g){if(!ff(h))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return pf(s,l,h,!1,g)},Vo.version="18.3.1-next-f1338f8080-20240426",Vo}var y5;function i3(){if(y5)return L0.exports;y5=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),L0.exports=n3(),L0.exports}var x5;function o3(){if(x5)return gf;x5=1;var r=i3();return gf.createRoot=r.createRoot,gf.hydrateRoot=r.hydrateRoot,gf}var s3=o3();const a3=bx(s3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),c3=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),v5=r=>{const e=c3(r);return e.charAt(0).toUpperCase()+e.slice(1)},wx=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),u3=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=me.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:o="",children:a,iconNode:c,...u},f)=>me.createElement("svg",{ref:f,...d3,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:wx("lucide",o),...!a&&!u3(u)&&{"aria-hidden":"true"},...u},[...c.map(([d,y])=>me.createElement(d,y)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=(r,e)=>{const t=me.forwardRef(({className:n,...o},a)=>me.createElement(h3,{ref:a,iconNode:e,className:wx(`lucide-${l3(v5(r))}`,`lucide-${r}`,n),...o}));return t.displayName=v5(r),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],p3=Dt("bell",f3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Sx=Dt("box",m3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Zc=Dt("briefcase",g3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],_x=Dt("building",y3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"M17 19a1 1 0 0 1-1-1v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a1 1 0 0 1-1 1z",key:"trhst0"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M19 14V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V10",key:"1mo9zo"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M4 10a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2z",key:"1dd30t"}],["path",{d:"M7 5V3",key:"1t1388"}]],Tx=Dt("cable",x3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],nh=Dt("calculator",v3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],bm=Dt("calendar",b3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Cx=Dt("chart-column",w3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Yf=Dt("chevron-down",S3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],T3=Dt("chevron-left",_3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],A3=Dt("chevron-right",C3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],j3=Dt("chevron-up",k3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ih=Dt("circle-alert",E3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_n=Dt("circle-check-big",I3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ax=Dt("circle",R3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Qf=Dt("clock",P3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],kx=Dt("corner-down-right",N3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],lg=Dt("dollar-sign",B3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],wp=Dt("file-down",L3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xh=Dt("file-text",F3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],jx=Dt("gauge",z3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Ex=Dt("globe",O3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Ix=Dt("house",V3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],us=Dt("info",M3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Rx=Dt("lightbulb",D3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],$3=Dt("lock",W3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],q3=Dt("log-out",U3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],b5=Dt("mail",H3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Px=Dt("map-pin",G3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],J3=Dt("menu",K3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["path",{d:"M3 20h4.5a.5.5 0 0 0 .5-.5v-.282a.52.52 0 0 0-.247-.437 8 8 0 1 1 8.494-.001.52.52 0 0 0-.247.438v.282a.5.5 0 0 0 .5.5H21",key:"1x94xo"}]],Nx=Dt("omega",Y3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Bx=Dt("package",Q3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],Lx=Dt("plug",X3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],na=Dt("plus",Z3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Fx=Dt("radio",e_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],cg=Dt("receipt",t_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],zx=Dt("search",r_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ox=Dt("settings",n_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],o_=Dt("shield",i_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}],["line",{x1:"12",x2:"12",y1:"16",y2:"16",key:"aqc6ln"}],["line",{x1:"12",x2:"12",y1:"8",y2:"8",key:"1mkcni"}]],Vx=Dt("square-divide",s_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Mx=Dt("square-pen",a_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=[["path",{d:"M4 4v16",key:"6qkkli"}],["path",{d:"M9 4v16",key:"81ygyz"}],["path",{d:"M14 4v16",key:"12vmem"}]],Dx=Dt("tally-3",l_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Wx=Dt("target",c_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],oc=Dt("trash-2",u_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],$x=Dt("trending-down",d_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],f_=Dt("trending-up",h_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],eu=Dt("triangle-alert",p_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]],Ux=Dt("triangle",m_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Xf=Dt("user",g_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qx=Dt("x",y_),x_="_container_1rv94_24",v_="_menu_1rv94_37",b_="_btn_1rv94_38",cs={container:x_,menu:v_,btn:b_};function w_({onSelectCalculator:r,isDarkMode:e}){const[t,n]=me.useState(""),o=[{name:"Power Calculations",calculators:[{id:"voltage-drop",name:"Voltage Drop",icon:$x,keywords:"voltage drop vd wire circuit"},{id:"ohms-law",name:"Ohm's Law",icon:Vx,keywords:"ohms law voltage current resistance power series parallel circuit"},{id:"reactance-impedance",name:"Reactance",icon:Nx,keywords:"reactance impedance xl xc capacitive inductive resonance frequency ac circuit"},{id:"power-factor",name:"Power Factor",icon:Wx,keywords:"power factor correction pf capacitor kvar cos phi efficiency demand charge penalty savings"},{id:"power-triangle",name:"Power Triangle",icon:Ux,keywords:"power triangle kva kw kvar apparent real reactive power factor angle phase"},{id:"three-phase-power",name:"Three-Phase",icon:Dx,keywords:"three phase power 3 phase current voltage kw kva motor industrial commercial wye delta line"}]},{name:"Sizing & Rating",calculators:[{id:"ampacity",name:"Ampacity",icon:Tx,keywords:"ampacity current rating 310 temperature"},{id:"load-calculations",name:"Load Calculations",icon:Cx,keywords:"load calculation service size residential commercial demand"},{id:"service-entrance",name:"Service Entrance",icon:_x,keywords:"service entrance sizing panel main 230"},{id:"grounding-bonding",name:"Grounding & Bonding",icon:Ex,keywords:"grounding bonding ground electrode equipment gec egc jumper 250"}]},{name:"Equipment",calculators:[{id:"motor-calculations",name:"Motors",icon:Ox,keywords:"motor flc protection starter 430"},{id:"transformer-sizing",name:"Transformers",icon:Fx,keywords:"transformer kva sizing current primary secondary 450"},{id:"vfd-sizing",name:"VFD Sizing",icon:jx,keywords:"vfd variable frequency drive motor speed control inverter ac drive"}]},{name:"Installation",calculators:[{id:"box-fill",name:"Box Fill",icon:Bx,keywords:"box fill junction cubic inch volume 314"},{id:"pull-box",name:"Pull Box",icon:Sx,keywords:"pull box junction sizing straight angle u-pull 314.28 raceway conduit"},{id:"conduit-fill",name:"Conduit Fill",icon:Ax,keywords:"conduit fill emt pvc rigid raceway chapter 9"},{id:"conduit-bending",name:"Conduit Bending",icon:kx,keywords:"conduit bending offset saddle stub bend emt"},{id:"receptacles",name:"Receptacles",icon:Lx,keywords:"receptacle outlet gfci plug socket 210.52 counter kitchen bathroom wall spacing"},{id:"lighting",name:"Lighting",icon:Rx,keywords:"lighting lumens foot candles fixtures spacing watts illumination"}]}],a={"Power Calculations":"#3b82f6","Sizing & Rating":"#10b981",Equipment:"#f59e0b",Installation:"#8b5cf6",Safety:"#ef4444"},c={mainBg:e?"#000000":"#f3f4f6",cardText:e?"#ffffff":"#111827",inputBg:e?"#0a0a0a":"#ffffff",inputBorder:e?"#1a1a1a":"#d1d5db",inputText:e?"#ffffff":"#111827",placeholderText:e?"#666666":"#6b7280",categoryHeaderText:e?"#cccccc":"#4b5563"},u=o.flatMap(d=>d.calculators.map(y=>({...y,category:d.name}))),f=t?u.filter(d=>{const y=t.toLowerCase();return d.name.toLowerCase().includes(y)||d.keywords.toLowerCase().includes(y)}):null;return i.jsx("div",{style:{minHeight:"100vh",background:c.mainBg,padding:"0"},children:i.jsx("div",{style:{maxWidth:"64rem",margin:"0 auto"},children:i.jsxs("div",{style:{padding:"1.25rem",boxSizing:"border-box"},children:[i.jsxs("div",{style:{marginBottom:"1.5rem",position:"relative"},children:[i.jsx(zx,{size:20,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:c.placeholderText}}),i.jsx("input",{type:"text",placeholder:"Search calculators...",value:t,onChange:d=>n(d.target.value),style:{width:"100%",padding:"0.875rem 1rem 0.875rem 3rem",fontSize:"0.9375rem",border:`1px solid ${c.inputBorder}`,borderRadius:"12px",backgroundColor:c.inputBg,color:c.inputText,boxSizing:"border-box",outline:"none",transition:"all 0.2s ease"},onFocus:d=>{d.target.style.borderColor="#3b82f6",d.target.style.backgroundColor=e?"#000000":"#ffffff",d.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:d=>{d.target.style.borderColor=c.inputBorder,d.target.style.backgroundColor=c.inputBg,d.target.style.boxShadow="none"}})]}),f?i.jsxs("div",{children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:c.placeholderText,marginBottom:"1rem",paddingLeft:"0"},children:[f.length," ",f.length===1?"result":"results"," found"]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.25rem",marginBottom:"1rem",boxSizing:"border-box",width:"100%"},children:f.length>0?f.map(d=>{const y=d.icon,w=a[d.category]||"#3b82f6";return i.jsxs("div",{onClick:()=>{console.log("Clicked calculator:",d.id),r(d.id)},style:{cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[i.jsx("button",{style:{backgroundColor:e?"#1a1a1a":"#ffffff",border:`2px solid ${e?"#2a2a2a":"#d1d5db"}`,borderRadius:"12px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"70px",height:"70px",minWidth:"70px",minHeight:"70px",maxWidth:"70px",maxHeight:"70px",flexShrink:0,boxShadow:e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseOver:C=>{C.currentTarget.style.transform="translateY(-4px) scale(1.05)",C.currentTarget.style.backgroundColor=e?"#252525":"#ffffff",C.currentTarget.style.borderColor=w,C.currentTarget.style.boxShadow=`0 8px 16px ${w}30, 0 4px 6px ${w}20`},onMouseOut:C=>{C.currentTarget.style.transform="translateY(0) scale(1)",C.currentTarget.style.backgroundColor=e?"#1a1a1a":"#ffffff",C.currentTarget.style.borderColor=e?"#2a2a2a":"#d1d5db",C.currentTarget.style.boxShadow=e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)"},onMouseDown:C=>{C.currentTarget.style.transform="translateY(-2px) scale(0.95)"},onMouseUp:C=>{C.currentTarget.style.transform="translateY(-4px) scale(1.05)"},children:i.jsx(y,{size:28,strokeWidth:2,color:w})}),i.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",textAlign:"center",lineHeight:"1.2",color:c.cardText,maxWidth:"90px"},children:d.name})]},d.id)}):i.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem 1rem",color:c.placeholderText,fontSize:"0.9375rem"},children:"No calculators found"})})]}):o.map((d,y)=>i.jsxs("div",{style:{marginBottom:"2rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem",paddingLeft:"0"},children:[i.jsx("div",{style:{width:"4px",height:"20px",backgroundColor:a[d.name],borderRadius:"2px"}}),i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:c.categoryHeaderText,margin:0,letterSpacing:"-0.01em"},children:d.name})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.25rem",marginBottom:y<o.length-1?"1.5rem":"1rem",boxSizing:"border-box",width:"100%"},children:d.calculators.map(w=>{const C=w.icon,v=a[d.name];return i.jsxs("div",{onClick:()=>{console.log("Clicked calculator:",w.id),r(w.id)},style:{cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[i.jsx("button",{style:{backgroundColor:e?"#1a1a1a":"#ffffff",border:`2px solid ${e?"#2a2a2a":"#d1d5db"}`,borderRadius:"12px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"70px",height:"70px",minWidth:"70px",minHeight:"70px",maxWidth:"70px",maxHeight:"70px",flexShrink:0,boxShadow:e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseOver:B=>{B.currentTarget.style.transform="translateY(-4px) scale(1.05)",B.currentTarget.style.backgroundColor=e?"#252525":"#ffffff",B.currentTarget.style.borderColor=v,B.currentTarget.style.boxShadow=`0 8px 16px ${v}30, 0 4px 6px ${v}20`},onMouseOut:B=>{B.currentTarget.style.transform="translateY(0) scale(1)",B.currentTarget.style.backgroundColor=e?"#1a1a1a":"#ffffff",B.currentTarget.style.borderColor=e?"#2a2a2a":"#d1d5db",B.currentTarget.style.boxShadow=e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)"},onMouseDown:B=>{B.currentTarget.style.transform="translateY(-2px) scale(0.95)"},onMouseUp:B=>{B.currentTarget.style.transform="translateY(-4px) scale(1.05)"},children:i.jsx(C,{size:28,strokeWidth:2,color:v})}),i.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",textAlign:"center",lineHeight:"1.2",color:c.cardText,maxWidth:"90px"},children:w.name})]},w.id)})})]},d.name))]})})})}const S_="modulepreload",__=function(r){return"/electrician-toolkit/"+r},w5={},Dc=function(e,t,n){let o=Promise.resolve();if(t&&t.length>0){let c=function(d){return Promise.all(d.map(y=>Promise.resolve(y).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=c(t.map(d=>{if(d=__(d),d in w5)return;w5[d]=!0;const y=d.endsWith(".css"),w=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${w}`))return;const C=document.createElement("link");if(C.rel=y?"stylesheet":S_,y||(C.as="script"),C.crossOrigin="",C.href=d,f&&C.setAttribute("nonce",f),document.head.appendChild(C),y)return new Promise((v,B)=>{C.addEventListener("load",v),C.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return o.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};function qr(r){"@babel/helpers - typeof";return qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(r)}var ia=Uint8Array,as=Uint16Array,ug=Int32Array,dg=new ia([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),hg=new ia([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),S5=new ia([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Hx=function(r,e){for(var t=new as(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var o=new ug(t[30]),n=1;n<30;++n)for(var a=t[n];a<t[n+1];++a)o[a]=a-t[n]<<5|n;return{b:t,r:o}},Gx=Hx(dg,2),T_=Gx.b,wm=Gx.r;T_[28]=258,wm[258]=28;var C_=Hx(hg,0),_5=C_.r,Sm=new as(32768);for(var on=0;on<32768;++on){var Ul=(on&43690)>>1|(on&21845)<<1;Ul=(Ul&52428)>>2|(Ul&13107)<<2,Ul=(Ul&61680)>>4|(Ul&3855)<<4,Sm[on]=((Ul&65280)>>8|(Ul&255)<<8)>>1}var Jd=(function(r,e,t){for(var n=r.length,o=0,a=new as(e);o<n;++o)r[o]&&++a[r[o]-1];var c=new as(e);for(o=1;o<e;++o)c[o]=c[o-1]+a[o-1]<<1;var u;if(t){u=new as(1<<e);var f=15-e;for(o=0;o<n;++o)if(r[o])for(var d=o<<4|r[o],y=e-r[o],w=c[r[o]-1]++<<y,C=w|(1<<y)-1;w<=C;++w)u[Sm[w]>>f]=d}else for(u=new as(n),o=0;o<n;++o)r[o]&&(u[o]=Sm[c[r[o]-1]++]>>15-r[o]);return u}),Uc=new ia(288);for(var on=0;on<144;++on)Uc[on]=8;for(var on=144;on<256;++on)Uc[on]=9;for(var on=256;on<280;++on)Uc[on]=7;for(var on=280;on<288;++on)Uc[on]=8;var Zf=new ia(32);for(var on=0;on<32;++on)Zf[on]=5;var A_=Jd(Uc,9,0),k_=Jd(Zf,5,0),Kx=function(r){return(r+7)/8|0},j_=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new ia(r.subarray(e,t))},al=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},Dd=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},O0=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var o=t.length,a=t.slice();if(!o)return{t:Yx,l:0};if(o==1){var c=new ia(t[0].s+1);return c[t[0].s]=1,{t:c,l:1}}t.sort(function(se,ue){return se.f-ue.f}),t.push({s:-1,f:25001});var u=t[0],f=t[1],d=0,y=1,w=2;for(t[0]={s:-1,f:u.f+f.f,l:u,r:f};y!=o-1;)u=t[t[d].f<t[w].f?d++:w++],f=t[d!=y&&t[d].f<t[w].f?d++:w++],t[y++]={s:-1,f:u.f+f.f,l:u,r:f};for(var C=a[0].s,n=1;n<o;++n)a[n].s>C&&(C=a[n].s);var v=new as(C+1),B=_m(t[y-1],v,0);if(B>e){var n=0,I=0,z=B-e,A=1<<z;for(a.sort(function(ue,L){return v[L.s]-v[ue.s]||ue.f-L.f});n<o;++n){var M=a[n].s;if(v[M]>e)I+=A-(1<<B-v[M]),v[M]=e;else break}for(I>>=z;I>0;){var U=a[n].s;v[U]<e?I-=1<<e-v[U]++-1:++n}for(;n>=0&&I;--n){var F=a[n].s;v[F]==e&&(--v[F],++I)}B=e}return{t:new ia(v),l:B}},_m=function(r,e,t){return r.s==-1?Math.max(_m(r.l,e,t+1),_m(r.r,e,t+1)):e[r.s]=t},T5=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new as(++e),n=0,o=r[0],a=1,c=function(f){t[n++]=f},u=1;u<=e;++u)if(r[u]==o&&u!=e)++a;else{if(!o&&a>2){for(;a>138;a-=138)c(32754);a>2&&(c(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(c(o),--a;a>6;a-=6)c(8304);a>2&&(c(a-3<<5|8208),a=0)}for(;a--;)c(o);a=1,o=r[u]}return{c:t.subarray(0,n),n:e}},Wd=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},Jx=function(r,e,t){var n=t.length,o=Kx(e+2);r[o]=n&255,r[o+1]=n>>8,r[o+2]=r[o]^255,r[o+3]=r[o+1]^255;for(var a=0;a<n;++a)r[o+a+4]=t[a];return(o+4+n)*8},C5=function(r,e,t,n,o,a,c,u,f,d,y){al(e,y++,t),++o[256];for(var w=O0(o,15),C=w.t,v=w.l,B=O0(a,15),I=B.t,z=B.l,A=T5(C),M=A.c,U=A.n,F=T5(I),se=F.c,ue=F.n,L=new as(19),j=0;j<M.length;++j)++L[M[j]&31];for(var j=0;j<se.length;++j)++L[se[j]&31];for(var T=O0(L,7),V=T.t,k=T.l,b=19;b>4&&!V[S5[b-1]];--b);var N=d+5<<3,D=Wd(o,Uc)+Wd(a,Zf)+c,q=Wd(o,C)+Wd(a,I)+c+14+3*b+Wd(L,V)+2*L[16]+3*L[17]+7*L[18];if(f>=0&&N<=D&&N<=q)return Jx(e,y,r.subarray(f,f+d));var ie,oe,ne,ve;if(al(e,y,1+(q<D)),y+=2,q<D){ie=Jd(C,v,0),oe=C,ne=Jd(I,z,0),ve=I;var be=Jd(V,k,0);al(e,y,U-257),al(e,y+5,ue-1),al(e,y+10,b-4),y+=14;for(var j=0;j<b;++j)al(e,y+3*j,V[S5[j]]);y+=3*b;for(var Z=[M,se],W=0;W<2;++W)for(var J=Z[W],j=0;j<J.length;++j){var re=J[j]&31;al(e,y,be[re]),y+=V[re],re>15&&(al(e,y,J[j]>>5&127),y+=J[j]>>12)}}else ie=A_,oe=Uc,ne=k_,ve=Zf;for(var j=0;j<u;++j){var he=n[j];if(he>255){var re=he>>18&31;Dd(e,y,ie[re+257]),y+=oe[re+257],re>7&&(al(e,y,he>>23&31),y+=dg[re]);var ge=he&31;Dd(e,y,ne[ge]),y+=ve[ge],ge>3&&(Dd(e,y,he>>5&8191),y+=hg[ge])}else Dd(e,y,ie[he]),y+=oe[he]}return Dd(e,y,ie[256]),y+oe[256]},E_=new ug([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Yx=new ia(0),I_=function(r,e,t,n,o,a){var c=a.z||r.length,u=new ia(n+c+5*(1+Math.ceil(c/7e3))+o),f=u.subarray(n,u.length-o),d=a.l,y=(a.r||0)&7;if(e){y&&(f[0]=a.r>>3);for(var w=E_[e-1],C=w>>13,v=w&8191,B=(1<<t)-1,I=a.p||new as(32768),z=a.h||new as(B+1),A=Math.ceil(t/3),M=2*A,U=function(Fe){return(r[Fe]^r[Fe+1]<<A^r[Fe+2]<<M)&B},F=new ug(25e3),se=new as(288),ue=new as(32),L=0,j=0,T=a.i||0,V=0,k=a.w||0,b=0;T+2<c;++T){var N=U(T),D=T&32767,q=z[N];if(I[D]=q,z[N]=D,k<=T){var ie=c-T;if((L>7e3||V>24576)&&(ie>423||!d)){y=C5(r,f,0,F,se,ue,j,V,b,T-b,y),V=L=j=0,b=T;for(var oe=0;oe<286;++oe)se[oe]=0;for(var oe=0;oe<30;++oe)ue[oe]=0}var ne=2,ve=0,be=v,Z=D-q&32767;if(ie>2&&N==U(T-Z))for(var W=Math.min(C,ie)-1,J=Math.min(32767,T),re=Math.min(258,ie);Z<=J&&--be&&D!=q;){if(r[T+ne]==r[T+ne-Z]){for(var he=0;he<re&&r[T+he]==r[T+he-Z];++he);if(he>ne){if(ne=he,ve=Z,he>W)break;for(var ge=Math.min(Z,he-2),_e=0,oe=0;oe<ge;++oe){var fe=T-Z+oe&32767,xe=I[fe],Pe=fe-xe&32767;Pe>_e&&(_e=Pe,q=fe)}}}D=q,q=I[D],Z+=D-q&32767}if(ve){F[V++]=268435456|wm[ne]<<18|_5[ve];var We=wm[ne]&31,Qe=_5[ve]&31;j+=dg[We]+hg[Qe],++se[257+We],++ue[Qe],k=T+ne,++L}else F[V++]=r[T],++se[r[T]]}}for(T=Math.max(T,k);T<c;++T)F[V++]=r[T],++se[r[T]];y=C5(r,f,d,F,se,ue,j,V,b,T-b,y),d||(a.r=y&7|f[y/8|0]<<3,y-=7,a.h=z,a.p=I,a.i=T,a.w=k)}else{for(var T=a.w||0;T<c+d;T+=65535){var Xe=T+65535;Xe>=c&&(f[y/8|0]=d,Xe=c),y=Jx(f,y+1,r.subarray(T,Xe))}a.i=c}return j_(u,0,n+Kx(y)+o)},Qx=function(){var r=1,e=0;return{p:function(t){for(var n=r,o=e,a=t.length|0,c=0;c!=a;){for(var u=Math.min(c+2655,a);c<u;++c)o+=n+=t[c];n=(n&65535)+15*(n>>16),o=(o&65535)+15*(o>>16)}r=n,e=o},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},R_=function(r,e,t,n,o){if(!o&&(o={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),c=new ia(a.length+r.length);c.set(a),c.set(r,a.length),r=c,o.w=a.length}return I_(r,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,o)},Xx=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},P_=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var o=Qx();o.p(e.dictionary),Xx(r,2,o.d())}};function Tm(r,e){e||(e={});var t=Qx();t.p(r);var n=R_(r,e,e.dictionary?6:2,4);return P_(n,e),Xx(n,n.length-4,t.d()),n}var N_=typeof TextDecoder<"u"&&new TextDecoder,B_=0;try{N_.decode(Yx,{stream:!0}),B_=1}catch{}function L_(r){if(Array.isArray(r))return r}function F_(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,o,a,c,u=[],f=!0,d=!1;try{if(a=(t=t.call(r)).next,e!==0)for(;!(f=(n=a.call(t)).done)&&(u.push(n.value),u.length!==e);f=!0);}catch(y){d=!0,o=y}finally{try{if(!f&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(d)throw o}}return u}}function A5(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function z_(r,e){if(r){if(typeof r=="string")return A5(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A5(r,e):void 0}}function O_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k5(r,e){return L_(r)||F_(r,e)||z_(r,e)||O_()}function j5(r,e="utf8"){return new TextDecoder(e).decode(r)}const V_=new TextEncoder;function M_(r){return V_.encode(r)}const D_=1024*8,W_=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),V0={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class fg{constructor(e=D_,t={}){Ur(this,"buffer");Ur(this,"byteLength");Ur(this,"byteOffset");Ur(this,"length");Ur(this,"offset");Ur(this,"lastWrittenByte");Ur(this,"littleEndian");Ur(this,"_data");Ur(this,"_mark");Ur(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const o=t.offset?t.offset>>>0:0,a=e.byteLength-o;let c=o;(ArrayBuffer.isView(e)||e instanceof fg)&&(e.byteLength!==e.buffer.byteLength&&(c=e.byteOffset+o),e=e.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=c,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,c,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,o=new Uint8Array(n);o.set(new Uint8Array(this.buffer)),this.buffer=o.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const n=V0[t].BYTES_PER_ELEMENT*e,o=this.byteOffset+this.offset,a=this.buffer.slice(o,o+n);if(this.littleEndian===W_&&t!=="uint8"&&t!=="int8"){const u=new Uint8Array(this.buffer.slice(o,o+n));u.reverse();const f=new V0[t](u.buffer);return this.offset+=n,f.reverse(),f}const c=new V0[t](a);return this.offset+=n,c}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(e=1){return j5(this.readBytes(e))}decodeText(e=1,t="utf8"){return j5(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(M_(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function sd(r){let e=r.length;for(;--e>=0;)r[e]=0}const $_=3,U_=258,Zx=29,q_=256,H_=q_+1+Zx,ev=30,G_=512,K_=new Array((H_+2)*2);sd(K_);const J_=new Array(ev*2);sd(J_);const Y_=new Array(G_);sd(Y_);const Q_=new Array(U_-$_+1);sd(Q_);const X_=new Array(Zx);sd(X_);const Z_=new Array(ev);sd(Z_);const e4=(r,e,t,n)=>{let o=r&65535|0,a=r>>>16&65535|0,c=0;for(;t!==0;){c=t>2e3?2e3:t,t-=c;do o=o+e[n++]|0,a=a+o|0;while(--c);o%=65521,a%=65521}return o|a<<16|0};var Cm=e4;const t4=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},r4=new Uint32Array(t4()),n4=(r,e,t,n)=>{const o=r4,a=n+t;r^=-1;for(let c=n;c<a;c++)r=r>>>8^o[(r^e[c])&255];return r^-1};var Aa=n4,Am={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},tv={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const i4=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var o4=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)i4(t,n)&&(r[n]=t[n])}}return r},s4=r=>{let e=0;for(let n=0,o=r.length;n<o;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,o=0,a=r.length;n<a;n++){let c=r[n];t.set(c,o),o+=c.length}return t},rv={assign:o4,flattenChunks:s4};let nv=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{nv=!1}const oh=new Uint8Array(256);for(let r=0;r<256;r++)oh[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;oh[254]=oh[254]=1;var a4=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,o,a,c=r.length,u=0;for(o=0;o<c;o++)t=r.charCodeAt(o),(t&64512)===55296&&o+1<c&&(n=r.charCodeAt(o+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),o++)),u+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(u),a=0,o=0;a<u;o++)t=r.charCodeAt(o),(t&64512)===55296&&o+1<c&&(n=r.charCodeAt(o+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),o++)),t<128?e[a++]=t:t<2048?(e[a++]=192|t>>>6,e[a++]=128|t&63):t<65536?(e[a++]=224|t>>>12,e[a++]=128|t>>>6&63,e[a++]=128|t&63):(e[a++]=240|t>>>18,e[a++]=128|t>>>12&63,e[a++]=128|t>>>6&63,e[a++]=128|t&63);return e};const l4=(r,e)=>{if(e<65534&&r.subarray&&nv)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var c4=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,o;const a=new Array(t*2);for(o=0,n=0;n<t;){let c=r[n++];if(c<128){a[o++]=c;continue}let u=oh[c];if(u>4){a[o++]=65533,n+=u-1;continue}for(c&=u===2?31:u===3?15:7;u>1&&n<t;)c=c<<6|r[n++]&63,u--;if(u>1){a[o++]=65533;continue}c<65536?a[o++]=c:(c-=65536,a[o++]=55296|c>>10&1023,a[o++]=56320|c&1023)}return l4(a,o)},u4=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+oh[r[t]]>e?t:e},km={string2buf:a4,buf2string:c4,utf8border:u4};function d4(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var h4=d4;const yf=16209,f4=16191;var p4=function(e,t){let n,o,a,c,u,f,d,y,w,C,v,B,I,z,A,M,U,F,se,ue,L,j,T,V;const k=e.state;n=e.next_in,T=e.input,o=n+(e.avail_in-5),a=e.next_out,V=e.output,c=a-(t-e.avail_out),u=a+(e.avail_out-257),f=k.dmax,d=k.wsize,y=k.whave,w=k.wnext,C=k.window,v=k.hold,B=k.bits,I=k.lencode,z=k.distcode,A=(1<<k.lenbits)-1,M=(1<<k.distbits)-1;e:do{B<15&&(v+=T[n++]<<B,B+=8,v+=T[n++]<<B,B+=8),U=I[v&A];t:for(;;){if(F=U>>>24,v>>>=F,B-=F,F=U>>>16&255,F===0)V[a++]=U&65535;else if(F&16){se=U&65535,F&=15,F&&(B<F&&(v+=T[n++]<<B,B+=8),se+=v&(1<<F)-1,v>>>=F,B-=F),B<15&&(v+=T[n++]<<B,B+=8,v+=T[n++]<<B,B+=8),U=z[v&M];r:for(;;){if(F=U>>>24,v>>>=F,B-=F,F=U>>>16&255,F&16){if(ue=U&65535,F&=15,B<F&&(v+=T[n++]<<B,B+=8,B<F&&(v+=T[n++]<<B,B+=8)),ue+=v&(1<<F)-1,ue>f){e.msg="invalid distance too far back",k.mode=yf;break e}if(v>>>=F,B-=F,F=a-c,ue>F){if(F=ue-F,F>y&&k.sane){e.msg="invalid distance too far back",k.mode=yf;break e}if(L=0,j=C,w===0){if(L+=d-F,F<se){se-=F;do V[a++]=C[L++];while(--F);L=a-ue,j=V}}else if(w<F){if(L+=d+w-F,F-=w,F<se){se-=F;do V[a++]=C[L++];while(--F);if(L=0,w<se){F=w,se-=F;do V[a++]=C[L++];while(--F);L=a-ue,j=V}}}else if(L+=w-F,F<se){se-=F;do V[a++]=C[L++];while(--F);L=a-ue,j=V}for(;se>2;)V[a++]=j[L++],V[a++]=j[L++],V[a++]=j[L++],se-=3;se&&(V[a++]=j[L++],se>1&&(V[a++]=j[L++]))}else{L=a-ue;do V[a++]=V[L++],V[a++]=V[L++],V[a++]=V[L++],se-=3;while(se>2);se&&(V[a++]=V[L++],se>1&&(V[a++]=V[L++]))}}else if((F&64)===0){U=z[(U&65535)+(v&(1<<F)-1)];continue r}else{e.msg="invalid distance code",k.mode=yf;break e}break}}else if((F&64)===0){U=I[(U&65535)+(v&(1<<F)-1)];continue t}else if(F&32){k.mode=f4;break e}else{e.msg="invalid literal/length code",k.mode=yf;break e}break}}while(n<o&&a<u);se=B>>3,n-=se,B-=se<<3,v&=(1<<B)-1,e.next_in=n,e.next_out=a,e.avail_in=n<o?5+(o-n):5-(n-o),e.avail_out=a<u?257+(u-a):257-(a-u),k.hold=v,k.bits=B};const Iu=15,E5=852,I5=592,R5=0,M0=1,P5=2,m4=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),g4=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),y4=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),x4=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),v4=(r,e,t,n,o,a,c,u)=>{const f=u.bits;let d=0,y=0,w=0,C=0,v=0,B=0,I=0,z=0,A=0,M=0,U,F,se,ue,L,j=null,T;const V=new Uint16Array(Iu+1),k=new Uint16Array(Iu+1);let b=null,N,D,q;for(d=0;d<=Iu;d++)V[d]=0;for(y=0;y<n;y++)V[e[t+y]]++;for(v=f,C=Iu;C>=1&&V[C]===0;C--);if(v>C&&(v=C),C===0)return o[a++]=1<<24|64<<16|0,o[a++]=1<<24|64<<16|0,u.bits=1,0;for(w=1;w<C&&V[w]===0;w++);for(v<w&&(v=w),z=1,d=1;d<=Iu;d++)if(z<<=1,z-=V[d],z<0)return-1;if(z>0&&(r===R5||C!==1))return-1;for(k[1]=0,d=1;d<Iu;d++)k[d+1]=k[d]+V[d];for(y=0;y<n;y++)e[t+y]!==0&&(c[k[e[t+y]]++]=y);if(r===R5?(j=b=c,T=20):r===M0?(j=m4,b=g4,T=257):(j=y4,b=x4,T=0),M=0,y=0,d=w,L=a,B=v,I=0,se=-1,A=1<<v,ue=A-1,r===M0&&A>E5||r===P5&&A>I5)return 1;for(;;){N=d-I,c[y]+1<T?(D=0,q=c[y]):c[y]>=T?(D=b[c[y]-T],q=j[c[y]-T]):(D=96,q=0),U=1<<d-I,F=1<<B,w=F;do F-=U,o[L+(M>>I)+F]=N<<24|D<<16|q|0;while(F!==0);for(U=1<<d-1;M&U;)U>>=1;if(U!==0?(M&=U-1,M+=U):M=0,y++,--V[d]===0){if(d===C)break;d=e[t+c[y]]}if(d>v&&(M&ue)!==se){for(I===0&&(I=v),L+=w,B=d-I,z=1<<B;B+I<C&&(z-=V[B+I],!(z<=0));)B++,z<<=1;if(A+=1<<B,r===M0&&A>E5||r===P5&&A>I5)return 1;se=M&ue,o[se]=v<<24|B<<16|L-a|0}}return M!==0&&(o[L+M]=d-I<<24|64<<16|0),u.bits=v,0};var Yd=v4;const b4=0,iv=1,ov=2,{Z_FINISH:N5,Z_BLOCK:w4,Z_TREES:xf,Z_OK:qc,Z_STREAM_END:S4,Z_NEED_DICT:_4,Z_STREAM_ERROR:Ps,Z_DATA_ERROR:sv,Z_MEM_ERROR:av,Z_BUF_ERROR:T4,Z_DEFLATED:B5}=tv,Sp=16180,L5=16181,F5=16182,z5=16183,O5=16184,V5=16185,M5=16186,D5=16187,W5=16188,$5=16189,ep=16190,ll=16191,D0=16192,U5=16193,W0=16194,q5=16195,H5=16196,G5=16197,K5=16198,vf=16199,bf=16200,J5=16201,Y5=16202,Q5=16203,X5=16204,Z5=16205,$0=16206,e2=16207,t2=16208,pn=16209,lv=16210,cv=16211,C4=852,A4=592,k4=15,j4=k4,r2=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function E4(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const tu=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<Sp||e.mode>cv?1:0},uv=r=>{if(tu(r))return Ps;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=Sp,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(C4),e.distcode=e.distdyn=new Int32Array(A4),e.sane=1,e.back=-1,qc},dv=r=>{if(tu(r))return Ps;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,uv(r)},hv=(r,e)=>{let t;if(tu(r))return Ps;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ps:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,dv(r))},fv=(r,e)=>{if(!r)return Ps;const t=new E4;r.state=t,t.strm=r,t.window=null,t.mode=Sp;const n=hv(r,e);return n!==qc&&(r.state=null),n},I4=r=>fv(r,j4);let n2=!0,U0,q0;const R4=r=>{if(n2){U0=new Int32Array(512),q0=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(Yd(iv,r.lens,0,288,U0,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;Yd(ov,r.lens,0,32,q0,0,r.work,{bits:5}),n2=!1}r.lencode=U0,r.lenbits=9,r.distcode=q0,r.distbits=5},pv=(r,e,t,n)=>{let o;const a=r.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(e.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(o=a.wsize-a.wnext,o>n&&(o=n),a.window.set(e.subarray(t-n,t-n+o),a.wnext),n-=o,n?(a.window.set(e.subarray(t-n,t),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0},P4=(r,e)=>{let t,n,o,a,c,u,f,d,y,w,C,v,B,I,z=0,A,M,U,F,se,ue,L,j;const T=new Uint8Array(4);let V,k;const b=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(tu(r)||!r.output||!r.input&&r.avail_in!==0)return Ps;t=r.state,t.mode===ll&&(t.mode=D0),c=r.next_out,o=r.output,f=r.avail_out,a=r.next_in,n=r.input,u=r.avail_in,d=t.hold,y=t.bits,w=u,C=f,j=qc;e:for(;;)switch(t.mode){case Sp:if(t.wrap===0){t.mode=D0;break}for(;y<16;){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}if(t.wrap&2&&d===35615){t.wbits===0&&(t.wbits=15),t.check=0,T[0]=d&255,T[1]=d>>>8&255,t.check=Aa(t.check,T,2,0),d=0,y=0,t.mode=L5;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((d&255)<<8)+(d>>8))%31){r.msg="incorrect header check",t.mode=pn;break}if((d&15)!==B5){r.msg="unknown compression method",t.mode=pn;break}if(d>>>=4,y-=4,L=(d&15)+8,t.wbits===0&&(t.wbits=L),L>15||L>t.wbits){r.msg="invalid window size",t.mode=pn;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=d&512?$5:ll,d=0,y=0;break;case L5:for(;y<16;){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}if(t.flags=d,(t.flags&255)!==B5){r.msg="unknown compression method",t.mode=pn;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=pn;break}t.head&&(t.head.text=d>>8&1),t.flags&512&&t.wrap&4&&(T[0]=d&255,T[1]=d>>>8&255,t.check=Aa(t.check,T,2,0)),d=0,y=0,t.mode=F5;case F5:for(;y<32;){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}t.head&&(t.head.time=d),t.flags&512&&t.wrap&4&&(T[0]=d&255,T[1]=d>>>8&255,T[2]=d>>>16&255,T[3]=d>>>24&255,t.check=Aa(t.check,T,4,0)),d=0,y=0,t.mode=z5;case z5:for(;y<16;){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}t.head&&(t.head.xflags=d&255,t.head.os=d>>8),t.flags&512&&t.wrap&4&&(T[0]=d&255,T[1]=d>>>8&255,t.check=Aa(t.check,T,2,0)),d=0,y=0,t.mode=O5;case O5:if(t.flags&1024){for(;y<16;){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}t.length=d,t.head&&(t.head.extra_len=d),t.flags&512&&t.wrap&4&&(T[0]=d&255,T[1]=d>>>8&255,t.check=Aa(t.check,T,2,0)),d=0,y=0}else t.head&&(t.head.extra=null);t.mode=V5;case V5:if(t.flags&1024&&(v=t.length,v>u&&(v=u),v&&(t.head&&(L=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(a,a+v),L)),t.flags&512&&t.wrap&4&&(t.check=Aa(t.check,n,v,a)),u-=v,a+=v,t.length-=v),t.length))break e;t.length=0,t.mode=M5;case M5:if(t.flags&2048){if(u===0)break e;v=0;do L=n[a+v++],t.head&&L&&t.length<65536&&(t.head.name+=String.fromCharCode(L));while(L&&v<u);if(t.flags&512&&t.wrap&4&&(t.check=Aa(t.check,n,v,a)),u-=v,a+=v,L)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=D5;case D5:if(t.flags&4096){if(u===0)break e;v=0;do L=n[a+v++],t.head&&L&&t.length<65536&&(t.head.comment+=String.fromCharCode(L));while(L&&v<u);if(t.flags&512&&t.wrap&4&&(t.check=Aa(t.check,n,v,a)),u-=v,a+=v,L)break e}else t.head&&(t.head.comment=null);t.mode=W5;case W5:if(t.flags&512){for(;y<16;){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}if(t.wrap&4&&d!==(t.check&65535)){r.msg="header crc mismatch",t.mode=pn;break}d=0,y=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=ll;break;case $5:for(;y<32;){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}r.adler=t.check=r2(d),d=0,y=0,t.mode=ep;case ep:if(t.havedict===0)return r.next_out=c,r.avail_out=f,r.next_in=a,r.avail_in=u,t.hold=d,t.bits=y,_4;r.adler=t.check=1,t.mode=ll;case ll:if(e===w4||e===xf)break e;case D0:if(t.last){d>>>=y&7,y-=y&7,t.mode=$0;break}for(;y<3;){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}switch(t.last=d&1,d>>>=1,y-=1,d&3){case 0:t.mode=U5;break;case 1:if(R4(t),t.mode=vf,e===xf){d>>>=2,y-=2;break e}break;case 2:t.mode=H5;break;case 3:r.msg="invalid block type",t.mode=pn}d>>>=2,y-=2;break;case U5:for(d>>>=y&7,y-=y&7;y<32;){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}if((d&65535)!==(d>>>16^65535)){r.msg="invalid stored block lengths",t.mode=pn;break}if(t.length=d&65535,d=0,y=0,t.mode=W0,e===xf)break e;case W0:t.mode=q5;case q5:if(v=t.length,v){if(v>u&&(v=u),v>f&&(v=f),v===0)break e;o.set(n.subarray(a,a+v),c),u-=v,a+=v,f-=v,c+=v,t.length-=v;break}t.mode=ll;break;case H5:for(;y<14;){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}if(t.nlen=(d&31)+257,d>>>=5,y-=5,t.ndist=(d&31)+1,d>>>=5,y-=5,t.ncode=(d&15)+4,d>>>=4,y-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=pn;break}t.have=0,t.mode=G5;case G5:for(;t.have<t.ncode;){for(;y<3;){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}t.lens[b[t.have++]]=d&7,d>>>=3,y-=3}for(;t.have<19;)t.lens[b[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,V={bits:t.lenbits},j=Yd(b4,t.lens,0,19,t.lencode,0,t.work,V),t.lenbits=V.bits,j){r.msg="invalid code lengths set",t.mode=pn;break}t.have=0,t.mode=K5;case K5:for(;t.have<t.nlen+t.ndist;){for(;z=t.lencode[d&(1<<t.lenbits)-1],A=z>>>24,M=z>>>16&255,U=z&65535,!(A<=y);){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}if(U<16)d>>>=A,y-=A,t.lens[t.have++]=U;else{if(U===16){for(k=A+2;y<k;){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}if(d>>>=A,y-=A,t.have===0){r.msg="invalid bit length repeat",t.mode=pn;break}L=t.lens[t.have-1],v=3+(d&3),d>>>=2,y-=2}else if(U===17){for(k=A+3;y<k;){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}d>>>=A,y-=A,L=0,v=3+(d&7),d>>>=3,y-=3}else{for(k=A+7;y<k;){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}d>>>=A,y-=A,L=0,v=11+(d&127),d>>>=7,y-=7}if(t.have+v>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=pn;break}for(;v--;)t.lens[t.have++]=L}}if(t.mode===pn)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=pn;break}if(t.lenbits=9,V={bits:t.lenbits},j=Yd(iv,t.lens,0,t.nlen,t.lencode,0,t.work,V),t.lenbits=V.bits,j){r.msg="invalid literal/lengths set",t.mode=pn;break}if(t.distbits=6,t.distcode=t.distdyn,V={bits:t.distbits},j=Yd(ov,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,V),t.distbits=V.bits,j){r.msg="invalid distances set",t.mode=pn;break}if(t.mode=vf,e===xf)break e;case vf:t.mode=bf;case bf:if(u>=6&&f>=258){r.next_out=c,r.avail_out=f,r.next_in=a,r.avail_in=u,t.hold=d,t.bits=y,p4(r,C),c=r.next_out,o=r.output,f=r.avail_out,a=r.next_in,n=r.input,u=r.avail_in,d=t.hold,y=t.bits,t.mode===ll&&(t.back=-1);break}for(t.back=0;z=t.lencode[d&(1<<t.lenbits)-1],A=z>>>24,M=z>>>16&255,U=z&65535,!(A<=y);){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}if(M&&(M&240)===0){for(F=A,se=M,ue=U;z=t.lencode[ue+((d&(1<<F+se)-1)>>F)],A=z>>>24,M=z>>>16&255,U=z&65535,!(F+A<=y);){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}d>>>=F,y-=F,t.back+=F}if(d>>>=A,y-=A,t.back+=A,t.length=U,M===0){t.mode=Z5;break}if(M&32){t.back=-1,t.mode=ll;break}if(M&64){r.msg="invalid literal/length code",t.mode=pn;break}t.extra=M&15,t.mode=J5;case J5:if(t.extra){for(k=t.extra;y<k;){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}t.length+=d&(1<<t.extra)-1,d>>>=t.extra,y-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Y5;case Y5:for(;z=t.distcode[d&(1<<t.distbits)-1],A=z>>>24,M=z>>>16&255,U=z&65535,!(A<=y);){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}if((M&240)===0){for(F=A,se=M,ue=U;z=t.distcode[ue+((d&(1<<F+se)-1)>>F)],A=z>>>24,M=z>>>16&255,U=z&65535,!(F+A<=y);){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}d>>>=F,y-=F,t.back+=F}if(d>>>=A,y-=A,t.back+=A,M&64){r.msg="invalid distance code",t.mode=pn;break}t.offset=U,t.extra=M&15,t.mode=Q5;case Q5:if(t.extra){for(k=t.extra;y<k;){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}t.offset+=d&(1<<t.extra)-1,d>>>=t.extra,y-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=pn;break}t.mode=X5;case X5:if(f===0)break e;if(v=C-f,t.offset>v){if(v=t.offset-v,v>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=pn;break}v>t.wnext?(v-=t.wnext,B=t.wsize-v):B=t.wnext-v,v>t.length&&(v=t.length),I=t.window}else I=o,B=c-t.offset,v=t.length;v>f&&(v=f),f-=v,t.length-=v;do o[c++]=I[B++];while(--v);t.length===0&&(t.mode=bf);break;case Z5:if(f===0)break e;o[c++]=t.length,f--,t.mode=bf;break;case $0:if(t.wrap){for(;y<32;){if(u===0)break e;u--,d|=n[a++]<<y,y+=8}if(C-=f,r.total_out+=C,t.total+=C,t.wrap&4&&C&&(r.adler=t.check=t.flags?Aa(t.check,o,C,c-C):Cm(t.check,o,C,c-C)),C=f,t.wrap&4&&(t.flags?d:r2(d))!==t.check){r.msg="incorrect data check",t.mode=pn;break}d=0,y=0}t.mode=e2;case e2:if(t.wrap&&t.flags){for(;y<32;){if(u===0)break e;u--,d+=n[a++]<<y,y+=8}if(t.wrap&4&&d!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=pn;break}d=0,y=0}t.mode=t2;case t2:j=S4;break e;case pn:j=sv;break e;case lv:return av;case cv:default:return Ps}return r.next_out=c,r.avail_out=f,r.next_in=a,r.avail_in=u,t.hold=d,t.bits=y,(t.wsize||C!==r.avail_out&&t.mode<pn&&(t.mode<$0||e!==N5))&&pv(r,r.output,r.next_out,C-r.avail_out),w-=r.avail_in,C-=r.avail_out,r.total_in+=w,r.total_out+=C,t.total+=C,t.wrap&4&&C&&(r.adler=t.check=t.flags?Aa(t.check,o,C,r.next_out-C):Cm(t.check,o,C,r.next_out-C)),r.data_type=t.bits+(t.last?64:0)+(t.mode===ll?128:0)+(t.mode===vf||t.mode===W0?256:0),(w===0&&C===0||e===N5)&&j===qc&&(j=T4),j},N4=r=>{if(tu(r))return Ps;let e=r.state;return e.window&&(e.window=null),r.state=null,qc},B4=(r,e)=>{if(tu(r))return Ps;const t=r.state;return(t.wrap&2)===0?Ps:(t.head=e,e.done=!1,qc)},L4=(r,e)=>{const t=e.length;let n,o,a;return tu(r)||(n=r.state,n.wrap!==0&&n.mode!==ep)?Ps:n.mode===ep&&(o=1,o=Cm(o,e,t,0),o!==n.check)?sv:(a=pv(r,e,t,t),a?(n.mode=lv,av):(n.havedict=1,qc))};var F4=dv,z4=hv,O4=uv,V4=I4,M4=fv,D4=P4,W4=N4,$4=B4,U4=L4,q4="pako inflate (from Nodeca project)",cl={inflateReset:F4,inflateReset2:z4,inflateResetKeep:O4,inflateInit:V4,inflateInit2:M4,inflate:D4,inflateEnd:W4,inflateGetHeader:$4,inflateSetDictionary:U4,inflateInfo:q4};function H4(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var G4=H4;const mv=Object.prototype.toString,{Z_NO_FLUSH:K4,Z_FINISH:J4,Z_OK:sh,Z_STREAM_END:H0,Z_NEED_DICT:G0,Z_STREAM_ERROR:Y4,Z_DATA_ERROR:i2,Z_MEM_ERROR:Q4}=tv;function vh(r){this.options=rv.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h4,this.strm.avail_out=0;let t=cl.inflateInit2(this.strm,e.windowBits);if(t!==sh)throw new Error(Am[t]);if(this.header=new G4,cl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=km.string2buf(e.dictionary):mv.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=cl.inflateSetDictionary(this.strm,e.dictionary),t!==sh)))throw new Error(Am[t])}vh.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,o=this.options.dictionary;let a,c,u;if(this.ended)return!1;for(e===~~e?c=e:c=e===!0?J4:K4,mv.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),a=cl.inflate(t,c),a===G0&&o&&(a=cl.inflateSetDictionary(t,o),a===sh?a=cl.inflate(t,c):a===i2&&(a=G0));t.avail_in>0&&a===H0&&t.state.wrap>0&&r[t.next_in]!==0;)cl.inflateReset(t),a=cl.inflate(t,c);switch(a){case Y4:case i2:case G0:case Q4:return this.onEnd(a),this.ended=!0,!1}if(u=t.avail_out,t.next_out&&(t.avail_out===0||a===H0))if(this.options.to==="string"){let f=km.utf8border(t.output,t.next_out),d=t.next_out-f,y=km.buf2string(t.output,f);t.next_out=d,t.avail_out=n-d,d&&t.output.set(t.output.subarray(f,f+d),0),this.onData(y)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===sh&&u===0)){if(a===H0)return a=cl.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};vh.prototype.onData=function(r){this.chunks.push(r)};vh.prototype.onEnd=function(r){r===sh&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=rv.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function X4(r,e){const t=new vh(e);if(t.push(r),t.err)throw t.msg||Am[t.err];return t.result}var Z4=vh,eT=X4,tT={Inflate:Z4,inflate:eT};const{Inflate:rT,inflate:nT}=tT;var o2=rT,iT=nT;const gv=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;gv[r]=e}const s2=4294967295;function oT(r,e,t){let n=r;for(let o=0;o<t;o++)n=gv[(n^e[o])&255]^n>>>8;return n}function sT(r,e){return(oT(s2,r,e)^s2)>>>0}function a2(r,e,t){const n=r.readUint32(),o=sT(new Uint8Array(r.buffer,r.byteOffset+r.offset-e-4,e),e);if(o!==n)throw new Error(`CRC mismatch for chunk ${t}. Expected ${n}, found ${o}`)}function yv(r,e,t){for(let n=0;n<t;n++)e[n]=r[n]}function xv(r,e,t,n){let o=0;for(;o<n;o++)e[o]=r[o];for(;o<t;o++)e[o]=r[o]+e[o-n]&255}function vv(r,e,t,n){let o=0;if(t.length===0)for(;o<n;o++)e[o]=r[o];else for(;o<n;o++)e[o]=r[o]+t[o]&255}function bv(r,e,t,n,o){let a=0;if(t.length===0){for(;a<o;a++)e[a]=r[a];for(;a<n;a++)e[a]=r[a]+(e[a-o]>>1)&255}else{for(;a<o;a++)e[a]=r[a]+(t[a]>>1)&255;for(;a<n;a++)e[a]=r[a]+(e[a-o]+t[a]>>1)&255}}function wv(r,e,t,n,o){let a=0;if(t.length===0){for(;a<o;a++)e[a]=r[a];for(;a<n;a++)e[a]=r[a]+e[a-o]&255}else{for(;a<o;a++)e[a]=r[a]+t[a]&255;for(;a<n;a++)e[a]=r[a]+aT(e[a-o],t[a],t[a-o])&255}}function aT(r,e,t){const n=r+e-t,o=Math.abs(n-r),a=Math.abs(n-e),c=Math.abs(n-t);return o<=a&&o<=c?r:a<=c?e:t}function lT(r,e,t,n,o,a){switch(r){case 0:yv(e,t,o);break;case 1:xv(e,t,o,a);break;case 2:vv(e,t,n,o);break;case 3:bv(e,t,n,o,a);break;case 4:wv(e,t,n,o,a);break;default:throw new Error(`Unsupported filter: ${r}`)}}const cT=new Uint16Array([255]),uT=new Uint8Array(cT.buffer),dT=uT[0]===255;function hT(r){const{data:e,width:t,height:n,channels:o,depth:a}=r,c=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(a/8)*o,f=new Uint8Array(n*t*u);let d=0;for(let y=0;y<7;y++){const w=c[y],C=Math.ceil((t-w.x)/w.xStep),v=Math.ceil((n-w.y)/w.yStep);if(C<=0||v<=0)continue;const B=C*u,I=new Uint8Array(B);for(let z=0;z<v;z++){const A=e[d++],M=e.subarray(d,d+B);d+=B;const U=new Uint8Array(B);lT(A,M,U,I,B,u),I.set(U);for(let F=0;F<C;F++){const se=w.x+F*w.xStep,ue=w.y+z*w.yStep;if(!(se>=t||ue>=n))for(let L=0;L<u;L++)f[(ue*t+se)*u+L]=U[F*u+L]}}}if(a===16){const y=new Uint16Array(f.buffer);if(dT)for(let w=0;w<y.length;w++)y[w]=fT(y[w]);return y}else return f}function fT(r){return(r&255)<<8|r>>8&255}const pT=new Uint16Array([255]),mT=new Uint8Array(pT.buffer),gT=mT[0]===255,yT=new Uint8Array(0);function l2(r){const{data:e,width:t,height:n,channels:o,depth:a}=r,c=Math.ceil(a/8)*o,u=Math.ceil(a/8*o*t),f=new Uint8Array(n*u);let d=yT,y=0,w,C;for(let v=0;v<n;v++){switch(w=e.subarray(y+1,y+1+u),C=f.subarray(v*u,(v+1)*u),e[y]){case 0:yv(w,C,u);break;case 1:xv(w,C,u,c);break;case 2:vv(w,C,d,u);break;case 3:bv(w,C,d,u,c);break;case 4:wv(w,C,d,u,c);break;default:throw new Error(`Unsupported filter: ${e[y]}`)}d=C,y+=u+1}if(a===16){const v=new Uint16Array(f.buffer);if(gT)for(let B=0;B<v.length;B++)v[B]=xT(v[B]);return v}else return f}function xT(r){return(r&255)<<8|r>>8&255}const Bf=Uint8Array.of(137,80,78,71,13,10,26,10);function c2(r){if(!vT(r.readBytes(Bf.length)))throw new Error("wrong PNG signature")}function vT(r){if(r.length<Bf.length)return!1;for(let e=0;e<Bf.length;e++)if(r[e]!==Bf[e])return!1;return!0}const bT="tEXt",wT=0,Sv=new TextDecoder("latin1");function ST(r){if(TT(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const _T=/^[\u0000-\u00FF]*$/;function TT(r){if(!_T.test(r))throw new Error("invalid latin1 text")}function CT(r,e,t){const n=_v(e);r[n]=AT(e,t-n.length-1)}function _v(r){for(r.mark();r.readByte()!==wT;);const e=r.offset;r.reset();const t=Sv.decode(r.readBytes(e-r.offset-1));return r.skip(1),ST(t),t}function AT(r,e){return Sv.decode(r.readBytes(e))}const ss={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},K0={UNKNOWN:-1,DEFLATE:0},u2={UNKNOWN:-1,ADAPTIVE:0},J0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},wf={NONE:0,BACKGROUND:1,PREVIOUS:2},Y0={SOURCE:0,OVER:1};class kT extends fg{constructor(t,n={}){super(t);Ur(this,"_checkCrc");Ur(this,"_inflator");Ur(this,"_png");Ur(this,"_apng");Ur(this,"_end");Ur(this,"_hasPalette");Ur(this,"_palette");Ur(this,"_hasTransparency");Ur(this,"_transparency");Ur(this,"_compressionMethod");Ur(this,"_filterMethod");Ur(this,"_interlaceMethod");Ur(this,"_colorType");Ur(this,"_isAnimated");Ur(this,"_numberOfFrames");Ur(this,"_numberOfPlays");Ur(this,"_frames");Ur(this,"_writingDataChunks");const{checkCrc:o=!1}=n;this._checkCrc=o,this._inflator=new o2,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=K0.UNKNOWN,this._filterMethod=u2.UNKNOWN,this._interlaceMethod=J0.UNKNOWN,this._colorType=ss.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(c2(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeChunk(t,n)}return this.decodeImage(),this._png}decodeApng(){for(c2(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(t,n)}return this.decodeApngImage(),this._apng}decodeChunk(t,n){const o=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case bT:CT(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-o!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?a2(this,t+4,n):this.skip(4)}decodeApngChunk(t,n){const o=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,n),this.offset=o+t;break}if(this.offset-o!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?a2(this,t+4,n):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=jT(this.readUint8());const n=this.readUint8();this._colorType=n;let o;switch(n){case ss.GREYSCALE:o=1;break;case ss.TRUECOLOUR:o=3;break;case ss.INDEXED_COLOUR:o=1;break;case ss.GREYSCALE_ALPHA:o=2;break;case ss.TRUECOLOUR_ALPHA:o=4;break;case ss.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=o,this._compressionMethod=this.readUint8(),this._compressionMethod!==K0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const n=t/3;this._hasPalette=!0;const o=[];this._palette=o;for(let a=0;a<n;a++)o.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const n=t,o=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,o,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let n=t,o=this.offset+this.byteOffset;if(o+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,o,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case ss.GREYSCALE:case ss.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let n=0;n<t/2;n++)this._transparency[n]=this.readUint16();break}case ss.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let n=0;for(;n<t;n++){const o=this.readByte();this._palette[n].push(o)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case ss.UNKNOWN:case ss.GREYSCALE_ALPHA:case ss.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const n=_v(this),o=this.readUint8();if(o!==K0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${o}`);const a=this.readBytes(t-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:iT(a)}}decodepHYs(){const t=this.readUint32(),n=this.readUint32(),o=this.readByte();this._png.resolution={x:t,y:n,unit:o}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const n={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},o=this._frames.at(t);if(o){if(o.data=l2({data:o.data,width:o.width,height:o.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||o.xOffset===0&&o.yOffset===0&&o.width===this._png.width&&o.height===this._png.height)n.data=o.data;else{const a=this._apng.frames.at(t-1);this.disposeFrame(o,a,n),this.addFrameDataToCanvas(n,o)}this._apng.frames.push(n)}}return this._apng}disposeFrame(t,n,o){switch(t.disposeOp){case wf.NONE:break;case wf.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let c=0;c<this._png.width;c++){const u=(a*t.width+c)*this._png.channels;for(let f=0;f<this._png.channels;f++)o.data[u+f]=0}break;case wf.PREVIOUS:o.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,n){const o=1<<this._png.depth,a=(c,u)=>{const f=((c+n.yOffset)*this._png.width+n.xOffset+u)*this._png.channels,d=(c*n.width+u)*this._png.channels;return{index:f,frameIndex:d}};switch(n.blendOp){case Y0.SOURCE:for(let c=0;c<n.height;c++)for(let u=0;u<n.width;u++){const{index:f,frameIndex:d}=a(c,u);for(let y=0;y<this._png.channels;y++)t.data[f+y]=n.data[d+y]}break;case Y0.OVER:for(let c=0;c<n.height;c++)for(let u=0;u<n.width;u++){const{index:f,frameIndex:d}=a(c,u);for(let y=0;y<this._png.channels;y++){const w=n.data[d+this._png.channels-1]/o,C=y%(this._png.channels-1)===0?1:n.data[d+y],v=Math.floor(w*C+(1-w)*t.data[f+y]);t.data[f+y]+=v}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==u2.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===J0.NO_INTERLACE)this._png.data=l2({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===J0.ADAM7)this._png.data=hT({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,n=this._frames.at(-1);n?n.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:wf.NONE,blendOp:Y0.SOURCE,data:t}),this._inflator=new o2,this._writingDataChunks=!1}}function jT(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var d2;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(d2||(d2={}));function ET(r,e){return new kT(r,e).decode()}var Jt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Q0(){Jt.console&&typeof Jt.console.log=="function"&&Jt.console.log.apply(Jt.console,arguments)}var Qr={log:Q0,warn:function(r){Jt.console&&(typeof Jt.console.warn=="function"?Jt.console.warn.apply(Jt.console,arguments):Q0.call(null,arguments))},error:function(r){Jt.console&&(typeof Jt.console.error=="function"?Jt.console.error.apply(Jt.console,arguments):Q0(r))}};function X0(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){zc(n.response,e,t)},n.onerror=function(){Qr.error("could not download file")},n.send()}function h2(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Sf(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var zc=Jt.saveAs||((typeof window>"u"?"undefined":qr(window))!=="object"||window!==Jt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=Jt.URL||Jt.webkitURL,o=document.createElement("a");e=e||r.name||"download",o.download=e,o.rel="noopener",typeof r=="string"?(o.href=r,o.origin!==location.origin?h2(o.href)?X0(r,e,t):Sf(o,o.target="_blank"):Sf(o)):(o.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(o.href)},4e4),setTimeout(function(){Sf(o)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(h2(r))X0(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){Sf(n)})}else navigator.msSaveOrOpenBlob((function(o,a){return a===void 0?a={autoBom:!1}:qr(a)!=="object"&&(Qr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o})(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return X0(r,e,t);var o=r.type==="application/octet-stream",a=/constructor/i.test(Jt.HTMLElement)||Jt.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&a)&&(typeof FileReader>"u"?"undefined":qr(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var y=u.result;y=c?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=y:location=y,n=null},u.readAsDataURL(r)}else{var f=Jt.URL||Jt.webkitURL,d=f.createObjectURL(r);n?n.location=d:location.href=d,n=null,setTimeout(function(){f.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Tv(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],n=0;n<t.length;n++){var o=t[n].re,a=t[n].process,c=o.exec(r);c&&(e=a(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),f=this.g.toString(16),d=this.b.toString(16);return u.length==1&&(u="0"+u),f.length==1&&(f="0"+f),d.length==1&&(d="0"+d),"#"+u+f+d}}var Lf=Jt.atob.bind(Jt),f2=Jt.btoa.bind(Jt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Z0(r,e){var t=r[0],n=r[1],o=r[2],a=r[3];t=to(t,n,o,a,e[0],7,-680876936),a=to(a,t,n,o,e[1],12,-389564586),o=to(o,a,t,n,e[2],17,606105819),n=to(n,o,a,t,e[3],22,-1044525330),t=to(t,n,o,a,e[4],7,-176418897),a=to(a,t,n,o,e[5],12,1200080426),o=to(o,a,t,n,e[6],17,-1473231341),n=to(n,o,a,t,e[7],22,-45705983),t=to(t,n,o,a,e[8],7,1770035416),a=to(a,t,n,o,e[9],12,-1958414417),o=to(o,a,t,n,e[10],17,-42063),n=to(n,o,a,t,e[11],22,-1990404162),t=to(t,n,o,a,e[12],7,1804603682),a=to(a,t,n,o,e[13],12,-40341101),o=to(o,a,t,n,e[14],17,-1502002290),t=ro(t,n=to(n,o,a,t,e[15],22,1236535329),o,a,e[1],5,-165796510),a=ro(a,t,n,o,e[6],9,-1069501632),o=ro(o,a,t,n,e[11],14,643717713),n=ro(n,o,a,t,e[0],20,-373897302),t=ro(t,n,o,a,e[5],5,-701558691),a=ro(a,t,n,o,e[10],9,38016083),o=ro(o,a,t,n,e[15],14,-660478335),n=ro(n,o,a,t,e[4],20,-405537848),t=ro(t,n,o,a,e[9],5,568446438),a=ro(a,t,n,o,e[14],9,-1019803690),o=ro(o,a,t,n,e[3],14,-187363961),n=ro(n,o,a,t,e[8],20,1163531501),t=ro(t,n,o,a,e[13],5,-1444681467),a=ro(a,t,n,o,e[2],9,-51403784),o=ro(o,a,t,n,e[7],14,1735328473),t=no(t,n=ro(n,o,a,t,e[12],20,-1926607734),o,a,e[5],4,-378558),a=no(a,t,n,o,e[8],11,-2022574463),o=no(o,a,t,n,e[11],16,1839030562),n=no(n,o,a,t,e[14],23,-35309556),t=no(t,n,o,a,e[1],4,-1530992060),a=no(a,t,n,o,e[4],11,1272893353),o=no(o,a,t,n,e[7],16,-155497632),n=no(n,o,a,t,e[10],23,-1094730640),t=no(t,n,o,a,e[13],4,681279174),a=no(a,t,n,o,e[0],11,-358537222),o=no(o,a,t,n,e[3],16,-722521979),n=no(n,o,a,t,e[6],23,76029189),t=no(t,n,o,a,e[9],4,-640364487),a=no(a,t,n,o,e[12],11,-421815835),o=no(o,a,t,n,e[15],16,530742520),t=io(t,n=no(n,o,a,t,e[2],23,-995338651),o,a,e[0],6,-198630844),a=io(a,t,n,o,e[7],10,1126891415),o=io(o,a,t,n,e[14],15,-1416354905),n=io(n,o,a,t,e[5],21,-57434055),t=io(t,n,o,a,e[12],6,1700485571),a=io(a,t,n,o,e[3],10,-1894986606),o=io(o,a,t,n,e[10],15,-1051523),n=io(n,o,a,t,e[1],21,-2054922799),t=io(t,n,o,a,e[8],6,1873313359),a=io(a,t,n,o,e[15],10,-30611744),o=io(o,a,t,n,e[6],15,-1560198380),n=io(n,o,a,t,e[13],21,1309151649),t=io(t,n,o,a,e[4],6,-145523070),a=io(a,t,n,o,e[11],10,-1120210379),o=io(o,a,t,n,e[2],15,718787259),n=io(n,o,a,t,e[9],21,-343485551),r[0]=Ql(t,r[0]),r[1]=Ql(n,r[1]),r[2]=Ql(o,r[2]),r[3]=Ql(a,r[3])}function _p(r,e,t,n,o,a){return e=Ql(Ql(e,r),Ql(n,a)),Ql(e<<o|e>>>32-o,t)}function to(r,e,t,n,o,a,c){return _p(e&t|~e&n,r,e,o,a,c)}function ro(r,e,t,n,o,a,c){return _p(e&n|t&~n,r,e,o,a,c)}function no(r,e,t,n,o,a,c){return _p(e^t^n,r,e,o,a,c)}function io(r,e,t,n,o,a,c){return _p(t^(e|~n),r,e,o,a,c)}function Cv(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)Z0(n,IT(r.substring(e-64,e)));r=r.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)o[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(Z0(n,o),e=0;e<16;e++)o[e]=0;return o[14]=8*t,Z0(n,o),n}function IT(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}var p2="0123456789abcdef".split("");function RT(r){for(var e="",t=0;t<4;t++)e+=p2[r>>8*t+4&15]+p2[r>>8*t&15];return e}function PT(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function jm(r){return Cv(r).map(PT).join("")}var NT=(function(r){for(var e=0;e<r.length;e++)r[e]=RT(r[e]);return r.join("")})(Cv("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ql(r,e){if(NT){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Em(r,e){var t,n,o,a;if(r!==t){for(var c=(o=r,a=1+(256/r.length|0),new Array(a+1).join(o)),u=[],f=0;f<256;f++)u[f]=f;var d=0;for(f=0;f<256;f++){var y=u[f];d=(d+y+c.charCodeAt(f))%256,u[f]=u[d],u[d]=y}t=r,n=u}else u=n;var w=e.length,C=0,v=0,B="";for(f=0;f<w;f++)v=(v+(y=u[C=(C+1)%256]))%256,u[C]=u[v],u[v]=y,c=u[(u[C]+u[v])%256],B+=String.fromCharCode(e.charCodeAt(f)^c);return B}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var m2={print:4,modify:8,copy:16,"annot-forms":32};function Nu(r,e,t,n){this.v=1,this.r=2;var o=192;r.forEach(function(u){if(m2.perm!==void 0)throw new Error("Invalid permission: "+u);o+=m2[u]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),c=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,c),this.P=-(1+(255^o)),this.encryptionKey=jm(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Em(this.encryptionKey,this.padding)}function Bu(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var o=r.charCodeAt(n);e+=o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?"#"+("0"+o.toString(16)).slice(-2):r[n]}return e}function g2(r){if(qr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,o){if(o=o||!1,typeof t!="string"||typeof n!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[n,!!o],a},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),o=[];for(var a in e[t]){var c=e[t][a];try{c[0].apply(r,n)}catch(u){Jt.console&&Qr.error("jsPDF PubSub Error",u.message,u)}c[1]&&o.push(a)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function tp(r){if(!(this instanceof tp))return new tp(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function Av(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function Vc(r,e,t,n,o){if(!(this instanceof Vc))return new Vc(r,e,t,n,o);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,Av.call(this,n,o)}function Vu(r,e,t,n,o){if(!(this instanceof Vu))return new Vu(r,e,t,n,o);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Av.call(this,n,o)}function Tt(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],o=arguments[2],a=arguments[3],c=[],u=1,f=16,d="S",y=null;qr(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,o=r.format||o,a=r.compress||r.compressPdf||a,(y=r.encryption||null)!==null&&(y.userPassword=y.userPassword||"",y.ownerPassword=y.ownerPassword||"",y.userPermissions=y.userPermissions||[]),u=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(f=r.floatPrecision),d=r.defaultPathOperation||"S"),c=r.filters||(a===!0?["FlateEncode"]:c),n=n||"mm",t=(""+(t||"P")).toLowerCase();var w=r.putOnlyUsedFonts||!1,C={},v={internal:{},__private__:{}};v.__private__.PubSub=g2;var B="1.3",I=v.__private__.getPdfVersion=function(){return B};v.__private__.setPdfVersion=function(S){B=S};var z={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return z};var A=v.__private__.getPageFormat=function(S){return z[S]};o=o||"a4";var M="compat",U="advanced",F=M;function se(){this.saveGraphicsState(),de(new jt(kt,0,0,-kt,0,gi()*kt).toString()+" cm"),this.setFontSize(this.getFontSize()/kt),d="n",F=U}function ue(){this.restoreGraphicsState(),d="S",F=M}var L=v.__private__.combineFontStyleAndFontWeight=function(S,H){if(S=="bold"&&H=="normal"||S=="bold"&&H==400||S=="normal"&&H=="italic"||S=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(S=H==400||H==="normal"?S==="italic"?"italic":"normal":H!=700&&H!=="bold"||S!=="normal"?(H==700?"bold":H)+""+S:"bold"),S};v.advancedAPI=function(S){var H=F===M;return H&&se.call(this),typeof S!="function"||(S(this),H&&ue.call(this)),this},v.compatAPI=function(S){var H=F===U;return H&&ue.call(this),typeof S!="function"||(S(this),H&&se.call(this)),this},v.isAdvancedAPI=function(){return F===U};var j,T=function(S){if(F!==U)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=v.roundToPrecision=v.__private__.roundToPrecision=function(S,H){var ce=e||H;if(isNaN(S)||isNaN(ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(ce).replace(/0+$/,"")};j=v.hpf=v.__private__.hpf=typeof f=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return V(S,f)}:f==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return V(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return V(S,16)};var k=v.f2=v.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return V(S,2)},b=v.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return V(S,3)},N=v.scale=v.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return F===M?S*kt:F===U?S:void 0},D=function(S){return N((function(H){return F===M?gi()-H:F===U?H:void 0})(S))};v.__private__.setPrecision=v.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(e=parseInt(S,10))};var q,ie="00000000000000000000000000000000",oe=v.__private__.getFileId=function(){return ie},ne=v.__private__.setFileId=function(S){return ie=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():ie.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),y!==null&&(zr=new Nu(y.userPermissions,y.userPassword,y.ownerPassword,ie)),ie};v.setFileId=function(S){return ne(S),this},v.getFileId=function(){return oe()};var ve=v.__private__.convertDateToPDFDate=function(S){var H=S.getTimezoneOffset(),ce=H<0?"+":"-",ye=Math.floor(Math.abs(H/60)),Ae=Math.abs(H%60),Me=[ce,re(ye),"'",re(Ae),"'"].join("");return["D:",S.getFullYear(),re(S.getMonth()+1),re(S.getDate()),re(S.getHours()),re(S.getMinutes()),re(S.getSeconds()),Me].join("")},be=v.__private__.convertPDFDateToDate=function(S){var H=parseInt(S.substr(2,4),10),ce=parseInt(S.substr(6,2),10)-1,ye=parseInt(S.substr(8,2),10),Ae=parseInt(S.substr(10,2),10),Me=parseInt(S.substr(12,2),10),He=parseInt(S.substr(14,2),10);return new Date(H,ce,ye,Ae,Me,He,0)},Z=v.__private__.setCreationDate=function(S){var H;if(S===void 0&&(S=new Date),S instanceof Date)H=ve(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=S}return q=H},W=v.__private__.getCreationDate=function(S){var H=q;return S==="jsDate"&&(H=be(q)),H};v.setCreationDate=function(S){return Z(S),this},v.getCreationDate=function(S){return W(S)};var J,re=v.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},he=v.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},ge=0,_e=[],fe=[],xe=0,Pe=[],We=[],Qe=!1,Xe=fe;v.__private__.setCustomOutputDestination=function(S){Qe=!0,Xe=S};var Fe=function(S){Qe||(Xe=S)};v.__private__.resetCustomOutputDestination=function(){Qe=!1,Xe=fe};var de=v.__private__.out=function(S){return S=S.toString(),xe+=S.length+1,Xe.push(S),Xe},Pt=v.__private__.write=function(S){return de(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},At=v.__private__.getArrayBuffer=function(S){for(var H=S.length,ce=new ArrayBuffer(H),ye=new Uint8Array(ce);H--;)ye[H]=S.charCodeAt(H);return ce},vt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return vt};var qe=r.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(S){return qe=F===U?S/kt:S,this};var nt,tt=v.__private__.getFontSize=v.getFontSize=function(){return F===M?qe:qe*kt},Gt=r.R2L||!1;v.__private__.setR2L=v.setR2L=function(S){return Gt=S,this},v.__private__.getR2L=v.getR2L=function(){return Gt};var wt,hr=v.__private__.setZoomMode=function(S){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))nt=S;else if(isNaN(S)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');nt=S}else nt=parseInt(S,10)};v.__private__.getZoomMode=function(){return nt};var Nt,Wt=v.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');wt=S};v.__private__.getPageMode=function(){return wt};var yr=v.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');Nt=S};v.__private__.getLayoutMode=function(){return Nt},v.__private__.setDisplayMode=v.setDisplayMode=function(S,H,ce){return hr(S),yr(H),Wt(ce),this};var Ft={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(S){if(Object.keys(Ft).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ft[S]},v.__private__.getDocumentProperties=function(){return Ft},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(S){for(var H in Ft)Ft.hasOwnProperty(H)&&S[H]&&(Ft[H]=S[H]);return this},v.__private__.setDocumentProperty=function(S,H){if(Object.keys(Ft).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ft[S]=H};var St,kt,ft,Ar,rr,dt={},$t={},ir=[],Ct={},Xt={},Vt={},kr={},Lr=null,Mt=0,zt=[],or=new g2(v),Di=r.hotfixes||[],Rn={},_o={},Pn=[],jt=function S(H,ce,ye,Ae,Me,He){if(!(this instanceof S))return new S(H,ce,ye,Ae,Me,He);isNaN(H)&&(H=1),isNaN(ce)&&(ce=0),isNaN(ye)&&(ye=0),isNaN(Ae)&&(Ae=1),isNaN(Me)&&(Me=0),isNaN(He)&&(He=0),this._matrix=[H,ce,ye,Ae,Me,He]};Object.defineProperty(jt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(jt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(jt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(jt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(jt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(jt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(jt.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(jt.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(jt.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(jt.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(jt.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(jt.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(jt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(jt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(jt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(jt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),jt.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(j).join(S)},jt.prototype.multiply=function(S){var H=S.sx*this.sx+S.shy*this.shx,ce=S.sx*this.shy+S.shy*this.sy,ye=S.shx*this.sx+S.sy*this.shx,Ae=S.shx*this.shy+S.sy*this.sy,Me=S.tx*this.sx+S.ty*this.shx+this.tx,He=S.tx*this.shy+S.ty*this.sy+this.ty;return new jt(H,ce,ye,Ae,Me,He)},jt.prototype.decompose=function(){var S=this.sx,H=this.shy,ce=this.shx,ye=this.sy,Ae=this.tx,Me=this.ty,He=Math.sqrt(S*S+H*H),st=(S/=He)*ce+(H/=He)*ye;ce-=S*st,ye-=H*st;var pt=Math.sqrt(ce*ce+ye*ye);return st/=pt,S*(ye/=pt)<H*(ce/=pt)&&(S=-S,H=-H,st=-st,He=-He),{scale:new jt(He,0,0,pt,0,0),translate:new jt(1,0,0,1,Ae,Me),rotate:new jt(S,H,-H,S,0,0),skew:new jt(1,0,st,1,0,0)}},jt.prototype.toString=function(S){return this.join(" ")},jt.prototype.inversed=function(){var S=this.sx,H=this.shy,ce=this.shx,ye=this.sy,Ae=this.tx,Me=this.ty,He=1/(S*ye-H*ce),st=ye*He,pt=-H*He,Rt=-ce*He,yt=S*He;return new jt(st,pt,Rt,yt,-st*Ae-Rt*Me,-pt*Ae-yt*Me)},jt.prototype.applyToPoint=function(S){var H=S.x*this.sx+S.y*this.shx+this.tx,ce=S.x*this.shy+S.y*this.sy+this.ty;return new mi(H,ce)},jt.prototype.applyToRectangle=function(S){var H=this.applyToPoint(S),ce=this.applyToPoint(new mi(S.x+S.w,S.y+S.h));return new ys(H.x,H.y,ce.x-H.x,ce.y-H.y)},jt.prototype.clone=function(){var S=this.sx,H=this.shy,ce=this.shx,ye=this.sy,Ae=this.tx,Me=this.ty;return new jt(S,H,ce,ye,Ae,Me)},v.Matrix=jt;var ki=v.matrixMult=function(S,H){return H.multiply(S)},ci=new jt(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=ci;var Nn=function(S,H){if(!Xt[S]){var ce=(H instanceof Vc?"Sh":"P")+(Object.keys(Ct).length+1).toString(10);H.id=ce,Xt[S]=ce,Ct[ce]=H,or.publish("addPattern",H)}};v.ShadingPattern=Vc,v.TilingPattern=Vu,v.addShadingPattern=function(S,H){return T("addShadingPattern()"),Nn(S,H),this},v.beginTilingPattern=function(S){T("beginTilingPattern()"),ni(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},v.endTilingPattern=function(S,H){T("endTilingPattern()"),H.stream=We[J].join(`
`),Nn(S,H),or.publish("endTilingPattern",H),Pn.pop().restore()};var ji,Tr=v.__private__.newObject=function(){var S=Fr();return an(S,!0),S},Fr=v.__private__.newObjectDeferred=function(){return ge++,_e[ge]=function(){return xe},ge},an=function(S,H){return H=typeof H=="boolean"&&H,_e[S]=xe,H&&de(S+" 0 obj"),S},qn=v.__private__.newAdditionalObject=function(){var S={objId:Fr(),content:""};return Pe.push(S),S},$o=Fr(),Wi=Fr(),$i=v.__private__.decodeColorString=function(S){var H=S.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length!==5||H[4]!=="k"&&H[4]!=="K"||(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var ce=parseFloat(H[0]);H=[ce,ce,ce,"r"]}for(var ye="#",Ae=0;Ae<3;Ae++)ye+=("0"+Math.floor(255*parseFloat(H[Ae])).toString(16)).slice(-2);return ye},mn=v.__private__.encodeColorString=function(S){var H;typeof S=="string"&&(S={ch1:S});var ce=S.ch1,ye=S.ch2,Ae=S.ch3,Me=S.ch4,He=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ce=="string"&&ce.charAt(0)!=="#"){var st=new Tv(ce);if(st.ok)ce=st.toHex();else if(!/^\d*\.?\d*$/.test(ce))throw new Error('Invalid color "'+ce+'" passed to jsPDF.encodeColorString.')}if(typeof ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ce)&&(ce="#"+ce[1]+ce[1]+ce[2]+ce[2]+ce[3]+ce[3]),typeof ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ce)){var pt=parseInt(ce.substr(1),16);ce=pt>>16&255,ye=pt>>8&255,Ae=255&pt}if(ye===void 0||Me===void 0&&ce===ye&&ye===Ae)H=typeof ce=="string"?ce+" "+He[0]:S.precision===2?k(ce/255)+" "+He[0]:b(ce/255)+" "+He[0];else if(Me===void 0||qr(Me)==="object"){if(Me&&!isNaN(Me.a)&&Me.a===0)return["1.","1.","1.",He[1]].join(" ");H=typeof ce=="string"?[ce,ye,Ae,He[1]].join(" "):S.precision===2?[k(ce/255),k(ye/255),k(Ae/255),He[1]].join(" "):[b(ce/255),b(ye/255),b(Ae/255),He[1]].join(" ")}else H=typeof ce=="string"?[ce,ye,Ae,Me,He[2]].join(" "):S.precision===2?[k(ce),k(ye),k(Ae),k(Me),He[2]].join(" "):[b(ce),b(ye),b(Ae),b(Me),He[2]].join(" ");return H},Ei=v.__private__.getFilters=function(){return c},Ii=v.__private__.putStream=function(S){var H=(S=S||{}).data||"",ce=S.filters||Ei(),ye=S.alreadyAppliedFilters||[],Ae=S.addLength1||!1,Me=H.length,He=S.objectId,st=function(R){return R};if(y!==null&&He===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");y!==null&&(st=zr.encryptor(He,0));var pt={};ce===!0&&(ce=["FlateEncode"]);var Rt=S.additionalKeyValues||[],yt=(pt=Tt.API.processDataByFilters!==void 0?Tt.API.processDataByFilters(H,ce):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(ye)?ye.join(" "):ye.toString());if(pt.data.length!==0&&(Rt.push({key:"Length",value:pt.data.length}),Ae===!0&&Rt.push({key:"Length1",value:Me})),yt.length!=0)if(yt.split("/").length-1==1)Rt.push({key:"Filter",value:yt});else{Rt.push({key:"Filter",value:"["+yt+"]"});for(var fr=0;fr<Rt.length;fr+=1)if(Rt[fr].key==="DecodeParms"){for(var Hr=[],Or=0;Or<pt.reverseChain.split("/").length-1;Or+=1)Hr.push("null");Hr.push(Rt[fr].value),Rt[fr].value="["+Hr.join(" ")+"]"}}de("<<");for(var m=0;m<Rt.length;m++)de("/"+Rt[m].key+" "+Rt[m].value);de(">>"),pt.data.length!==0&&(de("stream"),de(st(pt.data)),de("endstream"))},ds=v.__private__.putPage=function(S){var H=S.number,ce=S.data,ye=S.objId,Ae=S.contentsObjId;an(ye,!0),de("<</Type /Page"),de("/Parent "+S.rootDictionaryObjId+" 0 R"),de("/Resources "+S.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(j(S.mediaBox.bottomLeftX))+" "+parseFloat(j(S.mediaBox.bottomLeftY))+" "+j(S.mediaBox.topRightX)+" "+j(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&de("/CropBox ["+j(S.cropBox.bottomLeftX)+" "+j(S.cropBox.bottomLeftY)+" "+j(S.cropBox.topRightX)+" "+j(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&de("/BleedBox ["+j(S.bleedBox.bottomLeftX)+" "+j(S.bleedBox.bottomLeftY)+" "+j(S.bleedBox.topRightX)+" "+j(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&de("/TrimBox ["+j(S.trimBox.bottomLeftX)+" "+j(S.trimBox.bottomLeftY)+" "+j(S.trimBox.topRightX)+" "+j(S.trimBox.topRightY)+"]"),S.artBox!==null&&de("/ArtBox ["+j(S.artBox.bottomLeftX)+" "+j(S.artBox.bottomLeftY)+" "+j(S.artBox.topRightX)+" "+j(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&de("/UserUnit "+S.userUnit),or.publish("putPage",{objId:ye,pageContext:zt[H],pageNumber:H,page:ce}),de("/Contents "+Ae+" 0 R"),de(">>"),de("endobj");var Me=ce.join(`
`);return F===U&&(Me+=`
Q`),an(Ae,!0),Ii({data:Me,filters:Ei(),objectId:Ae}),de("endobj"),ye},co=v.__private__.putPages=function(){var S,H,ce=[];for(S=1;S<=Mt;S++)zt[S].objId=Fr(),zt[S].contentsObjId=Fr();for(S=1;S<=Mt;S++)ce.push(ds({number:S,data:We[S],objId:zt[S].objId,contentsObjId:zt[S].contentsObjId,mediaBox:zt[S].mediaBox,cropBox:zt[S].cropBox,bleedBox:zt[S].bleedBox,trimBox:zt[S].trimBox,artBox:zt[S].artBox,userUnit:zt[S].userUnit,rootDictionaryObjId:$o,resourceDictionaryObjId:Wi}));an($o,!0),de("<</Type /Pages");var ye="/Kids [";for(H=0;H<Mt;H++)ye+=ce[H]+" 0 R ";de(ye+"]"),de("/Count "+Mt),de(">>"),de("endobj"),or.publish("postPutPages")},uo=function(S){or.publish("putFont",{font:S,out:de,newObject:Tr,putStream:Ii}),S.isAlreadyPutted!==!0&&(S.objectNumber=Tr(),de("<<"),de("/Type /Font"),de("/BaseFont /"+Bu(S.postScriptName)),de("/Subtype /Type1"),typeof S.encoding=="string"&&de("/Encoding /"+S.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},hs=function(S){S.objectNumber=Tr();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[j(S.x),j(S.y),j(S.x+S.width),j(S.y+S.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var ce=S.pages[1].join(`
`);Ii({data:ce,additionalKeyValues:H,objectId:S.objectNumber}),de("endobj")},Uo=function(S,H){H||(H=21);var ce=Tr(),ye=(function(He,st){var pt,Rt=[],yt=1/(st-1);for(pt=0;pt<1;pt+=yt)Rt.push(pt);if(Rt.push(1),He[0].offset!=0){var fr={offset:0,color:He[0].color};He.unshift(fr)}if(He[He.length-1].offset!=1){var Hr={offset:1,color:He[He.length-1].color};He.push(Hr)}for(var Or="",m=0,R=0;R<Rt.length;R++){for(pt=Rt[R];pt>He[m+1].offset;)m++;var $=He[m].offset,ee=(pt-$)/(He[m+1].offset-$),ke=He[m].color,Ne=He[m+1].color;Or+=he(Math.round((1-ee)*ke[0]+ee*Ne[0]).toString(16))+he(Math.round((1-ee)*ke[1]+ee*Ne[1]).toString(16))+he(Math.round((1-ee)*ke[2]+ee*Ne[2]).toString(16))}return Or.trim()})(S.colors,H),Ae=[];Ae.push({key:"FunctionType",value:"0"}),Ae.push({key:"Domain",value:"[0.0 1.0]"}),Ae.push({key:"Size",value:"["+H+"]"}),Ae.push({key:"BitsPerSample",value:"8"}),Ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ii({data:ye,additionalKeyValues:Ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ce}),de("endobj"),S.objectNumber=Tr(),de("<< /ShadingType "+S.type),de("/ColorSpace /DeviceRGB");var Me="/Coords ["+j(parseFloat(S.coords[0]))+" "+j(parseFloat(S.coords[1]))+" ";S.type===2?Me+=j(parseFloat(S.coords[2]))+" "+j(parseFloat(S.coords[3])):Me+=j(parseFloat(S.coords[2]))+" "+j(parseFloat(S.coords[3]))+" "+j(parseFloat(S.coords[4]))+" "+j(parseFloat(S.coords[5])),de(Me+="]"),S.matrix&&de("/Matrix ["+S.matrix.toString()+"]"),de("/Function "+ce+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},To=function(S,H){var ce=Fr(),ye=Tr();H.push({resourcesOid:ce,objectOid:ye}),S.objectNumber=ye;var Ae=[];Ae.push({key:"Type",value:"/Pattern"}),Ae.push({key:"PatternType",value:"1"}),Ae.push({key:"PaintType",value:"1"}),Ae.push({key:"TilingType",value:"1"}),Ae.push({key:"BBox",value:"["+S.boundingBox.map(j).join(" ")+"]"}),Ae.push({key:"XStep",value:j(S.xStep)}),Ae.push({key:"YStep",value:j(S.yStep)}),Ae.push({key:"Resources",value:ce+" 0 R"}),S.matrix&&Ae.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),Ii({data:S.stream,additionalKeyValues:Ae,objectId:S.objectNumber}),de("endobj")},qo=function(S){for(var H in S.objectNumber=Tr(),de("<<"),S)switch(H){case"opacity":de("/ca "+k(S[H]));break;case"stroke-opacity":de("/CA "+k(S[H]))}de(">>"),de("endobj")},jr=function(S){an(S.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var H in de("/Font <<"),dt)dt.hasOwnProperty(H)&&(w===!1||w===!0&&C.hasOwnProperty(H))&&de("/"+H+" "+dt[H].objectNumber+" 0 R");de(">>")})(),(function(){if(Object.keys(Ct).length>0){for(var H in de("/Shading <<"),Ct)Ct.hasOwnProperty(H)&&Ct[H]instanceof Vc&&Ct[H].objectNumber>=0&&de("/"+H+" "+Ct[H].objectNumber+" 0 R");or.publish("putShadingPatternDict"),de(">>")}})(),(function(H){if(Object.keys(Ct).length>0){for(var ce in de("/Pattern <<"),Ct)Ct.hasOwnProperty(ce)&&Ct[ce]instanceof v.TilingPattern&&Ct[ce].objectNumber>=0&&Ct[ce].objectNumber<H&&de("/"+ce+" "+Ct[ce].objectNumber+" 0 R");or.publish("putTilingPatternDict"),de(">>")}})(S.objectOid),(function(){if(Object.keys(Vt).length>0){var H;for(H in de("/ExtGState <<"),Vt)Vt.hasOwnProperty(H)&&Vt[H].objectNumber>=0&&de("/"+H+" "+Vt[H].objectNumber+" 0 R");or.publish("putGStateDict"),de(">>")}})(),(function(){for(var H in de("/XObject <<"),Rn)Rn.hasOwnProperty(H)&&Rn[H].objectNumber>=0&&de("/"+H+" "+Rn[H].objectNumber+" 0 R");or.publish("putXobjectDict"),de(">>")})(),de(">>"),de("endobj")},vl=function(S){$t[S.fontName]=$t[S.fontName]||{},$t[S.fontName][S.fontStyle]=S.id},Ns=function(S,H,ce,ye,Ae){var Me={id:"F"+(Object.keys(dt).length+1).toString(10),postScriptName:S,fontName:H,fontStyle:ce,encoding:ye,isStandardFont:Ae||!1,metadata:{}};return or.publish("addFont",{font:Me,instance:this}),dt[Me.id]=Me,vl(Me),Me.id},ui=v.__private__.pdfEscape=v.pdfEscape=function(S,H){return(function(ce,ye){var Ae,Me,He,st,pt,Rt,yt,fr,Hr;if(He=(ye=ye||{}).sourceEncoding||"Unicode",pt=ye.outputEncoding,(ye.autoencode||pt)&&dt[St].metadata&&dt[St].metadata[He]&&dt[St].metadata[He].encoding&&(st=dt[St].metadata[He].encoding,!pt&&dt[St].encoding&&(pt=dt[St].encoding),!pt&&st.codePages&&(pt=st.codePages[0]),typeof pt=="string"&&(pt=st[pt]),pt)){for(yt=!1,Rt=[],Ae=0,Me=ce.length;Ae<Me;Ae++)(fr=pt[ce.charCodeAt(Ae)])?Rt.push(String.fromCharCode(fr)):Rt.push(ce[Ae]),Rt[Ae].charCodeAt(0)>>8&&(yt=!0);ce=Rt.join("")}for(Ae=ce.length;yt===void 0&&Ae!==0;)ce.charCodeAt(Ae-1)>>8&&(yt=!0),Ae--;if(!yt)return ce;for(Rt=ye.noBOM?[]:[254,255],Ae=0,Me=ce.length;Ae<Me;Ae++){if((Hr=(fr=ce.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+ce+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Rt.push(Hr),Rt.push(fr-(Hr<<8))}return String.fromCharCode.apply(void 0,Rt)})(S,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ho=v.__private__.beginPage=function(S){We[++Mt]=[],zt[Mt]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},ps(Mt),Fe(We[J])},ca=function(S,H){var ce,ye,Ae;switch(t=H||t,typeof S=="string"&&(ce=A(S.toLowerCase()),Array.isArray(ce)&&(ye=ce[0],Ae=ce[1])),Array.isArray(S)&&(ye=S[0]*kt,Ae=S[1]*kt),isNaN(ye)&&(ye=o[0],Ae=o[1]),(ye>14400||Ae>14400)&&(Qr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ye=Math.min(14400,ye),Ae=Math.min(14400,Ae)),o=[ye,Ae],t.substr(0,1)){case"l":Ae>ye&&(o=[Ae,ye]);break;case"p":ye>Ae&&(o=[Ae,ye])}Ho(o),Go(gn),de(Os),Hi!==0&&de(Hi+" J"),fa!==0&&de(fa+" j"),or.publish("addPage",{pageNumber:Mt})},fs=function(S){S>0&&S<=Mt&&(We.splice(S,1),zt.splice(S,1),Mt--,J>Mt&&(J=Mt),this.setPage(J))},ps=function(S){S>0&&S<=Mt&&(J=S)},di=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return We.length-1},Oa=function(S,H,ce){var ye,Ae=void 0;return ce=ce||{},S=S!==void 0?S:dt[St].fontName,H=H!==void 0?H:dt[St].fontStyle,ye=S.toLowerCase(),$t[ye]!==void 0&&$t[ye][H]!==void 0?Ae=$t[ye][H]:$t[S]!==void 0&&$t[S][H]!==void 0?Ae=$t[S][H]:ce.disableWarning===!1&&Qr.warn("Unable to look up font label for font '"+S+"', '"+H+"'. Refer to getFontList() for available fonts."),Ae||ce.noFallback||(Ae=$t.times[H])==null&&(Ae=$t.times.normal),Ae},Hn=v.__private__.putInfo=function(){var S=Tr(),H=function(ye){return ye};for(var ce in y!==null&&(H=zr.encryptor(S,0)),de("<<"),de("/Producer ("+ui(H("jsPDF "+Tt.version))+")"),Ft)Ft.hasOwnProperty(ce)&&Ft[ce]&&de("/"+ce.substr(0,1).toUpperCase()+ce.substr(1)+" ("+ui(H(Ft[ce]))+")");de("/CreationDate ("+ui(H(q))+")"),de(">>"),de("endobj")},Co=v.__private__.putCatalog=function(S){var H=(S=S||{}).rootDictionaryObjId||$o;switch(Tr(),de("<<"),de("/Type /Catalog"),de("/Pages "+H+" 0 R"),nt||(nt="fullwidth"),nt){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ce=""+nt;ce.substr(ce.length-1)==="%"&&(nt=parseInt(nt)/100),typeof nt=="number"&&de("/OpenAction [3 0 R /XYZ null null "+k(nt)+"]")}switch(Nt||(Nt="continuous"),Nt){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}wt&&de("/PageMode /"+wt),or.publish("putCatalog"),de(">>"),de("endobj")},vr=v.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(ge+1)),de("/Root "+ge+" 0 R"),de("/Info "+(ge-1)+" 0 R"),y!==null&&de("/Encrypt "+zr.oid+" 0 R"),de("/ID [ <"+ie+"> <"+ie+"> ]"),de(">>")},ms=v.__private__.putHeader=function(){de("%PDF-"+B),de("%ºß¬à")},ho=v.__private__.putXRef=function(){var S="0000000000";de("xref"),de("0 "+(ge+1)),de("0000000000 65535 f ");for(var H=1;H<=ge;H++)typeof _e[H]=="function"?de((S+_e[H]()).slice(-10)+" 00000 n "):_e[H]!==void 0?de((S+_e[H]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},hi=v.__private__.buildDocument=function(){var S;ge=0,xe=0,fe=[],_e=[],Pe=[],$o=Fr(),Wi=Fr(),Fe(fe),or.publish("buildDocument"),ms(),co(),(function(){or.publish("putAdditionalObjects");for(var ce=0;ce<Pe.length;ce++){var ye=Pe[ce];an(ye.objId,!0),de(ye.content),de("endobj")}or.publish("postPutAdditionalObjects")})(),S=[],(function(){for(var ce in dt)dt.hasOwnProperty(ce)&&(w===!1||w===!0&&C.hasOwnProperty(ce))&&uo(dt[ce])})(),(function(){var ce;for(ce in Vt)Vt.hasOwnProperty(ce)&&qo(Vt[ce])})(),(function(){for(var ce in Rn)Rn.hasOwnProperty(ce)&&hs(Rn[ce])})(),(function(ce){var ye;for(ye in Ct)Ct.hasOwnProperty(ye)&&(Ct[ye]instanceof Vc?Uo(Ct[ye]):Ct[ye]instanceof Vu&&To(Ct[ye],ce))})(S),or.publish("putResources"),S.forEach(jr),jr({resourcesOid:Wi,objectOid:Number.MAX_SAFE_INTEGER}),or.publish("postPutResources"),y!==null&&(zr.oid=Tr(),de("<<"),de("/Filter /Standard"),de("/V "+zr.v),de("/R "+zr.r),de("/U <"+zr.toHexString(zr.U)+">"),de("/O <"+zr.toHexString(zr.O)+">"),de("/P "+zr.P),de(">>"),de("endobj")),Hn(),Co();var H=xe;return ho(),vr(),de("startxref"),de(""+H),de("%%EOF"),Fe(We[J]),fe.join(`
`)},sr=v.__private__.getBlob=function(S){return new Blob([At(S)],{type:"application/pdf"})},Bn=v.output=v.__private__.output=(ji=function(S,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",S){case void 0:return hi();case"save":v.save(H.filename);break;case"arraybuffer":return At(hi());case"blob":return sr(hi());case"bloburi":case"bloburl":if(Jt.URL!==void 0&&typeof Jt.URL.createObjectURL=="function")return Jt.URL&&Jt.URL.createObjectURL(sr(hi()))||void 0;Qr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ce="",ye=hi();try{ce=f2(ye)}catch{ce=f2(unescape(encodeURIComponent(ye)))}return"data:application/pdf;filename="+H.filename+";base64,"+ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Jt)==="[object Window]"){var Ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Me=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(Ae=H.pdfObjectUrl,Me="");var He='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ae+'"'+Me+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",st=Jt.open();return st!==null&&st.document.write(He),st}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Jt)==="[object Window]"){var pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',Rt=Jt.open();if(Rt!==null){Rt.document.write(pt);var yt=this;Rt.document.documentElement.querySelector("#pdfViewer").onload=function(){Rt.document.title=H.filename,Rt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(yt.output("bloburl"))}}return Rt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Jt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var fr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',Hr=Jt.open();if(Hr!==null&&(Hr.document.write(fr),Hr.document.title=H.filename),Hr||typeof safari>"u")return Hr;break;case"datauri":case"dataurl":return Jt.document.location.href=this.output("datauristring",H);default:return null}},ji.foo=function(){try{return ji.apply(this,arguments)}catch(ce){var S=ce.stack||"";~S.indexOf(" at ")&&(S=S.split(" at ")[1]);var H="Error in function "+S.split(`
`)[0].split("<")[0]+": "+ce.message;if(!Jt.console)throw new Error(H);Jt.console.error(H,ce),Jt.alert&&alert(H)}},ji.foo.bar=ji,ji.foo),fo=function(S){return Array.isArray(Di)===!0&&Di.indexOf(S)>-1};switch(n){case"pt":kt=1;break;case"mm":kt=72/25.4;break;case"cm":kt=72/2.54;break;case"in":kt=72;break;case"px":kt=fo("px_scaling")==1?.75:96/72;break;case"pc":case"em":kt=12;break;case"ex":kt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);kt=n}var zr=null;Z(),ne();var Bs=v.__private__.getPageInfo=v.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:zt[S].objId,pageNumber:S,pageContext:zt[S]}},Va=v.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in zt)if(zt[H].objId===S)break;return Bs(H)},Ma=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:zt[J].objId,pageNumber:J,pageContext:zt[J]}};v.addPage=function(){return ca.apply(this,arguments),this},v.setPage=function(){return ps.apply(this,arguments),Fe.call(this,We[J]),this},v.insertPage=function(S){return this.addPage(),this.movePage(J,S),this},v.movePage=function(S,H){var ce,ye;if(S>H){ce=We[S],ye=zt[S];for(var Ae=S;Ae>H;Ae--)We[Ae]=We[Ae-1],zt[Ae]=zt[Ae-1];We[H]=ce,zt[H]=ye,this.setPage(H)}else if(S<H){ce=We[S],ye=zt[S];for(var Me=S;Me<H;Me++)We[Me]=We[Me+1],zt[Me]=zt[Me+1];We[H]=ce,zt[H]=ye,this.setPage(H)}return this},v.deletePage=function(){return fs.apply(this,arguments),this},v.__private__.text=v.text=function(S,H,ce,ye,Ae){var Me,He,st,pt,Rt,yt,fr,Hr,Or,m=(ye=ye||{}).scope||this;if(typeof S=="number"&&typeof H=="number"&&(typeof ce=="string"||Array.isArray(ce))){var R=ce;ce=H,H=S,S=R}if(arguments[3]instanceof jt==0?(st=arguments[4],pt=arguments[5],qr(fr=arguments[3])==="object"&&fr!==null||(typeof st=="string"&&(pt=st,st=null),typeof fr=="string"&&(pt=fr,fr=null),typeof fr=="number"&&(st=fr,fr=null),ye={flags:fr,angle:st,align:pt})):(T("The transform parameter of text() with a Matrix value"),Or=Ae),isNaN(H)||isNaN(ce)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return m;var $,ee="",ke=typeof ye.lineHeightFactor=="number"?ye.lineHeightFactor:pi,Ne=m.internal.scaleFactor;function et(br){return br=br.split("	").join(Array(ye.TabLen||9).join(" ")),ui(br,fr)}function Ot(br){for(var Rr,un=br.concat(),Cn=[],Zo=un.length;Zo--;)typeof(Rr=un.shift())=="string"?Cn.push(Rr):Array.isArray(br)&&(Rr.length===1||Rr[1]===void 0&&Rr[2]===void 0)?Cn.push(Rr[0]):Cn.push([Rr[0],Rr[1],Rr[2]]);return Cn}function Vr(br,Rr){var un;if(typeof br=="string")un=Rr(br)[0];else if(Array.isArray(br)){for(var Cn,Zo,xc=br.concat(),Cl=[],Us=xc.length;Us--;)typeof(Cn=xc.shift())=="string"?Cl.push(Rr(Cn)[0]):Array.isArray(Cn)&&typeof Cn[0]=="string"&&(Zo=Rr(Cn[0],Cn[1],Cn[2]),Cl.push([Zo[0],Zo[1],Zo[2]]));un=Cl}return un}var lr=!1,Gr=!0;if(typeof S=="string")lr=!0;else if(Array.isArray(S)){var zn=S.concat();He=[];for(var Ni,Jr=zn.length;Jr--;)(typeof(Ni=zn.shift())!="string"||Array.isArray(Ni)&&typeof Ni[0]!="string")&&(Gr=!1);lr=Gr}if(lr===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var yi=qe/m.internal.scaleFactor,Ro=yi*(ke-1);switch(ye.baseline){case"bottom":ce-=Ro;break;case"top":ce+=yi-Ro;break;case"hanging":ce+=yi-2*Ro;break;case"middle":ce+=yi/2-Ro}if((yt=ye.maxWidth||0)>0&&(typeof S=="string"?S=m.splitTextToSize(S,yt):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(br,Rr){return br.concat(m.splitTextToSize(Rr,yt))},[]))),Me={text:S,x:H,y:ce,options:ye,mutex:{pdfEscape:ui,activeFontKey:St,fonts:dt,activeFontSize:qe}},or.publish("preProcessText",Me),S=Me.text,st=(ye=Me.options).angle,Or instanceof jt==0&&st&&typeof st=="number"){st*=Math.PI/180,ye.rotationDirection===0&&(st=-st),F===U&&(st=-st);var Vs=Math.cos(st),yc=Math.sin(st);Or=new jt(Vs,yc,-yc,Vs,0,0)}else st&&st instanceof jt&&(Or=st);F!==U||Or||(Or=ci),(Rt=ye.charSpace||qi)!==void 0&&(ee+=j(N(Rt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Hr=ye.horizontalScale)!==void 0&&(ee+=j(100*Hr)+` Tz
`),ye.lang;var ln=-1,Qo=ye.renderingMode!==void 0?ye.renderingMode:ye.stroke,vs=m.internal.getCurrentPageInfo().pageContext;switch(Qo){case 0:case!1:case"fill":ln=0;break;case 1:case!0:case"stroke":ln=1;break;case 2:case"fillThenStroke":ln=2;break;case 3:case"invisible":ln=3;break;case 4:case"fillAndAddForClipping":ln=4;break;case 5:case"strokeAndAddPathForClipping":ln=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ln=6;break;case 7:case"addToPathForClipping":ln=7}var lu=vs.usedRenderingMode!==void 0?vs.usedRenderingMode:-1;ln!==-1?ee+=ln+` Tr
`:lu!==-1&&(ee+=`0 Tr
`),ln!==-1&&(vs.usedRenderingMode=ln),pt=ye.align||"left";var go,ma=qe*ke,wl=m.internal.pageSize.getWidth(),Sl=dt[St];Rt=ye.charSpace||qi,yt=ye.maxWidth||0,fr=Object.assign({autoencode:!0,noBOM:!0},ye.flags);var Ms=[],Po=function(br){return m.getStringUnitWidth(br,{font:Sl,charSpace:Rt,fontSize:qe,doKerning:!1})*qe/Ne};if(Object.prototype.toString.call(S)==="[object Array]"){var yo;He=Ot(S),pt!=="left"&&(go=He.map(Po));var xo,ga=0;if(pt==="right"){H-=go[0],S=[],Jr=He.length;for(var bs=0;bs<Jr;bs++)bs===0?(xo=Ln(H),yo=jo(ce)):(xo=N(ga-go[bs]),yo=-ma),S.push([He[bs],xo,yo]),ga=go[bs]}else if(pt==="center"){H-=go[0]/2,S=[],Jr=He.length;for(var Ds=0;Ds<Jr;Ds++)Ds===0?(xo=Ln(H),yo=jo(ce)):(xo=N((ga-go[Ds])/2),yo=-ma),S.push([He[Ds],xo,yo]),ga=go[Ds]}else if(pt==="left"){S=[],Jr=He.length;for(var Ws=0;Ws<Jr;Ws++)S.push(He[Ws])}else if(pt==="justify"&&Sl.encoding==="Identity-H"){S=[],Jr=He.length,yt=yt!==0?yt:wl;for(var ws=0,yn=0;yn<Jr;yn++)if(yo=yn===0?jo(ce):-ma,xo=yn===0?Ln(H):ws,yn<Jr-1){var qa=N((yt-go[yn])/(He[yn].split(" ").length-1)),Ss=He[yn].split(" ");S.push([Ss[0]+" ",xo,yo]),ws=0;for(var Xo=1;Xo<Ss.length;Xo++){var Ha=(Po(Ss[Xo-1]+" "+Ss[Xo])-Po(Ss[Xo]))*Ne+qa;Xo==Ss.length-1?S.push([Ss[Xo],Ha,0]):S.push([Ss[Xo]+" ",Ha,0]),ws-=Ha}}else S.push([He[yn],xo,yo]);S.push(["",ws,0])}else{if(pt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],Jr=He.length,yt=yt!==0?yt:wl,yn=0;yn<Jr;yn++){yo=yn===0?jo(ce):-ma,xo=yn===0?Ln(H):0;var Ga=He[yn].split(" ").length-1,_l=Ga>0?(yt-go[yn])/Ga:0;yn<Jr-1?Ms.push(j(N(_l))):Ms.push(0),S.push([He[yn],xo,yo])}}}(typeof ye.R2L=="boolean"?ye.R2L:Gt)===!0&&(S=Vr(S,function(br,Rr,un){return[br.split("").reverse().join(""),Rr,un]})),Me={text:S,x:H,y:ce,options:ye,mutex:{pdfEscape:ui,activeFontKey:St,fonts:dt,activeFontSize:qe}},or.publish("postProcessText",Me),S=Me.text,$=Me.mutex.isHex||!1;var Tl=dt[St].encoding;Tl!=="WinAnsiEncoding"&&Tl!=="StandardEncoding"||(S=Vr(S,function(br,Rr,un){return[et(br),Rr,un]})),He=Ot(S),S=[];for(var $s,ya,xa,Ka=Array.isArray(He[0])?1:0,va="",Ja=function(br,Rr,un){var Cn="";return un instanceof jt?(un=typeof ye.angle=="number"?ki(un,new jt(1,0,0,1,br,Rr)):ki(new jt(1,0,0,1,br,Rr),un),F===U&&(un=ki(new jt(1,0,0,-1,0,0),un)),Cn=un.join(" ")+` Tm
`):Cn=j(br)+" "+j(Rr)+` Td
`,Cn},cn=0;cn<He.length;cn++){switch(va="",Ka){case 1:xa=($?"<":"(")+He[cn][0]+($?">":")"),$s=parseFloat(He[cn][1]),ya=parseFloat(He[cn][2]);break;case 0:xa=($?"<":"(")+He[cn]+($?">":")"),$s=Ln(H),ya=jo(ce)}Ms!==void 0&&Ms[cn]!==void 0&&(va=Ms[cn]+` Tw
`),cn===0?S.push(va+Ja($s,ya,Or)+xa):Ka===0?S.push(va+xa):Ka===1&&S.push(va+Ja($s,ya,Or)+xa)}S=Ka===0?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var Gi=`BT
/`;return Gi+=St+" "+qe+` Tf
`,Gi+=j(qe*ke)+` TL
`,Gi+=Ui+`
`,Gi+=ee,Gi+=S,de(Gi+="ET"),C[St]=!0,m};var Ls=v.__private__.clip=v.clip=function(S){return de(S==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return Ls("evenodd")},v.__private__.discardPath=v.discardPath=function(){return de("n"),this};var Ao=v.__private__.isValidStyle=function(S){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(H=!0),H};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(S){return Ao(S)&&(d=S),this};var ua=v.__private__.getStyle=v.getStyle=function(S){var H=d;switch(S){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=S}return H},nr=v.close=function(){return de("h"),this};v.stroke=function(){return de("S"),this},v.fill=function(S){return ri("f",S),this},v.fillEvenOdd=function(S){return ri("f*",S),this},v.fillStroke=function(S){return ri("B",S),this},v.fillStrokeEvenOdd=function(S){return ri("B*",S),this};var ri=function(S,H){qr(H)==="object"?Da(H,S):de(S)},Fs=function(S){S===null||F===U&&S===void 0||(S=ua(S),de(S))};function da(S,H,ce,ye,Ae){var Me=new Vu(H||this.boundingBox,ce||this.xStep,ye||this.yStep,this.gState,Ae||this.matrix);Me.stream=this.stream;var He=S+"$$"+this.cloneIndex+++"$$";return Nn(He,Me),Me}var Da=function(S,H){var ce=Xt[S.key],ye=Ct[ce];if(ye instanceof Vc)de("q"),de(Wa(H)),ye.gState&&v.setGState(ye.gState),de(S.matrix.toString()+" cm"),de("/"+ce+" sh"),de("Q");else if(ye instanceof Vu){var Ae=new jt(1,0,0,-1,0,gi());S.matrix&&(Ae=Ae.multiply(S.matrix||ci),ce=da.call(ye,S.key,S.boundingBox,S.xStep,S.yStep,Ae).id),de("q"),de("/Pattern cs"),de("/"+ce+" scn"),ye.gState&&v.setGState(ye.gState),de(H),de("Q")}},Wa=function(S){switch(S){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},zs=v.moveTo=function(S,H){return de(j(N(S))+" "+j(D(H))+" m"),this},fi=v.lineTo=function(S,H){return de(j(N(S))+" "+j(D(H))+" l"),this},po=v.curveTo=function(S,H,ce,ye,Ae,Me){return de([j(N(S)),j(D(H)),j(N(ce)),j(D(ye)),j(N(Ae)),j(D(Me)),"c"].join(" ")),this};v.__private__.line=v.line=function(S,H,ce,ye,Ae){if(isNaN(S)||isNaN(H)||isNaN(ce)||isNaN(ye)||!Ao(Ae))throw new Error("Invalid arguments passed to jsPDF.line");return F===M?this.lines([[ce-S,ye-H]],S,H,[1,1],Ae||"S"):this.lines([[ce-S,ye-H]],S,H,[1,1]).stroke()},v.__private__.lines=v.lines=function(S,H,ce,ye,Ae,Me){var He,st,pt,Rt,yt,fr,Hr,Or,m,R,$,ee;if(typeof S=="number"&&(ee=ce,ce=H,H=S,S=ee),ye=ye||[1,1],Me=Me||!1,isNaN(H)||isNaN(ce)||!Array.isArray(S)||!Array.isArray(ye)||!Ao(Ae)||typeof Me!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(zs(H,ce),He=ye[0],st=ye[1],Rt=S.length,R=H,$=ce,pt=0;pt<Rt;pt++)(yt=S[pt]).length===2?(R=yt[0]*He+R,$=yt[1]*st+$,fi(R,$)):(fr=yt[0]*He+R,Hr=yt[1]*st+$,Or=yt[2]*He+R,m=yt[3]*st+$,R=yt[4]*He+R,$=yt[5]*st+$,po(fr,Hr,Or,m,R,$));return Me&&nr(),Fs(Ae),this},v.path=function(S){for(var H=0;H<S.length;H++){var ce=S[H],ye=ce.c;switch(ce.op){case"m":zs(ye[0],ye[1]);break;case"l":fi(ye[0],ye[1]);break;case"c":po.apply(this,ye);break;case"h":nr()}}return this},v.__private__.rect=v.rect=function(S,H,ce,ye,Ae){if(isNaN(S)||isNaN(H)||isNaN(ce)||isNaN(ye)||!Ao(Ae))throw new Error("Invalid arguments passed to jsPDF.rect");return F===M&&(ye=-ye),de([j(N(S)),j(D(H)),j(N(ce)),j(N(ye)),"re"].join(" ")),Fs(Ae),this},v.__private__.triangle=v.triangle=function(S,H,ce,ye,Ae,Me,He){if(isNaN(S)||isNaN(H)||isNaN(ce)||isNaN(ye)||isNaN(Ae)||isNaN(Me)||!Ao(He))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ce-S,ye-H],[Ae-ce,Me-ye],[S-Ae,H-Me]],S,H,[1,1],He,!0),this},v.__private__.roundedRect=v.roundedRect=function(S,H,ce,ye,Ae,Me,He){if(isNaN(S)||isNaN(H)||isNaN(ce)||isNaN(ye)||isNaN(Ae)||isNaN(Me)||!Ao(He))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var st=4/3*(Math.SQRT2-1);return Ae=Math.min(Ae,.5*ce),Me=Math.min(Me,.5*ye),this.lines([[ce-2*Ae,0],[Ae*st,0,Ae,Me-Me*st,Ae,Me],[0,ye-2*Me],[0,Me*st,-Ae*st,Me,-Ae,Me],[2*Ae-ce,0],[-Ae*st,0,-Ae,-Me*st,-Ae,-Me],[0,2*Me-ye],[0,-Me*st,Ae*st,-Me,Ae,-Me]],S+Ae,H,[1,1],He,!0),this},v.__private__.ellipse=v.ellipse=function(S,H,ce,ye,Ae){if(isNaN(S)||isNaN(H)||isNaN(ce)||isNaN(ye)||!Ao(Ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Me=4/3*(Math.SQRT2-1)*ce,He=4/3*(Math.SQRT2-1)*ye;return zs(S+ce,H),po(S+ce,H-He,S+Me,H-ye,S,H-ye),po(S-Me,H-ye,S-ce,H-He,S-ce,H),po(S-ce,H+He,S-Me,H+ye,S,H+ye),po(S+Me,H+ye,S+ce,H+He,S+ce,H),Fs(Ae),this},v.__private__.circle=v.circle=function(S,H,ce,ye){if(isNaN(S)||isNaN(H)||isNaN(ce)||!Ao(ye))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,H,ce,ce,ye)},v.setFont=function(S,H,ce){return ce&&(H=L(H,ce)),St=Oa(S,H,{disableWarning:!1}),this};var ko=v.__private__.getFont=v.getFont=function(){return dt[Oa.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var S,H,ce={};for(S in $t)if($t.hasOwnProperty(S))for(H in ce[S]=[],$t[S])$t[S].hasOwnProperty(H)&&ce[S].push(H);return ce},v.addFont=function(S,H,ce,ye,Ae){var Me=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Me.indexOf(arguments[3])!==-1?Ae=arguments[3]:arguments[3]&&Me.indexOf(arguments[3])==-1&&(ce=L(ce,ye)),Ns.call(this,S,H,ce,Ae=Ae||"Identity-H")};var pi,gn=r.lineWidth||.200025,It=v.__private__.getLineWidth=v.getLineWidth=function(){return gn},Go=v.__private__.setLineWidth=v.setLineWidth=function(S){return gn=S,de(j(N(S))+" w"),this};v.__private__.setLineDash=Tt.API.setLineDash=Tt.API.setLineDashPattern=function(S,H){if(S=S||[],H=H||0,isNaN(H)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(ce){return j(N(ce))}).join(" "),H=j(N(H)),de("["+S+"] "+H+" d"),this};var Ri=v.__private__.getLineHeight=v.getLineHeight=function(){return qe*pi};v.__private__.getLineHeight=v.getLineHeight=function(){return qe*pi};var bl=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(pi=S),this},gs=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return pi};bl(r.lineHeight);var Ln=v.__private__.getHorizontalCoordinate=function(S){return N(S)},jo=v.__private__.getVerticalCoordinate=function(S){return F===U?S:zt[J].mediaBox.topRightY-zt[J].mediaBox.bottomLeftY-N(S)},ha=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(S){return j(Ln(S))},Er=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(S){return j(jo(S))},Os=r.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return $i(Os)},v.__private__.setStrokeColor=v.setDrawColor=function(S,H,ce,ye){return Os=mn({ch1:S,ch2:H,ch3:ce,ch4:ye,pdfColorType:"draw",precision:2}),de(Os),this};var $a=r.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return $i($a)},v.__private__.setFillColor=v.setFillColor=function(S,H,ce,ye){return $a=mn({ch1:S,ch2:H,ch3:ce,ch4:ye,pdfColorType:"fill",precision:2}),de($a),this};var Ui=r.textColor||"0 g",mo=v.__private__.getTextColor=v.getTextColor=function(){return $i(Ui)};v.__private__.setTextColor=v.setTextColor=function(S,H,ce,ye){return Ui=mn({ch1:S,ch2:H,ch3:ce,ch4:ye,pdfColorType:"text",precision:3}),this};var qi=r.charSpace,Ko=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(qi||0)};v.__private__.setCharSpace=v.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return qi=S,this};var Hi=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(S){var H=v.CapJoinStyles[S];if(H===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Hi=H,de(H+" J"),this};var fa=0;v.__private__.setLineJoin=v.setLineJoin=function(S){var H=v.CapJoinStyles[S];if(H===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fa=H,de(H+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(j(N(S))+" M"),this},v.GState=tp,v.setGState=function(S){(S=typeof S=="string"?Vt[kr[S]]:Jo(null,S)).equals(Lr)||(de("/"+S.id+" gs"),Lr=S)};var Jo=function(S,H){if(!S||!kr[S]){var ce=!1;for(var ye in Vt)if(Vt.hasOwnProperty(ye)&&Vt[ye].equals(H)){ce=!0;break}if(ce)H=Vt[ye];else{var Ae="GS"+(Object.keys(Vt).length+1).toString(10);Vt[Ae]=H,H.id=Ae}return S&&(kr[S]=H.id),or.publish("addGState",H),H}};v.addGState=function(S,H){return Jo(S,H),this},v.saveGraphicsState=function(){return de("q"),ir.push({key:St,size:qe,color:Ui}),this},v.restoreGraphicsState=function(){de("Q");var S=ir.pop();return St=S.key,qe=S.size,Ui=S.color,Lr=null,this},v.setCurrentTransformationMatrix=function(S){return de(S.toString()+" cm"),this},v.comment=function(S){return de("#"+S),this};var mi=function(S,H){var ce=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ce},set:function(Me){isNaN(Me)||(ce=parseFloat(Me))}});var ye=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ye},set:function(Me){isNaN(Me)||(ye=parseFloat(Me))}});var Ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ae},set:function(Me){Ae=Me.toString()}}),this},ys=function(S,H,ce,ye){mi.call(this,S,H),this.type="rect";var Ae=ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ae},set:function(He){isNaN(He)||(Ae=parseFloat(He))}});var Me=ye||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Me},set:function(He){isNaN(He)||(Me=parseFloat(He))}}),this},Yo=function(){this.page=Mt,this.currentPage=J,this.pages=We.slice(0),this.pagesContext=zt.slice(0),this.x=ft,this.y=Ar,this.matrix=rr,this.width=Io(J),this.height=Pi(J),this.outputDestination=Xe,this.id="",this.objectNumber=-1};Yo.prototype.restore=function(){Mt=this.page,J=this.currentPage,zt=this.pagesContext,We=this.pages,ft=this.x,Ar=this.y,rr=this.matrix,Ua(J,this.width),Gn(J,this.height),Xe=this.outputDestination};var ni=function(S,H,ce,ye,Ae){Pn.push(new Yo),Mt=J=0,We=[],ft=S,Ar=H,rr=Ae,Ho([ce,ye])};for(var Eo in v.beginFormObject=function(S,H,ce,ye,Ae){return ni(S,H,ce,ye,Ae),this},v.endFormObject=function(S){return(function(H){if(_o[H])Pn.pop().restore();else{var ce=new Yo,ye="Xo"+(Object.keys(Rn).length+1).toString(10);ce.id=ye,_o[H]=ye,Rn[ye]=ce,or.publish("addFormObject",ce),Pn.pop().restore()}})(S),this},v.doFormObject=function(S,H){var ce=Rn[_o[S]];return de("q"),de(H.toString()+" cm"),de("/"+ce.id+" Do"),de("Q"),this},v.getFormObject=function(S){var H=Rn[_o[S]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},v.save=function(S,H){return S=S||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(zc(sr(hi()),S),typeof zc.unload=="function"&&Jt.setTimeout&&setTimeout(zc.unload,911),this):new Promise(function(ce,ye){try{var Ae=zc(sr(hi()),S);typeof zc.unload=="function"&&Jt.setTimeout&&setTimeout(zc.unload,911),ce(Ae)}catch(Me){ye(Me.message)}})},Tt.API)Tt.API.hasOwnProperty(Eo)&&(Eo==="events"&&Tt.API.events.length?(function(S,H){var ce,ye,Ae;for(Ae=H.length-1;Ae!==-1;Ae--)ce=H[Ae][0],ye=H[Ae][1],S.subscribe.apply(S,[ce].concat(typeof ye=="function"?[ye]:ye))})(or,Tt.API.events):v[Eo]=Tt.API[Eo]);function Io(S){return zt[S].mediaBox.topRightX-zt[S].mediaBox.bottomLeftX}function Ua(S,H){zt[S].mediaBox.topRightX=H+zt[S].mediaBox.bottomLeftX}function Pi(S){return zt[S].mediaBox.topRightY-zt[S].mediaBox.bottomLeftY}function Gn(S,H){zt[S].mediaBox.topRightY=H+zt[S].mediaBox.bottomLeftY}var pa=v.getPageWidth=function(S){return Io(S=S||J)/kt},Fn=v.setPageWidth=function(S,H){Ua(S,H*kt)},gi=v.getPageHeight=function(S){return Pi(S=S||J)/kt},xs=v.setPageHeight=function(S,H){Gn(S,H*kt)};return v.internal={pdfEscape:ui,getStyle:ua,getFont:ko,getFontSize:tt,getCharSpace:Ko,getTextColor:mo,getLineHeight:Ri,getLineHeightFactor:gs,getLineWidth:It,write:Pt,getHorizontalCoordinate:Ln,getVerticalCoordinate:jo,getCoordinateString:ha,getVerticalCoordinateString:Er,collections:{},newObject:Tr,newAdditionalObject:qn,newObjectDeferred:Fr,newObjectDeferredBegin:an,getFilters:Ei,putStream:Ii,events:or,scaleFactor:kt,pageSize:{getWidth:function(){return pa(J)},setWidth:function(S){Fn(J,S)},getHeight:function(){return gi(J)},setHeight:function(S){xs(J,S)}},encryptionOptions:y,encryption:zr,getEncryptor:function(S){return y!==null?zr.encryptor(S,0):function(H){return H}},output:Bn,getNumberOfPages:di,pages:We,out:de,f2:k,f3:b,getPageInfo:Bs,getPageInfoByObjId:Va,getCurrentPageInfo:Ma,getPDFVersion:I,Point:mi,Rectangle:ys,Matrix:jt,hasHotfix:fo},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return pa(J)},set:function(S){Fn(J,S)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return gi(J)},set:function(S){xs(J,S)},enumerable:!0,configurable:!0}),(function(S){for(var H=0,ce=vt.length;H<ce;H++){var ye=Ns.call(this,S[H][0],S[H][1],S[H][2],vt[H][3],!0);w===!1&&(C[ye]=!0);var Ae=S[H][0].split("-");vl({id:ye,fontName:Ae[0],fontStyle:Ae[1]||""})}or.publish("addFonts",{fonts:dt,dictionary:$t})}).call(v,vt),St="F1",ca(o,t),or.publish("initialized"),v}Nu.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},Nu.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Nu.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},Nu.prototype.processOwnerPassword=function(r,e){return Em(jm(e).substr(0,5),r)},Nu.prototype.encryptor=function(r,e){var t=jm(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Em(t,n)}},tp.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||qr(r)!==qr(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},Tt.API={events:[]},Tt.version="3.0.3";var In=Tt.API,pg=1,ru=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ru=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},er=function(r){return r.toFixed(2)},ql=function(r){return r.toFixed(5)};In.__acroform__={};var Wo=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},y2=function(r){return r*pg},ka=function(r){var e=new jv,t=gt.internal.getHeight(r)||0,n=gt.internal.getWidth(r)||0;return e.BBox=[0,0,Number(er(n)),Number(er(t))],e},BT=In.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},LT=In.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},FT=In.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},Wn=In.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return FT(r,e-1)},$n=In.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return BT(r,e-1)},Un=In.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return LT(r,e-1)},zT=In.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,o=r[0],a=r[1],c=r[2],u=r[3],f={};return f.lowerLeft_X=t(o)||0,f.lowerLeft_Y=n(a+u)||0,f.upperRight_X=t(o+c)||0,f.upperRight_Y=n(a)||0,[Number(er(f.lowerLeft_X)),Number(er(f.lowerLeft_Y)),Number(er(f.upperRight_X)),Number(er(f.upperRight_Y))]},OT=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=Im(r,t),o=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+o+" "+er(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=ka(r);return a.scope=r.scope,a.stream=e.join(`
`),a}},Im=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=r.multiline?o.map(function(k){return k.split(`
`)}):o.map(function(k){return[k]});var a=t,c=gt.internal.getHeight(r)||0;c=c<0?-c:c;var u=gt.internal.getWidth(r)||0;u=u<0?-u:u;var f=function(k,b,N){if(k+1<o.length){var D=b+" "+o[k+1][0];return _f(D,r,N).width<=u-4}return!1};a++;e:for(;a>0;){e="",a--;var d,y,w=_f("3",r,a).height,C=r.multiline?c-a:(c-w)/2,v=C+=2,B=0,I=0,z=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+_f(e,r,a=12).width+", FieldWidth:"+u+`
`;break}for(var A="",M=0,U=0;U<o.length;U++)if(o.hasOwnProperty(U)){var F=!1;if(o[U].length!==1&&z!==o[U].length-1){if((w+2)*(M+2)+2>c)continue e;A+=o[U][z],F=!0,I=U,U--}else{A=(A+=o[U][z]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var se=parseInt(U),ue=f(se,A,a),L=U>=o.length-1;if(ue&&!L){A+=" ",z=0;continue}if(ue||L){if(L)I=se;else if(r.multiline&&(w+2)*(M+2)+2>c)continue e}else{if(!r.multiline||(w+2)*(M+2)+2>c)continue e;I=se}}for(var j="",T=B;T<=I;T++){var V=o[T];if(r.multiline){if(T===I){j+=V[z]+" ",z=(z+1)%V.length;continue}if(T===B){j+=V[V.length-1]+" ";continue}}j+=V[0]+" "}switch(j=j.substr(j.length-1)==" "?j.substr(0,j.length-1):j,y=_f(j,r,a).width,r.textAlign){case"right":d=u-y-2;break;case"center":d=(u-y)/2;break;default:d=2}e+=er(d)+" "+er(v)+` Td
`,e+="("+ru(j)+`) Tj
`,e+=-er(d)+` 0 Td
`,v=-(a+2),y=0,B=F?I:I+1,M++,A=""}break}return n.text=e,n.fontSize=a,n},_f=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:o}},VT={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},MT=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},DT=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(aa.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(VT)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");pg=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new Ev,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o];a.objId=void 0,a.hasAnnotation&&MT(a,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,o){var a=!n;for(var c in n||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(c)){var u=n[c],f=[],d=u.Rect;if(u.Rect&&(u.Rect=zT(u.Rect,o)),o.internal.newObjectDeferredBegin(u.objId,!0),u.DA=gt.createDefaultAppearanceStream(u),qr(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(f=u.getKeyValueListForStream()),u.Rect=d,u.hasAppearanceStream&&!u.appearanceStreamContent){var y=OT(u);f.push({key:"AP",value:"<</N "+y+">>"}),o.internal.acroformPlugin.xForms.push(y)}if(u.appearanceStreamContent){var w="";for(var C in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(C)){var v=u.appearanceStreamContent[C];if(w+="/"+C+" ",w+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var c in v)if(v.hasOwnProperty(c)){var B=v[c];typeof B=="function"&&(B=B.call(o,u)),w+="/"+c+" "+B+" ",o.internal.acroformPlugin.xForms.indexOf(B)>=0||o.internal.acroformPlugin.xForms.push(B)}}else typeof(B=v)=="function"&&(B=B.call(o,u)),w+="/"+c+" "+B,o.internal.acroformPlugin.xForms.indexOf(B)>=0||o.internal.acroformPlugin.xForms.push(B);w+=">>"}f.push({key:"AP",value:`<<
`+w+">>"})}o.internal.putStream({additionalKeyValues:f,objectId:u.objId}),o.internal.out("endobj")}a&&(function(I,z){for(var A in I)if(I.hasOwnProperty(A)){var M=A,U=I[A];z.internal.newObjectDeferredBegin(U.objId,!0),qr(U)==="object"&&typeof U.putStream=="function"&&U.putStream(),delete I[M]}})(o.internal.acroformPlugin.xForms,o)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},kv=In.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(c){return c};if(Array.isArray(r)){for(var o="[",a=0;a<r.length;a++)switch(a!==0&&(o+=" "),qr(r[a])){case"boolean":case"number":case"object":o+=r[a].toString();break;case"string":r[a].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),o+="("+ru(n(r[a].toString()))+")"):o+=r[a].toString()}return o+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},em=function(r,e,t){var n=function(o){return o};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+ru(n(r))+")"},Ea=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ea.prototype.toString=function(){return this.objId+" 0 R"},Ea.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Ea.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],o=this[n];o&&(Array.isArray(o)?r.push({key:n,value:kv(o,this.objId,this.scope)}):o instanceof Ea?(o.scope=this.scope,r.push({key:n,value:o.objId+" 0 R"})):typeof o!="function"&&r.push({key:n,value:o}))}return r};var jv=function(){Ea.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};Wo(jv,Ea);var Ev=function(){Ea.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+ru(t(r))+")"}},set:function(t){r=t}})};Wo(Ev,Ea);var aa=function r(){Ea.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');e=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Wn(e,3)},set:function(A){A?this.F=$n(e,3):this.F=Un(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');t=A}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(A){n=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(A){n[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(A){n[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(A){n[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(A){n[3]=A}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof rp)return;a="FieldObject"+r.FieldNum++}var A=function(M){return M};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+ru(A(a))+")"},set:function(A){a=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(A){a=A}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(A){c=A}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(A){u=A}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(A){f=A}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/pg:d},set:function(A){d=A}});var y="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return y},set:function(A){y=A}});var w="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!w||this instanceof rp||this instanceof $c))return em(w,this.objId,this.scope)},set:function(A){A=A.toString(),w=A}});var C=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(C)return this instanceof Ci==0?em(C,this.objId,this.scope):C},set:function(A){A=A.toString(),C=this instanceof Ci==0?A.substr(0,1)==="("?Ru(A.substr(1,A.length-2)):Ru(A):A}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ci==1?Ru(C.substr(1,C.length-1)):C},set:function(A){A=A.toString(),C=this instanceof Ci==1?"/"+A:A}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Ci==0?em(v,this.objId,this.scope):v},set:function(A){A=A.toString(),v=this instanceof Ci==0?A.substr(0,1)==="("?Ru(A.substr(1,A.length-2)):Ru(A):A}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ci==1?Ru(v.substr(1,v.length-1)):v},set:function(A){A=A.toString(),v=this instanceof Ci==1?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var B,I=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return I},set:function(A){A=!!A,I=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(B)return B},set:function(A){B=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,1)},set:function(A){A?this.Ff=$n(this.Ff,1):this.Ff=Un(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,2)},set:function(A){A?this.Ff=$n(this.Ff,2):this.Ff=Un(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,3)},set:function(A){A?this.Ff=$n(this.Ff,3):this.Ff=Un(this.Ff,3)}});var z=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(z!==null)return z},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');z=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(z){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:z=2;break;case"center":case 1:z=1;break;default:z=0}}})};Wo(aa,Ea);var Du=function(){aa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return kv(e,this.objId,this.scope)},set:function(t){var n,o;o=[],typeof(n=t)=="string"&&(o=(function(a,c,u){u||(u=1);for(var f,d=[];f=c.exec(a);)d.push(f[u]);return d})(n,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,18)},set:function(t){t?this.Ff=$n(this.Ff,18):this.Ff=Un(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=$n(this.Ff,19):this.Ff=Un(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,20)},set:function(t){t?(this.Ff=$n(this.Ff,20),e.sort()):this.Ff=Un(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,22)},set:function(t){t?this.Ff=$n(this.Ff,22):this.Ff=Un(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,23)},set:function(t){t?this.Ff=$n(this.Ff,23):this.Ff=Un(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,27)},set:function(t){t?this.Ff=$n(this.Ff,27):this.Ff=Un(this.Ff,27)}}),this.hasAppearanceStream=!1};Wo(Du,aa);var Wu=function(){Du.call(this),this.fontName="helvetica",this.combo=!1};Wo(Wu,Du);var $u=function(){Wu.call(this),this.combo=!0};Wo($u,Wu);var Ff=function(){$u.call(this),this.edit=!0};Wo(Ff,$u);var Ci=function(){aa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,15)},set:function(t){t?this.Ff=$n(this.Ff,15):this.Ff=Un(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,16)},set:function(t){t?this.Ff=$n(this.Ff,16):this.Ff=Un(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,17)},set:function(t){t?this.Ff=$n(this.Ff,17):this.Ff=Un(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,26)},set:function(t){t?this.Ff=$n(this.Ff,26):this.Ff=Un(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,o=[];for(n in o.push("<<"),e)o.push("/"+n+" ("+ru(t(e[n]))+")");return o.push(">>"),o.join(`
`)}},set:function(t){qr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};Wo(Ci,aa);var zf=function(){Ci.call(this),this.pushButton=!0};Wo(zf,Ci);var Uu=function(){Ci.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};Wo(Uu,Ci);var rp=function(){var r,e;aa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(o){r=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(u){return u};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var a,c=[];for(a in c.push("<<"),n)c.push("/"+a+" ("+ru(o(n[a]))+")");return c.push(">>"),c.join(`
`)},set:function(o){qr(o)==="object"&&(n=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(o){typeof o=="string"&&(n.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(o){t="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=gt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Wo(rp,aa),Uu.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},Uu.prototype.createOption=function(r){var e=new rp;return e.Parent=this,e.optionName=r,this.Kids.push(e),WT.call(this.scope,e),e};var Of=function(){Ci.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=gt.CheckBox.createAppearanceStream()};Wo(Of,Ci);var $c=function(){aa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,13)},set:function(e){e?this.Ff=$n(this.Ff,13):this.Ff=Un(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,21)},set:function(e){e?this.Ff=$n(this.Ff,21):this.Ff=Un(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,23)},set:function(e){e?this.Ff=$n(this.Ff,23):this.Ff=Un(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,24)},set:function(e){e?this.Ff=$n(this.Ff,24):this.Ff=Un(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,25)},set:function(e){e?this.Ff=$n(this.Ff,25):this.Ff=Un(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,26)},set:function(e){e?this.Ff=$n(this.Ff,26):this.Ff=Un(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Wo($c,aa);var Vf=function(){$c.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,14)},set:function(r){r?this.Ff=$n(this.Ff,14):this.Ff=Un(this.Ff,14)}}),this.password=!0};Wo(Vf,$c);var gt={CheckBox:{createAppearanceStream:function(){return{N:{On:gt.CheckBox.YesNormal},D:{On:gt.CheckBox.YesPushDown,Off:gt.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=ka(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,o=r.scope.__private__.encodeColorString(r.color),a=Im(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+er(gt.internal.getWidth(r))+" "+er(gt.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+er(a.fontSize)+" Tf "+o),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=ka(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),o=[],a=gt.internal.getHeight(r),c=gt.internal.getWidth(r),u=Im(r,r.caption);return o.push("1 g"),o.push("0 0 "+er(c)+" "+er(a)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+er(c-1)+" "+er(a-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+t+" "+er(u.fontSize)+" Tf "+n),o.push(u.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(r){var e=ka(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+er(gt.internal.getWidth(r))+" "+er(gt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:gt.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=gt.RadioButton.Circle.YesNormal,e.D[r]=gt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=ka(r);e.scope=r.scope;var t=[],n=gt.internal.getWidth(r)<=gt.internal.getHeight(r)?gt.internal.getWidth(r)/4:gt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var o=gt.internal.Bezier_C,a=Number((n*o).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+ql(gt.internal.getWidth(r)/2)+" "+ql(gt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),t.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),t.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),t.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=ka(r);e.scope=r.scope;var t=[],n=gt.internal.getWidth(r)<=gt.internal.getHeight(r)?gt.internal.getWidth(r)/4:gt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var o=Number((2*n).toFixed(5)),a=Number((o*gt.internal.Bezier_C).toFixed(5)),c=Number((n*gt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+ql(gt.internal.getWidth(r)/2)+" "+ql(gt.internal.getHeight(r)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),t.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),t.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),t.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+ql(gt.internal.getWidth(r)/2)+" "+ql(gt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+c+" "+c+" "+n+" 0 "+n+" c"),t.push("-"+c+" "+n+" -"+n+" "+c+" -"+n+" 0 c"),t.push("-"+n+" -"+c+" -"+c+" -"+n+" 0 -"+n+" c"),t.push(c+" -"+n+" "+n+" -"+c+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=ka(r);e.scope=r.scope;var t=[],n=gt.internal.getWidth(r)<=gt.internal.getHeight(r)?gt.internal.getWidth(r)/4:gt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var o=Number((2*n).toFixed(5)),a=Number((o*gt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+ql(gt.internal.getWidth(r)/2)+" "+ql(gt.internal.getHeight(r)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),t.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),t.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),t.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:gt.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=gt.RadioButton.Cross.YesNormal,e.D[r]=gt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=ka(r);e.scope=r.scope;var t=[],n=gt.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+er(gt.internal.getWidth(r)-2)+" "+er(gt.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(er(n.x1.x)+" "+er(n.x1.y)+" m"),t.push(er(n.x2.x)+" "+er(n.x2.y)+" l"),t.push(er(n.x4.x)+" "+er(n.x4.y)+" m"),t.push(er(n.x3.x)+" "+er(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=ka(r);e.scope=r.scope;var t=gt.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+er(gt.internal.getWidth(r))+" "+er(gt.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+er(gt.internal.getWidth(r)-2)+" "+er(gt.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(er(t.x1.x)+" "+er(t.x1.y)+" m"),n.push(er(t.x2.x)+" "+er(t.x2.y)+" l"),n.push(er(t.x4.x)+" "+er(t.x4.y)+" m"),n.push(er(t.x3.x)+" "+er(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=ka(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+er(gt.internal.getWidth(r))+" "+er(gt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};gt.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=gt.internal.getWidth(r),t=gt.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},gt.internal.getWidth=function(r){var e=0;return qr(r)==="object"&&(e=y2(r.Rect[2])),e},gt.internal.getHeight=function(r){var e=0;return qr(r)==="object"&&(e=y2(r.Rect[3])),e};var WT=In.addField=function(r){if(DT(this,r),!(r instanceof aa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};In.AcroFormChoiceField=Du,In.AcroFormListBox=Wu,In.AcroFormComboBox=$u,In.AcroFormEditBox=Ff,In.AcroFormButton=Ci,In.AcroFormPushButton=zf,In.AcroFormRadioButton=Uu,In.AcroFormCheckBox=Of,In.AcroFormTextField=$c,In.AcroFormPasswordField=Vf,In.AcroFormAppearance=gt,In.AcroForm={ChoiceField:Du,ListBox:Wu,ComboBox:$u,EditBox:Ff,Button:Ci,PushButton:zf,RadioButton:Uu,CheckBox:Of,TextField:$c,PasswordField:Vf,Appearance:gt},Tt.AcroForm={ChoiceField:Du,ListBox:Wu,ComboBox:$u,EditBox:Ff,Button:Ci,PushButton:zf,RadioButton:Uu,CheckBox:Of,TextField:$c,PasswordField:Vf,Appearance:gt};Tt.AcroForm;function Iv(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){var e="addImage_";r.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=r.__addimage__.getImageFileTypeByImageData=function(k,b){var N,D,q,ie,oe,ne=t;if((b=b||t)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(ue(k))for(oe in n)for(q=n[oe],N=0;N<q.length;N+=1){for(ie=!0,D=0;D<q[N].length;D+=1)if(q[N][D]!==void 0&&q[N][D]!==k[D]){ie=!1;break}if(ie===!0){ne=oe;break}}else for(oe in n)for(q=n[oe],N=0;N<q.length;N+=1){for(ie=!0,D=0;D<q[N].length;D+=1)if(q[N][D]!==void 0&&q[N][D]!==k.charCodeAt(D)){ie=!1;break}if(ie===!0){ne=oe;break}}return ne===t&&b!==t&&(ne=b),ne},a=function k(b){for(var N=this.internal.write,D=this.internal.putStream,q=(0,this.internal.getFilters)();q.indexOf("FlateEncode")!==-1;)q.splice(q.indexOf("FlateEncode"),1);b.objectId=this.internal.newObject();var ie=[];if(ie.push({key:"Type",value:"/XObject"}),ie.push({key:"Subtype",value:"/Image"}),ie.push({key:"Width",value:b.width}),ie.push({key:"Height",value:b.height}),b.colorSpace===A.INDEXED?ie.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(b.palette.length/3-1)+" "+("sMask"in b&&b.sMask!==void 0?b.objectId+2:b.objectId+1)+" 0 R]"}):(ie.push({key:"ColorSpace",value:"/"+b.colorSpace}),b.colorSpace===A.DEVICE_CMYK&&ie.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ie.push({key:"BitsPerComponent",value:b.bitsPerComponent}),"decodeParameters"in b&&b.decodeParameters!==void 0&&ie.push({key:"DecodeParms",value:"<<"+b.decodeParameters+">>"}),"transparency"in b&&Array.isArray(b.transparency)&&b.transparency.length>0){for(var oe="",ne=0,ve=b.transparency.length;ne<ve;ne++)oe+=b.transparency[ne]+" "+b.transparency[ne]+" ";ie.push({key:"Mask",value:"["+oe+"]"})}b.sMask!==void 0&&ie.push({key:"SMask",value:b.objectId+1+" 0 R"});var be=b.filter!==void 0?["/"+b.filter]:void 0;if(D({data:b.data,additionalKeyValues:ie,alreadyAppliedFilters:be,objectId:b.objectId}),N("endobj"),"sMask"in b&&b.sMask!==void 0){var Z,W=(Z=b.sMaskBitsPerComponent)!==null&&Z!==void 0?Z:b.bitsPerComponent,J={width:b.width,height:b.height,colorSpace:"DeviceGray",bitsPerComponent:W,data:b.sMask};"filter"in b&&(J.decodeParameters="/Predictor ".concat(b.predictor," /Colors 1 /BitsPerComponent ").concat(W," /Columns ").concat(b.width),J.filter=b.filter),k.call(this,J)}if(b.colorSpace===A.INDEXED){var re=this.internal.newObject();D({data:j(new Uint8Array(b.palette)),objectId:re}),N("endobj")}},c=function(){var k=this.internal.collections[e+"images"];for(var b in k)a.call(this,k[b])},u=function(){var k,b=this.internal.collections[e+"images"],N=this.internal.write;for(var D in b)N("/I"+(k=b[D]).index,k.objectId,"0","R")},f=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",u))},d=function(){var k=this.internal.collections[e+"images"];return f.call(this),k},y=function(){return Object.keys(this.internal.collections[e+"images"]).length},w=function(k){return typeof r["process"+k.toUpperCase()]=="function"},C=function(k){return qr(k)==="object"&&k.nodeType===1},v=function(k,b){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var N=""+k.getAttribute("src");if(N.indexOf("data:image/")===0)return Lf(unescape(N).split("base64,").pop());var D=r.loadFile(N,!0);if(D!==void 0)return D}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var q;switch(b){case"PNG":q="image/png";break;case"WEBP":q="image/webp";break;default:q="image/jpeg"}return Lf(k.toDataURL(q,1).split("base64,").pop())}},B=function(k){var b=this.internal.collections[e+"images"];if(b){for(var N in b)if(k===b[N].alias)return b[N]}},I=function(k,b,N){return k||b||(k=-96,b=-96),k<0&&(k=-1*N.width*72/k/this.internal.scaleFactor),b<0&&(b=-1*N.height*72/b/this.internal.scaleFactor),k===0&&(k=b*N.width/N.height),b===0&&(b=k*N.height/N.width),[k,b]},z=function(k,b,N,D,q,ie){var oe=I.call(this,N,D,q),ne=this.internal.getCoordinateString,ve=this.internal.getVerticalCoordinateString,be=d.call(this);if(N=oe[0],D=oe[1],be[q.index]=q,ie){ie*=Math.PI/180;var Z=Math.cos(ie),W=Math.sin(ie),J=function(he){return he.toFixed(4)},re=[J(Z),J(W),J(-1*W),J(Z),0,0,"cm"]}this.internal.write("q"),ie?(this.internal.write([1,"0","0",1,ne(k),ve(b+D),"cm"].join(" ")),this.internal.write(re.join(" ")),this.internal.write([ne(N),"0","0",ne(D),"0","0","cm"].join(" "))):this.internal.write([ne(N),"0","0",ne(D),ne(k),ve(b+D),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+q.index+" Do"),this.internal.write("Q")},A=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var M=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},U=r.__addimage__.sHashCode=function(k){var b,N,D=0;if(typeof k=="string")for(N=k.length,b=0;b<N;b++)D=(D<<5)-D+k.charCodeAt(b),D|=0;else if(ue(k))for(N=k.byteLength/2,b=0;b<N;b++)D=(D<<5)-D+k[b],D|=0;return D},F=r.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var b=!0;return k.length===0&&(b=!1),k.length%4!=0&&(b=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(b=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(b=!1),b},se=r.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var b=k.indexOf(",");return b<0?null:k.substring(0,b).trim().endsWith("base64")?k.substring(b+1):null};r.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var ue=r.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},L=r.__addimage__.binaryStringToUint8Array=function(k){for(var b=k.length,N=new Uint8Array(b),D=0;D<b;D++)N[D]=k.charCodeAt(D);return N},j=r.__addimage__.arrayBufferToBinaryString=function(k){for(var b="",N=ue(k)?k:new Uint8Array(k),D=0;D<N.length;D+=8192)b+=String.fromCharCode.apply(null,N.subarray(D,D+8192));return b};r.addImage=function(){var k,b,N,D,q,ie,oe,ne,ve;if(typeof arguments[1]=="number"?(b=t,N=arguments[1],D=arguments[2],q=arguments[3],ie=arguments[4],oe=arguments[5],ne=arguments[6],ve=arguments[7]):(b=arguments[1],N=arguments[2],D=arguments[3],q=arguments[4],ie=arguments[5],oe=arguments[6],ne=arguments[7],ve=arguments[8]),qr(k=arguments[0])==="object"&&!C(k)&&"imageData"in k){var be=k;k=be.imageData,b=be.format||b||t,N=be.x||N||0,D=be.y||D||0,q=be.w||be.width||q,ie=be.h||be.height||ie,oe=be.alias||oe,ne=be.compression||ne,ve=be.rotation||be.angle||ve}var Z=this.internal.getFilters();if(ne===void 0&&Z.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(N)||isNaN(D))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var W=T.call(this,k,b,oe,ne);return z.call(this,N,D,q,ie,W,ve),this};var T=function(k,b,N,D){var q,ie,oe;if(typeof k=="string"&&o(k)===t){k=unescape(k);var ne=V(k,!1);(ne!==""||(ne=r.loadFile(k,!0))!==void 0)&&(k=ne)}if(C(k)&&(k=v(k,b)),b=o(k,b),!w(b))throw new Error("addImage does not support files of type '"+b+"', please ensure that a plugin for '"+b+"' support is added.");if(((oe=N)==null||oe.length===0)&&(N=(function(ve){return typeof ve=="string"||ue(ve)?U(ve):ue(ve.data)?U(ve.data):null})(k)),(q=B.call(this,N))||(k instanceof Uint8Array||b==="RGBA"||(ie=k,k=L(k)),q=this["process"+b.toUpperCase()](k,y.call(this),N,(function(ve){return ve&&typeof ve=="string"&&(ve=ve.toUpperCase()),ve in r.image_compression?ve:M.NONE})(D),ie)),!q)throw new Error("An unknown error occurred whilst processing the image.");return q},V=r.__addimage__.convertBase64ToBinaryString=function(k,b){b=typeof b!="boolean"||b;var N,D="";if(typeof k=="string"){var q;N=(q=se(k))!==null&&q!==void 0?q:k;try{D=Lf(N)}catch(ie){if(b)throw F(N)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ie.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return D};r.getImageProperties=function(k){var b,N,D="";if(C(k)&&(k=v(k)),typeof k=="string"&&o(k)===t&&((D=V(k,!1))===""&&(D=r.loadFile(k)||""),k=D),N=o(k),!w(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(k instanceof Uint8Array||(k=L(k)),!(b=this["process"+N.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return b.fileType=N,b}})(Tt.API),(function(r){var e=function(t){if(t!==void 0&&t!="")return!0};Tt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,o,a,c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,y=!1,w=0;w<d.length&&!y;w++)switch((n=d[w]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(y=!0);break;case"reference":case"text":case"freetext":y=!0}if(y!=0){this.internal.write("/Annots [");for(var C=0;C<d.length;C++){n=d[C];var v=this.internal.pdfEscape,B=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var I=this.internal.newAdditionalObject(),z=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(I.objId),M=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(o="/Rect ["+c(n.bounds.x)+" "+u(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y)+"] ")+"/Contents ("+v(A(n.contents))+")",a+=" /Popup "+z.objId+" 0 R",a+=" /P "+f.objId+" 0 R",a+=" /T ("+v(A(M))+") >>",I.content=a;var U=I.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+c(n.bounds.x+30)+" "+u(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w+30)+" "+u(n.bounds.y)+"] ")+" /Parent "+U,n.open&&(a+=" /Open true"),a+=" >>",z.content=a,this.internal.write(I.objId,"0 R",z.objId,"0 R");break;case"freetext":o="/Rect ["+c(n.bounds.x)+" "+u(n.bounds.y)+" "+c(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y+n.bounds.h)+"] ";var F=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+v(B(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var se=this.annotations._nameMap[n.options.name];n.options.pageNumber=se.page,n.options.top=se.y}else n.options.top||(n.options.top=0);if(o="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+v(B(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var ue=u(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+ue+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,o,a,c){var u=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:f(t),y:d(n),w:f(t+o),h:d(n+a)},options:c,type:"link"})},r.textWithLink=function(t,n,o,a){var c,u,f=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){u=a.maxWidth;var y=this.splitTextToSize(t,u).length;c=Math.ceil(d*y)}else u=f,c=d;return this.text(t,n,o,a),o+=.2*d,a.align==="center"&&(n-=f/2),a.align==="right"&&(n-=f),this.link(n,o-d,u,c,a),f},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}})(Tt.API),(function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];r.__arabicParser__={};var a=r.__arabicParser__.isInArabicSubstitutionA=function(I){return e[I.charCodeAt(0)]!==void 0},c=r.__arabicParser__.isArabicLetter=function(I){return typeof I=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(I)},u=r.__arabicParser__.isArabicEndLetter=function(I){return c(I)&&a(I)&&e[I.charCodeAt(0)].length<=2},f=r.__arabicParser__.isArabicAlfLetter=function(I){return c(I)&&o.indexOf(I.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(I){return c(I)&&a(I)&&e[I.charCodeAt(0)].length>=1};var d=r.__arabicParser__.arabicLetterHasFinalForm=function(I){return c(I)&&a(I)&&e[I.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(I){return c(I)&&a(I)&&e[I.charCodeAt(0)].length>=3};var y=r.__arabicParser__.arabicLetterHasMedialForm=function(I){return c(I)&&a(I)&&e[I.charCodeAt(0)].length==4},w=r.__arabicParser__.resolveLigatures=function(I){var z=0,A=t,M="",U=0;for(z=0;z<I.length;z+=1)A[I.charCodeAt(z)]!==void 0?(U++,typeof(A=A[I.charCodeAt(z)])=="number"&&(M+=String.fromCharCode(A),A=t,U=0),z===I.length-1&&(A=t,M+=I.charAt(z-(U-1)),z-=U-1,U=0)):(A=t,M+=I.charAt(z-U),z-=U,U=0);return M};r.__arabicParser__.isArabicDiacritic=function(I){return I!==void 0&&n[I.charCodeAt(0)]!==void 0};var C=r.__arabicParser__.getCorrectForm=function(I,z,A){return c(I)?a(I)===!1?-1:!d(I)||!c(z)&&!c(A)||!c(A)&&u(z)||u(I)&&!c(z)||u(I)&&f(z)||u(I)&&u(z)?0:y(I)&&c(z)&&!u(z)&&c(A)&&d(A)?3:u(I)||!c(A)?1:2:-1},v=function(I){var z=0,A=0,M=0,U="",F="",se="",ue=(I=I||"").split("\\s+"),L=[];for(z=0;z<ue.length;z+=1){for(L.push(""),A=0;A<ue[z].length;A+=1)U=ue[z][A],F=ue[z][A-1],se=ue[z][A+1],c(U)?(M=C(U,F,se),L[z]+=M!==-1?String.fromCharCode(e[U.charCodeAt(0)][M]):U):L[z]+=U;L[z]=w(L[z])}return L.join(" ")},B=r.__arabicParser__.processArabic=r.processArabic=function(){var I,z=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(z)){var M=0;for(A=[],M=0;M<z.length;M+=1)Array.isArray(z[M])?A.push([v(z[M][0]),z[M][1],z[M][2]]):A.push([v(z[M])]);I=A}else I=v(z);return typeof arguments[0]=="string"?I:(arguments[0].text=I,arguments[0])};r.events.push(["preProcessText",B])})(Tt.API),Tt.API.autoPrint=function(r){var e;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(u){t=u}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(u){n=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(u){o=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(u){a=u}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(u){c=u}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var o;if((t=t||"2d")!=="2d")return null;for(o in n)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=n[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Tt.API),(function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(I){f=I}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(I){d=I}});var y=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return y},set:function(I){y=I}});var w=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return w},set:function(I){w=I}});var C=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return C},set:function(I){C=I}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(I){v=I}});var B=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return B},set:function(I){B=I}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(f){return n.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},r.getTextDimensions=function(f,d){n.call(this);var y=(d=d||{}).fontSize||this.getFontSize(),w=d.font||this.getFont(),C=d.scaleFactor||this.internal.scaleFactor,v=0,B=0,I=0,z=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var A=d.maxWidth;A>0?typeof f=="string"?f=this.splitTextToSize(f,A):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(U,F){return U.concat(z.splitTextToSize(F,A))},[])):f=Array.isArray(f)?f:[f];for(var M=0;M<f.length;M++)v<(I=this.getStringUnitWidth(f[M],{font:w})*y)&&(v=I);return v!==0&&(B=f.length),{w:v/=C,h:Math.max((B*y*this.getLineHeightFactor()-y*(this.getLineHeightFactor()-1))/C,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=r.cell=function(){var f;f=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,y=this.internal.__cell__.padding,w=this.internal.__cell__.margins||e,C=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===f.lineNumber?(f.x=(d.x||0)+(d.width||0),f.y=d.y||0):d.y+d.height+f.height+w.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=w.top,v&&C&&(this.printHeaderRow(f.lineNumber,!0),f.y+=C[0].height)):f.y=d.y+d.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,t===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-y,f.y+y,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+y,{align:"center",baseline:"top",maxWidth:f.width-y-y}):this.text(f.text,f.x+y,f.y+y,{align:"left",baseline:"top",maxWidth:f.width-y-y})),this.internal.__cell__.lastCell=f,this};r.table=function(f,d,y,w,C){if(n.call(this),!y)throw new Error("No data for PDF table.");var v,B,I,z,A=[],M=[],U=[],F={},se={},ue=[],L=[],j=(C=C||{}).autoSize||!1,T=C.printHeaders!==!1,V=C.css&&C.css["font-size"]!==void 0?16*C.css["font-size"]:C.fontSize||12,k=C.margins||Object.assign({width:this.getPageWidth()},e),b=typeof C.padding=="number"?C.padding:3,N=C.headerBackgroundColor||"#c8c8c8",D=C.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=b,this.internal.__cell__.headerBackgroundColor=N,this.internal.__cell__.headerTextColor=D,this.setFontSize(V),w==null)M=A=Object.keys(y[0]),U=A.map(function(){return"left"});else if(Array.isArray(w)&&qr(w[0])==="object")for(A=w.map(function(be){return be.name}),M=w.map(function(be){return be.prompt||be.name||""}),U=w.map(function(be){return be.align||"left"}),v=0;v<w.length;v+=1)se[w[v].name]=.7499990551181103*w[v].width;else Array.isArray(w)&&typeof w[0]=="string"&&(M=A=w,U=A.map(function(){return"left"}));if(j||Array.isArray(w)&&typeof w[0]=="string")for(v=0;v<A.length;v+=1){for(F[z=A[v]]=y.map(function(be){return be[z]}),this.setFont(void 0,"bold"),ue.push(this.getTextDimensions(M[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),B=F[z],this.setFont(void 0,"normal"),I=0;I<B.length;I+=1)ue.push(this.getTextDimensions(B[I],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);se[z]=Math.max.apply(null,ue)+b+b,ue=[]}if(T){var q={};for(v=0;v<A.length;v+=1)q[A[v]]={},q[A[v]].text=M[v],q[A[v]].align=U[v];var ie=u.call(this,q,se);L=A.map(function(be){return new a(f,d,se[be],ie,q[be].text,void 0,q[be].align)}),this.setTableHeaderRow(L),this.printHeaderRow(1,!1)}var oe=w.reduce(function(be,Z){return be[Z.name]=Z.align,be},{});for(v=0;v<y.length;v+=1){"rowStart"in C&&C.rowStart instanceof Function&&C.rowStart({row:v,data:y[v]},this);var ne=u.call(this,y[v],se);for(I=0;I<A.length;I+=1){var ve=y[v][A[I]];"cellStart"in C&&C.cellStart instanceof Function&&C.cellStart({row:v,col:I,data:ve},this),c.call(this,new a(f,d,se[A[I]],ne,ve,v+2,oe[A[I]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=d,this};var u=function(f,d){var y=this.internal.__cell__.padding,w=this.internal.__cell__.table_font_size,C=this.internal.scaleFactor;return Object.keys(f).map(function(v){var B=f[v];return this.splitTextToSize(B.hasOwnProperty("text")?B.text:B,d[v]-y-y)},this).map(function(v){return this.getLineHeightFactor()*v.length*w/C+y+y},this).reduce(function(v,B){return Math.max(v,B)},0)};r.setTableHeaderRow=function(f){n.call(this),this.internal.__cell__.tableHeaderRow=f},r.printHeaderRow=function(f,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var y;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var w=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(w[0],w[1],w[2],w[3],void 0,-1)}this.setFont(void 0,"bold");for(var C=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){y=this.internal.__cell__.tableHeaderRow[v].clone(),d&&(y.y=this.internal.__cell__.margins.top||0,C.push(y)),y.lineNumber=f;var B=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,y),this.setTextColor(B)}C.length>0&&this.setTableHeaderRow(C),this.setFont(void 0,"normal"),t=!1}})(Tt.API);var Rv={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Pv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Rm=Iv(Pv),Nv=[100,200,300,400,500,600,700,800,900],$T=Iv(Nv);function tm(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=(function(a){return Rv[a=a||"normal"]?a:"normal"})(r.style),n=(function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400})(r.weight),o=(function(a){return typeof Rm[a=a||"normal"]=="number"?a:"normal"})(r.stretch);return{family:e,style:t,weight:n,stretch:o,src:r.src||[],ref:r.ref||{name:e,style:[o,t,n].join(" ")}}}function x2(r,e,t,n){var o;for(o=t;o>=0&&o<e.length;o+=n)if(r[e[o]])return r[e[o]];for(o=t;o>=0&&o<e.length;o-=n)if(r[e[o]])return r[e[o]]}var UT={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},v2={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function b2(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function w2(r){return r.trimLeft()}function qT(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function HT(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var Tf,S2,_2,Pu,Cf,T2,C2,A2,rm=["times"];function k2(r,e,t,n,o){var a=4,c=E2;switch(o){case Tt.API.image_compression.FAST:a=1,c=j2;break;case Tt.API.image_compression.MEDIUM:a=6,c=I2;break;case Tt.API.image_compression.SLOW:a=9,c=R2}r=(function(f,d,y,w){for(var C,v=f.length/d,B=new Uint8Array(f.length+v),I=[GT,j2,E2,I2,R2],z=0;z<v;z+=1){var A=z*d,M=f.subarray(A,A+d);if(w)B.set(w(M,y,C),A+z);else{for(var U=I.length,F=[],se=0;se<U;se+=1)F[se]=I[se](M,y,C);var ue=JT(F.concat());B.set(F[ue],A+z)}C=M}return B})(r,e,Math.ceil(t*n/8),c);var u=Tm(r,{level:a});return Tt.API.__addimage__.arrayBufferToBinaryString(u)}function GT(r){var e=Array.apply([],r);return e.unshift(0),e}function j2(r,e){var t=r.length,n=[];n[0]=1;for(var o=0;o<t;o+=1){var a=r[o-e]||0;n[o+1]=r[o]-a+256&255}return n}function E2(r,e,t){var n=r.length,o=[];o[0]=2;for(var a=0;a<n;a+=1){var c=t&&t[a]||0;o[a+1]=r[a]-c+256&255}return o}function I2(r,e,t){var n=r.length,o=[];o[0]=3;for(var a=0;a<n;a+=1){var c=r[a-e]||0,u=t&&t[a]||0;o[a+1]=r[a]+256-(c+u>>>1)&255}return o}function R2(r,e,t){var n=r.length,o=[];o[0]=4;for(var a=0;a<n;a+=1){var c=KT(r[a-e]||0,t&&t[a]||0,t&&t[a-e]||0);o[a+1]=r[a]-c+256&255}return o}function KT(r,e,t){if(r===e&&e===t)return r;var n=Math.abs(e-t),o=Math.abs(r-t),a=Math.abs(r+e-t-t);return n<=o&&n<=a?r:o<=a?e:t}function JT(r){var e=r.map(function(t){return t.reduce(function(n,o){return n+Math.abs(o)},0)});return e.indexOf(Math.min.apply(null,e))}function nm(r,e,t){var n=e*t,o=Math.floor(n/8),a=16-(n-8*o+t),c=(1<<t)-1;return Bv(r,o)>>a&c}function P2(r,e,t,n){var o=t*n,a=Math.floor(o/8),c=16-(o-8*a+n),u=(1<<n)-1,f=(e&u)<<c;(function(d,y,w){if(y+1<d.byteLength)d.setUint16(y,w,!1);else{var C=w>>8&255;d.setUint8(y,C)}})(r,a,Bv(r,a)&~(u<<c)&65535|f)}function Bv(r,e){return e+1<r.byteLength?r.getUint16(e,!1):r.getUint8(e)<<8}function YT(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,o=r[e++],a=o>>7,c=1<<1+(7&o);r[e++],r[e++];var u=null,f=null;a&&(u=e,f=c,e+=3*c);var d=!0,y=[],w=0,C=null,v=0,B=null;for(this.width=t,this.height=n;d&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,B=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((k=r[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var I=r[e++];w=r[e++]|r[e++]<<8,C=r[e++],1&I||(C=null),v=I>>2&7,e++;break;case 254:for(;;){if(!((k=r[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var z=r[e++]|r[e++]<<8,A=r[e++]|r[e++]<<8,M=r[e++]|r[e++]<<8,U=r[e++]|r[e++]<<8,F=r[e++],se=F>>6&1,ue=1<<1+(7&F),L=u,j=f,T=!1;F>>7&&(T=!0,L=e,j=ue,e+=3*ue);var V=e;for(e++;;){var k;if(!((k=r[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}y.push({x:z,y:A,width:M,height:U,has_local_palette:T,palette_offset:L,palette_size:j,data_offset:V,data_length:e-V,transparent_index:C,interlaced:!!se,delay:w,disposal:v});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return y.length},this.loopCount=function(){return B},this.frameInfo=function(b){if(b<0||b>=y.length)throw new Error("Frame index out of range.");return y[b]},this.decodeAndBlitFrameBGRA=function(b,N){var D=this.frameInfo(b),q=D.width*D.height,ie=new Uint8Array(q);N2(r,D.data_offset,ie,q);var oe=D.palette_offset,ne=D.transparent_index;ne===null&&(ne=256);var ve=D.width,be=t-ve,Z=ve,W=4*(D.y*t+D.x),J=4*((D.y+D.height)*t+D.x),re=W,he=4*be;D.interlaced===!0&&(he+=4*t*7);for(var ge=8,_e=0,fe=ie.length;_e<fe;++_e){var xe=ie[_e];if(Z===0&&(Z=ve,(re+=he)>=J&&(he=4*be+4*t*(ge-1),re=W+(ve+be)*(ge<<1),ge>>=1)),xe===ne)re+=4;else{var Pe=r[oe+3*xe],We=r[oe+3*xe+1],Qe=r[oe+3*xe+2];N[re++]=Qe,N[re++]=We,N[re++]=Pe,N[re++]=255}--Z}},this.decodeAndBlitFrameRGBA=function(b,N){var D=this.frameInfo(b),q=D.width*D.height,ie=new Uint8Array(q);N2(r,D.data_offset,ie,q);var oe=D.palette_offset,ne=D.transparent_index;ne===null&&(ne=256);var ve=D.width,be=t-ve,Z=ve,W=4*(D.y*t+D.x),J=4*((D.y+D.height)*t+D.x),re=W,he=4*be;D.interlaced===!0&&(he+=4*t*7);for(var ge=8,_e=0,fe=ie.length;_e<fe;++_e){var xe=ie[_e];if(Z===0&&(Z=ve,(re+=he)>=J&&(he=4*be+4*t*(ge-1),re=W+(ve+be)*(ge<<1),ge>>=1)),xe===ne)re+=4;else{var Pe=r[oe+3*xe],We=r[oe+3*xe+1],Qe=r[oe+3*xe+2];N[re++]=Pe,N[re++]=We,N[re++]=Qe,N[re++]=255}--Z}}}function N2(r,e,t,n){for(var o=r[e++],a=1<<o,c=a+1,u=c+1,f=o+1,d=(1<<f)-1,y=0,w=0,C=0,v=r[e++],B=new Int32Array(4096),I=null;;){for(;y<16&&v!==0;)w|=r[e++]<<y,y+=8,v===1?v=r[e++]:--v;if(y<f)break;var z=w&d;if(w>>=f,y-=f,z!==a){if(z===c)break;for(var A=z<u?z:I,M=0,U=A;U>a;)U=B[U]>>8,++M;var F=U;if(C+M+(A!==z?1:0)>n)return void Qr.log("Warning, gif stream longer than expected.");t[C++]=F;var se=C+=M;for(A!==z&&(t[C++]=F),U=A;M--;)U=B[U],t[--se]=255&U,U>>=8;I!==null&&u<4096&&(B[u++]=I<<8|F,u>=d+1&&f<12&&(++f,d=d<<1|1)),I=z}else u=c+1,d=(1<<(f=o+1))-1,I=null}return C!==n&&Qr.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function im(r){var e,t,n,o,a,c=Math.floor,u=new Array(64),f=new Array(64),d=new Array(64),y=new Array(64),w=new Array(65535),C=new Array(65535),v=new Array(64),B=new Array(64),I=[],z=0,A=7,M=new Array(64),U=new Array(64),F=new Array(64),se=new Array(256),ue=new Array(2048),L=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],j=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],b=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ie(W,J){for(var re=0,he=0,ge=new Array,_e=1;_e<=16;_e++){for(var fe=1;fe<=W[_e];fe++)ge[J[he]]=[],ge[J[he]][0]=re,ge[J[he]][1]=_e,he++,re++;re*=2}return ge}function oe(W){for(var J=W[0],re=W[1]-1;re>=0;)J&1<<re&&(z|=1<<A),re--,--A<0&&(z==255?(ne(255),ne(0)):ne(z),A=7,z=0)}function ne(W){I.push(W)}function ve(W){ne(W>>8&255),ne(255&W)}function be(W,J,re,he,ge){for(var _e,fe=ge[0],xe=ge[240],Pe=(function(qe,nt){var tt,Gt,wt,hr,Nt,Wt,yr,Ft,St,kt,ft=0;for(St=0;St<8;++St){tt=qe[ft],Gt=qe[ft+1],wt=qe[ft+2],hr=qe[ft+3],Nt=qe[ft+4],Wt=qe[ft+5],yr=qe[ft+6];var Ar=tt+(Ft=qe[ft+7]),rr=tt-Ft,dt=Gt+yr,$t=Gt-yr,ir=wt+Wt,Ct=wt-Wt,Xt=hr+Nt,Vt=hr-Nt,kr=Ar+Xt,Lr=Ar-Xt,Mt=dt+ir,zt=dt-ir;qe[ft]=kr+Mt,qe[ft+4]=kr-Mt;var or=.707106781*(zt+Lr);qe[ft+2]=Lr+or,qe[ft+6]=Lr-or;var Di=.382683433*((kr=Vt+Ct)-(zt=$t+rr)),Rn=.5411961*kr+Di,_o=1.306562965*zt+Di,Pn=.707106781*(Mt=Ct+$t),jt=rr+Pn,ki=rr-Pn;qe[ft+5]=ki+Rn,qe[ft+3]=ki-Rn,qe[ft+1]=jt+_o,qe[ft+7]=jt-_o,ft+=8}for(ft=0,St=0;St<8;++St){tt=qe[ft],Gt=qe[ft+8],wt=qe[ft+16],hr=qe[ft+24],Nt=qe[ft+32],Wt=qe[ft+40],yr=qe[ft+48];var ci=tt+(Ft=qe[ft+56]),Nn=tt-Ft,ji=Gt+yr,Tr=Gt-yr,Fr=wt+Wt,an=wt-Wt,qn=hr+Nt,$o=hr-Nt,Wi=ci+qn,$i=ci-qn,mn=ji+Fr,Ei=ji-Fr;qe[ft]=Wi+mn,qe[ft+32]=Wi-mn;var Ii=.707106781*(Ei+$i);qe[ft+16]=$i+Ii,qe[ft+48]=$i-Ii;var ds=.382683433*((Wi=$o+an)-(Ei=Tr+Nn)),co=.5411961*Wi+ds,uo=1.306562965*Ei+ds,hs=.707106781*(mn=an+Tr),Uo=Nn+hs,To=Nn-hs;qe[ft+40]=To+co,qe[ft+24]=To-co,qe[ft+8]=Uo+uo,qe[ft+56]=Uo-uo,ft++}for(St=0;St<64;++St)kt=qe[St]*nt[St],v[St]=kt>0?kt+.5|0:kt-.5|0;return v})(W,J),We=0;We<64;++We)B[L[We]]=Pe[We];var Qe=B[0]-re;re=B[0],Qe==0?oe(he[0]):(oe(he[C[_e=32767+Qe]]),oe(w[_e]));for(var Xe=63;Xe>0&&B[Xe]==0;)Xe--;if(Xe==0)return oe(fe),re;for(var Fe,de=1;de<=Xe;){for(var Pt=de;B[de]==0&&de<=Xe;)++de;var At=de-Pt;if(At>=16){Fe=At>>4;for(var vt=1;vt<=Fe;++vt)oe(xe);At&=15}_e=32767+B[de],oe(ge[(At<<4)+C[_e]]),oe(w[_e]),de++}return Xe!=63&&oe(fe),re}function Z(W){W=Math.min(Math.max(W,1),100),a!=W&&((function(J){for(var re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],he=0;he<64;he++){var ge=c((re[he]*J+50)/100);ge=Math.min(Math.max(ge,1),255),u[L[he]]=ge}for(var _e=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],fe=0;fe<64;fe++){var xe=c((_e[fe]*J+50)/100);xe=Math.min(Math.max(xe,1),255),f[L[fe]]=xe}for(var Pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],We=0,Qe=0;Qe<8;Qe++)for(var Xe=0;Xe<8;Xe++)d[We]=1/(u[L[We]]*Pe[Qe]*Pe[Xe]*8),y[We]=1/(f[L[We]]*Pe[Qe]*Pe[Xe]*8),We++})(W<50?Math.floor(5e3/W):Math.floor(200-2*W)),a=W)}this.encode=function(W,J){J&&Z(J),I=new Array,z=0,A=7,ve(65496),ve(65504),ve(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),ve(1),ve(1),ne(0),ne(0),(function(){ve(65499),ve(132),ne(0);for(var Gt=0;Gt<64;Gt++)ne(u[Gt]);ne(1);for(var wt=0;wt<64;wt++)ne(f[wt])})(),(function(Gt,wt){ve(65472),ve(17),ne(8),ve(wt),ve(Gt),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)})(W.width,W.height),(function(){ve(65476),ve(418),ne(0);for(var Gt=0;Gt<16;Gt++)ne(j[Gt+1]);for(var wt=0;wt<=11;wt++)ne(T[wt]);ne(16);for(var hr=0;hr<16;hr++)ne(V[hr+1]);for(var Nt=0;Nt<=161;Nt++)ne(k[Nt]);ne(1);for(var Wt=0;Wt<16;Wt++)ne(b[Wt+1]);for(var yr=0;yr<=11;yr++)ne(N[yr]);ne(17);for(var Ft=0;Ft<16;Ft++)ne(D[Ft+1]);for(var St=0;St<=161;St++)ne(q[St])})(),ve(65498),ve(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var re=0,he=0,ge=0;z=0,A=7,this.encode.displayName="_encode_";for(var _e,fe,xe,Pe,We,Qe,Xe,Fe,de,Pt=W.data,At=W.width,vt=W.height,qe=4*At,nt=0;nt<vt;){for(_e=0;_e<qe;){for(We=qe*nt+_e,Xe=-1,Fe=0,de=0;de<64;de++)Qe=We+(Fe=de>>3)*qe+(Xe=4*(7&de)),nt+Fe>=vt&&(Qe-=qe*(nt+1+Fe-vt)),_e+Xe>=qe&&(Qe-=_e+Xe-qe+4),fe=Pt[Qe++],xe=Pt[Qe++],Pe=Pt[Qe++],M[de]=(ue[fe]+ue[xe+256|0]+ue[Pe+512|0]>>16)-128,U[de]=(ue[fe+768|0]+ue[xe+1024|0]+ue[Pe+1280|0]>>16)-128,F[de]=(ue[fe+1280|0]+ue[xe+1536|0]+ue[Pe+1792|0]>>16)-128;re=be(M,d,re,e,n),he=be(U,y,he,t,o),ge=be(F,y,ge,t,o),_e+=32}nt+=8}if(A>=0){var tt=[];tt[1]=A+1,tt[0]=(1<<A+1)-1,oe(tt)}return ve(65497),new Uint8Array(I)},r=r||50,(function(){for(var W=String.fromCharCode,J=0;J<256;J++)se[J]=W(J)})(),e=ie(j,T),t=ie(b,N),n=ie(V,k),o=ie(D,q),(function(){for(var W=1,J=2,re=1;re<=15;re++){for(var he=W;he<J;he++)C[32767+he]=re,w[32767+he]=[],w[32767+he][1]=re,w[32767+he][0]=he;for(var ge=-(J-1);ge<=-W;ge++)C[32767+ge]=re,w[32767+ge]=[],w[32767+ge][1]=re,w[32767+ge][0]=J-1+ge;W<<=1,J<<=1}})(),(function(){for(var W=0;W<256;W++)ue[W]=19595*W,ue[W+256|0]=38470*W,ue[W+512|0]=7471*W+32768,ue[W+768|0]=-11059*W,ue[W+1024|0]=-21709*W,ue[W+1280|0]=32768*W+8421375,ue[W+1536|0]=-27439*W,ue[W+1792|0]=-5329*W})(),Z(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ea(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function B2(r){function e(T){if(!T)throw Error("assert :P")}function t(T,V,k){for(var b=0;4>b;b++)if(T[V+b]!=k.charCodeAt(b))return!0;return!1}function n(T,V,k,b,N){for(var D=0;D<N;D++)T[V+D]=k[b+D]}function o(T,V,k,b){for(var N=0;N<b;N++)T[V+N]=k}function a(T){return new Int32Array(T)}function c(T,V){for(var k=[],b=0;b<T;b++)k.push(new V);return k}function u(T,V){var k=[];return(function b(N,D,q){for(var ie=q[D],oe=0;oe<ie&&(N.push(q.length>D+1?[]:new V),!(q.length<D+1));oe++)b(N[oe],D+1,q)})(k,0,T),k}var f=function(){var T=this;function V(p,x){for(var E=1<<x-1>>>0;p&E;)E>>>=1;return E?(p&E-1)+E:p}function k(p,x,E,O,G){e(!(O%E));do p[x+(O-=E)]=G;while(0<O)}function b(p,x,E,O,G){if(e(2328>=G),512>=G)var Y=a(512);else if((Y=a(G))==null)return 0;return(function(Q,X,te,ae,we,Ee){var le,Te,je=X,Ve=1<<te,Re=a(16),ze=a(16);for(e(we!=0),e(ae!=null),e(Q!=null),e(0<te),Te=0;Te<we;++Te){if(15<ae[Te])return 0;++Re[ae[Te]]}if(Re[0]==we)return 0;for(ze[1]=0,le=1;15>le;++le){if(Re[le]>1<<le)return 0;ze[le+1]=ze[le]+Re[le]}for(Te=0;Te<we;++Te)le=ae[Te],0<ae[Te]&&(Ee[ze[le]++]=Te);if(ze[15]==1)return(ae=new N).g=0,ae.value=Ee[0],k(Q,je,1,Ve,ae),Ve;var Oe,De=-1,$e=Ve-1,bt=0,at=1,Yt=1,ht=1<<te;for(Te=0,le=1,we=2;le<=te;++le,we<<=1){if(at+=Yt<<=1,0>(Yt-=Re[le]))return 0;for(;0<Re[le];--Re[le])(ae=new N).g=le,ae.value=Ee[Te++],k(Q,je+bt,we,ht,ae),bt=V(bt,le)}for(le=te+1,we=2;15>=le;++le,we<<=1){if(at+=Yt<<=1,0>(Yt-=Re[le]))return 0;for(;0<Re[le];--Re[le]){if(ae=new N,(bt&$e)!=De){for(je+=ht,Oe=1<<(De=le)-te;15>De&&!(0>=(Oe-=Re[De]));)++De,Oe<<=1;Ve+=ht=1<<(Oe=De-te),Q[X+(De=bt&$e)].g=Oe+te,Q[X+De].value=je-X-De}ae.g=le-te,ae.value=Ee[Te++],k(Q,je+(bt>>te),we,ht,ae),bt=V(bt,le)}}return at!=2*ze[15]-1?0:Ve})(p,x,E,O,G,Y)}function N(){this.value=this.g=0}function D(){this.value=this.g=0}function q(){this.G=c(5,N),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Po,D)}function ie(p,x,E,O){e(p!=null),e(x!=null),e(2147483648>O),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=x,p.pa=E,p.Jd=x,p.Yc=E+O,p.Zc=4<=O?E+O-4+1:E,fe(p)}function oe(p,x){for(var E=0;0<x--;)E|=Pe(p,128)<<x;return E}function ne(p,x){var E=oe(p,x);return xe(p)?-E:E}function ve(p,x,E,O){var G,Y=0;for(e(p!=null),e(x!=null),e(4294967288>O),p.Sb=O,p.Ra=0,p.u=0,p.h=0,4<O&&(O=4),G=0;G<O;++G)Y+=x[E+G]<<8*G;p.Ra=Y,p.bb=O,p.oa=x,p.pa=E}function be(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<ga-8>>>0,++p.bb,p.u-=8;he(p)&&(p.h=1,p.u=0)}function Z(p,x){if(e(0<=x),!p.h&&x<=xo){var E=re(p)&yo[x];return p.u+=x,be(p),E}return p.h=1,p.u=0}function W(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function J(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function re(p){return p.Ra>>>(p.u&ga-1)>>>0}function he(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>ga}function ge(p,x){p.u=x,p.h=he(p)}function _e(p){p.u>=bs&&(e(p.u>=bs),be(p))}function fe(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function xe(p){return oe(p,1)}function Pe(p,x){var E=p.Ca;0>p.b&&fe(p);var O=p.b,G=E*x>>>8,Y=(p.I>>>O>G)+0;for(Y?(E-=G,p.I-=G+1<<O>>>0):E=G+1,O=E,G=0;256<=O;)G+=8,O>>=8;return O=7^G+Ds[O],p.b-=O,p.Ca=(E<<O)-1,Y}function We(p,x,E){p[x+0]=E>>24&255,p[x+1]=E>>16&255,p[x+2]=E>>8&255,p[x+3]=255&E}function Qe(p,x){return p[x+0]|p[x+1]<<8}function Xe(p,x){return Qe(p,x)|p[x+2]<<16}function Fe(p,x){return Qe(p,x)|Qe(p,x+2)<<16}function de(p,x){var E=1<<x;return e(p!=null),e(0<x),p.X=a(E),p.X==null?0:(p.Mb=32-x,p.Xa=x,1)}function Pt(p,x){e(p!=null),e(x!=null),e(p.Xa==x.Xa),n(x.X,0,p.X,0,1<<x.Xa)}function At(){this.X=[],this.Xa=this.Mb=0}function vt(p,x,E,O){e(E!=null),e(O!=null);var G=E[0],Y=O[0];return G==0&&(G=(p*Y+x/2)/x),Y==0&&(Y=(x*G+p/2)/p),0>=G||0>=Y?0:(E[0]=G,O[0]=Y,1)}function qe(p,x){return p+(1<<x)-1>>>x}function nt(p,x){return((4278255360&p)+(4278255360&x)>>>0&4278255360)+((16711935&p)+(16711935&x)>>>0&16711935)>>>0}function tt(p,x){T[x]=function(E,O,G,Y,Q,X,te){var ae;for(ae=0;ae<Q;++ae){var we=T[p](X[te+ae-1],G,Y+ae);X[te+ae]=nt(E[O+ae],we)}}}function Gt(){this.ud=this.hd=this.jd=0}function wt(p,x){return((4278124286&(p^x))>>>1)+(p&x)>>>0}function hr(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function Nt(p,x){return hr(p+(p-x+.5>>1))}function Wt(p,x,E){return Math.abs(x-E)-Math.abs(p-E)}function yr(p,x,E,O,G,Y,Q){for(O=Y[Q-1],E=0;E<G;++E)Y[Q+E]=O=nt(p[x+E],O)}function Ft(p,x,E,O,G){var Y;for(Y=0;Y<E;++Y){var Q=p[x+Y],X=Q>>8&255,te=16711935&(te=(te=16711935&Q)+((X<<16)+X));O[G+Y]=(4278255360&Q)+te>>>0}}function St(p,x){x.jd=255&p,x.hd=p>>8&255,x.ud=p>>16&255}function kt(p,x,E,O,G,Y){var Q;for(Q=0;Q<O;++Q){var X=x[E+Q],te=X>>>8,ae=X,we=255&(we=(we=X>>>16)+((p.jd<<24>>24)*(te<<24>>24)>>>5));ae=255&(ae=(ae+=(p.hd<<24>>24)*(te<<24>>24)>>>5)+((p.ud<<24>>24)*(we<<24>>24)>>>5)),G[Y+Q]=(4278255360&X)+(we<<16)+ae}}function ft(p,x,E,O,G){T[x]=function(Y,Q,X,te,ae,we,Ee,le,Te){for(te=Ee;te<le;++te)for(Ee=0;Ee<Te;++Ee)ae[we++]=G(X[O(Y[Q++])])},T[p]=function(Y,Q,X,te,ae,we,Ee){var le=8>>Y.b,Te=Y.Ea,je=Y.K[0],Ve=Y.w;if(8>le)for(Y=(1<<Y.b)-1,Ve=(1<<le)-1;Q<X;++Q){var Re,ze=0;for(Re=0;Re<Te;++Re)Re&Y||(ze=O(te[ae++])),we[Ee++]=G(je[ze&Ve]),ze>>=le}else T["VP8LMapColor"+E](te,ae,je,Ve,we,Ee,Q,X,Te)}}function Ar(p,x,E,O,G){for(E=x+E;x<E;){var Y=p[x++];O[G++]=Y>>16&255,O[G++]=Y>>8&255,O[G++]=255&Y}}function rr(p,x,E,O,G){for(E=x+E;x<E;){var Y=p[x++];O[G++]=Y>>16&255,O[G++]=Y>>8&255,O[G++]=255&Y,O[G++]=Y>>24&255}}function dt(p,x,E,O,G){for(E=x+E;x<E;){var Y=(Q=p[x++])>>16&240|Q>>12&15,Q=240&Q|Q>>28&15;O[G++]=Y,O[G++]=Q}}function $t(p,x,E,O,G){for(E=x+E;x<E;){var Y=(Q=p[x++])>>16&248|Q>>13&7,Q=Q>>5&224|Q>>3&31;O[G++]=Y,O[G++]=Q}}function ir(p,x,E,O,G){for(E=x+E;x<E;){var Y=p[x++];O[G++]=255&Y,O[G++]=Y>>8&255,O[G++]=Y>>16&255}}function Ct(p,x,E,O,G,Y){if(Y==0)for(E=x+E;x<E;)We(O,((Y=p[x++])[0]>>24|Y[1]>>8&65280|Y[2]<<8&16711680|Y[3]<<24)>>>0),G+=32;else n(O,G,p,x,E)}function Xt(p,x){T[x][0]=T[p+"0"],T[x][1]=T[p+"1"],T[x][2]=T[p+"2"],T[x][3]=T[p+"3"],T[x][4]=T[p+"4"],T[x][5]=T[p+"5"],T[x][6]=T[p+"6"],T[x][7]=T[p+"7"],T[x][8]=T[p+"8"],T[x][9]=T[p+"9"],T[x][10]=T[p+"10"],T[x][11]=T[p+"11"],T[x][12]=T[p+"12"],T[x][13]=T[p+"13"],T[x][14]=T[p+"0"],T[x][15]=T[p+"0"]}function Vt(p){return p==jl||p==Xa||p==_c||p==Tc}function kr(){this.eb=[],this.size=this.A=this.fb=0}function Lr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Mt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new kr,this.f.kb=new Lr,this.sd=null}function zt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function or(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Di(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function Rn(p,x){var E=p.T,O=x.ba.f.RGBA,G=O.eb,Y=O.fb+p.ka*O.A,Q=Ji[x.ba.S],X=p.y,te=p.O,ae=p.f,we=p.N,Ee=p.ea,le=p.W,Te=x.cc,je=x.dc,Ve=x.Mc,Re=x.Nc,ze=p.ka,Oe=p.ka+p.T,De=p.U,$e=De+1>>1;for(ze==0?Q(X,te,null,null,ae,we,Ee,le,ae,we,Ee,le,G,Y,null,null,De):(Q(x.ec,x.fc,X,te,Te,je,Ve,Re,ae,we,Ee,le,G,Y-O.A,G,Y,De),++E);ze+2<Oe;ze+=2)Te=ae,je=we,Ve=Ee,Re=le,we+=p.Rc,le+=p.Rc,Y+=2*O.A,Q(X,(te+=2*p.fa)-p.fa,X,te,Te,je,Ve,Re,ae,we,Ee,le,G,Y-O.A,G,Y,De);return te+=p.fa,p.j+Oe<p.o?(n(x.ec,x.fc,X,te,De),n(x.cc,x.dc,ae,we,$e),n(x.Mc,x.Nc,Ee,le,$e),E--):1&Oe||Q(X,te,null,null,ae,we,Ee,le,ae,we,Ee,le,G,Y+O.A,null,null,De),E}function _o(p,x,E){var O=p.F,G=[p.J];if(O!=null){var Y=p.U,Q=x.ba.S,X=Q==Sc||Q==_c;x=x.ba.f.RGBA;var te=[0],ae=p.ka;te[0]=p.T,p.Kb&&(ae==0?--te[0]:(--ae,G[0]-=p.width),p.j+p.ka+p.T==p.o&&(te[0]=p.o-p.j-ae));var we=x.eb;ae=x.fb+ae*x.A,p=bc(O,G[0],p.width,Y,te,we,ae+(X?0:3),x.A),e(E==te),p&&Vt(Q)&&Qa(we,ae,X,Y,te,x.A)}return 0}function Pn(p){var x=p.ma,E=x.ba.S,O=11>E,G=E==ba||E==wc||E==Sc||E==Mr||E==12||Vt(E);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!wl(x.Oa,p,G?11:12))return 0;if(G&&Vt(E)&&et(),p.da)alert("todo:use_scaling");else{if(O){if(x.Ib=Di,p.Kb){if(E=p.U+1>>1,x.memory=a(p.U+2*E),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+p.U,x.Mc=x.cc,x.Nc=x.dc+E,x.Ib=Rn,et()}}else alert("todo:EmitYUV");G&&(x.Jb=_o,O&&ke())}if(O&&!ii){for(p=0;256>p;++p)Yi[p]=89858*(p-128)+es>>qs,Qi[p]=-22014*(p-128)+es,Pl[p]=-45773*(p-128),rl[p]=113618*(p-128)+es>>qs;for(p=Ir;p<Pr;++p)x=76283*(p-16)+es>>qs,mu[p-Ir]=ln(x,255),Mh[p-Ir]=ln(x+8>>4,15);ii=1}return 1}function jt(p){var x=p.ma,E=p.U,O=p.T;return e(!(1&p.ka)),0>=E||0>=O?0:(E=x.Ib(p,x),x.Jb!=null&&x.Jb(p,x,E),x.Dc+=E,1)}function ki(p){p.ma.memory=null}function ci(p,x,E,O){return Z(p,8)!=47?0:(x[0]=Z(p,14)+1,E[0]=Z(p,14)+1,O[0]=Z(p,1),Z(p,3)!=0?0:!p.h)}function Nn(p,x){if(4>p)return p+1;var E=p-2>>1;return(2+(1&p)<<E)+Z(x,E)+1}function ji(p,x){return 120<x?x-120:1<=(E=((E=Kp[x-1])>>4)*p+(8-(15&E)))?E:1;var E}function Tr(p,x,E){var O=re(E),G=p[x+=255&O].g-8;return 0<G&&(ge(E,E.u+8),O=re(E),x+=p[x].value,x+=O&(1<<G)-1),ge(E,E.u+p[x].g),p[x].value}function Fr(p,x,E){return E.g+=p.g,E.value+=p.value<<x>>>0,e(8>=E.g),p.g}function an(p,x,E){var O=p.xc;return e((x=O==0?0:p.vc[p.md*(E>>O)+(x>>O)])<p.Wb),p.Ya[x]}function qn(p,x,E,O){var G=p.ab,Y=p.c*x,Q=p.C;x=Q+x;var X=E,te=O;for(O=p.Ta,E=p.Ua;0<G--;){var ae=p.gc[G],we=Q,Ee=x,le=X,Te=te,je=(te=O,X=E,ae.Ea);switch(e(we<Ee),e(Ee<=ae.nc),ae.hc){case 2:yn(le,Te,(Ee-we)*je,te,X);break;case 0:var Ve=we,Re=Ee,ze=te,Oe=X,De=(ht=ae).Ea;Ve==0&&(Ws(le,Te,null,null,1,ze,Oe),yr(le,Te+1,0,0,De-1,ze,Oe+1),Te+=De,Oe+=De,++Ve);for(var $e=1<<ht.b,bt=$e-1,at=qe(De,ht.b),Yt=ht.K,ht=ht.w+(Ve>>ht.b)*at;Ve<Re;){var cr=Yt,dn=ht,Zt=1;for(ws(le,Te,ze,Oe-De,1,ze,Oe);Zt<De;){var lt=(Zt&~bt)+$e;lt>De&&(lt=De),(0,Ga[cr[dn++]>>8&15])(le,Te+ +Zt,ze,Oe+Zt-De,lt-Zt,ze,Oe+Zt),Zt=lt}Te+=De,Oe+=De,++Ve&bt||(ht+=at)}Ee!=ae.nc&&n(te,X-je,te,X+(Ee-we-1)*je,je);break;case 1:for(je=le,Re=Te,De=(le=ae.Ea)-(Oe=le&~(ze=(Te=1<<ae.b)-1)),Ve=qe(le,ae.b),$e=ae.K,ae=ae.w+(we>>ae.b)*Ve;we<Ee;){for(bt=$e,at=ae,Yt=new Gt,ht=Re+Oe,cr=Re+le;Re<ht;)St(bt[at++],Yt),_l(Yt,je,Re,Te,te,X),Re+=Te,X+=Te;Re<cr&&(St(bt[at++],Yt),_l(Yt,je,Re,De,te,X),Re+=De,X+=De),++we&ze||(ae+=Ve)}break;case 3:if(le==te&&Te==X&&0<ae.b){for(Re=te,le=je=X+(Ee-we)*je-(Oe=(Ee-we)*qe(ae.Ea,ae.b)),Te=te,ze=X,Ve=[],Oe=(De=Oe)-1;0<=Oe;--Oe)Ve[Oe]=Te[ze+Oe];for(Oe=De-1;0<=Oe;--Oe)Re[le+Oe]=Ve[Oe];qa(ae,we,Ee,te,je,te,X)}else qa(ae,we,Ee,le,Te,te,X)}X=O,te=E}te!=E&&n(O,E,X,te,Y)}function $o(p,x){var E=p.V,O=p.Ba+p.c*p.C,G=x-p.C;if(e(x<=p.l.o),e(16>=G),0<G){var Y=p.l,Q=p.Ta,X=p.Ua,te=Y.width;if(qn(p,G,E,O),G=X=[X],e((E=p.C)<(O=x)),e(Y.v<Y.va),O>Y.o&&(O=Y.o),E<Y.j){var ae=Y.j-E;E=Y.j,G[0]+=ae*te}if(E>=O?E=0:(G[0]+=4*Y.v,Y.ka=E-Y.j,Y.U=Y.va-Y.v,Y.T=O-E,E=1),E){if(X=X[0],11>(E=p.ca).S){var we=E.f.RGBA,Ee=(O=E.S,G=Y.U,Y=Y.T,ae=we.eb,we.A),le=Y;for(we=we.fb+p.Ma*we.A;0<le--;){var Te=Q,je=X,Ve=G,Re=ae,ze=we;switch(O){case du:Tl(Te,je,Ve,Re,ze);break;case ba:$s(Te,je,Ve,Re,ze);break;case jl:$s(Te,je,Ve,Re,ze),Qa(Re,ze,0,Ve,1,0);break;case Lh:Ka(Te,je,Ve,Re,ze);break;case wc:Ct(Te,je,Ve,Re,ze,1);break;case Xa:Ct(Te,je,Ve,Re,ze,1),Qa(Re,ze,0,Ve,1,0);break;case Sc:Ct(Te,je,Ve,Re,ze,0);break;case _c:Ct(Te,je,Ve,Re,ze,0),Qa(Re,ze,1,Ve,1,0);break;case Mr:ya(Te,je,Ve,Re,ze);break;case Tc:ya(Te,je,Ve,Re,ze),yd(Re,ze,Ve,1,0);break;case hu:xa(Te,je,Ve,Re,ze);break;default:e(0)}X+=te,we+=Ee}p.Ma+=Y}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=E.height)}}p.C=x,e(p.C<=p.i)}function Wi(p){var x;if(0<p.ua)return 0;for(x=0;x<p.Wb;++x){var E=p.Ya[x].G,O=p.Ya[x].H;if(0<E[1][O[1]+0].g||0<E[2][O[2]+0].g||0<E[3][O[3]+0].g)return 0}return 1}function $i(p,x,E,O,G,Y){if(p.Z!=0){var Q=p.qd,X=p.rd;for(e(xi[p.Z]!=null);x<E;++x)xi[p.Z](Q,X,O,G,O,G,Y),Q=O,X=G,G+=Y;p.qd=Q,p.rd=X}}function mn(p,x){var E=p.l.ma,O=E.Z==0||E.Z==1?p.l.j:p.C;if(O=p.C<O?O:p.C,e(x<=p.l.o),x>O){var G=p.l.width,Y=E.ca,Q=E.tb+G*O,X=p.V,te=p.Ba+p.c*O,ae=p.gc;e(p.ab==1),e(ae[0].hc==3),Xo(ae[0],O,x,X,te,Y,Q),$i(E,O,x,Y,Q,G)}p.C=p.Ma=x}function Ei(p,x,E,O,G,Y,Q){var X=p.$/O,te=p.$%O,ae=p.m,we=p.s,Ee=E+p.$,le=Ee;G=E+O*G;var Te=E+O*Y,je=280+we.ua,Ve=p.Pb?X:16777216,Re=0<we.ua?we.Wa:null,ze=we.wc,Oe=Ee<Te?an(we,te,X):null;e(p.C<Y),e(Te<=G);var De=!1;e:for(;;){for(;De||Ee<Te;){var $e=0;if(X>=Ve){var bt=Ee-E;e((Ve=p).Pb),Ve.wd=Ve.m,Ve.xd=bt,0<Ve.s.ua&&Pt(Ve.s.Wa,Ve.s.vb),Ve=X+pu}if(te&ze||(Oe=an(we,te,X)),e(Oe!=null),Oe.Qb&&(x[Ee]=Oe.qb,De=!0),!De)if(_e(ae),Oe.jc){$e=ae,bt=x;var at=Ee,Yt=Oe.pd[re($e)&Po-1];e(Oe.jc),256>Yt.g?(ge($e,$e.u+Yt.g),bt[at]=Yt.value,$e=0):(ge($e,$e.u+Yt.g-256),e(256<=Yt.value),$e=Yt.value),$e==0&&(De=!0)}else $e=Tr(Oe.G[0],Oe.H[0],ae);if(ae.h)break;if(De||256>$e){if(!De)if(Oe.nd)x[Ee]=(Oe.qb|$e<<8)>>>0;else{if(_e(ae),De=Tr(Oe.G[1],Oe.H[1],ae),_e(ae),bt=Tr(Oe.G[2],Oe.H[2],ae),at=Tr(Oe.G[3],Oe.H[3],ae),ae.h)break;x[Ee]=(at<<24|De<<16|$e<<8|bt)>>>0}if(De=!1,++Ee,++te>=O&&(te=0,++X,Q!=null&&X<=Y&&!(X%16)&&Q(p,X),Re!=null))for(;le<Ee;)$e=x[le++],Re.X[(506832829*$e&4294967295)>>>Re.Mb]=$e}else if(280>$e){if($e=Nn($e-256,ae),bt=Tr(Oe.G[4],Oe.H[4],ae),_e(ae),bt=ji(O,bt=Nn(bt,ae)),ae.h)break;if(Ee-E<bt||G-Ee<$e)break e;for(at=0;at<$e;++at)x[Ee+at]=x[Ee+at-bt];for(Ee+=$e,te+=$e;te>=O;)te-=O,++X,Q!=null&&X<=Y&&!(X%16)&&Q(p,X);if(e(Ee<=G),te&ze&&(Oe=an(we,te,X)),Re!=null)for(;le<Ee;)$e=x[le++],Re.X[(506832829*$e&4294967295)>>>Re.Mb]=$e}else{if(!($e<je))break e;for(De=$e-280,e(Re!=null);le<Ee;)$e=x[le++],Re.X[(506832829*$e&4294967295)>>>Re.Mb]=$e;$e=Ee,e(!(De>>>(bt=Re).Xa)),x[$e]=bt.X[De],De=!0}De||e(ae.h==he(ae))}if(p.Pb&&ae.h&&Ee<G)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&Pt(p.s.vb,p.s.Wa);else{if(ae.h)break e;Q!=null&&Q(p,X>Y?Y:X),p.a=0,p.$=Ee-E}return 1}return p.a=3,0}function Ii(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var x=p.Wa;x!=null&&(x.X=null),p.vb=null,e(p!=null)}function ds(){var p=new pt;return p==null?null:(p.a=0,p.xb=Il,Xt("Predictor","VP8LPredictors"),Xt("Predictor","VP8LPredictors_C"),Xt("PredictorAdd","VP8LPredictorsAdd"),Xt("PredictorAdd","VP8LPredictorsAdd_C"),yn=Ft,_l=kt,Tl=Ar,$s=rr,ya=dt,xa=$t,Ka=ir,T.VP8LMapColor32b=Ss,T.VP8LMapColor8b=Ha,p)}function co(p,x,E,O,G){var Y=1,Q=[p],X=[x],te=O.m,ae=O.s,we=null,Ee=0;e:for(;;){if(E)for(;Y&&Z(te,1);){var le=Q,Te=X,je=O,Ve=1,Re=je.m,ze=je.gc[je.ab],Oe=Z(Re,2);if(je.Oc&1<<Oe)Y=0;else{switch(je.Oc|=1<<Oe,ze.hc=Oe,ze.Ea=le[0],ze.nc=Te[0],ze.K=[null],++je.ab,e(4>=je.ab),Oe){case 0:case 1:ze.b=Z(Re,3)+2,Ve=co(qe(ze.Ea,ze.b),qe(ze.nc,ze.b),0,je,ze.K),ze.K=ze.K[0];break;case 3:var De,$e=Z(Re,8)+1,bt=16<$e?0:4<$e?1:2<$e?2:3;if(le[0]=qe(ze.Ea,bt),ze.b=bt,De=Ve=co($e,1,0,je,ze.K)){var at,Yt=$e,ht=ze,cr=1<<(8>>ht.b),dn=a(cr);if(dn==null)De=0;else{var Zt=ht.K[0],lt=ht.w;for(dn[0]=ht.K[0][0],at=1;at<1*Yt;++at)dn[at]=nt(Zt[lt+at],dn[at-1]);for(;at<4*cr;++at)dn[at]=0;ht.K[0]=null,ht.K[0]=dn,De=1}}Ve=De;break;case 2:break;default:e(0)}Y=Ve}}if(Q=Q[0],X=X[0],Y&&Z(te,1)&&!(Y=1<=(Ee=Z(te,4))&&11>=Ee)){O.a=3;break e}var rt;if(rt=Y)t:{var xn,Ut,ar,Kr=O,Kn=Q,An=X,rn=Ee,On=E,Jn=Kr.m,Xr=Kr.s,dr=[null],wr=1,Zr=0,Sr=zh[rn];r:for(;;){if(On&&Z(Jn,1)){var hn=Z(Jn,3)+2,fn=qe(Kn,hn),Dr=qe(An,hn),vi=fn*Dr;if(!co(fn,Dr,0,Kr,dr))break r;for(dr=dr[0],Xr.xc=hn,xn=0;xn<vi;++xn){var Nr=dr[xn]>>8&65535;dr[xn]=Nr,Nr>=wr&&(wr=Nr+1)}}if(Jn.h)break r;for(Ut=0;5>Ut;++Ut){var Wr=Za[Ut];!Ut&&0<rn&&(Wr+=1<<rn),Zr<Wr&&(Zr=Wr)}var kn=c(wr*Sr,N),oi=wr,Xi=c(oi,q);if(Xi==null)var vn=null;else e(65536>=oi),vn=Xi;var bn=a(Zr);if(vn==null||bn==null||kn==null){Kr.a=1;break r}var bi=kn;for(xn=ar=0;xn<wr;++xn){var $r=vn[xn],wi=$r.G,Lo=$r.H,ts=0,Yn=1,wn=0;for(Ut=0;5>Ut;++Ut){Wr=Za[Ut],wi[Ut]=bi,Lo[Ut]=ar,!Ut&&0<rn&&(Wr+=1<<rn);i:{var _a,Gs=Wr,Nl=Kr,Cs=bn,Wh=bi,Ed=ar,Yr=0,rs=Nl.m,Id=Z(rs,1);if(o(Cs,0,0,Gs),Id){var Rd=Z(rs,1)+1,gu=Z(rs,1),yu=Z(rs,gu==0?1:8);Cs[yu]=1,Rd==2&&(Cs[yu=Z(rs,8)]=1);var As=1}else{var en=a(19),jn=Z(rs,4)+4;if(19<jn){Nl.a=3;var Sn=0;break i}for(_a=0;_a<jn;++_a)en[Gp[_a]]=Z(rs,3);var Bl=void 0,Ks=void 0,Ll=Nl,Zp=en,Vn=Gs,xu=Cs,Ec=0,ks=Ll.m,ns=8,vo=c(128,N);n:for(;b(vo,0,7,Zp,19);){if(Z(ks,1)){var Ic=2+2*Z(ks,3);if((Bl=2+Z(ks,Ic))>Vn)break n}else Bl=Vn;for(Ks=0;Ks<Vn&&Bl--;){_e(ks);var vu=vo[0+(127&re(ks))];ge(ks,ks.u+vu.g);var Ta=vu.value;if(16>Ta)xu[Ks++]=Ta,Ta!=0&&(ns=Ta);else{var $h=Ta==16,Pd=Ta-16,Uh=fu[Pd],Nd=Z(ks,Cc[Pd])+Uh;if(Ks+Nd>Vn)break n;for(var qh=$h?ns:0;0<Nd--;)xu[Ks++]=qh}}Ec=1;break n}Ec||(Ll.a=3),As=Ec}(As=As&&!rs.h)&&(Yr=b(Wh,Ed,8,Cs,Gs)),As&&Yr!=0?Sn=Yr:(Nl.a=3,Sn=0)}if(Sn==0)break r;if(Yn&&Fh[Ut]==1&&(Yn=bi[ar].g==0),ts+=bi[ar].g,ar+=Sn,3>=Ut){var Fl,bu=bn[0];for(Fl=1;Fl<Wr;++Fl)bn[Fl]>bu&&(bu=bn[Fl]);wn+=bu}}if($r.nd=Yn,$r.Qb=0,Yn&&($r.qb=(wi[3][Lo[3]+0].value<<24|wi[1][Lo[1]+0].value<<16|wi[2][Lo[2]+0].value)>>>0,ts==0&&256>wi[0][Lo[0]+0].value&&($r.Qb=1,$r.qb+=wi[0][Lo[0]+0].value<<8)),$r.jc=!$r.Qb&&6>wn,$r.jc){var Rc,bo=$r;for(Rc=0;Rc<Po;++Rc){var Js=Rc,is=bo.pd[Js],il=bo.G[0][bo.H[0]+Js];256<=il.value?(is.g=il.g+256,is.value=il.value):(is.g=0,is.value=0,Js>>=Fr(il,8,is),Js>>=Fr(bo.G[1][bo.H[1]+Js],16,is),Js>>=Fr(bo.G[2][bo.H[2]+Js],0,is),Fr(bo.G[3][bo.H[3]+Js],24,is))}}}Xr.vc=dr,Xr.Wb=wr,Xr.Ya=vn,Xr.yc=kn,rt=1;break t}rt=0}if(!(Y=rt)){O.a=3;break e}if(0<Ee){if(ae.ua=1<<Ee,!de(ae.Wa,Ee)){O.a=1,Y=0;break e}}else ae.ua=0;var wu=O,Su=Q,Hh=X,_u=wu.s,Tu=_u.xc;if(wu.c=Su,wu.i=Hh,_u.md=qe(Su,Tu),_u.wc=Tu==0?-1:(1<<Tu)-1,E){O.xb=Ts;break e}if((we=a(Q*X))==null){O.a=1,Y=0;break e}Y=(Y=Ei(O,we,0,Q,X,X,null))&&!te.h;break e}return Y?(G!=null?G[0]=we:(e(we==null),e(E)),O.$=0,E||Ii(ae)):Ii(ae),Y}function uo(p,x){var E=p.c*p.i,O=E+x+16*x;return e(p.c<=x),p.V=a(O),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+E+x,1)}function hs(p,x){var E=p.C,O=x-E,G=p.V,Y=p.Ba+p.c*E;for(e(x<=p.l.o);0<O;){var Q=16<O?16:O,X=p.l.ma,te=p.l.width,ae=te*Q,we=X.ca,Ee=X.tb+te*E,le=p.Ta,Te=p.Ua;qn(p,Q,G,Y),xd(le,Te,we,Ee,ae),$i(X,E,E+Q,we,Ee,te),O-=Q,G+=Q*p.c,E+=Q}e(E==x),p.C=p.Ma=x}function Uo(){this.ub=this.yd=this.td=this.Rb=0}function To(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function qo(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function jr(){this.Yb=(function(){var p=[];return(function x(E,O,G){for(var Y=G[O],Q=0;Q<Y&&(E.push(G.length>O+1?[]:0),!(G.length<O+1));Q++)x(E[Q],O+1,G)})(p,0,[3,11]),p})()}function vl(){this.jb=a(3),this.Wc=u([4,8],jr),this.Xc=u([4,17],jr)}function Ns(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function ui(){this.ld=this.La=this.dd=this.tc=0}function Ho(){this.Na=this.la=0}function ca(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function fs(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ps(){this.uc=this.M=this.Nb=0,this.wa=Array(new ui),this.Y=0,this.ya=Array(new fs),this.aa=0,this.l=new Hn}function di(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Oa(){this.cb=this.a=0,this.sc="",this.m=new W,this.Od=new Uo,this.Kc=new To,this.ed=new Ns,this.Qa=new qo,this.Ic=this.$c=this.Aa=0,this.D=new ps,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,W),this.ia=0,this.pb=c(4,ca),this.Pa=new vl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new di),this.Hd=0,this.rb=Array(new Ho),this.sb=0,this.wa=Array(new ui),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new fs),this.L=this.aa=0,this.gd=u([4,2],ui),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Hn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Co(){var p=new Oa;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,el||(el=hi)),p}function vr(p,x,E){return p.a==0&&(p.a=x,p.sc=E,p.cb=0),0}function ms(p,x,E){return 3<=E&&p[x+0]==157&&p[x+1]==1&&p[x+2]==42}function ho(p,x){if(p==null)return 0;if(p.a=0,p.sc="OK",x==null)return vr(p,2,"null VP8Io passed to VP8GetHeaders()");var E=x.data,O=x.w,G=x.ha;if(4>G)return vr(p,7,"Truncated header.");var Y=E[O+0]|E[O+1]<<8|E[O+2]<<16,Q=p.Od;if(Q.Rb=!(1&Y),Q.td=Y>>1&7,Q.yd=Y>>4&1,Q.ub=Y>>5,3<Q.td)return vr(p,3,"Incorrect keyframe parameters.");if(!Q.yd)return vr(p,4,"Frame not displayable.");O+=3,G-=3;var X=p.Kc;if(Q.Rb){if(7>G)return vr(p,7,"cannot parse picture header");if(!ms(E,O,G))return vr(p,3,"Bad code word");X.c=16383&(E[O+4]<<8|E[O+3]),X.Td=E[O+4]>>6,X.i=16383&(E[O+6]<<8|E[O+5]),X.Ud=E[O+6]>>6,O+=7,G-=7,p.za=X.c+15>>4,p.Ub=X.i+15>>4,x.width=X.c,x.height=X.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,o((Y=p.Pa).jb,0,255,Y.jb.length),e((Y=p.Qa)!=null),Y.Cb=0,Y.Bb=0,Y.Fb=1,o(Y.Zb,0,0,Y.Zb.length),o(Y.Lb,0,0,Y.Lb)}if(Q.ub>G)return vr(p,7,"bad partition length");ie(Y=p.m,E,O,Q.ub),O+=Q.ub,G-=Q.ub,Q.Rb&&(X.Ld=xe(Y),X.Kd=xe(Y)),X=p.Qa;var te,ae=p.Pa;if(e(Y!=null),e(X!=null),X.Cb=xe(Y),X.Cb){if(X.Bb=xe(Y),xe(Y)){for(X.Fb=xe(Y),te=0;4>te;++te)X.Zb[te]=xe(Y)?ne(Y,7):0;for(te=0;4>te;++te)X.Lb[te]=xe(Y)?ne(Y,6):0}if(X.Bb)for(te=0;3>te;++te)ae.jb[te]=xe(Y)?oe(Y,8):255}else X.Bb=0;if(Y.Ka)return vr(p,3,"cannot parse segment header");if((X=p.ed).zd=xe(Y),X.Tb=oe(Y,6),X.wb=oe(Y,3),X.Pc=xe(Y),X.Pc&&xe(Y)){for(ae=0;4>ae;++ae)xe(Y)&&(X.vd[ae]=ne(Y,6));for(ae=0;4>ae;++ae)xe(Y)&&(X.od[ae]=ne(Y,6))}if(p.L=X.Tb==0?0:X.zd?1:2,Y.Ka)return vr(p,3,"cannot parse filter header");var we=G;if(G=te=O,O=te+we,X=we,p.Xb=(1<<oe(p.m,2))-1,we<3*(ae=p.Xb))E=7;else{for(te+=3*ae,X-=3*ae,we=0;we<ae;++we){var Ee=E[G+0]|E[G+1]<<8|E[G+2]<<16;Ee>X&&(Ee=X),ie(p.Jc[+we],E,te,Ee),te+=Ee,X-=Ee,G+=3}ie(p.Jc[+ae],E,te,X),E=te<O?0:5}if(E!=0)return vr(p,E,"cannot parse partitions");for(E=oe(te=p.m,7),G=xe(te)?ne(te,4):0,O=xe(te)?ne(te,4):0,X=xe(te)?ne(te,4):0,ae=xe(te)?ne(te,4):0,te=xe(te)?ne(te,4):0,we=p.Qa,Ee=0;4>Ee;++Ee){if(we.Cb){var le=we.Zb[Ee];we.Fb||(le+=E)}else{if(0<Ee){p.pb[Ee]=p.pb[0];continue}le=E}var Te=p.pb[Ee];Te.Sc[0]=El[ln(le+G,127)],Te.Sc[1]=Ac[ln(le+0,127)],Te.Eb[0]=2*El[ln(le+O,127)],Te.Eb[1]=101581*Ac[ln(le+X,127)]>>16,8>Te.Eb[1]&&(Te.Eb[1]=8),Te.Qc[0]=El[ln(le+ae,117)],Te.Qc[1]=Ac[ln(le+te,127)],Te.lc=le+te}if(!Q.Rb)return vr(p,4,"Not a key frame.");for(xe(Y),Q=p.Pa,E=0;4>E;++E){for(G=0;8>G;++G)for(O=0;3>O;++O)for(X=0;11>X;++X)ae=Pe(Y,Yp[E][G][O][X])?oe(Y,8):Vh[E][G][O][X],Q.Wc[E][G].Yb[O][X]=ae;for(G=0;17>G;++G)Q.Xc[E][G]=Q.Wc[E][Ad[G]]}return p.kc=xe(Y),p.kc&&(p.Bd=oe(Y,8)),p.cb=1}function hi(p,x,E,O,G,Y,Q){var X=x[G].Yb[E];for(E=0;16>G;++G){if(!Pe(p,X[E+0]))return G;for(;!Pe(p,X[E+1]);)if(X=x[++G].Yb[0],E=0,G==16)return 16;var te=x[G+1].Yb;if(Pe(p,X[E+2])){var ae=p,we=0;if(Pe(ae,(le=X)[(Ee=E)+3]))if(Pe(ae,le[Ee+6])){for(X=0,Ee=2*(we=Pe(ae,le[Ee+8]))+(le=Pe(ae,le[Ee+9+we])),we=0,le=Td[Ee];le[X];++X)we+=we+Pe(ae,le[X]);we+=3+(8<<Ee)}else Pe(ae,le[Ee+7])?(we=7+2*Pe(ae,165),we+=Pe(ae,145)):we=5+Pe(ae,159);else we=Pe(ae,le[Ee+4])?3+Pe(ae,le[Ee+5]):2;X=te[2]}else we=1,X=te[1];te=Q+Cd[G],0>(ae=p).b&&fe(ae);var Ee,le=ae.b,Te=(Ee=ae.Ca>>1)-(ae.I>>le)>>31;--ae.b,ae.Ca+=Te,ae.Ca|=1,ae.I-=(Ee+1&Te)<<le,Y[te]=((we^Te)-Te)*O[(0<G)+0]}return 16}function sr(p){var x=p.rb[p.sb-1];x.la=0,x.Na=0,o(p.zc,0,0,p.zc.length),p.ja=0}function Bn(p,x,E,O,G){G=p[x+E+32*O]+(G>>3),p[x+E+32*O]=-256&G?0>G?0:255:G}function fo(p,x,E,O,G,Y){Bn(p,x,0,E,O+G),Bn(p,x,1,E,O+Y),Bn(p,x,2,E,O-Y),Bn(p,x,3,E,O-G)}function zr(p){return(20091*p>>16)+p}function Bs(p,x,E,O){var G,Y=0,Q=a(16);for(G=0;4>G;++G){var X=p[x+0]+p[x+8],te=p[x+0]-p[x+8],ae=(35468*p[x+4]>>16)-zr(p[x+12]),we=zr(p[x+4])+(35468*p[x+12]>>16);Q[Y+0]=X+we,Q[Y+1]=te+ae,Q[Y+2]=te-ae,Q[Y+3]=X-we,Y+=4,x++}for(G=Y=0;4>G;++G)X=(p=Q[Y+0]+4)+Q[Y+8],te=p-Q[Y+8],ae=(35468*Q[Y+4]>>16)-zr(Q[Y+12]),Bn(E,O,0,0,X+(we=zr(Q[Y+4])+(35468*Q[Y+12]>>16))),Bn(E,O,1,0,te+ae),Bn(E,O,2,0,te-ae),Bn(E,O,3,0,X-we),Y++,O+=32}function Va(p,x,E,O){var G=p[x+0]+4,Y=35468*p[x+4]>>16,Q=zr(p[x+4]),X=35468*p[x+1]>>16;fo(E,O,0,G+Q,p=zr(p[x+1]),X),fo(E,O,1,G+Y,p,X),fo(E,O,2,G-Y,p,X),fo(E,O,3,G-Q,p,X)}function Ma(p,x,E,O,G){Bs(p,x,E,O),G&&Bs(p,x+16,E,O+4)}function Ls(p,x,E,O){Ja(p,x+0,E,O,1),Ja(p,x+32,E,O+128,1)}function Ao(p,x,E,O){var G;for(p=p[x+0]+4,G=0;4>G;++G)for(x=0;4>x;++x)Bn(E,O,x,G,p)}function ua(p,x,E,O){p[x+0]&&br(p,x+0,E,O),p[x+16]&&br(p,x+16,E,O+4),p[x+32]&&br(p,x+32,E,O+128),p[x+48]&&br(p,x+48,E,O+128+4)}function nr(p,x,E,O){var G,Y=a(16);for(G=0;4>G;++G){var Q=p[x+0+G]+p[x+12+G],X=p[x+4+G]+p[x+8+G],te=p[x+4+G]-p[x+8+G],ae=p[x+0+G]-p[x+12+G];Y[0+G]=Q+X,Y[8+G]=Q-X,Y[4+G]=ae+te,Y[12+G]=ae-te}for(G=0;4>G;++G)Q=(p=Y[0+4*G]+3)+Y[3+4*G],X=Y[1+4*G]+Y[2+4*G],te=Y[1+4*G]-Y[2+4*G],ae=p-Y[3+4*G],E[O+0]=Q+X>>3,E[O+16]=ae+te>>3,E[O+32]=Q-X>>3,E[O+48]=ae-te>>3,O+=64}function ri(p,x,E){var O,G=x-32,Y=Bi,Q=255-p[G-1];for(O=0;O<E;++O){var X,te=Y,ae=Q+p[x-1];for(X=0;X<E;++X)p[x+X]=te[ae+p[G+X]];x+=32}}function Fs(p,x){ri(p,x,4)}function da(p,x){ri(p,x,8)}function Da(p,x){ri(p,x,16)}function Wa(p,x){var E;for(E=0;16>E;++E)n(p,x+32*E,p,x-32,16)}function zs(p,x){var E;for(E=16;0<E;--E)o(p,x,p[x-1],16),x+=32}function fi(p,x,E){var O;for(O=0;16>O;++O)o(x,E+32*O,p,16)}function po(p,x){var E,O=16;for(E=0;16>E;++E)O+=p[x-1+32*E]+p[x+E-32];fi(O>>5,p,x)}function ko(p,x){var E,O=8;for(E=0;16>E;++E)O+=p[x-1+32*E];fi(O>>4,p,x)}function pi(p,x){var E,O=8;for(E=0;16>E;++E)O+=p[x+E-32];fi(O>>4,p,x)}function gn(p,x){fi(128,p,x)}function It(p,x,E){return p+2*x+E+2>>2}function Go(p,x){var E,O=x-32;for(O=new Uint8Array([It(p[O-1],p[O+0],p[O+1]),It(p[O+0],p[O+1],p[O+2]),It(p[O+1],p[O+2],p[O+3]),It(p[O+2],p[O+3],p[O+4])]),E=0;4>E;++E)n(p,x+32*E,O,0,O.length)}function Ri(p,x){var E=p[x-1],O=p[x-1+32],G=p[x-1+64],Y=p[x-1+96];We(p,x+0,16843009*It(p[x-1-32],E,O)),We(p,x+32,16843009*It(E,O,G)),We(p,x+64,16843009*It(O,G,Y)),We(p,x+96,16843009*It(G,Y,Y))}function bl(p,x){var E,O=4;for(E=0;4>E;++E)O+=p[x+E-32]+p[x-1+32*E];for(O>>=3,E=0;4>E;++E)o(p,x+32*E,O,4)}function gs(p,x){var E=p[x-1+0],O=p[x-1+32],G=p[x-1+64],Y=p[x-1-32],Q=p[x+0-32],X=p[x+1-32],te=p[x+2-32],ae=p[x+3-32];p[x+0+96]=It(O,G,p[x-1+96]),p[x+1+96]=p[x+0+64]=It(E,O,G),p[x+2+96]=p[x+1+64]=p[x+0+32]=It(Y,E,O),p[x+3+96]=p[x+2+64]=p[x+1+32]=p[x+0+0]=It(Q,Y,E),p[x+3+64]=p[x+2+32]=p[x+1+0]=It(X,Q,Y),p[x+3+32]=p[x+2+0]=It(te,X,Q),p[x+3+0]=It(ae,te,X)}function Ln(p,x){var E=p[x+1-32],O=p[x+2-32],G=p[x+3-32],Y=p[x+4-32],Q=p[x+5-32],X=p[x+6-32],te=p[x+7-32];p[x+0+0]=It(p[x+0-32],E,O),p[x+1+0]=p[x+0+32]=It(E,O,G),p[x+2+0]=p[x+1+32]=p[x+0+64]=It(O,G,Y),p[x+3+0]=p[x+2+32]=p[x+1+64]=p[x+0+96]=It(G,Y,Q),p[x+3+32]=p[x+2+64]=p[x+1+96]=It(Y,Q,X),p[x+3+64]=p[x+2+96]=It(Q,X,te),p[x+3+96]=It(X,te,te)}function jo(p,x){var E=p[x-1+0],O=p[x-1+32],G=p[x-1+64],Y=p[x-1-32],Q=p[x+0-32],X=p[x+1-32],te=p[x+2-32],ae=p[x+3-32];p[x+0+0]=p[x+1+64]=Y+Q+1>>1,p[x+1+0]=p[x+2+64]=Q+X+1>>1,p[x+2+0]=p[x+3+64]=X+te+1>>1,p[x+3+0]=te+ae+1>>1,p[x+0+96]=It(G,O,E),p[x+0+64]=It(O,E,Y),p[x+0+32]=p[x+1+96]=It(E,Y,Q),p[x+1+32]=p[x+2+96]=It(Y,Q,X),p[x+2+32]=p[x+3+96]=It(Q,X,te),p[x+3+32]=It(X,te,ae)}function ha(p,x){var E=p[x+0-32],O=p[x+1-32],G=p[x+2-32],Y=p[x+3-32],Q=p[x+4-32],X=p[x+5-32],te=p[x+6-32],ae=p[x+7-32];p[x+0+0]=E+O+1>>1,p[x+1+0]=p[x+0+64]=O+G+1>>1,p[x+2+0]=p[x+1+64]=G+Y+1>>1,p[x+3+0]=p[x+2+64]=Y+Q+1>>1,p[x+0+32]=It(E,O,G),p[x+1+32]=p[x+0+96]=It(O,G,Y),p[x+2+32]=p[x+1+96]=It(G,Y,Q),p[x+3+32]=p[x+2+96]=It(Y,Q,X),p[x+3+64]=It(Q,X,te),p[x+3+96]=It(X,te,ae)}function Er(p,x){var E=p[x-1+0],O=p[x-1+32],G=p[x-1+64],Y=p[x-1+96];p[x+0+0]=E+O+1>>1,p[x+2+0]=p[x+0+32]=O+G+1>>1,p[x+2+32]=p[x+0+64]=G+Y+1>>1,p[x+1+0]=It(E,O,G),p[x+3+0]=p[x+1+32]=It(O,G,Y),p[x+3+32]=p[x+1+64]=It(G,Y,Y),p[x+3+64]=p[x+2+64]=p[x+0+96]=p[x+1+96]=p[x+2+96]=p[x+3+96]=Y}function Os(p,x){var E=p[x-1+0],O=p[x-1+32],G=p[x-1+64],Y=p[x-1+96],Q=p[x-1-32],X=p[x+0-32],te=p[x+1-32],ae=p[x+2-32];p[x+0+0]=p[x+2+32]=E+Q+1>>1,p[x+0+32]=p[x+2+64]=O+E+1>>1,p[x+0+64]=p[x+2+96]=G+O+1>>1,p[x+0+96]=Y+G+1>>1,p[x+3+0]=It(X,te,ae),p[x+2+0]=It(Q,X,te),p[x+1+0]=p[x+3+32]=It(E,Q,X),p[x+1+32]=p[x+3+64]=It(O,E,Q),p[x+1+64]=p[x+3+96]=It(G,O,E),p[x+1+96]=It(Y,G,O)}function $a(p,x){var E;for(E=0;8>E;++E)n(p,x+32*E,p,x-32,8)}function Ui(p,x){var E;for(E=0;8>E;++E)o(p,x,p[x-1],8),x+=32}function mo(p,x,E){var O;for(O=0;8>O;++O)o(x,E+32*O,p,8)}function qi(p,x){var E,O=8;for(E=0;8>E;++E)O+=p[x+E-32]+p[x-1+32*E];mo(O>>4,p,x)}function Ko(p,x){var E,O=4;for(E=0;8>E;++E)O+=p[x+E-32];mo(O>>3,p,x)}function Hi(p,x){var E,O=4;for(E=0;8>E;++E)O+=p[x-1+32*E];mo(O>>3,p,x)}function fa(p,x){mo(128,p,x)}function Jo(p,x,E){var O=p[x-E],G=p[x+0],Y=3*(G-O)+_s[1020+p[x-2*E]-p[x+E]],Q=kl[112+(Y+4>>3)];p[x-E]=Bi[255+O+kl[112+(Y+3>>3)]],p[x+0]=Bi[255+G-Q]}function mi(p,x,E,O){var G=p[x+0],Y=p[x+E];return No[255+p[x-2*E]-p[x-E]]>O||No[255+Y-G]>O}function ys(p,x,E,O){return 4*No[255+p[x-E]-p[x+0]]+No[255+p[x-2*E]-p[x+E]]<=O}function Yo(p,x,E,O,G){var Y=p[x-3*E],Q=p[x-2*E],X=p[x-E],te=p[x+0],ae=p[x+E],we=p[x+2*E],Ee=p[x+3*E];return 4*No[255+X-te]+No[255+Q-ae]>O?0:No[255+p[x-4*E]-Y]<=G&&No[255+Y-Q]<=G&&No[255+Q-X]<=G&&No[255+Ee-we]<=G&&No[255+we-ae]<=G&&No[255+ae-te]<=G}function ni(p,x,E,O){var G=2*O+1;for(O=0;16>O;++O)ys(p,x+O,E,G)&&Jo(p,x+O,E)}function Eo(p,x,E,O){var G=2*O+1;for(O=0;16>O;++O)ys(p,x+O*E,1,G)&&Jo(p,x+O*E,1)}function Io(p,x,E,O){var G;for(G=3;0<G;--G)ni(p,x+=4*E,E,O)}function Ua(p,x,E,O){var G;for(G=3;0<G;--G)Eo(p,x+=4,E,O)}function Pi(p,x,E,O,G,Y,Q,X){for(Y=2*Y+1;0<G--;){if(Yo(p,x,E,Y,Q))if(mi(p,x,E,X))Jo(p,x,E);else{var te=p,ae=x,we=E,Ee=te[ae-2*we],le=te[ae-we],Te=te[ae+0],je=te[ae+we],Ve=te[ae+2*we],Re=27*(Oe=_s[1020+3*(Te-le)+_s[1020+Ee-je]])+63>>7,ze=18*Oe+63>>7,Oe=9*Oe+63>>7;te[ae-3*we]=Bi[255+te[ae-3*we]+Oe],te[ae-2*we]=Bi[255+Ee+ze],te[ae-we]=Bi[255+le+Re],te[ae+0]=Bi[255+Te-Re],te[ae+we]=Bi[255+je-ze],te[ae+2*we]=Bi[255+Ve-Oe]}x+=O}}function Gn(p,x,E,O,G,Y,Q,X){for(Y=2*Y+1;0<G--;){if(Yo(p,x,E,Y,Q))if(mi(p,x,E,X))Jo(p,x,E);else{var te=p,ae=x,we=E,Ee=te[ae-we],le=te[ae+0],Te=te[ae+we],je=kl[112+(4+(Ve=3*(le-Ee))>>3)],Ve=kl[112+(Ve+3>>3)],Re=je+1>>1;te[ae-2*we]=Bi[255+te[ae-2*we]+Re],te[ae-we]=Bi[255+Ee+Ve],te[ae+0]=Bi[255+le-je],te[ae+we]=Bi[255+Te-Re]}x+=O}}function pa(p,x,E,O,G,Y){Pi(p,x,E,1,16,O,G,Y)}function Fn(p,x,E,O,G,Y){Pi(p,x,1,E,16,O,G,Y)}function gi(p,x,E,O,G,Y){var Q;for(Q=3;0<Q;--Q)Gn(p,x+=4*E,E,1,16,O,G,Y)}function xs(p,x,E,O,G,Y){var Q;for(Q=3;0<Q;--Q)Gn(p,x+=4,1,E,16,O,G,Y)}function S(p,x,E,O,G,Y,Q,X){Pi(p,x,G,1,8,Y,Q,X),Pi(E,O,G,1,8,Y,Q,X)}function H(p,x,E,O,G,Y,Q,X){Pi(p,x,1,G,8,Y,Q,X),Pi(E,O,1,G,8,Y,Q,X)}function ce(p,x,E,O,G,Y,Q,X){Gn(p,x+4*G,G,1,8,Y,Q,X),Gn(E,O+4*G,G,1,8,Y,Q,X)}function ye(p,x,E,O,G,Y,Q,X){Gn(p,x+4,1,G,8,Y,Q,X),Gn(E,O+4,1,G,8,Y,Q,X)}function Ae(){this.ba=new Mt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new or,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Me(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function He(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function st(){this.ua=0,this.Wa=new At,this.vb=new At,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new N}function pt(){this.xb=this.a=0,this.l=new Hn,this.ca=new Mt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new J,this.Pb=0,this.wd=new J,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new st,this.ab=0,this.gc=c(4,He),this.Oc=0}function Rt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Hn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function yt(p,x,E,O,G,Y,Q){for(p=p==null?0:p[x+0],x=0;x<Q;++x)G[Y+x]=p+E[O+x]&255,p=G[Y+x]}function fr(p,x,E,O,G,Y,Q){var X;if(p==null)yt(null,null,E,O,G,Y,Q);else for(X=0;X<Q;++X)G[Y+X]=p[x+X]+E[O+X]&255}function Hr(p,x,E,O,G,Y,Q){if(p==null)yt(null,null,E,O,G,Y,Q);else{var X,te=p[x+0],ae=te,we=te;for(X=0;X<Q;++X)ae=we+(te=p[x+X])-ae,we=E[O+X]+(-256&ae?0>ae?0:255:ae)&255,ae=te,G[Y+X]=we}}function Or(p,x,E,O){var G=x.width,Y=x.o;if(e(p!=null&&x!=null),0>E||0>=O||E+O>Y)return null;if(!p.Cc){if(p.ga==null){var Q;if(p.ga=new Rt,(Q=p.ga==null)||(Q=x.width*x.o,e(p.Gb.length==0),p.Gb=a(Q),p.Uc=0,p.Gb==null?Q=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,Q=1),Q=!Q),!Q){Q=p.ga;var X=p.Fa,te=p.P,ae=p.qc,we=p.mb,Ee=p.nb,le=te+1,Te=ae-1,je=Q.l;if(e(X!=null&&we!=null&&x!=null),xi[0]=null,xi[1]=yt,xi[2]=fr,xi[3]=Hr,Q.ca=we,Q.tb=Ee,Q.c=x.width,Q.i=x.height,e(0<Q.c&&0<Q.i),1>=ae)x=0;else if(Q.$a=3&X[te+0],Q.Z=X[te+0]>>2&3,Q.Lc=X[te+0]>>4&3,te=X[te+0]>>6&3,0>Q.$a||1<Q.$a||4<=Q.Z||1<Q.Lc||te)x=0;else if(je.put=jt,je.ac=Pn,je.bc=ki,je.ma=Q,je.width=x.width,je.height=x.height,je.Da=x.Da,je.v=x.v,je.va=x.va,je.j=x.j,je.o=x.o,Q.$a)e:{e(Q.$a==1),x=ds();t:for(;;){if(x==null){x=0;break e}if(e(Q!=null),Q.mc=x,x.c=Q.c,x.i=Q.i,x.l=Q.l,x.l.ma=Q,x.l.width=Q.c,x.l.height=Q.i,x.a=0,ve(x.m,X,le,Te),!co(Q.c,Q.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&Wi(x.s)?(Q.ic=1,X=x.c*x.i,x.Ta=null,x.Ua=0,x.V=a(X),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(Q.ic=0,x=uo(x,Q.c)),!x))break t;x=1;break e}Q.mc=null,x=0}else x=Te>=Q.c*Q.i;Q=!x}if(Q)return null;p.ga.Lc!=1?p.Ga=0:O=Y-E}e(p.ga!=null),e(E+O<=Y);e:{if(x=(X=p.ga).c,Y=X.l.o,X.$a==0){if(le=p.rc,Te=p.Vc,je=p.Fa,te=p.P+1+E*x,ae=p.mb,we=p.nb+E*x,e(te<=p.P+p.qc),X.Z!=0)for(e(xi[X.Z]!=null),Q=0;Q<O;++Q)xi[X.Z](le,Te,je,te,ae,we,x),le=ae,Te=we,we+=x,te+=x;else for(Q=0;Q<O;++Q)n(ae,we,je,te,x),le=ae,Te=we,we+=x,te+=x;p.rc=le,p.Vc=Te}else{if(e(X.mc!=null),x=E+O,e((Q=X.mc)!=null),e(x<=Q.i),Q.C>=x)x=1;else if(X.ic||ke(),X.ic){X=Q.V,le=Q.Ba,Te=Q.c;var Ve=Q.i,Re=(je=1,te=Q.$/Te,ae=Q.$%Te,we=Q.m,Ee=Q.s,Q.$),ze=Te*Ve,Oe=Te*x,De=Ee.wc,$e=Re<Oe?an(Ee,ae,te):null;e(Re<=ze),e(x<=Ve),e(Wi(Ee));t:for(;;){for(;!we.h&&Re<Oe;){if(ae&De||($e=an(Ee,ae,te)),e($e!=null),_e(we),256>(Ve=Tr($e.G[0],$e.H[0],we)))X[le+Re]=Ve,++Re,++ae>=Te&&(ae=0,++te<=x&&!(te%16)&&mn(Q,te));else{if(!(280>Ve)){je=0;break t}Ve=Nn(Ve-256,we);var bt,at=Tr($e.G[4],$e.H[4],we);if(_e(we),!(Re>=(at=ji(Te,at=Nn(at,we)))&&ze-Re>=Ve)){je=0;break t}for(bt=0;bt<Ve;++bt)X[le+Re+bt]=X[le+Re+bt-at];for(Re+=Ve,ae+=Ve;ae>=Te;)ae-=Te,++te<=x&&!(te%16)&&mn(Q,te);Re<Oe&&ae&De&&($e=an(Ee,ae,te))}e(we.h==he(we))}mn(Q,te>x?x:te);break t}!je||we.h&&Re<ze?(je=0,Q.a=we.h?5:3):Q.$=Re,x=je}else x=Ei(Q,Q.V,Q.Ba,Q.c,Q.i,x,hs);if(!x){O=0;break e}}E+O>=Y&&(p.Cc=1),O=1}if(!O)return null;if(p.Cc&&((O=p.ga)!=null&&(O.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+E*G}function m(p,x,E,O,G,Y){for(;0<G--;){var Q,X=p,te=x+(E?1:0),ae=p,we=x+(E?0:3);for(Q=0;Q<O;++Q){var Ee=ae[we+4*Q];Ee!=255&&(Ee*=32897,X[te+4*Q+0]=X[te+4*Q+0]*Ee>>23,X[te+4*Q+1]=X[te+4*Q+1]*Ee>>23,X[te+4*Q+2]=X[te+4*Q+2]*Ee>>23)}x+=Y}}function R(p,x,E,O,G){for(;0<O--;){var Y;for(Y=0;Y<E;++Y){var Q=p[x+2*Y+0],X=15&(ae=p[x+2*Y+1]),te=4369*X,ae=(240&ae|ae>>4)*te>>16;p[x+2*Y+0]=(240&Q|Q>>4)*te>>16&240|(15&Q|Q<<4)*te>>16>>4&15,p[x+2*Y+1]=240&ae|X}x+=G}}function $(p,x,E,O,G,Y,Q,X){var te,ae,we=255;for(ae=0;ae<G;++ae){for(te=0;te<O;++te){var Ee=p[x+te];Y[Q+4*te]=Ee,we&=Ee}x+=E,Q+=X}return we!=255}function ee(p,x,E,O,G){var Y;for(Y=0;Y<G;++Y)E[O+Y]=p[x+Y]>>8}function ke(){Qa=m,yd=R,bc=$,xd=ee}function Ne(p,x,E){T[p]=function(O,G,Y,Q,X,te,ae,we,Ee,le,Te,je,Ve,Re,ze,Oe,De){var $e,bt=De-1>>1,at=X[te+0]|ae[we+0]<<16,Yt=Ee[le+0]|Te[je+0]<<16;e(O!=null);var ht=3*at+Yt+131074>>2;for(x(O[G+0],255&ht,ht>>16,Ve,Re),Y!=null&&(ht=3*Yt+at+131074>>2,x(Y[Q+0],255&ht,ht>>16,ze,Oe)),$e=1;$e<=bt;++$e){var cr=X[te+$e]|ae[we+$e]<<16,dn=Ee[le+$e]|Te[je+$e]<<16,Zt=at+cr+Yt+dn+524296,lt=Zt+2*(cr+Yt)>>3;ht=lt+at>>1,at=(Zt=Zt+2*(at+dn)>>3)+cr>>1,x(O[G+2*$e-1],255&ht,ht>>16,Ve,Re+(2*$e-1)*E),x(O[G+2*$e-0],255&at,at>>16,Ve,Re+(2*$e-0)*E),Y!=null&&(ht=Zt+Yt>>1,at=lt+dn>>1,x(Y[Q+2*$e-1],255&ht,ht>>16,ze,Oe+(2*$e-1)*E),x(Y[Q+2*$e+0],255&at,at>>16,ze,Oe+(2*$e+0)*E)),at=cr,Yt=dn}1&De||(ht=3*at+Yt+131074>>2,x(O[G+De-1],255&ht,ht>>16,Ve,Re+(De-1)*E),Y!=null&&(ht=3*Yt+at+131074>>2,x(Y[Q+De-1],255&ht,ht>>16,ze,Oe+(De-1)*E)))}}function et(){Ji[du]=Qp,Ji[ba]=wa,Ji[Lh]=Xp,Ji[wc]=Rl,Ji[Sc]=tl,Ji[Mr]=kc,Ji[hu]=kd,Ji[jl]=wa,Ji[Xa]=Rl,Ji[_c]=tl,Ji[Tc]=kc}function Ot(p){return p&-16384?0>p?0:255:p>>Sa}function Vr(p,x){return Ot((19077*p>>8)+(26149*x>>8)-14234)}function lr(p,x,E){return Ot((19077*p>>8)-(6419*x>>8)-(13320*E>>8)+8708)}function Gr(p,x){return Ot((19077*p>>8)+(33050*x>>8)-17685)}function zn(p,x,E,O,G){O[G+0]=Vr(p,E),O[G+1]=lr(p,x,E),O[G+2]=Gr(p,x)}function Ni(p,x,E,O,G){O[G+0]=Gr(p,x),O[G+1]=lr(p,x,E),O[G+2]=Vr(p,E)}function Jr(p,x,E,O,G){var Y=lr(p,x,E);x=Y<<3&224|Gr(p,x)>>3,O[G+0]=248&Vr(p,E)|Y>>5,O[G+1]=x}function yi(p,x,E,O,G){var Y=240&Gr(p,x)|15;O[G+0]=240&Vr(p,E)|lr(p,x,E)>>4,O[G+1]=Y}function Ro(p,x,E,O,G){O[G+0]=255,zn(p,x,E,O,G+1)}function Vs(p,x,E,O,G){Ni(p,x,E,O,G),O[G+3]=255}function yc(p,x,E,O,G){zn(p,x,E,O,G),O[G+3]=255}function ln(p,x){return 0>p?0:p>x?x:p}function Qo(p,x,E){T[p]=function(O,G,Y,Q,X,te,ae,we,Ee){for(var le=we+(-2&Ee)*E;we!=le;)x(O[G+0],Y[Q+0],X[te+0],ae,we),x(O[G+1],Y[Q+0],X[te+0],ae,we+E),G+=2,++Q,++te,we+=2*E;1&Ee&&x(O[G+0],Y[Q+0],X[te+0],ae,we)}}function vs(p,x,E){return E==0?p==0?x==0?6:5:x==0?4:0:E}function lu(p,x,E,O,G){switch(p>>>30){case 3:Ja(x,E,O,G,0);break;case 2:cn(x,E,O,G);break;case 1:br(x,E,O,G)}}function go(p,x){var E,O,G=x.M,Y=x.Nb,Q=p.oc,X=p.pc+40,te=p.oc,ae=p.pc+584,we=p.oc,Ee=p.pc+600;for(E=0;16>E;++E)Q[X+32*E-1]=129;for(E=0;8>E;++E)te[ae+32*E-1]=129,we[Ee+32*E-1]=129;for(0<G?Q[X-1-32]=te[ae-1-32]=we[Ee-1-32]=129:(o(Q,X-32-1,127,21),o(te,ae-32-1,127,9),o(we,Ee-32-1,127,9)),O=0;O<p.za;++O){var le=x.ya[x.aa+O];if(0<O){for(E=-1;16>E;++E)n(Q,X+32*E-4,Q,X+32*E+12,4);for(E=-1;8>E;++E)n(te,ae+32*E-4,te,ae+32*E+4,4),n(we,Ee+32*E-4,we,Ee+32*E+4,4)}var Te=p.Gd,je=p.Hd+O,Ve=le.ad,Re=le.Hc;if(0<G&&(n(Q,X-32,Te[je].y,0,16),n(te,ae-32,Te[je].f,0,8),n(we,Ee-32,Te[je].ea,0,8)),le.Za){var ze=Q,Oe=X-32+16;for(0<G&&(O>=p.za-1?o(ze,Oe,Te[je].y[15],4):n(ze,Oe,Te[je+1].y,0,4)),E=0;4>E;E++)ze[Oe+128+E]=ze[Oe+256+E]=ze[Oe+384+E]=ze[Oe+0+E];for(E=0;16>E;++E,Re<<=2)ze=Q,Oe=X+jd[E],Bo[le.Ob[E]](ze,Oe),lu(Re,Ve,16*+E,ze,Oe)}else if(ze=vs(O,G,le.Ob[0]),Li[ze](Q,X),Re!=0)for(E=0;16>E;++E,Re<<=2)lu(Re,Ve,16*+E,Q,X+jd[E]);for(E=le.Gc,ze=vs(O,G,le.Dd),Ki[ze](te,ae),Ki[ze](we,Ee),Re=Ve,ze=te,Oe=ae,255&(le=0|E)&&(170&le?Gi(Re,256,ze,Oe):Rr(Re,256,ze,Oe)),le=we,Re=Ee,255&(E>>=8)&&(170&E?Gi(Ve,320,le,Re):Rr(Ve,320,le,Re)),G<p.Ub-1&&(n(Te[je].y,0,Q,X+480,16),n(Te[je].f,0,te,ae+224,8),n(Te[je].ea,0,we,Ee+224,8)),E=8*Y*p.B,Te=p.sa,je=p.ta+16*O+16*Y*p.R,Ve=p.qa,le=p.ra+8*O+E,Re=p.Ha,ze=p.Ia+8*O+E,E=0;16>E;++E)n(Te,je+E*p.R,Q,X+32*E,16);for(E=0;8>E;++E)n(Ve,le+E*p.B,te,ae+32*E,8),n(Re,ze+E*p.B,we,Ee+32*E,8)}}function ma(p,x,E,O,G,Y,Q,X,te){var ae=[0],we=[0],Ee=0,le=te!=null?te.kd:0,Te=te??new Me;if(p==null||12>E)return 7;Te.data=p,Te.w=x,Te.ha=E,x=[x],E=[E],Te.gb=[Te.gb];e:{var je=x,Ve=E,Re=Te.gb;if(e(p!=null),e(Ve!=null),e(Re!=null),Re[0]=0,12<=Ve[0]&&!t(p,je[0],"RIFF")){if(t(p,je[0]+8,"WEBP")){Re=3;break e}var ze=Fe(p,je[0]+4);if(12>ze||4294967286<ze){Re=3;break e}if(le&&ze>Ve[0]-8){Re=7;break e}Re[0]=ze,je[0]+=12,Ve[0]-=12}Re=0}if(Re!=0)return Re;for(ze=0<Te.gb[0],E=E[0];;){e:{var Oe=p;Ve=x,Re=E;var De=ae,$e=we,bt=je=[0];if((ht=Ee=[Ee])[0]=0,8>Re[0])Re=7;else{if(!t(Oe,Ve[0],"VP8X")){if(Fe(Oe,Ve[0]+4)!=10){Re=3;break e}if(18>Re[0]){Re=7;break e}var at=Fe(Oe,Ve[0]+8),Yt=1+Xe(Oe,Ve[0]+12);if(2147483648<=Yt*(Oe=1+Xe(Oe,Ve[0]+15))){Re=3;break e}bt!=null&&(bt[0]=at),De!=null&&(De[0]=Yt),$e!=null&&($e[0]=Oe),Ve[0]+=18,Re[0]-=18,ht[0]=1}Re=0}}if(Ee=Ee[0],je=je[0],Re!=0)return Re;if(Ve=!!(2&je),!ze&&Ee)return 3;if(Y!=null&&(Y[0]=!!(16&je)),Q!=null&&(Q[0]=Ve),X!=null&&(X[0]=0),Q=ae[0],je=we[0],Ee&&Ve&&te==null){Re=0;break}if(4>E){Re=7;break}if(ze&&Ee||!ze&&!Ee&&!t(p,x[0],"ALPH")){E=[E],Te.na=[Te.na],Te.P=[Te.P],Te.Sa=[Te.Sa];e:{at=p,Re=x,ze=E;var ht=Te.gb;De=Te.na,$e=Te.P,bt=Te.Sa,Yt=22,e(at!=null),e(ze!=null),Oe=Re[0];var cr=ze[0];for(e(De!=null),e(bt!=null),De[0]=null,$e[0]=null,bt[0]=0;;){if(Re[0]=Oe,ze[0]=cr,8>cr){Re=7;break e}var dn=Fe(at,Oe+4);if(4294967286<dn){Re=3;break e}var Zt=8+dn+1&-2;if(Yt+=Zt,0<ht&&Yt>ht){Re=3;break e}if(!t(at,Oe,"VP8 ")||!t(at,Oe,"VP8L")){Re=0;break e}if(cr[0]<Zt){Re=7;break e}t(at,Oe,"ALPH")||(De[0]=at,$e[0]=Oe+8,bt[0]=dn),Oe+=Zt,cr-=Zt}}if(E=E[0],Te.na=Te.na[0],Te.P=Te.P[0],Te.Sa=Te.Sa[0],Re!=0)break}E=[E],Te.Ja=[Te.Ja],Te.xa=[Te.xa];e:if(ht=p,Re=x,ze=E,De=Te.gb[0],$e=Te.Ja,bt=Te.xa,at=Re[0],Oe=!t(ht,at,"VP8 "),Yt=!t(ht,at,"VP8L"),e(ht!=null),e(ze!=null),e($e!=null),e(bt!=null),8>ze[0])Re=7;else{if(Oe||Yt){if(ht=Fe(ht,at+4),12<=De&&ht>De-12){Re=3;break e}if(le&&ht>ze[0]-8){Re=7;break e}$e[0]=ht,Re[0]+=8,ze[0]-=8,bt[0]=Yt}else bt[0]=5<=ze[0]&&ht[at+0]==47&&!(ht[at+4]>>5),$e[0]=ze[0];Re=0}if(E=E[0],Te.Ja=Te.Ja[0],Te.xa=Te.xa[0],x=x[0],Re!=0)break;if(4294967286<Te.Ja)return 3;if(X==null||Ve||(X[0]=Te.xa?2:1),Q=[Q],je=[je],Te.xa){if(5>E){Re=7;break}X=Q,le=je,Ve=Y,p==null||5>E?p=0:5<=E&&p[x+0]==47&&!(p[x+4]>>5)?(ze=[0],ht=[0],De=[0],ve($e=new J,p,x,E),ci($e,ze,ht,De)?(X!=null&&(X[0]=ze[0]),le!=null&&(le[0]=ht[0]),Ve!=null&&(Ve[0]=De[0]),p=1):p=0):p=0}else{if(10>E){Re=7;break}X=je,p==null||10>E||!ms(p,x+3,E-3)?p=0:(le=p[x+0]|p[x+1]<<8|p[x+2]<<16,Ve=16383&(p[x+7]<<8|p[x+6]),p=16383&(p[x+9]<<8|p[x+8]),1&le||3<(le>>1&7)||!(le>>4&1)||le>>5>=Te.Ja||!Ve||!p?p=0:(Q&&(Q[0]=Ve),X&&(X[0]=p),p=1))}if(!p||(Q=Q[0],je=je[0],Ee&&(ae[0]!=Q||we[0]!=je)))return 3;te!=null&&(te[0]=Te,te.offset=x-te.w,e(4294967286>x-te.w),e(te.offset==te.ha-E));break}return Re==0||Re==7&&Ee&&te==null?(Y!=null&&(Y[0]|=Te.na!=null&&0<Te.na.length),O!=null&&(O[0]=Q),G!=null&&(G[0]=je),0):Re}function wl(p,x,E){var O=x.width,G=x.height,Y=0,Q=0,X=O,te=G;if(x.Da=p!=null&&0<p.Da,x.Da&&(X=p.cd,te=p.bd,Y=p.v,Q=p.j,11>E||(Y&=-2,Q&=-2),0>Y||0>Q||0>=X||0>=te||Y+X>O||Q+te>G))return 0;if(x.v=Y,x.j=Q,x.va=Y+X,x.o=Q+te,x.U=X,x.T=te,x.da=p!=null&&0<p.da,x.da){if(!vt(X,te,E=[p.ib],Y=[p.hb]))return 0;x.ib=E[0],x.hb=Y[0]}return x.ob=p!=null&&p.ob,x.Kb=p==null||!p.Sd,x.da&&(x.ob=x.ib<3*O/4&&x.hb<3*G/4,x.Kb=0),1}function Sl(p){if(p==null)return 2;if(11>p.S){var x=p.f.RGBA;x.fb+=(p.height-1)*x.A,x.A=-x.A}else x=p.f.kb,p=p.height,x.O+=(p-1)*x.fa,x.fa=-x.fa,x.N+=(p-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(p-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(p-1)*x.lb,x.lb=-x.lb);return 0}function Ms(p,x,E,O){if(O==null||0>=p||0>=x)return 2;if(E!=null){if(E.Da){var G=E.cd,Y=E.bd,Q=-2&E.v,X=-2&E.j;if(0>Q||0>X||0>=G||0>=Y||Q+G>p||X+Y>x)return 2;p=G,x=Y}if(E.da){if(!vt(p,x,G=[E.ib],Y=[E.hb]))return 2;p=G[0],x=Y[0]}}O.width=p,O.height=x;e:{var te=O.width,ae=O.height;if(p=O.S,0>=te||0>=ae||!(p>=du&&13>p))p=2;else{if(0>=O.Rd&&O.sd==null){Q=Y=G=x=0;var we=(X=te*jc[p])*ae;if(11>p||(Y=(ae+1)/2*(x=(te+1)/2),p==12&&(Q=(G=te)*ae)),(ae=a(we+2*Y+Q))==null){p=1;break e}O.sd=ae,11>p?((te=O.f.RGBA).eb=ae,te.fb=0,te.A=X,te.size=we):((te=O.f.kb).y=ae,te.O=0,te.fa=X,te.Fd=we,te.f=ae,te.N=0+we,te.Ab=x,te.Cd=Y,te.ea=ae,te.W=0+we+Y,te.Db=x,te.Ed=Y,p==12&&(te.F=ae,te.J=0+we+2*Y),te.Tc=Q,te.lb=G)}if(x=1,G=O.S,Y=O.width,Q=O.height,G>=du&&13>G)if(11>G)p=O.f.RGBA,x&=(X=Math.abs(p.A))*(Q-1)+Y<=p.size,x&=X>=Y*jc[G],x&=p.eb!=null;else{p=O.f.kb,X=(Y+1)/2,we=(Q+1)/2,te=Math.abs(p.fa),ae=Math.abs(p.Ab);var Ee=Math.abs(p.Db),le=Math.abs(p.lb),Te=le*(Q-1)+Y;x&=te*(Q-1)+Y<=p.Fd,x&=ae*(we-1)+X<=p.Cd,x=(x&=Ee*(we-1)+X<=p.Ed)&te>=Y&ae>=X&Ee>=X,x&=p.y!=null,x&=p.f!=null,x&=p.ea!=null,G==12&&(x&=le>=Y,x&=Te<=p.Tc,x&=p.F!=null)}else x=0;p=x?0:2}}return p!=0||E!=null&&E.fd&&(p=Sl(O)),p}var Po=64,yo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],xo=24,ga=32,bs=8,Ds=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];tt("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(p){return p},T.Predictor2=function(p,x,E){return x[E+0]},T.Predictor3=function(p,x,E){return x[E+1]},T.Predictor4=function(p,x,E){return x[E-1]},T.Predictor5=function(p,x,E){return wt(wt(p,x[E+1]),x[E+0])},T.Predictor6=function(p,x,E){return wt(p,x[E-1])},T.Predictor7=function(p,x,E){return wt(p,x[E+0])},T.Predictor8=function(p,x,E){return wt(x[E-1],x[E+0])},T.Predictor9=function(p,x,E){return wt(x[E+0],x[E+1])},T.Predictor10=function(p,x,E){return wt(wt(p,x[E-1]),wt(x[E+0],x[E+1]))},T.Predictor11=function(p,x,E){var O=x[E+0];return 0>=Wt(O>>24&255,p>>24&255,(x=x[E-1])>>24&255)+Wt(O>>16&255,p>>16&255,x>>16&255)+Wt(O>>8&255,p>>8&255,x>>8&255)+Wt(255&O,255&p,255&x)?O:p},T.Predictor12=function(p,x,E){var O=x[E+0];return(hr((p>>24&255)+(O>>24&255)-((x=x[E-1])>>24&255))<<24|hr((p>>16&255)+(O>>16&255)-(x>>16&255))<<16|hr((p>>8&255)+(O>>8&255)-(x>>8&255))<<8|hr((255&p)+(255&O)-(255&x)))>>>0},T.Predictor13=function(p,x,E){var O=x[E-1];return(Nt((p=wt(p,x[E+0]))>>24&255,O>>24&255)<<24|Nt(p>>16&255,O>>16&255)<<16|Nt(p>>8&255,O>>8&255)<<8|Nt(255&p,255&O))>>>0};var Ws=T.PredictorAdd0;T.PredictorAdd1=yr,tt("Predictor2","PredictorAdd2"),tt("Predictor3","PredictorAdd3"),tt("Predictor4","PredictorAdd4"),tt("Predictor5","PredictorAdd5"),tt("Predictor6","PredictorAdd6"),tt("Predictor7","PredictorAdd7"),tt("Predictor8","PredictorAdd8"),tt("Predictor9","PredictorAdd9"),tt("Predictor10","PredictorAdd10"),tt("Predictor11","PredictorAdd11"),tt("Predictor12","PredictorAdd12"),tt("Predictor13","PredictorAdd13");var ws=T.PredictorAdd2;ft("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),ft("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var yn,qa=T.ColorIndexInverseTransform,Ss=T.MapARGB,Xo=T.VP8LColorIndexInverseTransformAlpha,Ha=T.MapAlpha,Ga=T.VP8LPredictorsAdd=[];Ga.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var _l,Tl,$s,ya,xa,Ka,va,Ja,cn,Gi,br,Rr,un,Cn,Zo,xc,Cl,Us,cu,Al,uu,gd,vc,Ya,Qa,yd,bc,xd,vd=a(511),bd=a(2041),wd=a(225),Sd=a(767),_d=0,_s=bd,kl=wd,Bi=Sd,No=vd,du=0,ba=1,Lh=2,wc=3,Sc=4,Mr=5,hu=6,jl=7,Xa=8,_c=9,Tc=10,Cc=[2,3,7],fu=[3,3,11],Za=[280,256,256,256,40],Fh=[0,1,1,1,0],Gp=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Kp=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],zh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],pu=8,El=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ac=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],el=null,Td=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Cd=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Oh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Vh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Jp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Yp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ad=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Li=[],Bo=[],Ki=[],Ts=1,Il=2,xi=[],Ji=[];Ne("UpsampleRgbLinePair",zn,3),Ne("UpsampleBgrLinePair",Ni,3),Ne("UpsampleRgbaLinePair",yc,4),Ne("UpsampleBgraLinePair",Vs,4),Ne("UpsampleArgbLinePair",Ro,4),Ne("UpsampleRgba4444LinePair",yi,2),Ne("UpsampleRgb565LinePair",Jr,2);var Qp=T.UpsampleRgbLinePair,Xp=T.UpsampleBgrLinePair,wa=T.UpsampleRgbaLinePair,Rl=T.UpsampleBgraLinePair,tl=T.UpsampleArgbLinePair,kc=T.UpsampleRgba4444LinePair,kd=T.UpsampleRgb565LinePair,qs=16,es=1<<qs-1,Ir=-227,Pr=482,Sa=6,ii=0,Yi=a(256),rl=a(256),Pl=a(256),Qi=a(256),mu=a(Pr-Ir),Mh=a(Pr-Ir);Qo("YuvToRgbRow",zn,3),Qo("YuvToBgrRow",Ni,3),Qo("YuvToRgbaRow",yc,4),Qo("YuvToBgraRow",Vs,4),Qo("YuvToArgbRow",Ro,4),Qo("YuvToRgba4444Row",yi,2),Qo("YuvToRgb565Row",Jr,2);var jd=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],nl=[0,2,8],Dh=[8,7,6,4,4,2,2,2,1,1,1,1],Hs=1;this.WebPDecodeRGBA=function(p,x,E,O,G){var Y=ba,Q=new Ae,X=new Mt;Q.ba=X,X.S=Y,X.width=[X.width],X.height=[X.height];var te=X.width,ae=X.height,we=new zt;if(we==null||p==null)var Ee=2;else e(we!=null),Ee=ma(p,x,E,we.width,we.height,we.Pd,we.Qd,we.format,null);if(Ee!=0?te=0:(te!=null&&(te[0]=we.width[0]),ae!=null&&(ae[0]=we.height[0]),te=1),te){X.width=X.width[0],X.height=X.height[0],O!=null&&(O[0]=X.width),G!=null&&(G[0]=X.height);e:{if(O=new Hn,(G=new Me).data=p,G.w=x,G.ha=E,G.kd=1,x=[0],e(G!=null),((p=ma(G.data,G.w,G.ha,null,null,null,x,null,G))==0||p==7)&&x[0]&&(p=4),(x=p)==0){if(e(Q!=null),O.data=G.data,O.w=G.w+G.offset,O.ha=G.ha-G.offset,O.put=jt,O.ac=Pn,O.bc=ki,O.ma=Q,G.xa){if((p=ds())==null){Q=1;break e}if((function(le,Te){var je=[0],Ve=[0],Re=[0];t:for(;;){if(le==null)return 0;if(Te==null)return le.a=2,0;if(le.l=Te,le.a=0,ve(le.m,Te.data,Te.w,Te.ha),!ci(le.m,je,Ve,Re)){le.a=3;break t}if(le.xb=Il,Te.width=je[0],Te.height=Ve[0],!co(je[0],Ve[0],1,le,null))break t;return 1}return e(le.a!=0),0})(p,O)){if(O=(x=Ms(O.width,O.height,Q.Oa,Q.ba))==0){t:{O=p;r:for(;;){if(O==null){O=0;break t}if(e(O.s.yc!=null),e(O.s.Ya!=null),e(0<O.s.Wb),e((E=O.l)!=null),e((G=E.ma)!=null),O.xb!=0){if(O.ca=G.ba,O.tb=G.tb,e(O.ca!=null),!wl(G.Oa,E,wc)){O.a=2;break r}if(!uo(O,E.width)||E.da)break r;if((E.da||Vt(O.ca.S))&&ke(),11>O.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),O.ca.f.kb.F!=null&&ke()),O.Pb&&0<O.s.ua&&O.s.vb.X==null&&!de(O.s.vb,O.s.Wa.Xa)){O.a=1;break r}O.xb=0}if(!Ei(O,O.V,O.Ba,O.c,O.i,E.o,$o))break r;G.Dc=O.Ma,O=1;break t}e(O.a!=0),O=0}O=!O}O&&(x=p.a)}else x=p.a}else{if((p=new Co)==null){Q=1;break e}if(p.Fa=G.na,p.P=G.P,p.qc=G.Sa,ho(p,O)){if((x=Ms(O.width,O.height,Q.Oa,Q.ba))==0){if(p.Aa=0,E=Q.Oa,e((G=p)!=null),E!=null){if(0<(te=0>(te=E.Md)?0:100<te?255:255*te/100)){for(ae=we=0;4>ae;++ae)12>(Ee=G.pb[ae]).lc&&(Ee.ia=te*Dh[0>Ee.lc?0:Ee.lc]>>3),we|=Ee.ia;we&&(alert("todo:VP8InitRandom"),G.ia=1)}G.Ga=E.Id,100<G.Ga?G.Ga=100:0>G.Ga&&(G.Ga=0)}(function(le,Te){if(le==null)return 0;if(Te==null)return vr(le,2,"NULL VP8Io parameter in VP8Decode().");if(!le.cb&&!ho(le,Te))return 0;if(e(le.cb),Te.ac==null||Te.ac(Te)){Te.ob&&(le.L=0);var je=nl[le.L];if(le.L==2?(le.yb=0,le.zb=0):(le.yb=Te.v-je>>4,le.zb=Te.j-je>>4,0>le.yb&&(le.yb=0),0>le.zb&&(le.zb=0)),le.Va=Te.o+15+je>>4,le.Hb=Te.va+15+je>>4,le.Hb>le.za&&(le.Hb=le.za),le.Va>le.Ub&&(le.Va=le.Ub),0<le.L){var Ve=le.ed;for(je=0;4>je;++je){var Re;if(le.Qa.Cb){var ze=le.Qa.Lb[je];le.Qa.Fb||(ze+=Ve.Tb)}else ze=Ve.Tb;for(Re=0;1>=Re;++Re){var Oe=le.gd[je][Re],De=ze;if(Ve.Pc&&(De+=Ve.vd[0],Re&&(De+=Ve.od[0])),0<(De=0>De?0:63<De?63:De)){var $e=De;0<Ve.wb&&($e=4<Ve.wb?$e>>2:$e>>1)>9-Ve.wb&&($e=9-Ve.wb),1>$e&&($e=1),Oe.dd=$e,Oe.tc=2*De+$e,Oe.ld=40<=De?2:15<=De?1:0}else Oe.tc=0;Oe.La=Re}}}je=0}else vr(le,6,"Frame setup failed"),je=le.a;if(je=je==0){if(je){le.$c=0,0<le.Aa||(le.Ic=Hs);t:{je=le.Ic,Ve=4*($e=le.za);var bt=32*$e,at=$e+1,Yt=0<le.L?$e*(0<le.Aa?2:1):0,ht=(le.Aa==2?2:1)*$e;if((Oe=Ve+832+(Re=3*(16*je+nl[le.L])/2*bt)+(ze=le.Fa!=null&&0<le.Fa.length?le.Kc.c*le.Kc.i:0))!=Oe)je=0;else{if(Oe>le.Vb){if(le.Vb=0,le.Ec=a(Oe),le.Fc=0,le.Ec==null){je=vr(le,1,"no memory during frame initialization.");break t}le.Vb=Oe}Oe=le.Ec,De=le.Fc,le.Ac=Oe,le.Bc=De,De+=Ve,le.Gd=c(bt,di),le.Hd=0,le.rb=c(at+1,Ho),le.sb=1,le.wa=Yt?c(Yt,ui):null,le.Y=0,le.D.Nb=0,le.D.wa=le.wa,le.D.Y=le.Y,0<le.Aa&&(le.D.Y+=$e),e(!0),le.oc=Oe,le.pc=De,De+=832,le.ya=c(ht,fs),le.aa=0,le.D.ya=le.ya,le.D.aa=le.aa,le.Aa==2&&(le.D.aa+=$e),le.R=16*$e,le.B=8*$e,$e=(bt=nl[le.L])*le.R,bt=bt/2*le.B,le.sa=Oe,le.ta=De+$e,le.qa=le.sa,le.ra=le.ta+16*je*le.R+bt,le.Ha=le.qa,le.Ia=le.ra+8*je*le.B+bt,le.$c=0,De+=Re,le.mb=ze?Oe:null,le.nb=ze?De:null,e(De+ze<=le.Fc+le.Vb),sr(le),o(le.Ac,le.Bc,0,Ve),je=1}}if(je){if(Te.ka=0,Te.y=le.sa,Te.O=le.ta,Te.f=le.qa,Te.N=le.ra,Te.ea=le.Ha,Te.Vd=le.Ia,Te.fa=le.R,Te.Rc=le.B,Te.F=null,Te.J=0,!_d){for(je=-255;255>=je;++je)vd[255+je]=0>je?-je:je;for(je=-1020;1020>=je;++je)bd[1020+je]=-128>je?-128:127<je?127:je;for(je=-112;112>=je;++je)wd[112+je]=-16>je?-16:15<je?15:je;for(je=-255;510>=je;++je)Sd[255+je]=0>je?0:255<je?255:je;_d=1}va=nr,Ja=Ma,Gi=Ls,br=Ao,Rr=ua,cn=Va,un=pa,Cn=Fn,Zo=S,xc=H,Cl=gi,Us=xs,cu=ce,Al=ye,uu=ni,gd=Eo,vc=Io,Ya=Ua,Bo[0]=bl,Bo[1]=Fs,Bo[2]=Go,Bo[3]=Ri,Bo[4]=gs,Bo[5]=jo,Bo[6]=Ln,Bo[7]=ha,Bo[8]=Os,Bo[9]=Er,Li[0]=po,Li[1]=Da,Li[2]=Wa,Li[3]=zs,Li[4]=ko,Li[5]=pi,Li[6]=gn,Ki[0]=qi,Ki[1]=da,Ki[2]=$a,Ki[3]=Ui,Ki[4]=Hi,Ki[5]=Ko,Ki[6]=fa,je=1}else je=0}je&&(je=(function(cr,dn){for(cr.M=0;cr.M<cr.Va;++cr.M){var Zt,lt=cr.Jc[cr.M&cr.Xb],rt=cr.m,xn=cr;for(Zt=0;Zt<xn.za;++Zt){var Ut=rt,ar=xn,Kr=ar.Ac,Kn=ar.Bc+4*Zt,An=ar.zc,rn=ar.ya[ar.aa+Zt];if(ar.Qa.Bb?rn.$b=Pe(Ut,ar.Pa.jb[0])?2+Pe(Ut,ar.Pa.jb[2]):Pe(Ut,ar.Pa.jb[1]):rn.$b=0,ar.kc&&(rn.Ad=Pe(Ut,ar.Bd)),rn.Za=!Pe(Ut,145)+0,rn.Za){var On=rn.Ob,Jn=0;for(ar=0;4>ar;++ar){var Xr,dr=An[0+ar];for(Xr=0;4>Xr;++Xr){dr=Jp[Kr[Kn+Xr]][dr];for(var wr=Oh[Pe(Ut,dr[0])];0<wr;)wr=Oh[2*wr+Pe(Ut,dr[wr])];dr=-wr,Kr[Kn+Xr]=dr}n(On,Jn,Kr,Kn,4),Jn+=4,An[0+ar]=dr}}else dr=Pe(Ut,156)?Pe(Ut,128)?1:3:Pe(Ut,163)?2:0,rn.Ob[0]=dr,o(Kr,Kn,dr,4),o(An,0,dr,4);rn.Dd=Pe(Ut,142)?Pe(Ut,114)?Pe(Ut,183)?1:3:2:0}if(xn.m.Ka)return vr(cr,7,"Premature end-of-partition0 encountered.");for(;cr.ja<cr.za;++cr.ja){if(xn=lt,Ut=(rt=cr).rb[rt.sb-1],Kr=rt.rb[rt.sb+rt.ja],Zt=rt.ya[rt.aa+rt.ja],Kn=rt.kc?Zt.Ad:0)Ut.la=Kr.la=0,Zt.Za||(Ut.Na=Kr.Na=0),Zt.Hc=0,Zt.Gc=0,Zt.ia=0;else{var Zr,Sr;if(Ut=Kr,Kr=xn,Kn=rt.Pa.Xc,An=rt.ya[rt.aa+rt.ja],rn=rt.pb[An.$b],ar=An.ad,On=0,Jn=rt.rb[rt.sb-1],dr=Xr=0,o(ar,On,0,384),An.Za)var hn=0,fn=Kn[3];else{wr=a(16);var Dr=Ut.Na+Jn.Na;if(Dr=el(Kr,Kn[1],Dr,rn.Eb,0,wr,0),Ut.Na=Jn.Na=(0<Dr)+0,1<Dr)va(wr,0,ar,On);else{var vi=wr[0]+3>>3;for(wr=0;256>wr;wr+=16)ar[On+wr]=vi}hn=1,fn=Kn[0]}var Nr=15&Ut.la,Wr=15&Jn.la;for(wr=0;4>wr;++wr){var kn=1&Wr;for(vi=Sr=0;4>vi;++vi)Nr=Nr>>1|(kn=(Dr=el(Kr,fn,Dr=kn+(1&Nr),rn.Sc,hn,ar,On))>hn)<<7,Sr=Sr<<2|(3<Dr?3:1<Dr?2:ar[On+0]!=0),On+=16;Nr>>=4,Wr=Wr>>1|kn<<7,Xr=(Xr<<8|Sr)>>>0}for(fn=Nr,hn=Wr>>4,Zr=0;4>Zr;Zr+=2){for(Sr=0,Nr=Ut.la>>4+Zr,Wr=Jn.la>>4+Zr,wr=0;2>wr;++wr){for(kn=1&Wr,vi=0;2>vi;++vi)Dr=kn+(1&Nr),Nr=Nr>>1|(kn=0<(Dr=el(Kr,Kn[2],Dr,rn.Qc,0,ar,On)))<<3,Sr=Sr<<2|(3<Dr?3:1<Dr?2:ar[On+0]!=0),On+=16;Nr>>=2,Wr=Wr>>1|kn<<5}dr|=Sr<<4*Zr,fn|=Nr<<4<<Zr,hn|=(240&Wr)<<Zr}Ut.la=fn,Jn.la=hn,An.Hc=Xr,An.Gc=dr,An.ia=43690&dr?0:rn.ia,Kn=!(Xr|dr)}if(0<rt.L&&(rt.wa[rt.Y+rt.ja]=rt.gd[Zt.$b][Zt.Za],rt.wa[rt.Y+rt.ja].La|=!Kn),xn.Ka)return vr(cr,7,"Premature end-of-file encountered.")}if(sr(cr),rt=dn,xn=1,Zt=(lt=cr).D,Ut=0<lt.L&&lt.M>=lt.zb&&lt.M<=lt.Va,lt.Aa==0)t:{if(Zt.M=lt.M,Zt.uc=Ut,go(lt,Zt),xn=1,Zt=(Sr=lt.D).Nb,Ut=(dr=nl[lt.L])*lt.R,Kr=dr/2*lt.B,wr=16*Zt*lt.R,vi=8*Zt*lt.B,Kn=lt.sa,An=lt.ta-Ut+wr,rn=lt.qa,ar=lt.ra-Kr+vi,On=lt.Ha,Jn=lt.Ia-Kr+vi,Wr=(Nr=Sr.M)==0,Xr=Nr>=lt.Va-1,lt.Aa==2&&go(lt,Sr),Sr.uc)for(kn=(Dr=lt).D.M,e(Dr.D.uc),Sr=Dr.yb;Sr<Dr.Hb;++Sr){hn=Sr,fn=kn;var oi=(Xi=(wn=Dr).D).Nb;Zr=wn.R;var Xi=Xi.wa[Xi.Y+hn],vn=wn.sa,bn=wn.ta+16*oi*Zr+16*hn,bi=Xi.dd,$r=Xi.tc;if($r!=0)if(e(3<=$r),wn.L==1)0<hn&&gd(vn,bn,Zr,$r+4),Xi.La&&Ya(vn,bn,Zr,$r),0<fn&&uu(vn,bn,Zr,$r+4),Xi.La&&vc(vn,bn,Zr,$r);else{var wi=wn.B,Lo=wn.qa,ts=wn.ra+8*oi*wi+8*hn,Yn=wn.Ha,wn=wn.Ia+8*oi*wi+8*hn;oi=Xi.ld,0<hn&&(Cn(vn,bn,Zr,$r+4,bi,oi),xc(Lo,ts,Yn,wn,wi,$r+4,bi,oi)),Xi.La&&(Us(vn,bn,Zr,$r,bi,oi),Al(Lo,ts,Yn,wn,wi,$r,bi,oi)),0<fn&&(un(vn,bn,Zr,$r+4,bi,oi),Zo(Lo,ts,Yn,wn,wi,$r+4,bi,oi)),Xi.La&&(Cl(vn,bn,Zr,$r,bi,oi),cu(Lo,ts,Yn,wn,wi,$r,bi,oi))}}if(lt.ia&&alert("todo:DitherRow"),rt.put!=null){if(Sr=16*Nr,Nr=16*(Nr+1),Wr?(rt.y=lt.sa,rt.O=lt.ta+wr,rt.f=lt.qa,rt.N=lt.ra+vi,rt.ea=lt.Ha,rt.W=lt.Ia+vi):(Sr-=dr,rt.y=Kn,rt.O=An,rt.f=rn,rt.N=ar,rt.ea=On,rt.W=Jn),Xr||(Nr-=dr),Nr>rt.o&&(Nr=rt.o),rt.F=null,rt.J=null,lt.Fa!=null&&0<lt.Fa.length&&Sr<Nr&&(rt.J=Or(lt,rt,Sr,Nr-Sr),rt.F=lt.mb,rt.F==null&&rt.F.length==0)){xn=vr(lt,3,"Could not decode alpha data.");break t}Sr<rt.j&&(dr=rt.j-Sr,Sr=rt.j,e(!(1&dr)),rt.O+=lt.R*dr,rt.N+=lt.B*(dr>>1),rt.W+=lt.B*(dr>>1),rt.F!=null&&(rt.J+=rt.width*dr)),Sr<Nr&&(rt.O+=rt.v,rt.N+=rt.v>>1,rt.W+=rt.v>>1,rt.F!=null&&(rt.J+=rt.v),rt.ka=Sr-rt.j,rt.U=rt.va-rt.v,rt.T=Nr-Sr,xn=rt.put(rt))}Zt+1!=lt.Ic||Xr||(n(lt.sa,lt.ta-Ut,Kn,An+16*lt.R,Ut),n(lt.qa,lt.ra-Kr,rn,ar+8*lt.B,Kr),n(lt.Ha,lt.Ia-Kr,On,Jn+8*lt.B,Kr))}if(!xn)return vr(cr,6,"Output aborted.")}return 1})(le,Te)),Te.bc!=null&&Te.bc(Te),je&=1}return je?(le.cb=0,je):0})(p,O)||(x=p.a)}}else x=p.a}x==0&&Q.Oa!=null&&Q.Oa.fd&&(x=Sl(Q.ba))}Q=x}Y=Q!=0?null:11>Y?X.f.RGBA.eb:X.f.kb.y}else Y=null;return Y};var jc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(T,V){for(var k="",b=0;b<4;b++)k+=String.fromCharCode(T[V++]);return k}function y(T,V){return T[V+0]|T[V+1]<<8}function w(T,V){return(T[V+0]|T[V+1]<<8|T[V+2]<<16)>>>0}function C(T,V){return(T[V+0]|T[V+1]<<8|T[V+2]<<16|T[V+3]<<24)>>>0}new f;var v=[0],B=[0],I=[],z=new f,A=r,M=(function(T,V){var k={},b=0,N=!1,D=0,q=0;if(k.frames=[],!(function(W,J){for(var re=0;re<4;re++)if(W[J+re]!="RIFF".charCodeAt(re))return!0;return!1})(T,V)){for(C(T,V+=4),V+=8;V<T.length;){var ie=d(T,V),oe=C(T,V+=4);V+=4;var ne=oe+(1&oe);switch(ie){case"VP8 ":case"VP8L":k.frames[b]===void 0&&(k.frames[b]={}),(Z=k.frames[b]).src_off=N?q:V-8,Z.src_size=D+oe+8,b++,N&&(N=!1,D=0,q=0);break;case"VP8X":(Z=k.header={}).feature_flags=T[V];var ve=V+4;Z.canvas_width=1+w(T,ve),ve+=3,Z.canvas_height=1+w(T,ve),ve+=3;break;case"ALPH":N=!0,D=ne+8,q=V-8;break;case"ANIM":(Z=k.header).bgcolor=C(T,V),ve=V+4,Z.loop_count=y(T,ve),ve+=2;break;case"ANMF":var be,Z;(Z=k.frames[b]={}).offset_x=2*w(T,V),V+=3,Z.offset_y=2*w(T,V),V+=3,Z.width=1+w(T,V),V+=3,Z.height=1+w(T,V),V+=3,Z.duration=w(T,V),V+=3,be=T[V++],Z.dispose=1&be,Z.blend=be>>1&1}ie!="ANMF"&&(V+=ne)}return k}})(A,0);M.response=A,M.rgbaoutput=!0,M.dataurl=!1;var U=M.header?M.header:null,F=M.frames?M.frames:null;if(U){U.loop_counter=U.loop_count,v=[U.canvas_height],B=[U.canvas_width];for(var se=0;se<F.length&&F[se].blend!=0;se++);}var ue=F[0],L=z.WebPDecodeRGBA(A,ue.src_off,ue.src_size,B,v);ue.rgba=L,ue.imgwidth=B[0],ue.imgheight=v[0];for(var j=0;j<B[0]*v[0]*4;j++)I[j]=L[j];return this.width=B,this.height=v,this.data=I,this}(function(r){var e,t,n,o,a,c,u,f,d,y=function(W){return W=W||{},this.isStrokeTransparent=W.isStrokeTransparent||!1,this.strokeOpacity=W.strokeOpacity||1,this.strokeStyle=W.strokeStyle||"#000000",this.fillStyle=W.fillStyle||"#000000",this.isFillTransparent=W.isFillTransparent||!1,this.fillOpacity=W.fillOpacity||1,this.font=W.font||"10px sans-serif",this.textBaseline=W.textBaseline||"alphabetic",this.textAlign=W.textAlign||"left",this.lineWidth=W.lineWidth||1,this.lineJoin=W.lineJoin||"miter",this.lineCap=W.lineCap||"butt",this.path=W.path||[],this.transform=W.transform!==void 0?W.transform.clone():new f,this.globalCompositeOperation=W.globalCompositeOperation||"normal",this.globalAlpha=W.globalAlpha||1,this.clip_path=W.clip_path||[],this.currentPoint=W.currentPoint||new c,this.miterLimit=W.miterLimit||10,this.lastPoint=W.lastPoint||new c,this.lineDashOffset=W.lineDashOffset||0,this.lineDash=W.lineDash||[],this.margin=W.margin||[0,0,0,0],this.prevPageLastElemOffset=W.prevPageLastElemOffset||0,this.ignoreClearRect=typeof W.ignoreClearRect!="boolean"||W.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new w(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,c=this.internal.Point,u=this.internal.Rectangle,f=this.internal.Matrix,d=new y}]);var w=function(W){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var J=W;Object.defineProperty(this,"pdf",{get:function(){return J}});var re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return re},set:function(Fe){re=!!Fe}});var he=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return he},set:function(Fe){he=!!Fe}});var ge=0;Object.defineProperty(this,"posX",{get:function(){return ge},set:function(Fe){isNaN(Fe)||(ge=Fe)}});var _e=0;Object.defineProperty(this,"posY",{get:function(){return _e},set:function(Fe){isNaN(Fe)||(_e=Fe)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Fe){var de;typeof Fe=="number"?de=[Fe,Fe,Fe,Fe]:((de=new Array(4))[0]=Fe[0],de[1]=Fe.length>=2?Fe[1]:de[0],de[2]=Fe.length>=3?Fe[2]:de[0],de[3]=Fe.length>=4?Fe[3]:de[1]),d.margin=de}});var fe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return fe},set:function(Fe){fe=Fe}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(Fe){xe=Fe}});var Pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Pe},set:function(Fe){Pe=Fe}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Fe){Fe instanceof y&&(d=Fe)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Fe){d.path=Fe}});var We=[];Object.defineProperty(this,"ctxStack",{get:function(){return We},set:function(Fe){We=Fe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Fe){var de;de=C(Fe),this.ctx.fillStyle=de.style,this.ctx.isFillTransparent=de.a===0,this.ctx.fillOpacity=de.a,this.pdf.setFillColor(de.r,de.g,de.b,{a:de.a}),this.pdf.setTextColor(de.r,de.g,de.b,{a:de.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Fe){var de=C(Fe);this.ctx.strokeStyle=de.style,this.ctx.isStrokeTransparent=de.a===0,this.ctx.strokeOpacity=de.a,de.a===0?this.pdf.setDrawColor(255,255,255):(de.a,this.pdf.setDrawColor(de.r,de.g,de.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Fe){["butt","round","square"].indexOf(Fe)!==-1&&(this.ctx.lineCap=Fe,this.pdf.setLineCap(Fe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Fe){isNaN(Fe)||(this.ctx.lineWidth=Fe,this.pdf.setLineWidth(Fe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Fe){["bevel","round","miter"].indexOf(Fe)!==-1&&(this.ctx.lineJoin=Fe,this.pdf.setLineJoin(Fe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Fe){isNaN(Fe)||(this.ctx.miterLimit=Fe,this.pdf.setMiterLimit(Fe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Fe){this.ctx.textBaseline=Fe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Fe){["right","end","center","left","start"].indexOf(Fe)!==-1&&(this.ctx.textAlign=Fe)}});var Qe=null,Xe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Xe},set:function(Fe){Qe=null,Xe=Fe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Fe){var de;if(this.ctx.font=Fe,(de=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Fe))!==null){var Pt=de[1];de[2];var At=de[3],vt=de[4];de[5];var qe=de[6],nt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(vt)[2];vt=Math.floor(nt==="px"?parseFloat(vt)*this.pdf.internal.scaleFactor:nt==="em"?parseFloat(vt)*this.pdf.getFontSize():parseFloat(vt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(vt);var tt=(function(kt){var ft,Ar,rr=[],dt=kt.trim();if(dt==="")return rm;if(dt in v2)return[v2[dt]];for(;dt!=="";){switch(Ar=null,ft=(dt=w2(dt)).charAt(0)){case'"':case"'":Ar=qT(dt.substring(1),ft);break;default:Ar=HT(dt)}if(Ar===null||(rr.push(Ar[0]),(dt=w2(Ar[1]))!==""&&dt.charAt(0)!==","))return rm;dt=dt.replace(/^,/,"")}return rr})(qe);if(this.fontFaces){var Gt=(function(kt,ft){if(Qe===null){var Ar=(function(rr){var dt=[];return Object.keys(rr).forEach(function($t){rr[$t].forEach(function(ir){var Ct=null;switch(ir){case"bold":Ct={family:$t,weight:"bold"};break;case"italic":Ct={family:$t,style:"italic"};break;case"bolditalic":Ct={family:$t,weight:"bold",style:"italic"};break;case"":case"normal":Ct={family:$t}}Ct!==null&&(Ct.ref={name:$t,style:ir},dt.push(Ct))})}),dt})(kt.getFontList());Qe=(function(rr){for(var dt={},$t=0;$t<rr.length;++$t){var ir=tm(rr[$t]),Ct=ir.family,Xt=ir.stretch,Vt=ir.style,kr=ir.weight;dt[Ct]=dt[Ct]||{},dt[Ct][Xt]=dt[Ct][Xt]||{},dt[Ct][Xt][Vt]=dt[Ct][Xt][Vt]||{},dt[Ct][Xt][Vt][kr]=ir}return dt})(Ar.concat(ft))}return Qe})(this.pdf,this.fontFaces),wt=tt.map(function(kt){return{family:kt,stretch:"normal",weight:At,style:Pt}}),hr=(function(kt,ft,Ar){for(var rr=(Ar=Ar||{}).defaultFontFamily||"times",dt=Object.assign({},UT,Ar.genericFontFamilies||{}),$t=null,ir=null,Ct=0;Ct<ft.length;++Ct)if(dt[($t=tm(ft[Ct])).family]&&($t.family=dt[$t.family]),kt.hasOwnProperty($t.family)){ir=kt[$t.family];break}if(!(ir=ir||kt[rr]))throw new Error("Could not find a font-family for the rule '"+b2($t)+"' and default family '"+rr+"'.");if(ir=(function(Xt,Vt){if(Vt[Xt])return Vt[Xt];var kr=Rm[Xt],Lr=kr<=Rm.normal?-1:1,Mt=x2(Vt,Pv,kr,Lr);if(!Mt)throw new Error("Could not find a matching font-stretch value for "+Xt);return Mt})($t.stretch,ir),ir=(function(Xt,Vt){if(Vt[Xt])return Vt[Xt];for(var kr=Rv[Xt],Lr=0;Lr<kr.length;++Lr)if(Vt[kr[Lr]])return Vt[kr[Lr]];throw new Error("Could not find a matching font-style for "+Xt)})($t.style,ir),!(ir=(function(Xt,Vt){if(Vt[Xt])return Vt[Xt];if(Xt===400&&Vt[500])return Vt[500];if(Xt===500&&Vt[400])return Vt[400];var kr=$T[Xt],Lr=x2(Vt,Nv,kr,Xt<400?-1:1);if(!Lr)throw new Error("Could not find a matching font-weight for value "+Xt);return Lr})($t.weight,ir)))throw new Error("Failed to resolve a font for the rule '"+b2($t)+"'.");return ir})(Gt,wt);this.pdf.setFont(hr.ref.name,hr.ref.style)}else{var Nt="";(At==="bold"||parseInt(At,10)>=700||Pt==="bold")&&(Nt="bold"),Pt==="italic"&&(Nt+="italic"),Nt.length===0&&(Nt="normal");for(var Wt="",yr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ft=0;Ft<tt.length;Ft++){if(this.pdf.internal.getFont(tt[Ft],Nt,{noFallback:!0,disableWarning:!0})!==void 0){Wt=tt[Ft];break}if(Nt==="bolditalic"&&this.pdf.internal.getFont(tt[Ft],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Wt=tt[Ft],Nt="bold";else if(this.pdf.internal.getFont(tt[Ft],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Wt=tt[Ft],Nt="normal";break}}if(Wt===""){for(var St=0;St<tt.length;St++)if(yr[tt[St]]){Wt=yr[tt[St]];break}}Wt=Wt===""?"Times":Wt,this.pdf.setFont(Wt,Nt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Fe){this.ctx.globalCompositeOperation=Fe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Fe){this.ctx.globalAlpha=Fe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Fe){this.ctx.lineDashOffset=Fe,Z.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Fe){this.ctx.lineDash=Fe,Z.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Fe){this.ctx.ignoreClearRect=!!Fe}})};w.prototype.setLineDash=function(W){this.lineDash=W},w.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},w.prototype.fill=function(){F.call(this,"fill",!1)},w.prototype.stroke=function(){F.call(this,"stroke",!1)},w.prototype.beginPath=function(){this.path=[{type:"begin"}]},w.prototype.moveTo=function(W,J){if(isNaN(W)||isNaN(J))throw Qr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var re=this.ctx.transform.applyToPoint(new c(W,J));this.path.push({type:"mt",x:re.x,y:re.y}),this.ctx.lastPoint=new c(W,J)},w.prototype.closePath=function(){var W=new c(0,0),J=0;for(J=this.path.length-1;J!==-1;J--)if(this.path[J].type==="begin"&&qr(this.path[J+1])==="object"&&typeof this.path[J+1].x=="number"){W=new c(this.path[J+1].x,this.path[J+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(W.x,W.y)},w.prototype.lineTo=function(W,J){if(isNaN(W)||isNaN(J))throw Qr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var re=this.ctx.transform.applyToPoint(new c(W,J));this.path.push({type:"lt",x:re.x,y:re.y}),this.ctx.lastPoint=new c(re.x,re.y)},w.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},w.prototype.quadraticCurveTo=function(W,J,re,he){if(isNaN(re)||isNaN(he)||isNaN(W)||isNaN(J))throw Qr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ge=this.ctx.transform.applyToPoint(new c(re,he)),_e=this.ctx.transform.applyToPoint(new c(W,J));this.path.push({type:"qct",x1:_e.x,y1:_e.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new c(ge.x,ge.y)},w.prototype.bezierCurveTo=function(W,J,re,he,ge,_e){if(isNaN(ge)||isNaN(_e)||isNaN(W)||isNaN(J)||isNaN(re)||isNaN(he))throw Qr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var fe=this.ctx.transform.applyToPoint(new c(ge,_e)),xe=this.ctx.transform.applyToPoint(new c(W,J)),Pe=this.ctx.transform.applyToPoint(new c(re,he));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:Pe.x,y2:Pe.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new c(fe.x,fe.y)},w.prototype.arc=function(W,J,re,he,ge,_e){if(isNaN(W)||isNaN(J)||isNaN(re)||isNaN(he)||isNaN(ge))throw Qr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(_e=!!_e,!this.ctx.transform.isIdentity){var fe=this.ctx.transform.applyToPoint(new c(W,J));W=fe.x,J=fe.y;var xe=this.ctx.transform.applyToPoint(new c(0,re)),Pe=this.ctx.transform.applyToPoint(new c(0,0));re=Math.sqrt(Math.pow(xe.x-Pe.x,2)+Math.pow(xe.y-Pe.y,2))}Math.abs(ge-he)>=2*Math.PI&&(he=0,ge=2*Math.PI),this.path.push({type:"arc",x:W,y:J,radius:re,startAngle:he,endAngle:ge,counterclockwise:_e})},w.prototype.arcTo=function(W,J,re,he,ge){throw new Error("arcTo not implemented.")},w.prototype.rect=function(W,J,re,he){if(isNaN(W)||isNaN(J)||isNaN(re)||isNaN(he))throw Qr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(W,J),this.lineTo(W+re,J),this.lineTo(W+re,J+he),this.lineTo(W,J+he),this.lineTo(W,J),this.lineTo(W+re,J),this.lineTo(W,J)},w.prototype.fillRect=function(W,J,re,he){if(isNaN(W)||isNaN(J)||isNaN(re)||isNaN(he))throw Qr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var ge={};this.lineCap!=="butt"&&(ge.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ge.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(W,J,re,he),this.fill(),ge.hasOwnProperty("lineCap")&&(this.lineCap=ge.lineCap),ge.hasOwnProperty("lineJoin")&&(this.lineJoin=ge.lineJoin)}},w.prototype.strokeRect=function(W,J,re,he){if(isNaN(W)||isNaN(J)||isNaN(re)||isNaN(he))throw Qr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");B.call(this)||(this.beginPath(),this.rect(W,J,re,he),this.stroke())},w.prototype.clearRect=function(W,J,re,he){if(isNaN(W)||isNaN(J)||isNaN(re)||isNaN(he))throw Qr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(W,J,re,he))},w.prototype.save=function(W){W=typeof W!="boolean"||W;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("q");if(this.pdf.setPage(J),W){this.ctx.fontSize=this.pdf.internal.getFontSize();var he=new y(this.ctx);this.ctxStack.push(this.ctx),this.ctx=he}},w.prototype.restore=function(W){W=typeof W!="boolean"||W;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("Q");this.pdf.setPage(J),W&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},w.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var C=function(W){var J,re,he,ge;if(W.isCanvasGradient===!0&&(W=W.getColor()),!W)return{r:0,g:0,b:0,a:0,style:W};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(W))J=0,re=0,he=0,ge=0;else{var _e=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(W);if(_e!==null)J=parseInt(_e[1]),re=parseInt(_e[2]),he=parseInt(_e[3]),ge=1;else if((_e=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(W))!==null)J=parseInt(_e[1]),re=parseInt(_e[2]),he=parseInt(_e[3]),ge=parseFloat(_e[4]);else{if(ge=1,typeof W=="string"&&W.charAt(0)!=="#"){var fe=new Tv(W);W=fe.ok?fe.toHex():"#000000"}W.length===4?(J=W.substring(1,2),J+=J,re=W.substring(2,3),re+=re,he=W.substring(3,4),he+=he):(J=W.substring(1,3),re=W.substring(3,5),he=W.substring(5,7)),J=parseInt(J,16),re=parseInt(re,16),he=parseInt(he,16)}}return{r:J,g:re,b:he,a:ge,style:W}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},B=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};w.prototype.fillText=function(W,J,re,he){if(isNaN(J)||isNaN(re)||typeof W!="string")throw Qr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(he=isNaN(he)?void 0:he,!v.call(this)){var ge=ne(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;b.call(this,{text:W,x:J,y:re,scale:_e,angle:ge,align:this.textAlign,maxWidth:he})}},w.prototype.strokeText=function(W,J,re,he){if(isNaN(J)||isNaN(re)||typeof W!="string")throw Qr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!B.call(this)){he=isNaN(he)?void 0:he;var ge=ne(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;b.call(this,{text:W,x:J,y:re,scale:_e,renderingMode:"stroke",angle:ge,align:this.textAlign,maxWidth:he})}},w.prototype.measureText=function(W){if(typeof W!="string")throw Qr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var J=this.pdf,re=this.pdf.internal.scaleFactor,he=J.internal.getFontSize(),ge=J.getStringUnitWidth(W)*he/J.internal.scaleFactor;return new function(_e){var fe=(_e=_e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return fe}}),this}({width:ge*=Math.round(96*re/72*1e4)/1e4})},w.prototype.scale=function(W,J){if(isNaN(W)||isNaN(J))throw Qr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var re=new f(W,0,0,J,0,0);this.ctx.transform=this.ctx.transform.multiply(re)},w.prototype.rotate=function(W){if(isNaN(W))throw Qr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var J=new f(Math.cos(W),Math.sin(W),-Math.sin(W),Math.cos(W),0,0);this.ctx.transform=this.ctx.transform.multiply(J)},w.prototype.translate=function(W,J){if(isNaN(W)||isNaN(J))throw Qr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var re=new f(1,0,0,1,W,J);this.ctx.transform=this.ctx.transform.multiply(re)},w.prototype.transform=function(W,J,re,he,ge,_e){if(isNaN(W)||isNaN(J)||isNaN(re)||isNaN(he)||isNaN(ge)||isNaN(_e))throw Qr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var fe=new f(W,J,re,he,ge,_e);this.ctx.transform=this.ctx.transform.multiply(fe)},w.prototype.setTransform=function(W,J,re,he,ge,_e){W=isNaN(W)?1:W,J=isNaN(J)?0:J,re=isNaN(re)?0:re,he=isNaN(he)?1:he,ge=isNaN(ge)?0:ge,_e=isNaN(_e)?0:_e,this.ctx.transform=new f(W,J,re,he,ge,_e)};var I=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};w.prototype.drawImage=function(W,J,re,he,ge,_e,fe,xe,Pe){var We=this.pdf.getImageProperties(W),Qe=1,Xe=1,Fe=1,de=1;he!==void 0&&xe!==void 0&&(Fe=xe/he,de=Pe/ge,Qe=We.width/he*xe/he,Xe=We.height/ge*Pe/ge),_e===void 0&&(_e=J,fe=re,J=0,re=0),he!==void 0&&xe===void 0&&(xe=he,Pe=ge),he===void 0&&xe===void 0&&(xe=We.width,Pe=We.height);for(var Pt,At=this.ctx.transform.decompose(),vt=ne(At.rotate.shx),qe=new f,nt=(qe=(qe=(qe=qe.multiply(At.translate)).multiply(At.skew)).multiply(At.scale)).applyToRectangle(new u(_e-J*Fe,fe-re*de,he*Qe,ge*Xe)),tt=z.call(this,nt),Gt=[],wt=0;wt<tt.length;wt+=1)Gt.indexOf(tt[wt])===-1&&Gt.push(tt[wt]);if(U(Gt),this.autoPaging)for(var hr=Gt[0],Nt=Gt[Gt.length-1],Wt=hr;Wt<Nt+1;Wt++){this.pdf.setPage(Wt);var yr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ft=Wt===1?this.posY+this.margin[0]:this.margin[0],St=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=Wt===1?0:St+(Wt-2)*kt;if(this.ctx.clip_path.length!==0){var Ar=this.path;Pt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(Pt,this.posX+this.margin[3],-ft+Ft+this.ctx.prevPageLastElemOffset),se.call(this,"fill",!0),this.path=Ar}var rr=JSON.parse(JSON.stringify(nt));rr=M([rr],this.posX+this.margin[3],-ft+Ft+this.ctx.prevPageLastElemOffset)[0];var dt=(Wt>hr||Wt<Nt)&&I.call(this);dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yr,kt,null).clip().discardPath()),this.pdf.addImage(W,"JPEG",rr.x,rr.y,rr.w,rr.h,null,null,vt),dt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(W,"JPEG",nt.x,nt.y,nt.w,nt.h,null,null,vt)};var z=function(W,J,re){var he=[];J=J||this.pdf.internal.pageSize.width,re=re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ge=this.posY+this.ctx.prevPageLastElemOffset;switch(W.type){default:case"mt":case"lt":he.push(Math.floor((W.y+ge)/re)+1);break;case"arc":he.push(Math.floor((W.y+ge-W.radius)/re)+1),he.push(Math.floor((W.y+ge+W.radius)/re)+1);break;case"qct":var _e=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,W.x1,W.y1,W.x,W.y);he.push(Math.floor((_e.y+ge)/re)+1),he.push(Math.floor((_e.y+_e.h+ge)/re)+1);break;case"bct":var fe=be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,W.x1,W.y1,W.x2,W.y2,W.x,W.y);he.push(Math.floor((fe.y+ge)/re)+1),he.push(Math.floor((fe.y+fe.h+ge)/re)+1);break;case"rect":he.push(Math.floor((W.y+ge)/re)+1),he.push(Math.floor((W.y+W.h+ge)/re)+1)}for(var xe=0;xe<he.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<he[xe];)A.call(this);return he},A=function(){var W=this.fillStyle,J=this.strokeStyle,re=this.font,he=this.lineCap,ge=this.lineWidth,_e=this.lineJoin;this.pdf.addPage(),this.fillStyle=W,this.strokeStyle=J,this.font=re,this.lineCap=he,this.lineWidth=ge,this.lineJoin=_e},M=function(W,J,re){for(var he=0;he<W.length;he++)switch(W[he].type){case"bct":W[he].x2+=J,W[he].y2+=re;case"qct":W[he].x1+=J,W[he].y1+=re;default:W[he].x+=J,W[he].y+=re}return W},U=function(W){return W.sort(function(J,re){return J-re})},F=function(W,J){for(var re,he,ge=this.fillStyle,_e=this.strokeStyle,fe=this.lineCap,xe=this.lineWidth,Pe=Math.abs(xe*this.ctx.transform.scaleX),We=this.lineJoin,Qe=JSON.parse(JSON.stringify(this.path)),Xe=JSON.parse(JSON.stringify(this.path)),Fe=[],de=0;de<Xe.length;de++)if(Xe[de].x!==void 0)for(var Pt=z.call(this,Xe[de]),At=0;At<Pt.length;At+=1)Fe.indexOf(Pt[At])===-1&&Fe.push(Pt[At]);for(var vt=0;vt<Fe.length;vt++)for(;this.pdf.internal.getNumberOfPages()<Fe[vt];)A.call(this);if(U(Fe),this.autoPaging)for(var qe=Fe[0],nt=Fe[Fe.length-1],tt=qe;tt<nt+1;tt++){this.pdf.setPage(tt),this.fillStyle=ge,this.strokeStyle=_e,this.lineCap=fe,this.lineWidth=Pe,this.lineJoin=We;var Gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],wt=tt===1?this.posY+this.margin[0]:this.margin[0],hr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Wt=tt===1?0:hr+(tt-2)*Nt;if(this.ctx.clip_path.length!==0){var yr=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(re,this.posX+this.margin[3],-Wt+wt+this.ctx.prevPageLastElemOffset),se.call(this,W,!0),this.path=yr}if(he=JSON.parse(JSON.stringify(Qe)),this.path=M(he,this.posX+this.margin[3],-Wt+wt+this.ctx.prevPageLastElemOffset),J===!1||tt===0){var Ft=(tt>qe||tt<nt)&&I.call(this);Ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Gt,Nt,null).clip().discardPath()),se.call(this,W,J),Ft&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}else this.lineWidth=Pe,se.call(this,W,J),this.lineWidth=xe;this.path=Qe},se=function(W,J){if((W!=="stroke"||J||!B.call(this))&&(W==="stroke"||J||!v.call(this))){for(var re,he,ge=[],_e=this.path,fe=0;fe<_e.length;fe++){var xe=_e[fe];switch(xe.type){case"begin":ge.push({begin:!0});break;case"close":ge.push({close:!0});break;case"mt":ge.push({start:xe,deltas:[],abs:[]});break;case"lt":var Pe=ge.length;if(_e[fe-1]&&!isNaN(_e[fe-1].x)&&(re=[xe.x-_e[fe-1].x,xe.y-_e[fe-1].y],Pe>0)){for(;Pe>=0;Pe--)if(ge[Pe-1].close!==!0&&ge[Pe-1].begin!==!0){ge[Pe-1].deltas.push(re),ge[Pe-1].abs.push(xe);break}}break;case"bct":re=[xe.x1-_e[fe-1].x,xe.y1-_e[fe-1].y,xe.x2-_e[fe-1].x,xe.y2-_e[fe-1].y,xe.x-_e[fe-1].x,xe.y-_e[fe-1].y],ge[ge.length-1].deltas.push(re);break;case"qct":var We=_e[fe-1].x+2/3*(xe.x1-_e[fe-1].x),Qe=_e[fe-1].y+2/3*(xe.y1-_e[fe-1].y),Xe=xe.x+2/3*(xe.x1-xe.x),Fe=xe.y+2/3*(xe.y1-xe.y),de=xe.x,Pt=xe.y;re=[We-_e[fe-1].x,Qe-_e[fe-1].y,Xe-_e[fe-1].x,Fe-_e[fe-1].y,de-_e[fe-1].x,Pt-_e[fe-1].y],ge[ge.length-1].deltas.push(re);break;case"arc":ge.push({deltas:[],abs:[],arc:!0}),Array.isArray(ge[ge.length-1].abs)&&ge[ge.length-1].abs.push(xe)}}he=J?null:W==="stroke"?"stroke":"fill";for(var At=!1,vt=0;vt<ge.length;vt++)if(ge[vt].arc)for(var qe=ge[vt].abs,nt=0;nt<qe.length;nt++){var tt=qe[nt];tt.type==="arc"?j.call(this,tt.x,tt.y,tt.radius,tt.startAngle,tt.endAngle,tt.counterclockwise,void 0,J,!At):N.call(this,tt.x,tt.y),At=!0}else if(ge[vt].close===!0)this.pdf.internal.out("h"),At=!1;else if(ge[vt].begin!==!0){var Gt=ge[vt].start.x,wt=ge[vt].start.y;D.call(this,ge[vt].deltas,Gt,wt),At=!0}he&&T.call(this,he),J&&V.call(this)}},ue=function(W){var J=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,re=J*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return W-re;case"top":return W+J-re;case"hanging":return W+J-2*re;case"middle":return W+J/2-re;default:return W}},L=function(W){return W+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};w.prototype.createLinearGradient=function(){var W=function(){};return W.colorStops=[],W.addColorStop=function(J,re){this.colorStops.push([J,re])},W.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},W.isCanvasGradient=!0,W},w.prototype.createPattern=function(){return this.createLinearGradient()},w.prototype.createRadialGradient=function(){return this.createLinearGradient()};var j=function(W,J,re,he,ge,_e,fe,xe,Pe){for(var We=ie.call(this,re,he,ge,_e),Qe=0;Qe<We.length;Qe++){var Xe=We[Qe];Qe===0&&(Pe?k.call(this,Xe.x1+W,Xe.y1+J):N.call(this,Xe.x1+W,Xe.y1+J)),q.call(this,W,J,Xe.x2,Xe.y2,Xe.x3,Xe.y3,Xe.x4,Xe.y4)}xe?V.call(this):T.call(this,fe)},T=function(W){switch(W){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(W,J){this.pdf.internal.out(t(W)+" "+n(J)+" m")},b=function(W){var J;switch(W.align){case"right":case"end":J="right";break;case"center":J="center";break;default:J="left"}var re=this.pdf.getTextDimensions(W.text),he=ue.call(this,W.y),ge=L.call(this,he)-re.h,_e=this.ctx.transform.applyToPoint(new c(W.x,he)),fe=this.ctx.transform.decompose(),xe=new f;xe=(xe=(xe=xe.multiply(fe.translate)).multiply(fe.skew)).multiply(fe.scale);for(var Pe,We,Qe,Xe=this.ctx.transform.applyToRectangle(new u(W.x,he,re.w,re.h)),Fe=xe.applyToRectangle(new u(W.x,ge,re.w,re.h)),de=z.call(this,Fe),Pt=[],At=0;At<de.length;At+=1)Pt.indexOf(de[At])===-1&&Pt.push(de[At]);if(U(Pt),this.autoPaging)for(var vt=Pt[0],qe=Pt[Pt.length-1],nt=vt;nt<qe+1;nt++){this.pdf.setPage(nt);var tt=nt===1?this.posY+this.margin[0]:this.margin[0],Gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wt=this.pdf.internal.pageSize.height-this.margin[2],hr=wt-this.margin[0],Nt=this.pdf.internal.pageSize.width-this.margin[1],Wt=Nt-this.margin[3],yr=nt===1?0:Gt+(nt-2)*hr;if(this.ctx.clip_path.length!==0){var Ft=this.path;Pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(Pe,this.posX+this.margin[3],-1*yr+tt),se.call(this,"fill",!0),this.path=Ft}var St=M([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-yr+tt+this.ctx.prevPageLastElemOffset)[0];W.scale>=.01&&(We=this.pdf.internal.getFontSize(),this.pdf.setFontSize(We*W.scale),Qe=this.lineWidth,this.lineWidth=Qe*W.scale);var kt=this.autoPaging!=="text";if(kt||St.y+St.h<=wt){if(kt||St.y>=tt&&St.x<=Nt){var ft=kt?W.text:this.pdf.splitTextToSize(W.text,W.maxWidth||Nt-St.x)[0],Ar=M([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-yr+tt+this.ctx.prevPageLastElemOffset)[0],rr=kt&&(nt>vt||nt<qe)&&I.call(this);rr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Wt,hr,null).clip().discardPath()),this.pdf.text(ft,Ar.x,Ar.y,{angle:W.angle,align:J,renderingMode:W.renderingMode}),rr&&this.pdf.restoreGraphicsState()}}else St.y<wt&&(this.ctx.prevPageLastElemOffset+=wt-St.y);W.scale>=.01&&(this.pdf.setFontSize(We),this.lineWidth=Qe)}else W.scale>=.01&&(We=this.pdf.internal.getFontSize(),this.pdf.setFontSize(We*W.scale),Qe=this.lineWidth,this.lineWidth=Qe*W.scale),this.pdf.text(W.text,_e.x+this.posX,_e.y+this.posY,{angle:W.angle,align:J,renderingMode:W.renderingMode,maxWidth:W.maxWidth}),W.scale>=.01&&(this.pdf.setFontSize(We),this.lineWidth=Qe)},N=function(W,J,re,he){re=re||0,he=he||0,this.pdf.internal.out(t(W+re)+" "+n(J+he)+" l")},D=function(W,J,re){return this.pdf.lines(W,J,re,null,null)},q=function(W,J,re,he,ge,_e,fe,xe){this.pdf.internal.out([e(o(re+W)),e(a(he+J)),e(o(ge+W)),e(a(_e+J)),e(o(fe+W)),e(a(xe+J)),"c"].join(" "))},ie=function(W,J,re,he){for(var ge=2*Math.PI,_e=Math.PI/2;J>re;)J-=ge;var fe=Math.abs(re-J);fe<ge&&he&&(fe=ge-fe);for(var xe=[],Pe=he?-1:1,We=J;fe>1e-5;){var Qe=We+Pe*Math.min(fe,_e);xe.push(oe.call(this,W,We,Qe)),fe-=Math.abs(Qe-We),We=Qe}return xe},oe=function(W,J,re){var he=(re-J)/2,ge=W*Math.cos(he),_e=W*Math.sin(he),fe=ge,xe=-_e,Pe=fe*fe+xe*xe,We=Pe+fe*ge+xe*_e,Qe=4/3*(Math.sqrt(2*Pe*We)-We)/(fe*_e-xe*ge),Xe=fe-Qe*xe,Fe=xe+Qe*fe,de=Xe,Pt=-Fe,At=he+J,vt=Math.cos(At),qe=Math.sin(At);return{x1:W*Math.cos(J),y1:W*Math.sin(J),x2:Xe*vt-Fe*qe,y2:Xe*qe+Fe*vt,x3:de*vt-Pt*qe,y3:de*qe+Pt*vt,x4:W*Math.cos(re),y4:W*Math.sin(re)}},ne=function(W){return 180*W/Math.PI},ve=function(W,J,re,he,ge,_e){var fe=W+.5*(re-W),xe=J+.5*(he-J),Pe=ge+.5*(re-ge),We=_e+.5*(he-_e),Qe=Math.min(W,ge,fe,Pe),Xe=Math.max(W,ge,fe,Pe),Fe=Math.min(J,_e,xe,We),de=Math.max(J,_e,xe,We);return new u(Qe,Fe,Xe-Qe,de-Fe)},be=function(W,J,re,he,ge,_e,fe,xe){var Pe,We,Qe,Xe,Fe,de,Pt,At,vt,qe,nt,tt,Gt,wt,hr=re-W,Nt=he-J,Wt=ge-re,yr=_e-he,Ft=fe-ge,St=xe-_e;for(We=0;We<41;We++)vt=(Pt=(Qe=W+(Pe=We/40)*hr)+Pe*((Fe=re+Pe*Wt)-Qe))+Pe*(Fe+Pe*(ge+Pe*Ft-Fe)-Pt),qe=(At=(Xe=J+Pe*Nt)+Pe*((de=he+Pe*yr)-Xe))+Pe*(de+Pe*(_e+Pe*St-de)-At),We==0?(nt=vt,tt=qe,Gt=vt,wt=qe):(nt=Math.min(nt,vt),tt=Math.min(tt,qe),Gt=Math.max(Gt,vt),wt=Math.max(wt,qe));return new u(Math.round(nt),Math.round(tt),Math.round(Gt-nt),Math.round(wt-tt))},Z=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var W,J,re=(W=this.ctx.lineDash,J=this.ctx.lineDashOffset,JSON.stringify({lineDash:W,lineDashOffset:J}));this.prevLineDash!==re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=re)}}})(Tt.API),(function(r){var e=function(c){var u,f,d,y,w,C,v,B,I,z;for(f=[],d=0,y=(c+=u="\0\0\0\0".slice(c.length%4||4)).length;y>d;d+=4)(w=(c.charCodeAt(d)<<24)+(c.charCodeAt(d+1)<<16)+(c.charCodeAt(d+2)<<8)+c.charCodeAt(d+3))!==0?(C=(w=((w=((w=((w=(w-(z=w%85))/85)-(I=w%85))/85)-(B=w%85))/85)-(v=w%85))/85)%85,f.push(C+33,v+33,B+33,I+33,z+33)):f.push(122);return(function(A,M){for(var U=M;U>0;U--)A.pop()})(f,u.length),String.fromCharCode.apply(String,f)+"~>"},t=function(c){var u,f,d,y,w,C=String,v="length",B=255,I="charCodeAt",z="slice",A="replace";for(c[z](-2),c=c[z](0,-2)[A](/\s/g,"")[A]("z","!!!!!"),d=[],y=0,w=(c+=u="uuuuu"[z](c[v]%5||5))[v];w>y;y+=5)f=52200625*(c[I](y)-33)+614125*(c[I](y+1)-33)+7225*(c[I](y+2)-33)+85*(c[I](y+3)-33)+(c[I](y+4)-33),d.push(B&f>>24,B&f>>16,B&f>>8,B&f);return(function(M,U){for(var F=U;F>0;F--)M.pop()})(d,u[v]),C.fromCharCode.apply(C,d)},n=function(c){return c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},o=function(c){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),u.test(c)===!1)return"";for(var f="",d=0;d<c.length;d+=2)f+=String.fromCharCode("0x"+(c[d]+c[d+1]));return f},a=function(c){for(var u=new Uint8Array(c.length),f=c.length;f--;)u[f]=c.charCodeAt(f);return(u=Tm(u)).reduce(function(d,y){return d+String.fromCharCode(y)},"")};r.processDataByFilters=function(c,u){var f=0,d=c||"",y=[];for(typeof(u=u||[])=="string"&&(u=[u]),f=0;f<u.length;f+=1)switch(u[f]){case"ASCII85Decode":case"/ASCII85Decode":d=t(d),y.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),y.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=o(d),y.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=n(d),y.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=a(d),y.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[f]+'" is not implemented')}return{data:d,reverseChain:y.reverse().join(" ")}}})(Tt.API),(function(r){r.loadFile=function(e,t,n){return(function(o,a,c){a=a!==!1,c=typeof c=="function"?c:function(){};var u=void 0;try{u=(function(f,d,y){var w=new XMLHttpRequest,C=0,v=function(B){var I=B.length,z=[],A=String.fromCharCode;for(C=0;C<I;C+=1)z.push(A(255&B.charCodeAt(C)));return z.join("")};if(w.open("GET",f,!d),w.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(w.onload=function(){w.status===200?y(v(this.responseText)):y(void 0)}),w.send(null),d&&w.status===200)return v(w.responseText)})(o,a,c)}catch{}return u})(e,t,n)},r.loadImageFile=r.loadFile})(Tt.API),(function(r){function e(){return(Jt.html2canvas?Promise.resolve(Jt.html2canvas):Dc(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function t(){return(Jt.DOMPurify?Promise.resolve(Jt.DOMPurify):Dc(()=>import("./purify.es-aGzT-_H7.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var n=function(u){var f=qr(u);return f==="undefined"?"undefined":f==="string"||u instanceof String?"string":f==="number"||u instanceof Number?"number":f==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":f==="object"?"object":"unknown"},o=function(u,f){var d=document.createElement(u);for(var y in f.className&&(d.className=f.className),f.innerHTML&&f.dompurify&&(d.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)d.style[y]=f.style[y];return d},a=function u(f,d){for(var y=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),w=f.firstChild;w;w=w.nextSibling)d!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||y.appendChild(u(w,d));return f.nodeType===1&&(f.nodeName==="CANVAS"?(y.width=f.width,y.height=f.height,y.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(y.value=f.value),y.addEventListener("load",function(){y.scrollTop=f.scrollTop,y.scrollLeft=f.scrollLeft},!0)),y},c=function u(f){var d=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),y=u.convert(Promise.resolve(),d);return(y=y.setProgress(1,u,1,[u])).set(f)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(u,f){return u.__proto__=f||c.prototype,u},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(u,f){return this.then(function(){switch(f=f||(function(d){switch(n(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(u),f){case"string":return this.then(t).then(function(d){return this.set({src:o("div",{innerHTML:u,dompurify:d})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},c.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(f){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,f(this.prop.container,d)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(f){var d=this.opt.jsPDF,y=this.opt.fontFaces,w=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,C=Object.assign({async:!0,allowTaint:!0,scale:w,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete C.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=y,y)for(var v=0;v<y.length;++v){var B=y[v],I=B.src.find(function(z){return z.format==="truetype"});I&&d.addFont(I.url,B.ref.name,B.ref.style)}return C.windowHeight=C.windowHeight||0,C.windowHeight=C.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):C.windowHeight,d.context2d.save(!0),f(this.prop.container,C)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(u,f,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(u,f):this.outputPdf(u,f)},c.prototype.outputPdf=function(u,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,f)})},c.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},c.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(u){if(n(u)!=="object")return this;var f=Object.keys(u||{}).map(function(d){if(d in c.template.prop)return function(){this.prop[d]=u[d]};switch(d){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[d]=u[d]}}},this);return this.then(function(){return this.thenList(f)})},c.prototype.get=function(u,f){return this.then(function(){var d=u in c.template.prop?this.prop[u]:this.opt[u];return f?f(d):d})},c.prototype.setMargin=function(u){return this.then(function(){switch(n(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},c.prototype.setPageSize=function(u){function f(d,y){return Math.floor(d*y/72*96)}return this.then(function(){(u=u||Tt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:f(u.inner.width,u.k),height:f(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},c.prototype.setProgress=function(u,f,d,y){return u!=null&&(this.progress.val=u),f!=null&&(this.progress.state=f),d!=null&&(this.progress.n=d),y!=null&&(this.progress.stack=y),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(u,f,d,y){return this.setProgress(u?this.progress.val+u:null,f||null,d?this.progress.n+d:null,y?this.progress.stack.concat(y):null)},c.prototype.then=function(u,f){var d=this;return this.thenCore(u,f,function(y,w){return d.updateProgress(null,null,1,[y]),Promise.prototype.then.call(this,function(C){return d.updateProgress(null,y),C}).then(y,w).then(function(C){return d.updateProgress(1),C})})},c.prototype.thenCore=function(u,f,d){d=d||Promise.prototype.then;var y=this;u&&(u=u.bind(y)),f&&(f=f.bind(y));var w=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?y:c.convert(Object.assign({},y),Promise.prototype),C=d.call(w,u,f);return c.convert(C,y.__proto__)},c.prototype.thenExternal=function(u,f){return Promise.prototype.then.call(this,u,f)},c.prototype.thenList=function(u){var f=this;return u.forEach(function(d){f=f.thenCore(d)}),f},c.prototype.catch=function(u){u&&(u=u.bind(this));var f=Promise.prototype.catch.call(this,u);return c.convert(f,this)},c.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},c.prototype.error=function(u){return this.then(function(){throw new Error(u)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,Tt.getPageSize=function(u,f,d){if(qr(u)==="object"){var y=u;u=y.orientation,f=y.unit||f,d=y.format||d}f=f||"mm",d=d||"a4",u=(""+(u||"P")).toLowerCase();var w,C=(""+d).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":w=1;break;case"mm":w=72/25.4;break;case"cm":w=72/2.54;break;case"in":w=72;break;case"px":w=.75;break;case"pc":case"em":w=12;break;case"ex":w=6;break;default:throw"Invalid unit: "+f}var B,I=0,z=0;if(v.hasOwnProperty(C))I=v[C][1]/w,z=v[C][0]/w;else try{I=d[1],z=d[0]}catch{throw new Error("Invalid format: "+d)}if(u==="p"||u==="portrait")u="p",z>I&&(B=z,z=I,I=B);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",I>z&&(B=z,z=I,I=B)}return{width:z,height:I,unit:f,k:w,orientation:u}},r.html=function(u,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(tm):null;var d=new c(f);return f.worker?d:d.from(u).doCallback()}})(Tt.API),Tt.API.addJS=function(r){return _2=r,this.internal.events.subscribe("postPutResources",function(){Tf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Tf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),S2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+_2+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Tf!==void 0&&S2!==void 0&&this.internal.out("/Names <</JavaScript "+Tf+" 0 R>>")}),this},(function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=t.outline.render().split(/\r\n/),a=0;a<o.length;a++){var c=o[a],u=n.exec(c);if(u!=null){var f=u[1];t.internal.newObjectDeferredBegin(f,!1)}t.internal.write(c)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,y=[];for(a=0;a<d;a++){var w=t.internal.newObject();y.push(w);var C=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+C.objId+" 0 R /XYZ null null null]>> endobj")}var v=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<y.length;a++)t.internal.write("(page_"+(a+1)+")"+y[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+v+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,o,a){var c={title:o,options:a,children:[]};return n==null&&(n=this.root),n.children.push(c),c},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var o=0;o<n.children.length;o++)this.genIds_r(n.children[o])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var c=n.children[a];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var u=this.count=this.count_r({count:0},c);if(u>0&&this.line("/Count "+u),c.options&&c.options.pageNumber){var f=t.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,o){for(var a=0;a<o.children.length;a++)n.count++,this.count_r(n,o.children[a]);return n.count}}])})(Tt.API),(function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,o,a,c,u){var f,d=this.decode.DCT_DECODE,y=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=c||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,f=(function(w){for(var C,v=256*w.charCodeAt(4)+w.charCodeAt(5),B=w.length,I={width:0,height:0,numcomponents:1},z=4;z<B;z+=2){if(z+=v,e.indexOf(w.charCodeAt(z+1))!==-1){C=256*w.charCodeAt(z+5)+w.charCodeAt(z+6),I={width:256*w.charCodeAt(z+7)+w.charCodeAt(z+8),height:C,numcomponents:w.charCodeAt(z+9)};break}v=256*w.charCodeAt(z+2)+w.charCodeAt(z+3)}return I})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),f.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}y={data:t,width:f.width,height:f.height,colorSpace:u,bitsPerComponent:8,filter:d,index:n,alias:o}}return y}})(Tt.API),Tt.API.processPNG=function(r,e,t,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var o,a=ET(r,{checkCrc:!0}),c=a.width,u=a.height,f=a.channels,d=a.palette,y=a.depth;o=d&&f===1?(function(j){for(var T=j.width,V=j.height,k=j.data,b=j.palette,N=j.depth,D=!1,q=[],ie=[],oe=void 0,ne=!1,ve=0,be=0;be<b.length;be++){var Z=k5(b[be],4),W=Z[0],J=Z[1],re=Z[2],he=Z[3];q.push(W,J,re),he!=null&&(he===0?(ve++,ie.length<1&&ie.push(be)):he<255&&(ne=!0))}if(ne||ve>1){D=!0,ie=void 0;var ge=T*V;oe=new Uint8Array(ge);for(var _e=new DataView(k.buffer),fe=0;fe<ge;fe++){var xe=nm(_e,fe,N),Pe=k5(b[xe],4)[3];oe[fe]=Pe}}else ve===0&&(ie=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:D?8:void 0,colorBytes:k,alphaBytes:oe,needSMask:D,palette:q,mask:ie}})(a):f===2||f===4?(function(j){for(var T=j.data,V=j.width,k=j.height,b=j.channels,N=j.depth,D=b===2?"DeviceGray":"DeviceRGB",q=b-1,ie=V*k,oe=q,ne=ie*oe,ve=1*ie,be=Math.ceil(ne*N/8),Z=Math.ceil(ve*N/8),W=new Uint8Array(be),J=new Uint8Array(Z),re=new DataView(T.buffer),he=new DataView(W.buffer),ge=new DataView(J.buffer),_e=!1,fe=0;fe<ie;fe++){for(var xe=fe*b,Pe=0;Pe<oe;Pe++)P2(he,nm(re,xe+Pe,N),fe*oe+Pe,N);var We=nm(re,xe+oe,N);We<(1<<N)-1&&(_e=!0),P2(ge,We,1*fe,N)}return{colorSpace:D,colorsPerPixel:q,sMaskBitsPerComponent:_e?N:void 0,colorBytes:W,alphaBytes:J,needSMask:_e}})(a):(function(j){var T=j.data,V=j.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:V,colorsPerPixel:V==="DeviceGray"?1:3,colorBytes:T instanceof Uint16Array?(function(k){for(var b=k.length,N=new Uint8Array(2*b),D=new DataView(N.buffer,N.byteOffset,N.byteLength),q=0;q<b;q++)D.setUint16(2*q,k[q],!1);return N})(T):T,needSMask:!1}})(a);var w,C,v,B=o,I=B.colorSpace,z=B.colorsPerPixel,A=B.sMaskBitsPerComponent,M=B.colorBytes,U=B.alphaBytes,F=B.needSMask,se=B.palette,ue=B.mask,L=null;return n!==Tt.API.image_compression.NONE&&typeof Tm=="function"?(L=(function(j){var T;switch(j){case Tt.API.image_compression.FAST:T=11;break;case Tt.API.image_compression.MEDIUM:T=13;break;case Tt.API.image_compression.SLOW:T=14;break;default:T=12}return T})(n),w=this.decode.FLATE_DECODE,C="/Predictor ".concat(L," /Colors ").concat(z," /BitsPerComponent ").concat(y," /Columns ").concat(c),r=k2(M,Math.ceil(c*z*y/8),z,y,n),F&&(v=k2(U,Math.ceil(c*A/8),1,A,n))):(w=void 0,C=void 0,r=M,F&&(v=U)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(v&&this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),{alias:t,data:r,index:e,filter:w,decodeParameters:C,transparency:ue,palette:se,sMask:v,predictor:L,width:c,height:u,bitsPerComponent:y,sMaskBitsPerComponent:A,colorSpace:I}}},(function(r){r.processGIF89A=function(e,t,n,o){var a=new YT(e),c=a.width,u=a.height,f=[];a.decodeAndBlitFrameRGBA(0,f);var d={data:f,width:c,height:u},y=new im(100).encode(d,100);return r.processJPEG.call(this,y,t,n,o)},r.processGIF87A=r.processGIF89A})(Tt.API),ea.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:n,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ea.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){Qr.log("bit decode error:"+t)}},ea.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,o=0;o<e;o++)for(var a=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+8*o*4,u=0;u<8&&8*o+u<this.width;u++){var f=this.palette[a>>7-u&1];this.data[c+4*u]=f.blue,this.data[c+4*u+1]=f.green,this.data[c+4*u+2]=f.red,this.data[c+4*u+3]=255}t!==0&&(this.pos+=4-t)}},ea.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,o=0;o<r;o++){var a=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+2*o*4,u=a>>4,f=15&a,d=this.palette[u];if(this.data[c]=d.blue,this.data[c+1]=d.green,this.data[c+2]=d.red,this.data[c+3]=255,2*o+1>=this.width)break;d=this.palette[f],this.data[c+4]=d.blue,this.data[c+4+1]=d.green,this.data[c+4+2]=d.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},ea.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var o=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;if(o<this.palette.length){var c=this.palette[o];this.data[a]=c.red,this.data[a+1]=c.green,this.data[a+2]=c.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}r!==0&&(this.pos+=4-r)}},ea.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(a&e)/e*255|0,u=(a>>5&e)/e*255|0,f=(a>>10&e)/e*255|0,d=a>>15?255:0,y=n*this.width*4+4*o;this.data[y]=f,this.data[y+1]=u,this.data[y+2]=c,this.data[y+3]=d}this.pos+=r}},ea.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var o=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(c&e)/e*255|0,f=(c>>5&t)/t*255|0,d=(c>>11)/e*255|0,y=o*this.width*4+4*a;this.data[y]=d,this.data[y+1]=f,this.data[y+2]=u,this.data[y+3]=255}this.pos+=r}},ea.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=a,this.data[c+1]=o,this.data[c+2]=n,this.data[c+3]=255}this.pos+=this.width%4}},ea.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=a,this.data[u+1]=o,this.data[u+2]=n,this.data[u+3]=c}},ea.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(e,t,n,o){var a=new ea(e,!1),c=a.width,u=a.height,f={data:a.getData(),width:c,height:u},d=new im(100).encode(f,100);return r.processJPEG.call(this,d,t,n,o)}})(Tt.API),B2.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(e,t,n,o){var a=new B2(e),c=a.width,u=a.height,f={data:a.getData(),width:c,height:u},d=new im(100).encode(f,100);return r.processJPEG.call(this,d,t,n,o)}})(Tt.API),Tt.API.processRGBA=function(r,e,t){for(var n=r.data,o=n.length,a=new Uint8Array(o/4*3),c=new Uint8Array(o/4),u=0,f=0,d=0;d<o;d+=4){var y=n[d],w=n[d+1],C=n[d+2],v=n[d+3];a[u++]=y,a[u++]=w,a[u++]=C,c[f++]=v}var B=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:B,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Tt.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Pu=Tt.API,Cf=Pu.getCharWidthsArray=function(r,e){var t,n,o=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:o.metadata.Unicode.widths,f=u.fof?u.fof:1,d=e.kerning?e.kerning:o.metadata.Unicode.kerning,y=d.fof?d.fof:1,w=e.doKerning!==!1,C=0,v=r.length,B=0,I=u[0]||f,z=[];for(t=0;t<v;t++)n=r.charCodeAt(t),typeof o.metadata.widthOfString=="function"?z.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(n))+c*(1e3/a)||0)/1e3):(C=w&&qr(d[n])==="object"&&!isNaN(parseInt(d[n][B],10))?d[n][B]/y:0,z.push((u[n]||I)/f+C)),B=n;return z},T2=Pu.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return Pu.processArabic&&(r=Pu.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,o)/t:Cf.apply(this,arguments).reduce(function(a,c){return a+c},0)},C2=function(r,e,t,n){for(var o=[],a=0,c=r.length,u=0;a!==c&&u+e[a]<t;)u+=e[a],a++;o.push(r.slice(0,a));var f=a;for(u=0;a!==c;)u+e[a]>n&&(o.push(r.slice(f,a)),u=0,f=a),u+=e[a],a++;return f!==a&&o.push(r.slice(f,a)),o},A2=function(r,e,t){t||(t={});var n,o,a,c,u,f,d,y=[],w=[y],C=t.textIndent||0,v=0,B=0,I=r.split(" "),z=Cf.apply(this,[" ",t])[0];if(f=t.lineIndent===-1?I[0].length+2:t.lineIndent||0){var A=Array(f).join(" "),M=[];I.map(function(F){(F=F.split(/\s*\n/)).length>1?M=M.concat(F.map(function(se,ue){return(ue&&se.length?`
`:"")+se})):M.push(F[0])}),I=M,f=T2.apply(this,[A,t])}for(a=0,c=I.length;a<c;a++){var U=0;if(n=I[a],f&&n[0]==`
`&&(n=n.substr(1),U=1),C+v+(B=(o=Cf.apply(this,[n,t])).reduce(function(F,se){return F+se},0))>e||U){if(B>e){for(u=C2.apply(this,[n,o,e-(C+v),e]),y.push(u.shift()),y=[u.pop()];u.length;)w.push([u.shift()]);B=o.slice(n.length-(y[0]?y[0].length:0)).reduce(function(F,se){return F+se},0)}else y=[n];w.push(y),C=B+f,v=z}else y.push(n),C+=v+B,v=z}return d=f?function(F,se){return(se?A:"")+F.join(" ")}:function(F){return F.join(" ")},w.map(d)},Pu.splitTextToSize=function(r,e,t){var n,o=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(y){if(y.widths&&y.kerning)return{widths:y.widths,kerning:y.kerning};var w=this.internal.getFont(y.fontName,y.fontStyle),C="Unicode";return w.metadata[C]?{widths:w.metadata[C].widths||{0:1},kerning:w.metadata[C].kerning||{}}:{font:w.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/o;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/o:0,a.lineIndent=t.lineIndent;var u,f,d=[];for(u=0,f=n.length;u<f;u++)d=d.concat(A2.apply(this,[n[u],c,a]));return d},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",n={},o={},a=0;a<16;a++)n[t[a]]=e[a],o[e[a]]=t[a];var c=function(C){return"0x"+parseInt(C,10).toString(16)},u=r.__fontmetrics__.compress=function(C){var v,B,I,z,A=["{"];for(var M in C){if(v=C[M],isNaN(parseInt(M,10))?B="'"+M+"'":(M=parseInt(M,10),B=(B=c(M).slice(2)).slice(0,-1)+o[B.slice(-1)]),typeof v=="number")v<0?(I=c(v).slice(3),z="-"):(I=c(v).slice(2),z=""),I=z+I.slice(0,-1)+o[I.slice(-1)];else{if(qr(v)!=="object")throw new Error("Don't know what to do with value type "+qr(v)+".");I=u(v)}A.push(B+I)}return A.push("}"),A.join("")},f=r.__fontmetrics__.uncompress=function(C){if(typeof C!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,B,I,z,A={},M=1,U=A,F=[],se="",ue="",L=C.length-1,j=1;j<L;j+=1)(z=C[j])=="'"?v?(I=v.join(""),v=void 0):v=[]:v?v.push(z):z=="{"?(F.push([U,I]),U={},I=void 0):z=="}"?((B=F.pop())[0][B[1]]=U,I=void 0,U=B[0]):z=="-"?M=-1:I===void 0?n.hasOwnProperty(z)?(se+=n[z],I=parseInt(se,16)*M,M=1,se=""):se+=z:n.hasOwnProperty(z)?(ue+=n[z],U[I]=parseInt(ue,16)*M,M=1,I=void 0,ue=""):ue+=z;return A},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},y={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},w={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(C){var v=C.font,B=w.Unicode[v.postScriptName];B&&(v.metadata.Unicode={},v.metadata.Unicode.widths=B.widths,v.metadata.Unicode.kerning=B.kerning);var I=y.Unicode[v.postScriptName];I&&(v.metadata.Unicode.encoding=I,v.encoding=I.codePages[0])}])})(Tt.API),(function(r){var e=function(t){for(var n=t.length,o=new Uint8Array(n),a=0;a<n;a++)o[a]=t.charCodeAt(a);return o};r.API.events.push(["addFont",function(t){var n=void 0,o=t.font,a=t.instance;if(!o.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(n=a.existsFileInVFS(o.postScriptName)===!1?a.loadFile(o.postScriptName):a.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(c,u){u=/^\x00\x01\x00\x00/.test(u)?e(u):e(Lf(u)),c.metadata=r.API.TTFFont.open(u),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(o,n)}}])})(Tt),Tt.API.addSvgAsImage=function(r,e,t,n,o,a,c,u){if(isNaN(e)||isNaN(t))throw Qr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(o))throw Qr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=n,f.height=o;var d=f.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,f.width,f.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},w=this;return(Jt.canvg?Promise.resolve(Jt.canvg):Dc(()=>import("./index.es-CD_r_3lW.js"),[])).catch(function(C){return Promise.reject(new Error("Could not load canvg: "+C))}).then(function(C){return C.default?C.default:C}).then(function(C){return C.fromString(d,r,y)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(y)}).then(function(){w.addImage(f.toDataURL("image/jpeg",1),e,t,n,o,c,u)})},Tt.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var o=0;o<this.internal.pages[n].length;o++)this.internal.pages[n][o]=this.internal.pages[n][o].replace(e,t);return this},Tt.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,o,a,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(c),f=[],d=0,y=0,w=0;function C(B,I){var z,A=!1;for(z=0;z<B.length;z+=1)B[z]===I&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var v=u.length;for(w=0;w<v;w+=1)t[u[w]].value=t[u[w]].defaultValue,t[u[w]].explicitSet=!1}if(qr(r)==="object"){for(o in r)if(a=r[o],C(u,o)&&a!==void 0){if(t[o].type==="boolean"&&typeof a=="boolean")t[o].value=a;else if(t[o].type==="name"&&C(t[o].valueSet,a))t[o].value=a;else if(t[o].type==="integer"&&Number.isInteger(a))t[o].value=a;else if(t[o].type==="array"){for(d=0;d<a.length;d+=1)if(n=!0,a[d].length===1&&typeof a[d][0]=="number")f.push(String(a[d]-1));else if(a[d].length>1){for(y=0;y<a[d].length;y+=1)typeof a[d][y]!="number"&&(n=!1);n===!0&&f.push([a[d][0]-1,a[d][1]-1].join(" "))}t[o].value="["+f.join(" ")+"]"}else t[o].value=t[o].defaultValue;t[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var B,I=[];for(B in t)t[B].explicitSet===!0&&(t[B].type==="name"?I.push("/"+B+" /"+t[B].value):I.push("/"+B+" "+t[B].value));I.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+I.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),d=a.length+c.length+u.length+o.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(o+a+c+u+f),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Tt.API),(function(r){var e=r.API,t=e.pdfEscape16=function(a,c){for(var u,f=c.metadata.Unicode.widths,d=["","0","00","000","0000"],y=[""],w=0,C=a.length;w<C;++w){if(u=c.metadata.characterToGlyph(a.charCodeAt(w)),c.metadata.glyIdsUsed.push(u),c.metadata.toUnicode[u]=a.charCodeAt(w),f.indexOf(u)==-1&&(f.push(u),f.push([parseInt(c.metadata.widthOfGlyph(u),10)])),u=="0")return y.join("");u=u.toString(16),y.push(d[4-u.length],u)}return y.join("")},n=function(a){var c,u,f,d,y,w,C;for(y=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],w=0,C=(u=Object.keys(a).sort(function(v,B){return v-B})).length;w<C;w++)c=u[w],f.length>=100&&(y+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),a[c]!==void 0&&a[c]!==null&&typeof a[c].toString=="function"&&(d=("0000"+a[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),f.push("<"+c+"><"+d+">"));return f.length&&(y+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),y+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(c){var u=c.font,f=c.out,d=c.newObject,y=c.putStream;if(u.metadata instanceof r.API.TTFFont&&u.encoding==="Identity-H"){for(var w=u.metadata.Unicode.widths,C=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),v="",B=0;B<C.length;B++)v+=String.fromCharCode(C[B]);var I=d();y({data:v,addLength1:!0,objectId:I}),f("endobj");var z=d();y({data:n(u.metadata.toUnicode),addLength1:!0,objectId:z}),f("endobj");var A=d();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+Bu(u.fontName)),f("/FontFile2 "+I+" 0 R"),f("/FontBBox "+r.API.PDFObject.convert(u.metadata.bbox)),f("/Flags "+u.metadata.flags),f("/StemV "+u.metadata.stemV),f("/ItalicAngle "+u.metadata.italicAngle),f("/Ascent "+u.metadata.ascender),f("/Descent "+u.metadata.decender),f("/CapHeight "+u.metadata.capHeight),f(">>"),f("endobj");var M=d();f("<<"),f("/Type /Font"),f("/BaseFont /"+Bu(u.fontName)),f("/FontDescriptor "+A+" 0 R"),f("/W "+r.API.PDFObject.convert(w)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+u.encoding+")"),f(">>"),f(">>"),f("endobj"),u.objectNumber=d(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+z+" 0 R"),f("/BaseFont /"+Bu(u.fontName)),f("/Encoding /"+u.encoding),f("/DescendantFonts ["+M+" 0 R]"),f(">>"),f("endobj"),u.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(c){var u=c.font,f=c.out,d=c.newObject,y=c.putStream;if(u.metadata instanceof r.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var w=u.metadata.rawData,C="",v=0;v<w.length;v++)C+=String.fromCharCode(w[v]);var B=d();y({data:C,addLength1:!0,objectId:B}),f("endobj");var I=d();y({data:n(u.metadata.toUnicode),addLength1:!0,objectId:I}),f("endobj");var z=d();f("<<"),f("/Descent "+u.metadata.decender),f("/CapHeight "+u.metadata.capHeight),f("/StemV "+u.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+B+" 0 R"),f("/Flags 96"),f("/FontBBox "+r.API.PDFObject.convert(u.metadata.bbox)),f("/FontName /"+Bu(u.fontName)),f("/ItalicAngle "+u.metadata.italicAngle),f("/Ascent "+u.metadata.ascender),f(">>"),f("endobj"),u.objectNumber=d();for(var A=0;A<u.metadata.hmtx.widths.length;A++)u.metadata.hmtx.widths[A]=parseInt(u.metadata.hmtx.widths[A]*(1e3/u.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+I+" 0 R/BaseFont/"+Bu(u.fontName)+"/FontDescriptor "+z+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),f("endobj"),u.isAlreadyPutted=!0}})(a)}]);var o=function(a){var c,u=a.text||"",f=a.x,d=a.y,y=a.options||{},w=a.mutex||{},C=w.pdfEscape,v=w.activeFontKey,B=w.fonts,I=v,z="",A=0,M="",U=B[I].encoding;if(B[I].encoding!=="Identity-H")return{text:u,x:f,y:d,options:y,mutex:w};for(M=u,I=v,Array.isArray(u)&&(M=u[0]),A=0;A<M.length;A+=1)B[I].metadata.hasOwnProperty("cmap")&&(c=B[I].metadata.cmap.unicode.codeMap[M[A].charCodeAt(0)]),c||M[A].charCodeAt(0)<256&&B[I].metadata.hasOwnProperty("Unicode")?z+=M[A]:z+="";var F="";return parseInt(I.slice(1))<14||U==="WinAnsiEncoding"?F=C(z,I).split("").map(function(se){return se.charCodeAt(0).toString(16)}).join(""):U==="Identity-H"&&(F=t(z,B[I])),w.isHex=!0,{text:F,x:f,y:d,options:y,mutex:w}};e.events.push(["postProcessText",function(a){var c=a.text||"",u=[],f={text:c,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(c)){var d=0;for(d=0;d<c.length;d+=1)Array.isArray(c[d])&&c[d].length===3?u.push([o(Object.assign({},f,{text:c[d][0]})).text,c[d][1],c[d][2]]):u.push(o(Object.assign({},f,{text:c[d]})).text);a.text=u}else a.text=o(Object.assign({},f,{text:c})).text}])})(Tt),(function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Tt.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var o,a,c,u,f,d,y,w=e,C=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],B={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},I={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},z=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),M=!1,U=0;this.__bidiEngine__={};var F=function(k){var b=k.charCodeAt(),N=b>>8,D=I[N];return D!==void 0?w[256*D+(255&b)]:N===252||N===253?"AL":A.test(N)?"L":N===8?"R":"N"},se=function(k){for(var b,N=0;N<k.length;N++){if((b=F(k.charAt(N)))==="L")return!1;if(b==="R")return!0}return!1},ue=function(k,b,N,D){var q,ie,oe,ne,ve=b[D];switch(ve){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":M=!1;break;case"N":case"AN":break;case"EN":M&&(ve="AN");break;case"AL":M=!0,ve="R";break;case"WS":case"BN":ve="N";break;case"CS":D<1||D+1>=b.length||(q=N[D-1])!=="EN"&&q!=="AN"||(ie=b[D+1])!=="EN"&&ie!=="AN"?ve="N":M&&(ie="AN"),ve=ie===q?ie:"N";break;case"ES":ve=(q=D>0?N[D-1]:"B")==="EN"&&D+1<b.length&&b[D+1]==="EN"?"EN":"N";break;case"ET":if(D>0&&N[D-1]==="EN"){ve="EN";break}if(M){ve="N";break}for(oe=D+1,ne=b.length;oe<ne&&b[oe]==="ET";)oe++;ve=oe<ne&&b[oe]==="EN"?"EN":"N";break;case"NSM":if(c&&!u){for(ne=b.length,oe=D+1;oe<ne&&b[oe]==="NSM";)oe++;if(oe<ne){var be=k[D],Z=be>=1425&&be<=2303||be===64286;if(q=b[oe],Z&&(q==="R"||q==="AL")){ve="R";break}}}ve=D<1||(q=b[D-1])==="B"?"N":N[D-1];break;case"B":M=!1,o=!0,ve=U;break;case"S":a=!0,ve="N"}return ve},L=function(k,b,N){var D=k.split("");return N&&j(D,N,{hiLevel:U}),D.reverse(),b&&b.reverse(),D.join("")},j=function(k,b,N){var D,q,ie,oe,ne,ve=-1,be=k.length,Z=0,W=[],J=U?v:C,re=[];for(M=!1,o=!1,a=!1,q=0;q<be;q++)re[q]=F(k[q]);for(ie=0;ie<be;ie++){if(ne=Z,W[ie]=ue(k,re,W,ie),D=240&(Z=J[ne][B[W[ie]]]),Z&=15,b[ie]=oe=J[Z][5],D>0)if(D===16){for(q=ve;q<ie;q++)b[q]=1;ve=-1}else ve=-1;if(J[Z][6])ve===-1&&(ve=ie);else if(ve>-1){for(q=ve;q<ie;q++)b[q]=oe;ve=-1}re[ie]==="B"&&(b[ie]=0),N.hiLevel|=oe}a&&(function(he,ge,_e){for(var fe=0;fe<_e;fe++)if(he[fe]==="S"){ge[fe]=U;for(var xe=fe-1;xe>=0&&he[xe]==="WS";xe--)ge[xe]=U}})(re,b,be)},T=function(k,b,N,D,q){if(!(q.hiLevel<k)){if(k===1&&U===1&&!o)return b.reverse(),void(N&&N.reverse());for(var ie,oe,ne,ve,be=b.length,Z=0;Z<be;){if(D[Z]>=k){for(ne=Z+1;ne<be&&D[ne]>=k;)ne++;for(ve=Z,oe=ne-1;ve<oe;ve++,oe--)ie=b[ve],b[ve]=b[oe],b[oe]=ie,N&&(ie=N[ve],N[ve]=N[oe],N[oe]=ie);Z=ne}Z++}}},V=function(k,b,N){var D=k.split(""),q={hiLevel:U};return N||(N=[]),j(D,N,q),(function(ie,oe,ne){if(ne.hiLevel!==0&&y)for(var ve,be=0;be<ie.length;be++)oe[be]===1&&(ve=z.indexOf(ie[be]))>=0&&(ie[be]=z[ve+1])})(D,N,q),T(2,D,b,N,q),T(1,D,b,N,q),D.join("")};return this.__bidiEngine__.doBidiReorder=function(k,b,N){if((function(q,ie){if(ie)for(var oe=0;oe<q.length;oe++)ie[oe]=oe;u===void 0&&(u=se(q)),d===void 0&&(d=se(q))})(k,b),c||!f||d)if(c&&f&&u^d)U=u?1:0,k=L(k,b,N);else if(!c&&f&&d)U=u?1:0,k=V(k,b,N),k=L(k,b);else if(!c||u||f||d){if(c&&!f&&u^d)k=L(k,b),u?(U=0,k=V(k,b,N)):(U=1,k=V(k,b,N),k=L(k,b));else if(c&&u&&!f&&d)U=1,k=V(k,b,N),k=L(k,b);else if(!c&&!f&&u^d){var D=y;u?(U=1,k=V(k,b,N),U=0,y=!1,k=V(k,b,N),y=D):(U=0,k=V(k,b,N),k=L(k,b),U=1,y=!1,k=V(k,b,N),y=D,k=L(k,b))}}else U=0,k=V(k,b,N);else U=u?1:0,k=V(k,b,N);return k},this.__bidiEngine__.setOptions=function(k){k&&(c=k.isInputVisual,f=k.isOutputVisual,u=k.isInputRtl,d=k.isOutputRtl,y=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var o=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var c=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(o)==="[object Array]"){var u=0;for(c=[],u=0;u<o.length;u+=1)Object.prototype.toString.call(o[u])==="[object Array]"?c.push([t.doBidiReorder(o[u][0]),o[u][1],o[u][2]]):c.push([t.doBidiReorder(o[u])]);n.text=c}else n.text=t.doBidiReorder(o);t.setOptions({isInputVisual:!0})}])})(Tt),Tt.API.TTFFont=(function(){function r(e){var t;if(this.rawData=e,t=this.contents=new sc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new d6(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new QT(this.contents),this.head=new ZT(this),this.name=new i6(this),this.cmap=new Lv(this),this.toUnicode={},this.hhea=new e6(this),this.maxp=new o6(this),this.hmtx=new s6(this),this.post=new r6(this),this.os2=new t6(this),this.loca=new u6(this),this.glyf=new a6(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,o,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,u,f,d;for(d=[],c=0,u=(f=this.bbox).length;c<u;c++)e=f[c],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(o=this.post.italic_angle),32768&(t=o>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var o,a,c,u;for(c=0,a=0,u=(e=""+e).length;0<=u?a<u:a>u;a=0<=u?++a:--a)o=e.charCodeAt(a),c+=this.widthOfGlyph(this.characterToGlyph(o))+n*(1e3/t)||0;return c*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r})();var la,sc=(function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,o;for(o=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)o.push(this.writeByte(e.charCodeAt(t)));return o},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,o,a,c,u,f;return e=this.readByte(),t=this.readByte(),n=this.readByte(),o=this.readByte(),a=this.readByte(),c=this.readByte(),u=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^o)+16777216*(255^a)+65536*(255^c)+256*(255^u)+(255^f)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*o+16777216*a+65536*c+256*u+f},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,o,a;for(a=[],n=0,o=e.length;n<o;n++)t=e[n],a.push(this.writeByte(t));return a},r})(),QT=(function(){var r;function e(t){var n,o,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},o=0,a=this.tableCount;0<=a?o<a:o>a;o=0<=a?++o:--o)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,o,a,c,u,f,d,y,w,C,v,B,I;for(I in v=Object.keys(t).length,f=Math.log(2),w=16*Math.floor(Math.log(v)/f),c=Math.floor(w/f),y=16*v-w,(o=new sc).writeInt(this.scalarType),o.writeShort(v),o.writeShort(w),o.writeShort(c),o.writeShort(y),a=16*v,d=o.pos+a,u=null,B=[],t)for(C=t[I],o.writeString(I),o.writeInt(r(C)),o.writeInt(d),o.writeInt(C.length),B=B.concat(C),I==="head"&&(u=d),d+=C.length;d%4;)B.push(0),d++;return o.write(B),n=2981146554-r(o.data),o.pos=u+8,o.writeUInt32(n),o.data},r=function(t){var n,o,a,c;for(t=Fv.call(t);t.length%4;)t.push(0);for(a=new sc(t),o=0,n=0,c=t.length;n<c;n=n+=4)o+=a.readUInt32();return 4294967295&o},e})(),XT={}.hasOwnProperty,za=function(r,e){for(var t in e)XT.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};la=(function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var ZT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return za(r,la),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var t;return(t=new sc).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},r})(),L2=(function(){function r(e,t){var n,o,a,c,u,f,d,y,w,C,v,B,I,z,A,M,U;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),w=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(v=e.readUInt16(),C=v/2,e.pos+=6,a=(function(){var F,se;for(se=[],f=F=0;0<=C?F<C:F>C;f=0<=C?++F:--F)se.push(e.readUInt16());return se})(),e.pos+=2,I=(function(){var F,se;for(se=[],f=F=0;0<=C?F<C:F>C;f=0<=C?++F:--F)se.push(e.readUInt16());return se})(),d=(function(){var F,se;for(se=[],f=F=0;0<=C?F<C:F>C;f=0<=C?++F:--F)se.push(e.readUInt16());return se})(),y=(function(){var F,se;for(se=[],f=F=0;0<=C?F<C:F>C;f=0<=C?++F:--F)se.push(e.readUInt16());return se})(),o=(this.length-e.pos+this.offset)/2,u=(function(){var F,se;for(se=[],f=F=0;0<=o?F<o:F>o;f=0<=o?++F:--F)se.push(e.readUInt16());return se})(),f=A=0,U=a.length;A<U;f=++A)for(z=a[f],n=M=B=I[f];B<=z?M<=z:M>=z;n=B<=z?++M:--M)y[f]===0?c=n+d[f]:(c=u[y[f]/2+(n-B)-(C-f)]||0)!==0&&(c+=d[f]),this.codeMap[n]=65535&c}e.pos=w}return r.encode=function(e,t){var n,o,a,c,u,f,d,y,w,C,v,B,I,z,A,M,U,F,se,ue,L,j,T,V,k,b,N,D,q,ie,oe,ne,ve,be,Z,W,J,re,he,ge,_e,fe,xe,Pe,We,Qe;switch(D=new sc,c=Object.keys(e).sort(function(Xe,Fe){return Xe-Fe}),t){case"macroman":for(I=0,z=(function(){var Xe=[];for(B=0;B<256;++B)Xe.push(0);return Xe})(),M={0:0},a={},q=0,ve=c.length;q<ve;q++)M[xe=e[o=c[q]]]==null&&(M[xe]=++I),a[o]={old:e[o],new:M[e[o]]},z[o]=M[e[o]];return D.writeUInt16(1),D.writeUInt16(0),D.writeUInt32(12),D.writeUInt16(0),D.writeUInt16(262),D.writeUInt16(0),D.write(z),{charMap:a,subtable:D.data,maxGlyphID:I+1};case"unicode":for(b=[],w=[],U=0,M={},n={},A=d=null,ie=0,be=c.length;ie<be;ie++)M[se=e[o=c[ie]]]==null&&(M[se]=++U),n[o]={old:se,new:M[se]},u=M[se]-o,A!=null&&u===d||(A&&w.push(A),b.push(o),d=u),A=o;for(A&&w.push(A),w.push(65535),b.push(65535),V=2*(T=b.length),j=2*Math.pow(Math.log(T)/Math.LN2,2),C=Math.log(j/2)/Math.LN2,L=2*T-j,f=[],ue=[],v=[],B=oe=0,Z=b.length;oe<Z;B=++oe){if(k=b[B],y=w[B],k===65535){f.push(0),ue.push(0);break}if(k-(N=n[k].new)>=32768)for(f.push(0),ue.push(2*(v.length+T-B)),o=ne=k;k<=y?ne<=y:ne>=y;o=k<=y?++ne:--ne)v.push(n[o].new);else f.push(N-k),ue.push(0)}for(D.writeUInt16(3),D.writeUInt16(1),D.writeUInt32(12),D.writeUInt16(4),D.writeUInt16(16+8*T+2*v.length),D.writeUInt16(0),D.writeUInt16(V),D.writeUInt16(j),D.writeUInt16(C),D.writeUInt16(L),_e=0,W=w.length;_e<W;_e++)o=w[_e],D.writeUInt16(o);for(D.writeUInt16(0),fe=0,J=b.length;fe<J;fe++)o=b[fe],D.writeUInt16(o);for(Pe=0,re=f.length;Pe<re;Pe++)u=f[Pe],D.writeUInt16(u);for(We=0,he=ue.length;We<he;We++)F=ue[We],D.writeUInt16(F);for(Qe=0,ge=v.length;Qe<ge;Qe++)I=v[Qe],D.writeUInt16(I);return{charMap:n,subtable:D.data,maxGlyphID:U+1}}},r})(),Lv=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return za(r,la),r.prototype.tag="cmap",r.prototype.parse=function(e){var t,n,o;for(e.pos=this.offset,this.version=e.readUInt16(),o=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=o?n<o:n>o;n=0<=o?++n:--n)t=new L2(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},r.encode=function(e,t){var n,o;return t==null&&(t="macroman"),n=L2.encode(e,t),(o=new sc).writeUInt16(0),o.writeUInt16(1),n.table=o.data.concat(n.subtable),n},r})(),e6=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return za(r,la),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r})(),t6=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return za(r,la),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n})(),this.charRange=(function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r})(),r6=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return za(r,la),r.prototype.tag="post",r.prototype.parse=function(e){var t,n,o;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],o=[];e.pos<this.offset+this.length;)t=e.readByte(),o.push(this.names.push(e.readString(t)));return o;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var c,u,f;for(f=[],a=c=0,u=this.file.maxp.numGlyphs;0<=u?c<u:c>u;a=0<=u?++c:--c)f.push(e.readUInt32());return f}).call(this)}},r})(),n6=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},i6=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return za(r,la),r.prototype.tag="name",r.prototype.parse=function(e){var t,n,o,a,c,u,f,d,y,w,C;for(e.pos=this.offset,e.readShort(),t=e.readShort(),u=e.readShort(),n=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+u+e.readShort()});for(f={},a=y=0,w=n.length;y<w;a=++y)o=n[a],e.pos=o.offset,d=e.readString(o.length),c=new n6(d,o),f[C=o.nameID]==null&&(f[C]=[]),f[o.nameID].push(c);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},r})(),o6=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return za(r,la),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r})(),s6=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return za(r,la),r.prototype.tag="hmtx",r.prototype.parse=function(e){var t,n,o,a,c,u,f;for(e.pos=this.offset,this.metrics=[],t=0,u=this.file.hhea.numberOfMetrics;0<=u?t<u:t>u;t=0<=u?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,y;for(y=[],t=d=0;0<=o?d<o:d>o;t=0<=o?++d:--d)y.push(e.readInt16());return y})(),this.widths=(function(){var d,y,w,C;for(C=[],d=0,y=(w=this.metrics).length;d<y;d++)a=w[d],C.push(a.advance);return C}).call(this),n=this.widths[this.widths.length-1],f=[],t=c=0;0<=o?c<o:c>o;t=0<=o?++c:--c)f.push(this.widths.push(n));return f},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r})(),Fv=[].slice,a6=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return za(r,la),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var t,n,o,a,c,u,f,d,y,w;return e in this.cache?this.cache[e]:(a=this.file.loca,t=this.file.contents,n=a.indexOf(e),(o=a.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+n,c=(u=new sc(t.read(o))).readShort(),d=u.readShort(),w=u.readShort(),f=u.readShort(),y=u.readShort(),this.cache[e]=c===-1?new c6(u,d,w,f,y):new l6(u,c,d,w,f,y),this.cache[e]))},r.prototype.encode=function(e,t,n){var o,a,c,u,f;for(c=[],a=[],u=0,f=t.length;u<f;u++)o=e[t[u]],a.push(c.length),o&&(c=c.concat(o.encode(n)));return a.push(c.length),{table:c,offsets:a}},r})(),l6=(function(){function r(e,t,n,o,a,c){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=o,this.xMax=a,this.yMax=c,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),c6=(function(){function r(e,t,n,o,a){var c,u;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=o,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;u=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&u;)c.pos+=1&u?4:2,128&u?c.pos+=8:64&u?c.pos+=4:8&u&&(c.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new sc(Fv.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r})(),u6=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return za(r,la),r.prototype.tag="loca",r.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var o,a;for(a=[],n=0,o=this.length;n<o;n+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var o,a;for(a=[],n=0,o=this.length;n<o;n+=4)a.push(e.readUInt32());return a}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),o=0,a=0,c=0;c<n.length;++c)if(n[c]=o,a<t.length&&t[a]==c){++a,n[c]=o;var u=this.offsets[c],f=this.offsets[c+1]-u;f>0&&(o+=f)}for(var d=new Array(4*n.length),y=0;y<n.length;++y)d[4*y+3]=255&n[y],d[4*y+2]=(65280&n[y])>>8,d[4*y+1]=(16711680&n[y])>>16,d[4*y]=(4278190080&n[y])>>24;return d},r})(),d6=(function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,o,a;for(t in o=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[t],e[t]=o[n];return e},r.prototype.glyphsFor=function(e){var t,n,o,a,c,u,f;for(o={},c=0,u=e.length;c<u;c++)o[a=e[c]]=this.font.glyf.glyphFor(a);for(a in t=[],o)(n=o[a])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(a in f=this.glyphsFor(t))n=f[a],o[a]=n;return o},r.prototype.encode=function(e,t){var n,o,a,c,u,f,d,y,w,C,v,B,I,z,A;for(o in n=Lv.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),v={0:0},A=n.charMap)v[(f=A[o]).old]=f.new;for(B in C=n.maxGlyphID,c)B in v||(v[B]=C++);return y=(function(M){var U,F;for(U in F={},M)F[M[U]]=U;return F})(v),w=Object.keys(y).sort(function(M,U){return M-U}),I=(function(){var M,U,F;for(F=[],M=0,U=w.length;M<U;M++)u=w[M],F.push(y[u]);return F})(),a=this.font.glyf.encode(c,I,v),d=this.font.loca.encode(a.offsets,I),z={cmap:this.font.cmap.raw(),glyf:a.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(z["OS/2"]=this.font.os2.raw()),this.font.directory.encode(z)},r})();Tt.API.PDFObject=(function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,o,a,c;if(Array.isArray(t))return"["+(function(){var u,f,d;for(d=[],u=0,f=t.length;u<f;u++)n=t[u],d.push(e.convert(n));return d})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(o in a=["<<"],t)c=t[o],a.push("/"+o+" "+e.convert(c));return a.push(">>"),a.join(`
`)}return""+t},e})();const sn=r=>{const{calculatorName:e,inputs:t,results:n,necReferences:o,additionalInfo:a}=r,c=new Tt({orientation:"portrait",unit:"mm",format:"letter"}),u=c.internal.pageSize.getWidth(),f=c.internal.pageSize.getHeight(),d=15,y=u-d*2;let w=d;const C=se=>w+se>f-d?(c.addPage(),w=d,!0):!1,v=(se,ue,L,j,T=10)=>{c.setFontSize(T);const V=c.splitTextToSize(se,j);return c.text(V,ue,L),V.length*(T*.4)};c.setFillColor(37,99,235),c.rect(0,0,u,25,"F"),c.setTextColor(255,255,255),c.setFontSize(20),c.setFont("helvetica","bold"),c.text("Electrician Toolkit",d,12),c.setFontSize(12),c.setFont("helvetica","normal"),c.text(e,d,19),c.setFontSize(9);const B=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});c.text(B,u-d-c.getTextWidth(B),19),w=35,c.setTextColor(0,0,0),c.setFontSize(14),c.setFont("helvetica","bold"),c.text("Input Parameters",d,w),w+=7,c.setDrawColor(37,99,235),c.setLineWidth(.5),c.line(d,w,u-d,w),w+=5,c.setFontSize(10),c.setFont("helvetica","normal"),Object.entries(t).forEach(([se,ue])=>{C(10);const L=se.replace(/([A-Z])/g," $1").trim(),j=L.charAt(0).toUpperCase()+L.slice(1);c.setFont("helvetica","bold");const T=`${j}:`;c.text(T,d+5,w);const V=c.getTextWidth(T);c.setFont("helvetica","normal"),c.text(String(ue),d+5+V+3,w),w+=6}),w+=5,C(20),c.setFontSize(14),c.setFont("helvetica","bold"),c.text("Results",d,w),w+=7,c.setDrawColor(37,99,235),c.line(d,w,u-d,w),w+=5,c.setFontSize(10),c.setFont("helvetica","normal"),Object.entries(n).forEach(([se,ue])=>{C(10);const L=se.replace(/([A-Z])/g," $1").trim(),j=L.charAt(0).toUpperCase()+L.slice(1);c.setFont("helvetica","bold");const T=`${j}:`;c.text(T,d+5,w);let V=String(ue);typeof ue=="boolean"&&(V=ue?"Yes":"No");const k=c.getTextWidth(T);c.setFont("helvetica","normal"),c.text(V,d+5+k+3,w),w+=6}),w+=5,a&&Object.keys(a).length>0&&(C(20),c.setFontSize(14),c.setFont("helvetica","bold"),c.text("Calculation Details",d,w),w+=7,c.setDrawColor(37,99,235),c.line(d,w,u-d,w),w+=5,c.setFontSize(10),c.setFont("helvetica","normal"),Object.entries(a).forEach(([se,ue])=>{C(10);const L=se.replace(/([A-Z])/g," $1").trim(),j=L.charAt(0).toUpperCase()+L.slice(1),T=v(`${j}: ${ue}`,d+5,w,y-10,10);w+=T+2}),w+=5),o&&(C(20),c.setFontSize(14),c.setFont("helvetica","bold"),c.text("NEC Code References",d,w),w+=7,c.setDrawColor(37,99,235),c.line(d,w,u-d,w),w+=5,c.setFontSize(10),c.setFont("helvetica","normal"),(Array.isArray(o)?o:[o]).forEach(ue=>{C(15);const L=v(`• ${ue}`,d+5,w,y-10,10);w+=L+2}));const I=f-10;c.setFontSize(8),c.setTextColor(100,100,100),c.setFont("helvetica","italic");const z="This calculation is for reference only. Always verify with current NEC and local codes.",A=c.getTextWidth(z);c.text(z,(u-A)/2,I);const M=e.toLowerCase().replace(/\s+/g,"-"),U=new Date().toISOString().split("T")[0],F=`${M}-${U}.pdf`;c.save(F)},h6=()=>{};var F2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let o=r.charCodeAt(n);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},f6=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const o=r[t++];if(o<128)e[n++]=String.fromCharCode(o);else if(o>191&&o<224){const a=r[t++];e[n++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=r[t++],c=r[t++],u=r[t++],f=((o&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(f>>10)),e[n++]=String.fromCharCode(56320+(f&1023))}else{const a=r[t++],c=r[t++];e[n++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},Ov={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let o=0;o<r.length;o+=3){const a=r[o],c=o+1<r.length,u=c?r[o+1]:0,f=o+2<r.length,d=f?r[o+2]:0,y=a>>2,w=(a&3)<<4|u>>4;let C=(u&15)<<2|d>>6,v=d&63;f||(v=64,c||(C=64)),n.push(t[y],t[w],t[C],t[v])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(zv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):f6(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let o=0;o<r.length;){const a=t[r.charAt(o++)],u=o<r.length?t[r.charAt(o)]:0;++o;const d=o<r.length?t[r.charAt(o)]:64;++o;const w=o<r.length?t[r.charAt(o)]:64;if(++o,a==null||u==null||d==null||w==null)throw new p6;const C=a<<2|u>>4;if(n.push(C),d!==64){const v=u<<4&240|d>>2;if(n.push(v),w!==64){const B=d<<6&192|w;n.push(B)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class p6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const m6=function(r){const e=zv(r);return Ov.encodeByteArray(e,!0)},np=function(r){return m6(r).replace(/\./g,"")},Vv=function(r){try{return Ov.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=()=>g6().__FIREBASE_DEFAULTS__,x6=()=>{if(typeof process>"u"||typeof F2>"u")return;const r=F2.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},v6=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Vv(r[1]);return e&&JSON.parse(e)},Tp=()=>{try{return h6()||y6()||x6()||v6()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Mv=r=>{var e,t;return(t=(e=Tp())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},b6=r=>{const e=Mv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},Dv=()=>{var r;return(r=Tp())==null?void 0:r.config},Wv=r=>{var e;return(e=Tp())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $v(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",o=r.iat||0,a=r.sub||r.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...r};return[np(JSON.stringify(t)),np(JSON.stringify(c)),""].join(".")}const Qd={};function _6(){const r={prod:[],emulator:[]};for(const e of Object.keys(Qd))Qd[e]?r.emulator.push(e):r.prod.push(e);return r}function T6(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let z2=!1;function Uv(r,e){if(typeof window>"u"||typeof document>"u"||!ad(window.location.host)||Qd[r]===e||Qd[r]||z2)return;Qd[r]=e;function t(C){return`__firebase__banner__${C}`}const n="__firebase__banner",a=_6().prod.length>0;function c(){const C=document.getElementById(n);C&&C.remove()}function u(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function f(C,v){C.setAttribute("width","24"),C.setAttribute("id",v),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function d(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{z2=!0,c()},C}function y(C,v){C.setAttribute("id",v),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function w(){const C=T6(n),v=t("text"),B=document.getElementById(v)||document.createElement("span"),I=t("learnmore"),z=document.getElementById(I)||document.createElement("a"),A=t("preprendIcon"),M=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const U=C.element;u(U),y(z,I);const F=d();f(M,A),U.append(M,B,z,F),document.body.appendChild(U)}a?(B.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function C6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lo())}function A6(){var e;const r=(e=Tp())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function k6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function j6(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function E6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I6(){const r=lo();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function R6(){return!A6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function P6(){try{return typeof indexedDB=="object"}catch{return!1}}function N6(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(n);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6="FirebaseError";class yl extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=B6,Object.setPrototypeOf(this,yl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bh.prototype.create)}}class bh{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?L6(a,n):"Error",u=`${this.serviceName}: ${c} (${o}).`;return new yl(o,u,n)}}function L6(r,e){return r.replace(F6,(t,n)=>{const o=e[n];return o!=null?String(o):`<${n}?>`})}const F6=/\{\$([^}]+)}/g;function z6(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Hc(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const o of t){if(!n.includes(o))return!1;const a=r[o],c=e[o];if(O2(a)&&O2(c)){if(!Hc(a,c))return!1}else if(a!==c)return!1}for(const o of n)if(!t.includes(o))return!1;return!0}function O2(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Ud(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[o,a]=n.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function qd(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function O6(r,e){const t=new V6(r,e);return t.subscribe.bind(t)}class V6{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let o;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");M6(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:n},o.next===void 0&&(o.next=om),o.error===void 0&&(o.error=om),o.complete===void 0&&(o.complete=om);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function M6(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function om(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(r){return r&&r._delegate?r._delegate:r}class Gc{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new w6;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&n.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(n)return null;throw o}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($6(e))try{this.getOrInitializeService({instanceIdentifier:Oc})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});n.resolve(a)}catch{}}}}clearInstance(e=Oc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oc){return this.instances.has(e)}getOptions(e=Oc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);n===u&&c.resolve(o)}return o}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(n)??new Set;o.add(e),this.onInitCallbacks.set(n,o);const a=this.instances.get(n);return a&&e(a,n),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const o of n)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:W6(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Oc){return this.component?this.component.multipleInstances?e:Oc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function W6(r){return r===Oc?void 0:r}function $6(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new D6(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pr;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(pr||(pr={}));const q6={debug:pr.DEBUG,verbose:pr.VERBOSE,info:pr.INFO,warn:pr.WARN,error:pr.ERROR,silent:pr.SILENT},H6=pr.INFO,G6={[pr.DEBUG]:"log",[pr.VERBOSE]:"log",[pr.INFO]:"info",[pr.WARN]:"warn",[pr.ERROR]:"error"},K6=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),o=G6[e];if(o)console[o](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mg{constructor(e){this.name=e,this._logLevel=H6,this._logHandler=K6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pr.DEBUG,...e),this._logHandler(this,pr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pr.VERBOSE,...e),this._logHandler(this,pr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pr.INFO,...e),this._logHandler(this,pr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pr.WARN,...e),this._logHandler(this,pr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pr.ERROR,...e),this._logHandler(this,pr.ERROR,...e)}}const J6=(r,e)=>e.some(t=>r instanceof t);let V2,M2;function Y6(){return V2||(V2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Q6(){return M2||(M2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qv=new WeakMap,Pm=new WeakMap,Hv=new WeakMap,sm=new WeakMap,gg=new WeakMap;function X6(r){const e=new Promise((t,n)=>{const o=()=>{r.removeEventListener("success",a),r.removeEventListener("error",c)},a=()=>{t(Zl(r.result)),o()},c=()=>{n(r.error),o()};r.addEventListener("success",a),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&qv.set(t,r)}).catch(()=>{}),gg.set(e,r),e}function Z6(r){if(Pm.has(r))return;const e=new Promise((t,n)=>{const o=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",c),r.removeEventListener("abort",c)},a=()=>{t(),o()},c=()=>{n(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",a),r.addEventListener("error",c),r.addEventListener("abort",c)});Pm.set(r,e)}let Nm={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Pm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Hv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Zl(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function eC(r){Nm=r(Nm)}function tC(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(am(this),e,...t);return Hv.set(n,e.sort?e.sort():[e]),Zl(n)}:Q6().includes(r)?function(...e){return r.apply(am(this),e),Zl(qv.get(this))}:function(...e){return Zl(r.apply(am(this),e))}}function rC(r){return typeof r=="function"?tC(r):(r instanceof IDBTransaction&&Z6(r),J6(r,Y6())?new Proxy(r,Nm):r)}function Zl(r){if(r instanceof IDBRequest)return X6(r);if(sm.has(r))return sm.get(r);const e=rC(r);return e!==r&&(sm.set(r,e),gg.set(e,r)),e}const am=r=>gg.get(r);function nC(r,e,{blocked:t,upgrade:n,blocking:o,terminated:a}={}){const c=indexedDB.open(r,e),u=Zl(c);return n&&c.addEventListener("upgradeneeded",f=>{n(Zl(c.result),f.oldVersion,f.newVersion,Zl(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),u.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",d=>o(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const iC=["get","getKey","getAll","getAllKeys","count"],oC=["put","add","delete","clear"],lm=new Map;function D2(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(lm.get(e))return lm.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,o=oC.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(o||iC.includes(t)))return;const a=async function(c,...u){const f=this.transaction(c,o?"readwrite":"readonly");let d=f.store;return n&&(d=d.index(u.shift())),(await Promise.all([d[t](...u),o&&f.done]))[0]};return lm.set(e,a),a}eC(r=>({...r,get:(e,t,n)=>D2(e,t)||r.get(e,t,n),has:(e,t)=>!!D2(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(aC(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function aC(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bm="@firebase/app",W2="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=new mg("@firebase/app"),lC="@firebase/app-compat",cC="@firebase/analytics-compat",uC="@firebase/analytics",dC="@firebase/app-check-compat",hC="@firebase/app-check",fC="@firebase/auth",pC="@firebase/auth-compat",mC="@firebase/database",gC="@firebase/data-connect",yC="@firebase/database-compat",xC="@firebase/functions",vC="@firebase/functions-compat",bC="@firebase/installations",wC="@firebase/installations-compat",SC="@firebase/messaging",_C="@firebase/messaging-compat",TC="@firebase/performance",CC="@firebase/performance-compat",AC="@firebase/remote-config",kC="@firebase/remote-config-compat",jC="@firebase/storage",EC="@firebase/storage-compat",IC="@firebase/firestore",RC="@firebase/ai",PC="@firebase/firestore-compat",NC="firebase",BC="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="[DEFAULT]",LC={[Bm]:"fire-core",[lC]:"fire-core-compat",[uC]:"fire-analytics",[cC]:"fire-analytics-compat",[hC]:"fire-app-check",[dC]:"fire-app-check-compat",[fC]:"fire-auth",[pC]:"fire-auth-compat",[mC]:"fire-rtdb",[gC]:"fire-data-connect",[yC]:"fire-rtdb-compat",[xC]:"fire-fn",[vC]:"fire-fn-compat",[bC]:"fire-iid",[wC]:"fire-iid-compat",[SC]:"fire-fcm",[_C]:"fire-fcm-compat",[TC]:"fire-perf",[CC]:"fire-perf-compat",[AC]:"fire-rc",[kC]:"fire-rc-compat",[jC]:"fire-gcs",[EC]:"fire-gcs-compat",[IC]:"fire-fst",[PC]:"fire-fst-compat",[RC]:"fire-vertex","fire-js":"fire-js",[NC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip=new Map,FC=new Map,Fm=new Map;function $2(r,e){try{r.container.addComponent(e)}catch(t){fl.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Qu(r){const e=r.name;if(Fm.has(e))return fl.debug(`There were multiple attempts to register component ${e}.`),!1;Fm.set(e,r);for(const t of ip.values())$2(t,r);for(const t of FC.values())$2(t,r);return!0}function yg(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Is(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ec=new bh("app","Firebase",zC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Gc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ec.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld=BC;function Gv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:Lm,automaticDataCollectionEnabled:!0,...e},o=n.name;if(typeof o!="string"||!o)throw ec.create("bad-app-name",{appName:String(o)});if(t||(t=Dv()),!t)throw ec.create("no-options");const a=ip.get(o);if(a){if(Hc(t,a.options)&&Hc(n,a.config))return a;throw ec.create("duplicate-app",{appName:o})}const c=new U6(o);for(const f of Fm.values())c.addComponent(f);const u=new OC(t,n,c);return ip.set(o,u),u}function Kv(r=Lm){const e=ip.get(r);if(!e&&r===Lm&&Dv())return Gv();if(!e)throw ec.create("no-app",{appName:r});return e}function tc(r,e,t){let n=LC[r]??r;t&&(n+=`-${t}`);const o=n.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const c=[`Unable to register library "${n}" with version "${e}":`];o&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fl.warn(c.join(" "));return}Qu(new Gc(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="firebase-heartbeat-database",MC=1,ah="firebase-heartbeat-store";let cm=null;function Jv(){return cm||(cm=nC(VC,MC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ah)}catch(t){console.warn(t)}}}}).catch(r=>{throw ec.create("idb-open",{originalErrorMessage:r.message})})),cm}async function DC(r){try{const t=(await Jv()).transaction(ah),n=await t.objectStore(ah).get(Yv(r));return await t.done,n}catch(e){if(e instanceof yl)fl.warn(e.message);else{const t=ec.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fl.warn(t.message)}}}async function U2(r,e){try{const n=(await Jv()).transaction(ah,"readwrite");await n.objectStore(ah).put(e,Yv(r)),await n.done}catch(t){if(t instanceof yl)fl.warn(t.message);else{const n=ec.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});fl.warn(n.message)}}}function Yv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=1024,$C=30;class UC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HC(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=q2();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>$C){const c=GC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){fl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=q2(),{heartbeatsToSend:n,unsentEntries:o}=qC(this._heartbeatsCache.heartbeats),a=np(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return fl.warn(t),""}}}function q2(){return new Date().toISOString().substring(0,10)}function qC(r,e=WC){const t=[];let n=r.slice();for(const o of r){const a=t.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),H2(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),H2(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class HC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return P6()?N6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await DC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return U2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return U2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function H2(r){return np(JSON.stringify({version:2,heartbeats:r})).length}function GC(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(r){Qu(new Gc("platform-logger",e=>new sC(e),"PRIVATE")),Qu(new Gc("heartbeat",e=>new UC(e),"PRIVATE")),tc(Bm,W2,r),tc(Bm,W2,"esm2020"),tc("fire-js","")}KC("");var JC="firebase",YC="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tc(JC,YC,"app");function Qv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QC=Qv,Xv=new bh("auth","Firebase",Qv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op=new mg("@firebase/auth");function XC(r,...e){op.logLevel<=pr.WARN&&op.warn(`Auth (${ld}): ${r}`,...e)}function Mf(r,...e){op.logLevel<=pr.ERROR&&op.error(`Auth (${ld}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(r,...e){throw xg(r,...e)}function Ia(r,...e){return xg(r,...e)}function Zv(r,e,t){const n={...QC(),[e]:t};return new bh("auth","Firebase",n).create(e,{appName:r.name})}function hl(r){return Zv(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xg(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return Xv.create(r,...e)}function qt(r,e,...t){if(!r)throw xg(e,...t)}function ul(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Mf(e),new Error(e)}function pl(r,e){r||ul(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function ZC(){return G2()==="http:"||G2()==="https:"}function G2(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZC()||j6()||"connection"in navigator)?navigator.onLine:!0}function tA(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,t){this.shortDelay=e,this.longDelay=t,pl(t>e,"Short delay should be less than long delay!"),this.isMobile=C6()||E6()}get(){return eA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(r,e){pl(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ul("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ul("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ul("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iA=new Sh(3e4,6e4);function fc(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function pc(r,e,t,n,o={}){return tb(r,o,async()=>{let a={},c={};n&&(e==="GET"?c=n:a={body:JSON.stringify(n)});const u=wh({key:r.config.apiKey,...c}).slice(1),f=await r._getAdditionalHeaders();f["Content-Type"]="application/json",r.languageCode&&(f["X-Firebase-Locale"]=r.languageCode);const d={method:e,headers:f,...a};return k6()||(d.referrerPolicy="no-referrer"),r.emulatorConfig&&ad(r.emulatorConfig.host)&&(d.credentials="include"),eb.fetch()(await rb(r,r.config.apiHost,t,u),d)})}async function tb(r,e,t){r._canInitEmulator=!1;const n={...rA,...e};try{const o=new sA(r),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Af(r,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const u=a.ok?c.errorMessage:c.error.message,[f,d]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Af(r,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Af(r,"email-already-in-use",c);if(f==="USER_DISABLED")throw Af(r,"user-disabled",c);const y=n[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Zv(r,y,d);oa(r,y)}}catch(o){if(o instanceof yl)throw o;oa(r,"network-request-failed",{message:String(o)})}}async function _h(r,e,t,n,o={}){const a=await pc(r,e,t,n,o);return"mfaPendingCredential"in a&&oa(r,"multi-factor-auth-required",{_serverResponse:a}),a}async function rb(r,e,t,n){const o=`${e}${t}?${n}`,a=r,c=a.config.emulator?vg(r.config,o):`${r.config.apiScheme}://${o}`;return nA.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function oA(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Ia(this.auth,"network-request-failed")),iA.get())})}}function Af(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const o=Ia(r,e,n);return o.customData._tokenResponse=t,o}function K2(r){return r!==void 0&&r.enterprise!==void 0}class aA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return oA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lA(r,e){return pc(r,"GET","/v2/recaptchaConfig",fc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cA(r,e){return pc(r,"POST","/v1/accounts:delete",e)}async function sp(r,e){return pc(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uA(r,e=!1){const t=Ai(r),n=await t.getIdToken(e),o=bg(n);qt(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:o,token:n,authTime:Xd(um(o.auth_time)),issuedAtTime:Xd(um(o.iat)),expirationTime:Xd(um(o.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function um(r){return Number(r)*1e3}function bg(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Mf("JWT malformed, contained fewer than 3 sections"),null;try{const o=Vv(t);return o?JSON.parse(o):(Mf("Failed to decode base64 JWT payload"),null)}catch(o){return Mf("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function J2(r){const e=bg(r);return qt(e,"internal-error"),qt(typeof e.exp<"u","internal-error"),qt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lh(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof yl&&dA(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function dA({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xd(this.lastLoginAt),this.creationTime=Xd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ap(r){var w;const e=r.auth,t=await r.getIdToken(),n=await lh(r,sp(e,{idToken:t}));qt(n==null?void 0:n.users.length,e,"internal-error");const o=n.users[0];r._notifyReloadListener(o);const a=(w=o.providerUserInfo)!=null&&w.length?nb(o.providerUserInfo):[],c=pA(r.providerData,a),u=r.isAnonymous,f=!(r.email&&o.passwordHash)&&!(c!=null&&c.length),d=u?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Om(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(r,y)}async function fA(r){const e=Ai(r);await ap(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pA(r,e){return[...r.filter(n=>!e.some(o=>o.providerId===n.providerId)),...e]}function nb(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mA(r,e){const t=await tb(r,{},async()=>{const n=wh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=r.config,c=await rb(r,o,"/v1/token",`key=${a}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:n};return r.emulatorConfig&&ad(r.emulatorConfig.host)&&(f.credentials="include"),eb.fetch()(c,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function gA(r,e){return pc(r,"POST","/v2/accounts:revokeToken",fc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qt(e.idToken,"internal-error"),qt(typeof e.idToken<"u","internal-error"),qt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):J2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qt(e.length!==0,"internal-error");const t=J2(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(qt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:o,expiresIn:a}=await mA(e,t);this.updateTokensAndExpiration(n,o,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:o,expirationTime:a}=t,c=new qu;return n&&(qt(typeof n=="string","internal-error",{appName:e}),c.refreshToken=n),o&&(qt(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),a&&(qt(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qu,this.toJSON())}_performRefresh(){return ul("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(r,e){qt(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ta{constructor({uid:e,auth:t,stsTokenManager:n,...o}){this.providerId="firebase",this.proactiveRefresh=new hA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Om(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await lh(this,this.stsTokenManager.getToken(this.auth,e));return qt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return uA(this,e)}reload(){return fA(this)}_assign(e){this!==e&&(qt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ta({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){qt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ap(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Is(this.auth.app))return Promise.reject(hl(this.auth));const e=await this.getIdToken();return await lh(this,cA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,c=t.photoURL??void 0,u=t.tenantId??void 0,f=t._redirectEventId??void 0,d=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:w,emailVerified:C,isAnonymous:v,providerData:B,stsTokenManager:I}=t;qt(w&&I,e,"internal-error");const z=qu.fromJSON(this.name,I);qt(typeof w=="string",e,"internal-error"),Hl(n,e.name),Hl(o,e.name),qt(typeof C=="boolean",e,"internal-error"),qt(typeof v=="boolean",e,"internal-error"),Hl(a,e.name),Hl(c,e.name),Hl(u,e.name),Hl(f,e.name),Hl(d,e.name),Hl(y,e.name);const A=new ta({uid:w,auth:e,email:o,emailVerified:C,displayName:n,isAnonymous:v,photoURL:c,phoneNumber:a,tenantId:u,stsTokenManager:z,createdAt:d,lastLoginAt:y});return B&&Array.isArray(B)&&(A.providerData=B.map(M=>({...M}))),f&&(A._redirectEventId=f),A}static async _fromIdTokenResponse(e,t,n=!1){const o=new qu;o.updateFromServerResponse(t);const a=new ta({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:n});return await ap(a),a}static async _fromGetAccountInfoResponse(e,t,n){const o=t.users[0];qt(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?nb(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),u=new qu;u.updateFromIdToken(n);const f=new ta({uid:o.localId,auth:e,stsTokenManager:u,isAnonymous:c}),d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Om(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=new Map;function dl(r){pl(r instanceof Function,"Expected a class definition");let e=Y2.get(r);return e?(pl(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Y2.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ib.type="NONE";const Q2=ib;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(r,e,t){return`firebase:${r}:${e}:${t}`}class Hu{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:o,name:a}=this.auth;this.fullUserKey=Df(this.userKey,o.apiKey,a),this.fullPersistenceKey=Df("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await sp(this.auth,{idToken:e}).catch(()=>{});return t?ta._fromGetAccountInfoResponse(this.auth,t,e):null}return ta._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Hu(dl(Q2),e,n);const o=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=o[0]||dl(Q2);const c=Df(n,e.config.apiKey,e.name);let u=null;for(const d of t)try{const y=await d._get(c);if(y){let w;if(typeof y=="string"){const C=await sp(e,{idToken:y}).catch(()=>{});if(!C)break;w=await ta._fromGetAccountInfoResponse(e,C,y)}else w=ta._fromJSON(e,y);d!==a&&(u=w),a=d;break}}catch{}const f=o.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Hu(a,e,n):(a=f[0],u&&await a._set(c,u.toJSON()),await Promise.all(t.map(async d=>{if(d!==a)try{await d._remove(c)}catch{}})),new Hu(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ob(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ub(e))return"Blackberry";if(db(e))return"Webos";if(sb(e))return"Safari";if((e.includes("chrome/")||ab(e))&&!e.includes("edge/"))return"Chrome";if(cb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function ob(r=lo()){return/firefox\//i.test(r)}function sb(r=lo()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ab(r=lo()){return/crios\//i.test(r)}function lb(r=lo()){return/iemobile/i.test(r)}function cb(r=lo()){return/android/i.test(r)}function ub(r=lo()){return/blackberry/i.test(r)}function db(r=lo()){return/webos/i.test(r)}function wg(r=lo()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function yA(r=lo()){var e;return wg(r)&&!!((e=window.navigator)!=null&&e.standalone)}function xA(){return I6()&&document.documentMode===10}function hb(r=lo()){return wg(r)||cb(r)||db(r)||ub(r)||/windows phone/i.test(r)||lb(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(r,e=[]){let t;switch(r){case"Browser":t=X2(lo());break;case"Worker":t=`${X2(lo())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ld}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=a=>new Promise((c,u)=>{try{const f=e(a);c(f)}catch(f){u(f)}});n.onAbort=t,this.queue.push(n);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bA(r,e={}){return pc(r,"GET","/v2/passwordPolicy",fc(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=6;class SA{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??wA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let o=0;o<e.length;o++)n=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,t,n,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Z2(this),this.idTokenSubscription=new Z2(this),this.beforeStateQueue=new vA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=dl(t)),this._initializationPromise=this.queue(async()=>{var n,o,a;if(!this._deleted&&(this.persistenceManager=await Hu.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await sp(this,{idToken:e}),n=await ta._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Is(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(a=this.redirectUser)==null?void 0:a._redirectEventId,u=n==null?void 0:n._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===u)&&(f!=null&&f.user)&&(n=f.user,o=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(n)}catch(c){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return qt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ap(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Is(this.app))return Promise.reject(hl(this));const t=e?Ai(e):null;return t&&qt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&qt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Is(this.app)?Promise.reject(hl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Is(this.app)?Promise.reject(hl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bA(this),t=new SA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bh("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await gA(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&dl(e)||this._popupRedirectResolver;qt(t,this,"argument-error"),this.redirectPersistenceManager=await Hu.create(this,[dl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(qt(u,this,"internal-error"),u.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,n,o);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(Is(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&XC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function nu(r){return Ai(r)}class Z2{constructor(e){this.auth=e,this.observer=null,this.addObserver=O6(t=>this.observer=t)}get next(){return qt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TA(r){Cp=r}function pb(r){return Cp.loadJS(r)}function CA(){return Cp.recaptchaEnterpriseScript}function AA(){return Cp.gapiScript}function kA(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class jA{constructor(){this.enterprise=new EA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class EA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const IA="recaptcha-enterprise",mb="NO_RECAPTCHA";class RA{constructor(e){this.type=IA,this.auth=nu(e)}async verify(e="verify",t=!1){async function n(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,u)=>{lA(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new aA(f);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,c(d.siteKey)}}).catch(f=>{u(f)})})}function o(a,c,u){const f=window.grecaptcha;K2(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(d=>{c(d)}).catch(()=>{c(mb)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jA().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{n(this.auth).then(u=>{if(!t&&K2(window.grecaptcha))o(u,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=CA();f.length!==0&&(f+=u),pb(f).then(()=>{o(u,a,c)}).catch(d=>{c(d)})}}).catch(u=>{c(u)})})}}async function ey(r,e,t,n=!1,o=!1){const a=new RA(r);let c;if(o)c=mb;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const f=u.phoneEnrollmentInfo.phoneNumber,d=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const f=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Vm(r,e,t,n,o){var a;if((a=r._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await ey(r,e,t,t==="getOobCode");return n(r,c)}else return n(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await ey(r,e,t,t==="getOobCode");return n(r,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(r,e){const t=yg(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Hc(a,e??{}))return o;oa(o,"already-initialized")}return t.initialize({options:e})}function NA(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(dl);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function BA(r,e,t){const n=nu(r);qt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const o=!1,a=gb(e),{host:c,port:u}=LA(e),f=u===null?"":`:${u}`,d={url:`${a}//${c}${f}/`},y=Object.freeze({host:c,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!n._canInitEmulator){qt(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),qt(Hc(d,n.config.emulator)&&Hc(y,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=y,n.settings.appVerificationDisabledForTesting=!0,ad(c)?($v(`${a}//${c}${f}`),Uv("Auth",!0)):FA()}function gb(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function LA(r){const e=gb(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(n);if(o){const a=o[1];return{host:a,port:ty(n.substr(a.length+1))}}else{const[a,c]=n.split(":");return{host:a,port:ty(c)}}}function ty(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function FA(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ul("not implemented")}_getIdTokenResponse(e){return ul("not implemented")}_linkToIdToken(e,t){return ul("not implemented")}_getReauthenticationResolver(e){return ul("not implemented")}}async function zA(r,e){return pc(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA(r,e){return _h(r,"POST","/v1/accounts:signInWithPassword",fc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(r,e){return _h(r,"POST","/v1/accounts:signInWithEmailLink",fc(r,e))}async function MA(r,e){return _h(r,"POST","/v1/accounts:signInWithEmailLink",fc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch extends Sg{constructor(e,t,n,o=null){super("password",n),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ch(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new ch(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vm(e,t,"signInWithPassword",OA);case"emailLink":return VA(e,{email:this._email,oobCode:this._password});default:oa(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vm(e,n,"signUpPassword",zA);case"emailLink":return MA(e,{idToken:t,email:this._email,oobCode:this._password});default:oa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gu(r,e){return _h(r,"POST","/v1/accounts:signInWithIdp",fc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="http://localhost";class Kc extends Sg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Kc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):oa("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:o,...a}=t;if(!n||!o)return null;const c=new Kc(n,o);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Gu(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Gu(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Gu(e,t)}buildRequest(){const e={requestUri:DA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $A(r){const e=Ud(qd(r)).link,t=e?Ud(qd(e)).deep_link_id:null,n=Ud(qd(r)).deep_link_id;return(n?Ud(qd(n)).link:null)||n||t||e||r}class _g{constructor(e){const t=Ud(qd(e)),n=t.apiKey??null,o=t.oobCode??null,a=WA(t.mode??null);qt(n&&o&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=$A(e);try{return new _g(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(){this.providerId=cd.PROVIDER_ID}static credential(e,t){return ch._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=_g.parseLink(t);return qt(n,"argument-error"),ch._fromEmailAndCode(e,n.code,n.tenantId)}}cd.PROVIDER_ID="password";cd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th extends yb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends Th{constructor(){super("facebook.com")}static credential(e){return Kc._fromParams({providerId:Gl.PROVIDER_ID,signInMethod:Gl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gl.credentialFromTaggedObject(e)}static credentialFromError(e){return Gl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gl.credential(e.oauthAccessToken)}catch{return null}}}Gl.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends Th{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Kc._fromParams({providerId:Kl.PROVIDER_ID,signInMethod:Kl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Kl.credentialFromTaggedObject(e)}static credentialFromError(e){return Kl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Kl.credential(t,n)}catch{return null}}}Kl.GOOGLE_SIGN_IN_METHOD="google.com";Kl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends Th{constructor(){super("github.com")}static credential(e){return Kc._fromParams({providerId:Jl.PROVIDER_ID,signInMethod:Jl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jl.credentialFromTaggedObject(e)}static credentialFromError(e){return Jl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jl.credential(e.oauthAccessToken)}catch{return null}}}Jl.GITHUB_SIGN_IN_METHOD="github.com";Jl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends Th{constructor(){super("twitter.com")}static credential(e,t){return Kc._fromParams({providerId:Yl.PROVIDER_ID,signInMethod:Yl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yl.credentialFromTaggedObject(e)}static credentialFromError(e){return Yl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Yl.credential(t,n)}catch{return null}}}Yl.TWITTER_SIGN_IN_METHOD="twitter.com";Yl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UA(r,e){return _h(r,"POST","/v1/accounts:signUp",fc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,o=!1){const a=await ta._fromIdTokenResponse(e,n,o),c=ry(n);return new Jc({user:a,providerId:c,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const o=ry(n);return new Jc({user:e,providerId:o,_tokenResponse:n,operationType:t})}}function ry(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp extends yl{constructor(e,t,n,o){super(t.code,t.message),this.operationType=n,this.user=o,Object.setPrototypeOf(this,lp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,o){return new lp(e,t,n,o)}}function xb(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?lp._fromErrorAndOperation(r,a,e,n):a})}async function qA(r,e,t=!1){const n=await lh(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Jc._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HA(r,e,t=!1){const{auth:n}=r;if(Is(n.app))return Promise.reject(hl(n));const o="reauthenticate";try{const a=await lh(r,xb(n,o,e,r),t);qt(a.idToken,n,"internal-error");const c=bg(a.idToken);qt(c,n,"internal-error");const{sub:u}=c;return qt(r.uid===u,n,"user-mismatch"),Jc._forOperation(r,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&oa(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vb(r,e,t=!1){if(Is(r.app))return Promise.reject(hl(r));const n="signIn",o=await xb(r,n,e),a=await Jc._fromIdTokenResponse(r,n,o);return t||await r._updateCurrentUser(a.user),a}async function GA(r,e){return vb(nu(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bb(r){const e=nu(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function KA(r,e,t){if(Is(r.app))return Promise.reject(hl(r));const n=nu(r),c=await Vm(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",UA).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&bb(r),f}),u=await Jc._fromIdTokenResponse(n,"signIn",c);return await n._updateCurrentUser(u.user),u}function JA(r,e,t){return Is(r.app)?Promise.reject(hl(r)):GA(Ai(r),cd.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&bb(r),n})}function YA(r,e,t,n){return Ai(r).onIdTokenChanged(e,t,n)}function QA(r,e,t){return Ai(r).beforeAuthStateChanged(e,t)}function Ap(r,e,t,n){return Ai(r).onAuthStateChanged(e,t,n)}function XA(r){return Ai(r).signOut()}const cp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cp,"1"),this.storage.removeItem(cp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=1e3,e7=10;class Sb extends wb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),o=this.localCache[t];n!==o&&e(t,o,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,f)=>{this.notifyListeners(c,f)});return}const n=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(n);!t&&this.localCache[n]===c||this.notifyListeners(n,c)},a=this.storage.getItem(n);xA()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,e7):o()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const o of Array.from(n))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},ZA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Sb.type="LOCAL";const t7=Sb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b extends wb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}_b.type="SESSION";const Tb=_b;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r7(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const n=new kp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:o,data:a}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:o});const u=Array.from(c).map(async d=>d(t.origin,a)),f=await r7(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,c;return new Promise((u,f)=>{const d=Tg("",20);o.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},n);c={messageChannel:o,onMessage(w){const C=w;if(C.data.eventId===d)switch(C.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(C.data.response);break;default:clearTimeout(y),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ra(){return window}function i7(r){Ra().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(){return typeof Ra().WorkerGlobalScope<"u"&&typeof Ra().importScripts=="function"}async function o7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function s7(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function a7(){return Cb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="firebaseLocalStorageDb",l7=1,up="firebaseLocalStorage",kb="fbase_key";class Ch{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jp(r,e){return r.transaction([up],e?"readwrite":"readonly").objectStore(up)}function c7(){const r=indexedDB.deleteDatabase(Ab);return new Ch(r).toPromise()}function Mm(){const r=indexedDB.open(Ab,l7);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(up,{keyPath:kb})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(up)?e(n):(n.close(),await c7(),e(await Mm()))})})}async function ny(r,e,t){const n=jp(r,!0).put({[kb]:e,value:t});return new Ch(n).toPromise()}async function u7(r,e){const t=jp(r,!1).get(e),n=await new Ch(t).toPromise();return n===void 0?null:n.value}function iy(r,e){const t=jp(r,!0).delete(e);return new Ch(t).toPromise()}const d7=800,h7=3;class jb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>h7)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Cb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kp._getInstance(a7()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await o7(),!this.activeServiceWorker)return;this.sender=new n7(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||s7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mm();return await ny(e,cp,"1"),await iy(e,cp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ny(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>u7(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>iy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=jp(o,!1).getAll();return new Ch(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)n.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!n.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const o of Array.from(n))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jb.type="LOCAL";const f7=jb;new Sh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p7(r,e){return e?dl(e):(qt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg extends Sg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Gu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Gu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function m7(r){return vb(r.auth,new Cg(r),r.bypassAuthState)}function g7(r){const{auth:e,user:t}=r;return qt(t,e,"internal-error"),HA(t,new Cg(r),r.bypassAuthState)}async function y7(r){const{auth:e,user:t}=r;return qt(t,e,"internal-error"),qA(t,new Cg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,t,n,o,a=!1){this.auth=e,this.resolver=n,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:o,tenantId:a,error:c,type:u}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return m7;case"linkViaPopup":case"linkViaRedirect":return y7;case"reauthViaPopup":case"reauthViaRedirect":return g7;default:oa(this.auth,"internal-error")}}resolve(e){pl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x7=new Sh(2e3,1e4);class Mu extends Eb{constructor(e,t,n,o,a){super(e,t,o,a),this.provider=n,this.authWindow=null,this.pollId=null,Mu.currentPopupAction&&Mu.currentPopupAction.cancel(),Mu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qt(e,this.auth,"internal-error"),e}async onExecution(){pl(this.filter.length===1,"Popup operations only handle one event");const e=Tg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ia(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ia(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ia(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,x7.get())};e()}}Mu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7="pendingRedirect",Wf=new Map;class b7 extends Eb{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Wf.get(this.auth._key());if(!e){try{const n=await w7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Wf.set(this.auth._key(),e)}return this.bypassAuthState||Wf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function w7(r,e){const t=T7(e),n=_7(r);if(!await n._isAvailable())return!1;const o=await n._get(t)==="true";return await n._remove(t),o}function S7(r,e){Wf.set(r._key(),e)}function _7(r){return dl(r._redirectPersistence)}function T7(r){return Df(v7,r.config.apiKey,r.name)}async function C7(r,e,t=!1){if(Is(r.app))return Promise.reject(hl(r));const n=nu(r),o=p7(n,e),c=await new b7(n,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7=600*1e3;class k7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!j7(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ib(e)){const o=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ia(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=A7&&this.cachedEventUids.clear(),this.cachedEventUids.has(oy(e))}saveEventToCache(e){this.cachedEventUids.add(oy(e)),this.lastProcessedEventTime=Date.now()}}function oy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Ib({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function j7(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ib(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E7(r,e={}){return pc(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,R7=/^https?/;async function P7(r){if(r.config.emulator)return;const{authorizedDomains:e}=await E7(r);for(const t of e)try{if(N7(t))return}catch{}oa(r,"unauthorized-domain")}function N7(r){const e=zm(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===n}if(!R7.test(t))return!1;if(I7.test(r))return n===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B7=new Sh(3e4,6e4);function sy(){const r=Ra().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function L7(r){return new Promise((e,t)=>{var o,a,c;function n(){sy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sy(),t(Ia(r,"network-request-failed"))},timeout:B7.get()})}if((a=(o=Ra().gapi)==null?void 0:o.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((c=Ra().gapi)!=null&&c.load)n();else{const u=kA("iframefcb");return Ra()[u]=()=>{gapi.load?n():t(Ia(r,"network-request-failed"))},pb(`${AA()}?onload=${u}`).catch(f=>t(f))}}).catch(e=>{throw $f=null,e})}let $f=null;function F7(r){return $f=$f||L7(r),$f}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z7=new Sh(5e3,15e3),O7="__/auth/iframe",V7="emulator/auth/iframe",M7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},D7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W7(r){const e=r.config;qt(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?vg(e,V7):`https://${r.config.authDomain}/${O7}`,n={apiKey:e.apiKey,appName:r.name,v:ld},o=D7.get(r.config.apiHost);o&&(n.eid=o);const a=r._getFrameworks();return a.length&&(n.fw=a.join(",")),`${t}?${wh(n).slice(1)}`}async function $7(r){const e=await F7(r),t=Ra().gapi;return qt(t,r,"internal-error"),e.open({where:document.body,url:W7(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:M7,dontclear:!0},n=>new Promise(async(o,a)=>{await n.restyle({setHideOnLeave:!1});const c=Ia(r,"network-request-failed"),u=Ra().setTimeout(()=>{a(c)},z7.get());function f(){Ra().clearTimeout(u),o(n)}n.ping(f).then(f,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},q7=500,H7=600,G7="_blank",K7="http://localhost";class ay{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function J7(r,e,t,n=q7,o=H7){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const f={...U7,width:n.toString(),height:o.toString(),top:a,left:c},d=lo().toLowerCase();t&&(u=ab(d)?G7:t),ob(d)&&(e=e||K7,f.scrollbars="yes");const y=Object.entries(f).reduce((C,[v,B])=>`${C}${v}=${B},`,"");if(yA(d)&&u!=="_self")return Y7(e||"",u),new ay(null);const w=window.open(e||"",u,y);qt(w,r,"popup-blocked");try{w.focus()}catch{}return new ay(w)}function Y7(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q7="__/auth/handler",X7="emulator/auth/handler",Z7=encodeURIComponent("fac");async function ly(r,e,t,n,o,a){qt(r.config.authDomain,r,"auth-domain-config-required"),qt(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:ld,eventId:o};if(e instanceof yb){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",z6(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,w]of Object.entries({}))c[y]=w}if(e instanceof Th){const y=e.getScopes().filter(w=>w!=="");y.length>0&&(c.scopes=y.join(","))}r.tenantId&&(c.tid=r.tenantId);const u=c;for(const y of Object.keys(u))u[y]===void 0&&delete u[y];const f=await r._getAppCheckToken(),d=f?`#${Z7}=${encodeURIComponent(f)}`:"";return`${e8(r)}?${wh(u).slice(1)}${d}`}function e8({config:r}){return r.emulator?vg(r,X7):`https://${r.authDomain}/${Q7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="webStorageSupport";class t8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tb,this._completeRedirectFn=C7,this._overrideRedirectResult=S7}async _openPopup(e,t,n,o){var c;pl((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const a=await ly(e,t,n,zm(),o);return J7(e,a,Tg())}async _openRedirect(e,t,n,o){await this._originValidation(e);const a=await ly(e,t,n,zm(),o);return i7(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(pl(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await $7(e),n=new k7(e);return t.register("authEvent",o=>(qt(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:n.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dm,{type:dm},o=>{var c;const a=(c=o==null?void 0:o[0])==null?void 0:c[dm];a!==void 0&&t(!!a),oa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=P7(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hb()||sb()||wg()}}const r8=t8;var cy="@firebase/auth",uy="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function o8(r){Qu(new Gc("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=n.options;qt(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const f={apiKey:c,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fb(r)},d=new _A(n,o,a,f);return NA(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Qu(new Gc("auth-internal",e=>{const t=nu(e.getProvider("auth").getImmediate());return(n=>new n8(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),tc(cy,uy,i8(r)),tc(cy,uy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8=300,a8=Wv("authIdTokenMaxAge")||s8;let dy=null;const l8=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>a8)return;const o=t==null?void 0:t.token;dy!==o&&(dy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function c8(r=Kv()){const e=yg(r,"auth");if(e.isInitialized())return e.getImmediate();const t=PA(r,{popupRedirectResolver:r8,persistence:[f7,t7,Tb]}),n=Wv("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const c=l8(a.toString());QA(t,c,()=>c(t.currentUser)),YA(t,u=>c(u))}}const o=Mv("auth");return o&&BA(t,`http://${o}`),t}function u8(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}TA({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=o=>{const a=Ia("internal-error");a.customData=o,t(a)},n.type="text/javascript",n.charset="UTF-8",u8().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});o8("Browser");var hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rc,Rb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,j){function T(){}T.prototype=j.prototype,L.F=j.prototype,L.prototype=new T,L.prototype.constructor=L,L.D=function(V,k,b){for(var N=Array(arguments.length-2),D=2;D<arguments.length;D++)N[D-2]=arguments[D];return j.prototype[k].apply(V,N)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(L,j,T){T||(T=0);const V=Array(16);if(typeof j=="string")for(var k=0;k<16;++k)V[k]=j.charCodeAt(T++)|j.charCodeAt(T++)<<8|j.charCodeAt(T++)<<16|j.charCodeAt(T++)<<24;else for(k=0;k<16;++k)V[k]=j[T++]|j[T++]<<8|j[T++]<<16|j[T++]<<24;j=L.g[0],T=L.g[1],k=L.g[2];let b=L.g[3],N;N=j+(b^T&(k^b))+V[0]+3614090360&4294967295,j=T+(N<<7&4294967295|N>>>25),N=b+(k^j&(T^k))+V[1]+3905402710&4294967295,b=j+(N<<12&4294967295|N>>>20),N=k+(T^b&(j^T))+V[2]+606105819&4294967295,k=b+(N<<17&4294967295|N>>>15),N=T+(j^k&(b^j))+V[3]+3250441966&4294967295,T=k+(N<<22&4294967295|N>>>10),N=j+(b^T&(k^b))+V[4]+4118548399&4294967295,j=T+(N<<7&4294967295|N>>>25),N=b+(k^j&(T^k))+V[5]+1200080426&4294967295,b=j+(N<<12&4294967295|N>>>20),N=k+(T^b&(j^T))+V[6]+2821735955&4294967295,k=b+(N<<17&4294967295|N>>>15),N=T+(j^k&(b^j))+V[7]+4249261313&4294967295,T=k+(N<<22&4294967295|N>>>10),N=j+(b^T&(k^b))+V[8]+1770035416&4294967295,j=T+(N<<7&4294967295|N>>>25),N=b+(k^j&(T^k))+V[9]+2336552879&4294967295,b=j+(N<<12&4294967295|N>>>20),N=k+(T^b&(j^T))+V[10]+4294925233&4294967295,k=b+(N<<17&4294967295|N>>>15),N=T+(j^k&(b^j))+V[11]+2304563134&4294967295,T=k+(N<<22&4294967295|N>>>10),N=j+(b^T&(k^b))+V[12]+1804603682&4294967295,j=T+(N<<7&4294967295|N>>>25),N=b+(k^j&(T^k))+V[13]+4254626195&4294967295,b=j+(N<<12&4294967295|N>>>20),N=k+(T^b&(j^T))+V[14]+2792965006&4294967295,k=b+(N<<17&4294967295|N>>>15),N=T+(j^k&(b^j))+V[15]+1236535329&4294967295,T=k+(N<<22&4294967295|N>>>10),N=j+(k^b&(T^k))+V[1]+4129170786&4294967295,j=T+(N<<5&4294967295|N>>>27),N=b+(T^k&(j^T))+V[6]+3225465664&4294967295,b=j+(N<<9&4294967295|N>>>23),N=k+(j^T&(b^j))+V[11]+643717713&4294967295,k=b+(N<<14&4294967295|N>>>18),N=T+(b^j&(k^b))+V[0]+3921069994&4294967295,T=k+(N<<20&4294967295|N>>>12),N=j+(k^b&(T^k))+V[5]+3593408605&4294967295,j=T+(N<<5&4294967295|N>>>27),N=b+(T^k&(j^T))+V[10]+38016083&4294967295,b=j+(N<<9&4294967295|N>>>23),N=k+(j^T&(b^j))+V[15]+3634488961&4294967295,k=b+(N<<14&4294967295|N>>>18),N=T+(b^j&(k^b))+V[4]+3889429448&4294967295,T=k+(N<<20&4294967295|N>>>12),N=j+(k^b&(T^k))+V[9]+568446438&4294967295,j=T+(N<<5&4294967295|N>>>27),N=b+(T^k&(j^T))+V[14]+3275163606&4294967295,b=j+(N<<9&4294967295|N>>>23),N=k+(j^T&(b^j))+V[3]+4107603335&4294967295,k=b+(N<<14&4294967295|N>>>18),N=T+(b^j&(k^b))+V[8]+1163531501&4294967295,T=k+(N<<20&4294967295|N>>>12),N=j+(k^b&(T^k))+V[13]+2850285829&4294967295,j=T+(N<<5&4294967295|N>>>27),N=b+(T^k&(j^T))+V[2]+4243563512&4294967295,b=j+(N<<9&4294967295|N>>>23),N=k+(j^T&(b^j))+V[7]+1735328473&4294967295,k=b+(N<<14&4294967295|N>>>18),N=T+(b^j&(k^b))+V[12]+2368359562&4294967295,T=k+(N<<20&4294967295|N>>>12),N=j+(T^k^b)+V[5]+4294588738&4294967295,j=T+(N<<4&4294967295|N>>>28),N=b+(j^T^k)+V[8]+2272392833&4294967295,b=j+(N<<11&4294967295|N>>>21),N=k+(b^j^T)+V[11]+1839030562&4294967295,k=b+(N<<16&4294967295|N>>>16),N=T+(k^b^j)+V[14]+4259657740&4294967295,T=k+(N<<23&4294967295|N>>>9),N=j+(T^k^b)+V[1]+2763975236&4294967295,j=T+(N<<4&4294967295|N>>>28),N=b+(j^T^k)+V[4]+1272893353&4294967295,b=j+(N<<11&4294967295|N>>>21),N=k+(b^j^T)+V[7]+4139469664&4294967295,k=b+(N<<16&4294967295|N>>>16),N=T+(k^b^j)+V[10]+3200236656&4294967295,T=k+(N<<23&4294967295|N>>>9),N=j+(T^k^b)+V[13]+681279174&4294967295,j=T+(N<<4&4294967295|N>>>28),N=b+(j^T^k)+V[0]+3936430074&4294967295,b=j+(N<<11&4294967295|N>>>21),N=k+(b^j^T)+V[3]+3572445317&4294967295,k=b+(N<<16&4294967295|N>>>16),N=T+(k^b^j)+V[6]+76029189&4294967295,T=k+(N<<23&4294967295|N>>>9),N=j+(T^k^b)+V[9]+3654602809&4294967295,j=T+(N<<4&4294967295|N>>>28),N=b+(j^T^k)+V[12]+3873151461&4294967295,b=j+(N<<11&4294967295|N>>>21),N=k+(b^j^T)+V[15]+530742520&4294967295,k=b+(N<<16&4294967295|N>>>16),N=T+(k^b^j)+V[2]+3299628645&4294967295,T=k+(N<<23&4294967295|N>>>9),N=j+(k^(T|~b))+V[0]+4096336452&4294967295,j=T+(N<<6&4294967295|N>>>26),N=b+(T^(j|~k))+V[7]+1126891415&4294967295,b=j+(N<<10&4294967295|N>>>22),N=k+(j^(b|~T))+V[14]+2878612391&4294967295,k=b+(N<<15&4294967295|N>>>17),N=T+(b^(k|~j))+V[5]+4237533241&4294967295,T=k+(N<<21&4294967295|N>>>11),N=j+(k^(T|~b))+V[12]+1700485571&4294967295,j=T+(N<<6&4294967295|N>>>26),N=b+(T^(j|~k))+V[3]+2399980690&4294967295,b=j+(N<<10&4294967295|N>>>22),N=k+(j^(b|~T))+V[10]+4293915773&4294967295,k=b+(N<<15&4294967295|N>>>17),N=T+(b^(k|~j))+V[1]+2240044497&4294967295,T=k+(N<<21&4294967295|N>>>11),N=j+(k^(T|~b))+V[8]+1873313359&4294967295,j=T+(N<<6&4294967295|N>>>26),N=b+(T^(j|~k))+V[15]+4264355552&4294967295,b=j+(N<<10&4294967295|N>>>22),N=k+(j^(b|~T))+V[6]+2734768916&4294967295,k=b+(N<<15&4294967295|N>>>17),N=T+(b^(k|~j))+V[13]+1309151649&4294967295,T=k+(N<<21&4294967295|N>>>11),N=j+(k^(T|~b))+V[4]+4149444226&4294967295,j=T+(N<<6&4294967295|N>>>26),N=b+(T^(j|~k))+V[11]+3174756917&4294967295,b=j+(N<<10&4294967295|N>>>22),N=k+(j^(b|~T))+V[2]+718787259&4294967295,k=b+(N<<15&4294967295|N>>>17),N=T+(b^(k|~j))+V[9]+3951481745&4294967295,L.g[0]=L.g[0]+j&4294967295,L.g[1]=L.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,L.g[2]=L.g[2]+k&4294967295,L.g[3]=L.g[3]+b&4294967295}n.prototype.v=function(L,j){j===void 0&&(j=L.length);const T=j-this.blockSize,V=this.C;let k=this.h,b=0;for(;b<j;){if(k==0)for(;b<=T;)o(this,L,b),b+=this.blockSize;if(typeof L=="string"){for(;b<j;)if(V[k++]=L.charCodeAt(b++),k==this.blockSize){o(this,V),k=0;break}}else for(;b<j;)if(V[k++]=L[b++],k==this.blockSize){o(this,V),k=0;break}}this.h=k,this.o+=j},n.prototype.A=function(){var L=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);L[0]=128;for(var j=1;j<L.length-8;++j)L[j]=0;j=this.o*8;for(var T=L.length-8;T<L.length;++T)L[T]=j&255,j/=256;for(this.v(L),L=Array(16),j=0,T=0;T<4;++T)for(let V=0;V<32;V+=8)L[j++]=this.g[T]>>>V&255;return L};function a(L,j){var T=u;return Object.prototype.hasOwnProperty.call(T,L)?T[L]:T[L]=j(L)}function c(L,j){this.h=j;const T=[];let V=!0;for(let k=L.length-1;k>=0;k--){const b=L[k]|0;V&&b==j||(T[k]=b,V=!1)}this.g=T}var u={};function f(L){return-128<=L&&L<128?a(L,function(j){return new c([j|0],j<0?-1:0)}):new c([L|0],L<0?-1:0)}function d(L){if(isNaN(L)||!isFinite(L))return w;if(L<0)return z(d(-L));const j=[];let T=1;for(let V=0;L>=T;V++)j[V]=L/T|0,T*=4294967296;return new c(j,0)}function y(L,j){if(L.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(L.charAt(0)=="-")return z(y(L.substring(1),j));if(L.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=d(Math.pow(j,8));let V=w;for(let b=0;b<L.length;b+=8){var k=Math.min(8,L.length-b);const N=parseInt(L.substring(b,b+k),j);k<8?(k=d(Math.pow(j,k)),V=V.j(k).add(d(N))):(V=V.j(T),V=V.add(d(N)))}return V}var w=f(0),C=f(1),v=f(16777216);r=c.prototype,r.m=function(){if(I(this))return-z(this).m();let L=0,j=1;for(let T=0;T<this.g.length;T++){const V=this.i(T);L+=(V>=0?V:4294967296+V)*j,j*=4294967296}return L},r.toString=function(L){if(L=L||10,L<2||36<L)throw Error("radix out of range: "+L);if(B(this))return"0";if(I(this))return"-"+z(this).toString(L);const j=d(Math.pow(L,6));var T=this;let V="";for(;;){const k=F(T,j).g;T=A(T,k.j(j));let b=((T.g.length>0?T.g[0]:T.h)>>>0).toString(L);if(T=k,B(T))return b+V;for(;b.length<6;)b="0"+b;V=b+V}},r.i=function(L){return L<0?0:L<this.g.length?this.g[L]:this.h};function B(L){if(L.h!=0)return!1;for(let j=0;j<L.g.length;j++)if(L.g[j]!=0)return!1;return!0}function I(L){return L.h==-1}r.l=function(L){return L=A(this,L),I(L)?-1:B(L)?0:1};function z(L){const j=L.g.length,T=[];for(let V=0;V<j;V++)T[V]=~L.g[V];return new c(T,~L.h).add(C)}r.abs=function(){return I(this)?z(this):this},r.add=function(L){const j=Math.max(this.g.length,L.g.length),T=[];let V=0;for(let k=0;k<=j;k++){let b=V+(this.i(k)&65535)+(L.i(k)&65535),N=(b>>>16)+(this.i(k)>>>16)+(L.i(k)>>>16);V=N>>>16,b&=65535,N&=65535,T[k]=N<<16|b}return new c(T,T[T.length-1]&-2147483648?-1:0)};function A(L,j){return L.add(z(j))}r.j=function(L){if(B(this)||B(L))return w;if(I(this))return I(L)?z(this).j(z(L)):z(z(this).j(L));if(I(L))return z(this.j(z(L)));if(this.l(v)<0&&L.l(v)<0)return d(this.m()*L.m());const j=this.g.length+L.g.length,T=[];for(var V=0;V<2*j;V++)T[V]=0;for(V=0;V<this.g.length;V++)for(let k=0;k<L.g.length;k++){const b=this.i(V)>>>16,N=this.i(V)&65535,D=L.i(k)>>>16,q=L.i(k)&65535;T[2*V+2*k]+=N*q,M(T,2*V+2*k),T[2*V+2*k+1]+=b*q,M(T,2*V+2*k+1),T[2*V+2*k+1]+=N*D,M(T,2*V+2*k+1),T[2*V+2*k+2]+=b*D,M(T,2*V+2*k+2)}for(L=0;L<j;L++)T[L]=T[2*L+1]<<16|T[2*L];for(L=j;L<2*j;L++)T[L]=0;return new c(T,0)};function M(L,j){for(;(L[j]&65535)!=L[j];)L[j+1]+=L[j]>>>16,L[j]&=65535,j++}function U(L,j){this.g=L,this.h=j}function F(L,j){if(B(j))throw Error("division by zero");if(B(L))return new U(w,w);if(I(L))return j=F(z(L),j),new U(z(j.g),z(j.h));if(I(j))return j=F(L,z(j)),new U(z(j.g),j.h);if(L.g.length>30){if(I(L)||I(j))throw Error("slowDivide_ only works with positive integers.");for(var T=C,V=j;V.l(L)<=0;)T=se(T),V=se(V);var k=ue(T,1),b=ue(V,1);for(V=ue(V,2),T=ue(T,2);!B(V);){var N=b.add(V);N.l(L)<=0&&(k=k.add(T),b=N),V=ue(V,1),T=ue(T,1)}return j=A(L,k.j(j)),new U(k,j)}for(k=w;L.l(j)>=0;){for(T=Math.max(1,Math.floor(L.m()/j.m())),V=Math.ceil(Math.log(T)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),b=d(T),N=b.j(j);I(N)||N.l(L)>0;)T-=V,b=d(T),N=b.j(j);B(b)&&(b=C),k=k.add(b),L=A(L,N)}return new U(k,L)}r.B=function(L){return F(this,L).h},r.and=function(L){const j=Math.max(this.g.length,L.g.length),T=[];for(let V=0;V<j;V++)T[V]=this.i(V)&L.i(V);return new c(T,this.h&L.h)},r.or=function(L){const j=Math.max(this.g.length,L.g.length),T=[];for(let V=0;V<j;V++)T[V]=this.i(V)|L.i(V);return new c(T,this.h|L.h)},r.xor=function(L){const j=Math.max(this.g.length,L.g.length),T=[];for(let V=0;V<j;V++)T[V]=this.i(V)^L.i(V);return new c(T,this.h^L.h)};function se(L){const j=L.g.length+1,T=[];for(let V=0;V<j;V++)T[V]=L.i(V)<<1|L.i(V-1)>>>31;return new c(T,L.h)}function ue(L,j){const T=j>>5;j%=32;const V=L.g.length-T,k=[];for(let b=0;b<V;b++)k[b]=j>0?L.i(b+T)>>>j|L.i(b+T+1)<<32-j:L.i(b+T);return new c(k,L.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,Rb=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=d,c.fromString=y,rc=c}).apply(typeof hy<"u"?hy:typeof self<"u"?self:typeof window<"u"?window:{});var kf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pb,Hd,Nb,Uf,Dm,Bb,Lb,Fb;(function(){var r,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof kf=="object"&&kf];for(var R=0;R<m.length;++R){var $=m[R];if($&&$.Math==Math)return $}throw Error("Cannot find global object")}var n=t(this);function o(m,R){if(R)e:{var $=n;m=m.split(".");for(var ee=0;ee<m.length-1;ee++){var ke=m[ee];if(!(ke in $))break e;$=$[ke]}m=m[m.length-1],ee=$[m],R=R(ee),R!=ee&&R!=null&&e($,m,{configurable:!0,writable:!0,value:R})}}o("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(m){return m||function(R){var $=[],ee;for(ee in R)Object.prototype.hasOwnProperty.call(R,ee)&&$.push([ee,R[ee]]);return $}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(m){var R=typeof m;return R=="object"&&m!=null||R=="function"}function f(m,R,$){return m.call.apply(m.bind,arguments)}function d(m,R,$){return d=f,d.apply(null,arguments)}function y(m,R){var $=Array.prototype.slice.call(arguments,1);return function(){var ee=$.slice();return ee.push.apply(ee,arguments),m.apply(this,ee)}}function w(m,R){function $(){}$.prototype=R.prototype,m.Z=R.prototype,m.prototype=new $,m.prototype.constructor=m,m.Ob=function(ee,ke,Ne){for(var et=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)et[Ot-2]=arguments[Ot];return R.prototype[ke].apply(ee,et)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function v(m){const R=m.length;if(R>0){const $=Array(R);for(let ee=0;ee<R;ee++)$[ee]=m[ee];return $}return[]}function B(m,R){for(let ee=1;ee<arguments.length;ee++){const ke=arguments[ee];var $=typeof ke;if($=$!="object"?$:ke?Array.isArray(ke)?"array":$:"null",$=="array"||$=="object"&&typeof ke.length=="number"){$=m.length||0;const Ne=ke.length||0;m.length=$+Ne;for(let et=0;et<Ne;et++)m[$+et]=ke[et]}else m.push(ke)}}class I{constructor(R,$){this.i=R,this.j=$,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function z(m){c.setTimeout(()=>{throw m},0)}function A(){var m=L;let R=null;return m.g&&(R=m.g,m.g=m.g.next,m.g||(m.h=null),R.next=null),R}class M{constructor(){this.h=this.g=null}add(R,$){const ee=U.get();ee.set(R,$),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var U=new I(()=>new F,m=>m.reset());class F{constructor(){this.next=this.g=this.h=null}set(R,$){this.h=R,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}let se,ue=!1,L=new M,j=()=>{const m=Promise.resolve(void 0);se=()=>{m.then(T)}};function T(){for(var m;m=A();){try{m.h.call(m.g)}catch($){z($)}var R=U;R.j(m),R.h<100&&(R.h++,m.next=R.g,R.g=m)}ue=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(m,R){this.type=m,this.g=this.target=R,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,R=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const $=()=>{};c.addEventListener("test",$,R),c.removeEventListener("test",$,R)}catch{}return m})();function N(m){return/^[\s\xa0]*$/.test(m)}function D(m,R){k.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,R)}w(D,k),D.prototype.init=function(m,R){const $=this.type=m.type,ee=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=R,R=m.relatedTarget,R||($=="mouseover"?R=m.fromElement:$=="mouseout"&&(R=m.toElement)),this.relatedTarget=R,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&D.Z.h.call(this)},D.prototype.h=function(){D.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var q="closure_listenable_"+(Math.random()*1e6|0),ie=0;function oe(m,R,$,ee,ke){this.listener=m,this.proxy=null,this.src=R,this.type=$,this.capture=!!ee,this.ha=ke,this.key=++ie,this.da=this.fa=!1}function ne(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ve(m,R,$){for(const ee in m)R.call($,m[ee],ee,m)}function be(m,R){for(const $ in m)R.call(void 0,m[$],$,m)}function Z(m){const R={};for(const $ in m)R[$]=m[$];return R}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(m,R){let $,ee;for(let ke=1;ke<arguments.length;ke++){ee=arguments[ke];for($ in ee)m[$]=ee[$];for(let Ne=0;Ne<W.length;Ne++)$=W[Ne],Object.prototype.hasOwnProperty.call(ee,$)&&(m[$]=ee[$])}}function re(m){this.src=m,this.g={},this.h=0}re.prototype.add=function(m,R,$,ee,ke){const Ne=m.toString();m=this.g[Ne],m||(m=this.g[Ne]=[],this.h++);const et=ge(m,R,ee,ke);return et>-1?(R=m[et],$||(R.fa=!1)):(R=new oe(R,this.src,Ne,!!ee,ke),R.fa=$,m.push(R)),R};function he(m,R){const $=R.type;if($ in m.g){var ee=m.g[$],ke=Array.prototype.indexOf.call(ee,R,void 0),Ne;(Ne=ke>=0)&&Array.prototype.splice.call(ee,ke,1),Ne&&(ne(R),m.g[$].length==0&&(delete m.g[$],m.h--))}}function ge(m,R,$,ee){for(let ke=0;ke<m.length;++ke){const Ne=m[ke];if(!Ne.da&&Ne.listener==R&&Ne.capture==!!$&&Ne.ha==ee)return ke}return-1}var _e="closure_lm_"+(Math.random()*1e6|0),fe={};function xe(m,R,$,ee,ke){if(Array.isArray(R)){for(let Ne=0;Ne<R.length;Ne++)xe(m,R[Ne],$,ee,ke);return null}return $=vt($),m&&m[q]?m.J(R,$,u(ee)?!!ee.capture:!1,ke):Pe(m,R,$,!1,ee,ke)}function Pe(m,R,$,ee,ke,Ne){if(!R)throw Error("Invalid event type");const et=u(ke)?!!ke.capture:!!ke;let Ot=Pt(m);if(Ot||(m[_e]=Ot=new re(m)),$=Ot.add(R,$,ee,et,Ne),$.proxy)return $;if(ee=We(),$.proxy=ee,ee.src=m,ee.listener=$,m.addEventListener)b||(ke=et),ke===void 0&&(ke=!1),m.addEventListener(R.toString(),ee,ke);else if(m.attachEvent)m.attachEvent(Fe(R.toString()),ee);else if(m.addListener&&m.removeListener)m.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return $}function We(){function m($){return R.call(m.src,m.listener,$)}const R=de;return m}function Qe(m,R,$,ee,ke){if(Array.isArray(R))for(var Ne=0;Ne<R.length;Ne++)Qe(m,R[Ne],$,ee,ke);else ee=u(ee)?!!ee.capture:!!ee,$=vt($),m&&m[q]?(m=m.i,Ne=String(R).toString(),Ne in m.g&&(R=m.g[Ne],$=ge(R,$,ee,ke),$>-1&&(ne(R[$]),Array.prototype.splice.call(R,$,1),R.length==0&&(delete m.g[Ne],m.h--)))):m&&(m=Pt(m))&&(R=m.g[R.toString()],m=-1,R&&(m=ge(R,$,ee,ke)),($=m>-1?R[m]:null)&&Xe($))}function Xe(m){if(typeof m!="number"&&m&&!m.da){var R=m.src;if(R&&R[q])he(R.i,m);else{var $=m.type,ee=m.proxy;R.removeEventListener?R.removeEventListener($,ee,m.capture):R.detachEvent?R.detachEvent(Fe($),ee):R.addListener&&R.removeListener&&R.removeListener(ee),($=Pt(R))?(he($,m),$.h==0&&($.src=null,R[_e]=null)):ne(m)}}}function Fe(m){return m in fe?fe[m]:fe[m]="on"+m}function de(m,R){if(m.da)m=!0;else{R=new D(R,this);const $=m.listener,ee=m.ha||m.src;m.fa&&Xe(m),m=$.call(ee,R)}return m}function Pt(m){return m=m[_e],m instanceof re?m:null}var At="__closure_events_fn_"+(Math.random()*1e9>>>0);function vt(m){return typeof m=="function"?m:(m[At]||(m[At]=function(R){return m.handleEvent(R)}),m[At])}function qe(){V.call(this),this.i=new re(this),this.M=this,this.G=null}w(qe,V),qe.prototype[q]=!0,qe.prototype.removeEventListener=function(m,R,$,ee){Qe(this,m,R,$,ee)};function nt(m,R){var $,ee=m.G;if(ee)for($=[];ee;ee=ee.G)$.push(ee);if(m=m.M,ee=R.type||R,typeof R=="string")R=new k(R,m);else if(R instanceof k)R.target=R.target||m;else{var ke=R;R=new k(ee,m),J(R,ke)}ke=!0;let Ne,et;if($)for(et=$.length-1;et>=0;et--)Ne=R.g=$[et],ke=tt(Ne,ee,!0,R)&&ke;if(Ne=R.g=m,ke=tt(Ne,ee,!0,R)&&ke,ke=tt(Ne,ee,!1,R)&&ke,$)for(et=0;et<$.length;et++)Ne=R.g=$[et],ke=tt(Ne,ee,!1,R)&&ke}qe.prototype.N=function(){if(qe.Z.N.call(this),this.i){var m=this.i;for(const R in m.g){const $=m.g[R];for(let ee=0;ee<$.length;ee++)ne($[ee]);delete m.g[R],m.h--}}this.G=null},qe.prototype.J=function(m,R,$,ee){return this.i.add(String(m),R,!1,$,ee)},qe.prototype.K=function(m,R,$,ee){return this.i.add(String(m),R,!0,$,ee)};function tt(m,R,$,ee){if(R=m.i.g[String(R)],!R)return!0;R=R.concat();let ke=!0;for(let Ne=0;Ne<R.length;++Ne){const et=R[Ne];if(et&&!et.da&&et.capture==$){const Ot=et.listener,Vr=et.ha||et.src;et.fa&&he(m.i,et),ke=Ot.call(Vr,ee)!==!1&&ke}}return ke&&!ee.defaultPrevented}function Gt(m,R){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=d(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:c.setTimeout(m,R||0)}function wt(m){m.g=Gt(()=>{m.g=null,m.i&&(m.i=!1,wt(m))},m.l);const R=m.h;m.h=null,m.m.apply(null,R)}class hr extends V{constructor(R,$){super(),this.m=R,this.l=$,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:wt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nt(m){V.call(this),this.h=m,this.g={}}w(Nt,V);var Wt=[];function yr(m){ve(m.g,function(R,$){this.g.hasOwnProperty($)&&Xe(R)},m),m.g={}}Nt.prototype.N=function(){Nt.Z.N.call(this),yr(this)},Nt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ft=c.JSON.stringify,St=c.JSON.parse,kt=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function ft(){}function Ar(){}var rr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function dt(){k.call(this,"d")}w(dt,k);function $t(){k.call(this,"c")}w($t,k);var ir={},Ct=null;function Xt(){return Ct=Ct||new qe}ir.Ia="serverreachability";function Vt(m){k.call(this,ir.Ia,m)}w(Vt,k);function kr(m){const R=Xt();nt(R,new Vt(R))}ir.STAT_EVENT="statevent";function Lr(m,R){k.call(this,ir.STAT_EVENT,m),this.stat=R}w(Lr,k);function Mt(m){const R=Xt();nt(R,new Lr(R,m))}ir.Ja="timingevent";function zt(m,R){k.call(this,ir.Ja,m),this.size=R}w(zt,k);function or(m,R){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},R)}function Di(){this.g=!0}Di.prototype.ua=function(){this.g=!1};function Rn(m,R,$,ee,ke,Ne){m.info(function(){if(m.g)if(Ne){var et="",Ot=Ne.split("&");for(let lr=0;lr<Ot.length;lr++){var Vr=Ot[lr].split("=");if(Vr.length>1){const Gr=Vr[0];Vr=Vr[1];const zn=Gr.split("_");et=zn.length>=2&&zn[1]=="type"?et+(Gr+"="+Vr+"&"):et+(Gr+"=redacted&")}}}else et=null;else et=Ne;return"XMLHTTP REQ ("+ee+") [attempt "+ke+"]: "+R+`
`+$+`
`+et})}function _o(m,R,$,ee,ke,Ne,et){m.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+ke+"]: "+R+`
`+$+`
`+Ne+" "+et})}function Pn(m,R,$,ee){m.info(function(){return"XMLHTTP TEXT ("+R+"): "+ki(m,$)+(ee?" "+ee:"")})}function jt(m,R){m.info(function(){return"TIMEOUT: "+R})}Di.prototype.info=function(){};function ki(m,R){if(!m.g)return R;if(!R)return null;try{const Ne=JSON.parse(R);if(Ne){for(m=0;m<Ne.length;m++)if(Array.isArray(Ne[m])){var $=Ne[m];if(!($.length<2)){var ee=$[1];if(Array.isArray(ee)&&!(ee.length<1)){var ke=ee[0];if(ke!="noop"&&ke!="stop"&&ke!="close")for(let et=1;et<ee.length;et++)ee[et]=""}}}}return Ft(Ne)}catch{return R}}var ci={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Nn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ji;function Tr(){}w(Tr,ft),Tr.prototype.g=function(){return new XMLHttpRequest},ji=new Tr;function Fr(m){return encodeURIComponent(String(m))}function an(m){var R=1;m=m.split(":");const $=[];for(;R>0&&m.length;)$.push(m.shift()),R--;return m.length&&$.push(m.join(":")),$}function qn(m,R,$,ee){this.j=m,this.i=R,this.l=$,this.S=ee||1,this.V=new Nt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $o}function $o(){this.i=null,this.g="",this.h=!1}var Wi={},$i={};function mn(m,R,$){m.M=1,m.A=Bn(vr(R)),m.u=$,m.R=!0,Ei(m,null)}function Ei(m,R){m.F=Date.now(),uo(m),m.B=vr(m.A);var $=m.B,ee=m.S;Array.isArray(ee)||(ee=[String(ee)]),Wa($.i,"t",ee),m.C=0,$=m.j.L,m.h=new $o,m.g=st(m.j,$?R:null,!m.u),m.P>0&&(m.O=new hr(d(m.Y,m,m.g),m.P)),R=m.V,$=m.g,ee=m.ba;var ke="readystatechange";Array.isArray(ke)||(ke&&(Wt[0]=ke.toString()),ke=Wt);for(let Ne=0;Ne<ke.length;Ne++){const et=xe($,ke[Ne],ee||R.handleEvent,!1,R.h||R);if(!et)break;R.g[et.key]=et}R=m.J?Z(m.J):{},m.u?(m.v||(m.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,R)):(m.v="GET",m.g.ea(m.B,m.v,null,R)),kr(),Rn(m.i,m.v,m.B,m.l,m.S,m.u)}qn.prototype.ba=function(m){m=m.target;const R=this.O;R&&Hi(m)==3?R.j():this.Y(m)},qn.prototype.Y=function(m){try{if(m==this.g)e:{const Ot=Hi(this.g),Vr=this.g.ya(),lr=this.g.ca();if(!(Ot<3)&&(Ot!=3||this.g&&(this.h.h||this.g.la()||fa(this.g)))){this.K||Ot!=4||Vr==7||(Vr==8||lr<=0?kr(3):kr(2)),Uo(this);var R=this.g.ca();this.X=R;var $=Ii(this);if(this.o=R==200,_o(this.i,this.v,this.B,this.l,this.S,Ot,R),this.o){if(this.U&&!this.L){t:{if(this.g){var ee,ke=this.g;if((ee=ke.g?ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(ee)){var Ne=ee;break t}}Ne=null}if(m=Ne)Pn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,jr(this,m);else{this.o=!1,this.m=3,Mt(12),qo(this),To(this);break e}}if(this.R){m=!0;let Gr;for(;!this.K&&this.C<$.length;)if(Gr=co(this,$),Gr==$i){Ot==4&&(this.m=4,Mt(14),m=!1),Pn(this.i,this.l,null,"[Incomplete Response]");break}else if(Gr==Wi){this.m=4,Mt(15),Pn(this.i,this.l,$,"[Invalid Chunk]"),m=!1;break}else Pn(this.i,this.l,Gr,null),jr(this,Gr);if(ds(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||$.length!=0||this.h.h||(this.m=1,Mt(16),m=!1),this.o=this.o&&m,!m)Pn(this.i,this.l,$,"[Invalid Chunked Response]"),qo(this),To(this);else if($.length>0&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.aa&&!et.P&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),xs(et),et.P=!0,Mt(11))}}else Pn(this.i,this.l,$,null),jr(this,$);Ot==4&&qo(this),this.o&&!this.K&&(Ot==4?ce(this.j,this):(this.o=!1,uo(this)))}else Jo(this.g),R==400&&$.indexOf("Unknown SID")>0?(this.m=3,Mt(12)):(this.m=0,Mt(13)),qo(this),To(this)}}}catch{}finally{}};function Ii(m){if(!ds(m))return m.g.la();const R=fa(m.g);if(R==="")return"";let $="";const ee=R.length,ke=Hi(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return qo(m),To(m),"";m.h.i=new c.TextDecoder}for(let Ne=0;Ne<ee;Ne++)m.h.h=!0,$+=m.h.i.decode(R[Ne],{stream:!(ke&&Ne==ee-1)});return R.length=0,m.h.g+=$,m.C=0,m.h.g}function ds(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function co(m,R){var $=m.C,ee=R.indexOf(`
`,$);return ee==-1?$i:($=Number(R.substring($,ee)),isNaN($)?Wi:(ee+=1,ee+$>R.length?$i:(R=R.slice(ee,ee+$),m.C=ee+$,R)))}qn.prototype.cancel=function(){this.K=!0,qo(this)};function uo(m){m.T=Date.now()+m.H,hs(m,m.H)}function hs(m,R){if(m.D!=null)throw Error("WatchDog timer not null");m.D=or(d(m.aa,m),R)}function Uo(m){m.D&&(c.clearTimeout(m.D),m.D=null)}qn.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(jt(this.i,this.B),this.M!=2&&(kr(),Mt(17)),qo(this),this.m=2,To(this)):hs(this,this.T-m)};function To(m){m.j.I==0||m.K||ce(m.j,m)}function qo(m){Uo(m);var R=m.O;R&&typeof R.dispose=="function"&&R.dispose(),m.O=null,yr(m.V),m.g&&(R=m.g,m.g=null,R.abort(),R.dispose())}function jr(m,R){try{var $=m.j;if($.I!=0&&($.g==m||ca($.h,m))){if(!m.L&&ca($.h,m)&&$.I==3){try{var ee=$.Ba.g.parse(R)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var ke=ee;if(ke[0]==0){e:if(!$.v){if($.g)if($.g.F+3e3<m.F)H($),ni($);else break e;gi($),Mt(18)}}else $.xa=ke[1],0<$.xa-$.K&&ke[2]<37500&&$.F&&$.A==0&&!$.C&&($.C=or(d($.Va,$),6e3));Ho($.h)<=1&&$.ta&&($.ta=void 0)}else Ae($,11)}else if((m.L||$.g==m)&&H($),!N(R))for(ke=$.Ba.g.parse(R),R=0;R<ke.length;R++){let lr=ke[R];const Gr=lr[0];if(!(Gr<=$.K))if($.K=Gr,lr=lr[1],$.I==2)if(lr[0]=="c"){$.M=lr[1],$.ba=lr[2];const zn=lr[3];zn!=null&&($.ka=zn,$.j.info("VER="+$.ka));const Ni=lr[4];Ni!=null&&($.za=Ni,$.j.info("SVER="+$.za));const Jr=lr[5];Jr!=null&&typeof Jr=="number"&&Jr>0&&(ee=1.5*Jr,$.O=ee,$.j.info("backChannelRequestTimeoutMs_="+ee)),ee=$;const yi=m.g;if(yi){const Ro=yi.g?yi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ro){var Ne=ee.h;Ne.g||Ro.indexOf("spdy")==-1&&Ro.indexOf("quic")==-1&&Ro.indexOf("h2")==-1||(Ne.j=Ne.l,Ne.g=new Set,Ne.h&&(fs(Ne,Ne.h),Ne.h=null))}if(ee.G){const Vs=yi.g?yi.g.getResponseHeader("X-HTTP-Session-Id"):null;Vs&&(ee.wa=Vs,sr(ee.J,ee.G,Vs))}}$.I=3,$.l&&$.l.ra(),$.aa&&($.T=Date.now()-m.F,$.j.info("Handshake RTT: "+$.T+"ms")),ee=$;var et=m;if(ee.na=He(ee,ee.L?ee.ba:null,ee.W),et.L){ps(ee.h,et);var Ot=et,Vr=ee.O;Vr&&(Ot.H=Vr),Ot.D&&(Uo(Ot),uo(Ot)),ee.g=et}else Fn(ee);$.i.length>0&&Io($)}else lr[0]!="stop"&&lr[0]!="close"||Ae($,7);else $.I==3&&(lr[0]=="stop"||lr[0]=="close"?lr[0]=="stop"?Ae($,7):Yo($):lr[0]!="noop"&&$.l&&$.l.qa(lr),$.A=0)}}kr(4)}catch{}}var vl=class{constructor(m,R){this.g=m,this.map=R}};function Ns(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ui(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ho(m){return m.h?1:m.g?m.g.size:0}function ca(m,R){return m.h?m.h==R:m.g?m.g.has(R):!1}function fs(m,R){m.g?m.g.add(R):m.h=R}function ps(m,R){m.h&&m.h==R?m.h=null:m.g&&m.g.has(R)&&m.g.delete(R)}Ns.prototype.cancel=function(){if(this.i=di(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function di(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let R=m.i;for(const $ of m.g.values())R=R.concat($.G);return R}return v(m.i)}var Oa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hn(m,R){if(m){m=m.split("&");for(let $=0;$<m.length;$++){const ee=m[$].indexOf("=");let ke,Ne=null;ee>=0?(ke=m[$].substring(0,ee),Ne=m[$].substring(ee+1)):ke=m[$],R(ke,Ne?decodeURIComponent(Ne.replace(/\+/g," ")):"")}}}function Co(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;m instanceof Co?(this.l=m.l,ms(this,m.j),this.o=m.o,this.g=m.g,ho(this,m.u),this.h=m.h,hi(this,zs(m.i)),this.m=m.m):m&&(R=String(m).match(Oa))?(this.l=!1,ms(this,R[1]||"",!0),this.o=fo(R[2]||""),this.g=fo(R[3]||"",!0),ho(this,R[4]),this.h=fo(R[5]||"",!0),hi(this,R[6]||"",!0),this.m=fo(R[7]||"")):(this.l=!1,this.i=new nr(null,this.l))}Co.prototype.toString=function(){const m=[];var R=this.j;R&&m.push(zr(R,Va,!0),":");var $=this.g;return($||R=="file")&&(m.push("//"),(R=this.o)&&m.push(zr(R,Va,!0),"@"),m.push(Fr($).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$=this.u,$!=null&&m.push(":",String($))),($=this.h)&&(this.g&&$.charAt(0)!="/"&&m.push("/"),m.push(zr($,$.charAt(0)=="/"?Ls:Ma,!0))),($=this.i.toString())&&m.push("?",$),($=this.m)&&m.push("#",zr($,ua)),m.join("")},Co.prototype.resolve=function(m){const R=vr(this);let $=!!m.j;$?ms(R,m.j):$=!!m.o,$?R.o=m.o:$=!!m.g,$?R.g=m.g:$=m.u!=null;var ee=m.h;if($)ho(R,m.u);else if($=!!m.h){if(ee.charAt(0)!="/")if(this.g&&!this.h)ee="/"+ee;else{var ke=R.h.lastIndexOf("/");ke!=-1&&(ee=R.h.slice(0,ke+1)+ee)}if(ke=ee,ke==".."||ke==".")ee="";else if(ke.indexOf("./")!=-1||ke.indexOf("/.")!=-1){ee=ke.lastIndexOf("/",0)==0,ke=ke.split("/");const Ne=[];for(let et=0;et<ke.length;){const Ot=ke[et++];Ot=="."?ee&&et==ke.length&&Ne.push(""):Ot==".."?((Ne.length>1||Ne.length==1&&Ne[0]!="")&&Ne.pop(),ee&&et==ke.length&&Ne.push("")):(Ne.push(Ot),ee=!0)}ee=Ne.join("/")}else ee=ke}return $?R.h=ee:$=m.i.toString()!=="",$?hi(R,zs(m.i)):$=!!m.m,$&&(R.m=m.m),R};function vr(m){return new Co(m)}function ms(m,R,$){m.j=$?fo(R,!0):R,m.j&&(m.j=m.j.replace(/:$/,""))}function ho(m,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);m.u=R}else m.u=null}function hi(m,R,$){R instanceof nr?(m.i=R,po(m.i,m.l)):($||(R=zr(R,Ao)),m.i=new nr(R,m.l))}function sr(m,R,$){m.i.set(R,$)}function Bn(m){return sr(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function fo(m,R){return m?R?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function zr(m,R,$){return typeof m=="string"?(m=encodeURI(m).replace(R,Bs),$&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Bs(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Va=/[#\/\?@]/g,Ma=/[#\?:]/g,Ls=/[#\?]/g,Ao=/[#\?@]/g,ua=/#/g;function nr(m,R){this.h=this.g=null,this.i=m||null,this.j=!!R}function ri(m){m.g||(m.g=new Map,m.h=0,m.i&&Hn(m.i,function(R,$){m.add(decodeURIComponent(R.replace(/\+/g," ")),$)}))}r=nr.prototype,r.add=function(m,R){ri(this),this.i=null,m=fi(this,m);let $=this.g.get(m);return $||this.g.set(m,$=[]),$.push(R),this.h+=1,this};function Fs(m,R){ri(m),R=fi(m,R),m.g.has(R)&&(m.i=null,m.h-=m.g.get(R).length,m.g.delete(R))}function da(m,R){return ri(m),R=fi(m,R),m.g.has(R)}r.forEach=function(m,R){ri(this),this.g.forEach(function($,ee){$.forEach(function(ke){m.call(R,ke,ee,this)},this)},this)};function Da(m,R){ri(m);let $=[];if(typeof R=="string")da(m,R)&&($=$.concat(m.g.get(fi(m,R))));else for(m=Array.from(m.g.values()),R=0;R<m.length;R++)$=$.concat(m[R]);return $}r.set=function(m,R){return ri(this),this.i=null,m=fi(this,m),da(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[R]),this.h+=1,this},r.get=function(m,R){return m?(m=Da(this,m),m.length>0?String(m[0]):R):R};function Wa(m,R,$){Fs(m,R),$.length>0&&(m.i=null,m.g.set(fi(m,R),v($)),m.h+=$.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],R=Array.from(this.g.keys());for(let ee=0;ee<R.length;ee++){var $=R[ee];const ke=Fr($);$=Da(this,$);for(let Ne=0;Ne<$.length;Ne++){let et=ke;$[Ne]!==""&&(et+="="+Fr($[Ne])),m.push(et)}}return this.i=m.join("&")};function zs(m){const R=new nr;return R.i=m.i,m.g&&(R.g=new Map(m.g),R.h=m.h),R}function fi(m,R){return R=String(R),m.j&&(R=R.toLowerCase()),R}function po(m,R){R&&!m.j&&(ri(m),m.i=null,m.g.forEach(function($,ee){const ke=ee.toLowerCase();ee!=ke&&(Fs(this,ee),Wa(this,ke,$))},m)),m.j=R}function ko(m,R){const $=new Di;if(c.Image){const ee=new Image;ee.onload=y(gn,$,"TestLoadImage: loaded",!0,R,ee),ee.onerror=y(gn,$,"TestLoadImage: error",!1,R,ee),ee.onabort=y(gn,$,"TestLoadImage: abort",!1,R,ee),ee.ontimeout=y(gn,$,"TestLoadImage: timeout",!1,R,ee),c.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=m}else R(!1)}function pi(m,R){const $=new Di,ee=new AbortController,ke=setTimeout(()=>{ee.abort(),gn($,"TestPingServer: timeout",!1,R)},1e4);fetch(m,{signal:ee.signal}).then(Ne=>{clearTimeout(ke),Ne.ok?gn($,"TestPingServer: ok",!0,R):gn($,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(ke),gn($,"TestPingServer: error",!1,R)})}function gn(m,R,$,ee,ke){try{ke&&(ke.onload=null,ke.onerror=null,ke.onabort=null,ke.ontimeout=null),ee($)}catch{}}function It(){this.g=new kt}function Go(m){this.i=m.Sb||null,this.h=m.ab||!1}w(Go,ft),Go.prototype.g=function(){return new Ri(this.i,this.h)};function Ri(m,R){qe.call(this),this.H=m,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Ri,qe),r=Ri.prototype,r.open=function(m,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=R,this.readyState=1,Ln(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(R.body=m),(this.H||c).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gs(this)),this.readyState=0},r.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ln(this)),this.g&&(this.readyState=3,Ln(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;bl(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function bl(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}r.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var R=m.value?m.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!m.done}))&&(this.response=this.responseText+=R)}m.done?gs(this):Ln(this),this.readyState==3&&bl(this)}},r.Oa=function(m){this.g&&(this.response=this.responseText=m,gs(this))},r.Na=function(m){this.g&&(this.response=m,gs(this))},r.ga=function(){this.g&&gs(this)};function gs(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Ln(m)}r.setRequestHeader=function(m,R){this.A.append(m,R)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],R=this.h.entries();for(var $=R.next();!$.done;)$=$.value,m.push($[0]+": "+$[1]),$=R.next();return m.join(`\r
`)};function Ln(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ri.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function jo(m){let R="";return ve(m,function($,ee){R+=ee,R+=":",R+=$,R+=`\r
`}),R}function ha(m,R,$){e:{for(ee in $){var ee=!1;break e}ee=!0}ee||($=jo($),typeof m=="string"?$!=null&&Fr($):sr(m,R,$))}function Er(m){qe.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Er,qe);var Os=/^https?$/i,$a=["POST","PUT"];r=Er.prototype,r.Fa=function(m){this.H=m},r.ea=function(m,R,$,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);R=R?R.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ji.g(),this.g.onreadystatechange=C(d(this.Ca,this));try{this.B=!0,this.g.open(R,String(m),!0),this.B=!1}catch(Ne){Ui(this,Ne);return}if(m=$||"",$=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var ke in ee)$.set(ke,ee[ke]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const Ne of ee.keys())$.set(Ne,ee.get(Ne));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from($.keys()).find(Ne=>Ne.toLowerCase()=="content-type"),ke=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call($a,R,void 0)>=0)||ee||ke||$.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ne,et]of $)this.g.setRequestHeader(Ne,et);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Ne){Ui(this,Ne)}};function Ui(m,R){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=R,m.o=5,mo(m),Ko(m)}function mo(m){m.A||(m.A=!0,nt(m,"complete"),nt(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,nt(this,"complete"),nt(this,"abort"),Ko(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ko(this,!0)),Er.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?qi(this):this.Xa())},r.Xa=function(){qi(this)};function qi(m){if(m.h&&typeof a<"u"){if(m.v&&Hi(m)==4)setTimeout(m.Ca.bind(m),0);else if(nt(m,"readystatechange"),Hi(m)==4){m.h=!1;try{const Ne=m.ca();e:switch(Ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var $;if(!($=R)){var ee;if(ee=Ne===0){let et=String(m.D).match(Oa)[1]||null;!et&&c.self&&c.self.location&&(et=c.self.location.protocol.slice(0,-1)),ee=!Os.test(et?et.toLowerCase():"")}$=ee}if($)nt(m,"complete"),nt(m,"success");else{m.o=6;try{var ke=Hi(m)>2?m.g.statusText:""}catch{ke=""}m.l=ke+" ["+m.ca()+"]",mo(m)}}finally{Ko(m)}}}}function Ko(m,R){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const $=m.g;m.g=null,R||nt(m,"ready");try{$.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Hi(m){return m.g?m.g.readyState:0}r.ca=function(){try{return Hi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(m){if(this.g){var R=this.g.responseText;return m&&R.indexOf(m)==0&&(R=R.substring(m.length)),St(R)}};function fa(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Jo(m){const R={};m=(m.g&&Hi(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<m.length;ee++){if(N(m[ee]))continue;var $=an(m[ee]);const ke=$[0];if($=$[1],typeof $!="string")continue;$=$.trim();const Ne=R[ke]||[];R[ke]=Ne,Ne.push($)}be(R,function(ee){return ee.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function mi(m,R,$){return $&&$.internalChannelParams&&$.internalChannelParams[m]||R}function ys(m){this.za=0,this.i=[],this.j=new Di,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=mi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=mi("baseRetryDelayMs",5e3,m),this.Za=mi("retryDelaySeedMs",1e4,m),this.Ta=mi("forwardChannelMaxRetries",2,m),this.va=mi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Ns(m&&m.concurrentRequestLimit),this.Ba=new It,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ys.prototype,r.ka=8,r.I=1,r.connect=function(m,R,$,ee){Mt(0),this.W=m,this.H=R||{},$&&ee!==void 0&&(this.H.OSID=$,this.H.OAID=ee),this.F=this.X,this.J=He(this,null,this.W),Io(this)};function Yo(m){if(Eo(m),m.I==3){var R=m.V++,$=vr(m.J);if(sr($,"SID",m.M),sr($,"RID",R),sr($,"TYPE","terminate"),Gn(m,$),R=new qn(m,m.j,R),R.M=2,R.A=Bn(vr($)),$=!1,c.navigator&&c.navigator.sendBeacon)try{$=c.navigator.sendBeacon(R.A.toString(),"")}catch{}!$&&c.Image&&(new Image().src=R.A,$=!0),$||(R.g=st(R.j,null),R.g.ea(R.A)),R.F=Date.now(),uo(R)}Me(m)}function ni(m){m.g&&(xs(m),m.g.cancel(),m.g=null)}function Eo(m){ni(m),m.v&&(c.clearTimeout(m.v),m.v=null),H(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function Io(m){if(!ui(m.h)&&!m.m){m.m=!0;var R=m.Ea;se||j(),ue||(se(),ue=!0),L.add(R,m),m.D=0}}function Ua(m,R){return Ho(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=R.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=or(d(m.Ea,m,R),ye(m,m.D)),m.D++,!0)}r.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const ke=new qn(this,this.j,m);let Ne=this.o;if(this.U&&(Ne?(Ne=Z(Ne),J(Ne,this.U)):Ne=this.U),this.u!==null||this.R||(ke.J=Ne,Ne=null),this.S)e:{for(var R=0,$=0;$<this.i.length;$++){t:{var ee=this.i[$];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(R+=ee,R>4096){R=$;break e}if(R===4096||$===this.i.length-1){R=$+1;break e}}R=1e3}else R=1e3;R=pa(this,ke,R),$=vr(this.J),sr($,"RID",m),sr($,"CVER",22),this.G&&sr($,"X-HTTP-Session-Id",this.G),Gn(this,$),Ne&&(this.R?R="headers="+Fr(jo(Ne))+"&"+R:this.u&&ha($,this.u,Ne)),fs(this.h,ke),this.Ra&&sr($,"TYPE","init"),this.S?(sr($,"$req",R),sr($,"SID","null"),ke.U=!0,mn(ke,$,null)):mn(ke,$,R),this.I=2}}else this.I==3&&(m?Pi(this,m):this.i.length==0||ui(this.h)||Pi(this))};function Pi(m,R){var $;R?$=R.l:$=m.V++;const ee=vr(m.J);sr(ee,"SID",m.M),sr(ee,"RID",$),sr(ee,"AID",m.K),Gn(m,ee),m.u&&m.o&&ha(ee,m.u,m.o),$=new qn(m,m.j,$,m.D+1),m.u===null&&($.J=m.o),R&&(m.i=R.G.concat(m.i)),R=pa(m,$,1e3),$.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),fs(m.h,$),mn($,ee,R)}function Gn(m,R){m.H&&ve(m.H,function($,ee){sr(R,ee,$)}),m.l&&ve({},function($,ee){sr(R,ee,$)})}function pa(m,R,$){$=Math.min(m.i.length,$);const ee=m.l?d(m.l.Ka,m.l,m):null;e:{var ke=m.i;let Ot=-1;for(;;){const Vr=["count="+$];Ot==-1?$>0?(Ot=ke[0].g,Vr.push("ofs="+Ot)):Ot=0:Vr.push("ofs="+Ot);let lr=!0;for(let Gr=0;Gr<$;Gr++){var Ne=ke[Gr].g;const zn=ke[Gr].map;if(Ne-=Ot,Ne<0)Ot=Math.max(0,ke[Gr].g-100),lr=!1;else try{Ne="req"+Ne+"_"||"";try{var et=zn instanceof Map?zn:Object.entries(zn);for(const[Ni,Jr]of et){let yi=Jr;u(Jr)&&(yi=Ft(Jr)),Vr.push(Ne+Ni+"="+encodeURIComponent(yi))}}catch(Ni){throw Vr.push(Ne+"type="+encodeURIComponent("_badmap")),Ni}}catch{ee&&ee(zn)}}if(lr){et=Vr.join("&");break e}}et=void 0}return m=m.i.splice(0,$),R.G=m,et}function Fn(m){if(!m.g&&!m.v){m.Y=1;var R=m.Da;se||j(),ue||(se(),ue=!0),L.add(R,m),m.A=0}}function gi(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=or(d(m.Da,m),ye(m,m.A)),m.A++,!0)}r.Da=function(){if(this.v=null,S(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=or(d(this.Wa,this),m)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Mt(10),ni(this),S(this))};function xs(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function S(m){m.g=new qn(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var R=vr(m.na);sr(R,"RID","rpc"),sr(R,"SID",m.M),sr(R,"AID",m.K),sr(R,"CI",m.F?"0":"1"),!m.F&&m.ia&&sr(R,"TO",m.ia),sr(R,"TYPE","xmlhttp"),Gn(m,R),m.u&&m.o&&ha(R,m.u,m.o),m.O&&(m.g.H=m.O);var $=m.g;m=m.ba,$.M=1,$.A=Bn(vr(R)),$.u=null,$.R=!0,Ei($,m)}r.Va=function(){this.C!=null&&(this.C=null,ni(this),gi(this),Mt(19))};function H(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function ce(m,R){var $=null;if(m.g==R){H(m),xs(m),m.g=null;var ee=2}else if(ca(m.h,R))$=R.G,ps(m.h,R),ee=1;else return;if(m.I!=0){if(R.o)if(ee==1){$=R.u?R.u.length:0,R=Date.now()-R.F;var ke=m.D;ee=Xt(),nt(ee,new zt(ee,$)),Io(m)}else Fn(m);else if(ke=R.m,ke==3||ke==0&&R.X>0||!(ee==1&&Ua(m,R)||ee==2&&gi(m)))switch($&&$.length>0&&(R=m.h,R.i=R.i.concat($)),ke){case 1:Ae(m,5);break;case 4:Ae(m,10);break;case 3:Ae(m,6);break;default:Ae(m,2)}}}function ye(m,R){let $=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||($*=2),$*R}function Ae(m,R){if(m.j.info("Error code "+R),R==2){var $=d(m.bb,m),ee=m.Ua;const ke=!ee;ee=new Co(ee||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ms(ee,"https"),Bn(ee),ke?ko(ee.toString(),$):pi(ee.toString(),$)}else Mt(2);m.I=0,m.l&&m.l.pa(R),Me(m),Eo(m)}r.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function Me(m){if(m.I=0,m.ja=[],m.l){const R=di(m.h);(R.length!=0||m.i.length!=0)&&(B(m.ja,R),B(m.ja,m.i),m.h.i.length=0,v(m.i),m.i.length=0),m.l.oa()}}function He(m,R,$){var ee=$ instanceof Co?vr($):new Co($);if(ee.g!="")R&&(ee.g=R+"."+ee.g),ho(ee,ee.u);else{var ke=c.location;ee=ke.protocol,R=R?R+"."+ke.hostname:ke.hostname,ke=+ke.port;const Ne=new Co(null);ee&&ms(Ne,ee),R&&(Ne.g=R),ke&&ho(Ne,ke),$&&(Ne.h=$),ee=Ne}return $=m.G,R=m.wa,$&&R&&sr(ee,$,R),sr(ee,"VER",m.ka),Gn(m,ee),ee}function st(m,R,$){if(R&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=m.Aa&&!m.ma?new Er(new Go({ab:$})):new Er(m.ma),R.Fa(m.L),R}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function pt(){}r=pt.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Rt(){}Rt.prototype.g=function(m,R){return new yt(m,R)};function yt(m,R){qe.call(this),this.g=new ys(R),this.l=m,this.h=R&&R.messageUrlParams||null,m=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(m?m["X-WebChannel-Content-Type"]=R.messageContentType:m={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(m?m["X-WebChannel-Client-Profile"]=R.sa:m={"X-WebChannel-Client-Profile":R.sa}),this.g.U=m,(m=R&&R.Qb)&&!N(m)&&(this.g.u=m),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!N(R)&&(this.g.G=R,m=this.h,m!==null&&R in m&&(m=this.h,R in m&&delete m[R])),this.j=new Or(this)}w(yt,qe),yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yt.prototype.close=function(){Yo(this.g)},yt.prototype.o=function(m){var R=this.g;if(typeof m=="string"){var $={};$.__data__=m,m=$}else this.v&&($={},$.__data__=Ft(m),m=$);R.i.push(new vl(R.Ya++,m)),R.I==3&&Io(R)},yt.prototype.N=function(){this.g.l=null,delete this.j,Yo(this.g),delete this.g,yt.Z.N.call(this)};function fr(m){dt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var R=m.__sm__;if(R){e:{for(const $ in R){m=$;break e}m=void 0}(this.i=m)&&(m=this.i,R=R!==null&&m in R?R[m]:void 0),this.data=R}else this.data=m}w(fr,dt);function Hr(){$t.call(this),this.status=1}w(Hr,$t);function Or(m){this.g=m}w(Or,pt),Or.prototype.ra=function(){nt(this.g,"a")},Or.prototype.qa=function(m){nt(this.g,new fr(m))},Or.prototype.pa=function(m){nt(this.g,new Hr)},Or.prototype.oa=function(){nt(this.g,"b")},Rt.prototype.createWebChannel=Rt.prototype.g,yt.prototype.send=yt.prototype.o,yt.prototype.open=yt.prototype.m,yt.prototype.close=yt.prototype.close,Fb=function(){return new Rt},Lb=function(){return Xt()},Bb=ir,Dm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ci.NO_ERROR=0,ci.TIMEOUT=8,ci.HTTP_ERROR=6,Uf=ci,Nn.COMPLETE="complete",Nb=Nn,Ar.EventType=rr,rr.OPEN="a",rr.CLOSE="b",rr.ERROR="c",rr.MESSAGE="d",qe.prototype.listen=qe.prototype.J,Hd=Ar,Er.prototype.listenOnce=Er.prototype.K,Er.prototype.getLastError=Er.prototype.Ha,Er.prototype.getLastErrorCode=Er.prototype.ya,Er.prototype.getStatus=Er.prototype.ca,Er.prototype.getResponseJson=Er.prototype.La,Er.prototype.getResponseText=Er.prototype.la,Er.prototype.send=Er.prototype.ea,Er.prototype.setWithCredentials=Er.prototype.Fa,Pb=Er}).apply(typeof kf<"u"?kf:typeof self<"u"?self:typeof window<"u"?window:{});const fy="@firebase/firestore",py="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}so.UNAUTHENTICATED=new so(null),so.GOOGLE_CREDENTIALS=new so("google-credentials-uid"),so.FIRST_PARTY=new so("first-party-uid"),so.MOCK_USER=new so("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ud="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new mg("@firebase/firestore");function Lu(){return Yc.logLevel}function ct(r,...e){if(Yc.logLevel<=pr.DEBUG){const t=e.map(Ag);Yc.debug(`Firestore (${ud}): ${r}`,...t)}}function ml(r,...e){if(Yc.logLevel<=pr.ERROR){const t=e.map(Ag);Yc.error(`Firestore (${ud}): ${r}`,...t)}}function Xu(r,...e){if(Yc.logLevel<=pr.WARN){const t=e.map(Ag);Yc.warn(`Firestore (${ud}): ${r}`,...t)}}function Ag(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,zb(r,n,t)}function zb(r,e,t){let n=`FIRESTORE (${ud}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw ml(n),new Error(n)}function Br(r,e,t,n){let o="Unexpected state";typeof t=="string"?o=t:n=t,r||zb(e,o,n)}function tr(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class it extends yl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(so.UNAUTHENTICATED)))}shutdown(){}}class h8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class f8{constructor(e){this.t=e,this.currentUser=so.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Br(this.o===void 0,42304);let n=this.i;const o=f=>this.i!==n?(n=this.i,t(f)):Promise.resolve();let a=new nc;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new nc,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await o(this.currentUser)}))},u=f=>{ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new nc)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Br(typeof n.accessToken=="string",31837,{l:n}),new Ob(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Br(e===null||typeof e=="string",2055,{h:e}),new so(e)}}class p8{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=so.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class m8{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new p8(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(so.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class my{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class g8{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Is(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Br(this.o===void 0,3512);const n=a=>{a.error!=null&&ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,ct("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const o=a=>{ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new my(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Br(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new my(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y8(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const o=y8(40);for(let a=0;a<o.length;++a)n.length<20&&o[a]<t&&(n+=e.charAt(o[a]%62))}return n}}function mr(r,e){return r<e?-1:r>e?1:0}function Wm(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const o=r.charAt(n),a=e.charAt(n);if(o!==a)return hm(o)===hm(a)?mr(o,a):hm(o)?1:-1}return mr(r.length,e.length)}const x8=55296,v8=57343;function hm(r){const e=r.charCodeAt(0);return e>=x8&&e<=v8}function Zu(r,e,t){return r.length===e.length&&r.every(((n,o)=>t(n,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="__name__";class ja{constructor(e,t,n){t===void 0?t=0:t>e.length&&Ht(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&Ht(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return ja.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ja?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let o=0;o<n;o++){const a=ja.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return mr(e.length,t.length)}static compareSegments(e,t){const n=ja.isNumericId(e),o=ja.isNumericId(t);return n&&!o?-1:!n&&o?1:n&&o?ja.extractNumericId(e).compare(ja.extractNumericId(t)):Wm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rc.fromString(e.substring(4,e.length-2))}}class tn extends ja{construct(e,t,n){return new tn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new it(Ue.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((o=>o.length>0)))}return new tn(t)}static emptyPath(){return new tn([])}}const b8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vi extends ja{construct(e,t,n){return new Vi(e,t,n)}static isValidIdentifier(e){return b8.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gy}static keyField(){return new Vi([gy])}static fromServerFormat(e){const t=[];let n="",o=0;const a=()=>{if(n.length===0)throw new it(Ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let c=!1;for(;o<e.length;){const u=e[o];if(u==="\\"){if(o+1===e.length)throw new it(Ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new it(Ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=f,o+=2}else u==="`"?(c=!c,o++):u!=="."||c?(n+=u,o++):(a(),o++)}if(a(),c)throw new it(Ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vi(t)}static emptyPath(){return new Vi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.path=e}static fromPath(e){return new Et(tn.fromString(e))}static fromName(e){return new Et(tn.fromString(e).popFirst(5))}static empty(){return new Et(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Et(new tn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(r,e,t){if(!t)throw new it(Ue.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function w8(r,e,t,n){if(e===!0&&n===!0)throw new it(Ue.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function yy(r){if(!Et.isDocumentKey(r))throw new it(Ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function xy(r){if(Et.isDocumentKey(r))throw new it(Ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Mb(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Ep(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ht(12329,{type:typeof r})}function Qc(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new it(Ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ep(r);throw new it(Ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(r,e){const t={typeString:r};return e&&(t.value=e),t}function Ah(r,e){if(!Mb(r))throw new it(Ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const o=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const c=r[n];if(o&&typeof c!==o){t=`JSON field '${n}' must be a ${o}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${n}' field to equal '${a.value}'`;break}}if(t)throw new it(Ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=-62135596800,by=1e6;class nn{static now(){return nn.fromMillis(Date.now())}static fromDate(e){return nn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*by);return new nn(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new it(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new it(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<vy)throw new it(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new it(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/by}_compareTo(e){return this.seconds===e.seconds?mr(this.nanoseconds,e.nanoseconds):mr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ah(e,nn._jsonSchema))return new nn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-vy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nn._jsonSchemaVersion="firestore/timestamp/1.0",nn._jsonSchema={type:ei("string",nn._jsonSchemaVersion),seconds:ei("number"),nanoseconds:ei("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{static fromTimestamp(e){return new Qt(e)}static min(){return new Qt(new nn(0,0))}static max(){return new Qt(new nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=-1;function S8(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,o=Qt.fromTimestamp(n===1e9?new nn(t+1,0):new nn(t,n));return new ac(o,Et.empty(),e)}function _8(r){return new ac(r.readTime,r.key,uh)}class ac{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ac(Qt.min(),Et.empty(),uh)}static max(){return new ac(Qt.max(),Et.empty(),uh)}}function T8(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Et.comparator(r.documentKey,e.documentKey),t!==0?t:mr(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dd(r){if(r.code!==Ue.FAILED_PRECONDITION||r.message!==C8)throw r;ct("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ht(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ge(((n,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ge?t:Ge.resolve(t)}catch(t){return Ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ge.reject(t)}static resolve(e){return new Ge(((t,n)=>{t(e)}))}static reject(e){return new Ge(((t,n)=>{n(e)}))}static waitFor(e){return new Ge(((t,n)=>{let o=0,a=0,c=!1;e.forEach((u=>{++o,u.next((()=>{++a,c&&a===o&&t()}),(f=>n(f)))})),c=!0,a===o&&t()}))}static or(e){let t=Ge.resolve(!1);for(const n of e)t=t.next((o=>o?Ge.resolve(o):n()));return t}static forEach(e,t){const n=[];return e.forEach(((o,a)=>{n.push(t.call(this,o,a))})),this.waitFor(n)}static mapArray(e,t){return new Ge(((n,o)=>{const a=e.length,c=new Array(a);let u=0;for(let f=0;f<a;f++){const d=f;t(e[d]).next((y=>{c[d]=y,++u,u===a&&n(c)}),(y=>o(y)))}}))}static doWhile(e,t){return new Ge(((n,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):n()};a()}))}}function k8(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hd(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ip.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=-1;function Rp(r){return r==null}function dp(r){return r===0&&1/r==-1/0}function j8(r){return typeof r=="number"&&Number.isInteger(r)&&!dp(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="";function E8(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=wy(e)),e=I8(r.get(t),e);return wy(e)}function I8(r,e){let t=e;const n=r.length;for(let o=0;o<n;o++){const a=r.charAt(o);switch(a){case"\0":t+="";break;case Db:t+="";break;default:t+=a}}return t}function wy(r){return r+Db+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function mc(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Wb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,t){this.comparator=e,this.root=t||Oi.EMPTY}insert(e,t){return new Tn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Oi.BLACK,null,null))}remove(e){return new Tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Oi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return t+n.left.size;o<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jf(this.root,e,this.comparator,!1)}getReverseIterator(){return new jf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jf(this.root,e,this.comparator,!0)}}class jf{constructor(e,t,n,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Oi{constructor(e,t,n,o,a){this.key=e,this.value=t,this.color=n??Oi.RED,this.left=o??Oi.EMPTY,this.right=a??Oi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,o,a){return new Oi(e??this.key,t??this.value,n??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let o=this;const a=n(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,n),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,n)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Oi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Oi.EMPTY;n=o.right.min(),o=o.copy(n.key,n.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ht(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ht(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ht(27949);return e+(this.isRed()?0:1)}}Oi.EMPTY=null,Oi.RED=!0,Oi.BLACK=!1;Oi.EMPTY=new class{constructor(){this.size=0}get key(){throw Ht(57766)}get value(){throw Ht(16141)}get color(){throw Ht(16727)}get left(){throw Ht(29726)}get right(){throw Ht(36894)}copy(e,t,n,o,a){return this}insert(e,t,n){return new Oi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this.comparator=e,this.data=new Tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const o=n.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _y(this.data.getIterator())}getIteratorFrom(e){return new _y(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof li)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=n.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new li(this.comparator);return t.data=e,t}}class _y{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.fields=e,e.sort(Vi.comparator)}static empty(){return new ls([])}unionWith(e){let t=new li(Vi.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ls(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zu(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new $b("Invalid base64 string: "+a):a}})(e);return new Mi(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a})(e);return new Mi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mi.EMPTY_BYTE_STRING=new Mi("");const R8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lc(r){if(Br(!!r,39018),typeof r=="string"){let e=0;const t=R8.exec(r);if(Br(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Dn(r.seconds),nanos:Dn(r.nanos)}}function Dn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function cc(r){return typeof r=="string"?Mi.fromBase64String(r):Mi.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="server_timestamp",qb="__type__",Hb="__previous_value__",Gb="__local_write_time__";function Eg(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[qb])==null?void 0:n.stringValue)===Ub}function Pp(r){const e=r.mapValue.fields[Hb];return Eg(e)?Pp(e):e}function dh(r){const e=lc(r.mapValue.fields[Gb].timestampValue);return new nn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e,t,n,o,a,c,u,f,d,y){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=y}}const hp="(default)";class hh{constructor(e,t){this.projectId=e,this.database=t||hp}static empty(){return new hh("","")}get isDefaultDatabase(){return this.database===hp}isEqual(e){return e instanceof hh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="__type__",N8="__max__",Ef={mapValue:{}},Jb="__vector__",fp="value";function uc(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Eg(r)?4:L8(r)?9007199254740991:B8(r)?10:11:Ht(28295,{value:r})}function Fa(r,e){if(r===e)return!0;const t=uc(r);if(t!==uc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return dh(r).isEqual(dh(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=lc(o.timestampValue),u=lc(a.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,a){return cc(o.bytesValue).isEqual(cc(a.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,a){return Dn(o.geoPointValue.latitude)===Dn(a.geoPointValue.latitude)&&Dn(o.geoPointValue.longitude)===Dn(a.geoPointValue.longitude)})(r,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return Dn(o.integerValue)===Dn(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=Dn(o.doubleValue),u=Dn(a.doubleValue);return c===u?dp(c)===dp(u):isNaN(c)&&isNaN(u)}return!1})(r,e);case 9:return Zu(r.arrayValue.values||[],e.arrayValue.values||[],Fa);case 10:case 11:return(function(o,a){const c=o.mapValue.fields||{},u=a.mapValue.fields||{};if(Sy(c)!==Sy(u))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(u[f]===void 0||!Fa(c[f],u[f])))return!1;return!0})(r,e);default:return Ht(52216,{left:r})}}function fh(r,e){return(r.values||[]).find((t=>Fa(t,e)))!==void 0}function ed(r,e){if(r===e)return 0;const t=uc(r),n=uc(e);if(t!==n)return mr(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return mr(r.booleanValue,e.booleanValue);case 2:return(function(a,c){const u=Dn(a.integerValue||a.doubleValue),f=Dn(c.integerValue||c.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1})(r,e);case 3:return Ty(r.timestampValue,e.timestampValue);case 4:return Ty(dh(r),dh(e));case 5:return Wm(r.stringValue,e.stringValue);case 6:return(function(a,c){const u=cc(a),f=cc(c);return u.compareTo(f)})(r.bytesValue,e.bytesValue);case 7:return(function(a,c){const u=a.split("/"),f=c.split("/");for(let d=0;d<u.length&&d<f.length;d++){const y=mr(u[d],f[d]);if(y!==0)return y}return mr(u.length,f.length)})(r.referenceValue,e.referenceValue);case 8:return(function(a,c){const u=mr(Dn(a.latitude),Dn(c.latitude));return u!==0?u:mr(Dn(a.longitude),Dn(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Cy(r.arrayValue,e.arrayValue);case 10:return(function(a,c){var C,v,B,I;const u=a.fields||{},f=c.fields||{},d=(C=u[fp])==null?void 0:C.arrayValue,y=(v=f[fp])==null?void 0:v.arrayValue,w=mr(((B=d==null?void 0:d.values)==null?void 0:B.length)||0,((I=y==null?void 0:y.values)==null?void 0:I.length)||0);return w!==0?w:Cy(d,y)})(r.mapValue,e.mapValue);case 11:return(function(a,c){if(a===Ef.mapValue&&c===Ef.mapValue)return 0;if(a===Ef.mapValue)return 1;if(c===Ef.mapValue)return-1;const u=a.fields||{},f=Object.keys(u),d=c.fields||{},y=Object.keys(d);f.sort(),y.sort();for(let w=0;w<f.length&&w<y.length;++w){const C=Wm(f[w],y[w]);if(C!==0)return C;const v=ed(u[f[w]],d[y[w]]);if(v!==0)return v}return mr(f.length,y.length)})(r.mapValue,e.mapValue);default:throw Ht(23264,{he:t})}}function Ty(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return mr(r,e);const t=lc(r),n=lc(e),o=mr(t.seconds,n.seconds);return o!==0?o:mr(t.nanos,n.nanos)}function Cy(r,e){const t=r.values||[],n=e.values||[];for(let o=0;o<t.length&&o<n.length;++o){const a=ed(t[o],n[o]);if(a)return a}return mr(t.length,n.length)}function td(r){return $m(r)}function $m(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=lc(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return cc(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Et.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",o=!0;for(const a of t.values||[])o?o=!1:n+=",",n+=$m(a);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const c of n)a?a=!1:o+=",",o+=`${c}:${$m(t.fields[c])}`;return o+"}"})(r.mapValue):Ht(61005,{value:r})}function qf(r){switch(uc(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pp(r);return e?16+qf(e):16;case 5:return 2*r.stringValue.length;case 6:return cc(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((o,a)=>o+qf(a)),0)})(r.arrayValue);case 10:case 11:return(function(n){let o=0;return mc(n.fields,((a,c)=>{o+=a.length+qf(c)})),o})(r.mapValue);default:throw Ht(13486,{value:r})}}function Ay(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Um(r){return!!r&&"integerValue"in r}function Ig(r){return!!r&&"arrayValue"in r}function ky(r){return!!r&&"nullValue"in r}function jy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Hf(r){return!!r&&"mapValue"in r}function B8(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Kb])==null?void 0:n.stringValue)===Jb}function Zd(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return mc(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Zd(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zd(r.arrayValue.values[t]);return e}return{...r}}function L8(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===N8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.value=e}static empty(){return new Do({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Hf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zd(t)}setAll(e){let t=Vi.emptyPath(),n={},o=[];e.forEach(((c,u)=>{if(!t.isImmediateParentOf(u)){const f=this.getFieldsMap(t);this.applyChanges(f,n,o),n={},o=[],t=u.popLast()}c?n[u.lastSegment()]=Zd(c):o.push(u.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,n,o)}delete(e){const t=this.field(e.popLast());Hf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let o=t.mapValue.fields[e.get(n)];Hf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,n){mc(t,((o,a)=>e[o]=a));for(const o of n)delete e[o]}clone(){return new Do(Zd(this.value))}}function Yb(r){const e=[];return mc(r.fields,((t,n)=>{const o=new Vi([t]);if(Hf(n)){const a=Yb(n.mapValue).fields;if(a.length===0)e.push(o);else for(const c of a)e.push(o.child(c))}else e.push(o)})),new ls(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,t,n,o,a,c,u){this.key=e,this.documentType=t,this.version=n,this.readTime=o,this.createTime=a,this.data=c,this.documentState=u}static newInvalidDocument(e){return new ao(e,0,Qt.min(),Qt.min(),Qt.min(),Do.empty(),0)}static newFoundDocument(e,t,n,o){return new ao(e,1,t,Qt.min(),n,o,0)}static newNoDocument(e,t){return new ao(e,2,t,Qt.min(),Qt.min(),Do.empty(),0)}static newUnknownDocument(e,t){return new ao(e,3,t,Qt.min(),Qt.min(),Do.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Qt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Do.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Do.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ao&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ao(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,t){this.position=e,this.inclusive=t}}function Ey(r,e,t){let n=0;for(let o=0;o<r.position.length;o++){const a=e[o],c=r.position[o];if(a.field.isKeyField()?n=Et.comparator(Et.fromName(c.referenceValue),t.key):n=ed(c,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function Iy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Fa(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t="asc"){this.field=e,this.dir=t}}function F8(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{}class Zn extends Qb{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new O8(e,t,n):t==="array-contains"?new D8(e,n):t==="in"?new W8(e,n):t==="not-in"?new $8(e,n):t==="array-contains-any"?new U8(e,n):new Zn(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new V8(e,n):new M8(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ed(t,this.value)):t!==null&&uc(this.value)===uc(t)&&this.matchesComparison(ed(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ht(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sa extends Qb{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new sa(e,t)}matches(e){return Xb(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Xb(r){return r.op==="and"}function Zb(r){return z8(r)&&Xb(r)}function z8(r){for(const e of r.filters)if(e instanceof sa)return!1;return!0}function qm(r){if(r instanceof Zn)return r.field.canonicalString()+r.op.toString()+td(r.value);if(Zb(r))return r.filters.map((e=>qm(e))).join(",");{const e=r.filters.map((t=>qm(t))).join(",");return`${r.op}(${e})`}}function ew(r,e){return r instanceof Zn?(function(n,o){return o instanceof Zn&&n.op===o.op&&n.field.isEqual(o.field)&&Fa(n.value,o.value)})(r,e):r instanceof sa?(function(n,o){return o instanceof sa&&n.op===o.op&&n.filters.length===o.filters.length?n.filters.reduce(((a,c,u)=>a&&ew(c,o.filters[u])),!0):!1})(r,e):void Ht(19439)}function tw(r){return r instanceof Zn?(function(t){return`${t.field.canonicalString()} ${t.op} ${td(t.value)}`})(r):r instanceof sa?(function(t){return t.op.toString()+" {"+t.getFilters().map(tw).join(" ,")+"}"})(r):"Filter"}class O8 extends Zn{constructor(e,t,n){super(e,t,n),this.key=Et.fromName(n.referenceValue)}matches(e){const t=Et.comparator(e.key,this.key);return this.matchesComparison(t)}}class V8 extends Zn{constructor(e,t){super(e,"in",t),this.keys=rw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class M8 extends Zn{constructor(e,t){super(e,"not-in",t),this.keys=rw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function rw(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((n=>Et.fromName(n.referenceValue)))}class D8 extends Zn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ig(t)&&fh(t.arrayValue,this.value)}}class W8 extends Zn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fh(this.value.arrayValue,t)}}class $8 extends Zn{constructor(e,t){super(e,"not-in",t)}matches(e){if(fh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fh(this.value.arrayValue,t)}}class U8 extends Zn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ig(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>fh(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(e,t=null,n=[],o=[],a=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=o,this.limit=a,this.startAt=c,this.endAt=u,this.Te=null}}function Ry(r,e=null,t=[],n=[],o=null,a=null,c=null){return new q8(r,e,t,n,o,a,c)}function Rg(r){const e=tr(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>qm(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),Rp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>td(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>td(n))).join(",")),e.Te=t}return e.Te}function Pg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!F8(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!ew(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Iy(r.startAt,e.startAt)&&Iy(r.endAt,e.endAt)}function Hm(r){return Et.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t=null,n=[],o=[],a=null,c="F",u=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=o,this.limit=a,this.limitType=c,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function H8(r,e,t,n,o,a,c,u){return new fd(r,e,t,n,o,a,c,u)}function nw(r){return new fd(r)}function Py(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function iw(r){return r.collectionGroup!==null}function eh(r){const e=tr(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new li(Vi.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((d=>{d.isInequality()&&(u=u.add(d.field))}))})),u})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new ph(a,n))})),t.has(Vi.keyField().canonicalString())||e.Ie.push(new ph(Vi.keyField(),n))}return e.Ie}function Pa(r){const e=tr(r);return e.Ee||(e.Ee=G8(e,eh(r))),e.Ee}function G8(r,e){if(r.limitType==="F")return Ry(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new ph(o.field,a)}));const t=r.endAt?new pp(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new pp(r.startAt.position,r.startAt.inclusive):null;return Ry(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function Gm(r,e){const t=r.filters.concat([e]);return new fd(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Km(r,e,t){return new fd(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Np(r,e){return Pg(Pa(r),Pa(e))&&r.limitType===e.limitType}function ow(r){return`${Rg(Pa(r))}|lt:${r.limitType}`}function Fu(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((o=>tw(o))).join(", ")}]`),Rp(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((o=>td(o))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((o=>td(o))).join(",")),`Target(${n})`})(Pa(r))}; limitType=${r.limitType})`}function Bp(r,e){return e.isFoundDocument()&&(function(n,o){const a=o.key.path;return n.collectionGroup!==null?o.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):Et.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(r,e)&&(function(n,o){for(const a of eh(n))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(r,e)&&(function(n,o){for(const a of n.filters)if(!a.matches(o))return!1;return!0})(r,e)&&(function(n,o){return!(n.startAt&&!(function(c,u,f){const d=Ey(c,u,f);return c.inclusive?d<=0:d<0})(n.startAt,eh(n),o)||n.endAt&&!(function(c,u,f){const d=Ey(c,u,f);return c.inclusive?d>=0:d>0})(n.endAt,eh(n),o))})(r,e)}function K8(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function sw(r){return(e,t)=>{let n=!1;for(const o of eh(r)){const a=J8(o,e,t);if(a!==0)return a;n=n||o.field.isKeyField()}return 0}}function J8(r,e,t){const n=r.field.isKeyField()?Et.comparator(e.key,t.key):(function(a,c,u){const f=c.data.field(a),d=u.data.field(a);return f!==null&&d!==null?ed(f,d):Ht(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Ht(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[o,a]of n)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let o=0;o<n.length;o++)if(this.equalsFn(n[o][0],e))return n.length===1?delete this.inner[t]:n.splice(o,1),this.innerSize--,!0;return!1}forEach(e){mc(this.inner,((t,n)=>{for(const[o,a]of n)e(o,a)}))}isEmpty(){return Wb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y8=new Tn(Et.comparator);function gl(){return Y8}const aw=new Tn(Et.comparator);function Gd(...r){let e=aw;for(const t of r)e=e.insert(t.key,t);return e}function lw(r){let e=aw;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Wc(){return th()}function cw(){return th()}function th(){return new iu((r=>r.toString()),((r,e)=>r.isEqual(e)))}const Q8=new Tn(Et.comparator),X8=new li(Et.comparator);function gr(...r){let e=X8;for(const t of r)e=e.add(t);return e}const Z8=new li(mr);function ek(){return Z8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dp(e)?"-0":e}}function uw(r){return{integerValue:""+r}}function tk(r,e){return j8(e)?uw(e):Ng(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(){this._=void 0}}function rk(r,e,t){return r instanceof mh?(function(o,a){const c={fields:{[qb]:{stringValue:Ub},[Gb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Eg(a)&&(a=Pp(a)),a&&(c.fields[Hb]=a),{mapValue:c}})(t,e):r instanceof gh?hw(r,e):r instanceof yh?fw(r,e):(function(o,a){const c=dw(o,a),u=Ny(c)+Ny(o.Ae);return Um(c)&&Um(o.Ae)?uw(u):Ng(o.serializer,u)})(r,e)}function nk(r,e,t){return r instanceof gh?hw(r,e):r instanceof yh?fw(r,e):t}function dw(r,e){return r instanceof mp?(function(n){return Um(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class mh extends Lp{}class gh extends Lp{constructor(e){super(),this.elements=e}}function hw(r,e){const t=pw(e);for(const n of r.elements)t.some((o=>Fa(o,n)))||t.push(n);return{arrayValue:{values:t}}}class yh extends Lp{constructor(e){super(),this.elements=e}}function fw(r,e){let t=pw(e);for(const n of r.elements)t=t.filter((o=>!Fa(o,n)));return{arrayValue:{values:t}}}class mp extends Lp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ny(r){return Dn(r.integerValue||r.doubleValue)}function pw(r){return Ig(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,t){this.field=e,this.transform=t}}function ok(r,e){return r.field.isEqual(e.field)&&(function(n,o){return n instanceof gh&&o instanceof gh||n instanceof yh&&o instanceof yh?Zu(n.elements,o.elements,Fa):n instanceof mp&&o instanceof mp?Fa(n.Ae,o.Ae):n instanceof mh&&o instanceof mh})(r.transform,e.transform)}class sk{constructor(e,t){this.version=e,this.transformResults=t}}class ra{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ra}static exists(e){return new ra(void 0,e)}static updateTime(e){return new ra(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Fp{}function mw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Bg(r.key,ra.none()):new kh(r.key,r.data,ra.none());{const t=r.data,n=Do.empty();let o=new li(Vi.comparator);for(let a of e.fields)if(!o.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?n.delete(a):n.set(a,c),o=o.add(a)}return new gc(r.key,n,new ls(o.toArray()),ra.none())}}function ak(r,e,t){r instanceof kh?(function(o,a,c){const u=o.value.clone(),f=Ly(o.fieldTransforms,a,c.transformResults);u.setAll(f),a.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(r,e,t):r instanceof gc?(function(o,a,c){if(!Gf(o.precondition,a))return void a.convertToUnknownDocument(c.version);const u=Ly(o.fieldTransforms,a,c.transformResults),f=a.data;f.setAll(gw(o)),f.setAll(u),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(r,e,t):(function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function rh(r,e,t,n){return r instanceof kh?(function(a,c,u,f){if(!Gf(a.precondition,c))return u;const d=a.value.clone(),y=Fy(a.fieldTransforms,f,c);return d.setAll(y),c.convertToFoundDocument(c.version,d).setHasLocalMutations(),null})(r,e,t,n):r instanceof gc?(function(a,c,u,f){if(!Gf(a.precondition,c))return u;const d=Fy(a.fieldTransforms,f,c),y=c.data;return y.setAll(gw(a)),y.setAll(d),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(r,e,t,n):(function(a,c,u){return Gf(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(r,e,t)}function lk(r,e){let t=null;for(const n of r.fieldTransforms){const o=e.data.field(n.field),a=dw(n.transform,o||null);a!=null&&(t===null&&(t=Do.empty()),t.set(n.field,a))}return t||null}function By(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,o){return n===void 0&&o===void 0||!(!n||!o)&&Zu(n,o,((a,c)=>ok(a,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class kh extends Fp{constructor(e,t,n,o=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class gc extends Fp{constructor(e,t,n,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function gw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function Ly(r,e,t){const n=new Map;Br(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const a=r[o],c=a.transform,u=e.data.field(a.field);n.set(a.field,nk(c,u,t[o]))}return n}function Fy(r,e,t){const n=new Map;for(const o of r){const a=o.transform,c=t.data.field(o.field);n.set(o.field,rk(a,c,e))}return n}class Bg extends Fp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ck extends Fp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,t,n,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=o}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&ak(a,e,n[o])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=rh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=rh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=cw();return this.mutations.forEach((o=>{const a=e.get(o.key),c=a.overlayedDocument;let u=this.applyToLocalView(c,a.mutatedFields);u=t.has(o.key)?null:u;const f=mw(c,u);f!==null&&n.set(o.key,f),c.isValidDocument()||c.convertToNoDocument(Qt.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),gr())}isEqual(e){return this.batchId===e.batchId&&Zu(this.mutations,e.mutations,((t,n)=>By(t,n)))&&Zu(this.baseMutations,e.baseMutations,((t,n)=>By(t,n)))}}class Lg{constructor(e,t,n,o){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=o}static from(e,t,n){Br(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let o=(function(){return Q8})();const a=e.mutations;for(let c=0;c<a.length;c++)o=o.insert(a[c].key,n[c].version);return new Lg(e,t,n,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xn,xr;function fk(r){switch(r){case Ue.OK:return Ht(64938);case Ue.CANCELLED:case Ue.UNKNOWN:case Ue.DEADLINE_EXCEEDED:case Ue.RESOURCE_EXHAUSTED:case Ue.INTERNAL:case Ue.UNAVAILABLE:case Ue.UNAUTHENTICATED:return!1;case Ue.INVALID_ARGUMENT:case Ue.NOT_FOUND:case Ue.ALREADY_EXISTS:case Ue.PERMISSION_DENIED:case Ue.FAILED_PRECONDITION:case Ue.ABORTED:case Ue.OUT_OF_RANGE:case Ue.UNIMPLEMENTED:case Ue.DATA_LOSS:return!0;default:return Ht(15467,{code:r})}}function yw(r){if(r===void 0)return ml("GRPC error has no .code"),Ue.UNKNOWN;switch(r){case Xn.OK:return Ue.OK;case Xn.CANCELLED:return Ue.CANCELLED;case Xn.UNKNOWN:return Ue.UNKNOWN;case Xn.DEADLINE_EXCEEDED:return Ue.DEADLINE_EXCEEDED;case Xn.RESOURCE_EXHAUSTED:return Ue.RESOURCE_EXHAUSTED;case Xn.INTERNAL:return Ue.INTERNAL;case Xn.UNAVAILABLE:return Ue.UNAVAILABLE;case Xn.UNAUTHENTICATED:return Ue.UNAUTHENTICATED;case Xn.INVALID_ARGUMENT:return Ue.INVALID_ARGUMENT;case Xn.NOT_FOUND:return Ue.NOT_FOUND;case Xn.ALREADY_EXISTS:return Ue.ALREADY_EXISTS;case Xn.PERMISSION_DENIED:return Ue.PERMISSION_DENIED;case Xn.FAILED_PRECONDITION:return Ue.FAILED_PRECONDITION;case Xn.ABORTED:return Ue.ABORTED;case Xn.OUT_OF_RANGE:return Ue.OUT_OF_RANGE;case Xn.UNIMPLEMENTED:return Ue.UNIMPLEMENTED;case Xn.DATA_LOSS:return Ue.DATA_LOSS;default:return Ht(39323,{code:r})}}(xr=Xn||(Xn={}))[xr.OK=0]="OK",xr[xr.CANCELLED=1]="CANCELLED",xr[xr.UNKNOWN=2]="UNKNOWN",xr[xr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xr[xr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xr[xr.NOT_FOUND=5]="NOT_FOUND",xr[xr.ALREADY_EXISTS=6]="ALREADY_EXISTS",xr[xr.PERMISSION_DENIED=7]="PERMISSION_DENIED",xr[xr.UNAUTHENTICATED=16]="UNAUTHENTICATED",xr[xr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xr[xr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xr[xr.ABORTED=10]="ABORTED",xr[xr.OUT_OF_RANGE=11]="OUT_OF_RANGE",xr[xr.UNIMPLEMENTED=12]="UNIMPLEMENTED",xr[xr.INTERNAL=13]="INTERNAL",xr[xr.UNAVAILABLE=14]="UNAVAILABLE",xr[xr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=new rc([4294967295,4294967295],0);function zy(r){const e=pk().encode(r),t=new Rb;return t.update(e),new Uint8Array(t.digest())}function Oy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new rc([t,n],0),new rc([o,a],0)]}class Fg{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Kd(`Invalid padding: ${t}`);if(n<0)throw new Kd(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Kd(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Kd(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=rc.fromNumber(this.ge)}ye(e,t,n){let o=e.add(t.multiply(rc.fromNumber(n)));return o.compare(mk)===1&&(o=new rc([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=zy(e),[n,o]=Oy(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(n,o,a);if(!this.we(c))return!1}return!0}static create(e,t,n){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new Fg(a,o,t);return n.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const t=zy(e),[n,o]=Oy(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(n,o,a);this.Se(c)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Kd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,t,n,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const o=new Map;return o.set(e,jh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new zp(Qt.min(),o,new Tn(mr),gl(),gr())}}class jh{constructor(e,t,n,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new jh(n,t,gr(),gr(),gr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,t,n,o){this.be=e,this.removedTargetIds=t,this.key=n,this.De=o}}class xw{constructor(e,t){this.targetId=e,this.Ce=t}}class vw{constructor(e,t,n=Mi.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=o}}class Vy{constructor(){this.ve=0,this.Fe=My(),this.Me=Mi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=gr(),t=gr(),n=gr();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:n=n.add(o);break;default:Ht(38017,{changeType:a})}})),new jh(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=My()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Br(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class gk{constructor(e){this.Ge=e,this.ze=new Map,this.je=gl(),this.Je=If(),this.He=If(),this.Ye=new Tn(mr)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Ht(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,n=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(Hm(a))if(n===0){const c=new Et(a.path);this.et(t,c,ao.newNoDocument(c,Qt.min()))}else Br(n===1,20013,{expectedCount:n});else{const c=this._t(t);if(c!==n){const u=this.ut(e),f=u?this.ct(u,e,c):1;if(f!==0){this.it(t);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:o=0},hashCount:a=0}=t;let c,u;try{c=cc(n).toUint8Array()}catch(f){if(f instanceof $b)return Xu("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{u=new Fg(c,o,a)}catch(f){return Xu(f instanceof Kd?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let o=0;return n.forEach((a=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,c)=>{const u=this.ot(c);if(u){if(a.current&&Hm(u.target)){const f=new Et(u.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,ao.newNoDocument(f,e))}a.Be&&(t.set(c,a.ke()),a.qe())}}));let n=gr();this.He.forEach(((a,c)=>{let u=!0;c.forEachWhile((f=>{const d=this.ot(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const o=new zp(e,t,this.Ye,this.je,n);return this.je=gl(),this.Je=If(),this.He=If(),this.Ye=new Tn(mr),o}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Vy,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new li(mr),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new li(mr),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ct("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function If(){return new Tn(Et.comparator)}function My(){return new Tn(Et.comparator)}const yk={asc:"ASCENDING",desc:"DESCENDING"},xk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vk={and:"AND",or:"OR"};class bk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jm(r,e){return r.useProto3Json||Rp(e)?e:{value:e}}function gp(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function wk(r,e){return gp(r,e.toTimestamp())}function Na(r){return Br(!!r,49232),Qt.fromTimestamp((function(t){const n=lc(t);return new nn(n.seconds,n.nanos)})(r))}function zg(r,e){return Ym(r,e).canonicalString()}function Ym(r,e){const t=(function(o){return new tn(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function ww(r){const e=tn.fromString(r);return Br(Aw(e),10190,{key:e.toString()}),e}function Qm(r,e){return zg(r.databaseId,e.path)}function fm(r,e){const t=ww(e);if(t.get(1)!==r.databaseId.projectId)throw new it(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new it(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Et(_w(t))}function Sw(r,e){return zg(r.databaseId,e)}function Sk(r){const e=ww(r);return e.length===4?tn.emptyPath():_w(e)}function Xm(r){return new tn(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function _w(r){return Br(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Dy(r,e,t){return{name:Qm(r,e),fields:t.value.mapValue.fields}}function _k(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ht(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(d,y){return d.useProto3Json?(Br(y===void 0||typeof y=="string",58123),Mi.fromBase64String(y||"")):(Br(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Mi.fromUint8Array(y||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(d){const y=d.code===void 0?Ue.UNKNOWN:yw(d.code);return new it(y,d.message||"")})(c);t=new vw(n,o,a,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const o=fm(r,n.document.name),a=Na(n.document.updateTime),c=n.document.createTime?Na(n.document.createTime):Qt.min(),u=new Do({mapValue:{fields:n.document.fields}}),f=ao.newFoundDocument(o,a,c,u),d=n.targetIds||[],y=n.removedTargetIds||[];t=new Kf(d,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const o=fm(r,n.document),a=n.readTime?Na(n.readTime):Qt.min(),c=ao.newNoDocument(o,a),u=n.removedTargetIds||[];t=new Kf([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const o=fm(r,n.document),a=n.removedTargetIds||[];t=new Kf([],a,o,null)}else{if(!("filter"in e))return Ht(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:o=0,unchangedNames:a}=n,c=new hk(o,a),u=n.targetId;t=new xw(u,c)}}return t}function Tk(r,e){let t;if(e instanceof kh)t={update:Dy(r,e.key,e.value)};else if(e instanceof Bg)t={delete:Qm(r,e.key)};else if(e instanceof gc)t={update:Dy(r,e.key,e.data),updateMask:Nk(e.fieldMask)};else{if(!(e instanceof ck))return Ht(16599,{Vt:e.type});t={verify:Qm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(a,c){const u=c.transform;if(u instanceof mh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof gh)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof yh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof mp)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw Ht(20930,{transform:c.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:wk(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ht(27497)})(r,e.precondition)),t}function Ck(r,e){return r&&r.length>0?(Br(e!==void 0,14353),r.map((t=>(function(o,a){let c=o.updateTime?Na(o.updateTime):Na(a);return c.isEqual(Qt.min())&&(c=Na(a)),new sk(c,o.transformResults||[])})(t,e)))):[]}function Ak(r,e){return{documents:[Sw(r,e.path)]}}function kk(r,e){const t={structuredQuery:{}},n=e.path;let o;e.collectionGroup!==null?(o=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=Sw(r,o);const a=(function(d){if(d.length!==0)return Cw(sa.create(d,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(d){if(d.length!==0)return d.map((y=>(function(C){return{field:zu(C.field),direction:Ik(C.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=Jm(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:o}}function jk(r){let e=Sk(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let o=null;if(n>0){Br(n===1,65062);const y=t.from[0];y.allDescendants?o=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=(function(w){const C=Tw(w);return C instanceof sa&&Zb(C)?C.getFilters():[C]})(t.where));let c=[];t.orderBy&&(c=(function(w){return w.map((C=>(function(B){return new ph(Ou(B.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(C)))})(t.orderBy));let u=null;t.limit&&(u=(function(w){let C;return C=typeof w=="object"?w.value:w,Rp(C)?null:C})(t.limit));let f=null;t.startAt&&(f=(function(w){const C=!!w.before,v=w.values||[];return new pp(v,C)})(t.startAt));let d=null;return t.endAt&&(d=(function(w){const C=!w.before,v=w.values||[];return new pp(v,C)})(t.endAt)),H8(e,o,c,a,u,"F",f,d)}function Ek(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ht(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Tw(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Ou(t.unaryFilter.field);return Zn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const o=Ou(t.unaryFilter.field);return Zn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ou(t.unaryFilter.field);return Zn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ou(t.unaryFilter.field);return Zn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ht(61313);default:return Ht(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Zn.create(Ou(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ht(58110);default:return Ht(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return sa.create(t.compositeFilter.filters.map((n=>Tw(n))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ht(1026)}})(t.compositeFilter.op))})(r):Ht(30097,{filter:r})}function Ik(r){return yk[r]}function Rk(r){return xk[r]}function Pk(r){return vk[r]}function zu(r){return{fieldPath:r.canonicalString()}}function Ou(r){return Vi.fromServerFormat(r.fieldPath)}function Cw(r){return r instanceof Zn?(function(t){if(t.op==="=="){if(jy(t.value))return{unaryFilter:{field:zu(t.field),op:"IS_NAN"}};if(ky(t.value))return{unaryFilter:{field:zu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jy(t.value))return{unaryFilter:{field:zu(t.field),op:"IS_NOT_NAN"}};if(ky(t.value))return{unaryFilter:{field:zu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zu(t.field),op:Rk(t.op),value:t.value}}})(r):r instanceof sa?(function(t){const n=t.getFilters().map((o=>Cw(o)));return n.length===1?n[0]:{compositeFilter:{op:Pk(t.op),filters:n}}})(r):Ht(54877,{filter:r})}function Nk(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Aw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,t,n,o,a=Qt.min(),c=Qt.min(),u=Mi.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=f}withSequenceNumber(e){return new Xl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.yt=e}}function Lk(r){const e=jk({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Km(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.Cn=new zk}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ge.resolve()}getCollectionParents(e,t){return Ge.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ge.resolve()}deleteFieldIndex(e,t){return Ge.resolve()}deleteAllFieldIndexes(e){return Ge.resolve()}createTargetIndexes(e,t){return Ge.resolve()}getDocumentsMatchingTarget(e,t){return Ge.resolve(null)}getIndexType(e,t){return Ge.resolve(0)}getFieldIndexes(e,t){return Ge.resolve([])}getNextCollectionGroupToUpdate(e){return Ge.resolve(null)}getMinOffset(e,t){return Ge.resolve(ac.min())}getMinOffsetFromCollectionGroup(e,t){return Ge.resolve(ac.min())}updateCollectionGroup(e,t,n){return Ge.resolve()}updateIndexEntries(e,t){return Ge.resolve()}}class zk{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),o=this.index[t]||new li(tn.comparator),a=!o.has(n);return this.index[t]=o.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),o=this.index[t];return o&&o.has(n)}getEntries(e){return(this.index[e]||new li(tn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kw=41943040;class Mo{static withCacheSize(e){return new Mo(e,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mo.DEFAULT_COLLECTION_PERCENTILE=10,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mo.DEFAULT=new Mo(kw,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mo.DISABLED=new Mo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new rd(0)}static cr(){return new rd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="LruGarbageCollector",Ok=1048576;function Uy([r,e],[t,n]){const o=mr(r,t);return o===0?mr(e,n):o}class Vk{constructor(e){this.Ir=e,this.buffer=new li(Uy),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();Uy(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Mk{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ct($y,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hd(t)?ct($y,"Ignoring IndexedDB error during garbage collection: ",t):await dd(t)}await this.Vr(3e5)}))}}class Dk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return Ge.resolve(Ip.ce);const n=new Vk(t);return this.mr.forEachTarget(e,(o=>n.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>n.Ar(o))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ct("LruGarbageCollector","Garbage collection skipped; disabled"),Ge.resolve(Wy)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wy):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,o,a,c,u,f,d;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,c=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(n=w,u=Date.now(),this.removeTargets(e,n,t)))).next((w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,n)))).next((w=>(d=Date.now(),Lu()<=pr.DEBUG&&ct("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${o} in `+(u-c)+`ms
	Removed ${a} targets in `+(f-u)+`ms
	Removed ${w} documents in `+(d-f)+`ms
Total Duration: ${d-y}ms`),Ge.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:w}))))}}function Wk(r,e){return new Dk(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this.changes=new iu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ao.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Ge.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,t,n,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=o}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(n=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(n!==null&&rh(n.mutation,o,ls.empty(),nn.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,gr()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=gr()){const o=Wc();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,n).next((a=>{let c=Gd();return a.forEach(((u,f)=>{c=c.insert(u,f.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const n=Wc();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,gr())))}populateOverlays(e,t,n){const o=[];return n.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((c,u)=>{t.set(c,u)}))}))}computeViews(e,t,n,o){let a=gl();const c=th(),u=(function(){return th()})();return t.forEach(((f,d)=>{const y=n.get(d.key);o.has(d.key)&&(y===void 0||y.mutation instanceof gc)?a=a.insert(d.key,d):y!==void 0?(c.set(d.key,y.mutation.getFieldMask()),rh(y.mutation,d,y.mutation.getFieldMask(),nn.now())):c.set(d.key,ls.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((d,y)=>c.set(d,y))),t.forEach(((d,y)=>u.set(d,new Uk(y,c.get(d)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=th();let o=new Tn(((c,u)=>c-u)),a=gr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const u of c)u.keys().forEach((f=>{const d=t.get(f);if(d===null)return;let y=n.get(f)||ls.empty();y=u.applyToLocalView(d,y),n.set(f,y);const w=(o.get(u.batchId)||gr()).add(f);o=o.insert(u.batchId,w)}))})).next((()=>{const c=[],u=o.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),d=f.key,y=f.value,w=cw();y.forEach((C=>{if(!a.has(C)){const v=mw(t.get(C),n.get(C));v!==null&&w.set(C,v),a=a.add(C)}})),c.push(this.documentOverlayCache.saveOverlays(e,d,w))}return Ge.waitFor(c)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,o){return(function(c){return Et.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):iw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,o):this.getDocumentsMatchingCollectionQuery(e,t,n,o)}getNextDocuments(e,t,n,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,o).next((a=>{const c=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,o-a.size):Ge.resolve(Wc());let u=uh,f=a;return c.next((d=>Ge.forEach(d,((y,w)=>(u<w.largestBatchId&&(u=w.largestBatchId),a.get(y)?Ge.resolve():this.remoteDocumentCache.getEntry(e,y).next((C=>{f=f.insert(y,C)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,f,d,gr()))).next((y=>({batchId:u,changes:lw(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Et(t)).next((n=>{let o=Gd();return n.isFoundDocument()&&(o=o.insert(n.key,n)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,o){const a=t.collectionGroup;let c=Gd();return this.indexManager.getCollectionParents(e,a).next((u=>Ge.forEach(u,(f=>{const d=(function(w,C){return new fd(C,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,n,o).next((y=>{y.forEach(((w,C)=>{c=c.insert(w,C)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,n,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,o)))).next((c=>{a.forEach(((f,d)=>{const y=d.getKey();c.get(y)===null&&(c=c.insert(y,ao.newInvalidDocument(y)))}));let u=Gd();return c.forEach(((f,d)=>{const y=a.get(f);y!==void 0&&rh(y.mutation,d,ls.empty(),nn.now()),Bp(t,d)&&(u=u.insert(f,d))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ge.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Na(o.createTime)}})(t)),Ge.resolve()}getNamedQuery(e,t){return Ge.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:Lk(o.bundledQuery),readTime:Na(o.readTime)}})(t)),Ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this.overlays=new Tn(Et.comparator),this.qr=new Map}getOverlay(e,t){return Ge.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Wc();return Ge.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&n.set(o,a)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((o,a)=>{this.St(e,t,a)})),Ge.resolve()}removeOverlaysForBatchId(e,t,n){const o=this.qr.get(n);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(n)),Ge.resolve()}getOverlaysForCollection(e,t,n){const o=Wc(),a=t.length+1,c=new Et(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const f=u.getNext().value,d=f.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===a&&f.largestBatchId>n&&o.set(f.getKey(),f)}return Ge.resolve(o)}getOverlaysForCollectionGroup(e,t,n,o){let a=new Tn(((d,y)=>d-y));const c=this.overlays.getIterator();for(;c.hasNext();){const d=c.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>n){let y=a.get(d.largestBatchId);y===null&&(y=Wc(),a=a.insert(d.largestBatchId,y)),y.set(d.getKey(),d)}}const u=Wc(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((d,y)=>u.set(d,y))),!(u.size()>=o)););return Ge.resolve(u)}St(e,t,n){const o=this.overlays.get(n.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(n.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new dk(t,n));let a=this.qr.get(t);a===void 0&&(a=gr(),this.qr.set(t,a)),this.qr.set(t,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.sessionToken=Mi.EMPTY_BYTE_STRING}getSessionToken(e){return Ge.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(){this.Qr=new li(Ti.$r),this.Ur=new li(Ti.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Ti(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new Ti(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new Et(new tn([])),n=new Ti(t,e),o=new Ti(t,e+1),a=[];return this.Ur.forEachInRange([n,o],(c=>{this.Gr(c),a.push(c.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Et(new tn([])),n=new Ti(t,e),o=new Ti(t,e+1);let a=gr();return this.Ur.forEachInRange([n,o],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new Ti(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Ti{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Et.comparator(e.key,t.key)||mr(e.Yr,t.Yr)}static Kr(e,t){return mr(e.Yr,t.Yr)||Et.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new li(Ti.$r)}checkEmpty(e){return Ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new uk(a,t,n,o);this.mutationQueue.push(c);for(const u of o)this.Zr=this.Zr.add(new Ti(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Ge.resolve(c)}lookupMutationBatch(e,t){return Ge.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,o=this.ei(n),a=o<0?0:o;return Ge.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ge.resolve(this.mutationQueue.length===0?jg:this.tr-1)}getAllMutationBatches(e){return Ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ti(t,0),o=new Ti(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,o],(c=>{const u=this.Xr(c.Yr);a.push(u)})),Ge.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new li(mr);return t.forEach((o=>{const a=new Ti(o,0),c=new Ti(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,c],(u=>{n=n.add(u.Yr)}))})),Ge.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,o=n.length+1;let a=n;Et.isDocumentKey(a)||(a=a.child(""));const c=new Ti(new Et(a),0);let u=new li(mr);return this.Zr.forEachWhile((f=>{const d=f.key.path;return!!n.isPrefixOf(d)&&(d.length===o&&(u=u.add(f.Yr)),!0)}),c),Ge.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((n=>{const o=this.Xr(n);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Br(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Ge.forEach(t.mutations,(o=>{const a=new Ti(o.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new Ti(t,0),o=this.Zr.firstAfterOrEqual(n);return Ge.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ge.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.ri=e,this.docs=(function(){return new Tn(Et.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,o=this.docs.get(n),a=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ge.resolve(n?n.document.mutableCopy():ao.newInvalidDocument(t))}getEntries(e,t){let n=gl();return t.forEach((o=>{const a=this.docs.get(o);n=n.insert(o,a?a.document.mutableCopy():ao.newInvalidDocument(o))})),Ge.resolve(n)}getDocumentsMatchingQuery(e,t,n,o){let a=gl();const c=t.path,u=new Et(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:d,value:{document:y}}=f.getNext();if(!c.isPrefixOf(d.path))break;d.path.length>c.length+1||T8(_8(y),n)<=0||(o.has(y.key)||Bp(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return Ge.resolve(a)}getAllFromCollectionGroup(e,t,n,o){Ht(9500)}ii(e,t){return Ge.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new Qk(this)}getSize(e){return Ge.resolve(this.size)}}class Qk extends $k{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(n)})),Ge.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.persistence=e,this.si=new iu((t=>Rg(t)),Pg),this.lastRemoteSnapshotVersion=Qt.min(),this.highestTargetId=0,this.oi=0,this._i=new Og,this.targetCount=0,this.ai=rd.ur()}forEachTarget(e,t){return this.si.forEach(((n,o)=>t(o))),Ge.resolve()}getLastRemoteSnapshotVersion(e){return Ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ge.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Ge.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new rd(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ge.resolve()}updateTargetData(e,t){return this.Pr(t),Ge.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ge.resolve()}removeTargets(e,t,n){let o=0;const a=[];return this.si.forEach(((c,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.si.delete(c),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),o++)})),Ge.waitFor(a).next((()=>o))}getTargetCount(e){return Ge.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Ge.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Ge.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((c=>{a.push(o.markPotentiallyOrphaned(e,c))})),Ge.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ge.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Ge.resolve(n)}containsKey(e,t){return Ge.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ip(0),this.li=!1,this.li=!0,this.hi=new Kk,this.referenceDelegate=e(this),this.Pi=new Xk(this),this.indexManager=new Fk,this.remoteDocumentCache=(function(o){return new Yk(o)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new Bk(t),this.Ii=new Hk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Jk(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){ct("MemoryPersistence","Starting transaction:",e);const o=new Zk(this.ci.next());return this.referenceDelegate.Ei(),n(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return Ge.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class Zk extends A8{constructor(e){super(),this.currentSequenceNumber=e}}class Vg{constructor(e){this.persistence=e,this.Ri=new Og,this.Vi=null}static mi(e){return new Vg(e)}get fi(){if(this.Vi)return this.Vi;throw Ht(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Ge.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Ge.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ge.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ge.forEach(this.fi,(n=>{const o=Et.fromPath(n);return this.gi(e,o).next((a=>{a||t.removeEntry(o,Qt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Ge.or([()=>Ge.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class yp{constructor(e,t){this.persistence=e,this.pi=new iu((n=>E8(n.path)),((n,o)=>n.isEqual(o))),this.garbageCollector=Wk(this,t)}static mi(e,t){return new yp(e,t)}Ei(){}di(e){return Ge.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((o=>n+o))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return Ge.forEach(this.pi,((n,o)=>this.br(e,n,o).next((a=>a?Ge.resolve():t(o)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((u=>{u||(n++,a.removeEntry(c,Qt.min()))})))).next((()=>a.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ge.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ge.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ge.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ge.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=qf(e.data.value)),t}br(e,t,n){return Ge.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return Ge.resolve(o!==void 0&&o>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,t,n,o){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=o}static As(e,t){let n=gr(),o=gr();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Mg(e,t.fromCache,n,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return R6()?8:k8(lo())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,o){const a={result:null};return this.ys(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ws(e,t,o,n).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new ej;return this.Ss(e,t,c).next((u=>{if(a.result=u,this.Vs)return this.bs(e,t,c,u.size)}))})).next((()=>a.result))}bs(e,t,n,o){return n.documentReadCount<this.fs?(Lu()<=pr.DEBUG&&ct("QueryEngine","SDK will not create cache indexes for query:",Fu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ge.resolve()):(Lu()<=pr.DEBUG&&ct("QueryEngine","Query:",Fu(t),"scans",n.documentReadCount,"local documents and returns",o,"documents as results."),n.documentReadCount>this.gs*o?(Lu()<=pr.DEBUG&&ct("QueryEngine","The SDK decides to create cache indexes for query:",Fu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pa(t))):Ge.resolve())}ys(e,t){if(Py(t))return Ge.resolve(null);let n=Pa(t);return this.indexManager.getIndexType(e,n).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Km(t,null,"F"),n=Pa(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const c=gr(...a);return this.ps.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,n).next((f=>{const d=this.Ds(t,u);return this.Cs(t,d,c,f.readTime)?this.ys(e,Km(t,null,"F")):this.vs(e,d,t,f)}))))})))))}ws(e,t,n,o){return Py(t)||o.isEqual(Qt.min())?Ge.resolve(null):this.ps.getDocuments(e,n).next((a=>{const c=this.Ds(t,a);return this.Cs(t,c,n,o)?Ge.resolve(null):(Lu()<=pr.DEBUG&&ct("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Fu(t)),this.vs(e,c,t,S8(o,uh)).next((u=>u)))}))}Ds(e,t){let n=new li(sw(e));return t.forEach(((o,a)=>{Bp(e,a)&&(n=n.add(a))})),n}Cs(e,t,n,o){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,n){return Lu()<=pr.DEBUG&&ct("QueryEngine","Using full collection scan to execute query:",Fu(t)),this.ps.getDocumentsMatchingQuery(e,t,ac.min(),n)}vs(e,t,n,o){return this.ps.getDocumentsMatchingQuery(e,n,o).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="LocalStore",rj=3e8;class nj{constructor(e,t,n,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Tn(mr),this.xs=new iu((a=>Rg(a)),Pg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function ij(r,e,t,n){return new nj(r,e,t,n)}async function Ew(r,e){const t=tr(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let o;return t.mutationQueue.getAllMutationBatches(n).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((a=>{const c=[],u=[];let f=gr();for(const d of o){c.push(d.batchId);for(const y of d.mutations)f=f.add(y.key)}for(const d of a){u.push(d.batchId);for(const y of d.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(n,f).next((d=>({Ls:d,removedBatchIds:c,addedBatchIds:u})))}))}))}function oj(r,e){const t=tr(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,f,d,y){const w=d.batch,C=w.keys();let v=Ge.resolve();return C.forEach((B=>{v=v.next((()=>y.getEntry(f,B))).next((I=>{const z=d.docVersions.get(B);Br(z!==null,48541),I.version.compareTo(z)<0&&(w.applyToRemoteDocument(I,d),I.isValidDocument()&&(I.setReadTime(d.commitVersion),y.addEntry(I)))}))})),v.next((()=>u.mutationQueue.removeMutationBatch(f,w)))})(t,n,e,a).next((()=>a.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let f=gr();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(f=f.add(u.batch.mutations[d].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(n,o)))}))}function Iw(r){const e=tr(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function sj(r,e){const t=tr(r),n=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const u=[];e.targetChanges.forEach(((y,w)=>{const C=o.get(w);if(!C)return;u.push(t.Pi.removeMatchingKeys(a,y.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(a,y.addedDocuments,w))));let v=C.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?v=v.withResumeToken(Mi.EMPTY_BYTE_STRING,Qt.min()).withLastLimboFreeSnapshotVersion(Qt.min()):y.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(y.resumeToken,n)),o=o.insert(w,v),(function(I,z,A){return I.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=rj?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0})(C,v,y)&&u.push(t.Pi.updateTargetData(a,v))}));let f=gl(),d=gr();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))})),u.push(aj(a,c,e.documentUpdates).next((y=>{f=y.ks,d=y.qs}))),!n.isEqual(Qt.min())){const y=t.Pi.getLastRemoteSnapshotVersion(a).next((w=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n)));u.push(y)}return Ge.waitFor(u).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,d))).next((()=>f))})).then((a=>(t.Ms=o,a)))}function aj(r,e,t){let n=gr(),o=gr();return t.forEach((a=>n=n.add(a))),e.getEntries(r,n).next((a=>{let c=gl();return t.forEach(((u,f)=>{const d=a.get(u);f.isFoundDocument()!==d.isFoundDocument()&&(o=o.add(u)),f.isNoDocument()&&f.version.isEqual(Qt.min())?(e.removeEntry(u,f.readTime),c=c.insert(u,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(f),c=c.insert(u,f)):ct(Dg,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",f.version)})),{ks:c,qs:o}}))}function lj(r,e){const t=tr(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=jg),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function cj(r,e){const t=tr(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let o;return t.Pi.getTargetData(n,e).next((a=>a?(o=a,Ge.resolve(o)):t.Pi.allocateTargetId(n).next((c=>(o=new Xl(e,c,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,o).next((()=>o)))))))})).then((n=>{const o=t.Ms.get(n.targetId);return(o===null||n.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function Zm(r,e,t){const n=tr(r),o=n.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,(c=>n.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!hd(c))throw c;ct(Dg,`Failed to update sequence numbers for target ${e}: ${c}`)}n.Ms=n.Ms.remove(e),n.xs.delete(o.target)}function qy(r,e,t){const n=tr(r);let o=Qt.min(),a=gr();return n.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,d,y){const w=tr(f),C=w.xs.get(y);return C!==void 0?Ge.resolve(w.Ms.get(C)):w.Pi.getTargetData(d,y)})(n,c,Pa(e)).next((u=>{if(u)return o=u.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(c,u.targetId).next((f=>{a=f}))})).next((()=>n.Fs.getDocumentsMatchingQuery(c,e,t?o:Qt.min(),t?a:gr()))).next((u=>(uj(n,K8(e),u),{documents:u,Qs:a})))))}function uj(r,e,t){let n=r.Os.get(e)||Qt.min();t.forEach(((o,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),r.Os.set(e,n)}class Hy{constructor(){this.activeTargetIds=ek()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dj{constructor(){this.Mo=new Hy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Hy,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="ConnectivityMonitor";class Ky{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ct(Gy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ct(Gy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rf=null;function eg(){return Rf===null?Rf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Rf++,"0x"+Rf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="RestConnection",fj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${o}`,this.Wo=this.databaseId.database===hp?`project_id=${n}`:`project_id=${n}&database_id=${o}`}Go(e,t,n,o,a){const c=eg(),u=this.zo(e,t.toUriEncodedString());ct(pm,`Sending RPC '${e}' ${c}:`,u,n);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,o,a);const{host:d}=new URL(u),y=ad(d);return this.Jo(e,u,f,n,y).then((w=>(ct(pm,`Received RPC '${e}' ${c}: `,w),w)),(w=>{throw Xu(pm,`RPC '${e}' ${c} failed with error: `,w,"url: ",u,"request:",n),w}))}Ho(e,t,n,o,a,c){return this.Go(e,t,n,o,a)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ud})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),n&&n.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const n=fj[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="WebChannelConnection";class gj extends pj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,o,a){const c=eg();return new Promise(((u,f)=>{const d=new Pb;d.setWithCredentials(!0),d.listenOnce(Nb.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Uf.NO_ERROR:const w=d.getResponseJson();ct(oo,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(w)),u(w);break;case Uf.TIMEOUT:ct(oo,`RPC '${e}' ${c} timed out`),f(new it(Ue.DEADLINE_EXCEEDED,"Request time out"));break;case Uf.HTTP_ERROR:const C=d.getStatus();if(ct(oo,`RPC '${e}' ${c} failed with status:`,C,"response text:",d.getResponseText()),C>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const B=v==null?void 0:v.error;if(B&&B.status&&B.message){const I=(function(A){const M=A.toLowerCase().replace(/_/g,"-");return Object.values(Ue).indexOf(M)>=0?M:Ue.UNKNOWN})(B.status);f(new it(I,B.message))}else f(new it(Ue.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new it(Ue.UNAVAILABLE,"Connection failed."));break;default:Ht(9055,{l_:e,streamId:c,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ct(oo,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(o);ct(oo,`RPC '${e}' ${c} sending request:`,o),d.send(t,"POST",y,n,15)}))}T_(e,t,n){const o=eg(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Fb(),u=Lb(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,n),f.encodeInitMessageHeaders=!0;const y=a.join("");ct(oo,`Creating RPC '${e}' stream ${o}: ${y}`,f);const w=c.createWebChannel(y,f);this.I_(w);let C=!1,v=!1;const B=new mj({Yo:z=>{v?ct(oo,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(C||(ct(oo,`Opening RPC '${e}' stream ${o} transport.`),w.open(),C=!0),ct(oo,`RPC '${e}' stream ${o} sending:`,z),w.send(z))},Zo:()=>w.close()}),I=(z,A,M)=>{z.listen(A,(U=>{try{M(U)}catch(F){setTimeout((()=>{throw F}),0)}}))};return I(w,Hd.EventType.OPEN,(()=>{v||(ct(oo,`RPC '${e}' stream ${o} transport opened.`),B.o_())})),I(w,Hd.EventType.CLOSE,(()=>{v||(v=!0,ct(oo,`RPC '${e}' stream ${o} transport closed`),B.a_(),this.E_(w))})),I(w,Hd.EventType.ERROR,(z=>{v||(v=!0,Xu(oo,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),B.a_(new it(Ue.UNAVAILABLE,"The operation could not be completed")))})),I(w,Hd.EventType.MESSAGE,(z=>{var A;if(!v){const M=z.data[0];Br(!!M,16349);const U=M,F=(U==null?void 0:U.error)||((A=U[0])==null?void 0:A.error);if(F){ct(oo,`RPC '${e}' stream ${o} received error:`,F);const se=F.status;let ue=(function(T){const V=Xn[T];if(V!==void 0)return yw(V)})(se),L=F.message;ue===void 0&&(ue=Ue.INTERNAL,L="Unknown error status: "+se+" with message "+F.message),v=!0,B.a_(new it(ue,L)),w.close()}else ct(oo,`RPC '${e}' stream ${o} received:`,M),B.u_(M)}})),I(u,Bb.STAT_EVENT,(z=>{z.stat===Dm.PROXY?ct(oo,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===Dm.NOPROXY&&ct(oo,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function mm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(r){return new bk(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,t,n=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-n);o>0&&ct("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="PersistentStream";class Pw{constructor(e,t,n,o,a,c,u,f){this.Mi=e,this.S_=n,this.b_=o,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Rw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ue.RESOURCE_EXHAUSTED?(ml(t.toString()),ml("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,o])=>{this.D_===t&&this.G_(n,o)}),(n=>{e((()=>{const o=new it(Ue.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(o)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{n((()=>this.z_(o)))})),this.stream.onMessage((o=>{n((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ct(Jy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ct(Jy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yj extends Pw{constructor(e,t,n,o,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,o,c),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=_k(this.serializer,e),n=(function(a){if(!("targetChange"in a))return Qt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Qt.min():c.readTime?Na(c.readTime):Qt.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Xm(this.serializer),t.addTarget=(function(a,c){let u;const f=c.target;if(u=Hm(f)?{documents:Ak(a,f)}:{query:kk(a,f).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=bw(a,c.resumeToken);const d=Jm(a,c.expectedCount);d!==null&&(u.expectedCount=d)}else if(c.snapshotVersion.compareTo(Qt.min())>0){u.readTime=gp(a,c.snapshotVersion.toTimestamp());const d=Jm(a,c.expectedCount);d!==null&&(u.expectedCount=d)}return u})(this.serializer,e);const n=Ek(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Xm(this.serializer),t.removeTarget=e,this.q_(t)}}class xj extends Pw{constructor(e,t,n,o,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,o,c),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Br(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Br(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Br(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Ck(e.writeResults,e.commitTime),n=Na(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Xm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>Tk(this.serializer,n)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{}class bj extends vj{constructor(e,t,n,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new it(Ue.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Go(e,Ym(t,n),o,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new it(Ue.UNKNOWN,a.toString())}))}Ho(e,t,n,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Ho(e,Ym(t,n),o,c,u,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new it(Ue.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class wj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ml(t),this.aa=!1):ct("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc="RemoteStore";class Sj{constructor(e,t,n,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((c=>{n.enqueueAndForget((async()=>{ou(this)&&(ct(Xc,"Restarting streams for network reachability change."),await(async function(f){const d=tr(f);d.Ea.add(4),await Eh(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Vp(d)})(this))}))})),this.Ra=new wj(n,o)}}async function Vp(r){if(ou(r))for(const e of r.da)await e(!0)}async function Eh(r){for(const e of r.da)await e(!1)}function Nw(r,e){const t=tr(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),qg(t)?Ug(t):pd(t).O_()&&$g(t,e))}function Wg(r,e){const t=tr(r),n=pd(t);t.Ia.delete(e),n.O_()&&Bw(t,e),t.Ia.size===0&&(n.O_()?n.L_():ou(t)&&t.Ra.set("Unknown"))}function $g(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}pd(r).Y_(e)}function Bw(r,e){r.Va.Ue(e),pd(r).Z_(e)}function Ug(r){r.Va=new gk({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),pd(r).start(),r.Ra.ua()}function qg(r){return ou(r)&&!pd(r).x_()&&r.Ia.size>0}function ou(r){return tr(r).Ea.size===0}function Lw(r){r.Va=void 0}async function _j(r){r.Ra.set("Online")}async function Tj(r){r.Ia.forEach(((e,t)=>{$g(r,e)}))}async function Cj(r,e){Lw(r),qg(r)?(r.Ra.ha(e),Ug(r)):r.Ra.set("Unknown")}async function Aj(r,e,t){if(r.Ra.set("Online"),e instanceof vw&&e.state===2&&e.cause)try{await(async function(o,a){const c=a.cause;for(const u of a.targetIds)o.Ia.has(u)&&(await o.remoteSyncer.rejectListen(u,c),o.Ia.delete(u),o.Va.removeTarget(u))})(r,e)}catch(n){ct(Xc,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await xp(r,n)}else if(e instanceof Kf?r.Va.Ze(e):e instanceof xw?r.Va.st(e):r.Va.tt(e),!t.isEqual(Qt.min()))try{const n=await Iw(r.localStore);t.compareTo(n)>=0&&await(function(a,c){const u=a.Va.Tt(c);return u.targetChanges.forEach(((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const y=a.Ia.get(d);y&&a.Ia.set(d,y.withResumeToken(f.resumeToken,c))}})),u.targetMismatches.forEach(((f,d)=>{const y=a.Ia.get(f);if(!y)return;a.Ia.set(f,y.withResumeToken(Mi.EMPTY_BYTE_STRING,y.snapshotVersion)),Bw(a,f);const w=new Xl(y.target,f,d,y.sequenceNumber);$g(a,w)})),a.remoteSyncer.applyRemoteEvent(u)})(r,t)}catch(n){ct(Xc,"Failed to raise snapshot:",n),await xp(r,n)}}async function xp(r,e,t){if(!hd(e))throw e;r.Ea.add(1),await Eh(r),r.Ra.set("Offline"),t||(t=()=>Iw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ct(Xc,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Vp(r)}))}function Fw(r,e){return e().catch((t=>xp(r,t,e)))}async function Mp(r){const e=tr(r),t=dc(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jg;for(;kj(e);)try{const o=await lj(e.localStore,n);if(o===null){e.Ta.length===0&&t.L_();break}n=o.batchId,jj(e,o)}catch(o){await xp(e,o)}zw(e)&&Ow(e)}function kj(r){return ou(r)&&r.Ta.length<10}function jj(r,e){r.Ta.push(e);const t=dc(r);t.O_()&&t.X_&&t.ea(e.mutations)}function zw(r){return ou(r)&&!dc(r).x_()&&r.Ta.length>0}function Ow(r){dc(r).start()}async function Ej(r){dc(r).ra()}async function Ij(r){const e=dc(r);for(const t of r.Ta)e.ea(t.mutations)}async function Rj(r,e,t){const n=r.Ta.shift(),o=Lg.from(n,e,t);await Fw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Mp(r)}async function Pj(r,e){e&&dc(r).X_&&await(async function(n,o){if((function(c){return fk(c)&&c!==Ue.ABORTED})(o.code)){const a=n.Ta.shift();dc(n).B_(),await Fw(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Mp(n)}})(r,e),zw(r)&&Ow(r)}async function Yy(r,e){const t=tr(r);t.asyncQueue.verifyOperationInProgress(),ct(Xc,"RemoteStore received new credentials");const n=ou(t);t.Ea.add(3),await Eh(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Vp(t)}async function Nj(r,e){const t=tr(r);e?(t.Ea.delete(2),await Vp(t)):e||(t.Ea.add(2),await Eh(t),t.Ra.set("Unknown"))}function pd(r){return r.ma||(r.ma=(function(t,n,o){const a=tr(t);return a.sa(),new yj(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(r.datastore,r.asyncQueue,{Xo:_j.bind(null,r),t_:Tj.bind(null,r),r_:Cj.bind(null,r),H_:Aj.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),qg(r)?Ug(r):r.Ra.set("Unknown")):(await r.ma.stop(),Lw(r))}))),r.ma}function dc(r){return r.fa||(r.fa=(function(t,n,o){const a=tr(t);return a.sa(),new xj(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ej.bind(null,r),r_:Pj.bind(null,r),ta:Ij.bind(null,r),na:Rj.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Mp(r)):(await r.fa.stop(),r.Ta.length>0&&(ct(Xc,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,t,n,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=o,this.removalCallback=a,this.deferred=new nc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,o,a){const c=Date.now()+n,u=new Hg(e,t,c,o,a);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new it(Ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gg(r,e){if(ml("AsyncQueue",`${e}: ${r}`),hd(r))return new it(Ue.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{static emptySet(e){return new Ku(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Et.comparator(t.key,n.key):(t,n)=>Et.comparator(t.key,n.key),this.keyedMap=Gd(),this.sortedSet=new Tn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ku)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=n.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Ku;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(){this.ga=new Tn(Et.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ht(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class nd{constructor(e,t,n,o,a,c,u,f,d){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=o,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(e,t,n,o,a){const c=[];return t.forEach((u=>{c.push({type:0,doc:u})})),new nd(e,t,Ku.emptySet(t),c,n,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Np(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==n[o].type||!t[o].doc.isEqual(n[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Lj{constructor(){this.queries=Xy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const o=tr(t),a=o.queries;o.queries=Xy(),a.forEach(((c,u)=>{for(const f of u.Sa)f.onError(n)}))})(this,new it(Ue.ABORTED,"Firestore shutting down"))}}function Xy(){return new iu((r=>ow(r)),Np)}async function Fj(r,e){const t=tr(r);let n=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(n=2):(a=new Bj,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const u=Gg(c,`Initialization of query '${Fu(e.query)}' failed`);return void e.onError(u)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Kg(t)}async function zj(r,e){const t=tr(r),n=e.query;let o=3;const a=t.queries.get(n);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function Oj(r,e){const t=tr(r);let n=!1;for(const o of e){const a=o.query,c=t.queries.get(a);if(c){for(const u of c.Sa)u.Fa(o)&&(n=!0);c.wa=o}}n&&Kg(t)}function Vj(r,e,t){const n=tr(r),o=n.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);n.queries.delete(e)}function Kg(r){r.Ca.forEach((e=>{e.next()}))}var tg,Zy;(Zy=tg||(tg={})).Ma="default",Zy.Cache="cache";class Mj{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const o of e.docChanges)o.type!==3&&n.push(o);e=new nd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=nd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==tg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e){this.key=e}}class Mw{constructor(e){this.key=e}}class Dj{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=gr(),this.mutatedKeys=gr(),this.eu=sw(e),this.tu=new Ku(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Qy,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,c=o,u=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,d=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((y,w)=>{const C=o.get(y),v=Bp(this.query,w)?w:null,B=!!C&&this.mutatedKeys.has(C.key),I=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let z=!1;C&&v?C.data.isEqual(v.data)?B!==I&&(n.track({type:3,doc:v}),z=!0):this.su(C,v)||(n.track({type:2,doc:v}),z=!0,(f&&this.eu(v,f)>0||d&&this.eu(v,d)<0)&&(u=!0)):!C&&v?(n.track({type:0,doc:v}),z=!0):C&&!v&&(n.track({type:1,doc:C}),z=!0,(f||d)&&(u=!0)),z&&(v?(c=c.add(v),a=I?a.add(y):a.delete(y)):(c=c.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),a=a.delete(y.key),n.track({type:1,doc:y})}return{tu:c,iu:n,Cs:u,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,w)=>(function(v,B){const I=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ht(20277,{Rt:z})}};return I(v)-I(B)})(y.type,w.type)||this.eu(y.doc,w.doc))),this.ou(n),o=o??!1;const u=t&&!o?this._u():[],f=this.Xa.size===0&&this.current&&!o?1:0,d=f!==this.Za;return this.Za=f,c.length!==0||d?{snapshot:new nd(this.query,e.tu,a,c,e.mutatedKeys,f===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Qy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=gr(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new Mw(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new Vw(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=gr();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return nd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Jg="SyncEngine";class Wj{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class $j{constructor(e){this.key=e,this.hu=!1}}class Uj{constructor(e,t,n,o,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new iu((u=>ow(u)),Np),this.Iu=new Map,this.Eu=new Set,this.du=new Tn(Et.comparator),this.Au=new Map,this.Ru=new Og,this.Vu={},this.mu=new Map,this.fu=rd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function qj(r,e,t=!0){const n=Hw(r);let o;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await Dw(n,e,t,!0),o}async function Hj(r,e){const t=Hw(r);await Dw(t,e,!0,!1)}async function Dw(r,e,t,n){const o=await cj(r.localStore,Pa(e)),a=o.targetId,c=r.sharedClientState.addLocalQueryTarget(a,t);let u;return n&&(u=await Gj(r,e,a,c==="current",o.resumeToken)),r.isPrimaryClient&&t&&Nw(r.remoteStore,o),u}async function Gj(r,e,t,n,o){r.pu=(w,C,v)=>(async function(I,z,A,M){let U=z.view.ru(A);U.Cs&&(U=await qy(I.localStore,z.query,!1).then((({documents:L})=>z.view.ru(L,U))));const F=M&&M.targetChanges.get(z.targetId),se=M&&M.targetMismatches.get(z.targetId)!=null,ue=z.view.applyChanges(U,I.isPrimaryClient,F,se);return tx(I,z.targetId,ue.au),ue.snapshot})(r,w,C,v);const a=await qy(r.localStore,e,!0),c=new Dj(e,a.Qs),u=c.ru(a.documents),f=jh.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",o),d=c.applyChanges(u,r.isPrimaryClient,f);tx(r,t,d.au);const y=new Wj(e,t,c);return r.Tu.set(e,y),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),d.snapshot}async function Kj(r,e,t){const n=tr(r),o=n.Tu.get(e),a=n.Iu.get(o.targetId);if(a.length>1)return n.Iu.set(o.targetId,a.filter((c=>!Np(c,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||await Zm(n.localStore,o.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(o.targetId),t&&Wg(n.remoteStore,o.targetId),rg(n,o.targetId)})).catch(dd)):(rg(n,o.targetId),await Zm(n.localStore,o.targetId,!0))}async function Jj(r,e){const t=tr(r),n=t.Tu.get(e),o=t.Iu.get(n.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Wg(t.remoteStore,n.targetId))}async function Yj(r,e,t){const n=nE(r);try{const o=await(function(c,u){const f=tr(c),d=nn.now(),y=u.reduce(((v,B)=>v.add(B.key)),gr());let w,C;return f.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let B=gl(),I=gr();return f.Ns.getEntries(v,y).next((z=>{B=z,B.forEach(((A,M)=>{M.isValidDocument()||(I=I.add(A))}))})).next((()=>f.localDocuments.getOverlayedDocuments(v,B))).next((z=>{w=z;const A=[];for(const M of u){const U=lk(M,w.get(M.key).overlayedDocument);U!=null&&A.push(new gc(M.key,U,Yb(U.value.mapValue),ra.exists(!0)))}return f.mutationQueue.addMutationBatch(v,d,A,u)})).next((z=>{C=z;const A=z.applyToLocalDocumentSet(w,I);return f.documentOverlayCache.saveOverlays(v,z.batchId,A)}))})).then((()=>({batchId:C.batchId,changes:lw(w)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(o.batchId),(function(c,u,f){let d=c.Vu[c.currentUser.toKey()];d||(d=new Tn(mr)),d=d.insert(u,f),c.Vu[c.currentUser.toKey()]=d})(n,o.batchId,t),await Ih(n,o.changes),await Mp(n.remoteStore)}catch(o){const a=Gg(o,"Failed to persist write");t.reject(a)}}async function Ww(r,e){const t=tr(r);try{const n=await sj(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const c=t.Au.get(a);c&&(Br(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Br(c.hu,14607):o.removedDocuments.size>0&&(Br(c.hu,42227),c.hu=!1))})),await Ih(t,n,e)}catch(n){await dd(n)}}function ex(r,e,t){const n=tr(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const o=[];n.Tu.forEach(((a,c)=>{const u=c.view.va(e);u.snapshot&&o.push(u.snapshot)})),(function(c,u){const f=tr(c);f.onlineState=u;let d=!1;f.queries.forEach(((y,w)=>{for(const C of w.Sa)C.va(u)&&(d=!0)})),d&&Kg(f)})(n.eventManager,e),o.length&&n.Pu.H_(o),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Qj(r,e,t){const n=tr(r);n.sharedClientState.updateQueryState(e,"rejected",t);const o=n.Au.get(e),a=o&&o.key;if(a){let c=new Tn(Et.comparator);c=c.insert(a,ao.newNoDocument(a,Qt.min()));const u=gr().add(a),f=new zp(Qt.min(),new Map,new Tn(mr),c,u);await Ww(n,f),n.du=n.du.remove(a),n.Au.delete(e),Yg(n)}else await Zm(n.localStore,e,!1).then((()=>rg(n,e,t))).catch(dd)}async function Xj(r,e){const t=tr(r),n=e.batch.batchId;try{const o=await oj(t.localStore,e);Uw(t,n,null),$w(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Ih(t,o)}catch(o){await dd(o)}}async function Zj(r,e,t){const n=tr(r);try{const o=await(function(c,u){const f=tr(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let y;return f.mutationQueue.lookupMutationBatch(d,u).next((w=>(Br(w!==null,37113),y=w.keys(),f.mutationQueue.removeMutationBatch(d,w)))).next((()=>f.mutationQueue.performConsistencyCheck(d))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(d,y,u))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,y))).next((()=>f.localDocuments.getDocuments(d,y)))}))})(n.localStore,e);Uw(n,e,t),$w(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Ih(n,o)}catch(o){await dd(o)}}function $w(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Uw(r,e,t){const n=tr(r);let o=n.Vu[n.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),n.Vu[n.currentUser.toKey()]=o}}function rg(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||qw(r,n)}))}function qw(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Wg(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Yg(r))}function tx(r,e,t){for(const n of t)n instanceof Vw?(r.Ru.addReference(n.key,e),eE(r,n)):n instanceof Mw?(ct(Jg,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||qw(r,n.key)):Ht(19791,{wu:n})}function eE(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(ct(Jg,"New document in limbo: "+t),r.Eu.add(n),Yg(r))}function Yg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Et(tn.fromString(e)),n=r.fu.next();r.Au.set(n,new $j(t)),r.du=r.du.insert(t,n),Nw(r.remoteStore,new Xl(Pa(nw(t.path)),n,"TargetPurposeLimboResolution",Ip.ce))}}async function Ih(r,e,t){const n=tr(r),o=[],a=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,f)=>{c.push(n.pu(f,e,t).then((d=>{var y;if((d||t)&&n.isPrimaryClient){const w=d?!d.fromCache:(y=t==null?void 0:t.targetChanges.get(f.targetId))==null?void 0:y.current;n.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(d){o.push(d);const w=Mg.As(f.targetId,d);a.push(w)}})))})),await Promise.all(c),n.Pu.H_(o),await(async function(f,d){const y=tr(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>Ge.forEach(d,(C=>Ge.forEach(C.Es,(v=>y.persistence.referenceDelegate.addReference(w,C.targetId,v))).next((()=>Ge.forEach(C.ds,(v=>y.persistence.referenceDelegate.removeReference(w,C.targetId,v)))))))))}catch(w){if(!hd(w))throw w;ct(Dg,"Failed to update sequence numbers: "+w)}for(const w of d){const C=w.targetId;if(!w.fromCache){const v=y.Ms.get(C),B=v.snapshotVersion,I=v.withLastLimboFreeSnapshotVersion(B);y.Ms=y.Ms.insert(C,I)}}})(n.localStore,a))}async function tE(r,e){const t=tr(r);if(!t.currentUser.isEqual(e)){ct(Jg,"User change. New user:",e.toKey());const n=await Ew(t.localStore,e);t.currentUser=e,(function(a,c){a.mu.forEach((u=>{u.forEach((f=>{f.reject(new it(Ue.CANCELLED,c))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ih(t,n.Ls)}}function rE(r,e){const t=tr(r),n=t.Au.get(e);if(n&&n.hu)return gr().add(n.key);{let o=gr();const a=t.Iu.get(e);if(!a)return o;for(const c of a){const u=t.Tu.get(c);o=o.unionWith(u.view.nu)}return o}}function Hw(r){const e=tr(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ww.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Qj.bind(null,e),e.Pu.H_=Oj.bind(null,e.eventManager),e.Pu.yu=Vj.bind(null,e.eventManager),e}function nE(r){const e=tr(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zj.bind(null,e),e}class vp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Op(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ij(this.persistence,new tj,e.initialUser,this.serializer)}Cu(e){return new jw(Vg.mi,this.serializer)}Du(e){return new dj}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vp.provider={build:()=>new vp};class iE extends vp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Br(this.persistence.referenceDelegate instanceof yp,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Mk(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Mo.withCacheSize(this.cacheSizeBytes):Mo.DEFAULT;return new jw((n=>yp.mi(n,t)),this.serializer)}}class ng{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>ex(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=tE.bind(null,this.syncEngine),await Nj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Lj})()}createDatastore(e){const t=Op(e.databaseInfo.databaseId),n=(function(a){return new gj(a)})(e.databaseInfo);return(function(a,c,u,f){return new bj(a,c,u,f)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,o,a,c,u){return new Sj(n,o,a,c,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>ex(this.syncEngine,t,0)),(function(){return Ky.v()?new Ky:new hj})())}createSyncEngine(e,t){return(function(o,a,c,u,f,d,y){const w=new Uj(o,a,c,u,f,d);return y&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=tr(o);ct(Xc,"RemoteStore shutting down."),a.Ea.add(5),await Eh(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ng.provider={build:()=>new ng};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ml("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc="FirestoreClient";class sE{constructor(e,t,n,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=o,this.user=so.UNAUTHENTICATED,this.clientId=kg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async c=>{ct(hc,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(n,(c=>(ct(hc,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new nc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Gg(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function gm(r,e){r.asyncQueue.verifyOperationInProgress(),ct(hc,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async o=>{n.isEqual(o)||(await Ew(e.localStore,o),n=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function rx(r,e){r.asyncQueue.verifyOperationInProgress();const t=await aE(r);ct(hc,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>Yy(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,o)=>Yy(e.remoteStore,o))),r._onlineComponents=e}async function aE(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ct(hc,"Using user provided OfflineComponentProvider");try{await gm(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Ue.FAILED_PRECONDITION||o.code===Ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Xu("Error using user provided cache. Falling back to memory cache: "+t),await gm(r,new vp)}}else ct(hc,"Using default OfflineComponentProvider"),await gm(r,new iE(void 0));return r._offlineComponents}async function Gw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ct(hc,"Using user provided OnlineComponentProvider"),await rx(r,r._uninitializedComponentsProvider._online)):(ct(hc,"Using default OnlineComponentProvider"),await rx(r,new ng))),r._onlineComponents}function lE(r){return Gw(r).then((e=>e.syncEngine))}async function cE(r){const e=await Gw(r),t=e.eventManager;return t.onListen=qj.bind(null,e.syncEngine),t.onUnlisten=Kj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Hj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Jj.bind(null,e.syncEngine),t}function uE(r,e,t={}){const n=new nc;return r.asyncQueue.enqueueAndForget((async()=>(function(a,c,u,f,d){const y=new oE({next:C=>{y.Nu(),c.enqueueAndForget((()=>zj(a,w))),C.fromCache&&f.source==="server"?d.reject(new it(Ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(C)},error:C=>d.reject(C)}),w=new Mj(u,y,{includeMetadataChanges:!0,qa:!0});return Fj(a,w)})(await cE(r),r.asyncQueue,e,t,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="firestore.googleapis.com",ix=!0;class ox{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new it(Ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jw,this.ssl=ix}else this.host=e.host,this.ssl=e.ssl??ix;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ok)throw new it(Ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}w8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kw(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new it(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new it(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new it(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,o){return n.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dp{constructor(e,t,n,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ox({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new it(Ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new it(Ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ox(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new d8;switch(n.type){case"firstParty":return new m8(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new it(Ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=nx.get(t);n&&(ct("ComponentProvider","Removing Datastore"),nx.delete(t),n.terminate())})(this),Promise.resolve()}}function dE(r,e,t,n={}){var d;r=Qc(r,Dp);const o=ad(e),a=r._getSettings(),c={...a,emulatorOptions:r._getEmulatorOptions()},u=`${e}:${t}`;o&&($v(`https://${u}`),Uv("Firestore",!0)),a.host!==Jw&&a.host!==u&&Xu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:u,ssl:o,emulatorOptions:n};if(!Hc(f,c)&&(r._setSettings(f),n.mockUserToken)){let y,w;if(typeof n.mockUserToken=="string")y=n.mockUserToken,w=so.MOCK_USER;else{y=S6(n.mockUserToken,(d=r._app)==null?void 0:d.options.projectId);const C=n.mockUserToken.sub||n.mockUserToken.user_id;if(!C)throw new it(Ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new so(C)}r._authCredentials=new h8(new Ob(y,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new su(this.firestore,e,this._query)}}class ai{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ic(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ai(this.firestore,e,this._key)}toJSON(){return{type:ai._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Ah(t,ai._jsonSchema))return new ai(e,n||null,new Et(tn.fromString(t.referencePath)))}}ai._jsonSchemaVersion="firestore/documentReference/1.0",ai._jsonSchema={type:ei("string",ai._jsonSchemaVersion),referencePath:ei("string")};class ic extends su{constructor(e,t,n){super(e,t,nw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ai(this.firestore,null,new Et(e))}withConverter(e){return new ic(this.firestore,e,this._path)}}function Rh(r,e,...t){if(r=Ai(r),Vb("collection","path",e),r instanceof Dp){const n=tn.fromString(e,...t);return xy(n),new ic(r,null,n)}{if(!(r instanceof ai||r instanceof ic))throw new it(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(tn.fromString(e,...t));return xy(n),new ic(r.firestore,null,n)}}function md(r,e,...t){if(r=Ai(r),arguments.length===1&&(e=kg.newId()),Vb("doc","path",e),r instanceof Dp){const n=tn.fromString(e,...t);return yy(n),new ai(r,null,new Et(n))}{if(!(r instanceof ai||r instanceof ic))throw new it(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(tn.fromString(e,...t));return yy(n),new ai(r.firestore,r instanceof ic?r.converter:null,new Et(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="AsyncQueue";class ax{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Rw(this,"async_queue_retry"),this._c=()=>{const n=mm();n&&ct(sx,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=mm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=mm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new nc;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!hd(e))throw e;ct(sx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,ml("INTERNAL UNHANDLED ERROR: ",lx(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Hg.createAndSchedule(this,e,t,n,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&Ht(47125,{Pc:lx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function lx(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Ph extends Dp{constructor(e,t,n,o){super(e,t,n,o),this.type="firestore",this._queue=new ax,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ax(e),this._firestoreClient=void 0,await e}}}function hE(r,e){const t=typeof r=="object"?r:Kv(),n=typeof r=="string"?r:hp,o=yg(t,"firestore").getImmediate({identifier:n});if(!o._initialized){const a=b6("firestore");a&&dE(o,...a)}return o}function Yw(r){if(r._terminated)throw new it(Ue.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||fE(r),r._firestoreClient}function fE(r){var n,o,a;const e=r._freezeSettings(),t=(function(u,f,d,y){return new P8(u,f,d,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,Kw(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(r._databaseId,((n=r._app)==null?void 0:n.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new sE(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(u){const f=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(f),_online:f}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rs(Mi.fromBase64String(e))}catch(t){throw new it(Ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rs(Mi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ah(e,Rs._jsonSchema))return Rs.fromBase64String(e.bytes)}}Rs._jsonSchemaVersion="firestore/bytes/1.0",Rs._jsonSchema={type:ei("string",Rs._jsonSchemaVersion),bytes:ei("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new it(Ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new it(Ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new it(Ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mr(this._lat,e._lat)||mr(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ba._jsonSchemaVersion}}static fromJSON(e){if(Ah(e,Ba._jsonSchema))return new Ba(e.latitude,e.longitude)}}Ba._jsonSchemaVersion="firestore/geoPoint/1.0",Ba._jsonSchema={type:ei("string",Ba._jsonSchemaVersion),latitude:ei("number"),longitude:ei("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,o){if(n.length!==o.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:La._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ah(e,La._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new La(e.vectorValues);throw new it(Ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}La._jsonSchemaVersion="firestore/vectorValue/1.0",La._jsonSchema={type:ei("string",La._jsonSchemaVersion),vectorValues:ei("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=/^__.*__$/;class mE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new gc(e,this.data,this.fieldMask,t,this.fieldTransforms):new kh(e,this.data,t,this.fieldTransforms)}}class Qw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new gc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Xw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ht(40011,{Ac:r})}}class Qg{constructor(e,t,n,o,a,c){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Qg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return bp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Xw(this.Ac)&&pE.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class gE{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Op(e)}Cc(e,t,n,o=!1){return new Qg({Ac:e,methodName:t,Dc:n,path:Vi.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xg(r){const e=r._freezeSettings(),t=Op(r._databaseId);return new gE(r._databaseId,!!e.ignoreUndefinedProperties,t)}function yE(r,e,t,n,o,a={}){const c=r.Cc(a.merge||a.mergeFields?2:0,e,t,o);e1("Data must be an object, but it was:",c,n);const u=Zw(n,c);let f,d;if(a.merge)f=new ls(c.fieldMask),d=c.fieldTransforms;else if(a.mergeFields){const y=[];for(const w of a.mergeFields){const C=ig(e,w,t);if(!c.contains(C))throw new it(Ue.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);tS(y,C)||y.push(C)}f=new ls(y),d=c.fieldTransforms.filter((w=>f.covers(w.field)))}else f=null,d=c.fieldTransforms;return new mE(new Do(u),f,d)}class Up extends $p{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Up}}class Zg extends $p{_toFieldTransform(e){return new ik(e.path,new mh)}isEqual(e){return e instanceof Zg}}function xE(r,e,t,n){const o=r.Cc(1,e,t);e1("Data must be an object, but it was:",o,n);const a=[],c=Do.empty();mc(n,((f,d)=>{const y=t1(e,f,t);d=Ai(d);const w=o.yc(y);if(d instanceof Up)a.push(y);else{const C=Nh(d,w);C!=null&&(a.push(y),c.set(y,C))}}));const u=new ls(a);return new Qw(c,u,o.fieldTransforms)}function vE(r,e,t,n,o,a){const c=r.Cc(1,e,t),u=[ig(e,n,t)],f=[o];if(a.length%2!=0)throw new it(Ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<a.length;C+=2)u.push(ig(e,a[C])),f.push(a[C+1]);const d=[],y=Do.empty();for(let C=u.length-1;C>=0;--C)if(!tS(d,u[C])){const v=u[C];let B=f[C];B=Ai(B);const I=c.yc(v);if(B instanceof Up)d.push(v);else{const z=Nh(B,I);z!=null&&(d.push(v),y.set(v,z))}}const w=new ls(d);return new Qw(y,w,c.fieldTransforms)}function bE(r,e,t,n=!1){return Nh(t,r.Cc(n?4:3,e))}function Nh(r,e){if(eS(r=Ai(r)))return e1("Unsupported field value:",e,r),Zw(r,e);if(r instanceof $p)return(function(n,o){if(!Xw(o.Ac))throw o.Sc(`${n._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,o){const a=[];let c=0;for(const u of n){let f=Nh(u,o.wc(c));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),c++}return{arrayValue:{values:a}}})(r,e)}return(function(n,o){if((n=Ai(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return tk(o.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=nn.fromDate(n);return{timestampValue:gp(o.serializer,a)}}if(n instanceof nn){const a=new nn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:gp(o.serializer,a)}}if(n instanceof Ba)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Rs)return{bytesValue:bw(o.serializer,n._byteString)};if(n instanceof ai){const a=o.databaseId,c=n.firestore._databaseId;if(!c.isEqual(a))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:zg(n.firestore._databaseId||o.databaseId,n._key.path)}}if(n instanceof La)return(function(c,u){return{mapValue:{fields:{[Kb]:{stringValue:Jb},[fp]:{arrayValue:{values:c.toArray().map((d=>{if(typeof d!="number")throw u.Sc("VectorValues must only contain numeric values.");return Ng(u.serializer,d)}))}}}}}})(n,o);throw o.Sc(`Unsupported field value: ${Ep(n)}`)})(r,e)}function Zw(r,e){const t={};return Wb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mc(r,((n,o)=>{const a=Nh(o,e.mc(n));a!=null&&(t[n]=a)})),{mapValue:{fields:t}}}function eS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof nn||r instanceof Ba||r instanceof Rs||r instanceof ai||r instanceof $p||r instanceof La)}function e1(r,e,t){if(!eS(t)||!Mb(t)){const n=Ep(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function ig(r,e,t){if((e=Ai(e))instanceof Wp)return e._internalPath;if(typeof e=="string")return t1(r,e);throw bp("Field path arguments must be of type string or ",r,!1,void 0,t)}const wE=new RegExp("[~\\*/\\[\\]]");function t1(r,e,t){if(e.search(wE)>=0)throw bp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Wp(...e.split("."))._internalPath}catch{throw bp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function bp(r,e,t,n,o){const a=n&&!n.isEmpty(),c=o!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(a||c)&&(f+=" (found",a&&(f+=` in field ${n}`),c&&(f+=` in document ${o}`),f+=")"),new it(Ue.INVALID_ARGUMENT,u+r+f)}function tS(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,t,n,o,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ai(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class SE extends rS{data(){return super.data()}}function qp(r,e){return typeof e=="string"?t1(r,e):e instanceof Wp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new it(Ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r1{}class nS extends r1{}function iS(r,e,...t){let n=[];e instanceof r1&&n.push(e),n=n.concat(t),(function(a){const c=a.filter((f=>f instanceof n1)).length,u=a.filter((f=>f instanceof Hp)).length;if(c>1||c>0&&u>0)throw new it(Ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const o of n)r=o._apply(r);return r}class Hp extends nS{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Hp(e,t,n)}_apply(e){const t=this._parse(e);return oS(e._query,t),new su(e.firestore,e.converter,Gm(e._query,t))}_parse(e){const t=Xg(e.firestore);return(function(a,c,u,f,d,y,w){let C;if(d.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new it(Ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){ux(w,y);const B=[];for(const I of w)B.push(cx(f,a,I));C={arrayValue:{values:B}}}else C=cx(f,a,w)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||ux(w,y),C=bE(u,c,w,y==="in"||y==="not-in");return Zn.create(d,y,C)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function TE(r,e,t){const n=e,o=qp("where",r);return Hp._create(o,n,t)}class n1 extends r1{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n1(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:sa.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let c=o;const u=a.getFlattenedFilters();for(const f of u)oS(c,f),c=Gm(c,f)})(e._query,t),new su(e.firestore,e.converter,Gm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class i1 extends nS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new i1(e,t)}_apply(e){const t=(function(o,a,c){if(o.startAt!==null)throw new it(Ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new it(Ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ph(a,c)})(e._query,this._field,this._direction);return new su(e.firestore,e.converter,(function(o,a){const c=o.explicitOrderBy.concat([a]);return new fd(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function CE(r,e="asc"){const t=e,n=qp("orderBy",r);return i1._create(n,t)}function cx(r,e,t){if(typeof(t=Ai(t))=="string"){if(t==="")throw new it(Ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iw(e)&&t.indexOf("/")!==-1)throw new it(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(tn.fromString(t));if(!Et.isDocumentKey(n))throw new it(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Ay(r,new Et(n))}if(t instanceof ai)return Ay(r,t._key);throw new it(Ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ep(t)}.`)}function ux(r,e){if(!Array.isArray(r)||r.length===0)throw new it(Ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oS(r,e){const t=(function(o,a){for(const c of o)for(const u of c.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new it(Ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new it(Ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class AE{convertValue(e,t="none"){switch(uc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ht(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return mc(e,((o,a)=>{n[o]=this.convertValue(a,t)})),n}convertVectorValue(e){var n,o,a;const t=(a=(o=(n=e.fields)==null?void 0:n[fp].arrayValue)==null?void 0:o.values)==null?void 0:a.map((c=>Dn(c.doubleValue)));return new La(t)}convertGeoPoint(e){return new Ba(Dn(e.latitude),Dn(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Pp(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(dh(e));default:return null}}convertTimestamp(e){const t=lc(e);return new nn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=tn.fromString(e);Br(Aw(n),9688,{name:e});const o=new hh(n.get(1),n.get(3)),a=new Et(n.popFirst(5));return o.isEqual(t)||ml(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(r,e,t){let n;return n=r?r.toFirestore(e):e,n}class Pf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ju extends rS{constructor(e,t,n,o,a,c){super(e,t,n,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(qp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new it(Ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ju._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ju._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ju._jsonSchema={type:ei("string",Ju._jsonSchemaVersion),bundleSource:ei("string","DocumentSnapshot"),bundleName:ei("string"),bundle:ei("string")};class Jf extends Ju{data(e={}){return super.data(e)}}class Yu{constructor(e,t,n,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Pf(o.hasPendingWrites,o.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Jf(this._firestore,this._userDataWriter,n.key,n,new Pf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new it(Ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((u=>{const f=new Jf(o._firestore,o._userDataWriter,u.doc.key,u.doc,new Pf(o._snapshot.mutatedKeys.has(u.doc.key),o._snapshot.fromCache),o.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((u=>a||u.type!==3)).map((u=>{const f=new Jf(o._firestore,o._userDataWriter,u.doc.key,u.doc,new Pf(o._snapshot.mutatedKeys.has(u.doc.key),o._snapshot.fromCache),o.query.converter);let d=-1,y=-1;return u.type!==0&&(d=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),y=c.indexOf(u.doc.key)),{type:jE(u.type),doc:f,oldIndex:d,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new it(Ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Yu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jE(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ht(61501,{type:r})}}Yu._jsonSchemaVersion="firestore/querySnapshot/1.0",Yu._jsonSchema={type:ei("string",Yu._jsonSchemaVersion),bundleSource:ei("string","QuerySnapshot"),bundleName:ei("string"),bundle:ei("string")};class EE extends AE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ai(this.firestore,null,t)}}function sS(r){r=Qc(r,su);const e=Qc(r.firestore,Ph),t=Yw(e),n=new EE(e);return _E(r._query),uE(t,r._query).then((o=>new Yu(e,n,r,o)))}function aS(r,e,t,...n){r=Qc(r,ai);const o=Qc(r.firestore,Ph),a=Xg(o);let c;return c=typeof(e=Ai(e))=="string"||e instanceof Wp?vE(a,"updateDoc",r._key,e,t,n):xE(a,"updateDoc",r._key,e),s1(o,[c.toMutation(r._key,ra.exists(!0))])}function lS(r){return s1(Qc(r.firestore,Ph),[new Bg(r._key,ra.none())])}function o1(r,e){const t=Qc(r.firestore,Ph),n=md(r),o=kE(r.converter,e);return s1(t,[yE(Xg(r.firestore),"addDoc",n._key,o,r.converter!==null,{}).toMutation(n._key,ra.exists(!1))]).then((()=>n))}function s1(r,e){return(function(n,o){const a=new nc;return n.asyncQueue.enqueueAndForget((async()=>Yj(await lE(n),o,a))),a.promise})(Yw(r),e)}function id(){return new Zg("serverTimestamp")}(function(e,t=!0){(function(o){ud=o})(ld),Qu(new Gc("firestore",((n,{instanceIdentifier:o,options:a})=>{const c=n.getProvider("app").getImmediate(),u=new Ph(new f8(n.getProvider("auth-internal")),new g8(c,n.getProvider("app-check-internal")),(function(d,y){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new it(Ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hh(d.options.projectId,y)})(c,o),c);return a={useFetchStreams:t,...a},u._setSettings(a),u}),"PUBLIC").setMultipleInstances(!0)),tc(fy,py,e),tc(fy,py,"esm2020")})();const IE={apiKey:"AIzaSyCyIga2EWsEZLqApS633i9uRIy5p745EJg",authDomain:"electrician-toolkit-33497.firebaseapp.com",projectId:"electrician-toolkit-33497",storageBucket:"electrician-toolkit-33497.firebasestorage.app",messagingSenderId:"878846360709",appId:"1:878846360709:web:af750d7f4d2a9495b17dec",measurementId:"G-JWZ1TDP25R"},cS=Gv(IE),ti=c8(cS),xl=hE(cS),au=async()=>{var r;try{const e=(r=ti.currentUser)==null?void 0:r.uid;if(!e)throw new Error("User not authenticated");const t=Rh(xl,"users",e,"jobs"),n=iS(t,CE("createdAt","desc"));return(await sS(n)).docs.map(a=>({id:a.id,...a.data()}))}catch(e){throw console.error("Error fetching jobs:",e),e}},Bh=async(r,e)=>{var t;try{const n=(t=ti.currentUser)==null?void 0:t.uid;if(!n)throw new Error("User not authenticated");const o=md(xl,"users",n,"jobs",r),a=Rh(o,"calculations"),c={...e,createdAt:id()};return(await o1(a,c)).id}catch(n){throw console.error("Error adding calculation:",n),n}},og=async r=>{var e;try{console.log("🔍 Starting createJob..."),console.log("auth:",ti),console.log("auth.currentUser:",ti.currentUser);const t=(e=ti.currentUser)==null?void 0:e.uid;if(console.log("userId extracted:",t),!t)throw console.error("❌ No userId - auth.currentUser is:",ti.currentUser),new Error("User not authenticated");console.log("✅ User authenticated with ID:",t);const n=Rh(xl,"users",t,"jobs"),o={...r,createdAt:id(),status:r.status||"active"};console.log("📝 Attempting to save job:",o);const a=await o1(n,o);return console.log("✅ Job created with ID:",a.id),a.id}catch(t){throw console.error("❌ Error in createJob:",t),t}},uS=async r=>{var e;try{const t=(e=ti.currentUser)==null?void 0:e.uid;if(!t)throw new Error("User not authenticated");const n=md(xl,"users",t,"jobs",r);await lS(n)}catch(t){throw console.error("Error deleting job:",t),t}},RE=async(r,e)=>{var t;try{const n=(t=ti.currentUser)==null?void 0:t.uid;if(!n)throw new Error("User not authenticated");const o=md(xl,"users",n,"jobs",r);await aS(o,{...e,updatedAt:id()})}catch(n){throw console.error("Error updating job:",n),n}},dx=Object.freeze(Object.defineProperty({__proto__:null,addCalculationToJob:Bh,createJob:og,deleteJob:uS,getUserJobs:au,updateJob:RE},Symbol.toStringTag,{value:"Module"})),PE=me.forwardRef(({isDarkMode:r=!1,onExportSuccess:e},t)=>{const[n,o]=me.useState(""),[a,c]=me.useState(""),[u,f]=me.useState(""),[d,y]=me.useState("12"),[w,C]=me.useState("single"),[v,B]=me.useState("copper"),[I,z]=me.useState("1.0"),[A,M]=me.useState(!1),[U,F]=me.useState([]),[se,ue]=me.useState(!1),L={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},j={14:4110,12:6530,10:10380,8:16510,6:26240,4:41740,3:52620,2:66360,1:83690,"1/0":105600,"2/0":133100,"3/0":167800,"4/0":211600,250:25e4,300:3e5,350:35e4,400:4e5,500:5e5,600:6e5,750:75e4,1e3:1e6},T={copper:{dc:10.8,ac:12.9},aluminum:{dc:17.4,ac:21.2}},k=(()=>{if(!n||!a||!u)return{drop:"0.00",percentage:"0.00",excessive:!1};const q=parseFloat(n),ie=parseFloat(a),oe=parseFloat(u),ne=j[d],ve=parseFloat(I),be=T[v].ac;let Z;w==="single"?Z=2*be*ie*oe*ve/ne:Z=1.732*be*ie*oe*ve/ne;const W=Z/q*100,J=W>3;return{drop:Z.toFixed(2),percentage:W.toFixed(2),excessive:J}})(),b=async()=>{M(!0),ue(!0);try{const q=await au();F(q)}catch(q){console.error("Error loading jobs:",q),alert("Failed to load jobs. Please try again.")}finally{ue(!1)}},N=async q=>{try{const ie={type:"voltage-drop",data:{voltage:parseFloat(n),current:parseFloat(a),distance:parseFloat(u),wireSize:d,phaseType:w,conductorType:v,powerFactor:parseFloat(I),results:{voltageDrop:k.drop,percentageDrop:k.percentage,excessive:k.excessive}}};await Bh(q,ie),M(!1),alert("Calculation attached to job successfully!")}catch(ie){console.error("Error attaching calculation:",ie),alert("Failed to attach calculation. Please try again.")}},D=()=>{if(!n||!a||!u){alert("Please enter all required values before exporting to PDF");return}const q={calculatorName:"Voltage Drop Calculator",inputs:{systemType:w==="single"?"Single Phase":"Three Phase",conductorMaterial:v.charAt(0).toUpperCase()+v.slice(1),systemVoltage:`${n} V`,loadCurrent:`${a} A`,oneWayDistance:`${u} ft`,wireSize:d.includes("/")?`${d} AWG`:`${d} ${parseInt(d)<=4?"AWG":"kcmil"}`,powerFactor:I},results:{voltageDrop:`${k.drop} V`,percentageDrop:`${k.percentage}%`,necCompliant:k.excessive?"NO - Exceeds 3% limit":"YES - Within 3% limit",status:k.excessive?"⚠️ WARNING: Exceeds NEC 3% Limit":"✓ Within NEC limits"},additionalInfo:{formula:w==="single"?"2 × K × I × L × PF ÷ CM":"1.732 × K × I × L × PF ÷ CM",kConstant:`${T[v].ac} (${v} AC)`,circularMils:j[d].toLocaleString(),powerFactorUsed:I,systemConfiguration:w==="single"?"Single phase":"Three phase"},necReferences:["NEC Guidelines: Branch circuits - 3% max","Feeders - 3% max","Combined branch circuit and feeder - 5% max","Note: Excessive voltage drop can cause equipment malfunction and reduced efficiency"]};sn(q),e&&e()};return me.useImperativeHandle(t,()=>({exportPDF:D})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:L.cardBg,border:`1px solid ${L.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:L.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${L.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:L.labelText,marginBottom:"0.5rem"},children:"System Type"}),i.jsxs("select",{value:w,onChange:q=>C(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${L.inputBorder}`,borderRadius:"8px",backgroundColor:L.inputBg,color:L.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:L.labelText,marginBottom:"0.5rem"},children:"Conductor Material"}),i.jsxs("select",{value:v,onChange:q=>B(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${L.inputBorder}`,borderRadius:"8px",backgroundColor:L.inputBg,color:L.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"copper",children:"Copper"}),i.jsx("option",{value:"aluminum",children:"Aluminum"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:L.labelText,marginBottom:"0.5rem"},children:"System Voltage (V)"}),i.jsx("input",{type:"number",value:n,onChange:q=>o(q.target.value),placeholder:"120, 240, 480",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${L.inputBorder}`,borderRadius:"8px",backgroundColor:L.inputBg,color:L.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:L.labelText,marginBottom:"0.5rem"},children:"Load Current (Amps)"}),i.jsx("input",{type:"number",value:a,onChange:q=>c(q.target.value),placeholder:"15, 20, 30",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${L.inputBorder}`,borderRadius:"8px",backgroundColor:L.inputBg,color:L.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:L.labelText,marginBottom:"0.5rem"},children:"One-Way Distance (feet)"}),i.jsx("input",{type:"number",value:u,onChange:q=>f(q.target.value),placeholder:"100, 200, 500",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${L.inputBorder}`,borderRadius:"8px",backgroundColor:L.inputBg,color:L.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:L.labelText,marginBottom:"0.5rem"},children:"Wire Size (AWG/kcmil)"}),i.jsxs("select",{value:d,onChange:q=>y(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${L.inputBorder}`,borderRadius:"8px",backgroundColor:L.inputBg,color:L.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"14",children:"14 AWG"}),i.jsx("option",{value:"12",children:"12 AWG"}),i.jsx("option",{value:"10",children:"10 AWG"}),i.jsx("option",{value:"8",children:"8 AWG"}),i.jsx("option",{value:"6",children:"6 AWG"}),i.jsx("option",{value:"4",children:"4 AWG"}),i.jsx("option",{value:"3",children:"3 AWG"}),i.jsx("option",{value:"2",children:"2 AWG"}),i.jsx("option",{value:"1",children:"1 AWG"}),i.jsx("option",{value:"1/0",children:"1/0 AWG"}),i.jsx("option",{value:"2/0",children:"2/0 AWG"}),i.jsx("option",{value:"3/0",children:"3/0 AWG"}),i.jsx("option",{value:"4/0",children:"4/0 AWG"}),i.jsx("option",{value:"250",children:"250 kcmil"}),i.jsx("option",{value:"300",children:"300 kcmil"}),i.jsx("option",{value:"350",children:"350 kcmil"}),i.jsx("option",{value:"400",children:"400 kcmil"}),i.jsx("option",{value:"500",children:"500 kcmil"}),i.jsx("option",{value:"600",children:"600 kcmil"}),i.jsx("option",{value:"750",children:"750 kcmil"}),i.jsx("option",{value:"1000",children:"1000 kcmil"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:L.labelText,marginBottom:"0.5rem"},children:"Power Factor (AC loads)"}),i.jsxs("select",{value:I,onChange:q=>z(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${L.inputBorder}`,borderRadius:"8px",backgroundColor:L.inputBg,color:L.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"1.0",children:"1.0 (Resistive loads)"}),i.jsx("option",{value:"0.9",children:"0.9 (Most motors)"}),i.jsx("option",{value:"0.85",children:"0.85 (Typical mixed load)"}),i.jsx("option",{value:"0.8",children:"0.8 (Poor power factor)"})]})]})]})]}),n&&a&&u&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:L.cardBg,border:`1px solid ${L.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:L.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:L.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:L.labelText,marginBottom:"0.25rem"},children:"Voltage Drop"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:L.cardText},children:k.drop}),i.jsx("div",{style:{fontSize:"0.75rem",color:L.labelText,marginTop:"0.25rem"},children:"Volts"})]}),i.jsxs("div",{style:{background:k.excessive?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:k.excessive?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Percentage Drop"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:k.excessive?"#dc2626":"#1e40af"},children:[k.percentage,"%"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:k.excessive?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:"Max: 3%"})]})]}),i.jsxs("div",{style:{background:L.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${L.cardBorder}`},children:[i.jsx("strong",{style:{color:L.cardText,display:"block",marginBottom:"0.5rem",fontSize:"0.875rem"},children:"Calculation Details:"}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:L.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Formula: ",w==="single"?"2":"1.732"," × K × I × L × PF ÷ CM"]}),i.jsxs("div",{children:["K constant (",v,"): ",T[v].ac]}),i.jsxs("div",{children:["Circular mils: ",j[d].toLocaleString()]}),i.jsxs("div",{children:["Power factor: ",I]}),i.jsxs("div",{children:["System: ",w==="single"?"Single":"Three"," phase"]})]})]})]}),k.excessive?i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(eu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem",fontSize:"0.9375rem"},children:"WARNING: Exceeds NEC 3% Limit"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Consider using larger wire size to reduce voltage drop. Excessive voltage drop can cause equipment malfunction and reduced efficiency."})]})]})}):i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Voltage drop is within NEC limits"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"This circuit meets the NEC recommended 3% maximum voltage drop for branch circuits."})]})]})}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsxs("button",{onClick:D,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:q=>q.currentTarget.style.background="#2563eb",onMouseOut:q=>q.currentTarget.style.background="#3b82f6",children:[i.jsx(wp,{size:18}),"Export to PDF"]}),i.jsxs("button",{onClick:b,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:q=>q.currentTarget.style.background="#059669",onMouseOut:q=>q.currentTarget.style.background="#10b981",children:[i.jsx(Zc,{size:18}),"Attach to Job"]})]})]}),i.jsxs("div",{style:{background:L.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${L.cardBorder}`,fontSize:"0.8125rem",color:L.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:L.cardText},children:"NEC Guidelines:"}),"Branch circuits: 3% max • Feeders: 3% max • Combined: 5% max"]}),A&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:i.jsxs("div",{style:{background:L.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[i.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:L.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),i.jsx("div",{style:{marginBottom:"1rem"},children:se?i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:L.labelText},children:"Loading jobs..."}):U&&U.length>0?U.map(q=>i.jsxs("div",{onClick:()=>N(q.id),style:{padding:"1rem",background:L.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${L.cardBorder}`,transition:"all 0.2s"},onMouseOver:ie=>ie.currentTarget.style.transform="translateY(-2px)",onMouseOut:ie=>ie.currentTarget.style.transform="translateY(0)",children:[i.jsx("div",{style:{fontWeight:"600",color:L.cardText,marginBottom:"0.25rem"},children:q.name}),i.jsx("div",{style:{fontSize:"0.875rem",color:L.labelText},children:q.location||"No location"})]},q.id)):i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:L.labelText},children:i.jsx("p",{children:"No jobs found. Create a job first."})})}),i.jsx("button",{onClick:()=>M(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:q=>q.currentTarget.style.background="#4b5563",onMouseOut:q=>q.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})}),NE=({isDarkMode:r,colors:e,onExport:t})=>{const[n,o]=me.useState(""),[a,c]=me.useState(""),[u,f]=me.useState(""),[d,y]=me.useState(""),[w,C]=me.useState({V:"",I:"",R:"",P:""}),[v,B]=me.useState(!1),[I,z]=me.useState([]),[A,M]=me.useState(!1);me.useEffect(()=>{U()},[n,a,u,d]);const U=()=>{const j=parseFloat(n)||0,T=parseFloat(a)||0,V=parseFloat(u)||0,k=parseFloat(d)||0,b={V:"",I:"",R:"",P:""};!n&&T&&V?b.V=(T*V).toFixed(1):!n&&k&&T&&T!==0?b.V=(k/T).toFixed(1):!n&&k&&V?b.V=Math.sqrt(k*V).toFixed(1):n&&(b.V=j.toFixed(1)),!a&&j&&V&&V!==0?b.I=(j/V).toFixed(1):!a&&k&&j&&j!==0?b.I=(k/j).toFixed(1):!a&&k&&V&&V!==0?b.I=Math.sqrt(k/V).toFixed(1):a&&(b.I=T.toFixed(1)),!u&&j&&T&&T!==0?b.R=(j/T).toFixed(1):!u&&j&&k&&k!==0?b.R=(j*j/k).toFixed(1):!u&&k&&T&&T!==0?b.R=(k/(T*T)).toFixed(1):u&&(b.R=V.toFixed(1)),!d&&j&&T?b.P=(j*T).toFixed(1):!d&&T&&V?b.P=(T*T*V).toFixed(1):!d&&j&&V&&V!==0?b.P=(j*j/V).toFixed(1):d&&(b.P=k.toFixed(1)),C(b)},F=()=>{o(""),c(""),f(""),y(""),C({V:"",I:"",R:"",P:""})},se=async()=>{B(!0),M(!0);try{const j=await au();z(j)}catch(j){console.error("Error loading jobs:",j),alert("Failed to load jobs. Please try again.")}finally{M(!1)}},ue=async j=>{try{const T={type:"ohms-law-basic",data:{voltage:parseFloat(n)||parseFloat(w.V)||0,current:parseFloat(a)||parseFloat(w.I)||0,resistance:parseFloat(u)||parseFloat(w.R)||0,power:parseFloat(d)||parseFloat(w.P)||0}};await Bh(j,T),B(!1),alert("Calculation attached to job successfully!")}catch(T){console.error("Error attaching calculation:",T),alert("Failed to attach calculation. Please try again.")}},L=()=>{if(!(n||a||u||d||w.V||w.I||w.R||w.P)){alert("Please enter at least 2 values before exporting");return}const T={},V={};n&&(T.voltage=`${n} V`),a&&(T.current=`${a} A`),u&&(T.resistance=`${u} Ω`),d&&(T.power=`${d} W`),w.V&&(V.voltage=`${w.V} V`),w.I&&(V.current=`${w.I} A`),w.R&&(V.resistance=`${w.R} Ω`),w.P&&(V.power=`${w.P} W`),t({calculatorName:"Ohm's Law Calculator - Basic",inputs:T,results:V,additionalInfo:{note:"Calculations based on fundamental electrical formulas"},necReferences:["Ohm's Law: E = I × R","Power formulas: P = E × I, P = I² × R, P = E² ÷ R","Current: I = E ÷ R, I = P ÷ E, I = √(P ÷ R)","Resistance: R = E ÷ I, R = E² ÷ P, R = P ÷ I²"]})};return i.jsxs("div",{children:[i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(us,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:"Enter any 2 known values to calculate the remaining values"})]})}),i.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Volts (E)"}),i.jsx("input",{type:"number",value:n||w.V,onChange:j=>o(j.target.value),placeholder:"Enter voltage",disabled:a&&u||a&&d||u&&d,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:a&&u||a&&d||u&&d?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:a&&u||a&&d||u&&d?"not-allowed":"text"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Amps (I)"}),i.jsx("input",{type:"number",value:a||w.I,onChange:j=>c(j.target.value),placeholder:"Enter current",disabled:n&&u||n&&d||u&&d,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:n&&u||n&&d||u&&d?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:n&&u||n&&d||u&&d?"not-allowed":"text"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Ohms (R)"}),i.jsx("input",{type:"number",value:u||w.R,onChange:j=>f(j.target.value),placeholder:"Enter resistance",disabled:n&&a||n&&d||a&&d,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:n&&a||n&&d||a&&d?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:n&&a||n&&d||a&&d?"not-allowed":"text"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Watts (P)"}),i.jsx("input",{type:"number",value:d||w.P,onChange:j=>y(j.target.value),placeholder:"Enter power",disabled:n&&a||n&&u||a&&u,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:n&&a||n&&u||a&&u?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:n&&a||n&&u||a&&u?"not-allowed":"text"}})]})]}),i.jsx("button",{onClick:F,style:{width:"100%",background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),(w.V||w.I||w.R||w.P)&&i.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[w.V&&i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Voltage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:w.V}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Volts"})]}),w.I&&i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Current"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:w.I}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),w.R&&i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Resistance"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:w.R}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Ohms"})]}),w.P&&i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Power"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:w.P}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Watts"})]})]})]}),(n||a||u||d)&&i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[i.jsxs("button",{onClick:L,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:j=>j.currentTarget.style.background="#2563eb",onMouseOut:j=>j.currentTarget.style.background="#3b82f6",children:[i.jsx(wp,{size:18}),"Export to PDF"]}),i.jsxs("button",{onClick:se,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:j=>j.currentTarget.style.background="#059669",onMouseOut:j=>j.currentTarget.style.background="#10b981",children:[i.jsx(Zc,{size:18}),"Attach to Job"]})]}),v&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:i.jsxs("div",{style:{background:e.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[i.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:e.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),i.jsx("div",{style:{marginBottom:"1rem"},children:A?i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:"Loading jobs..."}):I&&I.length>0?I.map(j=>i.jsxs("div",{onClick:()=>ue(j.id),style:{padding:"1rem",background:e.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${e.cardBorder}`,transition:"all 0.2s"},onMouseOver:T=>T.currentTarget.style.transform="translateY(-2px)",onMouseOut:T=>T.currentTarget.style.transform="translateY(0)",children:[i.jsx("div",{style:{fontWeight:"600",color:e.cardText,marginBottom:"0.25rem"},children:j.name}),i.jsx("div",{style:{fontSize:"0.875rem",color:e.labelText},children:j.location||"No location"})]},j.id)):i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:i.jsx("p",{children:"No jobs found. Create a job first."})})}),i.jsx("button",{onClick:()=>B(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:j=>j.currentTarget.style.background="#4b5563",onMouseOut:j=>j.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})},BE=({isDarkMode:r,colors:e,onExport:t})=>{const[n,o]=me.useState([{id:1,R:"",V:"",I:"",P:""}]),[a,c]=me.useState({R:"",V:"",I:"",P:""}),[u,f]=me.useState(!1),[d,y]=me.useState([]),[w,C]=me.useState(!1),v=(T,V)=>Object.entries(T).filter(([b,N])=>b!==V&&N&&N!=="").map(([b])=>b).length>=2,B=()=>{const T=Math.max(...n.map(V=>V.id),0)+1;o([...n,{id:T,R:"",V:"",I:"",P:""}])},I=T=>{n.length>1&&o(n.filter(V=>V.id!==T))},z=(T,V,k)=>{o(n.map(b=>b.id===T?{...b,[V]:k}:b))},A=(T,V)=>{const k=[];if(V.I&&V.I!==""){const b=parseFloat(V.I);T.forEach((N,D)=>{if(N.I&&N.I!==""){const q=parseFloat(N.I);Math.abs(q-b)>.01&&k.push(`Total current (${b}A) conflicts with Component ${D+1} current (${q}A)`)}})}return k},M=()=>{const T=A(n,a);if(T.length>0){alert(`Conflicts detected:
`+T.join(`
`));return}let V=[...n];if(a.I&&a.I!==""){const D=parseFloat(a.I);V=V.map(q=>!q.I||q.I===""?{...q,I:D.toFixed(1)}:q)}let k=!0,b=0;const N=50;for(;k&&b<N;){k=!1,b++;let D=null;for(let q of V)if(q.I&&!isNaN(parseFloat(q.I))){D=parseFloat(q.I);break}if(D===null)for(let q of V){const ie=parseFloat(q.V),oe=parseFloat(q.R),ne=parseFloat(q.P);if(!isNaN(ie)&&!isNaN(oe)&&oe!==0){D=ie/oe;break}else if(!isNaN(ne)&&!isNaN(ie)&&ie!==0){D=ne/ie;break}else if(!isNaN(ne)&&!isNaN(oe)&&oe!==0){D=Math.sqrt(ne/oe);break}}D!==null&&(V=V.map(q=>!q.I||q.I===""?(k=!0,{...q,I:D.toFixed(1)}):q)),V=V.map(q=>{const ie={...q},oe=parseFloat(q.V),ne=parseFloat(q.I),ve=parseFloat(q.R),be=parseFloat(q.P);(q.R===""||isNaN(ve))&&!isNaN(oe)&&!isNaN(ne)&&ne!==0?(ie.R=(oe/ne).toFixed(1),k=!0):(q.R===""||isNaN(ve))&&!isNaN(be)&&!isNaN(ne)&&ne!==0?(ie.R=(be/(ne*ne)).toFixed(1),k=!0):(q.R===""||isNaN(ve))&&!isNaN(oe)&&!isNaN(be)&&be!==0&&(ie.R=(oe*oe/be).toFixed(1),k=!0);const Z=parseFloat(ie.R),W=parseFloat(ie.I);(q.V===""||isNaN(oe))&&!isNaN(W)&&!isNaN(Z)?(ie.V=(W*Z).toFixed(1),k=!0):(q.V===""||isNaN(oe))&&!isNaN(be)&&!isNaN(W)&&W!==0?(ie.V=(be/W).toFixed(1),k=!0):(q.V===""||isNaN(oe))&&!isNaN(be)&&!isNaN(Z)&&(ie.V=Math.sqrt(be*Z).toFixed(1),k=!0);const J=parseFloat(ie.V);return(q.P===""||isNaN(be))&&!isNaN(J)&&!isNaN(W)?(ie.P=(J*W).toFixed(1),k=!0):(q.P===""||isNaN(be))&&!isNaN(W)&&!isNaN(Z)?(ie.P=(W*W*Z).toFixed(1),k=!0):(q.P===""||isNaN(be))&&!isNaN(J)&&!isNaN(Z)&&Z!==0&&(ie.P=(J*J/Z).toFixed(1),k=!0),ie})}o(V)},U=()=>{o([{id:1,R:"",V:"",I:"",P:""}]),c({R:"",V:"",I:"",P:""})},F=()=>{const T=n.reduce((D,q)=>{const ie=parseFloat(q.R);return D+(isNaN(ie)?0:ie)},0),V=n.reduce((D,q)=>{const ie=parseFloat(q.V);return D+(isNaN(ie)?0:ie)},0),k=n.reduce((D,q)=>{const ie=parseFloat(q.P);return D+(isNaN(ie)?0:ie)},0),b=n.find(D=>!isNaN(parseFloat(D.I))),N=b?parseFloat(b.I):0;return{totalR:T,totalV:V,totalI:N,totalP:k}},se=async()=>{f(!0),C(!0);try{const T=await au();y(T)}catch(T){console.error("Error loading jobs:",T),alert("Failed to load jobs. Please try again.")}finally{C(!1)}},ue=async T=>{try{const V=F();await Bh(T,{type:"ohms-law-series",data:{components:n,totals:V}}),f(!1),alert("Calculation attached to job successfully!")}catch(V){console.error("Error attaching calculation:",V),alert("Failed to attach calculation. Please try again.")}},L=()=>{if(!n.some(N=>N.R||N.V||N.I||N.P)){alert("Please enter component values before exporting");return}const V=F(),k={};n.forEach((N,D)=>{const q=[];N.R&&q.push(`R=${N.R}Ω`),N.V&&q.push(`V=${N.V}V`),N.I&&q.push(`I=${N.I}A`),N.P&&q.push(`P=${N.P}W`),q.length>0&&(k[`component${D+1}`]=q.join(", "))});const b={calculatorName:"Ohm's Law Calculator - Series Circuit",inputs:k,results:{totalResistance:`${V.totalR.toFixed(1)} Ω`,totalVoltage:`${V.totalV.toFixed(1)} V`,current:`${V.totalI.toFixed(1)} A (constant)`,totalPower:`${V.totalP.toFixed(1)} W`},additionalInfo:{circuitType:"Series Circuit",principle:"Current is constant across all components",totalResistanceFormula:"R_total = R1 + R2 + R3 + ...",totalVoltageFormula:"V_total = V1 + V2 + V3 + ..."},necReferences:["Series circuits: Current is the same through all components","Total resistance = Sum of all resistances","Total voltage = Sum of voltage drops across components","Total power = Sum of power dissipated in each component"]};t(b)},j=n.some(T=>T.R||T.V||T.I||T.P);return i.jsxs("div",{children:[i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(us,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:"Series Circuit: Current is constant across all components"})]})}),i.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${e.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Totals (Optional)"}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"0.5rem"},children:["V","I","R","P"].map(T=>{const V={R:"Ohms (R)",V:"Volts (E)",I:"Amps (I)",P:"Watts (P)"};return i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:V[T]}),i.jsx("input",{type:"number",value:a[T],onChange:k=>c({...a,[T]:k.target.value}),placeholder:"Optional",disabled:v(a,T),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:v(a,T)?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:v(a,T)?"not-allowed":"text"}})]},T)})}),i.jsx("p",{style:{fontSize:"0.8125rem",color:e.subtleText,margin:0,fontStyle:"italic"},children:"Enter known total values to help solve the circuit. Current is constant in series."})]}),n.map((T,V)=>i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${e.cardBorder}`},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",marginBottom:"0.75rem",gap:"0.5rem"},children:[i.jsxs("h4",{style:{fontWeight:"600",color:e.labelText,margin:0,fontSize:"0.875rem"},children:["Component ",V+1]}),n.length>1&&i.jsx("button",{onClick:()=>I(T.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:i.jsx(oc,{size:18})})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem"},children:[{field:"V",label:"Volts (E)"},{field:"I",label:"Amps (I)"},{field:"R",label:"Ohms (R)"},{field:"P",label:"Watts (P)"}].map(({field:k,label:b})=>i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"500",color:e.subtleText,marginBottom:"0.25rem"},children:b}),i.jsx("input",{type:"number",value:T[k],onChange:N=>z(T.id,k,N.target.value),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:e.inputBg,color:e.cardText,boxSizing:"border-box"}})]},k))})]},T.id)),i.jsxs("button",{onClick:B,style:{width:"100%",background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsx(na,{size:16}),"Add Component"]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsxs("button",{onClick:M,style:{flex:1,background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(nh,{size:20}),"Calculate"]}),i.jsx("button",{onClick:U,style:{flex:1,background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),i.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem"},children:"Circuit Totals"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Voltage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalV.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"E"})]}),i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Amperage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalI.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"I"})]}),i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Resistance"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalR.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"R"})]}),i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Wattage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalP.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"P"})]})]})]}),j&&i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[i.jsxs("button",{onClick:L,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:T=>T.currentTarget.style.background="#2563eb",onMouseOut:T=>T.currentTarget.style.background="#3b82f6",children:[i.jsx(wp,{size:18}),"Export to PDF"]}),i.jsxs("button",{onClick:se,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:T=>T.currentTarget.style.background="#059669",onMouseOut:T=>T.currentTarget.style.background="#10b981",children:[i.jsx(Zc,{size:18}),"Attach to Job"]})]}),u&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:i.jsxs("div",{style:{background:e.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[i.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:e.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),i.jsx("div",{style:{marginBottom:"1rem"},children:w?i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:"Loading jobs..."}):d&&d.length>0?d.map(T=>i.jsxs("div",{onClick:()=>ue(T.id),style:{padding:"1rem",background:e.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${e.cardBorder}`,transition:"all 0.2s"},onMouseOver:V=>V.currentTarget.style.transform="translateY(-2px)",onMouseOut:V=>V.currentTarget.style.transform="translateY(0)",children:[i.jsx("div",{style:{fontWeight:"600",color:e.cardText,marginBottom:"0.25rem"},children:T.name}),i.jsx("div",{style:{fontSize:"0.875rem",color:e.labelText},children:T.location||"No location"})]},T.id)):i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:i.jsx("p",{children:"No jobs found. Create a job first."})})}),i.jsx("button",{onClick:()=>f(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:T=>T.currentTarget.style.background="#4b5563",onMouseOut:T=>T.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})},LE=({isDarkMode:r,colors:e,onExport:t})=>{const[n,o]=me.useState([{id:1,R:"",V:"",I:"",P:""}]),[a,c]=me.useState({R:"",V:"",I:"",P:""}),[u,f]=me.useState(!1),[d,y]=me.useState([]),[w,C]=me.useState(!1),v=(T,V)=>Object.entries(T).filter(([b,N])=>b!==V&&N&&N!=="").map(([b])=>b).length>=2,B=()=>{const T=Math.max(...n.map(V=>V.id),0)+1;o([...n,{id:T,R:"",V:"",I:"",P:""}])},I=T=>{n.length>1&&o(n.filter(V=>V.id!==T))},z=(T,V,k)=>{o(n.map(b=>b.id===T?{...b,[V]:k}:b))},A=(T,V)=>{const k=[];if(V.V&&V.V!==""){const b=parseFloat(V.V);T.forEach((N,D)=>{if(N.V&&N.V!==""){const q=parseFloat(N.V);Math.abs(q-b)>.01&&k.push(`Total voltage (${b}V) conflicts with Component ${D+1} voltage (${q}V)`)}})}return k},M=()=>{const T=A(n,a);if(T.length>0){alert(`Conflicts detected:
`+T.join(`
`));return}let V=[...n];if(a.V&&a.V!==""){const D=parseFloat(a.V);V=V.map(q=>!q.V||q.V===""?{...q,V:D.toFixed(1)}:q)}let k=!0,b=0;const N=50;for(;k&&b<N;){k=!1,b++;let D=null;for(let q of V)if(q.V&&!isNaN(parseFloat(q.V))){D=parseFloat(q.V);break}if(D===null)for(let q of V){const ie=parseFloat(q.I),oe=parseFloat(q.R),ne=parseFloat(q.P);if(!isNaN(ie)&&!isNaN(oe)){D=ie*oe;break}else if(!isNaN(ne)&&!isNaN(ie)&&ie!==0){D=ne/ie;break}else if(!isNaN(ne)&&!isNaN(oe)){D=Math.sqrt(ne*oe);break}}D!==null&&(V=V.map(q=>!q.V||q.V===""?(k=!0,{...q,V:D.toFixed(1)}):q)),V=V.map(q=>{const ie={...q},oe=parseFloat(q.V),ne=parseFloat(q.I),ve=parseFloat(q.R),be=parseFloat(q.P);(q.R===""||isNaN(ve))&&!isNaN(oe)&&!isNaN(ne)&&ne!==0?(ie.R=(oe/ne).toFixed(1),k=!0):(q.R===""||isNaN(ve))&&!isNaN(be)&&!isNaN(ne)&&ne!==0?(ie.R=(be/(ne*ne)).toFixed(1),k=!0):(q.R===""||isNaN(ve))&&!isNaN(oe)&&!isNaN(be)&&be!==0&&(ie.R=(oe*oe/be).toFixed(1),k=!0);const Z=parseFloat(ie.R),W=parseFloat(ie.V);(q.I===""||isNaN(ne))&&!isNaN(W)&&!isNaN(Z)&&Z!==0?(ie.I=(W/Z).toFixed(1),k=!0):(q.I===""||isNaN(ne))&&!isNaN(be)&&!isNaN(W)&&W!==0?(ie.I=(be/W).toFixed(1),k=!0):(q.I===""||isNaN(ne))&&!isNaN(be)&&!isNaN(Z)&&Z!==0&&(ie.I=Math.sqrt(be/Z).toFixed(1),k=!0);const J=parseFloat(ie.I);return(q.P===""||isNaN(be))&&!isNaN(W)&&!isNaN(J)?(ie.P=(W*J).toFixed(1),k=!0):(q.P===""||isNaN(be))&&!isNaN(J)&&!isNaN(Z)?(ie.P=(J*J*Z).toFixed(1),k=!0):(q.P===""||isNaN(be))&&!isNaN(W)&&!isNaN(Z)&&Z!==0&&(ie.P=(W*W/Z).toFixed(1),k=!0),ie})}o(V)},U=()=>{o([{id:1,R:"",V:"",I:"",P:""}]),c({R:"",V:"",I:"",P:""})},F=()=>{const T=n.reduce((q,ie)=>{const oe=parseFloat(ie.I);return q+(isNaN(oe)?0:oe)},0),V=n.reduce((q,ie)=>{const oe=parseFloat(ie.P);return q+(isNaN(oe)?0:oe)},0),k=n.find(q=>!isNaN(parseFloat(q.V))),b=k?parseFloat(k.V):0,N=n.map(q=>parseFloat(q.R)).filter(q=>!isNaN(q)&&q>0);return{totalR:N.length>0?1/N.reduce((q,ie)=>q+1/ie,0):0,totalV:b,totalI:T,totalP:V}},se=async()=>{f(!0),C(!0);try{const T=await au();y(T)}catch(T){console.error("Error loading jobs:",T),alert("Failed to load jobs. Please try again.")}finally{C(!1)}},ue=async T=>{try{const V=F();await Bh(T,{type:"ohms-law-parallel",data:{components:n,totals:V}}),f(!1),alert("Calculation attached to job successfully!")}catch(V){console.error("Error attaching calculation:",V),alert("Failed to attach calculation. Please try again.")}},L=()=>{if(!n.some(N=>N.R||N.V||N.I||N.P)){alert("Please enter component values before exporting");return}const V=F(),k={};n.forEach((N,D)=>{const q=[];N.R&&q.push(`R=${N.R}Ω`),N.V&&q.push(`V=${N.V}V`),N.I&&q.push(`I=${N.I}A`),N.P&&q.push(`P=${N.P}W`),q.length>0&&(k[`component${D+1}`]=q.join(", "))});const b={calculatorName:"Ohm's Law Calculator - Parallel Circuit",inputs:k,results:{totalResistance:`${V.totalR.toFixed(1)} Ω`,voltage:`${V.totalV.toFixed(1)} V (constant)`,totalCurrent:`${V.totalI.toFixed(1)} A`,totalPower:`${V.totalP.toFixed(1)} W`},additionalInfo:{circuitType:"Parallel Circuit",principle:"Voltage is constant across all components",totalResistanceFormula:"1/R_total = 1/R1 + 1/R2 + 1/R3 + ...",totalCurrentFormula:"I_total = I1 + I2 + I3 + ..."},necReferences:["Parallel circuits: Voltage is the same across all components","Total resistance = 1 ÷ (1/R1 + 1/R2 + 1/R3 + ...)","Total current = Sum of currents through each branch","Total power = Sum of power dissipated in each component"]};t(b)},j=n.some(T=>T.R||T.V||T.I||T.P);return i.jsxs("div",{children:[i.jsx("div",{style:{background:"#faf5ff",border:"1px solid #a855f7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(us,{size:20,color:"#7e22ce",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#7e22ce",lineHeight:"1.5"},children:"Parallel Circuit: Voltage is constant across all components"})]})}),i.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${e.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Totals (Optional)"}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"0.5rem"},children:["V","I","R","P"].map(T=>{const V={R:"Ohms (R)",V:"Volts (E)",I:"Amps (I)",P:"Watts (P)"};return i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:V[T]}),i.jsx("input",{type:"number",value:a[T],onChange:k=>c({...a,[T]:k.target.value}),placeholder:"Optional",disabled:v(a,T),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:v(a,T)?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:v(a,T)?"not-allowed":"text"}})]},T)})}),i.jsx("p",{style:{fontSize:"0.8125rem",color:e.subtleText,margin:0,fontStyle:"italic"},children:"Enter known total values to help solve the circuit. Voltage is constant in parallel."})]}),n.map((T,V)=>i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${e.cardBorder}`},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",marginBottom:"0.75rem",gap:"0.5rem"},children:[i.jsxs("h4",{style:{fontWeight:"600",color:e.labelText,margin:0,fontSize:"0.875rem"},children:["Component ",V+1]}),n.length>1&&i.jsx("button",{onClick:()=>I(T.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:i.jsx(oc,{size:18})})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem"},children:[{field:"V",label:"Volts (E)"},{field:"I",label:"Amps (I)"},{field:"R",label:"Ohms (R)"},{field:"P",label:"Watts (P)"}].map(({field:k,label:b})=>i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"500",color:e.subtleText,marginBottom:"0.25rem"},children:b}),i.jsx("input",{type:"number",value:T[k],onChange:N=>z(T.id,k,N.target.value),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:e.inputBg,color:e.cardText,boxSizing:"border-box"}})]},k))})]},T.id)),i.jsxs("button",{onClick:B,style:{width:"100%",background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsx(na,{size:16}),"Add Component"]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsxs("button",{onClick:M,style:{flex:1,background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(nh,{size:20}),"Calculate"]}),i.jsx("button",{onClick:U,style:{flex:1,background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),i.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem"},children:"Circuit Totals"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Voltage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalV.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"E"})]}),i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Amperage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalI.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"I"})]}),i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Resistance"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalR.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"R"})]}),i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Wattage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalP.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"P"})]})]})]}),j&&i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[i.jsxs("button",{onClick:L,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:T=>T.currentTarget.style.background="#2563eb",onMouseOut:T=>T.currentTarget.style.background="#3b82f6",children:[i.jsx(wp,{size:18}),"Export to PDF"]}),i.jsxs("button",{onClick:se,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:T=>T.currentTarget.style.background="#059669",onMouseOut:T=>T.currentTarget.style.background="#10b981",children:[i.jsx(Zc,{size:18}),"Attach to Job"]})]}),u&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:i.jsxs("div",{style:{background:e.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[i.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:e.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),i.jsx("div",{style:{marginBottom:"1rem"},children:w?i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:"Loading jobs..."}):d&&d.length>0?d.map(T=>i.jsxs("div",{onClick:()=>ue(T.id),style:{padding:"1rem",background:e.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${e.cardBorder}`,transition:"all 0.2s"},onMouseOver:V=>V.currentTarget.style.transform="translateY(-2px)",onMouseOut:V=>V.currentTarget.style.transform="translateY(0)",children:[i.jsx("div",{style:{fontWeight:"600",color:e.cardText,marginBottom:"0.25rem"},children:T.name}),i.jsx("div",{style:{fontSize:"0.875rem",color:e.labelText},children:T.location||"No location"})]},T.id)):i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:i.jsx("p",{children:"No jobs found. Create a job first."})})}),i.jsx("button",{onClick:()=>f(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:T=>T.currentTarget.style.background="#4b5563",onMouseOut:T=>T.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})},FE=me.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=me.useState("basic"),o={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},a=c=>{sn(c)};return me.useImperativeHandle(e,()=>({exportPDF:()=>{alert("Please use the Export to PDF button within the calculator")}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:o.cardBg,border:`1px solid ${o.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:()=>n("basic"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="basic"?"#3b82f6":o.sectionBg,color:t==="basic"?"white":o.labelText,border:`1px solid ${t==="basic"?"#3b82f6":o.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Basic"}),i.jsx("button",{onClick:()=>n("series"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="series"?"#3b82f6":o.sectionBg,color:t==="series"?"white":o.labelText,border:`1px solid ${t==="series"?"#3b82f6":o.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Series"}),i.jsx("button",{onClick:()=>n("parallel"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="parallel"?"#3b82f6":o.sectionBg,color:t==="parallel"?"white":o.labelText,border:`1px solid ${t==="parallel"?"#3b82f6":o.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Parallel"})]}),t==="basic"&&i.jsx(NE,{isDarkMode:r,colors:o,onExport:a}),t==="series"&&i.jsx(BE,{isDarkMode:r,colors:o,onExport:a}),t==="parallel"&&i.jsx(LE,{isDarkMode:r,colors:o,onExport:a}),i.jsxs("div",{style:{background:o.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${o.cardBorder}`,fontSize:"0.8125rem",color:o.labelText,marginTop:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:o.cardText},children:"Formulas:"}),i.jsx("div",{children:"E = I × R"}),i.jsx("div",{children:"P = E × I"}),i.jsx("div",{children:"I = E ÷ R"}),i.jsx("div",{children:"P = I² × R"}),i.jsx("div",{children:"R = E ÷ I"}),i.jsx("div",{children:"P = E² ÷ R"})]})]})}),Mc={"4x1.25-round-octagon":{capacity:12.5,name:'4" x 1-1/4" Round/Octagon',type:"round-octagon"},"4x1.5-round-octagon":{capacity:15.5,name:'4" x 1-1/2" Round/Octagon',type:"round-octagon"},"4x2.125-round-octagon":{capacity:21.5,name:'4" x 2-1/8" Round/Octagon',type:"round-octagon"},"4x1.25-square":{capacity:18,name:'4" x 1-1/4" Square',type:"square"},"4x1.5-square":{capacity:21,name:'4" x 1-1/2" Square',type:"square"},"4x2.125-square":{capacity:30.3,name:'4" x 2-1/8" Square',type:"square"},"4-11/16x1.25-square":{capacity:25.5,name:'4-11/16" x 1-1/4" Square',type:"square"},"4-11/16x1.5-square":{capacity:29.5,name:'4-11/16" x 1-1/2" Square',type:"square"},"4-11/16x2.125-square":{capacity:42,name:'4-11/16" x 2-1/8" Square',type:"square"},"3x2x1.5-device":{capacity:7.5,name:'3" x 2" x 1-1/2" Device',type:"device"},"3x2x2-device":{capacity:10,name:'3" x 2" x 2" Device',type:"device"},"3x2x2.25-device":{capacity:10.5,name:'3" x 2" x 2-1/4" Device',type:"device"},"3x2x2.5-device":{capacity:12.5,name:'3" x 2" x 2-1/2" Device',type:"device"},"3x2x2.75-device":{capacity:14,name:'3" x 2" x 2-3/4" Device',type:"device"},"3x2x3.5-device":{capacity:18,name:'3" x 2" x 3-1/2" Device',type:"device"},"4x2.125x1.5-device":{capacity:10.3,name:'4" x 2-1/8" x 1-1/2" Device',type:"device"},"4x2.125x1.875-device":{capacity:13,name:'4" x 2-1/8" x 1-7/8" Device',type:"device"},"4x2.125x2.125-device":{capacity:14.5,name:'4" x 2-1/8" x 2-1/8" Device',type:"device"},"3.5x2x2.5-masonry":{capacity:14,name:'3-1/2" x 2" x 2-1/2" Masonry',type:"masonry"},"3.5x2x3.5-masonry":{capacity:21,name:'3-1/2" x 2" x 3-1/2" Masonry',type:"masonry"},"fs-1.25-single":{capacity:13.5,name:'FS Single Cover/Gang (1-1/4" min)',type:"fs-fd"},"fd-2.125-single":{capacity:18,name:'FD Single Cover/Gang (2-1/8" min)',type:"fs-fd"},"fs-1.25-multiple":{capacity:18,name:'FS Multiple Cover/Gang (1-1/4" min)',type:"fs-fd"},"fd-2.125-multiple":{capacity:24,name:'FD Multiple Cover/Gang (2-1/8" min)',type:"fs-fd"}},zE={18:1.5,16:1.75,14:2,12:2.25,10:2.5,8:3,6:5},OE=["18","16","14","12","10","8","6"],VE=r=>{var e;return((e=Mc[r])==null?void 0:e.capacity)||0},ME=r=>{var e;return((e=Mc[r])==null?void 0:e.name)||"Unknown Box"},hx=r=>zE[r]||0,Nf={mainSection:"NEC 314.16 - Number of Conductors in Outlet, Device, and Junction Boxes",calculations:"NEC 314.16(B) - Box Fill Calculations",table:"NEC Table 314.16(B) - Volume Allowance Required per Conductor",rules:["Each conductor = volume from Table 314.16(B)","Each device (receptacle/switch) counts as 2 conductor volumes","All equipment grounding conductors combined count as 1 conductor volume","One or more cable clamps count as 1 conductor volume","Conductor size for devices/clamps/grounds is based on largest conductor entering the box"]},DE=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=me.useState("4x1.5-square"),[a,c]=me.useState([{size:"12",count:""}]),[u,f]=me.useState({outlets:"",switches:"",clamps:"",groundWires:!1}),d={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},y=()=>{c([...a,{size:"12",count:""}])},w=M=>{a.length>1&&c(a.filter((U,F)=>F!==M))},C=(M,U,F)=>{const se=[...a];se[M][U]=F,c(se)},B=(()=>{let M=0;const U=a.map(b=>{const N=parseInt(b.count)||0,D=hx(b.size),q=D*N;return M+=q,{size:b.size,count:N,allowanceEach:D,subtotal:q}}),F=a.reduce((b,N)=>{if((parseInt(N.count)||0)>0){const q=parseInt(N.size.replace("/",""))||0,ie=parseInt(b.replace("/",""))||0;return q<ie?N.size:b}return b},"14"),se=hx(F),ue=parseInt(u.outlets)||0,L=parseInt(u.switches)||0,j=(ue+L)*2*se;M+=j;const V=(parseInt(u.clamps)||0)>0?se:0;M+=V;const k=u.groundWires?se:0;return M+=k,{conductorDetails:U,deviceFill:j,clampFill:V,groundFill:k,totalFill:M,largestWireSize:F,deviceWireAllowance:se}})(),I=VE(n),z=I>0?(B.totalFill/I*100).toFixed(1):0,A=B.totalFill>I;return me.useImperativeHandle(t,()=>({exportPDF:()=>{const M={};a.forEach((j,T)=>{const V=parseInt(j.count)||0;V>0&&(M[`Conductor ${T+1}`]=`${V}× ${j.size} AWG`)});const U={};B.conductorDetails.forEach((j,T)=>{j.count>0&&(U[`${j.count}× ${j.size} AWG`]=`${j.allowanceEach} cu.in. each = ${j.subtotal.toFixed(2)} cu.in. total`)});const F=parseInt(u.outlets)||0,se=parseInt(u.switches)||0,ue=parseInt(u.clamps)||0,L={calculatorName:"Box Fill Calculator",inputs:{boxType:`${ME(n)} (${I} cu.in.)`,...M,receptaclesOutlets:F>0?`${F} (counts as ${F*2} conductors)`:"0",switches:se>0?`${se} (counts as ${se*2} conductors)`:"0",cableClamps:ue>0?`${ue} (counts as 1 conductor volume)`:"0",equipmentGroundingConductors:u.groundWires?"Yes (counts as 1 conductor volume)":"No"},results:{boxCapacity:`${I} cu.in.`,calculatedFill:`${B.totalFill.toFixed(2)} cu.in.`,fillPercentage:`${z}%`,status:A?"❌ OVERFILLED - Violates NEC 314.16":"✓ Within NEC limits",deviceFill:B.deviceFill>0?`${B.deviceFill.toFixed(2)} cu.in.`:"N/A",clampFill:B.clampFill>0?`${B.clampFill.toFixed(2)} cu.in.`:"N/A",groundFill:B.groundFill>0?`${B.groundFill.toFixed(2)} cu.in.`:"N/A"},additionalInfo:{...U,largestWireSize:`${B.largestWireSize} AWG (used for device/clamp/ground allowance)`,deviceWireAllowance:`${B.deviceWireAllowance} cu.in. per conductor`},necReferences:[Nf.mainSection,Nf.calculations,Nf.table,...Nf.rules,A?"WARNING: This configuration exceeds the maximum allowable box fill":null].filter(Boolean)};sn(L)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Box Selection"}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Box Type"}),i.jsxs("select",{value:n,onChange:M=>o(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:[i.jsx("optgroup",{label:"Device Boxes (Single Gang)",children:Object.entries(Mc).filter(([M,U])=>U.type==="device-single").map(([M,U])=>i.jsxs("option",{value:M,children:[U.name," - ",U.capacity," cu.in."]},M))}),i.jsx("optgroup",{label:"Device Boxes (Multi-Gang)",children:Object.entries(Mc).filter(([M,U])=>U.type==="device-multi").map(([M,U])=>i.jsxs("option",{value:M,children:[U.name," - ",U.capacity," cu.in."]},M))}),i.jsx("optgroup",{label:"Square Boxes",children:Object.entries(Mc).filter(([M,U])=>U.type==="square").map(([M,U])=>i.jsxs("option",{value:M,children:[U.name," - ",U.capacity," cu.in."]},M))}),i.jsx("optgroup",{label:"Round/Octagon Boxes",children:Object.entries(Mc).filter(([M,U])=>U.type==="round-octagon").map(([M,U])=>i.jsxs("option",{value:M,children:[U.name," - ",U.capacity," cu.in."]},M))}),i.jsx("optgroup",{label:"Masonry Boxes",children:Object.entries(Mc).filter(([M,U])=>U.type==="masonry").map(([M,U])=>i.jsxs("option",{value:M,children:[U.name," - ",U.capacity," cu.in."]},M))})]})]})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Conductors"}),a.map((M,U)=>i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${d.cardBorder}`},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[i.jsxs("h4",{style:{fontWeight:"600",color:d.labelText,margin:0,fontSize:"0.875rem"},children:["Wire Size ",U+1]}),a.length>1&&i.jsx("button",{onClick:()=>w(U),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:i.jsx(oc,{size:20})})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[i.jsx("select",{value:M.size,onChange:F=>C(U,"size",F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:OE.map(F=>i.jsxs("option",{value:F,children:[F," AWG"]},F))}),i.jsx("input",{type:"number",value:M.count,onChange:F=>C(U,"count",F.target.value),placeholder:"Quantity",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}})]})]},U)),i.jsxs("button",{onClick:y,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(na,{size:16}),"Add Wire Size"]}),i.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.5rem",margin:"0.5rem 0 0 0"},children:"Count all insulated conductors entering, leaving, or passing through the box"})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Devices & Other Items"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Receptacles/Outlets"}),i.jsx("input",{type:"number",value:u.outlets,onChange:M=>f({...u,outlets:M.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}}),i.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"Each device counts as 2 conductors"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Switches"}),i.jsx("input",{type:"number",value:u.switches,onChange:M=>f({...u,switches:M.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}}),i.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"Each device counts as 2 conductors"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Cable Clamps"}),i.jsx("input",{type:"number",value:u.clamps,onChange:M=>f({...u,clamps:M.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}}),i.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"One or more = 1 conductor volume"})]})]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:u.groundWires,onChange:M=>f({...u,groundWires:M.target.checked}),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:d.labelText},children:"Equipment Grounding Conductors Present"})]}),i.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginLeft:"2rem",margin:"0.25rem 0 0 2rem"},children:"All grounds combined count as 1 conductor volume"})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Box Capacity"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:I}),i.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"cu.in."})]}),i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Calculated Fill"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:B.totalFill.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"cu.in."})]}),i.jsxs("div",{style:{background:A?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:A?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Fill Percentage"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:A?"#dc2626":"#1e40af"},children:[z,"%"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:A?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:A?"OVERFILLED":"Within Limits"})]})]}),B.conductorDetails.length>0&&B.conductorDetails.some(M=>M.count>0)&&i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${d.cardBorder}`},children:[i.jsx("strong",{style:{color:d.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Conductor Breakdown:"}),B.conductorDetails.map((M,U)=>M.count>0&&i.jsxs("div",{style:{marginTop:U>0?"0.75rem":0,paddingTop:U>0?"0.75rem":0,borderTop:U>0?`1px solid ${d.cardBorder}`:"none",fontSize:"0.875rem",color:d.labelText},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:[M.count,"× ",M.size," AWG"]}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:d.subtleText},children:[M.allowanceEach," cu.in. each = ",M.subtotal.toFixed(2)," cu.in. total"]})]},U))]}),!A&&B.totalFill>0?i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Box fill is within NEC limits"}),B.deviceFill>0&&i.jsxs("div",{children:["Devices: ",B.deviceFill.toFixed(2)," cu.in."]}),B.clampFill>0&&i.jsxs("div",{children:["Clamps: ",B.clampFill.toFixed(2)," cu.in."]}),B.groundFill>0&&i.jsxs("div",{children:["Grounds: ",B.groundFill.toFixed(2)," cu.in."]})]})]})}):A?i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(eu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",fontSize:"0.9375rem"},children:"BOX OVERFILLED - Violates NEC 314.16"}),i.jsx("div",{style:{marginBottom:"0.5rem"},children:"Reduce number of devices or use larger box"}),B.deviceFill>0&&i.jsxs("div",{children:["Devices: ",B.deviceFill.toFixed(2)," cu.in."]}),B.clampFill>0&&i.jsxs("div",{children:["Clamps: ",B.clampFill.toFixed(2)," cu.in."]}),B.groundFill>0&&i.jsxs("div",{children:["Grounds: ",B.groundFill.toFixed(2)," cu.in."]})]})]})}):null]}),i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${d.cardBorder}`,fontSize:"0.8125rem",color:d.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:d.cardText},children:"NEC 314.16 Requirements:"}),"Conductor = table volume • Device = 2 volumes • All grounds = 1 volume • Clamps = 1 volume"]})]})}),fx=[{value:"straight",label:"Straight Pull"},{value:"angle",label:"Angle Pull (L-shaped)"},{value:"u-pull",label:"U-Pull (Same Side)"}],WE=["0.5","0.75","1","1.25","1.5","2","2.5","3","3.5","4","5","6"],$E={"0.5":'1/2"',"0.75":'3/4"',1:'1"',"1.25":'1-1/4"',"1.5":'1-1/2"',2:'2"',"2.5":'2-1/2"',3:'3"',"3.5":'3-1/2"',4:'4"',5:'5"',6:'6"'},od={straight:{length:8},angle:{distance:6},uPull:{distance:6}},ym=r=>$E[r]||r,a1=r=>parseFloat(r),UE=r=>{const e=a1(r),t=e*od.straight.length;return{minLength:t,formula:`${e}" × ${od.straight.length} = ${t}"`,necReference:"NEC 314.28(A)(1)"}},qE=r=>{if(!r||r.length===0)return null;const e=r.map(a=>a1(a.size)),t=Math.max(...e),n=e.reduce((a,c)=>a+c,0)-t,o=t*od.angle.distance+n;return{minDistance:o,largestRaceway:t,sumOfOthers:n,formula:`(${t}" × ${od.angle.distance}) + ${n}" = ${o}"`,necReference:"NEC 314.28(A)(2)"}},HE=r=>{const e=a1(r),t=e*od.uPull.distance;return{minDistance:t,formula:`${e}" × ${od.uPull.distance} = ${t}"`,necReference:"NEC 314.28(A)(2)"}},xm={mainSection:"NEC 314.28 - Pull and Junction Boxes and Conduit Bodies",conductorSize:"Applies to boxes containing conductors 4 AWG or larger",rules:["Straight Pull: Length = 8 × trade size of largest raceway","Angle/U Pull: Distance = 6 × largest raceway + sum of other raceways on same wall","Rows of conduits: Each row calculated separately","Box depth: Must accommodate the largest conduit locknut and bushing","These are minimum dimensions - larger boxes may be used"]},GE=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=me.useState("straight"),[a,c]=me.useState([{size:"1"}]),u={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},f=()=>{c([...a,{size:"1"}])},d=v=>{a.length>1&&c(a.filter((B,I)=>I!==v))},y=(v,B)=>{const I=[...a];I[v].size=B,c(I)},C=(()=>{const B=Math.max(...a.map(I=>parseFloat(I.size))).toString();if(n==="straight")return UE(B);if(n==="angle")return qE(a);if(n==="u-pull")return HE(B)})();return me.useImperativeHandle(t,()=>({exportPDF:()=>{var z;const v=((z=fx.find(A=>A.value===n))==null?void 0:z.label)||n,B=a.map((A,M)=>`Raceway ${M+1}: ${ym(A.size)}`).join(", "),I={calculatorName:"Pull Box Calculator",inputs:{pullType:v,numberOfRaceways:a.length,raceways:B,largestRaceway:C?ym(Math.max(...a.map(A=>A.size)).toString()):"N/A"},results:{minimumDimension:C?`${C.minLength||C.minDistance}" inches`:"N/A",formula:(C==null?void 0:C.formula)||"N/A",necReference:(C==null?void 0:C.necReference)||"N/A"},additionalInfo:{calculation:(C==null?void 0:C.formula)||"N/A",note:"These are minimum dimensions per NEC. Larger boxes may be used.",conductorRequirement:"Applies to conductors 4 AWG or larger"},necReferences:[xm.mainSection,C==null?void 0:C.necReference,xm.conductorSize,...xm.rules].filter(Boolean)};sn(I)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${u.cardBorder}`,paddingBottom:"0.5rem"},children:"Pull Box Configuration"}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:u.labelText,marginBottom:"0.5rem"},children:"Pull Type"}),i.jsx("select",{value:n,onChange:v=>o(v.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"},children:fx.map(v=>i.jsx("option",{value:v.value,children:v.label},v.value))})]}),i.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#dbeafe",border:"1px solid #93c5fd",borderRadius:"8px",fontSize:"0.8125rem",color:"#1e40af",display:"flex",gap:"0.5rem"},children:[i.jsx(us,{size:16,style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{children:[n==="straight"&&"Straight Pull: Conduits enter and exit on opposite sides",n==="angle"&&"Angle Pull: Conduits enter on one side and exit on adjacent side (L-shaped)",n==="u-pull"&&"U-Pull: Conduits enter and exit on the same side"]})]})]}),i.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${u.cardBorder}`,paddingBottom:"0.5rem"},children:[n==="straight"&&"Raceway Size",n==="angle"&&"Raceways on Same Wall",n==="u-pull"&&"Raceway Size"]}),a.map((v,B)=>i.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${u.cardBorder}`},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[i.jsx("h4",{style:{fontWeight:"600",color:u.labelText,margin:0,fontSize:"0.875rem"},children:n==="angle"?B===0?"Largest Raceway":`Other Raceway ${B}`:"Largest Raceway"}),n==="angle"&&B>0&&i.jsx("button",{onClick:()=>d(B),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:i.jsx(oc,{size:20})})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:u.labelText,marginBottom:"0.5rem"},children:"Trade Size"}),i.jsx("select",{value:v.size,onChange:I=>y(B,I.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"},children:WE.map(I=>i.jsx("option",{value:I,children:ym(I)},I))})]})]},B)),n==="angle"&&i.jsxs("button",{onClick:f,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(na,{size:16}),"Add Other Raceway"]}),i.jsxs("p",{style:{fontSize:"0.75rem",color:u.subtleText,marginTop:"0.5rem",margin:"0.5rem 0 0 0"},children:[n==="straight"&&"Enter the largest raceway entering the box",n==="angle"&&"Enter largest raceway first, then add any other raceways entering on the same wall",n==="u-pull"&&"Enter the largest raceway entering and exiting on the same side"]})]}),C&&i.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem"},children:"Minimum Box Dimensions"}),i.jsxs("div",{style:{background:u.sectionBg,padding:"1.5rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:u.labelText,marginBottom:"0.5rem"},children:["Minimum ",n==="straight"?"Length":"Distance"]}),i.jsxs("div",{style:{fontSize:"3rem",fontWeight:"700",color:"#3b82f6",lineHeight:1},children:[(C.minLength||C.minDistance).toFixed(1),'"']}),i.jsx("div",{style:{fontSize:"0.875rem",color:u.subtleText,marginTop:"0.5rem"},children:C.formula})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #93c5fd",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"NEC Requirement Met"}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["Reference: ",C.necReference]}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"These are minimum dimensions. Larger boxes may be used for ease of installation."})]})}),n==="angle"&&C.largestRaceway&&i.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",marginTop:"1rem",border:`1px solid ${u.cardBorder}`},children:[i.jsx("strong",{style:{color:u.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Angle Pull Calculation:"}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:u.labelText,lineHeight:"1.8"},children:[i.jsxs("div",{style:{marginBottom:"0.5rem"},children:[i.jsx("strong",{children:"Step 1:"})," Largest raceway × 6"]}),i.jsxs("div",{style:{paddingLeft:"1rem",color:u.subtleText},children:[C.largestRaceway,'" × 6 = ',(C.largestRaceway*6).toFixed(1),'"']}),i.jsxs("div",{style:{marginTop:"0.75rem",marginBottom:"0.5rem"},children:[i.jsx("strong",{children:"Step 2:"})," Add other raceways on same wall"]}),i.jsx("div",{style:{paddingLeft:"1rem",color:u.subtleText},children:C.sumOfOthers>0?`Sum of others = ${C.sumOfOthers.toFixed(1)}"`:"No other raceways"}),i.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:`1px solid ${u.cardBorder}`,fontWeight:"600",color:"#3b82f6"},children:["Total: ",(C.largestRaceway*6).toFixed(1),'" + ',C.sumOfOthers.toFixed(1),'" = ',C.minDistance.toFixed(1),'"']})]})]})]}),i.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${u.cardBorder}`,fontSize:"0.8125rem",color:u.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:u.cardText},children:"NEC 314.28 Requirements:"}),i.jsx("div",{style:{lineHeight:"1.6"},children:"Straight: 8× largest • Angle/U: 6× largest + others • For conductors 4 AWG or larger"})]})]})}),KE=[{value:"emt",label:"EMT - Electrical Metallic Tubing"},{value:"ent",label:"ENT - Electrical Nonmetallic Tubing"},{value:"fmc",label:"FMC - Flexible Metal Conduit"},{value:"imc",label:"IMC - Intermediate Metal Conduit"},{value:"lfnc-b",label:"LFNC-B - Liquidtight Flexible Nonmetallic Conduit (Type B)"},{value:"lfnc-a",label:"LFNC-A - Liquidtight Flexible Nonmetallic Conduit (Type A)"},{value:"lfmc",label:"LFMC - Liquidtight Flexible Metal Conduit"},{value:"rmc",label:"RMC - Rigid Metal Conduit"},{value:"pvc-40",label:"PVC Schedule 40"},{value:"pvc-80",label:"PVC Schedule 80"},{value:"pvc-a",label:"PVC Type A"},{value:"pvc-eb",label:"PVC Type EB"}],JE={"0.375":'3/8"',"0.5":'1/2"',"0.75":'3/4"',1:'1"',"1.25":'1-1/4"',"1.5":'1-1/2"',2:'2"',"2.5":'2-1/2"',3:'3"',"3.5":'3-1/2"',4:'4"',5:'5"',6:'6"'},dS={"emt-0.5":{name:'1/2" EMT',area:.304},"emt-0.75":{name:'3/4" EMT',area:.533},"emt-1":{name:'1" EMT',area:.864},"emt-1.25":{name:'1-1/4" EMT',area:1.496},"emt-1.5":{name:'1-1/2" EMT',area:2.036},"emt-2":{name:'2" EMT',area:3.356},"emt-2.5":{name:'2-1/2" EMT',area:5.858},"emt-3":{name:'3" EMT',area:8.846},"emt-3.5":{name:'3-1/2" EMT',area:11.545},"emt-4":{name:'4" EMT',area:14.753},"ent-0.5":{name:'1/2" ENT',area:.246},"ent-0.75":{name:'3/4" ENT',area:.454},"ent-1":{name:'1" ENT',area:.785},"ent-1.25":{name:'1-1/4" ENT',area:1.41},"ent-1.5":{name:'1-1/2" ENT',area:1.936},"ent-2":{name:'2" ENT',area:3.205},"fmc-0.375":{name:'3/8" FMC',area:.116},"fmc-0.5":{name:'1/2" FMC',area:.317},"fmc-0.75":{name:'3/4" FMC',area:.533},"fmc-1":{name:'1" FMC',area:.817},"fmc-1.25":{name:'1-1/4" FMC',area:1.277},"fmc-1.5":{name:'1-1/2" FMC',area:1.858},"fmc-2":{name:'2" FMC',area:3.269},"fmc-2.5":{name:'2-1/2" FMC',area:4.909},"fmc-3":{name:'3" FMC',area:7.069},"fmc-3.5":{name:'3-1/2" FMC',area:9.621},"fmc-4":{name:'4" FMC',area:12.566},"imc-0.5":{name:'1/2" IMC',area:.342},"imc-0.75":{name:'3/4" IMC',area:.586},"imc-1":{name:'1" IMC',area:.959},"imc-1.25":{name:'1-1/4" IMC',area:1.647},"imc-1.5":{name:'1-1/2" IMC',area:2.225},"imc-2":{name:'2" IMC',area:3.63},"imc-2.5":{name:'2-1/2" IMC',area:5.135},"imc-3":{name:'3" IMC',area:7.922},"imc-3.5":{name:'3-1/2" IMC',area:10.584},"imc-4":{name:'4" IMC',area:13.631},"lfnc-b-0.375":{name:'3/8" LFNC-B',area:.192},"lfnc-b-0.5":{name:'1/2" LFNC-B',area:.314},"lfnc-b-0.75":{name:'3/4" LFNC-B',area:.541},"lfnc-b-1":{name:'1" LFNC-B',area:.873},"lfnc-b-1.25":{name:'1-1/4" LFNC-B',area:1.528},"lfnc-b-1.5":{name:'1-1/2" LFNC-B',area:1.981},"lfnc-b-2":{name:'2" LFNC-B',area:3.246},"lfnc-a-0.375":{name:'3/8" LFNC-A',area:.192},"lfnc-a-0.5":{name:'1/2" LFNC-A',area:.312},"lfnc-a-0.75":{name:'3/4" LFNC-A',area:.535},"lfnc-a-1":{name:'1" LFNC-A',area:.854},"lfnc-a-1.25":{name:'1-1/4" LFNC-A',area:1.502},"lfnc-a-1.5":{name:'1-1/2" LFNC-A',area:2.018},"lfnc-a-2":{name:'2" LFNC-A',area:3.343},"lfmc-0.375":{name:'3/8" LFMC',area:.192},"lfmc-0.5":{name:'1/2" LFMC',area:.314},"lfmc-0.75":{name:'3/4" LFMC',area:.541},"lfmc-1":{name:'1" LFMC',area:.873},"lfmc-1.25":{name:'1-1/4" LFMC',area:1.528},"lfmc-1.5":{name:'1-1/2" LFMC',area:1.981},"lfmc-2":{name:'2" LFMC',area:3.246},"lfmc-2.5":{name:'2-1/2" LFMC',area:4.881},"lfmc-3":{name:'3" LFMC',area:7.475},"lfmc-3.5":{name:'3-1/2" LFMC',area:9.731},"lfmc-4":{name:'4" LFMC',area:12.692},"rmc-0.5":{name:'1/2" RMC',area:.314},"rmc-0.75":{name:'3/4" RMC',area:.549},"rmc-1":{name:'1" RMC',area:.887},"rmc-1.25":{name:'1-1/4" RMC',area:1.526},"rmc-1.5":{name:'1-1/2" RMC',area:2.071},"rmc-2":{name:'2" RMC',area:3.408},"rmc-2.5":{name:'2-1/2" RMC',area:4.866},"rmc-3":{name:'3" RMC',area:7.499},"rmc-3.5":{name:'3-1/2" RMC',area:10.01},"rmc-4":{name:'4" RMC',area:12.882},"rmc-5":{name:'5" RMC',area:20.212},"rmc-6":{name:'6" RMC',area:29.158},"pvc-40-0.5":{name:'1/2" PVC Sch 40',area:.285},"pvc-40-0.75":{name:'3/4" PVC Sch 40',area:.508},"pvc-40-1":{name:'1" PVC Sch 40',area:.832},"pvc-40-1.25":{name:'1-1/4" PVC Sch 40',area:1.453},"pvc-40-1.5":{name:'1-1/2" PVC Sch 40',area:1.986},"pvc-40-2":{name:'2" PVC Sch 40',area:3.291},"pvc-40-2.5":{name:'2-1/2" PVC Sch 40',area:4.695},"pvc-40-3":{name:'3" PVC Sch 40',area:7.268},"pvc-40-3.5":{name:'3-1/2" PVC Sch 40',area:9.737},"pvc-40-4":{name:'4" PVC Sch 40',area:12.554},"pvc-40-5":{name:'5" PVC Sch 40',area:19.761},"pvc-40-6":{name:'6" PVC Sch 40',area:28.567},"pvc-80-0.5":{name:'1/2" PVC Sch 80',area:.217},"pvc-80-0.75":{name:'3/4" PVC Sch 80',area:.409},"pvc-80-1":{name:'1" PVC Sch 80',area:.688},"pvc-80-1.25":{name:'1-1/4" PVC Sch 80',area:1.237},"pvc-80-1.5":{name:'1-1/2" PVC Sch 80',area:1.711},"pvc-80-2":{name:'2" PVC Sch 80',area:2.874},"pvc-80-2.5":{name:'2-1/2" PVC Sch 80',area:4.119},"pvc-80-3":{name:'3" PVC Sch 80',area:6.442},"pvc-80-3.5":{name:'3-1/2" PVC Sch 80',area:8.688},"pvc-80-4":{name:'4" PVC Sch 80',area:11.258},"pvc-80-5":{name:'5" PVC Sch 80',area:17.855},"pvc-80-6":{name:'6" PVC Sch 80',area:25.598},"pvc-a-0.5":{name:'1/2" PVC Type A',area:.385},"pvc-a-0.75":{name:'3/4" PVC Type A',area:.65},"pvc-a-1":{name:'1" PVC Type A',area:1.084},"pvc-a-1.25":{name:'1-1/4" PVC Type A',area:1.767},"pvc-a-1.5":{name:'1-1/2" PVC Type A',area:2.324},"pvc-a-2":{name:'2" PVC Type A',area:3.647},"pvc-a-2.5":{name:'2-1/2" PVC Type A',area:5.453},"pvc-a-3":{name:'3" PVC Type A',area:8.194},"pvc-a-3.5":{name:'3-1/2" PVC Type A',area:10.694},"pvc-a-4":{name:'4" PVC Type A',area:13.723},"pvc-eb-2":{name:'2" PVC Type EB',area:3.874},"pvc-eb-3":{name:'3" PVC Type EB',area:8.709},"pvc-eb-3.5":{name:'3-1/2" PVC Type EB',area:11.365},"pvc-eb-4":{name:'4" PVC Type EB',area:14.448},"pvc-eb-5":{name:'5" PVC Type EB',area:22.195},"pvc-eb-6":{name:'6" PVC Type EB',area:31.53}},px=r=>{const e=r+"-";return Object.keys(dS).filter(n=>n.startsWith(e)).map(n=>n.replace(e,"")).sort((n,o)=>parseFloat(n)-parseFloat(o))},YE=(r,e)=>{const t=`${r}-${e}`;return dS[t]||null},QE=[{value:"thhn",label:"THHN/THWN-2"},{value:"thw",label:"THW"},{value:"thhw",label:"THHW"},{value:"xhhw",label:"XHHW-2"},{value:"xhh",label:"XHH"}],XE=["18","16","14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750","800","900","1000","1250","1500","1750","2000"],sg={thhn:{14:.0097,12:.0133,10:.0211,8:.0366,6:.0507,4:.0824,3:.0973,2:.1158,1:.1562,"1/0":.1855,"2/0":.2223,"3/0":.2679,"4/0":.3237,250:.397,300:.4608,350:.5242,400:.5863,500:.7073,600:.8676,700:.9887,750:1.0496,800:1.1085,900:1.2311,1e3:1.3478},thwn:{14:.0097,12:.0133,10:.0211,8:.0366,6:.0507,4:.0824,3:.0973,2:.1158,1:.1562,"1/0":.1855,"2/0":.2223,"3/0":.2679,"4/0":.3237,250:.397,300:.4608,350:.5242,400:.5863,500:.7073,600:.8676,700:.9887,750:1.0496,800:1.1085,900:1.2311,1e3:1.3478},thw:{14:.0139,12:.0181,10:.0243,8:.0437,6:.0726,4:.0973,3:.1134,2:.1333,1:.1901,"1/0":.2223,"2/0":.2624,"3/0":.3117,"4/0":.3718,250:.4596,300:.5281,350:.5958,400:.6619,500:.7901,600:.9729,700:1.101,750:1.1652,800:1.2272,900:1.3561,1e3:1.4784,1250:1.8602,1500:2.1695,1750:2.4773,2e3:2.7818},thhw:{14:.0139,12:.0181,10:.0243,8:.0437,6:.0726,4:.0973,3:.1134,2:.1333,1:.1901,"1/0":.2223,"2/0":.2624,"3/0":.3117,"4/0":.3718,250:.4596,300:.5281,350:.5958,400:.6619,500:.7901,600:.9729,700:1.101,750:1.1652,800:1.2272,900:1.3561,1e3:1.4784,1250:1.8602,1500:2.1695,1750:2.4773,2e3:2.7818},xhhw:{14:.0139,12:.0181,10:.0243,8:.0437,6:.059,4:.0814,3:.0962,2:.1146,1:.1534,"1/0":.1825,"2/0":.219,"3/0":.2642,"4/0":.3197,250:.3904,300:.4536,350:.5166,400:.5782,500:.6984,600:.8709,700:.9923,750:1.0532,800:1.1122,900:1.2351,1e3:1.3519,1250:1.718,1500:2.0157,1750:2.3127,2e3:2.6073},xhh:{14:.0139,12:.0181,10:.0243,8:.0437,6:.059,4:.0814,3:.0962,2:.1146,1:.1534,"1/0":.1825,"2/0":.219,"3/0":.2642,"4/0":.3197,250:.3904,300:.4536,350:.5166,400:.5782,500:.6984,600:.8709,700:.9923,750:1.0532,800:1.1122,900:1.2351,1e3:1.3519,1250:1.718,1500:2.0157,1750:2.3127,2e3:2.6073}},ZE=(r,e)=>{var t;return((t=sg[r])==null?void 0:t[e])||0},eI=r=>sg[r]?XE.filter(e=>sg[r][e]!==void 0):[],tI=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=me.useState("emt"),[a,c]=me.useState("0.5"),[u,f]=me.useState([{wireType:"thwn",size:"12",count:""}]),d={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},y=px(n),w=A=>{o(A);const M=px(A);M.includes(a)||c(M[0]||"0.5")},C=()=>{f([...u,{wireType:"thwn",size:"12",count:""}])},v=A=>{u.length>1&&f(u.filter((M,U)=>U!==A))},B=(A,M,U)=>{const F=[...u];F[A][M]=U,f(F)},I=()=>{const A=YE(n,a);if(!A)return null;const M=A.area;let U=0,F=0;const se=u.map(j=>{const T=parseInt(j.count)||0,V=ZE(j.wireType,j.size),k=V*T;return U+=k,F+=T,{wireType:j.wireType,size:j.size,count:T,areaEach:V,subtotal:k}}),ue=(U/M*100).toFixed(1);let L=40;return F===1?L=53:F===2&&(L=31),{conduitInfo:A,conduitArea:M.toFixed(3),totalWireArea:U.toFixed(3),fillPercentage:parseFloat(ue),maxFill:L,totalWireCount:F,conductorDetails:se,isOverfilled:parseFloat(ue)>L}};me.useImperativeHandle(t,()=>({exportPDF:()=>{const A=I();if(A.totalWireCount===0){alert("Please enter at least one conductor with a quantity before exporting");return}const M=A.conductorDetails.filter(F=>F.count>0).map(F=>`${F.count}× ${F.size} AWG ${F.wireType.toUpperCase()}-2: ${F.areaEach.toFixed(4)} sq.in. each = ${F.subtotal.toFixed(4)} sq.in. total`).join("; "),U={calculatorName:"Conduit Fill Calculator",inputs:{conduitType:A.conduitInfo.name,totalConductors:A.totalWireCount},results:{conduitArea:`${A.conduitArea} sq.in.`,totalWireArea:`${A.totalWireArea} sq.in.`,fillPercentage:`${A.fillPercentage}%`,maximumAllowedFill:`${A.maxFill}%`,complianceStatus:A.isOverfilled?"OVERFILLED - Violates NEC":"Within NEC Limits"},additionalInfo:{conductorBreakdown:M,fillRule:A.totalWireCount===1?"1 conductor: 53% max fill":A.totalWireCount===2?"2 conductors: 31% max fill":"3+ conductors: 40% max fill",recommendation:A.isOverfilled?"Reduce number of conductors or use larger conduit":"Installation meets NEC requirements"},necReferences:["NEC Chapter 9, Table 1 - Percent of Cross Section of Conduit and Tubing for Conductors","NEC Chapter 9, Table 4 - Dimensions and Percent Area of Conduit and Tubing","NEC Chapter 9, Table 5 - Dimensions of Insulated Conductors and Fixture Wires","1 conductor: 53% max fill","2 conductors: 31% max fill","3+ conductors: 40% max fill","Nipples (24 inches or less): 60% max fill"]};sn(U)}}));const z=I();return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Conduit Selection"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Conduit Type"}),i.jsx("select",{value:n,onChange:A=>w(A.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:KE.map(A=>i.jsx("option",{value:A.value,children:A.label},A.value))})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Conduit Size"}),i.jsx("select",{value:a,onChange:A=>c(A.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:y.map(A=>i.jsx("option",{value:A,children:JE[A]||A},A))})]})]})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Conductors"}),u.map((A,M)=>i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${d.cardBorder}`},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[i.jsxs("h4",{style:{fontWeight:"600",color:d.labelText,margin:0,fontSize:"0.875rem"},children:["Conductor ",M+1]}),u.length>1&&i.jsx("button",{onClick:()=>v(M),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:i.jsx(oc,{size:20})})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"0.75rem"},children:[i.jsx("select",{value:A.wireType,onChange:U=>B(M,"wireType",U.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:QE.map(U=>i.jsx("option",{value:U.value,children:U.label},U.value))}),i.jsx("select",{value:A.size,onChange:U=>B(M,"size",U.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:eI(A.wireType).map(U=>{const se=!U.includes("/")&&parseInt(U)>=250?"kcmil":"AWG";return i.jsxs("option",{value:U,children:[U," ",se]},U)})}),i.jsx("input",{type:"number",value:A.count,onChange:U=>B(M,"count",U.target.value),placeholder:"Quantity",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}})]})]},M)),i.jsxs("button",{onClick:C,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(na,{size:16}),"Add Conductor"]})]}),z&&i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Conduit Area"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:z.conduitArea}),i.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"sq.in."})]}),i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Wire Area"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:z.totalWireArea}),i.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"sq.in."})]}),i.jsxs("div",{style:{background:z.isOverfilled?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:z.isOverfilled?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Fill Percentage"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:z.isOverfilled?"#dc2626":"#1e40af"},children:[z.fillPercentage,"%"]}),i.jsxs("div",{style:{fontSize:"0.75rem",color:z.isOverfilled?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:["Max: ",z.maxFill,"%"]})]})]}),z.conductorDetails.length>0&&z.totalWireCount>0&&i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${d.cardBorder}`},children:[i.jsx("strong",{style:{color:d.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Conductor Breakdown:"}),z.conductorDetails.map((A,M)=>A.count>0&&i.jsxs("div",{style:{marginTop:M>0?"0.75rem":0,paddingTop:M>0?"0.75rem":0,borderTop:M>0?`1px solid ${d.cardBorder}`:"none",fontSize:"0.875rem",color:d.labelText},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:[A.count,"× ",A.size," ",!A.size.includes("/")&&parseInt(A.size)>=250?"kcmil":"AWG"," ",A.wireType.toUpperCase(),"-2"]}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:d.subtleText},children:[A.areaEach.toFixed(4)," sq.in. each = ",A.subtotal.toFixed(4)," sq.in. total"]})]},M))]}),!z.isOverfilled&&z.totalWireCount>0?i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Conduit fill is within NEC limits"}),i.jsxs("div",{children:["Total conductors: ",z.totalWireCount]})]})]})}):z.isOverfilled?i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(eu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",fontSize:"0.9375rem"},children:"CONDUIT OVERFILLED - Violates NEC Chapter 9"}),i.jsx("div",{children:"Reduce number of conductors or use larger conduit"})]})]})}):null]}),i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${d.cardBorder}`,fontSize:"0.8125rem",color:d.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:d.cardText},children:"NEC Chapter 9, Table 1:"}),'1 conductor: 53% • 2 conductors: 31% • 3+ conductors: 40% • Nipples (<24"): 60%']})]})}),rI=[{value:"copper",label:"Copper"},{value:"aluminum",label:"Aluminum"}],nI=[{value:"60C",label:"60°C (140°F)"},{value:"75C",label:"75°C (167°F)"},{value:"90C",label:"90°C (194°F)"}],iI=[{value:"18",label:"18 AWG"},{value:"16",label:"16 AWG"},{value:"14",label:"14 AWG"},{value:"12",label:"12 AWG"},{value:"10",label:"10 AWG"},{value:"8",label:"8 AWG"},{value:"6",label:"6 AWG"},{value:"4",label:"4 AWG"},{value:"3",label:"3 AWG"},{value:"2",label:"2 AWG"},{value:"1",label:"1 AWG"},{value:"1/0",label:"1/0 AWG"},{value:"2/0",label:"2/0 AWG"},{value:"3/0",label:"3/0 AWG"},{value:"4/0",label:"4/0 AWG"},{value:"250",label:"250 kcmil"},{value:"300",label:"300 kcmil"},{value:"350",label:"350 kcmil"},{value:"400",label:"400 kcmil"},{value:"500",label:"500 kcmil"},{value:"600",label:"600 kcmil"},{value:"700",label:"700 kcmil"},{value:"750",label:"750 kcmil"},{value:"800",label:"800 kcmil"},{value:"900",label:"900 kcmil"},{value:"1000",label:"1000 kcmil"},{value:"1250",label:"1250 kcmil"},{value:"1500",label:"1500 kcmil"},{value:"1750",label:"1750 kcmil"},{value:"2000",label:"2000 kcmil"}],oI=[{value:"10",label:"10°C (50°F)"},{value:"15",label:"15°C (59°F)"},{value:"20",label:"20°C (68°F)"},{value:"25",label:"25°C (77°F)"},{value:"30",label:"30°C (86°F) - Standard"},{value:"35",label:"35°C (95°F)"},{value:"40",label:"40°C (104°F)"},{value:"45",label:"45°C (113°F)"},{value:"50",label:"50°C (122°F)"}],sI={copper:{"60C":{18:0,16:0,14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:350,700:385,750:400,800:410,900:435,1e3:455,1250:495,1500:525,1750:545,2e3:555},"75C":{18:0,16:0,14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,700:460,750:475,800:490,900:520,1e3:545,1250:590,1500:625,1750:650,2e3:665},"90C":{18:14,16:18,14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535,800:555,900:585,1e3:615,1250:665,1500:705,1750:735,2e3:750}},aluminum:{"60C":{18:0,16:0,14:0,12:15,10:25,8:30,6:40,4:55,3:65,2:75,1:85,"1/0":100,"2/0":115,"3/0":130,"4/0":150,250:170,300:195,350:210,400:225,500:260,600:285,700:310,750:320,800:330,900:355,1e3:375,1250:405,1500:435,1750:455,2e3:470},"75C":{18:0,16:0,14:0,12:20,10:30,8:40,6:50,4:65,3:75,2:90,1:100,"1/0":120,"2/0":135,"3/0":155,"4/0":180,250:205,300:230,350:250,400:270,500:310,600:340,700:375,750:385,800:395,900:425,1e3:445,1250:485,1500:520,1750:545,2e3:560},"90C":{18:0,16:0,14:0,12:25,10:35,8:45,6:55,4:75,3:85,2:100,1:115,"1/0":135,"2/0":150,"3/0":175,"4/0":205,250:230,300:260,350:280,400:305,500:350,600:385,700:420,750:435,800:445,900:480,1e3:500,1250:545,1500:585,1750:615,2e3:630}}},aI={"60C":{10:1.29,15:1.2,20:1.11,25:1.05,30:1,35:.94,40:.88,45:.82,50:.75,55:.67,60:.58,65:.47,70:.33},"75C":{10:1.2,15:1.15,20:1.11,25:1.05,30:1,35:.94,40:.88,45:.82,50:.75,55:.67,60:.58,65:.47,70:.33,75:0},"90C":{10:1.15,15:1.12,20:1.08,25:1.04,30:1,35:.96,40:.91,45:.87,50:.82,55:.76,60:.71,65:.65,70:.58,75:.5,80:.41,85:.29,90:0}},lI={copper:{14:15,12:20,10:30},aluminum:{12:15,10:25}},cI=(r,e,t)=>{var n,o;return((o=(n=sI[r])==null?void 0:n[e])==null?void 0:o[t])||0},uI=(r,e)=>{var t;return((t=aI[r])==null?void 0:t[e])||1},dI=r=>{const e=parseInt(r);return e<=3?1:e<=6?.8:e<=9?.7:e<=20?.5:e<=30?.45:e<=40?.4:.35},hI=(r,e)=>{var t;return((t=lI[r])==null?void 0:t[e])||null},mx=(r,e)=>e==="18"?"Thermostats, lighting controls, doorbells, signaling circuits":e==="16"?"Electronics, lighting control systems, doorbells, low-voltage applications":r<=15||r<=20?"Lighting circuits, small appliances":r<=25?"General outlets, lighting circuits":r<=30?"Small appliances, dryers (240V)":r<=40?"Electric ranges, large appliances":r<=50?"Electric ranges, welders, heat pumps":r<=100?"Sub-panels, large motors":r<=200?"Main panels, large commercial loads":r<=400?"Service entrances, large commercial/industrial applications":r<=600?"Large service entrances, industrial feeders":"Large industrial services, utility connections",fI=(r,e,t,n,o)=>{const a=uI(e,t),c=dI(n);let u=r*a*c,f=u;return o&&(f=u*.8),{base:r,tempFactor:a,conductorFactor:c,derated:Math.round(u*10)/10,continuous:Math.round(f*10)/10}},gx=r=>({"60C":"60°C (140°F)","75C":"75°C (167°F)","90C":"90°C (194°F)"})[r]||r,pI=r=>({10:"10°C (50°F)",15:"15°C (59°F)",20:"20°C (68°F)",25:"25°C (77°F)",30:"30°C (86°F)",35:"35°C (95°F)",40:"40°C (104°F)",45:"45°C (113°F)",50:"50°C (122°F)"})[r]||`${r}°C`,yx=r=>r.includes("/")?`${r} AWG`:parseInt(r)<=16?`${r} AWG`:`${r} kcmil`,$d={ampacityTable:"NEC Table 310.16 - Allowable Ampacities of Insulated Conductors",tempCorrection:"NEC 310.15(B)(2)(a) - Temperature Correction Factors",conductorAdjustment:"NEC 310.15(B)(3)(a) - Conductor Bundling Adjustment Factors",ocpdLimit:"NEC 240.4(D) - Small Conductor Overcurrent Protection",continuousLoad:"NEC 210.19(A)(1) - Continuous Load Sizing (125% factor)"},mI=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=me.useState("12"),[a,c]=me.useState("copper"),[u,f]=me.useState("75C"),[d,y]=me.useState("30"),[w,C]=me.useState("3"),[v,B]=me.useState(!1),I={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},z=cI(a,u,n),A=hI(a,n),M=fI(z,u,d,w,v),U=M.tempFactor!==1||M.conductorFactor!==1||v;return me.useImperativeHandle(t,()=>({exportPDF:()=>{const F={calculatorName:"Ampacity Lookup Calculator",inputs:{wireSize:yx(n),wireMaterial:a.charAt(0).toUpperCase()+a.slice(1),temperatureRating:gx(u),ambientTemperature:pI(d),currentCarryingConductors:w,continuousLoad:v?"Yes (3+ hours)":"No"},results:{baseAmpacity:`${M.base} A`,deratedAmpacity:U?`${M.derated} A`:"N/A (no derating applied)",finalAmpacity:`${v?M.continuous:U?M.derated:M.base} A`,ocpdLimit:A?`${A} A (NEC 240.4(D))`:"No special limit",commonApplications:mx(z,n)},additionalInfo:{temperatureCorrectionFactor:`×${M.tempFactor.toFixed(2)}`,conductorAdjustmentFactor:`×${M.conductorFactor.toFixed(2)}`,continuousLoadFactor:v?"×0.80":"Not applied",deratingApplied:U?"Yes":"No"},necReferences:[$d.ampacityTable,$d.tempCorrection,$d.conductorAdjustment,A?$d.ocpdLimit:null,v?$d.continuousLoad:null].filter(Boolean)};sn(F)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:I.cardBg,border:`1px solid ${I.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:I.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${I.cardBorder}`,paddingBottom:"0.5rem"},children:"Wire Selection"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:I.labelText,marginBottom:"0.5rem"},children:"Wire Size"}),i.jsx("select",{value:n,onChange:F=>o(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${I.inputBorder}`,borderRadius:"8px",backgroundColor:I.inputBg,color:I.cardText,boxSizing:"border-box"},children:iI.map(F=>i.jsx("option",{value:F.value,children:F.label},F.value))})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:I.labelText,marginBottom:"0.5rem"},children:"Wire Material"}),i.jsx("select",{value:a,onChange:F=>c(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${I.inputBorder}`,borderRadius:"8px",backgroundColor:I.inputBg,color:I.cardText,boxSizing:"border-box"},children:rI.map(F=>i.jsx("option",{value:F.value,children:F.label},F.value))})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:I.labelText,marginBottom:"0.5rem"},children:"Temperature Rating"}),i.jsx("select",{value:u,onChange:F=>f(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${I.inputBorder}`,borderRadius:"8px",backgroundColor:I.inputBg,color:I.cardText,boxSizing:"border-box"},children:nI.map(F=>i.jsx("option",{value:F.value,children:F.label},F.value))})]})]})]})]}),i.jsxs("div",{style:{background:I.cardBg,border:`1px solid ${I.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:I.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${I.cardBorder}`,paddingBottom:"0.5rem"},children:"Derating Factors (Optional)"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:I.labelText,marginBottom:"0.5rem"},children:"Ambient Temp (°C)"}),i.jsx("select",{value:d,onChange:F=>y(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${I.inputBorder}`,borderRadius:"8px",backgroundColor:I.inputBg,color:I.cardText,boxSizing:"border-box"},children:oI.map(F=>i.jsx("option",{value:F.value,children:F.label},F.value))})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:I.labelText,marginBottom:"0.5rem"},children:"Current-Carrying Conductors"}),i.jsx("input",{type:"number",value:w,onChange:F=>C(F.target.value),min:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${I.inputBorder}`,borderRadius:"8px",backgroundColor:I.inputBg,color:I.cardText,boxSizing:"border-box"}})]})]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:v,onChange:F=>B(F.target.checked),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:I.labelText},children:"Continuous Load (3+ hours) - Apply 80% factor"})]}),i.jsxs("div",{style:{background:I.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${I.cardBorder}`},children:[i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:I.cardText,marginTop:0,marginBottom:"0.75rem"},children:"Applied Factors"}),i.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:I.labelText},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Temperature Factor:"}),i.jsxs("span",{style:{fontWeight:"600",color:I.cardText},children:["×",M.tempFactor.toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Conductor Adjustment:"}),i.jsxs("span",{style:{fontWeight:"600",color:I.cardText},children:["×",M.conductorFactor.toFixed(2)]})]}),v&&i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Continuous Load:"}),i.jsx("span",{style:{fontWeight:"600",color:I.cardText},children:"×0.80"})]})]})]})]})]}),i.jsxs("div",{style:{background:I.cardBg,border:`1px solid ${I.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:I.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:U?"repeat(3, 1fr)":"1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:I.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:I.labelText,marginBottom:"0.25rem"},children:"Base Ampacity"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:I.cardText},children:[M.base," A"]})]}),U&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:I.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:I.labelText,marginBottom:"0.25rem"},children:"Derated Ampacity"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:I.cardText},children:[M.derated," A"]})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Final Ampacity"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[v?M.continuous:M.derated," A"]})]})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5",width:"100%"},children:[i.jsxs("div",{style:{marginBottom:"0.5rem"},children:[i.jsx("strong",{children:"Wire:"})," ",yx(n)," ",a]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:[i.jsx("strong",{children:"Temperature Rating:"})," ",gx(u)]})]})]})}),A&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(eu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("strong",{children:"NEC 240.4(D) Limit:"})," ",A,"A max overcurrent protection"]})]})}),i.jsx("div",{style:{background:I.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${I.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:I.labelText,lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",color:I.cardText,marginBottom:"0.5rem"},children:"Common Applications:"}),mx(z,n)]})})]})]})}),gI=({flcData:r,setFlcData:e,colors:t})=>{var u,f;const n={single:{115:{.25:4.4,.33:5.8,.5:7.2,.75:9.8,1:13.8,1.5:20,2:24,3:34,5:56},230:{.25:2.2,.33:2.9,.5:3.6,.75:4.9,1:6.9,1.5:10,2:12,3:17,5:28}},three:{230:{.5:2,.75:2.8,1:3.6,1.5:5.2,2:6.8,3:9.6,5:15.2,7.5:22,10:28,15:42,20:54,25:68,30:80,40:104,50:130,60:154,75:192,100:248,125:312,150:360,200:480},460:{.5:1,.75:1.4,1:1.8,1.5:2.6,2:3.4,3:4.8,5:7.6,7.5:11,10:14,15:21,20:27,25:34,30:40,40:52,50:65,60:77,75:96,100:124,125:156,150:180,200:240},575:{.5:.8,.75:1.1,1:1.4,1.5:2.1,2:2.7,3:3.9,5:6.1,7.5:9,10:11,15:17,20:22,25:27,30:32,40:41,50:52,60:62,75:77,100:99,125:125,150:144,200:192},2300:{250:65,300:77,350:90,400:103,450:116,500:129},4e3:{500:74,600:88,700:103,800:118,900:132,1e3:147}}},a=(()=>{const d=parseFloat(r.horsepower),y=parseInt(r.voltage);if(n[r.phase]&&n[r.phase][y]&&n[r.phase][y][d])return n[r.phase][y][d];const w=parseFloat(r.efficiency),C=parseFloat(r.powerFactor);return r.phase==="single"?d*746/(y*w*C):d*746/(1.732*y*w*C)})(),c=(f=(u=n[r.phase])==null?void 0:u[parseInt(r.voltage)])==null?void 0:f[parseFloat(r.horsepower)];return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Horsepower"}),i.jsxs("select",{value:r.horsepower,onChange:d=>e({...r,horsepower:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"",children:"Select HP"}),i.jsx("option",{value:"0.25",children:"1/4 HP"}),i.jsx("option",{value:"0.33",children:"1/3 HP"}),i.jsx("option",{value:"0.5",children:"1/2 HP"}),i.jsx("option",{value:"0.75",children:"3/4 HP"}),i.jsx("option",{value:"1",children:"1 HP"}),i.jsx("option",{value:"1.5",children:"1.5 HP"}),i.jsx("option",{value:"2",children:"2 HP"}),i.jsx("option",{value:"3",children:"3 HP"}),i.jsx("option",{value:"5",children:"5 HP"}),i.jsx("option",{value:"7.5",children:"7.5 HP"}),i.jsx("option",{value:"10",children:"10 HP"}),i.jsx("option",{value:"15",children:"15 HP"}),i.jsx("option",{value:"20",children:"20 HP"}),i.jsx("option",{value:"25",children:"25 HP"}),i.jsx("option",{value:"30",children:"30 HP"}),i.jsx("option",{value:"40",children:"40 HP"}),i.jsx("option",{value:"50",children:"50 HP"}),i.jsx("option",{value:"75",children:"75 HP"}),i.jsx("option",{value:"100",children:"100 HP"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Voltage"}),i.jsxs("select",{value:r.voltage,onChange:d=>e({...r,voltage:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"115",children:"115V"}),i.jsx("option",{value:"230",children:"230V"}),i.jsx("option",{value:"460",children:"460V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"575",children:"575V"}),i.jsx("option",{value:"2300",children:"2300V"}),i.jsx("option",{value:"4000",children:"4000V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Phase"}),i.jsxs("select",{value:r.phase,onChange:d=>e({...r,phase:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]})]}),r.horsepower&&!c&&i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Efficiency"}),i.jsxs("select",{value:r.efficiency,onChange:d=>e({...r,efficiency:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"0.8",children:"80% (Standard)"}),i.jsx("option",{value:"0.85",children:"85% (High Efficiency)"}),i.jsx("option",{value:"0.9",children:"90% (Premium)"}),i.jsx("option",{value:"0.95",children:"95% (Super Premium)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),i.jsxs("select",{value:r.powerFactor,onChange:d=>e({...r,powerFactor:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"0.7",children:"0.7 (Poor)"}),i.jsx("option",{value:"0.8",children:"0.8 (Typical)"}),i.jsx("option",{value:"0.85",children:"0.85 (Good)"}),i.jsx("option",{value:"0.9",children:"0.9 (Excellent)"})]})]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${t.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.5rem",textAlign:"center"},children:"Full Load Current"}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:t.cardText,textAlign:"center"},children:a?a.toFixed(1):"0.0"}),i.jsx("div",{style:{fontSize:"0.875rem",color:t.labelText,textAlign:"center",marginTop:"0.25rem"},children:"Amperes"})]}),c?i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Value from NEC Table 430.250"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Standard full load current from NEC tables"})]})]})}):r.horsepower?i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(eu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Calculated Value"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Not in NEC tables - calculated using efficiency and power factor"})]})]})}):null]})},yI=({protectionData:r,setProtectionData:e,colors:t})=>{const n={"inverse-time-breaker":250,"instantaneous-trip-breaker":800,"inverse-time-fuse":175,"time-delay-fuse":175},a=(()=>{if(!r.flc)return{calculated:"0",standard:0};const c=parseFloat(r.flc),u=n[r.protectionType],f=c*u/100,y=[15,20,25,30,35,40,45,50,60,70,80,90,100,110,125,150,175,200,225,250,300,350,400,450,500,600,700,800,1e3,1200,1600,2e3,2500,3e3,4e3,5e3,6e3].find(w=>w>=f)||f;return{calculated:f.toFixed(1),standard:y,percentage:u}})();return i.jsxs("div",{className:cs.container,children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Full Load Current (FLC)"}),i.jsx("input",{type:"number",value:r.flc,onChange:c=>e({...r,flc:c.target.value}),placeholder:"Enter FLC in amps",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Protection Type"}),i.jsxs("select",{value:r.protectionType,onChange:c=>e({...r,protectionType:c.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"inverse-time-breaker",children:"Inverse Time Breaker"}),i.jsx("option",{value:"instantaneous-trip-breaker",children:"Instantaneous Trip Breaker"}),i.jsx("option",{value:"inverse-time-fuse",children:"Inverse Time Fuse"}),i.jsx("option",{value:"time-delay-fuse",children:"Time Delay Fuse"})]})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Calculated Maximum"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:a.calculated}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Standard Size"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:a.standard}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),r.flc&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.8125rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Reference:"}),"Per NEC Table 430.52 (",a.percentage,"% of FLC)"]})]})},xI=({wireSizeData:r,setWireSizeData:e,colors:t})=>{const o=(()=>{if(!r.flc)return null;const a=parseFloat(r.flc)*1.25,c={"60C":{14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:355,700:385,750:400},"75C":{14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,750:475},"90C":{14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535}},u={14:15,12:20,10:30},d=["14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750"].find(y=>{const w=c[r.tempRating][y]>=a,C=!u[y]||u[y]>=a;return w&&C});return{requiredAmps:a.toFixed(1),wireSize:d||"Larger than 750 kcmil required",ampacity:d?c[r.tempRating][d]:"N/A",ocpdLimit:d&&u[d]?u[d]:null}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Full Load Current (FLC)"}),i.jsx("input",{type:"number",value:r.flc,onChange:a=>e({...r,flc:a.target.value}),placeholder:"Enter FLC in amps",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Temperature Rating"}),i.jsxs("select",{value:r.tempRating,onChange:a=>e({...r,tempRating:a.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"60C",children:"60°C (140°F) - TW, UF"}),i.jsx("option",{value:"75C",children:"75°C (167°F) - THWN, XHHW"}),i.jsx("option",{value:"90C",children:"90°C (194°F) - THHN, XHHW-2"})]})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${t.cardBorder}`},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,marginBottom:"0.75rem"},children:[i.jsx("strong",{style:{color:t.cardText},children:"Required Current Capacity:"})," ",o.requiredAmps," Amps (125% of FLC)"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.5rem",textAlign:"center"},children:"Minimum Wire Size"}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:t.cardText,textAlign:"center",marginBottom:"0.5rem"},children:o.wireSize}),o.ampacity!=="N/A"&&i.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,textAlign:"center"},children:["Ampacity: ",o.ampacity," Amps"]})]}),o.ocpdLimit&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(eu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"NEC 240.4(D) Limitation"}),i.jsxs("div",{style:{fontSize:"0.8125rem"},children:[o.ocpdLimit,"A maximum overcurrent protection for ",o.wireSize," wire"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.8125rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Reference:"}),"Per NEC 430.22 - Branch circuit conductors must carry 125% of motor FLC"]})]})]})},vI=me.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=me.useState("flc"),[o,a]=me.useState({horsepower:"",voltage:"480",phase:"three",efficiency:"0.85",powerFactor:"0.8"}),[c,u]=me.useState({flc:"",protectionType:"inverse-time-breaker"}),[f,d]=me.useState({flc:"",tempRating:"75C"}),y={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};me.useImperativeHandle(e,()=>({exportPDF:()=>{var v,B;let C;if(t==="flc"){if(!o.horsepower){alert("Please select motor horsepower before exporting");return}const I={single:{115:{.25:4.4,.33:5.8,.5:7.2,.75:9.8,1:13.8,1.5:20,2:24,3:34,5:56},230:{.25:2.2,.33:2.9,.5:3.6,.75:4.9,1:6.9,1.5:10,2:12,3:17,5:28}},three:{230:{.5:2,.75:2.8,1:3.6,1.5:5.2,2:6.8,3:9.6,5:15.2,7.5:22,10:28,15:42,20:54,25:68,30:80,40:104,50:130,60:154,75:192,100:248,125:312,150:360,200:480},460:{.5:1,.75:1.4,1:1.8,1.5:2.6,2:3.4,3:4.8,5:7.6,7.5:11,10:14,15:21,20:27,25:34,30:40,40:52,50:65,60:77,75:96,100:124,125:156,150:180,200:240},575:{.5:.8,.75:1.1,1:1.4,1.5:2.1,2:2.7,3:3.9,5:6.1,7.5:9,10:11,15:17,20:22,25:27,30:32,40:41,50:52,60:62,75:77,100:99,125:125,150:144,200:192},2300:{250:65,300:77,350:90,400:103,450:116,500:129},4e3:{500:74,600:88,700:103,800:118,900:132,1e3:147}}},z=parseFloat(o.horsepower),A=parseInt(o.voltage);let M,U=!1;if((B=(v=I[o.phase])==null?void 0:v[A])!=null&&B[z])M=I[o.phase][A][z],U=!0;else{const se=parseFloat(o.efficiency),ue=parseFloat(o.powerFactor);o.phase==="single"?M=z*746/(A*se*ue):M=z*746/(1.732*A*se*ue)}const F={motorHorsepower:`${z} HP`,voltage:`${o.voltage}V`,phase:o.phase==="single"?"Single Phase":"Three Phase"};U||(F.motorEfficiency=`${(parseFloat(o.efficiency)*100).toFixed(0)}%`,F.powerFactor=o.powerFactor),C={calculatorName:"Motor Calculations - Full Load Current",inputs:F,results:{fullLoadCurrent:`${M.toFixed(1)} Amperes`,source:U?"NEC Table 430.250":"Calculated"},additionalInfo:U?{note:"Standard full load current from NEC tables"}:{calculation:o.phase==="single"?`FLC = (${z} HP × 746) ÷ (${A}V × ${o.efficiency} eff × ${o.powerFactor} pf) = ${M.toFixed(1)}A`:`FLC = (${z} HP × 746) ÷ (1.732 × ${A}V × ${o.efficiency} eff × ${o.powerFactor} pf) = ${M.toFixed(1)}A`,note:"Calculated value - not in NEC tables"},necReferences:["NEC Table 430.250 - Full-Load Current, Three-Phase Alternating-Current Motors","NEC Table 430.248 - Full-Load Current, Single-Phase Alternating-Current Motors","NEC 430.6 - Ampacity and Motor Rating Determination"]}}else if(t==="protection"){if(!c.flc){alert("Please enter motor FLC before exporting");return}const I={"inverse-time-breaker":"Inverse Time Breaker","instantaneous-trip-breaker":"Instantaneous Trip Breaker","inverse-time-fuse":"Inverse Time Fuse","time-delay-fuse":"Time Delay Fuse"},z={"inverse-time-breaker":250,"instantaneous-trip-breaker":800,"inverse-time-fuse":175,"time-delay-fuse":175},A=parseFloat(c.flc),M=z[c.protectionType],U=A*M/100,se=[15,20,25,30,35,40,45,50,60,70,80,90,100,110,125,150,175,200,225,250,300,350,400,450,500,600,700,800,1e3,1200,1600,2e3,2500,3e3,4e3,5e3,6e3].find(ue=>ue>=U)||U;C={calculatorName:"Motor Calculations - Branch Circuit Protection",inputs:{motorFullLoadCurrent:`${c.flc} Amps`,protectionType:I[c.protectionType]},results:{calculatedMaximum:`${U.toFixed(1)} Amperes`,standardSize:`${se} Amperes`},additionalInfo:{calculation:`Maximum = ${A}A × ${M}% = ${U.toFixed(1)}A`,nextStandardSize:`Next standard OCPD size: ${se}A`},necReferences:[`NEC Table 430.52 - Maximum Rating or Setting of Motor Branch-Circuit Short-Circuit and Ground-Fault Protective Devices (${M}% of FLC)`,"NEC 430.52(C) - Rating or Setting for Individual Motor Circuit","NEC 240.6 - Standard Ampere Ratings"]}}else if(t==="wiresize"){if(!f.flc){alert("Please enter motor FLC before exporting");return}const I={"60C":"60°C (140°F) - TW, UF","75C":"75°C (167°F) - THWN, XHHW","90C":"90°C (194°F) - THHN, XHHW-2"},z=(parseFloat(f.flc)*1.25).toFixed(1),A={"60C":{14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:355,700:385,750:400},"75C":{14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,750:475},"90C":{14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535}},M={14:15,12:20,10:30},F=["14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750"].find(L=>{const j=A[f.tempRating][L]>=parseFloat(z),T=!M[L]||M[L]>=parseFloat(z);return j&&T}),se=F||"Larger than 750 kcmil required",ue=F?A[f.tempRating][F]:"N/A";C={calculatorName:"Motor Calculations - Wire Sizing",inputs:{motorFullLoadCurrent:`${f.flc} Amps`,temperatureRating:I[f.tempRating]},results:{requiredCapacity:`${z} Amps (125% of FLC)`,minimumWireSize:se,wireAmpacity:ue!=="N/A"?`${ue} Amps`:"N/A"},additionalInfo:{calculation:`Required capacity = ${f.flc}A × 125% = ${z}A`,...F&&M[F]&&{ocpdLimitation:`NEC 240.4(D): ${M[F]}A maximum OCPD for ${se} wire`}},necReferences:["NEC 430.22 - Single Motor - Conductors supplying a single motor shall have an ampacity not less than 125% of FLC","NEC Table 310.16 - Allowable Ampacities of Insulated Conductors","NEC 240.4(D) - Small Conductors - Unless specifically permitted, overcurrent protection shall not exceed limits"]}}sn(C)}}));const w={flc:i.jsx(gI,{flcData:o,setFlcData:a,colors:y}),protection:i.jsx(yI,{protectionData:c,setProtectionData:u,colors:y}),wiresize:i.jsx(xI,{wireSizeData:f,setWireSizeData:d,colors:y})};return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:y.cardBg,border:`1px solid ${y.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{className:cs.btn,onClick:()=>n("flc"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="flc"?"#3b82f6":"transparent",color:t==="flc"?"white":y.labelText,border:`1px solid ${t==="flc"?"#3b82f6":y.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Full Load Current"}),i.jsx("button",{className:cs.btn,onClick:()=>n("protection"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="protection"?"#3b82f6":"transparent",color:t==="protection"?"white":y.labelText,border:`1px solid ${t==="protection"?"#3b82f6":y.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Circuit Protection"}),i.jsx("button",{className:cs.btn,onClick:()=>n("wiresize"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="wiresize"?"#3b82f6":"transparent",color:t==="wiresize"?"white":y.labelText,border:`1px solid ${t==="wiresize"?"#3b82f6":y.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Wire Sizing"})]})}),i.jsx("div",{style:{background:y.cardBg,border:`1px solid ${y.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:w[t]}),i.jsxs("div",{style:{background:y.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${y.cardBorder}`,fontSize:"0.8125rem",color:y.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:y.cardText},children:"NEC References:"}),"430.22 - Conductors (125% FLC) • 430.52 - Circuit protection • 430.250 - FLC tables • 430.32 - Overload protection"]})]})}),bI=({data:r,setData:e,colors:t})=>{const o=(()=>{const a=parseFloat(r.squareFootage)||0,c=parseFloat(r.smallApplianceCircuits)||0,u=parseFloat(r.laundryCircuits)||0,f=parseFloat(r.rangeKW)||0,d=parseFloat(r.dryerKW)||0,y=parseFloat(r.waterHeaterKW)||0,w=parseFloat(r.hvacKW)||0,C=parseFloat(r.otherLoadsKW)||0,v=parseFloat(r.voltage),B=a*3,I=c*1500,z=u*1500,A=B+I+z;let M=0;A<=3e3?M=A:A<=12e4?M=3e3+(A-3e3)*.35:M=43950+(A-12e4)*.25;let U=0;f>0&&(f<=12?U=8e3:U=8e3+(f-12)*400);const F=Math.max(d*1e3,5e3),se=y*1e3,ue=w*1e3,L=C*1e3,j=M+U+F+se+ue+L,T=j/1e3,V=j/v;let k=100;return V>200?k=400:V>150?k=200:V>100&&(k=150),{generalLighting:B,smallApplianceLoad:I,laundryLoad:z,subtotalVA:A,demandLighting:M,rangeDemand:U,dryerDemand:F,waterHeaterDemand:se,hvacDemand:ue,otherDemand:L,totalDemandVA:j,totalDemandKW:T,totalAmperage:V,recommendedService:k}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem",minHeight:"2.5rem"},children:["Square",i.jsx("br",{}),"Footage",i.jsx("br",{}),"   ",i.jsx("br",{})]}),i.jsx("input",{type:"number",value:r.squareFootage,onChange:a=>e(c=>({...c,squareFootage:a.target.value})),placeholder:"Living area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Small Appliance Circuits"}),i.jsx("input",{type:"number",value:r.smallApplianceCircuits,onChange:a=>e(c=>({...c,smallApplianceCircuits:a.target.value})),placeholder:"Min 2",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"@ 1500 VA each"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Laundry Circuits ",i.jsx("br",{}),"   ",i.jsx("br",{})]}),i.jsx("input",{type:"number",value:r.laundryCircuits,onChange:a=>e(c=>({...c,laundryCircuits:a.target.value})),placeholder:"Typically 1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"@ 1500 VA"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Electric Range (kW)"}),i.jsx("input",{type:"number",value:r.rangeKW,onChange:a=>e(c=>({...c,rangeKW:a.target.value})),placeholder:"Nameplate rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Electric Dryer (kW)"}),i.jsx("input",{type:"number",value:r.dryerKW,onChange:a=>e(c=>({...c,dryerKW:a.target.value})),placeholder:"Min 5 kW",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Water Heater (kW)"}),i.jsx("input",{type:"number",value:r.waterHeaterKW,onChange:a=>e(c=>({...c,waterHeaterKW:a.target.value})),placeholder:"Rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"HVAC/Heat (kW)"}),i.jsx("input",{type:"number",value:r.hvacKW,onChange:a=>e(c=>({...c,hvacKW:a.target.value})),placeholder:"Largest load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Other Loads (kW)"}),i.jsx("input",{type:"number",value:r.otherLoadsKW,onChange:a=>e(c=>({...c,otherLoadsKW:a.target.value})),placeholder:"Pool, spa, etc",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),i.jsxs("select",{value:r.voltage,onChange:a=>e(c=>({...c,voltage:a.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"208",children:"208V"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]})]}),r.squareFootage&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Demand"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.totalDemandKW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Amperage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.totalAmperage.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"amps"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Recommended Service"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.recommendedService}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"amp service"})]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,marginBottom:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",color:t.cardText,marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Connected Loads:"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["General Lighting: ",o.generalLighting.toLocaleString()," VA"]}),i.jsxs("div",{children:["Small Appliance: ",o.smallApplianceLoad.toLocaleString()," VA"]}),i.jsxs("div",{children:["Laundry: ",o.laundryLoad.toLocaleString()," VA"]}),i.jsx("div",{style:{borderTop:`1px solid ${t.cardBorder}`,marginTop:"0.5rem",paddingTop:"0.5rem"},children:i.jsxs("strong",{children:["Subtotal: ",o.subtotalVA.toLocaleString()," VA"]})})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5",width:"100%"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Demand Loads (with factors applied):"}),i.jsxs("div",{children:["Lighting: ",o.demandLighting.toFixed(0)," VA"]}),r.rangeKW>0&&i.jsxs("div",{children:["Range: ",o.rangeDemand.toLocaleString()," W"]}),r.dryerKW>0&&i.jsxs("div",{children:["Dryer: ",o.dryerDemand.toLocaleString()," W"]}),r.waterHeaterKW>0&&i.jsxs("div",{children:["Water Heater: ",o.waterHeaterDemand.toLocaleString()," W"]}),r.hvacKW>0&&i.jsxs("div",{children:["HVAC: ",o.hvacDemand.toLocaleString()," W"]}),r.otherLoadsKW>0&&i.jsxs("div",{children:["Other: ",o.otherDemand.toLocaleString()," W"]})]})]})})]})]})},wI=({data:r,setData:e,colors:t})=>{const n={office:3.5,warehouse:.25,retail:3,school:3,restaurant:2,hotel:2,hospital:2,industrial:2},a=(()=>{const c=parseFloat(r.squareFootage)||0,u=parseFloat(r.hvacLoad)||0,f=parseFloat(r.receptacleLoad)||0,d=parseFloat(r.motorLoads)||0,y=parseFloat(r.otherLoads)||0,w=parseFloat(r.demandFactor)/100,C=parseFloat(r.voltage),v=c*n[r.occupancyType],B=v/1e3+u+f+d+y,I=B*w;let z;return r.phase==="single"?z=I*1e3/C:z=I*1e3/(1.732*C),{lightingVA:v,lightingKW:v/1e3,hvac:u,receptacles:f,motors:d,other:y,totalConnectedKW:B,demandLoadKW:I,amperage:z}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Square Footage"}),i.jsx("input",{type:"number",value:r.squareFootage,onChange:c=>e(u=>({...u,squareFootage:c.target.value})),placeholder:"Building area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Occupancy Type"}),i.jsxs("select",{value:r.occupancyType,onChange:c=>e(u=>({...u,occupancyType:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"office",children:"Office (3.5 VA/sq ft)"}),i.jsx("option",{value:"warehouse",children:"Warehouse (0.25 VA/sq ft)"}),i.jsx("option",{value:"retail",children:"Retail (3.0 VA/sq ft)"}),i.jsx("option",{value:"school",children:"School (3.0 VA/sq ft)"}),i.jsx("option",{value:"restaurant",children:"Restaurant (2.0 VA/sq ft)"}),i.jsx("option",{value:"hotel",children:"Hotel (2.0 VA/sq ft)"}),i.jsx("option",{value:"hospital",children:"Hospital (2.0 VA/sq ft)"}),i.jsx("option",{value:"industrial",children:"Industrial (2.0 VA/sq ft)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"HVAC Load (kW)"}),i.jsx("input",{type:"number",value:r.hvacLoad,onChange:c=>e(u=>({...u,hvacLoad:c.target.value})),placeholder:"Total HVAC",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Receptacle Load (kW)"}),i.jsx("input",{type:"number",value:r.receptacleLoad,onChange:c=>e(u=>({...u,receptacleLoad:c.target.value})),placeholder:"Receptacles",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Loads (kW)"}),i.jsx("input",{type:"number",value:r.motorLoads,onChange:c=>e(u=>({...u,motorLoads:c.target.value})),placeholder:"Total motors",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Other Loads (kW)"}),i.jsx("input",{type:"number",value:r.otherLoads,onChange:c=>e(u=>({...u,otherLoads:c.target.value})),placeholder:"Additional",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Demand Factor (%)"}),i.jsx("input",{type:"number",value:r.demandFactor,onChange:c=>e(u=>({...u,demandFactor:c.target.value})),placeholder:"80-100%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Peak load %"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"System Voltage"}),i.jsxs("select",{value:r.voltage,onChange:c=>e(u=>({...u,voltage:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"277",children:"277V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["System",i.jsx("br",{})," Phase"]}),i.jsxs("select",{value:r.phase,onChange:c=>e(u=>({...u,phase:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]})]}),r.squareFootage&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Connected Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:a.totalConnectedKW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Demand Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:a.demandLoadKW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Amperage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:a.amperage.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"amps"})]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,marginBottom:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",color:t.cardText,marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Connected Loads:"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Lighting: ",a.lightingKW.toFixed(2)," kW (",a.lightingVA.toFixed(0)," VA)"]}),r.hvacLoad>0&&i.jsxs("div",{children:["HVAC: ",a.hvac.toFixed(2)," kW"]}),r.receptacleLoad>0&&i.jsxs("div",{children:["Receptacles: ",a.receptacles.toFixed(2)," kW"]}),r.motorLoads>0&&i.jsxs("div",{children:["Motors: ",a.motors.toFixed(2)," kW"]}),r.otherLoads>0&&i.jsxs("div",{children:["Other: ",a.other.toFixed(2)," kW"]})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"System Configuration"}),i.jsxs("div",{children:[r.voltage,"V ",r.phase==="single"?"Single":"Three"," Phase"]}),i.jsxs("div",{children:[r.demandFactor,"% demand factor applied"]})]})]})})]})]})},SI=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=me.useState("residential"),[a,c]=me.useState({squareFootage:"",smallApplianceCircuits:"2",laundryCircuits:"1",rangeKW:"",dryerKW:"5",waterHeaterKW:"",hvacKW:"",otherLoadsKW:"",voltage:"240"}),[u,f]=me.useState({squareFootage:"",occupancyType:"office",hvacLoad:"",receptacleLoad:"",motorLoads:"",otherLoads:"",demandFactor:"100",voltage:"480",phase:"three"}),d={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};return me.useImperativeHandle(t,()=>({exportPDF:()=>{let y;if(n==="residential"){if(!a.squareFootage){alert("Please enter square footage before exporting");return}const w=parseFloat(a.squareFootage),C=parseFloat(a.smallApplianceCircuits)||0,v=parseFloat(a.laundryCircuits)||0,B=parseFloat(a.rangeKW)||0,I=parseFloat(a.dryerKW)||0,z=parseFloat(a.waterHeaterKW)||0,A=parseFloat(a.hvacKW)||0,M=parseFloat(a.otherLoadsKW)||0,U=parseFloat(a.voltage),F=w*3,se=C*1500,ue=v*1500,L=F+se+ue;let j=0;L<=3e3?j=L:L<=12e4?j=3e3+(L-3e3)*.35:j=3e3+117e3*.35+(L-12e4)*.25;let T=0;B>0&&(T=B<=12?8e3:8e3+(B-12)*400);const V=Math.max(I*1e3,5e3),k=z*1e3,b=A*1e3,N=M*1e3,D=j+T+V+k+b+N,q=(D/1e3).toFixed(2),ie=(D/U).toFixed(1);let oe=100;parseFloat(ie)>200?oe=400:parseFloat(ie)>150?oe=200:parseFloat(ie)>100&&(oe=150);const ne={squareFootage:`${a.squareFootage} sq ft`,smallApplianceCircuits:`${C} circuits @ 1500 VA each`,laundryCircuits:`${v} circuit @ 1500 VA`,serviceVoltage:`${a.voltage}V`};B>0&&(ne.electricRange=`${B} kW`),I>0&&(ne.electricDryer=`${I} kW`),z>0&&(ne.waterHeater=`${z} kW`),A>0&&(ne.hvacHeat=`${A} kW`),M>0&&(ne.otherLoads=`${M} kW`),y={calculatorName:"Load Calculations - Residential (NEC 220.82)",inputs:ne,results:{totalDemandLoad:`${q} kW (${D.toLocaleString()} VA)`,totalAmperage:`${ie} Amps`,recommendedService:`${oe} Amp Service`},additionalInfo:{generalLighting:`${F.toLocaleString()} VA (${w} sq ft × 3 VA/sq ft)`,smallAppliance:`${se.toLocaleString()} VA`,laundry:`${ue.toLocaleString()} VA`,lightingSubtotal:`${L.toLocaleString()} VA`,demandLightingAfterFactors:`${j.toFixed(0)} VA`,...B>0&&{rangeDemand:`${T.toLocaleString()} W`},...I>0&&{dryerDemand:`${V.toLocaleString()} W (min 5000 W)`},...z>0&&{waterHeaterDemand:`${k.toLocaleString()} W`},...A>0&&{hvacDemand:`${b.toLocaleString()} W`},...M>0&&{otherDemand:`${N.toLocaleString()} W`}},necReferences:["NEC 220.82 - Dwelling Unit Optional Calculation","NEC 220.83 - Existing Dwelling Unit","NEC Table 220.55 - Demand Factors for Electric Ranges","General lighting: 3 VA per square foot (NEC 220.12)","Demand factors: First 3000 VA @ 100%, Next 117000 VA @ 35%, Remainder @ 25%"]}}else if(n==="commercial"){if(!u.squareFootage){alert("Please enter square footage before exporting");return}const w={office:3.5,warehouse:.25,retail:3,school:3,restaurant:2,hotel:2,hospital:2,industrial:2},C={office:"Office",warehouse:"Warehouse",retail:"Retail",school:"School",restaurant:"Restaurant",hotel:"Hotel",hospital:"Hospital",industrial:"Industrial"},v=parseFloat(u.squareFootage),B=parseFloat(u.hvacLoad)||0,I=parseFloat(u.receptacleLoad)||0,z=parseFloat(u.motorLoads)||0,A=parseFloat(u.otherLoads)||0,M=parseFloat(u.demandFactor)/100,U=parseFloat(u.voltage),F=v*w[u.occupancyType],se=(F/1e3).toFixed(2),ue=(F/1e3+B+I+z+A).toFixed(2),L=(parseFloat(ue)*M).toFixed(2);let j;u.phase==="single"?j=(parseFloat(L)*1e3/U).toFixed(1):j=(parseFloat(L)*1e3/(1.732*U)).toFixed(1);const T={squareFootage:`${u.squareFootage} sq ft`,occupancyType:`${C[u.occupancyType]} (${w[u.occupancyType]} VA/sq ft)`,demandFactor:`${u.demandFactor}%`,systemConfiguration:`${u.voltage}V ${u.phase==="single"?"Single":"Three"} Phase`};B>0&&(T.hvacLoad=`${B} kW`),I>0&&(T.receptacleLoad=`${I} kW`),z>0&&(T.motorLoads=`${z} kW`),A>0&&(T.otherLoads=`${A} kW`),y={calculatorName:"Load Calculations - Commercial",inputs:T,results:{connectedLoad:`${ue} kW`,demandLoad:`${L} kW`,totalAmperage:`${j} Amps`},additionalInfo:{lighting:`${se} kW (${F.toFixed(0)} VA)`,calculationMethod:u.phase==="single"?`Amperage = (${L} kW × 1000) ÷ ${U}V = ${j} A`:`Amperage = (${L} kW × 1000) ÷ (1.732 × ${U}V) = ${j} A`,demandFactorNote:`${u.demandFactor}% demand factor applied to total connected load`},necReferences:["NEC Article 220 - Branch-Circuit, Feeder, and Service Load Calculations","NEC Table 220.12 - General Lighting Loads by Occupancy","NEC 220.42 - General Lighting","NEC 220.50 - Motors","Always verify with actual connected loads and local codes"]}}sn(y)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"residential",label:"Residential"},{id:"commercial",label:"Commercial"}].map(y=>i.jsx("button",{onClick:()=>o(y.id),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.625rem 1rem",background:n===y.id?"#3b82f6":d.sectionBg,color:n===y.id?"white":d.labelText,border:`1px solid ${n===y.id?"#3b82f6":d.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:y.label},y.id))}),i.jsx("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:n==="residential"?i.jsx(bI,{data:a,setData:c,colors:d}):i.jsx(wI,{data:u,setData:f,colors:d})})]})}),_I=me.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=me.useState("sizing"),[o,a]=me.useState(""),[c,u]=me.useState("480"),[f,d]=me.useState("208"),[y,w]=me.useState("three"),[C,v]=me.useState("continuous"),[B,I]=me.useState("0.85"),[z,A]=me.useState(""),[M,U]=me.useState("480"),[F,se]=me.useState("208"),[ue,L]=me.useState("three"),j={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},T=[3,6,9,15,30,45,75,112.5,150,225,300,500,750,1e3,1500,2e3,2500,3e3],V=()=>{const D=parseFloat(o)||0;if(D===0)return null;let q=1;C==="continuous"&&(q=1.25);const ie=D*q,oe=T.find(ne=>ne>=ie)||ie;return{loadKVA:D,requiredKVA:ie.toFixed(1),recommendedSize:oe,utilizationPercent:(D/oe*100).toFixed(1)}},k=()=>{const D=parseFloat(z)||0;if(D===0)return null;const q=parseFloat(M),ie=parseFloat(F);let oe,ne;return ue==="single"?(oe=D*1e3/q,ne=D*1e3/ie):(oe=D*1e3/(1.732*q),ne=D*1e3/(1.732*ie)),{kva:D,primaryCurrent:oe.toFixed(1),secondaryCurrent:ne.toFixed(1),primaryVoltage:q,secondaryVoltage:ie}},b=V(),N=k();return me.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="sizing"){if(!o){alert("Please enter load (kVA) before exporting to PDF");return}const D={calculatorName:"Transformer Calculations - Transformer Sizing",inputs:{Load:`${o} kVA`,"Primary Voltage":`${c}V`,"Secondary Voltage":`${f}V`,Phase:y==="single"?"Single Phase":"Three Phase","Load Type":C==="continuous"?"Continuous (125% sizing)":"Non-Continuous (100% sizing)","Power Factor":B},results:{"Recommended Transformer Size":`${b.recommendedSize} kVA`,Configuration:`${c}V to ${f}V`,Phase:y==="single"?"Single Phase":"Three Phase","Connected Load":`${b.loadKVA} kVA`,"Required Capacity":`${b.requiredKVA} kVA`,Utilization:`${b.utilizationPercent}%`},additionalInfo:{"Sizing Factor":C==="continuous"?"125% (continuous loads)":"100% (non-continuous loads)","Calculation Method":"Required Capacity = Connected Load × Sizing Factor","Utilization Note":parseFloat(b.utilizationPercent)>80?"WARNING: Utilization above 80% may result in higher operating temperatures and reduced equipment life":"Utilization is within acceptable range"},necReferences:["NEC 450.3 - Overcurrent Protection for Transformers","NEC 450.9 - Ventilation Requirements","NEC 450.11 - Marking Requirements","NEC 450.21 - Dry-Type Transformers Installed Indoors","Size continuous loads at 125% per NEC requirements","Keep utilization below 80% for optimal efficiency and equipment life","Consider future load growth (typically 20-25% spare capacity)","Account for inrush current for motor loads","Consider ambient temperature and ventilation requirements"]};sn(D)}else if(t==="currents"){if(!z){alert("Please enter transformer rating (kVA) before exporting to PDF");return}const D=ue==="single"?"I = (kVA × 1000) ÷ V":"I = (kVA × 1000) ÷ (1.732 × V)",q={calculatorName:"Transformer Calculations - Current Calculations",inputs:{"Transformer Rating":`${z} kVA`,"Primary Voltage":`${M}V`,"Secondary Voltage":`${F}V`,Phase:ue==="single"?"Single Phase":"Three Phase"},results:{Configuration:`${N.kva} kVA, ${ue==="single"?"Single":"Three"} Phase`,"Voltage Ratio":`${N.primaryVoltage}V / ${N.secondaryVoltage}V`,"Primary Current":`${N.primaryCurrent} A`,"Secondary Current":`${N.secondaryCurrent} A`},additionalInfo:{"Formula Used":D,"Primary Side":`${N.primaryCurrent}A at ${N.primaryVoltage}V`,"Secondary Side":`${N.secondaryCurrent}A at ${N.secondaryVoltage}V`,Application:"Use these currents for selecting primary and secondary protection devices per NEC Article 450"},necReferences:["NEC Article 450 - Transformers and Transformer Vaults","NEC 450.3 - Overcurrent Protection","Single Phase Formula: I = (kVA × 1000) ÷ V","Three Phase Formula: I = (kVA × 1000) ÷ (1.732 × V)","Primary and secondary protection must be sized per calculated currents","Consider temperature correction and adjustment factors for conductors","Account for voltage drop in feeder calculations"]};sn(q)}}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>n("sizing"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="sizing"?"#3b82f6":"transparent",color:t==="sizing"?"white":j.labelText,border:`1px solid ${t==="sizing"?"#3b82f6":j.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Transformer Sizing"}),i.jsx("button",{onClick:()=>n("currents"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="currents"?"#3b82f6":"transparent",color:t==="currents"?"white":j.labelText,border:`1px solid ${t==="currents"?"#3b82f6":j.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Current Calculations"})]})}),t==="sizing"?i.jsxs("div",{children:[i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${j.cardBorder}`,paddingBottom:"0.5rem"},children:"Transformer Parameters"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Load (kVA)"}),i.jsx("input",{type:"number",value:o,onChange:D=>a(D.target.value),placeholder:"Connected load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.subtleText,marginTop:"0.25rem"},children:"Total connected or demand load"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Primary Voltage"}),i.jsxs("select",{value:c,onChange:D=>u(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"}),i.jsx("option",{value:"2400",children:"2400V"}),i.jsx("option",{value:"4160",children:"4160V"}),i.jsx("option",{value:"12470",children:"12470V"}),i.jsx("option",{value:"13200",children:"13200V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Secondary Voltage"}),i.jsxs("select",{value:f,onChange:D=>d(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"120",children:"120V"}),i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"277",children:"277V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Phase"}),i.jsxs("select",{value:y,onChange:D=>w(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Load Type"}),i.jsxs("select",{value:C,onChange:D=>v(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"continuous",children:"Continuous (125% sizing)"}),i.jsx("option",{value:"noncontinuous",children:"Non-Continuous (100% sizing)"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.subtleText,marginTop:"0.25rem"},children:"Continuous loads operate 3+ hours"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),i.jsxs("select",{value:B,onChange:D=>I(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"1.0",children:"1.0 (Unity)"}),i.jsx("option",{value:"0.95",children:"0.95 (Excellent)"}),i.jsx("option",{value:"0.9",children:"0.9 (Good)"}),i.jsx("option",{value:"0.85",children:"0.85 (Typical)"}),i.jsx("option",{value:"0.8",children:"0.8 (Poor)"})]})]})]})]}),b&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem"},children:"Sizing Calculation"}),i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${j.cardBorder}`},children:[i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:j.labelText},children:[i.jsx("strong",{style:{color:j.cardText},children:"Connected Load:"})," ",b.loadKVA," kVA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:j.labelText},children:[i.jsx("strong",{style:{color:j.cardText},children:"Required Capacity:"})," ",b.requiredKVA," kVA"]}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:j.subtleText,fontStyle:"italic"},children:["(",C==="continuous"?"125%":"100%"," sizing factor applied)"]})]})]}),i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem"},children:"Recommended Transformer"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Transformer Size"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[b.recommendedSize," kVA"]})]}),i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${j.cardBorder}`,marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:j.labelText,marginBottom:"0.5rem"},children:[i.jsx("strong",{style:{color:j.cardText},children:"Configuration:"})," ",c,"V to ",f,"V"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:j.labelText},children:[i.jsx("strong",{style:{color:j.cardText},children:"Phase:"})," ",y==="single"?"Single":"Three"," Phase"]})]}),i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Utilization"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:[b.utilizationPercent,"%"]})]})]}),parseFloat(b.utilizationPercent)>80&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(eu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"High Utilization Warning"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Transformer utilization above 80% may result in higher operating temperatures and reduced equipment life. Consider next size up for better efficiency."})]})]})})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(us,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Transformer Sizing Guidelines:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Size for continuous loads at 125% per NEC 450.3"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider future load growth (typically 20-25%)"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Keep utilization below 80% for optimal efficiency"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Account for inrush current for motor loads"}),i.jsx("li",{children:"Consider ambient temperature and ventilation"})]})]})]})})]}):i.jsxs("div",{children:[i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${j.cardBorder}`,paddingBottom:"0.5rem"},children:"Transformer Information"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Transformer Rating (kVA)"}),i.jsx("input",{type:"number",value:z,onChange:D=>A(D.target.value),placeholder:"Transformer kVA",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Primary Voltage"}),i.jsxs("select",{value:M,onChange:D=>U(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"}),i.jsx("option",{value:"2400",children:"2400V"}),i.jsx("option",{value:"4160",children:"4160V"}),i.jsx("option",{value:"12470",children:"12470V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Secondary Voltage"}),i.jsxs("select",{value:F,onChange:D=>se(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"120",children:"120V"}),i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"277",children:"277V"}),i.jsx("option",{value:"480",children:"480V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Phase"}),i.jsxs("select",{value:ue,onChange:D=>L(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]})]})]}),N&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem"},children:"Transformer Configuration"}),i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${j.cardBorder}`},children:[i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:j.labelText},children:[i.jsx("strong",{style:{color:j.cardText},children:"Rating:"})," ",N.kva," kVA, ",ue==="single"?"Single":"Three"," Phase"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:j.labelText},children:[i.jsx("strong",{style:{color:j.cardText},children:"Configuration:"})," ",N.primaryVoltage,"V / ",N.secondaryVoltage,"V"]})]})]}),i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#1e40af",marginTop:0,marginBottom:"1rem"},children:"Primary Side"}),i.jsx("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${j.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:j.labelText},children:[i.jsx("strong",{style:{color:j.cardText},children:"Voltage:"})," ",N.primaryVoltage,"V"]})}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Primary Current"}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:N.primaryCurrent}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#059669",marginTop:0,marginBottom:"1rem"},children:"Secondary Side"}),i.jsx("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${j.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:j.labelText},children:[i.jsx("strong",{style:{color:j.cardText},children:"Voltage:"})," ",N.secondaryVoltage,"V"]})}),i.jsxs("div",{style:{background:"#d1fae5",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#059669",marginBottom:"0.25rem"},children:"Secondary Current"}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#059669"},children:N.secondaryCurrent}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#059669",marginTop:"0.25rem"},children:"Amperes"})]})]})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(us,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Current Formulas:"}),i.jsxs("div",{style:{fontSize:"0.8125rem",marginBottom:"0.25rem"},children:[i.jsx("strong",{children:"Single Phase:"})," I = (kVA × 1000) ÷ V"]}),i.jsxs("div",{style:{fontSize:"0.8125rem",marginBottom:"0.5rem"},children:[i.jsx("strong",{children:"Three Phase:"})," I = (kVA × 1000) ÷ (1.732 × V)"]}),i.jsx("div",{style:{fontSize:"0.75rem",fontStyle:"italic"},children:"Note: Use these currents for selecting primary and secondary protection devices per NEC Article 450."})]})]})})]}),i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${j.cardBorder}`,fontSize:"0.8125rem",color:j.labelText,marginTop:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:j.cardText},children:"NEC Article 450 - Transformers and Transformer Vaults:"}),"450.3: Overcurrent protection • 450.9: Ventilation requirements • 450.11: Marking • 450.21: Dry-type transformers indoors"]})]})}),TI=me.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=me.useState("residential"),[o,a]=me.useState(""),[c,u]=me.useState(""),[f,d]=me.useState(""),[y,w]=me.useState(""),[C,v]=me.useState(""),[B,I]=me.useState(""),[z,A]=me.useState("240"),[M,U]=me.useState(""),[F,se]=me.useState("80"),[ue,L]=me.useState("480"),[j,T]=me.useState("three"),[V,k]=me.useState("25"),b={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},N=()=>{const oe=parseFloat(o)||0,ne=parseFloat(c)||0,ve=parseFloat(f)||0,be=parseFloat(y)||0,Z=parseFloat(C)||0,W=parseFloat(B)||0,J=parseFloat(z),re=oe*3,he=2*1500,ge=1500,_e=re+he+ge;let fe=0;_e<=3e3?fe=_e:fe=3e3+(_e-3e3)*.35;let xe=0;be>0&&(be<=12e3?xe=8e3:xe=8e3+(be-12e3)*.05);const Pe=Math.max(Z,5e3),We=ve,Qe=ne,Xe=W,Fe=fe+xe+Pe+We+Qe+Xe,de=Fe/J;let Pt=100;return de>200?Pt=400:de>150?Pt=200:de>100&&(Pt=150),{generalLighting:re,smallAppliance:he,laundry:ge,subtotal:_e,demandLighting:fe,rangeDemand:xe,dryerDemand:Pe,whDemand:We,hvacDemand:Qe,otherDemand:Xe,totalDemand:Fe,totalAmperage:de,recommendedService:Pt,conductorSize:{100:"4 AWG",150:"1/0 AWG",200:"2/0 AWG",400:"400 kcmil"}[Pt]}},D=()=>{const oe=parseFloat(M)||0,ne=parseFloat(F)/100,ve=parseFloat(V)/100,be=parseFloat(ue),Z=oe*ne,W=Z*(1+ve);let J;j==="single"?J=W*1e3/be:J=W*1e3/(1.732*be);const he=[100,150,200,225,400,600,800,1e3,1200,1600,2e3,2500,3e3,4e3].find(ge=>ge>=J)||Math.ceil(J/100)*100;return{connectedLoad:oe,demandLoad:Z,futureLoad:W,amperage:J,recommendedService:he}},q=N(),ie=D();return me.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="residential"){if(!o){alert("Please enter square footage before exporting to PDF");return}const oe={calculatorName:"Service Entrance Sizing - Residential",inputs:{"Square Footage":`${o} sq ft`,"HVAC/Heat Load":c?`${c} W`:"Not specified","Water Heater":f?`${f} W`:"Not specified","Range/Oven":y?`${y} W`:"Not specified",Dryer:C?`${C} W`:"Not specified","Other Loads":B?`${B} W`:"Not specified","Service Voltage":`${z}V`},results:{"Recommended Service Size":`${q.recommendedService}A`,"Service Conductors":`${q.conductorSize} Copper`,"Total Demand Load":`${q.totalDemand.toFixed(0)} W`,"Calculated Amperage":`${q.totalAmperage.toFixed(1)} A`},additionalInfo:{"General Lighting Load":`${q.generalLighting.toLocaleString()} VA`,"Small Appliance Circuits":`${q.smallAppliance.toLocaleString()} VA`,"Laundry Circuit":`${q.laundry.toLocaleString()} VA`,"Lighting Demand (after factors)":`${q.demandLighting.toFixed(0)} W`,"Range Demand":y?`${q.rangeDemand.toFixed(0)} W`:"N/A","Dryer Demand":C?`${q.dryerDemand.toFixed(0)} W`:"N/A","Water Heater":f?`${q.whDemand.toFixed(0)} W`:"N/A",HVAC:c?`${q.hvacDemand.toFixed(0)} W`:"N/A","Calculation Method":"NEC Article 220.82 - Dwelling Unit Optional Calculation"},necReferences:["NEC 220.82 - Dwelling Unit Optional Calculation","NEC 230.42 - Minimum Size and Rating (service conductors)","NEC 230.79 - Rating of Service Disconnecting Means","NEC 230.90 - Where Required (overload protection)","NEC Table 310.15(B)(16) - Allowable Ampacities","Service conductors shown are approximate for 75°C copper. Consult NEC for exact sizing with all derating factors."]};sn(oe)}else if(t==="commercial"){if(!M){alert("Please enter total connected load before exporting to PDF");return}const oe={calculatorName:"Service Entrance Sizing - Commercial",inputs:{"Total Connected Load":`${M} kW`,"Demand Factor":`${F}%`,"Future Expansion":`${V}%`,"Service Voltage":`${ue}V`,"System Phase":j==="single"?"Single Phase":"Three Phase"},results:{"Recommended Service Size":`${ie.recommendedService}A`,"System Configuration":`${ue}V ${j==="single"?"Single":"Three"} Phase`,"Connected Load":`${ie.connectedLoad.toFixed(1)} kW`,"Demand Load":`${ie.demandLoad.toFixed(1)} kW`,"With Future Expansion":`${ie.futureLoad.toFixed(1)} kW`,"Calculated Amperage":`${ie.amperage.toFixed(1)} A`},additionalInfo:{"Calculation Method":"Commercial demand calculation with future expansion factor","Demand Factor Applied":`${F}% of connected load`,"Future Growth Allowance":`${V}% spare capacity`,"Formula Used":j==="single"?"Amperage = (kW × 1000) / Voltage":"Amperage = (kW × 1000) / (1.732 × Voltage)"},necReferences:["NEC Article 220 Part IV - Optional Feeder and Service Load Calculations","NEC 220.40 - General (demand factors)","NEC 230.42 - Minimum Size and Rating","NEC 230.79 - Rating of Service Disconnecting Means","Consider demand factors per NEC 220.40 and Article 220 Part IV","Include motor loads, HVAC, and large equipment per NEC requirements","Review utility requirements and available fault current","Future expansion typically 20-30% spare capacity"]};sn(oe)}}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>n("residential"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="residential"?"#3b82f6":"transparent",color:t==="residential"?"white":b.labelText,border:`1px solid ${t==="residential"?"#3b82f6":b.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Residential"}),i.jsx("button",{onClick:()=>n("commercial"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="commercial"?"#3b82f6":"transparent",color:t==="commercial"?"white":b.labelText,border:`1px solid ${t==="commercial"?"#3b82f6":b.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Commercial"})]})}),t==="residential"?i.jsxs("div",{children:[i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:b.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${b.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Information"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Square Footage"}),i.jsx("input",{type:"number",value:o,onChange:oe=>a(oe.target.value),placeholder:"Living area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:b.subtleText,marginTop:"0.25rem"},children:"Heated/cooled living space"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"HVAC/Heat Load (Watts)"}),i.jsx("input",{type:"number",value:c,onChange:oe=>u(oe.target.value),placeholder:"Largest load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Water Heater (Watts)"}),i.jsx("input",{type:"number",value:f,onChange:oe=>d(oe.target.value),placeholder:"Nameplate rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Range/Oven (Watts)"}),i.jsx("input",{type:"number",value:y,onChange:oe=>w(oe.target.value),placeholder:"Electric range",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Dryer (Watts)"}),i.jsx("input",{type:"number",value:C,onChange:oe=>v(oe.target.value),placeholder:"Electric dryer",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:b.subtleText,marginTop:"0.25rem"},children:"Minimum 5000W if electric"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Other Loads (Watts)"}),i.jsx("input",{type:"number",value:B,onChange:oe=>I(oe.target.value),placeholder:"Pool, spa, etc.",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),i.jsxs("select",{value:z,onChange:oe=>A(oe.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"208",children:"208V"})]})]})]})]}),o&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:b.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${b.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Breakdown"}),i.jsxs("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${b.cardBorder}`},children:[i.jsx("strong",{style:{display:"block",marginBottom:"0.5rem",color:b.cardText,fontSize:"0.875rem"},children:"Connected Loads:"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:b.labelText,marginBottom:"0.25rem"},children:["General Lighting: ",q.generalLighting.toLocaleString()," VA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:b.labelText,marginBottom:"0.25rem"},children:["Small Appliance: ",q.smallAppliance.toLocaleString()," VA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:b.labelText,marginBottom:"0.5rem"},children:["Laundry: ",q.laundry.toLocaleString()," VA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:b.subtleText,paddingTop:"0.5rem",borderTop:`1px solid ${b.cardBorder}`},children:["Subtotal: ",q.subtotal.toLocaleString()," VA"]})]}),i.jsxs("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${b.cardBorder}`},children:[i.jsx("strong",{style:{display:"block",marginBottom:"0.5rem",color:b.cardText,fontSize:"0.875rem"},children:"Demand Loads (after factors):"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:b.labelText,marginBottom:"0.25rem"},children:["Lighting: ",q.demandLighting.toFixed(0)," W"]}),y&&i.jsxs("div",{style:{fontSize:"0.875rem",color:b.labelText,marginBottom:"0.25rem"},children:["Range: ",q.rangeDemand.toFixed(0)," W"]}),C&&i.jsxs("div",{style:{fontSize:"0.875rem",color:b.labelText,marginBottom:"0.25rem"},children:["Dryer: ",q.dryerDemand.toFixed(0)," W"]}),f&&i.jsxs("div",{style:{fontSize:"0.875rem",color:b.labelText,marginBottom:"0.25rem"},children:["Water Heater: ",q.whDemand.toFixed(0)," W"]}),c&&i.jsxs("div",{style:{fontSize:"0.875rem",color:b.labelText,marginBottom:"0.25rem"},children:["HVAC: ",q.hvacDemand.toFixed(0)," W"]}),B&&i.jsxs("div",{style:{fontSize:"0.875rem",color:b.labelText},children:["Other: ",q.otherDemand.toFixed(0)," W"]})]})]}),i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:b.cardText,marginTop:0,marginBottom:"1rem"},children:"Service Sizing Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:b.labelText,marginBottom:"0.25rem"},children:"Total Demand Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:b.cardText},children:q.totalDemand.toFixed(0)}),i.jsx("div",{style:{fontSize:"0.75rem",color:b.labelText,marginTop:"0.25rem"},children:"Watts"})]}),i.jsxs("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:b.labelText,marginBottom:"0.25rem"},children:"Calculated Amperage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:b.cardText},children:q.totalAmperage.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:b.labelText,marginTop:"0.25rem"},children:"Amperes"})]})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Recommended Service Size"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[q.recommendedService,"A"]})]}),i.jsx("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center",border:`1px solid ${b.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:b.labelText},children:[i.jsx("strong",{style:{color:b.cardText},children:"Service Conductors:"})," ",q.conductorSize," Copper"]})})]})]}),i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(us,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Important Notes:"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Service conductors are approximate for 75°C copper. Consult NEC Table 310.15(B)(16) for exact sizing with all derating factors."})]})]})})]}):i.jsxs("div",{children:[i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:b.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${b.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Information"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Total Connected Load (kW)"}),i.jsx("input",{type:"number",value:M,onChange:oe=>U(oe.target.value),placeholder:"Total building load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Demand Factor (%)"}),i.jsx("input",{type:"number",value:F,onChange:oe=>se(oe.target.value),placeholder:"Typically 70-90%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:b.subtleText,marginTop:"0.25rem"},children:"Peak demand percentage"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Future Expansion (%)"}),i.jsx("input",{type:"number",value:V,onChange:oe=>k(oe.target.value),placeholder:"Typically 20-30%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:b.subtleText,marginTop:"0.25rem"},children:"Spare capacity for growth"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),i.jsxs("select",{value:ue,onChange:oe=>L(oe.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"System Phase"}),i.jsxs("select",{value:j,onChange:oe=>T(oe.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]})]})]}),M&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:b.cardText,marginTop:0,marginBottom:"1rem"},children:"Load Calculation"}),i.jsxs("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${b.cardBorder}`,marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:b.labelText},children:[i.jsx("strong",{style:{color:b.cardText},children:"Connected Load:"})," ",ie.connectedLoad.toFixed(1)," kW"]}),i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:b.labelText},children:[i.jsxs("strong",{style:{color:b.cardText},children:["Demand Load (",F,"%):"]})," ",ie.demandLoad.toFixed(1)," kW"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:b.labelText},children:[i.jsxs("strong",{style:{color:b.cardText},children:["With Future Expansion (",V,"%):"]})," ",ie.futureLoad.toFixed(1)," kW"]})]}),i.jsxs("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:b.labelText,marginBottom:"0.25rem"},children:"Calculated Amperage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:b.cardText},children:ie.amperage.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:b.labelText,marginTop:"0.25rem"},children:"Amperes"})]})]}),i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:b.cardText,marginTop:0,marginBottom:"1rem"},children:"Recommended Service"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Service Size"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[ie.recommendedService,"A"]})]}),i.jsx("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center",border:`1px solid ${b.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:b.labelText},children:["@ ",ue,"V ",j==="single"?"Single":"Three"," Phase"]})})]})]}),i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(us,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Commercial Service Considerations:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Include demand factors per NEC 220.40 and Article 220 Part IV"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider future expansion (typically 20-30% spare capacity)"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Account for motor loads, HVAC, and large equipment"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Review utility requirements and available fault current"}),i.jsx("li",{children:"Consider separate services for different occupancies"})]})]})]})})]}),i.jsxs("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${b.cardBorder}`,fontSize:"0.8125rem",color:b.labelText,marginTop:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:b.cardText},children:"NEC Article 230 - Services and Service Equipment:"}),"220.82: Dwelling unit optional calculation • 230.42: Minimum conductor size • 230.79: Disconnecting means rating • 230.90: Overload protection"]})]})}),CI=({gecData:r,setGecData:e,colors:t})=>{const n={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}},a=(()=>{if(!r.serviceSize)return null;const c=r.serviceSize;let u="";const f=["14","12","10","8","6","4","3","2","1"],d=["1/0","2/0","3/0","4/0"],y=parseInt(c);return f.includes(c)?parseInt(c)>=2?u="2 or smaller":c==="1"&&(u="1 or 1/0"):d.includes(c)?c==="1/0"?u="1 or 1/0":c==="2/0"||c==="3/0"?u="2/0 or 3/0":c==="4/0"&&(u="4/0 to 350"):isNaN(y)||(y>=250&&y<=350?u="4/0 to 350":y>=400&&y<=600?u="400 to 600":y>=650&&y<=1100?u="650 to 1100":y>1100&&(u="over 1100")),{serviceSize:c,category:u,gecSize:n[r.conductorMaterial][u]||"N/A"}})();return i.jsxs("div",{className:cs.container,children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Service Conductor",i.jsx("br",{})," Size"]}),i.jsxs("select",{value:r.serviceSize,onChange:c=>e(u=>({...u,serviceSize:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"",children:"Select Size"}),i.jsx("option",{value:"8",children:"8 AWG"}),i.jsx("option",{value:"6",children:"6 AWG"}),i.jsx("option",{value:"4",children:"4 AWG"}),i.jsx("option",{value:"2",children:"2 AWG"}),i.jsx("option",{value:"1",children:"1 AWG"}),i.jsx("option",{value:"1/0",children:"1/0 AWG"}),i.jsx("option",{value:"2/0",children:"2/0 AWG"}),i.jsx("option",{value:"3/0",children:"3/0 AWG"}),i.jsx("option",{value:"4/0",children:"4/0 AWG"}),i.jsx("option",{value:"250",children:"250 kcmil"}),i.jsx("option",{value:"350",children:"350 kcmil"}),i.jsx("option",{value:"500",children:"500 kcmil"}),i.jsx("option",{value:"750",children:"750 kcmil"}),i.jsx("option",{value:"1000",children:"1000 kcmil"}),i.jsx("option",{value:"1500",children:"1500 kcmil"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Largest ungrounded service conductor"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["GEC ",i.jsx("br",{}),"Material"]}),i.jsxs("select",{value:r.conductorMaterial,onChange:c=>e(u=>({...u,conductorMaterial:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"copper",children:"Copper"}),i.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]}),a&&a.gecSize!=="N/A"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Grounding Electrode Conductor"}),i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[a.gecSize," AWG"]}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Per NEC Table 250.66"}),i.jsxs("div",{children:["Service conductor: ",a.serviceSize," AWG ",r.conductorMaterial]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Important Notes:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"GEC to rod/pipe/plate need not be larger than 6 AWG copper"}),i.jsx("li",{children:"GEC to concrete-encased electrode need not be larger than 4 AWG copper"}),i.jsx("li",{children:"Must be continuous without splices (except as permitted)"})]})]})]})]})},AI=({egcData:r,setEgcData:e,colors:t})=>{const n={copper:{15:"14",20:"12",30:"10",40:"10",60:"10",100:"8",200:"6",300:"4",400:"3",500:"2",600:"1",800:"1/0",1e3:"2/0",1200:"3/0",1600:"4/0",2e3:"250",2500:"350",3e3:"400",4e3:"500",5e3:"700",6e3:"800"},aluminum:{15:"12",20:"10",30:"8",40:"8",60:"8",100:"6",200:"4",300:"2",400:"1",500:"1/0",600:"2/0",800:"3/0",1e3:"4/0",1200:"250",1600:"350",2e3:"400",2500:"500",3e3:"600",4e3:"750",5e3:"1000",6e3:"1200"}},a=(()=>{const c=parseInt(r.ocpdRating);if(!c)return null;const u=Object.keys(n[r.conductorMaterial]).map(Number).sort((d,y)=>d-y),f=u.find(d=>d>=c)||u[u.length-1];return{ocpdRating:c,applicableRating:f,egcSize:n[r.conductorMaterial][f]}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Overcurrent Device Rating (A)"}),i.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:r.ocpdRating,onChange:c=>{const u=c.target.value.replace(/[^0-9]/g,"");e(f=>({...f,ocpdRating:u}))},placeholder:"Enter rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Circuit breaker or fuse rating"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["EGC ",i.jsx("br",{})," Material"]}),i.jsxs("select",{value:r.conductorMaterial,onChange:c=>e(u=>({...u,conductorMaterial:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"copper",children:"Copper"}),i.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Equipment Grounding Conductor"}),i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[a.egcSize," AWG"]}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Per NEC Table 250.122"}),i.jsxs("div",{children:["OCPD rating: ",a.ocpdRating,"A"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Important Notes:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Increase proportionally if conductors upsized for voltage drop"}),i.jsx("li",{children:"Size per each raceway if conductors run in parallel"}),i.jsx("li",{children:"Based on rating of OCPD ahead of circuit"})]})]})]})]})},kI=({bondingData:r,setBondingData:e,colors:t})=>{const n={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}},a=(()=>{if(!r.serviceSize)return null;const c=r.serviceSize;let u="";const f=["14","12","10","8","6","4","3","2","1"],d=["1/0","2/0","3/0","4/0"],y=parseInt(c);return f.includes(c)?parseInt(c)>=2?u="2 or smaller":c==="1"&&(u="1 or 1/0"):d.includes(c)?c==="1/0"?u="1 or 1/0":c==="2/0"||c==="3/0"?u="2/0 or 3/0":c==="4/0"&&(u="4/0 to 350"):isNaN(y)||(y>=250&&y<=350?u="4/0 to 350":y>=400&&y<=600?u="400 to 600":y>=650&&y<=1100?u="650 to 1100":y>1100&&(u="over 1100")),{serviceSize:c,jumperSize:n[r.conductorMaterial][u]||"N/A",jumperType:r.jumperType}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Bonding Jumper Type"}),i.jsxs("select",{value:r.jumperType,onChange:c=>e(u=>({...u,jumperType:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"main",children:"Main Bonding Jumper (Service)"}),i.jsx("option",{value:"system",children:"System Bonding Jumper (Separately Derived)"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Conductor Size"}),i.jsxs("select",{value:r.serviceSize,onChange:c=>e(u=>({...u,serviceSize:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"",children:"Select Size"}),i.jsx("option",{value:"8",children:"8 AWG"}),i.jsx("option",{value:"6",children:"6 AWG"}),i.jsx("option",{value:"4",children:"4 AWG"}),i.jsx("option",{value:"2",children:"2 AWG"}),i.jsx("option",{value:"1",children:"1 AWG"}),i.jsx("option",{value:"1/0",children:"1/0 AWG"}),i.jsx("option",{value:"2/0",children:"2/0 AWG"}),i.jsx("option",{value:"3/0",children:"3/0 AWG"}),i.jsx("option",{value:"4/0",children:"4/0 AWG"}),i.jsx("option",{value:"250",children:"250 kcmil"}),i.jsx("option",{value:"500",children:"500 kcmil"}),i.jsx("option",{value:"750",children:"750 kcmil"}),i.jsx("option",{value:"1000",children:"1000 kcmil"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Material"}),i.jsxs("select",{value:r.conductorMaterial,onChange:c=>e(u=>({...u,conductorMaterial:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"copper",children:"Copper"}),i.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]})]}),a&&a.jumperSize!=="N/A"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:[r.jumperType==="main"?"Main":"System"," Bonding Jumper"]}),i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[a.jumperSize," AWG"]}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:["Per NEC ",r.jumperType==="main"?"250.28(D)":"250.30(A)(1)"]}),i.jsxs("div",{children:["Conductor size: ",a.serviceSize," AWG ",r.conductorMaterial]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:[r.jumperType==="main"?"Main":"System"," Bonding Jumper Requirements:"]}),i.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:r.jumperType==="main"?i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Connects grounded conductor to equipment grounding conductor"}),i.jsx("li",{children:"Sized per Table 250.66 based on service conductor"}),i.jsx("li",{children:"Can be wire, bus, screw, or similar conductor"})]}):i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Required for separately derived systems"}),i.jsx("li",{children:"Connects grounded to equipment grounding conductor"}),i.jsx("li",{children:"Installed at same location as GEC connection"})]})})]})]})]})},jI=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=me.useState("gec"),[a,c]=me.useState({serviceSize:"",conductorMaterial:"copper"}),[u,f]=me.useState({ocpdRating:"",conductorMaterial:"copper"}),[d,y]=me.useState({serviceSize:"",conductorMaterial:"copper",jumperType:"main"}),w=me.useMemo(()=>({cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"}),[r]);return me.useImperativeHandle(t,()=>({exportPDF:()=>{let C;if(n==="gec"){if(!a.serviceSize){alert("Please select a service conductor size before exporting");return}const v={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}};let B="";const I=a.serviceSize,z=["14","12","10","8","6","4","3","2","1"],A=["1/0","2/0","3/0","4/0"],M=parseInt(I);z.includes(I)?parseInt(I)>=2?B="2 or smaller":I==="1"&&(B="1 or 1/0"):A.includes(I)?I==="1/0"?B="1 or 1/0":I==="2/0"||I==="3/0"?B="2/0 or 3/0":I==="4/0"&&(B="4/0 to 350"):isNaN(M)||(M>=250&&M<=350?B="4/0 to 350":M>=400&&M<=600?B="400 to 600":M>=650&&M<=1100?B="650 to 1100":M>1100&&(B="over 1100"));const U=v[a.conductorMaterial][B];C={calculatorName:"Grounding & Bonding - Grounding Electrode Conductor",inputs:{serviceConductorSize:`${a.serviceSize} AWG`,material:a.conductorMaterial.charAt(0).toUpperCase()+a.conductorMaterial.slice(1)},results:{groundingElectrodeConductor:`${U} AWG ${a.conductorMaterial}`},additionalInfo:{note1:"GEC to rod/pipe/plate need not be larger than 6 AWG copper",note2:"GEC to concrete-encased electrode need not be larger than 4 AWG copper",note3:"Must be continuous without splices (except as permitted)"},necReferences:["NEC Table 250.66 - Grounding Electrode Conductor for Alternating-Current Systems","NEC 250.64 - Grounding Electrode Conductor Installation","NEC 250.52 - Grounding Electrodes"]}}else if(n==="egc"){if(!u.ocpdRating){alert("Please enter an overcurrent device rating before exporting");return}const v={copper:{15:"14",20:"12",30:"10",40:"10",60:"10",100:"8",200:"6",300:"4",400:"3",500:"2",600:"1",800:"1/0",1e3:"2/0",1200:"3/0",1600:"4/0",2e3:"250",2500:"350",3e3:"400",4e3:"500",5e3:"700",6e3:"800"},aluminum:{15:"12",20:"10",30:"8",40:"8",60:"8",100:"6",200:"4",300:"2",400:"1",500:"1/0",600:"2/0",800:"3/0",1e3:"4/0",1200:"250",1600:"350",2e3:"400",2500:"500",3e3:"600",4e3:"750",5e3:"1000",6e3:"1200"}},B=parseInt(u.ocpdRating),I=Object.keys(v[u.conductorMaterial]).map(Number).sort((M,U)=>M-U),z=I.find(M=>M>=B)||I[I.length-1],A=v[u.conductorMaterial][z];C={calculatorName:"Grounding & Bonding - Equipment Grounding Conductor",inputs:{overcurrentDeviceRating:`${B} Amps`,material:u.conductorMaterial.charAt(0).toUpperCase()+u.conductorMaterial.slice(1)},results:{equipmentGroundingConductor:`${A} AWG ${u.conductorMaterial}`,basedOnOCPDRating:`${z} Amps`},additionalInfo:{note1:"Increase proportionally if conductors upsized for voltage drop",note2:"Size per each raceway if conductors run in parallel",note3:"Based on rating of OCPD ahead of circuit"},necReferences:["NEC Table 250.122 - Minimum Size Equipment Grounding Conductors for Grounding Raceway and Equipment","NEC 250.122(B) - Increased in Size","NEC 250.122(F) - Conductors in Parallel"]}}else if(n==="bonding"){if(!d.serviceSize){alert("Please select a conductor size before exporting");return}const v={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}};let B="";const I=d.serviceSize,z=["14","12","10","8","6","4","3","2","1"],A=["1/0","2/0","3/0","4/0"],M=parseInt(I);z.includes(I)?parseInt(I)>=2?B="2 or smaller":I==="1"&&(B="1 or 1/0"):A.includes(I)?I==="1/0"?B="1 or 1/0":I==="2/0"||I==="3/0"?B="2/0 or 3/0":I==="4/0"&&(B="4/0 to 350"):isNaN(M)||(M>=250&&M<=350?B="4/0 to 350":M>=400&&M<=600?B="400 to 600":M>=650&&M<=1100?B="650 to 1100":M>1100&&(B="over 1100"));const U=v[d.conductorMaterial][B],F=d.jumperType==="main"?"Main Bonding Jumper":"System Bonding Jumper";C={calculatorName:`Grounding & Bonding - ${F}`,inputs:{jumperType:F,conductorSize:`${d.serviceSize} AWG`,material:d.conductorMaterial.charAt(0).toUpperCase()+d.conductorMaterial.slice(1)},results:{bondingJumperSize:`${U} AWG ${d.conductorMaterial}`},additionalInfo:d.jumperType==="main"?{purpose:"Connects grounded conductor to equipment grounding conductor",sizing:"Sized per Table 250.66 based on service conductor",forms:"Can be wire, bus, screw, or similar conductor"}:{purpose:"Required for separately derived systems",connection:"Connects grounded to equipment grounding conductor",location:"Installed at same location as GEC connection"},necReferences:d.jumperType==="main"?["NEC 250.28 - Main Bonding Jumper and System Bonding Jumper","NEC 250.28(D) - Size","NEC Table 250.66 - Sizing Reference"]:["NEC 250.30 - Grounding Separately Derived Alternating-Current Systems","NEC 250.30(A)(1) - System Bonding Jumper","NEC Table 250.66 - Sizing Reference"]}}sn(C)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"gec",label:"Grounding Electrode"},{id:"egc",label:"Equipment Grounding"},{id:"bonding",label:"Bonding Jumpers"}].map(C=>i.jsx("button",{className:cs.btn,onClick:()=>o(C.id),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.625rem 1rem",background:n===C.id?"#3b82f6":w.sectionBg,color:n===C.id?"white":w.labelText,border:`1px solid ${n===C.id?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:C.label},C.id))}),i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[n==="gec"&&i.jsx(CI,{gecData:a,setGecData:c,colors:w}),n==="egc"&&i.jsx(AI,{egcData:u,setEgcData:f,colors:w}),n==="bonding"&&i.jsx(kI,{bondingData:d,setBondingData:y,colors:w})]})]})}),EI=({offsetData:r,setOffsetData:e,colors:t})=>{const n={10:{distance:6,shrink:.01},"22.5":{distance:2.6,shrink:.06},30:{distance:2,shrink:.25},45:{distance:1.4,shrink:.41},60:{distance:1.2,shrink:.58}},a=(()=>{if(!r.obstacleHeight)return null;const c=parseFloat(r.obstacleHeight),u=n[r.bendAngle];return{distanceBetweenBends:(c*u.distance).toFixed(2),shrinkage:(c*u.shrink).toFixed(2),angle:r.bendAngle}})();return i.jsxs("div",{className:cs.menu,children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Obstacle Height (inches)"}),i.jsx("input",{type:"number",value:r.obstacleHeight,onChange:c=>e(u=>({...u,obstacleHeight:c.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Height to clear obstacle"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Bend Angle ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsxs("select",{value:r.bendAngle,onChange:c=>e(u=>({...u,bendAngle:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"10",children:"10°"}),i.jsx("option",{value:"22.5",children:"22.5°"}),i.jsx("option",{value:"30",children:"30°"}),i.jsx("option",{value:"45",children:"45°"}),i.jsx("option",{value:"60",children:"60°"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Most common: 30° or 45°"})]})]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Distance Between Bends"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[a.distanceBetweenBends,'"']})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Shrinkage"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[a.shrinkage,'"']})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"How to Make the Bend"}),i.jsxs("div",{children:["Mark first bend, measure ",a.distanceBetweenBends,'" from center of first bend, then make second bend at ',a.angle,"°."]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Offset Bend Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"30° bends are most common for typical offsets"}),i.jsx("li",{children:"45° bends create shorter, steeper offsets"}),i.jsx("li",{children:"Always account for shrinkage in measurements"})]})]})]})]})},II=({stubUpData:r,setStubUpData:e,colors:t})=>{const n={"1/2":5,"3/4":6,1:8,"1-1/4":11,"1-1/2":14,2:16,"2-1/2":21,3:26,"3-1/2":30,4:34},a=(()=>{if(!r.stubHeight)return null;const c=parseFloat(r.stubHeight),u=n[r.conduitSize];return{markDistance:(c-u).toFixed(2),deduction:u,stubHeight:c.toFixed(2)}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Desired Stub Height (inches)"}),i.jsx("input",{type:"number",value:r.stubHeight,onChange:c=>e(u=>({...u,stubHeight:c.target.value})),placeholder:"Enter stub height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Back of 90° to floor"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Conduit Size ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsx("select",{value:r.conduitSize,onChange:c=>e(u=>({...u,conduitSize:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.keys(n).map(c=>i.jsxs("option",{value:c,children:[c,'"']},c))})]})]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Mark At"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[a.markDistance,'"']})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Deduction"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[a.deduction,'"']})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Conduit Size"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[r.conduitSize,'"']})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"How to Bend"}),i.jsxs("div",{children:["Measure from end of conduit, mark at ",a.markDistance,'", line up mark with arrow on bender, make 90° bend.']})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Stub-Up Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Deduction accounts for the radius of the bend"}),i.jsx("li",{children:"Larger conduit = larger deduction"}),i.jsx("li",{children:"Always check your bender - deductions vary by manufacturer"})]})]})]})]})},RI=({saddleData:r,setSaddleData:e,colors:t})=>{const o=(()=>{if(!r.obstacleHeight)return null;const a=parseFloat(r.obstacleHeight),c=parseFloat(r.obstacleWidth)||a*4,u=a*.3;return{centerBend:45,outerBends:22.5,distanceToOuter:(c/2).toFixed(2),shrinkage:u.toFixed(2),obstacleHeight:a.toFixed(2)}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Obstacle Height (inches)"}),i.jsx("input",{type:"number",value:r.obstacleHeight,onChange:a=>e(c=>({...c,obstacleHeight:a.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Width ",i.jsx("br",{})," (Optional)"]}),i.jsx("input",{type:"number",value:r.obstacleWidth,onChange:a=>e(c=>({...c,obstacleWidth:a.target.value})),placeholder:"Auto: 4x height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Center Bend"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[o.centerBend,"°"]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Outer Bends"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.outerBends,"°"]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Distance to Outer"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.distanceToOuter,'"']})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Bending Sequence"}),i.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Mark center of obstacle on conduit"}),i.jsx("li",{children:"Make 45° center bend at mark"}),i.jsxs("li",{children:["Measure ",o.distanceToOuter,'" from center each direction']}),i.jsx("li",{children:"Make 22.5° bends on each side (opposite direction)"})]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"3-Point Saddle Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Center bend goes up, outer bends go down"}),i.jsx("li",{children:"Most common for going over pipes or other conduits"}),i.jsx("li",{children:"Mark all three bend locations before starting"})]})]})]})]})},PI=({fourPointData:r,setFourPointData:e,colors:t})=>{const o=(()=>{if(!r.obstacleHeight||!r.obstacleWidth)return null;const a=parseFloat(r.obstacleHeight),c=parseFloat(r.obstacleWidth),u=c/2,f=c/4,d=a*.15;return{bendAngle:22.5,distanceToOuter:u.toFixed(2),innerSpacing:f.toFixed(2),shrinkage:d.toFixed(2)}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Height ",i.jsx("br",{})," (inches)"]}),i.jsx("input",{type:"number",value:r.obstacleHeight,onChange:a=>e(c=>({...c,obstacleHeight:a.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Width ",i.jsx("br",{})," (inches)"]}),i.jsx("input",{type:"number",value:r.obstacleWidth,onChange:a=>e(c=>({...c,obstacleWidth:a.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"All Bends"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[o.bendAngle,"°"]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Outer Distance"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.distanceToOuter,'"']})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Inner Spacing"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.innerSpacing,'"']})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Bending Sequence"}),i.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Mark center of obstacle on conduit"}),i.jsxs("li",{children:["Measure ",o.distanceToOuter,'" from center (outer bends)']}),i.jsxs("li",{children:["Measure ",o.innerSpacing,'" from center (inner bends)']}),i.jsx("li",{children:"Make all four 22.5° bends: outer up, inner down"})]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"4-Point Saddle Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Used for larger obstacles where 3-point won't work"}),i.jsx("li",{children:"Outer bends go up, inner bends go down"}),i.jsx("li",{children:"Creates a flatter top for better clearance"})]})]})]})]})},NI=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=me.useState("offset"),[a,c]=me.useState({obstacleHeight:"",bendAngle:"30"}),[u,f]=me.useState({stubHeight:"",conduitSize:"3/4"}),[d,y]=me.useState({obstacleHeight:"",obstacleWidth:""}),[w,C]=me.useState({obstacleHeight:"",obstacleWidth:""}),v={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};me.useImperativeHandle(t,()=>({exportPDF:()=>{let I;if(n==="offset"){if(!a.obstacleHeight){alert("Please enter obstacle height for Offset Bends before exporting");return}const z={10:{distance:6,shrink:.01},"22.5":{distance:2.6,shrink:.06},30:{distance:2,shrink:.25},45:{distance:1.4,shrink:.41},60:{distance:1.2,shrink:.58}},A=parseFloat(a.obstacleHeight),M=z[a.bendAngle],U=(A*M.distance).toFixed(2),F=(A*M.shrink).toFixed(2);I={calculatorName:"Conduit Bending - Offset Bends",inputs:{obstacleHeight:`${a.obstacleHeight} inches`,bendAngle:`${a.bendAngle}°`},results:{distanceBetweenBends:`${U} inches`,shrinkage:`${F} inches`},additionalInfo:{instructions:`Mark first bend, measure ${U}" from center of first bend, then make second bend at ${a.bendAngle}°`,multiplierUsed:`Distance: ${M.distance}, Shrink: ${M.shrink}`},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","30° bends are most common for typical offsets","45° bends create shorter, steeper offsets"]}}else if(n==="stubup"){if(!u.stubHeight){alert("Please enter stub height for 90° Stub-Up before exporting");return}const z={"1/2":5,"3/4":6,1:8,"1-1/4":11,"1-1/2":14,2:16,"2-1/2":21,3:26,"3-1/2":30,4:34},A=parseFloat(u.stubHeight),M=z[u.conduitSize],U=(A-M).toFixed(2);I={calculatorName:"Conduit Bending - 90° Stub-Up",inputs:{desiredStubHeight:`${u.stubHeight} inches`,conduitSize:`${u.conduitSize}"`},results:{markAt:`${U} inches`,deduction:`${M} inches`},additionalInfo:{instructions:`Measure from end of conduit, mark at ${U}", line up mark with arrow on bender, make 90° bend`,note:"Deduction accounts for the radius of the bend - larger conduit requires larger deduction"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Always check your bender - deductions vary by manufacturer"]}}else if(n==="saddle"){if(!d.obstacleHeight){alert("Please enter obstacle height for 3-Point Saddle before exporting");return}const z=parseFloat(d.obstacleHeight),A=parseFloat(d.obstacleWidth)||z*4,M=(z*.3).toFixed(2),U=(A/2).toFixed(2);I={calculatorName:"Conduit Bending - 3-Point Saddle",inputs:{obstacleHeight:`${d.obstacleHeight} inches`,obstacleWidth:d.obstacleWidth?`${d.obstacleWidth} inches`:`${A} inches (Auto: 4x height)`},results:{centerBend:"45°",outerBends:"22.5°",distanceToOuter:`${U} inches`,shrinkage:`${M} inches`},additionalInfo:{bendingSequence:`1) Mark center of obstacle on conduit 2) Make 45° center bend at mark 3) Measure ${U}" from center each direction 4) Make 22.5° bends on each side (opposite direction)`,tip:"Center bend goes up, outer bends go down"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Most common for going over pipes or other conduits","Mark all three bend locations before starting"]}}else if(n==="fourpoint"){if(!w.obstacleHeight||!w.obstacleWidth){alert("Please enter both obstacle height and width for 4-Point Saddle before exporting");return}const z=parseFloat(w.obstacleHeight),A=parseFloat(w.obstacleWidth),M=(A/2).toFixed(2),U=(A/4).toFixed(2),F=(z*.15).toFixed(2);I={calculatorName:"Conduit Bending - 4-Point Saddle",inputs:{obstacleHeight:`${w.obstacleHeight} inches`,obstacleWidth:`${w.obstacleWidth} inches`},results:{allBends:"22.5°",outerDistance:`${M} inches`,innerSpacing:`${U} inches`,shrinkage:`${F} inches`},additionalInfo:{bendingSequence:`1) Mark center of obstacle on conduit 2) Measure ${M}" from center (outer bends) 3) Measure ${U}" from center (inner bends) 4) Make all four 22.5° bends: outer up, inner down`,tip:"Used for larger obstacles where 3-point saddle will not work"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Creates a flatter top for better clearance over wide obstacles"]}}sn(I)}}));const B={offset:i.jsx(EI,{offsetData:a,setOffsetData:c,colors:v}),stubup:i.jsx(II,{stubUpData:u,setStubUpData:f,colors:v}),saddle:i.jsx(RI,{saddleData:d,setSaddleData:y,colors:v}),fourpoint:i.jsx(PI,{fourPointData:w,setFourPointData:C,colors:v})};return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"offset",label:"Offset Bends"},{id:"stubup",label:"90° Stub-Up"},{id:"saddle",label:"3-Point Saddle"},{id:"fourpoint",label:"4-Point Saddle"}].map(I=>i.jsx("button",{className:cs.btn,onClick:()=>o(I.id),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.625rem 1rem",background:n===I.id?"#3b82f6":v.sectionBg,color:n===I.id?"white":v.labelText,border:`1px solid ${n===I.id?"#3b82f6":v.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:I.label},I.id))}),i.jsx("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:B[n]})]})}),BI=({lumensData:r,setLumensData:e,colors:t})=>{const n={living:10,kitchen:50,bathroom:70,bedroom:10,office:50,workshop:75,garage:50,hallway:5,dining:30,laundry:50},o={living:"Living Room (10 fc)",kitchen:"Kitchen (50 fc)",bathroom:"Bathroom (70 fc)",bedroom:"Bedroom (10 fc)",office:"Office/Study (50 fc)",workshop:"Workshop (75 fc)",garage:"Garage (50 fc)",hallway:"Hallway (5 fc)",dining:"Dining Room (30 fc)",laundry:"Laundry Room (50 fc)"},c=(()=>{if(!r.roomLength||!r.roomWidth)return null;const u=parseFloat(r.roomLength),f=parseFloat(r.roomWidth),d=u*f,y=n[r.roomType],w=y*d;let C=null;if(r.lumensPerFixture){const v=parseFloat(r.lumensPerFixture);C=Math.ceil(w/v)}return{area:d.toFixed(1),footCandles:y,totalLumens:w.toFixed(0),fixturesNeeded:C}})();return i.jsxs("div",{className:cs.menu,children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),i.jsx("input",{type:"number",value:r.roomLength,onChange:u=>e(f=>({...f,roomLength:u.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),i.jsx("input",{type:"number",value:r.roomWidth,onChange:u=>e(f=>({...f,roomWidth:u.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Room Type ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsx("select",{value:r.roomType,onChange:u=>e(f=>({...f,roomType:u.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.entries(o).map(([u,f])=>i.jsx("option",{value:u,children:f},u))}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"fc = foot-candles"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Lumens per Fixture (Optional)"}),i.jsx("input",{type:"number",value:r.lumensPerFixture,onChange:u=>e(f=>({...f,lumensPerFixture:u.target.value})),placeholder:"e.g., 800",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"To calculate fixture count"})]})]}),c&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:c.fixturesNeeded?"repeat(3, 1fr)":"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Room Area"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:c.area}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"sq ft"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Lumens Needed"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:c.totalLumens}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"lumens"})]}),c.fixturesNeeded&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Fixtures Needed"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:c.fixturesNeeded}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"fixtures"})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Lighting Requirements"}),i.jsxs("div",{children:["Recommended level: ",c.footCandles," foot-candles"]}),c.fixturesNeeded&&i.jsxs("div",{children:["Using ",r.lumensPerFixture," lumens per fixture"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Lighting Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"LED bulbs typically produce 60-100 lumens per watt"}),i.jsx("li",{children:"Layer lighting: combine ambient, task, and accent lighting"}),i.jsx("li",{children:"Dark wall colors absorb light; increase lumens by 10-20%"})]})]})]})]})},LI=({spacingData:r,setSpacingData:e,colors:t})=>{const n={recessed:1.5,pendant:1,track:2,surface:1.5},a=(()=>{if(!r.roomLength||!r.roomWidth)return null;const c=parseFloat(r.roomLength),u=parseFloat(r.roomWidth),f=parseFloat(r.ceilingHeight),d=n[r.fixtureType],y=f*d,w=r.fixtureType==="recessed"?6:y*.8,C=Math.max(2,Math.round(c/w)),v=Math.max(2,Math.round(u/w)),B=C*v,I=c/C,z=u/v,A=I/2,M=z/2;return{maxSpacing:y.toFixed(1),fixturesLength:C,fixturesWidth:v,totalFixtures:B,actualSpacingLength:I.toFixed(1),actualSpacingWidth:z.toFixed(1),wallOffsetLength:A.toFixed(1),wallOffsetWidth:M.toFixed(1)}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),i.jsx("input",{type:"number",value:r.roomLength,onChange:c=>e(u=>({...u,roomLength:c.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),i.jsx("input",{type:"number",value:r.roomWidth,onChange:c=>e(u=>({...u,roomWidth:c.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Ceiling Height (feet)"}),i.jsx("input",{type:"number",value:r.ceilingHeight,onChange:c=>e(u=>({...u,ceilingHeight:c.target.value})),placeholder:"8",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Fixture Type"}),i.jsxs("select",{value:r.fixtureType,onChange:c=>e(u=>({...u,fixtureType:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"recessed",children:"Recessed Can (1.5:1 ratio)"}),i.jsx("option",{value:"pendant",children:"Pendant (1:1 ratio)"}),i.jsx("option",{value:"track",children:"Track Light (2:1 ratio)"}),i.jsx("option",{value:"surface",children:"Surface Mount (1.5:1 ratio)"})]})]})]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Max Spacing"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:a.maxSpacing}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"feet"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Fixtures"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:a.totalFixtures}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"fixtures"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Layout"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[a.fixturesLength,"×",a.fixturesWidth]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"grid"})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Spacing Results"}),i.jsxs("div",{children:["Length spacing: ",a.actualSpacingLength," ft"]}),i.jsxs("div",{children:["Width spacing: ",a.actualSpacingWidth," ft"]}),i.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.8125rem"},children:["Start ",a.wallOffsetLength," ft from walls (length) and ",a.wallOffsetWidth," ft from walls (width)"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Spacing Guidelines:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Industry standard: 4-6 feet spacing for recessed cans"}),i.jsx("li",{children:"Spacing ratio = max distance between fixtures ÷ ceiling height"}),i.jsx("li",{children:"Space fixtures evenly with proper wall offsets for uniform coverage"})]})]})]})]})},FI=({wattsData:r,setWattsData:e,colors:t})=>{const n={office:1,retail:1.5,warehouse:.5,school:1.2,hospital:1,hotel:1,restaurant:1.3,residential:1},o={office:"Office Building (1.0 W/sq ft)",retail:"Retail Store (1.5 W/sq ft)",warehouse:"Warehouse (0.5 W/sq ft)",school:"School (1.2 W/sq ft)",hospital:"Hospital (1.0 W/sq ft)",hotel:"Hotel (1.0 W/sq ft)",restaurant:"Restaurant (1.3 W/sq ft)",residential:"Residential (1.0 W/sq ft)"},c=(()=>{if(!r.area)return null;const u=parseFloat(r.area),f=n[r.buildingType],d=u*f,y=d,w=y/120,C=Math.ceil(w/16);return{wattsPerSqFt:f,totalWatts:d.toFixed(0),totalVA:y.toFixed(0),amperage:w.toFixed(1),circuits:C}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Area (square feet)"}),i.jsx("input",{type:"number",value:r.area,onChange:u=>e(f=>({...f,area:u.target.value})),placeholder:"Enter area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Building Type"}),i.jsx("select",{value:r.buildingType,onChange:u=>e(f=>({...f,buildingType:u.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.entries(o).map(([u,f])=>i.jsx("option",{value:u,children:f},u))}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Per NEC Table 220.12"})]})]}),c&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Unit Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:c.wattsPerSqFt}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"W/sq ft"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:c.totalWatts}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"watts"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:c.circuits}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"needed"})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Lighting Load Calculation"}),i.jsxs("div",{children:["Total VA: ",c.totalVA," VA"]}),i.jsxs("div",{children:["Current @ 120V: ",c.amperage," A"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Requirements:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"NEC 220.12 specifies unit lighting loads by occupancy"}),i.jsx("li",{children:"Calculate using building area, not just lit area"}),i.jsx("li",{children:"Continuous loads require 125% conductor/OCPD sizing"})]})]})]})]})},zI=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=me.useState("lumens"),[a,c]=me.useState({roomLength:"",roomWidth:"",roomType:"living",lumensPerFixture:""}),[u,f]=me.useState({roomLength:"",roomWidth:"",ceilingHeight:"8",fixtureType:"recessed"}),[d,y]=me.useState({area:"",buildingType:"office"}),w={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};me.useImperativeHandle(t,()=>({exportPDF:()=>{let v;if(n==="lumens"){if(!a.roomLength||!a.roomWidth){alert("Please enter room dimensions before exporting");return}const B={living:"Living Room",kitchen:"Kitchen",bathroom:"Bathroom",bedroom:"Bedroom",office:"Office/Study",workshop:"Workshop",garage:"Garage",hallway:"Hallway",dining:"Dining Room",laundry:"Laundry Room"},I={living:10,kitchen:50,bathroom:70,bedroom:10,office:50,workshop:75,garage:50,hallway:5,dining:30,laundry:50},z=parseFloat(a.roomLength),A=parseFloat(a.roomWidth),M=(z*A).toFixed(1),U=I[a.roomType],F=(U*M).toFixed(0),se={roomLength:`${a.roomLength} feet`,roomWidth:`${a.roomWidth} feet`,roomType:`${B[a.roomType]} (${U} fc)`},ue={roomArea:`${M} sq ft`,totalLumensNeeded:`${F} lumens`};if(a.lumensPerFixture){const L=parseFloat(a.lumensPerFixture),j=Math.ceil(parseFloat(F)/L);se.lumensPerFixture=`${a.lumensPerFixture} lumens`,ue.fixturesNeeded=`${j} fixtures`}v={calculatorName:"Lighting Calculations - Room Lumens",inputs:se,results:ue,additionalInfo:{calculation:`Area (${M} sq ft) × Recommended Level (${U} foot-candles) = ${F} lumens`,tip1:"LED bulbs typically produce 60-100 lumens per watt",tip2:"Layer lighting: combine ambient, task, and accent lighting",tip3:"Dark wall colors absorb light; increase lumens by 10-20%"},necReferences:["IES (Illuminating Engineering Society) recommended light levels","Foot-candles measure illuminance on a surface","1 foot-candle = 1 lumen per square foot"]}}else if(n==="spacing"){if(!u.roomLength||!u.roomWidth){alert("Please enter room dimensions before exporting");return}const B={recessed:"Recessed Can (1.5:1 ratio)",pendant:"Pendant (1:1 ratio)",track:"Track Light (2:1 ratio)",surface:"Surface Mount (1.5:1 ratio)"},I={recessed:1.5,pendant:1,track:2,surface:1.5},z=parseFloat(u.roomLength),A=parseFloat(u.roomWidth),M=parseFloat(u.ceilingHeight),U=I[u.fixtureType],F=(M*U).toFixed(1),se=u.fixtureType==="recessed"?6:parseFloat(F)*.8,ue=Math.max(2,Math.round(z/se)),L=Math.max(2,Math.round(A/se)),j=ue*L,T=(z/ue).toFixed(1),V=(A/L).toFixed(1),k=(parseFloat(T)/2).toFixed(1),b=(parseFloat(V)/2).toFixed(1);v={calculatorName:"Lighting Calculations - Fixture Spacing",inputs:{roomLength:`${u.roomLength} feet`,roomWidth:`${u.roomWidth} feet`,ceilingHeight:`${u.ceilingHeight} feet`,fixtureType:B[u.fixtureType]},results:{maximumSpacing:`${F} feet`,totalFixtures:`${j} fixtures`,layoutGrid:`${ue} × ${L}`,lengthSpacing:`${T} feet`,widthSpacing:`${V} feet`},additionalInfo:{wallOffsets:`Start ${k} ft from walls (length) and ${b} ft from walls (width)`,spacingFormula:`Maximum spacing = Ceiling height (${M} ft) × Spacing ratio (${U}) = ${F} ft`,tip1:"Industry standard: 4-6 feet spacing for recessed cans",tip2:"Space fixtures evenly with proper wall offsets for uniform coverage"},necReferences:["Spacing ratio guidelines from IES Lighting Handbook","Recessed fixtures: 1.5:1 ratio (spacing to mounting height)","Pendant fixtures: 1:1 ratio for focused task lighting","Track lights: 2:1 ratio for accent lighting"]}}else if(n==="watts"){if(!d.area){alert("Please enter area before exporting");return}const B={office:"Office Building",retail:"Retail Store",warehouse:"Warehouse",school:"School",hospital:"Hospital",hotel:"Hotel",restaurant:"Restaurant",residential:"Residential"},I={office:1,retail:1.5,warehouse:.5,school:1.2,hospital:1,hotel:1,restaurant:1.3,residential:1},z=parseFloat(d.area),A=I[d.buildingType],M=(z*A).toFixed(0),U=M,F=(parseFloat(U)/120).toFixed(1),se=Math.ceil(parseFloat(F)/16);v={calculatorName:"Lighting Calculations - Watts per Square Foot",inputs:{area:`${d.area} square feet`,buildingType:`${B[d.buildingType]} (${A} W/sq ft)`},results:{unitLoad:`${A} W/sq ft`,totalLoad:`${M} watts`,totalVA:`${U} VA`,currentAt120V:`${F} Amps`,requiredCircuits:`${se} × 20A circuits`},additionalInfo:{calculation:`Area (${z} sq ft) × Unit Load (${A} W/sq ft) = ${M} watts`,circuitCalculation:`Total current (${F} A) ÷ 16A (80% of 20A) = ${se} circuits needed`,note:"Continuous loads require 125% conductor/OCPD sizing"},necReferences:["NEC Table 220.12 - General Lighting Loads by Occupancy","NEC 210.19(A)(1) - Branch Circuit Ampacity","NEC 210.20(A) - Continuous and Noncontinuous Loads","Calculate using building area, not just lit area"]}}sn(v)}}));const C={lumens:i.jsx(BI,{lumensData:a,setLumensData:c,colors:w}),spacing:i.jsx(LI,{spacingData:u,setSpacingData:f,colors:w}),watts:i.jsx(FI,{wattsData:d,setWattsData:y,colors:w})};return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"lumens",label:"Room Lumens"},{id:"spacing",label:"Fixture Spacing"},{id:"watts",label:"Watts/Sq Ft"}].map(v=>i.jsx("button",{className:cs.btn,onClick:()=>o(v.id),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.625rem 1rem",background:n===v.id?"#3b82f6":w.sectionBg,color:n===v.id?"white":w.labelText,border:`1px solid ${n===v.id?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:v.label},v.id))}),i.jsx("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:C[n]})]})}),OI=({generalData:r,setGeneralData:e,colors:t})=>{const o=(()=>{if(!r.roomLength||!r.roomWidth)return null;const a=parseFloat(r.roomLength),c=parseFloat(r.roomWidth),u=(a+c)*2,f=Math.max(2,Math.ceil(u/12));let d=0;if(r.hasCounters){const v=parseFloat(r.counterLength)||0;d=Math.max(2,Math.ceil(v/2))}const y=f+d,w=Math.ceil(y/8),C=Math.ceil(y/10);return{perimeter:u.toFixed(1),wallReceptacles:f,counterReceptacles:d,totalReceptacles:y,circuits15A:w,circuits20A:C}})();return i.jsxs("div",{className:cs.menu,children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),i.jsx("input",{type:"number",value:r.roomLength,onChange:a=>e(c=>({...c,roomLength:a.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),i.jsx("input",{type:"number",value:r.roomWidth,onChange:a=>e(c=>({...c,roomWidth:a.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsx("div",{style:{gridColumn:"1 / -1"},children:i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.hasCounters,onChange:a=>e(c=>({...c,hasCounters:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Room has countertops/islands"]})}),r.hasCounters&&i.jsxs("div",{style:{gridColumn:"1 / -1"},children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Counter Length (feet)"}),i.jsx("input",{type:"number",value:r.counterLength,onChange:a=>e(c=>({...c,counterLength:a.target.value})),placeholder:"Enter counter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"For kitchens/break rooms"})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:o.counterReceptacles>0?"repeat(3, 1fr)":"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Wall Receptacles"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.wallReceptacles})]}),o.counterReceptacles>0&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Counter Receptacles"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.counterReceptacles})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Needed"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.totalReceptacles})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"15A Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.circuits15A})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.circuits20A})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"NEC Requirements Met"}),i.jsxs("div",{children:["Room perimeter: ",o.perimeter," ft"]}),i.jsx("div",{children:"Spacing: One receptacle every 12 feet of wall space"}),o.counterReceptacles>0&&i.jsx("div",{children:"Counter spacing: One receptacle every 2 feet"})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC 210.52 Requirements:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Wall: Receptacle within 6 ft of doorway, then every 12 ft"}),i.jsx("li",{children:"No point along wall more than 6 ft from receptacle"}),i.jsx("li",{children:"Counters: One receptacle every 24 inches of counter space"}),i.jsx("li",{children:"Kitchen requires min. 2 small appliance circuits (20A)"})]})]})]})]})},VI=({kitchenData:r,setKitchenData:e,colors:t})=>{const o=(()=>{if(!r.counterLength)return null;const a=parseFloat(r.counterLength),c=parseFloat(r.islandLength)||0,u=Math.max(2,Math.ceil(a/2)),f=c>=2?Math.max(1,Math.ceil(c/4)):0,d=2,y=u+f;let w=0;return r.dishwasher&&w++,r.disposer&&w++,r.microwave&&w++,r.range&&w++,{counterReceptacles:u,islandReceptacles:f,totalReceptacles:u+f,smallApplianceCircuits:d,dedicatedCircuits:w,gfciRequired:y}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Counter Length (feet)"}),i.jsx("input",{type:"number",value:r.counterLength,onChange:a=>e(c=>({...c,counterLength:a.target.value})),placeholder:"Enter counter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Island Length (feet) - Optional"}),i.jsx("input",{type:"number",value:r.islandLength,onChange:a=>e(c=>({...c,islandLength:a.target.value})),placeholder:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:'Required if island ≥ 24" long × 12" wide'})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.75rem",color:t.cardText,fontSize:"0.875rem"},children:"Dedicated Appliance Circuits:"}),i.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.dishwasher,onChange:a=>e(c=>({...c,dishwasher:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Dishwasher (dedicated 15A/20A)"]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.disposer,onChange:a=>e(c=>({...c,disposer:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Garbage Disposer (dedicated 15A/20A)"]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.microwave,onChange:a=>e(c=>({...c,microwave:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Microwave (dedicated 20A)"]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.range,onChange:a=>e(c=>({...c,range:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Range/Cooktop (240V, 40-50A)"]})]})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Counter Receptacles"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.counterReceptacles})]}),o.islandReceptacles>0&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Island Receptacles"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.islandReceptacles})]}),o.islandReceptacles===0&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"GFCI Required"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.gfciRequired})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Small Appliance Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.smallApplianceCircuits}),i.jsx("div",{style:{fontSize:"0.65rem",color:t.subtleText,marginTop:"0.25rem"},children:"20A each"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Dedicated Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.dedicatedCircuits}),i.jsx("div",{style:{fontSize:"0.65rem",color:t.subtleText,marginTop:"0.25rem"},children:"for appliances"})]})]}),i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(ih,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"GFCI Protection Required"}),i.jsxs("div",{children:["All ",o.gfciRequired," countertop receptacles require GFCI protection per NEC 210.8(A)"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Kitchen Requirements:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Min. 2 small appliance circuits (20A) for countertop receptacles"}),i.jsx("li",{children:"Counter receptacles: One every 24 inches, all GFCI protected"}),i.jsx("li",{children:'Island receptacles required if island ≥ 24" long × 12" wide'}),i.jsx("li",{children:"Dishwasher, disposer typically need dedicated 15A or 20A circuits"})]})]})]})]})},MI=({bathroomData:r,setBathroomData:e,colors:t})=>{const o=(()=>{const a=parseInt(r.numBasins)||1,c=r.hasTub;let u=Math.max(1,a);c&&(u=Math.max(u,2));const f=r.sharedCircuit?1:a>=2?2:1;return{receptacles:u,dedicatedCircuits:f,gfciRequired:u,numBasins:a}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Number of Sinks/Basins"}),i.jsxs("select",{value:r.numBasins,onChange:a=>e(c=>({...c,numBasins:a.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"1",children:"1 Basin"}),i.jsx("option",{value:"2",children:"2 Basins (Double Vanity)"}),i.jsx("option",{value:"3",children:"3+ Basins"})]})]}),i.jsx("div",{children:i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.hasTub,onChange:a=>e(c=>({...c,hasTub:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Has Bathtub/Shower Area"]})}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.sharedCircuit,onChange:a=>e(c=>({...c,sharedCircuit:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Share circuit with other bathrooms"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",marginLeft:"1.625rem"},children:"One 20A circuit can serve multiple bathrooms if only serving receptacles"})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Receptacles Needed"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.receptacles})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.dedicatedCircuits})]})]}),i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(ih,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"GFCI Protection Required"}),i.jsxs("div",{children:["All ",o.gfciRequired," bathroom receptacles require GFCI protection per NEC 210.8(A)"]})]})]})}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Installation Guidelines"}),i.jsx("div",{children:"• At least one receptacle within 3 feet of each basin"}),i.jsx("div",{children:"• Receptacles must be readily accessible (not behind toilet)"}),i.jsx("div",{children:"• Install at least 12 inches above countertop"})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Bathroom Requirements:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"NEC 210.52(D): Min. 1 receptacle within 3 ft of basin"}),i.jsx("li",{children:"NEC 210.11(C)(3): Min. 1 dedicated 20A circuit for bathroom receptacles"}),i.jsx("li",{children:"NEC 210.8(A): All bathroom receptacles require GFCI protection"}),i.jsx("li",{children:"One 20A circuit can serve receptacles in multiple bathrooms"})]})]})]})]})},DI=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=me.useState("general"),[a,c]=me.useState({roomLength:"",roomWidth:"",hasCounters:!1,counterLength:""}),[u,f]=me.useState({counterLength:"",islandLength:"",dishwasher:!1,disposer:!1,microwave:!1,range:!1}),[d,y]=me.useState({numBasins:"1",hasTub:!1,sharedCircuit:!1}),w={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};me.useImperativeHandle(t,()=>({exportPDF:()=>{let v;if(n==="general"){if(!a.roomLength||!a.roomWidth){alert("Please enter room dimensions before exporting");return}const B=parseFloat(a.roomLength),I=parseFloat(a.roomWidth),z=((B+I)*2).toFixed(1),A=Math.max(2,Math.ceil(z/12));let M=0;if(a.hasCounters&&a.counterLength){const j=parseFloat(a.counterLength);M=Math.max(2,Math.ceil(j/2))}const U=A+M,F=Math.ceil(U/8),se=Math.ceil(U/10),ue={roomLength:`${a.roomLength} feet`,roomWidth:`${a.roomWidth} feet`,roomPerimeter:`${z} feet`};a.hasCounters&&a.counterLength&&(ue.counterLength=`${a.counterLength} feet`);const L={wallReceptacles:`${A} receptacles`,totalReceptacles:`${U} receptacles`,circuits15A:`${F} circuits (15A)`,circuits20A:`${se} circuits (20A)`};M>0&&(L.counterReceptacles=`${M} receptacles`),v={calculatorName:"Receptacle Calculator - General Room",inputs:ue,results:L,additionalInfo:{spacing:"One receptacle every 12 feet of wall space",rule:"No point along wall more than 6 feet from receptacle",counterRule:M>0?"Counter receptacles: one every 24 inches":null},necReferences:["NEC 210.52(A) - General Provisions","Receptacle within 6 ft of doorway, then every 12 ft","No point along wall more than 6 ft from receptacle","Conservative: 8 receptacles per 15A circuit, 10 per 20A circuit"]}}else if(n==="kitchen"){if(!u.counterLength){alert("Please enter counter length before exporting");return}const B=parseFloat(u.counterLength),I=parseFloat(u.islandLength)||0,z=Math.max(2,Math.ceil(B/2)),A=I>=2?Math.max(1,Math.ceil(I/4)):0,M=z+A,U=2,F=M;let se=0;const ue=[];u.dishwasher&&(se++,ue.push("Dishwasher (15A/20A)")),u.disposer&&(se++,ue.push("Garbage Disposer (15A/20A)")),u.microwave&&(se++,ue.push("Microwave (20A)")),u.range&&(se++,ue.push("Range/Cooktop (240V, 40-50A)"));const L={counterLength:`${u.counterLength} feet`};I>0&&(L.islandLength=`${u.islandLength} feet`),ue.length>0&&(L.dedicatedAppliances=ue.join(", "));const j={counterReceptacles:`${z} receptacles`,totalReceptacles:`${M} receptacles`,smallApplianceCircuits:`${U} circuits (20A each)`,gfciRequired:`${F} GFCI-protected receptacles`};A>0&&(j.islandReceptacles=`${A} receptacles`),se>0&&(j.dedicatedCircuits=`${se} dedicated circuits`),v={calculatorName:"Receptacle Calculator - Kitchen",inputs:L,results:j,additionalInfo:{counterSpacing:"One receptacle every 24 inches of counter space",islandRequirement:'Island receptacles required if island ≥ 24" long × 12" wide',gfciNote:"All countertop receptacles require GFCI protection"},necReferences:["NEC 210.52(C) - Countertops","NEC 210.11(C)(1) - Min. 2 small appliance circuits (20A)","NEC 210.8(A) - GFCI protection required for all countertop receptacles",'Island receptacles required if ≥ 24" long × 12" wide']}}else if(n==="bathroom"){const B=parseInt(d.numBasins)||1,I=d.hasTub;let z=Math.max(1,B);I&&(z=Math.max(z,2));const A=d.sharedCircuit?1:B>=2?2:1,M=z,F={numberOfBasins:B===1?"1 Basin":B===2?"2 Basins (Double Vanity)":"3+ Basins",hasTubShower:I?"Yes":"No",sharedCircuit:d.sharedCircuit?"Yes (shared with other bathrooms)":"No (dedicated)"},se={receptaclesNeeded:`${z} receptacles`,dedicatedCircuits:`${A} circuits (20A)`,gfciRequired:`${M} GFCI-protected receptacles`};v={calculatorName:"Receptacle Calculator - Bathroom",inputs:F,results:se,additionalInfo:{spacing:"At least one receptacle within 3 feet of each basin",installation:"Install at least 12 inches above countertop",accessibility:"Receptacles must be readily accessible (not behind toilet)",gfciNote:"All bathroom receptacles require GFCI protection"},necReferences:["NEC 210.52(D) - Min. 1 receptacle within 3 ft of basin","NEC 210.11(C)(3) - Min. 1 dedicated 20A circuit for bathroom receptacles","NEC 210.8(A) - All bathroom receptacles require GFCI protection","One 20A circuit can serve receptacles in multiple bathrooms"]}}sn(v)}}));const C={general:i.jsx(OI,{generalData:a,setGeneralData:c,colors:w}),kitchen:i.jsx(VI,{kitchenData:u,setKitchenData:f,colors:w}),bathroom:i.jsx(MI,{bathroomData:d,setBathroomData:y,colors:w})};return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"general",label:"General Room"},{id:"kitchen",label:"Kitchen"},{id:"bathroom",label:"Bathroom"}].map(v=>i.jsx("button",{className:cs.btn,onClick:()=>o(v.id),style:{flex:"1 1 auto",minWidth:"100px",padding:"0.625rem 1rem",background:n===v.id?"#3b82f6":w.sectionBg,color:n===v.id?"white":w.labelText,border:`1px solid ${n===v.id?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:v.label},v.id))}),i.jsx("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:C[n]})]})});function WI({onNavigate:r,currentView:e,isDarkMode:t=!1}){const n={bg:t?"#1a1a1a":"#ffffff",border:t?"#2a2a2a":"#e5e7eb",activeText:"#3b82f6",inactiveText:t?"#999999":"#6b7280"},o=c=>({background:"transparent",border:"0",borderWidth:"0",outline:"none",boxShadow:"none",color:c?n.activeText:n.inactiveText,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",gap:"0.25rem",fontSize:"0.625rem",fontWeight:"500",flex:"1 1 0",padding:"0.5rem 0.25rem",paddingTop:"0.75rem",margin:0,transition:"color 0.2s",WebkitTapHighlightColor:"transparent",WebkitAppearance:"none",MozAppearance:"none",appearance:"none",minWidth:"0"}),a={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",textAlign:"center",lineHeight:"1",marginTop:"0.125rem"};return i.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,width:"100%",background:n.bg,borderTop:`1px solid ${n.border}`,display:"flex",justifyContent:"space-between",alignItems:"stretch",padding:"0.25rem 0.5rem",paddingBottom:"calc(0.25rem + env(safe-area-inset-bottom))",margin:0,zIndex:1e4,minHeight:"80px",boxSizing:"border-box"},children:[i.jsxs("button",{onClick:()=>r("home"),style:o(e==="home"),children:[i.jsx(Ix,{size:22,strokeWidth:e==="home"?2.5:2}),i.jsx("span",{style:a,children:"Home"})]}),i.jsxs("button",{onClick:()=>r("calculators"),style:o(e==="calculators"),children:[i.jsx(nh,{size:22,strokeWidth:e==="calculators"?2.5:2}),i.jsx("span",{style:a,children:"Calculators"})]}),i.jsxs("button",{onClick:()=>r("jobs"),style:o(e==="jobs"),children:[i.jsx(Zc,{size:22,strokeWidth:e==="jobs"?2.5:2}),i.jsx("span",{style:a,children:"Jobs"})]}),i.jsxs("button",{onClick:()=>r("estimates"),style:o(e==="estimates"),children:[i.jsx(xh,{size:22,strokeWidth:e==="estimates"?2.5:2}),i.jsx("span",{style:a,children:"Estimates"})]}),i.jsxs("button",{onClick:()=>r("invoices"),style:o(e==="invoices"),children:[i.jsx(cg,{size:22,strokeWidth:e==="invoices"?2.5:2}),i.jsx("span",{style:a,children:"Invoices"})]})]})}const $I=me.forwardRef(({isDarkMode:r,onBack:e},t)=>{const[n,o]=me.useState(""),[a,c]=me.useState("460"),[u,f]=me.useState("3"),[d,y]=me.useState("normal"),[w,C]=me.useState("0"),[v,B]=me.useState("40"),[I,z]=me.useState("variable"),A={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},U=((D,q,ie)=>{if(!D||!q)return 0;const oe=parseFloat(D),ne=parseFloat(q);return ie==="3"?oe*746/(ne*1.732*.85*.9):oe*746/(ne*.85*.9)})(n,a,u),F=D=>{const q=parseFloat(D);return q<=3300?1:q<=5e3?.95:q<=6600?.9:q<=8200?.85:.8},se=D=>{const q=parseFloat(D);return q<=40?1:q<=45?.97:q<=50?.94:.91},ue=D=>{switch(D){case"heavy":return 1.25;case"normal":return 1.15;case"light":return 1.1;default:return 1.15}},L=F(w),j=se(v),T=ue(d),V=U*T/(L*j),b=[{amps:2,hp460V:1,hp230V:.5},{amps:3,hp460V:1.5,hp230V:1},{amps:5,hp460V:2,hp230V:1.5},{amps:7,hp460V:3,hp230V:2},{amps:10,hp460V:5,hp230V:3},{amps:14,hp460V:7.5,hp230V:5},{amps:18,hp460V:10,hp230V:7.5},{amps:24,hp460V:15,hp230V:10},{amps:31,hp460V:20,hp230V:15},{amps:40,hp460V:25,hp230V:20},{amps:52,hp460V:30,hp230V:25},{amps:62,hp460V:40,hp230V:30},{amps:77,hp460V:50,hp230V:40},{amps:96,hp460V:60,hp230V:50},{amps:124,hp460V:75,hp230V:60},{amps:156,hp460V:100,hp230V:75},{amps:180,hp460V:125,hp230V:100},{amps:240,hp460V:150,hp230V:125},{amps:302,hp460V:200,hp230V:150}].find(D=>D.amps>=V),N=L<1||j<1||d==="heavy";return me.useImperativeHandle(t,()=>({exportPDF:()=>{if(!n){alert("Please enter motor horsepower before exporting to PDF");return}const D=I==="variable"?"Variable Torque (Fans, Pumps)":I==="constant"?"Constant Torque (Conveyors)":"High Starting Torque",q=d==="light"?"Light Duty (Intermittent)":d==="normal"?"Normal Duty":"Heavy Duty (Continuous)",ie={calculatorName:"VFD Sizing Calculator",inputs:{"Motor Horsepower":`${n} HP`,Voltage:`${a}V`,Phases:u==="1"?"Single Phase":"Three Phase","Load Type":D,"Duty Cycle":q,Altitude:`${w} feet`,"Ambient Temperature":`${v}°C`},results:{"Motor Full Load Amperes (FLA)":`${U.toFixed(1)} A`,"Required VFD Current":`${V.toFixed(1)} A`,"Recommended VFD Rating":b?`${b.amps} A`:"N/A","VFD Motor HP (460V)":b?`${b.hp460V} HP`:"N/A","VFD Motor HP (230V)":b?`${b.hp230V} HP`:"N/A","Safety Margin":b?`${((b.amps/V-1)*100).toFixed(0)}%`:"N/A"},additionalInfo:{"Altitude Derating Factor":`${(L*100).toFixed(0)}%`,"Temperature Derating Factor":`${(j*100).toFixed(0)}%`,"Duty Cycle Factor":`${(T*100).toFixed(0)}%`,"Calculation Method":u==="3"?"Three Phase: (HP × 746) ÷ (V × 1.732 × 0.85 × 0.9)":"Single Phase: (HP × 746) ÷ (V × 0.85 × 0.9)","Required VFD Current Formula":"Motor FLA × Duty Cycle Factor ÷ (Altitude Factor × Temperature Factor)"},necReferences:["NEC Article 430 - Motors, Motor Circuits, and Controllers","NEC 430.122 - Rating of Motor Control Circuit Overcurrent Protective Device","Always follow VFD manufacturer specifications","Use shielded cables for motor connections to reduce EMI","Install line and load reactors when recommended by manufacturer","Ensure proper grounding and bonding per NEC Article 250","Consider bypass contactor for critical applications","Verify VFD voltage matches motor nameplate voltage","Consider harmonic filtering for sensitive equipment","Ensure adequate cooling and ventilation for VFD enclosure",L<1?`WARNING: High altitude derating applied (${(L*100).toFixed(0)}%)`:"",j<1?`WARNING: High temperature derating applied (${(j*100).toFixed(0)}%)`:"",d==="heavy"?"WARNING: Heavy duty cycle requires oversizing for continuous operation":""].filter(oe=>oe!=="")};sn(ie)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${A.cardBorder}`,paddingBottom:"0.5rem"},children:"Motor Information"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Motor Horsepower (HP)"}),i.jsx("input",{type:"number",value:n,onChange:D=>o(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},placeholder:"Enter HP",step:"0.5"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Voltage (V)"}),i.jsxs("select",{value:a,onChange:D=>c(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"230",children:"230V"}),i.jsx("option",{value:"460",children:"460V"}),i.jsx("option",{value:"575",children:"575V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Phases"}),i.jsxs("select",{value:u,onChange:D=>f(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"1",children:"Single Phase"}),i.jsx("option",{value:"3",children:"Three Phase"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Load Type"}),i.jsxs("select",{value:I,onChange:D=>z(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"variable",children:"Variable Torque (Fans, Pumps)"}),i.jsx("option",{value:"constant",children:"Constant Torque (Conveyors)"}),i.jsx("option",{value:"highTorque",children:"High Starting Torque"})]})]})]})]}),i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${A.cardBorder}`,paddingBottom:"0.5rem"},children:"Environmental Conditions"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Duty Cycle"}),i.jsxs("select",{value:d,onChange:D=>y(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"light",children:"Light Duty (Intermittent)"}),i.jsx("option",{value:"normal",children:"Normal Duty"}),i.jsx("option",{value:"heavy",children:"Heavy Duty (Continuous)"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Altitude (feet)"}),i.jsx("input",{type:"number",value:w,onChange:D=>C(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},placeholder:"0",step:"100"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Ambient Temp (°C)"}),i.jsx("input",{type:"number",value:v,onChange:D=>B(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},placeholder:"40"})]})]}),i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${A.cardBorder}`},children:[i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"0.75rem"},children:"Derating Factors"}),i.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:A.labelText},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Altitude Factor:"}),i.jsxs("span",{style:{fontWeight:"600",color:A.cardText},children:[(L*100).toFixed(0),"%"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Temperature Factor:"}),i.jsxs("span",{style:{fontWeight:"600",color:A.cardText},children:[(j*100).toFixed(0),"%"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Duty Cycle Factor:"}),i.jsxs("span",{style:{fontWeight:"600",color:A.cardText},children:[(T*100).toFixed(0),"%"]})]})]})]})]})]}),n&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginBottom:"0.25rem"},children:"Motor FLA"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:A.cardText},children:U.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginBottom:"0.25rem"},children:"Required VFD Current"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:A.cardText},children:V.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Recommended VFD"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:b?b.amps:"N/A"}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),b&&i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${A.cardBorder}`},children:[i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"0.75rem"},children:"VFD Specifications"}),i.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:A.labelText},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Current Rating:"}),i.jsxs("span",{style:{fontWeight:"600",color:A.cardText},children:[b.amps," Amperes"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Motor HP (460V):"}),i.jsxs("span",{style:{fontWeight:"600",color:A.cardText},children:[b.hp460V," HP"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Motor HP (230V):"}),i.jsxs("span",{style:{fontWeight:"600",color:A.cardText},children:[b.hp230V," HP"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"0.5rem",borderTop:`1px solid ${A.cardBorder}`,marginTop:"0.25rem"},children:[i.jsx("span",{children:"Safety Margin:"}),i.jsxs("span",{style:{fontWeight:"600",color:"#059669"},children:[((b.amps/V-1)*100).toFixed(0),"%"]})]})]})]})]}),b&&!N&&i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"VFD Selection Complete"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Selected VFD meets all requirements with adequate safety margin for reliable operation."})]})]})}),N&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(ih,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{lineHeight:"1.5"},children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"600",color:"#78350f",marginBottom:"0.5rem"},children:"Important Considerations"}),i.jsxs("ul",{style:{fontSize:"0.8125rem",color:"#92400e",margin:0,paddingLeft:"1.25rem"},children:[L<1&&i.jsxs("li",{style:{marginBottom:"0.25rem"},children:["High altitude installation requires derating (",(L*100).toFixed(0),"% of rated capacity)"]}),j<1&&i.jsxs("li",{style:{marginBottom:"0.25rem"},children:["High ambient temperature requires derating (",(j*100).toFixed(0),"% of rated capacity)"]}),d==="heavy"&&i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Heavy duty cycle applications require oversizing for continuous operation"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Verify VFD voltage matches motor nameplate voltage"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider harmonic filtering for sensitive equipment"}),i.jsx("li",{children:"Ensure adequate cooling and ventilation"})]})]})]})})]}),i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${A.cardBorder}`,fontSize:"0.8125rem",color:A.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:A.cardText},children:"VFD Installation Notes:"}),"Always follow manufacturer specifications • Use shielded cables for motor connections • Install line and load reactors when recommended • Ensure proper grounding and bonding • Consider bypass contactor for critical applications"]})]})}),UI=me.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=me.useState("inductive"),[o,a]=me.useState("60"),[c,u]=me.useState(""),[f,d]=me.useState("mH"),[y,w]=me.useState("60"),[C,v]=me.useState(""),[B,I]=me.useState("μF"),[z,A]=me.useState(""),[M,U]=me.useState(""),[F,se]=me.useState("inductive"),[ue,L]=me.useState(""),[j,T]=me.useState("mH"),[V,k]=me.useState(""),[b,N]=me.useState("μF"),D={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},q=()=>{if(!o||!c)return null;const J=parseFloat(o);let re=parseFloat(c);return f==="mH"?re=re/1e3:f==="μH"&&(re=re/1e6),{reactance:(2*Math.PI*J*re).toFixed(2),frequency:J,inductance:c,unit:f}},ie=()=>{if(!y||!C)return null;const J=parseFloat(y);let re=parseFloat(C);return B==="μF"?re=re/1e6:B==="nF"?re=re/1e9:B==="pF"&&(re=re/1e12),{reactance:(1/(2*Math.PI*J*re)).toFixed(2),frequency:J,capacitance:C,unit:B}},oe=()=>{if(!z||!M)return null;const J=parseFloat(z),re=parseFloat(M),he=Math.sqrt(J*J+re*re),ge=Math.atan2(re,J)*(180/Math.PI);return{impedance:he.toFixed(2),angle:ge.toFixed(2),resistance:J,reactance:re,type:F}},ne=()=>{if(!ue||!V)return null;let J=parseFloat(ue),re=parseFloat(V);return j==="mH"?J=J/1e3:j==="μH"&&(J=J/1e6),b==="μF"?re=re/1e6:b==="nF"?re=re/1e9:b==="pF"&&(re=re/1e12),{frequency:(1/(2*Math.PI*Math.sqrt(J*re))).toFixed(2),inductance:ue,inductanceUnit:j,capacitance:V,capacitanceUnit:b}},ve=q(),be=ie(),Z=oe(),W=ne();return me.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="inductive"){if(!o||!c){alert("Please enter all required values before exporting to PDF");return}const J={calculatorName:"Reactance & Impedance - Inductive Reactance (XL)",inputs:{Frequency:`${o} Hz`,Inductance:`${c} ${f}`},results:{"Inductive Reactance (XL)":`${ve.reactance} Ω`},additionalInfo:{Formula:"XL = 2πfL",Description:"Inductive reactance increases with frequency and opposes changes in current flow"},necReferences:["Inductive reactance is directly proportional to frequency","In AC circuits, inductors oppose current changes","XL increases linearly with both frequency and inductance"]};sn(J)}else if(t==="capacitive"){if(!y||!C){alert("Please enter all required values before exporting to PDF");return}const J={calculatorName:"Reactance & Impedance - Capacitive Reactance (XC)",inputs:{Frequency:`${y} Hz`,Capacitance:`${C} ${B}`},results:{"Capacitive Reactance (XC)":`${be.reactance} Ω`},additionalInfo:{Formula:"XC = 1 / (2πfC)",Description:"Capacitive reactance decreases with frequency and opposes changes in voltage"},necReferences:["Capacitive reactance is inversely proportional to frequency","In AC circuits, capacitors oppose voltage changes","XC decreases as frequency or capacitance increases"]};sn(J)}else if(t==="impedance"){if(!z||!M){alert("Please enter all required values before exporting to PDF");return}const J={calculatorName:"Reactance & Impedance - Impedance Calculator",inputs:{"Reactance Type":F.charAt(0).toUpperCase()+F.slice(1),"Resistance (R)":`${z} Ω`,"Reactance (X)":`${M} Ω`},results:{"Impedance (Z)":`${Z.impedance} Ω`,"Phase Angle (θ)":`${Z.angle}°`,"Phase Relationship":F==="inductive"?"Leading":"Lagging"},additionalInfo:{"Impedance Formula":"Z = √(R² + X²)","Phase Angle Formula":"θ = arctan(X / R)",Description:"Impedance is the total opposition to current flow in an AC circuit, combining resistance and reactance"},necReferences:["Impedance combines resistive and reactive components","Phase angle indicates the relationship between voltage and current","In inductive circuits, current lags voltage; in capacitive circuits, current leads voltage"]};sn(J)}else if(t==="resonance"){if(!ue||!V){alert("Please enter all required values before exporting to PDF");return}const J={calculatorName:"Reactance & Impedance - Resonant Frequency",inputs:{Inductance:`${ue} ${j}`,Capacitance:`${V} ${b}`},results:{"Resonant Frequency (fr)":`${W.frequency} Hz`},additionalInfo:{Formula:"fr = 1 / (2π√LC)","At Resonance":"Inductive and capacitive reactances are equal and opposite (XL = XC)","Series Circuit":"Minimum impedance at resonance","Parallel Circuit":"Maximum impedance at resonance"},necReferences:["Resonance occurs when XL = XC","At resonant frequency, circuit is purely resistive","Series resonant circuits have minimum impedance","Parallel resonant circuits have maximum impedance"]};sn(J)}}})),i.jsx("div",{className:cs.container,children:i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsxs("button",{onClick:()=>n("inductive"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="inductive"?"#3b82f6":"transparent",color:t==="inductive"?"white":D.labelText,border:`1px solid ${t==="inductive"?"#3b82f6":D.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:["Inductive (X",i.jsx("sub",{children:"L"}),")"]}),i.jsxs("button",{onClick:()=>n("capacitive"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="capacitive"?"#3b82f6":"transparent",color:t==="capacitive"?"white":D.labelText,border:`1px solid ${t==="capacitive"?"#3b82f6":D.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:["Capacitive (X",i.jsx("sub",{children:"C"}),")"]}),i.jsx("button",{onClick:()=>n("impedance"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="impedance"?"#3b82f6":"transparent",color:t==="impedance"?"white":D.labelText,border:`1px solid ${t==="impedance"?"#3b82f6":D.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Impedance (Z)"}),i.jsx("button",{onClick:()=>n("resonance"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="resonance"?"#3b82f6":"transparent",color:t==="resonance"?"white":D.labelText,border:`1px solid ${t==="resonance"?"#3b82f6":D.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Resonance"})]})}),t==="inductive"&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${D.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),i.jsx("input",{type:"number",value:o,onChange:J=>a(J.target.value),placeholder:"60",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:D.subtleText,marginTop:"0.25rem"},children:"Common: 50 Hz or 60 Hz"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Inductance"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[i.jsx("input",{type:"number",value:c,onChange:J=>u(J.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}}),i.jsxs("select",{value:f,onChange:J=>d(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"H",children:"H"}),i.jsx("option",{value:"mH",children:"mH"}),i.jsx("option",{value:"μH",children:"μH"})]})]})]})]})]}),ve&&i.jsx("div",{children:i.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Inductive Reactance (X",i.jsx("sub",{children:"L"}),")"]}),i.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:ve.reactance}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms (Ω)"})]}),i.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${D.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:D.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:D.cardText},children:"Circuit Values:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:D.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Frequency: ",ve.frequency," Hz"]}),i.jsxs("div",{children:["Inductance: ",ve.inductance," ",ve.unit]}),i.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:D.subtleText},children:["Formula: X",i.jsx("sub",{children:"L"})," = 2πfL"]})]})]})]})})]}),t==="capacitive"&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${D.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),i.jsx("input",{type:"number",value:y,onChange:J=>w(J.target.value),placeholder:"60",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:D.subtleText,marginTop:"0.25rem"},children:"Common: 50 Hz or 60 Hz"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Capacitance"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[i.jsx("input",{type:"number",value:C,onChange:J=>v(J.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}}),i.jsxs("select",{value:B,onChange:J=>I(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"μF",children:"μF"}),i.jsx("option",{value:"nF",children:"nF"}),i.jsx("option",{value:"pF",children:"pF"})]})]})]})]})]}),be&&i.jsx("div",{children:i.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Capacitive Reactance (X",i.jsx("sub",{children:"C"}),")"]}),i.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:be.reactance}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms (Ω)"})]}),i.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${D.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:D.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:D.cardText},children:"Circuit Values:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:D.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Frequency: ",be.frequency," Hz"]}),i.jsxs("div",{children:["Capacitance: ",be.capacitance," ",be.unit]}),i.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:D.subtleText},children:["Formula: X",i.jsx("sub",{children:"C"})," = 1 / (2πfC)"]})]})]})]})})]}),t==="impedance"&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${D.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Reactance Type"}),i.jsxs("select",{value:F,onChange:J=>se(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[i.jsxs("option",{value:"inductive",children:["Inductive (X",i.jsx("sub",{children:"L"}),")"]}),i.jsxs("option",{value:"capacitive",children:["Capacitive (X",i.jsx("sub",{children:"C"}),")"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Resistance (R) in Ohms"}),i.jsx("input",{type:"number",value:z,onChange:J=>A(J.target.value),placeholder:"Enter resistance",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Reactance (X) in Ohms"}),i.jsx("input",{type:"number",value:M,onChange:J=>U(J.target.value),placeholder:"Enter reactance",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}})]})]})]}),Z&&i.jsx("div",{children:i.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Impedance (Z)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:Z.impedance}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms (Ω)"})]}),i.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:D.labelText,marginBottom:"0.25rem"},children:"Phase Angle (θ)"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:D.cardText},children:[Z.angle,"°"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:D.labelText,marginTop:"0.25rem"},children:F==="inductive"?"Leading":"Lagging"})]})]}),i.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${D.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:D.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:D.cardText},children:"Circuit Values:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:D.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Resistance (R): ",Z.resistance," Ω"]}),i.jsxs("div",{children:["Reactance (X): ",Z.reactance," Ω (",Z.type,")"]}),i.jsx("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:D.subtleText},children:"Formula: Z = √(R² + X²)"}),i.jsx("div",{style:{fontStyle:"italic",color:D.subtleText},children:"Phase Angle: θ = arctan(X / R)"})]})]})]})})]}),t==="resonance"&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${D.cardBorder}`,paddingBottom:"0.5rem"},children:"LC Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Inductance"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[i.jsx("input",{type:"number",value:ue,onChange:J=>L(J.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}}),i.jsxs("select",{value:j,onChange:J=>T(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"H",children:"H"}),i.jsx("option",{value:"mH",children:"mH"}),i.jsx("option",{value:"μH",children:"μH"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Capacitance"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[i.jsx("input",{type:"number",value:V,onChange:J=>k(J.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}}),i.jsxs("select",{value:b,onChange:J=>N(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"μF",children:"μF"}),i.jsx("option",{value:"nF",children:"nF"}),i.jsx("option",{value:"pF",children:"pF"})]})]})]})]})]}),W&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Resonant Frequency (f",i.jsx("sub",{children:"r"}),")"]}),i.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:W.frequency}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Hertz (Hz)"})]}),i.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${D.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:D.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:D.cardText},children:"Circuit Values:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:D.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Inductance: ",W.inductance," ",W.inductanceUnit]}),i.jsxs("div",{children:["Capacitance: ",W.capacitance," ",W.capacitanceUnit]}),i.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:D.subtleText},children:["Formula: f",i.jsx("sub",{children:"r"})," = 1 / (2π√LC)"]})]})]})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(us,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"About Resonant Frequency:"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"At resonance, inductive and capacitive reactances are equal and opposite, resulting in minimum impedance in series circuits and maximum impedance in parallel circuits."})]})]})})]})]}),i.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${D.cardBorder}`,fontSize:"0.8125rem",color:D.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:D.cardText},children:"Key Concepts:"}),"X",i.jsx("sub",{children:"L"})," increases with frequency • X",i.jsx("sub",{children:"C"})," decreases with frequency • At resonance X",i.jsx("sub",{children:"L"})," = X",i.jsx("sub",{children:"C"})," • Impedance combines resistance and reactance"]})]})})}),qI=me.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=me.useState("correction"),[o,a]=me.useState(""),[c,u]=me.useState("480"),[f,d]=me.useState(""),[y,w]=me.useState("0.95"),[C,v]=me.useState("60"),[B,I]=me.useState(""),[z,A]=me.useState(""),[M,U]=me.useState("0.95"),[F,se]=me.useState(""),[ue,L]=me.useState(""),[j,T]=me.useState("8760"),[V,k]=me.useState(""),b={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},N=()=>{if(!o||!f)return null;const oe=parseFloat(o),ne=parseFloat(f),ve=parseFloat(y),be=parseFloat(c),Z=parseFloat(C),W=Math.acos(ne),J=Math.acos(ve),re=oe*Math.tan(W),he=oe*Math.tan(J),_e=re-he,fe=_e*1e9/(2*Math.PI*Z*be*be),xe=oe/ne,Pe=oe/ve,We=xe*1e3/(Math.sqrt(3)*be),Qe=Pe*1e3/(Math.sqrt(3)*be),Xe=(We-Qe)/We*100;return{kVAR:_e.toFixed(2),capacitance:fe.toFixed(2),existingApparentPower:xe.toFixed(2),correctedApparentPower:Pe.toFixed(2),powerReduction:((xe-Pe)/xe*100).toFixed(1),existingCurrent:We.toFixed(2),correctedCurrent:Qe.toFixed(2),currentReduction:Xe.toFixed(1),existingPF:(ne*100).toFixed(1),targetPF:(ve*100).toFixed(1)}},D=()=>{if(!B||!z||!F)return null;const oe=parseFloat(B),ne=parseFloat(z),ve=parseFloat(M),be=parseFloat(F),Z=parseFloat(ue)||0,W=parseFloat(j),J=parseFloat(V)||0,re=oe/ne,he=oe/ve,ge=re-he,_e=ge*be,xe=(ve-ne)*100*.01,Pe=oe*W*(xe/100)*Z,We=J*12,Qe=_e*12,Xe=Qe+Pe+We,Fe=Math.acos(ne),de=Math.acos(ve),Pt=oe*(Math.tan(Fe)-Math.tan(de)),At=Pt*75,vt=Xe>0?At/Xe*12:0;return{kVAReduction:ge.toFixed(2),monthlyDemandSavings:_e.toFixed(2),annualDemandSavings:Qe.toFixed(2),annualEnergySavings:Pe.toFixed(2),annualPenaltySavings:We.toFixed(2),totalAnnualSavings:Xe.toFixed(2),kVARRequired:Pt.toFixed(2),estimatedCost:At.toFixed(2),paybackMonths:vt.toFixed(1),paybackYears:(vt/12).toFixed(1),fiveYearSavings:(Xe*5-At).toFixed(2)}},q=N(),ie=D();return me.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="correction"){if(!o||!f){alert("Please enter all required values before exporting to PDF");return}const oe={calculatorName:"Power Factor Correction - Capacitor Sizing",inputs:{"Real Power":`${o} kW`,"System Voltage":`${c}V`,"Existing Power Factor":f,"Target Power Factor":y,Frequency:`${C} Hz`},results:{"Required Capacitor Size":`${q.kVAR} kVAR`,"Capacitance per Phase":`${q.capacitance} μF`,"Power Factor Before":`${q.existingPF}%`,"Power Factor After":`${q.targetPF}%`,"Apparent Power Before":`${q.existingApparentPower} kVA`,"Apparent Power After":`${q.correctedApparentPower} kVA`,"Apparent Power Reduction":`${q.powerReduction}%`,"Line Current Before":`${q.existingCurrent} A`,"Line Current After":`${q.correctedCurrent} A`,"Current Reduction":`${q.currentReduction}%`},additionalInfo:{Benefits:"Power factor correction reduces utility demand charges, lowers line losses and voltage drop, increases system capacity, reduces equipment heating, and improves voltage regulation."},necReferences:["NEC Article 460 - Capacitors","NEC 460.8 - Conductors supplying capacitors shall have an ampacity of not less than 135% of the rated current of the capacitor","NEC 460.9 - Rating or Setting of Motor Overload Device"]};sn(oe)}else if(t==="savings"){if(!B||!z||!F){alert("Please enter all required values before exporting to PDF");return}const oe={calculatorName:"Power Factor Correction - Cost Savings Analysis",inputs:{"Real Power":`${B} kW`,"Operating Hours per Year":j,"Existing Power Factor":z,"Target Power Factor":M,"Demand Charge":`$${F}/kVA/month`,"Energy Rate":ue?`$${ue}/kWh`:"Not specified","Monthly PF Penalty":V?`$${V}/month`:"None"},results:{"Total Annual Savings":`$${ie.totalAnnualSavings}/year`,"Monthly Demand Savings":`$${ie.monthlyDemandSavings}/month`,"Annual Demand Savings":`$${ie.annualDemandSavings}/year`,"Annual Energy Savings":`$${ie.annualEnergySavings}/year`,"Annual Penalty Savings":`$${ie.annualPenaltySavings}/year`,"kVA Reduction":`${ie.kVAReduction} kVA`,"Required Capacitor Size":`${ie.kVARRequired} kVAR`,"Estimated Equipment Cost":`$${ie.estimatedCost}`,"Payback Period":`${ie.paybackMonths} months (${ie.paybackYears} years)`,"5-Year Net Savings":`$${ie.fiveYearSavings}`},additionalInfo:{"Cost Basis":"Estimated at $75 per kVAR installed","Savings Note":"Actual costs and savings may vary based on equipment selection, installation costs, utility rate structures, and load profiles"},necReferences:["NEC Article 460 - Capacitors","NEC 460.8 - Conductors supplying capacitors shall have an ampacity of not less than 135% of the rated current of the capacitor","IEEE Std 18-2012 - Standard for Shunt Power Capacitors"]};sn(oe)}}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>n("correction"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="correction"?"#3b82f6":"transparent",color:t==="correction"?"white":b.labelText,border:`1px solid ${t==="correction"?"#3b82f6":b.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Capacitor Sizing"}),i.jsx("button",{onClick:()=>n("savings"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="savings"?"#3b82f6":"transparent",color:t==="savings"?"white":b.labelText,border:`1px solid ${t==="savings"?"#3b82f6":b.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Cost Savings"})]})}),t==="correction"?i.jsxs("div",{children:[i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:b.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${b.cardBorder}`,paddingBottom:"0.5rem"},children:"System Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Real Power (kW)"}),i.jsx("input",{type:"number",value:o,onChange:oe=>a(oe.target.value),placeholder:"Enter load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"System Voltage (V)"}),i.jsxs("select",{value:c,onChange:oe=>u(oe.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Existing Power Factor"}),i.jsx("input",{type:"number",value:f,onChange:oe=>d(oe.target.value),placeholder:"0.70 - 0.99",step:"0.01",min:"0.5",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:b.subtleText,marginTop:"0.25rem"},children:"Current (uncorrected)"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:["Target Power  ",i.jsx("br",{}),"Factor ",i.jsx("br",{})]}),i.jsxs("select",{value:y,onChange:oe=>w(oe.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"0.90",children:"0.90 (90%)"}),i.jsx("option",{value:"0.95",children:"0.95 (95%) - Recommended"}),i.jsx("option",{value:"0.98",children:"0.98 (98%)"}),i.jsx("option",{value:"0.99",children:"0.99 (99%)"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),i.jsxs("select",{value:C,onChange:oe=>v(oe.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"50",children:"50 Hz"}),i.jsx("option",{value:"60",children:"60 Hz"})]})]})]})]}),q&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:b.cardText,marginTop:0,marginBottom:"1rem"},children:"Required Capacitor Bank"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Capacitor Size"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:q.kVAR}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"kVAR"})]}),i.jsxs("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:b.labelText,marginBottom:"0.25rem"},children:"Capacitance"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:b.cardText},children:q.capacitance}),i.jsx("div",{style:{fontSize:"0.75rem",color:b.labelText,marginTop:"0.25rem"},children:"μF per phase"})]})]}),i.jsxs("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${b.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:b.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:b.cardText},children:"Power Factor Improvement:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:b.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["From: ",q.existingPF,"% → To: ",q.targetPF,"%"]}),i.jsxs("div",{children:["Real Power: ",o," kW (constant)"]}),i.jsxs("div",{children:["System Voltage: ",c,"V, ",C," Hz"]})]})]})]}),i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:b.cardText,marginTop:0,marginBottom:"1rem"},children:"System Improvements"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${b.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:b.cardText,marginBottom:"0.5rem"},children:"Apparent Power Reduction"}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:b.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Before: ",q.existingApparentPower," kVA"]}),i.jsxs("div",{children:["After: ",q.correctedApparentPower," kVA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#059669",marginTop:"0.25rem"},children:["Reduction: ",q.powerReduction,"%"]})]})]}),i.jsxs("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${b.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:b.cardText,marginBottom:"0.5rem"},children:"Line Current Reduction"}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:b.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Before: ",q.existingCurrent," A"]}),i.jsxs("div",{children:["After: ",q.correctedCurrent," A"]}),i.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#059669",marginTop:"0.25rem"},children:["Reduction: ",q.currentReduction,"%"]})]})]})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(f_,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Benefits of Power Factor Correction:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Reduced utility demand charges"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Lower line losses and voltage drop"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Increased system capacity"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Reduced equipment heating"}),i.jsx("li",{children:"Improved voltage regulation"})]})]})]})})]})]}):i.jsxs("div",{children:[i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:b.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${b.cardBorder}`,paddingBottom:"0.5rem"},children:"Load & Power Factor"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:["Real Power ",i.jsx("br",{})," (kW)"]}),i.jsx("input",{type:"number",value:B,onChange:oe=>I(oe.target.value),placeholder:"Enter load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Operating Hours/Year"}),i.jsx("input",{type:"number",value:j,onChange:oe=>T(oe.target.value),placeholder:"8760",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:b.subtleText,marginTop:"0.25rem"},children:"8760 = 24/7 operation"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Existing Power Factor"}),i.jsx("input",{type:"number",value:z,onChange:oe=>A(oe.target.value),placeholder:"0.70 - 0.99",step:"0.01",min:"0.5",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:["Target Power ",i.jsx("br",{})," Factor"]}),i.jsxs("select",{value:M,onChange:oe=>U(oe.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"0.90",children:"0.90 (90%)"}),i.jsx("option",{value:"0.95",children:"0.95 (95%)"}),i.jsx("option",{value:"0.98",children:"0.98 (98%)"})]})]})]})]})]}),i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:b.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${b.cardBorder}`,paddingBottom:"0.5rem"},children:"Utility Rates"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Demand Charge ($/kVA/month)"}),i.jsx("input",{type:"number",value:F,onChange:oe=>se(oe.target.value),placeholder:"10 - 25",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:b.subtleText,marginTop:"0.25rem"},children:"Check your utility bill"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Energy Rate ($/kWh) - Optional"}),i.jsx("input",{type:"number",value:ue,onChange:oe=>L(oe.target.value),placeholder:"0.08 - 0.15",step:"0.001",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:b.subtleText,marginTop:"0.25rem"},children:"For energy loss savings"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Monthly PF Penalty ($/month) - Optional"}),i.jsx("input",{type:"number",value:V,onChange:oe=>k(oe.target.value),placeholder:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:b.subtleText,marginTop:"0.25rem"},children:"If utility charges PF penalty"})]})]})]}),ie&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:b.cardText,marginTop:0,marginBottom:"1rem"},children:"Annual Cost Savings"}),i.jsxs("div",{style:{background:"#d1fae5",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"#059669",marginBottom:"0.5rem",fontWeight:"600"},children:"Total Annual Savings"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#059669"},children:["$",ie.totalAnnualSavings]}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#059669",marginTop:"0.25rem"},children:"per year"})]}),i.jsxs("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${b.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:b.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:b.cardText},children:"Savings Breakdown:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:b.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Demand Charge Savings: $",ie.annualDemandSavings,"/year"]}),parseFloat(ie.annualEnergySavings)>0&&i.jsxs("div",{children:["Energy Loss Savings: $",ie.annualEnergySavings,"/year"]}),parseFloat(ie.annualPenaltySavings)>0&&i.jsxs("div",{children:["Penalty Elimination: $",ie.annualPenaltySavings,"/year"]}),i.jsxs("div",{style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:`1px solid ${b.cardBorder}`},children:["kVA Reduction: ",ie.kVAReduction," kVA"]})]})]})]}),i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:b.cardText,marginTop:0,marginBottom:"1rem"},children:"Return on Investment"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:b.labelText,marginBottom:"0.25rem"},children:"Estimated Cost"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:b.cardText},children:["$",ie.estimatedCost]}),i.jsxs("div",{style:{fontSize:"0.75rem",color:b.labelText,marginTop:"0.25rem"},children:[ie.kVARRequired," kVAR @ $75/kVAR"]})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Payback Period"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:ie.paybackMonths}),i.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:["months (",ie.paybackYears," years)"]})]})]}),i.jsx("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${b.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:b.labelText,display:"grid",gap:"0.25rem"},children:[i.jsx("div",{children:i.jsx("strong",{style:{color:b.cardText},children:"5-Year Net Savings:"})}),i.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#059669",marginTop:"0.25rem"},children:["$",ie.fiveYearSavings]}),i.jsx("div",{style:{fontSize:"0.8125rem",color:b.subtleText,marginTop:"0.25rem"},children:"Total savings minus initial investment"})]})})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(us,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Note:"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Actual costs and savings may vary based on equipment selection, installation costs, utility rate structures, and load profiles. Consult with a qualified electrical engineer for detailed analysis."})]})]})})]})]}),i.jsxs("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${b.cardBorder}`,fontSize:"0.8125rem",color:b.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:b.cardText},children:"Power Factor Basics:"}),"PF = Real Power (kW) ÷ Apparent Power (kVA) • Low PF causes higher current and utility charges • Target 0.95+ for optimal efficiency • Capacitors supply reactive power locally"]})]})}),HI=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=me.useState("from-kw-pf"),[a,c]=me.useState(""),[u,f]=me.useState(""),[d,y]=me.useState(""),[w,C]=me.useState(""),[v,B]=me.useState("lagging"),I={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},A=(()=>{let U=0,F=0,se=0,ue=0,L=0;switch(n){case"from-kw-pf":if(!a||!w)return null;U=parseFloat(a),ue=parseFloat(w),se=U/ue,L=Math.acos(ue)*(180/Math.PI),F=se*Math.sin(Math.acos(ue)),v==="leading"&&(F=-F);break;case"from-kw-kvar":if(!a||!u)return null;U=parseFloat(a),F=parseFloat(u),v==="leading"&&(F=-Math.abs(F)),se=Math.sqrt(Math.pow(U,2)+Math.pow(F,2)),ue=U/se,L=Math.atan(Math.abs(F)/U)*(180/Math.PI);break;case"from-kva-pf":if(!d||!w)return null;se=parseFloat(d),ue=parseFloat(w),U=se*ue,L=Math.acos(ue)*(180/Math.PI),F=se*Math.sin(Math.acos(ue)),v==="leading"&&(F=-F);break;case"from-kva-kw":if(!d||!a||(se=parseFloat(d),U=parseFloat(a),U>se))return null;ue=U/se,L=Math.acos(ue)*(180/Math.PI),F=Math.sqrt(Math.pow(se,2)-Math.pow(U,2)),v==="leading"&&(F=-F);break;default:return null}return{kW:U,kVAR:F,kVA:se,powerFactor:ue,angle:L,isLeading:v==="leading"}})(),M=U=>{const F=Math.abs(U);return F>=.95?{quality:"Excellent",color:"#10b981",bg:"#d1fae5",border:"#6ee7b7"}:F>=.9?{quality:"Good",color:"#3b82f6",bg:"#dbeafe",border:"#93c5fd"}:F>=.85?{quality:"Fair",color:"#f59e0b",bg:"#fef3c7",border:"#fcd34d"}:{quality:"Poor",color:"#ef4444",bg:"#fee2e2",border:"#fca5a5"}};return me.useImperativeHandle(t,()=>({exportPDF:()=>{if(!A){alert("Please enter values before exporting to PDF");return}const U=M(A.powerFactor),se={calculatorName:"Power Triangle Calculator",inputs:{calculationMode:{"from-kw-pf":"Real Power (kW) and Power Factor","from-kw-kvar":"Real Power (kW) and Reactive Power (kVAR)","from-kva-pf":"Apparent Power (kVA) and Power Factor","from-kva-kw":"Apparent Power (kVA) and Real Power (kW)"}[n],...a&&{realPower:`${a} kW`},...u&&{reactivePower:`${u} kVAR`},...d&&{apparentPower:`${d} kVA`},...w&&{powerFactor:w},reactiveType:v==="leading"?"Leading (Capacitive)":"Lagging (Inductive)"},results:{realPower:`${A.kW.toFixed(2)} kW`,reactivePower:`${Math.abs(A.kVAR).toFixed(2)} kVAR (${A.isLeading?"Leading":"Lagging"})`,apparentPower:`${A.kVA.toFixed(2)} kVA`,powerFactor:`${A.powerFactor.toFixed(4)} ${A.isLeading?"(Leading)":"(Lagging)"}`,phaseAngle:`${A.angle.toFixed(2)}°`,powerFactorQuality:U.quality},additionalInfo:{powerTriangleRelationship:"kVA² = kW² + kVAR²",powerFactorFormula:"PF = kW ÷ kVA = cos(θ)",reactivePowerFormula:"kVAR = kVA × sin(θ)",phaseAngleFormula:"θ = arccos(PF)",leadingVsLagging:A.isLeading?"Leading PF: Current leads voltage (capacitive loads)":"Lagging PF: Current lags voltage (inductive loads - most common)"},necReferences:["Power Factor: Ratio of real power to apparent power","Leading PF (capacitive): Synchronous motors, over-excited generators, capacitor banks","Lagging PF (inductive): Most common - motors, transformers, inductive loads","Poor power factor results in: Higher current draw, increased losses, utility penalties","Power factor correction: Add capacitors for lagging PF, add inductors for leading PF","Many utilities charge penalties for power factor below 0.90-0.95"]};sn(se)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:I.cardBg,border:`1px solid ${I.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:I.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${I.cardBorder}`,paddingBottom:"0.5rem"},children:"Calculation Mode"}),i.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:[{value:"from-kw-pf",label:"From kW and Power Factor"},{value:"from-kw-kvar",label:"From kW and kVAR"},{value:"from-kva-pf",label:"From kVA and Power Factor"},{value:"from-kva-kw",label:"From kVA and kW"}].map(U=>i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:n===U.value?I.sectionBg:"transparent",border:`1px solid ${n===U.value?"#3b82f6":I.cardBorder}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseOver:F=>{n!==U.value&&(F.currentTarget.style.background=I.sectionBg)},onMouseOut:F=>{n!==U.value&&(F.currentTarget.style.background="transparent")},children:[i.jsx("input",{type:"radio",name:"calculationMode",value:U.value,checked:n===U.value,onChange:F=>o(F.target.value),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:I.cardText},children:U.label})]},U.value))})]}),i.jsxs("div",{style:{background:I.cardBg,border:`1px solid ${I.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:I.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${I.cardBorder}`,paddingBottom:"0.5rem"},children:"Input Values"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[(n==="from-kw-pf"||n==="from-kw-kvar"||n==="from-kva-kw")&&i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:I.labelText,marginBottom:"0.5rem"},children:["Real Power ",i.jsx("br",{}),"(kW)"]}),i.jsx("input",{type:"number",value:a,onChange:U=>c(U.target.value),placeholder:"Enter kW",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${I.inputBorder}`,borderRadius:"8px",backgroundColor:I.inputBg,color:I.cardText,boxSizing:"border-box"}})]}),n==="from-kw-kvar"&&i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:I.labelText,marginBottom:"0.5rem"},children:"Reactive Power (kVAR)"}),i.jsx("input",{type:"number",value:u,onChange:U=>f(U.target.value),placeholder:"Enter kVAR",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${I.inputBorder}`,borderRadius:"8px",backgroundColor:I.inputBg,color:I.cardText,boxSizing:"border-box"}})]}),(n==="from-kva-pf"||n==="from-kva-kw")&&i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:I.labelText,marginBottom:"0.5rem"},children:["Apparent Power ",i.jsx("br",{})," (kVA)"]}),i.jsx("input",{type:"number",value:d,onChange:U=>y(U.target.value),placeholder:"Enter kVA",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${I.inputBorder}`,borderRadius:"8px",backgroundColor:I.inputBg,color:I.cardText,boxSizing:"border-box"}})]}),(n==="from-kw-pf"||n==="from-kva-pf")&&i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:I.labelText,marginBottom:"0.5rem"},children:["Power Factor ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsx("input",{type:"number",value:w,onChange:U=>C(U.target.value),placeholder:"0.00 to 1.00",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${I.inputBorder}`,borderRadius:"8px",backgroundColor:I.inputBg,color:I.cardText,boxSizing:"border-box"}})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:I.labelText,marginBottom:"0.5rem"},children:"Reactive Power Type"}),i.jsxs("select",{value:v,onChange:U=>B(U.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${I.inputBorder}`,borderRadius:"8px",backgroundColor:I.inputBg,color:I.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"lagging",children:"Lagging (Inductive - Most Common)"}),i.jsx("option",{value:"leading",children:"Leading (Capacitive)"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:I.subtleText,marginTop:"0.25rem"},children:"Inductive: Motors, transformers | Capacitive: Capacitor banks, lightly loaded cables"})]})]}),A&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:I.cardBg,border:`1px solid ${I.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:I.cardText,marginTop:0,marginBottom:"1rem"},children:"Power Triangle Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:I.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:I.labelText,marginBottom:"0.25rem"},children:"Real Power (kW)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:I.cardText},children:A.kW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:I.labelText,marginTop:"0.25rem"},children:"Working Power"})]}),i.jsxs("div",{style:{background:I.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:I.labelText,marginBottom:"0.25rem"},children:"Reactive Power (kVAR)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:I.cardText},children:Math.abs(A.kVAR).toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:I.labelText,marginTop:"0.25rem"},children:A.isLeading?"Leading":"Lagging"})]}),i.jsxs("div",{style:{background:I.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:I.labelText,marginBottom:"0.25rem"},children:"Apparent Power (kVA)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:I.cardText},children:A.kVA.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:I.labelText,marginTop:"0.25rem"},children:"Total Power"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{style:{background:M(A.powerFactor).bg,border:`1px solid ${M(A.powerFactor).border}`,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:M(A.powerFactor).color,marginBottom:"0.25rem"},children:"Power Factor"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:M(A.powerFactor).color},children:A.powerFactor.toFixed(4)}),i.jsx("div",{style:{fontSize:"0.75rem",color:M(A.powerFactor).color,marginTop:"0.25rem"},children:M(A.powerFactor).quality})]}),i.jsxs("div",{style:{background:I.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:I.labelText,marginBottom:"0.25rem"},children:"Phase Angle (θ)"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:I.cardText},children:[A.angle.toFixed(2),"°"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:I.labelText,marginTop:"0.25rem"},children:"V-I Phase Shift"})]})]})]}),i.jsx("div",{style:{background:I.sectionBg,border:`1px solid ${I.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(us,{size:20,color:"#3b82f6",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:I.labelText,lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",color:I.cardText,marginBottom:"0.5rem"},children:"Power Triangle Relationships:"}),i.jsxs("div",{style:{display:"grid",gap:"0.25rem"},children:[i.jsx("div",{children:"• kVA² = kW² + kVAR² (Pythagorean theorem)"}),i.jsx("div",{children:"• Power Factor = kW ÷ kVA = cos(θ)"}),i.jsx("div",{children:"• kVAR = kVA × sin(θ)"}),i.jsxs("div",{children:["• ",A.isLeading?"Leading PF: Current leads voltage (capacitive loads)":"Lagging PF: Current lags voltage (inductive loads - most common)"]})]})]})]})}),A.powerFactor<.9&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"12px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(us,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Low Power Factor Alert"}),i.jsxs("div",{children:["Power factor below 0.90 may result in utility penalties and increased energy costs. Consider power factor correction using ",A.isLeading?"inductors (reactors)":"capacitor banks","to improve efficiency and reduce demand charges."]})]})]})})]})]})}),GI=me.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=me.useState("find-power"),[a,c]=me.useState("480"),[u,f]=me.useState(""),[d,y]=me.useState("0.85"),[w,C]=me.useState(""),[v,B]=me.useState("line-to-line"),[I,z]=me.useState(""),A={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},U=(()=>{const F=parseFloat(a),se=parseFloat(u),ue=parseFloat(d),L=parseFloat(w),j=I?parseFloat(I)/100:1;if(n==="find-power"){if(!a||!u||!d)return null;const T=Math.sqrt(3)*F*se*ue/1e3,V=Math.sqrt(3)*F*se/1e3,k=Math.sqrt(Math.pow(V,2)-Math.pow(T,2));return{kW:T,kVA:V,kVAR:k,current:se,voltage:F,powerFactor:ue,amps:se}}else if(n==="find-current"){if(!a||!w||!d)return null;const T=L*1e3/(Math.sqrt(3)*F*ue),V=Math.sqrt(3)*F*T/1e3,k=Math.sqrt(Math.pow(V,2)-Math.pow(L,2));return{kW:L,kVA:V,kVAR:k,current:T,voltage:F,powerFactor:ue,amps:T}}else if(n==="motor-power"){if(!w||!I)return null;const T=L/j,V=L*1.341;let k=0;return a&&d&&(k=T*1e3/(Math.sqrt(3)*F*ue)),{inputKW:T,outputKW:L,outputHP:V,efficiency:j*100,amps:k,voltage:F,powerFactor:ue}}return null})();return me.useImperativeHandle(t,()=>({exportPDF:()=>{if(!U){alert("Please enter all required values before exporting to PDF");return}const F={"find-power":"Calculate Power from Voltage & Current","find-current":"Calculate Current from Power & Voltage","motor-power":"Motor Power & Efficiency Calculation"};let se;n==="motor-power"?se={calculatorName:"Three-Phase Power Calculator - Motor",inputs:{calculationMode:F[n],outputPower:`${w} kW`,efficiency:`${I}%`,...a&&{voltage:`${a}V (${v==="line-to-line"?"Line-to-Line":"Line-to-Neutral"})`},...d&&{powerFactor:d}},results:{outputPower:`${U.outputKW.toFixed(2)} kW`,outputPowerHP:`${U.outputHP.toFixed(2)} HP`,inputPower:`${U.inputKW.toFixed(2)} kW`,efficiency:`${U.efficiency.toFixed(1)}%`,...U.amps>0&&{estimatedCurrent:`${U.amps.toFixed(2)} A`}},additionalInfo:{formula:"Input Power = Output Power ÷ Efficiency",hpConversion:"1 kW = 1.341 HP",note:I?`At ${I}% efficiency, motor draws ${U.inputKW.toFixed(2)} kW to produce ${U.outputKW.toFixed(2)} kW output`:""}}:se={calculatorName:"Three-Phase Power Calculator",inputs:{calculationMode:F[n],voltage:`${a}V (${v==="line-to-line"?"Line-to-Line":"Line-to-Neutral"})`,...u&&{current:`${u} A`},...w&&{power:`${w} kW`},powerFactor:d},results:{realPower:`${U.kW.toFixed(2)} kW`,apparentPower:`${U.kVA.toFixed(2)} kVA`,reactivePower:`${U.kVAR.toFixed(2)} kVAR`,current:`${U.amps.toFixed(2)} A`,voltage:`${U.voltage}V`,powerFactor:U.powerFactor},additionalInfo:{powerFormula:"P = √3 × V × I × PF (kW)",apparentPowerFormula:"S = √3 × V × I (kVA)",currentFormula:"I = P / (√3 × V × PF)",sqrt3:"√3 = 1.732",configuration:v==="line-to-line"?"Line-to-Line (most common)":"Line-to-Neutral",note:"Three-phase systems are more efficient for power transmission and are standard in industrial applications"},necReferences:["Three-phase power: P = √3 × VL-L × I × PF","Line-to-Line voltage: Standard between any two phases","Line-to-Neutral voltage: VL-N = VL-L ÷ √3","Common voltages: 208V, 240V, 480V, 600V (North America)","Three-phase systems provide constant power delivery","More efficient than single-phase for large loads and motors"]},sn(se)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${A.cardBorder}`,paddingBottom:"0.5rem"},children:"Calculation Mode"}),i.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:[{value:"find-power",label:"Find Power (from Voltage & Current)"},{value:"find-current",label:"Find Current (from Power & Voltage)"},{value:"motor-power",label:"Motor Power & Efficiency"}].map(F=>i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:n===F.value?A.sectionBg:"transparent",border:`1px solid ${n===F.value?"#3b82f6":A.cardBorder}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseOver:se=>{n!==F.value&&(se.currentTarget.style.background=A.sectionBg)},onMouseOut:se=>{n!==F.value&&(se.currentTarget.style.background="transparent")},children:[i.jsx("input",{type:"radio",name:"calculationMode",value:F.value,checked:n===F.value,onChange:se=>o(se.target.value),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:A.cardText},children:F.label})]},F.value))})]}),i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${A.cardBorder}`,paddingBottom:"0.5rem"},children:"Input Values"}),n==="motor-power"?i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Output Power (kW)"}),i.jsx("input",{type:"number",value:w,onChange:F=>C(F.target.value),placeholder:"Motor output power",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Motor Efficiency (%)"}),i.jsx("input",{type:"number",value:I,onChange:F=>z(F.target.value),placeholder:"85-95% typical",step:"0.1",min:"0",max:"100",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:A.subtleText,marginTop:"0.25rem"},children:"Optional: For current calculation, enter voltage and PF below"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Voltage (V) - Optional"}),i.jsxs("select",{value:a,onChange:F=>c(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"",children:"Select"}),i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"380",children:"380V"}),i.jsx("option",{value:"400",children:"400V"}),i.jsx("option",{value:"415",children:"415V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Power Factor - Optional"}),i.jsx("input",{type:"number",value:d,onChange:F=>y(F.target.value),placeholder:"0.80-0.95",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"}})]})]})]}):i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Voltage Configuration"}),i.jsxs("select",{value:v,onChange:F=>B(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"line-to-line",children:"Line-to-Line (Most Common)"}),i.jsx("option",{value:"line-to-neutral",children:"Line-to-Neutral"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:A.subtleText,marginTop:"0.25rem"},children:"Line-to-Line: Voltage between any two phases"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Voltage (V)"}),i.jsxs("select",{value:a,onChange:F=>c(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"380",children:"380V"}),i.jsx("option",{value:"400",children:"400V"}),i.jsx("option",{value:"415",children:"415V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),i.jsx("input",{type:"number",value:d,onChange:F=>y(F.target.value),placeholder:"0.80-0.95",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"}})]})]}),n==="find-power"&&i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Current (Amps)"}),i.jsx("input",{type:"number",value:u,onChange:F=>f(F.target.value),placeholder:"Line current",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"}})]}),n==="find-current"&&i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Power (kW)"}),i.jsx("input",{type:"number",value:w,onChange:F=>C(F.target.value),placeholder:"Real power",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"}})]})]})]}),U&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),n==="motor-power"?i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginBottom:"0.25rem"},children:"Output Power"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:A.cardText},children:U.outputKW.toFixed(2)}),i.jsxs("div",{style:{fontSize:"0.75rem",color:A.labelText,marginTop:"0.25rem"},children:["kW (",U.outputHP.toFixed(2)," HP)"]})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Input Power Required"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:U.inputKW.toFixed(2)}),i.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:["kW @ ",U.efficiency.toFixed(1),"% efficiency"]})]})]}),U.amps>0&&i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginBottom:"0.25rem"},children:"Estimated Current Draw"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:A.cardText},children:U.amps.toFixed(2)}),i.jsxs("div",{style:{fontSize:"0.75rem",color:A.labelText,marginTop:"0.25rem"},children:["Amps @ ",a,"V, PF ",d]})]})]}):i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginBottom:"0.25rem"},children:"Real Power (kW)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:A.cardText},children:U.kW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginTop:"0.25rem"},children:"Working Power"})]}),i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginBottom:"0.25rem"},children:"Apparent Power (kVA)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:A.cardText},children:U.kVA.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginTop:"0.25rem"},children:"Total Power"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Current (A)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:U.amps.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Line Current"})]})]})]}),i.jsx("div",{style:{background:A.sectionBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(us,{size:20,color:"#3b82f6",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:A.labelText,lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",color:A.cardText,marginBottom:"0.5rem"},children:n==="motor-power"?"Motor Efficiency:":"Three-Phase Formulas:"}),i.jsx("div",{style:{display:"grid",gap:"0.25rem"},children:n==="motor-power"?i.jsxs(i.Fragment,{children:[i.jsx("div",{children:"• Input Power = Output Power ÷ Efficiency"}),i.jsx("div",{children:"• 1 kW = 1.341 HP"}),i.jsx("div",{children:"• Typical motor efficiency: 85-95%"}),i.jsx("div",{children:"• Higher efficiency motors use less power"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{children:"• P (kW) = √3 × V × I × PF ÷ 1000"}),i.jsx("div",{children:"• S (kVA) = √3 × V × I ÷ 1000"}),i.jsx("div",{children:"• I (A) = P × 1000 ÷ (√3 × V × PF)"}),i.jsx("div",{children:"• √3 = 1.732 (constant for 3-phase)"}),i.jsxs("div",{children:["• ",v==="line-to-line"?"Using Line-to-Line voltage":"Using Line-to-Neutral voltage"]})]})})]})]})}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"12px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(_n,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Three-Phase Advantages:"}),i.jsxs("div",{style:{display:"grid",gap:"0.25rem"},children:[i.jsx("div",{children:"• Delivers constant, smooth power (no pulsation)"}),i.jsx("div",{children:"• More efficient for high-power applications"}),i.jsx("div",{children:"• Smaller conductor sizes for same power"}),i.jsx("div",{children:"• Standard for industrial and commercial buildings"}),i.jsx("div",{children:"• Required for large motors and heavy equipment"})]})]})]})})]})]})}),KI=({isDarkMode:r})=>{const[e,t]=me.useState(new Date),[n,o]=me.useState(new Date),[a,c]=me.useState([]),[u,f]=me.useState(!0),d={bg:r?"#000000":"#f9fafb",cardBg:r?"#0a0a0a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#666666":"#6b7280",border:r?"#1a1a1a":"#e5e7eb",selectedDay:"#3b82f6",todayBg:r?"#1a1a1a":"#f3f4f6"},y={scheduled:"#3b82f6","in-progress":"#f59e0b",completed:"#10b981"};me.useEffect(()=>{const b=Ap(ti,async N=>{if(N)try{const D=await au();c(D)}catch(D){console.error("Error loading jobs:",D)}finally{f(!1)}else c([]),f(!1)});return()=>b()},[]);const w=a.map(b=>({...b,dateObj:b.date?new Date(b.date+"T00:00:00"):null})),C=b=>new Date(b.getFullYear(),b.getMonth()+1,0).getDate(),v=b=>new Date(b.getFullYear(),b.getMonth(),1).getDay(),B=(b,N)=>!b||!N?!1:b.getDate()===N.getDate()&&b.getMonth()===N.getMonth()&&b.getFullYear()===N.getFullYear(),I=b=>B(b,new Date),z=b=>w.filter(N=>N.dateObj&&B(N.dateObj,b)),A=b=>w.some(N=>N.dateObj&&B(N.dateObj,b)),M=()=>{t(new Date(e.getFullYear(),e.getMonth()-1))},U=()=>{t(new Date(e.getFullYear(),e.getMonth()+1))},F=["January","February","March","April","May","June","July","August","September","October","November","December"],se=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ue=C(e),L=v(e),j=[];for(let b=0;b<L;b++)j.push(null);for(let b=1;b<=ue;b++)j.push(new Date(e.getFullYear(),e.getMonth(),b));const T=z(n),V=new Date,k=w.filter(b=>b.dateObj&&b.dateObj>=V&&b.status==="scheduled").sort((b,N)=>b.dateObj-N.dateObj).slice(0,5);return u?i.jsx("div",{style:{minHeight:"100vh",background:d.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("div",{style:{color:d.text},children:"Loading..."})}):i.jsx("div",{style:{minHeight:"100vh",background:d.bg,paddingBottom:"5rem",maxWidth:"100vw",overflowX:"hidden"},children:i.jsxs("div",{style:{padding:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5rem",marginBottom:"1rem",maxWidth:"100%",overflow:"hidden"},children:[i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#3b82f6",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:k.length}),i.jsx("div",{style:{fontSize:"0.75rem",color:d.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Upcoming"})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#f59e0b",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:a.filter(b=>b.status==="in-progress").length}),i.jsx("div",{style:{fontSize:"0.75rem",color:d.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"In Progress"})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10b981",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:a.filter(b=>b.status==="completed").length}),i.jsx("div",{style:{fontSize:"0.75rem",color:d.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Completed"})]})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem",boxShadow:"none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[i.jsxs("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:"600",color:d.text},children:[F[e.getMonth()]," ",e.getFullYear()]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:M,style:{background:d.bg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",color:d.text},children:i.jsx(T3,{size:20})}),i.jsx("button",{onClick:U,style:{background:d.bg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",color:d.text},children:i.jsx(A3,{size:20})})]})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.25rem",marginBottom:"0.5rem"},children:se.map(b=>i.jsx("div",{style:{textAlign:"center",fontSize:"0.75rem",fontWeight:"600",color:d.subtext,padding:"0.5rem 0"},children:b},b))}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.125rem"},children:j.map((b,N)=>{if(!b)return i.jsx("div",{},`empty-${N}`);const D=B(b,n),q=I(b),ie=A(b);return i.jsxs("button",{onClick:()=>o(b),style:{aspectRatio:"1",border:"none",borderRadius:"0.375rem",background:D?d.selectedDay:q?d.todayBg:"transparent",color:D?"white":d.text,cursor:"pointer",fontSize:"0.75rem",fontWeight:D||q?"600":"400",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",padding:"0.25rem",minWidth:0,width:"100%"},onMouseEnter:oe=>{D||(oe.currentTarget.style.background=d.todayBg)},onMouseLeave:oe=>{!D&&!q?oe.currentTarget.style.background="transparent":!D&&q&&(oe.currentTarget.style.background=d.todayBg)},children:[b.getDate(),ie&&i.jsx("div",{style:{position:"absolute",bottom:"0.125rem",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"0.0625rem"},children:z(b).slice(0,3).map((oe,ne)=>i.jsx("div",{style:{width:"3px",height:"3px",borderRadius:"50%",background:D?"white":y[oe.status]}},ne))})]},N)})})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem",boxShadow:"none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[i.jsx("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:"600",color:d.text},children:B(n,new Date)?"Today":n.toLocaleDateString("en-US",{month:"long",day:"numeric"})}),i.jsxs("span",{style:{fontSize:"0.75rem",color:d.subtext,background:d.bg,padding:"0.25rem 0.75rem",borderRadius:"1rem"},children:[T.length," ",T.length===1?"job":"jobs"]})]}),T.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem",color:d.subtext},children:[i.jsx(bm,{size:48,style:{margin:"0 auto 0.5rem",opacity:.3}}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem"},children:"No jobs scheduled for this day"})]}):i.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:T.map(b=>i.jsxs("div",{style:{background:d.bg,border:`1px solid ${d.border}`,borderLeft:`4px solid ${y[b.status]}`,borderRadius:"0.5rem",padding:"1rem"},children:[i.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:i.jsxs("div",{children:[i.jsx("h4",{style:{margin:"0 0 0.25rem 0",fontSize:"1rem",fontWeight:"600",color:d.text},children:b.title||b.name}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:d.subtext},children:b.client})]})}),i.jsxs("div",{style:{display:"grid",gap:"0.25rem",fontSize:"0.875rem",color:d.subtext},children:[b.time&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Qf,{size:14}),i.jsxs("span",{children:[b.time,b.duration&&` (${b.duration})`]})]}),b.location&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Px,{size:14}),i.jsx("span",{children:b.location})]}),b.estimatedCost&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(lg,{size:14}),i.jsxs("span",{children:["$",Number(b.estimatedCost).toLocaleString()]})]})]})]},b.id))})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",boxShadow:"none"},children:[i.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"1.125rem",fontWeight:"600",color:d.text},children:"Upcoming Jobs"}),k.length===0?i.jsx("div",{style:{textAlign:"center",padding:"2rem 1rem",color:d.subtext},children:i.jsx("p",{style:{margin:0,fontSize:"0.875rem"},children:"No upcoming jobs scheduled"})}):i.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:k.map(b=>i.jsxs("div",{style:{background:d.bg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("h4",{style:{margin:"0 0 0.25rem 0",fontSize:"0.9375rem",fontWeight:"600",color:d.text},children:b.title||b.name}),i.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.8125rem",color:d.subtext},children:b.client}),i.jsxs("div",{style:{fontSize:"0.75rem",color:d.subtext,display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(bm,{size:12}),b.dateObj.toLocaleDateString("en-US",{month:"short",day:"numeric"}),b.time&&` at ${b.time}`]})]}),i.jsx("div",{style:{width:"4px",height:"40px",borderRadius:"2px",background:y[b.status]}})]},b.id))})]})]})})},JI=({isDarkMode:r})=>{const[e,t]=me.useState(null),[n,o]=me.useState(!0),[a,c]=me.useState(!0),[u,f]=me.useState(""),[d,y]=me.useState(""),[w,C]=me.useState(""),v={bg:r?"#000000":"#f9fafb",cardBg:r?"#0a0a0a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#666666":"#6b7280",border:r?"#1a1a1a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"};me.useEffect(()=>{const A=Ap(ti,M=>{t(M),o(!1)});return()=>A()},[]);const B=async A=>{A.preventDefault(),C("");try{const M=await KA(ti,u,d);try{await fetch("/.netlify/functions/send-welcome-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u})})}catch(U){console.error("Welcome email failed:",U)}alert("Welcome! Please check your email to verify your account."),f(""),y("")}catch(M){C(M.message)}},I=async A=>{A.preventDefault(),C("");try{await JA(ti,u,d),f(""),y("")}catch(M){C(M.message)}},z=async()=>{try{await XA(ti)}catch(A){C(A.message)}};return n?i.jsx("div",{style:{background:v.bg,minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("div",{style:{color:v.text},children:"Loading..."})}):e?i.jsx("div",{style:{background:v.bg,paddingBottom:"5rem"},children:i.jsxs("div",{style:{padding:"1rem"},children:[i.jsxs("div",{style:{background:v.cardBg,borderRadius:"0.75rem",border:`1px solid ${v.border}`,padding:"2rem 1rem",marginBottom:"1rem",textAlign:"center",boxShadow:"none"},children:[i.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:i.jsx(Xf,{size:40,color:"white"})}),i.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:v.text,fontSize:"1.25rem",fontWeight:"600"},children:e.email}),i.jsx("p",{style:{margin:0,color:v.subtext,fontSize:"0.875rem"},children:"Electrician Account"})]}),i.jsxs("div",{style:{background:v.cardBg,borderRadius:"0.75rem",border:`1px solid ${v.border}`,overflow:"hidden",marginBottom:"1rem",boxShadow:"none"},children:[i.jsx("h3",{style:{margin:0,padding:"1rem",color:v.text,fontSize:"1rem",fontWeight:"600",borderBottom:`1px solid ${v.border}`},children:"Account Settings"}),i.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",borderBottom:`1px solid ${v.border}`,display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:v.text},children:[i.jsx(b5,{size:20,color:v.subtext}),i.jsxs("div",{style:{flex:1,textAlign:"left"},children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Email"}),i.jsx("div",{style:{fontSize:"0.8125rem",color:v.subtext},children:e.email})]})]}),i.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",borderBottom:`1px solid ${v.border}`,display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:v.text},children:[i.jsx(p3,{size:20,color:v.subtext}),i.jsxs("div",{style:{flex:1,textAlign:"left"},children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Notifications"}),i.jsx("div",{style:{fontSize:"0.8125rem",color:v.subtext},children:"Manage preferences"})]})]}),i.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:v.text},children:[i.jsx(o_,{size:20,color:v.subtext}),i.jsxs("div",{style:{flex:1,textAlign:"left"},children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Privacy & Security"}),i.jsx("div",{style:{fontSize:"0.8125rem",color:v.subtext},children:"Account protection"})]})]})]}),i.jsxs("button",{onClick:z,style:{width:"100%",padding:"1rem",background:"#ef4444",color:"white",border:"none",borderRadius:"0.75rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:"none"},children:[i.jsx(q3,{size:20}),"Log Out"]})]})}):i.jsx("div",{style:{background:v.bg,minHeight:"100vh",paddingBottom:"5rem"},children:i.jsx("div",{style:{padding:"1rem"},children:i.jsxs("div",{style:{background:v.cardBg,borderRadius:"0.75rem",border:`1px solid ${v.border}`,padding:"2rem 1rem",marginTop:"2rem",boxShadow:"none"},children:[i.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:i.jsx(Xf,{size:40,color:"white"})}),i.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:v.text,fontSize:"1.5rem",fontWeight:"700",textAlign:"center"},children:a?"Welcome Back":"Create Account"}),i.jsx("p",{style:{margin:"0 0 2rem 0",color:v.subtext,fontSize:"0.875rem",textAlign:"center"},children:a?"Sign in to your account":"Sign up to get started"}),w&&i.jsx("div",{style:{padding:"0.75rem",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"0.5rem",color:"#dc2626",fontSize:"0.875rem",marginBottom:"1rem"},children:w}),i.jsxs("form",{onSubmit:a?I:B,children:[i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:v.text,fontSize:"0.875rem",fontWeight:"500"},children:"Email"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(b5,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:v.subtext}}),i.jsx("input",{type:"email",value:u,onChange:A=>f(A.target.value),placeholder:"your@email.com",required:!0,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:`1px solid ${v.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:v.inputBg,color:v.text,boxSizing:"border-box"}})]})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:v.text,fontSize:"0.875rem",fontWeight:"500"},children:"Password"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx($3,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:v.subtext}}),i.jsx("input",{type:"password",value:d,onChange:A=>y(A.target.value),placeholder:"••••••••",required:!0,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:`1px solid ${v.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:v.inputBg,color:v.text,boxSizing:"border-box"}})]})]}),i.jsx("button",{type:"submit",style:{width:"100%",padding:"0.875rem",background:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",marginBottom:"1rem"},children:a?"Sign In":"Sign Up"}),i.jsxs("div",{style:{textAlign:"center",color:v.subtext,fontSize:"0.875rem"},children:[a?"Don't have an account? ":"Already have an account? ",i.jsx("button",{type:"button",onClick:()=>{c(!a),C("")},style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",textDecoration:"underline"},children:a?"Sign Up":"Sign In"})]})]})]})})})},YI="_addJobButton_euajw_3",QI="_addJobContainer_euajw_19",xx={addJobButton:YI,addJobContainer:QI},XI="_actionButtons_37ayc_3",ZI="_cardHeader_37ayc_42",eR="_cardTitle_37ayc_49",vm={actionButtons:XI,cardHeader:ZI,cardTitle:eR},tR=({job:r,statusConfig:e,statusDropdownOpen:t,setStatusDropdownOpen:n,onUpdateStatus:o,onViewJob:a,onViewEstimate:c,onViewInvoice:u,isDarkMode:f,colors:d})=>{const y=me.useRef(null),[w,C]=me.useState(!1),v=e[r.status].icon,B=r.title||r.name;return i.jsxs("div",{onClick:()=>C(!w),style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"0.75rem",transition:"all 0.2s",cursor:"pointer"},children:[i.jsxs("div",{className:vm.cardHeader,children:[i.jsxs("div",{className:vm.cardTitle,children:[i.jsxs("h3",{style:{margin:"0 0 0.25rem 0",color:d.text,fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[B,w?i.jsx(j3,{size:18}):i.jsx(Yf,{size:18})]}),i.jsx("p",{style:{margin:0,color:d.subtext,fontSize:"0.875rem"},children:r.client})]}),i.jsxs("div",{style:{position:"relative"},ref:t===r.id?y:null,children:[i.jsxs("button",{onClick:I=>{I.stopPropagation(),n(t===r.id?null:r.id)},style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",padding:"4px 8px",borderRadius:"4px",background:`${e[r.status].color}20`,color:e[r.status].color,fontSize:"11px",fontWeight:"600",whiteSpace:"nowrap",border:"none",cursor:"pointer",transition:"all 0.2s",lineHeight:"1",minHeight:"unset",minWidth:"unset",height:"fit-content",width:"fit-content",boxSizing:"border-box"},children:[i.jsx(v,{size:12}),i.jsx("span",{children:e[r.status].label})]}),t===r.id&&i.jsx("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.5rem",background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:100,minWidth:"140px",overflow:"hidden"},children:Object.entries(e).map(([I,z])=>{const A=z.icon;return i.jsxs("button",{onClick:M=>{M.stopPropagation(),o(r.id,I)},style:{width:"100%",padding:"0.625rem 0.75rem",background:r.status===I?`${z.color}20`:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:z.color,fontSize:"0.875rem",fontWeight:r.status===I?"600":"500",transition:"background 0.2s"},onMouseEnter:M=>{r.status!==I&&(M.target.style.background=f?"#2a2a2a":"#f3f4f6")},onMouseLeave:M=>{r.status!==I&&(M.target.style.background="transparent")},children:[i.jsx(A,{size:16}),i.jsx("span",{children:z.label})]},I)})})]})]}),(r.location||r.date)&&i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem",color:d.subtext,fontSize:"0.875rem",gap:"1rem"},children:[r.location&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Px,{size:16}),i.jsx("span",{children:r.location})]}),r.date&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginLeft:"auto"},children:[i.jsx(bm,{size:16}),i.jsxs("span",{children:[new Date(r.date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),r.time&&` (${r.time})`,r.duration&&` ${r.duration}`]})]})]}),w&&i.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:`1px solid ${d.border}`},children:[r.estimatedCost&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:d.subtext,fontSize:"0.875rem"},children:[i.jsx(lg,{size:16}),i.jsxs("span",{children:["$",Number(r.estimatedCost).toLocaleString()]})]}),r.notes&&i.jsx("div",{style:{marginTop:"0.5rem"},children:i.jsx("p",{style:{margin:0,padding:"0.75rem",background:d.bg,borderRadius:"0.5rem",color:d.text,fontSize:"0.875rem",lineHeight:"1.5"},children:r.notes})})]}),i.jsxs("div",{className:vm.actionButtons,children:[i.jsxs("button",{onClick:I=>{I.stopPropagation(),a(r)},title:"Edit Job",style:{background:"#2563eb",border:"none",borderRadius:"0.5rem",color:"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:"600"},children:[i.jsx(Mx,{size:16}),i.jsx("span",{children:"Edit"})]}),i.jsxs("button",{onClick:I=>{I.stopPropagation(),c(r)},title:r.estimateId?"View Estimate":"No estimate linked",style:{background:r.estimateId?"#10b981":d.border,border:"none",borderRadius:"0.5rem",color:"white",cursor:r.estimateId?"pointer":"not-allowed",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:"600",opacity:r.estimateId?1:.5},disabled:!r.estimateId,children:[i.jsx(xh,{size:16}),i.jsx("span",{children:"Estimate"})]}),i.jsxs("button",{onClick:I=>{I.stopPropagation(),u(r)},title:r.invoiceId?"View Invoice":"No invoice linked",style:{background:r.invoiceId?"#f59e0b":d.border,border:"none",borderRadius:"0.5rem",color:"white",cursor:r.invoiceId?"pointer":"not-allowed",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:"600",opacity:r.invoiceId?1:.5},disabled:!r.invoiceId,children:[i.jsx(cg,{size:16}),i.jsx("span",{children:"Invoice"})]})]})]})},rR=({linkedEstimate:r,estimates:e,showMenu:t,setShowMenu:n,onSelectEstimate:o,onCreateNewEstimate:a,onViewEstimate:c,onRemoveEstimate:u,menuRef:f,isDarkMode:d,colors:y})=>r?i.jsxs("div",{style:{marginBottom:"0.75rem"},children:[i.jsxs("button",{type:"button",onClick:()=>c(r.id),style:{width:"100%",padding:"0.75rem",background:y.bg,border:`1px solid ${y.border}`,borderRadius:"0.5rem",cursor:"pointer",textAlign:"left",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:y.text,marginBottom:"0.25rem"},children:r.name}),i.jsxs("div",{style:{fontSize:"0.75rem",color:y.subtext},children:["$",Number(r.total||0).toLocaleString()]})]}),i.jsx("div",{style:{padding:"0.25rem 0.5rem",background:"#2563eb",color:"white",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:"View"})]}),i.jsx("button",{type:"button",onClick:u,style:{width:"100%",padding:"0.5rem",marginTop:"0.5rem",background:"transparent",border:`1px solid ${y.border}`,borderRadius:"0.5rem",color:y.subtext,cursor:"pointer",fontSize:"0.75rem"},children:"Remove Estimate"})]}):i.jsxs("div",{style:{position:"relative",marginBottom:"0.75rem"},ref:t?f:null,children:[i.jsxs("button",{type:"button",onClick:()=>n(!t),style:{width:"100%",padding:"0.75rem",background:y.inputBg,border:`1px solid ${y.border}`,borderRadius:"0.5rem",color:"#2563eb",cursor:"pointer",fontSize:"0.9375rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(na,{size:18}),"Add Estimate"]}),t&&i.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"0.5rem",background:y.cardBg,border:`1px solid ${y.border}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:100,maxHeight:"200px",overflowY:"auto"},children:[i.jsxs("button",{type:"button",onClick:a,style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${y.border}`,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563eb",fontSize:"0.875rem",fontWeight:"600",textAlign:"left"},onMouseEnter:w=>w.target.style.background=d?"#2a2a2a":"#f3f4f6",onMouseLeave:w=>w.target.style.background="transparent",children:[i.jsx(na,{size:16}),"Create New Estimate"]}),e.length===0?i.jsx("div",{style:{padding:"1rem",textAlign:"center",color:y.subtext,fontSize:"0.875rem"},children:"No estimates available"}):e.map(w=>i.jsxs("button",{type:"button",onClick:()=>o(w),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${y.border}`,cursor:"pointer",textAlign:"left",color:y.text,fontSize:"0.875rem"},onMouseEnter:C=>C.target.style.background=d?"#2a2a2a":"#f3f4f6",onMouseLeave:C=>C.target.style.background="transparent",children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:w.name||"Untitled Estimate"}),i.jsxs("div",{style:{color:y.subtext,fontSize:"0.75rem"},children:["$",Number(w.total||0).toLocaleString()]})]},w.id))]})]}),hS=({formData:r,setFormData:e,linkedEstimate:t,estimates:n,showEstimateMenu:o,setShowEstimateMenu:a,onSelectEstimate:c,onCreateNewEstimate:u,onViewEstimate:f,onRemoveEstimate:d,estimateMenuRef:y,isDarkMode:w,colors:C})=>i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"text",placeholder:"Job Title *",value:r.title,onChange:v=>e(B=>({...B,title:v.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${C.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:C.inputBg,color:C.text,boxSizing:"border-box"}}),i.jsx("input",{type:"text",placeholder:"Client Name *",value:r.client,onChange:v=>e(B=>({...B,client:v.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${C.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:C.inputBg,color:C.text,boxSizing:"border-box"}}),i.jsx("input",{type:"text",placeholder:"Location",value:r.location,onChange:v=>e(B=>({...B,location:v.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${C.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:C.inputBg,color:C.text,boxSizing:"border-box"}}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[i.jsx("input",{type:"date",value:r.date,onChange:v=>e(B=>({...B,date:v.target.value})),style:{padding:"0.75rem",border:`1px solid ${C.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:C.inputBg,color:C.text,boxSizing:"border-box"}}),i.jsx("input",{type:"time",value:r.time,onChange:v=>e(B=>({...B,time:v.target.value})),style:{padding:"0.75rem",border:`1px solid ${C.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:C.inputBg,color:C.text,boxSizing:"border-box"}})]}),i.jsx(rR,{linkedEstimate:t,estimates:n,showMenu:o,setShowMenu:a,onSelectEstimate:c,onCreateNewEstimate:u,onViewEstimate:f,onRemoveEstimate:d,menuRef:y,isDarkMode:w,colors:C}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[i.jsx("input",{type:"number",placeholder:"Cost ($)",value:r.estimatedCost,onChange:v=>e(B=>({...B,estimatedCost:v.target.value})),style:{padding:"0.75rem",border:`1px solid ${C.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:C.inputBg,color:C.text,boxSizing:"border-box"}}),i.jsx("input",{type:"text",placeholder:"Duration",value:r.duration,onChange:v=>e(B=>({...B,duration:v.target.value})),style:{padding:"0.75rem",border:`1px solid ${C.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:C.inputBg,color:C.text,boxSizing:"border-box"}})]}),i.jsxs("select",{value:r.status,onChange:v=>e(B=>({...B,status:v.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${C.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:C.inputBg,color:C.text,boxSizing:"border-box"},children:[i.jsx("option",{value:"scheduled",children:"Scheduled"}),i.jsx("option",{value:"in-progress",children:"In Progress"}),i.jsx("option",{value:"completed",children:"Completed"})]}),i.jsx("textarea",{placeholder:"Notes",value:r.notes,onChange:v=>e(B=>({...B,notes:v.target.value})),rows:"3",style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${C.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:C.inputBg,color:C.text,boxSizing:"border-box",resize:"vertical"}})]}),nR=({viewingJob:r,formData:e,setFormData:t,linkedEstimate:n,estimates:o,showEstimateMenu:a,setShowEstimateMenu:c,onSelectEstimate:u,onCreateNewEstimate:f,onViewEstimate:d,onRemoveEstimate:y,estimateMenuRef:w,onClose:C,onSave:v,onDelete:B,isDarkMode:I,colors:z})=>r?i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:C,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:1e3,animation:"fadeIn 0.2s"}}),i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:z.cardBg,borderRadius:"1rem",padding:"1.5rem",paddingBottom:"calc(100px + env(safe-area-inset-bottom))",width:"90%",maxWidth:"500px",maxHeight:"80vh",overflowY:"auto",zIndex:1001,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.3)",WebkitOverflowScrolling:"touch"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[i.jsx("h2",{style:{margin:0,fontSize:"1.25rem",fontWeight:"600",color:z.text},children:"Job Details"}),i.jsx("button",{onClick:C,style:{background:"transparent",border:"none",cursor:"pointer",padding:"0.5rem",color:z.subtext,display:"flex",alignItems:"center"},children:i.jsx(qx,{size:24})})]}),i.jsxs("div",{children:[i.jsx(hS,{formData:e,setFormData:t,linkedEstimate:n,estimates:o,showEstimateMenu:a,setShowEstimateMenu:c,onSelectEstimate:u,onCreateNewEstimate:f,onViewEstimate:d,onRemoveEstimate:y,estimateMenuRef:w,isDarkMode:I,colors:z}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:v,disabled:!e.title||!e.client,style:{flex:1,padding:"0.75rem",background:!e.title||!e.client?z.border:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:!e.title||!e.client?"not-allowed":"pointer",opacity:!e.title||!e.client?.5:1},children:"Save Changes"}),i.jsx("button",{onClick:()=>B(r.id,r.title||r.name),style:{padding:"0.75rem",background:"transparent",color:"#ef4444",border:"1px solid #ef4444",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.25rem"},children:i.jsx(oc,{size:16})})]})]})]})]}):null,iR=({isDarkMode:r,onNavigateToEstimates:e})=>{var _e;const[t,n]=me.useState([]),[o,a]=me.useState(!0),[c,u]=me.useState(!1),[f,d]=me.useState(null),[y,w]=me.useState(null),[C,v]=me.useState(null),[B,I]=me.useState(!1),[z,A]=me.useState([]),M=me.useRef(null),[U,F]=me.useState(null),[se,ue]=me.useState(""),[L,j]=me.useState("all"),[T,V]=me.useState({title:"",client:"",location:"",status:"scheduled",date:"",time:"",estimatedCost:"",duration:"",notes:""}),k={bg:r?"#000000":"#f9fafb",cardBg:r?"#1a1a1a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#999999":"#6b7280",border:r?"#2a2a2a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"},b={scheduled:{color:"#3b82f6",icon:Qf,label:"Scheduled"},"in-progress":{color:"#f59e0b",icon:ih,label:"In Progress"},completed:{color:"#10b981",icon:_n,label:"Completed"}};me.useEffect(()=>{const fe=Ap(ti,xe=>{xe?N():a(!1)});return()=>fe()},[]),me.useEffect(()=>{const fe=async()=>{try{const{getUserEstimates:xe}=await Dc(async()=>{const{getUserEstimates:We}=await Promise.resolve().then(()=>vx);return{getUserEstimates:We}},void 0),Pe=await xe();A(Pe)}catch(xe){console.error("Error loading estimates:",xe)}};ti.currentUser&&fe()},[]),me.useEffect(()=>{const fe=xe=>{M.current&&!M.current.contains(xe.target)&&I(!1)};return document.addEventListener("mousedown",fe),()=>document.removeEventListener("mousedown",fe)},[]);const N=async()=>{a(!0);try{const fe=await au();n(fe)}catch(fe){console.error("Error loading jobs:",fe),alert("Failed to load jobs. Please try again.")}finally{a(!1)}},D=()=>{V({title:"",client:"",location:"",status:"scheduled",date:"",time:"",estimatedCost:"",duration:"",notes:""}),u(!1),w(null),d(null),F(null)},q=async()=>{if(T.title&&T.client)try{const fe={name:T.title,title:T.title,client:T.client,location:T.location,status:T.status,date:T.date,time:T.time,estimatedCost:T.estimatedCost,duration:T.duration,notes:T.notes,estimateId:(U==null?void 0:U.id)||null};await og(fe),D(),N()}catch(fe){console.error("Error adding job:",fe),alert("Failed to add job. Please try again.")}},ie=async()=>{if(T.title&&T.client&&y)try{const{updateJob:fe}=await Dc(async()=>{const{updateJob:Pe}=await Promise.resolve().then(()=>dx);return{updateJob:Pe}},void 0),xe={name:T.title,title:T.title,client:T.client,location:T.location,status:T.status,date:T.date,time:T.time,estimatedCost:T.estimatedCost,duration:T.duration,notes:T.notes,estimateId:(U==null?void 0:U.id)||null};await fe(y.id,xe),D(),N()}catch(fe){console.error("Error updating job:",fe),alert("Failed to update job. Please try again.")}},oe=async(fe,xe)=>{try{const{updateJob:Pe}=await Dc(async()=>{const{updateJob:Qe}=await Promise.resolve().then(()=>dx);return{updateJob:Qe}},void 0),We=t.find(Qe=>Qe.id===fe);await Pe(fe,{...We,status:xe}),v(null),N()}catch(Pe){console.error("Error updating status:",Pe),alert("Failed to update status. Please try again.")}},ne=fe=>{if(d(fe),w(fe),V({title:fe.title||fe.name,client:fe.client,location:fe.location||"",status:fe.status,date:fe.date||"",time:fe.time||"",estimatedCost:fe.estimatedCost||"",duration:fe.duration||"",notes:fe.notes||""}),fe.estimateId){const xe=z.find(Pe=>Pe.id===fe.estimateId);xe&&F(xe)}else F(null)},ve=async(fe,xe)=>{if(window.confirm(`Are you sure you want to delete "${xe}"?`))try{await uS(fe),f&&f.id===fe&&D(),N()}catch(Pe){console.error("Error deleting job:",Pe),alert("Failed to delete job. Please try again.")}},be=fe=>{fe&&(V(xe=>({...xe,estimatedCost:fe.total.toString(),estimateId:fe.id})),F(fe)),I(!1)},Z=async()=>{if(I(!1),c&&T.title&&T.client)try{const fe={name:T.title,title:T.title,client:T.client,location:T.location,status:T.status,date:T.date,time:T.time,estimatedCost:T.estimatedCost,duration:T.duration,notes:T.notes},Pe={jobId:await og(fe),jobName:T.title,jobClient:T.client};e&&e(Pe),D(),N()}catch(fe){console.error("Error creating job:",fe),alert("Failed to create job. Please try again.")}else if(f){const fe={jobId:f.id,jobName:f.title||f.name,jobClient:f.client};e&&e(fe)}else alert("Please fill in the job title and client name first.")},W=fe=>{e&&e({viewEstimateId:fe})},J=()=>{F(null),V(fe=>({...fe,estimatedCost:"",estimateId:null}))},re=async fe=>{if(I(fe),fe===!0)try{const{getUserEstimates:xe}=await Dc(async()=>{const{getUserEstimates:We}=await Promise.resolve().then(()=>vx);return{getUserEstimates:We}},void 0),Pe=await xe();A(Pe)}catch(xe){console.error("Error loading estimates:",xe)}},he=t.filter(fe=>{if(se){const xe=se.toLowerCase(),Pe=(fe.title||fe.name||"").toLowerCase(),We=(fe.client||"").toLowerCase(),Qe=(fe.location||"").toLowerCase(),Xe=(fe.notes||"").toLowerCase();if(!(Pe.includes(xe)||We.includes(xe)||Qe.includes(xe)||Xe.includes(xe)))return!1}return L==="all"?!0:fe.status===L}),ge={all:t.length,scheduled:t.filter(fe=>fe.status==="scheduled").length,"in-progress":t.filter(fe=>fe.status==="in-progress").length,completed:t.filter(fe=>fe.status==="completed").length};return o?i.jsx("div",{style:{minHeight:"100vh",background:k.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("div",{style:{color:k.subtext},children:"Loading jobs..."})}):i.jsx("div",{className:"jobs-container",children:i.jsxs("div",{style:{minHeight:"100vh",background:k.bg,paddingBottom:"5rem"},children:[i.jsx(nR,{viewingJob:f,formData:T,setFormData:V,linkedEstimate:U,estimates:z,showEstimateMenu:B,setShowEstimateMenu:re,onSelectEstimate:be,onCreateNewEstimate:Z,onViewEstimate:W,onRemoveEstimate:J,estimateMenuRef:M,onClose:D,onSave:ie,onDelete:ve,isDarkMode:r,colors:k}),i.jsxs("div",{style:{padding:"1rem 0.25rem"},children:[i.jsxs("div",{style:{marginBottom:"1rem",position:"relative"},children:[i.jsx("input",{type:"text",placeholder:"Search jobs...",value:se,onChange:fe=>ue(fe.target.value),style:{width:"100%",padding:"0.75rem",paddingLeft:"2.5rem",paddingRight:se?"2.5rem":"0.75rem",border:`1px solid ${k.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:k.inputBg,color:k.text,boxSizing:"border-box"}}),i.jsx(zx,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:k.subtext,pointerEvents:"none"}}),se&&i.jsx("button",{onClick:()=>ue(""),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:k.subtext,padding:"0.25rem",display:"flex",alignItems:"center"},children:i.jsx(qx,{size:18})})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.375rem",marginBottom:"1rem"},children:[i.jsxs("button",{onClick:()=>j("all"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${L==="all"?k.text:k.border}`,background:L==="all"?k.text:"transparent",color:L==="all"?k.bg:k.text,fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem",transition:"all 0.2s"},children:[i.jsx("span",{children:"All"}),i.jsx("span",{style:{background:L==="all"?k.bg:k.cardBg,color:L==="all"?k.text:k.subtext,padding:"0.125rem 0.375rem",borderRadius:"1rem",fontSize:"0.7rem",fontWeight:"700",minWidth:"1.5rem"},children:ge.all})]}),i.jsxs("button",{onClick:()=>j("scheduled"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${L==="scheduled"?b.scheduled.color:k.border}`,background:L==="scheduled"?`${b.scheduled.color}20`:"transparent",color:L==="scheduled"?b.scheduled.color:k.text,fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem",transition:"all 0.2s"},children:[i.jsx(Qf,{size:14}),i.jsx("span",{style:{fontSize:"0.7rem"},children:"Scheduled"}),i.jsx("span",{style:{background:L==="scheduled"?b.scheduled.color:k.cardBg,color:L==="scheduled"?"white":k.subtext,padding:"0.125rem 0.375rem",borderRadius:"1rem",fontSize:"0.7rem",fontWeight:"700",minWidth:"1.5rem"},children:ge.scheduled})]}),i.jsxs("button",{onClick:()=>j("in-progress"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${L==="in-progress"?b["in-progress"].color:k.border}`,background:L==="in-progress"?`${b["in-progress"].color}20`:"transparent",color:L==="in-progress"?b["in-progress"].color:k.text,fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem",transition:"all 0.2s"},children:[i.jsx(ih,{size:14}),i.jsx("span",{style:{fontSize:"0.7rem"},children:"In Progress"}),i.jsx("span",{style:{background:L==="in-progress"?b["in-progress"].color:k.cardBg,color:L==="in-progress"?"white":k.subtext,padding:"0.125rem 0.375rem",borderRadius:"1rem",fontSize:"0.7rem",fontWeight:"700",minWidth:"1.5rem"},children:ge["in-progress"]})]}),i.jsxs("button",{onClick:()=>j("completed"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${L==="completed"?b.completed.color:k.border}`,background:L==="completed"?`${b.completed.color}20`:"transparent",color:L==="completed"?b.completed.color:k.text,fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem",transition:"all 0.2s"},children:[i.jsx(_n,{size:14}),i.jsx("span",{style:{fontSize:"0.7rem"},children:"Completed"}),i.jsx("span",{style:{background:L==="completed"?b.completed.color:k.cardBg,color:L==="completed"?"white":k.subtext,padding:"0.125rem 0.375rem",borderRadius:"1rem",fontSize:"0.7rem",fontWeight:"700",minWidth:"1.5rem"},children:ge.completed})]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0 0.25rem"},children:[i.jsx("h3",{style:{margin:0,color:k.text,fontSize:"1.125rem",fontWeight:"600"},children:L==="all"?"All Jobs":L==="scheduled"?"Scheduled Jobs":L==="in-progress"?"In Progress Jobs":"Completed Jobs"}),i.jsxs("span",{style:{fontSize:"0.875rem",color:k.subtext,background:k.cardBg,padding:"0.25rem 0.75rem",borderRadius:"1rem",border:`1px solid ${k.border}`},children:[he.length," ",he.length===1?"job":"jobs"]})]}),i.jsxs("div",{className:xx.addJobContainer,style:{background:k.cardBg,border:`1px solid ${k.border}`},children:[i.jsxs("button",{onClick:()=>u(!c),className:xx.addJobButton,style:{color:k.text},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:[i.jsx(na,{size:18}),"Add New Job"]}),i.jsx(Yf,{size:18,style:{transform:c?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),c&&i.jsx("div",{style:{padding:"0 1rem 1rem 1rem",borderTop:`1px solid ${k.border}`},children:i.jsxs("div",{style:{paddingTop:"1rem"},children:[i.jsx(hS,{formData:T,setFormData:V,linkedEstimate:U,estimates:z,showEstimateMenu:B,setShowEstimateMenu:re,onSelectEstimate:be,onCreateNewEstimate:Z,onViewEstimate:W,onRemoveEstimate:J,estimateMenuRef:M,isDarkMode:r,colors:k}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:q,disabled:!T.title||!T.client,style:{flex:1,padding:"0.75rem",background:!T.title||!T.client?k.border:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:!T.title||!T.client?"not-allowed":"pointer",opacity:!T.title||!T.client?.5:1},children:"Add Job"}),i.jsx("button",{onClick:D,style:{flex:1,padding:"0.75rem",background:"transparent",color:k.text,border:`1px solid ${k.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})})]}),he.length===0?i.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.border}`,borderRadius:"0.75rem",textAlign:"center",padding:"3rem 1rem",color:k.subtext},children:[i.jsx(Zc,{size:48,style:{margin:"0 auto 1rem",opacity:.5}}),i.jsx("p",{style:{margin:0,fontSize:"0.9375rem"},children:se?"No jobs match your search.":L==="all"?"No jobs yet. Add your first job above!":`No ${(_e=b[L])==null?void 0:_e.label.toLowerCase()} jobs.`})]}):[...he].sort((fe,xe)=>!fe.date&&!xe.date?0:fe.date?xe.date?new Date(xe.date)-new Date(fe.date):-1:1).map(fe=>i.jsx(tR,{job:fe,statusConfig:b,statusDropdownOpen:C,setStatusDropdownOpen:v,onUpdateStatus:oe,onViewJob:ne,onViewEstimate:xe=>{xe.estimateId&&e&&e({viewEstimateId:xe.estimateId})},onViewInvoice:xe=>{xe.invoiceId&&console.log("View invoice:",xe.invoiceId)},isDarkMode:r,colors:k},fe.id))]})]})})},fS=async()=>{try{const r=ti.currentUser;if(!r)throw new Error("No user logged in");const e=Rh(xl,"estimates"),t=iS(e,TE("userId","==",r.uid)),n=await sS(t),o=[];return n.forEach(a=>{var c;o.push({id:a.id,...a.data(),createdAt:((c=a.data().createdAt)==null?void 0:c.toDate())||new Date})}),o}catch(r){throw console.error("Error getting estimates:",r),r}},pS=async r=>{try{const e=ti.currentUser;if(!e)throw new Error("No user logged in");const t=Rh(xl,"estimates");return(await o1(t,{...r,userId:e.uid,createdAt:id(),updatedAt:id()})).id}catch(e){throw console.error("Error creating estimate:",e),e}},mS=async(r,e)=>{try{if(!ti.currentUser)throw new Error("No user logged in");const n=md(xl,"estimates",r);await aS(n,{...e,updatedAt:id()})}catch(t){throw console.error("Error updating estimate:",t),t}},gS=async r=>{try{if(!ti.currentUser)throw new Error("No user logged in");const t=md(xl,"estimates",r);await lS(t)}catch(e){throw console.error("Error deleting estimate:",e),e}},vx=Object.freeze(Object.defineProperty({__proto__:null,createEstimate:pS,deleteEstimate:gS,getUserEstimates:fS,updateEstimate:mS},Symbol.toStringTag,{value:"Module"})),oR=({isDarkMode:r,jobs:e=[],onApplyToJob:t,pendingEstimateData:n,onClearPendingData:o,navigationData:a})=>{const[c,u]=me.useState([]),[f,d]=me.useState(!0),[y,w]=me.useState(!1),[C,v]=me.useState(null),[B,I]=me.useState(null),[z,A]=me.useState({name:"",laborHours:"",laborRate:"",materials:[],jobId:null}),[M,U]=me.useState({name:"",cost:""}),F={bg:r?"#000000":"#f9fafb",cardBg:r?"#1a1a1a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#999999":"#6b7280",border:r?"#2a2a2a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"};me.useEffect(()=>{const q=Ap(ti,ie=>{ie?se():d(!1)});return()=>q()},[]),me.useEffect(()=>{n&&(A({name:n.jobName||"",laborHours:"",laborRate:"",materials:[],jobId:n.jobId||null}),w(!0),o&&o())},[n,o]),me.useEffect(()=>{if(a!=null&&a.viewEstimateId){const q=c.find(ie=>ie.id===a.viewEstimateId);q&&b(q)}},[a,c]);const se=async()=>{d(!0);try{const q=await fS();u(q)}catch(q){console.error("Error loading estimates:",q),alert("Failed to load estimates. Please try again.")}finally{d(!1)}},ue=(q,ie,oe)=>{const ne=(parseFloat(q)||0)*(parseFloat(ie)||0),ve=oe.reduce((be,Z)=>be+(parseFloat(Z.cost)||0),0);return ne+ve},L=ue(z.laborHours,z.laborRate,z.materials),j=()=>{M.name&&M.cost&&(A(q=>({...q,materials:[...q.materials,{...M}]})),U({name:"",cost:""}))},T=q=>{A(ie=>({...ie,materials:ie.materials.filter((oe,ne)=>ne!==q)}))},V=async()=>{if(z.name)try{const q=ue(z.laborHours,z.laborRate,z.materials),ie={name:z.name,laborHours:parseFloat(z.laborHours)||0,laborRate:parseFloat(z.laborRate)||0,materials:z.materials,total:q,jobId:z.jobId||null};C?await mS(C.id,ie):await pS(ie),k(),se()}catch(q){console.error("Error saving estimate:",q),alert("Failed to save estimate. Please try again.")}},k=()=>{A({name:"",laborHours:"",laborRate:"",materials:[],jobId:null}),U({name:"",cost:""}),w(!1),v(null)},b=q=>{v(q),A({name:q.name,laborHours:q.laborHours.toString(),laborRate:q.laborRate.toString(),materials:[...q.materials],jobId:q.jobId||null}),w(!0),window.scrollTo({top:0,behavior:"smooth"})},N=async(q,ie)=>{if(window.confirm(`Delete "${ie}"?`))try{await gS(q),se()}catch(oe){console.error("Error deleting estimate:",oe),alert("Failed to delete estimate. Please try again.")}},D=(q,ie)=>{t&&t(q,ie),I(null)};return f?i.jsx("div",{style:{minHeight:"100vh",background:F.bg,display:"flex",alignItems:"center",justifyContent:"center",paddingBottom:"5rem"},children:i.jsx("div",{style:{color:F.subtext},children:"Loading estimates..."})}):i.jsx("div",{style:{background:F.bg,minHeight:"100vh",paddingBottom:"5rem"},children:i.jsxs("div",{style:{padding:"1rem"},children:[i.jsxs("div",{style:{background:F.cardBg,borderRadius:"0.75rem",border:`1px solid ${F.border}`,boxShadow:"none",marginBottom:"1rem",overflow:"hidden"},children:[i.jsxs("button",{onClick:()=>w(!y),style:{width:"100%",padding:"1rem",background:"transparent",border:"none",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",color:F.text},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:[i.jsx(na,{size:20}),C?"Edit Estimate":"New Estimate"]}),i.jsx(Yf,{size:20,style:{transform:y?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),y&&i.jsx("div",{style:{padding:"0 1rem 1rem 1rem",borderTop:`1px solid ${F.border}`},children:i.jsxs("div",{style:{paddingTop:"1rem"},children:[i.jsx("input",{type:"text",placeholder:"Estimate Name *",value:z.name,onChange:q=>A(ie=>({...ie,name:q.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}}),i.jsx("h4",{style:{margin:"0 0 0.5rem 0",fontSize:"0.875rem",fontWeight:"600",color:F.text},children:"Labor"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[i.jsx("input",{type:"number",placeholder:"Hours",value:z.laborHours,onChange:q=>A(ie=>({...ie,laborHours:q.target.value})),style:{padding:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}}),i.jsx("input",{type:"number",placeholder:"Rate ($/hr)",value:z.laborRate,onChange:q=>A(ie=>({...ie,laborRate:q.target.value})),style:{padding:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}})]}),i.jsx("h4",{style:{margin:"1rem 0 0.5rem 0",fontSize:"0.875rem",fontWeight:"600",color:F.text},children:"Materials"}),z.materials.map((q,ie)=>i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem",padding:"0.75rem",background:F.bg,borderRadius:"0.5rem"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:F.text},children:q.name}),i.jsxs("div",{style:{fontSize:"0.75rem",color:F.subtext},children:["$",parseFloat(q.cost).toFixed(2)]})]}),i.jsx("button",{onClick:()=>T(ie),style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",padding:"0.25rem"},children:i.jsx(oc,{size:16})})]},ie)),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[i.jsx("input",{type:"text",placeholder:"Material name",value:M.name,onChange:q=>U(ie=>({...ie,name:q.target.value})),style:{flex:1,padding:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.875rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}}),i.jsx("input",{type:"number",placeholder:"Cost",value:M.cost,onChange:q=>U(ie=>({...ie,cost:q.target.value})),style:{width:"100px",padding:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.875rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}}),i.jsx("button",{onClick:j,style:{padding:"0.75rem",background:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center"},children:i.jsx(na,{size:16})})]}),i.jsx("div",{style:{padding:"0.75rem",background:F.bg,borderRadius:"0.5rem",marginBottom:"0.75rem"},children:i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.125rem",fontWeight:"600",color:F.text},children:[i.jsx("span",{children:"Total:"}),i.jsxs("span",{children:["$",L.toFixed(2)]})]})}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsxs("button",{onClick:V,disabled:!z.name,style:{flex:1,padding:"0.75rem",background:z.name?"#2563eb":F.border,color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:z.name?"pointer":"not-allowed",opacity:z.name?1:.5},children:[C?"Update":"Save"," Estimate"]}),i.jsx("button",{onClick:k,style:{flex:1,padding:"0.75rem",background:"transparent",color:F.text,border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0 0.25rem"},children:[i.jsx("h3",{style:{margin:0,color:F.text,fontSize:"1.125rem",fontWeight:"600"},children:"Saved Estimates"}),i.jsx("span",{style:{fontSize:"0.875rem",color:F.subtext,background:F.cardBg,padding:"0.25rem 0.75rem",borderRadius:"1rem",border:`1px solid ${F.border}`},children:c.length})]}),c.length===0?i.jsxs("div",{style:{background:F.cardBg,border:`1px solid ${F.border}`,borderRadius:"0.75rem",textAlign:"center",padding:"3rem 1rem",color:F.subtext},children:[i.jsx(xh,{size:48,style:{margin:"0 auto 1rem",opacity:.5}}),i.jsx("p",{style:{margin:0,fontSize:"0.9375rem"},children:"No estimates yet. Create one above!"})]}):c.map(q=>{var ie;return i.jsxs("div",{style:{background:F.cardBg,border:`1px solid ${F.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"0.75rem",boxShadow:"none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[i.jsxs("div",{children:[i.jsx("h3",{style:{margin:"0 0 0.25rem 0",color:F.text,fontSize:"1rem",fontWeight:"600"},children:q.name}),i.jsx("p",{style:{margin:0,color:F.subtext,fontSize:"0.75rem"},children:((ie=q.createdAt)==null?void 0:ie.toLocaleDateString())||"N/A"})]}),i.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10b981"},children:["$",q.total.toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:F.subtext,fontSize:"0.875rem"},children:[i.jsx(Qf,{size:16}),i.jsxs("span",{children:[q.laborHours,"h × $",q.laborRate,"/hr = $",(q.laborHours*q.laborRate).toFixed(2)]})]}),q.materials.length>0&&i.jsx("div",{style:{padding:"0.75rem",background:F.bg,borderRadius:"0.5rem",marginBottom:"0.75rem"},children:q.materials.map((oe,ne)=>i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem",color:F.subtext,marginBottom:ne<q.materials.length-1?"0.25rem":0},children:[i.jsx("span",{children:oe.name}),i.jsxs("span",{children:["$",parseFloat(oe.cost).toFixed(2)]})]},ne))}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsxs("div",{style:{position:"relative",flex:1},children:[i.jsxs("button",{onClick:()=>I(B===q.id?null:q.id),style:{width:"100%",padding:"0.5rem",background:"#2563eb",border:"none",borderRadius:"0.5rem",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.875rem",fontWeight:"500"},children:[i.jsx(lg,{size:16}),"Add to Job",i.jsx(Yf,{size:14})]}),B===q.id&&i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:()=>I(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998}}),i.jsxs("div",{style:{position:"absolute",bottom:"100%",left:0,right:0,marginBottom:"0.5rem",background:F.cardBg,border:`1px solid ${F.border}`,borderRadius:"0.5rem",boxShadow:r?"0 4px 12px rgba(0,0,0,0.6)":"0 4px 12px rgba(0,0,0,0.15)",maxHeight:"200px",overflowY:"auto",zIndex:9999},children:[i.jsx("button",{onClick:()=>D(q,"new"),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${F.border}`,color:"#2563eb",cursor:"pointer",textAlign:"left",fontSize:"0.875rem",fontWeight:"500"},children:"+ Create New Job"}),e.map(oe=>i.jsx("button",{onClick:()=>D(q,oe.id),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${F.border}`,color:F.text,cursor:"pointer",textAlign:"left",fontSize:"0.875rem"},children:oe.title||oe.name},oe.id))]})]})]}),i.jsx("button",{onClick:()=>b(q),style:{padding:"0.5rem",background:"transparent",border:`1px solid ${F.border}`,borderRadius:"0.5rem",color:F.text,cursor:"pointer",display:"flex",alignItems:"center"},children:i.jsx(Mx,{size:16})}),i.jsx("button",{onClick:()=>N(q.id,q.name),style:{padding:"0.5rem",background:"transparent",border:"1px solid #ef4444",borderRadius:"0.5rem",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center"},children:i.jsx(oc,{size:16})})]})]},q.id)})]})})};function sR({isDarkMode:r=!1}){const[e,t]=me.useState([{id:1,invoiceNumber:"INV-001",client:"ABC Construction",date:"2025-10-01",amount:2500,status:"Paid"},{id:2,invoiceNumber:"INV-002",client:"Smith Residence",date:"2025-10-10",amount:1200,status:"Pending"},{id:3,invoiceNumber:"INV-003",client:"Downtown Office Building",date:"2025-10-12",amount:4800,status:"Overdue"}]),n={bg:r?"#000000":"#f9fafb",cardBg:r?"#111111":"#ffffff",border:r?"#1a1a1a":"#e5e7eb",text:r?"#ffffff":"#111827",textSecondary:r?"#9ca3af":"#6b7280",buttonBg:"#3b82f6",buttonText:"#ffffff",paidBg:r?"#064e3b":"#d1fae5",paidText:r?"#6ee7b7":"#065f46",pendingBg:r?"#78350f":"#fef3c7",pendingText:r?"#fcd34d":"#92400e",overdueBg:r?"#7f1d1d":"#fee2e2",overdueText:r?"#fca5a5":"#991b1b"},o=a=>{switch(a){case"Paid":return{background:n.paidBg,color:n.paidText};case"Pending":return{background:n.pendingBg,color:n.pendingText};case"Overdue":return{background:n.overdueBg,color:n.overdueText};default:return{}}};return i.jsx("div",{style:{minHeight:"100vh",background:n.bg,paddingTop:"1rem"},children:i.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[i.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary,marginBottom:"0.25rem"},children:"Total"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:n.text},children:e.length})]}),i.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary,marginBottom:"0.25rem"},children:"Paid"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:n.paidText},children:e.filter(a=>a.status==="Paid").length})]}),i.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary,marginBottom:"0.25rem"},children:"Pending"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:n.pendingText},children:e.filter(a=>a.status==="Pending").length})]})]}),i.jsxs("button",{style:{width:"100%",background:n.buttonBg,color:n.buttonText,border:"none",borderRadius:"0.5rem",padding:"0.875rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[i.jsx(na,{size:20}),i.jsx("span",{children:"Create New Invoice"})]}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.length===0?i.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"3rem 1rem",textAlign:"center"},children:[i.jsx(xh,{size:48,color:n.textSecondary,style:{margin:"0 auto 1rem"}}),i.jsx("p",{style:{color:n.textSecondary,fontSize:"0.875rem",margin:0},children:"No invoices yet. Create your first invoice!"})]}):e.map(a=>i.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:c=>{c.currentTarget.style.transform="translateY(-2px)",c.currentTarget.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"},onMouseLeave:c=>{c.currentTarget.style.transform="translateY(0)",c.currentTarget.style.boxShadow="none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:n.text,marginBottom:"0.25rem"},children:a.invoiceNumber}),i.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary},children:a.client})]}),i.jsx("div",{style:{...o(a.status),padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.75rem",fontWeight:"600"},children:a.status})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"0.75rem",borderTop:`1px solid ${n.border}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary},children:new Date(a.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),i.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"600",color:n.text},children:["$",a.amount.toFixed(2)]})]})]},a.id))})]})})}function aR({headerInfo:r,isDarkMode:e,headerVisible:t,showMenu:n,setShowMenu:o,onNavigate:a,setIsDarkMode:c}){const u=r.icon,f={headerBorder:e?"#2a2a2a":"#e5e7eb",menuBg:e?"#1a1a1a":"white",cardBorder:e?"#2a2a2a":"#e5e7eb",cardText:e?"#ffffff":"#111827"};return i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,height:"env(safe-area-inset-top)",background:e?"#1a1a1a":"#2563eb",zIndex:101}}),i.jsxs("div",{style:{background:e?"#1a1a1a":"#2563eb",padding:"0.5rem 1rem",borderBottom:`1px solid ${f.headerBorder}`,position:"fixed",top:"env(safe-area-inset-top)",left:0,right:0,zIndex:100,display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:"48px",transform:t?"translateY(0)":"translateY(calc(-100% - env(safe-area-inset-top)))",transition:"transform 0.3s ease-in-out",paddingLeft:"max(1rem, env(safe-area-inset-left))",paddingRight:"max(1rem, env(safe-area-inset-right))"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(u,{size:20,color:"white",strokeWidth:2}),i.jsx("h1",{style:{fontSize:"1rem",fontWeight:"600",color:"white",margin:0,letterSpacing:"-0.01em"},children:r.title})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:()=>o(!n),style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"40px",minHeight:"40px",lineHeight:1},children:i.jsx(J3,{size:24,color:"white",style:{display:"block",flexShrink:0}})}),n&&i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:()=>o(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:998}}),i.jsx("div",{style:{position:"absolute",top:"2.5rem",right:0,zIndex:999,background:f.menuBg,border:`1px solid ${f.cardBorder}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",minWidth:"200px",overflow:"hidden"},children:i.jsxs("div",{style:{padding:"0.5rem 0"},children:[i.jsxs("button",{onClick:()=>{a("profile"),o(!1)},style:{width:"100%",padding:"0.75rem 1rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:f.cardText,fontSize:"0.875rem",fontWeight:"500"},onMouseEnter:d=>d.target.style.background=e?"#374151":"#f3f4f6",onMouseLeave:d=>d.target.style.background="transparent",children:[i.jsx(Xf,{size:16}),i.jsx("span",{children:"Profile"})]}),i.jsx("div",{style:{height:"1px",background:f.cardBorder,margin:"0.5rem 0"}}),i.jsxs("button",{onClick:()=>{c(!e),o(!1)},style:{width:"100%",padding:"0.75rem 1rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",color:f.cardText,fontSize:"0.875rem",fontWeight:"500"},onMouseEnter:d=>d.target.style.background=e?"#374151":"#f3f4f6",onMouseLeave:d=>d.target.style.background="transparent",children:[i.jsx("span",{children:e?"Light Mode":"Dark Mode"}),i.jsx("span",{children:e?"☀️":"🌙"})]})]})})]})]})]})]})}function lR(){const[r,e]=me.useState(()=>localStorage.getItem("activeView")||null),[t,n]=me.useState(()=>localStorage.getItem("isDarkMode")==="true"),[o,a]=me.useState(!1),[c,u]=me.useState(!1),[f,d]=me.useState(null),[y,w]=me.useState(null),[C,v]=me.useState(!0),[B,I]=me.useState(0);me.useEffect(()=>{const L=j=>{j.state&&j.state.view!==void 0&&e(j.state.view)};return window.addEventListener("popstate",L),window.history.state||window.history.replaceState({view:r},""),()=>{window.removeEventListener("popstate",L)}},[]),me.useEffect(()=>{window.history.state&&window.history.state.view!==r&&window.history.pushState({view:r},"")},[r]),me.useEffect(()=>{r===null?localStorage.setItem("activeView",""):localStorage.setItem("activeView",r)},[r]),me.useEffect(()=>{localStorage.setItem("isDarkMode",t)},[t]),me.useEffect(()=>{const L=t?"#000000":"#f5f5f5",j=document.querySelector('meta[name="theme-color"]');j&&j.setAttribute("content",L),document.body.style.backgroundColor=L,document.documentElement.style.backgroundColor=L},[t]),me.useEffect(()=>{const L=()=>{const T=document.querySelector('meta[name="theme-color"]');T&&T.setAttribute("content",t?"#1a1a1a":"#2563eb")};L();const j=()=>{document.visibilityState==="visible"&&L()};return document.addEventListener("visibilitychange",j),()=>{document.removeEventListener("visibilitychange",j)}},[t]),me.useEffect(()=>{window.scrollTo(0,0)},[r]);const z=me.useRef(null);me.useEffect(()=>{const L=()=>{const j=window.scrollY;j<10?v(!0):j>B&&j>80?v(!1):j<B&&v(!0),I(j)};return window.addEventListener("scroll",L,{passive:!0}),()=>window.removeEventListener("scroll",L)},[B]),me.useEffect(()=>{r!=="estimates"&&w(null)},[r]);const A=(L,j=null)=>{L==="home"?e(null):L==="calculators"?e("calculators"):L==="profile"?e("profile"):L==="jobs"?e("jobs"):L==="estimates"?(e("estimates"),j&&(j.viewEstimateId?w(j):d(j))):L==="invoices"&&e("invoices")},M=()=>{window.history.back()},U=(L,j)=>{j==="new"?(d(L),e("jobs")):(d({...L,jobId:j}),e("jobs"))},F=()=>{const L=()=>{u(!0),setTimeout(()=>u(!1),3e3)};switch(r){case"voltage-drop":return i.jsx(PE,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"ohms-law":return i.jsx(FE,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"box-fill":return i.jsx(DE,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"conduit-fill":return i.jsx(tI,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"ampacity":return i.jsx(mI,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"motor-calculations":return i.jsx(vI,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"load-calculations":return i.jsx(SI,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"transformer-sizing":return i.jsx(_I,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"service-entrance":return i.jsx(TI,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"grounding-bonding":return i.jsx(jI,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"conduit-bending":return i.jsx(NI,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"lighting":return i.jsx(zI,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"receptacles":return i.jsx(DI,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"vfd-sizing":return i.jsx($I,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"reactance-impedance":return i.jsx(UI,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"power-factor":return i.jsx(qI,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"power-triangle":return i.jsx(HI,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"three-phase-power":return i.jsx(GI,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"pull-box":return i.jsx(GE,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:L});case"calculators":return i.jsx(w_,{isDarkMode:t,onSelectCalculator:e});case"profile":return i.jsx(JI,{isDarkMode:t});case"jobs":return i.jsx(iR,{isDarkMode:t,onNavigateToEstimates:j=>A("estimates",j)});case"estimates":return i.jsx(oR,{isDarkMode:t,onApplyToJob:U,pendingEstimateData:f,onClearPendingData:()=>d(null),navigationData:y});case"invoices":return i.jsx(sR,{isDarkMode:t});default:return i.jsx(KI,{isDarkMode:t})}},ue=r?r==="calculators"?{title:"Calculator Menu",icon:nh}:r==="profile"?{title:"Profile",icon:Xf}:r==="jobs"?{title:"Job Log",icon:Zc}:r==="estimates"?{title:"Estimates",icon:xh}:r==="invoices"?{title:"Invoices",icon:cg}:{"voltage-drop":{title:"Voltage Drop",icon:$x},"ohms-law":{title:"Ohm's Law",icon:Vx},"reactance-impedance":{title:"Reactance & Impedance",icon:Nx},"power-factor":{title:"Power Factor Correction",icon:Wx},"box-fill":{title:"Box Fill",icon:Bx},"conduit-fill":{title:"Conduit Fill",icon:Ax},ampacity:{title:"Ampacity",icon:Tx},"motor-calculations":{title:"Motors",icon:Ox},"load-calculations":{title:"Load Calculations",icon:Cx},"transformer-sizing":{title:"Transformers",icon:Fx},"service-entrance":{title:"Service Entrance Sizing",icon:_x},"grounding-bonding":{title:"Grounding & Bonding",icon:Ex},"conduit-bending":{title:"Conduit Bending",icon:kx},lighting:{title:"Lighting",icon:Rx},receptacles:{title:"Receptacles",icon:Lx},"vfd-sizing":{title:"VFD Sizing",icon:jx},"power-triangle":{title:"Power Triangle",icon:Ux},"three-phase-power":{title:"Three-Phase Power",icon:Dx},"pull-box":{title:"Pull Box Sizing",icon:Sx}}[r]||{title:"Electrician's Toolkit",icon:nh}:{title:"Home",icon:Ix};return i.jsxs("div",{className:"App",style:{background:t?"#000000":"#ffffff",overscrollBehavior:"none"},children:[i.jsx(aR,{headerInfo:ue,isDarkMode:t,headerVisible:C,showMenu:o,setShowMenu:a,onNavigate:A,setIsDarkMode:n}),i.jsx("div",{style:{paddingBottom:"calc(65px + env(safe-area-inset-bottom))",paddingTop:"calc(48px + env(safe-area-inset-top))",paddingLeft:r==="calculators"?"0":"env(safe-area-inset-left)",paddingRight:r==="calculators"?"0":"env(safe-area-inset-right)",position:"relative",minHeight:"100vh",boxSizing:"border-box"},children:r?i.jsx("div",{style:{minHeight:"calc(100vh - 3.5rem)",padding:r==="calculators"||r==="jobs"||r==="profile"||r==="estimates"||r==="invoices"?"0":"1rem",paddingBottom:"5rem"},children:F()}):F()}),c&&i.jsxs("div",{style:{position:"fixed",bottom:"6rem",left:"50%",transform:"translateX(-50%)",background:"#10b981",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",animation:"slideUp 0.3s ease-out",maxWidth:"90%",textAlign:"center"},children:[i.jsx("span",{style:{fontSize:"1.25rem"},children:"✓"}),i.jsx("span",{children:"PDF saved to Downloads"})]}),i.jsx(WI,{onNavigate:A,currentView:r==="jobs"?"jobs":r==="estimates"?"estimates":r==="invoices"?"invoices":r==="profile"?"profile":r==="calculators"||r?"calculators":"home",isDarkMode:t})]})}const cR=a3.createRoot(document.getElementById("root"));cR.render(i.jsx(e3.StrictMode,{children:i.jsx(lR,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{if(window.location.hostname==="localhost"){console.log("Skipping service worker on localhost");return}navigator.serviceWorker.register("/electrician-toolkit/service-worker.js").then(r=>{console.log("ServiceWorker registration successful:",r.scope)}).catch(r=>{console.log("ServiceWorker registration failed:",r)})});export{qr as _,dR as c,bx as g};
