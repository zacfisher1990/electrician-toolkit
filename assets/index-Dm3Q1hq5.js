var gS=Object.defineProperty;var yS=(r,e,t)=>e in r?gS(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ur=(r,e,t)=>yS(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();var ME=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var xm={exports:{}},Pd={},vm={exports:{}},hr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y1;function xS(){if(Y1)return hr;Y1=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.iterator;function A(ne){return ne===null||typeof ne!="object"?null:(ne=b&&ne[b]||ne["@@iterator"],typeof ne=="function"?ne:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,E={};function N(ne,D,Y){this.props=ne,this.context=D,this.refs=E,this.updater=Y||v}N.prototype.isReactComponent={},N.prototype.setState=function(ne,D){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,D,"setState")},N.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function j(){}j.prototype=N.prototype;function $(ne,D,Y){this.props=ne,this.context=D,this.refs=E,this.updater=Y||v}var V=$.prototype=new j;V.constructor=$,F(V,N.prototype),V.isPureReactComponent=!0;var B=Array.isArray,X=Object.prototype.hasOwnProperty,se={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function C(ne,D,Y){var re,ue={},fe=null,Se=null;if(D!=null)for(re in D.ref!==void 0&&(Se=D.ref),D.key!==void 0&&(fe=""+D.key),D)X.call(D,re)&&!U.hasOwnProperty(re)&&(ue[re]=D[re]);var Ee=arguments.length-2;if(Ee===1)ue.children=Y;else if(1<Ee){for(var ke=Array(Ee),Oe=0;Oe<Ee;Oe++)ke[Oe]=arguments[Oe+2];ue.children=ke}if(ne&&ne.defaultProps)for(re in Ee=ne.defaultProps,Ee)ue[re]===void 0&&(ue[re]=Ee[re]);return{$$typeof:r,type:ne,key:fe,ref:Se,props:ue,_owner:se.current}}function w(ne,D){return{$$typeof:r,type:ne.type,key:D,ref:ne.ref,props:ne.props,_owner:ne._owner}}function O(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===r}function P(ne){var D={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(Y){return D[Y]})}var S=/\/+/g;function z(ne,D){return typeof ne=="object"&&ne!==null&&ne.key!=null?P(""+ne.key):D.toString(36)}function W(ne,D,Y,re,ue){var fe=typeof ne;(fe==="undefined"||fe==="boolean")&&(ne=null);var Se=!1;if(ne===null)Se=!0;else switch(fe){case"string":case"number":Se=!0;break;case"object":switch(ne.$$typeof){case r:case e:Se=!0}}if(Se)return Se=ne,ue=ue(Se),ne=re===""?"."+z(Se,0):re,B(ue)?(Y="",ne!=null&&(Y=ne.replace(S,"$&/")+"/"),W(ue,D,Y,"",function(Oe){return Oe})):ue!=null&&(O(ue)&&(ue=w(ue,Y+(!ue.key||Se&&Se.key===ue.key?"":(""+ue.key).replace(S,"$&/")+"/")+ne)),D.push(ue)),1;if(Se=0,re=re===""?".":re+":",B(ne))for(var Ee=0;Ee<ne.length;Ee++){fe=ne[Ee];var ke=re+z(fe,Ee);Se+=W(fe,D,Y,ke,ue)}else if(ke=A(ne),typeof ke=="function")for(ne=ke.call(ne),Ee=0;!(fe=ne.next()).done;)fe=fe.value,ke=re+z(fe,Ee++),Se+=W(fe,D,Y,ke,ue);else if(fe==="object")throw D=String(ne),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return Se}function le(ne,D,Y){if(ne==null)return ne;var re=[],ue=0;return W(ne,re,"","",function(fe){return D.call(Y,fe,ue++)}),re}function ve(ne){if(ne._status===-1){var D=ne._result;D=D(),D.then(function(Y){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=Y)},function(Y){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=Y)}),ne._status===-1&&(ne._status=0,ne._result=D)}if(ne._status===1)return ne._result.default;throw ne._result}var de={current:null},ce={transition:null},we={ReactCurrentDispatcher:de,ReactCurrentBatchConfig:ce,ReactCurrentOwner:se};function je(){throw Error("act(...) is not supported in production builds of React.")}return hr.Children={map:le,forEach:function(ne,D,Y){le(ne,function(){D.apply(this,arguments)},Y)},count:function(ne){var D=0;return le(ne,function(){D++}),D},toArray:function(ne){return le(ne,function(D){return D})||[]},only:function(ne){if(!O(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}},hr.Component=N,hr.Fragment=t,hr.Profiler=o,hr.PureComponent=$,hr.StrictMode=n,hr.Suspense=f,hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=we,hr.act=je,hr.cloneElement=function(ne,D,Y){if(ne==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ne+".");var re=F({},ne.props),ue=ne.key,fe=ne.ref,Se=ne._owner;if(D!=null){if(D.ref!==void 0&&(fe=D.ref,Se=se.current),D.key!==void 0&&(ue=""+D.key),ne.type&&ne.type.defaultProps)var Ee=ne.type.defaultProps;for(ke in D)X.call(D,ke)&&!U.hasOwnProperty(ke)&&(re[ke]=D[ke]===void 0&&Ee!==void 0?Ee[ke]:D[ke])}var ke=arguments.length-2;if(ke===1)re.children=Y;else if(1<ke){Ee=Array(ke);for(var Oe=0;Oe<ke;Oe++)Ee[Oe]=arguments[Oe+2];re.children=Ee}return{$$typeof:r,type:ne.type,key:ue,ref:fe,props:re,_owner:Se}},hr.createContext=function(ne){return ne={$$typeof:c,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ne.Provider={$$typeof:a,_context:ne},ne.Consumer=ne},hr.createElement=C,hr.createFactory=function(ne){var D=C.bind(null,ne);return D.type=ne,D},hr.createRef=function(){return{current:null}},hr.forwardRef=function(ne){return{$$typeof:u,render:ne}},hr.isValidElement=O,hr.lazy=function(ne){return{$$typeof:g,_payload:{_status:-1,_result:ne},_init:ve}},hr.memo=function(ne,D){return{$$typeof:h,type:ne,compare:D===void 0?null:D}},hr.startTransition=function(ne){var D=ce.transition;ce.transition={};try{ne()}finally{ce.transition=D}},hr.unstable_act=je,hr.useCallback=function(ne,D){return de.current.useCallback(ne,D)},hr.useContext=function(ne){return de.current.useContext(ne)},hr.useDebugValue=function(){},hr.useDeferredValue=function(ne){return de.current.useDeferredValue(ne)},hr.useEffect=function(ne,D){return de.current.useEffect(ne,D)},hr.useId=function(){return de.current.useId()},hr.useImperativeHandle=function(ne,D,Y){return de.current.useImperativeHandle(ne,D,Y)},hr.useInsertionEffect=function(ne,D){return de.current.useInsertionEffect(ne,D)},hr.useLayoutEffect=function(ne,D){return de.current.useLayoutEffect(ne,D)},hr.useMemo=function(ne,D){return de.current.useMemo(ne,D)},hr.useReducer=function(ne,D,Y){return de.current.useReducer(ne,D,Y)},hr.useRef=function(ne){return de.current.useRef(ne)},hr.useState=function(ne){return de.current.useState(ne)},hr.useSyncExternalStore=function(ne,D,Y){return de.current.useSyncExternalStore(ne,D,Y)},hr.useTransition=function(){return de.current.useTransition()},hr.version="18.3.1",hr}var J1;function W0(){return J1||(J1=1,vm.exports=xS()),vm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q1;function vS(){if(Q1)return Pd;Q1=1;var r=W0(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,f,h){var g,b={},A=null,v=null;h!==void 0&&(A=""+h),f.key!==void 0&&(A=""+f.key),f.ref!==void 0&&(v=f.ref);for(g in f)n.call(f,g)&&!a.hasOwnProperty(g)&&(b[g]=f[g]);if(u&&u.defaultProps)for(g in f=u.defaultProps,f)b[g]===void 0&&(b[g]=f[g]);return{$$typeof:e,type:u,key:A,ref:v,props:b,_owner:o.current}}return Pd.Fragment=t,Pd.jsx=c,Pd.jsxs=c,Pd}var X1;function bS(){return X1||(X1=1,xm.exports=vS()),xm.exports}var i=bS(),be=W0();const ku=Jy(be);var nf={},bm={exports:{}},Oo={},wm={exports:{}},Sm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z1;function wS(){return Z1||(Z1=1,(function(r){function e(ce,we){var je=ce.length;ce.push(we);e:for(;0<je;){var ne=je-1>>>1,D=ce[ne];if(0<o(D,we))ce[ne]=we,ce[je]=D,je=ne;else break e}}function t(ce){return ce.length===0?null:ce[0]}function n(ce){if(ce.length===0)return null;var we=ce[0],je=ce.pop();if(je!==we){ce[0]=je;e:for(var ne=0,D=ce.length,Y=D>>>1;ne<Y;){var re=2*(ne+1)-1,ue=ce[re],fe=re+1,Se=ce[fe];if(0>o(ue,je))fe<D&&0>o(Se,ue)?(ce[ne]=Se,ce[fe]=je,ne=fe):(ce[ne]=ue,ce[re]=je,ne=re);else if(fe<D&&0>o(Se,je))ce[ne]=Se,ce[fe]=je,ne=fe;else break e}}return we}function o(ce,we){var je=ce.sortIndex-we.sortIndex;return je!==0?je:ce.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var f=[],h=[],g=1,b=null,A=3,v=!1,F=!1,E=!1,N=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(ce){for(var we=t(h);we!==null;){if(we.callback===null)n(h);else if(we.startTime<=ce)n(h),we.sortIndex=we.expirationTime,e(f,we);else break;we=t(h)}}function B(ce){if(E=!1,V(ce),!F)if(t(f)!==null)F=!0,ve(X);else{var we=t(h);we!==null&&de(B,we.startTime-ce)}}function X(ce,we){F=!1,E&&(E=!1,j(C),C=-1),v=!0;var je=A;try{for(V(we),b=t(f);b!==null&&(!(b.expirationTime>we)||ce&&!P());){var ne=b.callback;if(typeof ne=="function"){b.callback=null,A=b.priorityLevel;var D=ne(b.expirationTime<=we);we=r.unstable_now(),typeof D=="function"?b.callback=D:b===t(f)&&n(f),V(we)}else n(f);b=t(f)}if(b!==null)var Y=!0;else{var re=t(h);re!==null&&de(B,re.startTime-we),Y=!1}return Y}finally{b=null,A=je,v=!1}}var se=!1,U=null,C=-1,w=5,O=-1;function P(){return!(r.unstable_now()-O<w)}function S(){if(U!==null){var ce=r.unstable_now();O=ce;var we=!0;try{we=U(!0,ce)}finally{we?z():(se=!1,U=null)}}else se=!1}var z;if(typeof $=="function")z=function(){$(S)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,le=W.port2;W.port1.onmessage=S,z=function(){le.postMessage(null)}}else z=function(){N(S,0)};function ve(ce){U=ce,se||(se=!0,z())}function de(ce,we){C=N(function(){ce(r.unstable_now())},we)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ce){ce.callback=null},r.unstable_continueExecution=function(){F||v||(F=!0,ve(X))},r.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<ce?Math.floor(1e3/ce):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_getFirstCallbackNode=function(){return t(f)},r.unstable_next=function(ce){switch(A){case 1:case 2:case 3:var we=3;break;default:we=A}var je=A;A=we;try{return ce()}finally{A=je}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ce,we){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var je=A;A=ce;try{return we()}finally{A=je}},r.unstable_scheduleCallback=function(ce,we,je){var ne=r.unstable_now();switch(typeof je=="object"&&je!==null?(je=je.delay,je=typeof je=="number"&&0<je?ne+je:ne):je=ne,ce){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=je+D,ce={id:g++,callback:we,priorityLevel:ce,startTime:je,expirationTime:D,sortIndex:-1},je>ne?(ce.sortIndex=je,e(h,ce),t(f)===null&&ce===t(h)&&(E?(j(C),C=-1):E=!0,de(B,je-ne))):(ce.sortIndex=D,e(f,ce),F||v||(F=!0,ve(X))),ce},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(ce){var we=A;return function(){var je=A;A=we;try{return ce.apply(this,arguments)}finally{A=je}}}})(Sm)),Sm}var e5;function SS(){return e5||(e5=1,wm.exports=wS()),wm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t5;function _S(){if(t5)return Oo;t5=1;var r=W0(),e=SS();function t(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,o={};function a(s,l){c(s,l),c(s+"Capture",l)}function c(s,l){for(o[s]=l,s=0;s<l.length;s++)n.add(l[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},b={};function A(s){return f.call(b,s)?!0:f.call(g,s)?!1:h.test(s)?b[s]=!0:(g[s]=!0,!1)}function v(s,l,d,y){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function F(s,l,d,y){if(l===null||typeof l>"u"||v(s,l,d,y))return!0;if(y)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function E(s,l,d,y,T,R,G){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=T,this.mustUseProperty=d,this.propertyName=s,this.type=l,this.sanitizeURL=R,this.removeEmptyString=G}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){N[s]=new E(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];N[l]=new E(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){N[s]=new E(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){N[s]=new E(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){N[s]=new E(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){N[s]=new E(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){N[s]=new E(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){N[s]=new E(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){N[s]=new E(s,5,!1,s.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function $(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(j,$);N[l]=new E(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(j,$);N[l]=new E(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(j,$);N[l]=new E(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){N[s]=new E(s,1,!1,s.toLowerCase(),null,!1,!1)}),N.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){N[s]=new E(s,1,!1,s.toLowerCase(),null,!0,!0)});function V(s,l,d,y){var T=N.hasOwnProperty(l)?N[l]:null;(T!==null?T.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(F(l,d,T,y)&&(d=null),y||T===null?A(l)&&(d===null?s.removeAttribute(l):s.setAttribute(l,""+d)):T.mustUseProperty?s[T.propertyName]=d===null?T.type===3?!1:"":d:(l=T.attributeName,y=T.attributeNamespace,d===null?s.removeAttribute(l):(T=T.type,d=T===3||T===4&&d===!0?"":""+d,y?s.setAttributeNS(y,l,d):s.setAttribute(l,d))))}var B=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),se=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),P=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),le=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),de=Symbol.for("react.offscreen"),ce=Symbol.iterator;function we(s){return s===null||typeof s!="object"?null:(s=ce&&s[ce]||s["@@iterator"],typeof s=="function"?s:null)}var je=Object.assign,ne;function D(s){if(ne===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);ne=l&&l[1]||""}return`
`+ne+s}var Y=!1;function re(s,l){if(!s||Y)return"";Y=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ze){var y=ze}Reflect.construct(s,[],l)}else{try{l.call()}catch(ze){y=ze}s.call(l.prototype)}else{try{throw Error()}catch(ze){y=ze}s()}}catch(ze){if(ze&&y&&typeof ze.stack=="string"){for(var T=ze.stack.split(`
`),R=y.stack.split(`
`),G=T.length-1,he=R.length-1;1<=G&&0<=he&&T[G]!==R[he];)he--;for(;1<=G&&0<=he;G--,he--)if(T[G]!==R[he]){if(G!==1||he!==1)do if(G--,he--,0>he||T[G]!==R[he]){var xe=`
`+T[G].replace(" at new "," at ");return s.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",s.displayName)),xe}while(1<=G&&0<=he);break}}}finally{Y=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?D(s):""}function ue(s){switch(s.tag){case 5:return D(s.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return s=re(s.type,!1),s;case 11:return s=re(s.type.render,!1),s;case 1:return s=re(s.type,!0),s;default:return""}}function fe(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case U:return"Fragment";case se:return"Portal";case w:return"Profiler";case C:return"StrictMode";case z:return"Suspense";case W:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case P:return(s.displayName||"Context")+".Consumer";case O:return(s._context.displayName||"Context")+".Provider";case S:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case le:return l=s.displayName||null,l!==null?l:fe(s.type)||"Memo";case ve:l=s._payload,s=s._init;try{return fe(s(l))}catch{}}return null}function Se(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(l);case 8:return l===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ee(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ke(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Oe(s){var l=ke(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),y=""+s[l];if(!s.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var T=d.get,R=d.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return T.call(this)},set:function(G){y=""+G,R.call(this,G)}}),Object.defineProperty(s,l,{enumerable:d.enumerable}),{getValue:function(){return y},setValue:function(G){y=""+G},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Ke(s){s._valueTracker||(s._valueTracker=Oe(s))}function nt(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var d=l.getValue(),y="";return s&&(y=ke(s)?s.checked?"true":"false":s.value),s=y,s!==d?(l.setValue(s),!0):!1}function _e(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function pe(s,l){var d=l.checked;return je({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function Q(s,l){var d=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;d=Ee(l.value!=null?l.value:d),s._wrapperState={initialChecked:y,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Je(s,l){l=l.checked,l!=null&&V(s,"checked",l,!1)}function Ue(s,l){Je(s,l);var d=Ee(l.value),y=l.type;if(d!=null)y==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(y==="submit"||y==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?ge(s,l.type,d):l.hasOwnProperty("defaultValue")&&ge(s,l.type,Ee(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function tt(s,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,d||l===s.value||(s.value=l),s.defaultValue=l}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function ge(s,l,d){(l!=="number"||_e(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var De=Array.isArray;function He(s,l,d,y){if(s=s.options,l){l={};for(var T=0;T<d.length;T++)l["$"+d[T]]=!0;for(d=0;d<s.length;d++)T=l.hasOwnProperty("$"+s[d].value),s[d].selected!==T&&(s[d].selected=T),T&&y&&(s[d].defaultSelected=!0)}else{for(d=""+Ee(d),l=null,T=0;T<s.length;T++){if(s[T].value===d){s[T].selected=!0,y&&(s[T].defaultSelected=!0);return}l!==null||s[T].disabled||(l=s[T])}l!==null&&(l.selected=!0)}}function at(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return je({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function ht(s,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(t(92));if(De(d)){if(1<d.length)throw Error(t(93));d=d[0]}l=d}l==null&&(l=""),d=l}s._wrapperState={initialValue:Ee(d)}}function Tt(s,l){var d=Ee(l.value),y=Ee(l.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),l.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),y!=null&&(s.defaultValue=""+y)}function lt(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function ct(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kt(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?ct(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Vt,jt=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,y,T){MSApp.execUnsafeLocalFunction(function(){return s(l,d,y,T)})}:s})(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(Vt=Vt||document.createElement("div"),Vt.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Vt.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function Pt(s,l){if(l){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=l;return}}s.textContent=l}var bt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cr=["Webkit","ms","Moz","O"];Object.keys(bt).forEach(function(s){Cr.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),bt[l]=bt[s]})});function ir(s,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||bt.hasOwnProperty(s)&&bt[s]?(""+l).trim():l+"px"}function xt(s,l){s=s.style;for(var d in l)if(l.hasOwnProperty(d)){var y=d.indexOf("--")===0,T=ir(d,l[d],y);d==="float"&&(d="cssFloat"),y?s.setProperty(d,T):s[d]=T}}var Ut=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sr(s,l){if(l){if(Ut[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Rt(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var er=null;function Wt(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var kr=null,Br=null,$t=null;function Mt(s){if(s=jl(s)){if(typeof kr!="function")throw Error(t(280));var l=s.stateNode;l&&(l=_c(l),kr(s.stateNode,s.type,l))}}function ar(s){Br?$t?$t.push(s):$t=[s]:Br=s}function Mi(){if(Br){var s=Br,l=$t;if($t=Br=null,Mt(s),l)for(s=0;s<l.length;s++)Mt(l[s])}}function Rn(s,l){return s(l)}function So(){}var Pn=!1;function Nt(s,l,d){if(Pn)return s(l,d);Pn=!0;try{return Rn(s,l,d)}finally{Pn=!1,(Br!==null||$t!==null)&&(So(),Mi())}}function Ci(s,l){var d=s.stateNode;if(d===null)return null;var y=_c(d);if(y===null)return null;d=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(s=s.type,y=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!y;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(t(231,l,typeof d));return d}var li=!1;if(u)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){li=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{li=!1}function ki(s,l,d,y,T,R,G,he,xe){var ze=Array.prototype.slice.call(arguments,3);try{l.apply(d,ze)}catch(et){this.onError(et)}}var Tr=!1,Fr=null,sn=!1,qn=null,$o={onError:function(s){Tr=!0,Fr=s}};function Di(s,l,d,y,T,R,G,he,xe){Tr=!1,Fr=null,ki.apply($o,arguments)}function Wi(s,l,d,y,T,R,G,he,xe){if(Di.apply(this,arguments),Tr){if(Tr){var ze=Fr;Tr=!1,Fr=null}else throw Error(t(198));sn||(sn=!0,qn=ze)}}function mn(s){var l=s,d=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(d=l.return),s=l.return;while(s)}return l.tag===3?d:null}function ji(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function Ei(s){if(mn(s)!==s)throw Error(t(188))}function cs(s){var l=s.alternate;if(!l){if(l=mn(s),l===null)throw Error(t(188));return l!==s?null:s}for(var d=s,y=l;;){var T=d.return;if(T===null)break;var R=T.alternate;if(R===null){if(y=T.return,y!==null){d=y;continue}break}if(T.child===R.child){for(R=T.child;R;){if(R===d)return Ei(T),s;if(R===y)return Ei(T),l;R=R.sibling}throw Error(t(188))}if(d.return!==y.return)d=T,y=R;else{for(var G=!1,he=T.child;he;){if(he===d){G=!0,d=T,y=R;break}if(he===y){G=!0,y=T,d=R;break}he=he.sibling}if(!G){for(he=R.child;he;){if(he===d){G=!0,d=R,y=T;break}if(he===y){G=!0,y=R,d=T;break}he=he.sibling}if(!G)throw Error(t(189))}}if(d.alternate!==y)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?s:l}function lo(s){return s=cs(s),s!==null?co(s):null}function co(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=co(s);if(l!==null)return l;s=s.sibling}return null}var us=e.unstable_scheduleCallback,Uo=e.unstable_cancelCallback,_o=e.unstable_shouldYield,qo=e.unstable_requestPaint,jr=e.unstable_now,gl=e.unstable_getCurrentPriorityLevel,Ps=e.unstable_ImmediatePriority,ci=e.unstable_UserBlockingPriority,Ho=e.unstable_NormalPriority,aa=e.unstable_LowPriority,ds=e.unstable_IdlePriority,hs=null,ui=null;function Fa(s){if(ui&&typeof ui.onCommitFiberRoot=="function")try{ui.onCommitFiberRoot(hs,s,void 0,(s.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:fs,To=Math.log,vr=Math.LN2;function fs(s){return s>>>=0,s===0?32:31-(To(s)/vr|0)|0}var uo=64,di=4194304;function lr(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ln(s,l){var d=s.pendingLanes;if(d===0)return 0;var y=0,T=s.suspendedLanes,R=s.pingedLanes,G=d&268435455;if(G!==0){var he=G&~T;he!==0?y=lr(he):(R&=G,R!==0&&(y=lr(R)))}else G=d&~T,G!==0?y=lr(G):R!==0&&(y=lr(R));if(y===0)return 0;if(l!==0&&l!==y&&(l&T)===0&&(T=y&-y,R=l&-l,T>=R||T===16&&(R&4194240)!==0))return l;if((y&4)!==0&&(y|=d&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=y;0<l;)d=31-Hn(l),T=1<<d,y|=s[d],l&=~T;return y}function ho(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zr(s,l){for(var d=s.suspendedLanes,y=s.pingedLanes,T=s.expirationTimes,R=s.pendingLanes;0<R;){var G=31-Hn(R),he=1<<G,xe=T[G];xe===-1?((he&d)===0||(he&y)!==0)&&(T[G]=ho(he,l)):xe<=l&&(s.expiredLanes|=he),R&=~he}}function Ns(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function za(){var s=uo;return uo<<=1,(uo&4194240)===0&&(uo=64),s}function Oa(s){for(var l=[],d=0;31>d;d++)l.push(s);return l}function Ls(s,l,d){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-Hn(l),s[l]=d}function Ao(s,l){var d=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var y=s.eventTimes;for(s=s.expirationTimes;0<d;){var T=31-Hn(d),R=1<<T;l[T]=0,y[T]=-1,s[T]=-1,d&=~R}}function la(s,l){var d=s.entangledLanes|=l;for(s=s.entanglements;d;){var y=31-Hn(d),T=1<<y;T&l|s[y]&l&&(s[y]|=l),d&=~T}}var or=0;function ti(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Bs,ca,Va,Ma,Fs,hi=!1,fo=[],Co=null,fi=null,gn=null,Bt=new Map,Go=new Map,Ii=[],yl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ps(s,l){switch(s){case"focusin":case"focusout":Co=null;break;case"dragenter":case"dragleave":fi=null;break;case"mouseover":case"mouseout":gn=null;break;case"pointerover":case"pointerout":Bt.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(l.pointerId)}}function Bn(s,l,d,y,T,R){return s===null||s.nativeEvent!==R?(s={blockedOn:l,domEventName:d,eventSystemFlags:y,nativeEvent:R,targetContainers:[T]},l!==null&&(l=jl(l),l!==null&&ca(l)),s):(s.eventSystemFlags|=y,l=s.targetContainers,T!==null&&l.indexOf(T)===-1&&l.push(T),s)}function ko(s,l,d,y,T){switch(l){case"focusin":return Co=Bn(Co,s,l,d,y,T),!0;case"dragenter":return fi=Bn(fi,s,l,d,y,T),!0;case"mouseover":return gn=Bn(gn,s,l,d,y,T),!0;case"pointerover":var R=T.pointerId;return Bt.set(R,Bn(Bt.get(R)||null,s,l,d,y,T)),!0;case"gotpointercapture":return R=T.pointerId,Go.set(R,Bn(Go.get(R)||null,s,l,d,y,T)),!0}return!1}function ua(s){var l=va(s.target);if(l!==null){var d=mn(l);if(d!==null){if(l=d.tag,l===13){if(l=ji(d),l!==null){s.blockedOn=l,Fs(s.priority,function(){Va(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Er(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var d=ms(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var y=new d.constructor(d.type,d);er=y,d.target.dispatchEvent(y),er=null}else return l=jl(d),l!==null&&ca(l),s.blockedOn=d,!1;l.shift()}return!0}function zs(s,l,d){Er(s)&&d.delete(l)}function Da(){hi=!1,Co!==null&&Er(Co)&&(Co=null),fi!==null&&Er(fi)&&(fi=null),gn!==null&&Er(gn)&&(gn=null),Bt.forEach(zs),Go.forEach(zs)}function $i(s,l){s.blockedOn===l&&(s.blockedOn=null,hi||(hi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Da)))}function po(s){function l(T){return $i(T,s)}if(0<fo.length){$i(fo[0],s);for(var d=1;d<fo.length;d++){var y=fo[d];y.blockedOn===s&&(y.blockedOn=null)}}for(Co!==null&&$i(Co,s),fi!==null&&$i(fi,s),gn!==null&&$i(gn,s),Bt.forEach(l),Go.forEach(l),d=0;d<Ii.length;d++)y=Ii[d],y.blockedOn===s&&(y.blockedOn=null);for(;0<Ii.length&&(d=Ii[0],d.blockedOn===null);)ua(d),d.blockedOn===null&&Ii.shift()}var Ui=B.ReactCurrentBatchConfig,Ko=!0;function qi(s,l,d,y){var T=or,R=Ui.transition;Ui.transition=null;try{or=1,Yo(s,l,d,y)}finally{or=T,Ui.transition=R}}function da(s,l,d,y){var T=or,R=Ui.transition;Ui.transition=null;try{or=4,Yo(s,l,d,y)}finally{or=T,Ui.transition=R}}function Yo(s,l,d,y){if(Ko){var T=ms(s,l,d,y);if(T===null)bc(s,l,y,pi,d),ps(s,y);else if(ko(T,s,l,d,y))y.stopPropagation();else if(ps(s,y),l&4&&-1<yl.indexOf(s)){for(;T!==null;){var R=jl(T);if(R!==null&&Bs(R),R=ms(s,l,d,y),R===null&&bc(s,l,y,pi,d),R===T)break;T=R}T!==null&&y.stopPropagation()}else bc(s,l,y,null,d)}}var pi=null;function ms(s,l,d,y){if(pi=null,s=Wt(y),s=va(s),s!==null)if(l=mn(s),l===null)s=null;else if(d=l.tag,d===13){if(s=ji(l),s!==null)return s;s=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return pi=s,null}function Jo(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gl()){case Ps:return 1;case ci:return 4;case Ho:case aa:return 16;case ds:return 536870912;default:return 16}default:return 16}}var ri=null,jo=null,Eo=null;function Wa(){if(Eo)return Eo;var s,l=jo,d=l.length,y,T="value"in ri?ri.value:ri.textContent,R=T.length;for(s=0;s<d&&l[s]===T[s];s++);var G=d-s;for(y=1;y<=G&&l[d-y]===T[R-y];y++);return Eo=T.slice(s,1<y?1-y:void 0)}function Ri(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Gn(){return!0}function ha(){return!1}function Fn(s){function l(d,y,T,R,G){this._reactName=d,this._targetInst=T,this.type=y,this.nativeEvent=R,this.target=G,this.currentTarget=null;for(var he in s)s.hasOwnProperty(he)&&(d=s[he],this[he]=d?d(R):R[he]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Gn:ha,this.isPropagationStopped=ha,this}return je(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){},isPersistent:Gn}),l}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gs=Fn(mi),_=je({},mi,{view:0,detail:0}),q=Fn(_),ae,me,Ce,$e=je({},_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dt,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ce&&(Ce&&s.type==="mousemove"?(ae=s.screenX-Ce.screenX,me=s.screenY-Ce.screenY):me=ae=0,Ce=s),ae)},movementY:function(s){return"movementY"in s?s.movementY:me}}),Qe=Fn($e),ft=je({},$e,{dataTransfer:0}),wt=Fn(ft),Ft=je({},_,{relatedTarget:0}),At=Fn(Ft),pr=je({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),Hr=Fn(pr),Or=je({},mi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),m=Fn(Or),I=je({},mi,{data:0}),M=Fn(I),ee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ie={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Be={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ot(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Be[s])?!!l[s]:!1}function Dt(){return ot}var Vr=je({},_,{key:function(s){if(s.key){var l=ee[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Ri(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Ie[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dt,charCode:function(s){return s.type==="keypress"?Ri(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ri(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ur=Fn(Vr),Gr=je({},$e,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zn=Fn(Gr),Pi=je({},_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dt}),Yr=Fn(Pi),gi=je({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Io=Fn(gi),Os=je({},$e,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),fc=Fn(Os),an=[9,13,27,32],Qo=u&&"CompositionEvent"in window,ys=null;u&&"documentMode"in document&&(ys=document.documentMode);var ru=u&&"TextEvent"in window&&!ys,mo=u&&(!Qo||ys&&8<ys&&11>=ys),fa=" ",xl=!1;function vl(s,l){switch(s){case"keyup":return an.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vs(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ro=!1;function go(s,l){switch(s){case"compositionend":return Vs(l);case"keypress":return l.which!==32?null:(xl=!0,fa);case"textInput":return s=l.data,s===fa&&xl?null:s;default:return null}}function yo(s,l){if(Ro)return s==="compositionend"||!Qo&&vl(s,l)?(s=Wa(),Eo=jo=ri=null,Ro=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return mo&&l.locale!=="ko"?null:l.data;default:return null}}var pa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xs(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!pa[s.type]:l==="textarea"}function Ms(s,l,d,y){ar(y),l=au(l,"onChange"),0<l.length&&(d=new gs("onChange","change",null,d,y),s.push({event:d,listeners:l}))}var Ds=null,vs=null;function yn(s){xc(s,0)}function $a(s){var l=Za(s);if(nt(l))return s}function bs(s,l){if(s==="change")return l}var Xo=!1;if(u){var Ua;if(u){var qa="oninput"in document;if(!qa){var bl=document.createElement("div");bl.setAttribute("oninput","return;"),qa=typeof bl.oninput=="function"}Ua=qa}else Ua=!1;Xo=Ua&&(!document.documentMode||9<document.documentMode)}function wl(){Ds&&(Ds.detachEvent("onpropertychange",Ws),vs=Ds=null)}function Ws(s){if(s.propertyName==="value"&&$a(vs)){var l=[];Ms(l,vs,s,Wt(s)),Nt(yn,l)}}function ma(s,l,d){s==="focusin"?(wl(),Ds=l,vs=d,Ds.attachEvent("onpropertychange",Ws)):s==="focusout"&&wl()}function ga(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return $a(vs)}function Ha(s,l){if(s==="click")return $a(l)}function ya(s,l){if(s==="input"||s==="change")return $a(l)}function Ga(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var ln=typeof Object.is=="function"?Object.is:Ga;function Hi(s,l){if(ln(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var d=Object.keys(s),y=Object.keys(l);if(d.length!==y.length)return!1;for(y=0;y<d.length;y++){var T=d[y];if(!f.call(l,T)||!ln(s[T],l[T]))return!1}return!0}function br(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Rr(s,l){var d=br(s);s=0;for(var y;d;){if(d.nodeType===3){if(y=s+d.textContent.length,s<=l&&y>=l)return{node:d,offset:l-s};s=y}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=br(d)}}function cn(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?cn(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Tn(){for(var s=window,l=_e();l instanceof s.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)s=l.contentWindow;else break;l=_e(s.document)}return l}function Zo(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function pc(s){var l=Tn(),d=s.focusedElem,y=s.selectionRange;if(l!==d&&d&&d.ownerDocument&&cn(d.ownerDocument.documentElement,d)){if(y!==null&&Zo(d)){if(l=y.start,s=y.end,s===void 0&&(s=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(s,d.value.length);else if(s=(l=d.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var T=d.textContent.length,R=Math.min(y.start,T);y=y.end===void 0?R:Math.min(y.end,T),!s.extend&&R>y&&(T=y,y=R,R=T),T=Rr(d,R);var G=Rr(d,y);T&&G&&(s.rangeCount!==1||s.anchorNode!==T.node||s.anchorOffset!==T.offset||s.focusNode!==G.node||s.focusOffset!==G.offset)&&(l=l.createRange(),l.setStart(T.node,T.offset),s.removeAllRanges(),R>y?(s.addRange(l),s.extend(G.node,G.offset)):(l.setEnd(G.node,G.offset),s.addRange(l)))}}for(l=[],s=d;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)s=l[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Sl=u&&"documentMode"in document&&11>=document.documentMode,$s=null,nu=null,_l=null,iu=!1;function ld(s,l,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;iu||$s==null||$s!==_e(y)||(y=$s,"selectionStart"in y&&Zo(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),_l&&Hi(_l,y)||(_l=y,y=au(nu,"onSelect"),0<y.length&&(l=new gs("onSelect","select",null,l,d),s.push({event:l,listeners:y}),l.target=$s)))}function mc(s,l){var d={};return d[s.toLowerCase()]=l.toLowerCase(),d["Webkit"+s]="webkit"+l,d["Moz"+s]="moz"+l,d}var Ka={animationend:mc("Animation","AnimationEnd"),animationiteration:mc("Animation","AnimationIteration"),animationstart:mc("Animation","AnimationStart"),transitionend:mc("Transition","TransitionEnd")},Ya={},cd={};u&&(cd=document.createElement("div").style,"AnimationEvent"in window||(delete Ka.animationend.animation,delete Ka.animationiteration.animation,delete Ka.animationstart.animation),"TransitionEvent"in window||delete Ka.transitionend.transition);function gc(s){if(Ya[s])return Ya[s];if(!Ka[s])return s;var l=Ka[s],d;for(d in l)if(l.hasOwnProperty(d)&&d in cd)return Ya[s]=l[d];return s}var ud=gc("animationend"),dd=gc("animationiteration"),hd=gc("animationstart"),fd=gc("transitionend"),pd=new Map,md="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ws(s,l){pd.set(s,l),a(l,[s])}for(var Tl=0;Tl<md.length;Tl++){var Ni=md[Tl],Po=Ni.toLowerCase(),ou=Ni[0].toUpperCase()+Ni.slice(1);ws(Po,"on"+ou)}ws(ud,"onAnimationEnd"),ws(dd,"onAnimationIteration"),ws(hd,"onAnimationStart"),ws("dblclick","onDoubleClick"),ws("focusin","onFocus"),ws("focusout","onBlur"),ws(fd,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_h=new Set("cancel close invalid load scroll toggle".split(" ").concat(xa));function yc(s,l,d){var y=s.type||"unknown-event";s.currentTarget=d,Wi(y,l,void 0,s),s.currentTarget=null}function xc(s,l){l=(l&4)!==0;for(var d=0;d<s.length;d++){var y=s[d],T=y.event;y=y.listeners;e:{var R=void 0;if(l)for(var G=y.length-1;0<=G;G--){var he=y[G],xe=he.instance,ze=he.currentTarget;if(he=he.listener,xe!==R&&T.isPropagationStopped())break e;yc(T,he,ze),R=xe}else for(G=0;G<y.length;G++){if(he=y[G],xe=he.instance,ze=he.currentTarget,he=he.listener,xe!==R&&T.isPropagationStopped())break e;yc(T,he,ze),R=xe}}}if(sn)throw s=qn,sn=!1,qn=null,s}function Mr(s,l){var d=l[Ki];d===void 0&&(d=l[Ki]=new Set);var y=s+"__bubble";d.has(y)||(vc(l,s,2,!1),d.add(y))}function su(s,l,d){var y=0;l&&(y|=4),vc(d,s,y,l)}var Al="_reactListening"+Math.random().toString(36).slice(2);function Ja(s){if(!s[Al]){s[Al]=!0,n.forEach(function(d){d!=="selectionchange"&&(_h.has(d)||su(d,!1,s),su(d,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Al]||(l[Al]=!0,su("selectionchange",!1,l))}}function vc(s,l,d,y){switch(Jo(l)){case 1:var T=qi;break;case 4:T=da;break;default:T=Yo}d=T.bind(null,l,d,s),T=void 0,!li||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(T=!0),y?T!==void 0?s.addEventListener(l,d,{capture:!0,passive:T}):s.addEventListener(l,d,!0):T!==void 0?s.addEventListener(l,d,{passive:T}):s.addEventListener(l,d,!1)}function bc(s,l,d,y,T){var R=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var G=y.tag;if(G===3||G===4){var he=y.stateNode.containerInfo;if(he===T||he.nodeType===8&&he.parentNode===T)break;if(G===4)for(G=y.return;G!==null;){var xe=G.tag;if((xe===3||xe===4)&&(xe=G.stateNode.containerInfo,xe===T||xe.nodeType===8&&xe.parentNode===T))return;G=G.return}for(;he!==null;){if(G=va(he),G===null)return;if(xe=G.tag,xe===5||xe===6){y=R=G;continue e}he=he.parentNode}}y=y.return}Nt(function(){var ze=R,et=Wt(d),rt=[];e:{var Ze=pd.get(s);if(Ze!==void 0){var dt=gs,St=s;switch(s){case"keypress":if(Ri(d)===0)break e;case"keydown":case"keyup":dt=ur;break;case"focusin":St="focus",dt=At;break;case"focusout":St="blur",dt=At;break;case"beforeblur":case"afterblur":dt=At;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dt=Qe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dt=wt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dt=Yr;break;case ud:case dd:case hd:dt=Hr;break;case fd:dt=Io;break;case"scroll":dt=q;break;case"wheel":dt=fc;break;case"copy":case"cut":case"paste":dt=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dt=zn}var Ct=(l&4)!==0,Mn=!Ct&&s==="scroll",Ne=Ct?Ze!==null?Ze+"Capture":null:Ze;Ct=[];for(var Ae=ze,Fe;Ae!==null;){Fe=Ae;var it=Fe.stateNode;if(Fe.tag===5&&it!==null&&(Fe=it,Ne!==null&&(it=Ci(Ae,Ne),it!=null&&Ct.push(wc(Ae,it,Fe)))),Mn)break;Ae=Ae.return}0<Ct.length&&(Ze=new dt(Ze,St,null,d,et),rt.push({event:Ze,listeners:Ct}))}}if((l&7)===0){e:{if(Ze=s==="mouseover"||s==="pointerover",dt=s==="mouseout"||s==="pointerout",Ze&&d!==er&&(St=d.relatedTarget||d.fromElement)&&(va(St)||St[yi]))break e;if((dt||Ze)&&(Ze=et.window===et?et:(Ze=et.ownerDocument)?Ze.defaultView||Ze.parentWindow:window,dt?(St=d.relatedTarget||d.toElement,dt=ze,St=St?va(St):null,St!==null&&(Mn=mn(St),St!==Mn||St.tag!==5&&St.tag!==6)&&(St=null)):(dt=null,St=ze),dt!==St)){if(Ct=Qe,it="onMouseLeave",Ne="onMouseEnter",Ae="mouse",(s==="pointerout"||s==="pointerover")&&(Ct=zn,it="onPointerLeave",Ne="onPointerEnter",Ae="pointer"),Mn=dt==null?Ze:Za(dt),Fe=St==null?Ze:Za(St),Ze=new Ct(it,Ae+"leave",dt,d,et),Ze.target=Mn,Ze.relatedTarget=Fe,it=null,va(et)===ze&&(Ct=new Ct(Ne,Ae+"enter",St,d,et),Ct.target=Fe,Ct.relatedTarget=Mn,it=Ct),Mn=it,dt&&St)t:{for(Ct=dt,Ne=St,Ae=0,Fe=Ct;Fe;Fe=Qa(Fe))Ae++;for(Fe=0,it=Ne;it;it=Qa(it))Fe++;for(;0<Ae-Fe;)Ct=Qa(Ct),Ae--;for(;0<Fe-Ae;)Ne=Qa(Ne),Fe--;for(;Ae--;){if(Ct===Ne||Ne!==null&&Ct===Ne.alternate)break t;Ct=Qa(Ct),Ne=Qa(Ne)}Ct=null}else Ct=null;dt!==null&&Th(rt,Ze,dt,Ct,!1),St!==null&&Mn!==null&&Th(rt,Mn,St,Ct,!0)}}e:{if(Ze=ze?Za(ze):window,dt=Ze.nodeName&&Ze.nodeName.toLowerCase(),dt==="select"||dt==="input"&&Ze.type==="file")var Et=bs;else if(xs(Ze))if(Xo)Et=ya;else{Et=ga;var zt=ma}else(dt=Ze.nodeName)&&dt.toLowerCase()==="input"&&(Ze.type==="checkbox"||Ze.type==="radio")&&(Et=Ha);if(Et&&(Et=Et(s,ze))){Ms(rt,Et,d,et);break e}zt&&zt(s,Ze,ze),s==="focusout"&&(zt=Ze._wrapperState)&&zt.controlled&&Ze.type==="number"&&ge(Ze,"number",Ze.value)}switch(zt=ze?Za(ze):window,s){case"focusin":(xs(zt)||zt.contentEditable==="true")&&($s=zt,nu=ze,_l=null);break;case"focusout":_l=nu=$s=null;break;case"mousedown":iu=!0;break;case"contextmenu":case"mouseup":case"dragend":iu=!1,ld(rt,d,et);break;case"selectionchange":if(Sl)break;case"keydown":case"keyup":ld(rt,d,et)}var Ot;if(Qo)e:{switch(s){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else Ro?vl(s,d)&&(Yt="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(Yt="onCompositionStart");Yt&&(mo&&d.locale!=="ko"&&(Ro||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Ro&&(Ot=Wa()):(ri=et,jo="value"in ri?ri.value:ri.textContent,Ro=!0)),zt=au(ze,Yt),0<zt.length&&(Yt=new M(Yt,s,null,d,et),rt.push({event:Yt,listeners:zt}),Ot?Yt.data=Ot:(Ot=Vs(d),Ot!==null&&(Yt.data=Ot)))),(Ot=ru?go(s,d):yo(s,d))&&(ze=au(ze,"onBeforeInput"),0<ze.length&&(et=new M("onBeforeInput","beforeinput",null,d,et),rt.push({event:et,listeners:ze}),et.data=Ot))}xc(rt,l)})}function wc(s,l,d){return{instance:s,listener:l,currentTarget:d}}function au(s,l){for(var d=l+"Capture",y=[];s!==null;){var T=s,R=T.stateNode;T.tag===5&&R!==null&&(T=R,R=Ci(s,d),R!=null&&y.unshift(wc(s,R,T)),R=Ci(s,l),R!=null&&y.push(wc(s,R,T))),s=s.return}return y}function Qa(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Th(s,l,d,y,T){for(var R=l._reactName,G=[];d!==null&&d!==y;){var he=d,xe=he.alternate,ze=he.stateNode;if(xe!==null&&xe===y)break;he.tag===5&&ze!==null&&(he=ze,T?(xe=Ci(d,R),xe!=null&&G.unshift(wc(d,xe,he))):T||(xe=Ci(d,R),xe!=null&&G.push(wc(d,xe,he)))),d=d.return}G.length!==0&&s.push({event:l,listeners:G})}var Pp=/\r\n?/g,Np=/\u0000|\uFFFD/g;function Ah(s){return(typeof s=="string"?s:""+s).replace(Pp,`
`).replace(Np,"")}function lu(s,l,d){if(l=Ah(l),Ah(s)!==l&&d)throw Error(t(425))}function Cl(){}var Sc=null,Xa=null;function gd(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var yd=typeof setTimeout=="function"?setTimeout:void 0,Ch=typeof clearTimeout=="function"?clearTimeout:void 0,kh=typeof Promise=="function"?Promise:void 0,Lp=typeof queueMicrotask=="function"?queueMicrotask:typeof kh<"u"?function(s){return kh.resolve(null).then(s).catch(Bp)}:yd;function Bp(s){setTimeout(function(){throw s})}function xd(s,l){var d=l,y=0;do{var T=d.nextSibling;if(s.removeChild(d),T&&T.nodeType===8)if(d=T.data,d==="/$"){if(y===0){s.removeChild(T),po(l);return}y--}else d!=="$"&&d!=="$?"&&d!=="$!"||y++;d=T}while(d);po(l)}function Li(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function No(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return s;l--}else d==="/$"&&l++}s=s.previousSibling}return null}var Gi=Math.random().toString(36).slice(2),Ss="__reactFiber$"+Gi,kl="__reactProps$"+Gi,yi="__reactContainer$"+Gi,Ki="__reactEvents$"+Gi,Fp="__reactListeners$"+Gi,zp="__reactHandles$"+Gi;function va(s){var l=s[Ss];if(l)return l;for(var d=s.parentNode;d;){if(l=d[yi]||d[Ss]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(s=No(s);s!==null;){if(d=s[Ss])return d;s=No(s)}return l}s=d,d=s.parentNode}return null}function jl(s){return s=s[Ss]||s[yi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Za(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function _c(s){return s[kl]||null}var vd=[],Us=-1;function es(s){return{current:s}}function Ir(s){0>Us||(s.current=vd[Us],vd[Us]=null,Us--)}function Pr(s,l){Us++,vd[Us]=s.current,s.current=l}var ba={},ni=es(ba),Yi=es(!1),el=ba;function El(s,l){var d=s.type.contextTypes;if(!d)return ba;var y=s.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var T={},R;for(R in d)T[R]=l[R];return y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=T),T}function Ji(s){return s=s.childContextTypes,s!=null}function cu(){Ir(Yi),Ir(ni)}function jh(s,l,d){if(ni.current!==ba)throw Error(t(168));Pr(ni,l),Pr(Yi,d)}function bd(s,l,d){var y=s.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return d;y=y.getChildContext();for(var T in y)if(!(T in l))throw Error(t(108,Se(s)||"Unknown",T));return je({},d,y)}function tl(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||ba,el=ni.current,Pr(ni,s),Pr(Yi,Yi.current),!0}function Eh(s,l,d){var y=s.stateNode;if(!y)throw Error(t(169));d?(s=bd(s,l,el),y.__reactInternalMemoizedMergedChildContext=s,Ir(Yi),Ir(ni),Pr(ni,s)):Ir(Yi),Pr(Yi,d)}var qs=null,Tc=!1,p=!1;function x(s){qs===null?qs=[s]:qs.push(s)}function k(s){Tc=!0,x(s)}function L(){if(!p&&qs!==null){p=!0;var s=0,l=or;try{var d=qs;for(or=1;s<d.length;s++){var y=d[s];do y=y(!0);while(y!==null)}qs=null,Tc=!1}catch(T){throw qs!==null&&(qs=qs.slice(s+1)),us(Ps,L),T}finally{or=l,p=!1}}return null}var H=[],K=0,J=null,Z=0,te=[],ie=0,ye=null,Pe=1,oe="";function Te(s,l){H[K++]=Z,H[K++]=J,J=s,Z=l}function Re(s,l,d){te[ie++]=Pe,te[ie++]=oe,te[ie++]=ye,ye=s;var y=Pe;s=oe;var T=32-Hn(y)-1;y&=~(1<<T),d+=1;var R=32-Hn(l)+T;if(30<R){var G=T-T%5;R=(y&(1<<G)-1).toString(32),y>>=G,T-=G,Pe=1<<32-Hn(l)+T|d<<T|y,oe=R+s}else Pe=1<<R|d<<T|y,oe=s}function We(s){s.return!==null&&(Te(s,1),Re(s,1,0))}function Le(s){for(;s===J;)J=H[--K],H[K]=null,Z=H[--K],H[K]=null;for(;s===ye;)ye=te[--ie],te[ie]=null,oe=te[--ie],te[ie]=null,Pe=te[--ie],te[ie]=null}var Ve=null,Me=null,qe=!1,Ge=null;function kt(s,l){var d=ks(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=s,l=s.deletions,l===null?(s.deletions=[d],s.flags|=16):l.push(d)}function pt(s,l){switch(s.tag){case 5:var d=s.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,Ve=s,Me=Li(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,Ve=s,Me=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=ye!==null?{id:Pe,overflow:oe}:null,s.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=ks(18,null,null,0),d.stateNode=l,d.return=s,s.child=d,Ve=s,Me=null,!0):!1;default:return!1}}function Xt(s){return(s.mode&1)!==0&&(s.flags&128)===0}function vt(s){if(qe){var l=Me;if(l){var d=l;if(!pt(s,l)){if(Xt(s))throw Error(t(418));l=Li(d.nextSibling);var y=Ve;l&&pt(s,l)?kt(y,d):(s.flags=s.flags&-4097|2,qe=!1,Ve=s)}}else{if(Xt(s))throw Error(t(418));s.flags=s.flags&-4097|2,qe=!1,Ve=s}}}function dr(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Ve=s}function un(s){if(s!==Ve)return!1;if(!qe)return dr(s),qe=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!gd(s.type,s.memoizedProps)),l&&(l=Me)){if(Xt(s))throw tr(),Error(t(418));for(;l;)kt(s,l),l=Li(l.nextSibling)}if(dr(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(l===0){Me=Li(s.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}s=s.nextSibling}Me=null}}else Me=Ve?Li(s.stateNode.nextSibling):null;return!0}function tr(){for(var s=Me;s;)s=Li(s.nextSibling)}function mt(){Me=Ve=null,qe=!1}function st(s){Ge===null?Ge=[s]:Ge.push(s)}var xn=B.ReactCurrentBatchConfig;function qt(s,l,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var y=d.stateNode}if(!y)throw Error(t(147,s));var T=y,R=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===R?l.ref:(l=function(G){var he=T.refs;G===null?delete he[R]:he[R]=G},l._stringRef=R,l)}if(typeof s!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,s))}return s}function cr(s,l){throw s=Object.prototype.toString.call(l),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function Kr(s){var l=s._init;return l(s._payload)}function Kn(s){function l(Ne,Ae){if(s){var Fe=Ne.deletions;Fe===null?(Ne.deletions=[Ae],Ne.flags|=16):Fe.push(Ae)}}function d(Ne,Ae){if(!s)return null;for(;Ae!==null;)l(Ne,Ae),Ae=Ae.sibling;return null}function y(Ne,Ae){for(Ne=new Map;Ae!==null;)Ae.key!==null?Ne.set(Ae.key,Ae):Ne.set(Ae.index,Ae),Ae=Ae.sibling;return Ne}function T(Ne,Ae){return Ne=Vl(Ne,Ae),Ne.index=0,Ne.sibling=null,Ne}function R(Ne,Ae,Fe){return Ne.index=Fe,s?(Fe=Ne.alternate,Fe!==null?(Fe=Fe.index,Fe<Ae?(Ne.flags|=2,Ae):Fe):(Ne.flags|=2,Ae)):(Ne.flags|=1048576,Ae)}function G(Ne){return s&&Ne.alternate===null&&(Ne.flags|=2),Ne}function he(Ne,Ae,Fe,it){return Ae===null||Ae.tag!==6?(Ae=hm(Fe,Ne.mode,it),Ae.return=Ne,Ae):(Ae=T(Ae,Fe),Ae.return=Ne,Ae)}function xe(Ne,Ae,Fe,it){var Et=Fe.type;return Et===U?et(Ne,Ae,Fe.props.children,it,Fe.key):Ae!==null&&(Ae.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===ve&&Kr(Et)===Ae.type)?(it=T(Ae,Fe.props),it.ref=qt(Ne,Ae,Fe),it.return=Ne,it):(it=Yh(Fe.type,Fe.key,Fe.props,null,Ne.mode,it),it.ref=qt(Ne,Ae,Fe),it.return=Ne,it)}function ze(Ne,Ae,Fe,it){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==Fe.containerInfo||Ae.stateNode.implementation!==Fe.implementation?(Ae=fm(Fe,Ne.mode,it),Ae.return=Ne,Ae):(Ae=T(Ae,Fe.children||[]),Ae.return=Ne,Ae)}function et(Ne,Ae,Fe,it,Et){return Ae===null||Ae.tag!==7?(Ae=Pc(Fe,Ne.mode,it,Et),Ae.return=Ne,Ae):(Ae=T(Ae,Fe),Ae.return=Ne,Ae)}function rt(Ne,Ae,Fe){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Ae=hm(""+Ae,Ne.mode,Fe),Ae.return=Ne,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case X:return Fe=Yh(Ae.type,Ae.key,Ae.props,null,Ne.mode,Fe),Fe.ref=qt(Ne,null,Ae),Fe.return=Ne,Fe;case se:return Ae=fm(Ae,Ne.mode,Fe),Ae.return=Ne,Ae;case ve:var it=Ae._init;return rt(Ne,it(Ae._payload),Fe)}if(De(Ae)||we(Ae))return Ae=Pc(Ae,Ne.mode,Fe,null),Ae.return=Ne,Ae;cr(Ne,Ae)}return null}function Ze(Ne,Ae,Fe,it){var Et=Ae!==null?Ae.key:null;if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return Et!==null?null:he(Ne,Ae,""+Fe,it);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case X:return Fe.key===Et?xe(Ne,Ae,Fe,it):null;case se:return Fe.key===Et?ze(Ne,Ae,Fe,it):null;case ve:return Et=Fe._init,Ze(Ne,Ae,Et(Fe._payload),it)}if(De(Fe)||we(Fe))return Et!==null?null:et(Ne,Ae,Fe,it,null);cr(Ne,Fe)}return null}function dt(Ne,Ae,Fe,it,Et){if(typeof it=="string"&&it!==""||typeof it=="number")return Ne=Ne.get(Fe)||null,he(Ae,Ne,""+it,Et);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case X:return Ne=Ne.get(it.key===null?Fe:it.key)||null,xe(Ae,Ne,it,Et);case se:return Ne=Ne.get(it.key===null?Fe:it.key)||null,ze(Ae,Ne,it,Et);case ve:var zt=it._init;return dt(Ne,Ae,Fe,zt(it._payload),Et)}if(De(it)||we(it))return Ne=Ne.get(Fe)||null,et(Ae,Ne,it,Et,null);cr(Ae,it)}return null}function St(Ne,Ae,Fe,it){for(var Et=null,zt=null,Ot=Ae,Yt=Ae=0,Si=null;Ot!==null&&Yt<Fe.length;Yt++){Ot.index>Yt?(Si=Ot,Ot=null):Si=Ot.sibling;var Ar=Ze(Ne,Ot,Fe[Yt],it);if(Ar===null){Ot===null&&(Ot=Si);break}s&&Ot&&Ar.alternate===null&&l(Ne,Ot),Ae=R(Ar,Ae,Yt),zt===null?Et=Ar:zt.sibling=Ar,zt=Ar,Ot=Si}if(Yt===Fe.length)return d(Ne,Ot),qe&&Te(Ne,Yt),Et;if(Ot===null){for(;Yt<Fe.length;Yt++)Ot=rt(Ne,Fe[Yt],it),Ot!==null&&(Ae=R(Ot,Ae,Yt),zt===null?Et=Ot:zt.sibling=Ot,zt=Ot);return qe&&Te(Ne,Yt),Et}for(Ot=y(Ne,Ot);Yt<Fe.length;Yt++)Si=dt(Ot,Ne,Yt,Fe[Yt],it),Si!==null&&(s&&Si.alternate!==null&&Ot.delete(Si.key===null?Yt:Si.key),Ae=R(Si,Ae,Yt),zt===null?Et=Si:zt.sibling=Si,zt=Si);return s&&Ot.forEach(function(Ml){return l(Ne,Ml)}),qe&&Te(Ne,Yt),Et}function Ct(Ne,Ae,Fe,it){var Et=we(Fe);if(typeof Et!="function")throw Error(t(150));if(Fe=Et.call(Fe),Fe==null)throw Error(t(151));for(var zt=Et=null,Ot=Ae,Yt=Ae=0,Si=null,Ar=Fe.next();Ot!==null&&!Ar.done;Yt++,Ar=Fe.next()){Ot.index>Yt?(Si=Ot,Ot=null):Si=Ot.sibling;var Ml=Ze(Ne,Ot,Ar.value,it);if(Ml===null){Ot===null&&(Ot=Si);break}s&&Ot&&Ml.alternate===null&&l(Ne,Ot),Ae=R(Ml,Ae,Yt),zt===null?Et=Ml:zt.sibling=Ml,zt=Ml,Ot=Si}if(Ar.done)return d(Ne,Ot),qe&&Te(Ne,Yt),Et;if(Ot===null){for(;!Ar.done;Yt++,Ar=Fe.next())Ar=rt(Ne,Ar.value,it),Ar!==null&&(Ae=R(Ar,Ae,Yt),zt===null?Et=Ar:zt.sibling=Ar,zt=Ar);return qe&&Te(Ne,Yt),Et}for(Ot=y(Ne,Ot);!Ar.done;Yt++,Ar=Fe.next())Ar=dt(Ot,Ne,Yt,Ar.value,it),Ar!==null&&(s&&Ar.alternate!==null&&Ot.delete(Ar.key===null?Yt:Ar.key),Ae=R(Ar,Ae,Yt),zt===null?Et=Ar:zt.sibling=Ar,zt=Ar);return s&&Ot.forEach(function(mS){return l(Ne,mS)}),qe&&Te(Ne,Yt),Et}function Mn(Ne,Ae,Fe,it){if(typeof Fe=="object"&&Fe!==null&&Fe.type===U&&Fe.key===null&&(Fe=Fe.props.children),typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case X:e:{for(var Et=Fe.key,zt=Ae;zt!==null;){if(zt.key===Et){if(Et=Fe.type,Et===U){if(zt.tag===7){d(Ne,zt.sibling),Ae=T(zt,Fe.props.children),Ae.return=Ne,Ne=Ae;break e}}else if(zt.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===ve&&Kr(Et)===zt.type){d(Ne,zt.sibling),Ae=T(zt,Fe.props),Ae.ref=qt(Ne,zt,Fe),Ae.return=Ne,Ne=Ae;break e}d(Ne,zt);break}else l(Ne,zt);zt=zt.sibling}Fe.type===U?(Ae=Pc(Fe.props.children,Ne.mode,it,Fe.key),Ae.return=Ne,Ne=Ae):(it=Yh(Fe.type,Fe.key,Fe.props,null,Ne.mode,it),it.ref=qt(Ne,Ae,Fe),it.return=Ne,Ne=it)}return G(Ne);case se:e:{for(zt=Fe.key;Ae!==null;){if(Ae.key===zt)if(Ae.tag===4&&Ae.stateNode.containerInfo===Fe.containerInfo&&Ae.stateNode.implementation===Fe.implementation){d(Ne,Ae.sibling),Ae=T(Ae,Fe.children||[]),Ae.return=Ne,Ne=Ae;break e}else{d(Ne,Ae);break}else l(Ne,Ae);Ae=Ae.sibling}Ae=fm(Fe,Ne.mode,it),Ae.return=Ne,Ne=Ae}return G(Ne);case ve:return zt=Fe._init,Mn(Ne,Ae,zt(Fe._payload),it)}if(De(Fe))return St(Ne,Ae,Fe,it);if(we(Fe))return Ct(Ne,Ae,Fe,it);cr(Ne,Fe)}return typeof Fe=="string"&&Fe!==""||typeof Fe=="number"?(Fe=""+Fe,Ae!==null&&Ae.tag===6?(d(Ne,Ae.sibling),Ae=T(Ae,Fe),Ae.return=Ne,Ne=Ae):(d(Ne,Ae),Ae=hm(Fe,Ne.mode,it),Ae.return=Ne,Ne=Ae),G(Ne)):d(Ne,Ae)}return Mn}var An=Kn(!0),rn=Kn(!1),On=es(null),Yn=null,Xr=null,fr=null;function wr(){fr=Xr=Yn=null}function Zr(s){var l=On.current;Ir(On),s._currentValue=l}function Sr(s,l,d){for(;s!==null;){var y=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),s===d)break;s=s.return}}function dn(s,l){Yn=s,fr=Xr=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(Bo=!0),s.firstContext=null)}function hn(s){var l=s._currentValue;if(fr!==s)if(s={context:s,memoizedValue:l,next:null},Xr===null){if(Yn===null)throw Error(t(308));Xr=s,Yn.dependencies={lanes:0,firstContext:s}}else Xr=Xr.next=s;return l}var Dr=null;function xi(s){Dr===null?Dr=[s]:Dr.push(s)}function Nr(s,l,d,y){var T=l.interleaved;return T===null?(d.next=d,xi(l)):(d.next=T.next,T.next=d),l.interleaved=d,Wr(s,y)}function Wr(s,l){s.lanes|=l;var d=s.alternate;for(d!==null&&(d.lanes|=l),d=s,s=s.return;s!==null;)s.childLanes|=l,d=s.alternate,d!==null&&(d.childLanes|=l),d=s,s=s.return;return d.tag===3?d.stateNode:null}var Cn=!1;function ii(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qi(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function vn(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function bn(s,l,d){var y=s.updateQueue;if(y===null)return null;if(y=y.shared,(_r&2)!==0){var T=y.pending;return T===null?l.next=l:(l.next=T.next,T.next=l),y.pending=l,Wr(s,d)}return T=y.interleaved,T===null?(l.next=l,xi(y)):(l.next=T.next,T.next=l),y.interleaved=l,Wr(s,d)}function vi(s,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var y=l.lanes;y&=s.pendingLanes,d|=y,l.lanes=d,la(s,d)}}function $r(s,l){var d=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,d===y)){var T=null,R=null;if(d=d.firstBaseUpdate,d!==null){do{var G={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};R===null?T=R=G:R=R.next=G,d=d.next}while(d!==null);R===null?T=R=l:R=R.next=l}else T=R=l;d={baseState:y.baseState,firstBaseUpdate:T,lastBaseUpdate:R,shared:y.shared,effects:y.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=l}function bi(s,l,d,y){var T=s.updateQueue;Cn=!1;var R=T.firstBaseUpdate,G=T.lastBaseUpdate,he=T.shared.pending;if(he!==null){T.shared.pending=null;var xe=he,ze=xe.next;xe.next=null,G===null?R=ze:G.next=ze,G=xe;var et=s.alternate;et!==null&&(et=et.updateQueue,he=et.lastBaseUpdate,he!==G&&(he===null?et.firstBaseUpdate=ze:he.next=ze,et.lastBaseUpdate=xe))}if(R!==null){var rt=T.baseState;G=0,et=ze=xe=null,he=R;do{var Ze=he.lane,dt=he.eventTime;if((y&Ze)===Ze){et!==null&&(et=et.next={eventTime:dt,lane:0,tag:he.tag,payload:he.payload,callback:he.callback,next:null});e:{var St=s,Ct=he;switch(Ze=l,dt=d,Ct.tag){case 1:if(St=Ct.payload,typeof St=="function"){rt=St.call(dt,rt,Ze);break e}rt=St;break e;case 3:St.flags=St.flags&-65537|128;case 0:if(St=Ct.payload,Ze=typeof St=="function"?St.call(dt,rt,Ze):St,Ze==null)break e;rt=je({},rt,Ze);break e;case 2:Cn=!0}}he.callback!==null&&he.lane!==0&&(s.flags|=64,Ze=T.effects,Ze===null?T.effects=[he]:Ze.push(he))}else dt={eventTime:dt,lane:Ze,tag:he.tag,payload:he.payload,callback:he.callback,next:null},et===null?(ze=et=dt,xe=rt):et=et.next=dt,G|=Ze;if(he=he.next,he===null){if(he=T.shared.pending,he===null)break;Ze=he,he=Ze.next,Ze.next=null,T.lastBaseUpdate=Ze,T.shared.pending=null}}while(!0);if(et===null&&(xe=rt),T.baseState=xe,T.firstBaseUpdate=ze,T.lastBaseUpdate=et,l=T.shared.interleaved,l!==null){T=l;do G|=T.lane,T=T.next;while(T!==l)}else R===null&&(T.shared.lanes=0);jc|=G,s.lanes=G,s.memoizedState=rt}}function Lo(s,l,d){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var y=s[l],T=y.callback;if(T!==null){if(y.callback=null,y=d,typeof T!="function")throw Error(t(191,T));T.call(y)}}}var ts={},Jn=es(ts),wn=es(ts),wa=es(ts);function Hs(s){if(s===ts)throw Error(t(174));return s}function Il(s,l){switch(Pr(wa,l),Pr(wn,s),Pr(Jn,ts),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Kt(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=Kt(l,s)}Ir(Jn),Pr(Jn,l)}function _s(){Ir(Jn),Ir(wn),Ir(wa)}function Ih(s){Hs(wa.current);var l=Hs(Jn.current),d=Kt(l,s.type);l!==d&&(Pr(wn,s),Pr(Jn,d))}function wd(s){wn.current===s&&(Ir(Jn),Ir(wn))}var Jr=es(0);function rs(s){for(var l=s;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Sd=[];function _d(){for(var s=0;s<Sd.length;s++)Sd[s]._workInProgressVersionPrimary=null;Sd.length=0}var uu=B.ReactCurrentDispatcher,du=B.ReactCurrentBatchConfig,Ts=0,en=null,kn=null,Sn=null,Rl=!1,Gs=!1,Pl=0,Op=0;function Vn(){throw Error(t(321))}function hu(s,l){if(l===null)return!1;for(var d=0;d<l.length&&d<s.length;d++)if(!ln(s[d],l[d]))return!1;return!0}function Ac(s,l,d,y,T,R){if(Ts=R,en=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,uu.current=s===null||s.memoizedState===null?Dw:Ww,s=d(y,T),Gs){R=0;do{if(Gs=!1,Pl=0,25<=R)throw Error(t(301));R+=1,Sn=kn=null,l.updateQueue=null,uu.current=$w,s=d(y,T)}while(Gs)}if(uu.current=Bh,l=kn!==null&&kn.next!==null,Ts=0,Sn=kn=en=null,Rl=!1,l)throw Error(t(300));return s}function As(){var s=Pl!==0;return Pl=0,s}function ns(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?en.memoizedState=Sn=s:Sn=Sn.next=s,Sn}function xo(){if(kn===null){var s=en.alternate;s=s!==null?s.memoizedState:null}else s=kn.next;var l=Sn===null?en.memoizedState:Sn.next;if(l!==null)Sn=l,kn=s;else{if(s===null)throw Error(t(310));kn=s,s={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},Sn===null?en.memoizedState=Sn=s:Sn=Sn.next=s}return Sn}function Cc(s,l){return typeof l=="function"?l(s):l}function fu(s){var l=xo(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=s;var y=kn,T=y.baseQueue,R=d.pending;if(R!==null){if(T!==null){var G=T.next;T.next=R.next,R.next=G}y.baseQueue=T=R,d.pending=null}if(T!==null){R=T.next,y=y.baseState;var he=G=null,xe=null,ze=R;do{var et=ze.lane;if((Ts&et)===et)xe!==null&&(xe=xe.next={lane:0,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null}),y=ze.hasEagerState?ze.eagerState:s(y,ze.action);else{var rt={lane:et,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null};xe===null?(he=xe=rt,G=y):xe=xe.next=rt,en.lanes|=et,jc|=et}ze=ze.next}while(ze!==null&&ze!==R);xe===null?G=y:xe.next=he,ln(y,l.memoizedState)||(Bo=!0),l.memoizedState=y,l.baseState=G,l.baseQueue=xe,d.lastRenderedState=y}if(s=d.interleaved,s!==null){T=s;do R=T.lane,en.lanes|=R,jc|=R,T=T.next;while(T!==s)}else T===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function Sa(s){var l=xo(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=s;var y=d.dispatch,T=d.pending,R=l.memoizedState;if(T!==null){d.pending=null;var G=T=T.next;do R=s(R,G.action),G=G.next;while(G!==T);ln(R,l.memoizedState)||(Bo=!0),l.memoizedState=R,l.baseQueue===null&&(l.baseState=R),d.lastRenderedState=R}return[R,y]}function Rh(){}function Td(s,l){var d=en,y=xo(),T=l(),R=!ln(y.memoizedState,T);if(R&&(y.memoizedState=T,Bo=!0),y=y.queue,gu(Nh.bind(null,d,y,s),[s]),y.getSnapshot!==l||R||Sn!==null&&Sn.memoizedState.tag&1){if(d.flags|=2048,vo(9,Ad.bind(null,d,y,T,l),void 0,null),wi===null)throw Error(t(349));(Ts&30)!==0||Ph(d,l,T)}return T}function Ph(s,l,d){s.flags|=16384,s={getSnapshot:l,value:d},l=en.updateQueue,l===null?(l={lastEffect:null,stores:null},en.updateQueue=l,l.stores=[s]):(d=l.stores,d===null?l.stores=[s]:d.push(s))}function Ad(s,l,d,y){l.value=d,l.getSnapshot=y,Nl(l)&&pu(s)}function Nh(s,l,d){return d(function(){Nl(l)&&pu(s)})}function Nl(s){var l=s.getSnapshot;s=s.value;try{var d=l();return!ln(s,d)}catch{return!0}}function pu(s){var l=Wr(s,1);l!==null&&Xs(l,s,1,-1)}function kc(s){var l=ns();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cc,lastRenderedState:s},l.queue=s,s=s.dispatch=Mw.bind(null,en,s),[l.memoizedState,s]}function vo(s,l,d,y){return s={tag:s,create:l,destroy:d,deps:y,next:null},l=en.updateQueue,l===null?(l={lastEffect:null,stores:null},en.updateQueue=l,l.lastEffect=s.next=s):(d=l.lastEffect,d===null?l.lastEffect=s.next=s:(y=d.next,d.next=s,s.next=y,l.lastEffect=s)),s}function Ks(){return xo().memoizedState}function is(s,l,d,y){var T=ns();en.flags|=s,T.memoizedState=vo(1|l,d,void 0,y===void 0?null:y)}function rl(s,l,d,y){var T=xo();y=y===void 0?null:y;var R=void 0;if(kn!==null){var G=kn.memoizedState;if(R=G.destroy,y!==null&&hu(y,G.deps)){T.memoizedState=vo(l,d,R,y);return}}en.flags|=s,T.memoizedState=vo(1|l,d,R,y)}function mu(s,l){return is(8390656,8,s,l)}function gu(s,l){return rl(2048,8,s,l)}function Lh(s,l){return rl(4,2,s,l)}function yu(s,l){return rl(4,4,s,l)}function xu(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function Gg(s,l,d){return d=d!=null?d.concat([s]):null,rl(4,4,xu.bind(null,l,s),d)}function Vp(){}function Kg(s,l){var d=xo();l=l===void 0?null:l;var y=d.memoizedState;return y!==null&&l!==null&&hu(l,y[1])?y[0]:(d.memoizedState=[s,l],s)}function Yg(s,l){var d=xo();l=l===void 0?null:l;var y=d.memoizedState;return y!==null&&l!==null&&hu(l,y[1])?y[0]:(s=s(),d.memoizedState=[s,l],s)}function Jg(s,l,d){return(Ts&21)===0?(s.baseState&&(s.baseState=!1,Bo=!0),s.memoizedState=d):(ln(d,l)||(d=za(),en.lanes|=d,jc|=d,s.baseState=!0),l)}function Ow(s,l){var d=or;or=d!==0&&4>d?d:4,s(!0);var y=du.transition;du.transition={};try{s(!1),l()}finally{or=d,du.transition=y}}function Qg(){return xo().memoizedState}function Vw(s,l,d){var y=zl(s);if(d={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null},Xg(s))Zg(l,d);else if(d=Nr(s,l,d,y),d!==null){var T=wo();Xs(d,s,y,T),e1(d,l,y)}}function Mw(s,l,d){var y=zl(s),T={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null};if(Xg(s))Zg(l,T);else{var R=s.alternate;if(s.lanes===0&&(R===null||R.lanes===0)&&(R=l.lastRenderedReducer,R!==null))try{var G=l.lastRenderedState,he=R(G,d);if(T.hasEagerState=!0,T.eagerState=he,ln(he,G)){var xe=l.interleaved;xe===null?(T.next=T,xi(l)):(T.next=xe.next,xe.next=T),l.interleaved=T;return}}catch{}finally{}d=Nr(s,l,T,y),d!==null&&(T=wo(),Xs(d,s,y,T),e1(d,l,y))}}function Xg(s){var l=s.alternate;return s===en||l!==null&&l===en}function Zg(s,l){Gs=Rl=!0;var d=s.pending;d===null?l.next=l:(l.next=d.next,d.next=l),s.pending=l}function e1(s,l,d){if((d&4194240)!==0){var y=l.lanes;y&=s.pendingLanes,d|=y,l.lanes=d,la(s,d)}}var Bh={readContext:hn,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useInsertionEffect:Vn,useLayoutEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useMutableSource:Vn,useSyncExternalStore:Vn,useId:Vn,unstable_isNewReconciler:!1},Dw={readContext:hn,useCallback:function(s,l){return ns().memoizedState=[s,l===void 0?null:l],s},useContext:hn,useEffect:mu,useImperativeHandle:function(s,l,d){return d=d!=null?d.concat([s]):null,is(4194308,4,xu.bind(null,l,s),d)},useLayoutEffect:function(s,l){return is(4194308,4,s,l)},useInsertionEffect:function(s,l){return is(4,2,s,l)},useMemo:function(s,l){var d=ns();return l=l===void 0?null:l,s=s(),d.memoizedState=[s,l],s},useReducer:function(s,l,d){var y=ns();return l=d!==void 0?d(l):l,y.memoizedState=y.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},y.queue=s,s=s.dispatch=Vw.bind(null,en,s),[y.memoizedState,s]},useRef:function(s){var l=ns();return s={current:s},l.memoizedState=s},useState:kc,useDebugValue:Vp,useDeferredValue:function(s){return ns().memoizedState=s},useTransition:function(){var s=kc(!1),l=s[0];return s=Ow.bind(null,s[1]),ns().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,d){var y=en,T=ns();if(qe){if(d===void 0)throw Error(t(407));d=d()}else{if(d=l(),wi===null)throw Error(t(349));(Ts&30)!==0||Ph(y,l,d)}T.memoizedState=d;var R={value:d,getSnapshot:l};return T.queue=R,mu(Nh.bind(null,y,R,s),[s]),y.flags|=2048,vo(9,Ad.bind(null,y,R,d,l),void 0,null),d},useId:function(){var s=ns(),l=wi.identifierPrefix;if(qe){var d=oe,y=Pe;d=(y&~(1<<32-Hn(y)-1)).toString(32)+d,l=":"+l+"R"+d,d=Pl++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=Op++,l=":"+l+"r"+d.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},Ww={readContext:hn,useCallback:Kg,useContext:hn,useEffect:gu,useImperativeHandle:Gg,useInsertionEffect:Lh,useLayoutEffect:yu,useMemo:Yg,useReducer:fu,useRef:Ks,useState:function(){return fu(Cc)},useDebugValue:Vp,useDeferredValue:function(s){var l=xo();return Jg(l,kn.memoizedState,s)},useTransition:function(){var s=fu(Cc)[0],l=xo().memoizedState;return[s,l]},useMutableSource:Rh,useSyncExternalStore:Td,useId:Qg,unstable_isNewReconciler:!1},$w={readContext:hn,useCallback:Kg,useContext:hn,useEffect:gu,useImperativeHandle:Gg,useInsertionEffect:Lh,useLayoutEffect:yu,useMemo:Yg,useReducer:Sa,useRef:Ks,useState:function(){return Sa(Cc)},useDebugValue:Vp,useDeferredValue:function(s){var l=xo();return kn===null?l.memoizedState=s:Jg(l,kn.memoizedState,s)},useTransition:function(){var s=Sa(Cc)[0],l=xo().memoizedState;return[s,l]},useMutableSource:Rh,useSyncExternalStore:Td,useId:Qg,unstable_isNewReconciler:!1};function Ys(s,l){if(s&&s.defaultProps){l=je({},l),s=s.defaultProps;for(var d in s)l[d]===void 0&&(l[d]=s[d]);return l}return l}function Mp(s,l,d,y){l=s.memoizedState,d=d(y,l),d=d==null?l:je({},l,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Fh={isMounted:function(s){return(s=s._reactInternals)?mn(s)===s:!1},enqueueSetState:function(s,l,d){s=s._reactInternals;var y=wo(),T=zl(s),R=vn(y,T);R.payload=l,d!=null&&(R.callback=d),l=bn(s,R,T),l!==null&&(Xs(l,s,T,y),vi(l,s,T))},enqueueReplaceState:function(s,l,d){s=s._reactInternals;var y=wo(),T=zl(s),R=vn(y,T);R.tag=1,R.payload=l,d!=null&&(R.callback=d),l=bn(s,R,T),l!==null&&(Xs(l,s,T,y),vi(l,s,T))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var d=wo(),y=zl(s),T=vn(d,y);T.tag=2,l!=null&&(T.callback=l),l=bn(s,T,y),l!==null&&(Xs(l,s,y,d),vi(l,s,y))}};function t1(s,l,d,y,T,R,G){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,R,G):l.prototype&&l.prototype.isPureReactComponent?!Hi(d,y)||!Hi(T,R):!0}function r1(s,l,d){var y=!1,T=ba,R=l.contextType;return typeof R=="object"&&R!==null?R=hn(R):(T=Ji(l)?el:ni.current,y=l.contextTypes,R=(y=y!=null)?El(s,T):ba),l=new l(d,R),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Fh,s.stateNode=l,l._reactInternals=s,y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=T,s.__reactInternalMemoizedMaskedChildContext=R),l}function n1(s,l,d,y){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,y),l.state!==s&&Fh.enqueueReplaceState(l,l.state,null)}function Dp(s,l,d,y){var T=s.stateNode;T.props=d,T.state=s.memoizedState,T.refs={},ii(s);var R=l.contextType;typeof R=="object"&&R!==null?T.context=hn(R):(R=Ji(l)?el:ni.current,T.context=El(s,R)),T.state=s.memoizedState,R=l.getDerivedStateFromProps,typeof R=="function"&&(Mp(s,l,R,d),T.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(l=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),l!==T.state&&Fh.enqueueReplaceState(T,T.state,null),bi(s,d,T,y),T.state=s.memoizedState),typeof T.componentDidMount=="function"&&(s.flags|=4194308)}function vu(s,l){try{var d="",y=l;do d+=ue(y),y=y.return;while(y);var T=d}catch(R){T=`
Error generating stack: `+R.message+`
`+R.stack}return{value:s,source:l,stack:T,digest:null}}function Wp(s,l,d){return{value:s,source:null,stack:d??null,digest:l??null}}function $p(s,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var Uw=typeof WeakMap=="function"?WeakMap:Map;function i1(s,l,d){d=vn(-1,d),d.tag=3,d.payload={element:null};var y=l.value;return d.callback=function(){$h||($h=!0,im=y),$p(s,l)},d}function o1(s,l,d){d=vn(-1,d),d.tag=3;var y=s.type.getDerivedStateFromError;if(typeof y=="function"){var T=l.value;d.payload=function(){return y(T)},d.callback=function(){$p(s,l)}}var R=s.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(d.callback=function(){$p(s,l),typeof y!="function"&&(Bl===null?Bl=new Set([this]):Bl.add(this));var G=l.stack;this.componentDidCatch(l.value,{componentStack:G!==null?G:""})}),d}function s1(s,l,d){var y=s.pingCache;if(y===null){y=s.pingCache=new Uw;var T=new Set;y.set(l,T)}else T=y.get(l),T===void 0&&(T=new Set,y.set(l,T));T.has(d)||(T.add(d),s=iS.bind(null,s,l,d),l.then(s,s))}function a1(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function l1(s,l,d,y,T){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=vn(-1,1),l.tag=2,bn(d,l,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=T,s)}var qw=B.ReactCurrentOwner,Bo=!1;function bo(s,l,d,y){l.child=s===null?rn(l,null,d,y):An(l,s.child,d,y)}function c1(s,l,d,y,T){d=d.render;var R=l.ref;return dn(l,T),y=Ac(s,l,d,y,R,T),d=As(),s!==null&&!Bo?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~T,nl(s,l,T)):(qe&&d&&We(l),l.flags|=1,bo(s,l,y,T),l.child)}function u1(s,l,d,y,T){if(s===null){var R=d.type;return typeof R=="function"&&!dm(R)&&R.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=R,d1(s,l,R,y,T)):(s=Yh(d.type,null,y,l,l.mode,T),s.ref=l.ref,s.return=l,l.child=s)}if(R=s.child,(s.lanes&T)===0){var G=R.memoizedProps;if(d=d.compare,d=d!==null?d:Hi,d(G,y)&&s.ref===l.ref)return nl(s,l,T)}return l.flags|=1,s=Vl(R,y),s.ref=l.ref,s.return=l,l.child=s}function d1(s,l,d,y,T){if(s!==null){var R=s.memoizedProps;if(Hi(R,y)&&s.ref===l.ref)if(Bo=!1,l.pendingProps=y=R,(s.lanes&T)!==0)(s.flags&131072)!==0&&(Bo=!0);else return l.lanes=s.lanes,nl(s,l,T)}return Up(s,l,d,y,T)}function h1(s,l,d){var y=l.pendingProps,T=y.children,R=s!==null?s.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pr(wu,os),os|=d;else{if((d&1073741824)===0)return s=R!==null?R.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,Pr(wu,os),os|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=R!==null?R.baseLanes:d,Pr(wu,os),os|=y}else R!==null?(y=R.baseLanes|d,l.memoizedState=null):y=d,Pr(wu,os),os|=y;return bo(s,l,T,d),l.child}function f1(s,l){var d=l.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function Up(s,l,d,y,T){var R=Ji(d)?el:ni.current;return R=El(l,R),dn(l,T),d=Ac(s,l,d,y,R,T),y=As(),s!==null&&!Bo?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~T,nl(s,l,T)):(qe&&y&&We(l),l.flags|=1,bo(s,l,d,T),l.child)}function p1(s,l,d,y,T){if(Ji(d)){var R=!0;tl(l)}else R=!1;if(dn(l,T),l.stateNode===null)Oh(s,l),r1(l,d,y),Dp(l,d,y,T),y=!0;else if(s===null){var G=l.stateNode,he=l.memoizedProps;G.props=he;var xe=G.context,ze=d.contextType;typeof ze=="object"&&ze!==null?ze=hn(ze):(ze=Ji(d)?el:ni.current,ze=El(l,ze));var et=d.getDerivedStateFromProps,rt=typeof et=="function"||typeof G.getSnapshotBeforeUpdate=="function";rt||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(he!==y||xe!==ze)&&n1(l,G,y,ze),Cn=!1;var Ze=l.memoizedState;G.state=Ze,bi(l,y,G,T),xe=l.memoizedState,he!==y||Ze!==xe||Yi.current||Cn?(typeof et=="function"&&(Mp(l,d,et,y),xe=l.memoizedState),(he=Cn||t1(l,d,he,y,Ze,xe,ze))?(rt||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(l.flags|=4194308)):(typeof G.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=xe),G.props=y,G.state=xe,G.context=ze,y=he):(typeof G.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{G=l.stateNode,Qi(s,l),he=l.memoizedProps,ze=l.type===l.elementType?he:Ys(l.type,he),G.props=ze,rt=l.pendingProps,Ze=G.context,xe=d.contextType,typeof xe=="object"&&xe!==null?xe=hn(xe):(xe=Ji(d)?el:ni.current,xe=El(l,xe));var dt=d.getDerivedStateFromProps;(et=typeof dt=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(he!==rt||Ze!==xe)&&n1(l,G,y,xe),Cn=!1,Ze=l.memoizedState,G.state=Ze,bi(l,y,G,T);var St=l.memoizedState;he!==rt||Ze!==St||Yi.current||Cn?(typeof dt=="function"&&(Mp(l,d,dt,y),St=l.memoizedState),(ze=Cn||t1(l,d,ze,y,Ze,St,xe)||!1)?(et||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(y,St,xe),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(y,St,xe)),typeof G.componentDidUpdate=="function"&&(l.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof G.componentDidUpdate!="function"||he===s.memoizedProps&&Ze===s.memoizedState||(l.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||he===s.memoizedProps&&Ze===s.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=St),G.props=y,G.state=St,G.context=xe,y=ze):(typeof G.componentDidUpdate!="function"||he===s.memoizedProps&&Ze===s.memoizedState||(l.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||he===s.memoizedProps&&Ze===s.memoizedState||(l.flags|=1024),y=!1)}return qp(s,l,d,y,R,T)}function qp(s,l,d,y,T,R){f1(s,l);var G=(l.flags&128)!==0;if(!y&&!G)return T&&Eh(l,d,!1),nl(s,l,R);y=l.stateNode,qw.current=l;var he=G&&typeof d.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,s!==null&&G?(l.child=An(l,s.child,null,R),l.child=An(l,null,he,R)):bo(s,l,he,R),l.memoizedState=y.state,T&&Eh(l,d,!0),l.child}function m1(s){var l=s.stateNode;l.pendingContext?jh(s,l.pendingContext,l.pendingContext!==l.context):l.context&&jh(s,l.context,!1),Il(s,l.containerInfo)}function g1(s,l,d,y,T){return mt(),st(T),l.flags|=256,bo(s,l,d,y),l.child}var Hp={dehydrated:null,treeContext:null,retryLane:0};function Gp(s){return{baseLanes:s,cachePool:null,transitions:null}}function y1(s,l,d){var y=l.pendingProps,T=Jr.current,R=!1,G=(l.flags&128)!==0,he;if((he=G)||(he=s!==null&&s.memoizedState===null?!1:(T&2)!==0),he?(R=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(T|=1),Pr(Jr,T&1),s===null)return vt(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(G=y.children,s=y.fallback,R?(y=l.mode,R=l.child,G={mode:"hidden",children:G},(y&1)===0&&R!==null?(R.childLanes=0,R.pendingProps=G):R=Jh(G,y,0,null),s=Pc(s,y,d,null),R.return=l,s.return=l,R.sibling=s,l.child=R,l.child.memoizedState=Gp(d),l.memoizedState=Hp,s):Kp(l,G));if(T=s.memoizedState,T!==null&&(he=T.dehydrated,he!==null))return Hw(s,l,G,y,he,T,d);if(R){R=y.fallback,G=l.mode,T=s.child,he=T.sibling;var xe={mode:"hidden",children:y.children};return(G&1)===0&&l.child!==T?(y=l.child,y.childLanes=0,y.pendingProps=xe,l.deletions=null):(y=Vl(T,xe),y.subtreeFlags=T.subtreeFlags&14680064),he!==null?R=Vl(he,R):(R=Pc(R,G,d,null),R.flags|=2),R.return=l,y.return=l,y.sibling=R,l.child=y,y=R,R=l.child,G=s.child.memoizedState,G=G===null?Gp(d):{baseLanes:G.baseLanes|d,cachePool:null,transitions:G.transitions},R.memoizedState=G,R.childLanes=s.childLanes&~d,l.memoizedState=Hp,y}return R=s.child,s=R.sibling,y=Vl(R,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=d),y.return=l,y.sibling=null,s!==null&&(d=l.deletions,d===null?(l.deletions=[s],l.flags|=16):d.push(s)),l.child=y,l.memoizedState=null,y}function Kp(s,l){return l=Jh({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function zh(s,l,d,y){return y!==null&&st(y),An(l,s.child,null,d),s=Kp(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function Hw(s,l,d,y,T,R,G){if(d)return l.flags&256?(l.flags&=-257,y=Wp(Error(t(422))),zh(s,l,G,y)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(R=y.fallback,T=l.mode,y=Jh({mode:"visible",children:y.children},T,0,null),R=Pc(R,T,G,null),R.flags|=2,y.return=l,R.return=l,y.sibling=R,l.child=y,(l.mode&1)!==0&&An(l,s.child,null,G),l.child.memoizedState=Gp(G),l.memoizedState=Hp,R);if((l.mode&1)===0)return zh(s,l,G,null);if(T.data==="$!"){if(y=T.nextSibling&&T.nextSibling.dataset,y)var he=y.dgst;return y=he,R=Error(t(419)),y=Wp(R,y,void 0),zh(s,l,G,y)}if(he=(G&s.childLanes)!==0,Bo||he){if(y=wi,y!==null){switch(G&-G){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(y.suspendedLanes|G))!==0?0:T,T!==0&&T!==R.retryLane&&(R.retryLane=T,Wr(s,T),Xs(y,s,T,-1))}return um(),y=Wp(Error(t(421))),zh(s,l,G,y)}return T.data==="$?"?(l.flags|=128,l.child=s.child,l=oS.bind(null,s),T._reactRetry=l,null):(s=R.treeContext,Me=Li(T.nextSibling),Ve=l,qe=!0,Ge=null,s!==null&&(te[ie++]=Pe,te[ie++]=oe,te[ie++]=ye,Pe=s.id,oe=s.overflow,ye=l),l=Kp(l,y.children),l.flags|=4096,l)}function x1(s,l,d){s.lanes|=l;var y=s.alternate;y!==null&&(y.lanes|=l),Sr(s.return,l,d)}function Yp(s,l,d,y,T){var R=s.memoizedState;R===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:T}:(R.isBackwards=l,R.rendering=null,R.renderingStartTime=0,R.last=y,R.tail=d,R.tailMode=T)}function v1(s,l,d){var y=l.pendingProps,T=y.revealOrder,R=y.tail;if(bo(s,l,y.children,d),y=Jr.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&x1(s,d,l);else if(s.tag===19)x1(s,d,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}if(Pr(Jr,y),(l.mode&1)===0)l.memoizedState=null;else switch(T){case"forwards":for(d=l.child,T=null;d!==null;)s=d.alternate,s!==null&&rs(s)===null&&(T=d),d=d.sibling;d=T,d===null?(T=l.child,l.child=null):(T=d.sibling,d.sibling=null),Yp(l,!1,T,d,R);break;case"backwards":for(d=null,T=l.child,l.child=null;T!==null;){if(s=T.alternate,s!==null&&rs(s)===null){l.child=T;break}s=T.sibling,T.sibling=d,d=T,T=s}Yp(l,!0,d,null,R);break;case"together":Yp(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Oh(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function nl(s,l,d){if(s!==null&&(l.dependencies=s.dependencies),jc|=l.lanes,(d&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(t(153));if(l.child!==null){for(s=l.child,d=Vl(s,s.pendingProps),l.child=d,d.return=l;s.sibling!==null;)s=s.sibling,d=d.sibling=Vl(s,s.pendingProps),d.return=l;d.sibling=null}return l.child}function Gw(s,l,d){switch(l.tag){case 3:m1(l),mt();break;case 5:Ih(l);break;case 1:Ji(l.type)&&tl(l);break;case 4:Il(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,T=l.memoizedProps.value;Pr(On,y._currentValue),y._currentValue=T;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(Pr(Jr,Jr.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?y1(s,l,d):(Pr(Jr,Jr.current&1),s=nl(s,l,d),s!==null?s.sibling:null);Pr(Jr,Jr.current&1);break;case 19:if(y=(d&l.childLanes)!==0,(s.flags&128)!==0){if(y)return v1(s,l,d);l.flags|=128}if(T=l.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Pr(Jr,Jr.current),y)break;return null;case 22:case 23:return l.lanes=0,h1(s,l,d)}return nl(s,l,d)}var b1,Jp,w1,S1;b1=function(s,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Jp=function(){},w1=function(s,l,d,y){var T=s.memoizedProps;if(T!==y){s=l.stateNode,Hs(Jn.current);var R=null;switch(d){case"input":T=pe(s,T),y=pe(s,y),R=[];break;case"select":T=je({},T,{value:void 0}),y=je({},y,{value:void 0}),R=[];break;case"textarea":T=at(s,T),y=at(s,y),R=[];break;default:typeof T.onClick!="function"&&typeof y.onClick=="function"&&(s.onclick=Cl)}sr(d,y);var G;d=null;for(ze in T)if(!y.hasOwnProperty(ze)&&T.hasOwnProperty(ze)&&T[ze]!=null)if(ze==="style"){var he=T[ze];for(G in he)he.hasOwnProperty(G)&&(d||(d={}),d[G]="")}else ze!=="dangerouslySetInnerHTML"&&ze!=="children"&&ze!=="suppressContentEditableWarning"&&ze!=="suppressHydrationWarning"&&ze!=="autoFocus"&&(o.hasOwnProperty(ze)?R||(R=[]):(R=R||[]).push(ze,null));for(ze in y){var xe=y[ze];if(he=T!=null?T[ze]:void 0,y.hasOwnProperty(ze)&&xe!==he&&(xe!=null||he!=null))if(ze==="style")if(he){for(G in he)!he.hasOwnProperty(G)||xe&&xe.hasOwnProperty(G)||(d||(d={}),d[G]="");for(G in xe)xe.hasOwnProperty(G)&&he[G]!==xe[G]&&(d||(d={}),d[G]=xe[G])}else d||(R||(R=[]),R.push(ze,d)),d=xe;else ze==="dangerouslySetInnerHTML"?(xe=xe?xe.__html:void 0,he=he?he.__html:void 0,xe!=null&&he!==xe&&(R=R||[]).push(ze,xe)):ze==="children"?typeof xe!="string"&&typeof xe!="number"||(R=R||[]).push(ze,""+xe):ze!=="suppressContentEditableWarning"&&ze!=="suppressHydrationWarning"&&(o.hasOwnProperty(ze)?(xe!=null&&ze==="onScroll"&&Mr("scroll",s),R||he===xe||(R=[])):(R=R||[]).push(ze,xe))}d&&(R=R||[]).push("style",d);var ze=R;(l.updateQueue=ze)&&(l.flags|=4)}},S1=function(s,l,d,y){d!==y&&(l.flags|=4)};function Cd(s,l){if(!qe)switch(s.tailMode){case"hidden":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function Xi(s){var l=s.alternate!==null&&s.alternate.child===s.child,d=0,y=0;if(l)for(var T=s.child;T!==null;)d|=T.lanes|T.childLanes,y|=T.subtreeFlags&14680064,y|=T.flags&14680064,T.return=s,T=T.sibling;else for(T=s.child;T!==null;)d|=T.lanes|T.childLanes,y|=T.subtreeFlags,y|=T.flags,T.return=s,T=T.sibling;return s.subtreeFlags|=y,s.childLanes=d,l}function Kw(s,l,d){var y=l.pendingProps;switch(Le(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xi(l),null;case 1:return Ji(l.type)&&cu(),Xi(l),null;case 3:return y=l.stateNode,_s(),Ir(Yi),Ir(ni),_d(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(s===null||s.child===null)&&(un(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ge!==null&&(am(Ge),Ge=null))),Jp(s,l),Xi(l),null;case 5:wd(l);var T=Hs(wa.current);if(d=l.type,s!==null&&l.stateNode!=null)w1(s,l,d,y,T),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(t(166));return Xi(l),null}if(s=Hs(Jn.current),un(l)){y=l.stateNode,d=l.type;var R=l.memoizedProps;switch(y[Ss]=l,y[kl]=R,s=(l.mode&1)!==0,d){case"dialog":Mr("cancel",y),Mr("close",y);break;case"iframe":case"object":case"embed":Mr("load",y);break;case"video":case"audio":for(T=0;T<xa.length;T++)Mr(xa[T],y);break;case"source":Mr("error",y);break;case"img":case"image":case"link":Mr("error",y),Mr("load",y);break;case"details":Mr("toggle",y);break;case"input":Q(y,R),Mr("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!R.multiple},Mr("invalid",y);break;case"textarea":ht(y,R),Mr("invalid",y)}sr(d,R),T=null;for(var G in R)if(R.hasOwnProperty(G)){var he=R[G];G==="children"?typeof he=="string"?y.textContent!==he&&(R.suppressHydrationWarning!==!0&&lu(y.textContent,he,s),T=["children",he]):typeof he=="number"&&y.textContent!==""+he&&(R.suppressHydrationWarning!==!0&&lu(y.textContent,he,s),T=["children",""+he]):o.hasOwnProperty(G)&&he!=null&&G==="onScroll"&&Mr("scroll",y)}switch(d){case"input":Ke(y),tt(y,R,!0);break;case"textarea":Ke(y),lt(y);break;case"select":case"option":break;default:typeof R.onClick=="function"&&(y.onclick=Cl)}y=T,l.updateQueue=y,y!==null&&(l.flags|=4)}else{G=T.nodeType===9?T:T.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=ct(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=G.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof y.is=="string"?s=G.createElement(d,{is:y.is}):(s=G.createElement(d),d==="select"&&(G=s,y.multiple?G.multiple=!0:y.size&&(G.size=y.size))):s=G.createElementNS(s,d),s[Ss]=l,s[kl]=y,b1(s,l,!1,!1),l.stateNode=s;e:{switch(G=Rt(d,y),d){case"dialog":Mr("cancel",s),Mr("close",s),T=y;break;case"iframe":case"object":case"embed":Mr("load",s),T=y;break;case"video":case"audio":for(T=0;T<xa.length;T++)Mr(xa[T],s);T=y;break;case"source":Mr("error",s),T=y;break;case"img":case"image":case"link":Mr("error",s),Mr("load",s),T=y;break;case"details":Mr("toggle",s),T=y;break;case"input":Q(s,y),T=pe(s,y),Mr("invalid",s);break;case"option":T=y;break;case"select":s._wrapperState={wasMultiple:!!y.multiple},T=je({},y,{value:void 0}),Mr("invalid",s);break;case"textarea":ht(s,y),T=at(s,y),Mr("invalid",s);break;default:T=y}sr(d,T),he=T;for(R in he)if(he.hasOwnProperty(R)){var xe=he[R];R==="style"?xt(s,xe):R==="dangerouslySetInnerHTML"?(xe=xe?xe.__html:void 0,xe!=null&&jt(s,xe)):R==="children"?typeof xe=="string"?(d!=="textarea"||xe!=="")&&Pt(s,xe):typeof xe=="number"&&Pt(s,""+xe):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(o.hasOwnProperty(R)?xe!=null&&R==="onScroll"&&Mr("scroll",s):xe!=null&&V(s,R,xe,G))}switch(d){case"input":Ke(s),tt(s,y,!1);break;case"textarea":Ke(s),lt(s);break;case"option":y.value!=null&&s.setAttribute("value",""+Ee(y.value));break;case"select":s.multiple=!!y.multiple,R=y.value,R!=null?He(s,!!y.multiple,R,!1):y.defaultValue!=null&&He(s,!!y.multiple,y.defaultValue,!0);break;default:typeof T.onClick=="function"&&(s.onclick=Cl)}switch(d){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Xi(l),null;case 6:if(s&&l.stateNode!=null)S1(s,l,s.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(t(166));if(d=Hs(wa.current),Hs(Jn.current),un(l)){if(y=l.stateNode,d=l.memoizedProps,y[Ss]=l,(R=y.nodeValue!==d)&&(s=Ve,s!==null))switch(s.tag){case 3:lu(y.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&lu(y.nodeValue,d,(s.mode&1)!==0)}R&&(l.flags|=4)}else y=(d.nodeType===9?d:d.ownerDocument).createTextNode(y),y[Ss]=l,l.stateNode=y}return Xi(l),null;case 13:if(Ir(Jr),y=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(qe&&Me!==null&&(l.mode&1)!==0&&(l.flags&128)===0)tr(),mt(),l.flags|=98560,R=!1;else if(R=un(l),y!==null&&y.dehydrated!==null){if(s===null){if(!R)throw Error(t(318));if(R=l.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(t(317));R[Ss]=l}else mt(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Xi(l),R=!1}else Ge!==null&&(am(Ge),Ge=null),R=!0;if(!R)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(y=y!==null,y!==(s!==null&&s.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(Jr.current&1)!==0?oi===0&&(oi=3):um())),l.updateQueue!==null&&(l.flags|=4),Xi(l),null);case 4:return _s(),Jp(s,l),s===null&&Ja(l.stateNode.containerInfo),Xi(l),null;case 10:return Zr(l.type._context),Xi(l),null;case 17:return Ji(l.type)&&cu(),Xi(l),null;case 19:if(Ir(Jr),R=l.memoizedState,R===null)return Xi(l),null;if(y=(l.flags&128)!==0,G=R.rendering,G===null)if(y)Cd(R,!1);else{if(oi!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(G=rs(s),G!==null){for(l.flags|=128,Cd(R,!1),y=G.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=d,d=l.child;d!==null;)R=d,s=y,R.flags&=14680066,G=R.alternate,G===null?(R.childLanes=0,R.lanes=s,R.child=null,R.subtreeFlags=0,R.memoizedProps=null,R.memoizedState=null,R.updateQueue=null,R.dependencies=null,R.stateNode=null):(R.childLanes=G.childLanes,R.lanes=G.lanes,R.child=G.child,R.subtreeFlags=0,R.deletions=null,R.memoizedProps=G.memoizedProps,R.memoizedState=G.memoizedState,R.updateQueue=G.updateQueue,R.type=G.type,s=G.dependencies,R.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return Pr(Jr,Jr.current&1|2),l.child}s=s.sibling}R.tail!==null&&jr()>Su&&(l.flags|=128,y=!0,Cd(R,!1),l.lanes=4194304)}else{if(!y)if(s=rs(G),s!==null){if(l.flags|=128,y=!0,d=s.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),Cd(R,!0),R.tail===null&&R.tailMode==="hidden"&&!G.alternate&&!qe)return Xi(l),null}else 2*jr()-R.renderingStartTime>Su&&d!==1073741824&&(l.flags|=128,y=!0,Cd(R,!1),l.lanes=4194304);R.isBackwards?(G.sibling=l.child,l.child=G):(d=R.last,d!==null?d.sibling=G:l.child=G,R.last=G)}return R.tail!==null?(l=R.tail,R.rendering=l,R.tail=l.sibling,R.renderingStartTime=jr(),l.sibling=null,d=Jr.current,Pr(Jr,y?d&1|2:d&1),l):(Xi(l),null);case 22:case 23:return cm(),y=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(os&1073741824)!==0&&(Xi(l),l.subtreeFlags&6&&(l.flags|=8192)):Xi(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function Yw(s,l){switch(Le(l),l.tag){case 1:return Ji(l.type)&&cu(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return _s(),Ir(Yi),Ir(ni),_d(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return wd(l),null;case 13:if(Ir(Jr),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(t(340));mt()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Ir(Jr),null;case 4:return _s(),null;case 10:return Zr(l.type._context),null;case 22:case 23:return cm(),null;case 24:return null;default:return null}}var Vh=!1,Zi=!1,Jw=typeof WeakSet=="function"?WeakSet:Set,yt=null;function bu(s,l){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(y){jn(s,l,y)}else d.current=null}function Qp(s,l,d){try{d()}catch(y){jn(s,l,y)}}var _1=!1;function Qw(s,l){if(Sc=Ko,s=Tn(),Zo(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var y=d.getSelection&&d.getSelection();if(y&&y.rangeCount!==0){d=y.anchorNode;var T=y.anchorOffset,R=y.focusNode;y=y.focusOffset;try{d.nodeType,R.nodeType}catch{d=null;break e}var G=0,he=-1,xe=-1,ze=0,et=0,rt=s,Ze=null;t:for(;;){for(var dt;rt!==d||T!==0&&rt.nodeType!==3||(he=G+T),rt!==R||y!==0&&rt.nodeType!==3||(xe=G+y),rt.nodeType===3&&(G+=rt.nodeValue.length),(dt=rt.firstChild)!==null;)Ze=rt,rt=dt;for(;;){if(rt===s)break t;if(Ze===d&&++ze===T&&(he=G),Ze===R&&++et===y&&(xe=G),(dt=rt.nextSibling)!==null)break;rt=Ze,Ze=rt.parentNode}rt=dt}d=he===-1||xe===-1?null:{start:he,end:xe}}else d=null}d=d||{start:0,end:0}}else d=null;for(Xa={focusedElem:s,selectionRange:d},Ko=!1,yt=l;yt!==null;)if(l=yt,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,yt=s;else for(;yt!==null;){l=yt;try{var St=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(St!==null){var Ct=St.memoizedProps,Mn=St.memoizedState,Ne=l.stateNode,Ae=Ne.getSnapshotBeforeUpdate(l.elementType===l.type?Ct:Ys(l.type,Ct),Mn);Ne.__reactInternalSnapshotBeforeUpdate=Ae}break;case 3:var Fe=l.stateNode.containerInfo;Fe.nodeType===1?Fe.textContent="":Fe.nodeType===9&&Fe.documentElement&&Fe.removeChild(Fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(it){jn(l,l.return,it)}if(s=l.sibling,s!==null){s.return=l.return,yt=s;break}yt=l.return}return St=_1,_1=!1,St}function kd(s,l,d){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var T=y=y.next;do{if((T.tag&s)===s){var R=T.destroy;T.destroy=void 0,R!==void 0&&Qp(l,d,R)}T=T.next}while(T!==y)}}function Mh(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&s)===s){var y=d.create;d.destroy=y()}d=d.next}while(d!==l)}}function Xp(s){var l=s.ref;if(l!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof l=="function"?l(s):l.current=s}}function T1(s){var l=s.alternate;l!==null&&(s.alternate=null,T1(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[Ss],delete l[kl],delete l[Ki],delete l[Fp],delete l[zp])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function A1(s){return s.tag===5||s.tag===3||s.tag===4}function C1(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||A1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Zp(s,l,d){var y=s.tag;if(y===5||y===6)s=s.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(s,l):d.insertBefore(s,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(s,d)):(l=d,l.appendChild(s)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Cl));else if(y!==4&&(s=s.child,s!==null))for(Zp(s,l,d),s=s.sibling;s!==null;)Zp(s,l,d),s=s.sibling}function em(s,l,d){var y=s.tag;if(y===5||y===6)s=s.stateNode,l?d.insertBefore(s,l):d.appendChild(s);else if(y!==4&&(s=s.child,s!==null))for(em(s,l,d),s=s.sibling;s!==null;)em(s,l,d),s=s.sibling}var Bi=null,Js=!1;function Ll(s,l,d){for(d=d.child;d!==null;)k1(s,l,d),d=d.sibling}function k1(s,l,d){if(ui&&typeof ui.onCommitFiberUnmount=="function")try{ui.onCommitFiberUnmount(hs,d)}catch{}switch(d.tag){case 5:Zi||bu(d,l);case 6:var y=Bi,T=Js;Bi=null,Ll(s,l,d),Bi=y,Js=T,Bi!==null&&(Js?(s=Bi,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):Bi.removeChild(d.stateNode));break;case 18:Bi!==null&&(Js?(s=Bi,d=d.stateNode,s.nodeType===8?xd(s.parentNode,d):s.nodeType===1&&xd(s,d),po(s)):xd(Bi,d.stateNode));break;case 4:y=Bi,T=Js,Bi=d.stateNode.containerInfo,Js=!0,Ll(s,l,d),Bi=y,Js=T;break;case 0:case 11:case 14:case 15:if(!Zi&&(y=d.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){T=y=y.next;do{var R=T,G=R.destroy;R=R.tag,G!==void 0&&((R&2)!==0||(R&4)!==0)&&Qp(d,l,G),T=T.next}while(T!==y)}Ll(s,l,d);break;case 1:if(!Zi&&(bu(d,l),y=d.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=d.memoizedProps,y.state=d.memoizedState,y.componentWillUnmount()}catch(he){jn(d,l,he)}Ll(s,l,d);break;case 21:Ll(s,l,d);break;case 22:d.mode&1?(Zi=(y=Zi)||d.memoizedState!==null,Ll(s,l,d),Zi=y):Ll(s,l,d);break;default:Ll(s,l,d)}}function j1(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new Jw),l.forEach(function(y){var T=sS.bind(null,s,y);d.has(y)||(d.add(y),y.then(T,T))})}}function Qs(s,l){var d=l.deletions;if(d!==null)for(var y=0;y<d.length;y++){var T=d[y];try{var R=s,G=l,he=G;e:for(;he!==null;){switch(he.tag){case 5:Bi=he.stateNode,Js=!1;break e;case 3:Bi=he.stateNode.containerInfo,Js=!0;break e;case 4:Bi=he.stateNode.containerInfo,Js=!0;break e}he=he.return}if(Bi===null)throw Error(t(160));k1(R,G,T),Bi=null,Js=!1;var xe=T.alternate;xe!==null&&(xe.return=null),T.return=null}catch(ze){jn(T,l,ze)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)E1(l,s),l=l.sibling}function E1(s,l){var d=s.alternate,y=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Qs(l,s),_a(s),y&4){try{kd(3,s,s.return),Mh(3,s)}catch(Ct){jn(s,s.return,Ct)}try{kd(5,s,s.return)}catch(Ct){jn(s,s.return,Ct)}}break;case 1:Qs(l,s),_a(s),y&512&&d!==null&&bu(d,d.return);break;case 5:if(Qs(l,s),_a(s),y&512&&d!==null&&bu(d,d.return),s.flags&32){var T=s.stateNode;try{Pt(T,"")}catch(Ct){jn(s,s.return,Ct)}}if(y&4&&(T=s.stateNode,T!=null)){var R=s.memoizedProps,G=d!==null?d.memoizedProps:R,he=s.type,xe=s.updateQueue;if(s.updateQueue=null,xe!==null)try{he==="input"&&R.type==="radio"&&R.name!=null&&Je(T,R),Rt(he,G);var ze=Rt(he,R);for(G=0;G<xe.length;G+=2){var et=xe[G],rt=xe[G+1];et==="style"?xt(T,rt):et==="dangerouslySetInnerHTML"?jt(T,rt):et==="children"?Pt(T,rt):V(T,et,rt,ze)}switch(he){case"input":Ue(T,R);break;case"textarea":Tt(T,R);break;case"select":var Ze=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!R.multiple;var dt=R.value;dt!=null?He(T,!!R.multiple,dt,!1):Ze!==!!R.multiple&&(R.defaultValue!=null?He(T,!!R.multiple,R.defaultValue,!0):He(T,!!R.multiple,R.multiple?[]:"",!1))}T[kl]=R}catch(Ct){jn(s,s.return,Ct)}}break;case 6:if(Qs(l,s),_a(s),y&4){if(s.stateNode===null)throw Error(t(162));T=s.stateNode,R=s.memoizedProps;try{T.nodeValue=R}catch(Ct){jn(s,s.return,Ct)}}break;case 3:if(Qs(l,s),_a(s),y&4&&d!==null&&d.memoizedState.isDehydrated)try{po(l.containerInfo)}catch(Ct){jn(s,s.return,Ct)}break;case 4:Qs(l,s),_a(s);break;case 13:Qs(l,s),_a(s),T=s.child,T.flags&8192&&(R=T.memoizedState!==null,T.stateNode.isHidden=R,!R||T.alternate!==null&&T.alternate.memoizedState!==null||(nm=jr())),y&4&&j1(s);break;case 22:if(et=d!==null&&d.memoizedState!==null,s.mode&1?(Zi=(ze=Zi)||et,Qs(l,s),Zi=ze):Qs(l,s),_a(s),y&8192){if(ze=s.memoizedState!==null,(s.stateNode.isHidden=ze)&&!et&&(s.mode&1)!==0)for(yt=s,et=s.child;et!==null;){for(rt=yt=et;yt!==null;){switch(Ze=yt,dt=Ze.child,Ze.tag){case 0:case 11:case 14:case 15:kd(4,Ze,Ze.return);break;case 1:bu(Ze,Ze.return);var St=Ze.stateNode;if(typeof St.componentWillUnmount=="function"){y=Ze,d=Ze.return;try{l=y,St.props=l.memoizedProps,St.state=l.memoizedState,St.componentWillUnmount()}catch(Ct){jn(y,d,Ct)}}break;case 5:bu(Ze,Ze.return);break;case 22:if(Ze.memoizedState!==null){P1(rt);continue}}dt!==null?(dt.return=Ze,yt=dt):P1(rt)}et=et.sibling}e:for(et=null,rt=s;;){if(rt.tag===5){if(et===null){et=rt;try{T=rt.stateNode,ze?(R=T.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none"):(he=rt.stateNode,xe=rt.memoizedProps.style,G=xe!=null&&xe.hasOwnProperty("display")?xe.display:null,he.style.display=ir("display",G))}catch(Ct){jn(s,s.return,Ct)}}}else if(rt.tag===6){if(et===null)try{rt.stateNode.nodeValue=ze?"":rt.memoizedProps}catch(Ct){jn(s,s.return,Ct)}}else if((rt.tag!==22&&rt.tag!==23||rt.memoizedState===null||rt===s)&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===s)break e;for(;rt.sibling===null;){if(rt.return===null||rt.return===s)break e;et===rt&&(et=null),rt=rt.return}et===rt&&(et=null),rt.sibling.return=rt.return,rt=rt.sibling}}break;case 19:Qs(l,s),_a(s),y&4&&j1(s);break;case 21:break;default:Qs(l,s),_a(s)}}function _a(s){var l=s.flags;if(l&2){try{e:{for(var d=s.return;d!==null;){if(A1(d)){var y=d;break e}d=d.return}throw Error(t(160))}switch(y.tag){case 5:var T=y.stateNode;y.flags&32&&(Pt(T,""),y.flags&=-33);var R=C1(s);em(s,R,T);break;case 3:case 4:var G=y.stateNode.containerInfo,he=C1(s);Zp(s,he,G);break;default:throw Error(t(161))}}catch(xe){jn(s,s.return,xe)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function Xw(s,l,d){yt=s,I1(s)}function I1(s,l,d){for(var y=(s.mode&1)!==0;yt!==null;){var T=yt,R=T.child;if(T.tag===22&&y){var G=T.memoizedState!==null||Vh;if(!G){var he=T.alternate,xe=he!==null&&he.memoizedState!==null||Zi;he=Vh;var ze=Zi;if(Vh=G,(Zi=xe)&&!ze)for(yt=T;yt!==null;)G=yt,xe=G.child,G.tag===22&&G.memoizedState!==null?N1(T):xe!==null?(xe.return=G,yt=xe):N1(T);for(;R!==null;)yt=R,I1(R),R=R.sibling;yt=T,Vh=he,Zi=ze}R1(s)}else(T.subtreeFlags&8772)!==0&&R!==null?(R.return=T,yt=R):R1(s)}}function R1(s){for(;yt!==null;){var l=yt;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Zi||Mh(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!Zi)if(d===null)y.componentDidMount();else{var T=l.elementType===l.type?d.memoizedProps:Ys(l.type,d.memoizedProps);y.componentDidUpdate(T,d.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var R=l.updateQueue;R!==null&&Lo(l,R,y);break;case 3:var G=l.updateQueue;if(G!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}Lo(l,G,d)}break;case 5:var he=l.stateNode;if(d===null&&l.flags&4){d=he;var xe=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":xe.autoFocus&&d.focus();break;case"img":xe.src&&(d.src=xe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ze=l.alternate;if(ze!==null){var et=ze.memoizedState;if(et!==null){var rt=et.dehydrated;rt!==null&&po(rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Zi||l.flags&512&&Xp(l)}catch(Ze){jn(l,l.return,Ze)}}if(l===s){yt=null;break}if(d=l.sibling,d!==null){d.return=l.return,yt=d;break}yt=l.return}}function P1(s){for(;yt!==null;){var l=yt;if(l===s){yt=null;break}var d=l.sibling;if(d!==null){d.return=l.return,yt=d;break}yt=l.return}}function N1(s){for(;yt!==null;){var l=yt;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{Mh(4,l)}catch(xe){jn(l,d,xe)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var T=l.return;try{y.componentDidMount()}catch(xe){jn(l,T,xe)}}var R=l.return;try{Xp(l)}catch(xe){jn(l,R,xe)}break;case 5:var G=l.return;try{Xp(l)}catch(xe){jn(l,G,xe)}}}catch(xe){jn(l,l.return,xe)}if(l===s){yt=null;break}var he=l.sibling;if(he!==null){he.return=l.return,yt=he;break}yt=l.return}}var Zw=Math.ceil,Dh=B.ReactCurrentDispatcher,tm=B.ReactCurrentOwner,Cs=B.ReactCurrentBatchConfig,_r=0,wi=null,Qn=null,Fi=0,os=0,wu=es(0),oi=0,jd=null,jc=0,Wh=0,rm=0,Ed=null,Fo=null,nm=0,Su=1/0,il=null,$h=!1,im=null,Bl=null,Uh=!1,Fl=null,qh=0,Id=0,om=null,Hh=-1,Gh=0;function wo(){return(_r&6)!==0?jr():Hh!==-1?Hh:Hh=jr()}function zl(s){return(s.mode&1)===0?1:(_r&2)!==0&&Fi!==0?Fi&-Fi:xn.transition!==null?(Gh===0&&(Gh=za()),Gh):(s=or,s!==0||(s=window.event,s=s===void 0?16:Jo(s.type)),s)}function Xs(s,l,d,y){if(50<Id)throw Id=0,om=null,Error(t(185));Ls(s,d,y),((_r&2)===0||s!==wi)&&(s===wi&&((_r&2)===0&&(Wh|=d),oi===4&&Ol(s,Fi)),zo(s,y),d===1&&_r===0&&(l.mode&1)===0&&(Su=jr()+500,Tc&&L()))}function zo(s,l){var d=s.callbackNode;zr(s,l);var y=Ln(s,s===wi?Fi:0);if(y===0)d!==null&&Uo(d),s.callbackNode=null,s.callbackPriority=0;else if(l=y&-y,s.callbackPriority!==l){if(d!=null&&Uo(d),l===1)s.tag===0?k(B1.bind(null,s)):x(B1.bind(null,s)),Lp(function(){(_r&6)===0&&L()}),d=null;else{switch(ti(y)){case 1:d=Ps;break;case 4:d=ci;break;case 16:d=Ho;break;case 536870912:d=ds;break;default:d=Ho}d=$1(d,L1.bind(null,s))}s.callbackPriority=l,s.callbackNode=d}}function L1(s,l){if(Hh=-1,Gh=0,(_r&6)!==0)throw Error(t(327));var d=s.callbackNode;if(_u()&&s.callbackNode!==d)return null;var y=Ln(s,s===wi?Fi:0);if(y===0)return null;if((y&30)!==0||(y&s.expiredLanes)!==0||l)l=Kh(s,y);else{l=y;var T=_r;_r|=2;var R=z1();(wi!==s||Fi!==l)&&(il=null,Su=jr()+500,Ic(s,l));do try{rS();break}catch(he){F1(s,he)}while(!0);wr(),Dh.current=R,_r=T,Qn!==null?l=0:(wi=null,Fi=0,l=oi)}if(l!==0){if(l===2&&(T=Ns(s),T!==0&&(y=T,l=sm(s,T))),l===1)throw d=jd,Ic(s,0),Ol(s,y),zo(s,jr()),d;if(l===6)Ol(s,y);else{if(T=s.current.alternate,(y&30)===0&&!eS(T)&&(l=Kh(s,y),l===2&&(R=Ns(s),R!==0&&(y=R,l=sm(s,R))),l===1))throw d=jd,Ic(s,0),Ol(s,y),zo(s,jr()),d;switch(s.finishedWork=T,s.finishedLanes=y,l){case 0:case 1:throw Error(t(345));case 2:Rc(s,Fo,il);break;case 3:if(Ol(s,y),(y&130023424)===y&&(l=nm+500-jr(),10<l)){if(Ln(s,0)!==0)break;if(T=s.suspendedLanes,(T&y)!==y){wo(),s.pingedLanes|=s.suspendedLanes&T;break}s.timeoutHandle=yd(Rc.bind(null,s,Fo,il),l);break}Rc(s,Fo,il);break;case 4:if(Ol(s,y),(y&4194240)===y)break;for(l=s.eventTimes,T=-1;0<y;){var G=31-Hn(y);R=1<<G,G=l[G],G>T&&(T=G),y&=~R}if(y=T,y=jr()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*Zw(y/1960))-y,10<y){s.timeoutHandle=yd(Rc.bind(null,s,Fo,il),y);break}Rc(s,Fo,il);break;case 5:Rc(s,Fo,il);break;default:throw Error(t(329))}}}return zo(s,jr()),s.callbackNode===d?L1.bind(null,s):null}function sm(s,l){var d=Ed;return s.current.memoizedState.isDehydrated&&(Ic(s,l).flags|=256),s=Kh(s,l),s!==2&&(l=Fo,Fo=d,l!==null&&am(l)),s}function am(s){Fo===null?Fo=s:Fo.push.apply(Fo,s)}function eS(s){for(var l=s;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var y=0;y<d.length;y++){var T=d[y],R=T.getSnapshot;T=T.value;try{if(!ln(R(),T))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ol(s,l){for(l&=~rm,l&=~Wh,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var d=31-Hn(l),y=1<<d;s[d]=-1,l&=~y}}function B1(s){if((_r&6)!==0)throw Error(t(327));_u();var l=Ln(s,0);if((l&1)===0)return zo(s,jr()),null;var d=Kh(s,l);if(s.tag!==0&&d===2){var y=Ns(s);y!==0&&(l=y,d=sm(s,y))}if(d===1)throw d=jd,Ic(s,0),Ol(s,l),zo(s,jr()),d;if(d===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,Rc(s,Fo,il),zo(s,jr()),null}function lm(s,l){var d=_r;_r|=1;try{return s(l)}finally{_r=d,_r===0&&(Su=jr()+500,Tc&&L())}}function Ec(s){Fl!==null&&Fl.tag===0&&(_r&6)===0&&_u();var l=_r;_r|=1;var d=Cs.transition,y=or;try{if(Cs.transition=null,or=1,s)return s()}finally{or=y,Cs.transition=d,_r=l,(_r&6)===0&&L()}}function cm(){os=wu.current,Ir(wu)}function Ic(s,l){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,Ch(d)),Qn!==null)for(d=Qn.return;d!==null;){var y=d;switch(Le(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&cu();break;case 3:_s(),Ir(Yi),Ir(ni),_d();break;case 5:wd(y);break;case 4:_s();break;case 13:Ir(Jr);break;case 19:Ir(Jr);break;case 10:Zr(y.type._context);break;case 22:case 23:cm()}d=d.return}if(wi=s,Qn=s=Vl(s.current,null),Fi=os=l,oi=0,jd=null,rm=Wh=jc=0,Fo=Ed=null,Dr!==null){for(l=0;l<Dr.length;l++)if(d=Dr[l],y=d.interleaved,y!==null){d.interleaved=null;var T=y.next,R=d.pending;if(R!==null){var G=R.next;R.next=T,y.next=G}d.pending=y}Dr=null}return s}function F1(s,l){do{var d=Qn;try{if(wr(),uu.current=Bh,Rl){for(var y=en.memoizedState;y!==null;){var T=y.queue;T!==null&&(T.pending=null),y=y.next}Rl=!1}if(Ts=0,Sn=kn=en=null,Gs=!1,Pl=0,tm.current=null,d===null||d.return===null){oi=1,jd=l,Qn=null;break}e:{var R=s,G=d.return,he=d,xe=l;if(l=Fi,he.flags|=32768,xe!==null&&typeof xe=="object"&&typeof xe.then=="function"){var ze=xe,et=he,rt=et.tag;if((et.mode&1)===0&&(rt===0||rt===11||rt===15)){var Ze=et.alternate;Ze?(et.updateQueue=Ze.updateQueue,et.memoizedState=Ze.memoizedState,et.lanes=Ze.lanes):(et.updateQueue=null,et.memoizedState=null)}var dt=a1(G);if(dt!==null){dt.flags&=-257,l1(dt,G,he,R,l),dt.mode&1&&s1(R,ze,l),l=dt,xe=ze;var St=l.updateQueue;if(St===null){var Ct=new Set;Ct.add(xe),l.updateQueue=Ct}else St.add(xe);break e}else{if((l&1)===0){s1(R,ze,l),um();break e}xe=Error(t(426))}}else if(qe&&he.mode&1){var Mn=a1(G);if(Mn!==null){(Mn.flags&65536)===0&&(Mn.flags|=256),l1(Mn,G,he,R,l),st(vu(xe,he));break e}}R=xe=vu(xe,he),oi!==4&&(oi=2),Ed===null?Ed=[R]:Ed.push(R),R=G;do{switch(R.tag){case 3:R.flags|=65536,l&=-l,R.lanes|=l;var Ne=i1(R,xe,l);$r(R,Ne);break e;case 1:he=xe;var Ae=R.type,Fe=R.stateNode;if((R.flags&128)===0&&(typeof Ae.getDerivedStateFromError=="function"||Fe!==null&&typeof Fe.componentDidCatch=="function"&&(Bl===null||!Bl.has(Fe)))){R.flags|=65536,l&=-l,R.lanes|=l;var it=o1(R,he,l);$r(R,it);break e}}R=R.return}while(R!==null)}V1(d)}catch(Et){l=Et,Qn===d&&d!==null&&(Qn=d=d.return);continue}break}while(!0)}function z1(){var s=Dh.current;return Dh.current=Bh,s===null?Bh:s}function um(){(oi===0||oi===3||oi===2)&&(oi=4),wi===null||(jc&268435455)===0&&(Wh&268435455)===0||Ol(wi,Fi)}function Kh(s,l){var d=_r;_r|=2;var y=z1();(wi!==s||Fi!==l)&&(il=null,Ic(s,l));do try{tS();break}catch(T){F1(s,T)}while(!0);if(wr(),_r=d,Dh.current=y,Qn!==null)throw Error(t(261));return wi=null,Fi=0,oi}function tS(){for(;Qn!==null;)O1(Qn)}function rS(){for(;Qn!==null&&!_o();)O1(Qn)}function O1(s){var l=W1(s.alternate,s,os);s.memoizedProps=s.pendingProps,l===null?V1(s):Qn=l,tm.current=null}function V1(s){var l=s;do{var d=l.alternate;if(s=l.return,(l.flags&32768)===0){if(d=Kw(d,l,os),d!==null){Qn=d;return}}else{if(d=Yw(d,l),d!==null){d.flags&=32767,Qn=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{oi=6,Qn=null;return}}if(l=l.sibling,l!==null){Qn=l;return}Qn=l=s}while(l!==null);oi===0&&(oi=5)}function Rc(s,l,d){var y=or,T=Cs.transition;try{Cs.transition=null,or=1,nS(s,l,d,y)}finally{Cs.transition=T,or=y}return null}function nS(s,l,d,y){do _u();while(Fl!==null);if((_r&6)!==0)throw Error(t(327));d=s.finishedWork;var T=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var R=d.lanes|d.childLanes;if(Ao(s,R),s===wi&&(Qn=wi=null,Fi=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Uh||(Uh=!0,$1(Ho,function(){return _u(),null})),R=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||R){R=Cs.transition,Cs.transition=null;var G=or;or=1;var he=_r;_r|=4,tm.current=null,Qw(s,d),E1(d,s),pc(Xa),Ko=!!Sc,Xa=Sc=null,s.current=d,Xw(d),qo(),_r=he,or=G,Cs.transition=R}else s.current=d;if(Uh&&(Uh=!1,Fl=s,qh=T),R=s.pendingLanes,R===0&&(Bl=null),Fa(d.stateNode),zo(s,jr()),l!==null)for(y=s.onRecoverableError,d=0;d<l.length;d++)T=l[d],y(T.value,{componentStack:T.stack,digest:T.digest});if($h)throw $h=!1,s=im,im=null,s;return(qh&1)!==0&&s.tag!==0&&_u(),R=s.pendingLanes,(R&1)!==0?s===om?Id++:(Id=0,om=s):Id=0,L(),null}function _u(){if(Fl!==null){var s=ti(qh),l=Cs.transition,d=or;try{if(Cs.transition=null,or=16>s?16:s,Fl===null)var y=!1;else{if(s=Fl,Fl=null,qh=0,(_r&6)!==0)throw Error(t(331));var T=_r;for(_r|=4,yt=s.current;yt!==null;){var R=yt,G=R.child;if((yt.flags&16)!==0){var he=R.deletions;if(he!==null){for(var xe=0;xe<he.length;xe++){var ze=he[xe];for(yt=ze;yt!==null;){var et=yt;switch(et.tag){case 0:case 11:case 15:kd(8,et,R)}var rt=et.child;if(rt!==null)rt.return=et,yt=rt;else for(;yt!==null;){et=yt;var Ze=et.sibling,dt=et.return;if(T1(et),et===ze){yt=null;break}if(Ze!==null){Ze.return=dt,yt=Ze;break}yt=dt}}}var St=R.alternate;if(St!==null){var Ct=St.child;if(Ct!==null){St.child=null;do{var Mn=Ct.sibling;Ct.sibling=null,Ct=Mn}while(Ct!==null)}}yt=R}}if((R.subtreeFlags&2064)!==0&&G!==null)G.return=R,yt=G;else e:for(;yt!==null;){if(R=yt,(R.flags&2048)!==0)switch(R.tag){case 0:case 11:case 15:kd(9,R,R.return)}var Ne=R.sibling;if(Ne!==null){Ne.return=R.return,yt=Ne;break e}yt=R.return}}var Ae=s.current;for(yt=Ae;yt!==null;){G=yt;var Fe=G.child;if((G.subtreeFlags&2064)!==0&&Fe!==null)Fe.return=G,yt=Fe;else e:for(G=Ae;yt!==null;){if(he=yt,(he.flags&2048)!==0)try{switch(he.tag){case 0:case 11:case 15:Mh(9,he)}}catch(Et){jn(he,he.return,Et)}if(he===G){yt=null;break e}var it=he.sibling;if(it!==null){it.return=he.return,yt=it;break e}yt=he.return}}if(_r=T,L(),ui&&typeof ui.onPostCommitFiberRoot=="function")try{ui.onPostCommitFiberRoot(hs,s)}catch{}y=!0}return y}finally{or=d,Cs.transition=l}}return!1}function M1(s,l,d){l=vu(d,l),l=i1(s,l,1),s=bn(s,l,1),l=wo(),s!==null&&(Ls(s,1,l),zo(s,l))}function jn(s,l,d){if(s.tag===3)M1(s,s,d);else for(;l!==null;){if(l.tag===3){M1(l,s,d);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Bl===null||!Bl.has(y))){s=vu(d,s),s=o1(l,s,1),l=bn(l,s,1),s=wo(),l!==null&&(Ls(l,1,s),zo(l,s));break}}l=l.return}}function iS(s,l,d){var y=s.pingCache;y!==null&&y.delete(l),l=wo(),s.pingedLanes|=s.suspendedLanes&d,wi===s&&(Fi&d)===d&&(oi===4||oi===3&&(Fi&130023424)===Fi&&500>jr()-nm?Ic(s,0):rm|=d),zo(s,l)}function D1(s,l){l===0&&((s.mode&1)===0?l=1:(l=di,di<<=1,(di&130023424)===0&&(di=4194304)));var d=wo();s=Wr(s,l),s!==null&&(Ls(s,l,d),zo(s,d))}function oS(s){var l=s.memoizedState,d=0;l!==null&&(d=l.retryLane),D1(s,d)}function sS(s,l){var d=0;switch(s.tag){case 13:var y=s.stateNode,T=s.memoizedState;T!==null&&(d=T.retryLane);break;case 19:y=s.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(l),D1(s,d)}var W1;W1=function(s,l,d){if(s!==null)if(s.memoizedProps!==l.pendingProps||Yi.current)Bo=!0;else{if((s.lanes&d)===0&&(l.flags&128)===0)return Bo=!1,Gw(s,l,d);Bo=(s.flags&131072)!==0}else Bo=!1,qe&&(l.flags&1048576)!==0&&Re(l,Z,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;Oh(s,l),s=l.pendingProps;var T=El(l,ni.current);dn(l,d),T=Ac(null,l,y,s,T,d);var R=As();return l.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Ji(y)?(R=!0,tl(l)):R=!1,l.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,ii(l),T.updater=Fh,l.stateNode=T,T._reactInternals=l,Dp(l,y,s,d),l=qp(null,l,y,!0,R,d)):(l.tag=0,qe&&R&&We(l),bo(null,l,T,d),l=l.child),l;case 16:y=l.elementType;e:{switch(Oh(s,l),s=l.pendingProps,T=y._init,y=T(y._payload),l.type=y,T=l.tag=lS(y),s=Ys(y,s),T){case 0:l=Up(null,l,y,s,d);break e;case 1:l=p1(null,l,y,s,d);break e;case 11:l=c1(null,l,y,s,d);break e;case 14:l=u1(null,l,y,Ys(y.type,s),d);break e}throw Error(t(306,y,""))}return l;case 0:return y=l.type,T=l.pendingProps,T=l.elementType===y?T:Ys(y,T),Up(s,l,y,T,d);case 1:return y=l.type,T=l.pendingProps,T=l.elementType===y?T:Ys(y,T),p1(s,l,y,T,d);case 3:e:{if(m1(l),s===null)throw Error(t(387));y=l.pendingProps,R=l.memoizedState,T=R.element,Qi(s,l),bi(l,y,null,d);var G=l.memoizedState;if(y=G.element,R.isDehydrated)if(R={element:y,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},l.updateQueue.baseState=R,l.memoizedState=R,l.flags&256){T=vu(Error(t(423)),l),l=g1(s,l,y,d,T);break e}else if(y!==T){T=vu(Error(t(424)),l),l=g1(s,l,y,d,T);break e}else for(Me=Li(l.stateNode.containerInfo.firstChild),Ve=l,qe=!0,Ge=null,d=rn(l,null,y,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(mt(),y===T){l=nl(s,l,d);break e}bo(s,l,y,d)}l=l.child}return l;case 5:return Ih(l),s===null&&vt(l),y=l.type,T=l.pendingProps,R=s!==null?s.memoizedProps:null,G=T.children,gd(y,T)?G=null:R!==null&&gd(y,R)&&(l.flags|=32),f1(s,l),bo(s,l,G,d),l.child;case 6:return s===null&&vt(l),null;case 13:return y1(s,l,d);case 4:return Il(l,l.stateNode.containerInfo),y=l.pendingProps,s===null?l.child=An(l,null,y,d):bo(s,l,y,d),l.child;case 11:return y=l.type,T=l.pendingProps,T=l.elementType===y?T:Ys(y,T),c1(s,l,y,T,d);case 7:return bo(s,l,l.pendingProps,d),l.child;case 8:return bo(s,l,l.pendingProps.children,d),l.child;case 12:return bo(s,l,l.pendingProps.children,d),l.child;case 10:e:{if(y=l.type._context,T=l.pendingProps,R=l.memoizedProps,G=T.value,Pr(On,y._currentValue),y._currentValue=G,R!==null)if(ln(R.value,G)){if(R.children===T.children&&!Yi.current){l=nl(s,l,d);break e}}else for(R=l.child,R!==null&&(R.return=l);R!==null;){var he=R.dependencies;if(he!==null){G=R.child;for(var xe=he.firstContext;xe!==null;){if(xe.context===y){if(R.tag===1){xe=vn(-1,d&-d),xe.tag=2;var ze=R.updateQueue;if(ze!==null){ze=ze.shared;var et=ze.pending;et===null?xe.next=xe:(xe.next=et.next,et.next=xe),ze.pending=xe}}R.lanes|=d,xe=R.alternate,xe!==null&&(xe.lanes|=d),Sr(R.return,d,l),he.lanes|=d;break}xe=xe.next}}else if(R.tag===10)G=R.type===l.type?null:R.child;else if(R.tag===18){if(G=R.return,G===null)throw Error(t(341));G.lanes|=d,he=G.alternate,he!==null&&(he.lanes|=d),Sr(G,d,l),G=R.sibling}else G=R.child;if(G!==null)G.return=R;else for(G=R;G!==null;){if(G===l){G=null;break}if(R=G.sibling,R!==null){R.return=G.return,G=R;break}G=G.return}R=G}bo(s,l,T.children,d),l=l.child}return l;case 9:return T=l.type,y=l.pendingProps.children,dn(l,d),T=hn(T),y=y(T),l.flags|=1,bo(s,l,y,d),l.child;case 14:return y=l.type,T=Ys(y,l.pendingProps),T=Ys(y.type,T),u1(s,l,y,T,d);case 15:return d1(s,l,l.type,l.pendingProps,d);case 17:return y=l.type,T=l.pendingProps,T=l.elementType===y?T:Ys(y,T),Oh(s,l),l.tag=1,Ji(y)?(s=!0,tl(l)):s=!1,dn(l,d),r1(l,y,T),Dp(l,y,T,d),qp(null,l,y,!0,s,d);case 19:return v1(s,l,d);case 22:return h1(s,l,d)}throw Error(t(156,l.tag))};function $1(s,l){return us(s,l)}function aS(s,l,d,y){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ks(s,l,d,y){return new aS(s,l,d,y)}function dm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function lS(s){if(typeof s=="function")return dm(s)?1:0;if(s!=null){if(s=s.$$typeof,s===S)return 11;if(s===le)return 14}return 2}function Vl(s,l){var d=s.alternate;return d===null?(d=ks(s.tag,l,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=l,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,l=s.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function Yh(s,l,d,y,T,R){var G=2;if(y=s,typeof s=="function")dm(s)&&(G=1);else if(typeof s=="string")G=5;else e:switch(s){case U:return Pc(d.children,T,R,l);case C:G=8,T|=8;break;case w:return s=ks(12,d,l,T|2),s.elementType=w,s.lanes=R,s;case z:return s=ks(13,d,l,T),s.elementType=z,s.lanes=R,s;case W:return s=ks(19,d,l,T),s.elementType=W,s.lanes=R,s;case de:return Jh(d,T,R,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case O:G=10;break e;case P:G=9;break e;case S:G=11;break e;case le:G=14;break e;case ve:G=16,y=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return l=ks(G,d,l,T),l.elementType=s,l.type=y,l.lanes=R,l}function Pc(s,l,d,y){return s=ks(7,s,y,l),s.lanes=d,s}function Jh(s,l,d,y){return s=ks(22,s,y,l),s.elementType=de,s.lanes=d,s.stateNode={isHidden:!1},s}function hm(s,l,d){return s=ks(6,s,null,l),s.lanes=d,s}function fm(s,l,d){return l=ks(4,s.children!==null?s.children:[],s.key,l),l.lanes=d,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function cS(s,l,d,y,T){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oa(0),this.expirationTimes=Oa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oa(0),this.identifierPrefix=y,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function pm(s,l,d,y,T,R,G,he,xe){return s=new cS(s,l,d,he,xe),l===1?(l=1,R===!0&&(l|=8)):l=0,R=ks(3,null,null,l),s.current=R,R.stateNode=s,R.memoizedState={element:y,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},ii(R),s}function uS(s,l,d){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:se,key:y==null?null:""+y,children:s,containerInfo:l,implementation:d}}function U1(s){if(!s)return ba;s=s._reactInternals;e:{if(mn(s)!==s||s.tag!==1)throw Error(t(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Ji(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(s.tag===1){var d=s.type;if(Ji(d))return bd(s,d,l)}return l}function q1(s,l,d,y,T,R,G,he,xe){return s=pm(d,y,!0,s,T,R,G,he,xe),s.context=U1(null),d=s.current,y=wo(),T=zl(d),R=vn(y,T),R.callback=l??null,bn(d,R,T),s.current.lanes=T,Ls(s,T,y),zo(s,y),s}function Qh(s,l,d,y){var T=l.current,R=wo(),G=zl(T);return d=U1(d),l.context===null?l.context=d:l.pendingContext=d,l=vn(R,G),l.payload={element:s},y=y===void 0?null:y,y!==null&&(l.callback=y),s=bn(T,l,G),s!==null&&(Xs(s,T,G,R),vi(s,T,G)),G}function Xh(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function H1(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<l?d:l}}function mm(s,l){H1(s,l),(s=s.alternate)&&H1(s,l)}function dS(){return null}var G1=typeof reportError=="function"?reportError:function(s){console.error(s)};function gm(s){this._internalRoot=s}Zh.prototype.render=gm.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(t(409));Qh(s,l,null,null)},Zh.prototype.unmount=gm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Ec(function(){Qh(null,s,null,null)}),l[yi]=null}};function Zh(s){this._internalRoot=s}Zh.prototype.unstable_scheduleHydration=function(s){if(s){var l=Ma();s={blockedOn:null,target:s,priority:l};for(var d=0;d<Ii.length&&l!==0&&l<Ii[d].priority;d++);Ii.splice(d,0,s),d===0&&ua(s)}};function ym(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function ef(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function K1(){}function hS(s,l,d,y,T){if(T){if(typeof y=="function"){var R=y;y=function(){var ze=Xh(G);R.call(ze)}}var G=q1(l,y,s,0,null,!1,!1,"",K1);return s._reactRootContainer=G,s[yi]=G.current,Ja(s.nodeType===8?s.parentNode:s),Ec(),G}for(;T=s.lastChild;)s.removeChild(T);if(typeof y=="function"){var he=y;y=function(){var ze=Xh(xe);he.call(ze)}}var xe=pm(s,0,!1,null,null,!1,!1,"",K1);return s._reactRootContainer=xe,s[yi]=xe.current,Ja(s.nodeType===8?s.parentNode:s),Ec(function(){Qh(l,xe,d,y)}),xe}function tf(s,l,d,y,T){var R=d._reactRootContainer;if(R){var G=R;if(typeof T=="function"){var he=T;T=function(){var xe=Xh(G);he.call(xe)}}Qh(l,G,s,T)}else G=hS(d,l,s,T,y);return Xh(G)}Bs=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var d=lr(l.pendingLanes);d!==0&&(la(l,d|1),zo(l,jr()),(_r&6)===0&&(Su=jr()+500,L()))}break;case 13:Ec(function(){var y=Wr(s,1);if(y!==null){var T=wo();Xs(y,s,1,T)}}),mm(s,1)}},ca=function(s){if(s.tag===13){var l=Wr(s,134217728);if(l!==null){var d=wo();Xs(l,s,134217728,d)}mm(s,134217728)}},Va=function(s){if(s.tag===13){var l=zl(s),d=Wr(s,l);if(d!==null){var y=wo();Xs(d,s,l,y)}mm(s,l)}},Ma=function(){return or},Fs=function(s,l){var d=or;try{return or=s,l()}finally{or=d}},kr=function(s,l,d){switch(l){case"input":if(Ue(s,d),l=d.name,d.type==="radio"&&l!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var y=d[l];if(y!==s&&y.form===s.form){var T=_c(y);if(!T)throw Error(t(90));nt(y),Ue(y,T)}}}break;case"textarea":Tt(s,d);break;case"select":l=d.value,l!=null&&He(s,!!d.multiple,l,!1)}},Rn=lm,So=Ec;var fS={usingClientEntryPoint:!1,Events:[jl,Za,_c,ar,Mi,lm]},Rd={findFiberByHostInstance:va,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pS={bundleType:Rd.bundleType,version:Rd.version,rendererPackageName:Rd.rendererPackageName,rendererConfig:Rd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=lo(s),s===null?null:s.stateNode},findFiberByHostInstance:Rd.findFiberByHostInstance||dS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rf.isDisabled&&rf.supportsFiber)try{hs=rf.inject(pS),ui=rf}catch{}}return Oo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fS,Oo.createPortal=function(s,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ym(l))throw Error(t(200));return uS(s,l,null,d)},Oo.createRoot=function(s,l){if(!ym(s))throw Error(t(299));var d=!1,y="",T=G1;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),l=pm(s,1,!1,null,null,d,!1,y,T),s[yi]=l.current,Ja(s.nodeType===8?s.parentNode:s),new gm(l)},Oo.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=lo(l),s=s===null?null:s.stateNode,s},Oo.flushSync=function(s){return Ec(s)},Oo.hydrate=function(s,l,d){if(!ef(l))throw Error(t(200));return tf(null,s,l,!0,d)},Oo.hydrateRoot=function(s,l,d){if(!ym(s))throw Error(t(405));var y=d!=null&&d.hydratedSources||null,T=!1,R="",G=G1;if(d!=null&&(d.unstable_strictMode===!0&&(T=!0),d.identifierPrefix!==void 0&&(R=d.identifierPrefix),d.onRecoverableError!==void 0&&(G=d.onRecoverableError)),l=q1(l,null,s,1,d??null,T,!1,R,G),s[yi]=l.current,Ja(s),y)for(s=0;s<y.length;s++)d=y[s],T=d._getVersion,T=T(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,T]:l.mutableSourceEagerHydrationData.push(d,T);return new Zh(l)},Oo.render=function(s,l,d){if(!ef(l))throw Error(t(200));return tf(null,s,l,!1,d)},Oo.unmountComponentAtNode=function(s){if(!ef(s))throw Error(t(40));return s._reactRootContainer?(Ec(function(){tf(null,null,s,!1,function(){s._reactRootContainer=null,s[yi]=null})}),!0):!1},Oo.unstable_batchedUpdates=lm,Oo.unstable_renderSubtreeIntoContainer=function(s,l,d,y){if(!ef(d))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return tf(s,l,d,!1,y)},Oo.version="18.3.1-next-f1338f8080-20240426",Oo}var r5;function TS(){if(r5)return bm.exports;r5=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),bm.exports=_S(),bm.exports}var n5;function AS(){if(n5)return nf;n5=1;var r=TS();return nf.createRoot=r.createRoot,nf.hydrateRoot=r.hydrateRoot,nf}var CS=AS();const kS=Jy(CS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ES=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),i5=r=>{const e=ES(r);return e.charAt(0).toUpperCase()+e.slice(1)},Qy=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),IS=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=be.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:o="",children:a,iconNode:c,...u},f)=>be.createElement("svg",{ref:f,...RS,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:Qy("lucide",o),...!a&&!IS(u)&&{"aria-hidden":"true"},...u},[...c.map(([h,g])=>be.createElement(h,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=(r,e)=>{const t=be.forwardRef(({className:n,...o},a)=>be.createElement(PS,{ref:a,iconNode:e,className:Qy(`lucide-${jS(i5(r))}`,`lucide-${r}`,n),...o}));return t.displayName=i5(r),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],LS=Qt("bell",NS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],ap=Qt("briefcase",BS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Xy=Qt("building",FS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M17 19a1 1 0 0 1-1-1v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a1 1 0 0 1-1 1z",key:"trhst0"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M19 14V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V10",key:"1mo9zo"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M4 10a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2z",key:"1dd30t"}],["path",{d:"M7 5V3",key:"1t1388"}]],Zy=Qt("cable",zS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Kd=Qt("calculator",OS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],r0=Qt("calendar",VS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ex=Qt("chart-column",MS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],n0=Qt("chevron-down",DS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],$S=Qt("chevron-left",WS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],qS=Qt("chevron-right",US);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],lp=Qt("circle-alert",HS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],In=Qt("circle-check-big",GS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],tx=Qt("circle",KS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$0=Qt("clock",YS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],rx=Qt("corner-down-right",JS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],U0=Qt("dollar-sign",QS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],nx=Qt("file-down",XS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],q0=Qt("file-text",ZS);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],ix=Qt("gauge",e3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ox=Qt("globe",t3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],sx=Qt("house",r3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Is=Qt("info",n3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],ax=Qt("lightbulb",i3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],s3=Qt("lock",o3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],l3=Qt("log-out",a3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],o5=Qt("mail",c3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],lx=Qt("map-pin",u3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],h3=Qt("menu",d3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M3 20h4.5a.5.5 0 0 0 .5-.5v-.282a.52.52 0 0 0-.247-.437 8 8 0 1 1 8.494-.001.52.52 0 0 0-.247.438v.282a.5.5 0 0 0 .5.5H21",key:"1x94xo"}]],cx=Qt("omega",f3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ux=Qt("package",p3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],dx=Qt("plug",m3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Oc=Qt("plus",g3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],hx=Qt("radio",y3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],v3=Qt("search",x3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fx=Qt("settings",b3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],S3=Qt("shield",w3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}],["line",{x1:"12",x2:"12",y1:"16",y2:"16",key:"aqc6ln"}],["line",{x1:"12",x2:"12",y1:"8",y2:"8",key:"1mkcni"}]],px=Qt("square-divide",_3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],mx=Qt("square-pen",T3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"M4 4v16",key:"6qkkli"}],["path",{d:"M9 4v16",key:"81ygyz"}],["path",{d:"M14 4v16",key:"12vmem"}]],gx=Qt("tally-3",A3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],yx=Qt("target",C3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Vc=Qt("trash-2",k3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],xx=Qt("trending-down",j3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],I3=Qt("trending-up",E3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Yc=Qt("triangle-alert",R3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]],vx=Qt("triangle",P3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Of=Qt("user",N3);function L3({onSelectCalculator:r,isDarkMode:e}){const[t,n]=be.useState(""),o=[{name:"Power Calculations",calculators:[{id:"voltage-drop",name:"Voltage Drop",icon:xx,keywords:"voltage drop vd wire circuit"},{id:"ohms-law",name:"Ohm's Law",icon:px,keywords:"ohms law voltage current resistance power series parallel circuit"},{id:"reactance-impedance",name:"Reactance",icon:cx,keywords:"reactance impedance xl xc capacitive inductive resonance frequency ac circuit"},{id:"power-factor",name:"Power Factor",icon:yx,keywords:"power factor correction pf capacitor kvar cos phi efficiency demand charge penalty savings"},{id:"power-triangle",name:"Power Triangle",icon:vx,keywords:"power triangle kva kw kvar apparent real reactive power factor angle phase"},{id:"three-phase-power",name:"Three-Phase",icon:gx,keywords:"three phase power 3 phase current voltage kw kva motor industrial commercial wye delta line"}]},{name:"Sizing & Rating",calculators:[{id:"ampacity",name:"Ampacity",icon:Zy,keywords:"ampacity current rating 310 temperature"},{id:"load-calculations",name:"Load Calculations",icon:ex,keywords:"load calculation service size residential commercial demand"},{id:"service-entrance",name:"Service Entrance",icon:Xy,keywords:"service entrance sizing panel main 230"},{id:"grounding-bonding",name:"Grounding & Bonding",icon:ox,keywords:"grounding bonding ground electrode equipment gec egc jumper 250"}]},{name:"Equipment",calculators:[{id:"motor-calculations",name:"Motors",icon:fx,keywords:"motor flc protection starter 430"},{id:"transformer-sizing",name:"Transformers",icon:hx,keywords:"transformer kva sizing current primary secondary 450"},{id:"vfd-sizing",name:"VFD Sizing",icon:ix,keywords:"vfd variable frequency drive motor speed control inverter ac drive"}]},{name:"Installation",calculators:[{id:"box-fill",name:"Box Fill",icon:ux,keywords:"box fill junction cubic inch volume 314"},{id:"conduit-fill",name:"Conduit Fill",icon:tx,keywords:"conduit fill emt pvc rigid raceway chapter 9"},{id:"conduit-bending",name:"Conduit Bending",icon:rx,keywords:"conduit bending offset saddle stub bend emt"},{id:"receptacles",name:"Receptacles",icon:dx,keywords:"receptacle outlet gfci plug socket 210.52 counter kitchen bathroom wall spacing"},{id:"lighting",name:"Lighting",icon:ax,keywords:"lighting lumens foot candles fixtures spacing watts illumination"}]}],a={"Power Calculations":"#3b82f6","Sizing & Rating":"#10b981",Equipment:"#f59e0b",Installation:"#8b5cf6",Safety:"#ef4444"},c={mainBg:e?"#000000":"#f3f4f6",cardText:e?"#ffffff":"#111827",inputBg:e?"#0a0a0a":"#ffffff",inputBorder:e?"#1a1a1a":"#d1d5db",inputText:e?"#ffffff":"#111827",placeholderText:e?"#666666":"#6b7280",categoryHeaderText:e?"#cccccc":"#4b5563"},u=o.flatMap(h=>h.calculators.map(g=>({...g,category:h.name}))),f=t?u.filter(h=>{const g=t.toLowerCase();return h.name.toLowerCase().includes(g)||h.keywords.toLowerCase().includes(g)}):null;return i.jsx("div",{style:{minHeight:"100vh",background:c.mainBg,padding:"0"},children:i.jsx("div",{style:{maxWidth:"64rem",margin:"0 auto"},children:i.jsxs("div",{style:{padding:"1.25rem",boxSizing:"border-box"},children:[i.jsxs("div",{style:{marginBottom:"1.5rem",position:"relative"},children:[i.jsx(v3,{size:20,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:c.placeholderText}}),i.jsx("input",{type:"text",placeholder:"Search calculators...",value:t,onChange:h=>n(h.target.value),style:{width:"100%",padding:"0.875rem 1rem 0.875rem 3rem",fontSize:"0.9375rem",border:`1px solid ${c.inputBorder}`,borderRadius:"12px",backgroundColor:c.inputBg,color:c.inputText,boxSizing:"border-box",outline:"none",transition:"all 0.2s ease"},onFocus:h=>{h.target.style.borderColor="#3b82f6",h.target.style.backgroundColor=e?"#000000":"#ffffff",h.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:h=>{h.target.style.borderColor=c.inputBorder,h.target.style.backgroundColor=c.inputBg,h.target.style.boxShadow="none"}})]}),f?i.jsxs("div",{children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:c.placeholderText,marginBottom:"1rem",paddingLeft:"0"},children:[f.length," ",f.length===1?"result":"results"," found"]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.25rem",marginBottom:"1rem",boxSizing:"border-box",width:"100%"},children:f.length>0?f.map(h=>{const g=h.icon,b=a[h.category]||"#3b82f6";return i.jsxs("div",{onClick:()=>{console.log("Clicked calculator:",h.id),r(h.id)},style:{cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[i.jsx("button",{style:{backgroundColor:e?"#1a1a1a":"#ffffff",border:`2px solid ${e?"#2a2a2a":"#d1d5db"}`,borderRadius:"12px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"70px",height:"70px",minWidth:"70px",minHeight:"70px",maxWidth:"70px",maxHeight:"70px",flexShrink:0,boxShadow:e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseOver:A=>{A.currentTarget.style.transform="translateY(-4px) scale(1.05)",A.currentTarget.style.backgroundColor=e?"#252525":"#ffffff",A.currentTarget.style.borderColor=b,A.currentTarget.style.boxShadow=`0 8px 16px ${b}30, 0 4px 6px ${b}20`},onMouseOut:A=>{A.currentTarget.style.transform="translateY(0) scale(1)",A.currentTarget.style.backgroundColor=e?"#1a1a1a":"#ffffff",A.currentTarget.style.borderColor=e?"#2a2a2a":"#d1d5db",A.currentTarget.style.boxShadow=e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)"},onMouseDown:A=>{A.currentTarget.style.transform="translateY(-2px) scale(0.95)"},onMouseUp:A=>{A.currentTarget.style.transform="translateY(-4px) scale(1.05)"},children:i.jsx(g,{size:28,strokeWidth:2,color:b})}),i.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",textAlign:"center",lineHeight:"1.2",color:c.cardText,maxWidth:"90px"},children:h.name})]},h.id)}):i.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem 1rem",color:c.placeholderText,fontSize:"0.9375rem"},children:"No calculators found"})})]}):o.map((h,g)=>i.jsxs("div",{style:{marginBottom:"2rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem",paddingLeft:"0"},children:[i.jsx("div",{style:{width:"4px",height:"20px",backgroundColor:a[h.name],borderRadius:"2px"}}),i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:c.categoryHeaderText,margin:0,letterSpacing:"-0.01em"},children:h.name})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.25rem",marginBottom:g<o.length-1?"1.5rem":"1rem",boxSizing:"border-box",width:"100%"},children:h.calculators.map(b=>{const A=b.icon,v=a[h.name];return i.jsxs("div",{onClick:()=>{console.log("Clicked calculator:",b.id),r(b.id)},style:{cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[i.jsx("button",{style:{backgroundColor:e?"#1a1a1a":"#ffffff",border:`2px solid ${e?"#2a2a2a":"#d1d5db"}`,borderRadius:"12px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"70px",height:"70px",minWidth:"70px",minHeight:"70px",maxWidth:"70px",maxHeight:"70px",flexShrink:0,boxShadow:e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseOver:F=>{F.currentTarget.style.transform="translateY(-4px) scale(1.05)",F.currentTarget.style.backgroundColor=e?"#252525":"#ffffff",F.currentTarget.style.borderColor=v,F.currentTarget.style.boxShadow=`0 8px 16px ${v}30, 0 4px 6px ${v}20`},onMouseOut:F=>{F.currentTarget.style.transform="translateY(0) scale(1)",F.currentTarget.style.backgroundColor=e?"#1a1a1a":"#ffffff",F.currentTarget.style.borderColor=e?"#2a2a2a":"#d1d5db",F.currentTarget.style.boxShadow=e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)"},onMouseDown:F=>{F.currentTarget.style.transform="translateY(-2px) scale(0.95)"},onMouseUp:F=>{F.currentTarget.style.transform="translateY(-4px) scale(1.05)"},children:i.jsx(A,{size:28,strokeWidth:2,color:v})}),i.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",textAlign:"center",lineHeight:"1.2",color:c.cardText,maxWidth:"90px"},children:b.name})]},b.id)})})]},h.name))]})})})}const B3="modulepreload",F3=function(r){return"/electrician-toolkit/"+r},s5={},wf=function(e,t,n){let o=Promise.resolve();if(t&&t.length>0){let c=function(h){return Promise.all(h.map(g=>Promise.resolve(g).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=c(t.map(h=>{if(h=F3(h),h in s5)return;s5[h]=!0;const g=h.endsWith(".css"),b=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${b}`))return;const A=document.createElement("link");if(A.rel=g?"stylesheet":B3,g||(A.as="script"),A.crossOrigin="",A.href=h,f&&A.setAttribute("nonce",f),document.head.appendChild(A),g)return new Promise((v,F)=>{A.addEventListener("load",v),A.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return o.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};function qr(r){"@babel/helpers - typeof";return qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(r)}var ra=Uint8Array,as=Uint16Array,H0=Int32Array,G0=new ra([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),K0=new ra([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a5=new ra([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bx=function(r,e){for(var t=new as(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var o=new H0(t[30]),n=1;n<30;++n)for(var a=t[n];a<t[n+1];++a)o[a]=a-t[n]<<5|n;return{b:t,r:o}},wx=bx(G0,2),z3=wx.b,i0=wx.r;z3[28]=258,i0[258]=28;var O3=bx(K0,0),l5=O3.r,o0=new as(32768);for(var on=0;on<32768;++on){var Dl=(on&43690)>>1|(on&21845)<<1;Dl=(Dl&52428)>>2|(Dl&13107)<<2,Dl=(Dl&61680)>>4|(Dl&3855)<<4,o0[on]=((Dl&65280)>>8|(Dl&255)<<8)>>1}var Md=(function(r,e,t){for(var n=r.length,o=0,a=new as(e);o<n;++o)r[o]&&++a[r[o]-1];var c=new as(e);for(o=1;o<e;++o)c[o]=c[o-1]+a[o-1]<<1;var u;if(t){u=new as(1<<e);var f=15-e;for(o=0;o<n;++o)if(r[o])for(var h=o<<4|r[o],g=e-r[o],b=c[r[o]-1]++<<g,A=b|(1<<g)-1;b<=A;++b)u[o0[b]>>f]=h}else for(u=new as(n),o=0;o<n;++o)r[o]&&(u[o]=o0[c[r[o]-1]++]>>15-r[o]);return u}),Mc=new ra(288);for(var on=0;on<144;++on)Mc[on]=8;for(var on=144;on<256;++on)Mc[on]=9;for(var on=256;on<280;++on)Mc[on]=7;for(var on=280;on<288;++on)Mc[on]=8;var Vf=new ra(32);for(var on=0;on<32;++on)Vf[on]=5;var V3=Md(Mc,9,0),M3=Md(Vf,5,0),Sx=function(r){return(r+7)/8|0},D3=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new ra(r.subarray(e,t))},ol=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},Nd=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},_m=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var o=t.length,a=t.slice();if(!o)return{t:Tx,l:0};if(o==1){var c=new ra(t[0].s+1);return c[t[0].s]=1,{t:c,l:1}}t.sort(function(X,se){return X.f-se.f}),t.push({s:-1,f:25001});var u=t[0],f=t[1],h=0,g=1,b=2;for(t[0]={s:-1,f:u.f+f.f,l:u,r:f};g!=o-1;)u=t[t[h].f<t[b].f?h++:b++],f=t[h!=g&&t[h].f<t[b].f?h++:b++],t[g++]={s:-1,f:u.f+f.f,l:u,r:f};for(var A=a[0].s,n=1;n<o;++n)a[n].s>A&&(A=a[n].s);var v=new as(A+1),F=s0(t[g-1],v,0);if(F>e){var n=0,E=0,N=F-e,j=1<<N;for(a.sort(function(se,U){return v[U.s]-v[se.s]||se.f-U.f});n<o;++n){var $=a[n].s;if(v[$]>e)E+=j-(1<<F-v[$]),v[$]=e;else break}for(E>>=N;E>0;){var V=a[n].s;v[V]<e?E-=1<<e-v[V]++-1:++n}for(;n>=0&&E;--n){var B=a[n].s;v[B]==e&&(--v[B],++E)}F=e}return{t:new ra(v),l:F}},s0=function(r,e,t){return r.s==-1?Math.max(s0(r.l,e,t+1),s0(r.r,e,t+1)):e[r.s]=t},c5=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new as(++e),n=0,o=r[0],a=1,c=function(f){t[n++]=f},u=1;u<=e;++u)if(r[u]==o&&u!=e)++a;else{if(!o&&a>2){for(;a>138;a-=138)c(32754);a>2&&(c(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(c(o),--a;a>6;a-=6)c(8304);a>2&&(c(a-3<<5|8208),a=0)}for(;a--;)c(o);a=1,o=r[u]}return{c:t.subarray(0,n),n:e}},Ld=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},_x=function(r,e,t){var n=t.length,o=Sx(e+2);r[o]=n&255,r[o+1]=n>>8,r[o+2]=r[o]^255,r[o+3]=r[o+1]^255;for(var a=0;a<n;++a)r[o+a+4]=t[a];return(o+4+n)*8},u5=function(r,e,t,n,o,a,c,u,f,h,g){ol(e,g++,t),++o[256];for(var b=_m(o,15),A=b.t,v=b.l,F=_m(a,15),E=F.t,N=F.l,j=c5(A),$=j.c,V=j.n,B=c5(E),X=B.c,se=B.n,U=new as(19),C=0;C<$.length;++C)++U[$[C]&31];for(var C=0;C<X.length;++C)++U[X[C]&31];for(var w=_m(U,7),O=w.t,P=w.l,S=19;S>4&&!O[a5[S-1]];--S);var z=h+5<<3,W=Ld(o,Mc)+Ld(a,Vf)+c,le=Ld(o,A)+Ld(a,E)+c+14+3*S+Ld(U,O)+2*U[16]+3*U[17]+7*U[18];if(f>=0&&z<=W&&z<=le)return _x(e,g,r.subarray(f,f+h));var ve,de,ce,we;if(ol(e,g,1+(le<W)),g+=2,le<W){ve=Md(A,v,0),de=A,ce=Md(E,N,0),we=E;var je=Md(O,P,0);ol(e,g,V-257),ol(e,g+5,se-1),ol(e,g+10,S-4),g+=14;for(var C=0;C<S;++C)ol(e,g+3*C,O[a5[C]]);g+=3*S;for(var ne=[$,X],D=0;D<2;++D)for(var Y=ne[D],C=0;C<Y.length;++C){var re=Y[C]&31;ol(e,g,je[re]),g+=O[re],re>15&&(ol(e,g,Y[C]>>5&127),g+=Y[C]>>12)}}else ve=V3,de=Mc,ce=M3,we=Vf;for(var C=0;C<u;++C){var ue=n[C];if(ue>255){var re=ue>>18&31;Nd(e,g,ve[re+257]),g+=de[re+257],re>7&&(ol(e,g,ue>>23&31),g+=G0[re]);var fe=ue&31;Nd(e,g,ce[fe]),g+=we[fe],fe>3&&(Nd(e,g,ue>>5&8191),g+=K0[fe])}else Nd(e,g,ve[ue]),g+=de[ue]}return Nd(e,g,ve[256]),g+de[256]},W3=new H0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Tx=new ra(0),$3=function(r,e,t,n,o,a){var c=a.z||r.length,u=new ra(n+c+5*(1+Math.ceil(c/7e3))+o),f=u.subarray(n,u.length-o),h=a.l,g=(a.r||0)&7;if(e){g&&(f[0]=a.r>>3);for(var b=W3[e-1],A=b>>13,v=b&8191,F=(1<<t)-1,E=a.p||new as(32768),N=a.h||new as(F+1),j=Math.ceil(t/3),$=2*j,V=function(pe){return(r[pe]^r[pe+1]<<j^r[pe+2]<<$)&F},B=new H0(25e3),X=new as(288),se=new as(32),U=0,C=0,w=a.i||0,O=0,P=a.w||0,S=0;w+2<c;++w){var z=V(w),W=w&32767,le=N[z];if(E[W]=le,N[z]=W,P<=w){var ve=c-w;if((U>7e3||O>24576)&&(ve>423||!h)){g=u5(r,f,0,B,X,se,C,O,S,w-S,g),O=U=C=0,S=w;for(var de=0;de<286;++de)X[de]=0;for(var de=0;de<30;++de)se[de]=0}var ce=2,we=0,je=v,ne=W-le&32767;if(ve>2&&z==V(w-ne))for(var D=Math.min(A,ve)-1,Y=Math.min(32767,w),re=Math.min(258,ve);ne<=Y&&--je&&W!=le;){if(r[w+ce]==r[w+ce-ne]){for(var ue=0;ue<re&&r[w+ue]==r[w+ue-ne];++ue);if(ue>ce){if(ce=ue,we=ne,ue>D)break;for(var fe=Math.min(ne,ue-2),Se=0,de=0;de<fe;++de){var Ee=w-ne+de&32767,ke=E[Ee],Oe=Ee-ke&32767;Oe>Se&&(Se=Oe,le=Ee)}}}W=le,le=E[W],ne+=W-le&32767}if(we){B[O++]=268435456|i0[ce]<<18|l5[we];var Ke=i0[ce]&31,nt=l5[we]&31;C+=G0[Ke]+K0[nt],++X[257+Ke],++se[nt],P=w+ce,++U}else B[O++]=r[w],++X[r[w]]}}for(w=Math.max(w,P);w<c;++w)B[O++]=r[w],++X[r[w]];g=u5(r,f,h,B,X,se,C,O,S,w-S,g),h||(a.r=g&7|f[g/8|0]<<3,g-=7,a.h=N,a.p=E,a.i=w,a.w=P)}else{for(var w=a.w||0;w<c+h;w+=65535){var _e=w+65535;_e>=c&&(f[g/8|0]=h,_e=c),g=_x(f,g+1,r.subarray(w,_e))}a.i=c}return D3(u,0,n+Sx(g)+o)},Ax=function(){var r=1,e=0;return{p:function(t){for(var n=r,o=e,a=t.length|0,c=0;c!=a;){for(var u=Math.min(c+2655,a);c<u;++c)o+=n+=t[c];n=(n&65535)+15*(n>>16),o=(o&65535)+15*(o>>16)}r=n,e=o},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},U3=function(r,e,t,n,o){if(!o&&(o={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),c=new ra(a.length+r.length);c.set(a),c.set(r,a.length),r=c,o.w=a.length}return $3(r,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,o)},Cx=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},q3=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var o=Ax();o.p(e.dictionary),Cx(r,2,o.d())}};function a0(r,e){e||(e={});var t=Ax();t.p(r);var n=U3(r,e,e.dictionary?6:2,4);return q3(n,e),Cx(n,n.length-4,t.d()),n}var H3=typeof TextDecoder<"u"&&new TextDecoder,G3=0;try{H3.decode(Tx,{stream:!0}),G3=1}catch{}function K3(r){if(Array.isArray(r))return r}function Y3(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,o,a,c,u=[],f=!0,h=!1;try{if(a=(t=t.call(r)).next,e!==0)for(;!(f=(n=a.call(t)).done)&&(u.push(n.value),u.length!==e);f=!0);}catch(g){h=!0,o=g}finally{try{if(!f&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(h)throw o}}return u}}function d5(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function J3(r,e){if(r){if(typeof r=="string")return d5(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d5(r,e):void 0}}function Q3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h5(r,e){return K3(r)||Y3(r,e)||J3(r,e)||Q3()}function f5(r,e="utf8"){return new TextDecoder(e).decode(r)}const X3=new TextEncoder;function Z3(r){return X3.encode(r)}const e_=1024*8,t_=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),Tm={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Y0{constructor(e=e_,t={}){Ur(this,"buffer");Ur(this,"byteLength");Ur(this,"byteOffset");Ur(this,"length");Ur(this,"offset");Ur(this,"lastWrittenByte");Ur(this,"littleEndian");Ur(this,"_data");Ur(this,"_mark");Ur(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const o=t.offset?t.offset>>>0:0,a=e.byteLength-o;let c=o;(ArrayBuffer.isView(e)||e instanceof Y0)&&(e.byteLength!==e.buffer.byteLength&&(c=e.byteOffset+o),e=e.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=c,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,c,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,o=new Uint8Array(n);o.set(new Uint8Array(this.buffer)),this.buffer=o.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const n=Tm[t].BYTES_PER_ELEMENT*e,o=this.byteOffset+this.offset,a=this.buffer.slice(o,o+n);if(this.littleEndian===t_&&t!=="uint8"&&t!=="int8"){const u=new Uint8Array(this.buffer.slice(o,o+n));u.reverse();const f=new Tm[t](u.buffer);return this.offset+=n,f.reverse(),f}const c=new Tm[t](a);return this.offset+=n,c}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(e=1){return f5(this.readBytes(e))}decodeText(e=1,t="utf8"){return f5(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(Z3(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Zu(r){let e=r.length;for(;--e>=0;)r[e]=0}const r_=3,n_=258,kx=29,i_=256,o_=i_+1+kx,jx=30,s_=512,a_=new Array((o_+2)*2);Zu(a_);const l_=new Array(jx*2);Zu(l_);const c_=new Array(s_);Zu(c_);const u_=new Array(n_-r_+1);Zu(u_);const d_=new Array(kx);Zu(d_);const h_=new Array(jx);Zu(h_);const f_=(r,e,t,n)=>{let o=r&65535|0,a=r>>>16&65535|0,c=0;for(;t!==0;){c=t>2e3?2e3:t,t-=c;do o=o+e[n++]|0,a=a+o|0;while(--c);o%=65521,a%=65521}return o|a<<16|0};var l0=f_;const p_=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},m_=new Uint32Array(p_()),g_=(r,e,t,n)=>{const o=m_,a=n+t;r^=-1;for(let c=n;c<a;c++)r=r>>>8^o[(r^e[c])&255];return r^-1};var Ta=g_,c0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ex={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const y_=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var x_=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)y_(t,n)&&(r[n]=t[n])}}return r},v_=r=>{let e=0;for(let n=0,o=r.length;n<o;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,o=0,a=r.length;n<a;n++){let c=r[n];t.set(c,o),o+=c.length}return t},Ix={assign:x_,flattenChunks:v_};let Rx=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Rx=!1}const Yd=new Uint8Array(256);for(let r=0;r<256;r++)Yd[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;Yd[254]=Yd[254]=1;var b_=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,o,a,c=r.length,u=0;for(o=0;o<c;o++)t=r.charCodeAt(o),(t&64512)===55296&&o+1<c&&(n=r.charCodeAt(o+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),o++)),u+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(u),a=0,o=0;a<u;o++)t=r.charCodeAt(o),(t&64512)===55296&&o+1<c&&(n=r.charCodeAt(o+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),o++)),t<128?e[a++]=t:t<2048?(e[a++]=192|t>>>6,e[a++]=128|t&63):t<65536?(e[a++]=224|t>>>12,e[a++]=128|t>>>6&63,e[a++]=128|t&63):(e[a++]=240|t>>>18,e[a++]=128|t>>>12&63,e[a++]=128|t>>>6&63,e[a++]=128|t&63);return e};const w_=(r,e)=>{if(e<65534&&r.subarray&&Rx)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var S_=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,o;const a=new Array(t*2);for(o=0,n=0;n<t;){let c=r[n++];if(c<128){a[o++]=c;continue}let u=Yd[c];if(u>4){a[o++]=65533,n+=u-1;continue}for(c&=u===2?31:u===3?15:7;u>1&&n<t;)c=c<<6|r[n++]&63,u--;if(u>1){a[o++]=65533;continue}c<65536?a[o++]=c:(c-=65536,a[o++]=55296|c>>10&1023,a[o++]=56320|c&1023)}return w_(a,o)},__=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+Yd[r[t]]>e?t:e},u0={string2buf:b_,buf2string:S_,utf8border:__};function T_(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var A_=T_;const of=16209,C_=16191;var k_=function(e,t){let n,o,a,c,u,f,h,g,b,A,v,F,E,N,j,$,V,B,X,se,U,C,w,O;const P=e.state;n=e.next_in,w=e.input,o=n+(e.avail_in-5),a=e.next_out,O=e.output,c=a-(t-e.avail_out),u=a+(e.avail_out-257),f=P.dmax,h=P.wsize,g=P.whave,b=P.wnext,A=P.window,v=P.hold,F=P.bits,E=P.lencode,N=P.distcode,j=(1<<P.lenbits)-1,$=(1<<P.distbits)-1;e:do{F<15&&(v+=w[n++]<<F,F+=8,v+=w[n++]<<F,F+=8),V=E[v&j];t:for(;;){if(B=V>>>24,v>>>=B,F-=B,B=V>>>16&255,B===0)O[a++]=V&65535;else if(B&16){X=V&65535,B&=15,B&&(F<B&&(v+=w[n++]<<F,F+=8),X+=v&(1<<B)-1,v>>>=B,F-=B),F<15&&(v+=w[n++]<<F,F+=8,v+=w[n++]<<F,F+=8),V=N[v&$];r:for(;;){if(B=V>>>24,v>>>=B,F-=B,B=V>>>16&255,B&16){if(se=V&65535,B&=15,F<B&&(v+=w[n++]<<F,F+=8,F<B&&(v+=w[n++]<<F,F+=8)),se+=v&(1<<B)-1,se>f){e.msg="invalid distance too far back",P.mode=of;break e}if(v>>>=B,F-=B,B=a-c,se>B){if(B=se-B,B>g&&P.sane){e.msg="invalid distance too far back",P.mode=of;break e}if(U=0,C=A,b===0){if(U+=h-B,B<X){X-=B;do O[a++]=A[U++];while(--B);U=a-se,C=O}}else if(b<B){if(U+=h+b-B,B-=b,B<X){X-=B;do O[a++]=A[U++];while(--B);if(U=0,b<X){B=b,X-=B;do O[a++]=A[U++];while(--B);U=a-se,C=O}}}else if(U+=b-B,B<X){X-=B;do O[a++]=A[U++];while(--B);U=a-se,C=O}for(;X>2;)O[a++]=C[U++],O[a++]=C[U++],O[a++]=C[U++],X-=3;X&&(O[a++]=C[U++],X>1&&(O[a++]=C[U++]))}else{U=a-se;do O[a++]=O[U++],O[a++]=O[U++],O[a++]=O[U++],X-=3;while(X>2);X&&(O[a++]=O[U++],X>1&&(O[a++]=O[U++]))}}else if((B&64)===0){V=N[(V&65535)+(v&(1<<B)-1)];continue r}else{e.msg="invalid distance code",P.mode=of;break e}break}}else if((B&64)===0){V=E[(V&65535)+(v&(1<<B)-1)];continue t}else if(B&32){P.mode=C_;break e}else{e.msg="invalid literal/length code",P.mode=of;break e}break}}while(n<o&&a<u);X=F>>3,n-=X,F-=X<<3,v&=(1<<F)-1,e.next_in=n,e.next_out=a,e.avail_in=n<o?5+(o-n):5-(n-o),e.avail_out=a<u?257+(u-a):257-(a-u),P.hold=v,P.bits=F};const Tu=15,p5=852,m5=592,g5=0,Am=1,y5=2,j_=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),E_=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),I_=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),R_=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),P_=(r,e,t,n,o,a,c,u)=>{const f=u.bits;let h=0,g=0,b=0,A=0,v=0,F=0,E=0,N=0,j=0,$=0,V,B,X,se,U,C=null,w;const O=new Uint16Array(Tu+1),P=new Uint16Array(Tu+1);let S=null,z,W,le;for(h=0;h<=Tu;h++)O[h]=0;for(g=0;g<n;g++)O[e[t+g]]++;for(v=f,A=Tu;A>=1&&O[A]===0;A--);if(v>A&&(v=A),A===0)return o[a++]=1<<24|64<<16|0,o[a++]=1<<24|64<<16|0,u.bits=1,0;for(b=1;b<A&&O[b]===0;b++);for(v<b&&(v=b),N=1,h=1;h<=Tu;h++)if(N<<=1,N-=O[h],N<0)return-1;if(N>0&&(r===g5||A!==1))return-1;for(P[1]=0,h=1;h<Tu;h++)P[h+1]=P[h]+O[h];for(g=0;g<n;g++)e[t+g]!==0&&(c[P[e[t+g]]++]=g);if(r===g5?(C=S=c,w=20):r===Am?(C=j_,S=E_,w=257):(C=I_,S=R_,w=0),$=0,g=0,h=b,U=a,F=v,E=0,X=-1,j=1<<v,se=j-1,r===Am&&j>p5||r===y5&&j>m5)return 1;for(;;){z=h-E,c[g]+1<w?(W=0,le=c[g]):c[g]>=w?(W=S[c[g]-w],le=C[c[g]-w]):(W=96,le=0),V=1<<h-E,B=1<<F,b=B;do B-=V,o[U+($>>E)+B]=z<<24|W<<16|le|0;while(B!==0);for(V=1<<h-1;$&V;)V>>=1;if(V!==0?($&=V-1,$+=V):$=0,g++,--O[h]===0){if(h===A)break;h=e[t+c[g]]}if(h>v&&($&se)!==X){for(E===0&&(E=v),U+=b,F=h-E,N=1<<F;F+E<A&&(N-=O[F+E],!(N<=0));)F++,N<<=1;if(j+=1<<F,r===Am&&j>p5||r===y5&&j>m5)return 1;X=$&se,o[X]=v<<24|F<<16|U-a|0}}return $!==0&&(o[U+$]=h-E<<24|64<<16|0),u.bits=v,0};var Dd=P_;const N_=0,Px=1,Nx=2,{Z_FINISH:x5,Z_BLOCK:L_,Z_TREES:sf,Z_OK:Dc,Z_STREAM_END:B_,Z_NEED_DICT:F_,Z_STREAM_ERROR:Rs,Z_DATA_ERROR:Lx,Z_MEM_ERROR:Bx,Z_BUF_ERROR:z_,Z_DEFLATED:v5}=Ex,cp=16180,b5=16181,w5=16182,S5=16183,_5=16184,T5=16185,A5=16186,C5=16187,k5=16188,j5=16189,Mf=16190,sl=16191,Cm=16192,E5=16193,km=16194,I5=16195,R5=16196,P5=16197,N5=16198,af=16199,lf=16200,L5=16201,B5=16202,F5=16203,z5=16204,O5=16205,jm=16206,V5=16207,M5=16208,fn=16209,Fx=16210,zx=16211,O_=852,V_=592,M_=15,D_=M_,D5=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function W_(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Jc=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<cp||e.mode>zx?1:0},Ox=r=>{if(Jc(r))return Rs;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=cp,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(O_),e.distcode=e.distdyn=new Int32Array(V_),e.sane=1,e.back=-1,Dc},Vx=r=>{if(Jc(r))return Rs;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,Ox(r)},Mx=(r,e)=>{let t;if(Jc(r))return Rs;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Rs:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,Vx(r))},Dx=(r,e)=>{if(!r)return Rs;const t=new W_;r.state=t,t.strm=r,t.window=null,t.mode=cp;const n=Mx(r,e);return n!==Dc&&(r.state=null),n},$_=r=>Dx(r,D_);let W5=!0,Em,Im;const U_=r=>{if(W5){Em=new Int32Array(512),Im=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(Dd(Px,r.lens,0,288,Em,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;Dd(Nx,r.lens,0,32,Im,0,r.work,{bits:5}),W5=!1}r.lencode=Em,r.lenbits=9,r.distcode=Im,r.distbits=5},Wx=(r,e,t,n)=>{let o;const a=r.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(e.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(o=a.wsize-a.wnext,o>n&&(o=n),a.window.set(e.subarray(t-n,t-n+o),a.wnext),n-=o,n?(a.window.set(e.subarray(t-n,t),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0},q_=(r,e)=>{let t,n,o,a,c,u,f,h,g,b,A,v,F,E,N=0,j,$,V,B,X,se,U,C;const w=new Uint8Array(4);let O,P;const S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Jc(r)||!r.output||!r.input&&r.avail_in!==0)return Rs;t=r.state,t.mode===sl&&(t.mode=Cm),c=r.next_out,o=r.output,f=r.avail_out,a=r.next_in,n=r.input,u=r.avail_in,h=t.hold,g=t.bits,b=u,A=f,C=Dc;e:for(;;)switch(t.mode){case cp:if(t.wrap===0){t.mode=Cm;break}for(;g<16;){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}if(t.wrap&2&&h===35615){t.wbits===0&&(t.wbits=15),t.check=0,w[0]=h&255,w[1]=h>>>8&255,t.check=Ta(t.check,w,2,0),h=0,g=0,t.mode=b5;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((h&255)<<8)+(h>>8))%31){r.msg="incorrect header check",t.mode=fn;break}if((h&15)!==v5){r.msg="unknown compression method",t.mode=fn;break}if(h>>>=4,g-=4,U=(h&15)+8,t.wbits===0&&(t.wbits=U),U>15||U>t.wbits){r.msg="invalid window size",t.mode=fn;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=h&512?j5:sl,h=0,g=0;break;case b5:for(;g<16;){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}if(t.flags=h,(t.flags&255)!==v5){r.msg="unknown compression method",t.mode=fn;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=fn;break}t.head&&(t.head.text=h>>8&1),t.flags&512&&t.wrap&4&&(w[0]=h&255,w[1]=h>>>8&255,t.check=Ta(t.check,w,2,0)),h=0,g=0,t.mode=w5;case w5:for(;g<32;){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}t.head&&(t.head.time=h),t.flags&512&&t.wrap&4&&(w[0]=h&255,w[1]=h>>>8&255,w[2]=h>>>16&255,w[3]=h>>>24&255,t.check=Ta(t.check,w,4,0)),h=0,g=0,t.mode=S5;case S5:for(;g<16;){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}t.head&&(t.head.xflags=h&255,t.head.os=h>>8),t.flags&512&&t.wrap&4&&(w[0]=h&255,w[1]=h>>>8&255,t.check=Ta(t.check,w,2,0)),h=0,g=0,t.mode=_5;case _5:if(t.flags&1024){for(;g<16;){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}t.length=h,t.head&&(t.head.extra_len=h),t.flags&512&&t.wrap&4&&(w[0]=h&255,w[1]=h>>>8&255,t.check=Ta(t.check,w,2,0)),h=0,g=0}else t.head&&(t.head.extra=null);t.mode=T5;case T5:if(t.flags&1024&&(v=t.length,v>u&&(v=u),v&&(t.head&&(U=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(a,a+v),U)),t.flags&512&&t.wrap&4&&(t.check=Ta(t.check,n,v,a)),u-=v,a+=v,t.length-=v),t.length))break e;t.length=0,t.mode=A5;case A5:if(t.flags&2048){if(u===0)break e;v=0;do U=n[a+v++],t.head&&U&&t.length<65536&&(t.head.name+=String.fromCharCode(U));while(U&&v<u);if(t.flags&512&&t.wrap&4&&(t.check=Ta(t.check,n,v,a)),u-=v,a+=v,U)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=C5;case C5:if(t.flags&4096){if(u===0)break e;v=0;do U=n[a+v++],t.head&&U&&t.length<65536&&(t.head.comment+=String.fromCharCode(U));while(U&&v<u);if(t.flags&512&&t.wrap&4&&(t.check=Ta(t.check,n,v,a)),u-=v,a+=v,U)break e}else t.head&&(t.head.comment=null);t.mode=k5;case k5:if(t.flags&512){for(;g<16;){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}if(t.wrap&4&&h!==(t.check&65535)){r.msg="header crc mismatch",t.mode=fn;break}h=0,g=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=sl;break;case j5:for(;g<32;){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}r.adler=t.check=D5(h),h=0,g=0,t.mode=Mf;case Mf:if(t.havedict===0)return r.next_out=c,r.avail_out=f,r.next_in=a,r.avail_in=u,t.hold=h,t.bits=g,F_;r.adler=t.check=1,t.mode=sl;case sl:if(e===L_||e===sf)break e;case Cm:if(t.last){h>>>=g&7,g-=g&7,t.mode=jm;break}for(;g<3;){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}switch(t.last=h&1,h>>>=1,g-=1,h&3){case 0:t.mode=E5;break;case 1:if(U_(t),t.mode=af,e===sf){h>>>=2,g-=2;break e}break;case 2:t.mode=R5;break;case 3:r.msg="invalid block type",t.mode=fn}h>>>=2,g-=2;break;case E5:for(h>>>=g&7,g-=g&7;g<32;){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}if((h&65535)!==(h>>>16^65535)){r.msg="invalid stored block lengths",t.mode=fn;break}if(t.length=h&65535,h=0,g=0,t.mode=km,e===sf)break e;case km:t.mode=I5;case I5:if(v=t.length,v){if(v>u&&(v=u),v>f&&(v=f),v===0)break e;o.set(n.subarray(a,a+v),c),u-=v,a+=v,f-=v,c+=v,t.length-=v;break}t.mode=sl;break;case R5:for(;g<14;){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}if(t.nlen=(h&31)+257,h>>>=5,g-=5,t.ndist=(h&31)+1,h>>>=5,g-=5,t.ncode=(h&15)+4,h>>>=4,g-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=fn;break}t.have=0,t.mode=P5;case P5:for(;t.have<t.ncode;){for(;g<3;){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}t.lens[S[t.have++]]=h&7,h>>>=3,g-=3}for(;t.have<19;)t.lens[S[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,O={bits:t.lenbits},C=Dd(N_,t.lens,0,19,t.lencode,0,t.work,O),t.lenbits=O.bits,C){r.msg="invalid code lengths set",t.mode=fn;break}t.have=0,t.mode=N5;case N5:for(;t.have<t.nlen+t.ndist;){for(;N=t.lencode[h&(1<<t.lenbits)-1],j=N>>>24,$=N>>>16&255,V=N&65535,!(j<=g);){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}if(V<16)h>>>=j,g-=j,t.lens[t.have++]=V;else{if(V===16){for(P=j+2;g<P;){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}if(h>>>=j,g-=j,t.have===0){r.msg="invalid bit length repeat",t.mode=fn;break}U=t.lens[t.have-1],v=3+(h&3),h>>>=2,g-=2}else if(V===17){for(P=j+3;g<P;){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}h>>>=j,g-=j,U=0,v=3+(h&7),h>>>=3,g-=3}else{for(P=j+7;g<P;){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}h>>>=j,g-=j,U=0,v=11+(h&127),h>>>=7,g-=7}if(t.have+v>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=fn;break}for(;v--;)t.lens[t.have++]=U}}if(t.mode===fn)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=fn;break}if(t.lenbits=9,O={bits:t.lenbits},C=Dd(Px,t.lens,0,t.nlen,t.lencode,0,t.work,O),t.lenbits=O.bits,C){r.msg="invalid literal/lengths set",t.mode=fn;break}if(t.distbits=6,t.distcode=t.distdyn,O={bits:t.distbits},C=Dd(Nx,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,O),t.distbits=O.bits,C){r.msg="invalid distances set",t.mode=fn;break}if(t.mode=af,e===sf)break e;case af:t.mode=lf;case lf:if(u>=6&&f>=258){r.next_out=c,r.avail_out=f,r.next_in=a,r.avail_in=u,t.hold=h,t.bits=g,k_(r,A),c=r.next_out,o=r.output,f=r.avail_out,a=r.next_in,n=r.input,u=r.avail_in,h=t.hold,g=t.bits,t.mode===sl&&(t.back=-1);break}for(t.back=0;N=t.lencode[h&(1<<t.lenbits)-1],j=N>>>24,$=N>>>16&255,V=N&65535,!(j<=g);){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}if($&&($&240)===0){for(B=j,X=$,se=V;N=t.lencode[se+((h&(1<<B+X)-1)>>B)],j=N>>>24,$=N>>>16&255,V=N&65535,!(B+j<=g);){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}h>>>=B,g-=B,t.back+=B}if(h>>>=j,g-=j,t.back+=j,t.length=V,$===0){t.mode=O5;break}if($&32){t.back=-1,t.mode=sl;break}if($&64){r.msg="invalid literal/length code",t.mode=fn;break}t.extra=$&15,t.mode=L5;case L5:if(t.extra){for(P=t.extra;g<P;){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}t.length+=h&(1<<t.extra)-1,h>>>=t.extra,g-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=B5;case B5:for(;N=t.distcode[h&(1<<t.distbits)-1],j=N>>>24,$=N>>>16&255,V=N&65535,!(j<=g);){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}if(($&240)===0){for(B=j,X=$,se=V;N=t.distcode[se+((h&(1<<B+X)-1)>>B)],j=N>>>24,$=N>>>16&255,V=N&65535,!(B+j<=g);){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}h>>>=B,g-=B,t.back+=B}if(h>>>=j,g-=j,t.back+=j,$&64){r.msg="invalid distance code",t.mode=fn;break}t.offset=V,t.extra=$&15,t.mode=F5;case F5:if(t.extra){for(P=t.extra;g<P;){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}t.offset+=h&(1<<t.extra)-1,h>>>=t.extra,g-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=fn;break}t.mode=z5;case z5:if(f===0)break e;if(v=A-f,t.offset>v){if(v=t.offset-v,v>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=fn;break}v>t.wnext?(v-=t.wnext,F=t.wsize-v):F=t.wnext-v,v>t.length&&(v=t.length),E=t.window}else E=o,F=c-t.offset,v=t.length;v>f&&(v=f),f-=v,t.length-=v;do o[c++]=E[F++];while(--v);t.length===0&&(t.mode=lf);break;case O5:if(f===0)break e;o[c++]=t.length,f--,t.mode=lf;break;case jm:if(t.wrap){for(;g<32;){if(u===0)break e;u--,h|=n[a++]<<g,g+=8}if(A-=f,r.total_out+=A,t.total+=A,t.wrap&4&&A&&(r.adler=t.check=t.flags?Ta(t.check,o,A,c-A):l0(t.check,o,A,c-A)),A=f,t.wrap&4&&(t.flags?h:D5(h))!==t.check){r.msg="incorrect data check",t.mode=fn;break}h=0,g=0}t.mode=V5;case V5:if(t.wrap&&t.flags){for(;g<32;){if(u===0)break e;u--,h+=n[a++]<<g,g+=8}if(t.wrap&4&&h!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=fn;break}h=0,g=0}t.mode=M5;case M5:C=B_;break e;case fn:C=Lx;break e;case Fx:return Bx;case zx:default:return Rs}return r.next_out=c,r.avail_out=f,r.next_in=a,r.avail_in=u,t.hold=h,t.bits=g,(t.wsize||A!==r.avail_out&&t.mode<fn&&(t.mode<jm||e!==x5))&&Wx(r,r.output,r.next_out,A-r.avail_out),b-=r.avail_in,A-=r.avail_out,r.total_in+=b,r.total_out+=A,t.total+=A,t.wrap&4&&A&&(r.adler=t.check=t.flags?Ta(t.check,o,A,r.next_out-A):l0(t.check,o,A,r.next_out-A)),r.data_type=t.bits+(t.last?64:0)+(t.mode===sl?128:0)+(t.mode===af||t.mode===km?256:0),(b===0&&A===0||e===x5)&&C===Dc&&(C=z_),C},H_=r=>{if(Jc(r))return Rs;let e=r.state;return e.window&&(e.window=null),r.state=null,Dc},G_=(r,e)=>{if(Jc(r))return Rs;const t=r.state;return(t.wrap&2)===0?Rs:(t.head=e,e.done=!1,Dc)},K_=(r,e)=>{const t=e.length;let n,o,a;return Jc(r)||(n=r.state,n.wrap!==0&&n.mode!==Mf)?Rs:n.mode===Mf&&(o=1,o=l0(o,e,t,0),o!==n.check)?Lx:(a=Wx(r,e,t,t),a?(n.mode=Fx,Bx):(n.havedict=1,Dc))};var Y_=Vx,J_=Mx,Q_=Ox,X_=$_,Z_=Dx,e4=q_,t4=H_,r4=G_,n4=K_,i4="pako inflate (from Nodeca project)",al={inflateReset:Y_,inflateReset2:J_,inflateResetKeep:Q_,inflateInit:X_,inflateInit2:Z_,inflate:e4,inflateEnd:t4,inflateGetHeader:r4,inflateSetDictionary:n4,inflateInfo:i4};function o4(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var s4=o4;const $x=Object.prototype.toString,{Z_NO_FLUSH:a4,Z_FINISH:l4,Z_OK:Jd,Z_STREAM_END:Rm,Z_NEED_DICT:Pm,Z_STREAM_ERROR:c4,Z_DATA_ERROR:$5,Z_MEM_ERROR:u4}=Ex;function lh(r){this.options=Ix.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new A_,this.strm.avail_out=0;let t=al.inflateInit2(this.strm,e.windowBits);if(t!==Jd)throw new Error(c0[t]);if(this.header=new s4,al.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=u0.string2buf(e.dictionary):$x.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=al.inflateSetDictionary(this.strm,e.dictionary),t!==Jd)))throw new Error(c0[t])}lh.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,o=this.options.dictionary;let a,c,u;if(this.ended)return!1;for(e===~~e?c=e:c=e===!0?l4:a4,$x.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),a=al.inflate(t,c),a===Pm&&o&&(a=al.inflateSetDictionary(t,o),a===Jd?a=al.inflate(t,c):a===$5&&(a=Pm));t.avail_in>0&&a===Rm&&t.state.wrap>0&&r[t.next_in]!==0;)al.inflateReset(t),a=al.inflate(t,c);switch(a){case c4:case $5:case Pm:case u4:return this.onEnd(a),this.ended=!0,!1}if(u=t.avail_out,t.next_out&&(t.avail_out===0||a===Rm))if(this.options.to==="string"){let f=u0.utf8border(t.output,t.next_out),h=t.next_out-f,g=u0.buf2string(t.output,f);t.next_out=h,t.avail_out=n-h,h&&t.output.set(t.output.subarray(f,f+h),0),this.onData(g)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===Jd&&u===0)){if(a===Rm)return a=al.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};lh.prototype.onData=function(r){this.chunks.push(r)};lh.prototype.onEnd=function(r){r===Jd&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ix.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function d4(r,e){const t=new lh(e);if(t.push(r),t.err)throw t.msg||c0[t.err];return t.result}var h4=lh,f4=d4,p4={Inflate:h4,inflate:f4};const{Inflate:m4,inflate:g4}=p4;var U5=m4,y4=g4;const Ux=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;Ux[r]=e}const q5=4294967295;function x4(r,e,t){let n=r;for(let o=0;o<t;o++)n=Ux[(n^e[o])&255]^n>>>8;return n}function v4(r,e){return(x4(q5,r,e)^q5)>>>0}function H5(r,e,t){const n=r.readUint32(),o=v4(new Uint8Array(r.buffer,r.byteOffset+r.offset-e-4,e),e);if(o!==n)throw new Error(`CRC mismatch for chunk ${t}. Expected ${n}, found ${o}`)}function qx(r,e,t){for(let n=0;n<t;n++)e[n]=r[n]}function Hx(r,e,t,n){let o=0;for(;o<n;o++)e[o]=r[o];for(;o<t;o++)e[o]=r[o]+e[o-n]&255}function Gx(r,e,t,n){let o=0;if(t.length===0)for(;o<n;o++)e[o]=r[o];else for(;o<n;o++)e[o]=r[o]+t[o]&255}function Kx(r,e,t,n,o){let a=0;if(t.length===0){for(;a<o;a++)e[a]=r[a];for(;a<n;a++)e[a]=r[a]+(e[a-o]>>1)&255}else{for(;a<o;a++)e[a]=r[a]+(t[a]>>1)&255;for(;a<n;a++)e[a]=r[a]+(e[a-o]+t[a]>>1)&255}}function Yx(r,e,t,n,o){let a=0;if(t.length===0){for(;a<o;a++)e[a]=r[a];for(;a<n;a++)e[a]=r[a]+e[a-o]&255}else{for(;a<o;a++)e[a]=r[a]+t[a]&255;for(;a<n;a++)e[a]=r[a]+b4(e[a-o],t[a],t[a-o])&255}}function b4(r,e,t){const n=r+e-t,o=Math.abs(n-r),a=Math.abs(n-e),c=Math.abs(n-t);return o<=a&&o<=c?r:a<=c?e:t}function w4(r,e,t,n,o,a){switch(r){case 0:qx(e,t,o);break;case 1:Hx(e,t,o,a);break;case 2:Gx(e,t,n,o);break;case 3:Kx(e,t,n,o,a);break;case 4:Yx(e,t,n,o,a);break;default:throw new Error(`Unsupported filter: ${r}`)}}const S4=new Uint16Array([255]),_4=new Uint8Array(S4.buffer),T4=_4[0]===255;function A4(r){const{data:e,width:t,height:n,channels:o,depth:a}=r,c=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(a/8)*o,f=new Uint8Array(n*t*u);let h=0;for(let g=0;g<7;g++){const b=c[g],A=Math.ceil((t-b.x)/b.xStep),v=Math.ceil((n-b.y)/b.yStep);if(A<=0||v<=0)continue;const F=A*u,E=new Uint8Array(F);for(let N=0;N<v;N++){const j=e[h++],$=e.subarray(h,h+F);h+=F;const V=new Uint8Array(F);w4(j,$,V,E,F,u),E.set(V);for(let B=0;B<A;B++){const X=b.x+B*b.xStep,se=b.y+N*b.yStep;if(!(X>=t||se>=n))for(let U=0;U<u;U++)f[(se*t+X)*u+U]=V[B*u+U]}}}if(a===16){const g=new Uint16Array(f.buffer);if(T4)for(let b=0;b<g.length;b++)g[b]=C4(g[b]);return g}else return f}function C4(r){return(r&255)<<8|r>>8&255}const k4=new Uint16Array([255]),j4=new Uint8Array(k4.buffer),E4=j4[0]===255,I4=new Uint8Array(0);function G5(r){const{data:e,width:t,height:n,channels:o,depth:a}=r,c=Math.ceil(a/8)*o,u=Math.ceil(a/8*o*t),f=new Uint8Array(n*u);let h=I4,g=0,b,A;for(let v=0;v<n;v++){switch(b=e.subarray(g+1,g+1+u),A=f.subarray(v*u,(v+1)*u),e[g]){case 0:qx(b,A,u);break;case 1:Hx(b,A,u,c);break;case 2:Gx(b,A,h,u);break;case 3:Kx(b,A,h,u,c);break;case 4:Yx(b,A,h,u,c);break;default:throw new Error(`Unsupported filter: ${e[g]}`)}h=A,g+=u+1}if(a===16){const v=new Uint16Array(f.buffer);if(E4)for(let F=0;F<v.length;F++)v[F]=R4(v[F]);return v}else return f}function R4(r){return(r&255)<<8|r>>8&255}const Sf=Uint8Array.of(137,80,78,71,13,10,26,10);function K5(r){if(!P4(r.readBytes(Sf.length)))throw new Error("wrong PNG signature")}function P4(r){if(r.length<Sf.length)return!1;for(let e=0;e<Sf.length;e++)if(r[e]!==Sf[e])return!1;return!0}const N4="tEXt",L4=0,Jx=new TextDecoder("latin1");function B4(r){if(z4(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const F4=/^[\u0000-\u00FF]*$/;function z4(r){if(!F4.test(r))throw new Error("invalid latin1 text")}function O4(r,e,t){const n=Qx(e);r[n]=V4(e,t-n.length-1)}function Qx(r){for(r.mark();r.readByte()!==L4;);const e=r.offset;r.reset();const t=Jx.decode(r.readBytes(e-r.offset-1));return r.skip(1),B4(t),t}function V4(r,e){return Jx.decode(r.readBytes(e))}const ss={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Nm={UNKNOWN:-1,DEFLATE:0},Y5={UNKNOWN:-1,ADAPTIVE:0},Lm={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},cf={NONE:0,BACKGROUND:1,PREVIOUS:2},Bm={SOURCE:0,OVER:1};class M4 extends Y0{constructor(t,n={}){super(t);Ur(this,"_checkCrc");Ur(this,"_inflator");Ur(this,"_png");Ur(this,"_apng");Ur(this,"_end");Ur(this,"_hasPalette");Ur(this,"_palette");Ur(this,"_hasTransparency");Ur(this,"_transparency");Ur(this,"_compressionMethod");Ur(this,"_filterMethod");Ur(this,"_interlaceMethod");Ur(this,"_colorType");Ur(this,"_isAnimated");Ur(this,"_numberOfFrames");Ur(this,"_numberOfPlays");Ur(this,"_frames");Ur(this,"_writingDataChunks");const{checkCrc:o=!1}=n;this._checkCrc=o,this._inflator=new U5,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Nm.UNKNOWN,this._filterMethod=Y5.UNKNOWN,this._interlaceMethod=Lm.UNKNOWN,this._colorType=ss.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(K5(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeChunk(t,n)}return this.decodeImage(),this._png}decodeApng(){for(K5(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(t,n)}return this.decodeApngImage(),this._apng}decodeChunk(t,n){const o=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case N4:O4(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-o!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?H5(this,t+4,n):this.skip(4)}decodeApngChunk(t,n){const o=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,n),this.offset=o+t;break}if(this.offset-o!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?H5(this,t+4,n):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=D4(this.readUint8());const n=this.readUint8();this._colorType=n;let o;switch(n){case ss.GREYSCALE:o=1;break;case ss.TRUECOLOUR:o=3;break;case ss.INDEXED_COLOUR:o=1;break;case ss.GREYSCALE_ALPHA:o=2;break;case ss.TRUECOLOUR_ALPHA:o=4;break;case ss.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=o,this._compressionMethod=this.readUint8(),this._compressionMethod!==Nm.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const n=t/3;this._hasPalette=!0;const o=[];this._palette=o;for(let a=0;a<n;a++)o.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const n=t,o=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,o,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let n=t,o=this.offset+this.byteOffset;if(o+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,o,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case ss.GREYSCALE:case ss.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let n=0;n<t/2;n++)this._transparency[n]=this.readUint16();break}case ss.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let n=0;for(;n<t;n++){const o=this.readByte();this._palette[n].push(o)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case ss.UNKNOWN:case ss.GREYSCALE_ALPHA:case ss.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const n=Qx(this),o=this.readUint8();if(o!==Nm.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${o}`);const a=this.readBytes(t-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:y4(a)}}decodepHYs(){const t=this.readUint32(),n=this.readUint32(),o=this.readByte();this._png.resolution={x:t,y:n,unit:o}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const n={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},o=this._frames.at(t);if(o){if(o.data=G5({data:o.data,width:o.width,height:o.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||o.xOffset===0&&o.yOffset===0&&o.width===this._png.width&&o.height===this._png.height)n.data=o.data;else{const a=this._apng.frames.at(t-1);this.disposeFrame(o,a,n),this.addFrameDataToCanvas(n,o)}this._apng.frames.push(n)}}return this._apng}disposeFrame(t,n,o){switch(t.disposeOp){case cf.NONE:break;case cf.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let c=0;c<this._png.width;c++){const u=(a*t.width+c)*this._png.channels;for(let f=0;f<this._png.channels;f++)o.data[u+f]=0}break;case cf.PREVIOUS:o.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,n){const o=1<<this._png.depth,a=(c,u)=>{const f=((c+n.yOffset)*this._png.width+n.xOffset+u)*this._png.channels,h=(c*n.width+u)*this._png.channels;return{index:f,frameIndex:h}};switch(n.blendOp){case Bm.SOURCE:for(let c=0;c<n.height;c++)for(let u=0;u<n.width;u++){const{index:f,frameIndex:h}=a(c,u);for(let g=0;g<this._png.channels;g++)t.data[f+g]=n.data[h+g]}break;case Bm.OVER:for(let c=0;c<n.height;c++)for(let u=0;u<n.width;u++){const{index:f,frameIndex:h}=a(c,u);for(let g=0;g<this._png.channels;g++){const b=n.data[h+this._png.channels-1]/o,A=g%(this._png.channels-1)===0?1:n.data[h+g],v=Math.floor(b*A+(1-b)*t.data[f+g]);t.data[f+g]+=v}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==Y5.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Lm.NO_INTERLACE)this._png.data=G5({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Lm.ADAM7)this._png.data=A4({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,n=this._frames.at(-1);n?n.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:cf.NONE,blendOp:Bm.SOURCE,data:t}),this._inflator=new U5,this._writingDataChunks=!1}}function D4(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var J5;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(J5||(J5={}));function W4(r,e){return new M4(r,e).decode()}var Jt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Fm(){Jt.console&&typeof Jt.console.log=="function"&&Jt.console.log.apply(Jt.console,arguments)}var Qr={log:Fm,warn:function(r){Jt.console&&(typeof Jt.console.warn=="function"?Jt.console.warn.apply(Jt.console,arguments):Fm.call(null,arguments))},error:function(r){Jt.console&&(typeof Jt.console.error=="function"?Jt.console.error.apply(Jt.console,arguments):Fm(r))}};function zm(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){Nc(n.response,e,t)},n.onerror=function(){Qr.error("could not download file")},n.send()}function Q5(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function uf(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var Nc=Jt.saveAs||((typeof window>"u"?"undefined":qr(window))!=="object"||window!==Jt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=Jt.URL||Jt.webkitURL,o=document.createElement("a");e=e||r.name||"download",o.download=e,o.rel="noopener",typeof r=="string"?(o.href=r,o.origin!==location.origin?Q5(o.href)?zm(r,e,t):uf(o,o.target="_blank"):uf(o)):(o.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(o.href)},4e4),setTimeout(function(){uf(o)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(Q5(r))zm(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){uf(n)})}else navigator.msSaveOrOpenBlob((function(o,a){return a===void 0?a={autoBom:!1}:qr(a)!=="object"&&(Qr.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o})(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return zm(r,e,t);var o=r.type==="application/octet-stream",a=/constructor/i.test(Jt.HTMLElement)||Jt.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&a)&&(typeof FileReader>"u"?"undefined":qr(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var g=u.result;g=c?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=g:location=g,n=null},u.readAsDataURL(r)}else{var f=Jt.URL||Jt.webkitURL,h=f.createObjectURL(r);n?n.location=h:location.href=h,n=null,setTimeout(function(){f.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Xx(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],n=0;n<t.length;n++){var o=t[n].re,a=t[n].process,c=o.exec(r);c&&(e=a(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),f=this.g.toString(16),h=this.b.toString(16);return u.length==1&&(u="0"+u),f.length==1&&(f="0"+f),h.length==1&&(h="0"+h),"#"+u+f+h}}var _f=Jt.atob.bind(Jt),X5=Jt.btoa.bind(Jt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Om(r,e){var t=r[0],n=r[1],o=r[2],a=r[3];t=eo(t,n,o,a,e[0],7,-680876936),a=eo(a,t,n,o,e[1],12,-389564586),o=eo(o,a,t,n,e[2],17,606105819),n=eo(n,o,a,t,e[3],22,-1044525330),t=eo(t,n,o,a,e[4],7,-176418897),a=eo(a,t,n,o,e[5],12,1200080426),o=eo(o,a,t,n,e[6],17,-1473231341),n=eo(n,o,a,t,e[7],22,-45705983),t=eo(t,n,o,a,e[8],7,1770035416),a=eo(a,t,n,o,e[9],12,-1958414417),o=eo(o,a,t,n,e[10],17,-42063),n=eo(n,o,a,t,e[11],22,-1990404162),t=eo(t,n,o,a,e[12],7,1804603682),a=eo(a,t,n,o,e[13],12,-40341101),o=eo(o,a,t,n,e[14],17,-1502002290),t=to(t,n=eo(n,o,a,t,e[15],22,1236535329),o,a,e[1],5,-165796510),a=to(a,t,n,o,e[6],9,-1069501632),o=to(o,a,t,n,e[11],14,643717713),n=to(n,o,a,t,e[0],20,-373897302),t=to(t,n,o,a,e[5],5,-701558691),a=to(a,t,n,o,e[10],9,38016083),o=to(o,a,t,n,e[15],14,-660478335),n=to(n,o,a,t,e[4],20,-405537848),t=to(t,n,o,a,e[9],5,568446438),a=to(a,t,n,o,e[14],9,-1019803690),o=to(o,a,t,n,e[3],14,-187363961),n=to(n,o,a,t,e[8],20,1163531501),t=to(t,n,o,a,e[13],5,-1444681467),a=to(a,t,n,o,e[2],9,-51403784),o=to(o,a,t,n,e[7],14,1735328473),t=ro(t,n=to(n,o,a,t,e[12],20,-1926607734),o,a,e[5],4,-378558),a=ro(a,t,n,o,e[8],11,-2022574463),o=ro(o,a,t,n,e[11],16,1839030562),n=ro(n,o,a,t,e[14],23,-35309556),t=ro(t,n,o,a,e[1],4,-1530992060),a=ro(a,t,n,o,e[4],11,1272893353),o=ro(o,a,t,n,e[7],16,-155497632),n=ro(n,o,a,t,e[10],23,-1094730640),t=ro(t,n,o,a,e[13],4,681279174),a=ro(a,t,n,o,e[0],11,-358537222),o=ro(o,a,t,n,e[3],16,-722521979),n=ro(n,o,a,t,e[6],23,76029189),t=ro(t,n,o,a,e[9],4,-640364487),a=ro(a,t,n,o,e[12],11,-421815835),o=ro(o,a,t,n,e[15],16,530742520),t=no(t,n=ro(n,o,a,t,e[2],23,-995338651),o,a,e[0],6,-198630844),a=no(a,t,n,o,e[7],10,1126891415),o=no(o,a,t,n,e[14],15,-1416354905),n=no(n,o,a,t,e[5],21,-57434055),t=no(t,n,o,a,e[12],6,1700485571),a=no(a,t,n,o,e[3],10,-1894986606),o=no(o,a,t,n,e[10],15,-1051523),n=no(n,o,a,t,e[1],21,-2054922799),t=no(t,n,o,a,e[8],6,1873313359),a=no(a,t,n,o,e[15],10,-30611744),o=no(o,a,t,n,e[6],15,-1560198380),n=no(n,o,a,t,e[13],21,1309151649),t=no(t,n,o,a,e[4],6,-145523070),a=no(a,t,n,o,e[11],10,-1120210379),o=no(o,a,t,n,e[2],15,718787259),n=no(n,o,a,t,e[9],21,-343485551),r[0]=Kl(t,r[0]),r[1]=Kl(n,r[1]),r[2]=Kl(o,r[2]),r[3]=Kl(a,r[3])}function up(r,e,t,n,o,a){return e=Kl(Kl(e,r),Kl(n,a)),Kl(e<<o|e>>>32-o,t)}function eo(r,e,t,n,o,a,c){return up(e&t|~e&n,r,e,o,a,c)}function to(r,e,t,n,o,a,c){return up(e&n|t&~n,r,e,o,a,c)}function ro(r,e,t,n,o,a,c){return up(e^t^n,r,e,o,a,c)}function no(r,e,t,n,o,a,c){return up(t^(e|~n),r,e,o,a,c)}function Zx(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)Om(n,$4(r.substring(e-64,e)));r=r.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)o[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(Om(n,o),e=0;e<16;e++)o[e]=0;return o[14]=8*t,Om(n,o),n}function $4(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}var Z5="0123456789abcdef".split("");function U4(r){for(var e="",t=0;t<4;t++)e+=Z5[r>>8*t+4&15]+Z5[r>>8*t&15];return e}function q4(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function d0(r){return Zx(r).map(q4).join("")}var H4=(function(r){for(var e=0;e<r.length;e++)r[e]=U4(r[e]);return r.join("")})(Zx("hello"))!="5d41402abc4b2a76b9719d911017c592";function Kl(r,e){if(H4){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function h0(r,e){var t,n,o,a;if(r!==t){for(var c=(o=r,a=1+(256/r.length|0),new Array(a+1).join(o)),u=[],f=0;f<256;f++)u[f]=f;var h=0;for(f=0;f<256;f++){var g=u[f];h=(h+g+c.charCodeAt(f))%256,u[f]=u[h],u[h]=g}t=r,n=u}else u=n;var b=e.length,A=0,v=0,F="";for(f=0;f<b;f++)v=(v+(g=u[A=(A+1)%256]))%256,u[A]=u[v],u[v]=g,c=u[(u[A]+u[v])%256],F+=String.fromCharCode(e.charCodeAt(f)^c);return F}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var e2={print:4,modify:8,copy:16,"annot-forms":32};function ju(r,e,t,n){this.v=1,this.r=2;var o=192;r.forEach(function(u){if(e2.perm!==void 0)throw new Error("Invalid permission: "+u);o+=e2[u]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),c=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,c),this.P=-(1+(255^o)),this.encryptionKey=d0(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=h0(this.encryptionKey,this.padding)}function Eu(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var o=r.charCodeAt(n);e+=o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?"#"+("0"+o.toString(16)).slice(-2):r[n]}return e}function t2(r){if(qr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,o){if(o=o||!1,typeof t!="string"||typeof n!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var a=Math.random().toString(35);return e[t][a]=[n,!!o],a},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),o=[];for(var a in e[t]){var c=e[t][a];try{c[0].apply(r,n)}catch(u){Jt.console&&Qr.error("jsPDF PubSub Error",u.message,u)}c[1]&&o.push(a)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Df(r){if(!(this instanceof Df))return new Df(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function ev(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function Bc(r,e,t,n,o){if(!(this instanceof Bc))return new Bc(r,e,t,n,o);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,ev.call(this,n,o)}function Lu(r,e,t,n,o){if(!(this instanceof Lu))return new Lu(r,e,t,n,o);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,ev.call(this,n,o)}function It(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],o=arguments[2],a=arguments[3],c=[],u=1,f=16,h="S",g=null;qr(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,o=r.format||o,a=r.compress||r.compressPdf||a,(g=r.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),u=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(f=r.floatPrecision),h=r.defaultPathOperation||"S"),c=r.filters||(a===!0?["FlateEncode"]:c),n=n||"mm",t=(""+(t||"P")).toLowerCase();var b=r.putOnlyUsedFonts||!1,A={},v={internal:{},__private__:{}};v.__private__.PubSub=t2;var F="1.3",E=v.__private__.getPdfVersion=function(){return F};v.__private__.setPdfVersion=function(_){F=_};var N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return N};var j=v.__private__.getPageFormat=function(_){return N[_]};o=o||"a4";var $="compat",V="advanced",B=$;function X(){this.saveGraphicsState(),Q(new Nt(Pt,0,0,-Pt,0,mi()*Pt).toString()+" cm"),this.setFontSize(this.getFontSize()/Pt),h="n",B=V}function se(){this.restoreGraphicsState(),h="S",B=$}var U=v.__private__.combineFontStyleAndFontWeight=function(_,q){if(_=="bold"&&q=="normal"||_=="bold"&&q==400||_=="normal"&&q=="italic"||_=="bold"&&q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return q&&(_=q==400||q==="normal"?_==="italic"?"italic":"normal":q!=700&&q!=="bold"||_!=="normal"?(q==700?"bold":q)+""+_:"bold"),_};v.advancedAPI=function(_){var q=B===$;return q&&X.call(this),typeof _!="function"||(_(this),q&&se.call(this)),this},v.compatAPI=function(_){var q=B===V;return q&&se.call(this),typeof _!="function"||(_(this),q&&X.call(this)),this},v.isAdvancedAPI=function(){return B===V};var C,w=function(_){if(B!==V)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=v.roundToPrecision=v.__private__.roundToPrecision=function(_,q){var ae=e||q;if(isNaN(_)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(ae).replace(/0+$/,"")};C=v.hpf=v.__private__.hpf=typeof f=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return O(_,f)}:f==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return O(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return O(_,16)};var P=v.f2=v.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return O(_,2)},S=v.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return O(_,3)},z=v.scale=v.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return B===$?_*Pt:B===V?_:void 0},W=function(_){return z((function(q){return B===$?mi()-q:B===V?q:void 0})(_))};v.__private__.setPrecision=v.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(e=parseInt(_,10))};var le,ve="00000000000000000000000000000000",de=v.__private__.getFileId=function(){return ve},ce=v.__private__.setFileId=function(_){return ve=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():ve.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(zr=new ju(g.userPermissions,g.userPassword,g.ownerPassword,ve)),ve};v.setFileId=function(_){return ce(_),this},v.getFileId=function(){return de()};var we=v.__private__.convertDateToPDFDate=function(_){var q=_.getTimezoneOffset(),ae=q<0?"+":"-",me=Math.floor(Math.abs(q/60)),Ce=Math.abs(q%60),$e=[ae,re(me),"'",re(Ce),"'"].join("");return["D:",_.getFullYear(),re(_.getMonth()+1),re(_.getDate()),re(_.getHours()),re(_.getMinutes()),re(_.getSeconds()),$e].join("")},je=v.__private__.convertPDFDateToDate=function(_){var q=parseInt(_.substr(2,4),10),ae=parseInt(_.substr(6,2),10)-1,me=parseInt(_.substr(8,2),10),Ce=parseInt(_.substr(10,2),10),$e=parseInt(_.substr(12,2),10),Qe=parseInt(_.substr(14,2),10);return new Date(q,ae,me,Ce,$e,Qe,0)},ne=v.__private__.setCreationDate=function(_){var q;if(_===void 0&&(_=new Date),_ instanceof Date)q=we(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");q=_}return le=q},D=v.__private__.getCreationDate=function(_){var q=le;return _==="jsDate"&&(q=je(le)),q};v.setCreationDate=function(_){return ne(_),this},v.getCreationDate=function(_){return D(_)};var Y,re=v.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},ue=v.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},fe=0,Se=[],Ee=[],ke=0,Oe=[],Ke=[],nt=!1,_e=Ee;v.__private__.setCustomOutputDestination=function(_){nt=!0,_e=_};var pe=function(_){nt||(_e=_)};v.__private__.resetCustomOutputDestination=function(){nt=!1,_e=Ee};var Q=v.__private__.out=function(_){return _=_.toString(),ke+=_.length+1,_e.push(_),_e},Je=v.__private__.write=function(_){return Q(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},Ue=v.__private__.getArrayBuffer=function(_){for(var q=_.length,ae=new ArrayBuffer(q),me=new Uint8Array(ae);q--;)me[q]=_.charCodeAt(q);return ae},tt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return tt};var ge=r.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(_){return ge=B===V?_/Pt:_,this};var De,He=v.__private__.getFontSize=v.getFontSize=function(){return B===$?ge:ge*Pt},at=r.R2L||!1;v.__private__.setR2L=v.setR2L=function(_){return at=_,this},v.__private__.getR2L=v.getR2L=function(){return at};var ht,Tt=v.__private__.setZoomMode=function(_){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))De=_;else if(isNaN(_)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');De=_}else De=parseInt(_,10)};v.__private__.getZoomMode=function(){return De};var lt,ct=v.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');ht=_};v.__private__.getPageMode=function(){return ht};var Kt=v.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');lt=_};v.__private__.getLayoutMode=function(){return lt},v.__private__.setDisplayMode=v.setDisplayMode=function(_,q,ae){return Tt(_),Kt(q),ct(ae),this};var Vt={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(_){if(Object.keys(Vt).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Vt[_]},v.__private__.getDocumentProperties=function(){return Vt},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(_){for(var q in Vt)Vt.hasOwnProperty(q)&&_[q]&&(Vt[q]=_[q]);return this},v.__private__.setDocumentProperty=function(_,q){if(Object.keys(Vt).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Vt[_]=q};var jt,Pt,bt,Cr,ir,xt={},Ut={},sr=[],Rt={},er={},Wt={},kr={},Br=null,$t=0,Mt=[],ar=new t2(v),Mi=r.hotfixes||[],Rn={},So={},Pn=[],Nt=function _(q,ae,me,Ce,$e,Qe){if(!(this instanceof _))return new _(q,ae,me,Ce,$e,Qe);isNaN(q)&&(q=1),isNaN(ae)&&(ae=0),isNaN(me)&&(me=0),isNaN(Ce)&&(Ce=1),isNaN($e)&&($e=0),isNaN(Qe)&&(Qe=0),this._matrix=[q,ae,me,Ce,$e,Qe]};Object.defineProperty(Nt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Nt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Nt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Nt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Nt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Nt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Nt.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Nt.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Nt.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Nt.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Nt.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Nt.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Nt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Nt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Nt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Nt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Nt.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(_)},Nt.prototype.multiply=function(_){var q=_.sx*this.sx+_.shy*this.shx,ae=_.sx*this.shy+_.shy*this.sy,me=_.shx*this.sx+_.sy*this.shx,Ce=_.shx*this.shy+_.sy*this.sy,$e=_.tx*this.sx+_.ty*this.shx+this.tx,Qe=_.tx*this.shy+_.ty*this.sy+this.ty;return new Nt(q,ae,me,Ce,$e,Qe)},Nt.prototype.decompose=function(){var _=this.sx,q=this.shy,ae=this.shx,me=this.sy,Ce=this.tx,$e=this.ty,Qe=Math.sqrt(_*_+q*q),ft=(_/=Qe)*ae+(q/=Qe)*me;ae-=_*ft,me-=q*ft;var wt=Math.sqrt(ae*ae+me*me);return ft/=wt,_*(me/=wt)<q*(ae/=wt)&&(_=-_,q=-q,ft=-ft,Qe=-Qe),{scale:new Nt(Qe,0,0,wt,0,0),translate:new Nt(1,0,0,1,Ce,$e),rotate:new Nt(_,q,-q,_,0,0),skew:new Nt(1,0,ft,1,0,0)}},Nt.prototype.toString=function(_){return this.join(" ")},Nt.prototype.inversed=function(){var _=this.sx,q=this.shy,ae=this.shx,me=this.sy,Ce=this.tx,$e=this.ty,Qe=1/(_*me-q*ae),ft=me*Qe,wt=-q*Qe,Ft=-ae*Qe,At=_*Qe;return new Nt(ft,wt,Ft,At,-ft*Ce-Ft*$e,-wt*Ce-At*$e)},Nt.prototype.applyToPoint=function(_){var q=_.x*this.sx+_.y*this.shx+this.tx,ae=_.x*this.shy+_.y*this.sy+this.ty;return new pi(q,ae)},Nt.prototype.applyToRectangle=function(_){var q=this.applyToPoint(_),ae=this.applyToPoint(new pi(_.x+_.w,_.y+_.h));return new ms(q.x,q.y,ae.x-q.x,ae.y-q.y)},Nt.prototype.clone=function(){var _=this.sx,q=this.shy,ae=this.shx,me=this.sy,Ce=this.tx,$e=this.ty;return new Nt(_,q,ae,me,Ce,$e)},v.Matrix=Nt;var Ci=v.matrixMult=function(_,q){return q.multiply(_)},li=new Nt(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=li;var Nn=function(_,q){if(!er[_]){var ae=(q instanceof Bc?"Sh":"P")+(Object.keys(Rt).length+1).toString(10);q.id=ae,er[_]=ae,Rt[ae]=q,ar.publish("addPattern",q)}};v.ShadingPattern=Bc,v.TilingPattern=Lu,v.addShadingPattern=function(_,q){return w("addShadingPattern()"),Nn(_,q),this},v.beginTilingPattern=function(_){w("beginTilingPattern()"),ri(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},v.endTilingPattern=function(_,q){w("endTilingPattern()"),q.stream=Ke[Y].join(`
`),Nn(_,q),ar.publish("endTilingPattern",q),Pn.pop().restore()};var ki,Tr=v.__private__.newObject=function(){var _=Fr();return sn(_,!0),_},Fr=v.__private__.newObjectDeferred=function(){return fe++,Se[fe]=function(){return ke},fe},sn=function(_,q){return q=typeof q=="boolean"&&q,Se[_]=ke,q&&Q(_+" 0 obj"),_},qn=v.__private__.newAdditionalObject=function(){var _={objId:Fr(),content:""};return Oe.push(_),_},$o=Fr(),Di=Fr(),Wi=v.__private__.decodeColorString=function(_){var q=_.split(" ");if(q.length!==2||q[1]!=="g"&&q[1]!=="G")q.length!==5||q[4]!=="k"&&q[4]!=="K"||(q=[(1-q[0])*(1-q[3]),(1-q[1])*(1-q[3]),(1-q[2])*(1-q[3]),"r"]);else{var ae=parseFloat(q[0]);q=[ae,ae,ae,"r"]}for(var me="#",Ce=0;Ce<3;Ce++)me+=("0"+Math.floor(255*parseFloat(q[Ce])).toString(16)).slice(-2);return me},mn=v.__private__.encodeColorString=function(_){var q;typeof _=="string"&&(_={ch1:_});var ae=_.ch1,me=_.ch2,Ce=_.ch3,$e=_.ch4,Qe=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var ft=new Xx(ae);if(ft.ok)ae=ft.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var wt=parseInt(ae.substr(1),16);ae=wt>>16&255,me=wt>>8&255,Ce=255&wt}if(me===void 0||$e===void 0&&ae===me&&me===Ce)q=typeof ae=="string"?ae+" "+Qe[0]:_.precision===2?P(ae/255)+" "+Qe[0]:S(ae/255)+" "+Qe[0];else if($e===void 0||qr($e)==="object"){if($e&&!isNaN($e.a)&&$e.a===0)return["1.","1.","1.",Qe[1]].join(" ");q=typeof ae=="string"?[ae,me,Ce,Qe[1]].join(" "):_.precision===2?[P(ae/255),P(me/255),P(Ce/255),Qe[1]].join(" "):[S(ae/255),S(me/255),S(Ce/255),Qe[1]].join(" ")}else q=typeof ae=="string"?[ae,me,Ce,$e,Qe[2]].join(" "):_.precision===2?[P(ae),P(me),P(Ce),P($e),Qe[2]].join(" "):[S(ae),S(me),S(Ce),S($e),Qe[2]].join(" ");return q},ji=v.__private__.getFilters=function(){return c},Ei=v.__private__.putStream=function(_){var q=(_=_||{}).data||"",ae=_.filters||ji(),me=_.alreadyAppliedFilters||[],Ce=_.addLength1||!1,$e=q.length,Qe=_.objectId,ft=function(I){return I};if(g!==null&&Qe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(ft=zr.encryptor(Qe,0));var wt={};ae===!0&&(ae=["FlateEncode"]);var Ft=_.additionalKeyValues||[],At=(wt=It.API.processDataByFilters!==void 0?It.API.processDataByFilters(q,ae):{data:q,reverseChain:[]}).reverseChain+(Array.isArray(me)?me.join(" "):me.toString());if(wt.data.length!==0&&(Ft.push({key:"Length",value:wt.data.length}),Ce===!0&&Ft.push({key:"Length1",value:$e})),At.length!=0)if(At.split("/").length-1==1)Ft.push({key:"Filter",value:At});else{Ft.push({key:"Filter",value:"["+At+"]"});for(var pr=0;pr<Ft.length;pr+=1)if(Ft[pr].key==="DecodeParms"){for(var Hr=[],Or=0;Or<wt.reverseChain.split("/").length-1;Or+=1)Hr.push("null");Hr.push(Ft[pr].value),Ft[pr].value="["+Hr.join(" ")+"]"}}Q("<<");for(var m=0;m<Ft.length;m++)Q("/"+Ft[m].key+" "+Ft[m].value);Q(">>"),wt.data.length!==0&&(Q("stream"),Q(ft(wt.data)),Q("endstream"))},cs=v.__private__.putPage=function(_){var q=_.number,ae=_.data,me=_.objId,Ce=_.contentsObjId;sn(me,!0),Q("<</Type /Page"),Q("/Parent "+_.rootDictionaryObjId+" 0 R"),Q("/Resources "+_.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(C(_.mediaBox.bottomLeftX))+" "+parseFloat(C(_.mediaBox.bottomLeftY))+" "+C(_.mediaBox.topRightX)+" "+C(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&Q("/CropBox ["+C(_.cropBox.bottomLeftX)+" "+C(_.cropBox.bottomLeftY)+" "+C(_.cropBox.topRightX)+" "+C(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&Q("/BleedBox ["+C(_.bleedBox.bottomLeftX)+" "+C(_.bleedBox.bottomLeftY)+" "+C(_.bleedBox.topRightX)+" "+C(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&Q("/TrimBox ["+C(_.trimBox.bottomLeftX)+" "+C(_.trimBox.bottomLeftY)+" "+C(_.trimBox.topRightX)+" "+C(_.trimBox.topRightY)+"]"),_.artBox!==null&&Q("/ArtBox ["+C(_.artBox.bottomLeftX)+" "+C(_.artBox.bottomLeftY)+" "+C(_.artBox.topRightX)+" "+C(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&Q("/UserUnit "+_.userUnit),ar.publish("putPage",{objId:me,pageContext:Mt[q],pageNumber:q,page:ae}),Q("/Contents "+Ce+" 0 R"),Q(">>"),Q("endobj");var $e=ae.join(`
`);return B===V&&($e+=`
Q`),sn(Ce,!0),Ei({data:$e,filters:ji(),objectId:Ce}),Q("endobj"),me},lo=v.__private__.putPages=function(){var _,q,ae=[];for(_=1;_<=$t;_++)Mt[_].objId=Fr(),Mt[_].contentsObjId=Fr();for(_=1;_<=$t;_++)ae.push(cs({number:_,data:Ke[_],objId:Mt[_].objId,contentsObjId:Mt[_].contentsObjId,mediaBox:Mt[_].mediaBox,cropBox:Mt[_].cropBox,bleedBox:Mt[_].bleedBox,trimBox:Mt[_].trimBox,artBox:Mt[_].artBox,userUnit:Mt[_].userUnit,rootDictionaryObjId:$o,resourceDictionaryObjId:Di}));sn($o,!0),Q("<</Type /Pages");var me="/Kids [";for(q=0;q<$t;q++)me+=ae[q]+" 0 R ";Q(me+"]"),Q("/Count "+$t),Q(">>"),Q("endobj"),ar.publish("postPutPages")},co=function(_){ar.publish("putFont",{font:_,out:Q,newObject:Tr,putStream:Ei}),_.isAlreadyPutted!==!0&&(_.objectNumber=Tr(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+Eu(_.postScriptName)),Q("/Subtype /Type1"),typeof _.encoding=="string"&&Q("/Encoding /"+_.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},us=function(_){_.objectNumber=Tr();var q=[];q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Form"}),q.push({key:"BBox",value:"["+[C(_.x),C(_.y),C(_.x+_.width),C(_.y+_.height)].join(" ")+"]"}),q.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var ae=_.pages[1].join(`
`);Ei({data:ae,additionalKeyValues:q,objectId:_.objectNumber}),Q("endobj")},Uo=function(_,q){q||(q=21);var ae=Tr(),me=(function(Qe,ft){var wt,Ft=[],At=1/(ft-1);for(wt=0;wt<1;wt+=At)Ft.push(wt);if(Ft.push(1),Qe[0].offset!=0){var pr={offset:0,color:Qe[0].color};Qe.unshift(pr)}if(Qe[Qe.length-1].offset!=1){var Hr={offset:1,color:Qe[Qe.length-1].color};Qe.push(Hr)}for(var Or="",m=0,I=0;I<Ft.length;I++){for(wt=Ft[I];wt>Qe[m+1].offset;)m++;var M=Qe[m].offset,ee=(wt-M)/(Qe[m+1].offset-M),Ie=Qe[m].color,Be=Qe[m+1].color;Or+=ue(Math.round((1-ee)*Ie[0]+ee*Be[0]).toString(16))+ue(Math.round((1-ee)*Ie[1]+ee*Be[1]).toString(16))+ue(Math.round((1-ee)*Ie[2]+ee*Be[2]).toString(16))}return Or.trim()})(_.colors,q),Ce=[];Ce.push({key:"FunctionType",value:"0"}),Ce.push({key:"Domain",value:"[0.0 1.0]"}),Ce.push({key:"Size",value:"["+q+"]"}),Ce.push({key:"BitsPerSample",value:"8"}),Ce.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ce.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ei({data:me,additionalKeyValues:Ce,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),Q("endobj"),_.objectNumber=Tr(),Q("<< /ShadingType "+_.type),Q("/ColorSpace /DeviceRGB");var $e="/Coords ["+C(parseFloat(_.coords[0]))+" "+C(parseFloat(_.coords[1]))+" ";_.type===2?$e+=C(parseFloat(_.coords[2]))+" "+C(parseFloat(_.coords[3])):$e+=C(parseFloat(_.coords[2]))+" "+C(parseFloat(_.coords[3]))+" "+C(parseFloat(_.coords[4]))+" "+C(parseFloat(_.coords[5])),Q($e+="]"),_.matrix&&Q("/Matrix ["+_.matrix.toString()+"]"),Q("/Function "+ae+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},_o=function(_,q){var ae=Fr(),me=Tr();q.push({resourcesOid:ae,objectOid:me}),_.objectNumber=me;var Ce=[];Ce.push({key:"Type",value:"/Pattern"}),Ce.push({key:"PatternType",value:"1"}),Ce.push({key:"PaintType",value:"1"}),Ce.push({key:"TilingType",value:"1"}),Ce.push({key:"BBox",value:"["+_.boundingBox.map(C).join(" ")+"]"}),Ce.push({key:"XStep",value:C(_.xStep)}),Ce.push({key:"YStep",value:C(_.yStep)}),Ce.push({key:"Resources",value:ae+" 0 R"}),_.matrix&&Ce.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),Ei({data:_.stream,additionalKeyValues:Ce,objectId:_.objectNumber}),Q("endobj")},qo=function(_){for(var q in _.objectNumber=Tr(),Q("<<"),_)switch(q){case"opacity":Q("/ca "+P(_[q]));break;case"stroke-opacity":Q("/CA "+P(_[q]))}Q(">>"),Q("endobj")},jr=function(_){sn(_.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var q in Q("/Font <<"),xt)xt.hasOwnProperty(q)&&(b===!1||b===!0&&A.hasOwnProperty(q))&&Q("/"+q+" "+xt[q].objectNumber+" 0 R");Q(">>")})(),(function(){if(Object.keys(Rt).length>0){for(var q in Q("/Shading <<"),Rt)Rt.hasOwnProperty(q)&&Rt[q]instanceof Bc&&Rt[q].objectNumber>=0&&Q("/"+q+" "+Rt[q].objectNumber+" 0 R");ar.publish("putShadingPatternDict"),Q(">>")}})(),(function(q){if(Object.keys(Rt).length>0){for(var ae in Q("/Pattern <<"),Rt)Rt.hasOwnProperty(ae)&&Rt[ae]instanceof v.TilingPattern&&Rt[ae].objectNumber>=0&&Rt[ae].objectNumber<q&&Q("/"+ae+" "+Rt[ae].objectNumber+" 0 R");ar.publish("putTilingPatternDict"),Q(">>")}})(_.objectOid),(function(){if(Object.keys(Wt).length>0){var q;for(q in Q("/ExtGState <<"),Wt)Wt.hasOwnProperty(q)&&Wt[q].objectNumber>=0&&Q("/"+q+" "+Wt[q].objectNumber+" 0 R");ar.publish("putGStateDict"),Q(">>")}})(),(function(){for(var q in Q("/XObject <<"),Rn)Rn.hasOwnProperty(q)&&Rn[q].objectNumber>=0&&Q("/"+q+" "+Rn[q].objectNumber+" 0 R");ar.publish("putXobjectDict"),Q(">>")})(),Q(">>"),Q("endobj")},gl=function(_){Ut[_.fontName]=Ut[_.fontName]||{},Ut[_.fontName][_.fontStyle]=_.id},Ps=function(_,q,ae,me,Ce){var $e={id:"F"+(Object.keys(xt).length+1).toString(10),postScriptName:_,fontName:q,fontStyle:ae,encoding:me,isStandardFont:Ce||!1,metadata:{}};return ar.publish("addFont",{font:$e,instance:this}),xt[$e.id]=$e,gl($e),$e.id},ci=v.__private__.pdfEscape=v.pdfEscape=function(_,q){return(function(ae,me){var Ce,$e,Qe,ft,wt,Ft,At,pr,Hr;if(Qe=(me=me||{}).sourceEncoding||"Unicode",wt=me.outputEncoding,(me.autoencode||wt)&&xt[jt].metadata&&xt[jt].metadata[Qe]&&xt[jt].metadata[Qe].encoding&&(ft=xt[jt].metadata[Qe].encoding,!wt&&xt[jt].encoding&&(wt=xt[jt].encoding),!wt&&ft.codePages&&(wt=ft.codePages[0]),typeof wt=="string"&&(wt=ft[wt]),wt)){for(At=!1,Ft=[],Ce=0,$e=ae.length;Ce<$e;Ce++)(pr=wt[ae.charCodeAt(Ce)])?Ft.push(String.fromCharCode(pr)):Ft.push(ae[Ce]),Ft[Ce].charCodeAt(0)>>8&&(At=!0);ae=Ft.join("")}for(Ce=ae.length;At===void 0&&Ce!==0;)ae.charCodeAt(Ce-1)>>8&&(At=!0),Ce--;if(!At)return ae;for(Ft=me.noBOM?[]:[254,255],Ce=0,$e=ae.length;Ce<$e;Ce++){if((Hr=(pr=ae.charCodeAt(Ce))>>8)>>8)throw new Error("Character at position "+Ce+" of string '"+ae+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ft.push(Hr),Ft.push(pr-(Hr<<8))}return String.fromCharCode.apply(void 0,Ft)})(_,q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ho=v.__private__.beginPage=function(_){Ke[++$t]=[],Mt[$t]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},hs($t),pe(Ke[Y])},aa=function(_,q){var ae,me,Ce;switch(t=q||t,typeof _=="string"&&(ae=j(_.toLowerCase()),Array.isArray(ae)&&(me=ae[0],Ce=ae[1])),Array.isArray(_)&&(me=_[0]*Pt,Ce=_[1]*Pt),isNaN(me)&&(me=o[0],Ce=o[1]),(me>14400||Ce>14400)&&(Qr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),me=Math.min(14400,me),Ce=Math.min(14400,Ce)),o=[me,Ce],t.substr(0,1)){case"l":Ce>me&&(o=[Ce,me]);break;case"p":me>Ce&&(o=[Ce,me])}Ho(o),Go(gn),Q(zs),qi!==0&&Q(qi+" J"),da!==0&&Q(da+" j"),ar.publish("addPage",{pageNumber:$t})},ds=function(_){_>0&&_<=$t&&(Ke.splice(_,1),Mt.splice(_,1),$t--,Y>$t&&(Y=$t),this.setPage(Y))},hs=function(_){_>0&&_<=$t&&(Y=_)},ui=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return Ke.length-1},Fa=function(_,q,ae){var me,Ce=void 0;return ae=ae||{},_=_!==void 0?_:xt[jt].fontName,q=q!==void 0?q:xt[jt].fontStyle,me=_.toLowerCase(),Ut[me]!==void 0&&Ut[me][q]!==void 0?Ce=Ut[me][q]:Ut[_]!==void 0&&Ut[_][q]!==void 0?Ce=Ut[_][q]:ae.disableWarning===!1&&Qr.warn("Unable to look up font label for font '"+_+"', '"+q+"'. Refer to getFontList() for available fonts."),Ce||ae.noFallback||(Ce=Ut.times[q])==null&&(Ce=Ut.times.normal),Ce},Hn=v.__private__.putInfo=function(){var _=Tr(),q=function(me){return me};for(var ae in g!==null&&(q=zr.encryptor(_,0)),Q("<<"),Q("/Producer ("+ci(q("jsPDF "+It.version))+")"),Vt)Vt.hasOwnProperty(ae)&&Vt[ae]&&Q("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+ci(q(Vt[ae]))+")");Q("/CreationDate ("+ci(q(le))+")"),Q(">>"),Q("endobj")},To=v.__private__.putCatalog=function(_){var q=(_=_||{}).rootDictionaryObjId||$o;switch(Tr(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+q+" 0 R"),De||(De="fullwidth"),De){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+De;ae.substr(ae.length-1)==="%"&&(De=parseInt(De)/100),typeof De=="number"&&Q("/OpenAction [3 0 R /XYZ null null "+P(De)+"]")}switch(lt||(lt="continuous"),lt){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}ht&&Q("/PageMode /"+ht),ar.publish("putCatalog"),Q(">>"),Q("endobj")},vr=v.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(fe+1)),Q("/Root "+fe+" 0 R"),Q("/Info "+(fe-1)+" 0 R"),g!==null&&Q("/Encrypt "+zr.oid+" 0 R"),Q("/ID [ <"+ve+"> <"+ve+"> ]"),Q(">>")},fs=v.__private__.putHeader=function(){Q("%PDF-"+F),Q("%ºß¬à")},uo=v.__private__.putXRef=function(){var _="0000000000";Q("xref"),Q("0 "+(fe+1)),Q("0000000000 65535 f ");for(var q=1;q<=fe;q++)typeof Se[q]=="function"?Q((_+Se[q]()).slice(-10)+" 00000 n "):Se[q]!==void 0?Q((_+Se[q]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},di=v.__private__.buildDocument=function(){var _;fe=0,ke=0,Ee=[],Se=[],Oe=[],$o=Fr(),Di=Fr(),pe(Ee),ar.publish("buildDocument"),fs(),lo(),(function(){ar.publish("putAdditionalObjects");for(var ae=0;ae<Oe.length;ae++){var me=Oe[ae];sn(me.objId,!0),Q(me.content),Q("endobj")}ar.publish("postPutAdditionalObjects")})(),_=[],(function(){for(var ae in xt)xt.hasOwnProperty(ae)&&(b===!1||b===!0&&A.hasOwnProperty(ae))&&co(xt[ae])})(),(function(){var ae;for(ae in Wt)Wt.hasOwnProperty(ae)&&qo(Wt[ae])})(),(function(){for(var ae in Rn)Rn.hasOwnProperty(ae)&&us(Rn[ae])})(),(function(ae){var me;for(me in Rt)Rt.hasOwnProperty(me)&&(Rt[me]instanceof Bc?Uo(Rt[me]):Rt[me]instanceof Lu&&_o(Rt[me],ae))})(_),ar.publish("putResources"),_.forEach(jr),jr({resourcesOid:Di,objectOid:Number.MAX_SAFE_INTEGER}),ar.publish("postPutResources"),g!==null&&(zr.oid=Tr(),Q("<<"),Q("/Filter /Standard"),Q("/V "+zr.v),Q("/R "+zr.r),Q("/U <"+zr.toHexString(zr.U)+">"),Q("/O <"+zr.toHexString(zr.O)+">"),Q("/P "+zr.P),Q(">>"),Q("endobj")),Hn(),To();var q=ke;return uo(),vr(),Q("startxref"),Q(""+q),Q("%%EOF"),pe(Ke[Y]),Ee.join(`
`)},lr=v.__private__.getBlob=function(_){return new Blob([Ue(_)],{type:"application/pdf"})},Ln=v.output=v.__private__.output=(ki=function(_,q){switch(typeof(q=q||{})=="string"?q={filename:q}:q.filename=q.filename||"generated.pdf",_){case void 0:return di();case"save":v.save(q.filename);break;case"arraybuffer":return Ue(di());case"blob":return lr(di());case"bloburi":case"bloburl":if(Jt.URL!==void 0&&typeof Jt.URL.createObjectURL=="function")return Jt.URL&&Jt.URL.createObjectURL(lr(di()))||void 0;Qr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",me=di();try{ae=X5(me)}catch{ae=X5(unescape(encodeURIComponent(me)))}return"data:application/pdf;filename="+q.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Jt)==="[object Window]"){var Ce="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",$e=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';q.pdfObjectUrl&&(Ce=q.pdfObjectUrl,$e="");var Qe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ce+'"'+$e+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(q)+");<\/script></body></html>",ft=Jt.open();return ft!==null&&ft.document.write(Qe),ft}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Jt)==="[object Window]"){var wt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+q.filename+'" width="500px" height="400px" /></body></html>',Ft=Jt.open();if(Ft!==null){Ft.document.write(wt);var At=this;Ft.document.documentElement.querySelector("#pdfViewer").onload=function(){Ft.document.title=q.filename,Ft.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(At.output("bloburl"))}}return Ft}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Jt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var pr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",q)+'"></iframe></body></html>',Hr=Jt.open();if(Hr!==null&&(Hr.document.write(pr),Hr.document.title=q.filename),Hr||typeof safari>"u")return Hr;break;case"datauri":case"dataurl":return Jt.document.location.href=this.output("datauristring",q);default:return null}},ki.foo=function(){try{return ki.apply(this,arguments)}catch(ae){var _=ae.stack||"";~_.indexOf(" at ")&&(_=_.split(" at ")[1]);var q="Error in function "+_.split(`
`)[0].split("<")[0]+": "+ae.message;if(!Jt.console)throw new Error(q);Jt.console.error(q,ae),Jt.alert&&alert(q)}},ki.foo.bar=ki,ki.foo),ho=function(_){return Array.isArray(Mi)===!0&&Mi.indexOf(_)>-1};switch(n){case"pt":Pt=1;break;case"mm":Pt=72/25.4;break;case"cm":Pt=72/2.54;break;case"in":Pt=72;break;case"px":Pt=ho("px_scaling")==1?.75:96/72;break;case"pc":case"em":Pt=12;break;case"ex":Pt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Pt=n}var zr=null;ne(),ce();var Ns=v.__private__.getPageInfo=v.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Mt[_].objId,pageNumber:_,pageContext:Mt[_]}},za=v.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var q in Mt)if(Mt[q].objId===_)break;return Ns(q)},Oa=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:Mt[Y].objId,pageNumber:Y,pageContext:Mt[Y]}};v.addPage=function(){return aa.apply(this,arguments),this},v.setPage=function(){return hs.apply(this,arguments),pe.call(this,Ke[Y]),this},v.insertPage=function(_){return this.addPage(),this.movePage(Y,_),this},v.movePage=function(_,q){var ae,me;if(_>q){ae=Ke[_],me=Mt[_];for(var Ce=_;Ce>q;Ce--)Ke[Ce]=Ke[Ce-1],Mt[Ce]=Mt[Ce-1];Ke[q]=ae,Mt[q]=me,this.setPage(q)}else if(_<q){ae=Ke[_],me=Mt[_];for(var $e=_;$e<q;$e++)Ke[$e]=Ke[$e+1],Mt[$e]=Mt[$e+1];Ke[q]=ae,Mt[q]=me,this.setPage(q)}return this},v.deletePage=function(){return ds.apply(this,arguments),this},v.__private__.text=v.text=function(_,q,ae,me,Ce){var $e,Qe,ft,wt,Ft,At,pr,Hr,Or,m=(me=me||{}).scope||this;if(typeof _=="number"&&typeof q=="number"&&(typeof ae=="string"||Array.isArray(ae))){var I=ae;ae=q,q=_,_=I}if(arguments[3]instanceof Nt==0?(ft=arguments[4],wt=arguments[5],qr(pr=arguments[3])==="object"&&pr!==null||(typeof ft=="string"&&(wt=ft,ft=null),typeof pr=="string"&&(wt=pr,pr=null),typeof pr=="number"&&(ft=pr,pr=null),me={flags:pr,angle:ft,align:wt})):(w("The transform parameter of text() with a Matrix value"),Or=Ce),isNaN(q)||isNaN(ae)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return m;var M,ee="",Ie=typeof me.lineHeightFactor=="number"?me.lineHeightFactor:fi,Be=m.internal.scaleFactor;function ot(br){return br=br.split("	").join(Array(me.TabLen||9).join(" ")),ci(br,pr)}function Dt(br){for(var Rr,cn=br.concat(),Tn=[],Zo=cn.length;Zo--;)typeof(Rr=cn.shift())=="string"?Tn.push(Rr):Array.isArray(br)&&(Rr.length===1||Rr[1]===void 0&&Rr[2]===void 0)?Tn.push(Rr[0]):Tn.push([Rr[0],Rr[1],Rr[2]]);return Tn}function Vr(br,Rr){var cn;if(typeof br=="string")cn=Rr(br)[0];else if(Array.isArray(br)){for(var Tn,Zo,pc=br.concat(),Sl=[],$s=pc.length;$s--;)typeof(Tn=pc.shift())=="string"?Sl.push(Rr(Tn)[0]):Array.isArray(Tn)&&typeof Tn[0]=="string"&&(Zo=Rr(Tn[0],Tn[1],Tn[2]),Sl.push([Zo[0],Zo[1],Zo[2]]));cn=Sl}return cn}var ur=!1,Gr=!0;if(typeof _=="string")ur=!0;else if(Array.isArray(_)){var zn=_.concat();Qe=[];for(var Pi,Yr=zn.length;Yr--;)(typeof(Pi=zn.shift())!="string"||Array.isArray(Pi)&&typeof Pi[0]!="string")&&(Gr=!1);ur=Gr}if(ur===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var gi=ge/m.internal.scaleFactor,Io=gi*(Ie-1);switch(me.baseline){case"bottom":ae-=Io;break;case"top":ae+=gi-Io;break;case"hanging":ae+=gi-2*Io;break;case"middle":ae+=gi/2-Io}if((At=me.maxWidth||0)>0&&(typeof _=="string"?_=m.splitTextToSize(_,At):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(br,Rr){return br.concat(m.splitTextToSize(Rr,At))},[]))),$e={text:_,x:q,y:ae,options:me,mutex:{pdfEscape:ci,activeFontKey:jt,fonts:xt,activeFontSize:ge}},ar.publish("preProcessText",$e),_=$e.text,ft=(me=$e.options).angle,Or instanceof Nt==0&&ft&&typeof ft=="number"){ft*=Math.PI/180,me.rotationDirection===0&&(ft=-ft),B===V&&(ft=-ft);var Os=Math.cos(ft),fc=Math.sin(ft);Or=new Nt(Os,fc,-fc,Os,0,0)}else ft&&ft instanceof Nt&&(Or=ft);B!==V||Or||(Or=li),(Ft=me.charSpace||Ui)!==void 0&&(ee+=C(z(Ft))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Hr=me.horizontalScale)!==void 0&&(ee+=C(100*Hr)+` Tz
`),me.lang;var an=-1,Qo=me.renderingMode!==void 0?me.renderingMode:me.stroke,ys=m.internal.getCurrentPageInfo().pageContext;switch(Qo){case 0:case!1:case"fill":an=0;break;case 1:case!0:case"stroke":an=1;break;case 2:case"fillThenStroke":an=2;break;case 3:case"invisible":an=3;break;case 4:case"fillAndAddForClipping":an=4;break;case 5:case"strokeAndAddPathForClipping":an=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":an=6;break;case 7:case"addToPathForClipping":an=7}var ru=ys.usedRenderingMode!==void 0?ys.usedRenderingMode:-1;an!==-1?ee+=an+` Tr
`:ru!==-1&&(ee+=`0 Tr
`),an!==-1&&(ys.usedRenderingMode=an),wt=me.align||"left";var mo,fa=ge*Ie,xl=m.internal.pageSize.getWidth(),vl=xt[jt];Ft=me.charSpace||Ui,At=me.maxWidth||0,pr=Object.assign({autoencode:!0,noBOM:!0},me.flags);var Vs=[],Ro=function(br){return m.getStringUnitWidth(br,{font:vl,charSpace:Ft,fontSize:ge,doKerning:!1})*ge/Be};if(Object.prototype.toString.call(_)==="[object Array]"){var go;Qe=Dt(_),wt!=="left"&&(mo=Qe.map(Ro));var yo,pa=0;if(wt==="right"){q-=mo[0],_=[],Yr=Qe.length;for(var xs=0;xs<Yr;xs++)xs===0?(yo=Bn(q),go=ko(ae)):(yo=z(pa-mo[xs]),go=-fa),_.push([Qe[xs],yo,go]),pa=mo[xs]}else if(wt==="center"){q-=mo[0]/2,_=[],Yr=Qe.length;for(var Ms=0;Ms<Yr;Ms++)Ms===0?(yo=Bn(q),go=ko(ae)):(yo=z((pa-mo[Ms])/2),go=-fa),_.push([Qe[Ms],yo,go]),pa=mo[Ms]}else if(wt==="left"){_=[],Yr=Qe.length;for(var Ds=0;Ds<Yr;Ds++)_.push(Qe[Ds])}else if(wt==="justify"&&vl.encoding==="Identity-H"){_=[],Yr=Qe.length,At=At!==0?At:xl;for(var vs=0,yn=0;yn<Yr;yn++)if(go=yn===0?ko(ae):-fa,yo=yn===0?Bn(q):vs,yn<Yr-1){var $a=z((At-mo[yn])/(Qe[yn].split(" ").length-1)),bs=Qe[yn].split(" ");_.push([bs[0]+" ",yo,go]),vs=0;for(var Xo=1;Xo<bs.length;Xo++){var Ua=(Ro(bs[Xo-1]+" "+bs[Xo])-Ro(bs[Xo]))*Be+$a;Xo==bs.length-1?_.push([bs[Xo],Ua,0]):_.push([bs[Xo]+" ",Ua,0]),vs-=Ua}}else _.push([Qe[yn],yo,go]);_.push(["",vs,0])}else{if(wt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],Yr=Qe.length,At=At!==0?At:xl,yn=0;yn<Yr;yn++){go=yn===0?ko(ae):-fa,yo=yn===0?Bn(q):0;var qa=Qe[yn].split(" ").length-1,bl=qa>0?(At-mo[yn])/qa:0;yn<Yr-1?Vs.push(C(z(bl))):Vs.push(0),_.push([Qe[yn],yo,go])}}}(typeof me.R2L=="boolean"?me.R2L:at)===!0&&(_=Vr(_,function(br,Rr,cn){return[br.split("").reverse().join(""),Rr,cn]})),$e={text:_,x:q,y:ae,options:me,mutex:{pdfEscape:ci,activeFontKey:jt,fonts:xt,activeFontSize:ge}},ar.publish("postProcessText",$e),_=$e.text,M=$e.mutex.isHex||!1;var wl=xt[jt].encoding;wl!=="WinAnsiEncoding"&&wl!=="StandardEncoding"||(_=Vr(_,function(br,Rr,cn){return[ot(br),Rr,cn]})),Qe=Dt(_),_=[];for(var Ws,ma,ga,Ha=Array.isArray(Qe[0])?1:0,ya="",Ga=function(br,Rr,cn){var Tn="";return cn instanceof Nt?(cn=typeof me.angle=="number"?Ci(cn,new Nt(1,0,0,1,br,Rr)):Ci(new Nt(1,0,0,1,br,Rr),cn),B===V&&(cn=Ci(new Nt(1,0,0,-1,0,0),cn)),Tn=cn.join(" ")+` Tm
`):Tn=C(br)+" "+C(Rr)+` Td
`,Tn},ln=0;ln<Qe.length;ln++){switch(ya="",Ha){case 1:ga=(M?"<":"(")+Qe[ln][0]+(M?">":")"),Ws=parseFloat(Qe[ln][1]),ma=parseFloat(Qe[ln][2]);break;case 0:ga=(M?"<":"(")+Qe[ln]+(M?">":")"),Ws=Bn(q),ma=ko(ae)}Vs!==void 0&&Vs[ln]!==void 0&&(ya=Vs[ln]+` Tw
`),ln===0?_.push(ya+Ga(Ws,ma,Or)+ga):Ha===0?_.push(ya+ga):Ha===1&&_.push(ya+Ga(Ws,ma,Or)+ga)}_=Ha===0?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var Hi=`BT
/`;return Hi+=jt+" "+ge+` Tf
`,Hi+=C(ge*Ie)+` TL
`,Hi+=$i+`
`,Hi+=ee,Hi+=_,Q(Hi+="ET"),A[jt]=!0,m};var Ls=v.__private__.clip=v.clip=function(_){return Q(_==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return Ls("evenodd")},v.__private__.discardPath=v.discardPath=function(){return Q("n"),this};var Ao=v.__private__.isValidStyle=function(_){var q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&(q=!0),q};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(_){return Ao(_)&&(h=_),this};var la=v.__private__.getStyle=v.getStyle=function(_){var q=h;switch(_){case"D":case"S":q="S";break;case"F":q="f";break;case"FD":case"DF":q="B";break;case"f":case"f*":case"B":case"B*":q=_}return q},or=v.close=function(){return Q("h"),this};v.stroke=function(){return Q("S"),this},v.fill=function(_){return ti("f",_),this},v.fillEvenOdd=function(_){return ti("f*",_),this},v.fillStroke=function(_){return ti("B",_),this},v.fillStrokeEvenOdd=function(_){return ti("B*",_),this};var ti=function(_,q){qr(q)==="object"?Va(q,_):Q(_)},Bs=function(_){_===null||B===V&&_===void 0||(_=la(_),Q(_))};function ca(_,q,ae,me,Ce){var $e=new Lu(q||this.boundingBox,ae||this.xStep,me||this.yStep,this.gState,Ce||this.matrix);$e.stream=this.stream;var Qe=_+"$$"+this.cloneIndex+++"$$";return Nn(Qe,$e),$e}var Va=function(_,q){var ae=er[_.key],me=Rt[ae];if(me instanceof Bc)Q("q"),Q(Ma(q)),me.gState&&v.setGState(me.gState),Q(_.matrix.toString()+" cm"),Q("/"+ae+" sh"),Q("Q");else if(me instanceof Lu){var Ce=new Nt(1,0,0,-1,0,mi());_.matrix&&(Ce=Ce.multiply(_.matrix||li),ae=ca.call(me,_.key,_.boundingBox,_.xStep,_.yStep,Ce).id),Q("q"),Q("/Pattern cs"),Q("/"+ae+" scn"),me.gState&&v.setGState(me.gState),Q(q),Q("Q")}},Ma=function(_){switch(_){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Fs=v.moveTo=function(_,q){return Q(C(z(_))+" "+C(W(q))+" m"),this},hi=v.lineTo=function(_,q){return Q(C(z(_))+" "+C(W(q))+" l"),this},fo=v.curveTo=function(_,q,ae,me,Ce,$e){return Q([C(z(_)),C(W(q)),C(z(ae)),C(W(me)),C(z(Ce)),C(W($e)),"c"].join(" ")),this};v.__private__.line=v.line=function(_,q,ae,me,Ce){if(isNaN(_)||isNaN(q)||isNaN(ae)||isNaN(me)||!Ao(Ce))throw new Error("Invalid arguments passed to jsPDF.line");return B===$?this.lines([[ae-_,me-q]],_,q,[1,1],Ce||"S"):this.lines([[ae-_,me-q]],_,q,[1,1]).stroke()},v.__private__.lines=v.lines=function(_,q,ae,me,Ce,$e){var Qe,ft,wt,Ft,At,pr,Hr,Or,m,I,M,ee;if(typeof _=="number"&&(ee=ae,ae=q,q=_,_=ee),me=me||[1,1],$e=$e||!1,isNaN(q)||isNaN(ae)||!Array.isArray(_)||!Array.isArray(me)||!Ao(Ce)||typeof $e!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Fs(q,ae),Qe=me[0],ft=me[1],Ft=_.length,I=q,M=ae,wt=0;wt<Ft;wt++)(At=_[wt]).length===2?(I=At[0]*Qe+I,M=At[1]*ft+M,hi(I,M)):(pr=At[0]*Qe+I,Hr=At[1]*ft+M,Or=At[2]*Qe+I,m=At[3]*ft+M,I=At[4]*Qe+I,M=At[5]*ft+M,fo(pr,Hr,Or,m,I,M));return $e&&or(),Bs(Ce),this},v.path=function(_){for(var q=0;q<_.length;q++){var ae=_[q],me=ae.c;switch(ae.op){case"m":Fs(me[0],me[1]);break;case"l":hi(me[0],me[1]);break;case"c":fo.apply(this,me);break;case"h":or()}}return this},v.__private__.rect=v.rect=function(_,q,ae,me,Ce){if(isNaN(_)||isNaN(q)||isNaN(ae)||isNaN(me)||!Ao(Ce))throw new Error("Invalid arguments passed to jsPDF.rect");return B===$&&(me=-me),Q([C(z(_)),C(W(q)),C(z(ae)),C(z(me)),"re"].join(" ")),Bs(Ce),this},v.__private__.triangle=v.triangle=function(_,q,ae,me,Ce,$e,Qe){if(isNaN(_)||isNaN(q)||isNaN(ae)||isNaN(me)||isNaN(Ce)||isNaN($e)||!Ao(Qe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-_,me-q],[Ce-ae,$e-me],[_-Ce,q-$e]],_,q,[1,1],Qe,!0),this},v.__private__.roundedRect=v.roundedRect=function(_,q,ae,me,Ce,$e,Qe){if(isNaN(_)||isNaN(q)||isNaN(ae)||isNaN(me)||isNaN(Ce)||isNaN($e)||!Ao(Qe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ft=4/3*(Math.SQRT2-1);return Ce=Math.min(Ce,.5*ae),$e=Math.min($e,.5*me),this.lines([[ae-2*Ce,0],[Ce*ft,0,Ce,$e-$e*ft,Ce,$e],[0,me-2*$e],[0,$e*ft,-Ce*ft,$e,-Ce,$e],[2*Ce-ae,0],[-Ce*ft,0,-Ce,-$e*ft,-Ce,-$e],[0,2*$e-me],[0,-$e*ft,Ce*ft,-$e,Ce,-$e]],_+Ce,q,[1,1],Qe,!0),this},v.__private__.ellipse=v.ellipse=function(_,q,ae,me,Ce){if(isNaN(_)||isNaN(q)||isNaN(ae)||isNaN(me)||!Ao(Ce))throw new Error("Invalid arguments passed to jsPDF.ellipse");var $e=4/3*(Math.SQRT2-1)*ae,Qe=4/3*(Math.SQRT2-1)*me;return Fs(_+ae,q),fo(_+ae,q-Qe,_+$e,q-me,_,q-me),fo(_-$e,q-me,_-ae,q-Qe,_-ae,q),fo(_-ae,q+Qe,_-$e,q+me,_,q+me),fo(_+$e,q+me,_+ae,q+Qe,_+ae,q),Bs(Ce),this},v.__private__.circle=v.circle=function(_,q,ae,me){if(isNaN(_)||isNaN(q)||isNaN(ae)||!Ao(me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,q,ae,ae,me)},v.setFont=function(_,q,ae){return ae&&(q=U(q,ae)),jt=Fa(_,q,{disableWarning:!1}),this};var Co=v.__private__.getFont=v.getFont=function(){return xt[Fa.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var _,q,ae={};for(_ in Ut)if(Ut.hasOwnProperty(_))for(q in ae[_]=[],Ut[_])Ut[_].hasOwnProperty(q)&&ae[_].push(q);return ae},v.addFont=function(_,q,ae,me,Ce){var $e=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&$e.indexOf(arguments[3])!==-1?Ce=arguments[3]:arguments[3]&&$e.indexOf(arguments[3])==-1&&(ae=U(ae,me)),Ps.call(this,_,q,ae,Ce=Ce||"Identity-H")};var fi,gn=r.lineWidth||.200025,Bt=v.__private__.getLineWidth=v.getLineWidth=function(){return gn},Go=v.__private__.setLineWidth=v.setLineWidth=function(_){return gn=_,Q(C(z(_))+" w"),this};v.__private__.setLineDash=It.API.setLineDash=It.API.setLineDashPattern=function(_,q){if(_=_||[],q=q||0,isNaN(q)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(ae){return C(z(ae))}).join(" "),q=C(z(q)),Q("["+_+"] "+q+" d"),this};var Ii=v.__private__.getLineHeight=v.getLineHeight=function(){return ge*fi};v.__private__.getLineHeight=v.getLineHeight=function(){return ge*fi};var yl=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(fi=_),this},ps=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return fi};yl(r.lineHeight);var Bn=v.__private__.getHorizontalCoordinate=function(_){return z(_)},ko=v.__private__.getVerticalCoordinate=function(_){return B===V?_:Mt[Y].mediaBox.topRightY-Mt[Y].mediaBox.bottomLeftY-z(_)},ua=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(_){return C(Bn(_))},Er=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(_){return C(ko(_))},zs=r.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return Wi(zs)},v.__private__.setStrokeColor=v.setDrawColor=function(_,q,ae,me){return zs=mn({ch1:_,ch2:q,ch3:ae,ch4:me,pdfColorType:"draw",precision:2}),Q(zs),this};var Da=r.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return Wi(Da)},v.__private__.setFillColor=v.setFillColor=function(_,q,ae,me){return Da=mn({ch1:_,ch2:q,ch3:ae,ch4:me,pdfColorType:"fill",precision:2}),Q(Da),this};var $i=r.textColor||"0 g",po=v.__private__.getTextColor=v.getTextColor=function(){return Wi($i)};v.__private__.setTextColor=v.setTextColor=function(_,q,ae,me){return $i=mn({ch1:_,ch2:q,ch3:ae,ch4:me,pdfColorType:"text",precision:3}),this};var Ui=r.charSpace,Ko=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(Ui||0)};v.__private__.setCharSpace=v.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ui=_,this};var qi=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(_){var q=v.CapJoinStyles[_];if(q===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return qi=q,Q(q+" J"),this};var da=0;v.__private__.setLineJoin=v.setLineJoin=function(_){var q=v.CapJoinStyles[_];if(q===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return da=q,Q(q+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(C(z(_))+" M"),this},v.GState=Df,v.setGState=function(_){(_=typeof _=="string"?Wt[kr[_]]:Yo(null,_)).equals(Br)||(Q("/"+_.id+" gs"),Br=_)};var Yo=function(_,q){if(!_||!kr[_]){var ae=!1;for(var me in Wt)if(Wt.hasOwnProperty(me)&&Wt[me].equals(q)){ae=!0;break}if(ae)q=Wt[me];else{var Ce="GS"+(Object.keys(Wt).length+1).toString(10);Wt[Ce]=q,q.id=Ce}return _&&(kr[_]=q.id),ar.publish("addGState",q),q}};v.addGState=function(_,q){return Yo(_,q),this},v.saveGraphicsState=function(){return Q("q"),sr.push({key:jt,size:ge,color:$i}),this},v.restoreGraphicsState=function(){Q("Q");var _=sr.pop();return jt=_.key,ge=_.size,$i=_.color,Br=null,this},v.setCurrentTransformationMatrix=function(_){return Q(_.toString()+" cm"),this},v.comment=function(_){return Q("#"+_),this};var pi=function(_,q){var ae=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function($e){isNaN($e)||(ae=parseFloat($e))}});var me=q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return me},set:function($e){isNaN($e)||(me=parseFloat($e))}});var Ce="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ce},set:function($e){Ce=$e.toString()}}),this},ms=function(_,q,ae,me){pi.call(this,_,q),this.type="rect";var Ce=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ce},set:function(Qe){isNaN(Qe)||(Ce=parseFloat(Qe))}});var $e=me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return $e},set:function(Qe){isNaN(Qe)||($e=parseFloat(Qe))}}),this},Jo=function(){this.page=$t,this.currentPage=Y,this.pages=Ke.slice(0),this.pagesContext=Mt.slice(0),this.x=bt,this.y=Cr,this.matrix=ir,this.width=Eo(Y),this.height=Ri(Y),this.outputDestination=_e,this.id="",this.objectNumber=-1};Jo.prototype.restore=function(){$t=this.page,Y=this.currentPage,Mt=this.pagesContext,Ke=this.pages,bt=this.x,Cr=this.y,ir=this.matrix,Wa(Y,this.width),Gn(Y,this.height),_e=this.outputDestination};var ri=function(_,q,ae,me,Ce){Pn.push(new Jo),$t=Y=0,Ke=[],bt=_,Cr=q,ir=Ce,Ho([ae,me])};for(var jo in v.beginFormObject=function(_,q,ae,me,Ce){return ri(_,q,ae,me,Ce),this},v.endFormObject=function(_){return(function(q){if(So[q])Pn.pop().restore();else{var ae=new Jo,me="Xo"+(Object.keys(Rn).length+1).toString(10);ae.id=me,So[q]=me,Rn[me]=ae,ar.publish("addFormObject",ae),Pn.pop().restore()}})(_),this},v.doFormObject=function(_,q){var ae=Rn[So[_]];return Q("q"),Q(q.toString()+" cm"),Q("/"+ae.id+" Do"),Q("Q"),this},v.getFormObject=function(_){var q=Rn[So[_]];return{x:q.x,y:q.y,width:q.width,height:q.height,matrix:q.matrix}},v.save=function(_,q){return _=_||"generated.pdf",(q=q||{}).returnPromise=q.returnPromise||!1,q.returnPromise===!1?(Nc(lr(di()),_),typeof Nc.unload=="function"&&Jt.setTimeout&&setTimeout(Nc.unload,911),this):new Promise(function(ae,me){try{var Ce=Nc(lr(di()),_);typeof Nc.unload=="function"&&Jt.setTimeout&&setTimeout(Nc.unload,911),ae(Ce)}catch($e){me($e.message)}})},It.API)It.API.hasOwnProperty(jo)&&(jo==="events"&&It.API.events.length?(function(_,q){var ae,me,Ce;for(Ce=q.length-1;Ce!==-1;Ce--)ae=q[Ce][0],me=q[Ce][1],_.subscribe.apply(_,[ae].concat(typeof me=="function"?[me]:me))})(ar,It.API.events):v[jo]=It.API[jo]);function Eo(_){return Mt[_].mediaBox.topRightX-Mt[_].mediaBox.bottomLeftX}function Wa(_,q){Mt[_].mediaBox.topRightX=q+Mt[_].mediaBox.bottomLeftX}function Ri(_){return Mt[_].mediaBox.topRightY-Mt[_].mediaBox.bottomLeftY}function Gn(_,q){Mt[_].mediaBox.topRightY=q+Mt[_].mediaBox.bottomLeftY}var ha=v.getPageWidth=function(_){return Eo(_=_||Y)/Pt},Fn=v.setPageWidth=function(_,q){Wa(_,q*Pt)},mi=v.getPageHeight=function(_){return Ri(_=_||Y)/Pt},gs=v.setPageHeight=function(_,q){Gn(_,q*Pt)};return v.internal={pdfEscape:ci,getStyle:la,getFont:Co,getFontSize:He,getCharSpace:Ko,getTextColor:po,getLineHeight:Ii,getLineHeightFactor:ps,getLineWidth:Bt,write:Je,getHorizontalCoordinate:Bn,getVerticalCoordinate:ko,getCoordinateString:ua,getVerticalCoordinateString:Er,collections:{},newObject:Tr,newAdditionalObject:qn,newObjectDeferred:Fr,newObjectDeferredBegin:sn,getFilters:ji,putStream:Ei,events:ar,scaleFactor:Pt,pageSize:{getWidth:function(){return ha(Y)},setWidth:function(_){Fn(Y,_)},getHeight:function(){return mi(Y)},setHeight:function(_){gs(Y,_)}},encryptionOptions:g,encryption:zr,getEncryptor:function(_){return g!==null?zr.encryptor(_,0):function(q){return q}},output:Ln,getNumberOfPages:ui,pages:Ke,out:Q,f2:P,f3:S,getPageInfo:Ns,getPageInfoByObjId:za,getCurrentPageInfo:Oa,getPDFVersion:E,Point:pi,Rectangle:ms,Matrix:Nt,hasHotfix:ho},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return ha(Y)},set:function(_){Fn(Y,_)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return mi(Y)},set:function(_){gs(Y,_)},enumerable:!0,configurable:!0}),(function(_){for(var q=0,ae=tt.length;q<ae;q++){var me=Ps.call(this,_[q][0],_[q][1],_[q][2],tt[q][3],!0);b===!1&&(A[me]=!0);var Ce=_[q][0].split("-");gl({id:me,fontName:Ce[0],fontStyle:Ce[1]||""})}ar.publish("addFonts",{fonts:xt,dictionary:Ut})}).call(v,tt),jt="F1",aa(o,t),ar.publish("initialized"),v}ju.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},ju.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ju.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},ju.prototype.processOwnerPassword=function(r,e){return h0(d0(e).substr(0,5),r)},ju.prototype.encryptor=function(r,e){var t=d0(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return h0(t,n)}},Df.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||qr(r)!==qr(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},It.API={events:[]},It.version="3.0.3";var En=It.API,J0=1,Qc=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Au=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},rr=function(r){return r.toFixed(2)},Wl=function(r){return r.toFixed(5)};En.__acroform__={};var Wo=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},r2=function(r){return r*J0},Aa=function(r){var e=new rv,t=_t.internal.getHeight(r)||0,n=_t.internal.getWidth(r)||0;return e.BBox=[0,0,Number(rr(n)),Number(rr(t))],e},G4=En.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},K4=En.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},Y4=En.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},Wn=En.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Y4(r,e-1)},$n=En.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G4(r,e-1)},Un=En.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return K4(r,e-1)},J4=En.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,o=r[0],a=r[1],c=r[2],u=r[3],f={};return f.lowerLeft_X=t(o)||0,f.lowerLeft_Y=n(a+u)||0,f.upperRight_X=t(o+c)||0,f.upperRight_Y=n(a)||0,[Number(rr(f.lowerLeft_X)),Number(rr(f.lowerLeft_Y)),Number(rr(f.upperRight_X)),Number(rr(f.upperRight_Y))]},Q4=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=f0(r,t),o=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+o+" "+rr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Aa(r);return a.scope=r.scope,a.stream=e.join(`
`),a}},f0=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=r.multiline?o.map(function(P){return P.split(`
`)}):o.map(function(P){return[P]});var a=t,c=_t.internal.getHeight(r)||0;c=c<0?-c:c;var u=_t.internal.getWidth(r)||0;u=u<0?-u:u;var f=function(P,S,z){if(P+1<o.length){var W=S+" "+o[P+1][0];return df(W,r,z).width<=u-4}return!1};a++;e:for(;a>0;){e="",a--;var h,g,b=df("3",r,a).height,A=r.multiline?c-a:(c-b)/2,v=A+=2,F=0,E=0,N=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+df(e,r,a=12).width+", FieldWidth:"+u+`
`;break}for(var j="",$=0,V=0;V<o.length;V++)if(o.hasOwnProperty(V)){var B=!1;if(o[V].length!==1&&N!==o[V].length-1){if((b+2)*($+2)+2>c)continue e;j+=o[V][N],B=!0,E=V,V--}else{j=(j+=o[V][N]+" ").substr(j.length-1)==" "?j.substr(0,j.length-1):j;var X=parseInt(V),se=f(X,j,a),U=V>=o.length-1;if(se&&!U){j+=" ",N=0;continue}if(se||U){if(U)E=X;else if(r.multiline&&(b+2)*($+2)+2>c)continue e}else{if(!r.multiline||(b+2)*($+2)+2>c)continue e;E=X}}for(var C="",w=F;w<=E;w++){var O=o[w];if(r.multiline){if(w===E){C+=O[N]+" ",N=(N+1)%O.length;continue}if(w===F){C+=O[O.length-1]+" ";continue}}C+=O[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,g=df(C,r,a).width,r.textAlign){case"right":h=u-g-2;break;case"center":h=(u-g)/2;break;default:h=2}e+=rr(h)+" "+rr(v)+` Td
`,e+="("+Qc(C)+`) Tj
`,e+=-rr(h)+` 0 Td
`,v=-(a+2),g=0,F=B?E:E+1,$++,j=""}break}return n.text=e,n.fontSize=a,n},df=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:o}},X4={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Z4=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},eT=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(oa.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(X4)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");J0=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new nv,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o];a.objId=void 0,a.hasAnnotation&&Z4(a,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,o){var a=!n;for(var c in n||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(c)){var u=n[c],f=[],h=u.Rect;if(u.Rect&&(u.Rect=J4(u.Rect,o)),o.internal.newObjectDeferredBegin(u.objId,!0),u.DA=_t.createDefaultAppearanceStream(u),qr(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(f=u.getKeyValueListForStream()),u.Rect=h,u.hasAppearanceStream&&!u.appearanceStreamContent){var g=Q4(u);f.push({key:"AP",value:"<</N "+g+">>"}),o.internal.acroformPlugin.xForms.push(g)}if(u.appearanceStreamContent){var b="";for(var A in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(A)){var v=u.appearanceStreamContent[A];if(b+="/"+A+" ",b+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var c in v)if(v.hasOwnProperty(c)){var F=v[c];typeof F=="function"&&(F=F.call(o,u)),b+="/"+c+" "+F+" ",o.internal.acroformPlugin.xForms.indexOf(F)>=0||o.internal.acroformPlugin.xForms.push(F)}}else typeof(F=v)=="function"&&(F=F.call(o,u)),b+="/"+c+" "+F,o.internal.acroformPlugin.xForms.indexOf(F)>=0||o.internal.acroformPlugin.xForms.push(F);b+=">>"}f.push({key:"AP",value:`<<
`+b+">>"})}o.internal.putStream({additionalKeyValues:f,objectId:u.objId}),o.internal.out("endobj")}a&&(function(E,N){for(var j in E)if(E.hasOwnProperty(j)){var $=j,V=E[j];N.internal.newObjectDeferredBegin(V.objId,!0),qr(V)==="object"&&typeof V.putStream=="function"&&V.putStream(),delete E[$]}})(o.internal.acroformPlugin.xForms,o)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},tv=En.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(c){return c};if(Array.isArray(r)){for(var o="[",a=0;a<r.length;a++)switch(a!==0&&(o+=" "),qr(r[a])){case"boolean":case"number":case"object":o+=r[a].toString();break;case"string":r[a].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),o+="("+Qc(n(r[a].toString()))+")"):o+=r[a].toString()}return o+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Vm=function(r,e,t){var n=function(o){return o};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+Qc(n(r))+")"},ka=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ka.prototype.toString=function(){return this.objId+" 0 R"},ka.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},ka.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],o=this[n];o&&(Array.isArray(o)?r.push({key:n,value:tv(o,this.objId,this.scope)}):o instanceof ka?(o.scope=this.scope,r.push({key:n,value:o.objId+" 0 R"})):typeof o!="function"&&r.push({key:n,value:o}))}return r};var rv=function(){ka.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};Wo(rv,ka);var nv=function(){ka.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Qc(t(r))+")"}},set:function(t){r=t}})};Wo(nv,ka);var oa=function r(){ka.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');e=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Wn(e,3)},set:function(j){j?this.F=$n(e,3):this.F=Un(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');t=j}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(j){n=j!==void 0?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(j){n[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(j){n[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(j){n[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(j){n[3]=j}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Wf)return;a="FieldObject"+r.FieldNum++}var j=function($){return $};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+Qc(j(a))+")"},set:function(j){a=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(j){a=j}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(j){c=j}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(j){u=j}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(j){f=j}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/J0:h},set:function(j){h=j}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(j){g=j}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof Wf||this instanceof zc))return Vm(b,this.objId,this.scope)},set:function(j){j=j.toString(),b=j}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof Ti==0?Vm(A,this.objId,this.scope):A},set:function(j){j=j.toString(),A=this instanceof Ti==0?j.substr(0,1)==="("?Au(j.substr(1,j.length-2)):Au(j):j}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ti==1?Au(A.substr(1,A.length-1)):A},set:function(j){j=j.toString(),A=this instanceof Ti==1?"/"+j:j}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Ti==0?Vm(v,this.objId,this.scope):v},set:function(j){j=j.toString(),v=this instanceof Ti==0?j.substr(0,1)==="("?Au(j.substr(1,j.length-2)):Au(j):j}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ti==1?Au(v.substr(1,v.length-1)):v},set:function(j){j=j.toString(),v=this instanceof Ti==1?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var F,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(j){j=!!j,E=j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(F)return F},set:function(j){F=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,1)},set:function(j){j?this.Ff=$n(this.Ff,1):this.Ff=Un(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,2)},set:function(j){j?this.Ff=$n(this.Ff,2):this.Ff=Un(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,3)},set:function(j){j?this.Ff=$n(this.Ff,3):this.Ff=Un(this.Ff,3)}});var N=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(N!==null)return N},set:function(j){if([0,1,2].indexOf(j)===-1)throw new Error('Invalid value "'+j+'" for attribute Q supplied.');N=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch(N){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:N=2;break;case"center":case 1:N=1;break;default:N=0}}})};Wo(oa,ka);var Fu=function(){oa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return tv(e,this.objId,this.scope)},set:function(t){var n,o;o=[],typeof(n=t)=="string"&&(o=(function(a,c,u){u||(u=1);for(var f,h=[];f=c.exec(a);)h.push(f[u]);return h})(n,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,18)},set:function(t){t?this.Ff=$n(this.Ff,18):this.Ff=Un(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=$n(this.Ff,19):this.Ff=Un(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,20)},set:function(t){t?(this.Ff=$n(this.Ff,20),e.sort()):this.Ff=Un(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,22)},set:function(t){t?this.Ff=$n(this.Ff,22):this.Ff=Un(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,23)},set:function(t){t?this.Ff=$n(this.Ff,23):this.Ff=Un(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,27)},set:function(t){t?this.Ff=$n(this.Ff,27):this.Ff=Un(this.Ff,27)}}),this.hasAppearanceStream=!1};Wo(Fu,oa);var zu=function(){Fu.call(this),this.fontName="helvetica",this.combo=!1};Wo(zu,Fu);var Ou=function(){zu.call(this),this.combo=!0};Wo(Ou,zu);var Tf=function(){Ou.call(this),this.edit=!0};Wo(Tf,Ou);var Ti=function(){oa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,15)},set:function(t){t?this.Ff=$n(this.Ff,15):this.Ff=Un(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,16)},set:function(t){t?this.Ff=$n(this.Ff,16):this.Ff=Un(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,17)},set:function(t){t?this.Ff=$n(this.Ff,17):this.Ff=Un(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,26)},set:function(t){t?this.Ff=$n(this.Ff,26):this.Ff=Un(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(a){return a};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,o=[];for(n in o.push("<<"),e)o.push("/"+n+" ("+Qc(t(e[n]))+")");return o.push(">>"),o.join(`
`)}},set:function(t){qr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};Wo(Ti,oa);var Af=function(){Ti.call(this),this.pushButton=!0};Wo(Af,Ti);var Vu=function(){Ti.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};Wo(Vu,Ti);var Wf=function(){var r,e;oa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(o){r=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(u){return u};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var a,c=[];for(a in c.push("<<"),n)c.push("/"+a+" ("+Qc(o(n[a]))+")");return c.push(">>"),c.join(`
`)},set:function(o){qr(o)==="object"&&(n=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(o){typeof o=="string"&&(n.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(o){t="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=_t.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Wo(Wf,oa),Vu.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},Vu.prototype.createOption=function(r){var e=new Wf;return e.Parent=this,e.optionName=r,this.Kids.push(e),tT.call(this.scope,e),e};var Cf=function(){Ti.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=_t.CheckBox.createAppearanceStream()};Wo(Cf,Ti);var zc=function(){oa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,13)},set:function(e){e?this.Ff=$n(this.Ff,13):this.Ff=Un(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,21)},set:function(e){e?this.Ff=$n(this.Ff,21):this.Ff=Un(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,23)},set:function(e){e?this.Ff=$n(this.Ff,23):this.Ff=Un(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,24)},set:function(e){e?this.Ff=$n(this.Ff,24):this.Ff=Un(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,25)},set:function(e){e?this.Ff=$n(this.Ff,25):this.Ff=Un(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,26)},set:function(e){e?this.Ff=$n(this.Ff,26):this.Ff=Un(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Wo(zc,oa);var kf=function(){zc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,14)},set:function(r){r?this.Ff=$n(this.Ff,14):this.Ff=Un(this.Ff,14)}}),this.password=!0};Wo(kf,zc);var _t={CheckBox:{createAppearanceStream:function(){return{N:{On:_t.CheckBox.YesNormal},D:{On:_t.CheckBox.YesPushDown,Off:_t.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=Aa(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,o=r.scope.__private__.encodeColorString(r.color),a=f0(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+rr(_t.internal.getWidth(r))+" "+rr(_t.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+rr(a.fontSize)+" Tf "+o),t.push("BT"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=Aa(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),o=[],a=_t.internal.getHeight(r),c=_t.internal.getWidth(r),u=f0(r,r.caption);return o.push("1 g"),o.push("0 0 "+rr(c)+" "+rr(a)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+rr(c-1)+" "+rr(a-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+t+" "+rr(u.fontSize)+" Tf "+n),o.push(u.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(r){var e=Aa(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+rr(_t.internal.getWidth(r))+" "+rr(_t.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:_t.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=_t.RadioButton.Circle.YesNormal,e.D[r]=_t.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=Aa(r);e.scope=r.scope;var t=[],n=_t.internal.getWidth(r)<=_t.internal.getHeight(r)?_t.internal.getWidth(r)/4:_t.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var o=_t.internal.Bezier_C,a=Number((n*o).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Wl(_t.internal.getWidth(r)/2)+" "+Wl(_t.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),t.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),t.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),t.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Aa(r);e.scope=r.scope;var t=[],n=_t.internal.getWidth(r)<=_t.internal.getHeight(r)?_t.internal.getWidth(r)/4:_t.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var o=Number((2*n).toFixed(5)),a=Number((o*_t.internal.Bezier_C).toFixed(5)),c=Number((n*_t.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Wl(_t.internal.getWidth(r)/2)+" "+Wl(_t.internal.getHeight(r)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),t.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),t.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),t.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Wl(_t.internal.getWidth(r)/2)+" "+Wl(_t.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+c+" "+c+" "+n+" 0 "+n+" c"),t.push("-"+c+" "+n+" -"+n+" "+c+" -"+n+" 0 c"),t.push("-"+n+" -"+c+" -"+c+" -"+n+" 0 -"+n+" c"),t.push(c+" -"+n+" "+n+" -"+c+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=Aa(r);e.scope=r.scope;var t=[],n=_t.internal.getWidth(r)<=_t.internal.getHeight(r)?_t.internal.getWidth(r)/4:_t.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var o=Number((2*n).toFixed(5)),a=Number((o*_t.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Wl(_t.internal.getWidth(r)/2)+" "+Wl(_t.internal.getHeight(r)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),t.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),t.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),t.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:_t.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=_t.RadioButton.Cross.YesNormal,e.D[r]=_t.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=Aa(r);e.scope=r.scope;var t=[],n=_t.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+rr(_t.internal.getWidth(r)-2)+" "+rr(_t.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(rr(n.x1.x)+" "+rr(n.x1.y)+" m"),t.push(rr(n.x2.x)+" "+rr(n.x2.y)+" l"),t.push(rr(n.x4.x)+" "+rr(n.x4.y)+" m"),t.push(rr(n.x3.x)+" "+rr(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Aa(r);e.scope=r.scope;var t=_t.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+rr(_t.internal.getWidth(r))+" "+rr(_t.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+rr(_t.internal.getWidth(r)-2)+" "+rr(_t.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(rr(t.x1.x)+" "+rr(t.x1.y)+" m"),n.push(rr(t.x2.x)+" "+rr(t.x2.y)+" l"),n.push(rr(t.x4.x)+" "+rr(t.x4.y)+" m"),n.push(rr(t.x3.x)+" "+rr(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=Aa(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+rr(_t.internal.getWidth(r))+" "+rr(_t.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};_t.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=_t.internal.getWidth(r),t=_t.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},_t.internal.getWidth=function(r){var e=0;return qr(r)==="object"&&(e=r2(r.Rect[2])),e},_t.internal.getHeight=function(r){var e=0;return qr(r)==="object"&&(e=r2(r.Rect[3])),e};var tT=En.addField=function(r){if(eT(this,r),!(r instanceof oa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};En.AcroFormChoiceField=Fu,En.AcroFormListBox=zu,En.AcroFormComboBox=Ou,En.AcroFormEditBox=Tf,En.AcroFormButton=Ti,En.AcroFormPushButton=Af,En.AcroFormRadioButton=Vu,En.AcroFormCheckBox=Cf,En.AcroFormTextField=zc,En.AcroFormPasswordField=kf,En.AcroFormAppearance=_t,En.AcroForm={ChoiceField:Fu,ListBox:zu,ComboBox:Ou,EditBox:Tf,Button:Ti,PushButton:Af,RadioButton:Vu,CheckBox:Cf,TextField:zc,PasswordField:kf,Appearance:_t},It.AcroForm={ChoiceField:Fu,ListBox:zu,ComboBox:Ou,EditBox:Tf,Button:Ti,PushButton:Af,RadioButton:Vu,CheckBox:Cf,TextField:zc,PasswordField:kf,Appearance:_t};It.AcroForm;function iv(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){var e="addImage_";r.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=r.__addimage__.getImageFileTypeByImageData=function(P,S){var z,W,le,ve,de,ce=t;if((S=S||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(se(P))for(de in n)for(le=n[de],z=0;z<le.length;z+=1){for(ve=!0,W=0;W<le[z].length;W+=1)if(le[z][W]!==void 0&&le[z][W]!==P[W]){ve=!1;break}if(ve===!0){ce=de;break}}else for(de in n)for(le=n[de],z=0;z<le.length;z+=1){for(ve=!0,W=0;W<le[z].length;W+=1)if(le[z][W]!==void 0&&le[z][W]!==P.charCodeAt(W)){ve=!1;break}if(ve===!0){ce=de;break}}return ce===t&&S!==t&&(ce=S),ce},a=function P(S){for(var z=this.internal.write,W=this.internal.putStream,le=(0,this.internal.getFilters)();le.indexOf("FlateEncode")!==-1;)le.splice(le.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var ve=[];if(ve.push({key:"Type",value:"/XObject"}),ve.push({key:"Subtype",value:"/Image"}),ve.push({key:"Width",value:S.width}),ve.push({key:"Height",value:S.height}),S.colorSpace===j.INDEXED?ve.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(ve.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===j.DEVICE_CMYK&&ve.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ve.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&ve.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)&&S.transparency.length>0){for(var de="",ce=0,we=S.transparency.length;ce<we;ce++)de+=S.transparency[ce]+" "+S.transparency[ce]+" ";ve.push({key:"Mask",value:"["+de+"]"})}S.sMask!==void 0&&ve.push({key:"SMask",value:S.objectId+1+" 0 R"});var je=S.filter!==void 0?["/"+S.filter]:void 0;if(W({data:S.data,additionalKeyValues:ve,alreadyAppliedFilters:je,objectId:S.objectId}),z("endobj"),"sMask"in S&&S.sMask!==void 0){var ne,D=(ne=S.sMaskBitsPerComponent)!==null&&ne!==void 0?ne:S.bitsPerComponent,Y={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:D,data:S.sMask};"filter"in S&&(Y.decodeParameters="/Predictor ".concat(S.predictor," /Colors 1 /BitsPerComponent ").concat(D," /Columns ").concat(S.width),Y.filter=S.filter),P.call(this,Y)}if(S.colorSpace===j.INDEXED){var re=this.internal.newObject();W({data:C(new Uint8Array(S.palette)),objectId:re}),z("endobj")}},c=function(){var P=this.internal.collections[e+"images"];for(var S in P)a.call(this,P[S])},u=function(){var P,S=this.internal.collections[e+"images"],z=this.internal.write;for(var W in S)z("/I"+(P=S[W]).index,P.objectId,"0","R")},f=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",u))},h=function(){var P=this.internal.collections[e+"images"];return f.call(this),P},g=function(){return Object.keys(this.internal.collections[e+"images"]).length},b=function(P){return typeof r["process"+P.toUpperCase()]=="function"},A=function(P){return qr(P)==="object"&&P.nodeType===1},v=function(P,S){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var z=""+P.getAttribute("src");if(z.indexOf("data:image/")===0)return _f(unescape(z).split("base64,").pop());var W=r.loadFile(z,!0);if(W!==void 0)return W}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var le;switch(S){case"PNG":le="image/png";break;case"WEBP":le="image/webp";break;default:le="image/jpeg"}return _f(P.toDataURL(le,1).split("base64,").pop())}},F=function(P){var S=this.internal.collections[e+"images"];if(S){for(var z in S)if(P===S[z].alias)return S[z]}},E=function(P,S,z){return P||S||(P=-96,S=-96),P<0&&(P=-1*z.width*72/P/this.internal.scaleFactor),S<0&&(S=-1*z.height*72/S/this.internal.scaleFactor),P===0&&(P=S*z.width/z.height),S===0&&(S=P*z.height/z.width),[P,S]},N=function(P,S,z,W,le,ve){var de=E.call(this,z,W,le),ce=this.internal.getCoordinateString,we=this.internal.getVerticalCoordinateString,je=h.call(this);if(z=de[0],W=de[1],je[le.index]=le,ve){ve*=Math.PI/180;var ne=Math.cos(ve),D=Math.sin(ve),Y=function(ue){return ue.toFixed(4)},re=[Y(ne),Y(D),Y(-1*D),Y(ne),0,0,"cm"]}this.internal.write("q"),ve?(this.internal.write([1,"0","0",1,ce(P),we(S+W),"cm"].join(" ")),this.internal.write(re.join(" ")),this.internal.write([ce(z),"0","0",ce(W),"0","0","cm"].join(" "))):this.internal.write([ce(z),"0","0",ce(W),ce(P),we(S+W),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+le.index+" Do"),this.internal.write("Q")},j=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var $=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},V=r.__addimage__.sHashCode=function(P){var S,z,W=0;if(typeof P=="string")for(z=P.length,S=0;S<z;S++)W=(W<<5)-W+P.charCodeAt(S),W|=0;else if(se(P))for(z=P.byteLength/2,S=0;S<z;S++)W=(W<<5)-W+P[S],W|=0;return W},B=r.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var S=!0;return P.length===0&&(S=!1),P.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(S=!1),S},X=r.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var S=P.indexOf(",");return S<0?null:P.substring(0,S).trim().endsWith("base64")?P.substring(S+1):null};r.__addimage__.isArrayBuffer=function(P){return P instanceof ArrayBuffer};var se=r.__addimage__.isArrayBufferView=function(P){return P instanceof Int8Array||P instanceof Uint8Array||P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array},U=r.__addimage__.binaryStringToUint8Array=function(P){for(var S=P.length,z=new Uint8Array(S),W=0;W<S;W++)z[W]=P.charCodeAt(W);return z},C=r.__addimage__.arrayBufferToBinaryString=function(P){for(var S="",z=se(P)?P:new Uint8Array(P),W=0;W<z.length;W+=8192)S+=String.fromCharCode.apply(null,z.subarray(W,W+8192));return S};r.addImage=function(){var P,S,z,W,le,ve,de,ce,we;if(typeof arguments[1]=="number"?(S=t,z=arguments[1],W=arguments[2],le=arguments[3],ve=arguments[4],de=arguments[5],ce=arguments[6],we=arguments[7]):(S=arguments[1],z=arguments[2],W=arguments[3],le=arguments[4],ve=arguments[5],de=arguments[6],ce=arguments[7],we=arguments[8]),qr(P=arguments[0])==="object"&&!A(P)&&"imageData"in P){var je=P;P=je.imageData,S=je.format||S||t,z=je.x||z||0,W=je.y||W||0,le=je.w||je.width||le,ve=je.h||je.height||ve,de=je.alias||de,ce=je.compression||ce,we=je.rotation||je.angle||we}var ne=this.internal.getFilters();if(ce===void 0&&ne.indexOf("FlateEncode")!==-1&&(ce="SLOW"),isNaN(z)||isNaN(W))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var D=w.call(this,P,S,de,ce);return N.call(this,z,W,le,ve,D,we),this};var w=function(P,S,z,W){var le,ve,de;if(typeof P=="string"&&o(P)===t){P=unescape(P);var ce=O(P,!1);(ce!==""||(ce=r.loadFile(P,!0))!==void 0)&&(P=ce)}if(A(P)&&(P=v(P,S)),S=o(P,S),!b(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((de=z)==null||de.length===0)&&(z=(function(we){return typeof we=="string"||se(we)?V(we):se(we.data)?V(we.data):null})(P)),(le=F.call(this,z))||(P instanceof Uint8Array||S==="RGBA"||(ve=P,P=U(P)),le=this["process"+S.toUpperCase()](P,g.call(this),z,(function(we){return we&&typeof we=="string"&&(we=we.toUpperCase()),we in r.image_compression?we:$.NONE})(W),ve)),!le)throw new Error("An unknown error occurred whilst processing the image.");return le},O=r.__addimage__.convertBase64ToBinaryString=function(P,S){S=typeof S!="boolean"||S;var z,W="";if(typeof P=="string"){var le;z=(le=X(P))!==null&&le!==void 0?le:P;try{W=_f(z)}catch(ve){if(S)throw B(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ve.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};r.getImageProperties=function(P){var S,z,W="";if(A(P)&&(P=v(P)),typeof P=="string"&&o(P)===t&&((W=O(P,!1))===""&&(W=r.loadFile(P)||""),P=W),z=o(P),!b(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(P instanceof Uint8Array||(P=U(P)),!(S=this["process"+z.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=z,S}})(It.API),(function(r){var e=function(t){if(t!==void 0&&t!="")return!0};It.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,o,a,c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(t.objId),h=t.pageContext.annotations,g=!1,b=0;b<h.length&&!g;b++)switch((n=h[b]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var A=0;A<h.length;A++){n=h[A];var v=this.internal.pdfEscape,F=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),N=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(E.objId),$=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(o="/Rect ["+c(n.bounds.x)+" "+u(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y)+"] ")+"/Contents ("+v(j(n.contents))+")",a+=" /Popup "+N.objId+" 0 R",a+=" /P "+f.objId+" 0 R",a+=" /T ("+v(j($))+") >>",E.content=a;var V=E.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+c(n.bounds.x+30)+" "+u(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w+30)+" "+u(n.bounds.y)+"] ")+" /Parent "+V,n.open&&(a+=" /Open true"),a+=" >>",N.content=a,this.internal.write(E.objId,"0 R",N.objId,"0 R");break;case"freetext":o="/Rect ["+c(n.bounds.x)+" "+u(n.bounds.y)+" "+c(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y+n.bounds.h)+"] ";var B=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+v(F(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+B+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var X=this.annotations._nameMap[n.options.name];n.options.pageNumber=X.page,n.options.top=X.y}else n.options.top||(n.options.top=0);if(o="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+v(F(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var se=u(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+se+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,o,a,c){var u=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:f(t),y:h(n),w:f(t+o),h:h(n+a)},options:c,type:"link"})},r.textWithLink=function(t,n,o,a){var c,u,f=this.getTextWidth(t),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){u=a.maxWidth;var g=this.splitTextToSize(t,u).length;c=Math.ceil(h*g)}else u=f,c=h;return this.text(t,n,o,a),o+=.2*h,a.align==="center"&&(n-=f/2),a.align==="right"&&(n-=f),this.link(n,o-h,u,c,a),f},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}})(It.API),(function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];r.__arabicParser__={};var a=r.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},c=r.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},u=r.__arabicParser__.isArabicEndLetter=function(E){return c(E)&&a(E)&&e[E.charCodeAt(0)].length<=2},f=r.__arabicParser__.isArabicAlfLetter=function(E){return c(E)&&o.indexOf(E.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return c(E)&&a(E)&&e[E.charCodeAt(0)].length>=1};var h=r.__arabicParser__.arabicLetterHasFinalForm=function(E){return c(E)&&a(E)&&e[E.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(E){return c(E)&&a(E)&&e[E.charCodeAt(0)].length>=3};var g=r.__arabicParser__.arabicLetterHasMedialForm=function(E){return c(E)&&a(E)&&e[E.charCodeAt(0)].length==4},b=r.__arabicParser__.resolveLigatures=function(E){var N=0,j=t,$="",V=0;for(N=0;N<E.length;N+=1)j[E.charCodeAt(N)]!==void 0?(V++,typeof(j=j[E.charCodeAt(N)])=="number"&&($+=String.fromCharCode(j),j=t,V=0),N===E.length-1&&(j=t,$+=E.charAt(N-(V-1)),N-=V-1,V=0)):(j=t,$+=E.charAt(N-V),N-=V,V=0);return $};r.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&n[E.charCodeAt(0)]!==void 0};var A=r.__arabicParser__.getCorrectForm=function(E,N,j){return c(E)?a(E)===!1?-1:!h(E)||!c(N)&&!c(j)||!c(j)&&u(N)||u(E)&&!c(N)||u(E)&&f(N)||u(E)&&u(N)?0:g(E)&&c(N)&&!u(N)&&c(j)&&h(j)?3:u(E)||!c(j)?1:2:-1},v=function(E){var N=0,j=0,$=0,V="",B="",X="",se=(E=E||"").split("\\s+"),U=[];for(N=0;N<se.length;N+=1){for(U.push(""),j=0;j<se[N].length;j+=1)V=se[N][j],B=se[N][j-1],X=se[N][j+1],c(V)?($=A(V,B,X),U[N]+=$!==-1?String.fromCharCode(e[V.charCodeAt(0)][$]):V):U[N]+=V;U[N]=b(U[N])}return U.join(" ")},F=r.__arabicParser__.processArabic=r.processArabic=function(){var E,N=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,j=[];if(Array.isArray(N)){var $=0;for(j=[],$=0;$<N.length;$+=1)Array.isArray(N[$])?j.push([v(N[$][0]),N[$][1],N[$][2]]):j.push([v(N[$])]);E=j}else E=v(N);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};r.events.push(["preProcessText",F])})(It.API),It.API.autoPrint=function(r){var e;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(u){t=u}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(u){n=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(u){o=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(u){a=u}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(u){c=u}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var o;if((t=t||"2d")!=="2d")return null;for(o in n)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=n[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(It.API),(function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(E){f=E}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(E){h=E}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(E){g=E}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(E){b=E}});var A=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return A},set:function(E){A=E}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(E){v=E}});var F=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return F},set:function(E){F=E}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(f){return n.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},r.getTextDimensions=function(f,h){n.call(this);var g=(h=h||{}).fontSize||this.getFontSize(),b=h.font||this.getFont(),A=h.scaleFactor||this.internal.scaleFactor,v=0,F=0,E=0,N=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var j=h.maxWidth;j>0?typeof f=="string"?f=this.splitTextToSize(f,j):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(V,B){return V.concat(N.splitTextToSize(B,j))},[])):f=Array.isArray(f)?f:[f];for(var $=0;$<f.length;$++)v<(E=this.getStringUnitWidth(f[$],{font:b})*g)&&(v=E);return v!==0&&(F=f.length),{w:v/=A,h:Math.max((F*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/A,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=r.cell=function(){var f;f=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var h=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,b=this.internal.__cell__.margins||e,A=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===f.lineNumber?(f.x=(h.x||0)+(h.width||0),f.y=h.y||0):h.y+h.height+f.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=b.top,v&&A&&(this.printHeaderRow(f.lineNumber,!0),f.y+=A[0].height)):f.y=h.y+h.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,t===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-g,f.y+g,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+g,{align:"center",baseline:"top",maxWidth:f.width-g-g}):this.text(f.text,f.x+g,f.y+g,{align:"left",baseline:"top",maxWidth:f.width-g-g})),this.internal.__cell__.lastCell=f,this};r.table=function(f,h,g,b,A){if(n.call(this),!g)throw new Error("No data for PDF table.");var v,F,E,N,j=[],$=[],V=[],B={},X={},se=[],U=[],C=(A=A||{}).autoSize||!1,w=A.printHeaders!==!1,O=A.css&&A.css["font-size"]!==void 0?16*A.css["font-size"]:A.fontSize||12,P=A.margins||Object.assign({width:this.getPageWidth()},e),S=typeof A.padding=="number"?A.padding:3,z=A.headerBackgroundColor||"#c8c8c8",W=A.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=w,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=z,this.internal.__cell__.headerTextColor=W,this.setFontSize(O),b==null)$=j=Object.keys(g[0]),V=j.map(function(){return"left"});else if(Array.isArray(b)&&qr(b[0])==="object")for(j=b.map(function(je){return je.name}),$=b.map(function(je){return je.prompt||je.name||""}),V=b.map(function(je){return je.align||"left"}),v=0;v<b.length;v+=1)X[b[v].name]=.7499990551181103*b[v].width;else Array.isArray(b)&&typeof b[0]=="string"&&($=j=b,V=j.map(function(){return"left"}));if(C||Array.isArray(b)&&typeof b[0]=="string")for(v=0;v<j.length;v+=1){for(B[N=j[v]]=g.map(function(je){return je[N]}),this.setFont(void 0,"bold"),se.push(this.getTextDimensions($[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),F=B[N],this.setFont(void 0,"normal"),E=0;E<F.length;E+=1)se.push(this.getTextDimensions(F[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);X[N]=Math.max.apply(null,se)+S+S,se=[]}if(w){var le={};for(v=0;v<j.length;v+=1)le[j[v]]={},le[j[v]].text=$[v],le[j[v]].align=V[v];var ve=u.call(this,le,X);U=j.map(function(je){return new a(f,h,X[je],ve,le[je].text,void 0,le[je].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var de=b.reduce(function(je,ne){return je[ne.name]=ne.align,je},{});for(v=0;v<g.length;v+=1){"rowStart"in A&&A.rowStart instanceof Function&&A.rowStart({row:v,data:g[v]},this);var ce=u.call(this,g[v],X);for(E=0;E<j.length;E+=1){var we=g[v][j[E]];"cellStart"in A&&A.cellStart instanceof Function&&A.cellStart({row:v,col:E,data:we},this),c.call(this,new a(f,h,X[j[E]],ce,we,v+2,de[j[E]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=h,this};var u=function(f,h){var g=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,A=this.internal.scaleFactor;return Object.keys(f).map(function(v){var F=f[v];return this.splitTextToSize(F.hasOwnProperty("text")?F.text:F,h[v]-g-g)},this).map(function(v){return this.getLineHeightFactor()*v.length*b/A+g+g},this).reduce(function(v,F){return Math.max(v,F)},0)};r.setTableHeaderRow=function(f){n.call(this),this.internal.__cell__.tableHeaderRow=f},r.printHeaderRow=function(f,h){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var A=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){g=this.internal.__cell__.tableHeaderRow[v].clone(),h&&(g.y=this.internal.__cell__.margins.top||0,A.push(g)),g.lineNumber=f;var F=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,g),this.setTextColor(F)}A.length>0&&this.setTableHeaderRow(A),this.setFont(void 0,"normal"),t=!1}})(It.API);var ov={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},sv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],p0=iv(sv),av=[100,200,300,400,500,600,700,800,900],rT=iv(av);function Mm(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=(function(a){return ov[a=a||"normal"]?a:"normal"})(r.style),n=(function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400})(r.weight),o=(function(a){return typeof p0[a=a||"normal"]=="number"?a:"normal"})(r.stretch);return{family:e,style:t,weight:n,stretch:o,src:r.src||[],ref:r.ref||{name:e,style:[o,t,n].join(" ")}}}function n2(r,e,t,n){var o;for(o=t;o>=0&&o<e.length;o+=n)if(r[e[o]])return r[e[o]];for(o=t;o>=0&&o<e.length;o-=n)if(r[e[o]])return r[e[o]]}var nT={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},i2={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function o2(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function s2(r){return r.trimLeft()}function iT(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function oT(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var hf,a2,l2,Cu,ff,c2,u2,d2,Dm=["times"];function h2(r,e,t,n,o){var a=4,c=p2;switch(o){case It.API.image_compression.FAST:a=1,c=f2;break;case It.API.image_compression.MEDIUM:a=6,c=m2;break;case It.API.image_compression.SLOW:a=9,c=g2}r=(function(f,h,g,b){for(var A,v=f.length/h,F=new Uint8Array(f.length+v),E=[sT,f2,p2,m2,g2],N=0;N<v;N+=1){var j=N*h,$=f.subarray(j,j+h);if(b)F.set(b($,g,A),j+N);else{for(var V=E.length,B=[],X=0;X<V;X+=1)B[X]=E[X]($,g,A);var se=lT(B.concat());F.set(B[se],j+N)}A=$}return F})(r,e,Math.ceil(t*n/8),c);var u=a0(r,{level:a});return It.API.__addimage__.arrayBufferToBinaryString(u)}function sT(r){var e=Array.apply([],r);return e.unshift(0),e}function f2(r,e){var t=r.length,n=[];n[0]=1;for(var o=0;o<t;o+=1){var a=r[o-e]||0;n[o+1]=r[o]-a+256&255}return n}function p2(r,e,t){var n=r.length,o=[];o[0]=2;for(var a=0;a<n;a+=1){var c=t&&t[a]||0;o[a+1]=r[a]-c+256&255}return o}function m2(r,e,t){var n=r.length,o=[];o[0]=3;for(var a=0;a<n;a+=1){var c=r[a-e]||0,u=t&&t[a]||0;o[a+1]=r[a]+256-(c+u>>>1)&255}return o}function g2(r,e,t){var n=r.length,o=[];o[0]=4;for(var a=0;a<n;a+=1){var c=aT(r[a-e]||0,t&&t[a]||0,t&&t[a-e]||0);o[a+1]=r[a]-c+256&255}return o}function aT(r,e,t){if(r===e&&e===t)return r;var n=Math.abs(e-t),o=Math.abs(r-t),a=Math.abs(r+e-t-t);return n<=o&&n<=a?r:o<=a?e:t}function lT(r){var e=r.map(function(t){return t.reduce(function(n,o){return n+Math.abs(o)},0)});return e.indexOf(Math.min.apply(null,e))}function Wm(r,e,t){var n=e*t,o=Math.floor(n/8),a=16-(n-8*o+t),c=(1<<t)-1;return lv(r,o)>>a&c}function y2(r,e,t,n){var o=t*n,a=Math.floor(o/8),c=16-(o-8*a+n),u=(1<<n)-1,f=(e&u)<<c;(function(h,g,b){if(g+1<h.byteLength)h.setUint16(g,b,!1);else{var A=b>>8&255;h.setUint8(g,A)}})(r,a,lv(r,a)&~(u<<c)&65535|f)}function lv(r,e){return e+1<r.byteLength?r.getUint16(e,!1):r.getUint8(e)<<8}function cT(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,o=r[e++],a=o>>7,c=1<<1+(7&o);r[e++],r[e++];var u=null,f=null;a&&(u=e,f=c,e+=3*c);var h=!0,g=[],b=0,A=null,v=0,F=null;for(this.width=t,this.height=n;h&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,F=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((P=r[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=r[e++];b=r[e++]|r[e++]<<8,A=r[e++],1&E||(A=null),v=E>>2&7,e++;break;case 254:for(;;){if(!((P=r[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var N=r[e++]|r[e++]<<8,j=r[e++]|r[e++]<<8,$=r[e++]|r[e++]<<8,V=r[e++]|r[e++]<<8,B=r[e++],X=B>>6&1,se=1<<1+(7&B),U=u,C=f,w=!1;B>>7&&(w=!0,U=e,C=se,e+=3*se);var O=e;for(e++;;){var P;if(!((P=r[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}g.push({x:N,y:j,width:$,height:V,has_local_palette:w,palette_offset:U,palette_size:C,data_offset:O,data_length:e-O,transparent_index:A,interlaced:!!X,delay:b,disposal:v});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return F},this.frameInfo=function(S){if(S<0||S>=g.length)throw new Error("Frame index out of range.");return g[S]},this.decodeAndBlitFrameBGRA=function(S,z){var W=this.frameInfo(S),le=W.width*W.height,ve=new Uint8Array(le);x2(r,W.data_offset,ve,le);var de=W.palette_offset,ce=W.transparent_index;ce===null&&(ce=256);var we=W.width,je=t-we,ne=we,D=4*(W.y*t+W.x),Y=4*((W.y+W.height)*t+W.x),re=D,ue=4*je;W.interlaced===!0&&(ue+=4*t*7);for(var fe=8,Se=0,Ee=ve.length;Se<Ee;++Se){var ke=ve[Se];if(ne===0&&(ne=we,(re+=ue)>=Y&&(ue=4*je+4*t*(fe-1),re=D+(we+je)*(fe<<1),fe>>=1)),ke===ce)re+=4;else{var Oe=r[de+3*ke],Ke=r[de+3*ke+1],nt=r[de+3*ke+2];z[re++]=nt,z[re++]=Ke,z[re++]=Oe,z[re++]=255}--ne}},this.decodeAndBlitFrameRGBA=function(S,z){var W=this.frameInfo(S),le=W.width*W.height,ve=new Uint8Array(le);x2(r,W.data_offset,ve,le);var de=W.palette_offset,ce=W.transparent_index;ce===null&&(ce=256);var we=W.width,je=t-we,ne=we,D=4*(W.y*t+W.x),Y=4*((W.y+W.height)*t+W.x),re=D,ue=4*je;W.interlaced===!0&&(ue+=4*t*7);for(var fe=8,Se=0,Ee=ve.length;Se<Ee;++Se){var ke=ve[Se];if(ne===0&&(ne=we,(re+=ue)>=Y&&(ue=4*je+4*t*(fe-1),re=D+(we+je)*(fe<<1),fe>>=1)),ke===ce)re+=4;else{var Oe=r[de+3*ke],Ke=r[de+3*ke+1],nt=r[de+3*ke+2];z[re++]=Oe,z[re++]=Ke,z[re++]=nt,z[re++]=255}--ne}}}function x2(r,e,t,n){for(var o=r[e++],a=1<<o,c=a+1,u=c+1,f=o+1,h=(1<<f)-1,g=0,b=0,A=0,v=r[e++],F=new Int32Array(4096),E=null;;){for(;g<16&&v!==0;)b|=r[e++]<<g,g+=8,v===1?v=r[e++]:--v;if(g<f)break;var N=b&h;if(b>>=f,g-=f,N!==a){if(N===c)break;for(var j=N<u?N:E,$=0,V=j;V>a;)V=F[V]>>8,++$;var B=V;if(A+$+(j!==N?1:0)>n)return void Qr.log("Warning, gif stream longer than expected.");t[A++]=B;var X=A+=$;for(j!==N&&(t[A++]=B),V=j;$--;)V=F[V],t[--X]=255&V,V>>=8;E!==null&&u<4096&&(F[u++]=E<<8|B,u>=h+1&&f<12&&(++f,h=h<<1|1)),E=N}else u=c+1,h=(1<<(f=o+1))-1,E=null}return A!==n&&Qr.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function $m(r){var e,t,n,o,a,c=Math.floor,u=new Array(64),f=new Array(64),h=new Array(64),g=new Array(64),b=new Array(65535),A=new Array(65535),v=new Array(64),F=new Array(64),E=[],N=0,j=7,$=new Array(64),V=new Array(64),B=new Array(64),X=new Array(256),se=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],w=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],le=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ve(D,Y){for(var re=0,ue=0,fe=new Array,Se=1;Se<=16;Se++){for(var Ee=1;Ee<=D[Se];Ee++)fe[Y[ue]]=[],fe[Y[ue]][0]=re,fe[Y[ue]][1]=Se,ue++,re++;re*=2}return fe}function de(D){for(var Y=D[0],re=D[1]-1;re>=0;)Y&1<<re&&(N|=1<<j),re--,--j<0&&(N==255?(ce(255),ce(0)):ce(N),j=7,N=0)}function ce(D){E.push(D)}function we(D){ce(D>>8&255),ce(255&D)}function je(D,Y,re,ue,fe){for(var Se,Ee=fe[0],ke=fe[240],Oe=(function(ge,De){var He,at,ht,Tt,lt,ct,Kt,Vt,jt,Pt,bt=0;for(jt=0;jt<8;++jt){He=ge[bt],at=ge[bt+1],ht=ge[bt+2],Tt=ge[bt+3],lt=ge[bt+4],ct=ge[bt+5],Kt=ge[bt+6];var Cr=He+(Vt=ge[bt+7]),ir=He-Vt,xt=at+Kt,Ut=at-Kt,sr=ht+ct,Rt=ht-ct,er=Tt+lt,Wt=Tt-lt,kr=Cr+er,Br=Cr-er,$t=xt+sr,Mt=xt-sr;ge[bt]=kr+$t,ge[bt+4]=kr-$t;var ar=.707106781*(Mt+Br);ge[bt+2]=Br+ar,ge[bt+6]=Br-ar;var Mi=.382683433*((kr=Wt+Rt)-(Mt=Ut+ir)),Rn=.5411961*kr+Mi,So=1.306562965*Mt+Mi,Pn=.707106781*($t=Rt+Ut),Nt=ir+Pn,Ci=ir-Pn;ge[bt+5]=Ci+Rn,ge[bt+3]=Ci-Rn,ge[bt+1]=Nt+So,ge[bt+7]=Nt-So,bt+=8}for(bt=0,jt=0;jt<8;++jt){He=ge[bt],at=ge[bt+8],ht=ge[bt+16],Tt=ge[bt+24],lt=ge[bt+32],ct=ge[bt+40],Kt=ge[bt+48];var li=He+(Vt=ge[bt+56]),Nn=He-Vt,ki=at+Kt,Tr=at-Kt,Fr=ht+ct,sn=ht-ct,qn=Tt+lt,$o=Tt-lt,Di=li+qn,Wi=li-qn,mn=ki+Fr,ji=ki-Fr;ge[bt]=Di+mn,ge[bt+32]=Di-mn;var Ei=.707106781*(ji+Wi);ge[bt+16]=Wi+Ei,ge[bt+48]=Wi-Ei;var cs=.382683433*((Di=$o+sn)-(ji=Tr+Nn)),lo=.5411961*Di+cs,co=1.306562965*ji+cs,us=.707106781*(mn=sn+Tr),Uo=Nn+us,_o=Nn-us;ge[bt+40]=_o+lo,ge[bt+24]=_o-lo,ge[bt+8]=Uo+co,ge[bt+56]=Uo-co,bt++}for(jt=0;jt<64;++jt)Pt=ge[jt]*De[jt],v[jt]=Pt>0?Pt+.5|0:Pt-.5|0;return v})(D,Y),Ke=0;Ke<64;++Ke)F[U[Ke]]=Oe[Ke];var nt=F[0]-re;re=F[0],nt==0?de(ue[0]):(de(ue[A[Se=32767+nt]]),de(b[Se]));for(var _e=63;_e>0&&F[_e]==0;)_e--;if(_e==0)return de(Ee),re;for(var pe,Q=1;Q<=_e;){for(var Je=Q;F[Q]==0&&Q<=_e;)++Q;var Ue=Q-Je;if(Ue>=16){pe=Ue>>4;for(var tt=1;tt<=pe;++tt)de(ke);Ue&=15}Se=32767+F[Q],de(fe[(Ue<<4)+A[Se]]),de(b[Se]),Q++}return _e!=63&&de(Ee),re}function ne(D){D=Math.min(Math.max(D,1),100),a!=D&&((function(Y){for(var re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ue=0;ue<64;ue++){var fe=c((re[ue]*Y+50)/100);fe=Math.min(Math.max(fe,1),255),u[U[ue]]=fe}for(var Se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ee=0;Ee<64;Ee++){var ke=c((Se[Ee]*Y+50)/100);ke=Math.min(Math.max(ke,1),255),f[U[Ee]]=ke}for(var Oe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ke=0,nt=0;nt<8;nt++)for(var _e=0;_e<8;_e++)h[Ke]=1/(u[U[Ke]]*Oe[nt]*Oe[_e]*8),g[Ke]=1/(f[U[Ke]]*Oe[nt]*Oe[_e]*8),Ke++})(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),a=D)}this.encode=function(D,Y){Y&&ne(Y),E=new Array,N=0,j=7,we(65496),we(65504),we(16),ce(74),ce(70),ce(73),ce(70),ce(0),ce(1),ce(1),ce(0),we(1),we(1),ce(0),ce(0),(function(){we(65499),we(132),ce(0);for(var at=0;at<64;at++)ce(u[at]);ce(1);for(var ht=0;ht<64;ht++)ce(f[ht])})(),(function(at,ht){we(65472),we(17),ce(8),we(ht),we(at),ce(3),ce(1),ce(17),ce(0),ce(2),ce(17),ce(1),ce(3),ce(17),ce(1)})(D.width,D.height),(function(){we(65476),we(418),ce(0);for(var at=0;at<16;at++)ce(C[at+1]);for(var ht=0;ht<=11;ht++)ce(w[ht]);ce(16);for(var Tt=0;Tt<16;Tt++)ce(O[Tt+1]);for(var lt=0;lt<=161;lt++)ce(P[lt]);ce(1);for(var ct=0;ct<16;ct++)ce(S[ct+1]);for(var Kt=0;Kt<=11;Kt++)ce(z[Kt]);ce(17);for(var Vt=0;Vt<16;Vt++)ce(W[Vt+1]);for(var jt=0;jt<=161;jt++)ce(le[jt])})(),we(65498),we(12),ce(3),ce(1),ce(0),ce(2),ce(17),ce(3),ce(17),ce(0),ce(63),ce(0);var re=0,ue=0,fe=0;N=0,j=7,this.encode.displayName="_encode_";for(var Se,Ee,ke,Oe,Ke,nt,_e,pe,Q,Je=D.data,Ue=D.width,tt=D.height,ge=4*Ue,De=0;De<tt;){for(Se=0;Se<ge;){for(Ke=ge*De+Se,_e=-1,pe=0,Q=0;Q<64;Q++)nt=Ke+(pe=Q>>3)*ge+(_e=4*(7&Q)),De+pe>=tt&&(nt-=ge*(De+1+pe-tt)),Se+_e>=ge&&(nt-=Se+_e-ge+4),Ee=Je[nt++],ke=Je[nt++],Oe=Je[nt++],$[Q]=(se[Ee]+se[ke+256|0]+se[Oe+512|0]>>16)-128,V[Q]=(se[Ee+768|0]+se[ke+1024|0]+se[Oe+1280|0]>>16)-128,B[Q]=(se[Ee+1280|0]+se[ke+1536|0]+se[Oe+1792|0]>>16)-128;re=je($,h,re,e,n),ue=je(V,g,ue,t,o),fe=je(B,g,fe,t,o),Se+=32}De+=8}if(j>=0){var He=[];He[1]=j+1,He[0]=(1<<j+1)-1,de(He)}return we(65497),new Uint8Array(E)},r=r||50,(function(){for(var D=String.fromCharCode,Y=0;Y<256;Y++)X[Y]=D(Y)})(),e=ve(C,w),t=ve(S,z),n=ve(O,P),o=ve(W,le),(function(){for(var D=1,Y=2,re=1;re<=15;re++){for(var ue=D;ue<Y;ue++)A[32767+ue]=re,b[32767+ue]=[],b[32767+ue][1]=re,b[32767+ue][0]=ue;for(var fe=-(Y-1);fe<=-D;fe++)A[32767+fe]=re,b[32767+fe]=[],b[32767+fe][1]=re,b[32767+fe][0]=Y-1+fe;D<<=1,Y<<=1}})(),(function(){for(var D=0;D<256;D++)se[D]=19595*D,se[D+256|0]=38470*D,se[D+512|0]=7471*D+32768,se[D+768|0]=-11059*D,se[D+1024|0]=-21709*D,se[D+1280|0]=32768*D+8421375,se[D+1536|0]=-27439*D,se[D+1792|0]=-5329*D})(),ne(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Zs(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function v2(r){function e(w){if(!w)throw Error("assert :P")}function t(w,O,P){for(var S=0;4>S;S++)if(w[O+S]!=P.charCodeAt(S))return!0;return!1}function n(w,O,P,S,z){for(var W=0;W<z;W++)w[O+W]=P[S+W]}function o(w,O,P,S){for(var z=0;z<S;z++)w[O+z]=P}function a(w){return new Int32Array(w)}function c(w,O){for(var P=[],S=0;S<w;S++)P.push(new O);return P}function u(w,O){var P=[];return(function S(z,W,le){for(var ve=le[W],de=0;de<ve&&(z.push(le.length>W+1?[]:new O),!(le.length<W+1));de++)S(z[de],W+1,le)})(P,0,w),P}var f=function(){var w=this;function O(p,x){for(var k=1<<x-1>>>0;p&k;)k>>>=1;return k?(p&k-1)+k:p}function P(p,x,k,L,H){e(!(L%k));do p[x+(L-=k)]=H;while(0<L)}function S(p,x,k,L,H){if(e(2328>=H),512>=H)var K=a(512);else if((K=a(H))==null)return 0;return(function(J,Z,te,ie,ye,Pe){var oe,Te,Re=Z,We=1<<te,Le=a(16),Ve=a(16);for(e(ye!=0),e(ie!=null),e(J!=null),e(0<te),Te=0;Te<ye;++Te){if(15<ie[Te])return 0;++Le[ie[Te]]}if(Le[0]==ye)return 0;for(Ve[1]=0,oe=1;15>oe;++oe){if(Le[oe]>1<<oe)return 0;Ve[oe+1]=Ve[oe]+Le[oe]}for(Te=0;Te<ye;++Te)oe=ie[Te],0<ie[Te]&&(Pe[Ve[oe]++]=Te);if(Ve[15]==1)return(ie=new z).g=0,ie.value=Pe[0],P(J,Re,1,We,ie),We;var Me,qe=-1,Ge=We-1,kt=0,pt=1,Xt=1,vt=1<<te;for(Te=0,oe=1,ye=2;oe<=te;++oe,ye<<=1){if(pt+=Xt<<=1,0>(Xt-=Le[oe]))return 0;for(;0<Le[oe];--Le[oe])(ie=new z).g=oe,ie.value=Pe[Te++],P(J,Re+kt,ye,vt,ie),kt=O(kt,oe)}for(oe=te+1,ye=2;15>=oe;++oe,ye<<=1){if(pt+=Xt<<=1,0>(Xt-=Le[oe]))return 0;for(;0<Le[oe];--Le[oe]){if(ie=new z,(kt&Ge)!=qe){for(Re+=vt,Me=1<<(qe=oe)-te;15>qe&&!(0>=(Me-=Le[qe]));)++qe,Me<<=1;We+=vt=1<<(Me=qe-te),J[Z+(qe=kt&Ge)].g=Me+te,J[Z+qe].value=Re-Z-qe}ie.g=oe-te,ie.value=Pe[Te++],P(J,Re+(kt>>te),ye,vt,ie),kt=O(kt,oe)}}return pt!=2*Ve[15]-1?0:We})(p,x,k,L,H,K)}function z(){this.value=this.g=0}function W(){this.value=this.g=0}function le(){this.G=c(5,z),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Ro,W)}function ve(p,x,k,L){e(p!=null),e(x!=null),e(2147483648>L),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=x,p.pa=k,p.Jd=x,p.Yc=k+L,p.Zc=4<=L?k+L-4+1:k,Ee(p)}function de(p,x){for(var k=0;0<x--;)k|=Oe(p,128)<<x;return k}function ce(p,x){var k=de(p,x);return ke(p)?-k:k}function we(p,x,k,L){var H,K=0;for(e(p!=null),e(x!=null),e(4294967288>L),p.Sb=L,p.Ra=0,p.u=0,p.h=0,4<L&&(L=4),H=0;H<L;++H)K+=x[k+H]<<8*H;p.Ra=K,p.bb=L,p.oa=x,p.pa=k}function je(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<pa-8>>>0,++p.bb,p.u-=8;ue(p)&&(p.h=1,p.u=0)}function ne(p,x){if(e(0<=x),!p.h&&x<=yo){var k=re(p)&go[x];return p.u+=x,je(p),k}return p.h=1,p.u=0}function D(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Y(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function re(p){return p.Ra>>>(p.u&pa-1)>>>0}function ue(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>pa}function fe(p,x){p.u=x,p.h=ue(p)}function Se(p){p.u>=xs&&(e(p.u>=xs),je(p))}function Ee(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function ke(p){return de(p,1)}function Oe(p,x){var k=p.Ca;0>p.b&&Ee(p);var L=p.b,H=k*x>>>8,K=(p.I>>>L>H)+0;for(K?(k-=H,p.I-=H+1<<L>>>0):k=H+1,L=k,H=0;256<=L;)H+=8,L>>=8;return L=7^H+Ms[L],p.b-=L,p.Ca=(k<<L)-1,K}function Ke(p,x,k){p[x+0]=k>>24&255,p[x+1]=k>>16&255,p[x+2]=k>>8&255,p[x+3]=255&k}function nt(p,x){return p[x+0]|p[x+1]<<8}function _e(p,x){return nt(p,x)|p[x+2]<<16}function pe(p,x){return nt(p,x)|nt(p,x+2)<<16}function Q(p,x){var k=1<<x;return e(p!=null),e(0<x),p.X=a(k),p.X==null?0:(p.Mb=32-x,p.Xa=x,1)}function Je(p,x){e(p!=null),e(x!=null),e(p.Xa==x.Xa),n(x.X,0,p.X,0,1<<x.Xa)}function Ue(){this.X=[],this.Xa=this.Mb=0}function tt(p,x,k,L){e(k!=null),e(L!=null);var H=k[0],K=L[0];return H==0&&(H=(p*K+x/2)/x),K==0&&(K=(x*H+p/2)/p),0>=H||0>=K?0:(k[0]=H,L[0]=K,1)}function ge(p,x){return p+(1<<x)-1>>>x}function De(p,x){return((4278255360&p)+(4278255360&x)>>>0&4278255360)+((16711935&p)+(16711935&x)>>>0&16711935)>>>0}function He(p,x){w[x]=function(k,L,H,K,J,Z,te){var ie;for(ie=0;ie<J;++ie){var ye=w[p](Z[te+ie-1],H,K+ie);Z[te+ie]=De(k[L+ie],ye)}}}function at(){this.ud=this.hd=this.jd=0}function ht(p,x){return((4278124286&(p^x))>>>1)+(p&x)>>>0}function Tt(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function lt(p,x){return Tt(p+(p-x+.5>>1))}function ct(p,x,k){return Math.abs(x-k)-Math.abs(p-k)}function Kt(p,x,k,L,H,K,J){for(L=K[J-1],k=0;k<H;++k)K[J+k]=L=De(p[x+k],L)}function Vt(p,x,k,L,H){var K;for(K=0;K<k;++K){var J=p[x+K],Z=J>>8&255,te=16711935&(te=(te=16711935&J)+((Z<<16)+Z));L[H+K]=(4278255360&J)+te>>>0}}function jt(p,x){x.jd=255&p,x.hd=p>>8&255,x.ud=p>>16&255}function Pt(p,x,k,L,H,K){var J;for(J=0;J<L;++J){var Z=x[k+J],te=Z>>>8,ie=Z,ye=255&(ye=(ye=Z>>>16)+((p.jd<<24>>24)*(te<<24>>24)>>>5));ie=255&(ie=(ie+=(p.hd<<24>>24)*(te<<24>>24)>>>5)+((p.ud<<24>>24)*(ye<<24>>24)>>>5)),H[K+J]=(4278255360&Z)+(ye<<16)+ie}}function bt(p,x,k,L,H){w[x]=function(K,J,Z,te,ie,ye,Pe,oe,Te){for(te=Pe;te<oe;++te)for(Pe=0;Pe<Te;++Pe)ie[ye++]=H(Z[L(K[J++])])},w[p]=function(K,J,Z,te,ie,ye,Pe){var oe=8>>K.b,Te=K.Ea,Re=K.K[0],We=K.w;if(8>oe)for(K=(1<<K.b)-1,We=(1<<oe)-1;J<Z;++J){var Le,Ve=0;for(Le=0;Le<Te;++Le)Le&K||(Ve=L(te[ie++])),ye[Pe++]=H(Re[Ve&We]),Ve>>=oe}else w["VP8LMapColor"+k](te,ie,Re,We,ye,Pe,J,Z,Te)}}function Cr(p,x,k,L,H){for(k=x+k;x<k;){var K=p[x++];L[H++]=K>>16&255,L[H++]=K>>8&255,L[H++]=255&K}}function ir(p,x,k,L,H){for(k=x+k;x<k;){var K=p[x++];L[H++]=K>>16&255,L[H++]=K>>8&255,L[H++]=255&K,L[H++]=K>>24&255}}function xt(p,x,k,L,H){for(k=x+k;x<k;){var K=(J=p[x++])>>16&240|J>>12&15,J=240&J|J>>28&15;L[H++]=K,L[H++]=J}}function Ut(p,x,k,L,H){for(k=x+k;x<k;){var K=(J=p[x++])>>16&248|J>>13&7,J=J>>5&224|J>>3&31;L[H++]=K,L[H++]=J}}function sr(p,x,k,L,H){for(k=x+k;x<k;){var K=p[x++];L[H++]=255&K,L[H++]=K>>8&255,L[H++]=K>>16&255}}function Rt(p,x,k,L,H,K){if(K==0)for(k=x+k;x<k;)Ke(L,((K=p[x++])[0]>>24|K[1]>>8&65280|K[2]<<8&16711680|K[3]<<24)>>>0),H+=32;else n(L,H,p,x,k)}function er(p,x){w[x][0]=w[p+"0"],w[x][1]=w[p+"1"],w[x][2]=w[p+"2"],w[x][3]=w[p+"3"],w[x][4]=w[p+"4"],w[x][5]=w[p+"5"],w[x][6]=w[p+"6"],w[x][7]=w[p+"7"],w[x][8]=w[p+"8"],w[x][9]=w[p+"9"],w[x][10]=w[p+"10"],w[x][11]=w[p+"11"],w[x][12]=w[p+"12"],w[x][13]=w[p+"13"],w[x][14]=w[p+"0"],w[x][15]=w[p+"0"]}function Wt(p){return p==Al||p==Ja||p==vc||p==bc}function kr(){this.eb=[],this.size=this.A=this.fb=0}function Br(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function $t(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new kr,this.f.kb=new Br,this.sd=null}function Mt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ar(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Mi(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function Rn(p,x){var k=p.T,L=x.ba.f.RGBA,H=L.eb,K=L.fb+p.ka*L.A,J=Ki[x.ba.S],Z=p.y,te=p.O,ie=p.f,ye=p.N,Pe=p.ea,oe=p.W,Te=x.cc,Re=x.dc,We=x.Mc,Le=x.Nc,Ve=p.ka,Me=p.ka+p.T,qe=p.U,Ge=qe+1>>1;for(Ve==0?J(Z,te,null,null,ie,ye,Pe,oe,ie,ye,Pe,oe,H,K,null,null,qe):(J(x.ec,x.fc,Z,te,Te,Re,We,Le,ie,ye,Pe,oe,H,K-L.A,H,K,qe),++k);Ve+2<Me;Ve+=2)Te=ie,Re=ye,We=Pe,Le=oe,ye+=p.Rc,oe+=p.Rc,K+=2*L.A,J(Z,(te+=2*p.fa)-p.fa,Z,te,Te,Re,We,Le,ie,ye,Pe,oe,H,K-L.A,H,K,qe);return te+=p.fa,p.j+Me<p.o?(n(x.ec,x.fc,Z,te,qe),n(x.cc,x.dc,ie,ye,Ge),n(x.Mc,x.Nc,Pe,oe,Ge),k--):1&Me||J(Z,te,null,null,ie,ye,Pe,oe,ie,ye,Pe,oe,H,K+L.A,null,null,qe),k}function So(p,x,k){var L=p.F,H=[p.J];if(L!=null){var K=p.U,J=x.ba.S,Z=J==xc||J==vc;x=x.ba.f.RGBA;var te=[0],ie=p.ka;te[0]=p.T,p.Kb&&(ie==0?--te[0]:(--ie,H[0]-=p.width),p.j+p.ka+p.T==p.o&&(te[0]=p.o-p.j-ie));var ye=x.eb;ie=x.fb+ie*x.A,p=gc(L,H[0],p.width,K,te,ye,ie+(Z?0:3),x.A),e(k==te),p&&Wt(J)&&Ya(ye,ie,Z,K,te,x.A)}return 0}function Pn(p){var x=p.ma,k=x.ba.S,L=11>k,H=k==xa||k==yc||k==xc||k==Mr||k==12||Wt(k);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!xl(x.Oa,p,H?11:12))return 0;if(H&&Wt(k)&&ot(),p.da)alert("todo:use_scaling");else{if(L){if(x.Ib=Mi,p.Kb){if(k=p.U+1>>1,x.memory=a(p.U+2*k),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+p.U,x.Mc=x.cc,x.Nc=x.dc+k,x.Ib=Rn,ot()}}else alert("todo:EmitYUV");H&&(x.Jb=So,L&&Ie())}if(L&&!ni){for(p=0;256>p;++p)Yi[p]=89858*(p-128)+es>>Us,Ji[p]=-22014*(p-128)+es,El[p]=-45773*(p-128),el[p]=113618*(p-128)+es>>Us;for(p=Ir;p<Pr;++p)x=76283*(p-16)+es>>Us,cu[p-Ir]=an(x,255),jh[p-Ir]=an(x+8>>4,15);ni=1}return 1}function Nt(p){var x=p.ma,k=p.U,L=p.T;return e(!(1&p.ka)),0>=k||0>=L?0:(k=x.Ib(p,x),x.Jb!=null&&x.Jb(p,x,k),x.Dc+=k,1)}function Ci(p){p.ma.memory=null}function li(p,x,k,L){return ne(p,8)!=47?0:(x[0]=ne(p,14)+1,k[0]=ne(p,14)+1,L[0]=ne(p,1),ne(p,3)!=0?0:!p.h)}function Nn(p,x){if(4>p)return p+1;var k=p-2>>1;return(2+(1&p)<<k)+ne(x,k)+1}function ki(p,x){return 120<x?x-120:1<=(k=((k=Np[x-1])>>4)*p+(8-(15&k)))?k:1;var k}function Tr(p,x,k){var L=re(k),H=p[x+=255&L].g-8;return 0<H&&(fe(k,k.u+8),L=re(k),x+=p[x].value,x+=L&(1<<H)-1),fe(k,k.u+p[x].g),p[x].value}function Fr(p,x,k){return k.g+=p.g,k.value+=p.value<<x>>>0,e(8>=k.g),p.g}function sn(p,x,k){var L=p.xc;return e((x=L==0?0:p.vc[p.md*(k>>L)+(x>>L)])<p.Wb),p.Ya[x]}function qn(p,x,k,L){var H=p.ab,K=p.c*x,J=p.C;x=J+x;var Z=k,te=L;for(L=p.Ta,k=p.Ua;0<H--;){var ie=p.gc[H],ye=J,Pe=x,oe=Z,Te=te,Re=(te=L,Z=k,ie.Ea);switch(e(ye<Pe),e(Pe<=ie.nc),ie.hc){case 2:yn(oe,Te,(Pe-ye)*Re,te,Z);break;case 0:var We=ye,Le=Pe,Ve=te,Me=Z,qe=(vt=ie).Ea;We==0&&(Ds(oe,Te,null,null,1,Ve,Me),Kt(oe,Te+1,0,0,qe-1,Ve,Me+1),Te+=qe,Me+=qe,++We);for(var Ge=1<<vt.b,kt=Ge-1,pt=ge(qe,vt.b),Xt=vt.K,vt=vt.w+(We>>vt.b)*pt;We<Le;){var dr=Xt,un=vt,tr=1;for(vs(oe,Te,Ve,Me-qe,1,Ve,Me);tr<qe;){var mt=(tr&~kt)+Ge;mt>qe&&(mt=qe),(0,qa[dr[un++]>>8&15])(oe,Te+ +tr,Ve,Me+tr-qe,mt-tr,Ve,Me+tr),tr=mt}Te+=qe,Me+=qe,++We&kt||(vt+=pt)}Pe!=ie.nc&&n(te,Z-Re,te,Z+(Pe-ye-1)*Re,Re);break;case 1:for(Re=oe,Le=Te,qe=(oe=ie.Ea)-(Me=oe&~(Ve=(Te=1<<ie.b)-1)),We=ge(oe,ie.b),Ge=ie.K,ie=ie.w+(ye>>ie.b)*We;ye<Pe;){for(kt=Ge,pt=ie,Xt=new at,vt=Le+Me,dr=Le+oe;Le<vt;)jt(kt[pt++],Xt),bl(Xt,Re,Le,Te,te,Z),Le+=Te,Z+=Te;Le<dr&&(jt(kt[pt++],Xt),bl(Xt,Re,Le,qe,te,Z),Le+=qe,Z+=qe),++ye&Ve||(ie+=We)}break;case 3:if(oe==te&&Te==Z&&0<ie.b){for(Le=te,oe=Re=Z+(Pe-ye)*Re-(Me=(Pe-ye)*ge(ie.Ea,ie.b)),Te=te,Ve=Z,We=[],Me=(qe=Me)-1;0<=Me;--Me)We[Me]=Te[Ve+Me];for(Me=qe-1;0<=Me;--Me)Le[oe+Me]=We[Me];$a(ie,ye,Pe,te,Re,te,Z)}else $a(ie,ye,Pe,oe,Te,te,Z)}Z=L,te=k}te!=k&&n(L,k,Z,te,K)}function $o(p,x){var k=p.V,L=p.Ba+p.c*p.C,H=x-p.C;if(e(x<=p.l.o),e(16>=H),0<H){var K=p.l,J=p.Ta,Z=p.Ua,te=K.width;if(qn(p,H,k,L),H=Z=[Z],e((k=p.C)<(L=x)),e(K.v<K.va),L>K.o&&(L=K.o),k<K.j){var ie=K.j-k;k=K.j,H[0]+=ie*te}if(k>=L?k=0:(H[0]+=4*K.v,K.ka=k-K.j,K.U=K.va-K.v,K.T=L-k,k=1),k){if(Z=Z[0],11>(k=p.ca).S){var ye=k.f.RGBA,Pe=(L=k.S,H=K.U,K=K.T,ie=ye.eb,ye.A),oe=K;for(ye=ye.fb+p.Ma*ye.A;0<oe--;){var Te=J,Re=Z,We=H,Le=ie,Ve=ye;switch(L){case ou:wl(Te,Re,We,Le,Ve);break;case xa:Ws(Te,Re,We,Le,Ve);break;case Al:Ws(Te,Re,We,Le,Ve),Ya(Le,Ve,0,We,1,0);break;case _h:Ha(Te,Re,We,Le,Ve);break;case yc:Rt(Te,Re,We,Le,Ve,1);break;case Ja:Rt(Te,Re,We,Le,Ve,1),Ya(Le,Ve,0,We,1,0);break;case xc:Rt(Te,Re,We,Le,Ve,0);break;case vc:Rt(Te,Re,We,Le,Ve,0),Ya(Le,Ve,1,We,1,0);break;case Mr:ma(Te,Re,We,Le,Ve);break;case bc:ma(Te,Re,We,Le,Ve),cd(Le,Ve,We,1,0);break;case su:ga(Te,Re,We,Le,Ve);break;default:e(0)}Z+=te,ye+=Pe}p.Ma+=K}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=k.height)}}p.C=x,e(p.C<=p.i)}function Di(p){var x;if(0<p.ua)return 0;for(x=0;x<p.Wb;++x){var k=p.Ya[x].G,L=p.Ya[x].H;if(0<k[1][L[1]+0].g||0<k[2][L[2]+0].g||0<k[3][L[3]+0].g)return 0}return 1}function Wi(p,x,k,L,H,K){if(p.Z!=0){var J=p.qd,Z=p.rd;for(e(yi[p.Z]!=null);x<k;++x)yi[p.Z](J,Z,L,H,L,H,K),J=L,Z=H,H+=K;p.qd=J,p.rd=Z}}function mn(p,x){var k=p.l.ma,L=k.Z==0||k.Z==1?p.l.j:p.C;if(L=p.C<L?L:p.C,e(x<=p.l.o),x>L){var H=p.l.width,K=k.ca,J=k.tb+H*L,Z=p.V,te=p.Ba+p.c*L,ie=p.gc;e(p.ab==1),e(ie[0].hc==3),Xo(ie[0],L,x,Z,te,K,J),Wi(k,L,x,K,J,H)}p.C=p.Ma=x}function ji(p,x,k,L,H,K,J){var Z=p.$/L,te=p.$%L,ie=p.m,ye=p.s,Pe=k+p.$,oe=Pe;H=k+L*H;var Te=k+L*K,Re=280+ye.ua,We=p.Pb?Z:16777216,Le=0<ye.ua?ye.Wa:null,Ve=ye.wc,Me=Pe<Te?sn(ye,te,Z):null;e(p.C<K),e(Te<=H);var qe=!1;e:for(;;){for(;qe||Pe<Te;){var Ge=0;if(Z>=We){var kt=Pe-k;e((We=p).Pb),We.wd=We.m,We.xd=kt,0<We.s.ua&&Je(We.s.Wa,We.s.vb),We=Z+lu}if(te&Ve||(Me=sn(ye,te,Z)),e(Me!=null),Me.Qb&&(x[Pe]=Me.qb,qe=!0),!qe)if(Se(ie),Me.jc){Ge=ie,kt=x;var pt=Pe,Xt=Me.pd[re(Ge)&Ro-1];e(Me.jc),256>Xt.g?(fe(Ge,Ge.u+Xt.g),kt[pt]=Xt.value,Ge=0):(fe(Ge,Ge.u+Xt.g-256),e(256<=Xt.value),Ge=Xt.value),Ge==0&&(qe=!0)}else Ge=Tr(Me.G[0],Me.H[0],ie);if(ie.h)break;if(qe||256>Ge){if(!qe)if(Me.nd)x[Pe]=(Me.qb|Ge<<8)>>>0;else{if(Se(ie),qe=Tr(Me.G[1],Me.H[1],ie),Se(ie),kt=Tr(Me.G[2],Me.H[2],ie),pt=Tr(Me.G[3],Me.H[3],ie),ie.h)break;x[Pe]=(pt<<24|qe<<16|Ge<<8|kt)>>>0}if(qe=!1,++Pe,++te>=L&&(te=0,++Z,J!=null&&Z<=K&&!(Z%16)&&J(p,Z),Le!=null))for(;oe<Pe;)Ge=x[oe++],Le.X[(506832829*Ge&4294967295)>>>Le.Mb]=Ge}else if(280>Ge){if(Ge=Nn(Ge-256,ie),kt=Tr(Me.G[4],Me.H[4],ie),Se(ie),kt=ki(L,kt=Nn(kt,ie)),ie.h)break;if(Pe-k<kt||H-Pe<Ge)break e;for(pt=0;pt<Ge;++pt)x[Pe+pt]=x[Pe+pt-kt];for(Pe+=Ge,te+=Ge;te>=L;)te-=L,++Z,J!=null&&Z<=K&&!(Z%16)&&J(p,Z);if(e(Pe<=H),te&Ve&&(Me=sn(ye,te,Z)),Le!=null)for(;oe<Pe;)Ge=x[oe++],Le.X[(506832829*Ge&4294967295)>>>Le.Mb]=Ge}else{if(!(Ge<Re))break e;for(qe=Ge-280,e(Le!=null);oe<Pe;)Ge=x[oe++],Le.X[(506832829*Ge&4294967295)>>>Le.Mb]=Ge;Ge=Pe,e(!(qe>>>(kt=Le).Xa)),x[Ge]=kt.X[qe],qe=!0}qe||e(ie.h==ue(ie))}if(p.Pb&&ie.h&&Pe<H)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&Je(p.s.vb,p.s.Wa);else{if(ie.h)break e;J!=null&&J(p,Z>K?K:Z),p.a=0,p.$=Pe-k}return 1}return p.a=3,0}function Ei(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var x=p.Wa;x!=null&&(x.X=null),p.vb=null,e(p!=null)}function cs(){var p=new wt;return p==null?null:(p.a=0,p.xb=kl,er("Predictor","VP8LPredictors"),er("Predictor","VP8LPredictors_C"),er("PredictorAdd","VP8LPredictorsAdd"),er("PredictorAdd","VP8LPredictorsAdd_C"),yn=Vt,bl=Pt,wl=Cr,Ws=ir,ma=xt,ga=Ut,Ha=sr,w.VP8LMapColor32b=bs,w.VP8LMapColor8b=Ua,p)}function lo(p,x,k,L,H){var K=1,J=[p],Z=[x],te=L.m,ie=L.s,ye=null,Pe=0;e:for(;;){if(k)for(;K&&ne(te,1);){var oe=J,Te=Z,Re=L,We=1,Le=Re.m,Ve=Re.gc[Re.ab],Me=ne(Le,2);if(Re.Oc&1<<Me)K=0;else{switch(Re.Oc|=1<<Me,Ve.hc=Me,Ve.Ea=oe[0],Ve.nc=Te[0],Ve.K=[null],++Re.ab,e(4>=Re.ab),Me){case 0:case 1:Ve.b=ne(Le,3)+2,We=lo(ge(Ve.Ea,Ve.b),ge(Ve.nc,Ve.b),0,Re,Ve.K),Ve.K=Ve.K[0];break;case 3:var qe,Ge=ne(Le,8)+1,kt=16<Ge?0:4<Ge?1:2<Ge?2:3;if(oe[0]=ge(Ve.Ea,kt),Ve.b=kt,qe=We=lo(Ge,1,0,Re,Ve.K)){var pt,Xt=Ge,vt=Ve,dr=1<<(8>>vt.b),un=a(dr);if(un==null)qe=0;else{var tr=vt.K[0],mt=vt.w;for(un[0]=vt.K[0][0],pt=1;pt<1*Xt;++pt)un[pt]=De(tr[mt+pt],un[pt-1]);for(;pt<4*dr;++pt)un[pt]=0;vt.K[0]=null,vt.K[0]=un,qe=1}}We=qe;break;case 2:break;default:e(0)}K=We}}if(J=J[0],Z=Z[0],K&&ne(te,1)&&!(K=1<=(Pe=ne(te,4))&&11>=Pe)){L.a=3;break e}var st;if(st=K)t:{var xn,qt,cr,Kr=L,Kn=J,An=Z,rn=Pe,On=k,Yn=Kr.m,Xr=Kr.s,fr=[null],wr=1,Zr=0,Sr=Ah[rn];r:for(;;){if(On&&ne(Yn,1)){var dn=ne(Yn,3)+2,hn=ge(Kn,dn),Dr=ge(An,dn),xi=hn*Dr;if(!lo(hn,Dr,0,Kr,fr))break r;for(fr=fr[0],Xr.xc=dn,xn=0;xn<xi;++xn){var Nr=fr[xn]>>8&65535;fr[xn]=Nr,Nr>=wr&&(wr=Nr+1)}}if(Yn.h)break r;for(qt=0;5>qt;++qt){var Wr=Qa[qt];!qt&&0<rn&&(Wr+=1<<rn),Zr<Wr&&(Zr=Wr)}var Cn=c(wr*Sr,z),ii=wr,Qi=c(ii,le);if(Qi==null)var vn=null;else e(65536>=ii),vn=Qi;var bn=a(Zr);if(vn==null||bn==null||Cn==null){Kr.a=1;break r}var vi=Cn;for(xn=cr=0;xn<wr;++xn){var $r=vn[xn],bi=$r.G,Lo=$r.H,ts=0,Jn=1,wn=0;for(qt=0;5>qt;++qt){Wr=Qa[qt],bi[qt]=vi,Lo[qt]=cr,!qt&&0<rn&&(Wr+=1<<rn);i:{var wa,Hs=Wr,Il=Kr,_s=bn,Ih=vi,wd=cr,Jr=0,rs=Il.m,Sd=ne(rs,1);if(o(_s,0,0,Hs),Sd){var _d=ne(rs,1)+1,uu=ne(rs,1),du=ne(rs,uu==0?1:8);_s[du]=1,_d==2&&(_s[du=ne(rs,8)]=1);var Ts=1}else{var en=a(19),kn=ne(rs,4)+4;if(19<kn){Il.a=3;var Sn=0;break i}for(wa=0;wa<kn;++wa)en[Pp[wa]]=ne(rs,3);var Rl=void 0,Gs=void 0,Pl=Il,Op=en,Vn=Hs,hu=_s,Ac=0,As=Pl.m,ns=8,xo=c(128,z);n:for(;S(xo,0,7,Op,19);){if(ne(As,1)){var Cc=2+2*ne(As,3);if((Rl=2+ne(As,Cc))>Vn)break n}else Rl=Vn;for(Gs=0;Gs<Vn&&Rl--;){Se(As);var fu=xo[0+(127&re(As))];fe(As,As.u+fu.g);var Sa=fu.value;if(16>Sa)hu[Gs++]=Sa,Sa!=0&&(ns=Sa);else{var Rh=Sa==16,Td=Sa-16,Ph=au[Td],Ad=ne(As,wc[Td])+Ph;if(Gs+Ad>Vn)break n;for(var Nh=Rh?ns:0;0<Ad--;)hu[Gs++]=Nh}}Ac=1;break n}Ac||(Pl.a=3),Ts=Ac}(Ts=Ts&&!rs.h)&&(Jr=S(Ih,wd,8,_s,Hs)),Ts&&Jr!=0?Sn=Jr:(Il.a=3,Sn=0)}if(Sn==0)break r;if(Jn&&Th[qt]==1&&(Jn=vi[cr].g==0),ts+=vi[cr].g,cr+=Sn,3>=qt){var Nl,pu=bn[0];for(Nl=1;Nl<Wr;++Nl)bn[Nl]>pu&&(pu=bn[Nl]);wn+=pu}}if($r.nd=Jn,$r.Qb=0,Jn&&($r.qb=(bi[3][Lo[3]+0].value<<24|bi[1][Lo[1]+0].value<<16|bi[2][Lo[2]+0].value)>>>0,ts==0&&256>bi[0][Lo[0]+0].value&&($r.Qb=1,$r.qb+=bi[0][Lo[0]+0].value<<8)),$r.jc=!$r.Qb&&6>wn,$r.jc){var kc,vo=$r;for(kc=0;kc<Ro;++kc){var Ks=kc,is=vo.pd[Ks],rl=vo.G[0][vo.H[0]+Ks];256<=rl.value?(is.g=rl.g+256,is.value=rl.value):(is.g=0,is.value=0,Ks>>=Fr(rl,8,is),Ks>>=Fr(vo.G[1][vo.H[1]+Ks],16,is),Ks>>=Fr(vo.G[2][vo.H[2]+Ks],0,is),Fr(vo.G[3][vo.H[3]+Ks],24,is))}}}Xr.vc=fr,Xr.Wb=wr,Xr.Ya=vn,Xr.yc=Cn,st=1;break t}st=0}if(!(K=st)){L.a=3;break e}if(0<Pe){if(ie.ua=1<<Pe,!Q(ie.Wa,Pe)){L.a=1,K=0;break e}}else ie.ua=0;var mu=L,gu=J,Lh=Z,yu=mu.s,xu=yu.xc;if(mu.c=gu,mu.i=Lh,yu.md=ge(gu,xu),yu.wc=xu==0?-1:(1<<xu)-1,k){L.xb=Ss;break e}if((ye=a(J*Z))==null){L.a=1,K=0;break e}K=(K=ji(L,ye,0,J,Z,Z,null))&&!te.h;break e}return K?(H!=null?H[0]=ye:(e(ye==null),e(k)),L.$=0,k||Ei(ie)):Ei(ie),K}function co(p,x){var k=p.c*p.i,L=k+x+16*x;return e(p.c<=x),p.V=a(L),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+k+x,1)}function us(p,x){var k=p.C,L=x-k,H=p.V,K=p.Ba+p.c*k;for(e(x<=p.l.o);0<L;){var J=16<L?16:L,Z=p.l.ma,te=p.l.width,ie=te*J,ye=Z.ca,Pe=Z.tb+te*k,oe=p.Ta,Te=p.Ua;qn(p,J,H,K),ud(oe,Te,ye,Pe,ie),Wi(Z,k,k+J,ye,Pe,te),L-=J,H+=J*p.c,k+=J}e(k==x),p.C=p.Ma=x}function Uo(){this.ub=this.yd=this.td=this.Rb=0}function _o(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function qo(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function jr(){this.Yb=(function(){var p=[];return(function x(k,L,H){for(var K=H[L],J=0;J<K&&(k.push(H.length>L+1?[]:0),!(H.length<L+1));J++)x(k[J],L+1,H)})(p,0,[3,11]),p})()}function gl(){this.jb=a(3),this.Wc=u([4,8],jr),this.Xc=u([4,17],jr)}function Ps(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function ci(){this.ld=this.La=this.dd=this.tc=0}function Ho(){this.Na=this.la=0}function aa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ds(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function hs(){this.uc=this.M=this.Nb=0,this.wa=Array(new ci),this.Y=0,this.ya=Array(new ds),this.aa=0,this.l=new Hn}function ui(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Fa(){this.cb=this.a=0,this.sc="",this.m=new D,this.Od=new Uo,this.Kc=new _o,this.ed=new Ps,this.Qa=new qo,this.Ic=this.$c=this.Aa=0,this.D=new hs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,D),this.ia=0,this.pb=c(4,aa),this.Pa=new gl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ui),this.Hd=0,this.rb=Array(new Ho),this.sb=0,this.wa=Array(new ci),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ds),this.L=this.aa=0,this.gd=u([4,2],ci),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Hn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function To(){var p=new Fa;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,Xa||(Xa=di)),p}function vr(p,x,k){return p.a==0&&(p.a=x,p.sc=k,p.cb=0),0}function fs(p,x,k){return 3<=k&&p[x+0]==157&&p[x+1]==1&&p[x+2]==42}function uo(p,x){if(p==null)return 0;if(p.a=0,p.sc="OK",x==null)return vr(p,2,"null VP8Io passed to VP8GetHeaders()");var k=x.data,L=x.w,H=x.ha;if(4>H)return vr(p,7,"Truncated header.");var K=k[L+0]|k[L+1]<<8|k[L+2]<<16,J=p.Od;if(J.Rb=!(1&K),J.td=K>>1&7,J.yd=K>>4&1,J.ub=K>>5,3<J.td)return vr(p,3,"Incorrect keyframe parameters.");if(!J.yd)return vr(p,4,"Frame not displayable.");L+=3,H-=3;var Z=p.Kc;if(J.Rb){if(7>H)return vr(p,7,"cannot parse picture header");if(!fs(k,L,H))return vr(p,3,"Bad code word");Z.c=16383&(k[L+4]<<8|k[L+3]),Z.Td=k[L+4]>>6,Z.i=16383&(k[L+6]<<8|k[L+5]),Z.Ud=k[L+6]>>6,L+=7,H-=7,p.za=Z.c+15>>4,p.Ub=Z.i+15>>4,x.width=Z.c,x.height=Z.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,o((K=p.Pa).jb,0,255,K.jb.length),e((K=p.Qa)!=null),K.Cb=0,K.Bb=0,K.Fb=1,o(K.Zb,0,0,K.Zb.length),o(K.Lb,0,0,K.Lb)}if(J.ub>H)return vr(p,7,"bad partition length");ve(K=p.m,k,L,J.ub),L+=J.ub,H-=J.ub,J.Rb&&(Z.Ld=ke(K),Z.Kd=ke(K)),Z=p.Qa;var te,ie=p.Pa;if(e(K!=null),e(Z!=null),Z.Cb=ke(K),Z.Cb){if(Z.Bb=ke(K),ke(K)){for(Z.Fb=ke(K),te=0;4>te;++te)Z.Zb[te]=ke(K)?ce(K,7):0;for(te=0;4>te;++te)Z.Lb[te]=ke(K)?ce(K,6):0}if(Z.Bb)for(te=0;3>te;++te)ie.jb[te]=ke(K)?de(K,8):255}else Z.Bb=0;if(K.Ka)return vr(p,3,"cannot parse segment header");if((Z=p.ed).zd=ke(K),Z.Tb=de(K,6),Z.wb=de(K,3),Z.Pc=ke(K),Z.Pc&&ke(K)){for(ie=0;4>ie;++ie)ke(K)&&(Z.vd[ie]=ce(K,6));for(ie=0;4>ie;++ie)ke(K)&&(Z.od[ie]=ce(K,6))}if(p.L=Z.Tb==0?0:Z.zd?1:2,K.Ka)return vr(p,3,"cannot parse filter header");var ye=H;if(H=te=L,L=te+ye,Z=ye,p.Xb=(1<<de(p.m,2))-1,ye<3*(ie=p.Xb))k=7;else{for(te+=3*ie,Z-=3*ie,ye=0;ye<ie;++ye){var Pe=k[H+0]|k[H+1]<<8|k[H+2]<<16;Pe>Z&&(Pe=Z),ve(p.Jc[+ye],k,te,Pe),te+=Pe,Z-=Pe,H+=3}ve(p.Jc[+ie],k,te,Z),k=te<L?0:5}if(k!=0)return vr(p,k,"cannot parse partitions");for(k=de(te=p.m,7),H=ke(te)?ce(te,4):0,L=ke(te)?ce(te,4):0,Z=ke(te)?ce(te,4):0,ie=ke(te)?ce(te,4):0,te=ke(te)?ce(te,4):0,ye=p.Qa,Pe=0;4>Pe;++Pe){if(ye.Cb){var oe=ye.Zb[Pe];ye.Fb||(oe+=k)}else{if(0<Pe){p.pb[Pe]=p.pb[0];continue}oe=k}var Te=p.pb[Pe];Te.Sc[0]=Cl[an(oe+H,127)],Te.Sc[1]=Sc[an(oe+0,127)],Te.Eb[0]=2*Cl[an(oe+L,127)],Te.Eb[1]=101581*Sc[an(oe+Z,127)]>>16,8>Te.Eb[1]&&(Te.Eb[1]=8),Te.Qc[0]=Cl[an(oe+ie,117)],Te.Qc[1]=Sc[an(oe+te,127)],Te.lc=oe+te}if(!J.Rb)return vr(p,4,"Not a key frame.");for(ke(K),J=p.Pa,k=0;4>k;++k){for(H=0;8>H;++H)for(L=0;3>L;++L)for(Z=0;11>Z;++Z)ie=Oe(K,Bp[k][H][L][Z])?de(K,8):kh[k][H][L][Z],J.Wc[k][H].Yb[L][Z]=ie;for(H=0;17>H;++H)J.Xc[k][H]=J.Wc[k][xd[H]]}return p.kc=ke(K),p.kc&&(p.Bd=de(K,8)),p.cb=1}function di(p,x,k,L,H,K,J){var Z=x[H].Yb[k];for(k=0;16>H;++H){if(!Oe(p,Z[k+0]))return H;for(;!Oe(p,Z[k+1]);)if(Z=x[++H].Yb[0],k=0,H==16)return 16;var te=x[H+1].Yb;if(Oe(p,Z[k+2])){var ie=p,ye=0;if(Oe(ie,(oe=Z)[(Pe=k)+3]))if(Oe(ie,oe[Pe+6])){for(Z=0,Pe=2*(ye=Oe(ie,oe[Pe+8]))+(oe=Oe(ie,oe[Pe+9+ye])),ye=0,oe=gd[Pe];oe[Z];++Z)ye+=ye+Oe(ie,oe[Z]);ye+=3+(8<<Pe)}else Oe(ie,oe[Pe+7])?(ye=7+2*Oe(ie,165),ye+=Oe(ie,145)):ye=5+Oe(ie,159);else ye=Oe(ie,oe[Pe+4])?3+Oe(ie,oe[Pe+5]):2;Z=te[2]}else ye=1,Z=te[1];te=J+yd[H],0>(ie=p).b&&Ee(ie);var Pe,oe=ie.b,Te=(Pe=ie.Ca>>1)-(ie.I>>oe)>>31;--ie.b,ie.Ca+=Te,ie.Ca|=1,ie.I-=(Pe+1&Te)<<oe,K[te]=((ye^Te)-Te)*L[(0<H)+0]}return 16}function lr(p){var x=p.rb[p.sb-1];x.la=0,x.Na=0,o(p.zc,0,0,p.zc.length),p.ja=0}function Ln(p,x,k,L,H){H=p[x+k+32*L]+(H>>3),p[x+k+32*L]=-256&H?0>H?0:255:H}function ho(p,x,k,L,H,K){Ln(p,x,0,k,L+H),Ln(p,x,1,k,L+K),Ln(p,x,2,k,L-K),Ln(p,x,3,k,L-H)}function zr(p){return(20091*p>>16)+p}function Ns(p,x,k,L){var H,K=0,J=a(16);for(H=0;4>H;++H){var Z=p[x+0]+p[x+8],te=p[x+0]-p[x+8],ie=(35468*p[x+4]>>16)-zr(p[x+12]),ye=zr(p[x+4])+(35468*p[x+12]>>16);J[K+0]=Z+ye,J[K+1]=te+ie,J[K+2]=te-ie,J[K+3]=Z-ye,K+=4,x++}for(H=K=0;4>H;++H)Z=(p=J[K+0]+4)+J[K+8],te=p-J[K+8],ie=(35468*J[K+4]>>16)-zr(J[K+12]),Ln(k,L,0,0,Z+(ye=zr(J[K+4])+(35468*J[K+12]>>16))),Ln(k,L,1,0,te+ie),Ln(k,L,2,0,te-ie),Ln(k,L,3,0,Z-ye),K++,L+=32}function za(p,x,k,L){var H=p[x+0]+4,K=35468*p[x+4]>>16,J=zr(p[x+4]),Z=35468*p[x+1]>>16;ho(k,L,0,H+J,p=zr(p[x+1]),Z),ho(k,L,1,H+K,p,Z),ho(k,L,2,H-K,p,Z),ho(k,L,3,H-J,p,Z)}function Oa(p,x,k,L,H){Ns(p,x,k,L),H&&Ns(p,x+16,k,L+4)}function Ls(p,x,k,L){Ga(p,x+0,k,L,1),Ga(p,x+32,k,L+128,1)}function Ao(p,x,k,L){var H;for(p=p[x+0]+4,H=0;4>H;++H)for(x=0;4>x;++x)Ln(k,L,x,H,p)}function la(p,x,k,L){p[x+0]&&br(p,x+0,k,L),p[x+16]&&br(p,x+16,k,L+4),p[x+32]&&br(p,x+32,k,L+128),p[x+48]&&br(p,x+48,k,L+128+4)}function or(p,x,k,L){var H,K=a(16);for(H=0;4>H;++H){var J=p[x+0+H]+p[x+12+H],Z=p[x+4+H]+p[x+8+H],te=p[x+4+H]-p[x+8+H],ie=p[x+0+H]-p[x+12+H];K[0+H]=J+Z,K[8+H]=J-Z,K[4+H]=ie+te,K[12+H]=ie-te}for(H=0;4>H;++H)J=(p=K[0+4*H]+3)+K[3+4*H],Z=K[1+4*H]+K[2+4*H],te=K[1+4*H]-K[2+4*H],ie=p-K[3+4*H],k[L+0]=J+Z>>3,k[L+16]=ie+te>>3,k[L+32]=J-Z>>3,k[L+48]=ie-te>>3,L+=64}function ti(p,x,k){var L,H=x-32,K=Ni,J=255-p[H-1];for(L=0;L<k;++L){var Z,te=K,ie=J+p[x-1];for(Z=0;Z<k;++Z)p[x+Z]=te[ie+p[H+Z]];x+=32}}function Bs(p,x){ti(p,x,4)}function ca(p,x){ti(p,x,8)}function Va(p,x){ti(p,x,16)}function Ma(p,x){var k;for(k=0;16>k;++k)n(p,x+32*k,p,x-32,16)}function Fs(p,x){var k;for(k=16;0<k;--k)o(p,x,p[x-1],16),x+=32}function hi(p,x,k){var L;for(L=0;16>L;++L)o(x,k+32*L,p,16)}function fo(p,x){var k,L=16;for(k=0;16>k;++k)L+=p[x-1+32*k]+p[x+k-32];hi(L>>5,p,x)}function Co(p,x){var k,L=8;for(k=0;16>k;++k)L+=p[x-1+32*k];hi(L>>4,p,x)}function fi(p,x){var k,L=8;for(k=0;16>k;++k)L+=p[x+k-32];hi(L>>4,p,x)}function gn(p,x){hi(128,p,x)}function Bt(p,x,k){return p+2*x+k+2>>2}function Go(p,x){var k,L=x-32;for(L=new Uint8Array([Bt(p[L-1],p[L+0],p[L+1]),Bt(p[L+0],p[L+1],p[L+2]),Bt(p[L+1],p[L+2],p[L+3]),Bt(p[L+2],p[L+3],p[L+4])]),k=0;4>k;++k)n(p,x+32*k,L,0,L.length)}function Ii(p,x){var k=p[x-1],L=p[x-1+32],H=p[x-1+64],K=p[x-1+96];Ke(p,x+0,16843009*Bt(p[x-1-32],k,L)),Ke(p,x+32,16843009*Bt(k,L,H)),Ke(p,x+64,16843009*Bt(L,H,K)),Ke(p,x+96,16843009*Bt(H,K,K))}function yl(p,x){var k,L=4;for(k=0;4>k;++k)L+=p[x+k-32]+p[x-1+32*k];for(L>>=3,k=0;4>k;++k)o(p,x+32*k,L,4)}function ps(p,x){var k=p[x-1+0],L=p[x-1+32],H=p[x-1+64],K=p[x-1-32],J=p[x+0-32],Z=p[x+1-32],te=p[x+2-32],ie=p[x+3-32];p[x+0+96]=Bt(L,H,p[x-1+96]),p[x+1+96]=p[x+0+64]=Bt(k,L,H),p[x+2+96]=p[x+1+64]=p[x+0+32]=Bt(K,k,L),p[x+3+96]=p[x+2+64]=p[x+1+32]=p[x+0+0]=Bt(J,K,k),p[x+3+64]=p[x+2+32]=p[x+1+0]=Bt(Z,J,K),p[x+3+32]=p[x+2+0]=Bt(te,Z,J),p[x+3+0]=Bt(ie,te,Z)}function Bn(p,x){var k=p[x+1-32],L=p[x+2-32],H=p[x+3-32],K=p[x+4-32],J=p[x+5-32],Z=p[x+6-32],te=p[x+7-32];p[x+0+0]=Bt(p[x+0-32],k,L),p[x+1+0]=p[x+0+32]=Bt(k,L,H),p[x+2+0]=p[x+1+32]=p[x+0+64]=Bt(L,H,K),p[x+3+0]=p[x+2+32]=p[x+1+64]=p[x+0+96]=Bt(H,K,J),p[x+3+32]=p[x+2+64]=p[x+1+96]=Bt(K,J,Z),p[x+3+64]=p[x+2+96]=Bt(J,Z,te),p[x+3+96]=Bt(Z,te,te)}function ko(p,x){var k=p[x-1+0],L=p[x-1+32],H=p[x-1+64],K=p[x-1-32],J=p[x+0-32],Z=p[x+1-32],te=p[x+2-32],ie=p[x+3-32];p[x+0+0]=p[x+1+64]=K+J+1>>1,p[x+1+0]=p[x+2+64]=J+Z+1>>1,p[x+2+0]=p[x+3+64]=Z+te+1>>1,p[x+3+0]=te+ie+1>>1,p[x+0+96]=Bt(H,L,k),p[x+0+64]=Bt(L,k,K),p[x+0+32]=p[x+1+96]=Bt(k,K,J),p[x+1+32]=p[x+2+96]=Bt(K,J,Z),p[x+2+32]=p[x+3+96]=Bt(J,Z,te),p[x+3+32]=Bt(Z,te,ie)}function ua(p,x){var k=p[x+0-32],L=p[x+1-32],H=p[x+2-32],K=p[x+3-32],J=p[x+4-32],Z=p[x+5-32],te=p[x+6-32],ie=p[x+7-32];p[x+0+0]=k+L+1>>1,p[x+1+0]=p[x+0+64]=L+H+1>>1,p[x+2+0]=p[x+1+64]=H+K+1>>1,p[x+3+0]=p[x+2+64]=K+J+1>>1,p[x+0+32]=Bt(k,L,H),p[x+1+32]=p[x+0+96]=Bt(L,H,K),p[x+2+32]=p[x+1+96]=Bt(H,K,J),p[x+3+32]=p[x+2+96]=Bt(K,J,Z),p[x+3+64]=Bt(J,Z,te),p[x+3+96]=Bt(Z,te,ie)}function Er(p,x){var k=p[x-1+0],L=p[x-1+32],H=p[x-1+64],K=p[x-1+96];p[x+0+0]=k+L+1>>1,p[x+2+0]=p[x+0+32]=L+H+1>>1,p[x+2+32]=p[x+0+64]=H+K+1>>1,p[x+1+0]=Bt(k,L,H),p[x+3+0]=p[x+1+32]=Bt(L,H,K),p[x+3+32]=p[x+1+64]=Bt(H,K,K),p[x+3+64]=p[x+2+64]=p[x+0+96]=p[x+1+96]=p[x+2+96]=p[x+3+96]=K}function zs(p,x){var k=p[x-1+0],L=p[x-1+32],H=p[x-1+64],K=p[x-1+96],J=p[x-1-32],Z=p[x+0-32],te=p[x+1-32],ie=p[x+2-32];p[x+0+0]=p[x+2+32]=k+J+1>>1,p[x+0+32]=p[x+2+64]=L+k+1>>1,p[x+0+64]=p[x+2+96]=H+L+1>>1,p[x+0+96]=K+H+1>>1,p[x+3+0]=Bt(Z,te,ie),p[x+2+0]=Bt(J,Z,te),p[x+1+0]=p[x+3+32]=Bt(k,J,Z),p[x+1+32]=p[x+3+64]=Bt(L,k,J),p[x+1+64]=p[x+3+96]=Bt(H,L,k),p[x+1+96]=Bt(K,H,L)}function Da(p,x){var k;for(k=0;8>k;++k)n(p,x+32*k,p,x-32,8)}function $i(p,x){var k;for(k=0;8>k;++k)o(p,x,p[x-1],8),x+=32}function po(p,x,k){var L;for(L=0;8>L;++L)o(x,k+32*L,p,8)}function Ui(p,x){var k,L=8;for(k=0;8>k;++k)L+=p[x+k-32]+p[x-1+32*k];po(L>>4,p,x)}function Ko(p,x){var k,L=4;for(k=0;8>k;++k)L+=p[x+k-32];po(L>>3,p,x)}function qi(p,x){var k,L=4;for(k=0;8>k;++k)L+=p[x-1+32*k];po(L>>3,p,x)}function da(p,x){po(128,p,x)}function Yo(p,x,k){var L=p[x-k],H=p[x+0],K=3*(H-L)+ws[1020+p[x-2*k]-p[x+k]],J=Tl[112+(K+4>>3)];p[x-k]=Ni[255+L+Tl[112+(K+3>>3)]],p[x+0]=Ni[255+H-J]}function pi(p,x,k,L){var H=p[x+0],K=p[x+k];return Po[255+p[x-2*k]-p[x-k]]>L||Po[255+K-H]>L}function ms(p,x,k,L){return 4*Po[255+p[x-k]-p[x+0]]+Po[255+p[x-2*k]-p[x+k]]<=L}function Jo(p,x,k,L,H){var K=p[x-3*k],J=p[x-2*k],Z=p[x-k],te=p[x+0],ie=p[x+k],ye=p[x+2*k],Pe=p[x+3*k];return 4*Po[255+Z-te]+Po[255+J-ie]>L?0:Po[255+p[x-4*k]-K]<=H&&Po[255+K-J]<=H&&Po[255+J-Z]<=H&&Po[255+Pe-ye]<=H&&Po[255+ye-ie]<=H&&Po[255+ie-te]<=H}function ri(p,x,k,L){var H=2*L+1;for(L=0;16>L;++L)ms(p,x+L,k,H)&&Yo(p,x+L,k)}function jo(p,x,k,L){var H=2*L+1;for(L=0;16>L;++L)ms(p,x+L*k,1,H)&&Yo(p,x+L*k,1)}function Eo(p,x,k,L){var H;for(H=3;0<H;--H)ri(p,x+=4*k,k,L)}function Wa(p,x,k,L){var H;for(H=3;0<H;--H)jo(p,x+=4,k,L)}function Ri(p,x,k,L,H,K,J,Z){for(K=2*K+1;0<H--;){if(Jo(p,x,k,K,J))if(pi(p,x,k,Z))Yo(p,x,k);else{var te=p,ie=x,ye=k,Pe=te[ie-2*ye],oe=te[ie-ye],Te=te[ie+0],Re=te[ie+ye],We=te[ie+2*ye],Le=27*(Me=ws[1020+3*(Te-oe)+ws[1020+Pe-Re]])+63>>7,Ve=18*Me+63>>7,Me=9*Me+63>>7;te[ie-3*ye]=Ni[255+te[ie-3*ye]+Me],te[ie-2*ye]=Ni[255+Pe+Ve],te[ie-ye]=Ni[255+oe+Le],te[ie+0]=Ni[255+Te-Le],te[ie+ye]=Ni[255+Re-Ve],te[ie+2*ye]=Ni[255+We-Me]}x+=L}}function Gn(p,x,k,L,H,K,J,Z){for(K=2*K+1;0<H--;){if(Jo(p,x,k,K,J))if(pi(p,x,k,Z))Yo(p,x,k);else{var te=p,ie=x,ye=k,Pe=te[ie-ye],oe=te[ie+0],Te=te[ie+ye],Re=Tl[112+(4+(We=3*(oe-Pe))>>3)],We=Tl[112+(We+3>>3)],Le=Re+1>>1;te[ie-2*ye]=Ni[255+te[ie-2*ye]+Le],te[ie-ye]=Ni[255+Pe+We],te[ie+0]=Ni[255+oe-Re],te[ie+ye]=Ni[255+Te-Le]}x+=L}}function ha(p,x,k,L,H,K){Ri(p,x,k,1,16,L,H,K)}function Fn(p,x,k,L,H,K){Ri(p,x,1,k,16,L,H,K)}function mi(p,x,k,L,H,K){var J;for(J=3;0<J;--J)Gn(p,x+=4*k,k,1,16,L,H,K)}function gs(p,x,k,L,H,K){var J;for(J=3;0<J;--J)Gn(p,x+=4,1,k,16,L,H,K)}function _(p,x,k,L,H,K,J,Z){Ri(p,x,H,1,8,K,J,Z),Ri(k,L,H,1,8,K,J,Z)}function q(p,x,k,L,H,K,J,Z){Ri(p,x,1,H,8,K,J,Z),Ri(k,L,1,H,8,K,J,Z)}function ae(p,x,k,L,H,K,J,Z){Gn(p,x+4*H,H,1,8,K,J,Z),Gn(k,L+4*H,H,1,8,K,J,Z)}function me(p,x,k,L,H,K,J,Z){Gn(p,x+4,1,H,8,K,J,Z),Gn(k,L+4,1,H,8,K,J,Z)}function Ce(){this.ba=new $t,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ar,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function $e(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Qe(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ft(){this.ua=0,this.Wa=new Ue,this.vb=new Ue,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new le,this.yc=new z}function wt(){this.xb=this.a=0,this.l=new Hn,this.ca=new $t,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Y,this.Pb=0,this.wd=new Y,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ft,this.ab=0,this.gc=c(4,Qe),this.Oc=0}function Ft(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Hn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function At(p,x,k,L,H,K,J){for(p=p==null?0:p[x+0],x=0;x<J;++x)H[K+x]=p+k[L+x]&255,p=H[K+x]}function pr(p,x,k,L,H,K,J){var Z;if(p==null)At(null,null,k,L,H,K,J);else for(Z=0;Z<J;++Z)H[K+Z]=p[x+Z]+k[L+Z]&255}function Hr(p,x,k,L,H,K,J){if(p==null)At(null,null,k,L,H,K,J);else{var Z,te=p[x+0],ie=te,ye=te;for(Z=0;Z<J;++Z)ie=ye+(te=p[x+Z])-ie,ye=k[L+Z]+(-256&ie?0>ie?0:255:ie)&255,ie=te,H[K+Z]=ye}}function Or(p,x,k,L){var H=x.width,K=x.o;if(e(p!=null&&x!=null),0>k||0>=L||k+L>K)return null;if(!p.Cc){if(p.ga==null){var J;if(p.ga=new Ft,(J=p.ga==null)||(J=x.width*x.o,e(p.Gb.length==0),p.Gb=a(J),p.Uc=0,p.Gb==null?J=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,J=1),J=!J),!J){J=p.ga;var Z=p.Fa,te=p.P,ie=p.qc,ye=p.mb,Pe=p.nb,oe=te+1,Te=ie-1,Re=J.l;if(e(Z!=null&&ye!=null&&x!=null),yi[0]=null,yi[1]=At,yi[2]=pr,yi[3]=Hr,J.ca=ye,J.tb=Pe,J.c=x.width,J.i=x.height,e(0<J.c&&0<J.i),1>=ie)x=0;else if(J.$a=3&Z[te+0],J.Z=Z[te+0]>>2&3,J.Lc=Z[te+0]>>4&3,te=Z[te+0]>>6&3,0>J.$a||1<J.$a||4<=J.Z||1<J.Lc||te)x=0;else if(Re.put=Nt,Re.ac=Pn,Re.bc=Ci,Re.ma=J,Re.width=x.width,Re.height=x.height,Re.Da=x.Da,Re.v=x.v,Re.va=x.va,Re.j=x.j,Re.o=x.o,J.$a)e:{e(J.$a==1),x=cs();t:for(;;){if(x==null){x=0;break e}if(e(J!=null),J.mc=x,x.c=J.c,x.i=J.i,x.l=J.l,x.l.ma=J,x.l.width=J.c,x.l.height=J.i,x.a=0,we(x.m,Z,oe,Te),!lo(J.c,J.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&Di(x.s)?(J.ic=1,Z=x.c*x.i,x.Ta=null,x.Ua=0,x.V=a(Z),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(J.ic=0,x=co(x,J.c)),!x))break t;x=1;break e}J.mc=null,x=0}else x=Te>=J.c*J.i;J=!x}if(J)return null;p.ga.Lc!=1?p.Ga=0:L=K-k}e(p.ga!=null),e(k+L<=K);e:{if(x=(Z=p.ga).c,K=Z.l.o,Z.$a==0){if(oe=p.rc,Te=p.Vc,Re=p.Fa,te=p.P+1+k*x,ie=p.mb,ye=p.nb+k*x,e(te<=p.P+p.qc),Z.Z!=0)for(e(yi[Z.Z]!=null),J=0;J<L;++J)yi[Z.Z](oe,Te,Re,te,ie,ye,x),oe=ie,Te=ye,ye+=x,te+=x;else for(J=0;J<L;++J)n(ie,ye,Re,te,x),oe=ie,Te=ye,ye+=x,te+=x;p.rc=oe,p.Vc=Te}else{if(e(Z.mc!=null),x=k+L,e((J=Z.mc)!=null),e(x<=J.i),J.C>=x)x=1;else if(Z.ic||Ie(),Z.ic){Z=J.V,oe=J.Ba,Te=J.c;var We=J.i,Le=(Re=1,te=J.$/Te,ie=J.$%Te,ye=J.m,Pe=J.s,J.$),Ve=Te*We,Me=Te*x,qe=Pe.wc,Ge=Le<Me?sn(Pe,ie,te):null;e(Le<=Ve),e(x<=We),e(Di(Pe));t:for(;;){for(;!ye.h&&Le<Me;){if(ie&qe||(Ge=sn(Pe,ie,te)),e(Ge!=null),Se(ye),256>(We=Tr(Ge.G[0],Ge.H[0],ye)))Z[oe+Le]=We,++Le,++ie>=Te&&(ie=0,++te<=x&&!(te%16)&&mn(J,te));else{if(!(280>We)){Re=0;break t}We=Nn(We-256,ye);var kt,pt=Tr(Ge.G[4],Ge.H[4],ye);if(Se(ye),!(Le>=(pt=ki(Te,pt=Nn(pt,ye)))&&Ve-Le>=We)){Re=0;break t}for(kt=0;kt<We;++kt)Z[oe+Le+kt]=Z[oe+Le+kt-pt];for(Le+=We,ie+=We;ie>=Te;)ie-=Te,++te<=x&&!(te%16)&&mn(J,te);Le<Me&&ie&qe&&(Ge=sn(Pe,ie,te))}e(ye.h==ue(ye))}mn(J,te>x?x:te);break t}!Re||ye.h&&Le<Ve?(Re=0,J.a=ye.h?5:3):J.$=Le,x=Re}else x=ji(J,J.V,J.Ba,J.c,J.i,x,us);if(!x){L=0;break e}}k+L>=K&&(p.Cc=1),L=1}if(!L)return null;if(p.Cc&&((L=p.ga)!=null&&(L.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+k*H}function m(p,x,k,L,H,K){for(;0<H--;){var J,Z=p,te=x+(k?1:0),ie=p,ye=x+(k?0:3);for(J=0;J<L;++J){var Pe=ie[ye+4*J];Pe!=255&&(Pe*=32897,Z[te+4*J+0]=Z[te+4*J+0]*Pe>>23,Z[te+4*J+1]=Z[te+4*J+1]*Pe>>23,Z[te+4*J+2]=Z[te+4*J+2]*Pe>>23)}x+=K}}function I(p,x,k,L,H){for(;0<L--;){var K;for(K=0;K<k;++K){var J=p[x+2*K+0],Z=15&(ie=p[x+2*K+1]),te=4369*Z,ie=(240&ie|ie>>4)*te>>16;p[x+2*K+0]=(240&J|J>>4)*te>>16&240|(15&J|J<<4)*te>>16>>4&15,p[x+2*K+1]=240&ie|Z}x+=H}}function M(p,x,k,L,H,K,J,Z){var te,ie,ye=255;for(ie=0;ie<H;++ie){for(te=0;te<L;++te){var Pe=p[x+te];K[J+4*te]=Pe,ye&=Pe}x+=k,J+=Z}return ye!=255}function ee(p,x,k,L,H){var K;for(K=0;K<H;++K)k[L+K]=p[x+K]>>8}function Ie(){Ya=m,cd=I,gc=M,ud=ee}function Be(p,x,k){w[p]=function(L,H,K,J,Z,te,ie,ye,Pe,oe,Te,Re,We,Le,Ve,Me,qe){var Ge,kt=qe-1>>1,pt=Z[te+0]|ie[ye+0]<<16,Xt=Pe[oe+0]|Te[Re+0]<<16;e(L!=null);var vt=3*pt+Xt+131074>>2;for(x(L[H+0],255&vt,vt>>16,We,Le),K!=null&&(vt=3*Xt+pt+131074>>2,x(K[J+0],255&vt,vt>>16,Ve,Me)),Ge=1;Ge<=kt;++Ge){var dr=Z[te+Ge]|ie[ye+Ge]<<16,un=Pe[oe+Ge]|Te[Re+Ge]<<16,tr=pt+dr+Xt+un+524296,mt=tr+2*(dr+Xt)>>3;vt=mt+pt>>1,pt=(tr=tr+2*(pt+un)>>3)+dr>>1,x(L[H+2*Ge-1],255&vt,vt>>16,We,Le+(2*Ge-1)*k),x(L[H+2*Ge-0],255&pt,pt>>16,We,Le+(2*Ge-0)*k),K!=null&&(vt=tr+Xt>>1,pt=mt+un>>1,x(K[J+2*Ge-1],255&vt,vt>>16,Ve,Me+(2*Ge-1)*k),x(K[J+2*Ge+0],255&pt,pt>>16,Ve,Me+(2*Ge+0)*k)),pt=dr,Xt=un}1&qe||(vt=3*pt+Xt+131074>>2,x(L[H+qe-1],255&vt,vt>>16,We,Le+(qe-1)*k),K!=null&&(vt=3*Xt+pt+131074>>2,x(K[J+qe-1],255&vt,vt>>16,Ve,Me+(qe-1)*k)))}}function ot(){Ki[ou]=Fp,Ki[xa]=va,Ki[_h]=zp,Ki[yc]=jl,Ki[xc]=Za,Ki[Mr]=_c,Ki[su]=vd,Ki[Al]=va,Ki[Ja]=jl,Ki[vc]=Za,Ki[bc]=_c}function Dt(p){return p&-16384?0>p?0:255:p>>ba}function Vr(p,x){return Dt((19077*p>>8)+(26149*x>>8)-14234)}function ur(p,x,k){return Dt((19077*p>>8)-(6419*x>>8)-(13320*k>>8)+8708)}function Gr(p,x){return Dt((19077*p>>8)+(33050*x>>8)-17685)}function zn(p,x,k,L,H){L[H+0]=Vr(p,k),L[H+1]=ur(p,x,k),L[H+2]=Gr(p,x)}function Pi(p,x,k,L,H){L[H+0]=Gr(p,x),L[H+1]=ur(p,x,k),L[H+2]=Vr(p,k)}function Yr(p,x,k,L,H){var K=ur(p,x,k);x=K<<3&224|Gr(p,x)>>3,L[H+0]=248&Vr(p,k)|K>>5,L[H+1]=x}function gi(p,x,k,L,H){var K=240&Gr(p,x)|15;L[H+0]=240&Vr(p,k)|ur(p,x,k)>>4,L[H+1]=K}function Io(p,x,k,L,H){L[H+0]=255,zn(p,x,k,L,H+1)}function Os(p,x,k,L,H){Pi(p,x,k,L,H),L[H+3]=255}function fc(p,x,k,L,H){zn(p,x,k,L,H),L[H+3]=255}function an(p,x){return 0>p?0:p>x?x:p}function Qo(p,x,k){w[p]=function(L,H,K,J,Z,te,ie,ye,Pe){for(var oe=ye+(-2&Pe)*k;ye!=oe;)x(L[H+0],K[J+0],Z[te+0],ie,ye),x(L[H+1],K[J+0],Z[te+0],ie,ye+k),H+=2,++J,++te,ye+=2*k;1&Pe&&x(L[H+0],K[J+0],Z[te+0],ie,ye)}}function ys(p,x,k){return k==0?p==0?x==0?6:5:x==0?4:0:k}function ru(p,x,k,L,H){switch(p>>>30){case 3:Ga(x,k,L,H,0);break;case 2:ln(x,k,L,H);break;case 1:br(x,k,L,H)}}function mo(p,x){var k,L,H=x.M,K=x.Nb,J=p.oc,Z=p.pc+40,te=p.oc,ie=p.pc+584,ye=p.oc,Pe=p.pc+600;for(k=0;16>k;++k)J[Z+32*k-1]=129;for(k=0;8>k;++k)te[ie+32*k-1]=129,ye[Pe+32*k-1]=129;for(0<H?J[Z-1-32]=te[ie-1-32]=ye[Pe-1-32]=129:(o(J,Z-32-1,127,21),o(te,ie-32-1,127,9),o(ye,Pe-32-1,127,9)),L=0;L<p.za;++L){var oe=x.ya[x.aa+L];if(0<L){for(k=-1;16>k;++k)n(J,Z+32*k-4,J,Z+32*k+12,4);for(k=-1;8>k;++k)n(te,ie+32*k-4,te,ie+32*k+4,4),n(ye,Pe+32*k-4,ye,Pe+32*k+4,4)}var Te=p.Gd,Re=p.Hd+L,We=oe.ad,Le=oe.Hc;if(0<H&&(n(J,Z-32,Te[Re].y,0,16),n(te,ie-32,Te[Re].f,0,8),n(ye,Pe-32,Te[Re].ea,0,8)),oe.Za){var Ve=J,Me=Z-32+16;for(0<H&&(L>=p.za-1?o(Ve,Me,Te[Re].y[15],4):n(Ve,Me,Te[Re+1].y,0,4)),k=0;4>k;k++)Ve[Me+128+k]=Ve[Me+256+k]=Ve[Me+384+k]=Ve[Me+0+k];for(k=0;16>k;++k,Le<<=2)Ve=J,Me=Z+bd[k],No[oe.Ob[k]](Ve,Me),ru(Le,We,16*+k,Ve,Me)}else if(Ve=ys(L,H,oe.Ob[0]),Li[Ve](J,Z),Le!=0)for(k=0;16>k;++k,Le<<=2)ru(Le,We,16*+k,J,Z+bd[k]);for(k=oe.Gc,Ve=ys(L,H,oe.Dd),Gi[Ve](te,ie),Gi[Ve](ye,Pe),Le=We,Ve=te,Me=ie,255&(oe=0|k)&&(170&oe?Hi(Le,256,Ve,Me):Rr(Le,256,Ve,Me)),oe=ye,Le=Pe,255&(k>>=8)&&(170&k?Hi(We,320,oe,Le):Rr(We,320,oe,Le)),H<p.Ub-1&&(n(Te[Re].y,0,J,Z+480,16),n(Te[Re].f,0,te,ie+224,8),n(Te[Re].ea,0,ye,Pe+224,8)),k=8*K*p.B,Te=p.sa,Re=p.ta+16*L+16*K*p.R,We=p.qa,oe=p.ra+8*L+k,Le=p.Ha,Ve=p.Ia+8*L+k,k=0;16>k;++k)n(Te,Re+k*p.R,J,Z+32*k,16);for(k=0;8>k;++k)n(We,oe+k*p.B,te,ie+32*k,8),n(Le,Ve+k*p.B,ye,Pe+32*k,8)}}function fa(p,x,k,L,H,K,J,Z,te){var ie=[0],ye=[0],Pe=0,oe=te!=null?te.kd:0,Te=te??new $e;if(p==null||12>k)return 7;Te.data=p,Te.w=x,Te.ha=k,x=[x],k=[k],Te.gb=[Te.gb];e:{var Re=x,We=k,Le=Te.gb;if(e(p!=null),e(We!=null),e(Le!=null),Le[0]=0,12<=We[0]&&!t(p,Re[0],"RIFF")){if(t(p,Re[0]+8,"WEBP")){Le=3;break e}var Ve=pe(p,Re[0]+4);if(12>Ve||4294967286<Ve){Le=3;break e}if(oe&&Ve>We[0]-8){Le=7;break e}Le[0]=Ve,Re[0]+=12,We[0]-=12}Le=0}if(Le!=0)return Le;for(Ve=0<Te.gb[0],k=k[0];;){e:{var Me=p;We=x,Le=k;var qe=ie,Ge=ye,kt=Re=[0];if((vt=Pe=[Pe])[0]=0,8>Le[0])Le=7;else{if(!t(Me,We[0],"VP8X")){if(pe(Me,We[0]+4)!=10){Le=3;break e}if(18>Le[0]){Le=7;break e}var pt=pe(Me,We[0]+8),Xt=1+_e(Me,We[0]+12);if(2147483648<=Xt*(Me=1+_e(Me,We[0]+15))){Le=3;break e}kt!=null&&(kt[0]=pt),qe!=null&&(qe[0]=Xt),Ge!=null&&(Ge[0]=Me),We[0]+=18,Le[0]-=18,vt[0]=1}Le=0}}if(Pe=Pe[0],Re=Re[0],Le!=0)return Le;if(We=!!(2&Re),!Ve&&Pe)return 3;if(K!=null&&(K[0]=!!(16&Re)),J!=null&&(J[0]=We),Z!=null&&(Z[0]=0),J=ie[0],Re=ye[0],Pe&&We&&te==null){Le=0;break}if(4>k){Le=7;break}if(Ve&&Pe||!Ve&&!Pe&&!t(p,x[0],"ALPH")){k=[k],Te.na=[Te.na],Te.P=[Te.P],Te.Sa=[Te.Sa];e:{pt=p,Le=x,Ve=k;var vt=Te.gb;qe=Te.na,Ge=Te.P,kt=Te.Sa,Xt=22,e(pt!=null),e(Ve!=null),Me=Le[0];var dr=Ve[0];for(e(qe!=null),e(kt!=null),qe[0]=null,Ge[0]=null,kt[0]=0;;){if(Le[0]=Me,Ve[0]=dr,8>dr){Le=7;break e}var un=pe(pt,Me+4);if(4294967286<un){Le=3;break e}var tr=8+un+1&-2;if(Xt+=tr,0<vt&&Xt>vt){Le=3;break e}if(!t(pt,Me,"VP8 ")||!t(pt,Me,"VP8L")){Le=0;break e}if(dr[0]<tr){Le=7;break e}t(pt,Me,"ALPH")||(qe[0]=pt,Ge[0]=Me+8,kt[0]=un),Me+=tr,dr-=tr}}if(k=k[0],Te.na=Te.na[0],Te.P=Te.P[0],Te.Sa=Te.Sa[0],Le!=0)break}k=[k],Te.Ja=[Te.Ja],Te.xa=[Te.xa];e:if(vt=p,Le=x,Ve=k,qe=Te.gb[0],Ge=Te.Ja,kt=Te.xa,pt=Le[0],Me=!t(vt,pt,"VP8 "),Xt=!t(vt,pt,"VP8L"),e(vt!=null),e(Ve!=null),e(Ge!=null),e(kt!=null),8>Ve[0])Le=7;else{if(Me||Xt){if(vt=pe(vt,pt+4),12<=qe&&vt>qe-12){Le=3;break e}if(oe&&vt>Ve[0]-8){Le=7;break e}Ge[0]=vt,Le[0]+=8,Ve[0]-=8,kt[0]=Xt}else kt[0]=5<=Ve[0]&&vt[pt+0]==47&&!(vt[pt+4]>>5),Ge[0]=Ve[0];Le=0}if(k=k[0],Te.Ja=Te.Ja[0],Te.xa=Te.xa[0],x=x[0],Le!=0)break;if(4294967286<Te.Ja)return 3;if(Z==null||We||(Z[0]=Te.xa?2:1),J=[J],Re=[Re],Te.xa){if(5>k){Le=7;break}Z=J,oe=Re,We=K,p==null||5>k?p=0:5<=k&&p[x+0]==47&&!(p[x+4]>>5)?(Ve=[0],vt=[0],qe=[0],we(Ge=new Y,p,x,k),li(Ge,Ve,vt,qe)?(Z!=null&&(Z[0]=Ve[0]),oe!=null&&(oe[0]=vt[0]),We!=null&&(We[0]=qe[0]),p=1):p=0):p=0}else{if(10>k){Le=7;break}Z=Re,p==null||10>k||!fs(p,x+3,k-3)?p=0:(oe=p[x+0]|p[x+1]<<8|p[x+2]<<16,We=16383&(p[x+7]<<8|p[x+6]),p=16383&(p[x+9]<<8|p[x+8]),1&oe||3<(oe>>1&7)||!(oe>>4&1)||oe>>5>=Te.Ja||!We||!p?p=0:(J&&(J[0]=We),Z&&(Z[0]=p),p=1))}if(!p||(J=J[0],Re=Re[0],Pe&&(ie[0]!=J||ye[0]!=Re)))return 3;te!=null&&(te[0]=Te,te.offset=x-te.w,e(4294967286>x-te.w),e(te.offset==te.ha-k));break}return Le==0||Le==7&&Pe&&te==null?(K!=null&&(K[0]|=Te.na!=null&&0<Te.na.length),L!=null&&(L[0]=J),H!=null&&(H[0]=Re),0):Le}function xl(p,x,k){var L=x.width,H=x.height,K=0,J=0,Z=L,te=H;if(x.Da=p!=null&&0<p.Da,x.Da&&(Z=p.cd,te=p.bd,K=p.v,J=p.j,11>k||(K&=-2,J&=-2),0>K||0>J||0>=Z||0>=te||K+Z>L||J+te>H))return 0;if(x.v=K,x.j=J,x.va=K+Z,x.o=J+te,x.U=Z,x.T=te,x.da=p!=null&&0<p.da,x.da){if(!tt(Z,te,k=[p.ib],K=[p.hb]))return 0;x.ib=k[0],x.hb=K[0]}return x.ob=p!=null&&p.ob,x.Kb=p==null||!p.Sd,x.da&&(x.ob=x.ib<3*L/4&&x.hb<3*H/4,x.Kb=0),1}function vl(p){if(p==null)return 2;if(11>p.S){var x=p.f.RGBA;x.fb+=(p.height-1)*x.A,x.A=-x.A}else x=p.f.kb,p=p.height,x.O+=(p-1)*x.fa,x.fa=-x.fa,x.N+=(p-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(p-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(p-1)*x.lb,x.lb=-x.lb);return 0}function Vs(p,x,k,L){if(L==null||0>=p||0>=x)return 2;if(k!=null){if(k.Da){var H=k.cd,K=k.bd,J=-2&k.v,Z=-2&k.j;if(0>J||0>Z||0>=H||0>=K||J+H>p||Z+K>x)return 2;p=H,x=K}if(k.da){if(!tt(p,x,H=[k.ib],K=[k.hb]))return 2;p=H[0],x=K[0]}}L.width=p,L.height=x;e:{var te=L.width,ie=L.height;if(p=L.S,0>=te||0>=ie||!(p>=ou&&13>p))p=2;else{if(0>=L.Rd&&L.sd==null){J=K=H=x=0;var ye=(Z=te*Tc[p])*ie;if(11>p||(K=(ie+1)/2*(x=(te+1)/2),p==12&&(J=(H=te)*ie)),(ie=a(ye+2*K+J))==null){p=1;break e}L.sd=ie,11>p?((te=L.f.RGBA).eb=ie,te.fb=0,te.A=Z,te.size=ye):((te=L.f.kb).y=ie,te.O=0,te.fa=Z,te.Fd=ye,te.f=ie,te.N=0+ye,te.Ab=x,te.Cd=K,te.ea=ie,te.W=0+ye+K,te.Db=x,te.Ed=K,p==12&&(te.F=ie,te.J=0+ye+2*K),te.Tc=J,te.lb=H)}if(x=1,H=L.S,K=L.width,J=L.height,H>=ou&&13>H)if(11>H)p=L.f.RGBA,x&=(Z=Math.abs(p.A))*(J-1)+K<=p.size,x&=Z>=K*Tc[H],x&=p.eb!=null;else{p=L.f.kb,Z=(K+1)/2,ye=(J+1)/2,te=Math.abs(p.fa),ie=Math.abs(p.Ab);var Pe=Math.abs(p.Db),oe=Math.abs(p.lb),Te=oe*(J-1)+K;x&=te*(J-1)+K<=p.Fd,x&=ie*(ye-1)+Z<=p.Cd,x=(x&=Pe*(ye-1)+Z<=p.Ed)&te>=K&ie>=Z&Pe>=Z,x&=p.y!=null,x&=p.f!=null,x&=p.ea!=null,H==12&&(x&=oe>=K,x&=Te<=p.Tc,x&=p.F!=null)}else x=0;p=x?0:2}}return p!=0||k!=null&&k.fd&&(p=vl(L)),p}var Ro=64,go=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],yo=24,pa=32,xs=8,Ms=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];He("Predictor0","PredictorAdd0"),w.Predictor0=function(){return 4278190080},w.Predictor1=function(p){return p},w.Predictor2=function(p,x,k){return x[k+0]},w.Predictor3=function(p,x,k){return x[k+1]},w.Predictor4=function(p,x,k){return x[k-1]},w.Predictor5=function(p,x,k){return ht(ht(p,x[k+1]),x[k+0])},w.Predictor6=function(p,x,k){return ht(p,x[k-1])},w.Predictor7=function(p,x,k){return ht(p,x[k+0])},w.Predictor8=function(p,x,k){return ht(x[k-1],x[k+0])},w.Predictor9=function(p,x,k){return ht(x[k+0],x[k+1])},w.Predictor10=function(p,x,k){return ht(ht(p,x[k-1]),ht(x[k+0],x[k+1]))},w.Predictor11=function(p,x,k){var L=x[k+0];return 0>=ct(L>>24&255,p>>24&255,(x=x[k-1])>>24&255)+ct(L>>16&255,p>>16&255,x>>16&255)+ct(L>>8&255,p>>8&255,x>>8&255)+ct(255&L,255&p,255&x)?L:p},w.Predictor12=function(p,x,k){var L=x[k+0];return(Tt((p>>24&255)+(L>>24&255)-((x=x[k-1])>>24&255))<<24|Tt((p>>16&255)+(L>>16&255)-(x>>16&255))<<16|Tt((p>>8&255)+(L>>8&255)-(x>>8&255))<<8|Tt((255&p)+(255&L)-(255&x)))>>>0},w.Predictor13=function(p,x,k){var L=x[k-1];return(lt((p=ht(p,x[k+0]))>>24&255,L>>24&255)<<24|lt(p>>16&255,L>>16&255)<<16|lt(p>>8&255,L>>8&255)<<8|lt(255&p,255&L))>>>0};var Ds=w.PredictorAdd0;w.PredictorAdd1=Kt,He("Predictor2","PredictorAdd2"),He("Predictor3","PredictorAdd3"),He("Predictor4","PredictorAdd4"),He("Predictor5","PredictorAdd5"),He("Predictor6","PredictorAdd6"),He("Predictor7","PredictorAdd7"),He("Predictor8","PredictorAdd8"),He("Predictor9","PredictorAdd9"),He("Predictor10","PredictorAdd10"),He("Predictor11","PredictorAdd11"),He("Predictor12","PredictorAdd12"),He("Predictor13","PredictorAdd13");var vs=w.PredictorAdd2;bt("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),bt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var yn,$a=w.ColorIndexInverseTransform,bs=w.MapARGB,Xo=w.VP8LColorIndexInverseTransformAlpha,Ua=w.MapAlpha,qa=w.VP8LPredictorsAdd=[];qa.length=16,(w.VP8LPredictors=[]).length=16,(w.VP8LPredictorsAdd_C=[]).length=16,(w.VP8LPredictors_C=[]).length=16;var bl,wl,Ws,ma,ga,Ha,ya,Ga,ln,Hi,br,Rr,cn,Tn,Zo,pc,Sl,$s,nu,_l,iu,ld,mc,Ka,Ya,cd,gc,ud,dd=a(511),hd=a(2041),fd=a(225),pd=a(767),md=0,ws=hd,Tl=fd,Ni=pd,Po=dd,ou=0,xa=1,_h=2,yc=3,xc=4,Mr=5,su=6,Al=7,Ja=8,vc=9,bc=10,wc=[2,3,7],au=[3,3,11],Qa=[280,256,256,256,40],Th=[0,1,1,1,0],Pp=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Np=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ah=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],lu=8,Cl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Sc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Xa=null,gd=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],yd=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ch=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],kh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Lp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Bp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],xd=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Li=[],No=[],Gi=[],Ss=1,kl=2,yi=[],Ki=[];Be("UpsampleRgbLinePair",zn,3),Be("UpsampleBgrLinePair",Pi,3),Be("UpsampleRgbaLinePair",fc,4),Be("UpsampleBgraLinePair",Os,4),Be("UpsampleArgbLinePair",Io,4),Be("UpsampleRgba4444LinePair",gi,2),Be("UpsampleRgb565LinePair",Yr,2);var Fp=w.UpsampleRgbLinePair,zp=w.UpsampleBgrLinePair,va=w.UpsampleRgbaLinePair,jl=w.UpsampleBgraLinePair,Za=w.UpsampleArgbLinePair,_c=w.UpsampleRgba4444LinePair,vd=w.UpsampleRgb565LinePair,Us=16,es=1<<Us-1,Ir=-227,Pr=482,ba=6,ni=0,Yi=a(256),el=a(256),El=a(256),Ji=a(256),cu=a(Pr-Ir),jh=a(Pr-Ir);Qo("YuvToRgbRow",zn,3),Qo("YuvToBgrRow",Pi,3),Qo("YuvToRgbaRow",fc,4),Qo("YuvToBgraRow",Os,4),Qo("YuvToArgbRow",Io,4),Qo("YuvToRgba4444Row",gi,2),Qo("YuvToRgb565Row",Yr,2);var bd=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],tl=[0,2,8],Eh=[8,7,6,4,4,2,2,2,1,1,1,1],qs=1;this.WebPDecodeRGBA=function(p,x,k,L,H){var K=xa,J=new Ce,Z=new $t;J.ba=Z,Z.S=K,Z.width=[Z.width],Z.height=[Z.height];var te=Z.width,ie=Z.height,ye=new Mt;if(ye==null||p==null)var Pe=2;else e(ye!=null),Pe=fa(p,x,k,ye.width,ye.height,ye.Pd,ye.Qd,ye.format,null);if(Pe!=0?te=0:(te!=null&&(te[0]=ye.width[0]),ie!=null&&(ie[0]=ye.height[0]),te=1),te){Z.width=Z.width[0],Z.height=Z.height[0],L!=null&&(L[0]=Z.width),H!=null&&(H[0]=Z.height);e:{if(L=new Hn,(H=new $e).data=p,H.w=x,H.ha=k,H.kd=1,x=[0],e(H!=null),((p=fa(H.data,H.w,H.ha,null,null,null,x,null,H))==0||p==7)&&x[0]&&(p=4),(x=p)==0){if(e(J!=null),L.data=H.data,L.w=H.w+H.offset,L.ha=H.ha-H.offset,L.put=Nt,L.ac=Pn,L.bc=Ci,L.ma=J,H.xa){if((p=cs())==null){J=1;break e}if((function(oe,Te){var Re=[0],We=[0],Le=[0];t:for(;;){if(oe==null)return 0;if(Te==null)return oe.a=2,0;if(oe.l=Te,oe.a=0,we(oe.m,Te.data,Te.w,Te.ha),!li(oe.m,Re,We,Le)){oe.a=3;break t}if(oe.xb=kl,Te.width=Re[0],Te.height=We[0],!lo(Re[0],We[0],1,oe,null))break t;return 1}return e(oe.a!=0),0})(p,L)){if(L=(x=Vs(L.width,L.height,J.Oa,J.ba))==0){t:{L=p;r:for(;;){if(L==null){L=0;break t}if(e(L.s.yc!=null),e(L.s.Ya!=null),e(0<L.s.Wb),e((k=L.l)!=null),e((H=k.ma)!=null),L.xb!=0){if(L.ca=H.ba,L.tb=H.tb,e(L.ca!=null),!xl(H.Oa,k,yc)){L.a=2;break r}if(!co(L,k.width)||k.da)break r;if((k.da||Wt(L.ca.S))&&Ie(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&Ie()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!Q(L.s.vb,L.s.Wa.Xa)){L.a=1;break r}L.xb=0}if(!ji(L,L.V,L.Ba,L.c,L.i,k.o,$o))break r;H.Dc=L.Ma,L=1;break t}e(L.a!=0),L=0}L=!L}L&&(x=p.a)}else x=p.a}else{if((p=new To)==null){J=1;break e}if(p.Fa=H.na,p.P=H.P,p.qc=H.Sa,uo(p,L)){if((x=Vs(L.width,L.height,J.Oa,J.ba))==0){if(p.Aa=0,k=J.Oa,e((H=p)!=null),k!=null){if(0<(te=0>(te=k.Md)?0:100<te?255:255*te/100)){for(ie=ye=0;4>ie;++ie)12>(Pe=H.pb[ie]).lc&&(Pe.ia=te*Eh[0>Pe.lc?0:Pe.lc]>>3),ye|=Pe.ia;ye&&(alert("todo:VP8InitRandom"),H.ia=1)}H.Ga=k.Id,100<H.Ga?H.Ga=100:0>H.Ga&&(H.Ga=0)}(function(oe,Te){if(oe==null)return 0;if(Te==null)return vr(oe,2,"NULL VP8Io parameter in VP8Decode().");if(!oe.cb&&!uo(oe,Te))return 0;if(e(oe.cb),Te.ac==null||Te.ac(Te)){Te.ob&&(oe.L=0);var Re=tl[oe.L];if(oe.L==2?(oe.yb=0,oe.zb=0):(oe.yb=Te.v-Re>>4,oe.zb=Te.j-Re>>4,0>oe.yb&&(oe.yb=0),0>oe.zb&&(oe.zb=0)),oe.Va=Te.o+15+Re>>4,oe.Hb=Te.va+15+Re>>4,oe.Hb>oe.za&&(oe.Hb=oe.za),oe.Va>oe.Ub&&(oe.Va=oe.Ub),0<oe.L){var We=oe.ed;for(Re=0;4>Re;++Re){var Le;if(oe.Qa.Cb){var Ve=oe.Qa.Lb[Re];oe.Qa.Fb||(Ve+=We.Tb)}else Ve=We.Tb;for(Le=0;1>=Le;++Le){var Me=oe.gd[Re][Le],qe=Ve;if(We.Pc&&(qe+=We.vd[0],Le&&(qe+=We.od[0])),0<(qe=0>qe?0:63<qe?63:qe)){var Ge=qe;0<We.wb&&(Ge=4<We.wb?Ge>>2:Ge>>1)>9-We.wb&&(Ge=9-We.wb),1>Ge&&(Ge=1),Me.dd=Ge,Me.tc=2*qe+Ge,Me.ld=40<=qe?2:15<=qe?1:0}else Me.tc=0;Me.La=Le}}}Re=0}else vr(oe,6,"Frame setup failed"),Re=oe.a;if(Re=Re==0){if(Re){oe.$c=0,0<oe.Aa||(oe.Ic=qs);t:{Re=oe.Ic,We=4*(Ge=oe.za);var kt=32*Ge,pt=Ge+1,Xt=0<oe.L?Ge*(0<oe.Aa?2:1):0,vt=(oe.Aa==2?2:1)*Ge;if((Me=We+832+(Le=3*(16*Re+tl[oe.L])/2*kt)+(Ve=oe.Fa!=null&&0<oe.Fa.length?oe.Kc.c*oe.Kc.i:0))!=Me)Re=0;else{if(Me>oe.Vb){if(oe.Vb=0,oe.Ec=a(Me),oe.Fc=0,oe.Ec==null){Re=vr(oe,1,"no memory during frame initialization.");break t}oe.Vb=Me}Me=oe.Ec,qe=oe.Fc,oe.Ac=Me,oe.Bc=qe,qe+=We,oe.Gd=c(kt,ui),oe.Hd=0,oe.rb=c(pt+1,Ho),oe.sb=1,oe.wa=Xt?c(Xt,ci):null,oe.Y=0,oe.D.Nb=0,oe.D.wa=oe.wa,oe.D.Y=oe.Y,0<oe.Aa&&(oe.D.Y+=Ge),e(!0),oe.oc=Me,oe.pc=qe,qe+=832,oe.ya=c(vt,ds),oe.aa=0,oe.D.ya=oe.ya,oe.D.aa=oe.aa,oe.Aa==2&&(oe.D.aa+=Ge),oe.R=16*Ge,oe.B=8*Ge,Ge=(kt=tl[oe.L])*oe.R,kt=kt/2*oe.B,oe.sa=Me,oe.ta=qe+Ge,oe.qa=oe.sa,oe.ra=oe.ta+16*Re*oe.R+kt,oe.Ha=oe.qa,oe.Ia=oe.ra+8*Re*oe.B+kt,oe.$c=0,qe+=Le,oe.mb=Ve?Me:null,oe.nb=Ve?qe:null,e(qe+Ve<=oe.Fc+oe.Vb),lr(oe),o(oe.Ac,oe.Bc,0,We),Re=1}}if(Re){if(Te.ka=0,Te.y=oe.sa,Te.O=oe.ta,Te.f=oe.qa,Te.N=oe.ra,Te.ea=oe.Ha,Te.Vd=oe.Ia,Te.fa=oe.R,Te.Rc=oe.B,Te.F=null,Te.J=0,!md){for(Re=-255;255>=Re;++Re)dd[255+Re]=0>Re?-Re:Re;for(Re=-1020;1020>=Re;++Re)hd[1020+Re]=-128>Re?-128:127<Re?127:Re;for(Re=-112;112>=Re;++Re)fd[112+Re]=-16>Re?-16:15<Re?15:Re;for(Re=-255;510>=Re;++Re)pd[255+Re]=0>Re?0:255<Re?255:Re;md=1}ya=or,Ga=Oa,Hi=Ls,br=Ao,Rr=la,ln=za,cn=ha,Tn=Fn,Zo=_,pc=q,Sl=mi,$s=gs,nu=ae,_l=me,iu=ri,ld=jo,mc=Eo,Ka=Wa,No[0]=yl,No[1]=Bs,No[2]=Go,No[3]=Ii,No[4]=ps,No[5]=ko,No[6]=Bn,No[7]=ua,No[8]=zs,No[9]=Er,Li[0]=fo,Li[1]=Va,Li[2]=Ma,Li[3]=Fs,Li[4]=Co,Li[5]=fi,Li[6]=gn,Gi[0]=Ui,Gi[1]=ca,Gi[2]=Da,Gi[3]=$i,Gi[4]=qi,Gi[5]=Ko,Gi[6]=da,Re=1}else Re=0}Re&&(Re=(function(dr,un){for(dr.M=0;dr.M<dr.Va;++dr.M){var tr,mt=dr.Jc[dr.M&dr.Xb],st=dr.m,xn=dr;for(tr=0;tr<xn.za;++tr){var qt=st,cr=xn,Kr=cr.Ac,Kn=cr.Bc+4*tr,An=cr.zc,rn=cr.ya[cr.aa+tr];if(cr.Qa.Bb?rn.$b=Oe(qt,cr.Pa.jb[0])?2+Oe(qt,cr.Pa.jb[2]):Oe(qt,cr.Pa.jb[1]):rn.$b=0,cr.kc&&(rn.Ad=Oe(qt,cr.Bd)),rn.Za=!Oe(qt,145)+0,rn.Za){var On=rn.Ob,Yn=0;for(cr=0;4>cr;++cr){var Xr,fr=An[0+cr];for(Xr=0;4>Xr;++Xr){fr=Lp[Kr[Kn+Xr]][fr];for(var wr=Ch[Oe(qt,fr[0])];0<wr;)wr=Ch[2*wr+Oe(qt,fr[wr])];fr=-wr,Kr[Kn+Xr]=fr}n(On,Yn,Kr,Kn,4),Yn+=4,An[0+cr]=fr}}else fr=Oe(qt,156)?Oe(qt,128)?1:3:Oe(qt,163)?2:0,rn.Ob[0]=fr,o(Kr,Kn,fr,4),o(An,0,fr,4);rn.Dd=Oe(qt,142)?Oe(qt,114)?Oe(qt,183)?1:3:2:0}if(xn.m.Ka)return vr(dr,7,"Premature end-of-partition0 encountered.");for(;dr.ja<dr.za;++dr.ja){if(xn=mt,qt=(st=dr).rb[st.sb-1],Kr=st.rb[st.sb+st.ja],tr=st.ya[st.aa+st.ja],Kn=st.kc?tr.Ad:0)qt.la=Kr.la=0,tr.Za||(qt.Na=Kr.Na=0),tr.Hc=0,tr.Gc=0,tr.ia=0;else{var Zr,Sr;if(qt=Kr,Kr=xn,Kn=st.Pa.Xc,An=st.ya[st.aa+st.ja],rn=st.pb[An.$b],cr=An.ad,On=0,Yn=st.rb[st.sb-1],fr=Xr=0,o(cr,On,0,384),An.Za)var dn=0,hn=Kn[3];else{wr=a(16);var Dr=qt.Na+Yn.Na;if(Dr=Xa(Kr,Kn[1],Dr,rn.Eb,0,wr,0),qt.Na=Yn.Na=(0<Dr)+0,1<Dr)ya(wr,0,cr,On);else{var xi=wr[0]+3>>3;for(wr=0;256>wr;wr+=16)cr[On+wr]=xi}dn=1,hn=Kn[0]}var Nr=15&qt.la,Wr=15&Yn.la;for(wr=0;4>wr;++wr){var Cn=1&Wr;for(xi=Sr=0;4>xi;++xi)Nr=Nr>>1|(Cn=(Dr=Xa(Kr,hn,Dr=Cn+(1&Nr),rn.Sc,dn,cr,On))>dn)<<7,Sr=Sr<<2|(3<Dr?3:1<Dr?2:cr[On+0]!=0),On+=16;Nr>>=4,Wr=Wr>>1|Cn<<7,Xr=(Xr<<8|Sr)>>>0}for(hn=Nr,dn=Wr>>4,Zr=0;4>Zr;Zr+=2){for(Sr=0,Nr=qt.la>>4+Zr,Wr=Yn.la>>4+Zr,wr=0;2>wr;++wr){for(Cn=1&Wr,xi=0;2>xi;++xi)Dr=Cn+(1&Nr),Nr=Nr>>1|(Cn=0<(Dr=Xa(Kr,Kn[2],Dr,rn.Qc,0,cr,On)))<<3,Sr=Sr<<2|(3<Dr?3:1<Dr?2:cr[On+0]!=0),On+=16;Nr>>=2,Wr=Wr>>1|Cn<<5}fr|=Sr<<4*Zr,hn|=Nr<<4<<Zr,dn|=(240&Wr)<<Zr}qt.la=hn,Yn.la=dn,An.Hc=Xr,An.Gc=fr,An.ia=43690&fr?0:rn.ia,Kn=!(Xr|fr)}if(0<st.L&&(st.wa[st.Y+st.ja]=st.gd[tr.$b][tr.Za],st.wa[st.Y+st.ja].La|=!Kn),xn.Ka)return vr(dr,7,"Premature end-of-file encountered.")}if(lr(dr),st=un,xn=1,tr=(mt=dr).D,qt=0<mt.L&&mt.M>=mt.zb&&mt.M<=mt.Va,mt.Aa==0)t:{if(tr.M=mt.M,tr.uc=qt,mo(mt,tr),xn=1,tr=(Sr=mt.D).Nb,qt=(fr=tl[mt.L])*mt.R,Kr=fr/2*mt.B,wr=16*tr*mt.R,xi=8*tr*mt.B,Kn=mt.sa,An=mt.ta-qt+wr,rn=mt.qa,cr=mt.ra-Kr+xi,On=mt.Ha,Yn=mt.Ia-Kr+xi,Wr=(Nr=Sr.M)==0,Xr=Nr>=mt.Va-1,mt.Aa==2&&mo(mt,Sr),Sr.uc)for(Cn=(Dr=mt).D.M,e(Dr.D.uc),Sr=Dr.yb;Sr<Dr.Hb;++Sr){dn=Sr,hn=Cn;var ii=(Qi=(wn=Dr).D).Nb;Zr=wn.R;var Qi=Qi.wa[Qi.Y+dn],vn=wn.sa,bn=wn.ta+16*ii*Zr+16*dn,vi=Qi.dd,$r=Qi.tc;if($r!=0)if(e(3<=$r),wn.L==1)0<dn&&ld(vn,bn,Zr,$r+4),Qi.La&&Ka(vn,bn,Zr,$r),0<hn&&iu(vn,bn,Zr,$r+4),Qi.La&&mc(vn,bn,Zr,$r);else{var bi=wn.B,Lo=wn.qa,ts=wn.ra+8*ii*bi+8*dn,Jn=wn.Ha,wn=wn.Ia+8*ii*bi+8*dn;ii=Qi.ld,0<dn&&(Tn(vn,bn,Zr,$r+4,vi,ii),pc(Lo,ts,Jn,wn,bi,$r+4,vi,ii)),Qi.La&&($s(vn,bn,Zr,$r,vi,ii),_l(Lo,ts,Jn,wn,bi,$r,vi,ii)),0<hn&&(cn(vn,bn,Zr,$r+4,vi,ii),Zo(Lo,ts,Jn,wn,bi,$r+4,vi,ii)),Qi.La&&(Sl(vn,bn,Zr,$r,vi,ii),nu(Lo,ts,Jn,wn,bi,$r,vi,ii))}}if(mt.ia&&alert("todo:DitherRow"),st.put!=null){if(Sr=16*Nr,Nr=16*(Nr+1),Wr?(st.y=mt.sa,st.O=mt.ta+wr,st.f=mt.qa,st.N=mt.ra+xi,st.ea=mt.Ha,st.W=mt.Ia+xi):(Sr-=fr,st.y=Kn,st.O=An,st.f=rn,st.N=cr,st.ea=On,st.W=Yn),Xr||(Nr-=fr),Nr>st.o&&(Nr=st.o),st.F=null,st.J=null,mt.Fa!=null&&0<mt.Fa.length&&Sr<Nr&&(st.J=Or(mt,st,Sr,Nr-Sr),st.F=mt.mb,st.F==null&&st.F.length==0)){xn=vr(mt,3,"Could not decode alpha data.");break t}Sr<st.j&&(fr=st.j-Sr,Sr=st.j,e(!(1&fr)),st.O+=mt.R*fr,st.N+=mt.B*(fr>>1),st.W+=mt.B*(fr>>1),st.F!=null&&(st.J+=st.width*fr)),Sr<Nr&&(st.O+=st.v,st.N+=st.v>>1,st.W+=st.v>>1,st.F!=null&&(st.J+=st.v),st.ka=Sr-st.j,st.U=st.va-st.v,st.T=Nr-Sr,xn=st.put(st))}tr+1!=mt.Ic||Xr||(n(mt.sa,mt.ta-qt,Kn,An+16*mt.R,qt),n(mt.qa,mt.ra-Kr,rn,cr+8*mt.B,Kr),n(mt.Ha,mt.Ia-Kr,On,Yn+8*mt.B,Kr))}if(!xn)return vr(dr,6,"Output aborted.")}return 1})(oe,Te)),Te.bc!=null&&Te.bc(Te),Re&=1}return Re?(oe.cb=0,Re):0})(p,L)||(x=p.a)}}else x=p.a}x==0&&J.Oa!=null&&J.Oa.fd&&(x=vl(J.ba))}J=x}K=J!=0?null:11>K?Z.f.RGBA.eb:Z.f.kb.y}else K=null;return K};var Tc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(w,O){for(var P="",S=0;S<4;S++)P+=String.fromCharCode(w[O++]);return P}function g(w,O){return w[O+0]|w[O+1]<<8}function b(w,O){return(w[O+0]|w[O+1]<<8|w[O+2]<<16)>>>0}function A(w,O){return(w[O+0]|w[O+1]<<8|w[O+2]<<16|w[O+3]<<24)>>>0}new f;var v=[0],F=[0],E=[],N=new f,j=r,$=(function(w,O){var P={},S=0,z=!1,W=0,le=0;if(P.frames=[],!(function(D,Y){for(var re=0;re<4;re++)if(D[Y+re]!="RIFF".charCodeAt(re))return!0;return!1})(w,O)){for(A(w,O+=4),O+=8;O<w.length;){var ve=h(w,O),de=A(w,O+=4);O+=4;var ce=de+(1&de);switch(ve){case"VP8 ":case"VP8L":P.frames[S]===void 0&&(P.frames[S]={}),(ne=P.frames[S]).src_off=z?le:O-8,ne.src_size=W+de+8,S++,z&&(z=!1,W=0,le=0);break;case"VP8X":(ne=P.header={}).feature_flags=w[O];var we=O+4;ne.canvas_width=1+b(w,we),we+=3,ne.canvas_height=1+b(w,we),we+=3;break;case"ALPH":z=!0,W=ce+8,le=O-8;break;case"ANIM":(ne=P.header).bgcolor=A(w,O),we=O+4,ne.loop_count=g(w,we),we+=2;break;case"ANMF":var je,ne;(ne=P.frames[S]={}).offset_x=2*b(w,O),O+=3,ne.offset_y=2*b(w,O),O+=3,ne.width=1+b(w,O),O+=3,ne.height=1+b(w,O),O+=3,ne.duration=b(w,O),O+=3,je=w[O++],ne.dispose=1&je,ne.blend=je>>1&1}ve!="ANMF"&&(O+=ce)}return P}})(j,0);$.response=j,$.rgbaoutput=!0,$.dataurl=!1;var V=$.header?$.header:null,B=$.frames?$.frames:null;if(V){V.loop_counter=V.loop_count,v=[V.canvas_height],F=[V.canvas_width];for(var X=0;X<B.length&&B[X].blend!=0;X++);}var se=B[0],U=N.WebPDecodeRGBA(j,se.src_off,se.src_size,F,v);se.rgba=U,se.imgwidth=F[0],se.imgheight=v[0];for(var C=0;C<F[0]*v[0]*4;C++)E[C]=U[C];return this.width=F,this.height=v,this.data=E,this}(function(r){var e,t,n,o,a,c,u,f,h,g=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new f,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new c,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new c,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new b(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,c=this.internal.Point,u=this.internal.Rectangle,f=this.internal.Matrix,h=new g}]);var b=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=D;Object.defineProperty(this,"pdf",{get:function(){return Y}});var re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return re},set:function(pe){re=!!pe}});var ue=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ue},set:function(pe){ue=!!pe}});var fe=0;Object.defineProperty(this,"posX",{get:function(){return fe},set:function(pe){isNaN(pe)||(fe=pe)}});var Se=0;Object.defineProperty(this,"posY",{get:function(){return Se},set:function(pe){isNaN(pe)||(Se=pe)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(pe){var Q;typeof pe=="number"?Q=[pe,pe,pe,pe]:((Q=new Array(4))[0]=pe[0],Q[1]=pe.length>=2?pe[1]:Q[0],Q[2]=pe.length>=3?pe[2]:Q[0],Q[3]=pe.length>=4?pe[3]:Q[1]),h.margin=Q}});var Ee=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ee},set:function(pe){Ee=pe}});var ke=0;Object.defineProperty(this,"lastBreak",{get:function(){return ke},set:function(pe){ke=pe}});var Oe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Oe},set:function(pe){Oe=pe}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(pe){pe instanceof g&&(h=pe)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(pe){h.path=pe}});var Ke=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ke},set:function(pe){Ke=pe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(pe){var Q;Q=A(pe),this.ctx.fillStyle=Q.style,this.ctx.isFillTransparent=Q.a===0,this.ctx.fillOpacity=Q.a,this.pdf.setFillColor(Q.r,Q.g,Q.b,{a:Q.a}),this.pdf.setTextColor(Q.r,Q.g,Q.b,{a:Q.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(pe){var Q=A(pe);this.ctx.strokeStyle=Q.style,this.ctx.isStrokeTransparent=Q.a===0,this.ctx.strokeOpacity=Q.a,Q.a===0?this.pdf.setDrawColor(255,255,255):(Q.a,this.pdf.setDrawColor(Q.r,Q.g,Q.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(pe){["butt","round","square"].indexOf(pe)!==-1&&(this.ctx.lineCap=pe,this.pdf.setLineCap(pe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(pe){isNaN(pe)||(this.ctx.lineWidth=pe,this.pdf.setLineWidth(pe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(pe){["bevel","round","miter"].indexOf(pe)!==-1&&(this.ctx.lineJoin=pe,this.pdf.setLineJoin(pe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(pe){isNaN(pe)||(this.ctx.miterLimit=pe,this.pdf.setMiterLimit(pe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(pe){this.ctx.textBaseline=pe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(pe){["right","end","center","left","start"].indexOf(pe)!==-1&&(this.ctx.textAlign=pe)}});var nt=null,_e=null;Object.defineProperty(this,"fontFaces",{get:function(){return _e},set:function(pe){nt=null,_e=pe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(pe){var Q;if(this.ctx.font=pe,(Q=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(pe))!==null){var Je=Q[1];Q[2];var Ue=Q[3],tt=Q[4];Q[5];var ge=Q[6],De=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(tt)[2];tt=Math.floor(De==="px"?parseFloat(tt)*this.pdf.internal.scaleFactor:De==="em"?parseFloat(tt)*this.pdf.getFontSize():parseFloat(tt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(tt);var He=(function(Pt){var bt,Cr,ir=[],xt=Pt.trim();if(xt==="")return Dm;if(xt in i2)return[i2[xt]];for(;xt!=="";){switch(Cr=null,bt=(xt=s2(xt)).charAt(0)){case'"':case"'":Cr=iT(xt.substring(1),bt);break;default:Cr=oT(xt)}if(Cr===null||(ir.push(Cr[0]),(xt=s2(Cr[1]))!==""&&xt.charAt(0)!==","))return Dm;xt=xt.replace(/^,/,"")}return ir})(ge);if(this.fontFaces){var at=(function(Pt,bt){if(nt===null){var Cr=(function(ir){var xt=[];return Object.keys(ir).forEach(function(Ut){ir[Ut].forEach(function(sr){var Rt=null;switch(sr){case"bold":Rt={family:Ut,weight:"bold"};break;case"italic":Rt={family:Ut,style:"italic"};break;case"bolditalic":Rt={family:Ut,weight:"bold",style:"italic"};break;case"":case"normal":Rt={family:Ut}}Rt!==null&&(Rt.ref={name:Ut,style:sr},xt.push(Rt))})}),xt})(Pt.getFontList());nt=(function(ir){for(var xt={},Ut=0;Ut<ir.length;++Ut){var sr=Mm(ir[Ut]),Rt=sr.family,er=sr.stretch,Wt=sr.style,kr=sr.weight;xt[Rt]=xt[Rt]||{},xt[Rt][er]=xt[Rt][er]||{},xt[Rt][er][Wt]=xt[Rt][er][Wt]||{},xt[Rt][er][Wt][kr]=sr}return xt})(Cr.concat(bt))}return nt})(this.pdf,this.fontFaces),ht=He.map(function(Pt){return{family:Pt,stretch:"normal",weight:Ue,style:Je}}),Tt=(function(Pt,bt,Cr){for(var ir=(Cr=Cr||{}).defaultFontFamily||"times",xt=Object.assign({},nT,Cr.genericFontFamilies||{}),Ut=null,sr=null,Rt=0;Rt<bt.length;++Rt)if(xt[(Ut=Mm(bt[Rt])).family]&&(Ut.family=xt[Ut.family]),Pt.hasOwnProperty(Ut.family)){sr=Pt[Ut.family];break}if(!(sr=sr||Pt[ir]))throw new Error("Could not find a font-family for the rule '"+o2(Ut)+"' and default family '"+ir+"'.");if(sr=(function(er,Wt){if(Wt[er])return Wt[er];var kr=p0[er],Br=kr<=p0.normal?-1:1,$t=n2(Wt,sv,kr,Br);if(!$t)throw new Error("Could not find a matching font-stretch value for "+er);return $t})(Ut.stretch,sr),sr=(function(er,Wt){if(Wt[er])return Wt[er];for(var kr=ov[er],Br=0;Br<kr.length;++Br)if(Wt[kr[Br]])return Wt[kr[Br]];throw new Error("Could not find a matching font-style for "+er)})(Ut.style,sr),!(sr=(function(er,Wt){if(Wt[er])return Wt[er];if(er===400&&Wt[500])return Wt[500];if(er===500&&Wt[400])return Wt[400];var kr=rT[er],Br=n2(Wt,av,kr,er<400?-1:1);if(!Br)throw new Error("Could not find a matching font-weight for value "+er);return Br})(Ut.weight,sr)))throw new Error("Failed to resolve a font for the rule '"+o2(Ut)+"'.");return sr})(at,ht);this.pdf.setFont(Tt.ref.name,Tt.ref.style)}else{var lt="";(Ue==="bold"||parseInt(Ue,10)>=700||Je==="bold")&&(lt="bold"),Je==="italic"&&(lt+="italic"),lt.length===0&&(lt="normal");for(var ct="",Kt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Vt=0;Vt<He.length;Vt++){if(this.pdf.internal.getFont(He[Vt],lt,{noFallback:!0,disableWarning:!0})!==void 0){ct=He[Vt];break}if(lt==="bolditalic"&&this.pdf.internal.getFont(He[Vt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ct=He[Vt],lt="bold";else if(this.pdf.internal.getFont(He[Vt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ct=He[Vt],lt="normal";break}}if(ct===""){for(var jt=0;jt<He.length;jt++)if(Kt[He[jt]]){ct=Kt[He[jt]];break}}ct=ct===""?"Times":ct,this.pdf.setFont(ct,lt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(pe){this.ctx.globalCompositeOperation=pe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(pe){this.ctx.globalAlpha=pe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(pe){this.ctx.lineDashOffset=pe,ne.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(pe){this.ctx.lineDash=pe,ne.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(pe){this.ctx.ignoreClearRect=!!pe}})};b.prototype.setLineDash=function(D){this.lineDash=D},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){B.call(this,"fill",!1)},b.prototype.stroke=function(){B.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(D,Y){if(isNaN(D)||isNaN(Y))throw Qr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var re=this.ctx.transform.applyToPoint(new c(D,Y));this.path.push({type:"mt",x:re.x,y:re.y}),this.ctx.lastPoint=new c(D,Y)},b.prototype.closePath=function(){var D=new c(0,0),Y=0;for(Y=this.path.length-1;Y!==-1;Y--)if(this.path[Y].type==="begin"&&qr(this.path[Y+1])==="object"&&typeof this.path[Y+1].x=="number"){D=new c(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(D.x,D.y)},b.prototype.lineTo=function(D,Y){if(isNaN(D)||isNaN(Y))throw Qr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var re=this.ctx.transform.applyToPoint(new c(D,Y));this.path.push({type:"lt",x:re.x,y:re.y}),this.ctx.lastPoint=new c(re.x,re.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),B.call(this,null,!0)},b.prototype.quadraticCurveTo=function(D,Y,re,ue){if(isNaN(re)||isNaN(ue)||isNaN(D)||isNaN(Y))throw Qr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var fe=this.ctx.transform.applyToPoint(new c(re,ue)),Se=this.ctx.transform.applyToPoint(new c(D,Y));this.path.push({type:"qct",x1:Se.x,y1:Se.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new c(fe.x,fe.y)},b.prototype.bezierCurveTo=function(D,Y,re,ue,fe,Se){if(isNaN(fe)||isNaN(Se)||isNaN(D)||isNaN(Y)||isNaN(re)||isNaN(ue))throw Qr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ee=this.ctx.transform.applyToPoint(new c(fe,Se)),ke=this.ctx.transform.applyToPoint(new c(D,Y)),Oe=this.ctx.transform.applyToPoint(new c(re,ue));this.path.push({type:"bct",x1:ke.x,y1:ke.y,x2:Oe.x,y2:Oe.y,x:Ee.x,y:Ee.y}),this.ctx.lastPoint=new c(Ee.x,Ee.y)},b.prototype.arc=function(D,Y,re,ue,fe,Se){if(isNaN(D)||isNaN(Y)||isNaN(re)||isNaN(ue)||isNaN(fe))throw Qr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Se=!!Se,!this.ctx.transform.isIdentity){var Ee=this.ctx.transform.applyToPoint(new c(D,Y));D=Ee.x,Y=Ee.y;var ke=this.ctx.transform.applyToPoint(new c(0,re)),Oe=this.ctx.transform.applyToPoint(new c(0,0));re=Math.sqrt(Math.pow(ke.x-Oe.x,2)+Math.pow(ke.y-Oe.y,2))}Math.abs(fe-ue)>=2*Math.PI&&(ue=0,fe=2*Math.PI),this.path.push({type:"arc",x:D,y:Y,radius:re,startAngle:ue,endAngle:fe,counterclockwise:Se})},b.prototype.arcTo=function(D,Y,re,ue,fe){throw new Error("arcTo not implemented.")},b.prototype.rect=function(D,Y,re,ue){if(isNaN(D)||isNaN(Y)||isNaN(re)||isNaN(ue))throw Qr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,Y),this.lineTo(D+re,Y),this.lineTo(D+re,Y+ue),this.lineTo(D,Y+ue),this.lineTo(D,Y),this.lineTo(D+re,Y),this.lineTo(D,Y)},b.prototype.fillRect=function(D,Y,re,ue){if(isNaN(D)||isNaN(Y)||isNaN(re)||isNaN(ue))throw Qr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var fe={};this.lineCap!=="butt"&&(fe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(fe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,Y,re,ue),this.fill(),fe.hasOwnProperty("lineCap")&&(this.lineCap=fe.lineCap),fe.hasOwnProperty("lineJoin")&&(this.lineJoin=fe.lineJoin)}},b.prototype.strokeRect=function(D,Y,re,ue){if(isNaN(D)||isNaN(Y)||isNaN(re)||isNaN(ue))throw Qr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");F.call(this)||(this.beginPath(),this.rect(D,Y,re,ue),this.stroke())},b.prototype.clearRect=function(D,Y,re,ue){if(isNaN(D)||isNaN(Y)||isNaN(re)||isNaN(ue))throw Qr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,Y,re,ue))},b.prototype.save=function(D){D=typeof D!="boolean"||D;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var ue=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ue}},b.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function(D){var Y,re,ue,fe;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))Y=0,re=0,ue=0,fe=0;else{var Se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(Se!==null)Y=parseInt(Se[1]),re=parseInt(Se[2]),ue=parseInt(Se[3]),fe=1;else if((Se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)Y=parseInt(Se[1]),re=parseInt(Se[2]),ue=parseInt(Se[3]),fe=parseFloat(Se[4]);else{if(fe=1,typeof D=="string"&&D.charAt(0)!=="#"){var Ee=new Xx(D);D=Ee.ok?Ee.toHex():"#000000"}D.length===4?(Y=D.substring(1,2),Y+=Y,re=D.substring(2,3),re+=re,ue=D.substring(3,4),ue+=ue):(Y=D.substring(1,3),re=D.substring(3,5),ue=D.substring(5,7)),Y=parseInt(Y,16),re=parseInt(re,16),ue=parseInt(ue,16)}}return{r:Y,g:re,b:ue,a:fe,style:D}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},F=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(D,Y,re,ue){if(isNaN(Y)||isNaN(re)||typeof D!="string")throw Qr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ue=isNaN(ue)?void 0:ue,!v.call(this)){var fe=ce(this.ctx.transform.rotation),Se=this.ctx.transform.scaleX;S.call(this,{text:D,x:Y,y:re,scale:Se,angle:fe,align:this.textAlign,maxWidth:ue})}},b.prototype.strokeText=function(D,Y,re,ue){if(isNaN(Y)||isNaN(re)||typeof D!="string")throw Qr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!F.call(this)){ue=isNaN(ue)?void 0:ue;var fe=ce(this.ctx.transform.rotation),Se=this.ctx.transform.scaleX;S.call(this,{text:D,x:Y,y:re,scale:Se,renderingMode:"stroke",angle:fe,align:this.textAlign,maxWidth:ue})}},b.prototype.measureText=function(D){if(typeof D!="string")throw Qr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,re=this.pdf.internal.scaleFactor,ue=Y.internal.getFontSize(),fe=Y.getStringUnitWidth(D)*ue/Y.internal.scaleFactor;return new function(Se){var Ee=(Se=Se||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ee}}),this}({width:fe*=Math.round(96*re/72*1e4)/1e4})},b.prototype.scale=function(D,Y){if(isNaN(D)||isNaN(Y))throw Qr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var re=new f(D,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(re)},b.prototype.rotate=function(D){if(isNaN(D))throw Qr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new f(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},b.prototype.translate=function(D,Y){if(isNaN(D)||isNaN(Y))throw Qr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var re=new f(1,0,0,1,D,Y);this.ctx.transform=this.ctx.transform.multiply(re)},b.prototype.transform=function(D,Y,re,ue,fe,Se){if(isNaN(D)||isNaN(Y)||isNaN(re)||isNaN(ue)||isNaN(fe)||isNaN(Se))throw Qr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ee=new f(D,Y,re,ue,fe,Se);this.ctx.transform=this.ctx.transform.multiply(Ee)},b.prototype.setTransform=function(D,Y,re,ue,fe,Se){D=isNaN(D)?1:D,Y=isNaN(Y)?0:Y,re=isNaN(re)?0:re,ue=isNaN(ue)?1:ue,fe=isNaN(fe)?0:fe,Se=isNaN(Se)?0:Se,this.ctx.transform=new f(D,Y,re,ue,fe,Se)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(D,Y,re,ue,fe,Se,Ee,ke,Oe){var Ke=this.pdf.getImageProperties(D),nt=1,_e=1,pe=1,Q=1;ue!==void 0&&ke!==void 0&&(pe=ke/ue,Q=Oe/fe,nt=Ke.width/ue*ke/ue,_e=Ke.height/fe*Oe/fe),Se===void 0&&(Se=Y,Ee=re,Y=0,re=0),ue!==void 0&&ke===void 0&&(ke=ue,Oe=fe),ue===void 0&&ke===void 0&&(ke=Ke.width,Oe=Ke.height);for(var Je,Ue=this.ctx.transform.decompose(),tt=ce(Ue.rotate.shx),ge=new f,De=(ge=(ge=(ge=ge.multiply(Ue.translate)).multiply(Ue.skew)).multiply(Ue.scale)).applyToRectangle(new u(Se-Y*pe,Ee-re*Q,ue*nt,fe*_e)),He=N.call(this,De),at=[],ht=0;ht<He.length;ht+=1)at.indexOf(He[ht])===-1&&at.push(He[ht]);if(V(at),this.autoPaging)for(var Tt=at[0],lt=at[at.length-1],ct=Tt;ct<lt+1;ct++){this.pdf.setPage(ct);var Kt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Vt=ct===1?this.posY+this.margin[0]:this.margin[0],jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],bt=ct===1?0:jt+(ct-2)*Pt;if(this.ctx.clip_path.length!==0){var Cr=this.path;Je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=$(Je,this.posX+this.margin[3],-bt+Vt+this.ctx.prevPageLastElemOffset),X.call(this,"fill",!0),this.path=Cr}var ir=JSON.parse(JSON.stringify(De));ir=$([ir],this.posX+this.margin[3],-bt+Vt+this.ctx.prevPageLastElemOffset)[0];var xt=(ct>Tt||ct<lt)&&E.call(this);xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Kt,Pt,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",ir.x,ir.y,ir.w,ir.h,null,null,tt),xt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",De.x,De.y,De.w,De.h,null,null,tt)};var N=function(D,Y,re){var ue=[];Y=Y||this.pdf.internal.pageSize.width,re=re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var fe=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":ue.push(Math.floor((D.y+fe)/re)+1);break;case"arc":ue.push(Math.floor((D.y+fe-D.radius)/re)+1),ue.push(Math.floor((D.y+fe+D.radius)/re)+1);break;case"qct":var Se=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);ue.push(Math.floor((Se.y+fe)/re)+1),ue.push(Math.floor((Se.y+Se.h+fe)/re)+1);break;case"bct":var Ee=je(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);ue.push(Math.floor((Ee.y+fe)/re)+1),ue.push(Math.floor((Ee.y+Ee.h+fe)/re)+1);break;case"rect":ue.push(Math.floor((D.y+fe)/re)+1),ue.push(Math.floor((D.y+D.h+fe)/re)+1)}for(var ke=0;ke<ue.length;ke+=1)for(;this.pdf.internal.getNumberOfPages()<ue[ke];)j.call(this);return ue},j=function(){var D=this.fillStyle,Y=this.strokeStyle,re=this.font,ue=this.lineCap,fe=this.lineWidth,Se=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=Y,this.font=re,this.lineCap=ue,this.lineWidth=fe,this.lineJoin=Se},$=function(D,Y,re){for(var ue=0;ue<D.length;ue++)switch(D[ue].type){case"bct":D[ue].x2+=Y,D[ue].y2+=re;case"qct":D[ue].x1+=Y,D[ue].y1+=re;default:D[ue].x+=Y,D[ue].y+=re}return D},V=function(D){return D.sort(function(Y,re){return Y-re})},B=function(D,Y){for(var re,ue,fe=this.fillStyle,Se=this.strokeStyle,Ee=this.lineCap,ke=this.lineWidth,Oe=Math.abs(ke*this.ctx.transform.scaleX),Ke=this.lineJoin,nt=JSON.parse(JSON.stringify(this.path)),_e=JSON.parse(JSON.stringify(this.path)),pe=[],Q=0;Q<_e.length;Q++)if(_e[Q].x!==void 0)for(var Je=N.call(this,_e[Q]),Ue=0;Ue<Je.length;Ue+=1)pe.indexOf(Je[Ue])===-1&&pe.push(Je[Ue]);for(var tt=0;tt<pe.length;tt++)for(;this.pdf.internal.getNumberOfPages()<pe[tt];)j.call(this);if(V(pe),this.autoPaging)for(var ge=pe[0],De=pe[pe.length-1],He=ge;He<De+1;He++){this.pdf.setPage(He),this.fillStyle=fe,this.strokeStyle=Se,this.lineCap=Ee,this.lineWidth=Oe,this.lineJoin=Ke;var at=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ht=He===1?this.posY+this.margin[0]:this.margin[0],Tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ct=He===1?0:Tt+(He-2)*lt;if(this.ctx.clip_path.length!==0){var Kt=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=$(re,this.posX+this.margin[3],-ct+ht+this.ctx.prevPageLastElemOffset),X.call(this,D,!0),this.path=Kt}if(ue=JSON.parse(JSON.stringify(nt)),this.path=$(ue,this.posX+this.margin[3],-ct+ht+this.ctx.prevPageLastElemOffset),Y===!1||He===0){var Vt=(He>ge||He<De)&&E.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,lt,null).clip().discardPath()),X.call(this,D,Y),Vt&&this.pdf.restoreGraphicsState()}this.lineWidth=ke}else this.lineWidth=Oe,X.call(this,D,Y),this.lineWidth=ke;this.path=nt},X=function(D,Y){if((D!=="stroke"||Y||!F.call(this))&&(D==="stroke"||Y||!v.call(this))){for(var re,ue,fe=[],Se=this.path,Ee=0;Ee<Se.length;Ee++){var ke=Se[Ee];switch(ke.type){case"begin":fe.push({begin:!0});break;case"close":fe.push({close:!0});break;case"mt":fe.push({start:ke,deltas:[],abs:[]});break;case"lt":var Oe=fe.length;if(Se[Ee-1]&&!isNaN(Se[Ee-1].x)&&(re=[ke.x-Se[Ee-1].x,ke.y-Se[Ee-1].y],Oe>0)){for(;Oe>=0;Oe--)if(fe[Oe-1].close!==!0&&fe[Oe-1].begin!==!0){fe[Oe-1].deltas.push(re),fe[Oe-1].abs.push(ke);break}}break;case"bct":re=[ke.x1-Se[Ee-1].x,ke.y1-Se[Ee-1].y,ke.x2-Se[Ee-1].x,ke.y2-Se[Ee-1].y,ke.x-Se[Ee-1].x,ke.y-Se[Ee-1].y],fe[fe.length-1].deltas.push(re);break;case"qct":var Ke=Se[Ee-1].x+2/3*(ke.x1-Se[Ee-1].x),nt=Se[Ee-1].y+2/3*(ke.y1-Se[Ee-1].y),_e=ke.x+2/3*(ke.x1-ke.x),pe=ke.y+2/3*(ke.y1-ke.y),Q=ke.x,Je=ke.y;re=[Ke-Se[Ee-1].x,nt-Se[Ee-1].y,_e-Se[Ee-1].x,pe-Se[Ee-1].y,Q-Se[Ee-1].x,Je-Se[Ee-1].y],fe[fe.length-1].deltas.push(re);break;case"arc":fe.push({deltas:[],abs:[],arc:!0}),Array.isArray(fe[fe.length-1].abs)&&fe[fe.length-1].abs.push(ke)}}ue=Y?null:D==="stroke"?"stroke":"fill";for(var Ue=!1,tt=0;tt<fe.length;tt++)if(fe[tt].arc)for(var ge=fe[tt].abs,De=0;De<ge.length;De++){var He=ge[De];He.type==="arc"?C.call(this,He.x,He.y,He.radius,He.startAngle,He.endAngle,He.counterclockwise,void 0,Y,!Ue):z.call(this,He.x,He.y),Ue=!0}else if(fe[tt].close===!0)this.pdf.internal.out("h"),Ue=!1;else if(fe[tt].begin!==!0){var at=fe[tt].start.x,ht=fe[tt].start.y;W.call(this,fe[tt].deltas,at,ht),Ue=!0}ue&&w.call(this,ue),Y&&O.call(this)}},se=function(D){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,re=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-re;case"top":return D+Y-re;case"hanging":return D+Y-2*re;case"middle":return D+Y/2-re;default:return D}},U=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(Y,re){this.colorStops.push([Y,re])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(D,Y,re,ue,fe,Se,Ee,ke,Oe){for(var Ke=ve.call(this,re,ue,fe,Se),nt=0;nt<Ke.length;nt++){var _e=Ke[nt];nt===0&&(Oe?P.call(this,_e.x1+D,_e.y1+Y):z.call(this,_e.x1+D,_e.y1+Y)),le.call(this,D,Y,_e.x2,_e.y2,_e.x3,_e.y3,_e.x4,_e.y4)}ke?O.call(this):w.call(this,Ee)},w=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(D,Y){this.pdf.internal.out(t(D)+" "+n(Y)+" m")},S=function(D){var Y;switch(D.align){case"right":case"end":Y="right";break;case"center":Y="center";break;default:Y="left"}var re=this.pdf.getTextDimensions(D.text),ue=se.call(this,D.y),fe=U.call(this,ue)-re.h,Se=this.ctx.transform.applyToPoint(new c(D.x,ue)),Ee=this.ctx.transform.decompose(),ke=new f;ke=(ke=(ke=ke.multiply(Ee.translate)).multiply(Ee.skew)).multiply(Ee.scale);for(var Oe,Ke,nt,_e=this.ctx.transform.applyToRectangle(new u(D.x,ue,re.w,re.h)),pe=ke.applyToRectangle(new u(D.x,fe,re.w,re.h)),Q=N.call(this,pe),Je=[],Ue=0;Ue<Q.length;Ue+=1)Je.indexOf(Q[Ue])===-1&&Je.push(Q[Ue]);if(V(Je),this.autoPaging)for(var tt=Je[0],ge=Je[Je.length-1],De=tt;De<ge+1;De++){this.pdf.setPage(De);var He=De===1?this.posY+this.margin[0]:this.margin[0],at=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ht=this.pdf.internal.pageSize.height-this.margin[2],Tt=ht-this.margin[0],lt=this.pdf.internal.pageSize.width-this.margin[1],ct=lt-this.margin[3],Kt=De===1?0:at+(De-2)*Tt;if(this.ctx.clip_path.length!==0){var Vt=this.path;Oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=$(Oe,this.posX+this.margin[3],-1*Kt+He),X.call(this,"fill",!0),this.path=Vt}var jt=$([JSON.parse(JSON.stringify(pe))],this.posX+this.margin[3],-Kt+He+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(Ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ke*D.scale),nt=this.lineWidth,this.lineWidth=nt*D.scale);var Pt=this.autoPaging!=="text";if(Pt||jt.y+jt.h<=ht){if(Pt||jt.y>=He&&jt.x<=lt){var bt=Pt?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||lt-jt.x)[0],Cr=$([JSON.parse(JSON.stringify(_e))],this.posX+this.margin[3],-Kt+He+this.ctx.prevPageLastElemOffset)[0],ir=Pt&&(De>tt||De<ge)&&E.call(this);ir&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,Tt,null).clip().discardPath()),this.pdf.text(bt,Cr.x,Cr.y,{angle:D.angle,align:Y,renderingMode:D.renderingMode}),ir&&this.pdf.restoreGraphicsState()}}else jt.y<ht&&(this.ctx.prevPageLastElemOffset+=ht-jt.y);D.scale>=.01&&(this.pdf.setFontSize(Ke),this.lineWidth=nt)}else D.scale>=.01&&(Ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ke*D.scale),nt=this.lineWidth,this.lineWidth=nt*D.scale),this.pdf.text(D.text,Se.x+this.posX,Se.y+this.posY,{angle:D.angle,align:Y,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(Ke),this.lineWidth=nt)},z=function(D,Y,re,ue){re=re||0,ue=ue||0,this.pdf.internal.out(t(D+re)+" "+n(Y+ue)+" l")},W=function(D,Y,re){return this.pdf.lines(D,Y,re,null,null)},le=function(D,Y,re,ue,fe,Se,Ee,ke){this.pdf.internal.out([e(o(re+D)),e(a(ue+Y)),e(o(fe+D)),e(a(Se+Y)),e(o(Ee+D)),e(a(ke+Y)),"c"].join(" "))},ve=function(D,Y,re,ue){for(var fe=2*Math.PI,Se=Math.PI/2;Y>re;)Y-=fe;var Ee=Math.abs(re-Y);Ee<fe&&ue&&(Ee=fe-Ee);for(var ke=[],Oe=ue?-1:1,Ke=Y;Ee>1e-5;){var nt=Ke+Oe*Math.min(Ee,Se);ke.push(de.call(this,D,Ke,nt)),Ee-=Math.abs(nt-Ke),Ke=nt}return ke},de=function(D,Y,re){var ue=(re-Y)/2,fe=D*Math.cos(ue),Se=D*Math.sin(ue),Ee=fe,ke=-Se,Oe=Ee*Ee+ke*ke,Ke=Oe+Ee*fe+ke*Se,nt=4/3*(Math.sqrt(2*Oe*Ke)-Ke)/(Ee*Se-ke*fe),_e=Ee-nt*ke,pe=ke+nt*Ee,Q=_e,Je=-pe,Ue=ue+Y,tt=Math.cos(Ue),ge=Math.sin(Ue);return{x1:D*Math.cos(Y),y1:D*Math.sin(Y),x2:_e*tt-pe*ge,y2:_e*ge+pe*tt,x3:Q*tt-Je*ge,y3:Q*ge+Je*tt,x4:D*Math.cos(re),y4:D*Math.sin(re)}},ce=function(D){return 180*D/Math.PI},we=function(D,Y,re,ue,fe,Se){var Ee=D+.5*(re-D),ke=Y+.5*(ue-Y),Oe=fe+.5*(re-fe),Ke=Se+.5*(ue-Se),nt=Math.min(D,fe,Ee,Oe),_e=Math.max(D,fe,Ee,Oe),pe=Math.min(Y,Se,ke,Ke),Q=Math.max(Y,Se,ke,Ke);return new u(nt,pe,_e-nt,Q-pe)},je=function(D,Y,re,ue,fe,Se,Ee,ke){var Oe,Ke,nt,_e,pe,Q,Je,Ue,tt,ge,De,He,at,ht,Tt=re-D,lt=ue-Y,ct=fe-re,Kt=Se-ue,Vt=Ee-fe,jt=ke-Se;for(Ke=0;Ke<41;Ke++)tt=(Je=(nt=D+(Oe=Ke/40)*Tt)+Oe*((pe=re+Oe*ct)-nt))+Oe*(pe+Oe*(fe+Oe*Vt-pe)-Je),ge=(Ue=(_e=Y+Oe*lt)+Oe*((Q=ue+Oe*Kt)-_e))+Oe*(Q+Oe*(Se+Oe*jt-Q)-Ue),Ke==0?(De=tt,He=ge,at=tt,ht=ge):(De=Math.min(De,tt),He=Math.min(He,ge),at=Math.max(at,tt),ht=Math.max(ht,ge));return new u(Math.round(De),Math.round(He),Math.round(at-De),Math.round(ht-He))},ne=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,Y,re=(D=this.ctx.lineDash,Y=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:Y}));this.prevLineDash!==re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=re)}}})(It.API),(function(r){var e=function(c){var u,f,h,g,b,A,v,F,E,N;for(f=[],h=0,g=(c+=u="\0\0\0\0".slice(c.length%4||4)).length;g>h;h+=4)(b=(c.charCodeAt(h)<<24)+(c.charCodeAt(h+1)<<16)+(c.charCodeAt(h+2)<<8)+c.charCodeAt(h+3))!==0?(A=(b=((b=((b=((b=(b-(N=b%85))/85)-(E=b%85))/85)-(F=b%85))/85)-(v=b%85))/85)%85,f.push(A+33,v+33,F+33,E+33,N+33)):f.push(122);return(function(j,$){for(var V=$;V>0;V--)j.pop()})(f,u.length),String.fromCharCode.apply(String,f)+"~>"},t=function(c){var u,f,h,g,b,A=String,v="length",F=255,E="charCodeAt",N="slice",j="replace";for(c[N](-2),c=c[N](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),h=[],g=0,b=(c+=u="uuuuu"[N](c[v]%5||5))[v];b>g;g+=5)f=52200625*(c[E](g)-33)+614125*(c[E](g+1)-33)+7225*(c[E](g+2)-33)+85*(c[E](g+3)-33)+(c[E](g+4)-33),h.push(F&f>>24,F&f>>16,F&f>>8,F&f);return(function($,V){for(var B=V;B>0;B--)$.pop()})(h,u[v]),A.fromCharCode.apply(A,h)},n=function(c){return c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},o=function(c){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),u.test(c)===!1)return"";for(var f="",h=0;h<c.length;h+=2)f+=String.fromCharCode("0x"+(c[h]+c[h+1]));return f},a=function(c){for(var u=new Uint8Array(c.length),f=c.length;f--;)u[f]=c.charCodeAt(f);return(u=a0(u)).reduce(function(h,g){return h+String.fromCharCode(g)},"")};r.processDataByFilters=function(c,u){var f=0,h=c||"",g=[];for(typeof(u=u||[])=="string"&&(u=[u]),f=0;f<u.length;f+=1)switch(u[f]){case"ASCII85Decode":case"/ASCII85Decode":h=t(h),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=e(h),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=o(h),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=n(h),g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=a(h),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[f]+'" is not implemented')}return{data:h,reverseChain:g.reverse().join(" ")}}})(It.API),(function(r){r.loadFile=function(e,t,n){return(function(o,a,c){a=a!==!1,c=typeof c=="function"?c:function(){};var u=void 0;try{u=(function(f,h,g){var b=new XMLHttpRequest,A=0,v=function(F){var E=F.length,N=[],j=String.fromCharCode;for(A=0;A<E;A+=1)N.push(j(255&F.charCodeAt(A)));return N.join("")};if(b.open("GET",f,!h),b.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(b.onload=function(){b.status===200?g(v(this.responseText)):g(void 0)}),b.send(null),h&&b.status===200)return v(b.responseText)})(o,a,c)}catch{}return u})(e,t,n)},r.loadImageFile=r.loadFile})(It.API),(function(r){function e(){return(Jt.html2canvas?Promise.resolve(Jt.html2canvas):wf(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function t(){return(Jt.DOMPurify?Promise.resolve(Jt.DOMPurify):wf(()=>import("./purify.es-aGzT-_H7.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var n=function(u){var f=qr(u);return f==="undefined"?"undefined":f==="string"||u instanceof String?"string":f==="number"||u instanceof Number?"number":f==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":f==="object"?"object":"unknown"},o=function(u,f){var h=document.createElement(u);for(var g in f.className&&(h.className=f.className),f.innerHTML&&f.dompurify&&(h.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)h.style[g]=f.style[g];return h},a=function u(f,h){for(var g=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),b=f.firstChild;b;b=b.nextSibling)h!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||g.appendChild(u(b,h));return f.nodeType===1&&(f.nodeName==="CANVAS"?(g.width=f.width,g.height=f.height,g.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(g.value=f.value),g.addEventListener("load",function(){g.scrollTop=f.scrollTop,g.scrollLeft=f.scrollLeft},!0)),g},c=function u(f){var h=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),g=u.convert(Promise.resolve(),h);return(g=g.setProgress(1,u,1,[u])).set(f)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(u,f){return u.__proto__=f||c.prototype,u},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(u,f){return this.then(function(){switch(f=f||(function(h){switch(n(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(u),f){case"string":return this.then(t).then(function(h){return this.set({src:o("div",{innerHTML:u,dompurify:h})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},c.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(f){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,f(this.prop.container,h)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(f){var h=this.opt.jsPDF,g=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,A=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete A.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=g,g)for(var v=0;v<g.length;++v){var F=g[v],E=F.src.find(function(N){return N.format==="truetype"});E&&h.addFont(E.url,F.ref.name,F.ref.style)}return A.windowHeight=A.windowHeight||0,A.windowHeight=A.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):A.windowHeight,h.context2d.save(!0),f(this.prop.container,A)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(u,f,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(u,f):this.outputPdf(u,f)},c.prototype.outputPdf=function(u,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,f)})},c.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},c.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(u){if(n(u)!=="object")return this;var f=Object.keys(u||{}).map(function(h){if(h in c.template.prop)return function(){this.prop[h]=u[h]};switch(h){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[h]=u[h]}}},this);return this.then(function(){return this.thenList(f)})},c.prototype.get=function(u,f){return this.then(function(){var h=u in c.template.prop?this.prop[u]:this.opt[u];return f?f(h):h})},c.prototype.setMargin=function(u){return this.then(function(){switch(n(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},c.prototype.setPageSize=function(u){function f(h,g){return Math.floor(h*g/72*96)}return this.then(function(){(u=u||It.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:f(u.inner.width,u.k),height:f(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},c.prototype.setProgress=function(u,f,h,g){return u!=null&&(this.progress.val=u),f!=null&&(this.progress.state=f),h!=null&&(this.progress.n=h),g!=null&&(this.progress.stack=g),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(u,f,h,g){return this.setProgress(u?this.progress.val+u:null,f||null,h?this.progress.n+h:null,g?this.progress.stack.concat(g):null)},c.prototype.then=function(u,f){var h=this;return this.thenCore(u,f,function(g,b){return h.updateProgress(null,null,1,[g]),Promise.prototype.then.call(this,function(A){return h.updateProgress(null,g),A}).then(g,b).then(function(A){return h.updateProgress(1),A})})},c.prototype.thenCore=function(u,f,h){h=h||Promise.prototype.then;var g=this;u&&(u=u.bind(g)),f&&(f=f.bind(g));var b=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?g:c.convert(Object.assign({},g),Promise.prototype),A=h.call(b,u,f);return c.convert(A,g.__proto__)},c.prototype.thenExternal=function(u,f){return Promise.prototype.then.call(this,u,f)},c.prototype.thenList=function(u){var f=this;return u.forEach(function(h){f=f.thenCore(h)}),f},c.prototype.catch=function(u){u&&(u=u.bind(this));var f=Promise.prototype.catch.call(this,u);return c.convert(f,this)},c.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},c.prototype.error=function(u){return this.then(function(){throw new Error(u)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,It.getPageSize=function(u,f,h){if(qr(u)==="object"){var g=u;u=g.orientation,f=g.unit||f,h=g.format||h}f=f||"mm",h=h||"a4",u=(""+(u||"P")).toLowerCase();var b,A=(""+h).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+f}var F,E=0,N=0;if(v.hasOwnProperty(A))E=v[A][1]/b,N=v[A][0]/b;else try{E=h[1],N=h[0]}catch{throw new Error("Invalid format: "+h)}if(u==="p"||u==="portrait")u="p",N>E&&(F=N,N=E,E=F);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",E>N&&(F=N,N=E,E=F)}return{width:N,height:E,unit:f,k:b,orientation:u}},r.html=function(u,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(Mm):null;var h=new c(f);return f.worker?h:h.from(u).doCallback()}})(It.API),It.API.addJS=function(r){return l2=r,this.internal.events.subscribe("postPutResources",function(){hf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(hf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),a2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+l2+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){hf!==void 0&&a2!==void 0&&this.internal.out("/Names <</JavaScript "+hf+" 0 R>>")}),this},(function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=t.outline.render().split(/\r\n/),a=0;a<o.length;a++){var c=o[a],u=n.exec(c);if(u!=null){var f=u[1];t.internal.newObjectDeferredBegin(f,!1)}t.internal.write(c)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,g=[];for(a=0;a<h;a++){var b=t.internal.newObject();g.push(b);var A=t.internal.getPageInfo(a+1);t.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var v=t.internal.newObject();for(t.internal.write("<< /Names [ "),a=0;a<g.length;a++)t.internal.write("(page_"+(a+1)+")"+g[a]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+v+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,o,a){var c={title:o,options:a,children:[]};return n==null&&(n=this.root),n.children.push(c),c},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var o=0;o<n.children.length;o++)this.genIds_r(n.children[o])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var c=n.children[a];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var u=this.count=this.count_r({count:0},c);if(u>0&&this.line("/Count "+u),c.options&&c.options.pageNumber){var f=t.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var h=0;h<n.children.length;h++)this.renderItems(n.children[h])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,o){for(var a=0;a<o.children.length;a++)n.count++,this.count_r(n,o.children[a]);return n.count}}])})(It.API),(function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,o,a,c,u){var f,h=this.decode.DCT_DECODE,g=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=c||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,f=(function(b){for(var A,v=256*b.charCodeAt(4)+b.charCodeAt(5),F=b.length,E={width:0,height:0,numcomponents:1},N=4;N<F;N+=2){if(N+=v,e.indexOf(b.charCodeAt(N+1))!==-1){A=256*b.charCodeAt(N+5)+b.charCodeAt(N+6),E={width:256*b.charCodeAt(N+7)+b.charCodeAt(N+8),height:A,numcomponents:b.charCodeAt(N+9)};break}v=256*b.charCodeAt(N+2)+b.charCodeAt(N+3)}return E})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),f.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}g={data:t,width:f.width,height:f.height,colorSpace:u,bitsPerComponent:8,filter:h,index:n,alias:o}}return g}})(It.API),It.API.processPNG=function(r,e,t,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var o,a=W4(r,{checkCrc:!0}),c=a.width,u=a.height,f=a.channels,h=a.palette,g=a.depth;o=h&&f===1?(function(C){for(var w=C.width,O=C.height,P=C.data,S=C.palette,z=C.depth,W=!1,le=[],ve=[],de=void 0,ce=!1,we=0,je=0;je<S.length;je++){var ne=h5(S[je],4),D=ne[0],Y=ne[1],re=ne[2],ue=ne[3];le.push(D,Y,re),ue!=null&&(ue===0?(we++,ve.length<1&&ve.push(je)):ue<255&&(ce=!0))}if(ce||we>1){W=!0,ve=void 0;var fe=w*O;de=new Uint8Array(fe);for(var Se=new DataView(P.buffer),Ee=0;Ee<fe;Ee++){var ke=Wm(Se,Ee,z),Oe=h5(S[ke],4)[3];de[Ee]=Oe}}else we===0&&(ve=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:W?8:void 0,colorBytes:P,alphaBytes:de,needSMask:W,palette:le,mask:ve}})(a):f===2||f===4?(function(C){for(var w=C.data,O=C.width,P=C.height,S=C.channels,z=C.depth,W=S===2?"DeviceGray":"DeviceRGB",le=S-1,ve=O*P,de=le,ce=ve*de,we=1*ve,je=Math.ceil(ce*z/8),ne=Math.ceil(we*z/8),D=new Uint8Array(je),Y=new Uint8Array(ne),re=new DataView(w.buffer),ue=new DataView(D.buffer),fe=new DataView(Y.buffer),Se=!1,Ee=0;Ee<ve;Ee++){for(var ke=Ee*S,Oe=0;Oe<de;Oe++)y2(ue,Wm(re,ke+Oe,z),Ee*de+Oe,z);var Ke=Wm(re,ke+de,z);Ke<(1<<z)-1&&(Se=!0),y2(fe,Ke,1*Ee,z)}return{colorSpace:W,colorsPerPixel:le,sMaskBitsPerComponent:Se?z:void 0,colorBytes:D,alphaBytes:Y,needSMask:Se}})(a):(function(C){var w=C.data,O=C.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:O,colorsPerPixel:O==="DeviceGray"?1:3,colorBytes:w instanceof Uint16Array?(function(P){for(var S=P.length,z=new Uint8Array(2*S),W=new DataView(z.buffer,z.byteOffset,z.byteLength),le=0;le<S;le++)W.setUint16(2*le,P[le],!1);return z})(w):w,needSMask:!1}})(a);var b,A,v,F=o,E=F.colorSpace,N=F.colorsPerPixel,j=F.sMaskBitsPerComponent,$=F.colorBytes,V=F.alphaBytes,B=F.needSMask,X=F.palette,se=F.mask,U=null;return n!==It.API.image_compression.NONE&&typeof a0=="function"?(U=(function(C){var w;switch(C){case It.API.image_compression.FAST:w=11;break;case It.API.image_compression.MEDIUM:w=13;break;case It.API.image_compression.SLOW:w=14;break;default:w=12}return w})(n),b=this.decode.FLATE_DECODE,A="/Predictor ".concat(U," /Colors ").concat(N," /BitsPerComponent ").concat(g," /Columns ").concat(c),r=h2($,Math.ceil(c*N*g/8),N,g,n),B&&(v=h2(V,Math.ceil(c*j/8),1,j,n))):(b=void 0,A=void 0,r=$,B&&(v=V)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(v&&this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),{alias:t,data:r,index:e,filter:b,decodeParameters:A,transparency:se,palette:X,sMask:v,predictor:U,width:c,height:u,bitsPerComponent:g,sMaskBitsPerComponent:j,colorSpace:E}}},(function(r){r.processGIF89A=function(e,t,n,o){var a=new cT(e),c=a.width,u=a.height,f=[];a.decodeAndBlitFrameRGBA(0,f);var h={data:f,width:c,height:u},g=new $m(100).encode(h,100);return r.processJPEG.call(this,g,t,n,o)},r.processGIF87A=r.processGIF89A})(It.API),Zs.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:n,blue:t,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Zs.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){Qr.log("bit decode error:"+t)}},Zs.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,o=0;o<e;o++)for(var a=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+8*o*4,u=0;u<8&&8*o+u<this.width;u++){var f=this.palette[a>>7-u&1];this.data[c+4*u]=f.blue,this.data[c+4*u+1]=f.green,this.data[c+4*u+2]=f.red,this.data[c+4*u+3]=255}t!==0&&(this.pos+=4-t)}},Zs.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,o=0;o<r;o++){var a=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+2*o*4,u=a>>4,f=15&a,h=this.palette[u];if(this.data[c]=h.blue,this.data[c+1]=h.green,this.data[c+2]=h.red,this.data[c+3]=255,2*o+1>=this.width)break;h=this.palette[f],this.data[c+4]=h.blue,this.data[c+4+1]=h.green,this.data[c+4+2]=h.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},Zs.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var o=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;if(o<this.palette.length){var c=this.palette[o];this.data[a]=c.red,this.data[a+1]=c.green,this.data[a+2]=c.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}r!==0&&(this.pos+=4-r)}},Zs.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(a&e)/e*255|0,u=(a>>5&e)/e*255|0,f=(a>>10&e)/e*255|0,h=a>>15?255:0,g=n*this.width*4+4*o;this.data[g]=f,this.data[g+1]=u,this.data[g+2]=c,this.data[g+3]=h}this.pos+=r}},Zs.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var o=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(c&e)/e*255|0,f=(c>>5&t)/t*255|0,h=(c>>11)/e*255|0,g=o*this.width*4+4*a;this.data[g]=h,this.data[g+1]=f,this.data[g+2]=u,this.data[g+3]=255}this.pos+=r}},Zs.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=a,this.data[c+1]=o,this.data[c+2]=n,this.data[c+3]=255}this.pos+=this.width%4}},Zs.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=a,this.data[u+1]=o,this.data[u+2]=n,this.data[u+3]=c}},Zs.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(e,t,n,o){var a=new Zs(e,!1),c=a.width,u=a.height,f={data:a.getData(),width:c,height:u},h=new $m(100).encode(f,100);return r.processJPEG.call(this,h,t,n,o)}})(It.API),v2.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(e,t,n,o){var a=new v2(e),c=a.width,u=a.height,f={data:a.getData(),width:c,height:u},h=new $m(100).encode(f,100);return r.processJPEG.call(this,h,t,n,o)}})(It.API),It.API.processRGBA=function(r,e,t){for(var n=r.data,o=n.length,a=new Uint8Array(o/4*3),c=new Uint8Array(o/4),u=0,f=0,h=0;h<o;h+=4){var g=n[h],b=n[h+1],A=n[h+2],v=n[h+3];a[u++]=g,a[u++]=b,a[u++]=A,c[f++]=v}var F=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:F,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},It.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Cu=It.API,ff=Cu.getCharWidthsArray=function(r,e){var t,n,o=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:o.metadata.Unicode.widths,f=u.fof?u.fof:1,h=e.kerning?e.kerning:o.metadata.Unicode.kerning,g=h.fof?h.fof:1,b=e.doKerning!==!1,A=0,v=r.length,F=0,E=u[0]||f,N=[];for(t=0;t<v;t++)n=r.charCodeAt(t),typeof o.metadata.widthOfString=="function"?N.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(n))+c*(1e3/a)||0)/1e3):(A=b&&qr(h[n])==="object"&&!isNaN(parseInt(h[n][F],10))?h[n][F]/g:0,N.push((u[n]||E)/f+A)),F=n;return N},c2=Cu.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return Cu.processArabic&&(r=Cu.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,o)/t:ff.apply(this,arguments).reduce(function(a,c){return a+c},0)},u2=function(r,e,t,n){for(var o=[],a=0,c=r.length,u=0;a!==c&&u+e[a]<t;)u+=e[a],a++;o.push(r.slice(0,a));var f=a;for(u=0;a!==c;)u+e[a]>n&&(o.push(r.slice(f,a)),u=0,f=a),u+=e[a],a++;return f!==a&&o.push(r.slice(f,a)),o},d2=function(r,e,t){t||(t={});var n,o,a,c,u,f,h,g=[],b=[g],A=t.textIndent||0,v=0,F=0,E=r.split(" "),N=ff.apply(this,[" ",t])[0];if(f=t.lineIndent===-1?E[0].length+2:t.lineIndent||0){var j=Array(f).join(" "),$=[];E.map(function(B){(B=B.split(/\s*\n/)).length>1?$=$.concat(B.map(function(X,se){return(se&&X.length?`
`:"")+X})):$.push(B[0])}),E=$,f=c2.apply(this,[j,t])}for(a=0,c=E.length;a<c;a++){var V=0;if(n=E[a],f&&n[0]==`
`&&(n=n.substr(1),V=1),A+v+(F=(o=ff.apply(this,[n,t])).reduce(function(B,X){return B+X},0))>e||V){if(F>e){for(u=u2.apply(this,[n,o,e-(A+v),e]),g.push(u.shift()),g=[u.pop()];u.length;)b.push([u.shift()]);F=o.slice(n.length-(g[0]?g[0].length:0)).reduce(function(B,X){return B+X},0)}else g=[n];b.push(g),A=F+f,v=N}else g.push(n),A+=v+F,v=N}return h=f?function(B,X){return(X?j:"")+B.join(" ")}:function(B){return B.join(" ")},b.map(h)},Cu.splitTextToSize=function(r,e,t){var n,o=(t=t||{}).fontSize||this.internal.getFontSize(),a=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var b=this.internal.getFont(g.fontName,g.fontStyle),A="Unicode";return b.metadata[A]?{widths:b.metadata[A].widths||{0:1},kerning:b.metadata[A].kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/o;a.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/o:0,a.lineIndent=t.lineIndent;var u,f,h=[];for(u=0,f=n.length;u<f;u++)h=h.concat(d2.apply(this,[n[u],c,a]));return h},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",n={},o={},a=0;a<16;a++)n[t[a]]=e[a],o[e[a]]=t[a];var c=function(A){return"0x"+parseInt(A,10).toString(16)},u=r.__fontmetrics__.compress=function(A){var v,F,E,N,j=["{"];for(var $ in A){if(v=A[$],isNaN(parseInt($,10))?F="'"+$+"'":($=parseInt($,10),F=(F=c($).slice(2)).slice(0,-1)+o[F.slice(-1)]),typeof v=="number")v<0?(E=c(v).slice(3),N="-"):(E=c(v).slice(2),N=""),E=N+E.slice(0,-1)+o[E.slice(-1)];else{if(qr(v)!=="object")throw new Error("Don't know what to do with value type "+qr(v)+".");E=u(v)}j.push(F+E)}return j.push("}"),j.join("")},f=r.__fontmetrics__.uncompress=function(A){if(typeof A!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,F,E,N,j={},$=1,V=j,B=[],X="",se="",U=A.length-1,C=1;C<U;C+=1)(N=A[C])=="'"?v?(E=v.join(""),v=void 0):v=[]:v?v.push(N):N=="{"?(B.push([V,E]),V={},E=void 0):N=="}"?((F=B.pop())[0][F[1]]=V,E=void 0,V=F[0]):N=="-"?$=-1:E===void 0?n.hasOwnProperty(N)?(X+=n[N],E=parseInt(X,16)*$,$=1,X=""):X+=N:n.hasOwnProperty(N)?(se+=n[N],V[E]=parseInt(se,16)*$,$=1,E=void 0,se=""):se+=N;return j},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},b={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(A){var v=A.font,F=b.Unicode[v.postScriptName];F&&(v.metadata.Unicode={},v.metadata.Unicode.widths=F.widths,v.metadata.Unicode.kerning=F.kerning);var E=g.Unicode[v.postScriptName];E&&(v.metadata.Unicode.encoding=E,v.encoding=E.codePages[0])}])})(It.API),(function(r){var e=function(t){for(var n=t.length,o=new Uint8Array(n),a=0;a<n;a++)o[a]=t.charCodeAt(a);return o};r.API.events.push(["addFont",function(t){var n=void 0,o=t.font,a=t.instance;if(!o.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(n=a.existsFileInVFS(o.postScriptName)===!1?a.loadFile(o.postScriptName):a.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(c,u){u=/^\x00\x01\x00\x00/.test(u)?e(u):e(_f(u)),c.metadata=r.API.TTFFont.open(u),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(o,n)}}])})(It),It.API.addSvgAsImage=function(r,e,t,n,o,a,c,u){if(isNaN(e)||isNaN(t))throw Qr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(o))throw Qr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=n,f.height=o;var h=f.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,f.width,f.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return(Jt.canvg?Promise.resolve(Jt.canvg):wf(()=>import("./index.es-BItxQs8S.js"),[])).catch(function(A){return Promise.reject(new Error("Could not load canvg: "+A))}).then(function(A){return A.default?A.default:A}).then(function(A){return A.fromString(h,r,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(A){return A.render(g)}).then(function(){b.addImage(f.toDataURL("image/jpeg",1),e,t,n,o,c,u)})},It.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var o=0;o<this.internal.pages[n].length;o++)this.internal.pages[n][o]=this.internal.pages[n][o].replace(e,t);return this},It.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,o,a,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(c),f=[],h=0,g=0,b=0;function A(F,E){var N,j=!1;for(N=0;N<F.length;N+=1)F[N]===E&&(j=!0);return j}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var v=u.length;for(b=0;b<v;b+=1)t[u[b]].value=t[u[b]].defaultValue,t[u[b]].explicitSet=!1}if(qr(r)==="object"){for(o in r)if(a=r[o],A(u,o)&&a!==void 0){if(t[o].type==="boolean"&&typeof a=="boolean")t[o].value=a;else if(t[o].type==="name"&&A(t[o].valueSet,a))t[o].value=a;else if(t[o].type==="integer"&&Number.isInteger(a))t[o].value=a;else if(t[o].type==="array"){for(h=0;h<a.length;h+=1)if(n=!0,a[h].length===1&&typeof a[h][0]=="number")f.push(String(a[h]-1));else if(a[h].length>1){for(g=0;g<a[h].length;g+=1)typeof a[h][g]!="number"&&(n=!1);n===!0&&f.push([a[h][0]-1,a[h][1]-1].join(" "))}t[o].value="["+f.join(" ")+"]"}else t[o].value=t[o].defaultValue;t[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var F,E=[];for(F in t)t[F].explicitSet===!0&&(t[F].type==="name"?E.push("/"+F+" /"+t[F].value):E.push("/"+F+" "+t[F].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),h=a.length+c.length+u.length+o.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(o+a+c+u+f),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(It.API),(function(r){var e=r.API,t=e.pdfEscape16=function(a,c){for(var u,f=c.metadata.Unicode.widths,h=["","0","00","000","0000"],g=[""],b=0,A=a.length;b<A;++b){if(u=c.metadata.characterToGlyph(a.charCodeAt(b)),c.metadata.glyIdsUsed.push(u),c.metadata.toUnicode[u]=a.charCodeAt(b),f.indexOf(u)==-1&&(f.push(u),f.push([parseInt(c.metadata.widthOfGlyph(u),10)])),u=="0")return g.join("");u=u.toString(16),g.push(h[4-u.length],u)}return g.join("")},n=function(a){var c,u,f,h,g,b,A;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],b=0,A=(u=Object.keys(a).sort(function(v,F){return v-F})).length;b<A;b++)c=u[b],f.length>=100&&(g+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),a[c]!==void 0&&a[c]!==null&&typeof a[c].toString=="function"&&(h=("0000"+a[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),f.push("<"+c+"><"+h+">"));return f.length&&(g+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),g+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(c){var u=c.font,f=c.out,h=c.newObject,g=c.putStream;if(u.metadata instanceof r.API.TTFFont&&u.encoding==="Identity-H"){for(var b=u.metadata.Unicode.widths,A=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),v="",F=0;F<A.length;F++)v+=String.fromCharCode(A[F]);var E=h();g({data:v,addLength1:!0,objectId:E}),f("endobj");var N=h();g({data:n(u.metadata.toUnicode),addLength1:!0,objectId:N}),f("endobj");var j=h();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+Eu(u.fontName)),f("/FontFile2 "+E+" 0 R"),f("/FontBBox "+r.API.PDFObject.convert(u.metadata.bbox)),f("/Flags "+u.metadata.flags),f("/StemV "+u.metadata.stemV),f("/ItalicAngle "+u.metadata.italicAngle),f("/Ascent "+u.metadata.ascender),f("/Descent "+u.metadata.decender),f("/CapHeight "+u.metadata.capHeight),f(">>"),f("endobj");var $=h();f("<<"),f("/Type /Font"),f("/BaseFont /"+Eu(u.fontName)),f("/FontDescriptor "+j+" 0 R"),f("/W "+r.API.PDFObject.convert(b)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+u.encoding+")"),f(">>"),f(">>"),f("endobj"),u.objectNumber=h(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+N+" 0 R"),f("/BaseFont /"+Eu(u.fontName)),f("/Encoding /"+u.encoding),f("/DescendantFonts ["+$+" 0 R]"),f(">>"),f("endobj"),u.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(c){var u=c.font,f=c.out,h=c.newObject,g=c.putStream;if(u.metadata instanceof r.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var b=u.metadata.rawData,A="",v=0;v<b.length;v++)A+=String.fromCharCode(b[v]);var F=h();g({data:A,addLength1:!0,objectId:F}),f("endobj");var E=h();g({data:n(u.metadata.toUnicode),addLength1:!0,objectId:E}),f("endobj");var N=h();f("<<"),f("/Descent "+u.metadata.decender),f("/CapHeight "+u.metadata.capHeight),f("/StemV "+u.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+F+" 0 R"),f("/Flags 96"),f("/FontBBox "+r.API.PDFObject.convert(u.metadata.bbox)),f("/FontName /"+Eu(u.fontName)),f("/ItalicAngle "+u.metadata.italicAngle),f("/Ascent "+u.metadata.ascender),f(">>"),f("endobj"),u.objectNumber=h();for(var j=0;j<u.metadata.hmtx.widths.length;j++)u.metadata.hmtx.widths[j]=parseInt(u.metadata.hmtx.widths[j]*(1e3/u.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+Eu(u.fontName)+"/FontDescriptor "+N+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),f("endobj"),u.isAlreadyPutted=!0}})(a)}]);var o=function(a){var c,u=a.text||"",f=a.x,h=a.y,g=a.options||{},b=a.mutex||{},A=b.pdfEscape,v=b.activeFontKey,F=b.fonts,E=v,N="",j=0,$="",V=F[E].encoding;if(F[E].encoding!=="Identity-H")return{text:u,x:f,y:h,options:g,mutex:b};for($=u,E=v,Array.isArray(u)&&($=u[0]),j=0;j<$.length;j+=1)F[E].metadata.hasOwnProperty("cmap")&&(c=F[E].metadata.cmap.unicode.codeMap[$[j].charCodeAt(0)]),c||$[j].charCodeAt(0)<256&&F[E].metadata.hasOwnProperty("Unicode")?N+=$[j]:N+="";var B="";return parseInt(E.slice(1))<14||V==="WinAnsiEncoding"?B=A(N,E).split("").map(function(X){return X.charCodeAt(0).toString(16)}).join(""):V==="Identity-H"&&(B=t(N,F[E])),b.isHex=!0,{text:B,x:f,y:h,options:g,mutex:b}};e.events.push(["postProcessText",function(a){var c=a.text||"",u=[],f={text:c,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(c)){var h=0;for(h=0;h<c.length;h+=1)Array.isArray(c[h])&&c[h].length===3?u.push([o(Object.assign({},f,{text:c[h][0]})).text,c[h][1],c[h][2]]):u.push(o(Object.assign({},f,{text:c[h]})).text);a.text=u}else a.text=o(Object.assign({},f,{text:c})).text}])})(It),(function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(It.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var o,a,c,u,f,h,g,b=e,A=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],F={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},N=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),$=!1,V=0;this.__bidiEngine__={};var B=function(P){var S=P.charCodeAt(),z=S>>8,W=E[z];return W!==void 0?b[256*W+(255&S)]:z===252||z===253?"AL":j.test(z)?"L":z===8?"R":"N"},X=function(P){for(var S,z=0;z<P.length;z++){if((S=B(P.charAt(z)))==="L")return!1;if(S==="R")return!0}return!1},se=function(P,S,z,W){var le,ve,de,ce,we=S[W];switch(we){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":$=!1;break;case"N":case"AN":break;case"EN":$&&(we="AN");break;case"AL":$=!0,we="R";break;case"WS":case"BN":we="N";break;case"CS":W<1||W+1>=S.length||(le=z[W-1])!=="EN"&&le!=="AN"||(ve=S[W+1])!=="EN"&&ve!=="AN"?we="N":$&&(ve="AN"),we=ve===le?ve:"N";break;case"ES":we=(le=W>0?z[W-1]:"B")==="EN"&&W+1<S.length&&S[W+1]==="EN"?"EN":"N";break;case"ET":if(W>0&&z[W-1]==="EN"){we="EN";break}if($){we="N";break}for(de=W+1,ce=S.length;de<ce&&S[de]==="ET";)de++;we=de<ce&&S[de]==="EN"?"EN":"N";break;case"NSM":if(c&&!u){for(ce=S.length,de=W+1;de<ce&&S[de]==="NSM";)de++;if(de<ce){var je=P[W],ne=je>=1425&&je<=2303||je===64286;if(le=S[de],ne&&(le==="R"||le==="AL")){we="R";break}}}we=W<1||(le=S[W-1])==="B"?"N":z[W-1];break;case"B":$=!1,o=!0,we=V;break;case"S":a=!0,we="N"}return we},U=function(P,S,z){var W=P.split("");return z&&C(W,z,{hiLevel:V}),W.reverse(),S&&S.reverse(),W.join("")},C=function(P,S,z){var W,le,ve,de,ce,we=-1,je=P.length,ne=0,D=[],Y=V?v:A,re=[];for($=!1,o=!1,a=!1,le=0;le<je;le++)re[le]=B(P[le]);for(ve=0;ve<je;ve++){if(ce=ne,D[ve]=se(P,re,D,ve),W=240&(ne=Y[ce][F[D[ve]]]),ne&=15,S[ve]=de=Y[ne][5],W>0)if(W===16){for(le=we;le<ve;le++)S[le]=1;we=-1}else we=-1;if(Y[ne][6])we===-1&&(we=ve);else if(we>-1){for(le=we;le<ve;le++)S[le]=de;we=-1}re[ve]==="B"&&(S[ve]=0),z.hiLevel|=de}a&&(function(ue,fe,Se){for(var Ee=0;Ee<Se;Ee++)if(ue[Ee]==="S"){fe[Ee]=V;for(var ke=Ee-1;ke>=0&&ue[ke]==="WS";ke--)fe[ke]=V}})(re,S,je)},w=function(P,S,z,W,le){if(!(le.hiLevel<P)){if(P===1&&V===1&&!o)return S.reverse(),void(z&&z.reverse());for(var ve,de,ce,we,je=S.length,ne=0;ne<je;){if(W[ne]>=P){for(ce=ne+1;ce<je&&W[ce]>=P;)ce++;for(we=ne,de=ce-1;we<de;we++,de--)ve=S[we],S[we]=S[de],S[de]=ve,z&&(ve=z[we],z[we]=z[de],z[de]=ve);ne=ce}ne++}}},O=function(P,S,z){var W=P.split(""),le={hiLevel:V};return z||(z=[]),C(W,z,le),(function(ve,de,ce){if(ce.hiLevel!==0&&g)for(var we,je=0;je<ve.length;je++)de[je]===1&&(we=N.indexOf(ve[je]))>=0&&(ve[je]=N[we+1])})(W,z,le),w(2,W,S,z,le),w(1,W,S,z,le),W.join("")};return this.__bidiEngine__.doBidiReorder=function(P,S,z){if((function(le,ve){if(ve)for(var de=0;de<le.length;de++)ve[de]=de;u===void 0&&(u=X(le)),h===void 0&&(h=X(le))})(P,S),c||!f||h)if(c&&f&&u^h)V=u?1:0,P=U(P,S,z);else if(!c&&f&&h)V=u?1:0,P=O(P,S,z),P=U(P,S);else if(!c||u||f||h){if(c&&!f&&u^h)P=U(P,S),u?(V=0,P=O(P,S,z)):(V=1,P=O(P,S,z),P=U(P,S));else if(c&&u&&!f&&h)V=1,P=O(P,S,z),P=U(P,S);else if(!c&&!f&&u^h){var W=g;u?(V=1,P=O(P,S,z),V=0,g=!1,P=O(P,S,z),g=W):(V=0,P=O(P,S,z),P=U(P,S),V=1,g=!1,P=O(P,S,z),g=W,P=U(P,S))}}else V=0,P=O(P,S,z);else V=u?1:0,P=O(P,S,z);return P},this.__bidiEngine__.setOptions=function(P){P&&(c=P.isInputVisual,f=P.isOutputVisual,u=P.isInputRtl,h=P.isOutputRtl,g=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var o=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var c=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,t.setOptions(a),Object.prototype.toString.call(o)==="[object Array]"){var u=0;for(c=[],u=0;u<o.length;u+=1)Object.prototype.toString.call(o[u])==="[object Array]"?c.push([t.doBidiReorder(o[u][0]),o[u][1],o[u][2]]):c.push([t.doBidiReorder(o[u])]);n.text=c}else n.text=t.doBidiReorder(o);t.setOptions({isInputVisual:!0})}])})(It),It.API.TTFFont=(function(){function r(e){var t;if(this.rawData=e,t=this.contents=new rc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new TT(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new uT(this.contents),this.head=new hT(this),this.name=new yT(this),this.cmap=new cv(this),this.toUnicode={},this.hhea=new fT(this),this.maxp=new xT(this),this.hmtx=new vT(this),this.post=new mT(this),this.os2=new pT(this),this.loca=new _T(this),this.glyf=new bT(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,o,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,u,f,h;for(h=[],c=0,u=(f=this.bbox).length;c<u;c++)e=f[c],h.push(Math.round(e*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(n=255&(o=this.post.italic_angle),32768&(t=o>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var o,a,c,u;for(c=0,a=0,u=(e=""+e).length;0<=u?a<u:a>u;a=0<=u?++a:--a)o=e.charCodeAt(a),c+=this.widthOfGlyph(this.characterToGlyph(o))+n*(1e3/t)||0;return c*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r})();var sa,rc=(function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,o;for(o=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)o.push(this.writeByte(e.charCodeAt(t)));return o},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,o,a,c,u,f;return e=this.readByte(),t=this.readByte(),n=this.readByte(),o=this.readByte(),a=this.readByte(),c=this.readByte(),u=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^o)+16777216*(255^a)+65536*(255^c)+256*(255^u)+(255^f)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*o+16777216*a+65536*c+256*u+f},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,o,a;for(a=[],n=0,o=e.length;n<o;n++)t=e[n],a.push(this.writeByte(t));return a},r})(),uT=(function(){var r;function e(t){var n,o,a;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},o=0,a=this.tableCount;0<=a?o<a:o>a;o=0<=a?++o:--o)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,o,a,c,u,f,h,g,b,A,v,F,E;for(E in v=Object.keys(t).length,f=Math.log(2),b=16*Math.floor(Math.log(v)/f),c=Math.floor(b/f),g=16*v-b,(o=new rc).writeInt(this.scalarType),o.writeShort(v),o.writeShort(b),o.writeShort(c),o.writeShort(g),a=16*v,h=o.pos+a,u=null,F=[],t)for(A=t[E],o.writeString(E),o.writeInt(r(A)),o.writeInt(h),o.writeInt(A.length),F=F.concat(A),E==="head"&&(u=h),h+=A.length;h%4;)F.push(0),h++;return o.write(F),n=2981146554-r(o.data),o.pos=u+8,o.writeUInt32(n),o.data},r=function(t){var n,o,a,c;for(t=uv.call(t);t.length%4;)t.push(0);for(a=new rc(t),o=0,n=0,c=t.length;n<c;n=n+=4)o+=a.readUInt32();return 4294967295&o},e})(),dT={}.hasOwnProperty,Ba=function(r,e){for(var t in e)dT.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};sa=(function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var hT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ba(r,sa),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var t;return(t=new rc).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},r})(),b2=(function(){function r(e,t){var n,o,a,c,u,f,h,g,b,A,v,F,E,N,j,$,V;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),b=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(v=e.readUInt16(),A=v/2,e.pos+=6,a=(function(){var B,X;for(X=[],f=B=0;0<=A?B<A:B>A;f=0<=A?++B:--B)X.push(e.readUInt16());return X})(),e.pos+=2,E=(function(){var B,X;for(X=[],f=B=0;0<=A?B<A:B>A;f=0<=A?++B:--B)X.push(e.readUInt16());return X})(),h=(function(){var B,X;for(X=[],f=B=0;0<=A?B<A:B>A;f=0<=A?++B:--B)X.push(e.readUInt16());return X})(),g=(function(){var B,X;for(X=[],f=B=0;0<=A?B<A:B>A;f=0<=A?++B:--B)X.push(e.readUInt16());return X})(),o=(this.length-e.pos+this.offset)/2,u=(function(){var B,X;for(X=[],f=B=0;0<=o?B<o:B>o;f=0<=o?++B:--B)X.push(e.readUInt16());return X})(),f=j=0,V=a.length;j<V;f=++j)for(N=a[f],n=$=F=E[f];F<=N?$<=N:$>=N;n=F<=N?++$:--$)g[f]===0?c=n+h[f]:(c=u[g[f]/2+(n-F)-(A-f)]||0)!==0&&(c+=h[f]),this.codeMap[n]=65535&c}e.pos=b}return r.encode=function(e,t){var n,o,a,c,u,f,h,g,b,A,v,F,E,N,j,$,V,B,X,se,U,C,w,O,P,S,z,W,le,ve,de,ce,we,je,ne,D,Y,re,ue,fe,Se,Ee,ke,Oe,Ke,nt;switch(W=new rc,c=Object.keys(e).sort(function(_e,pe){return _e-pe}),t){case"macroman":for(E=0,N=(function(){var _e=[];for(F=0;F<256;++F)_e.push(0);return _e})(),$={0:0},a={},le=0,we=c.length;le<we;le++)$[ke=e[o=c[le]]]==null&&($[ke]=++E),a[o]={old:e[o],new:$[e[o]]},N[o]=$[e[o]];return W.writeUInt16(1),W.writeUInt16(0),W.writeUInt32(12),W.writeUInt16(0),W.writeUInt16(262),W.writeUInt16(0),W.write(N),{charMap:a,subtable:W.data,maxGlyphID:E+1};case"unicode":for(S=[],b=[],V=0,$={},n={},j=h=null,ve=0,je=c.length;ve<je;ve++)$[X=e[o=c[ve]]]==null&&($[X]=++V),n[o]={old:X,new:$[X]},u=$[X]-o,j!=null&&u===h||(j&&b.push(j),S.push(o),h=u),j=o;for(j&&b.push(j),b.push(65535),S.push(65535),O=2*(w=S.length),C=2*Math.pow(Math.log(w)/Math.LN2,2),A=Math.log(C/2)/Math.LN2,U=2*w-C,f=[],se=[],v=[],F=de=0,ne=S.length;de<ne;F=++de){if(P=S[F],g=b[F],P===65535){f.push(0),se.push(0);break}if(P-(z=n[P].new)>=32768)for(f.push(0),se.push(2*(v.length+w-F)),o=ce=P;P<=g?ce<=g:ce>=g;o=P<=g?++ce:--ce)v.push(n[o].new);else f.push(z-P),se.push(0)}for(W.writeUInt16(3),W.writeUInt16(1),W.writeUInt32(12),W.writeUInt16(4),W.writeUInt16(16+8*w+2*v.length),W.writeUInt16(0),W.writeUInt16(O),W.writeUInt16(C),W.writeUInt16(A),W.writeUInt16(U),Se=0,D=b.length;Se<D;Se++)o=b[Se],W.writeUInt16(o);for(W.writeUInt16(0),Ee=0,Y=S.length;Ee<Y;Ee++)o=S[Ee],W.writeUInt16(o);for(Oe=0,re=f.length;Oe<re;Oe++)u=f[Oe],W.writeUInt16(u);for(Ke=0,ue=se.length;Ke<ue;Ke++)B=se[Ke],W.writeUInt16(B);for(nt=0,fe=v.length;nt<fe;nt++)E=v[nt],W.writeUInt16(E);return{charMap:n,subtable:W.data,maxGlyphID:V+1}}},r})(),cv=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ba(r,sa),r.prototype.tag="cmap",r.prototype.parse=function(e){var t,n,o;for(e.pos=this.offset,this.version=e.readUInt16(),o=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=o?n<o:n>o;n=0<=o?++n:--n)t=new b2(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},r.encode=function(e,t){var n,o;return t==null&&(t="macroman"),n=b2.encode(e,t),(o=new rc).writeUInt16(0),o.writeUInt16(1),n.table=o.data.concat(n.subtable),n},r})(),fT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ba(r,sa),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r})(),pT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ba(r,sa),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n})(),this.charRange=(function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r})(),mT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ba(r,sa),r.prototype.tag="post",r.prototype.parse=function(e){var t,n,o;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],o=[];e.pos<this.offset+this.length;)t=e.readByte(),o.push(this.names.push(e.readString(t)));return o;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var c,u,f;for(f=[],a=c=0,u=this.file.maxp.numGlyphs;0<=u?c<u:c>u;a=0<=u?++c:--c)f.push(e.readUInt32());return f}).call(this)}},r})(),gT=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},yT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ba(r,sa),r.prototype.tag="name",r.prototype.parse=function(e){var t,n,o,a,c,u,f,h,g,b,A;for(e.pos=this.offset,e.readShort(),t=e.readShort(),u=e.readShort(),n=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+u+e.readShort()});for(f={},a=g=0,b=n.length;g<b;a=++g)o=n[a],e.pos=o.offset,h=e.readString(o.length),c=new gT(h,o),f[A=o.nameID]==null&&(f[A]=[]),f[o.nameID].push(c);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},r})(),xT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ba(r,sa),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r})(),vT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ba(r,sa),r.prototype.tag="hmtx",r.prototype.parse=function(e){var t,n,o,a,c,u,f;for(e.pos=this.offset,this.metrics=[],t=0,u=this.file.hhea.numberOfMetrics;0<=u?t<u:t>u;t=0<=u?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var h,g;for(g=[],t=h=0;0<=o?h<o:h>o;t=0<=o?++h:--h)g.push(e.readInt16());return g})(),this.widths=(function(){var h,g,b,A;for(A=[],h=0,g=(b=this.metrics).length;h<g;h++)a=b[h],A.push(a.advance);return A}).call(this),n=this.widths[this.widths.length-1],f=[],t=c=0;0<=o?c<o:c>o;t=0<=o?++c:--c)f.push(this.widths.push(n));return f},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r})(),uv=[].slice,bT=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ba(r,sa),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var t,n,o,a,c,u,f,h,g,b;return e in this.cache?this.cache[e]:(a=this.file.loca,t=this.file.contents,n=a.indexOf(e),(o=a.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+n,c=(u=new rc(t.read(o))).readShort(),h=u.readShort(),b=u.readShort(),f=u.readShort(),g=u.readShort(),this.cache[e]=c===-1?new ST(u,h,b,f,g):new wT(u,c,h,b,f,g),this.cache[e]))},r.prototype.encode=function(e,t,n){var o,a,c,u,f;for(c=[],a=[],u=0,f=t.length;u<f;u++)o=e[t[u]],a.push(c.length),o&&(c=c.concat(o.encode(n)));return a.push(c.length),{table:c,offsets:a}},r})(),wT=(function(){function r(e,t,n,o,a,c){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=o,this.xMax=a,this.yMax=c,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),ST=(function(){function r(e,t,n,o,a){var c,u;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=o,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;u=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&u;)c.pos+=1&u?4:2,128&u?c.pos+=8:64&u?c.pos+=4:8&u&&(c.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new rc(uv.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r})(),_T=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ba(r,sa),r.prototype.tag="loca",r.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var o,a;for(a=[],n=0,o=this.length;n<o;n+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var o,a;for(a=[],n=0,o=this.length;n<o;n+=4)a.push(e.readUInt32());return a}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),o=0,a=0,c=0;c<n.length;++c)if(n[c]=o,a<t.length&&t[a]==c){++a,n[c]=o;var u=this.offsets[c],f=this.offsets[c+1]-u;f>0&&(o+=f)}for(var h=new Array(4*n.length),g=0;g<n.length;++g)h[4*g+3]=255&n[g],h[4*g+2]=(65280&n[g])>>8,h[4*g+1]=(16711680&n[g])>>16,h[4*g]=(4278190080&n[g])>>24;return h},r})(),TT=(function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,o,a;for(t in o=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[t],e[t]=o[n];return e},r.prototype.glyphsFor=function(e){var t,n,o,a,c,u,f;for(o={},c=0,u=e.length;c<u;c++)o[a=e[c]]=this.font.glyf.glyphFor(a);for(a in t=[],o)(n=o[a])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(a in f=this.glyphsFor(t))n=f[a],o[a]=n;return o},r.prototype.encode=function(e,t){var n,o,a,c,u,f,h,g,b,A,v,F,E,N,j;for(o in n=cv.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),v={0:0},j=n.charMap)v[(f=j[o]).old]=f.new;for(F in A=n.maxGlyphID,c)F in v||(v[F]=A++);return g=(function($){var V,B;for(V in B={},$)B[$[V]]=V;return B})(v),b=Object.keys(g).sort(function($,V){return $-V}),E=(function(){var $,V,B;for(B=[],$=0,V=b.length;$<V;$++)u=b[$],B.push(g[u]);return B})(),a=this.font.glyf.encode(c,E,v),h=this.font.loca.encode(a.offsets,E),N={cmap:this.font.cmap.raw(),glyf:a.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(N["OS/2"]=this.font.os2.raw()),this.font.directory.encode(N)},r})();It.API.PDFObject=(function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,o,a,c;if(Array.isArray(t))return"["+(function(){var u,f,h;for(h=[],u=0,f=t.length;u<f;u++)n=t[u],h.push(e.convert(n));return h})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(o in a=["<<"],t)c=t[o],a.push("/"+o+" "+e.convert(c));return a.push(">>"),a.join(`
`)}return""+t},e})();const pn=r=>{const{calculatorName:e,inputs:t,results:n,necReferences:o,additionalInfo:a}=r,c=new It({orientation:"portrait",unit:"mm",format:"letter"}),u=c.internal.pageSize.getWidth(),f=c.internal.pageSize.getHeight(),h=15,g=u-h*2;let b=h;const A=X=>b+X>f-h?(c.addPage(),b=h,!0):!1,v=(X,se,U,C,w=10)=>{c.setFontSize(w);const O=c.splitTextToSize(X,C);return c.text(O,se,U),O.length*(w*.4)};c.setFillColor(37,99,235),c.rect(0,0,u,25,"F"),c.setTextColor(255,255,255),c.setFontSize(20),c.setFont("helvetica","bold"),c.text("Electrician Toolkit",h,12),c.setFontSize(12),c.setFont("helvetica","normal"),c.text(e,h,19),c.setFontSize(9);const F=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});c.text(F,u-h-c.getTextWidth(F),19),b=35,c.setTextColor(0,0,0),c.setFontSize(14),c.setFont("helvetica","bold"),c.text("Input Parameters",h,b),b+=7,c.setDrawColor(37,99,235),c.setLineWidth(.5),c.line(h,b,u-h,b),b+=5,c.setFontSize(10),c.setFont("helvetica","normal"),Object.entries(t).forEach(([X,se])=>{A(10);const U=X.replace(/([A-Z])/g," $1").trim(),C=U.charAt(0).toUpperCase()+U.slice(1);c.setFont("helvetica","bold");const w=`${C}:`;c.text(w,h+5,b);const O=c.getTextWidth(w);c.setFont("helvetica","normal"),c.text(String(se),h+5+O+3,b),b+=6}),b+=5,A(20),c.setFontSize(14),c.setFont("helvetica","bold"),c.text("Results",h,b),b+=7,c.setDrawColor(37,99,235),c.line(h,b,u-h,b),b+=5,c.setFontSize(10),c.setFont("helvetica","normal"),Object.entries(n).forEach(([X,se])=>{A(10);const U=X.replace(/([A-Z])/g," $1").trim(),C=U.charAt(0).toUpperCase()+U.slice(1);c.setFont("helvetica","bold");const w=`${C}:`;c.text(w,h+5,b);let O=String(se);typeof se=="boolean"&&(O=se?"Yes":"No");const P=c.getTextWidth(w);c.setFont("helvetica","normal"),c.text(O,h+5+P+3,b),b+=6}),b+=5,a&&Object.keys(a).length>0&&(A(20),c.setFontSize(14),c.setFont("helvetica","bold"),c.text("Calculation Details",h,b),b+=7,c.setDrawColor(37,99,235),c.line(h,b,u-h,b),b+=5,c.setFontSize(10),c.setFont("helvetica","normal"),Object.entries(a).forEach(([X,se])=>{A(10);const U=X.replace(/([A-Z])/g," $1").trim(),C=U.charAt(0).toUpperCase()+U.slice(1),w=v(`${C}: ${se}`,h+5,b,g-10,10);b+=w+2}),b+=5),o&&(A(20),c.setFontSize(14),c.setFont("helvetica","bold"),c.text("NEC Code References",h,b),b+=7,c.setDrawColor(37,99,235),c.line(h,b,u-h,b),b+=5,c.setFontSize(10),c.setFont("helvetica","normal"),(Array.isArray(o)?o:[o]).forEach(se=>{A(15);const U=v(`• ${se}`,h+5,b,g-10,10);b+=U+2}));const E=f-10;c.setFontSize(8),c.setTextColor(100,100,100),c.setFont("helvetica","italic");const N="This calculation is for reference only. Always verify with current NEC and local codes.",j=c.getTextWidth(N);c.text(N,(u-j)/2,E);const $=e.toLowerCase().replace(/\s+/g,"-"),V=new Date().toISOString().split("T")[0],B=`${$}-${V}.pdf`;c.save(B)},AT=be.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=be.useState(""),[o,a]=be.useState(""),[c,u]=be.useState(""),[f,h]=be.useState("12"),[g,b]=be.useState("single"),[A,v]=be.useState("copper"),[F,E]=be.useState("1.0"),N={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},j={14:4110,12:6530,10:10380,8:16510,6:26240,4:41740,3:52620,2:66360,1:83690,"1/0":105600,"2/0":133100,"3/0":167800,"4/0":211600,250:25e4,300:3e5,350:35e4,400:4e5,500:5e5,600:6e5,750:75e4,1e3:1e6},$={copper:{dc:10.8,ac:12.9},aluminum:{dc:17.4,ac:21.2}},B=(()=>{if(!t||!o||!c)return{drop:"0.00",percentage:"0.00",excessive:!1};const X=parseFloat(t),se=parseFloat(o),U=parseFloat(c),C=j[f],w=parseFloat(F),O=$[A].ac;let P;g==="single"?P=2*O*se*U*w/C:P=1.732*O*se*U*w/C;const S=P/X*100,z=S>3;return{drop:P.toFixed(2),percentage:S.toFixed(2),excessive:z}})();return be.useImperativeHandle(e,()=>({exportPDF:()=>{if(!t||!o||!c){alert("Please enter all required values before exporting to PDF");return}const X={calculatorName:"Voltage Drop Calculator",inputs:{systemType:g==="single"?"Single Phase":"Three Phase",conductorMaterial:A.charAt(0).toUpperCase()+A.slice(1),systemVoltage:`${t} V`,loadCurrent:`${o} A`,oneWayDistance:`${c} ft`,wireSize:f.includes("/")?`${f} AWG`:`${f} ${parseInt(f)<=4?"AWG":"kcmil"}`,powerFactor:F},results:{voltageDrop:`${B.drop} V`,percentageDrop:`${B.percentage}%`,necCompliant:B.excessive?"NO - Exceeds 3% limit":"YES - Within 3% limit",status:B.excessive?"⚠️ WARNING: Exceeds NEC 3% Limit":"✓ Within NEC limits"},additionalInfo:{formula:g==="single"?"2 × K × I × L × PF ÷ CM":"1.732 × K × I × L × PF ÷ CM",kConstant:`${$[A].ac} (${A} AC)`,circularMils:j[f].toLocaleString(),powerFactorUsed:F,systemConfiguration:g==="single"?"Single phase":"Three phase"},necReferences:["NEC Guidelines: Branch circuits - 3% max","Feeders - 3% max","Combined branch circuit and feeder - 5% max","Note: Excessive voltage drop can cause equipment malfunction and reduced efficiency"]};pn(X)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:N.cardBg,border:`1px solid ${N.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:N.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${N.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:N.labelText,marginBottom:"0.5rem"},children:"System Type"}),i.jsxs("select",{value:g,onChange:X=>b(X.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${N.inputBorder}`,borderRadius:"8px",backgroundColor:N.inputBg,color:N.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:N.labelText,marginBottom:"0.5rem"},children:"Conductor Material"}),i.jsxs("select",{value:A,onChange:X=>v(X.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${N.inputBorder}`,borderRadius:"8px",backgroundColor:N.inputBg,color:N.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"copper",children:"Copper"}),i.jsx("option",{value:"aluminum",children:"Aluminum"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:N.labelText,marginBottom:"0.5rem"},children:"System Voltage (V)"}),i.jsx("input",{type:"number",value:t,onChange:X=>n(X.target.value),placeholder:"120, 240, 480",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${N.inputBorder}`,borderRadius:"8px",backgroundColor:N.inputBg,color:N.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:N.labelText,marginBottom:"0.5rem"},children:"Load Current (Amps)"}),i.jsx("input",{type:"number",value:o,onChange:X=>a(X.target.value),placeholder:"15, 20, 30",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${N.inputBorder}`,borderRadius:"8px",backgroundColor:N.inputBg,color:N.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:N.labelText,marginBottom:"0.5rem"},children:"One-Way Distance (feet)"}),i.jsx("input",{type:"number",value:c,onChange:X=>u(X.target.value),placeholder:"100, 200, 500",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${N.inputBorder}`,borderRadius:"8px",backgroundColor:N.inputBg,color:N.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:N.labelText,marginBottom:"0.5rem"},children:"Wire Size (AWG/kcmil)"}),i.jsxs("select",{value:f,onChange:X=>h(X.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${N.inputBorder}`,borderRadius:"8px",backgroundColor:N.inputBg,color:N.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"14",children:"14 AWG"}),i.jsx("option",{value:"12",children:"12 AWG"}),i.jsx("option",{value:"10",children:"10 AWG"}),i.jsx("option",{value:"8",children:"8 AWG"}),i.jsx("option",{value:"6",children:"6 AWG"}),i.jsx("option",{value:"4",children:"4 AWG"}),i.jsx("option",{value:"3",children:"3 AWG"}),i.jsx("option",{value:"2",children:"2 AWG"}),i.jsx("option",{value:"1",children:"1 AWG"}),i.jsx("option",{value:"1/0",children:"1/0 AWG"}),i.jsx("option",{value:"2/0",children:"2/0 AWG"}),i.jsx("option",{value:"3/0",children:"3/0 AWG"}),i.jsx("option",{value:"4/0",children:"4/0 AWG"}),i.jsx("option",{value:"250",children:"250 kcmil"}),i.jsx("option",{value:"300",children:"300 kcmil"}),i.jsx("option",{value:"350",children:"350 kcmil"}),i.jsx("option",{value:"400",children:"400 kcmil"}),i.jsx("option",{value:"500",children:"500 kcmil"}),i.jsx("option",{value:"600",children:"600 kcmil"}),i.jsx("option",{value:"750",children:"750 kcmil"}),i.jsx("option",{value:"1000",children:"1000 kcmil"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:N.labelText,marginBottom:"0.5rem"},children:"Power Factor (AC loads)"}),i.jsxs("select",{value:F,onChange:X=>E(X.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${N.inputBorder}`,borderRadius:"8px",backgroundColor:N.inputBg,color:N.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"1.0",children:"1.0 (Resistive loads)"}),i.jsx("option",{value:"0.9",children:"0.9 (Most motors)"}),i.jsx("option",{value:"0.85",children:"0.85 (Typical mixed load)"}),i.jsx("option",{value:"0.8",children:"0.8 (Poor power factor)"})]})]})]})]}),t&&o&&c&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:N.cardBg,border:`1px solid ${N.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:N.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:N.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:N.labelText,marginBottom:"0.25rem"},children:"Voltage Drop"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:N.cardText},children:B.drop}),i.jsx("div",{style:{fontSize:"0.75rem",color:N.labelText,marginTop:"0.25rem"},children:"Volts"})]}),i.jsxs("div",{style:{background:B.excessive?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:B.excessive?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Percentage Drop"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:B.excessive?"#dc2626":"#1e40af"},children:[B.percentage,"%"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:B.excessive?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:"Max: 3%"})]})]}),i.jsxs("div",{style:{background:N.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${N.cardBorder}`},children:[i.jsx("strong",{style:{color:N.cardText,display:"block",marginBottom:"0.5rem",fontSize:"0.875rem"},children:"Calculation Details:"}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:N.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Formula: ",g==="single"?"2":"1.732"," × K × I × L × PF ÷ CM"]}),i.jsxs("div",{children:["K constant (",A,"): ",$[A].ac]}),i.jsxs("div",{children:["Circular mils: ",j[f].toLocaleString()]}),i.jsxs("div",{children:["Power factor: ",F]}),i.jsxs("div",{children:["System: ",g==="single"?"Single":"Three"," phase"]})]})]})]}),B.excessive?i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Yc,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem",fontSize:"0.9375rem"},children:"WARNING: Exceeds NEC 3% Limit"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Consider using larger wire size to reduce voltage drop. Excessive voltage drop can cause equipment malfunction and reduced efficiency."})]})]})}):i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Voltage drop is within NEC limits"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"This circuit meets the NEC recommended 3% maximum voltage drop for branch circuits."})]})]})})]}),i.jsxs("div",{style:{background:N.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${N.cardBorder}`,fontSize:"0.8125rem",color:N.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:N.cardText},children:"NEC Guidelines:"}),"Branch circuits: 3% max • Feeders: 3% max • Combined: 5% max"]})]})}),CT=()=>{};var w2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let o=r.charCodeAt(n);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},kT=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const o=r[t++];if(o<128)e[n++]=String.fromCharCode(o);else if(o>191&&o<224){const a=r[t++];e[n++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=r[t++],c=r[t++],u=r[t++],f=((o&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(f>>10)),e[n++]=String.fromCharCode(56320+(f&1023))}else{const a=r[t++],c=r[t++];e[n++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},hv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let o=0;o<r.length;o+=3){const a=r[o],c=o+1<r.length,u=c?r[o+1]:0,f=o+2<r.length,h=f?r[o+2]:0,g=a>>2,b=(a&3)<<4|u>>4;let A=(u&15)<<2|h>>6,v=h&63;f||(v=64,c||(A=64)),n.push(t[g],t[b],t[A],t[v])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(dv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):kT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let o=0;o<r.length;){const a=t[r.charAt(o++)],u=o<r.length?t[r.charAt(o)]:0;++o;const h=o<r.length?t[r.charAt(o)]:64;++o;const b=o<r.length?t[r.charAt(o)]:64;if(++o,a==null||u==null||h==null||b==null)throw new jT;const A=a<<2|u>>4;if(n.push(A),h!==64){const v=u<<4&240|h>>2;if(n.push(v),b!==64){const F=h<<6&192|b;n.push(F)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class jT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ET=function(r){const e=dv(r);return hv.encodeByteArray(e,!0)},$f=function(r){return ET(r).replace(/\./g,"")},fv=function(r){try{return hv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=()=>IT().__FIREBASE_DEFAULTS__,PT=()=>{if(typeof process>"u"||typeof w2>"u")return;const r=w2.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},NT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&fv(r[1]);return e&&JSON.parse(e)},dp=()=>{try{return CT()||RT()||PT()||NT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},pv=r=>{var e,t;return(t=(e=dp())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},LT=r=>{const e=pv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},mv=()=>{var r;return(r=dp())==null?void 0:r.config},gv=r=>{var e;return(e=dp())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",o=r.iat||0,a=r.sub||r.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...r};return[$f(JSON.stringify(t)),$f(JSON.stringify(c)),""].join(".")}const Wd={};function zT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Wd))Wd[e]?r.emulator.push(e):r.prod.push(e);return r}function OT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let S2=!1;function xv(r,e){if(typeof window>"u"||typeof document>"u"||!ed(window.location.host)||Wd[r]===e||Wd[r]||S2)return;Wd[r]=e;function t(A){return`__firebase__banner__${A}`}const n="__firebase__banner",a=zT().prod.length>0;function c(){const A=document.getElementById(n);A&&A.remove()}function u(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function f(A,v){A.setAttribute("width","24"),A.setAttribute("id",v),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function h(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{S2=!0,c()},A}function g(A,v){A.setAttribute("id",v),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function b(){const A=OT(n),v=t("text"),F=document.getElementById(v)||document.createElement("span"),E=t("learnmore"),N=document.getElementById(E)||document.createElement("a"),j=t("preprendIcon"),$=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const V=A.element;u(V),g(N,E);const B=h();f($,j),V.append($,F,N,B),document.body.appendChild(V)}a?(F.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ao())}function MT(){var e;const r=(e=dp())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function $T(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UT(){const r=ao();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function qT(){return!MT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HT(){try{return typeof indexedDB=="object"}catch{return!1}}function GT(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(n);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="FirebaseError";class ml extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=KT,Object.setPrototypeOf(this,ml.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ch.prototype.create)}}class ch{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?YT(a,n):"Error",u=`${this.serviceName}: ${c} (${o}).`;return new ml(o,u,n)}}function YT(r,e){return r.replace(JT,(t,n)=>{const o=e[n];return o!=null?String(o):`<${n}?>`})}const JT=/\{\$([^}]+)}/g;function QT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Wc(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const o of t){if(!n.includes(o))return!1;const a=r[o],c=e[o];if(_2(a)&&_2(c)){if(!Wc(a,c))return!1}else if(a!==c)return!1}for(const o of n)if(!t.includes(o))return!1;return!0}function _2(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Bd(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[o,a]=n.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Fd(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function XT(r,e){const t=new ZT(r,e);return t.subscribe.bind(t)}class ZT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let o;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");e6(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:n},o.next===void 0&&(o.next=Um),o.error===void 0&&(o.error=Um),o.complete===void 0&&(o.complete=Um);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function e6(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Um(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(r){return r&&r._delegate?r._delegate:r}class $c{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new BT;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&n.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(n)return null;throw o}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(n6(e))try{this.getOrInitializeService({instanceIdentifier:Lc})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});n.resolve(a)}catch{}}}}clearInstance(e=Lc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Lc){return this.instances.has(e)}getOptions(e=Lc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);n===u&&c.resolve(o)}return o}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(n)??new Set;o.add(e),this.onInitCallbacks.set(n,o);const a=this.instances.get(n);return a&&e(a,n),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const o of n)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:r6(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Lc){return this.component?this.component.multipleInstances?e:Lc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function r6(r){return r===Lc?void 0:r}function n6(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new t6(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mr;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(mr||(mr={}));const o6={debug:mr.DEBUG,verbose:mr.VERBOSE,info:mr.INFO,warn:mr.WARN,error:mr.ERROR,silent:mr.SILENT},s6=mr.INFO,a6={[mr.DEBUG]:"log",[mr.VERBOSE]:"log",[mr.INFO]:"info",[mr.WARN]:"warn",[mr.ERROR]:"error"},l6=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),o=a6[e];if(o)console[o](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Q0{constructor(e){this.name=e,this._logLevel=s6,this._logHandler=l6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?o6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mr.DEBUG,...e),this._logHandler(this,mr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mr.VERBOSE,...e),this._logHandler(this,mr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mr.INFO,...e),this._logHandler(this,mr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mr.WARN,...e),this._logHandler(this,mr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mr.ERROR,...e),this._logHandler(this,mr.ERROR,...e)}}const c6=(r,e)=>e.some(t=>r instanceof t);let T2,A2;function u6(){return T2||(T2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d6(){return A2||(A2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vv=new WeakMap,m0=new WeakMap,bv=new WeakMap,qm=new WeakMap,X0=new WeakMap;function h6(r){const e=new Promise((t,n)=>{const o=()=>{r.removeEventListener("success",a),r.removeEventListener("error",c)},a=()=>{t(Jl(r.result)),o()},c=()=>{n(r.error),o()};r.addEventListener("success",a),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&vv.set(t,r)}).catch(()=>{}),X0.set(e,r),e}function f6(r){if(m0.has(r))return;const e=new Promise((t,n)=>{const o=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",c),r.removeEventListener("abort",c)},a=()=>{t(),o()},c=()=>{n(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",a),r.addEventListener("error",c),r.addEventListener("abort",c)});m0.set(r,e)}let g0={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return m0.get(r);if(e==="objectStoreNames")return r.objectStoreNames||bv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Jl(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function p6(r){g0=r(g0)}function m6(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Hm(this),e,...t);return bv.set(n,e.sort?e.sort():[e]),Jl(n)}:d6().includes(r)?function(...e){return r.apply(Hm(this),e),Jl(vv.get(this))}:function(...e){return Jl(r.apply(Hm(this),e))}}function g6(r){return typeof r=="function"?m6(r):(r instanceof IDBTransaction&&f6(r),c6(r,u6())?new Proxy(r,g0):r)}function Jl(r){if(r instanceof IDBRequest)return h6(r);if(qm.has(r))return qm.get(r);const e=g6(r);return e!==r&&(qm.set(r,e),X0.set(e,r)),e}const Hm=r=>X0.get(r);function y6(r,e,{blocked:t,upgrade:n,blocking:o,terminated:a}={}){const c=indexedDB.open(r,e),u=Jl(c);return n&&c.addEventListener("upgradeneeded",f=>{n(Jl(c.result),f.oldVersion,f.newVersion,Jl(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),u.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const x6=["get","getKey","getAll","getAllKeys","count"],v6=["put","add","delete","clear"],Gm=new Map;function C2(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Gm.get(e))return Gm.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,o=v6.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(o||x6.includes(t)))return;const a=async function(c,...u){const f=this.transaction(c,o?"readwrite":"readonly");let h=f.store;return n&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),o&&f.done]))[0]};return Gm.set(e,a),a}p6(r=>({...r,get:(e,t,n)=>C2(e,t)||r.get(e,t,n),has:(e,t)=>!!C2(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(w6(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function w6(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const y0="@firebase/app",k2="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=new Q0("@firebase/app"),S6="@firebase/app-compat",_6="@firebase/analytics-compat",T6="@firebase/analytics",A6="@firebase/app-check-compat",C6="@firebase/app-check",k6="@firebase/auth",j6="@firebase/auth-compat",E6="@firebase/database",I6="@firebase/data-connect",R6="@firebase/database-compat",P6="@firebase/functions",N6="@firebase/functions-compat",L6="@firebase/installations",B6="@firebase/installations-compat",F6="@firebase/messaging",z6="@firebase/messaging-compat",O6="@firebase/performance",V6="@firebase/performance-compat",M6="@firebase/remote-config",D6="@firebase/remote-config-compat",W6="@firebase/storage",$6="@firebase/storage-compat",U6="@firebase/firestore",q6="@firebase/ai",H6="@firebase/firestore-compat",G6="firebase",K6="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="[DEFAULT]",Y6={[y0]:"fire-core",[S6]:"fire-core-compat",[T6]:"fire-analytics",[_6]:"fire-analytics-compat",[C6]:"fire-app-check",[A6]:"fire-app-check-compat",[k6]:"fire-auth",[j6]:"fire-auth-compat",[E6]:"fire-rtdb",[I6]:"fire-data-connect",[R6]:"fire-rtdb-compat",[P6]:"fire-fn",[N6]:"fire-fn-compat",[L6]:"fire-iid",[B6]:"fire-iid-compat",[F6]:"fire-fcm",[z6]:"fire-fcm-compat",[O6]:"fire-perf",[V6]:"fire-perf-compat",[M6]:"fire-rc",[D6]:"fire-rc-compat",[W6]:"fire-gcs",[$6]:"fire-gcs-compat",[U6]:"fire-fst",[H6]:"fire-fst-compat",[q6]:"fire-vertex","fire-js":"fire-js",[G6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new Map,J6=new Map,v0=new Map;function j2(r,e){try{r.container.addComponent(e)}catch(t){dl.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Hu(r){const e=r.name;if(v0.has(e))return dl.debug(`There were multiple attempts to register component ${e}.`),!1;v0.set(e,r);for(const t of Uf.values())j2(t,r);for(const t of J6.values())j2(t,r);return!0}function Z0(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function js(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ql=new ch("app","Firebase",Q6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new $c("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ql.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=K6;function wv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:x0,automaticDataCollectionEnabled:!0,...e},o=n.name;if(typeof o!="string"||!o)throw Ql.create("bad-app-name",{appName:String(o)});if(t||(t=mv()),!t)throw Ql.create("no-options");const a=Uf.get(o);if(a){if(Wc(t,a.options)&&Wc(n,a.config))return a;throw Ql.create("duplicate-app",{appName:o})}const c=new i6(o);for(const f of v0.values())c.addComponent(f);const u=new X6(t,n,c);return Uf.set(o,u),u}function Sv(r=x0){const e=Uf.get(r);if(!e&&r===x0&&mv())return wv();if(!e)throw Ql.create("no-app",{appName:r});return e}function Xl(r,e,t){let n=Y6[r]??r;t&&(n+=`-${t}`);const o=n.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const c=[`Unable to register library "${n}" with version "${e}":`];o&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dl.warn(c.join(" "));return}Hu(new $c(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6="firebase-heartbeat-database",eA=1,Qd="firebase-heartbeat-store";let Km=null;function _v(){return Km||(Km=y6(Z6,eA,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Qd)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ql.create("idb-open",{originalErrorMessage:r.message})})),Km}async function tA(r){try{const t=(await _v()).transaction(Qd),n=await t.objectStore(Qd).get(Tv(r));return await t.done,n}catch(e){if(e instanceof ml)dl.warn(e.message);else{const t=Ql.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dl.warn(t.message)}}}async function E2(r,e){try{const n=(await _v()).transaction(Qd,"readwrite");await n.objectStore(Qd).put(e,Tv(r)),await n.done}catch(t){if(t instanceof ml)dl.warn(t.message);else{const n=Ql.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});dl.warn(n.message)}}}function Tv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=1024,nA=30;class iA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sA(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=I2();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>nA){const c=aA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){dl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=I2(),{heartbeatsToSend:n,unsentEntries:o}=oA(this._heartbeatsCache.heartbeats),a=$f(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return dl.warn(t),""}}}function I2(){return new Date().toISOString().substring(0,10)}function oA(r,e=rA){const t=[];let n=r.slice();for(const o of r){const a=t.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),R2(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),R2(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class sA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HT()?GT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await tA(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return E2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return E2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function R2(r){return $f(JSON.stringify({version:2,heartbeats:r})).length}function aA(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(r){Hu(new $c("platform-logger",e=>new b6(e),"PRIVATE")),Hu(new $c("heartbeat",e=>new iA(e),"PRIVATE")),Xl(y0,k2,r),Xl(y0,k2,"esm2020"),Xl("fire-js","")}lA("");var P2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zl,Av;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(U,C){function w(){}w.prototype=C.prototype,U.F=C.prototype,U.prototype=new w,U.prototype.constructor=U,U.D=function(O,P,S){for(var z=Array(arguments.length-2),W=2;W<arguments.length;W++)z[W-2]=arguments[W];return C.prototype[P].apply(O,z)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(U,C,w){w||(w=0);const O=Array(16);if(typeof C=="string")for(var P=0;P<16;++P)O[P]=C.charCodeAt(w++)|C.charCodeAt(w++)<<8|C.charCodeAt(w++)<<16|C.charCodeAt(w++)<<24;else for(P=0;P<16;++P)O[P]=C[w++]|C[w++]<<8|C[w++]<<16|C[w++]<<24;C=U.g[0],w=U.g[1],P=U.g[2];let S=U.g[3],z;z=C+(S^w&(P^S))+O[0]+3614090360&4294967295,C=w+(z<<7&4294967295|z>>>25),z=S+(P^C&(w^P))+O[1]+3905402710&4294967295,S=C+(z<<12&4294967295|z>>>20),z=P+(w^S&(C^w))+O[2]+606105819&4294967295,P=S+(z<<17&4294967295|z>>>15),z=w+(C^P&(S^C))+O[3]+3250441966&4294967295,w=P+(z<<22&4294967295|z>>>10),z=C+(S^w&(P^S))+O[4]+4118548399&4294967295,C=w+(z<<7&4294967295|z>>>25),z=S+(P^C&(w^P))+O[5]+1200080426&4294967295,S=C+(z<<12&4294967295|z>>>20),z=P+(w^S&(C^w))+O[6]+2821735955&4294967295,P=S+(z<<17&4294967295|z>>>15),z=w+(C^P&(S^C))+O[7]+4249261313&4294967295,w=P+(z<<22&4294967295|z>>>10),z=C+(S^w&(P^S))+O[8]+1770035416&4294967295,C=w+(z<<7&4294967295|z>>>25),z=S+(P^C&(w^P))+O[9]+2336552879&4294967295,S=C+(z<<12&4294967295|z>>>20),z=P+(w^S&(C^w))+O[10]+4294925233&4294967295,P=S+(z<<17&4294967295|z>>>15),z=w+(C^P&(S^C))+O[11]+2304563134&4294967295,w=P+(z<<22&4294967295|z>>>10),z=C+(S^w&(P^S))+O[12]+1804603682&4294967295,C=w+(z<<7&4294967295|z>>>25),z=S+(P^C&(w^P))+O[13]+4254626195&4294967295,S=C+(z<<12&4294967295|z>>>20),z=P+(w^S&(C^w))+O[14]+2792965006&4294967295,P=S+(z<<17&4294967295|z>>>15),z=w+(C^P&(S^C))+O[15]+1236535329&4294967295,w=P+(z<<22&4294967295|z>>>10),z=C+(P^S&(w^P))+O[1]+4129170786&4294967295,C=w+(z<<5&4294967295|z>>>27),z=S+(w^P&(C^w))+O[6]+3225465664&4294967295,S=C+(z<<9&4294967295|z>>>23),z=P+(C^w&(S^C))+O[11]+643717713&4294967295,P=S+(z<<14&4294967295|z>>>18),z=w+(S^C&(P^S))+O[0]+3921069994&4294967295,w=P+(z<<20&4294967295|z>>>12),z=C+(P^S&(w^P))+O[5]+3593408605&4294967295,C=w+(z<<5&4294967295|z>>>27),z=S+(w^P&(C^w))+O[10]+38016083&4294967295,S=C+(z<<9&4294967295|z>>>23),z=P+(C^w&(S^C))+O[15]+3634488961&4294967295,P=S+(z<<14&4294967295|z>>>18),z=w+(S^C&(P^S))+O[4]+3889429448&4294967295,w=P+(z<<20&4294967295|z>>>12),z=C+(P^S&(w^P))+O[9]+568446438&4294967295,C=w+(z<<5&4294967295|z>>>27),z=S+(w^P&(C^w))+O[14]+3275163606&4294967295,S=C+(z<<9&4294967295|z>>>23),z=P+(C^w&(S^C))+O[3]+4107603335&4294967295,P=S+(z<<14&4294967295|z>>>18),z=w+(S^C&(P^S))+O[8]+1163531501&4294967295,w=P+(z<<20&4294967295|z>>>12),z=C+(P^S&(w^P))+O[13]+2850285829&4294967295,C=w+(z<<5&4294967295|z>>>27),z=S+(w^P&(C^w))+O[2]+4243563512&4294967295,S=C+(z<<9&4294967295|z>>>23),z=P+(C^w&(S^C))+O[7]+1735328473&4294967295,P=S+(z<<14&4294967295|z>>>18),z=w+(S^C&(P^S))+O[12]+2368359562&4294967295,w=P+(z<<20&4294967295|z>>>12),z=C+(w^P^S)+O[5]+4294588738&4294967295,C=w+(z<<4&4294967295|z>>>28),z=S+(C^w^P)+O[8]+2272392833&4294967295,S=C+(z<<11&4294967295|z>>>21),z=P+(S^C^w)+O[11]+1839030562&4294967295,P=S+(z<<16&4294967295|z>>>16),z=w+(P^S^C)+O[14]+4259657740&4294967295,w=P+(z<<23&4294967295|z>>>9),z=C+(w^P^S)+O[1]+2763975236&4294967295,C=w+(z<<4&4294967295|z>>>28),z=S+(C^w^P)+O[4]+1272893353&4294967295,S=C+(z<<11&4294967295|z>>>21),z=P+(S^C^w)+O[7]+4139469664&4294967295,P=S+(z<<16&4294967295|z>>>16),z=w+(P^S^C)+O[10]+3200236656&4294967295,w=P+(z<<23&4294967295|z>>>9),z=C+(w^P^S)+O[13]+681279174&4294967295,C=w+(z<<4&4294967295|z>>>28),z=S+(C^w^P)+O[0]+3936430074&4294967295,S=C+(z<<11&4294967295|z>>>21),z=P+(S^C^w)+O[3]+3572445317&4294967295,P=S+(z<<16&4294967295|z>>>16),z=w+(P^S^C)+O[6]+76029189&4294967295,w=P+(z<<23&4294967295|z>>>9),z=C+(w^P^S)+O[9]+3654602809&4294967295,C=w+(z<<4&4294967295|z>>>28),z=S+(C^w^P)+O[12]+3873151461&4294967295,S=C+(z<<11&4294967295|z>>>21),z=P+(S^C^w)+O[15]+530742520&4294967295,P=S+(z<<16&4294967295|z>>>16),z=w+(P^S^C)+O[2]+3299628645&4294967295,w=P+(z<<23&4294967295|z>>>9),z=C+(P^(w|~S))+O[0]+4096336452&4294967295,C=w+(z<<6&4294967295|z>>>26),z=S+(w^(C|~P))+O[7]+1126891415&4294967295,S=C+(z<<10&4294967295|z>>>22),z=P+(C^(S|~w))+O[14]+2878612391&4294967295,P=S+(z<<15&4294967295|z>>>17),z=w+(S^(P|~C))+O[5]+4237533241&4294967295,w=P+(z<<21&4294967295|z>>>11),z=C+(P^(w|~S))+O[12]+1700485571&4294967295,C=w+(z<<6&4294967295|z>>>26),z=S+(w^(C|~P))+O[3]+2399980690&4294967295,S=C+(z<<10&4294967295|z>>>22),z=P+(C^(S|~w))+O[10]+4293915773&4294967295,P=S+(z<<15&4294967295|z>>>17),z=w+(S^(P|~C))+O[1]+2240044497&4294967295,w=P+(z<<21&4294967295|z>>>11),z=C+(P^(w|~S))+O[8]+1873313359&4294967295,C=w+(z<<6&4294967295|z>>>26),z=S+(w^(C|~P))+O[15]+4264355552&4294967295,S=C+(z<<10&4294967295|z>>>22),z=P+(C^(S|~w))+O[6]+2734768916&4294967295,P=S+(z<<15&4294967295|z>>>17),z=w+(S^(P|~C))+O[13]+1309151649&4294967295,w=P+(z<<21&4294967295|z>>>11),z=C+(P^(w|~S))+O[4]+4149444226&4294967295,C=w+(z<<6&4294967295|z>>>26),z=S+(w^(C|~P))+O[11]+3174756917&4294967295,S=C+(z<<10&4294967295|z>>>22),z=P+(C^(S|~w))+O[2]+718787259&4294967295,P=S+(z<<15&4294967295|z>>>17),z=w+(S^(P|~C))+O[9]+3951481745&4294967295,U.g[0]=U.g[0]+C&4294967295,U.g[1]=U.g[1]+(P+(z<<21&4294967295|z>>>11))&4294967295,U.g[2]=U.g[2]+P&4294967295,U.g[3]=U.g[3]+S&4294967295}n.prototype.v=function(U,C){C===void 0&&(C=U.length);const w=C-this.blockSize,O=this.C;let P=this.h,S=0;for(;S<C;){if(P==0)for(;S<=w;)o(this,U,S),S+=this.blockSize;if(typeof U=="string"){for(;S<C;)if(O[P++]=U.charCodeAt(S++),P==this.blockSize){o(this,O),P=0;break}}else for(;S<C;)if(O[P++]=U[S++],P==this.blockSize){o(this,O),P=0;break}}this.h=P,this.o+=C},n.prototype.A=function(){var U=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);U[0]=128;for(var C=1;C<U.length-8;++C)U[C]=0;C=this.o*8;for(var w=U.length-8;w<U.length;++w)U[w]=C&255,C/=256;for(this.v(U),U=Array(16),C=0,w=0;w<4;++w)for(let O=0;O<32;O+=8)U[C++]=this.g[w]>>>O&255;return U};function a(U,C){var w=u;return Object.prototype.hasOwnProperty.call(w,U)?w[U]:w[U]=C(U)}function c(U,C){this.h=C;const w=[];let O=!0;for(let P=U.length-1;P>=0;P--){const S=U[P]|0;O&&S==C||(w[P]=S,O=!1)}this.g=w}var u={};function f(U){return-128<=U&&U<128?a(U,function(C){return new c([C|0],C<0?-1:0)}):new c([U|0],U<0?-1:0)}function h(U){if(isNaN(U)||!isFinite(U))return b;if(U<0)return N(h(-U));const C=[];let w=1;for(let O=0;U>=w;O++)C[O]=U/w|0,w*=4294967296;return new c(C,0)}function g(U,C){if(U.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(U.charAt(0)=="-")return N(g(U.substring(1),C));if(U.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=h(Math.pow(C,8));let O=b;for(let S=0;S<U.length;S+=8){var P=Math.min(8,U.length-S);const z=parseInt(U.substring(S,S+P),C);P<8?(P=h(Math.pow(C,P)),O=O.j(P).add(h(z))):(O=O.j(w),O=O.add(h(z)))}return O}var b=f(0),A=f(1),v=f(16777216);r=c.prototype,r.m=function(){if(E(this))return-N(this).m();let U=0,C=1;for(let w=0;w<this.g.length;w++){const O=this.i(w);U+=(O>=0?O:4294967296+O)*C,C*=4294967296}return U},r.toString=function(U){if(U=U||10,U<2||36<U)throw Error("radix out of range: "+U);if(F(this))return"0";if(E(this))return"-"+N(this).toString(U);const C=h(Math.pow(U,6));var w=this;let O="";for(;;){const P=B(w,C).g;w=j(w,P.j(C));let S=((w.g.length>0?w.g[0]:w.h)>>>0).toString(U);if(w=P,F(w))return S+O;for(;S.length<6;)S="0"+S;O=S+O}},r.i=function(U){return U<0?0:U<this.g.length?this.g[U]:this.h};function F(U){if(U.h!=0)return!1;for(let C=0;C<U.g.length;C++)if(U.g[C]!=0)return!1;return!0}function E(U){return U.h==-1}r.l=function(U){return U=j(this,U),E(U)?-1:F(U)?0:1};function N(U){const C=U.g.length,w=[];for(let O=0;O<C;O++)w[O]=~U.g[O];return new c(w,~U.h).add(A)}r.abs=function(){return E(this)?N(this):this},r.add=function(U){const C=Math.max(this.g.length,U.g.length),w=[];let O=0;for(let P=0;P<=C;P++){let S=O+(this.i(P)&65535)+(U.i(P)&65535),z=(S>>>16)+(this.i(P)>>>16)+(U.i(P)>>>16);O=z>>>16,S&=65535,z&=65535,w[P]=z<<16|S}return new c(w,w[w.length-1]&-2147483648?-1:0)};function j(U,C){return U.add(N(C))}r.j=function(U){if(F(this)||F(U))return b;if(E(this))return E(U)?N(this).j(N(U)):N(N(this).j(U));if(E(U))return N(this.j(N(U)));if(this.l(v)<0&&U.l(v)<0)return h(this.m()*U.m());const C=this.g.length+U.g.length,w=[];for(var O=0;O<2*C;O++)w[O]=0;for(O=0;O<this.g.length;O++)for(let P=0;P<U.g.length;P++){const S=this.i(O)>>>16,z=this.i(O)&65535,W=U.i(P)>>>16,le=U.i(P)&65535;w[2*O+2*P]+=z*le,$(w,2*O+2*P),w[2*O+2*P+1]+=S*le,$(w,2*O+2*P+1),w[2*O+2*P+1]+=z*W,$(w,2*O+2*P+1),w[2*O+2*P+2]+=S*W,$(w,2*O+2*P+2)}for(U=0;U<C;U++)w[U]=w[2*U+1]<<16|w[2*U];for(U=C;U<2*C;U++)w[U]=0;return new c(w,0)};function $(U,C){for(;(U[C]&65535)!=U[C];)U[C+1]+=U[C]>>>16,U[C]&=65535,C++}function V(U,C){this.g=U,this.h=C}function B(U,C){if(F(C))throw Error("division by zero");if(F(U))return new V(b,b);if(E(U))return C=B(N(U),C),new V(N(C.g),N(C.h));if(E(C))return C=B(U,N(C)),new V(N(C.g),C.h);if(U.g.length>30){if(E(U)||E(C))throw Error("slowDivide_ only works with positive integers.");for(var w=A,O=C;O.l(U)<=0;)w=X(w),O=X(O);var P=se(w,1),S=se(O,1);for(O=se(O,2),w=se(w,2);!F(O);){var z=S.add(O);z.l(U)<=0&&(P=P.add(w),S=z),O=se(O,1),w=se(w,1)}return C=j(U,P.j(C)),new V(P,C)}for(P=b;U.l(C)>=0;){for(w=Math.max(1,Math.floor(U.m()/C.m())),O=Math.ceil(Math.log(w)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),S=h(w),z=S.j(C);E(z)||z.l(U)>0;)w-=O,S=h(w),z=S.j(C);F(S)&&(S=A),P=P.add(S),U=j(U,z)}return new V(P,U)}r.B=function(U){return B(this,U).h},r.and=function(U){const C=Math.max(this.g.length,U.g.length),w=[];for(let O=0;O<C;O++)w[O]=this.i(O)&U.i(O);return new c(w,this.h&U.h)},r.or=function(U){const C=Math.max(this.g.length,U.g.length),w=[];for(let O=0;O<C;O++)w[O]=this.i(O)|U.i(O);return new c(w,this.h|U.h)},r.xor=function(U){const C=Math.max(this.g.length,U.g.length),w=[];for(let O=0;O<C;O++)w[O]=this.i(O)^U.i(O);return new c(w,this.h^U.h)};function X(U){const C=U.g.length+1,w=[];for(let O=0;O<C;O++)w[O]=U.i(O)<<1|U.i(O-1)>>>31;return new c(w,U.h)}function se(U,C){const w=C>>5;C%=32;const O=U.g.length-w,P=[];for(let S=0;S<O;S++)P[S]=C>0?U.i(S+w)>>>C|U.i(S+w+1)<<32-C:U.i(S+w);return new c(P,U.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,Av=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=h,c.fromString=g,Zl=c}).apply(typeof P2<"u"?P2:typeof self<"u"?self:typeof window<"u"?window:{});var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cv,zd,kv,jf,b0,jv,Ev,Iv;(function(){var r,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof pf=="object"&&pf];for(var I=0;I<m.length;++I){var M=m[I];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var n=t(this);function o(m,I){if(I)e:{var M=n;m=m.split(".");for(var ee=0;ee<m.length-1;ee++){var Ie=m[ee];if(!(Ie in M))break e;M=M[Ie]}m=m[m.length-1],ee=M[m],I=I(ee),I!=ee&&I!=null&&e(M,m,{configurable:!0,writable:!0,value:I})}}o("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(m){return m||function(I){var M=[],ee;for(ee in I)Object.prototype.hasOwnProperty.call(I,ee)&&M.push([ee,I[ee]]);return M}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(m){var I=typeof m;return I=="object"&&m!=null||I=="function"}function f(m,I,M){return m.call.apply(m.bind,arguments)}function h(m,I,M){return h=f,h.apply(null,arguments)}function g(m,I){var M=Array.prototype.slice.call(arguments,1);return function(){var ee=M.slice();return ee.push.apply(ee,arguments),m.apply(this,ee)}}function b(m,I){function M(){}M.prototype=I.prototype,m.Z=I.prototype,m.prototype=new M,m.prototype.constructor=m,m.Ob=function(ee,Ie,Be){for(var ot=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)ot[Dt-2]=arguments[Dt];return I.prototype[Ie].apply(ee,ot)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function v(m){const I=m.length;if(I>0){const M=Array(I);for(let ee=0;ee<I;ee++)M[ee]=m[ee];return M}return[]}function F(m,I){for(let ee=1;ee<arguments.length;ee++){const Ie=arguments[ee];var M=typeof Ie;if(M=M!="object"?M:Ie?Array.isArray(Ie)?"array":M:"null",M=="array"||M=="object"&&typeof Ie.length=="number"){M=m.length||0;const Be=Ie.length||0;m.length=M+Be;for(let ot=0;ot<Be;ot++)m[M+ot]=Ie[ot]}else m.push(Ie)}}class E{constructor(I,M){this.i=I,this.j=M,this.h=0,this.g=null}get(){let I;return this.h>0?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function N(m){c.setTimeout(()=>{throw m},0)}function j(){var m=U;let I=null;return m.g&&(I=m.g,m.g=m.g.next,m.g||(m.h=null),I.next=null),I}class ${constructor(){this.h=this.g=null}add(I,M){const ee=V.get();ee.set(I,M),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var V=new E(()=>new B,m=>m.reset());class B{constructor(){this.next=this.g=this.h=null}set(I,M){this.h=I,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let X,se=!1,U=new $,C=()=>{const m=Promise.resolve(void 0);X=()=>{m.then(w)}};function w(){for(var m;m=j();){try{m.h.call(m.g)}catch(M){N(M)}var I=V;I.j(m),I.h<100&&(I.h++,m.next=I.g,I.g=m)}se=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(m,I){this.type=m,this.g=this.target=I,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,I=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const M=()=>{};c.addEventListener("test",M,I),c.removeEventListener("test",M,I)}catch{}return m})();function z(m){return/^[\s\xa0]*$/.test(m)}function W(m,I){P.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,I)}b(W,P),W.prototype.init=function(m,I){const M=this.type=m.type,ee=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=I,I=m.relatedTarget,I||(M=="mouseover"?I=m.fromElement:M=="mouseout"&&(I=m.toElement)),this.relatedTarget=I,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var le="closure_listenable_"+(Math.random()*1e6|0),ve=0;function de(m,I,M,ee,Ie){this.listener=m,this.proxy=null,this.src=I,this.type=M,this.capture=!!ee,this.ha=Ie,this.key=++ve,this.da=this.fa=!1}function ce(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function we(m,I,M){for(const ee in m)I.call(M,m[ee],ee,m)}function je(m,I){for(const M in m)I.call(void 0,m[M],M,m)}function ne(m){const I={};for(const M in m)I[M]=m[M];return I}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(m,I){let M,ee;for(let Ie=1;Ie<arguments.length;Ie++){ee=arguments[Ie];for(M in ee)m[M]=ee[M];for(let Be=0;Be<D.length;Be++)M=D[Be],Object.prototype.hasOwnProperty.call(ee,M)&&(m[M]=ee[M])}}function re(m){this.src=m,this.g={},this.h=0}re.prototype.add=function(m,I,M,ee,Ie){const Be=m.toString();m=this.g[Be],m||(m=this.g[Be]=[],this.h++);const ot=fe(m,I,ee,Ie);return ot>-1?(I=m[ot],M||(I.fa=!1)):(I=new de(I,this.src,Be,!!ee,Ie),I.fa=M,m.push(I)),I};function ue(m,I){const M=I.type;if(M in m.g){var ee=m.g[M],Ie=Array.prototype.indexOf.call(ee,I,void 0),Be;(Be=Ie>=0)&&Array.prototype.splice.call(ee,Ie,1),Be&&(ce(I),m.g[M].length==0&&(delete m.g[M],m.h--))}}function fe(m,I,M,ee){for(let Ie=0;Ie<m.length;++Ie){const Be=m[Ie];if(!Be.da&&Be.listener==I&&Be.capture==!!M&&Be.ha==ee)return Ie}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),Ee={};function ke(m,I,M,ee,Ie){if(Array.isArray(I)){for(let Be=0;Be<I.length;Be++)ke(m,I[Be],M,ee,Ie);return null}return M=tt(M),m&&m[le]?m.J(I,M,u(ee)?!!ee.capture:!1,Ie):Oe(m,I,M,!1,ee,Ie)}function Oe(m,I,M,ee,Ie,Be){if(!I)throw Error("Invalid event type");const ot=u(Ie)?!!Ie.capture:!!Ie;let Dt=Je(m);if(Dt||(m[Se]=Dt=new re(m)),M=Dt.add(I,M,ee,ot,Be),M.proxy)return M;if(ee=Ke(),M.proxy=ee,ee.src=m,ee.listener=M,m.addEventListener)S||(Ie=ot),Ie===void 0&&(Ie=!1),m.addEventListener(I.toString(),ee,Ie);else if(m.attachEvent)m.attachEvent(pe(I.toString()),ee);else if(m.addListener&&m.removeListener)m.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return M}function Ke(){function m(M){return I.call(m.src,m.listener,M)}const I=Q;return m}function nt(m,I,M,ee,Ie){if(Array.isArray(I))for(var Be=0;Be<I.length;Be++)nt(m,I[Be],M,ee,Ie);else ee=u(ee)?!!ee.capture:!!ee,M=tt(M),m&&m[le]?(m=m.i,Be=String(I).toString(),Be in m.g&&(I=m.g[Be],M=fe(I,M,ee,Ie),M>-1&&(ce(I[M]),Array.prototype.splice.call(I,M,1),I.length==0&&(delete m.g[Be],m.h--)))):m&&(m=Je(m))&&(I=m.g[I.toString()],m=-1,I&&(m=fe(I,M,ee,Ie)),(M=m>-1?I[m]:null)&&_e(M))}function _e(m){if(typeof m!="number"&&m&&!m.da){var I=m.src;if(I&&I[le])ue(I.i,m);else{var M=m.type,ee=m.proxy;I.removeEventListener?I.removeEventListener(M,ee,m.capture):I.detachEvent?I.detachEvent(pe(M),ee):I.addListener&&I.removeListener&&I.removeListener(ee),(M=Je(I))?(ue(M,m),M.h==0&&(M.src=null,I[Se]=null)):ce(m)}}}function pe(m){return m in Ee?Ee[m]:Ee[m]="on"+m}function Q(m,I){if(m.da)m=!0;else{I=new W(I,this);const M=m.listener,ee=m.ha||m.src;m.fa&&_e(m),m=M.call(ee,I)}return m}function Je(m){return m=m[Se],m instanceof re?m:null}var Ue="__closure_events_fn_"+(Math.random()*1e9>>>0);function tt(m){return typeof m=="function"?m:(m[Ue]||(m[Ue]=function(I){return m.handleEvent(I)}),m[Ue])}function ge(){O.call(this),this.i=new re(this),this.M=this,this.G=null}b(ge,O),ge.prototype[le]=!0,ge.prototype.removeEventListener=function(m,I,M,ee){nt(this,m,I,M,ee)};function De(m,I){var M,ee=m.G;if(ee)for(M=[];ee;ee=ee.G)M.push(ee);if(m=m.M,ee=I.type||I,typeof I=="string")I=new P(I,m);else if(I instanceof P)I.target=I.target||m;else{var Ie=I;I=new P(ee,m),Y(I,Ie)}Ie=!0;let Be,ot;if(M)for(ot=M.length-1;ot>=0;ot--)Be=I.g=M[ot],Ie=He(Be,ee,!0,I)&&Ie;if(Be=I.g=m,Ie=He(Be,ee,!0,I)&&Ie,Ie=He(Be,ee,!1,I)&&Ie,M)for(ot=0;ot<M.length;ot++)Be=I.g=M[ot],Ie=He(Be,ee,!1,I)&&Ie}ge.prototype.N=function(){if(ge.Z.N.call(this),this.i){var m=this.i;for(const I in m.g){const M=m.g[I];for(let ee=0;ee<M.length;ee++)ce(M[ee]);delete m.g[I],m.h--}}this.G=null},ge.prototype.J=function(m,I,M,ee){return this.i.add(String(m),I,!1,M,ee)},ge.prototype.K=function(m,I,M,ee){return this.i.add(String(m),I,!0,M,ee)};function He(m,I,M,ee){if(I=m.i.g[String(I)],!I)return!0;I=I.concat();let Ie=!0;for(let Be=0;Be<I.length;++Be){const ot=I[Be];if(ot&&!ot.da&&ot.capture==M){const Dt=ot.listener,Vr=ot.ha||ot.src;ot.fa&&ue(m.i,ot),Ie=Dt.call(Vr,ee)!==!1&&Ie}}return Ie&&!ee.defaultPrevented}function at(m,I){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(I)>2147483647?-1:c.setTimeout(m,I||0)}function ht(m){m.g=at(()=>{m.g=null,m.i&&(m.i=!1,ht(m))},m.l);const I=m.h;m.h=null,m.m.apply(null,I)}class Tt extends O{constructor(I,M){super(),this.m=I,this.l=M,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:ht(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lt(m){O.call(this),this.h=m,this.g={}}b(lt,O);var ct=[];function Kt(m){we(m.g,function(I,M){this.g.hasOwnProperty(M)&&_e(I)},m),m.g={}}lt.prototype.N=function(){lt.Z.N.call(this),Kt(this)},lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vt=c.JSON.stringify,jt=c.JSON.parse,Pt=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function bt(){}function Cr(){}var ir={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xt(){P.call(this,"d")}b(xt,P);function Ut(){P.call(this,"c")}b(Ut,P);var sr={},Rt=null;function er(){return Rt=Rt||new ge}sr.Ia="serverreachability";function Wt(m){P.call(this,sr.Ia,m)}b(Wt,P);function kr(m){const I=er();De(I,new Wt(I))}sr.STAT_EVENT="statevent";function Br(m,I){P.call(this,sr.STAT_EVENT,m),this.stat=I}b(Br,P);function $t(m){const I=er();De(I,new Br(I,m))}sr.Ja="timingevent";function Mt(m,I){P.call(this,sr.Ja,m),this.size=I}b(Mt,P);function ar(m,I){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},I)}function Mi(){this.g=!0}Mi.prototype.ua=function(){this.g=!1};function Rn(m,I,M,ee,Ie,Be){m.info(function(){if(m.g)if(Be){var ot="",Dt=Be.split("&");for(let ur=0;ur<Dt.length;ur++){var Vr=Dt[ur].split("=");if(Vr.length>1){const Gr=Vr[0];Vr=Vr[1];const zn=Gr.split("_");ot=zn.length>=2&&zn[1]=="type"?ot+(Gr+"="+Vr+"&"):ot+(Gr+"=redacted&")}}}else ot=null;else ot=Be;return"XMLHTTP REQ ("+ee+") [attempt "+Ie+"]: "+I+`
`+M+`
`+ot})}function So(m,I,M,ee,Ie,Be,ot){m.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+Ie+"]: "+I+`
`+M+`
`+Be+" "+ot})}function Pn(m,I,M,ee){m.info(function(){return"XMLHTTP TEXT ("+I+"): "+Ci(m,M)+(ee?" "+ee:"")})}function Nt(m,I){m.info(function(){return"TIMEOUT: "+I})}Mi.prototype.info=function(){};function Ci(m,I){if(!m.g)return I;if(!I)return null;try{const Be=JSON.parse(I);if(Be){for(m=0;m<Be.length;m++)if(Array.isArray(Be[m])){var M=Be[m];if(!(M.length<2)){var ee=M[1];if(Array.isArray(ee)&&!(ee.length<1)){var Ie=ee[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(let ot=1;ot<ee.length;ot++)ee[ot]=""}}}}return Vt(Be)}catch{return I}}var li={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Nn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ki;function Tr(){}b(Tr,bt),Tr.prototype.g=function(){return new XMLHttpRequest},ki=new Tr;function Fr(m){return encodeURIComponent(String(m))}function sn(m){var I=1;m=m.split(":");const M=[];for(;I>0&&m.length;)M.push(m.shift()),I--;return m.length&&M.push(m.join(":")),M}function qn(m,I,M,ee){this.j=m,this.i=I,this.l=M,this.S=ee||1,this.V=new lt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $o}function $o(){this.i=null,this.g="",this.h=!1}var Di={},Wi={};function mn(m,I,M){m.M=1,m.A=Ln(vr(I)),m.u=M,m.R=!0,ji(m,null)}function ji(m,I){m.F=Date.now(),co(m),m.B=vr(m.A);var M=m.B,ee=m.S;Array.isArray(ee)||(ee=[String(ee)]),Ma(M.i,"t",ee),m.C=0,M=m.j.L,m.h=new $o,m.g=ft(m.j,M?I:null,!m.u),m.P>0&&(m.O=new Tt(h(m.Y,m,m.g),m.P)),I=m.V,M=m.g,ee=m.ba;var Ie="readystatechange";Array.isArray(Ie)||(Ie&&(ct[0]=Ie.toString()),Ie=ct);for(let Be=0;Be<Ie.length;Be++){const ot=ke(M,Ie[Be],ee||I.handleEvent,!1,I.h||I);if(!ot)break;I.g[ot.key]=ot}I=m.J?ne(m.J):{},m.u?(m.v||(m.v="POST"),I["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,I)):(m.v="GET",m.g.ea(m.B,m.v,null,I)),kr(),Rn(m.i,m.v,m.B,m.l,m.S,m.u)}qn.prototype.ba=function(m){m=m.target;const I=this.O;I&&qi(m)==3?I.j():this.Y(m)},qn.prototype.Y=function(m){try{if(m==this.g)e:{const Dt=qi(this.g),Vr=this.g.ya(),ur=this.g.ca();if(!(Dt<3)&&(Dt!=3||this.g&&(this.h.h||this.g.la()||da(this.g)))){this.K||Dt!=4||Vr==7||(Vr==8||ur<=0?kr(3):kr(2)),Uo(this);var I=this.g.ca();this.X=I;var M=Ei(this);if(this.o=I==200,So(this.i,this.v,this.B,this.l,this.S,Dt,I),this.o){if(this.U&&!this.L){t:{if(this.g){var ee,Ie=this.g;if((ee=Ie.g?Ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(ee)){var Be=ee;break t}}Be=null}if(m=Be)Pn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,jr(this,m);else{this.o=!1,this.m=3,$t(12),qo(this),_o(this);break e}}if(this.R){m=!0;let Gr;for(;!this.K&&this.C<M.length;)if(Gr=lo(this,M),Gr==Wi){Dt==4&&(this.m=4,$t(14),m=!1),Pn(this.i,this.l,null,"[Incomplete Response]");break}else if(Gr==Di){this.m=4,$t(15),Pn(this.i,this.l,M,"[Invalid Chunk]"),m=!1;break}else Pn(this.i,this.l,Gr,null),jr(this,Gr);if(cs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||M.length!=0||this.h.h||(this.m=1,$t(16),m=!1),this.o=this.o&&m,!m)Pn(this.i,this.l,M,"[Invalid Chunked Response]"),qo(this),_o(this);else if(M.length>0&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.aa&&!ot.P&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),gs(ot),ot.P=!0,$t(11))}}else Pn(this.i,this.l,M,null),jr(this,M);Dt==4&&qo(this),this.o&&!this.K&&(Dt==4?ae(this.j,this):(this.o=!1,co(this)))}else Yo(this.g),I==400&&M.indexOf("Unknown SID")>0?(this.m=3,$t(12)):(this.m=0,$t(13)),qo(this),_o(this)}}}catch{}finally{}};function Ei(m){if(!cs(m))return m.g.la();const I=da(m.g);if(I==="")return"";let M="";const ee=I.length,Ie=qi(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return qo(m),_o(m),"";m.h.i=new c.TextDecoder}for(let Be=0;Be<ee;Be++)m.h.h=!0,M+=m.h.i.decode(I[Be],{stream:!(Ie&&Be==ee-1)});return I.length=0,m.h.g+=M,m.C=0,m.h.g}function cs(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function lo(m,I){var M=m.C,ee=I.indexOf(`
`,M);return ee==-1?Wi:(M=Number(I.substring(M,ee)),isNaN(M)?Di:(ee+=1,ee+M>I.length?Wi:(I=I.slice(ee,ee+M),m.C=ee+M,I)))}qn.prototype.cancel=function(){this.K=!0,qo(this)};function co(m){m.T=Date.now()+m.H,us(m,m.H)}function us(m,I){if(m.D!=null)throw Error("WatchDog timer not null");m.D=ar(h(m.aa,m),I)}function Uo(m){m.D&&(c.clearTimeout(m.D),m.D=null)}qn.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Nt(this.i,this.B),this.M!=2&&(kr(),$t(17)),qo(this),this.m=2,_o(this)):us(this,this.T-m)};function _o(m){m.j.I==0||m.K||ae(m.j,m)}function qo(m){Uo(m);var I=m.O;I&&typeof I.dispose=="function"&&I.dispose(),m.O=null,Kt(m.V),m.g&&(I=m.g,m.g=null,I.abort(),I.dispose())}function jr(m,I){try{var M=m.j;if(M.I!=0&&(M.g==m||aa(M.h,m))){if(!m.L&&aa(M.h,m)&&M.I==3){try{var ee=M.Ba.g.parse(I)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var Ie=ee;if(Ie[0]==0){e:if(!M.v){if(M.g)if(M.g.F+3e3<m.F)q(M),ri(M);else break e;mi(M),$t(18)}}else M.xa=Ie[1],0<M.xa-M.K&&Ie[2]<37500&&M.F&&M.A==0&&!M.C&&(M.C=ar(h(M.Va,M),6e3));Ho(M.h)<=1&&M.ta&&(M.ta=void 0)}else Ce(M,11)}else if((m.L||M.g==m)&&q(M),!z(I))for(Ie=M.Ba.g.parse(I),I=0;I<Ie.length;I++){let ur=Ie[I];const Gr=ur[0];if(!(Gr<=M.K))if(M.K=Gr,ur=ur[1],M.I==2)if(ur[0]=="c"){M.M=ur[1],M.ba=ur[2];const zn=ur[3];zn!=null&&(M.ka=zn,M.j.info("VER="+M.ka));const Pi=ur[4];Pi!=null&&(M.za=Pi,M.j.info("SVER="+M.za));const Yr=ur[5];Yr!=null&&typeof Yr=="number"&&Yr>0&&(ee=1.5*Yr,M.O=ee,M.j.info("backChannelRequestTimeoutMs_="+ee)),ee=M;const gi=m.g;if(gi){const Io=gi.g?gi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Io){var Be=ee.h;Be.g||Io.indexOf("spdy")==-1&&Io.indexOf("quic")==-1&&Io.indexOf("h2")==-1||(Be.j=Be.l,Be.g=new Set,Be.h&&(ds(Be,Be.h),Be.h=null))}if(ee.G){const Os=gi.g?gi.g.getResponseHeader("X-HTTP-Session-Id"):null;Os&&(ee.wa=Os,lr(ee.J,ee.G,Os))}}M.I=3,M.l&&M.l.ra(),M.aa&&(M.T=Date.now()-m.F,M.j.info("Handshake RTT: "+M.T+"ms")),ee=M;var ot=m;if(ee.na=Qe(ee,ee.L?ee.ba:null,ee.W),ot.L){hs(ee.h,ot);var Dt=ot,Vr=ee.O;Vr&&(Dt.H=Vr),Dt.D&&(Uo(Dt),co(Dt)),ee.g=ot}else Fn(ee);M.i.length>0&&Eo(M)}else ur[0]!="stop"&&ur[0]!="close"||Ce(M,7);else M.I==3&&(ur[0]=="stop"||ur[0]=="close"?ur[0]=="stop"?Ce(M,7):Jo(M):ur[0]!="noop"&&M.l&&M.l.qa(ur),M.A=0)}}kr(4)}catch{}}var gl=class{constructor(m,I){this.g=m,this.map=I}};function Ps(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ci(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ho(m){return m.h?1:m.g?m.g.size:0}function aa(m,I){return m.h?m.h==I:m.g?m.g.has(I):!1}function ds(m,I){m.g?m.g.add(I):m.h=I}function hs(m,I){m.h&&m.h==I?m.h=null:m.g&&m.g.has(I)&&m.g.delete(I)}Ps.prototype.cancel=function(){if(this.i=ui(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function ui(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let I=m.i;for(const M of m.g.values())I=I.concat(M.G);return I}return v(m.i)}var Fa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hn(m,I){if(m){m=m.split("&");for(let M=0;M<m.length;M++){const ee=m[M].indexOf("=");let Ie,Be=null;ee>=0?(Ie=m[M].substring(0,ee),Be=m[M].substring(ee+1)):Ie=m[M],I(Ie,Be?decodeURIComponent(Be.replace(/\+/g," ")):"")}}}function To(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let I;m instanceof To?(this.l=m.l,fs(this,m.j),this.o=m.o,this.g=m.g,uo(this,m.u),this.h=m.h,di(this,Fs(m.i)),this.m=m.m):m&&(I=String(m).match(Fa))?(this.l=!1,fs(this,I[1]||"",!0),this.o=ho(I[2]||""),this.g=ho(I[3]||"",!0),uo(this,I[4]),this.h=ho(I[5]||"",!0),di(this,I[6]||"",!0),this.m=ho(I[7]||"")):(this.l=!1,this.i=new or(null,this.l))}To.prototype.toString=function(){const m=[];var I=this.j;I&&m.push(zr(I,za,!0),":");var M=this.g;return(M||I=="file")&&(m.push("//"),(I=this.o)&&m.push(zr(I,za,!0),"@"),m.push(Fr(M).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.u,M!=null&&m.push(":",String(M))),(M=this.h)&&(this.g&&M.charAt(0)!="/"&&m.push("/"),m.push(zr(M,M.charAt(0)=="/"?Ls:Oa,!0))),(M=this.i.toString())&&m.push("?",M),(M=this.m)&&m.push("#",zr(M,la)),m.join("")},To.prototype.resolve=function(m){const I=vr(this);let M=!!m.j;M?fs(I,m.j):M=!!m.o,M?I.o=m.o:M=!!m.g,M?I.g=m.g:M=m.u!=null;var ee=m.h;if(M)uo(I,m.u);else if(M=!!m.h){if(ee.charAt(0)!="/")if(this.g&&!this.h)ee="/"+ee;else{var Ie=I.h.lastIndexOf("/");Ie!=-1&&(ee=I.h.slice(0,Ie+1)+ee)}if(Ie=ee,Ie==".."||Ie==".")ee="";else if(Ie.indexOf("./")!=-1||Ie.indexOf("/.")!=-1){ee=Ie.lastIndexOf("/",0)==0,Ie=Ie.split("/");const Be=[];for(let ot=0;ot<Ie.length;){const Dt=Ie[ot++];Dt=="."?ee&&ot==Ie.length&&Be.push(""):Dt==".."?((Be.length>1||Be.length==1&&Be[0]!="")&&Be.pop(),ee&&ot==Ie.length&&Be.push("")):(Be.push(Dt),ee=!0)}ee=Be.join("/")}else ee=Ie}return M?I.h=ee:M=m.i.toString()!=="",M?di(I,Fs(m.i)):M=!!m.m,M&&(I.m=m.m),I};function vr(m){return new To(m)}function fs(m,I,M){m.j=M?ho(I,!0):I,m.j&&(m.j=m.j.replace(/:$/,""))}function uo(m,I){if(I){if(I=Number(I),isNaN(I)||I<0)throw Error("Bad port number "+I);m.u=I}else m.u=null}function di(m,I,M){I instanceof or?(m.i=I,fo(m.i,m.l)):(M||(I=zr(I,Ao)),m.i=new or(I,m.l))}function lr(m,I,M){m.i.set(I,M)}function Ln(m){return lr(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function ho(m,I){return m?I?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function zr(m,I,M){return typeof m=="string"?(m=encodeURI(m).replace(I,Ns),M&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Ns(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var za=/[#\/\?@]/g,Oa=/[#\?:]/g,Ls=/[#\?]/g,Ao=/[#\?@]/g,la=/#/g;function or(m,I){this.h=this.g=null,this.i=m||null,this.j=!!I}function ti(m){m.g||(m.g=new Map,m.h=0,m.i&&Hn(m.i,function(I,M){m.add(decodeURIComponent(I.replace(/\+/g," ")),M)}))}r=or.prototype,r.add=function(m,I){ti(this),this.i=null,m=hi(this,m);let M=this.g.get(m);return M||this.g.set(m,M=[]),M.push(I),this.h+=1,this};function Bs(m,I){ti(m),I=hi(m,I),m.g.has(I)&&(m.i=null,m.h-=m.g.get(I).length,m.g.delete(I))}function ca(m,I){return ti(m),I=hi(m,I),m.g.has(I)}r.forEach=function(m,I){ti(this),this.g.forEach(function(M,ee){M.forEach(function(Ie){m.call(I,Ie,ee,this)},this)},this)};function Va(m,I){ti(m);let M=[];if(typeof I=="string")ca(m,I)&&(M=M.concat(m.g.get(hi(m,I))));else for(m=Array.from(m.g.values()),I=0;I<m.length;I++)M=M.concat(m[I]);return M}r.set=function(m,I){return ti(this),this.i=null,m=hi(this,m),ca(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[I]),this.h+=1,this},r.get=function(m,I){return m?(m=Va(this,m),m.length>0?String(m[0]):I):I};function Ma(m,I,M){Bs(m,I),M.length>0&&(m.i=null,m.g.set(hi(m,I),v(M)),m.h+=M.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],I=Array.from(this.g.keys());for(let ee=0;ee<I.length;ee++){var M=I[ee];const Ie=Fr(M);M=Va(this,M);for(let Be=0;Be<M.length;Be++){let ot=Ie;M[Be]!==""&&(ot+="="+Fr(M[Be])),m.push(ot)}}return this.i=m.join("&")};function Fs(m){const I=new or;return I.i=m.i,m.g&&(I.g=new Map(m.g),I.h=m.h),I}function hi(m,I){return I=String(I),m.j&&(I=I.toLowerCase()),I}function fo(m,I){I&&!m.j&&(ti(m),m.i=null,m.g.forEach(function(M,ee){const Ie=ee.toLowerCase();ee!=Ie&&(Bs(this,ee),Ma(this,Ie,M))},m)),m.j=I}function Co(m,I){const M=new Mi;if(c.Image){const ee=new Image;ee.onload=g(gn,M,"TestLoadImage: loaded",!0,I,ee),ee.onerror=g(gn,M,"TestLoadImage: error",!1,I,ee),ee.onabort=g(gn,M,"TestLoadImage: abort",!1,I,ee),ee.ontimeout=g(gn,M,"TestLoadImage: timeout",!1,I,ee),c.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=m}else I(!1)}function fi(m,I){const M=new Mi,ee=new AbortController,Ie=setTimeout(()=>{ee.abort(),gn(M,"TestPingServer: timeout",!1,I)},1e4);fetch(m,{signal:ee.signal}).then(Be=>{clearTimeout(Ie),Be.ok?gn(M,"TestPingServer: ok",!0,I):gn(M,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(Ie),gn(M,"TestPingServer: error",!1,I)})}function gn(m,I,M,ee,Ie){try{Ie&&(Ie.onload=null,Ie.onerror=null,Ie.onabort=null,Ie.ontimeout=null),ee(M)}catch{}}function Bt(){this.g=new Pt}function Go(m){this.i=m.Sb||null,this.h=m.ab||!1}b(Go,bt),Go.prototype.g=function(){return new Ii(this.i,this.h)};function Ii(m,I){ge.call(this),this.H=m,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Ii,ge),r=Ii.prototype,r.open=function(m,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=I,this.readyState=1,Bn(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const I={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(I.body=m),(this.H||c).fetch(new Request(this.D,I)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ps(this)),this.readyState=0},r.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Bn(this)),this.g&&(this.readyState=3,Bn(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yl(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function yl(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}r.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var I=m.value?m.value:new Uint8Array(0);(I=this.B.decode(I,{stream:!m.done}))&&(this.response=this.responseText+=I)}m.done?ps(this):Bn(this),this.readyState==3&&yl(this)}},r.Oa=function(m){this.g&&(this.response=this.responseText=m,ps(this))},r.Na=function(m){this.g&&(this.response=m,ps(this))},r.ga=function(){this.g&&ps(this)};function ps(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Bn(m)}r.setRequestHeader=function(m,I){this.A.append(m,I)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],I=this.h.entries();for(var M=I.next();!M.done;)M=M.value,m.push(M[0]+": "+M[1]),M=I.next();return m.join(`\r
`)};function Bn(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ii.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ko(m){let I="";return we(m,function(M,ee){I+=ee,I+=":",I+=M,I+=`\r
`}),I}function ua(m,I,M){e:{for(ee in M){var ee=!1;break e}ee=!0}ee||(M=ko(M),typeof m=="string"?M!=null&&Fr(M):lr(m,I,M))}function Er(m){ge.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Er,ge);var zs=/^https?$/i,Da=["POST","PUT"];r=Er.prototype,r.Fa=function(m){this.H=m},r.ea=function(m,I,M,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);I=I?I.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ki.g(),this.g.onreadystatechange=A(h(this.Ca,this));try{this.B=!0,this.g.open(I,String(m),!0),this.B=!1}catch(Be){$i(this,Be);return}if(m=M||"",M=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var Ie in ee)M.set(Ie,ee[Ie]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const Be of ee.keys())M.set(Be,ee.get(Be));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from(M.keys()).find(Be=>Be.toLowerCase()=="content-type"),Ie=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(Da,I,void 0)>=0)||ee||Ie||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Be,ot]of M)this.g.setRequestHeader(Be,ot);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Be){$i(this,Be)}};function $i(m,I){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=I,m.o=5,po(m),Ko(m)}function po(m){m.A||(m.A=!0,De(m,"complete"),De(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,De(this,"complete"),De(this,"abort"),Ko(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ko(this,!0)),Er.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Ui(this):this.Xa())},r.Xa=function(){Ui(this)};function Ui(m){if(m.h&&typeof a<"u"){if(m.v&&qi(m)==4)setTimeout(m.Ca.bind(m),0);else if(De(m,"readystatechange"),qi(m)==4){m.h=!1;try{const Be=m.ca();e:switch(Be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var M;if(!(M=I)){var ee;if(ee=Be===0){let ot=String(m.D).match(Fa)[1]||null;!ot&&c.self&&c.self.location&&(ot=c.self.location.protocol.slice(0,-1)),ee=!zs.test(ot?ot.toLowerCase():"")}M=ee}if(M)De(m,"complete"),De(m,"success");else{m.o=6;try{var Ie=qi(m)>2?m.g.statusText:""}catch{Ie=""}m.l=Ie+" ["+m.ca()+"]",po(m)}}finally{Ko(m)}}}}function Ko(m,I){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const M=m.g;m.g=null,I||De(m,"ready");try{M.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function qi(m){return m.g?m.g.readyState:0}r.ca=function(){try{return qi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(m){if(this.g){var I=this.g.responseText;return m&&I.indexOf(m)==0&&(I=I.substring(m.length)),jt(I)}};function da(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Yo(m){const I={};m=(m.g&&qi(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<m.length;ee++){if(z(m[ee]))continue;var M=sn(m[ee]);const Ie=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const Be=I[Ie]||[];I[Ie]=Be,Be.push(M)}je(I,function(ee){return ee.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(m,I,M){return M&&M.internalChannelParams&&M.internalChannelParams[m]||I}function ms(m){this.za=0,this.i=[],this.j=new Mi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pi("baseRetryDelayMs",5e3,m),this.Za=pi("retryDelaySeedMs",1e4,m),this.Ta=pi("forwardChannelMaxRetries",2,m),this.va=pi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Ps(m&&m.concurrentRequestLimit),this.Ba=new Bt,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ms.prototype,r.ka=8,r.I=1,r.connect=function(m,I,M,ee){$t(0),this.W=m,this.H=I||{},M&&ee!==void 0&&(this.H.OSID=M,this.H.OAID=ee),this.F=this.X,this.J=Qe(this,null,this.W),Eo(this)};function Jo(m){if(jo(m),m.I==3){var I=m.V++,M=vr(m.J);if(lr(M,"SID",m.M),lr(M,"RID",I),lr(M,"TYPE","terminate"),Gn(m,M),I=new qn(m,m.j,I),I.M=2,I.A=Ln(vr(M)),M=!1,c.navigator&&c.navigator.sendBeacon)try{M=c.navigator.sendBeacon(I.A.toString(),"")}catch{}!M&&c.Image&&(new Image().src=I.A,M=!0),M||(I.g=ft(I.j,null),I.g.ea(I.A)),I.F=Date.now(),co(I)}$e(m)}function ri(m){m.g&&(gs(m),m.g.cancel(),m.g=null)}function jo(m){ri(m),m.v&&(c.clearTimeout(m.v),m.v=null),q(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function Eo(m){if(!ci(m.h)&&!m.m){m.m=!0;var I=m.Ea;X||C(),se||(X(),se=!0),U.add(I,m),m.D=0}}function Wa(m,I){return Ho(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=I.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=ar(h(m.Ea,m,I),me(m,m.D)),m.D++,!0)}r.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const Ie=new qn(this,this.j,m);let Be=this.o;if(this.U&&(Be?(Be=ne(Be),Y(Be,this.U)):Be=this.U),this.u!==null||this.R||(Ie.J=Be,Be=null),this.S)e:{for(var I=0,M=0;M<this.i.length;M++){t:{var ee=this.i[M];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(I+=ee,I>4096){I=M;break e}if(I===4096||M===this.i.length-1){I=M+1;break e}}I=1e3}else I=1e3;I=ha(this,Ie,I),M=vr(this.J),lr(M,"RID",m),lr(M,"CVER",22),this.G&&lr(M,"X-HTTP-Session-Id",this.G),Gn(this,M),Be&&(this.R?I="headers="+Fr(ko(Be))+"&"+I:this.u&&ua(M,this.u,Be)),ds(this.h,Ie),this.Ra&&lr(M,"TYPE","init"),this.S?(lr(M,"$req",I),lr(M,"SID","null"),Ie.U=!0,mn(Ie,M,null)):mn(Ie,M,I),this.I=2}}else this.I==3&&(m?Ri(this,m):this.i.length==0||ci(this.h)||Ri(this))};function Ri(m,I){var M;I?M=I.l:M=m.V++;const ee=vr(m.J);lr(ee,"SID",m.M),lr(ee,"RID",M),lr(ee,"AID",m.K),Gn(m,ee),m.u&&m.o&&ua(ee,m.u,m.o),M=new qn(m,m.j,M,m.D+1),m.u===null&&(M.J=m.o),I&&(m.i=I.G.concat(m.i)),I=ha(m,M,1e3),M.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),ds(m.h,M),mn(M,ee,I)}function Gn(m,I){m.H&&we(m.H,function(M,ee){lr(I,ee,M)}),m.l&&we({},function(M,ee){lr(I,ee,M)})}function ha(m,I,M){M=Math.min(m.i.length,M);const ee=m.l?h(m.l.Ka,m.l,m):null;e:{var Ie=m.i;let Dt=-1;for(;;){const Vr=["count="+M];Dt==-1?M>0?(Dt=Ie[0].g,Vr.push("ofs="+Dt)):Dt=0:Vr.push("ofs="+Dt);let ur=!0;for(let Gr=0;Gr<M;Gr++){var Be=Ie[Gr].g;const zn=Ie[Gr].map;if(Be-=Dt,Be<0)Dt=Math.max(0,Ie[Gr].g-100),ur=!1;else try{Be="req"+Be+"_"||"";try{var ot=zn instanceof Map?zn:Object.entries(zn);for(const[Pi,Yr]of ot){let gi=Yr;u(Yr)&&(gi=Vt(Yr)),Vr.push(Be+Pi+"="+encodeURIComponent(gi))}}catch(Pi){throw Vr.push(Be+"type="+encodeURIComponent("_badmap")),Pi}}catch{ee&&ee(zn)}}if(ur){ot=Vr.join("&");break e}}ot=void 0}return m=m.i.splice(0,M),I.G=m,ot}function Fn(m){if(!m.g&&!m.v){m.Y=1;var I=m.Da;X||C(),se||(X(),se=!0),U.add(I,m),m.A=0}}function mi(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=ar(h(m.Da,m),me(m,m.A)),m.A++,!0)}r.Da=function(){if(this.v=null,_(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=ar(h(this.Wa,this),m)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,$t(10),ri(this),_(this))};function gs(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function _(m){m.g=new qn(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var I=vr(m.na);lr(I,"RID","rpc"),lr(I,"SID",m.M),lr(I,"AID",m.K),lr(I,"CI",m.F?"0":"1"),!m.F&&m.ia&&lr(I,"TO",m.ia),lr(I,"TYPE","xmlhttp"),Gn(m,I),m.u&&m.o&&ua(I,m.u,m.o),m.O&&(m.g.H=m.O);var M=m.g;m=m.ba,M.M=1,M.A=Ln(vr(I)),M.u=null,M.R=!0,ji(M,m)}r.Va=function(){this.C!=null&&(this.C=null,ri(this),mi(this),$t(19))};function q(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function ae(m,I){var M=null;if(m.g==I){q(m),gs(m),m.g=null;var ee=2}else if(aa(m.h,I))M=I.G,hs(m.h,I),ee=1;else return;if(m.I!=0){if(I.o)if(ee==1){M=I.u?I.u.length:0,I=Date.now()-I.F;var Ie=m.D;ee=er(),De(ee,new Mt(ee,M)),Eo(m)}else Fn(m);else if(Ie=I.m,Ie==3||Ie==0&&I.X>0||!(ee==1&&Wa(m,I)||ee==2&&mi(m)))switch(M&&M.length>0&&(I=m.h,I.i=I.i.concat(M)),Ie){case 1:Ce(m,5);break;case 4:Ce(m,10);break;case 3:Ce(m,6);break;default:Ce(m,2)}}}function me(m,I){let M=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(M*=2),M*I}function Ce(m,I){if(m.j.info("Error code "+I),I==2){var M=h(m.bb,m),ee=m.Ua;const Ie=!ee;ee=new To(ee||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||fs(ee,"https"),Ln(ee),Ie?Co(ee.toString(),M):fi(ee.toString(),M)}else $t(2);m.I=0,m.l&&m.l.pa(I),$e(m),jo(m)}r.bb=function(m){m?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function $e(m){if(m.I=0,m.ja=[],m.l){const I=ui(m.h);(I.length!=0||m.i.length!=0)&&(F(m.ja,I),F(m.ja,m.i),m.h.i.length=0,v(m.i),m.i.length=0),m.l.oa()}}function Qe(m,I,M){var ee=M instanceof To?vr(M):new To(M);if(ee.g!="")I&&(ee.g=I+"."+ee.g),uo(ee,ee.u);else{var Ie=c.location;ee=Ie.protocol,I=I?I+"."+Ie.hostname:Ie.hostname,Ie=+Ie.port;const Be=new To(null);ee&&fs(Be,ee),I&&(Be.g=I),Ie&&uo(Be,Ie),M&&(Be.h=M),ee=Be}return M=m.G,I=m.wa,M&&I&&lr(ee,M,I),lr(ee,"VER",m.ka),Gn(m,ee),ee}function ft(m,I,M){if(I&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return I=m.Aa&&!m.ma?new Er(new Go({ab:M})):new Er(m.ma),I.Fa(m.L),I}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function wt(){}r=wt.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ft(){}Ft.prototype.g=function(m,I){return new At(m,I)};function At(m,I){ge.call(this),this.g=new ms(I),this.l=m,this.h=I&&I.messageUrlParams||null,m=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(m?m["X-WebChannel-Content-Type"]=I.messageContentType:m={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.sa&&(m?m["X-WebChannel-Client-Profile"]=I.sa:m={"X-WebChannel-Client-Profile":I.sa}),this.g.U=m,(m=I&&I.Qb)&&!z(m)&&(this.g.u=m),this.A=I&&I.supportsCrossDomainXhr||!1,this.v=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!z(I)&&(this.g.G=I,m=this.h,m!==null&&I in m&&(m=this.h,I in m&&delete m[I])),this.j=new Or(this)}b(At,ge),At.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){Jo(this.g)},At.prototype.o=function(m){var I=this.g;if(typeof m=="string"){var M={};M.__data__=m,m=M}else this.v&&(M={},M.__data__=Vt(m),m=M);I.i.push(new gl(I.Ya++,m)),I.I==3&&Eo(I)},At.prototype.N=function(){this.g.l=null,delete this.j,Jo(this.g),delete this.g,At.Z.N.call(this)};function pr(m){xt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var I=m.__sm__;if(I){e:{for(const M in I){m=M;break e}m=void 0}(this.i=m)&&(m=this.i,I=I!==null&&m in I?I[m]:void 0),this.data=I}else this.data=m}b(pr,xt);function Hr(){Ut.call(this),this.status=1}b(Hr,Ut);function Or(m){this.g=m}b(Or,wt),Or.prototype.ra=function(){De(this.g,"a")},Or.prototype.qa=function(m){De(this.g,new pr(m))},Or.prototype.pa=function(m){De(this.g,new Hr)},Or.prototype.oa=function(){De(this.g,"b")},Ft.prototype.createWebChannel=Ft.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,Iv=function(){return new Ft},Ev=function(){return er()},jv=sr,b0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},li.NO_ERROR=0,li.TIMEOUT=8,li.HTTP_ERROR=6,jf=li,Nn.COMPLETE="complete",kv=Nn,Cr.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",ge.prototype.listen=ge.prototype.J,zd=Cr,Er.prototype.listenOnce=Er.prototype.K,Er.prototype.getLastError=Er.prototype.Ha,Er.prototype.getLastErrorCode=Er.prototype.ya,Er.prototype.getStatus=Er.prototype.ca,Er.prototype.getResponseJson=Er.prototype.La,Er.prototype.getResponseText=Er.prototype.la,Er.prototype.send=Er.prototype.ea,Er.prototype.setWithCredentials=Er.prototype.Fa,Cv=Er}).apply(typeof pf<"u"?pf:typeof self<"u"?self:typeof window<"u"?window:{});const N2="@firebase/firestore",L2="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}oo.UNAUTHENTICATED=new oo(null),oo.GOOGLE_CREDENTIALS=new oo("google-credentials-uid"),oo.FIRST_PARTY=new oo("first-party-uid"),oo.MOCK_USER=new oo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rd="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=new Q0("@firebase/firestore");function Iu(){return Uc.logLevel}function gt(r,...e){if(Uc.logLevel<=mr.DEBUG){const t=e.map(eg);Uc.debug(`Firestore (${rd}): ${r}`,...t)}}function hl(r,...e){if(Uc.logLevel<=mr.ERROR){const t=e.map(eg);Uc.error(`Firestore (${rd}): ${r}`,...t)}}function Gu(r,...e){if(Uc.logLevel<=mr.WARN){const t=e.map(eg);Uc.warn(`Firestore (${rd}): ${r}`,...t)}}function eg(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,Rv(r,n,t)}function Rv(r,e,t){let n=`FIRESTORE (${rd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw hl(n),new Error(n)}function Lr(r,e,t,n){let o="Unexpected state";typeof t=="string"?o=t:n=t,r||Rv(e,o,n)}function nr(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ut extends ml{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(oo.UNAUTHENTICATED)))}shutdown(){}}class uA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class dA{constructor(e){this.t=e,this.currentUser=oo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Lr(this.o===void 0,42304);let n=this.i;const o=f=>this.i!==n?(n=this.i,t(f)):Promise.resolve();let a=new ec;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ec,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await o(this.currentUser)}))},u=f=>{gt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(gt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ec)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(gt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Lr(typeof n.accessToken=="string",31837,{l:n}),new Pv(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Lr(e===null||typeof e=="string",2055,{h:e}),new oo(e)}}class hA{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=oo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fA{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new hA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(oo.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class B2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,js(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Lr(this.o===void 0,3512);const n=a=>{a.error!=null&&gt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,gt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const o=a=>{gt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):gt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new B2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Lr(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new B2(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const o=mA(40);for(let a=0;a<o.length;++a)n.length<20&&o[a]<t&&(n+=e.charAt(o[a]%62))}return n}}function gr(r,e){return r<e?-1:r>e?1:0}function w0(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const o=r.charAt(n),a=e.charAt(n);if(o!==a)return Ym(o)===Ym(a)?gr(o,a):Ym(o)?1:-1}return gr(r.length,e.length)}const gA=55296,yA=57343;function Ym(r){const e=r.charCodeAt(0);return e>=gA&&e<=yA}function Ku(r,e,t){return r.length===e.length&&r.every(((n,o)=>t(n,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="__name__";class Ca{constructor(e,t,n){t===void 0?t=0:t>e.length&&Gt(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&Gt(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Ca.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ca?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let o=0;o<n;o++){const a=Ca.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return gr(e.length,t.length)}static compareSegments(e,t){const n=Ca.isNumericId(e),o=Ca.isNumericId(t);return n&&!o?-1:!n&&o?1:n&&o?Ca.extractNumericId(e).compare(Ca.extractNumericId(t)):w0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zl.fromString(e.substring(4,e.length-2))}}class tn extends Ca{construct(e,t,n){return new tn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ut(Ye.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((o=>o.length>0)))}return new tn(t)}static emptyPath(){return new tn([])}}const xA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Oi extends Ca{construct(e,t,n){return new Oi(e,t,n)}static isValidIdentifier(e){return xA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Oi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===F2}static keyField(){return new Oi([F2])}static fromServerFormat(e){const t=[];let n="",o=0;const a=()=>{if(n.length===0)throw new ut(Ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let c=!1;for(;o<e.length;){const u=e[o];if(u==="\\"){if(o+1===e.length)throw new ut(Ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ut(Ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=f,o+=2}else u==="`"?(c=!c,o++):u!=="."||c?(n+=u,o++):(a(),o++)}if(a(),c)throw new ut(Ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Oi(t)}static emptyPath(){return new Oi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.path=e}static fromPath(e){return new Lt(tn.fromString(e))}static fromName(e){return new Lt(tn.fromString(e).popFirst(5))}static empty(){return new Lt(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Lt(new tn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(r,e,t){if(!t)throw new ut(Ye.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function vA(r,e,t,n){if(e===!0&&n===!0)throw new ut(Ye.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function z2(r){if(!Lt.isDocumentKey(r))throw new ut(Ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function O2(r){if(Lt.isDocumentKey(r))throw new ut(Ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Lv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function hp(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Gt(12329,{type:typeof r})}function qc(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ut(Ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hp(r);throw new ut(Ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(r,e){const t={typeString:r};return e&&(t.value=e),t}function dh(r,e){if(!Lv(r))throw new ut(Ye.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const o=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const c=r[n];if(o&&typeof c!==o){t=`JSON field '${n}' must be a ${o}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${n}' field to equal '${a.value}'`;break}}if(t)throw new ut(Ye.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=-62135596800,M2=1e6;class nn{static now(){return nn.fromMillis(Date.now())}static fromDate(e){return nn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*M2);return new nn(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ut(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ut(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<V2)throw new ut(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ut(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/M2}_compareTo(e){return this.seconds===e.seconds?gr(this.nanoseconds,e.nanoseconds):gr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(dh(e,nn._jsonSchema))return new nn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-V2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nn._jsonSchemaVersion="firestore/timestamp/1.0",nn._jsonSchema={type:ei("string",nn._jsonSchemaVersion),seconds:ei("number"),nanoseconds:ei("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{static fromTimestamp(e){return new Zt(e)}static min(){return new Zt(new nn(0,0))}static max(){return new Zt(new nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd=-1;function bA(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,o=Zt.fromTimestamp(n===1e9?new nn(t+1,0):new nn(t,n));return new nc(o,Lt.empty(),e)}function wA(r){return new nc(r.readTime,r.key,Xd)}class nc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new nc(Zt.min(),Lt.empty(),Xd)}static max(){return new nc(Zt.max(),Lt.empty(),Xd)}}function SA(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Lt.comparator(r.documentKey,e.documentKey),t!==0?t:gr(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nd(r){if(r.code!==Ye.FAILED_PRECONDITION||r.message!==_A)throw r;gt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Gt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Xe(((n,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Xe?t:Xe.resolve(t)}catch(t){return Xe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Xe.reject(t)}static resolve(e){return new Xe(((t,n)=>{t(e)}))}static reject(e){return new Xe(((t,n)=>{n(e)}))}static waitFor(e){return new Xe(((t,n)=>{let o=0,a=0,c=!1;e.forEach((u=>{++o,u.next((()=>{++a,c&&a===o&&t()}),(f=>n(f)))})),c=!0,a===o&&t()}))}static or(e){let t=Xe.resolve(!1);for(const n of e)t=t.next((o=>o?Xe.resolve(o):n()));return t}static forEach(e,t){const n=[];return e.forEach(((o,a)=>{n.push(t.call(this,o,a))})),this.waitFor(n)}static mapArray(e,t){return new Xe(((n,o)=>{const a=e.length,c=new Array(a);let u=0;for(let f=0;f<a;f++){const h=f;t(e[h]).next((g=>{c[h]=g,++u,u===a&&n(c)}),(g=>o(g)))}}))}static doWhile(e,t){return new Xe(((n,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):n()};a()}))}}function AA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function id(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=-1;function pp(r){return r==null}function qf(r){return r===0&&1/r==-1/0}function CA(r){return typeof r=="number"&&Number.isInteger(r)&&!qf(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="";function kA(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=D2(e)),e=jA(r.get(t),e);return D2(e)}function jA(r,e){let t=e;const n=r.length;for(let o=0;o<n;o++){const a=r.charAt(o);switch(a){case"\0":t+="";break;case Bv:t+="";break;default:t+=a}}return t}function D2(r){return r+Bv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function cc(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Fv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t){this.comparator=e,this.root=t||zi.EMPTY}insert(e,t){return new _n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zi.BLACK,null,null))}remove(e){return new _n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return t+n.left.size;o<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mf(this.root,e,this.comparator,!1)}getReverseIterator(){return new mf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mf(this.root,e,this.comparator,!0)}}class mf{constructor(e,t,n,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zi{constructor(e,t,n,o,a){this.key=e,this.value=t,this.color=n??zi.RED,this.left=o??zi.EMPTY,this.right=a??zi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,o,a){return new zi(e??this.key,t??this.value,n??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let o=this;const a=n(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,n),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,n)),o.fixUp()}removeMin(){if(this.left.isEmpty())return zi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return zi.EMPTY;n=o.right.min(),o=o.copy(n.key,n.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Gt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Gt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Gt(27949);return e+(this.isRed()?0:1)}}zi.EMPTY=null,zi.RED=!0,zi.BLACK=!1;zi.EMPTY=new class{constructor(){this.size=0}get key(){throw Gt(57766)}get value(){throw Gt(16141)}get color(){throw Gt(16727)}get left(){throw Gt(29726)}get right(){throw Gt(36894)}copy(e,t,n,o,a){return this}insert(e,t,n){return new zi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.comparator=e,this.data=new _n(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const o=n.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $2(this.data.getIterator())}getIteratorFrom(e){return new $2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof ai)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=n.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ai(this.comparator);return t.data=e,t}}class $2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.fields=e,e.sort(Oi.comparator)}static empty(){return new ls([])}unionWith(e){let t=new ai(Oi.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ls(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ku(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new zv("Invalid base64 string: "+a):a}})(e);return new Vi(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a})(e);return new Vi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vi.EMPTY_BYTE_STRING=new Vi("");const EA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ic(r){if(Lr(!!r,39018),typeof r=="string"){let e=0;const t=EA.exec(r);if(Lr(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Dn(r.seconds),nanos:Dn(r.nanos)}}function Dn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function oc(r){return typeof r=="string"?Vi.fromBase64String(r):Vi.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="server_timestamp",Vv="__type__",Mv="__previous_value__",Dv="__local_write_time__";function ng(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Vv])==null?void 0:n.stringValue)===Ov}function mp(r){const e=r.mapValue.fields[Mv];return ng(e)?mp(e):e}function Zd(r){const e=ic(r.mapValue.fields[Dv].timestampValue);return new nn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,t,n,o,a,c,u,f,h,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=g}}const Hf="(default)";class eh{constructor(e,t){this.projectId=e,this.database=t||Hf}static empty(){return new eh("","")}get isDefaultDatabase(){return this.database===Hf}isEqual(e){return e instanceof eh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="__type__",RA="__max__",gf={mapValue:{}},$v="__vector__",Gf="value";function sc(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?ng(r)?4:NA(r)?9007199254740991:PA(r)?10:11:Gt(28295,{value:r})}function La(r,e){if(r===e)return!0;const t=sc(r);if(t!==sc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Zd(r).isEqual(Zd(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=ic(o.timestampValue),u=ic(a.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,a){return oc(o.bytesValue).isEqual(oc(a.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,a){return Dn(o.geoPointValue.latitude)===Dn(a.geoPointValue.latitude)&&Dn(o.geoPointValue.longitude)===Dn(a.geoPointValue.longitude)})(r,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return Dn(o.integerValue)===Dn(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=Dn(o.doubleValue),u=Dn(a.doubleValue);return c===u?qf(c)===qf(u):isNaN(c)&&isNaN(u)}return!1})(r,e);case 9:return Ku(r.arrayValue.values||[],e.arrayValue.values||[],La);case 10:case 11:return(function(o,a){const c=o.mapValue.fields||{},u=a.mapValue.fields||{};if(W2(c)!==W2(u))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(u[f]===void 0||!La(c[f],u[f])))return!1;return!0})(r,e);default:return Gt(52216,{left:r})}}function th(r,e){return(r.values||[]).find((t=>La(t,e)))!==void 0}function Yu(r,e){if(r===e)return 0;const t=sc(r),n=sc(e);if(t!==n)return gr(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return gr(r.booleanValue,e.booleanValue);case 2:return(function(a,c){const u=Dn(a.integerValue||a.doubleValue),f=Dn(c.integerValue||c.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1})(r,e);case 3:return U2(r.timestampValue,e.timestampValue);case 4:return U2(Zd(r),Zd(e));case 5:return w0(r.stringValue,e.stringValue);case 6:return(function(a,c){const u=oc(a),f=oc(c);return u.compareTo(f)})(r.bytesValue,e.bytesValue);case 7:return(function(a,c){const u=a.split("/"),f=c.split("/");for(let h=0;h<u.length&&h<f.length;h++){const g=gr(u[h],f[h]);if(g!==0)return g}return gr(u.length,f.length)})(r.referenceValue,e.referenceValue);case 8:return(function(a,c){const u=gr(Dn(a.latitude),Dn(c.latitude));return u!==0?u:gr(Dn(a.longitude),Dn(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return q2(r.arrayValue,e.arrayValue);case 10:return(function(a,c){var A,v,F,E;const u=a.fields||{},f=c.fields||{},h=(A=u[Gf])==null?void 0:A.arrayValue,g=(v=f[Gf])==null?void 0:v.arrayValue,b=gr(((F=h==null?void 0:h.values)==null?void 0:F.length)||0,((E=g==null?void 0:g.values)==null?void 0:E.length)||0);return b!==0?b:q2(h,g)})(r.mapValue,e.mapValue);case 11:return(function(a,c){if(a===gf.mapValue&&c===gf.mapValue)return 0;if(a===gf.mapValue)return 1;if(c===gf.mapValue)return-1;const u=a.fields||{},f=Object.keys(u),h=c.fields||{},g=Object.keys(h);f.sort(),g.sort();for(let b=0;b<f.length&&b<g.length;++b){const A=w0(f[b],g[b]);if(A!==0)return A;const v=Yu(u[f[b]],h[g[b]]);if(v!==0)return v}return gr(f.length,g.length)})(r.mapValue,e.mapValue);default:throw Gt(23264,{he:t})}}function U2(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return gr(r,e);const t=ic(r),n=ic(e),o=gr(t.seconds,n.seconds);return o!==0?o:gr(t.nanos,n.nanos)}function q2(r,e){const t=r.values||[],n=e.values||[];for(let o=0;o<t.length&&o<n.length;++o){const a=Yu(t[o],n[o]);if(a)return a}return gr(t.length,n.length)}function Ju(r){return S0(r)}function S0(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=ic(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return oc(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Lt.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",o=!0;for(const a of t.values||[])o?o=!1:n+=",",n+=S0(a);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const c of n)a?a=!1:o+=",",o+=`${c}:${S0(t.fields[c])}`;return o+"}"})(r.mapValue):Gt(61005,{value:r})}function Ef(r){switch(sc(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mp(r);return e?16+Ef(e):16;case 5:return 2*r.stringValue.length;case 6:return oc(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((o,a)=>o+Ef(a)),0)})(r.arrayValue);case 10:case 11:return(function(n){let o=0;return cc(n.fields,((a,c)=>{o+=a.length+Ef(c)})),o})(r.mapValue);default:throw Gt(13486,{value:r})}}function H2(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function _0(r){return!!r&&"integerValue"in r}function ig(r){return!!r&&"arrayValue"in r}function G2(r){return!!r&&"nullValue"in r}function K2(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function If(r){return!!r&&"mapValue"in r}function PA(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Wv])==null?void 0:n.stringValue)===$v}function $d(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return cc(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=$d(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$d(r.arrayValue.values[t]);return e}return{...r}}function NA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===RA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.value=e}static empty(){return new Mo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!If(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$d(t)}setAll(e){let t=Oi.emptyPath(),n={},o=[];e.forEach(((c,u)=>{if(!t.isImmediateParentOf(u)){const f=this.getFieldsMap(t);this.applyChanges(f,n,o),n={},o=[],t=u.popLast()}c?n[u.lastSegment()]=$d(c):o.push(u.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,n,o)}delete(e){const t=this.field(e.popLast());If(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return La(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let o=t.mapValue.fields[e.get(n)];If(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,n){cc(t,((o,a)=>e[o]=a));for(const o of n)delete e[o]}clone(){return new Mo($d(this.value))}}function Uv(r){const e=[];return cc(r.fields,((t,n)=>{const o=new Oi([t]);if(If(n)){const a=Uv(n.mapValue).fields;if(a.length===0)e.push(o);else for(const c of a)e.push(o.child(c))}else e.push(o)})),new ls(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,t,n,o,a,c,u){this.key=e,this.documentType=t,this.version=n,this.readTime=o,this.createTime=a,this.data=c,this.documentState=u}static newInvalidDocument(e){return new so(e,0,Zt.min(),Zt.min(),Zt.min(),Mo.empty(),0)}static newFoundDocument(e,t,n,o){return new so(e,1,t,Zt.min(),n,o,0)}static newNoDocument(e,t){return new so(e,2,t,Zt.min(),Zt.min(),Mo.empty(),0)}static newUnknownDocument(e,t){return new so(e,3,t,Zt.min(),Zt.min(),Mo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof so&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new so(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,t){this.position=e,this.inclusive=t}}function Y2(r,e,t){let n=0;for(let o=0;o<r.position.length;o++){const a=e[o],c=r.position[o];if(a.field.isKeyField()?n=Lt.comparator(Lt.fromName(c.referenceValue),t.key):n=Yu(c,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function J2(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!La(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,t="asc"){this.field=e,this.dir=t}}function LA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{}class Zn extends qv{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new FA(e,t,n):t==="array-contains"?new VA(e,n):t==="in"?new MA(e,n):t==="not-in"?new DA(e,n):t==="array-contains-any"?new WA(e,n):new Zn(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new zA(e,n):new OA(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Yu(t,this.value)):t!==null&&sc(this.value)===sc(t)&&this.matchesComparison(Yu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Gt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class na extends qv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new na(e,t)}matches(e){return Hv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Hv(r){return r.op==="and"}function Gv(r){return BA(r)&&Hv(r)}function BA(r){for(const e of r.filters)if(e instanceof na)return!1;return!0}function T0(r){if(r instanceof Zn)return r.field.canonicalString()+r.op.toString()+Ju(r.value);if(Gv(r))return r.filters.map((e=>T0(e))).join(",");{const e=r.filters.map((t=>T0(t))).join(",");return`${r.op}(${e})`}}function Kv(r,e){return r instanceof Zn?(function(n,o){return o instanceof Zn&&n.op===o.op&&n.field.isEqual(o.field)&&La(n.value,o.value)})(r,e):r instanceof na?(function(n,o){return o instanceof na&&n.op===o.op&&n.filters.length===o.filters.length?n.filters.reduce(((a,c,u)=>a&&Kv(c,o.filters[u])),!0):!1})(r,e):void Gt(19439)}function Yv(r){return r instanceof Zn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ju(t.value)}`})(r):r instanceof na?(function(t){return t.op.toString()+" {"+t.getFilters().map(Yv).join(" ,")+"}"})(r):"Filter"}class FA extends Zn{constructor(e,t,n){super(e,t,n),this.key=Lt.fromName(n.referenceValue)}matches(e){const t=Lt.comparator(e.key,this.key);return this.matchesComparison(t)}}class zA extends Zn{constructor(e,t){super(e,"in",t),this.keys=Jv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class OA extends Zn{constructor(e,t){super(e,"not-in",t),this.keys=Jv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Jv(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((n=>Lt.fromName(n.referenceValue)))}class VA extends Zn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ig(t)&&th(t.arrayValue,this.value)}}class MA extends Zn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&th(this.value.arrayValue,t)}}class DA extends Zn{constructor(e,t){super(e,"not-in",t)}matches(e){if(th(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!th(this.value.arrayValue,t)}}class WA extends Zn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ig(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>th(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,t=null,n=[],o=[],a=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=o,this.limit=a,this.startAt=c,this.endAt=u,this.Te=null}}function Q2(r,e=null,t=[],n=[],o=null,a=null,c=null){return new $A(r,e,t,n,o,a,c)}function og(r){const e=nr(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>T0(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),pp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>Ju(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>Ju(n))).join(",")),e.Te=t}return e.Te}function sg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!LA(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Kv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!J2(r.startAt,e.startAt)&&J2(r.endAt,e.endAt)}function A0(r){return Lt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t=null,n=[],o=[],a=null,c="F",u=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=o,this.limit=a,this.limitType=c,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function UA(r,e,t,n,o,a,c,u){return new od(r,e,t,n,o,a,c,u)}function Qv(r){return new od(r)}function X2(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Xv(r){return r.collectionGroup!==null}function Ud(r){const e=nr(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new ai(Oi.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(u=u.add(h.field))}))})),u})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new rh(a,n))})),t.has(Oi.keyField().canonicalString())||e.Ie.push(new rh(Oi.keyField(),n))}return e.Ie}function ja(r){const e=nr(r);return e.Ee||(e.Ee=qA(e,Ud(r))),e.Ee}function qA(r,e){if(r.limitType==="F")return Q2(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new rh(o.field,a)}));const t=r.endAt?new Kf(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new Kf(r.startAt.position,r.startAt.inclusive):null;return Q2(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function C0(r,e){const t=r.filters.concat([e]);return new od(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function k0(r,e,t){return new od(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function gp(r,e){return sg(ja(r),ja(e))&&r.limitType===e.limitType}function Zv(r){return`${og(ja(r))}|lt:${r.limitType}`}function Ru(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((o=>Yv(o))).join(", ")}]`),pp(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((o=>Ju(o))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((o=>Ju(o))).join(",")),`Target(${n})`})(ja(r))}; limitType=${r.limitType})`}function yp(r,e){return e.isFoundDocument()&&(function(n,o){const a=o.key.path;return n.collectionGroup!==null?o.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):Lt.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(r,e)&&(function(n,o){for(const a of Ud(n))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(r,e)&&(function(n,o){for(const a of n.filters)if(!a.matches(o))return!1;return!0})(r,e)&&(function(n,o){return!(n.startAt&&!(function(c,u,f){const h=Y2(c,u,f);return c.inclusive?h<=0:h<0})(n.startAt,Ud(n),o)||n.endAt&&!(function(c,u,f){const h=Y2(c,u,f);return c.inclusive?h>=0:h>0})(n.endAt,Ud(n),o))})(r,e)}function HA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function eb(r){return(e,t)=>{let n=!1;for(const o of Ud(r)){const a=GA(o,e,t);if(a!==0)return a;n=n||o.field.isKeyField()}return 0}}function GA(r,e,t){const n=r.field.isKeyField()?Lt.comparator(e.key,t.key):(function(a,c,u){const f=c.data.field(a),h=u.data.field(a);return f!==null&&h!==null?Yu(f,h):Gt(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Gt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[o,a]of n)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let o=0;o<n.length;o++)if(this.equalsFn(n[o][0],e))return n.length===1?delete this.inner[t]:n.splice(o,1),this.innerSize--,!0;return!1}forEach(e){cc(this.inner,((t,n)=>{for(const[o,a]of n)e(o,a)}))}isEmpty(){return Fv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=new _n(Lt.comparator);function fl(){return KA}const tb=new _n(Lt.comparator);function Od(...r){let e=tb;for(const t of r)e=e.insert(t.key,t);return e}function rb(r){let e=tb;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Fc(){return qd()}function nb(){return qd()}function qd(){return new Xc((r=>r.toString()),((r,e)=>r.isEqual(e)))}const YA=new _n(Lt.comparator),JA=new ai(Lt.comparator);function yr(...r){let e=JA;for(const t of r)e=e.add(t);return e}const QA=new ai(gr);function XA(){return QA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qf(e)?"-0":e}}function ib(r){return{integerValue:""+r}}function ZA(r,e){return CA(e)?ib(e):ag(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(){this._=void 0}}function eC(r,e,t){return r instanceof nh?(function(o,a){const c={fields:{[Vv]:{stringValue:Ov},[Dv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&ng(a)&&(a=mp(a)),a&&(c.fields[Mv]=a),{mapValue:c}})(t,e):r instanceof ih?sb(r,e):r instanceof oh?ab(r,e):(function(o,a){const c=ob(o,a),u=Z2(c)+Z2(o.Ae);return _0(c)&&_0(o.Ae)?ib(u):ag(o.serializer,u)})(r,e)}function tC(r,e,t){return r instanceof ih?sb(r,e):r instanceof oh?ab(r,e):t}function ob(r,e){return r instanceof Yf?(function(n){return _0(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class nh extends xp{}class ih extends xp{constructor(e){super(),this.elements=e}}function sb(r,e){const t=lb(e);for(const n of r.elements)t.some((o=>La(o,n)))||t.push(n);return{arrayValue:{values:t}}}class oh extends xp{constructor(e){super(),this.elements=e}}function ab(r,e){let t=lb(e);for(const n of r.elements)t=t.filter((o=>!La(o,n)));return{arrayValue:{values:t}}}class Yf extends xp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Z2(r){return Dn(r.integerValue||r.doubleValue)}function lb(r){return ig(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,t){this.field=e,this.transform=t}}function nC(r,e){return r.field.isEqual(e.field)&&(function(n,o){return n instanceof ih&&o instanceof ih||n instanceof oh&&o instanceof oh?Ku(n.elements,o.elements,La):n instanceof Yf&&o instanceof Yf?La(n.Ae,o.Ae):n instanceof nh&&o instanceof nh})(r.transform,e.transform)}class iC{constructor(e,t){this.version=e,this.transformResults=t}}class ta{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ta}static exists(e){return new ta(void 0,e)}static updateTime(e){return new ta(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class vp{}function cb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new lg(r.key,ta.none()):new hh(r.key,r.data,ta.none());{const t=r.data,n=Mo.empty();let o=new ai(Oi.comparator);for(let a of e.fields)if(!o.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?n.delete(a):n.set(a,c),o=o.add(a)}return new uc(r.key,n,new ls(o.toArray()),ta.none())}}function oC(r,e,t){r instanceof hh?(function(o,a,c){const u=o.value.clone(),f=ty(o.fieldTransforms,a,c.transformResults);u.setAll(f),a.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(r,e,t):r instanceof uc?(function(o,a,c){if(!Rf(o.precondition,a))return void a.convertToUnknownDocument(c.version);const u=ty(o.fieldTransforms,a,c.transformResults),f=a.data;f.setAll(ub(o)),f.setAll(u),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(r,e,t):(function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Hd(r,e,t,n){return r instanceof hh?(function(a,c,u,f){if(!Rf(a.precondition,c))return u;const h=a.value.clone(),g=ry(a.fieldTransforms,f,c);return h.setAll(g),c.convertToFoundDocument(c.version,h).setHasLocalMutations(),null})(r,e,t,n):r instanceof uc?(function(a,c,u,f){if(!Rf(a.precondition,c))return u;const h=ry(a.fieldTransforms,f,c),g=c.data;return g.setAll(ub(a)),g.setAll(h),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((b=>b.field)))})(r,e,t,n):(function(a,c,u){return Rf(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(r,e,t)}function sC(r,e){let t=null;for(const n of r.fieldTransforms){const o=e.data.field(n.field),a=ob(n.transform,o||null);a!=null&&(t===null&&(t=Mo.empty()),t.set(n.field,a))}return t||null}function ey(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,o){return n===void 0&&o===void 0||!(!n||!o)&&Ku(n,o,((a,c)=>nC(a,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class hh extends vp{constructor(e,t,n,o=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class uc extends vp{constructor(e,t,n,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function ub(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function ty(r,e,t){const n=new Map;Lr(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const a=r[o],c=a.transform,u=e.data.field(a.field);n.set(a.field,tC(c,u,t[o]))}return n}function ry(r,e,t){const n=new Map;for(const o of r){const a=o.transform,c=t.data.field(o.field);n.set(o.field,eC(a,c,e))}return n}class lg extends vp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aC extends vp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,t,n,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=o}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&oC(a,e,n[o])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Hd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Hd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=nb();return this.mutations.forEach((o=>{const a=e.get(o.key),c=a.overlayedDocument;let u=this.applyToLocalView(c,a.mutatedFields);u=t.has(o.key)?null:u;const f=cb(c,u);f!==null&&n.set(o.key,f),c.isValidDocument()||c.convertToNoDocument(Zt.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),yr())}isEqual(e){return this.batchId===e.batchId&&Ku(this.mutations,e.mutations,((t,n)=>ey(t,n)))&&Ku(this.baseMutations,e.baseMutations,((t,n)=>ey(t,n)))}}class cg{constructor(e,t,n,o){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=o}static from(e,t,n){Lr(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let o=(function(){return YA})();const a=e.mutations;for(let c=0;c<a.length;c++)o=o.insert(a[c].key,n[c].version);return new cg(e,t,n,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xn,xr;function dC(r){switch(r){case Ye.OK:return Gt(64938);case Ye.CANCELLED:case Ye.UNKNOWN:case Ye.DEADLINE_EXCEEDED:case Ye.RESOURCE_EXHAUSTED:case Ye.INTERNAL:case Ye.UNAVAILABLE:case Ye.UNAUTHENTICATED:return!1;case Ye.INVALID_ARGUMENT:case Ye.NOT_FOUND:case Ye.ALREADY_EXISTS:case Ye.PERMISSION_DENIED:case Ye.FAILED_PRECONDITION:case Ye.ABORTED:case Ye.OUT_OF_RANGE:case Ye.UNIMPLEMENTED:case Ye.DATA_LOSS:return!0;default:return Gt(15467,{code:r})}}function db(r){if(r===void 0)return hl("GRPC error has no .code"),Ye.UNKNOWN;switch(r){case Xn.OK:return Ye.OK;case Xn.CANCELLED:return Ye.CANCELLED;case Xn.UNKNOWN:return Ye.UNKNOWN;case Xn.DEADLINE_EXCEEDED:return Ye.DEADLINE_EXCEEDED;case Xn.RESOURCE_EXHAUSTED:return Ye.RESOURCE_EXHAUSTED;case Xn.INTERNAL:return Ye.INTERNAL;case Xn.UNAVAILABLE:return Ye.UNAVAILABLE;case Xn.UNAUTHENTICATED:return Ye.UNAUTHENTICATED;case Xn.INVALID_ARGUMENT:return Ye.INVALID_ARGUMENT;case Xn.NOT_FOUND:return Ye.NOT_FOUND;case Xn.ALREADY_EXISTS:return Ye.ALREADY_EXISTS;case Xn.PERMISSION_DENIED:return Ye.PERMISSION_DENIED;case Xn.FAILED_PRECONDITION:return Ye.FAILED_PRECONDITION;case Xn.ABORTED:return Ye.ABORTED;case Xn.OUT_OF_RANGE:return Ye.OUT_OF_RANGE;case Xn.UNIMPLEMENTED:return Ye.UNIMPLEMENTED;case Xn.DATA_LOSS:return Ye.DATA_LOSS;default:return Gt(39323,{code:r})}}(xr=Xn||(Xn={}))[xr.OK=0]="OK",xr[xr.CANCELLED=1]="CANCELLED",xr[xr.UNKNOWN=2]="UNKNOWN",xr[xr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xr[xr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xr[xr.NOT_FOUND=5]="NOT_FOUND",xr[xr.ALREADY_EXISTS=6]="ALREADY_EXISTS",xr[xr.PERMISSION_DENIED=7]="PERMISSION_DENIED",xr[xr.UNAUTHENTICATED=16]="UNAUTHENTICATED",xr[xr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xr[xr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xr[xr.ABORTED=10]="ABORTED",xr[xr.OUT_OF_RANGE=11]="OUT_OF_RANGE",xr[xr.UNIMPLEMENTED=12]="UNIMPLEMENTED",xr[xr.INTERNAL=13]="INTERNAL",xr[xr.UNAVAILABLE=14]="UNAVAILABLE",xr[xr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=new Zl([4294967295,4294967295],0);function ny(r){const e=hC().encode(r),t=new Av;return t.update(e),new Uint8Array(t.digest())}function iy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Zl([t,n],0),new Zl([o,a],0)]}class ug{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Vd(`Invalid padding: ${t}`);if(n<0)throw new Vd(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Vd(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Vd(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Zl.fromNumber(this.ge)}ye(e,t,n){let o=e.add(t.multiply(Zl.fromNumber(n)));return o.compare(fC)===1&&(o=new Zl([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ny(e),[n,o]=iy(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(n,o,a);if(!this.we(c))return!1}return!0}static create(e,t,n){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new ug(a,o,t);return n.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const t=ny(e),[n,o]=iy(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(n,o,a);this.Se(c)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Vd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,t,n,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const o=new Map;return o.set(e,fh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new bp(Zt.min(),o,new _n(gr),fl(),yr())}}class fh{constructor(e,t,n,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new fh(n,t,yr(),yr(),yr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t,n,o){this.be=e,this.removedTargetIds=t,this.key=n,this.De=o}}class hb{constructor(e,t){this.targetId=e,this.Ce=t}}class fb{constructor(e,t,n=Vi.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=o}}class oy{constructor(){this.ve=0,this.Fe=sy(),this.Me=Vi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=yr(),t=yr(),n=yr();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:n=n.add(o);break;default:Gt(38017,{changeType:a})}})),new fh(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=sy()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Lr(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class pC{constructor(e){this.Ge=e,this.ze=new Map,this.je=fl(),this.Je=yf(),this.He=yf(),this.Ye=new _n(gr)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Gt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,n=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(A0(a))if(n===0){const c=new Lt(a.path);this.et(t,c,so.newNoDocument(c,Zt.min()))}else Lr(n===1,20013,{expectedCount:n});else{const c=this._t(t);if(c!==n){const u=this.ut(e),f=u?this.ct(u,e,c):1;if(f!==0){this.it(t);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:o=0},hashCount:a=0}=t;let c,u;try{c=oc(n).toUint8Array()}catch(f){if(f instanceof zv)return Gu("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{u=new ug(c,o,a)}catch(f){return Gu(f instanceof Vd?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let o=0;return n.forEach((a=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,c)=>{const u=this.ot(c);if(u){if(a.current&&A0(u.target)){const f=new Lt(u.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,so.newNoDocument(f,e))}a.Be&&(t.set(c,a.ke()),a.qe())}}));let n=yr();this.He.forEach(((a,c)=>{let u=!0;c.forEachWhile((f=>{const h=this.ot(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const o=new bp(e,t,this.Ye,this.je,n);return this.je=fl(),this.Je=yf(),this.He=yf(),this.Ye=new _n(gr),o}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new oy,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ai(gr),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ai(gr),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||gt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new oy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function yf(){return new _n(Lt.comparator)}function sy(){return new _n(Lt.comparator)}const mC={asc:"ASCENDING",desc:"DESCENDING"},gC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yC={and:"AND",or:"OR"};class xC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function j0(r,e){return r.useProto3Json||pp(e)?e:{value:e}}function Jf(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function vC(r,e){return Jf(r,e.toTimestamp())}function Ea(r){return Lr(!!r,49232),Zt.fromTimestamp((function(t){const n=ic(t);return new nn(n.seconds,n.nanos)})(r))}function dg(r,e){return E0(r,e).canonicalString()}function E0(r,e){const t=(function(o){return new tn(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function mb(r){const e=tn.fromString(r);return Lr(bb(e),10190,{key:e.toString()}),e}function I0(r,e){return dg(r.databaseId,e.path)}function Jm(r,e){const t=mb(e);if(t.get(1)!==r.databaseId.projectId)throw new ut(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ut(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Lt(yb(t))}function gb(r,e){return dg(r.databaseId,e)}function bC(r){const e=mb(r);return e.length===4?tn.emptyPath():yb(e)}function R0(r){return new tn(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function yb(r){return Lr(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function ay(r,e,t){return{name:I0(r,e),fields:t.value.mapValue.fields}}function wC(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Gt(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,g){return h.useProto3Json?(Lr(g===void 0||typeof g=="string",58123),Vi.fromBase64String(g||"")):(Lr(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Vi.fromUint8Array(g||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(h){const g=h.code===void 0?Ye.UNKNOWN:db(h.code);return new ut(g,h.message||"")})(c);t=new fb(n,o,a,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const o=Jm(r,n.document.name),a=Ea(n.document.updateTime),c=n.document.createTime?Ea(n.document.createTime):Zt.min(),u=new Mo({mapValue:{fields:n.document.fields}}),f=so.newFoundDocument(o,a,c,u),h=n.targetIds||[],g=n.removedTargetIds||[];t=new Pf(h,g,f.key,f)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const o=Jm(r,n.document),a=n.readTime?Ea(n.readTime):Zt.min(),c=so.newNoDocument(o,a),u=n.removedTargetIds||[];t=new Pf([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const o=Jm(r,n.document),a=n.removedTargetIds||[];t=new Pf([],a,o,null)}else{if(!("filter"in e))return Gt(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:o=0,unchangedNames:a}=n,c=new uC(o,a),u=n.targetId;t=new hb(u,c)}}return t}function SC(r,e){let t;if(e instanceof hh)t={update:ay(r,e.key,e.value)};else if(e instanceof lg)t={delete:I0(r,e.key)};else if(e instanceof uc)t={update:ay(r,e.key,e.data),updateMask:RC(e.fieldMask)};else{if(!(e instanceof aC))return Gt(16599,{Vt:e.type});t={verify:I0(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(a,c){const u=c.transform;if(u instanceof nh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ih)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof oh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Yf)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw Gt(20930,{transform:c.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:vC(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Gt(27497)})(r,e.precondition)),t}function _C(r,e){return r&&r.length>0?(Lr(e!==void 0,14353),r.map((t=>(function(o,a){let c=o.updateTime?Ea(o.updateTime):Ea(a);return c.isEqual(Zt.min())&&(c=Ea(a)),new iC(c,o.transformResults||[])})(t,e)))):[]}function TC(r,e){return{documents:[gb(r,e.path)]}}function AC(r,e){const t={structuredQuery:{}},n=e.path;let o;e.collectionGroup!==null?(o=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=gb(r,o);const a=(function(h){if(h.length!==0)return vb(na.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(h){if(h.length!==0)return h.map((g=>(function(A){return{field:Pu(A.field),direction:jC(A.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=j0(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:o}}function CC(r){let e=bC(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let o=null;if(n>0){Lr(n===1,65062);const g=t.from[0];g.allDescendants?o=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=(function(b){const A=xb(b);return A instanceof na&&Gv(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(b){return b.map((A=>(function(F){return new rh(Nu(F.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(A)))})(t.orderBy));let u=null;t.limit&&(u=(function(b){let A;return A=typeof b=="object"?b.value:b,pp(A)?null:A})(t.limit));let f=null;t.startAt&&(f=(function(b){const A=!!b.before,v=b.values||[];return new Kf(v,A)})(t.startAt));let h=null;return t.endAt&&(h=(function(b){const A=!b.before,v=b.values||[];return new Kf(v,A)})(t.endAt)),UA(e,o,c,a,u,"F",f,h)}function kC(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Gt(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xb(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Nu(t.unaryFilter.field);return Zn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const o=Nu(t.unaryFilter.field);return Zn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Nu(t.unaryFilter.field);return Zn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Nu(t.unaryFilter.field);return Zn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Gt(61313);default:return Gt(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Zn.create(Nu(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Gt(58110);default:return Gt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return na.create(t.compositeFilter.filters.map((n=>xb(n))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Gt(1026)}})(t.compositeFilter.op))})(r):Gt(30097,{filter:r})}function jC(r){return mC[r]}function EC(r){return gC[r]}function IC(r){return yC[r]}function Pu(r){return{fieldPath:r.canonicalString()}}function Nu(r){return Oi.fromServerFormat(r.fieldPath)}function vb(r){return r instanceof Zn?(function(t){if(t.op==="=="){if(K2(t.value))return{unaryFilter:{field:Pu(t.field),op:"IS_NAN"}};if(G2(t.value))return{unaryFilter:{field:Pu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(K2(t.value))return{unaryFilter:{field:Pu(t.field),op:"IS_NOT_NAN"}};if(G2(t.value))return{unaryFilter:{field:Pu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pu(t.field),op:EC(t.op),value:t.value}}})(r):r instanceof na?(function(t){const n=t.getFilters().map((o=>vb(o)));return n.length===1?n[0]:{compositeFilter:{op:IC(t.op),filters:n}}})(r):Gt(54877,{filter:r})}function RC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function bb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,t,n,o,a=Zt.min(),c=Zt.min(),u=Vi.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=f}withSequenceNumber(e){return new Yl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Yl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.yt=e}}function NC(r){const e=CC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?k0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.Cn=new BC}addToCollectionParentIndex(e,t){return this.Cn.add(t),Xe.resolve()}getCollectionParents(e,t){return Xe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Xe.resolve()}deleteFieldIndex(e,t){return Xe.resolve()}deleteAllFieldIndexes(e){return Xe.resolve()}createTargetIndexes(e,t){return Xe.resolve()}getDocumentsMatchingTarget(e,t){return Xe.resolve(null)}getIndexType(e,t){return Xe.resolve(0)}getFieldIndexes(e,t){return Xe.resolve([])}getNextCollectionGroupToUpdate(e){return Xe.resolve(null)}getMinOffset(e,t){return Xe.resolve(nc.min())}getMinOffsetFromCollectionGroup(e,t){return Xe.resolve(nc.min())}updateCollectionGroup(e,t,n){return Xe.resolve()}updateIndexEntries(e,t){return Xe.resolve()}}class BC{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),o=this.index[t]||new ai(tn.comparator),a=!o.has(n);return this.index[t]=o.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),o=this.index[t];return o&&o.has(n)}getEntries(e){return(this.index[e]||new ai(tn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wb=41943040;class Vo{static withCacheSize(e){return new Vo(e,Vo.DEFAULT_COLLECTION_PERCENTILE,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vo.DEFAULT_COLLECTION_PERCENTILE=10,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vo.DEFAULT=new Vo(wb,Vo.DEFAULT_COLLECTION_PERCENTILE,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vo.DISABLED=new Vo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Qu(0)}static cr(){return new Qu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="LruGarbageCollector",FC=1048576;function uy([r,e],[t,n]){const o=gr(r,t);return o===0?gr(e,n):o}class zC{constructor(e){this.Ir=e,this.buffer=new ai(uy),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();uy(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class OC{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){gt(cy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){id(t)?gt(cy,"Ignoring IndexedDB error during garbage collection: ",t):await nd(t)}await this.Vr(3e5)}))}}class VC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return Xe.resolve(fp.ce);const n=new zC(t);return this.mr.forEachTarget(e,(o=>n.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>n.Ar(o))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(gt("LruGarbageCollector","Garbage collection skipped; disabled"),Xe.resolve(ly)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(gt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ly):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,o,a,c,u,f,h;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(gt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,c=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(n=b,u=Date.now(),this.removeTargets(e,n,t)))).next((b=>(a=b,f=Date.now(),this.removeOrphanedDocuments(e,n)))).next((b=>(h=Date.now(),Iu()<=mr.DEBUG&&gt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${o} in `+(u-c)+`ms
	Removed ${a} targets in `+(f-u)+`ms
	Removed ${b} documents in `+(h-f)+`ms
Total Duration: ${h-g}ms`),Xe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:b}))))}}function MC(r,e){return new VC(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(){this.changes=new Xc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,so.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Xe.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,t,n,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=o}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(n=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(n!==null&&Hd(n.mutation,o,ls.empty(),nn.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,yr()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=yr()){const o=Fc();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,n).next((a=>{let c=Od();return a.forEach(((u,f)=>{c=c.insert(u,f.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const n=Fc();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,yr())))}populateOverlays(e,t,n){const o=[];return n.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((c,u)=>{t.set(c,u)}))}))}computeViews(e,t,n,o){let a=fl();const c=qd(),u=(function(){return qd()})();return t.forEach(((f,h)=>{const g=n.get(h.key);o.has(h.key)&&(g===void 0||g.mutation instanceof uc)?a=a.insert(h.key,h):g!==void 0?(c.set(h.key,g.mutation.getFieldMask()),Hd(g.mutation,h,g.mutation.getFieldMask(),nn.now())):c.set(h.key,ls.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((h,g)=>c.set(h,g))),t.forEach(((h,g)=>u.set(h,new WC(g,c.get(h)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=qd();let o=new _n(((c,u)=>c-u)),a=yr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const u of c)u.keys().forEach((f=>{const h=t.get(f);if(h===null)return;let g=n.get(f)||ls.empty();g=u.applyToLocalView(h,g),n.set(f,g);const b=(o.get(u.batchId)||yr()).add(f);o=o.insert(u.batchId,b)}))})).next((()=>{const c=[],u=o.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),h=f.key,g=f.value,b=nb();g.forEach((A=>{if(!a.has(A)){const v=cb(t.get(A),n.get(A));v!==null&&b.set(A,v),a=a.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,h,b))}return Xe.waitFor(c)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,o){return(function(c){return Lt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Xv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,o):this.getDocumentsMatchingCollectionQuery(e,t,n,o)}getNextDocuments(e,t,n,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,o).next((a=>{const c=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,o-a.size):Xe.resolve(Fc());let u=Xd,f=a;return c.next((h=>Xe.forEach(h,((g,b)=>(u<b.largestBatchId&&(u=b.largestBatchId),a.get(g)?Xe.resolve():this.remoteDocumentCache.getEntry(e,g).next((A=>{f=f.insert(g,A)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,f,h,yr()))).next((g=>({batchId:u,changes:rb(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Lt(t)).next((n=>{let o=Od();return n.isFoundDocument()&&(o=o.insert(n.key,n)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,o){const a=t.collectionGroup;let c=Od();return this.indexManager.getCollectionParents(e,a).next((u=>Xe.forEach(u,(f=>{const h=(function(b,A){return new od(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,n,o).next((g=>{g.forEach(((b,A)=>{c=c.insert(b,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,n,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,o)))).next((c=>{a.forEach(((f,h)=>{const g=h.getKey();c.get(g)===null&&(c=c.insert(g,so.newInvalidDocument(g)))}));let u=Od();return c.forEach(((f,h)=>{const g=a.get(f);g!==void 0&&Hd(g.mutation,h,ls.empty(),nn.now()),yp(t,h)&&(u=u.insert(f,h))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Xe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ea(o.createTime)}})(t)),Xe.resolve()}getNamedQuery(e,t){return Xe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:NC(o.bundledQuery),readTime:Ea(o.readTime)}})(t)),Xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.overlays=new _n(Lt.comparator),this.qr=new Map}getOverlay(e,t){return Xe.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Fc();return Xe.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&n.set(o,a)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((o,a)=>{this.St(e,t,a)})),Xe.resolve()}removeOverlaysForBatchId(e,t,n){const o=this.qr.get(n);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(n)),Xe.resolve()}getOverlaysForCollection(e,t,n){const o=Fc(),a=t.length+1,c=new Lt(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const f=u.getNext().value,h=f.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&f.largestBatchId>n&&o.set(f.getKey(),f)}return Xe.resolve(o)}getOverlaysForCollectionGroup(e,t,n,o){let a=new _n(((h,g)=>h-g));const c=this.overlays.getIterator();for(;c.hasNext();){const h=c.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>n){let g=a.get(h.largestBatchId);g===null&&(g=Fc(),a=a.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const u=Fc(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,g)=>u.set(h,g))),!(u.size()>=o)););return Xe.resolve(u)}St(e,t,n){const o=this.overlays.get(n.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(n.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new cC(t,n));let a=this.qr.get(t);a===void 0&&(a=yr(),this.qr.set(t,a)),this.qr.set(t,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.sessionToken=Vi.EMPTY_BYTE_STRING}getSessionToken(e){return Xe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Xe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.Qr=new ai(_i.$r),this.Ur=new ai(_i.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new _i(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new _i(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new Lt(new tn([])),n=new _i(t,e),o=new _i(t,e+1),a=[];return this.Ur.forEachInRange([n,o],(c=>{this.Gr(c),a.push(c.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Lt(new tn([])),n=new _i(t,e),o=new _i(t,e+1);let a=yr();return this.Ur.forEachInRange([n,o],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new _i(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class _i{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Lt.comparator(e.key,t.key)||gr(e.Yr,t.Yr)}static Kr(e,t){return gr(e.Yr,t.Yr)||Lt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ai(_i.$r)}checkEmpty(e){return Xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new lC(a,t,n,o);this.mutationQueue.push(c);for(const u of o)this.Zr=this.Zr.add(new _i(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Xe.resolve(c)}lookupMutationBatch(e,t){return Xe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,o=this.ei(n),a=o<0?0:o;return Xe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(this.mutationQueue.length===0?rg:this.tr-1)}getAllMutationBatches(e){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new _i(t,0),o=new _i(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,o],(c=>{const u=this.Xr(c.Yr);a.push(u)})),Xe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ai(gr);return t.forEach((o=>{const a=new _i(o,0),c=new _i(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,c],(u=>{n=n.add(u.Yr)}))})),Xe.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,o=n.length+1;let a=n;Lt.isDocumentKey(a)||(a=a.child(""));const c=new _i(new Lt(a),0);let u=new ai(gr);return this.Zr.forEachWhile((f=>{const h=f.key.path;return!!n.isPrefixOf(h)&&(h.length===o&&(u=u.add(f.Yr)),!0)}),c),Xe.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((n=>{const o=this.Xr(n);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Lr(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Xe.forEach(t.mutations,(o=>{const a=new _i(o.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new _i(t,0),o=this.Zr.firstAfterOrEqual(n);return Xe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Xe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.ri=e,this.docs=(function(){return new _n(Lt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,o=this.docs.get(n),a=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Xe.resolve(n?n.document.mutableCopy():so.newInvalidDocument(t))}getEntries(e,t){let n=fl();return t.forEach((o=>{const a=this.docs.get(o);n=n.insert(o,a?a.document.mutableCopy():so.newInvalidDocument(o))})),Xe.resolve(n)}getDocumentsMatchingQuery(e,t,n,o){let a=fl();const c=t.path,u=new Lt(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:h,value:{document:g}}=f.getNext();if(!c.isPrefixOf(h.path))break;h.path.length>c.length+1||SA(wA(g),n)<=0||(o.has(g.key)||yp(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return Xe.resolve(a)}getAllFromCollectionGroup(e,t,n,o){Gt(9500)}ii(e,t){return Xe.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new YC(this)}getSize(e){return Xe.resolve(this.size)}}class YC extends DC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(n)})),Xe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.persistence=e,this.si=new Xc((t=>og(t)),sg),this.lastRemoteSnapshotVersion=Zt.min(),this.highestTargetId=0,this.oi=0,this._i=new hg,this.targetCount=0,this.ai=Qu.ur()}forEachTarget(e,t){return this.si.forEach(((n,o)=>t(o))),Xe.resolve()}getLastRemoteSnapshotVersion(e){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Xe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Qu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Xe.resolve()}updateTargetData(e,t){return this.Pr(t),Xe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(e,t,n){let o=0;const a=[];return this.si.forEach(((c,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.si.delete(c),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),o++)})),Xe.waitFor(a).next((()=>o))}getTargetCount(e){return Xe.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Xe.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Xe.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((c=>{a.push(o.markPotentiallyOrphaned(e,c))})),Xe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Xe.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Xe.resolve(n)}containsKey(e,t){return Xe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,t){this.ui={},this.overlays={},this.ci=new fp(0),this.li=!1,this.li=!0,this.hi=new HC,this.referenceDelegate=e(this),this.Pi=new JC(this),this.indexManager=new LC,this.remoteDocumentCache=(function(o){return new KC(o)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new PC(t),this.Ii=new UC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new GC(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){gt("MemoryPersistence","Starting transaction:",e);const o=new QC(this.ci.next());return this.referenceDelegate.Ei(),n(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return Xe.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class QC extends TA{constructor(e){super(),this.currentSequenceNumber=e}}class fg{constructor(e){this.persistence=e,this.Ri=new hg,this.Vi=null}static mi(e){return new fg(e)}get fi(){if(this.Vi)return this.Vi;throw Gt(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Xe.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Xe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Xe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.fi,(n=>{const o=Lt.fromPath(n);return this.gi(e,o).next((a=>{a||t.removeEntry(o,Zt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Xe.or([()=>Xe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Qf{constructor(e,t){this.persistence=e,this.pi=new Xc((n=>kA(n.path)),((n,o)=>n.isEqual(o))),this.garbageCollector=MC(this,t)}static mi(e,t){return new Qf(e,t)}Ei(){}di(e){return Xe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((o=>n+o))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return Xe.forEach(this.pi,((n,o)=>this.br(e,n,o).next((a=>a?Xe.resolve():t(o)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((u=>{u||(n++,a.removeEntry(c,Zt.min()))})))).next((()=>a.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Xe.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Xe.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Xe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Xe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ef(e.data.value)),t}br(e,t,n){return Xe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return Xe.resolve(o!==void 0&&o>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,t,n,o){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=o}static As(e,t){let n=yr(),o=yr();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new pg(e,t.fromCache,n,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return qT()?8:AA(ao())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,o){const a={result:null};return this.ys(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ws(e,t,o,n).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new XC;return this.Ss(e,t,c).next((u=>{if(a.result=u,this.Vs)return this.bs(e,t,c,u.size)}))})).next((()=>a.result))}bs(e,t,n,o){return n.documentReadCount<this.fs?(Iu()<=mr.DEBUG&&gt("QueryEngine","SDK will not create cache indexes for query:",Ru(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Xe.resolve()):(Iu()<=mr.DEBUG&&gt("QueryEngine","Query:",Ru(t),"scans",n.documentReadCount,"local documents and returns",o,"documents as results."),n.documentReadCount>this.gs*o?(Iu()<=mr.DEBUG&&gt("QueryEngine","The SDK decides to create cache indexes for query:",Ru(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ja(t))):Xe.resolve())}ys(e,t){if(X2(t))return Xe.resolve(null);let n=ja(t);return this.indexManager.getIndexType(e,n).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=k0(t,null,"F"),n=ja(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const c=yr(...a);return this.ps.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,n).next((f=>{const h=this.Ds(t,u);return this.Cs(t,h,c,f.readTime)?this.ys(e,k0(t,null,"F")):this.vs(e,h,t,f)}))))})))))}ws(e,t,n,o){return X2(t)||o.isEqual(Zt.min())?Xe.resolve(null):this.ps.getDocuments(e,n).next((a=>{const c=this.Ds(t,a);return this.Cs(t,c,n,o)?Xe.resolve(null):(Iu()<=mr.DEBUG&&gt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ru(t)),this.vs(e,c,t,bA(o,Xd)).next((u=>u)))}))}Ds(e,t){let n=new ai(eb(e));return t.forEach(((o,a)=>{yp(e,a)&&(n=n.add(a))})),n}Cs(e,t,n,o){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,n){return Iu()<=mr.DEBUG&&gt("QueryEngine","Using full collection scan to execute query:",Ru(t)),this.ps.getDocumentsMatchingQuery(e,t,nc.min(),n)}vs(e,t,n,o){return this.ps.getDocumentsMatchingQuery(e,n,o).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="LocalStore",ek=3e8;class tk{constructor(e,t,n,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new _n(gr),this.xs=new Xc((a=>og(a)),sg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $C(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function rk(r,e,t,n){return new tk(r,e,t,n)}async function _b(r,e){const t=nr(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let o;return t.mutationQueue.getAllMutationBatches(n).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((a=>{const c=[],u=[];let f=yr();for(const h of o){c.push(h.batchId);for(const g of h.mutations)f=f.add(g.key)}for(const h of a){u.push(h.batchId);for(const g of h.mutations)f=f.add(g.key)}return t.localDocuments.getDocuments(n,f).next((h=>({Ls:h,removedBatchIds:c,addedBatchIds:u})))}))}))}function nk(r,e){const t=nr(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,f,h,g){const b=h.batch,A=b.keys();let v=Xe.resolve();return A.forEach((F=>{v=v.next((()=>g.getEntry(f,F))).next((E=>{const N=h.docVersions.get(F);Lr(N!==null,48541),E.version.compareTo(N)<0&&(b.applyToRemoteDocument(E,h),E.isValidDocument()&&(E.setReadTime(h.commitVersion),g.addEntry(E)))}))})),v.next((()=>u.mutationQueue.removeMutationBatch(f,b)))})(t,n,e,a).next((()=>a.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let f=yr();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(f=f.add(u.batch.mutations[h].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(n,o)))}))}function Tb(r){const e=nr(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function ik(r,e){const t=nr(r),n=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const u=[];e.targetChanges.forEach(((g,b)=>{const A=o.get(b);if(!A)return;u.push(t.Pi.removeMatchingKeys(a,g.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(a,g.addedDocuments,b))));let v=A.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(b)!==null?v=v.withResumeToken(Vi.EMPTY_BYTE_STRING,Zt.min()).withLastLimboFreeSnapshotVersion(Zt.min()):g.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(g.resumeToken,n)),o=o.insert(b,v),(function(E,N,j){return E.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=ek?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(A,v,g)&&u.push(t.Pi.updateTargetData(a,v))}));let f=fl(),h=yr();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))})),u.push(ok(a,c,e.documentUpdates).next((g=>{f=g.ks,h=g.qs}))),!n.isEqual(Zt.min())){const g=t.Pi.getLastRemoteSnapshotVersion(a).next((b=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n)));u.push(g)}return Xe.waitFor(u).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,h))).next((()=>f))})).then((a=>(t.Ms=o,a)))}function ok(r,e,t){let n=yr(),o=yr();return t.forEach((a=>n=n.add(a))),e.getEntries(r,n).next((a=>{let c=fl();return t.forEach(((u,f)=>{const h=a.get(u);f.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(u)),f.isNoDocument()&&f.version.isEqual(Zt.min())?(e.removeEntry(u,f.readTime),c=c.insert(u,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),c=c.insert(u,f)):gt(mg,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",f.version)})),{ks:c,qs:o}}))}function sk(r,e){const t=nr(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=rg),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function ak(r,e){const t=nr(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let o;return t.Pi.getTargetData(n,e).next((a=>a?(o=a,Xe.resolve(o)):t.Pi.allocateTargetId(n).next((c=>(o=new Yl(e,c,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,o).next((()=>o)))))))})).then((n=>{const o=t.Ms.get(n.targetId);return(o===null||n.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function P0(r,e,t){const n=nr(r),o=n.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,(c=>n.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!id(c))throw c;gt(mg,`Failed to update sequence numbers for target ${e}: ${c}`)}n.Ms=n.Ms.remove(e),n.xs.delete(o.target)}function dy(r,e,t){const n=nr(r);let o=Zt.min(),a=yr();return n.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,h,g){const b=nr(f),A=b.xs.get(g);return A!==void 0?Xe.resolve(b.Ms.get(A)):b.Pi.getTargetData(h,g)})(n,c,ja(e)).next((u=>{if(u)return o=u.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(c,u.targetId).next((f=>{a=f}))})).next((()=>n.Fs.getDocumentsMatchingQuery(c,e,t?o:Zt.min(),t?a:yr()))).next((u=>(lk(n,HA(e),u),{documents:u,Qs:a})))))}function lk(r,e,t){let n=r.Os.get(e)||Zt.min();t.forEach(((o,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),r.Os.set(e,n)}class hy{constructor(){this.activeTargetIds=XA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ck{constructor(){this.Mo=new hy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new hy,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="ConnectivityMonitor";class py{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){gt(fy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){gt(fy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xf=null;function N0(){return xf===null?xf=(function(){return 268435456+Math.round(2147483648*Math.random())})():xf++,"0x"+xf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="RestConnection",dk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${o}`,this.Wo=this.databaseId.database===Hf?`project_id=${n}`:`project_id=${n}&database_id=${o}`}Go(e,t,n,o,a){const c=N0(),u=this.zo(e,t.toUriEncodedString());gt(Qm,`Sending RPC '${e}' ${c}:`,u,n);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,o,a);const{host:h}=new URL(u),g=ed(h);return this.Jo(e,u,f,n,g).then((b=>(gt(Qm,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw Gu(Qm,`RPC '${e}' ${c} failed with error: `,b,"url: ",u,"request:",n),b}))}Ho(e,t,n,o,a,c){return this.Go(e,t,n,o,a)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),n&&n.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const n=dk[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="WebChannelConnection";class pk extends hk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,o,a){const c=N0();return new Promise(((u,f)=>{const h=new Cv;h.setWithCredentials(!0),h.listenOnce(kv.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case jf.NO_ERROR:const b=h.getResponseJson();gt(io,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),u(b);break;case jf.TIMEOUT:gt(io,`RPC '${e}' ${c} timed out`),f(new ut(Ye.DEADLINE_EXCEEDED,"Request time out"));break;case jf.HTTP_ERROR:const A=h.getStatus();if(gt(io,`RPC '${e}' ${c} failed with status:`,A,"response text:",h.getResponseText()),A>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const F=v==null?void 0:v.error;if(F&&F.status&&F.message){const E=(function(j){const $=j.toLowerCase().replace(/_/g,"-");return Object.values(Ye).indexOf($)>=0?$:Ye.UNKNOWN})(F.status);f(new ut(E,F.message))}else f(new ut(Ye.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new ut(Ye.UNAVAILABLE,"Connection failed."));break;default:Gt(9055,{l_:e,streamId:c,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{gt(io,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(o);gt(io,`RPC '${e}' ${c} sending request:`,o),h.send(t,"POST",g,n,15)}))}T_(e,t,n){const o=N0(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Iv(),u=Ev(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,n),f.encodeInitMessageHeaders=!0;const g=a.join("");gt(io,`Creating RPC '${e}' stream ${o}: ${g}`,f);const b=c.createWebChannel(g,f);this.I_(b);let A=!1,v=!1;const F=new fk({Yo:N=>{v?gt(io,`Not sending because RPC '${e}' stream ${o} is closed:`,N):(A||(gt(io,`Opening RPC '${e}' stream ${o} transport.`),b.open(),A=!0),gt(io,`RPC '${e}' stream ${o} sending:`,N),b.send(N))},Zo:()=>b.close()}),E=(N,j,$)=>{N.listen(j,(V=>{try{$(V)}catch(B){setTimeout((()=>{throw B}),0)}}))};return E(b,zd.EventType.OPEN,(()=>{v||(gt(io,`RPC '${e}' stream ${o} transport opened.`),F.o_())})),E(b,zd.EventType.CLOSE,(()=>{v||(v=!0,gt(io,`RPC '${e}' stream ${o} transport closed`),F.a_(),this.E_(b))})),E(b,zd.EventType.ERROR,(N=>{v||(v=!0,Gu(io,`RPC '${e}' stream ${o} transport errored. Name:`,N.name,"Message:",N.message),F.a_(new ut(Ye.UNAVAILABLE,"The operation could not be completed")))})),E(b,zd.EventType.MESSAGE,(N=>{var j;if(!v){const $=N.data[0];Lr(!!$,16349);const V=$,B=(V==null?void 0:V.error)||((j=V[0])==null?void 0:j.error);if(B){gt(io,`RPC '${e}' stream ${o} received error:`,B);const X=B.status;let se=(function(w){const O=Xn[w];if(O!==void 0)return db(O)})(X),U=B.message;se===void 0&&(se=Ye.INTERNAL,U="Unknown error status: "+X+" with message "+B.message),v=!0,F.a_(new ut(se,U)),b.close()}else gt(io,`RPC '${e}' stream ${o} received:`,$),F.u_($)}})),E(u,jv.STAT_EVENT,(N=>{N.stat===b0.PROXY?gt(io,`RPC '${e}' stream ${o} detected buffering proxy`):N.stat===b0.NOPROXY&&gt(io,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{F.__()}),0),F}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Xm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(r){return new xC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,t,n=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-n);o>0&&gt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="PersistentStream";class Cb{constructor(e,t,n,o,a,c,u,f){this.Mi=e,this.S_=n,this.b_=o,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ab(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ye.RESOURCE_EXHAUSTED?(hl(t.toString()),hl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,o])=>{this.D_===t&&this.G_(n,o)}),(n=>{e((()=>{const o=new ut(Ye.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(o)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{n((()=>this.z_(o)))})),this.stream.onMessage((o=>{n((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return gt(my,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(gt(my,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class mk extends Cb{constructor(e,t,n,o,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,o,c),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=wC(this.serializer,e),n=(function(a){if(!("targetChange"in a))return Zt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Zt.min():c.readTime?Ea(c.readTime):Zt.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=R0(this.serializer),t.addTarget=(function(a,c){let u;const f=c.target;if(u=A0(f)?{documents:TC(a,f)}:{query:AC(a,f).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=pb(a,c.resumeToken);const h=j0(a,c.expectedCount);h!==null&&(u.expectedCount=h)}else if(c.snapshotVersion.compareTo(Zt.min())>0){u.readTime=Jf(a,c.snapshotVersion.toTimestamp());const h=j0(a,c.expectedCount);h!==null&&(u.expectedCount=h)}return u})(this.serializer,e);const n=kC(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=R0(this.serializer),t.removeTarget=e,this.q_(t)}}class gk extends Cb{constructor(e,t,n,o,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,o,c),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Lr(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Lr(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Lr(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=_C(e.writeResults,e.commitTime),n=Ea(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=R0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>SC(this.serializer,n)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{}class xk extends yk{constructor(e,t,n,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ut(Ye.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Go(e,E0(t,n),o,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ut(Ye.UNKNOWN,a.toString())}))}Ho(e,t,n,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Ho(e,E0(t,n),o,c,u,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ut(Ye.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class vk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hl(t),this.aa=!1):gt("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc="RemoteStore";class bk{constructor(e,t,n,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((c=>{n.enqueueAndForget((async()=>{Zc(this)&&(gt(Hc,"Restarting streams for network reachability change."),await(async function(f){const h=nr(f);h.Ea.add(4),await ph(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Sp(h)})(this))}))})),this.Ra=new vk(n,o)}}async function Sp(r){if(Zc(r))for(const e of r.da)await e(!0)}async function ph(r){for(const e of r.da)await e(!1)}function kb(r,e){const t=nr(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),vg(t)?xg(t):sd(t).O_()&&yg(t,e))}function gg(r,e){const t=nr(r),n=sd(t);t.Ia.delete(e),n.O_()&&jb(t,e),t.Ia.size===0&&(n.O_()?n.L_():Zc(t)&&t.Ra.set("Unknown"))}function yg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Zt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sd(r).Y_(e)}function jb(r,e){r.Va.Ue(e),sd(r).Z_(e)}function xg(r){r.Va=new pC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),sd(r).start(),r.Ra.ua()}function vg(r){return Zc(r)&&!sd(r).x_()&&r.Ia.size>0}function Zc(r){return nr(r).Ea.size===0}function Eb(r){r.Va=void 0}async function wk(r){r.Ra.set("Online")}async function Sk(r){r.Ia.forEach(((e,t)=>{yg(r,e)}))}async function _k(r,e){Eb(r),vg(r)?(r.Ra.ha(e),xg(r)):r.Ra.set("Unknown")}async function Tk(r,e,t){if(r.Ra.set("Online"),e instanceof fb&&e.state===2&&e.cause)try{await(async function(o,a){const c=a.cause;for(const u of a.targetIds)o.Ia.has(u)&&(await o.remoteSyncer.rejectListen(u,c),o.Ia.delete(u),o.Va.removeTarget(u))})(r,e)}catch(n){gt(Hc,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Xf(r,n)}else if(e instanceof Pf?r.Va.Ze(e):e instanceof hb?r.Va.st(e):r.Va.tt(e),!t.isEqual(Zt.min()))try{const n=await Tb(r.localStore);t.compareTo(n)>=0&&await(function(a,c){const u=a.Va.Tt(c);return u.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const g=a.Ia.get(h);g&&a.Ia.set(h,g.withResumeToken(f.resumeToken,c))}})),u.targetMismatches.forEach(((f,h)=>{const g=a.Ia.get(f);if(!g)return;a.Ia.set(f,g.withResumeToken(Vi.EMPTY_BYTE_STRING,g.snapshotVersion)),jb(a,f);const b=new Yl(g.target,f,h,g.sequenceNumber);yg(a,b)})),a.remoteSyncer.applyRemoteEvent(u)})(r,t)}catch(n){gt(Hc,"Failed to raise snapshot:",n),await Xf(r,n)}}async function Xf(r,e,t){if(!id(e))throw e;r.Ea.add(1),await ph(r),r.Ra.set("Offline"),t||(t=()=>Tb(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{gt(Hc,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Sp(r)}))}function Ib(r,e){return e().catch((t=>Xf(r,t,e)))}async function _p(r){const e=nr(r),t=ac(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:rg;for(;Ak(e);)try{const o=await sk(e.localStore,n);if(o===null){e.Ta.length===0&&t.L_();break}n=o.batchId,Ck(e,o)}catch(o){await Xf(e,o)}Rb(e)&&Pb(e)}function Ak(r){return Zc(r)&&r.Ta.length<10}function Ck(r,e){r.Ta.push(e);const t=ac(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Rb(r){return Zc(r)&&!ac(r).x_()&&r.Ta.length>0}function Pb(r){ac(r).start()}async function kk(r){ac(r).ra()}async function jk(r){const e=ac(r);for(const t of r.Ta)e.ea(t.mutations)}async function Ek(r,e,t){const n=r.Ta.shift(),o=cg.from(n,e,t);await Ib(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await _p(r)}async function Ik(r,e){e&&ac(r).X_&&await(async function(n,o){if((function(c){return dC(c)&&c!==Ye.ABORTED})(o.code)){const a=n.Ta.shift();ac(n).B_(),await Ib(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,o))),await _p(n)}})(r,e),Rb(r)&&Pb(r)}async function gy(r,e){const t=nr(r);t.asyncQueue.verifyOperationInProgress(),gt(Hc,"RemoteStore received new credentials");const n=Zc(t);t.Ea.add(3),await ph(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Sp(t)}async function Rk(r,e){const t=nr(r);e?(t.Ea.delete(2),await Sp(t)):e||(t.Ea.add(2),await ph(t),t.Ra.set("Unknown"))}function sd(r){return r.ma||(r.ma=(function(t,n,o){const a=nr(t);return a.sa(),new mk(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(r.datastore,r.asyncQueue,{Xo:wk.bind(null,r),t_:Sk.bind(null,r),r_:_k.bind(null,r),H_:Tk.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),vg(r)?xg(r):r.Ra.set("Unknown")):(await r.ma.stop(),Eb(r))}))),r.ma}function ac(r){return r.fa||(r.fa=(function(t,n,o){const a=nr(t);return a.sa(),new gk(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:kk.bind(null,r),r_:Ik.bind(null,r),ta:jk.bind(null,r),na:Ek.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await _p(r)):(await r.fa.stop(),r.Ta.length>0&&(gt(Hc,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,t,n,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=o,this.removalCallback=a,this.deferred=new ec,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,o,a){const c=Date.now()+n,u=new bg(e,t,c,o,a);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ut(Ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wg(r,e){if(hl("AsyncQueue",`${e}: ${r}`),id(r))return new ut(Ye.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{static emptySet(e){return new Mu(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Lt.comparator(t.key,n.key):(t,n)=>Lt.comparator(t.key,n.key),this.keyedMap=Od(),this.sortedSet=new _n(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=n.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Mu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(){this.ga=new _n(Lt.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Gt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Xu{constructor(e,t,n,o,a,c,u,f,h){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=o,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,t,n,o,a){const c=[];return t.forEach((u=>{c.push({type:0,doc:u})})),new Xu(e,t,Mu.emptySet(t),c,n,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==n[o].type||!t[o].doc.isEqual(n[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Nk{constructor(){this.queries=xy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const o=nr(t),a=o.queries;o.queries=xy(),a.forEach(((c,u)=>{for(const f of u.Sa)f.onError(n)}))})(this,new ut(Ye.ABORTED,"Firestore shutting down"))}}function xy(){return new Xc((r=>Zv(r)),gp)}async function Lk(r,e){const t=nr(r);let n=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(n=2):(a=new Pk,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const u=wg(c,`Initialization of query '${Ru(e.query)}' failed`);return void e.onError(u)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Sg(t)}async function Bk(r,e){const t=nr(r),n=e.query;let o=3;const a=t.queries.get(n);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function Fk(r,e){const t=nr(r);let n=!1;for(const o of e){const a=o.query,c=t.queries.get(a);if(c){for(const u of c.Sa)u.Fa(o)&&(n=!0);c.wa=o}}n&&Sg(t)}function zk(r,e,t){const n=nr(r),o=n.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);n.queries.delete(e)}function Sg(r){r.Ca.forEach((e=>{e.next()}))}var L0,vy;(vy=L0||(L0={})).Ma="default",vy.Cache="cache";class Ok{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const o of e.docChanges)o.type!==3&&n.push(o);e=new Xu(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Xu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==L0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e){this.key=e}}class Lb{constructor(e){this.key=e}}class Vk{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=yr(),this.mutatedKeys=yr(),this.eu=eb(e),this.tu=new Mu(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new yy,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,c=o,u=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((g,b)=>{const A=o.get(g),v=yp(this.query,b)?b:null,F=!!A&&this.mutatedKeys.has(A.key),E=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let N=!1;A&&v?A.data.isEqual(v.data)?F!==E&&(n.track({type:3,doc:v}),N=!0):this.su(A,v)||(n.track({type:2,doc:v}),N=!0,(f&&this.eu(v,f)>0||h&&this.eu(v,h)<0)&&(u=!0)):!A&&v?(n.track({type:0,doc:v}),N=!0):A&&!v&&(n.track({type:1,doc:A}),N=!0,(f||h)&&(u=!0)),N&&(v?(c=c.add(v),a=E?a.add(g):a.delete(g)):(c=c.delete(g),a=a.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),a=a.delete(g.key),n.track({type:1,doc:g})}return{tu:c,iu:n,Cs:u,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,b)=>(function(v,F){const E=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Gt(20277,{Rt:N})}};return E(v)-E(F)})(g.type,b.type)||this.eu(g.doc,b.doc))),this.ou(n),o=o??!1;const u=t&&!o?this._u():[],f=this.Xa.size===0&&this.current&&!o?1:0,h=f!==this.Za;return this.Za=f,c.length!==0||h?{snapshot:new Xu(this.query,e.tu,a,c,e.mutatedKeys,f===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new yy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=yr(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new Lb(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new Nb(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=yr();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Xu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const _g="SyncEngine";class Mk{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Dk{constructor(e){this.key=e,this.hu=!1}}class Wk{constructor(e,t,n,o,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Xc((u=>Zv(u)),gp),this.Iu=new Map,this.Eu=new Set,this.du=new _n(Lt.comparator),this.Au=new Map,this.Ru=new hg,this.Vu={},this.mu=new Map,this.fu=Qu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $k(r,e,t=!0){const n=Mb(r);let o;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await Bb(n,e,t,!0),o}async function Uk(r,e){const t=Mb(r);await Bb(t,e,!0,!1)}async function Bb(r,e,t,n){const o=await ak(r.localStore,ja(e)),a=o.targetId,c=r.sharedClientState.addLocalQueryTarget(a,t);let u;return n&&(u=await qk(r,e,a,c==="current",o.resumeToken)),r.isPrimaryClient&&t&&kb(r.remoteStore,o),u}async function qk(r,e,t,n,o){r.pu=(b,A,v)=>(async function(E,N,j,$){let V=N.view.ru(j);V.Cs&&(V=await dy(E.localStore,N.query,!1).then((({documents:U})=>N.view.ru(U,V))));const B=$&&$.targetChanges.get(N.targetId),X=$&&$.targetMismatches.get(N.targetId)!=null,se=N.view.applyChanges(V,E.isPrimaryClient,B,X);return wy(E,N.targetId,se.au),se.snapshot})(r,b,A,v);const a=await dy(r.localStore,e,!0),c=new Vk(e,a.Qs),u=c.ru(a.documents),f=fh.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",o),h=c.applyChanges(u,r.isPrimaryClient,f);wy(r,t,h.au);const g=new Mk(e,t,c);return r.Tu.set(e,g),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),h.snapshot}async function Hk(r,e,t){const n=nr(r),o=n.Tu.get(e),a=n.Iu.get(o.targetId);if(a.length>1)return n.Iu.set(o.targetId,a.filter((c=>!gp(c,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||await P0(n.localStore,o.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(o.targetId),t&&gg(n.remoteStore,o.targetId),B0(n,o.targetId)})).catch(nd)):(B0(n,o.targetId),await P0(n.localStore,o.targetId,!0))}async function Gk(r,e){const t=nr(r),n=t.Tu.get(e),o=t.Iu.get(n.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),gg(t.remoteStore,n.targetId))}async function Kk(r,e,t){const n=t7(r);try{const o=await(function(c,u){const f=nr(c),h=nn.now(),g=u.reduce(((v,F)=>v.add(F.key)),yr());let b,A;return f.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let F=fl(),E=yr();return f.Ns.getEntries(v,g).next((N=>{F=N,F.forEach(((j,$)=>{$.isValidDocument()||(E=E.add(j))}))})).next((()=>f.localDocuments.getOverlayedDocuments(v,F))).next((N=>{b=N;const j=[];for(const $ of u){const V=sC($,b.get($.key).overlayedDocument);V!=null&&j.push(new uc($.key,V,Uv(V.value.mapValue),ta.exists(!0)))}return f.mutationQueue.addMutationBatch(v,h,j,u)})).next((N=>{A=N;const j=N.applyToLocalDocumentSet(b,E);return f.documentOverlayCache.saveOverlays(v,N.batchId,j)}))})).then((()=>({batchId:A.batchId,changes:rb(b)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(o.batchId),(function(c,u,f){let h=c.Vu[c.currentUser.toKey()];h||(h=new _n(gr)),h=h.insert(u,f),c.Vu[c.currentUser.toKey()]=h})(n,o.batchId,t),await mh(n,o.changes),await _p(n.remoteStore)}catch(o){const a=wg(o,"Failed to persist write");t.reject(a)}}async function Fb(r,e){const t=nr(r);try{const n=await ik(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const c=t.Au.get(a);c&&(Lr(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Lr(c.hu,14607):o.removedDocuments.size>0&&(Lr(c.hu,42227),c.hu=!1))})),await mh(t,n,e)}catch(n){await nd(n)}}function by(r,e,t){const n=nr(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const o=[];n.Tu.forEach(((a,c)=>{const u=c.view.va(e);u.snapshot&&o.push(u.snapshot)})),(function(c,u){const f=nr(c);f.onlineState=u;let h=!1;f.queries.forEach(((g,b)=>{for(const A of b.Sa)A.va(u)&&(h=!0)})),h&&Sg(f)})(n.eventManager,e),o.length&&n.Pu.H_(o),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Yk(r,e,t){const n=nr(r);n.sharedClientState.updateQueryState(e,"rejected",t);const o=n.Au.get(e),a=o&&o.key;if(a){let c=new _n(Lt.comparator);c=c.insert(a,so.newNoDocument(a,Zt.min()));const u=yr().add(a),f=new bp(Zt.min(),new Map,new _n(gr),c,u);await Fb(n,f),n.du=n.du.remove(a),n.Au.delete(e),Tg(n)}else await P0(n.localStore,e,!1).then((()=>B0(n,e,t))).catch(nd)}async function Jk(r,e){const t=nr(r),n=e.batch.batchId;try{const o=await nk(t.localStore,e);Ob(t,n,null),zb(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await mh(t,o)}catch(o){await nd(o)}}async function Qk(r,e,t){const n=nr(r);try{const o=await(function(c,u){const f=nr(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let g;return f.mutationQueue.lookupMutationBatch(h,u).next((b=>(Lr(b!==null,37113),g=b.keys(),f.mutationQueue.removeMutationBatch(h,b)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,g,u))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g))).next((()=>f.localDocuments.getDocuments(h,g)))}))})(n.localStore,e);Ob(n,e,t),zb(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await mh(n,o)}catch(o){await nd(o)}}function zb(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Ob(r,e,t){const n=nr(r);let o=n.Vu[n.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),n.Vu[n.currentUser.toKey()]=o}}function B0(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||Vb(r,n)}))}function Vb(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(gg(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Tg(r))}function wy(r,e,t){for(const n of t)n instanceof Nb?(r.Ru.addReference(n.key,e),Xk(r,n)):n instanceof Lb?(gt(_g,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||Vb(r,n.key)):Gt(19791,{wu:n})}function Xk(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(gt(_g,"New document in limbo: "+t),r.Eu.add(n),Tg(r))}function Tg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Lt(tn.fromString(e)),n=r.fu.next();r.Au.set(n,new Dk(t)),r.du=r.du.insert(t,n),kb(r.remoteStore,new Yl(ja(Qv(t.path)),n,"TargetPurposeLimboResolution",fp.ce))}}async function mh(r,e,t){const n=nr(r),o=[],a=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,f)=>{c.push(n.pu(f,e,t).then((h=>{var g;if((h||t)&&n.isPrimaryClient){const b=h?!h.fromCache:(g=t==null?void 0:t.targetChanges.get(f.targetId))==null?void 0:g.current;n.sharedClientState.updateQueryState(f.targetId,b?"current":"not-current")}if(h){o.push(h);const b=pg.As(f.targetId,h);a.push(b)}})))})),await Promise.all(c),n.Pu.H_(o),await(async function(f,h){const g=nr(f);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>Xe.forEach(h,(A=>Xe.forEach(A.Es,(v=>g.persistence.referenceDelegate.addReference(b,A.targetId,v))).next((()=>Xe.forEach(A.ds,(v=>g.persistence.referenceDelegate.removeReference(b,A.targetId,v)))))))))}catch(b){if(!id(b))throw b;gt(mg,"Failed to update sequence numbers: "+b)}for(const b of h){const A=b.targetId;if(!b.fromCache){const v=g.Ms.get(A),F=v.snapshotVersion,E=v.withLastLimboFreeSnapshotVersion(F);g.Ms=g.Ms.insert(A,E)}}})(n.localStore,a))}async function Zk(r,e){const t=nr(r);if(!t.currentUser.isEqual(e)){gt(_g,"User change. New user:",e.toKey());const n=await _b(t.localStore,e);t.currentUser=e,(function(a,c){a.mu.forEach((u=>{u.forEach((f=>{f.reject(new ut(Ye.CANCELLED,c))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await mh(t,n.Ls)}}function e7(r,e){const t=nr(r),n=t.Au.get(e);if(n&&n.hu)return yr().add(n.key);{let o=yr();const a=t.Iu.get(e);if(!a)return o;for(const c of a){const u=t.Tu.get(c);o=o.unionWith(u.view.nu)}return o}}function Mb(r){const e=nr(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=e7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yk.bind(null,e),e.Pu.H_=Fk.bind(null,e.eventManager),e.Pu.yu=zk.bind(null,e.eventManager),e}function t7(r){const e=nr(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qk.bind(null,e),e}class Zf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return rk(this.persistence,new ZC,e.initialUser,this.serializer)}Cu(e){return new Sb(fg.mi,this.serializer)}Du(e){return new ck}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zf.provider={build:()=>new Zf};class r7 extends Zf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Lr(this.persistence.referenceDelegate instanceof Qf,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new OC(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Vo.withCacheSize(this.cacheSizeBytes):Vo.DEFAULT;return new Sb((n=>Qf.mi(n,t)),this.serializer)}}class F0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>by(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zk.bind(null,this.syncEngine),await Rk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Nk})()}createDatastore(e){const t=wp(e.databaseInfo.databaseId),n=(function(a){return new pk(a)})(e.databaseInfo);return(function(a,c,u,f){return new xk(a,c,u,f)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,o,a,c,u){return new bk(n,o,a,c,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>by(this.syncEngine,t,0)),(function(){return py.v()?new py:new uk})())}createSyncEngine(e,t){return(function(o,a,c,u,f,h,g){const b=new Wk(o,a,c,u,f,h);return g&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=nr(o);gt(Hc,"RemoteStore shutting down."),a.Ea.add(5),await ph(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}F0.provider={build:()=>new F0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc="FirestoreClient";class i7{constructor(e,t,n,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=o,this.user=oo.UNAUTHENTICATED,this.clientId=tg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async c=>{gt(lc,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(n,(c=>(gt(lc,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ec;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=wg(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Zm(r,e){r.asyncQueue.verifyOperationInProgress(),gt(lc,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async o=>{n.isEqual(o)||(await _b(e.localStore,o),n=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Sy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await o7(r);gt(lc,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>gy(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,o)=>gy(e.remoteStore,o))),r._onlineComponents=e}async function o7(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){gt(lc,"Using user provided OfflineComponentProvider");try{await Zm(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Ye.FAILED_PRECONDITION||o.code===Ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Gu("Error using user provided cache. Falling back to memory cache: "+t),await Zm(r,new Zf)}}else gt(lc,"Using default OfflineComponentProvider"),await Zm(r,new r7(void 0));return r._offlineComponents}async function Db(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(gt(lc,"Using user provided OnlineComponentProvider"),await Sy(r,r._uninitializedComponentsProvider._online)):(gt(lc,"Using default OnlineComponentProvider"),await Sy(r,new F0))),r._onlineComponents}function s7(r){return Db(r).then((e=>e.syncEngine))}async function a7(r){const e=await Db(r),t=e.eventManager;return t.onListen=$k.bind(null,e.syncEngine),t.onUnlisten=Hk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Uk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Gk.bind(null,e.syncEngine),t}function l7(r,e,t={}){const n=new ec;return r.asyncQueue.enqueueAndForget((async()=>(function(a,c,u,f,h){const g=new n7({next:A=>{g.Nu(),c.enqueueAndForget((()=>Bk(a,b))),A.fromCache&&f.source==="server"?h.reject(new ut(Ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(A)},error:A=>h.reject(A)}),b=new Ok(u,g,{includeMetadataChanges:!0,qa:!0});return Lk(a,b)})(await a7(r),r.asyncQueue,e,t,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="firestore.googleapis.com",Ty=!0;class Ay{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ut(Ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$b,this.ssl=Ty}else this.host=e.host,this.ssl=e.ssl??Ty;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FC)throw new ut(Ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wb(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ut(Ye.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ut(Ye.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ut(Ye.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,o){return n.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tp{constructor(e,t,n,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ay({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ut(Ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ut(Ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ay(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new cA;switch(n.type){case"firstParty":return new fA(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ut(Ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=_y.get(t);n&&(gt("ComponentProvider","Removing Datastore"),_y.delete(t),n.terminate())})(this),Promise.resolve()}}function c7(r,e,t,n={}){var h;r=qc(r,Tp);const o=ed(e),a=r._getSettings(),c={...a,emulatorOptions:r._getEmulatorOptions()},u=`${e}:${t}`;o&&(yv(`https://${u}`),xv("Firestore",!0)),a.host!==$b&&a.host!==u&&Gu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:u,ssl:o,emulatorOptions:n};if(!Wc(f,c)&&(r._setSettings(f),n.mockUserToken)){let g,b;if(typeof n.mockUserToken=="string")g=n.mockUserToken,b=oo.MOCK_USER;else{g=FT(n.mockUserToken,(h=r._app)==null?void 0:h.options.projectId);const A=n.mockUserToken.sub||n.mockUserToken.user_id;if(!A)throw new ut(Ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new oo(A)}r._authCredentials=new uA(new Pv(g,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new eu(this.firestore,e,this._query)}}class si{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new si(this.firestore,e,this._key)}toJSON(){return{type:si._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(dh(t,si._jsonSchema))return new si(e,n||null,new Lt(tn.fromString(t.referencePath)))}}si._jsonSchemaVersion="firestore/documentReference/1.0",si._jsonSchema={type:ei("string",si._jsonSchemaVersion),referencePath:ei("string")};class tc extends eu{constructor(e,t,n){super(e,t,Qv(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new si(this.firestore,null,new Lt(e))}withConverter(e){return new tc(this.firestore,e,this._path)}}function Ag(r,e,...t){if(r=Ai(r),Nv("collection","path",e),r instanceof Tp){const n=tn.fromString(e,...t);return O2(n),new tc(r,null,n)}{if(!(r instanceof si||r instanceof tc))throw new ut(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(tn.fromString(e,...t));return O2(n),new tc(r.firestore,null,n)}}function Ap(r,e,...t){if(r=Ai(r),arguments.length===1&&(e=tg.newId()),Nv("doc","path",e),r instanceof Tp){const n=tn.fromString(e,...t);return z2(n),new si(r,null,new Lt(n))}{if(!(r instanceof si||r instanceof tc))throw new ut(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(tn.fromString(e,...t));return z2(n),new si(r.firestore,r instanceof tc?r.converter:null,new Lt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="AsyncQueue";class ky{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ab(this,"async_queue_retry"),this._c=()=>{const n=Xm();n&&gt(Cy,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=Xm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Xm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ec;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!id(e))throw e;gt(Cy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,hl("INTERNAL UNHANDLED ERROR: ",jy(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=bg.createAndSchedule(this,e,t,n,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&Gt(47125,{Pc:jy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function jy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class gh extends Tp{constructor(e,t,n,o){super(e,t,n,o),this.type="firestore",this._queue=new ky,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ky(e),this._firestoreClient=void 0,await e}}}function u7(r,e){const t=typeof r=="object"?r:Sv(),n=typeof r=="string"?r:Hf,o=Z0(t,"firestore").getImmediate({identifier:n});if(!o._initialized){const a=LT("firestore");a&&c7(o,...a)}return o}function Ub(r){if(r._terminated)throw new ut(Ye.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||d7(r),r._firestoreClient}function d7(r){var n,o,a;const e=r._freezeSettings(),t=(function(u,f,h,g){return new IA(u,f,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,Wb(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(r._databaseId,((n=r._app)==null?void 0:n.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new i7(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(u){const f=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(f),_online:f}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Es(Vi.fromBase64String(e))}catch(t){throw new ut(Ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Es(Vi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Es._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(dh(e,Es._jsonSchema))return Es.fromBase64String(e.bytes)}}Es._jsonSchemaVersion="firestore/bytes/1.0",Es._jsonSchema={type:ei("string",Es._jsonSchemaVersion),bytes:ei("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ut(Ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Oi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ut(Ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ut(Ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return gr(this._lat,e._lat)||gr(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ia._jsonSchemaVersion}}static fromJSON(e){if(dh(e,Ia._jsonSchema))return new Ia(e.latitude,e.longitude)}}Ia._jsonSchemaVersion="firestore/geoPoint/1.0",Ia._jsonSchema={type:ei("string",Ia._jsonSchemaVersion),latitude:ei("number"),longitude:ei("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,o){if(n.length!==o.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ra._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(dh(e,Ra._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ra(e.vectorValues);throw new ut(Ye.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ra._jsonSchemaVersion="firestore/vectorValue/1.0",Ra._jsonSchema={type:ei("string",Ra._jsonSchemaVersion),vectorValues:ei("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7=/^__.*__$/;class f7{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new uc(e,this.data,this.fieldMask,t,this.fieldTransforms):new hh(e,this.data,t,this.fieldTransforms)}}class qb{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new uc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Hb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Gt(40011,{Ac:r})}}class Cg{constructor(e,t,n,o,a,c){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Cg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ep(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Hb(this.Ac)&&h7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class p7{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||wp(e)}Cc(e,t,n,o=!1){return new Cg({Ac:e,methodName:t,Dc:n,path:Oi.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kg(r){const e=r._freezeSettings(),t=wp(r._databaseId);return new p7(r._databaseId,!!e.ignoreUndefinedProperties,t)}function m7(r,e,t,n,o,a={}){const c=r.Cc(a.merge||a.mergeFields?2:0,e,t,o);Eg("Data must be an object, but it was:",c,n);const u=Gb(n,c);let f,h;if(a.merge)f=new ls(c.fieldMask),h=c.fieldTransforms;else if(a.mergeFields){const g=[];for(const b of a.mergeFields){const A=z0(e,b,t);if(!c.contains(A))throw new ut(Ye.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);Yb(g,A)||g.push(A)}f=new ls(g),h=c.fieldTransforms.filter((b=>f.covers(b.field)))}else f=null,h=c.fieldTransforms;return new f7(new Mo(u),f,h)}class jp extends kp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jp}}class jg extends kp{_toFieldTransform(e){return new rC(e.path,new nh)}isEqual(e){return e instanceof jg}}function g7(r,e,t,n){const o=r.Cc(1,e,t);Eg("Data must be an object, but it was:",o,n);const a=[],c=Mo.empty();cc(n,((f,h)=>{const g=Ig(e,f,t);h=Ai(h);const b=o.yc(g);if(h instanceof jp)a.push(g);else{const A=yh(h,b);A!=null&&(a.push(g),c.set(g,A))}}));const u=new ls(a);return new qb(c,u,o.fieldTransforms)}function y7(r,e,t,n,o,a){const c=r.Cc(1,e,t),u=[z0(e,n,t)],f=[o];if(a.length%2!=0)throw new ut(Ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<a.length;A+=2)u.push(z0(e,a[A])),f.push(a[A+1]);const h=[],g=Mo.empty();for(let A=u.length-1;A>=0;--A)if(!Yb(h,u[A])){const v=u[A];let F=f[A];F=Ai(F);const E=c.yc(v);if(F instanceof jp)h.push(v);else{const N=yh(F,E);N!=null&&(h.push(v),g.set(v,N))}}const b=new ls(h);return new qb(g,b,c.fieldTransforms)}function x7(r,e,t,n=!1){return yh(t,r.Cc(n?4:3,e))}function yh(r,e){if(Kb(r=Ai(r)))return Eg("Unsupported field value:",e,r),Gb(r,e);if(r instanceof kp)return(function(n,o){if(!Hb(o.Ac))throw o.Sc(`${n._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,o){const a=[];let c=0;for(const u of n){let f=yh(u,o.wc(c));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),c++}return{arrayValue:{values:a}}})(r,e)}return(function(n,o){if((n=Ai(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return ZA(o.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=nn.fromDate(n);return{timestampValue:Jf(o.serializer,a)}}if(n instanceof nn){const a=new nn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Jf(o.serializer,a)}}if(n instanceof Ia)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Es)return{bytesValue:pb(o.serializer,n._byteString)};if(n instanceof si){const a=o.databaseId,c=n.firestore._databaseId;if(!c.isEqual(a))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:dg(n.firestore._databaseId||o.databaseId,n._key.path)}}if(n instanceof Ra)return(function(c,u){return{mapValue:{fields:{[Wv]:{stringValue:$v},[Gf]:{arrayValue:{values:c.toArray().map((h=>{if(typeof h!="number")throw u.Sc("VectorValues must only contain numeric values.");return ag(u.serializer,h)}))}}}}}})(n,o);throw o.Sc(`Unsupported field value: ${hp(n)}`)})(r,e)}function Gb(r,e){const t={};return Fv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cc(r,((n,o)=>{const a=yh(o,e.mc(n));a!=null&&(t[n]=a)})),{mapValue:{fields:t}}}function Kb(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof nn||r instanceof Ia||r instanceof Es||r instanceof si||r instanceof kp||r instanceof Ra)}function Eg(r,e,t){if(!Kb(t)||!Lv(t)){const n=hp(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function z0(r,e,t){if((e=Ai(e))instanceof Cp)return e._internalPath;if(typeof e=="string")return Ig(r,e);throw ep("Field path arguments must be of type string or ",r,!1,void 0,t)}const v7=new RegExp("[~\\*/\\[\\]]");function Ig(r,e,t){if(e.search(v7)>=0)throw ep(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Cp(...e.split("."))._internalPath}catch{throw ep(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function ep(r,e,t,n,o){const a=n&&!n.isEmpty(),c=o!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(a||c)&&(f+=" (found",a&&(f+=` in field ${n}`),c&&(f+=` in document ${o}`),f+=")"),new ut(Ye.INVALID_ARGUMENT,u+r+f)}function Yb(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,t,n,o,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new si(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new b7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class b7 extends Jb{data(){return super.data()}}function Rg(r,e){return typeof e=="string"?Ig(r,e):e instanceof Cp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w7(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ut(Ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pg{}class Qb extends Pg{}function S7(r,e,...t){let n=[];e instanceof Pg&&n.push(e),n=n.concat(t),(function(a){const c=a.filter((f=>f instanceof Lg)).length,u=a.filter((f=>f instanceof Ng)).length;if(c>1||c>0&&u>0)throw new ut(Ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const o of n)r=o._apply(r);return r}class Ng extends Qb{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Ng(e,t,n)}_apply(e){const t=this._parse(e);return Xb(e._query,t),new eu(e.firestore,e.converter,C0(e._query,t))}_parse(e){const t=kg(e.firestore);return(function(a,c,u,f,h,g,b){let A;if(h.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ut(Ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Iy(b,g);const F=[];for(const E of b)F.push(Ey(f,a,E));A={arrayValue:{values:F}}}else A=Ey(f,a,b)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Iy(b,g),A=x7(u,c,b,g==="in"||g==="not-in");return Zn.create(h,g,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Lg extends Pg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Lg(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:na.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let c=o;const u=a.getFlattenedFilters();for(const f of u)Xb(c,f),c=C0(c,f)})(e._query,t),new eu(e.firestore,e.converter,C0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Bg extends Qb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Bg(e,t)}_apply(e){const t=(function(o,a,c){if(o.startAt!==null)throw new ut(Ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ut(Ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rh(a,c)})(e._query,this._field,this._direction);return new eu(e.firestore,e.converter,(function(o,a){const c=o.explicitOrderBy.concat([a]);return new od(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function _7(r,e="asc"){const t=e,n=Rg("orderBy",r);return Bg._create(n,t)}function Ey(r,e,t){if(typeof(t=Ai(t))=="string"){if(t==="")throw new ut(Ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xv(e)&&t.indexOf("/")!==-1)throw new ut(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(tn.fromString(t));if(!Lt.isDocumentKey(n))throw new ut(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return H2(r,new Lt(n))}if(t instanceof si)return H2(r,t._key);throw new ut(Ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hp(t)}.`)}function Iy(r,e){if(!Array.isArray(r)||r.length===0)throw new ut(Ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Xb(r,e){const t=(function(o,a){for(const c of o)for(const u of c.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ut(Ye.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ut(Ye.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class T7{convertValue(e,t="none"){switch(sc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Gt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return cc(e,((o,a)=>{n[o]=this.convertValue(a,t)})),n}convertVectorValue(e){var n,o,a;const t=(a=(o=(n=e.fields)==null?void 0:n[Gf].arrayValue)==null?void 0:o.values)==null?void 0:a.map((c=>Dn(c.doubleValue)));return new Ra(t)}convertGeoPoint(e){return new Ia(Dn(e.latitude),Dn(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=mp(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Zd(e));default:return null}}convertTimestamp(e){const t=ic(e);return new nn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=tn.fromString(e);Lr(bb(n),9688,{name:e});const o=new eh(n.get(1),n.get(3)),a=new Lt(n.popFirst(5));return o.isEqual(t)||hl(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A7(r,e,t){let n;return n=r?r.toFirestore(e):e,n}class vf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Du extends Jb{constructor(e,t,n,o,a,c){super(e,t,n,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Rg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(Ye.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Du._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Du._jsonSchemaVersion="firestore/documentSnapshot/1.0",Du._jsonSchema={type:ei("string",Du._jsonSchemaVersion),bundleSource:ei("string","DocumentSnapshot"),bundleName:ei("string"),bundle:ei("string")};class Nf extends Du{data(e={}){return super.data(e)}}class Wu{constructor(e,t,n,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new vf(o.hasPendingWrites,o.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Nf(this._firestore,this._userDataWriter,n.key,n,new vf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ut(Ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((u=>{const f=new Nf(o._firestore,o._userDataWriter,u.doc.key,u.doc,new vf(o._snapshot.mutatedKeys.has(u.doc.key),o._snapshot.fromCache),o.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((u=>a||u.type!==3)).map((u=>{const f=new Nf(o._firestore,o._userDataWriter,u.doc.key,u.doc,new vf(o._snapshot.mutatedKeys.has(u.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,g=-1;return u.type!==0&&(h=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:C7(u.type),doc:f,oldIndex:h,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(Ye.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function C7(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Gt(61501,{type:r})}}Wu._jsonSchemaVersion="firestore/querySnapshot/1.0",Wu._jsonSchema={type:ei("string",Wu._jsonSchemaVersion),bundleSource:ei("string","QuerySnapshot"),bundleName:ei("string"),bundle:ei("string")};class k7 extends T7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Es(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new si(this.firestore,null,t)}}function j7(r){r=qc(r,eu);const e=qc(r.firestore,gh),t=Ub(e),n=new k7(e);return w7(r._query),l7(t,r._query).then((o=>new Wu(e,n,r,o)))}function E7(r,e,t,...n){r=qc(r,si);const o=qc(r.firestore,gh),a=kg(o);let c;return c=typeof(e=Ai(e))=="string"||e instanceof Cp?y7(a,"updateDoc",r._key,e,t,n):g7(a,"updateDoc",r._key,e),Fg(o,[c.toMutation(r._key,ta.exists(!0))])}function I7(r){return Fg(qc(r.firestore,gh),[new lg(r._key,ta.none())])}function Zb(r,e){const t=qc(r.firestore,gh),n=Ap(r),o=A7(r.converter,e);return Fg(t,[m7(kg(r.firestore),"addDoc",n._key,o,r.converter!==null,{}).toMutation(n._key,ta.exists(!1))]).then((()=>n))}function Fg(r,e){return(function(n,o){const a=new ec;return n.asyncQueue.enqueueAndForget((async()=>Kk(await s7(n),o,a))),a.promise})(Ub(r),e)}function zg(){return new jg("serverTimestamp")}(function(e,t=!0){(function(o){rd=o})(td),Hu(new $c("firestore",((n,{instanceIdentifier:o,options:a})=>{const c=n.getProvider("app").getImmediate(),u=new gh(new dA(n.getProvider("auth-internal")),new pA(c,n.getProvider("app-check-internal")),(function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ut(Ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eh(h.options.projectId,g)})(c,o),c);return a={useFetchStreams:t,...a},u._setSettings(a),u}),"PUBLIC").setMultipleInstances(!0)),Xl(N2,L2,e),Xl(N2,L2,"esm2020")})();var R7="firebase",P7="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xl(R7,P7,"app");function ew(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const N7=ew,tw=new ch("auth","Firebase",ew());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=new Q0("@firebase/auth");function L7(r,...e){tp.logLevel<=mr.WARN&&tp.warn(`Auth (${td}): ${r}`,...e)}function Lf(r,...e){tp.logLevel<=mr.ERROR&&tp.error(`Auth (${td}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(r,...e){throw Og(r,...e)}function Pa(r,...e){return Og(r,...e)}function rw(r,e,t){const n={...N7(),[e]:t};return new ch("auth","Firebase",n).create(e,{appName:r.name})}function ul(r){return rw(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Og(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return tw.create(r,...e)}function Ht(r,e,...t){if(!r)throw Og(e,...t)}function ll(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Lf(e),new Error(e)}function pl(r,e){r||ll(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function B7(){return Ry()==="http:"||Ry()==="https:"}function Ry(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B7()||WT()||"connection"in navigator)?navigator.onLine:!0}function z7(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t){this.shortDelay=e,this.longDelay=t,pl(t>e,"Short delay should be less than long delay!"),this.isMobile=VT()||$T()}get(){return F7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(r,e){pl(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ll("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ll("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ll("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],M7=new xh(3e4,6e4);function dc(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function hc(r,e,t,n,o={}){return iw(r,o,async()=>{let a={},c={};n&&(e==="GET"?c=n:a={body:JSON.stringify(n)});const u=uh({key:r.config.apiKey,...c}).slice(1),f=await r._getAdditionalHeaders();f["Content-Type"]="application/json",r.languageCode&&(f["X-Firebase-Locale"]=r.languageCode);const h={method:e,headers:f,...a};return DT()||(h.referrerPolicy="no-referrer"),r.emulatorConfig&&ed(r.emulatorConfig.host)&&(h.credentials="include"),nw.fetch()(await ow(r,r.config.apiHost,t,u),h)})}async function iw(r,e,t){r._canInitEmulator=!1;const n={...O7,...e};try{const o=new W7(r),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw bf(r,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const u=a.ok?c.errorMessage:c.error.message,[f,h]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw bf(r,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw bf(r,"email-already-in-use",c);if(f==="USER_DISABLED")throw bf(r,"user-disabled",c);const g=n[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw rw(r,g,h);ia(r,g)}}catch(o){if(o instanceof ml)throw o;ia(r,"network-request-failed",{message:String(o)})}}async function vh(r,e,t,n,o={}){const a=await hc(r,e,t,n,o);return"mfaPendingCredential"in a&&ia(r,"multi-factor-auth-required",{_serverResponse:a}),a}async function ow(r,e,t,n){const o=`${e}${t}?${n}`,a=r,c=a.config.emulator?Vg(r.config,o):`${r.config.apiScheme}://${o}`;return V7.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function D7(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class W7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Pa(this.auth,"network-request-failed")),M7.get())})}}function bf(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const o=Pa(r,e,n);return o.customData._tokenResponse=t,o}function Py(r){return r!==void 0&&r.enterprise!==void 0}class $7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return D7(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function U7(r,e){return hc(r,"GET","/v2/recaptchaConfig",dc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q7(r,e){return hc(r,"POST","/v1/accounts:delete",e)}async function rp(r,e){return hc(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function H7(r,e=!1){const t=Ai(r),n=await t.getIdToken(e),o=Mg(n);Ht(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:o,token:n,authTime:Gd(e0(o.auth_time)),issuedAtTime:Gd(e0(o.iat)),expirationTime:Gd(e0(o.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function e0(r){return Number(r)*1e3}function Mg(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Lf("JWT malformed, contained fewer than 3 sections"),null;try{const o=fv(t);return o?JSON.parse(o):(Lf("Failed to decode base64 JWT payload"),null)}catch(o){return Lf("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Ny(r){const e=Mg(r);return Ht(e,"internal-error"),Ht(typeof e.exp<"u","internal-error"),Ht(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sh(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof ml&&G7(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function G7({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gd(this.lastLoginAt),this.creationTime=Gd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function np(r){var b;const e=r.auth,t=await r.getIdToken(),n=await sh(r,rp(e,{idToken:t}));Ht(n==null?void 0:n.users.length,e,"internal-error");const o=n.users[0];r._notifyReloadListener(o);const a=(b=o.providerUserInfo)!=null&&b.length?sw(o.providerUserInfo):[],c=J7(r.providerData,a),u=r.isAnonymous,f=!(r.email&&o.passwordHash)&&!(c!=null&&c.length),h=u?f:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new V0(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(r,g)}async function Y7(r){const e=Ai(r);await np(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function J7(r,e){return[...r.filter(n=>!e.some(o=>o.providerId===n.providerId)),...e]}function sw(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q7(r,e){const t=await iw(r,{},async()=>{const n=uh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=r.config,c=await ow(r,o,"/v1/token",`key=${a}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:n};return r.emulatorConfig&&ed(r.emulatorConfig.host)&&(f.credentials="include"),nw.fetch()(c,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function X7(r,e){return hc(r,"POST","/v2/accounts:revokeToken",dc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ht(e.idToken,"internal-error"),Ht(typeof e.idToken<"u","internal-error"),Ht(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ny(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ht(e.length!==0,"internal-error");const t=Ny(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ht(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:o,expiresIn:a}=await Q7(e,t);this.updateTokensAndExpiration(n,o,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:o,expirationTime:a}=t,c=new $u;return n&&(Ht(typeof n=="string","internal-error",{appName:e}),c.refreshToken=n),o&&(Ht(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),a&&(Ht(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $u,this.toJSON())}_performRefresh(){return ll("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(r,e){Ht(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ea{constructor({uid:e,auth:t,stsTokenManager:n,...o}){this.providerId="firebase",this.proactiveRefresh=new K7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new V0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await sh(this,this.stsTokenManager.getToken(this.auth,e));return Ht(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return H7(this,e)}reload(){return Y7(this)}_assign(e){this!==e&&(Ht(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ea({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ht(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await np(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(js(this.auth.app))return Promise.reject(ul(this.auth));const e=await this.getIdToken();return await sh(this,q7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,c=t.photoURL??void 0,u=t.tenantId??void 0,f=t._redirectEventId??void 0,h=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:b,emailVerified:A,isAnonymous:v,providerData:F,stsTokenManager:E}=t;Ht(b&&E,e,"internal-error");const N=$u.fromJSON(this.name,E);Ht(typeof b=="string",e,"internal-error"),$l(n,e.name),$l(o,e.name),Ht(typeof A=="boolean",e,"internal-error"),Ht(typeof v=="boolean",e,"internal-error"),$l(a,e.name),$l(c,e.name),$l(u,e.name),$l(f,e.name),$l(h,e.name),$l(g,e.name);const j=new ea({uid:b,auth:e,email:o,emailVerified:A,displayName:n,isAnonymous:v,photoURL:c,phoneNumber:a,tenantId:u,stsTokenManager:N,createdAt:h,lastLoginAt:g});return F&&Array.isArray(F)&&(j.providerData=F.map($=>({...$}))),f&&(j._redirectEventId=f),j}static async _fromIdTokenResponse(e,t,n=!1){const o=new $u;o.updateFromServerResponse(t);const a=new ea({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:n});return await np(a),a}static async _fromGetAccountInfoResponse(e,t,n){const o=t.users[0];Ht(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?sw(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),u=new $u;u.updateFromIdToken(n);const f=new ea({uid:o.localId,auth:e,stsTokenManager:u,isAnonymous:c}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new V0(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=new Map;function cl(r){pl(r instanceof Function,"Expected a class definition");let e=Ly.get(r);return e?(pl(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Ly.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}aw.type="NONE";const By=aw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(r,e,t){return`firebase:${r}:${e}:${t}`}class Uu{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:o,name:a}=this.auth;this.fullUserKey=Bf(this.userKey,o.apiKey,a),this.fullPersistenceKey=Bf("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await rp(this.auth,{idToken:e}).catch(()=>{});return t?ea._fromGetAccountInfoResponse(this.auth,t,e):null}return ea._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Uu(cl(By),e,n);const o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||cl(By);const c=Bf(n,e.config.apiKey,e.name);let u=null;for(const h of t)try{const g=await h._get(c);if(g){let b;if(typeof g=="string"){const A=await rp(e,{idToken:g}).catch(()=>{});if(!A)break;b=await ea._fromGetAccountInfoResponse(e,A,g)}else b=ea._fromJSON(e,g);h!==a&&(u=b),a=h;break}}catch{}const f=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Uu(a,e,n):(a=f[0],u&&await a._set(c,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(c)}catch{}})),new Uu(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fw(e))return"Blackberry";if(pw(e))return"Webos";if(cw(e))return"Safari";if((e.includes("chrome/")||uw(e))&&!e.includes("edge/"))return"Chrome";if(hw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function lw(r=ao()){return/firefox\//i.test(r)}function cw(r=ao()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uw(r=ao()){return/crios\//i.test(r)}function dw(r=ao()){return/iemobile/i.test(r)}function hw(r=ao()){return/android/i.test(r)}function fw(r=ao()){return/blackberry/i.test(r)}function pw(r=ao()){return/webos/i.test(r)}function Dg(r=ao()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Z7(r=ao()){var e;return Dg(r)&&!!((e=window.navigator)!=null&&e.standalone)}function e8(){return UT()&&document.documentMode===10}function mw(r=ao()){return Dg(r)||hw(r)||pw(r)||fw(r)||/windows phone/i.test(r)||dw(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(r,e=[]){let t;switch(r){case"Browser":t=Fy(ao());break;case"Worker":t=`${Fy(ao())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${td}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=a=>new Promise((c,u)=>{try{const f=e(a);c(f)}catch(f){u(f)}});n.onAbort=t,this.queue.push(n);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r8(r,e={}){return hc(r,"GET","/v2/passwordPolicy",dc(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8=6;class i8{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??n8,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let o=0;o<e.length;o++)n=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(e,t,n,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zy(this),this.idTokenSubscription=new zy(this),this.beforeStateQueue=new t8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=cl(t)),this._initializationPromise=this.queue(async()=>{var n,o,a;if(!this._deleted&&(this.persistenceManager=await Uu.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await rp(this,{idToken:e}),n=await ea._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(js(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(a=this.redirectUser)==null?void 0:a._redirectEventId,u=n==null?void 0:n._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===u)&&(f!=null&&f.user)&&(n=f.user,o=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(n)}catch(c){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ht(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await np(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=z7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(js(this.app))return Promise.reject(ul(this));const t=e?Ai(e):null;return t&&Ht(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ht(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return js(this.app)?Promise.reject(ul(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return js(this.app)?Promise.reject(ul(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await r8(this),t=new i8(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ch("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await X7(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&cl(e)||this._popupRedirectResolver;Ht(t,this,"argument-error"),this.redirectPersistenceManager=await Uu.create(this,[cl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ht(u,this,"internal-error"),u.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,n,o);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ht(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(js(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&L7(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function tu(r){return Ai(r)}class zy{constructor(e){this.auth=e,this.observer=null,this.addObserver=XT(t=>this.observer=t)}get next(){return Ht(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ep={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s8(r){Ep=r}function yw(r){return Ep.loadJS(r)}function a8(){return Ep.recaptchaEnterpriseScript}function l8(){return Ep.gapiScript}function c8(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class u8{constructor(){this.enterprise=new d8}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class d8{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const h8="recaptcha-enterprise",xw="NO_RECAPTCHA";class f8{constructor(e){this.type=h8,this.auth=tu(e)}async verify(e="verify",t=!1){async function n(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,u)=>{U7(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new $7(f);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,c(h.siteKey)}}).catch(f=>{u(f)})})}function o(a,c,u){const f=window.grecaptcha;Py(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(h=>{c(h)}).catch(()=>{c(xw)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new u8().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{n(this.auth).then(u=>{if(!t&&Py(window.grecaptcha))o(u,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=a8();f.length!==0&&(f+=u),yw(f).then(()=>{o(u,a,c)}).catch(h=>{c(h)})}}).catch(u=>{c(u)})})}}async function Oy(r,e,t,n=!1,o=!1){const a=new f8(r);let c;if(o)c=xw;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const f=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const f=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function M0(r,e,t,n,o){var a;if((a=r._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Oy(r,e,t,t==="getOobCode");return n(r,c)}else return n(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Oy(r,e,t,t==="getOobCode");return n(r,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(r,e){const t=Z0(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Wc(a,e??{}))return o;ia(o,"already-initialized")}return t.initialize({options:e})}function m8(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(cl);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function g8(r,e,t){const n=tu(r);Ht(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const o=!1,a=vw(e),{host:c,port:u}=y8(e),f=u===null?"":`:${u}`,h={url:`${a}//${c}${f}/`},g=Object.freeze({host:c,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!n._canInitEmulator){Ht(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ht(Wc(h,n.config.emulator)&&Wc(g,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=h,n.emulatorConfig=g,n.settings.appVerificationDisabledForTesting=!0,ed(c)?(yv(`${a}//${c}${f}`),xv("Auth",!0)):x8()}function vw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function y8(r){const e=vw(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(n);if(o){const a=o[1];return{host:a,port:Vy(n.substr(a.length+1))}}else{const[a,c]=n.split(":");return{host:a,port:Vy(c)}}}function Vy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function x8(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ll("not implemented")}_getIdTokenResponse(e){return ll("not implemented")}_linkToIdToken(e,t){return ll("not implemented")}_getReauthenticationResolver(e){return ll("not implemented")}}async function v8(r,e){return hc(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b8(r,e){return vh(r,"POST","/v1/accounts:signInWithPassword",dc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w8(r,e){return vh(r,"POST","/v1/accounts:signInWithEmailLink",dc(r,e))}async function S8(r,e){return vh(r,"POST","/v1/accounts:signInWithEmailLink",dc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah extends Wg{constructor(e,t,n,o=null){super("password",n),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ah(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new ah(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return M0(e,t,"signInWithPassword",b8);case"emailLink":return w8(e,{email:this._email,oobCode:this._password});default:ia(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return M0(e,n,"signUpPassword",v8);case"emailLink":return S8(e,{idToken:t,email:this._email,oobCode:this._password});default:ia(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qu(r,e){return vh(r,"POST","/v1/accounts:signInWithIdp",dc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8="http://localhost";class Gc extends Wg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Gc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ia("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:o,...a}=t;if(!n||!o)return null;const c=new Gc(n,o);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return qu(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,qu(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qu(e,t)}buildRequest(){const e={requestUri:_8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=uh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function A8(r){const e=Bd(Fd(r)).link,t=e?Bd(Fd(e)).deep_link_id:null,n=Bd(Fd(r)).deep_link_id;return(n?Bd(Fd(n)).link:null)||n||t||e||r}class $g{constructor(e){const t=Bd(Fd(e)),n=t.apiKey??null,o=t.oobCode??null,a=T8(t.mode??null);Ht(n&&o&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=A8(e);try{return new $g(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(){this.providerId=ad.PROVIDER_ID}static credential(e,t){return ah._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=$g.parseLink(t);return Ht(n,"argument-error"),ah._fromEmailAndCode(e,n.code,n.tenantId)}}ad.PROVIDER_ID="password";ad.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ad.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh extends bw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul extends bh{constructor(){super("facebook.com")}static credential(e){return Gc._fromParams({providerId:Ul.PROVIDER_ID,signInMethod:Ul.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ul.credentialFromTaggedObject(e)}static credentialFromError(e){return Ul.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ul.credential(e.oauthAccessToken)}catch{return null}}}Ul.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ul.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends bh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Gc._fromParams({providerId:ql.PROVIDER_ID,signInMethod:ql.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ql.credentialFromTaggedObject(e)}static credentialFromError(e){return ql.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return ql.credential(t,n)}catch{return null}}}ql.GOOGLE_SIGN_IN_METHOD="google.com";ql.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends bh{constructor(){super("github.com")}static credential(e){return Gc._fromParams({providerId:Hl.PROVIDER_ID,signInMethod:Hl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hl.credentialFromTaggedObject(e)}static credentialFromError(e){return Hl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hl.credential(e.oauthAccessToken)}catch{return null}}}Hl.GITHUB_SIGN_IN_METHOD="github.com";Hl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends bh{constructor(){super("twitter.com")}static credential(e,t){return Gc._fromParams({providerId:Gl.PROVIDER_ID,signInMethod:Gl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Gl.credentialFromTaggedObject(e)}static credentialFromError(e){return Gl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Gl.credential(t,n)}catch{return null}}}Gl.TWITTER_SIGN_IN_METHOD="twitter.com";Gl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C8(r,e){return vh(r,"POST","/v1/accounts:signUp",dc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,o=!1){const a=await ea._fromIdTokenResponse(e,n,o),c=My(n);return new Kc({user:a,providerId:c,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const o=My(n);return new Kc({user:e,providerId:o,_tokenResponse:n,operationType:t})}}function My(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip extends ml{constructor(e,t,n,o){super(t.code,t.message),this.operationType=n,this.user=o,Object.setPrototypeOf(this,ip.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,o){return new ip(e,t,n,o)}}function ww(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?ip._fromErrorAndOperation(r,a,e,n):a})}async function k8(r,e,t=!1){const n=await sh(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Kc._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j8(r,e,t=!1){const{auth:n}=r;if(js(n.app))return Promise.reject(ul(n));const o="reauthenticate";try{const a=await sh(r,ww(n,o,e,r),t);Ht(a.idToken,n,"internal-error");const c=Mg(a.idToken);Ht(c,n,"internal-error");const{sub:u}=c;return Ht(r.uid===u,n,"user-mismatch"),Kc._forOperation(r,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ia(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sw(r,e,t=!1){if(js(r.app))return Promise.reject(ul(r));const n="signIn",o=await ww(r,n,e),a=await Kc._fromIdTokenResponse(r,n,o);return t||await r._updateCurrentUser(a.user),a}async function E8(r,e){return Sw(tu(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _w(r){const e=tu(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function I8(r,e,t){if(js(r.app))return Promise.reject(ul(r));const n=tu(r),c=await M0(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",C8).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&_w(r),f}),u=await Kc._fromIdTokenResponse(n,"signIn",c);return await n._updateCurrentUser(u.user),u}function R8(r,e,t){return js(r.app)?Promise.reject(ul(r)):E8(Ai(r),ad.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&_w(r),n})}function P8(r,e,t,n){return Ai(r).onIdTokenChanged(e,t,n)}function N8(r,e,t){return Ai(r).beforeAuthStateChanged(e,t)}function L8(r,e,t,n){return Ai(r).onAuthStateChanged(e,t,n)}function B8(r){return Ai(r).signOut()}const op="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(op,"1"),this.storage.removeItem(op),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F8=1e3,z8=10;class Aw extends Tw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),o=this.localCache[t];n!==o&&e(t,o,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,f)=>{this.notifyListeners(c,f)});return}const n=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(n);!t&&this.localCache[n]===c||this.notifyListeners(n,c)},a=this.storage.getItem(n);e8()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,z8):o()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const o of Array.from(n))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},F8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Aw.type="LOCAL";const O8=Aw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw extends Tw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Cw.type="SESSION";const kw=Cw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V8(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const n=new Ip(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:o,data:a}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:o});const u=Array.from(c).map(async h=>h(t.origin,a)),f=await V8(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ip.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,c;return new Promise((u,f)=>{const h=Ug("",20);o.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},n);c={messageChannel:o,onMessage(b){const A=b;if(A.data.eventId===h)switch(A.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(A.data.response);break;default:clearTimeout(g),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(){return window}function D8(r){Na().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(){return typeof Na().WorkerGlobalScope<"u"&&typeof Na().importScripts=="function"}async function W8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $8(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function U8(){return jw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="firebaseLocalStorageDb",q8=1,sp="firebaseLocalStorage",Iw="fbase_key";class wh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Rp(r,e){return r.transaction([sp],e?"readwrite":"readonly").objectStore(sp)}function H8(){const r=indexedDB.deleteDatabase(Ew);return new wh(r).toPromise()}function D0(){const r=indexedDB.open(Ew,q8);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(sp,{keyPath:Iw})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(sp)?e(n):(n.close(),await H8(),e(await D0()))})})}async function Dy(r,e,t){const n=Rp(r,!0).put({[Iw]:e,value:t});return new wh(n).toPromise()}async function G8(r,e){const t=Rp(r,!1).get(e),n=await new wh(t).toPromise();return n===void 0?null:n.value}function Wy(r,e){const t=Rp(r,!0).delete(e);return new wh(t).toPromise()}const K8=800,Y8=3;class Rw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await D0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>Y8)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ip._getInstance(U8()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await W8(),!this.activeServiceWorker)return;this.sender=new M8(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await D0();return await Dy(e,op,"1"),await Wy(e,op),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dy(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>G8(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Wy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Rp(o,!1).getAll();return new wh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)n.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!n.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const o of Array.from(n))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),K8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Rw.type="LOCAL";const J8=Rw;new xh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(r,e){return e?cl(e):(Ht(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg extends Wg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function X8(r){return Sw(r.auth,new qg(r),r.bypassAuthState)}function Z8(r){const{auth:e,user:t}=r;return Ht(t,e,"internal-error"),j8(t,new qg(r),r.bypassAuthState)}async function ej(r){const{auth:e,user:t}=r;return Ht(t,e,"internal-error"),k8(t,new qg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e,t,n,o,a=!1){this.auth=e,this.resolver=n,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:o,tenantId:a,error:c,type:u}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return X8;case"linkViaPopup":case"linkViaRedirect":return ej;case"reauthViaPopup":case"reauthViaRedirect":return Z8;default:ia(this.auth,"internal-error")}}resolve(e){pl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=new xh(2e3,1e4);class Bu extends Pw{constructor(e,t,n,o,a){super(e,t,o,a),this.provider=n,this.authWindow=null,this.pollId=null,Bu.currentPopupAction&&Bu.currentPopupAction.cancel(),Bu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ht(e,this.auth,"internal-error"),e}async onExecution(){pl(this.filter.length===1,"Popup operations only handle one event");const e=Ug();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Pa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Pa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tj.get())};e()}}Bu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj="pendingRedirect",Ff=new Map;class nj extends Pw{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Ff.get(this.auth._key());if(!e){try{const n=await ij(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Ff.set(this.auth._key(),e)}return this.bypassAuthState||Ff.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ij(r,e){const t=aj(e),n=sj(r);if(!await n._isAvailable())return!1;const o=await n._get(t)==="true";return await n._remove(t),o}function oj(r,e){Ff.set(r._key(),e)}function sj(r){return cl(r._redirectPersistence)}function aj(r){return Bf(rj,r.config.apiKey,r.name)}async function lj(r,e,t=!1){if(js(r.app))return Promise.reject(ul(r));const n=tu(r),o=Q8(n,e),c=await new nj(n,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=600*1e3;class uj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Nw(e)){const o=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(Pa(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cj&&this.cachedEventUids.clear(),this.cachedEventUids.has($y(e))}saveEventToCache(e){this.cachedEventUids.add($y(e)),this.lastProcessedEventTime=Date.now()}}function $y(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Nw({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dj(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nw(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hj(r,e={}){return hc(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pj=/^https?/;async function mj(r){if(r.config.emulator)return;const{authorizedDomains:e}=await hj(r);for(const t of e)try{if(gj(t))return}catch{}ia(r,"unauthorized-domain")}function gj(r){const e=O0(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===n}if(!pj.test(t))return!1;if(fj.test(r))return n===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=new xh(3e4,6e4);function Uy(){const r=Na().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function xj(r){return new Promise((e,t)=>{var o,a,c;function n(){Uy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Uy(),t(Pa(r,"network-request-failed"))},timeout:yj.get()})}if((a=(o=Na().gapi)==null?void 0:o.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((c=Na().gapi)!=null&&c.load)n();else{const u=c8("iframefcb");return Na()[u]=()=>{gapi.load?n():t(Pa(r,"network-request-failed"))},yw(`${l8()}?onload=${u}`).catch(f=>t(f))}}).catch(e=>{throw zf=null,e})}let zf=null;function vj(r){return zf=zf||xj(r),zf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj=new xh(5e3,15e3),wj="__/auth/iframe",Sj="emulator/auth/iframe",_j={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Aj(r){const e=r.config;Ht(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Vg(e,Sj):`https://${r.config.authDomain}/${wj}`,n={apiKey:e.apiKey,appName:r.name,v:td},o=Tj.get(r.config.apiHost);o&&(n.eid=o);const a=r._getFrameworks();return a.length&&(n.fw=a.join(",")),`${t}?${uh(n).slice(1)}`}async function Cj(r){const e=await vj(r),t=Na().gapi;return Ht(t,r,"internal-error"),e.open({where:document.body,url:Aj(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_j,dontclear:!0},n=>new Promise(async(o,a)=>{await n.restyle({setHideOnLeave:!1});const c=Pa(r,"network-request-failed"),u=Na().setTimeout(()=>{a(c)},bj.get());function f(){Na().clearTimeout(u),o(n)}n.ping(f).then(f,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jj=500,Ej=600,Ij="_blank",Rj="http://localhost";class qy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Pj(r,e,t,n=jj,o=Ej){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const f={...kj,width:n.toString(),height:o.toString(),top:a,left:c},h=ao().toLowerCase();t&&(u=uw(h)?Ij:t),lw(h)&&(e=e||Rj,f.scrollbars="yes");const g=Object.entries(f).reduce((A,[v,F])=>`${A}${v}=${F},`,"");if(Z7(h)&&u!=="_self")return Nj(e||"",u),new qy(null);const b=window.open(e||"",u,g);Ht(b,r,"popup-blocked");try{b.focus()}catch{}return new qy(b)}function Nj(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj="__/auth/handler",Bj="emulator/auth/handler",Fj=encodeURIComponent("fac");async function Hy(r,e,t,n,o,a){Ht(r.config.authDomain,r,"auth-domain-config-required"),Ht(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:td,eventId:o};if(e instanceof bw){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",QT(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,b]of Object.entries({}))c[g]=b}if(e instanceof bh){const g=e.getScopes().filter(b=>b!=="");g.length>0&&(c.scopes=g.join(","))}r.tenantId&&(c.tid=r.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const f=await r._getAppCheckToken(),h=f?`#${Fj}=${encodeURIComponent(f)}`:"";return`${zj(r)}?${uh(u).slice(1)}${h}`}function zj({config:r}){return r.emulator?Vg(r,Bj):`https://${r.authDomain}/${Lj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="webStorageSupport";class Oj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kw,this._completeRedirectFn=lj,this._overrideRedirectResult=oj}async _openPopup(e,t,n,o){var c;pl((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const a=await Hy(e,t,n,O0(),o);return Pj(e,a,Ug())}async _openRedirect(e,t,n,o){await this._originValidation(e);const a=await Hy(e,t,n,O0(),o);return D8(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(pl(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Cj(e),n=new uj(e);return t.register("authEvent",o=>(Ht(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:n.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(t0,{type:t0},o=>{var c;const a=(c=o==null?void 0:o[0])==null?void 0:c[t0];a!==void 0&&t(!!a),ia(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mw()||cw()||Dg()}}const Vj=Oj;var Gy="@firebase/auth",Ky="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ht(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Wj(r){Hu(new $c("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=n.options;Ht(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const f={apiKey:c,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gw(r)},h=new o8(n,o,a,f);return m8(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Hu(new $c("auth-internal",e=>{const t=tu(e.getProvider("auth").getImmediate());return(n=>new Mj(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xl(Gy,Ky,Dj(r)),Xl(Gy,Ky,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=300,Uj=gv("authIdTokenMaxAge")||$j;let Yy=null;const qj=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Uj)return;const o=t==null?void 0:t.token;Yy!==o&&(Yy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Hj(r=Sv()){const e=Z0(r,"auth");if(e.isInitialized())return e.getImmediate();const t=p8(r,{popupRedirectResolver:Vj,persistence:[J8,O8,kw]}),n=gv("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const c=qj(a.toString());N8(t,c,()=>c(t.currentUser)),P8(t,u=>c(u))}}const o=pv("auth");return o&&g8(t,`http://${o}`),t}function Gj(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}s8({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=o=>{const a=Pa("internal-error");a.customData=o,t(a)},n.type="text/javascript",n.charset="UTF-8",Gj().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Wj("Browser");const Kj={apiKey:"AIzaSyCyIga2EWsEZLqApS633i9uRIy5p745EJg",authDomain:"electrician-toolkit-33497.firebaseapp.com",projectId:"electrician-toolkit-33497",storageBucket:"electrician-toolkit-33497.firebasestorage.app",messagingSenderId:"878846360709",appId:"1:878846360709:web:af750d7f4d2a9495b17dec",measurementId:"G-JWZ1TDP25R"},Lw=wv(Kj),Do=Hj(Lw),Sh=u7(Lw),Hg=async()=>{var r;try{const e=(r=Do.currentUser)==null?void 0:r.uid;if(!e)throw new Error("User not authenticated");const t=Ag(Sh,"users",e,"jobs"),n=S7(t,_7("createdAt","desc"));return(await j7(n)).docs.map(a=>({id:a.id,...a.data()}))}catch(e){throw console.error("Error fetching jobs:",e),e}},Bw=async(r,e)=>{var t;try{const n=(t=Do.currentUser)==null?void 0:t.uid;if(!n)throw new Error("User not authenticated");const o=Ap(Sh,"users",n,"jobs",r),a=Ag(o,"calculations"),c={...e,createdAt:zg()};return(await Zb(a,c)).id}catch(n){throw console.error("Error adding calculation:",n),n}},Fw=async r=>{var e;try{console.log("🔍 Starting createJob..."),console.log("auth:",Do),console.log("auth.currentUser:",Do.currentUser);const t=(e=Do.currentUser)==null?void 0:e.uid;if(console.log("userId extracted:",t),!t)throw console.error("❌ No userId - auth.currentUser is:",Do.currentUser),new Error("User not authenticated");console.log("✅ User authenticated with ID:",t);const n=Ag(Sh,"users",t,"jobs"),o={...r,createdAt:zg(),status:r.status||"active"};console.log("📝 Attempting to save job:",o);const a=await Zb(n,o);return console.log("✅ Job created with ID:",a.id),a.id}catch(t){throw console.error("❌ Error in createJob:",t),t}},zw=async r=>{var e;try{const t=(e=Do.currentUser)==null?void 0:e.uid;if(!t)throw new Error("User not authenticated");const n=Ap(Sh,"users",t,"jobs",r);await I7(n)}catch(t){throw console.error("Error deleting job:",t),t}},Yj=async(r,e)=>{var t;try{const n=(t=Do.currentUser)==null?void 0:t.uid;if(!n)throw new Error("User not authenticated");const o=Ap(Sh,"users",n,"jobs",r);await E7(o,{...e,updatedAt:zg()})}catch(n){throw console.error("Error updating job:",n),n}},Jj=Object.freeze(Object.defineProperty({__proto__:null,addCalculationToJob:Bw,createJob:Fw,deleteJob:zw,getUserJobs:Hg,updateJob:Yj},Symbol.toStringTag,{value:"Module"})),Qj=be.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=be.useState("basic"),[o,a]=be.useState(""),[c,u]=be.useState(""),[f,h]=be.useState(""),[g,b]=be.useState(""),[A,v]=be.useState([{id:1,R:"",V:"",I:"",P:""}]),[F,E]=be.useState([{id:1,R:"",V:"",I:"",P:""}]),[N,j]=be.useState(!1),[$,V]=be.useState([]),[B,X]=be.useState(!1),se=()=>{e.current&&e.current.exportPDF()},U=async()=>{j(!0),X(!0);try{const _e=await Hg();V(_e)}catch(_e){console.error("Error loading jobs:",_e),alert("Failed to load jobs. Please try again.")}finally{X(!1)}},C=async _e=>{try{const pe={type:"ohms-law",data:{voltage:parseFloat(o)||0,current:parseFloat(c)||0,resistance:parseFloat(f)||0,power:parseFloat(g)||0}};await Bw(_e,pe),j(!1),alert("Calculation attached to job successfully!")}catch(pe){console.error("Error attaching calculation:",pe),alert("Failed to attach calculation. Please try again.")}},w={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};be.useEffect(()=>{de()},[o,c,f,g]);const O=(_e,pe)=>Object.entries(_e).filter(([Je,Ue])=>Je!==pe&&Ue&&Ue!=="").map(([Je])=>Je).length>=2,[P,S]=be.useState({R:"",V:"",I:"",P:""}),[z,W]=be.useState({R:"",V:"",I:"",P:""}),[le,ve]=be.useState({V:"",I:"",R:"",P:""}),de=()=>{const _e=parseFloat(o)||0,pe=parseFloat(c)||0,Q=parseFloat(f)||0,Je=parseFloat(g)||0,Ue={V:"",I:"",R:"",P:""};!o&&pe&&Q?Ue.V=(pe*Q).toFixed(1):!o&&Je&&pe&&pe!==0?Ue.V=(Je/pe).toFixed(1):!o&&Je&&Q?Ue.V=Math.sqrt(Je*Q).toFixed(1):o&&(Ue.V=_e.toFixed(1)),!c&&_e&&Q&&Q!==0?Ue.I=(_e/Q).toFixed(1):!c&&Je&&_e&&_e!==0?Ue.I=(Je/_e).toFixed(1):!c&&Je&&Q&&Q!==0?Ue.I=Math.sqrt(Je/Q).toFixed(1):c&&(Ue.I=pe.toFixed(1)),!f&&_e&&pe&&pe!==0?Ue.R=(_e/pe).toFixed(1):!f&&_e&&Je&&Je!==0?Ue.R=(_e*_e/Je).toFixed(1):!f&&Je&&pe&&pe!==0?Ue.R=(Je/(pe*pe)).toFixed(1):f&&(Ue.R=Q.toFixed(1)),!g&&_e&&pe?Ue.P=(_e*pe).toFixed(1):!g&&pe&&Q?Ue.P=(pe*pe*Q).toFixed(1):!g&&_e&&Q&&Q!==0?Ue.P=(_e*_e/Q).toFixed(1):g&&(Ue.P=Je.toFixed(1)),ve(Ue)},ce=()=>{a(""),u(""),h(""),b(""),ve({V:"",I:"",R:"",P:""})},we=()=>{const _e=Math.max(...A.map(pe=>pe.id),0)+1;v([...A,{id:_e,R:"",V:"",I:"",P:""}])},je=_e=>{A.length>1&&v(A.filter(pe=>pe.id!==_e))},ne=(_e,pe,Q)=>{v(A.map(Je=>Je.id===_e?{...Je,[pe]:Q}:Je))},D=(_e,pe)=>{const Q=[];if(pe.I&&pe.I!==""){const Je=parseFloat(pe.I);_e.forEach((Ue,tt)=>{if(Ue.I&&Ue.I!==""){const ge=parseFloat(Ue.I);Math.abs(ge-Je)>.01&&Q.push(`Total current (${Je}A) conflicts with Component ${tt+1} current (${ge}A)`)}})}return Q},Y=(_e,pe)=>{const Q=[];if(pe.V&&pe.V!==""){const Je=parseFloat(pe.V);_e.forEach((Ue,tt)=>{if(Ue.V&&Ue.V!==""){const ge=parseFloat(Ue.V);Math.abs(ge-Je)>.01&&Q.push(`Total voltage (${Je}V) conflicts with Component ${tt+1} voltage (${ge}V)`)}})}return Q},re=()=>{const _e=D(A,P);if(_e.length>0){alert(`Conflicts detected:
`+_e.join(`
`));return}let pe=[...A];if(P.I&&P.I!==""){const tt=parseFloat(P.I);pe=pe.map(ge=>!ge.I||ge.I===""?{...ge,I:tt.toFixed(1)}:ge)}let Q=!0,Je=0;const Ue=50;for(;Q&&Je<Ue;){Q=!1,Je++;let tt=null;for(let ge of pe)if(ge.I&&!isNaN(parseFloat(ge.I))){tt=parseFloat(ge.I);break}if(tt===null)for(let ge of pe){const De=parseFloat(ge.V),He=parseFloat(ge.R),at=parseFloat(ge.P);if(!isNaN(De)&&!isNaN(He)&&He!==0){tt=De/He;break}else if(!isNaN(at)&&!isNaN(De)&&De!==0){tt=at/De;break}else if(!isNaN(at)&&!isNaN(He)&&He!==0){tt=Math.sqrt(at/He);break}}tt!==null&&(pe=pe.map(ge=>!ge.I||ge.I===""?(Q=!0,{...ge,I:tt.toFixed(1)}):ge)),pe=pe.map(ge=>{const De={...ge},He=parseFloat(ge.V),at=parseFloat(ge.I),ht=parseFloat(ge.R),Tt=parseFloat(ge.P);(ge.R===""||isNaN(ht))&&!isNaN(He)&&!isNaN(at)&&at!==0?(De.R=(He/at).toFixed(1),Q=!0):(ge.R===""||isNaN(ht))&&!isNaN(Tt)&&!isNaN(at)&&at!==0?(De.R=(Tt/(at*at)).toFixed(1),Q=!0):(ge.R===""||isNaN(ht))&&!isNaN(He)&&!isNaN(Tt)&&Tt!==0&&(De.R=(He*He/Tt).toFixed(1),Q=!0);const lt=parseFloat(De.R),ct=parseFloat(De.I);(ge.V===""||isNaN(He))&&!isNaN(ct)&&!isNaN(lt)?(De.V=(ct*lt).toFixed(1),Q=!0):(ge.V===""||isNaN(He))&&!isNaN(Tt)&&!isNaN(ct)&&ct!==0?(De.V=(Tt/ct).toFixed(1),Q=!0):(ge.V===""||isNaN(He))&&!isNaN(Tt)&&!isNaN(lt)&&(De.V=Math.sqrt(Tt*lt).toFixed(1),Q=!0);const Kt=parseFloat(De.V);return(ge.P===""||isNaN(Tt))&&!isNaN(Kt)&&!isNaN(ct)?(De.P=(Kt*ct).toFixed(1),Q=!0):(ge.P===""||isNaN(Tt))&&!isNaN(ct)&&!isNaN(lt)?(De.P=(ct*ct*lt).toFixed(1),Q=!0):(ge.P===""||isNaN(Tt))&&!isNaN(Kt)&&!isNaN(lt)&&lt!==0&&(De.P=(Kt*Kt/lt).toFixed(1),Q=!0),De})}v(pe)},ue=()=>{v([{id:1,R:"",V:"",I:"",P:""}]),S({R:"",V:"",I:"",P:""})},fe=()=>{const _e=Math.max(...F.map(pe=>pe.id),0)+1;E([...F,{id:_e,R:"",V:"",I:"",P:""}])},Se=_e=>{F.length>1&&E(F.filter(pe=>pe.id!==_e))},Ee=(_e,pe,Q)=>{E(F.map(Je=>Je.id===_e?{...Je,[pe]:Q}:Je))},ke=()=>{const _e=Y(F,z);if(_e.length>0){alert(`Conflicts detected:
`+_e.join(`
`));return}let pe=[...F];if(z.V&&z.V!==""){const tt=parseFloat(z.V);pe=pe.map(ge=>!ge.V||ge.V===""?{...ge,V:tt.toFixed(1)}:ge)}let Q=!0,Je=0;const Ue=50;for(;Q&&Je<Ue;){Q=!1,Je++;let tt=null;for(let ge of pe)if(ge.V&&!isNaN(parseFloat(ge.V))){tt=parseFloat(ge.V);break}if(tt===null)for(let ge of pe){const De=parseFloat(ge.I),He=parseFloat(ge.R),at=parseFloat(ge.P);if(!isNaN(De)&&!isNaN(He)){tt=De*He;break}else if(!isNaN(at)&&!isNaN(De)&&De!==0){tt=at/De;break}else if(!isNaN(at)&&!isNaN(He)){tt=Math.sqrt(at*He);break}}tt!==null&&(pe=pe.map(ge=>!ge.V||ge.V===""?(Q=!0,{...ge,V:tt.toFixed(1)}):ge)),pe=pe.map(ge=>{const De={...ge},He=parseFloat(ge.V),at=parseFloat(ge.I),ht=parseFloat(ge.R),Tt=parseFloat(ge.P);(ge.R===""||isNaN(ht))&&!isNaN(He)&&!isNaN(at)&&at!==0?(De.R=(He/at).toFixed(1),Q=!0):(ge.R===""||isNaN(ht))&&!isNaN(Tt)&&!isNaN(at)&&at!==0?(De.R=(Tt/(at*at)).toFixed(1),Q=!0):(ge.R===""||isNaN(ht))&&!isNaN(He)&&!isNaN(Tt)&&Tt!==0&&(De.R=(He*He/Tt).toFixed(1),Q=!0);const lt=parseFloat(De.R),ct=parseFloat(De.V);(ge.I===""||isNaN(at))&&!isNaN(ct)&&!isNaN(lt)&&lt!==0?(De.I=(ct/lt).toFixed(1),Q=!0):(ge.I===""||isNaN(at))&&!isNaN(Tt)&&!isNaN(ct)&&ct!==0?(De.I=(Tt/ct).toFixed(1),Q=!0):(ge.I===""||isNaN(at))&&!isNaN(Tt)&&!isNaN(lt)&&lt!==0&&(De.I=Math.sqrt(Tt/lt).toFixed(1),Q=!0);const Kt=parseFloat(De.I);return(ge.P===""||isNaN(Tt))&&!isNaN(ct)&&!isNaN(Kt)?(De.P=(ct*Kt).toFixed(1),Q=!0):(ge.P===""||isNaN(Tt))&&!isNaN(Kt)&&!isNaN(lt)?(De.P=(Kt*Kt*lt).toFixed(1),Q=!0):(ge.P===""||isNaN(Tt))&&!isNaN(ct)&&!isNaN(lt)&&lt!==0&&(De.P=(ct*ct/lt).toFixed(1),Q=!0),De})}E(pe)},Oe=()=>{E([{id:1,R:"",V:"",I:"",P:""}]),W({R:"",V:"",I:"",P:""})},Ke=()=>{const _e=A.reduce((tt,ge)=>{const De=parseFloat(ge.R);return tt+(isNaN(De)?0:De)},0),pe=A.reduce((tt,ge)=>{const De=parseFloat(ge.V);return tt+(isNaN(De)?0:De)},0),Q=A.reduce((tt,ge)=>{const De=parseFloat(ge.P);return tt+(isNaN(De)?0:De)},0),Je=A.find(tt=>!isNaN(parseFloat(tt.I))),Ue=Je?parseFloat(Je.I):0;return{totalR:_e,totalV:pe,totalI:Ue,totalP:Q}},nt=()=>{const _e=F.reduce((ge,De)=>{const He=parseFloat(De.I);return ge+(isNaN(He)?0:He)},0),pe=F.reduce((ge,De)=>{const He=parseFloat(De.P);return ge+(isNaN(He)?0:He)},0),Q=F.find(ge=>!isNaN(parseFloat(ge.V))),Je=Q?parseFloat(Q.V):0,Ue=F.map(ge=>parseFloat(ge.R)).filter(ge=>!isNaN(ge)&&ge>0);return{totalR:Ue.length>0?1/Ue.reduce((ge,De)=>ge+1/De,0):0,totalV:Je,totalI:_e,totalP:pe}};return be.useImperativeHandle(e,()=>({exportPDF:()=>{let _e;if(t==="basic"){if(!(o||c||f||g||le.V||le.I||le.R||le.P)){alert("Please enter at least 2 values before exporting");return}const Q={},Je={};o&&(Q.voltage=`${o} V`),c&&(Q.current=`${c} A`),f&&(Q.resistance=`${f} Ω`),g&&(Q.power=`${g} W`),le.V&&(Je.voltage=`${le.V} V`),le.I&&(Je.current=`${le.I} A`),le.R&&(Je.resistance=`${le.R} Ω`),le.P&&(Je.power=`${le.P} W`),_e={calculatorName:"Ohm's Law Calculator - Basic",inputs:Q,results:Je,additionalInfo:{note:"Calculations based on fundamental electrical formulas"},necReferences:["Ohm's Law: E = I × R","Power formulas: P = E × I, P = I² × R, P = E² ÷ R","Current: I = E ÷ R, I = P ÷ E, I = √(P ÷ R)","Resistance: R = E ÷ I, R = E² ÷ P, R = P ÷ I²"]}}else if(t==="series"){if(!A.some(Ue=>Ue.R||Ue.V||Ue.I||Ue.P)){alert("Please enter component values before exporting");return}const Q=Ke(),Je={};A.forEach((Ue,tt)=>{const ge=[];Ue.R&&ge.push(`R=${Ue.R}Ω`),Ue.V&&ge.push(`V=${Ue.V}V`),Ue.I&&ge.push(`I=${Ue.I}A`),Ue.P&&ge.push(`P=${Ue.P}W`),ge.length>0&&(Je[`component${tt+1}`]=ge.join(", "))}),_e={calculatorName:"Ohm's Law Calculator - Series Circuit",inputs:Je,results:{totalResistance:`${Q.totalR.toFixed(1)} Ω`,totalVoltage:`${Q.totalV.toFixed(1)} V`,current:`${Q.totalI.toFixed(1)} A (constant)`,totalPower:`${Q.totalP.toFixed(1)} W`},additionalInfo:{circuitType:"Series Circuit",principle:"Current is constant across all components",totalResistanceFormula:"R_total = R1 + R2 + R3 + ...",totalVoltageFormula:"V_total = V1 + V2 + V3 + ..."},necReferences:["Series circuits: Current is the same through all components","Total resistance = Sum of all resistances","Total voltage = Sum of voltage drops across components","Total power = Sum of power dissipated in each component"]}}else if(t==="parallel"){if(!F.some(Ue=>Ue.R||Ue.V||Ue.I||Ue.P)){alert("Please enter component values before exporting");return}const Q=nt(),Je={};F.forEach((Ue,tt)=>{const ge=[];Ue.R&&ge.push(`R=${Ue.R}Ω`),Ue.V&&ge.push(`V=${Ue.V}V`),Ue.I&&ge.push(`I=${Ue.I}A`),Ue.P&&ge.push(`P=${Ue.P}W`),ge.length>0&&(Je[`component${tt+1}`]=ge.join(", "))}),_e={calculatorName:"Ohm's Law Calculator - Parallel Circuit",inputs:Je,results:{totalResistance:`${Q.totalR.toFixed(1)} Ω`,voltage:`${Q.totalV.toFixed(1)} V (constant)`,totalCurrent:`${Q.totalI.toFixed(1)} A`,totalPower:`${Q.totalP.toFixed(1)} W`},additionalInfo:{circuitType:"Parallel Circuit",principle:"Voltage is constant across all components",totalResistanceFormula:"1/R_total = 1/R1 + 1/R2 + 1/R3 + ...",totalCurrentFormula:"I_total = I1 + I2 + I3 + ..."},necReferences:["Parallel circuits: Voltage is the same across all components","Total resistance = 1 ÷ (1/R1 + 1/R2 + 1/R3 + ...)","Total current = Sum of currents through each branch","Total power = Sum of power dissipated in each component"]}}pn(_e)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:()=>n("basic"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="basic"?"#3b82f6":w.sectionBg,color:t==="basic"?"white":w.labelText,border:`1px solid ${t==="basic"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Basic"}),i.jsx("button",{onClick:()=>n("series"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="series"?"#3b82f6":w.sectionBg,color:t==="series"?"white":w.labelText,border:`1px solid ${t==="series"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Series"}),i.jsx("button",{onClick:()=>n("parallel"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="parallel"?"#3b82f6":w.sectionBg,color:t==="parallel"?"white":w.labelText,border:`1px solid ${t==="parallel"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Parallel"})]}),t==="basic"&&i.jsxs("div",{children:[i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:"Enter any 2 known values to calculate the remaining values"})]})}),i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Volts (E)"}),i.jsx("input",{type:"number",value:o||le.V,onChange:_e=>a(_e.target.value),placeholder:"Enter voltage",disabled:c&&f||c&&g||f&&g,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:c&&f||c&&g||f&&g?w.sectionBg:w.inputBg,color:w.cardText,boxSizing:"border-box",cursor:c&&f||c&&g||f&&g?"not-allowed":"text"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Amps (I)"}),i.jsx("input",{type:"number",value:c||le.I,onChange:_e=>u(_e.target.value),placeholder:"Enter current",disabled:o&&f||o&&g||f&&g,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:o&&f||o&&g||f&&g?w.sectionBg:w.inputBg,color:w.cardText,boxSizing:"border-box",cursor:o&&f||o&&g||f&&g?"not-allowed":"text"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Ohms (R)"}),i.jsx("input",{type:"number",value:f||le.R,onChange:_e=>h(_e.target.value),placeholder:"Enter resistance",disabled:o&&c||o&&g||c&&g,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:o&&c||o&&g||c&&g?w.sectionBg:w.inputBg,color:w.cardText,boxSizing:"border-box",cursor:o&&c||o&&g||c&&g?"not-allowed":"text"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Watts (P)"}),i.jsx("input",{type:"number",value:g||le.P,onChange:_e=>b(_e.target.value),placeholder:"Enter power",disabled:o&&c||o&&f||c&&f,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:o&&c||o&&f||c&&f?w.sectionBg:w.inputBg,color:w.cardText,boxSizing:"border-box",cursor:o&&c||o&&f||c&&f?"not-allowed":"text"}})]})]}),i.jsx("button",{onClick:ce,style:{width:"100%",background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),(le.V||le.I||le.R||le.P)&&i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[le.V&&i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Voltage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:le.V}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"Volts"})]}),le.I&&i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Current"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:le.I}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),le.R&&i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Resistance"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:le.R}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"Ohms"})]}),le.P&&i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Power"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:le.P}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"Watts"})]})]})]})]}),t==="series"&&i.jsxs("div",{children:[i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:"Series Circuit: Current is constant across all components"})]})}),i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Totals (Optional)"}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"0.5rem"},children:["V","I","R","P"].map(_e=>{const pe={R:"Ohms (R)",V:"Volts (E)",I:"Amps (I)",P:"Watts (P)"};return i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:pe[_e]}),i.jsx("input",{type:"number",value:P[_e],onChange:Q=>S({...P,[_e]:Q.target.value}),placeholder:"Optional",disabled:O(P,_e),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:O(P,_e)?w.sectionBg:w.inputBg,color:w.cardText,boxSizing:"border-box",cursor:O(P,_e)?"not-allowed":"text"}})]},_e)})}),i.jsx("p",{style:{fontSize:"0.8125rem",color:w.subtleText,margin:0,fontStyle:"italic"},children:"Enter known total values to help solve the circuit. Current is constant in series."})]}),A.map((_e,pe)=>i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${w.cardBorder}`},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",marginBottom:"0.75rem",gap:"0.5rem"},children:[i.jsxs("h4",{style:{fontWeight:"600",color:w.labelText,margin:0,fontSize:"0.875rem"},children:["Component ",pe+1]}),A.length>1&&i.jsx("button",{onClick:()=>je(_e.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Vc,{size:18})})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem"},children:[{field:"E",label:"Volts (E)"},{field:"I",label:"Amps (I)"},{field:"R",label:"Ohms (R)"},{field:"P",label:"Watts (P)"}].map(({field:Q,label:Je})=>i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"500",color:w.subtleText,marginBottom:"0.25rem"},children:Je}),i.jsx("input",{type:"number",value:_e[Q],onChange:Ue=>ne(_e.id,Q,Ue.target.value),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]},Q))})]},_e.id)),i.jsxs("button",{onClick:we,style:{width:"100%",background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsx(Oc,{size:16}),"Add Component"]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsxs("button",{onClick:re,style:{flex:1,background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(Kd,{size:20}),"Calculate"]}),i.jsx("button",{onClick:ue,style:{flex:1,background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Circuit Totals"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Voltage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:w.cardText},children:Ke().totalV.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"E"})]}),i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Amperage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:w.cardText},children:Ke().totalI.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"I"})]}),i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Resistance"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:w.cardText},children:Ke().totalR.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"R"})]}),i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Wattage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:w.cardText},children:Ke().totalP.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"P"})]})]})]})]}),t==="parallel"&&i.jsxs("div",{children:[i.jsx("div",{style:{background:"#faf5ff",border:"1px solid #a855f7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#7e22ce",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#7e22ce",lineHeight:"1.5"},children:"Parallel Circuit: Voltage is constant across all components"})]})}),i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Totals (Optional)"}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"0.5rem"},children:["V","I","R","P"].map(_e=>{const pe={R:"Ohms (R)",V:"Volts (E)",I:"Amps (I)",P:"Watts (P)"};return i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:pe[_e]}),i.jsx("input",{type:"number",value:z[_e],onChange:Q=>W({...z,[_e]:Q.target.value}),placeholder:"Optional",disabled:O(z,_e),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:O(z,_e)?w.sectionBg:w.inputBg,color:w.cardText,boxSizing:"border-box",cursor:O(z,_e)?"not-allowed":"text"}})]},_e)})}),i.jsx("p",{style:{fontSize:"0.8125rem",color:w.subtleText,margin:0,fontStyle:"italic"},children:"Enter known total values to help solve the circuit. Voltage is constant in parallel."})]}),F.map((_e,pe)=>i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${w.cardBorder}`},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",marginBottom:"0.75rem",gap:"0.5rem"},children:[i.jsxs("h4",{style:{fontWeight:"600",color:w.labelText,margin:0,fontSize:"0.875rem"},children:["Component ",pe+1]}),F.length>1&&i.jsx("button",{onClick:()=>Se(_e.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Vc,{size:18})})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem"},children:[{field:"E",label:"Volts (E)"},{field:"I",label:"Amps (I)"},{field:"R",label:"Ohms (R)"},{field:"P",label:"Watts (P)"}].map(({field:Q,label:Je})=>i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"500",color:w.subtleText,marginBottom:"0.25rem"},children:Je}),i.jsx("input",{type:"number",value:_e[Q],onChange:Ue=>Ee(_e.id,Q,Ue.target.value),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]},Q))})]},_e.id)),i.jsxs("button",{onClick:fe,style:{width:"100%",background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsx(Oc,{size:16}),"Add Component"]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsxs("button",{onClick:ke,style:{flex:1,background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(Kd,{size:20}),"Calculate"]}),i.jsx("button",{onClick:Oe,style:{flex:1,background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Circuit Totals"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Total R"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:w.cardText},children:nt().totalR.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"Ω"})]}),i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Total E"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:w.cardText},children:nt().totalV.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"V"})]}),i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Total I"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:w.cardText},children:nt().totalI.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"A"})]}),i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Total P"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:w.cardText},children:nt().totalP.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"W"})]})]})]})]}),i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`,fontSize:"0.8125rem",color:w.labelText,marginTop:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:w.cardText},children:"Formulas:"}),i.jsx("div",{children:"E = I × R"}),i.jsx("div",{children:"P = E × I"}),i.jsx("div",{children:"I = E ÷ R"}),i.jsx("div",{children:"P = I² × R "}),i.jsx("div",{children:"R = E ÷ I"}),i.jsx("div",{children:"P = E² ÷ R"})]}),N&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:i.jsxs("div",{style:{background:w.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[i.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:w.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),i.jsx("div",{style:{marginBottom:"1rem"},children:B?i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:w.labelText},children:"Loading jobs..."}):$&&$.length>0?$.map(_e=>i.jsxs("div",{onClick:()=>C(_e.id),style:{padding:"1rem",background:w.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${w.cardBorder}`,transition:"all 0.2s"},onMouseOver:pe=>pe.currentTarget.style.transform="translateY(-2px)",onMouseOut:pe=>pe.currentTarget.style.transform="translateY(0)",children:[i.jsx("div",{style:{fontWeight:"600",color:w.cardText,marginBottom:"0.25rem"},children:_e.name}),i.jsx("div",{style:{fontSize:"0.875rem",color:w.labelText},children:_e.location||"No location"})]},_e.id)):i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:w.labelText},children:i.jsx("p",{children:"No jobs found. Create a job first."})})}),i.jsx("button",{onClick:()=>j(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:_e=>_e.currentTarget.style.background="#4b5563",onMouseOut:_e=>_e.currentTarget.style.background="#6b7280",children:"Cancel"})]})}),(o||c||f||g)&&i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[i.jsxs("button",{onClick:se,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:_e=>_e.currentTarget.style.background="#2563eb",onMouseOut:_e=>_e.currentTarget.style.background="#3b82f6",children:[i.jsx(nx,{size:18}),"Export to PDF"]}),i.jsxs("button",{onClick:U,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:_e=>_e.currentTarget.style.background="#059669",onMouseOut:_e=>_e.currentTarget.style.background="#10b981",children:[i.jsx(ap,{size:18}),"Attach to Job"]})]})]})}),Xj=be.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=be.useState("4x1.5-square"),[a,c]=be.useState([{size:"12",count:""}]),[u,f]=be.useState({outlets:"",switches:"",clamps:"",groundWires:!1}),h={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},g={"3x2x1.5":{capacity:7.5,name:'3" x 2" x 1-1/2" Device Box'},"3x2x2":{capacity:10,name:'3" x 2" x 2" Device Box'},"3x2x2.25":{capacity:10.5,name:'3" x 2" x 2-1/4" Device Box'},"3x2x2.5":{capacity:12.5,name:'3" x 2" x 2-1/2" Device Box'},"3x2x2.75":{capacity:14,name:'3" x 2" x 2-3/4" Device Box'},"3x2x3.5":{capacity:18,name:'3" x 2" x 3-1/2" Device Box'},"3x2x2-2gang":{capacity:14,name:'2-Gang 3" x 2" x 2" Device Box'},"3x2x2.25-2gang":{capacity:17,name:'2-Gang 3" x 2" x 2-1/4" Device Box'},"3x2x2.5-2gang":{capacity:21,name:'2-Gang 3" x 2" x 2-1/2" Device Box'},"3x2x3.5-2gang":{capacity:29.5,name:'2-Gang 3" x 2" x 3-1/2" Device Box'},"3x2x3.5-3gang":{capacity:43.5,name:'3-Gang 3" x 2" x 3-1/2" Device Box'},"4x1.25-square":{capacity:18,name:'4" x 1-1/4" Square'},"4x1.5-square":{capacity:21,name:'4" x 1-1/2" Square'},"4x2.125-square":{capacity:30.3,name:'4" x 2-1/8" Square'},"4-11/16x1.5-square":{capacity:25.5,name:'4-11/16" x 1-1/2" Square'},"4-11/16x2.125-square":{capacity:42,name:'4-11/16" x 2-1/8" Square'},"4x1.25-round":{capacity:12.5,name:'4" x 1-1/4" Round'},"4x1.5-round":{capacity:15.5,name:'4" x 1-1/2" Round'},"4x2.125-round":{capacity:21.5,name:'4" x 2-1/8" Round'},"4x1.25-octagon":{capacity:15.5,name:'4" x 1-1/4" Octagon'},"4x1.5-octagon":{capacity:18,name:'4" x 1-1/2" Octagon'},"4x2.125-octagon":{capacity:24.5,name:'4" x 2-1/8" Octagon'},"3.5x1.5-masonry":{capacity:14,name:'3-1/2" x 1-1/2" Masonry Box'},"3.5x2.125-masonry":{capacity:21,name:'3-1/2" x 2-1/8" Masonry Box'}},b={14:2,12:2.25,10:2.5,8:3,6:5,4:5,3:5,2:5,1:5},A=()=>{c([...a,{size:"12",count:""}])},v=B=>{a.length>1&&c(a.filter((X,se)=>se!==B))},F=(B,X,se)=>{const U=[...a];U[B][X]=se,c(U)},N=(()=>{let B=0;const X=a.map(W=>{const le=parseInt(W.count)||0,ve=b[W.size],de=ve*le;return B+=de,{size:W.size,count:le,allowanceEach:ve,subtotal:de}}),se=a.reduce((W,le)=>{if((parseInt(le.count)||0)>0){const de=parseInt(le.size.replace("/",""))||0,ce=parseInt(W.replace("/",""))||0;return de<ce?le.size:W}return W},"14"),U=b[se],C=parseInt(u.outlets)||0,w=parseInt(u.switches)||0,O=(C+w)*2*U;B+=O;const S=(parseInt(u.clamps)||0)>0?U:0;B+=S;const z=u.groundWires?U:0;return B+=z,{conductorDetails:X,deviceFill:O,clampFill:S,groundFill:z,totalFill:B,largestWireSize:se,deviceWireAllowance:U}})(),j=g[n].capacity,$=j>0?(N.totalFill/j*100).toFixed(1):0,V=N.totalFill>j;return be.useImperativeHandle(t,()=>({exportPDF:()=>{const B={};a.forEach((O,P)=>{const S=parseInt(O.count)||0;S>0&&(B[`Conductor ${P+1}`]=`${S}× ${O.size} AWG`)});const X={};N.conductorDetails.forEach((O,P)=>{O.count>0&&(X[`${O.count}× ${O.size} AWG`]=`${O.allowanceEach} cu.in. each = ${O.subtotal.toFixed(2)} cu.in. total`)});const se=parseInt(u.outlets)||0,U=parseInt(u.switches)||0,C=parseInt(u.clamps)||0,w={calculatorName:"Box Fill Calculator",inputs:{boxType:`${g[n].name} (${j} cu.in.)`,...B,receptaclesOutlets:se>0?`${se} (counts as ${se*2} conductors)`:"0",switches:U>0?`${U} (counts as ${U*2} conductors)`:"0",cableClamps:C>0?`${C} (counts as 1 conductor volume)`:"0",equipmentGroundingConductors:u.groundWires?"Yes (counts as 1 conductor volume)":"No"},results:{boxCapacity:`${j} cu.in.`,calculatedFill:`${N.totalFill.toFixed(2)} cu.in.`,fillPercentage:`${$}%`,status:V?"❌ OVERFILLED - Violates NEC 314.16":"✓ Within NEC limits",deviceFill:N.deviceFill>0?`${N.deviceFill.toFixed(2)} cu.in.`:"N/A",clampFill:N.clampFill>0?`${N.clampFill.toFixed(2)} cu.in.`:"N/A",groundFill:N.groundFill>0?`${N.groundFill.toFixed(2)} cu.in.`:"N/A"},additionalInfo:{...X,largestWireSize:`${N.largestWireSize} AWG (used for device/clamp/ground allowance)`,deviceWireAllowance:`${N.deviceWireAllowance} cu.in. per conductor`},necReferences:["NEC 314.16 - Number of Conductors in Outlet, Device, and Junction Boxes","NEC 314.16(B) - Box Fill Calculations","Conductor volume allowances per NEC Table 314.16(B)","Each device (receptacle/switch) counts as 2 conductor volumes","All equipment grounding conductors combined count as 1 conductor volume","One or more cable clamps count as 1 conductor volume",V?"WARNING: This configuration exceeds the maximum allowable box fill":null].filter(Boolean)};pn(w)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:h.cardBg,border:`1px solid ${h.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:h.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${h.cardBorder}`,paddingBottom:"0.5rem"},children:"Box Selection"}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:h.labelText,marginBottom:"0.5rem"},children:"Box Type"}),i.jsxs("select",{value:n,onChange:B=>o(B.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${h.inputBorder}`,borderRadius:"8px",backgroundColor:h.inputBg,color:h.cardText,boxSizing:"border-box"},children:[i.jsx("optgroup",{label:"Device Boxes (Single Gang)",children:Object.entries(g).filter(([B])=>B.startsWith("3x2x")&&!B.includes("gang")).map(([B,X])=>i.jsxs("option",{value:B,children:[X.name," - ",X.capacity," cu.in."]},B))}),i.jsx("optgroup",{label:"Device Boxes (Multi-Gang)",children:Object.entries(g).filter(([B])=>B.includes("gang")).map(([B,X])=>i.jsxs("option",{value:B,children:[X.name," - ",X.capacity," cu.in."]},B))}),i.jsx("optgroup",{label:"Square Boxes",children:Object.entries(g).filter(([B])=>B.includes("square")).map(([B,X])=>i.jsxs("option",{value:B,children:[X.name," - ",X.capacity," cu.in."]},B))}),i.jsx("optgroup",{label:"Round/Octagon Boxes",children:Object.entries(g).filter(([B])=>B.includes("round")||B.includes("octagon")).map(([B,X])=>i.jsxs("option",{value:B,children:[X.name," - ",X.capacity," cu.in."]},B))}),i.jsx("optgroup",{label:"Masonry Boxes",children:Object.entries(g).filter(([B])=>B.includes("masonry")).map(([B,X])=>i.jsxs("option",{value:B,children:[X.name," - ",X.capacity," cu.in."]},B))})]})]})]}),i.jsxs("div",{style:{background:h.cardBg,border:`1px solid ${h.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:h.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${h.cardBorder}`,paddingBottom:"0.5rem"},children:"Conductors"}),a.map((B,X)=>i.jsxs("div",{style:{background:h.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${h.cardBorder}`},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[i.jsxs("h4",{style:{fontWeight:"600",color:h.labelText,margin:0,fontSize:"0.875rem"},children:["Wire Size ",X+1]}),a.length>1&&i.jsx("button",{onClick:()=>v(X),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:i.jsx(Vc,{size:20})})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[i.jsx("select",{value:B.size,onChange:se=>F(X,"size",se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${h.inputBorder}`,borderRadius:"8px",backgroundColor:h.inputBg,color:h.cardText,boxSizing:"border-box"},children:Object.keys(b).map(se=>i.jsxs("option",{value:se,children:[se," AWG"]},se))}),i.jsx("input",{type:"number",value:B.count,onChange:se=>F(X,"count",se.target.value),placeholder:"Quantity",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${h.inputBorder}`,borderRadius:"8px",backgroundColor:h.inputBg,color:h.cardText,boxSizing:"border-box"}})]})]},X)),i.jsxs("button",{onClick:A,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(Oc,{size:16}),"Add Wire Size"]}),i.jsx("p",{style:{fontSize:"0.75rem",color:h.subtleText,marginTop:"0.5rem",margin:"0.5rem 0 0 0"},children:"Count all insulated conductors entering, leaving, or passing through the box"})]}),i.jsxs("div",{style:{background:h.cardBg,border:`1px solid ${h.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:h.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${h.cardBorder}`,paddingBottom:"0.5rem"},children:"Devices & Other Items"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:h.labelText,marginBottom:"0.5rem"},children:"Receptacles/Outlets"}),i.jsx("input",{type:"number",value:u.outlets,onChange:B=>f({...u,outlets:B.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${h.inputBorder}`,borderRadius:"8px",backgroundColor:h.inputBg,color:h.cardText,boxSizing:"border-box"}}),i.jsx("p",{style:{fontSize:"0.75rem",color:h.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"Each device counts as 2 conductors"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:h.labelText,marginBottom:"0.5rem"},children:"Switches"}),i.jsx("input",{type:"number",value:u.switches,onChange:B=>f({...u,switches:B.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${h.inputBorder}`,borderRadius:"8px",backgroundColor:h.inputBg,color:h.cardText,boxSizing:"border-box"}}),i.jsx("p",{style:{fontSize:"0.75rem",color:h.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"Each device counts as 2 conductors"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:h.labelText,marginBottom:"0.5rem"},children:"Cable Clamps"}),i.jsx("input",{type:"number",value:u.clamps,onChange:B=>f({...u,clamps:B.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${h.inputBorder}`,borderRadius:"8px",backgroundColor:h.inputBg,color:h.cardText,boxSizing:"border-box"}}),i.jsx("p",{style:{fontSize:"0.75rem",color:h.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"One or more = 1 conductor volume"})]})]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:u.groundWires,onChange:B=>f({...u,groundWires:B.target.checked}),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:h.labelText},children:"Equipment Grounding Conductors Present"})]}),i.jsx("p",{style:{fontSize:"0.75rem",color:h.subtleText,marginLeft:"2rem",margin:"0.25rem 0 0 2rem"},children:"All grounds combined count as 1 conductor volume"})]}),i.jsxs("div",{style:{background:h.cardBg,border:`1px solid ${h.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:h.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:h.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:h.labelText,marginBottom:"0.25rem"},children:"Box Capacity"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:h.cardText},children:j}),i.jsx("div",{style:{fontSize:"0.75rem",color:h.labelText,marginTop:"0.25rem"},children:"cu.in."})]}),i.jsxs("div",{style:{background:h.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:h.labelText,marginBottom:"0.25rem"},children:"Calculated Fill"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:h.cardText},children:N.totalFill.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:h.labelText,marginTop:"0.25rem"},children:"cu.in."})]}),i.jsxs("div",{style:{background:V?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:V?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Fill Percentage"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:V?"#dc2626":"#1e40af"},children:[$,"%"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:V?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:V?"OVERFILLED":"Within Limits"})]})]}),N.conductorDetails.length>0&&N.conductorDetails.some(B=>B.count>0)&&i.jsxs("div",{style:{background:h.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${h.cardBorder}`},children:[i.jsx("strong",{style:{color:h.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Conductor Breakdown:"}),N.conductorDetails.map((B,X)=>B.count>0&&i.jsxs("div",{style:{marginTop:X>0?"0.75rem":0,paddingTop:X>0?"0.75rem":0,borderTop:X>0?`1px solid ${h.cardBorder}`:"none",fontSize:"0.875rem",color:h.labelText},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:[B.count,"× ",B.size," AWG"]}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:h.subtleText},children:[B.allowanceEach," cu.in. each = ",B.subtotal.toFixed(2)," cu.in. total"]})]},X))]}),!V&&N.totalFill>0?i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Box fill is within NEC limits"}),N.deviceFill>0&&i.jsxs("div",{children:["Devices: ",N.deviceFill.toFixed(2)," cu.in."]}),N.clampFill>0&&i.jsxs("div",{children:["Clamps: ",N.clampFill.toFixed(2)," cu.in."]}),N.groundFill>0&&i.jsxs("div",{children:["Grounds: ",N.groundFill.toFixed(2)," cu.in."]})]})]})}):V?i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Yc,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",fontSize:"0.9375rem"},children:"BOX OVERFILLED - Violates NEC 314.16"}),i.jsx("div",{style:{marginBottom:"0.5rem"},children:"Reduce number of devices or use larger box"}),N.deviceFill>0&&i.jsxs("div",{children:["Devices: ",N.deviceFill.toFixed(2)," cu.in."]}),N.clampFill>0&&i.jsxs("div",{children:["Clamps: ",N.clampFill.toFixed(2)," cu.in."]}),N.groundFill>0&&i.jsxs("div",{children:["Grounds: ",N.groundFill.toFixed(2)," cu.in."]})]})]})}):null]}),i.jsxs("div",{style:{background:h.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${h.cardBorder}`,fontSize:"0.8125rem",color:h.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:h.cardText},children:"NEC 314.16 Requirements:"}),"Conductor = table volume • Device = 2 volumes • All grounds = 1 volume • Clamps = 1 volume"]})]})}),Zj=be.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=be.useState("emt-0.5"),[a,c]=be.useState("thwn"),[u,f]=be.useState([{size:"12",count:""}]),h={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},g={"emt-0.5":{name:'1/2" EMT',area:.304},"emt-0.75":{name:'3/4" EMT',area:.533},"emt-1":{name:'1" EMT',area:.864},"emt-1.25":{name:'1-1/4" EMT',area:1.496},"emt-1.5":{name:'1-1/2" EMT',area:2.036},"emt-2":{name:'2" EMT',area:3.356},"emt-2.5":{name:'2-1/2" EMT',area:5.858},"emt-3":{name:'3" EMT',area:8.846},"emt-4":{name:'4" EMT',area:14.753},"pvc-0.5":{name:'1/2" PVC Sch 40',area:.285},"pvc-0.75":{name:'3/4" PVC Sch 40',area:.508},"pvc-1":{name:'1" PVC Sch 40',area:.832},"pvc-1.25":{name:'1-1/4" PVC Sch 40',area:1.429},"pvc-1.5":{name:'1-1/2" PVC Sch 40',area:1.986},"pvc-2":{name:'2" PVC Sch 40',area:3.291},"pvc-2.5":{name:'2-1/2" PVC Sch 40',area:5.793},"pvc-3":{name:'3" PVC Sch 40',area:8.688},"pvc-4":{name:'4" PVC Sch 40',area:14.314},"rigid-0.5":{name:'1/2" Rigid Steel',area:.22},"rigid-0.75":{name:'3/4" Rigid Steel',area:.409},"rigid-1":{name:'1" Rigid Steel',area:.688},"rigid-1.25":{name:'1-1/4" Rigid Steel',area:1.175},"rigid-1.5":{name:'1-1/2" Rigid Steel',area:1.61},"rigid-2":{name:'2" Rigid Steel',area:2.647},"rigid-2.5":{name:'2-1/2" Rigid Steel',area:4.618},"rigid-3":{name:'3" Rigid Steel',area:6.922},"rigid-4":{name:'4" Rigid Steel',area:11.545}},b={thwn:{18:.0058,16:.0075,14:.0097,12:.0133,10:.0211,8:.0366,6:.0507,4:.0824,3:.0973,2:.1158,1:.1562,"1/0":.1855,"2/0":.2223,"3/0":.2679,"4/0":.3237,250:.397,300:.4608,350:.5242,400:.5863,500:.7073},xhhw:{18:.0058,16:.0075,14:.0097,12:.0133,10:.0211,8:.0366,6:.059,4:.0973,3:.1134,2:.1333,1:.1901,"1/0":.2223,"2/0":.2624,"3/0":.3117,"4/0":.3718,250:.4596,300:.5281,350:.5958,400:.6619,500:.7901}},A=["18","16","14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500"],v=()=>{f([...u,{size:"12",count:""}])},F=$=>{u.length>1&&f(u.filter((V,B)=>B!==$))},E=($,V,B)=>{const X=[...u];X[$][V]=B,f(X)},N=()=>{const $=g[n].area;let V=0,B=0;const X=u.map(C=>{const w=parseInt(C.count)||0,O=b[a][C.size]||0,P=O*w;return V+=P,B+=w,{size:C.size,count:w,areaEach:O,subtotal:P}}),se=(V/$*100).toFixed(1);let U=40;return B===1?U=53:B===2&&(U=31),{conduitArea:$.toFixed(3),totalWireArea:V.toFixed(3),fillPercentage:parseFloat(se),maxFill:U,totalWireCount:B,conductorDetails:X,isOverfilled:parseFloat(se)>U}};be.useImperativeHandle(t,()=>({exportPDF:()=>{const $=N();if($.totalWireCount===0){alert("Please enter at least one conductor with a quantity before exporting");return}const V=$.conductorDetails.filter(X=>X.count>0).map(X=>`${X.count}× ${X.size} AWG ${a.toUpperCase()}: ${X.areaEach.toFixed(4)} sq.in. each = ${X.subtotal.toFixed(4)} sq.in. total`).join("; "),B={calculatorName:"Conduit Fill Calculator",inputs:{conduitType:g[n].name,wireType:a.toUpperCase()+"-2",totalConductors:$.totalWireCount},results:{conduitArea:`${$.conduitArea} sq.in.`,totalWireArea:`${$.totalWireArea} sq.in.`,fillPercentage:`${$.fillPercentage}%`,maximumAllowedFill:`${$.maxFill}%`,complianceStatus:$.isOverfilled?"OVERFILLED - Violates NEC":"Within NEC Limits"},additionalInfo:{conductorBreakdown:V,fillRule:$.totalWireCount===1?"1 conductor: 53% max fill":$.totalWireCount===2?"2 conductors: 31% max fill":"3+ conductors: 40% max fill",recommendation:$.isOverfilled?"Reduce number of conductors or use larger conduit":"Installation meets NEC requirements"},necReferences:["NEC Chapter 9, Table 1 - Percent of Cross Section of Conduit and Tubing for Conductors","NEC Chapter 9, Table 4 - Dimensions and Percent Area of Conduit and Tubing","NEC Chapter 9, Table 5 - Dimensions of Insulated Conductors and Fixture Wires","1 conductor: 53% max fill","2 conductors: 31% max fill","3+ conductors: 40% max fill","Nipples (24 inches or less): 60% max fill"]};pn(B)}}));const j=N();return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:h.cardBg,border:`1px solid ${h.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:h.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${h.cardBorder}`,paddingBottom:"0.5rem"},children:"Conduit & Wire Selection"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:h.labelText,marginBottom:"0.5rem"},children:"Conduit Type & Size"}),i.jsxs("select",{value:n,onChange:$=>o($.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${h.inputBorder}`,borderRadius:"8px",backgroundColor:h.inputBg,color:h.cardText,boxSizing:"border-box"},children:[i.jsx("optgroup",{label:"EMT",children:Object.entries(g).filter(([$])=>$.startsWith("emt")).map(([$,V])=>i.jsx("option",{value:$,children:V.name},$))}),i.jsx("optgroup",{label:"PVC Schedule 40",children:Object.entries(g).filter(([$])=>$.startsWith("pvc")).map(([$,V])=>i.jsx("option",{value:$,children:V.name},$))}),i.jsx("optgroup",{label:"Rigid Steel",children:Object.entries(g).filter(([$])=>$.startsWith("rigid")).map(([$,V])=>i.jsx("option",{value:$,children:V.name},$))})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:h.labelText,marginBottom:"0.5rem"},children:"Wire Type"}),i.jsxs("select",{value:a,onChange:$=>c($.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${h.inputBorder}`,borderRadius:"8px",backgroundColor:h.inputBg,color:h.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"thwn",children:"THWN-2"}),i.jsx("option",{value:"xhhw",children:"XHHW-2"})]})]})]})]}),i.jsxs("div",{style:{background:h.cardBg,border:`1px solid ${h.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:h.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${h.cardBorder}`,paddingBottom:"0.5rem"},children:"Conductors"}),u.map(($,V)=>i.jsxs("div",{style:{background:h.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${h.cardBorder}`},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[i.jsxs("h4",{style:{fontWeight:"600",color:h.labelText,margin:0,fontSize:"0.875rem"},children:["Wire Size ",V+1]}),u.length>1&&i.jsx("button",{onClick:()=>F(V),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:i.jsx(Vc,{size:20})})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[i.jsx("select",{value:$.size,onChange:B=>E(V,"size",B.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${h.inputBorder}`,borderRadius:"8px",backgroundColor:h.inputBg,color:h.cardText,boxSizing:"border-box"},children:A.filter(B=>b[a][B]).map(B=>i.jsxs("option",{value:B,children:[B," AWG"]},B))}),i.jsx("input",{type:"number",value:$.count,onChange:B=>E(V,"count",B.target.value),placeholder:"Quantity",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${h.inputBorder}`,borderRadius:"8px",backgroundColor:h.inputBg,color:h.cardText,boxSizing:"border-box"}})]})]},V)),i.jsxs("button",{onClick:v,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(Oc,{size:16}),"Add Wire Size"]})]}),i.jsxs("div",{style:{background:h.cardBg,border:`1px solid ${h.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:h.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:h.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:h.labelText,marginBottom:"0.25rem"},children:"Conduit Area"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:h.cardText},children:j.conduitArea}),i.jsx("div",{style:{fontSize:"0.75rem",color:h.labelText,marginTop:"0.25rem"},children:"sq.in."})]}),i.jsxs("div",{style:{background:h.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsxs("div",{style:{fontSize:"0.75rem",color:h.labelText,marginBottom:"0.25rem"},children:["Wire",i.jsx("br",{})," Area"]}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:h.cardText},children:j.totalWireArea}),i.jsx("div",{style:{fontSize:"0.75rem",color:h.labelText,marginTop:"0.25rem"},children:"sq.in."})]}),i.jsxs("div",{style:{background:j.isOverfilled?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.isOverfilled?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Fill Percentage"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.isOverfilled?"#dc2626":"#1e40af"},children:[j.fillPercentage,"%"]}),i.jsxs("div",{style:{fontSize:"0.75rem",color:j.isOverfilled?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:["Max: ",j.maxFill,"%"]})]})]}),j.conductorDetails.length>0&&j.totalWireCount>0&&i.jsxs("div",{style:{background:h.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${h.cardBorder}`},children:[i.jsx("strong",{style:{color:h.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Conductor Breakdown:"}),j.conductorDetails.map(($,V)=>$.count>0&&i.jsxs("div",{style:{marginTop:V>0?"0.75rem":0,paddingTop:V>0?"0.75rem":0,borderTop:V>0?`1px solid ${h.cardBorder}`:"none",fontSize:"0.875rem",color:h.labelText},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:[$.count,"× ",$.size," AWG ",a.toUpperCase()]}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:h.subtleText},children:[$.areaEach.toFixed(4)," sq.in. each = ",$.subtotal.toFixed(4)," sq.in. total"]})]},V))]}),!j.isOverfilled&&j.totalWireCount>0?i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Conduit fill is within NEC limits"}),i.jsxs("div",{children:["Total conductors: ",j.totalWireCount]})]})]})}):j.isOverfilled?i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Yc,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",fontSize:"0.9375rem"},children:"CONDUIT OVERFILLED - Violates NEC Chapter 9"}),i.jsx("div",{children:"Reduce number of conductors or use larger conduit"})]})]})}):null]}),i.jsxs("div",{style:{background:h.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${h.cardBorder}`,fontSize:"0.8125rem",color:h.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:h.cardText},children:"NEC Chapter 9, Table 1:"}),'1 conductor: 53% • 2 conductors: 31% • 3+ conductors: 40% • Nipples (<24"): 60%']})]})}),eE=be.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=be.useState("12"),[a,c]=be.useState("copper"),[u,f]=be.useState("75C"),[h,g]=be.useState("30"),[b,A]=be.useState("3"),[v,F]=be.useState(!1),E={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},N={copper:{"60C":{22:3,20:5,18:7,16:10,14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:355,700:385,750:400},"75C":{22:3,20:5,18:7,16:18,14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,700:460,750:475},"90C":{22:3,20:5,18:7,16:18,14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535}},aluminum:{"60C":{12:15,10:25,8:30,6:40,4:55,3:65,2:75,1:85,"1/0":100,"2/0":115,"3/0":130,"4/0":150,250:170,300:190,350:210,400:225,500:260,600:285,700:310,750:320},"75C":{12:20,10:30,8:40,6:50,4:65,3:75,2:90,1:100,"1/0":120,"2/0":135,"3/0":155,"4/0":180,250:205,300:230,350:250,400:270,500:310,600:340,700:375,750:385},"90C":{12:25,10:35,8:45,6:60,4:75,3:85,2:100,1:115,"1/0":135,"2/0":150,"3/0":175,"4/0":205,250:230,300:260,350:280,400:305,500:350,600:385,700:420,750:435}}},j={"60C":{10:1.29,15:1.2,20:1.11,25:1.05,30:1,35:.94,40:.88,45:.82,50:.75,55:.67,60:.58,65:.47,70:.33},"75C":{10:1.2,15:1.15,20:1.11,25:1.05,30:1,35:.94,40:.88,45:.82,50:.75,55:.67,60:.58,65:.47,70:.33,75:0},"90C":{10:1.15,15:1.12,20:1.08,25:1.04,30:1,35:.96,40:.91,45:.87,50:.82,55:.76,60:.71,65:.65,70:.58,75:.5,80:.41,85:.29,90:0}},$=(O,P)=>P==="22"?"Thermostat wiring, doorbells, low-voltage controls":P==="20"?"Doorbells, security systems, low-voltage controls":P==="18"?"Thermostats, lighting controls, doorbells, signaling circuits":P==="16"?"Electronics, lighting control systems, doorbells, low-voltage applications":O<=15||O<=20?"Lighting circuits, small appliances":O<=25?"General outlets, lighting circuits":O<=30?"Small appliances, dryers (240V)":O<=40?"Electric ranges, large appliances":O<=50?"Electric ranges, welders, heat pumps":O<=100?"Sub-panels, large motors":O<=200?"Main panels, large commercial loads":"Service entrances, industrial applications",V=(O,P)=>{var z;return((z={copper:{14:15,12:20,10:30},aluminum:{12:15,10:25}}[P])==null?void 0:z[O])||null},B=()=>N[a][u][n]||0,X=()=>{let O=se;const P=j[u][h]||1;let S=1;const z=parseInt(b);z<=3?S=1:z<=6?S=.8:z<=9?S=.7:z<=20?S=.5:z<=30?S=.45:z<=40?S=.4:S=.35;let W=O*P*S,le=W;return v&&(le=W*.8),{base:O,tempFactor:P,conductorFactor:S,derated:Math.round(W*10)/10,continuous:Math.round(le*10)/10}},se=B(),U=V(n,a),C=X(),w=C.tempFactor!==1||C.conductorFactor!==1||v;return be.useImperativeHandle(t,()=>({exportPDF:()=>{const O=z=>({"60C":"60°C (140°F)","75C":"75°C (167°F)","90C":"90°C (194°F)"})[z]||z,P=z=>({10:"10°C (50°F)",15:"15°C (59°F)",20:"20°C (68°F)",25:"25°C (77°F)",30:"30°C (86°F)",35:"35°C (95°F)",40:"40°C (104°F)",45:"45°C (113°F)",50:"50°C (122°F)"})[z]||`${z}°C`,S={calculatorName:"Ampacity Lookup Calculator",inputs:{wireSize:n.includes("/")?`${n} AWG`:`${n} ${parseInt(n)<=16?"AWG":"kcmil"}`,wireMaterial:a.charAt(0).toUpperCase()+a.slice(1),temperatureRating:O(u),ambientTemperature:P(h),currentCarryingConductors:b,continuousLoad:v?"Yes (3+ hours)":"No"},results:{baseAmpacity:`${C.base} A`,deratedAmpacity:w?`${C.derated} A`:"N/A (no derating applied)",finalAmpacity:`${v?C.continuous:w?C.derated:C.base} A`,ocpdLimit:U?`${U} A (NEC 240.4(D))`:"No special limit",commonApplications:$(se,n)},additionalInfo:{temperatureCorrectionFactor:`×${C.tempFactor.toFixed(2)}`,conductorAdjustmentFactor:`×${C.conductorFactor.toFixed(2)}`,continuousLoadFactor:v?"×0.80":"Not applied",deratingApplied:w?"Yes":"No"},necReferences:["NEC Table 310.16 - Allowable Ampacities of Insulated Conductors","NEC 310.15(B)(2)(a) - Temperature Correction Factors","NEC 310.15(B)(3)(a) - Conductor Bundling Adjustment Factors",U?"NEC 240.4(D) - Small Conductor Overcurrent Protection":null,v?"NEC 210.19(A)(1) - Continuous Load Sizing (125% factor)":null].filter(Boolean)};pn(S)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${E.cardBorder}`,paddingBottom:"0.5rem"},children:"Wire Selection"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Wire Size"}),i.jsxs("select",{value:n,onChange:O=>o(O.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"22",children:"22 AWG"}),i.jsx("option",{value:"20",children:"20 AWG"}),i.jsx("option",{value:"18",children:"18 AWG"}),i.jsx("option",{value:"16",children:"16 AWG"}),i.jsx("option",{value:"14",children:"14 AWG"}),i.jsx("option",{value:"12",children:"12 AWG"}),i.jsx("option",{value:"10",children:"10 AWG"}),i.jsx("option",{value:"8",children:"8 AWG"}),i.jsx("option",{value:"6",children:"6 AWG"}),i.jsx("option",{value:"4",children:"4 AWG"}),i.jsx("option",{value:"3",children:"3 AWG"}),i.jsx("option",{value:"2",children:"2 AWG"}),i.jsx("option",{value:"1",children:"1 AWG"}),i.jsx("option",{value:"1/0",children:"1/0 AWG"}),i.jsx("option",{value:"2/0",children:"2/0 AWG"}),i.jsx("option",{value:"3/0",children:"3/0 AWG"}),i.jsx("option",{value:"4/0",children:"4/0 AWG"}),i.jsx("option",{value:"250",children:"250 kcmil"}),i.jsx("option",{value:"300",children:"300 kcmil"}),i.jsx("option",{value:"350",children:"350 kcmil"}),i.jsx("option",{value:"400",children:"400 kcmil"}),i.jsx("option",{value:"500",children:"500 kcmil"}),i.jsx("option",{value:"600",children:"600 kcmil"}),i.jsx("option",{value:"700",children:"700 kcmil"}),i.jsx("option",{value:"750",children:"750 kcmil"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Wire Material"}),i.jsxs("select",{value:a,onChange:O=>c(O.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"copper",children:"Copper"}),i.jsx("option",{value:"aluminum",children:"Aluminum"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Temperature Rating"}),i.jsxs("select",{value:u,onChange:O=>f(O.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"60C",children:"60°C (140°F)"}),i.jsx("option",{value:"75C",children:"75°C (167°F)"}),i.jsx("option",{value:"90C",children:"90°C (194°F)"})]})]})]})]})]}),i.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${E.cardBorder}`,paddingBottom:"0.5rem"},children:"Derating Factors (Optional)"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Ambient Temp (°C)"}),i.jsxs("select",{value:h,onChange:O=>g(O.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"10",children:"10°C (50°F)"}),i.jsx("option",{value:"15",children:"15°C (59°F)"}),i.jsx("option",{value:"20",children:"20°C (68°F)"}),i.jsx("option",{value:"25",children:"25°C (77°F)"}),i.jsx("option",{value:"30",children:"30°C (86°F) - Standard"}),i.jsx("option",{value:"35",children:"35°C (95°F)"}),i.jsx("option",{value:"40",children:"40°C (104°F)"}),i.jsx("option",{value:"45",children:"45°C (113°F)"}),i.jsx("option",{value:"50",children:"50°C (122°F)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Current-Carrying Conductors"}),i.jsx("input",{type:"number",value:b,onChange:O=>A(O.target.value),min:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]})]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:v,onChange:O=>F(O.target.checked),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:E.labelText},children:"Continuous Load (3+ hours) - Apply 80% factor"})]}),i.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${E.cardBorder}`},children:[i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"0.75rem"},children:"Applied Factors"}),i.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:E.labelText},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Temperature Factor:"}),i.jsxs("span",{style:{fontWeight:"600",color:E.cardText},children:["×",C.tempFactor.toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Conductor Adjustment:"}),i.jsxs("span",{style:{fontWeight:"600",color:E.cardText},children:["×",C.conductorFactor.toFixed(2)]})]}),v&&i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Continuous Load:"}),i.jsx("span",{style:{fontWeight:"600",color:E.cardText},children:"×0.80"})]})]})]})]})]}),i.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:w?"repeat(3, 1fr)":"1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Base Ampacity"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:[C.base," A"]})]}),w&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Derated Ampacity"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:[C.derated," A"]})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Final Ampacity"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[v?C.continuous:C.derated," A"]})]})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5",width:"100%"},children:[i.jsxs("div",{style:{marginBottom:"0.5rem"},children:[i.jsx("strong",{children:"Wire:"})," ",n," AWG ",a]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:[i.jsx("strong",{children:"Temperature Rating:"})," ",u," (",u==="60C"?"140°F":u==="75C"?"167°F":"194°F",")"]})]})]})}),U&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Yc,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("strong",{children:"NEC 240.4(D) Limit:"})," ",U,"A max overcurrent protection"]})]})}),i.jsx("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${E.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:E.labelText,lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",color:E.cardText,marginBottom:"0.5rem"},children:"Common Applications:"}),$(se,n)]})})]})]})}),tE=({flcData:r,setFlcData:e,colors:t})=>{var u,f;const n={single:{115:{.25:4.4,.33:5.8,.5:7.2,.75:9.8,1:13.8,1.5:20,2:24,3:34,5:56},230:{.25:2.2,.33:2.9,.5:3.6,.75:4.9,1:6.9,1.5:10,2:12,3:17,5:28}},three:{230:{.5:2,.75:2.8,1:3.6,1.5:5.2,2:6.8,3:9.6,5:15.2,7.5:22,10:28,15:42,20:54,25:68,30:80,40:104,50:130,60:154,75:192,100:248,125:312,150:360,200:480},460:{.5:1,.75:1.4,1:1.8,1.5:2.6,2:3.4,3:4.8,5:7.6,7.5:11,10:14,15:21,20:27,25:34,30:40,40:52,50:65,60:77,75:96,100:124,125:156,150:180,200:240},575:{.5:.8,.75:1.1,1:1.4,1.5:2.1,2:2.7,3:3.9,5:6.1,7.5:9,10:11,15:17,20:22,25:27,30:32,40:41,50:52,60:62,75:77,100:99,125:125,150:144,200:192},2300:{250:65,300:77,350:90,400:103,450:116,500:129},4e3:{500:74,600:88,700:103,800:118,900:132,1e3:147}}},a=(()=>{const h=parseFloat(r.horsepower),g=parseInt(r.voltage);if(n[r.phase]&&n[r.phase][g]&&n[r.phase][g][h])return n[r.phase][g][h];const b=parseFloat(r.efficiency),A=parseFloat(r.powerFactor);return r.phase==="single"?h*746/(g*b*A):h*746/(1.732*g*b*A)})(),c=(f=(u=n[r.phase])==null?void 0:u[parseInt(r.voltage)])==null?void 0:f[parseFloat(r.horsepower)];return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Horsepower"}),i.jsxs("select",{value:r.horsepower,onChange:h=>e({...r,horsepower:h.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"",children:"Select HP"}),i.jsx("option",{value:"0.25",children:"1/4 HP"}),i.jsx("option",{value:"0.33",children:"1/3 HP"}),i.jsx("option",{value:"0.5",children:"1/2 HP"}),i.jsx("option",{value:"0.75",children:"3/4 HP"}),i.jsx("option",{value:"1",children:"1 HP"}),i.jsx("option",{value:"1.5",children:"1.5 HP"}),i.jsx("option",{value:"2",children:"2 HP"}),i.jsx("option",{value:"3",children:"3 HP"}),i.jsx("option",{value:"5",children:"5 HP"}),i.jsx("option",{value:"7.5",children:"7.5 HP"}),i.jsx("option",{value:"10",children:"10 HP"}),i.jsx("option",{value:"15",children:"15 HP"}),i.jsx("option",{value:"20",children:"20 HP"}),i.jsx("option",{value:"25",children:"25 HP"}),i.jsx("option",{value:"30",children:"30 HP"}),i.jsx("option",{value:"40",children:"40 HP"}),i.jsx("option",{value:"50",children:"50 HP"}),i.jsx("option",{value:"75",children:"75 HP"}),i.jsx("option",{value:"100",children:"100 HP"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Voltage"}),i.jsxs("select",{value:r.voltage,onChange:h=>e({...r,voltage:h.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"115",children:"115V"}),i.jsx("option",{value:"230",children:"230V"}),i.jsx("option",{value:"460",children:"460V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"575",children:"575V"}),i.jsx("option",{value:"2300",children:"2300V"}),i.jsx("option",{value:"4000",children:"4000V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Phase"}),i.jsxs("select",{value:r.phase,onChange:h=>e({...r,phase:h.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]})]}),r.horsepower&&!c&&i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Efficiency"}),i.jsxs("select",{value:r.efficiency,onChange:h=>e({...r,efficiency:h.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"0.8",children:"80% (Standard)"}),i.jsx("option",{value:"0.85",children:"85% (High Efficiency)"}),i.jsx("option",{value:"0.9",children:"90% (Premium)"}),i.jsx("option",{value:"0.95",children:"95% (Super Premium)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),i.jsxs("select",{value:r.powerFactor,onChange:h=>e({...r,powerFactor:h.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"0.7",children:"0.7 (Poor)"}),i.jsx("option",{value:"0.8",children:"0.8 (Typical)"}),i.jsx("option",{value:"0.85",children:"0.85 (Good)"}),i.jsx("option",{value:"0.9",children:"0.9 (Excellent)"})]})]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${t.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.5rem",textAlign:"center"},children:"Full Load Current"}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:t.cardText,textAlign:"center"},children:a?a.toFixed(1):"0.0"}),i.jsx("div",{style:{fontSize:"0.875rem",color:t.labelText,textAlign:"center",marginTop:"0.25rem"},children:"Amperes"})]}),c?i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Value from NEC Table 430.250"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Standard full load current from NEC tables"})]})]})}):r.horsepower?i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Yc,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Calculated Value"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Not in NEC tables - calculated using efficiency and power factor"})]})]})}):null]})},rE=({protectionData:r,setProtectionData:e,colors:t})=>{const n={"inverse-time-breaker":250,"instantaneous-trip-breaker":800,"inverse-time-fuse":175,"time-delay-fuse":175},a=(()=>{if(!r.flc)return{calculated:"0",standard:0};const c=parseFloat(r.flc),u=n[r.protectionType],f=c*u/100,g=[15,20,25,30,35,40,45,50,60,70,80,90,100,110,125,150,175,200,225,250,300,350,400,450,500,600,700,800,1e3,1200,1600,2e3,2500,3e3,4e3,5e3,6e3].find(b=>b>=f)||f;return{calculated:f.toFixed(1),standard:g,percentage:u}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Full Load Current (FLC)"}),i.jsx("input",{type:"number",value:r.flc,onChange:c=>e({...r,flc:c.target.value}),placeholder:"Enter FLC in amps",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Protection Type"}),i.jsxs("select",{value:r.protectionType,onChange:c=>e({...r,protectionType:c.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"inverse-time-breaker",children:"Inverse Time Breaker"}),i.jsx("option",{value:"instantaneous-trip-breaker",children:"Instantaneous Trip Breaker"}),i.jsx("option",{value:"inverse-time-fuse",children:"Inverse Time Fuse"}),i.jsx("option",{value:"time-delay-fuse",children:"Time Delay Fuse"})]})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Calculated Maximum"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:a.calculated}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Standard Size"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:a.standard}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),r.flc&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.8125rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Reference:"}),"Per NEC Table 430.52 (",a.percentage,"% of FLC)"]})]})},nE=({wireSizeData:r,setWireSizeData:e,colors:t})=>{const o=(()=>{if(!r.flc)return null;const a=parseFloat(r.flc)*1.25,c={"60C":{14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:355,700:385,750:400},"75C":{14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,750:475},"90C":{14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535}},u={14:15,12:20,10:30},h=["14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750"].find(g=>{const b=c[r.tempRating][g]>=a,A=!u[g]||u[g]>=a;return b&&A});return{requiredAmps:a.toFixed(1),wireSize:h||"Larger than 750 kcmil required",ampacity:h?c[r.tempRating][h]:"N/A",ocpdLimit:h&&u[h]?u[h]:null}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Full Load Current (FLC)"}),i.jsx("input",{type:"number",value:r.flc,onChange:a=>e({...r,flc:a.target.value}),placeholder:"Enter FLC in amps",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Temperature Rating"}),i.jsxs("select",{value:r.tempRating,onChange:a=>e({...r,tempRating:a.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"60C",children:"60°C (140°F) - TW, UF"}),i.jsx("option",{value:"75C",children:"75°C (167°F) - THWN, XHHW"}),i.jsx("option",{value:"90C",children:"90°C (194°F) - THHN, XHHW-2"})]})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${t.cardBorder}`},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,marginBottom:"0.75rem"},children:[i.jsx("strong",{style:{color:t.cardText},children:"Required Current Capacity:"})," ",o.requiredAmps," Amps (125% of FLC)"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.5rem",textAlign:"center"},children:"Minimum Wire Size"}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:t.cardText,textAlign:"center",marginBottom:"0.5rem"},children:o.wireSize}),o.ampacity!=="N/A"&&i.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,textAlign:"center"},children:["Ampacity: ",o.ampacity," Amps"]})]}),o.ocpdLimit&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Yc,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"NEC 240.4(D) Limitation"}),i.jsxs("div",{style:{fontSize:"0.8125rem"},children:[o.ocpdLimit,"A maximum overcurrent protection for ",o.wireSize," wire"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.8125rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Reference:"}),"Per NEC 430.22 - Branch circuit conductors must carry 125% of motor FLC"]})]})]})},iE=be.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=be.useState("flc"),[o,a]=be.useState({horsepower:"",voltage:"480",phase:"three",efficiency:"0.85",powerFactor:"0.8"}),[c,u]=be.useState({flc:"",protectionType:"inverse-time-breaker"}),[f,h]=be.useState({flc:"",tempRating:"75C"}),g={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};be.useImperativeHandle(e,()=>({exportPDF:()=>{var v,F;let A;if(t==="flc"){if(!o.horsepower){alert("Please select motor horsepower before exporting");return}const E={single:{115:{.25:4.4,.33:5.8,.5:7.2,.75:9.8,1:13.8,1.5:20,2:24,3:34,5:56},230:{.25:2.2,.33:2.9,.5:3.6,.75:4.9,1:6.9,1.5:10,2:12,3:17,5:28}},three:{230:{.5:2,.75:2.8,1:3.6,1.5:5.2,2:6.8,3:9.6,5:15.2,7.5:22,10:28,15:42,20:54,25:68,30:80,40:104,50:130,60:154,75:192,100:248,125:312,150:360,200:480},460:{.5:1,.75:1.4,1:1.8,1.5:2.6,2:3.4,3:4.8,5:7.6,7.5:11,10:14,15:21,20:27,25:34,30:40,40:52,50:65,60:77,75:96,100:124,125:156,150:180,200:240},575:{.5:.8,.75:1.1,1:1.4,1.5:2.1,2:2.7,3:3.9,5:6.1,7.5:9,10:11,15:17,20:22,25:27,30:32,40:41,50:52,60:62,75:77,100:99,125:125,150:144,200:192},2300:{250:65,300:77,350:90,400:103,450:116,500:129},4e3:{500:74,600:88,700:103,800:118,900:132,1e3:147}}},N=parseFloat(o.horsepower),j=parseInt(o.voltage);let $,V=!1;if((F=(v=E[o.phase])==null?void 0:v[j])!=null&&F[N])$=E[o.phase][j][N],V=!0;else{const X=parseFloat(o.efficiency),se=parseFloat(o.powerFactor);o.phase==="single"?$=N*746/(j*X*se):$=N*746/(1.732*j*X*se)}const B={motorHorsepower:`${N} HP`,voltage:`${o.voltage}V`,phase:o.phase==="single"?"Single Phase":"Three Phase"};V||(B.motorEfficiency=`${(parseFloat(o.efficiency)*100).toFixed(0)}%`,B.powerFactor=o.powerFactor),A={calculatorName:"Motor Calculations - Full Load Current",inputs:B,results:{fullLoadCurrent:`${$.toFixed(1)} Amperes`,source:V?"NEC Table 430.250":"Calculated"},additionalInfo:V?{note:"Standard full load current from NEC tables"}:{calculation:o.phase==="single"?`FLC = (${N} HP × 746) ÷ (${j}V × ${o.efficiency} eff × ${o.powerFactor} pf) = ${$.toFixed(1)}A`:`FLC = (${N} HP × 746) ÷ (1.732 × ${j}V × ${o.efficiency} eff × ${o.powerFactor} pf) = ${$.toFixed(1)}A`,note:"Calculated value - not in NEC tables"},necReferences:["NEC Table 430.250 - Full-Load Current, Three-Phase Alternating-Current Motors","NEC Table 430.248 - Full-Load Current, Single-Phase Alternating-Current Motors","NEC 430.6 - Ampacity and Motor Rating Determination"]}}else if(t==="protection"){if(!c.flc){alert("Please enter motor FLC before exporting");return}const E={"inverse-time-breaker":"Inverse Time Breaker","instantaneous-trip-breaker":"Instantaneous Trip Breaker","inverse-time-fuse":"Inverse Time Fuse","time-delay-fuse":"Time Delay Fuse"},N={"inverse-time-breaker":250,"instantaneous-trip-breaker":800,"inverse-time-fuse":175,"time-delay-fuse":175},j=parseFloat(c.flc),$=N[c.protectionType],V=j*$/100,X=[15,20,25,30,35,40,45,50,60,70,80,90,100,110,125,150,175,200,225,250,300,350,400,450,500,600,700,800,1e3,1200,1600,2e3,2500,3e3,4e3,5e3,6e3].find(se=>se>=V)||V;A={calculatorName:"Motor Calculations - Branch Circuit Protection",inputs:{motorFullLoadCurrent:`${c.flc} Amps`,protectionType:E[c.protectionType]},results:{calculatedMaximum:`${V.toFixed(1)} Amperes`,standardSize:`${X} Amperes`},additionalInfo:{calculation:`Maximum = ${j}A × ${$}% = ${V.toFixed(1)}A`,nextStandardSize:`Next standard OCPD size: ${X}A`},necReferences:[`NEC Table 430.52 - Maximum Rating or Setting of Motor Branch-Circuit Short-Circuit and Ground-Fault Protective Devices (${$}% of FLC)`,"NEC 430.52(C) - Rating or Setting for Individual Motor Circuit","NEC 240.6 - Standard Ampere Ratings"]}}else if(t==="wiresize"){if(!f.flc){alert("Please enter motor FLC before exporting");return}const E={"60C":"60°C (140°F) - TW, UF","75C":"75°C (167°F) - THWN, XHHW","90C":"90°C (194°F) - THHN, XHHW-2"},N=(parseFloat(f.flc)*1.25).toFixed(1),j={"60C":{14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:355,700:385,750:400},"75C":{14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,750:475},"90C":{14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535}},$={14:15,12:20,10:30},B=["14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750"].find(U=>{const C=j[f.tempRating][U]>=parseFloat(N),w=!$[U]||$[U]>=parseFloat(N);return C&&w}),X=B||"Larger than 750 kcmil required",se=B?j[f.tempRating][B]:"N/A";A={calculatorName:"Motor Calculations - Wire Sizing",inputs:{motorFullLoadCurrent:`${f.flc} Amps`,temperatureRating:E[f.tempRating]},results:{requiredCapacity:`${N} Amps (125% of FLC)`,minimumWireSize:X,wireAmpacity:se!=="N/A"?`${se} Amps`:"N/A"},additionalInfo:{calculation:`Required capacity = ${f.flc}A × 125% = ${N}A`,...B&&$[B]&&{ocpdLimitation:`NEC 240.4(D): ${$[B]}A maximum OCPD for ${X} wire`}},necReferences:["NEC 430.22 - Single Motor - Conductors supplying a single motor shall have an ampacity not less than 125% of FLC","NEC Table 310.16 - Allowable Ampacities of Insulated Conductors","NEC 240.4(D) - Small Conductors - Unless specifically permitted, overcurrent protection shall not exceed limits"]}}pn(A)}}));const b={flc:i.jsx(tE,{flcData:o,setFlcData:a,colors:g}),protection:i.jsx(rE,{protectionData:c,setProtectionData:u,colors:g}),wiresize:i.jsx(nE,{wireSizeData:f,setWireSizeData:h,colors:g})};return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:g.cardBg,border:`1px solid ${g.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>n("flc"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="flc"?"#3b82f6":"transparent",color:t==="flc"?"white":g.labelText,border:`1px solid ${t==="flc"?"#3b82f6":g.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Full Load Current"}),i.jsx("button",{onClick:()=>n("protection"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="protection"?"#3b82f6":"transparent",color:t==="protection"?"white":g.labelText,border:`1px solid ${t==="protection"?"#3b82f6":g.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Circuit Protection"}),i.jsx("button",{onClick:()=>n("wiresize"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="wiresize"?"#3b82f6":"transparent",color:t==="wiresize"?"white":g.labelText,border:`1px solid ${t==="wiresize"?"#3b82f6":g.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Wire Sizing"})]})}),i.jsx("div",{style:{background:g.cardBg,border:`1px solid ${g.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:b[t]}),i.jsxs("div",{style:{background:g.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${g.cardBorder}`,fontSize:"0.8125rem",color:g.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:g.cardText},children:"NEC References:"}),"430.22 - Conductors (125% FLC) • 430.52 - Circuit protection • 430.250 - FLC tables • 430.32 - Overload protection"]})]})}),oE=({data:r,setData:e,colors:t})=>{const o=(()=>{const a=parseFloat(r.squareFootage)||0,c=parseFloat(r.smallApplianceCircuits)||0,u=parseFloat(r.laundryCircuits)||0,f=parseFloat(r.rangeKW)||0,h=parseFloat(r.dryerKW)||0,g=parseFloat(r.waterHeaterKW)||0,b=parseFloat(r.hvacKW)||0,A=parseFloat(r.otherLoadsKW)||0,v=parseFloat(r.voltage),F=a*3,E=c*1500,N=u*1500,j=F+E+N;let $=0;j<=3e3?$=j:j<=12e4?$=3e3+(j-3e3)*.35:$=43950+(j-12e4)*.25;let V=0;f>0&&(f<=12?V=8e3:V=8e3+(f-12)*400);const B=Math.max(h*1e3,5e3),X=g*1e3,se=b*1e3,U=A*1e3,C=$+V+B+X+se+U,w=C/1e3,O=C/v;let P=100;return O>200?P=400:O>150?P=200:O>100&&(P=150),{generalLighting:F,smallApplianceLoad:E,laundryLoad:N,subtotalVA:j,demandLighting:$,rangeDemand:V,dryerDemand:B,waterHeaterDemand:X,hvacDemand:se,otherDemand:U,totalDemandVA:C,totalDemandKW:w,totalAmperage:O,recommendedService:P}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem",minHeight:"2.5rem"},children:["Square",i.jsx("br",{}),"Footage",i.jsx("br",{}),"   ",i.jsx("br",{})]}),i.jsx("input",{type:"number",value:r.squareFootage,onChange:a=>e(c=>({...c,squareFootage:a.target.value})),placeholder:"Living area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Small Appliance Circuits"}),i.jsx("input",{type:"number",value:r.smallApplianceCircuits,onChange:a=>e(c=>({...c,smallApplianceCircuits:a.target.value})),placeholder:"Min 2",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"@ 1500 VA each"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Laundry Circuits ",i.jsx("br",{}),"   ",i.jsx("br",{})]}),i.jsx("input",{type:"number",value:r.laundryCircuits,onChange:a=>e(c=>({...c,laundryCircuits:a.target.value})),placeholder:"Typically 1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"@ 1500 VA"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Electric Range (kW)"}),i.jsx("input",{type:"number",value:r.rangeKW,onChange:a=>e(c=>({...c,rangeKW:a.target.value})),placeholder:"Nameplate rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Electric Dryer (kW)"}),i.jsx("input",{type:"number",value:r.dryerKW,onChange:a=>e(c=>({...c,dryerKW:a.target.value})),placeholder:"Min 5 kW",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Water Heater (kW)"}),i.jsx("input",{type:"number",value:r.waterHeaterKW,onChange:a=>e(c=>({...c,waterHeaterKW:a.target.value})),placeholder:"Rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"HVAC/Heat (kW)"}),i.jsx("input",{type:"number",value:r.hvacKW,onChange:a=>e(c=>({...c,hvacKW:a.target.value})),placeholder:"Largest load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Other Loads (kW)"}),i.jsx("input",{type:"number",value:r.otherLoadsKW,onChange:a=>e(c=>({...c,otherLoadsKW:a.target.value})),placeholder:"Pool, spa, etc",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),i.jsxs("select",{value:r.voltage,onChange:a=>e(c=>({...c,voltage:a.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"208",children:"208V"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]})]}),r.squareFootage&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Demand"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.totalDemandKW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Amperage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.totalAmperage.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"amps"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Recommended Service"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.recommendedService}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"amp service"})]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,marginBottom:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",color:t.cardText,marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Connected Loads:"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["General Lighting: ",o.generalLighting.toLocaleString()," VA"]}),i.jsxs("div",{children:["Small Appliance: ",o.smallApplianceLoad.toLocaleString()," VA"]}),i.jsxs("div",{children:["Laundry: ",o.laundryLoad.toLocaleString()," VA"]}),i.jsx("div",{style:{borderTop:`1px solid ${t.cardBorder}`,marginTop:"0.5rem",paddingTop:"0.5rem"},children:i.jsxs("strong",{children:["Subtotal: ",o.subtotalVA.toLocaleString()," VA"]})})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5",width:"100%"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Demand Loads (with factors applied):"}),i.jsxs("div",{children:["Lighting: ",o.demandLighting.toFixed(0)," VA"]}),r.rangeKW>0&&i.jsxs("div",{children:["Range: ",o.rangeDemand.toLocaleString()," W"]}),r.dryerKW>0&&i.jsxs("div",{children:["Dryer: ",o.dryerDemand.toLocaleString()," W"]}),r.waterHeaterKW>0&&i.jsxs("div",{children:["Water Heater: ",o.waterHeaterDemand.toLocaleString()," W"]}),r.hvacKW>0&&i.jsxs("div",{children:["HVAC: ",o.hvacDemand.toLocaleString()," W"]}),r.otherLoadsKW>0&&i.jsxs("div",{children:["Other: ",o.otherDemand.toLocaleString()," W"]})]})]})})]})]})},sE=({data:r,setData:e,colors:t})=>{const n={office:3.5,warehouse:.25,retail:3,school:3,restaurant:2,hotel:2,hospital:2,industrial:2},a=(()=>{const c=parseFloat(r.squareFootage)||0,u=parseFloat(r.hvacLoad)||0,f=parseFloat(r.receptacleLoad)||0,h=parseFloat(r.motorLoads)||0,g=parseFloat(r.otherLoads)||0,b=parseFloat(r.demandFactor)/100,A=parseFloat(r.voltage),v=c*n[r.occupancyType],F=v/1e3+u+f+h+g,E=F*b;let N;return r.phase==="single"?N=E*1e3/A:N=E*1e3/(1.732*A),{lightingVA:v,lightingKW:v/1e3,hvac:u,receptacles:f,motors:h,other:g,totalConnectedKW:F,demandLoadKW:E,amperage:N}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Square Footage"}),i.jsx("input",{type:"number",value:r.squareFootage,onChange:c=>e(u=>({...u,squareFootage:c.target.value})),placeholder:"Building area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Occupancy Type"}),i.jsxs("select",{value:r.occupancyType,onChange:c=>e(u=>({...u,occupancyType:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"office",children:"Office (3.5 VA/sq ft)"}),i.jsx("option",{value:"warehouse",children:"Warehouse (0.25 VA/sq ft)"}),i.jsx("option",{value:"retail",children:"Retail (3.0 VA/sq ft)"}),i.jsx("option",{value:"school",children:"School (3.0 VA/sq ft)"}),i.jsx("option",{value:"restaurant",children:"Restaurant (2.0 VA/sq ft)"}),i.jsx("option",{value:"hotel",children:"Hotel (2.0 VA/sq ft)"}),i.jsx("option",{value:"hospital",children:"Hospital (2.0 VA/sq ft)"}),i.jsx("option",{value:"industrial",children:"Industrial (2.0 VA/sq ft)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"HVAC Load (kW)"}),i.jsx("input",{type:"number",value:r.hvacLoad,onChange:c=>e(u=>({...u,hvacLoad:c.target.value})),placeholder:"Total HVAC",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Receptacle Load (kW)"}),i.jsx("input",{type:"number",value:r.receptacleLoad,onChange:c=>e(u=>({...u,receptacleLoad:c.target.value})),placeholder:"Receptacles",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Loads (kW)"}),i.jsx("input",{type:"number",value:r.motorLoads,onChange:c=>e(u=>({...u,motorLoads:c.target.value})),placeholder:"Total motors",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Other Loads (kW)"}),i.jsx("input",{type:"number",value:r.otherLoads,onChange:c=>e(u=>({...u,otherLoads:c.target.value})),placeholder:"Additional",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Demand Factor (%)"}),i.jsx("input",{type:"number",value:r.demandFactor,onChange:c=>e(u=>({...u,demandFactor:c.target.value})),placeholder:"80-100%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Peak load %"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"System Voltage"}),i.jsxs("select",{value:r.voltage,onChange:c=>e(u=>({...u,voltage:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"277",children:"277V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["System",i.jsx("br",{})," Phase"]}),i.jsxs("select",{value:r.phase,onChange:c=>e(u=>({...u,phase:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]})]}),r.squareFootage&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Connected Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:a.totalConnectedKW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Demand Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:a.demandLoadKW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Amperage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:a.amperage.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"amps"})]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,marginBottom:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",color:t.cardText,marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Connected Loads:"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Lighting: ",a.lightingKW.toFixed(2)," kW (",a.lightingVA.toFixed(0)," VA)"]}),r.hvacLoad>0&&i.jsxs("div",{children:["HVAC: ",a.hvac.toFixed(2)," kW"]}),r.receptacleLoad>0&&i.jsxs("div",{children:["Receptacles: ",a.receptacles.toFixed(2)," kW"]}),r.motorLoads>0&&i.jsxs("div",{children:["Motors: ",a.motors.toFixed(2)," kW"]}),r.otherLoads>0&&i.jsxs("div",{children:["Other: ",a.other.toFixed(2)," kW"]})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"System Configuration"}),i.jsxs("div",{children:[r.voltage,"V ",r.phase==="single"?"Single":"Three"," Phase"]}),i.jsxs("div",{children:[r.demandFactor,"% demand factor applied"]})]})]})})]})]})},aE=be.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=be.useState("residential"),[a,c]=be.useState({squareFootage:"",smallApplianceCircuits:"2",laundryCircuits:"1",rangeKW:"",dryerKW:"5",waterHeaterKW:"",hvacKW:"",otherLoadsKW:"",voltage:"240"}),[u,f]=be.useState({squareFootage:"",occupancyType:"office",hvacLoad:"",receptacleLoad:"",motorLoads:"",otherLoads:"",demandFactor:"100",voltage:"480",phase:"three"}),h={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};return be.useImperativeHandle(t,()=>({exportPDF:()=>{let g;if(n==="residential"){if(!a.squareFootage){alert("Please enter square footage before exporting");return}const b=parseFloat(a.squareFootage),A=parseFloat(a.smallApplianceCircuits)||0,v=parseFloat(a.laundryCircuits)||0,F=parseFloat(a.rangeKW)||0,E=parseFloat(a.dryerKW)||0,N=parseFloat(a.waterHeaterKW)||0,j=parseFloat(a.hvacKW)||0,$=parseFloat(a.otherLoadsKW)||0,V=parseFloat(a.voltage),B=b*3,X=A*1500,se=v*1500,U=B+X+se;let C=0;U<=3e3?C=U:U<=12e4?C=3e3+(U-3e3)*.35:C=3e3+117e3*.35+(U-12e4)*.25;let w=0;F>0&&(w=F<=12?8e3:8e3+(F-12)*400);const O=Math.max(E*1e3,5e3),P=N*1e3,S=j*1e3,z=$*1e3,W=C+w+O+P+S+z,le=(W/1e3).toFixed(2),ve=(W/V).toFixed(1);let de=100;parseFloat(ve)>200?de=400:parseFloat(ve)>150?de=200:parseFloat(ve)>100&&(de=150);const ce={squareFootage:`${a.squareFootage} sq ft`,smallApplianceCircuits:`${A} circuits @ 1500 VA each`,laundryCircuits:`${v} circuit @ 1500 VA`,serviceVoltage:`${a.voltage}V`};F>0&&(ce.electricRange=`${F} kW`),E>0&&(ce.electricDryer=`${E} kW`),N>0&&(ce.waterHeater=`${N} kW`),j>0&&(ce.hvacHeat=`${j} kW`),$>0&&(ce.otherLoads=`${$} kW`),g={calculatorName:"Load Calculations - Residential (NEC 220.82)",inputs:ce,results:{totalDemandLoad:`${le} kW (${W.toLocaleString()} VA)`,totalAmperage:`${ve} Amps`,recommendedService:`${de} Amp Service`},additionalInfo:{generalLighting:`${B.toLocaleString()} VA (${b} sq ft × 3 VA/sq ft)`,smallAppliance:`${X.toLocaleString()} VA`,laundry:`${se.toLocaleString()} VA`,lightingSubtotal:`${U.toLocaleString()} VA`,demandLightingAfterFactors:`${C.toFixed(0)} VA`,...F>0&&{rangeDemand:`${w.toLocaleString()} W`},...E>0&&{dryerDemand:`${O.toLocaleString()} W (min 5000 W)`},...N>0&&{waterHeaterDemand:`${P.toLocaleString()} W`},...j>0&&{hvacDemand:`${S.toLocaleString()} W`},...$>0&&{otherDemand:`${z.toLocaleString()} W`}},necReferences:["NEC 220.82 - Dwelling Unit Optional Calculation","NEC 220.83 - Existing Dwelling Unit","NEC Table 220.55 - Demand Factors for Electric Ranges","General lighting: 3 VA per square foot (NEC 220.12)","Demand factors: First 3000 VA @ 100%, Next 117000 VA @ 35%, Remainder @ 25%"]}}else if(n==="commercial"){if(!u.squareFootage){alert("Please enter square footage before exporting");return}const b={office:3.5,warehouse:.25,retail:3,school:3,restaurant:2,hotel:2,hospital:2,industrial:2},A={office:"Office",warehouse:"Warehouse",retail:"Retail",school:"School",restaurant:"Restaurant",hotel:"Hotel",hospital:"Hospital",industrial:"Industrial"},v=parseFloat(u.squareFootage),F=parseFloat(u.hvacLoad)||0,E=parseFloat(u.receptacleLoad)||0,N=parseFloat(u.motorLoads)||0,j=parseFloat(u.otherLoads)||0,$=parseFloat(u.demandFactor)/100,V=parseFloat(u.voltage),B=v*b[u.occupancyType],X=(B/1e3).toFixed(2),se=(B/1e3+F+E+N+j).toFixed(2),U=(parseFloat(se)*$).toFixed(2);let C;u.phase==="single"?C=(parseFloat(U)*1e3/V).toFixed(1):C=(parseFloat(U)*1e3/(1.732*V)).toFixed(1);const w={squareFootage:`${u.squareFootage} sq ft`,occupancyType:`${A[u.occupancyType]} (${b[u.occupancyType]} VA/sq ft)`,demandFactor:`${u.demandFactor}%`,systemConfiguration:`${u.voltage}V ${u.phase==="single"?"Single":"Three"} Phase`};F>0&&(w.hvacLoad=`${F} kW`),E>0&&(w.receptacleLoad=`${E} kW`),N>0&&(w.motorLoads=`${N} kW`),j>0&&(w.otherLoads=`${j} kW`),g={calculatorName:"Load Calculations - Commercial",inputs:w,results:{connectedLoad:`${se} kW`,demandLoad:`${U} kW`,totalAmperage:`${C} Amps`},additionalInfo:{lighting:`${X} kW (${B.toFixed(0)} VA)`,calculationMethod:u.phase==="single"?`Amperage = (${U} kW × 1000) ÷ ${V}V = ${C} A`:`Amperage = (${U} kW × 1000) ÷ (1.732 × ${V}V) = ${C} A`,demandFactorNote:`${u.demandFactor}% demand factor applied to total connected load`},necReferences:["NEC Article 220 - Branch-Circuit, Feeder, and Service Load Calculations","NEC Table 220.12 - General Lighting Loads by Occupancy","NEC 220.42 - General Lighting","NEC 220.50 - Motors","Always verify with actual connected loads and local codes"]}}pn(g)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:h.cardBg,border:`1px solid ${h.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"residential",label:"Residential"},{id:"commercial",label:"Commercial"}].map(g=>i.jsx("button",{onClick:()=>o(g.id),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.625rem 1rem",background:n===g.id?"#3b82f6":h.sectionBg,color:n===g.id?"white":h.labelText,border:`1px solid ${n===g.id?"#3b82f6":h.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:g.label},g.id))}),i.jsx("div",{style:{background:h.cardBg,border:`1px solid ${h.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:n==="residential"?i.jsx(oE,{data:a,setData:c,colors:h}):i.jsx(sE,{data:u,setData:f,colors:h})})]})}),lE=be.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=be.useState("sizing"),[o,a]=be.useState(""),[c,u]=be.useState("480"),[f,h]=be.useState("208"),[g,b]=be.useState("three"),[A,v]=be.useState("continuous"),[F,E]=be.useState("0.85"),[N,j]=be.useState(""),[$,V]=be.useState("480"),[B,X]=be.useState("208"),[se,U]=be.useState("three"),C={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},w=[3,6,9,15,30,45,75,112.5,150,225,300,500,750,1e3,1500,2e3,2500,3e3],O=()=>{const W=parseFloat(o)||0;if(W===0)return null;let le=1;A==="continuous"&&(le=1.25);const ve=W*le,de=w.find(ce=>ce>=ve)||ve;return{loadKVA:W,requiredKVA:ve.toFixed(1),recommendedSize:de,utilizationPercent:(W/de*100).toFixed(1)}},P=()=>{const W=parseFloat(N)||0;if(W===0)return null;const le=parseFloat($),ve=parseFloat(B);let de,ce;return se==="single"?(de=W*1e3/le,ce=W*1e3/ve):(de=W*1e3/(1.732*le),ce=W*1e3/(1.732*ve)),{kva:W,primaryCurrent:de.toFixed(1),secondaryCurrent:ce.toFixed(1),primaryVoltage:le,secondaryVoltage:ve}},S=O(),z=P();return be.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="sizing"){if(!o){alert("Please enter load (kVA) before exporting to PDF");return}const W={calculatorName:"Transformer Calculations - Transformer Sizing",inputs:{Load:`${o} kVA`,"Primary Voltage":`${c}V`,"Secondary Voltage":`${f}V`,Phase:g==="single"?"Single Phase":"Three Phase","Load Type":A==="continuous"?"Continuous (125% sizing)":"Non-Continuous (100% sizing)","Power Factor":F},results:{"Recommended Transformer Size":`${S.recommendedSize} kVA`,Configuration:`${c}V to ${f}V`,Phase:g==="single"?"Single Phase":"Three Phase","Connected Load":`${S.loadKVA} kVA`,"Required Capacity":`${S.requiredKVA} kVA`,Utilization:`${S.utilizationPercent}%`},additionalInfo:{"Sizing Factor":A==="continuous"?"125% (continuous loads)":"100% (non-continuous loads)","Calculation Method":"Required Capacity = Connected Load × Sizing Factor","Utilization Note":parseFloat(S.utilizationPercent)>80?"WARNING: Utilization above 80% may result in higher operating temperatures and reduced equipment life":"Utilization is within acceptable range"},necReferences:["NEC 450.3 - Overcurrent Protection for Transformers","NEC 450.9 - Ventilation Requirements","NEC 450.11 - Marking Requirements","NEC 450.21 - Dry-Type Transformers Installed Indoors","Size continuous loads at 125% per NEC requirements","Keep utilization below 80% for optimal efficiency and equipment life","Consider future load growth (typically 20-25% spare capacity)","Account for inrush current for motor loads","Consider ambient temperature and ventilation requirements"]};pn(W)}else if(t==="currents"){if(!N){alert("Please enter transformer rating (kVA) before exporting to PDF");return}const W=se==="single"?"I = (kVA × 1000) ÷ V":"I = (kVA × 1000) ÷ (1.732 × V)",le={calculatorName:"Transformer Calculations - Current Calculations",inputs:{"Transformer Rating":`${N} kVA`,"Primary Voltage":`${$}V`,"Secondary Voltage":`${B}V`,Phase:se==="single"?"Single Phase":"Three Phase"},results:{Configuration:`${z.kva} kVA, ${se==="single"?"Single":"Three"} Phase`,"Voltage Ratio":`${z.primaryVoltage}V / ${z.secondaryVoltage}V`,"Primary Current":`${z.primaryCurrent} A`,"Secondary Current":`${z.secondaryCurrent} A`},additionalInfo:{"Formula Used":W,"Primary Side":`${z.primaryCurrent}A at ${z.primaryVoltage}V`,"Secondary Side":`${z.secondaryCurrent}A at ${z.secondaryVoltage}V`,Application:"Use these currents for selecting primary and secondary protection devices per NEC Article 450"},necReferences:["NEC Article 450 - Transformers and Transformer Vaults","NEC 450.3 - Overcurrent Protection","Single Phase Formula: I = (kVA × 1000) ÷ V","Three Phase Formula: I = (kVA × 1000) ÷ (1.732 × V)","Primary and secondary protection must be sized per calculated currents","Consider temperature correction and adjustment factors for conductors","Account for voltage drop in feeder calculations"]};pn(le)}}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>n("sizing"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="sizing"?"#3b82f6":"transparent",color:t==="sizing"?"white":C.labelText,border:`1px solid ${t==="sizing"?"#3b82f6":C.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Transformer Sizing"}),i.jsx("button",{onClick:()=>n("currents"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="currents"?"#3b82f6":"transparent",color:t==="currents"?"white":C.labelText,border:`1px solid ${t==="currents"?"#3b82f6":C.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Current Calculations"})]})}),t==="sizing"?i.jsxs("div",{children:[i.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:C.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${C.cardBorder}`,paddingBottom:"0.5rem"},children:"Transformer Parameters"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Load (kVA)"}),i.jsx("input",{type:"number",value:o,onChange:W=>a(W.target.value),placeholder:"Connected load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:C.subtleText,marginTop:"0.25rem"},children:"Total connected or demand load"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Primary Voltage"}),i.jsxs("select",{value:c,onChange:W=>u(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"}),i.jsx("option",{value:"2400",children:"2400V"}),i.jsx("option",{value:"4160",children:"4160V"}),i.jsx("option",{value:"12470",children:"12470V"}),i.jsx("option",{value:"13200",children:"13200V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Secondary Voltage"}),i.jsxs("select",{value:f,onChange:W=>h(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"120",children:"120V"}),i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"277",children:"277V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Phase"}),i.jsxs("select",{value:g,onChange:W=>b(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Load Type"}),i.jsxs("select",{value:A,onChange:W=>v(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"continuous",children:"Continuous (125% sizing)"}),i.jsx("option",{value:"noncontinuous",children:"Non-Continuous (100% sizing)"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:C.subtleText,marginTop:"0.25rem"},children:"Continuous loads operate 3+ hours"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),i.jsxs("select",{value:F,onChange:W=>E(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"1.0",children:"1.0 (Unity)"}),i.jsx("option",{value:"0.95",children:"0.95 (Excellent)"}),i.jsx("option",{value:"0.9",children:"0.9 (Good)"}),i.jsx("option",{value:"0.85",children:"0.85 (Typical)"}),i.jsx("option",{value:"0.8",children:"0.8 (Poor)"})]})]})]})]}),S&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:C.cardText,marginTop:0,marginBottom:"1rem"},children:"Sizing Calculation"}),i.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${C.cardBorder}`},children:[i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:C.labelText},children:[i.jsx("strong",{style:{color:C.cardText},children:"Connected Load:"})," ",S.loadKVA," kVA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:C.labelText},children:[i.jsx("strong",{style:{color:C.cardText},children:"Required Capacity:"})," ",S.requiredKVA," kVA"]}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:C.subtleText,fontStyle:"italic"},children:["(",A==="continuous"?"125%":"100%"," sizing factor applied)"]})]})]}),i.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:C.cardText,marginTop:0,marginBottom:"1rem"},children:"Recommended Transformer"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Transformer Size"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[S.recommendedSize," kVA"]})]}),i.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${C.cardBorder}`,marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:C.labelText,marginBottom:"0.5rem"},children:[i.jsx("strong",{style:{color:C.cardText},children:"Configuration:"})," ",c,"V to ",f,"V"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:C.labelText},children:[i.jsx("strong",{style:{color:C.cardText},children:"Phase:"})," ",g==="single"?"Single":"Three"," Phase"]})]}),i.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:C.labelText,marginBottom:"0.25rem"},children:"Utilization"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:C.cardText},children:[S.utilizationPercent,"%"]})]})]}),parseFloat(S.utilizationPercent)>80&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Yc,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"High Utilization Warning"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Transformer utilization above 80% may result in higher operating temperatures and reduced equipment life. Consider next size up for better efficiency."})]})]})})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Transformer Sizing Guidelines:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Size for continuous loads at 125% per NEC 450.3"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider future load growth (typically 20-25%)"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Keep utilization below 80% for optimal efficiency"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Account for inrush current for motor loads"}),i.jsx("li",{children:"Consider ambient temperature and ventilation"})]})]})]})})]}):i.jsxs("div",{children:[i.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:C.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${C.cardBorder}`,paddingBottom:"0.5rem"},children:"Transformer Information"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Transformer Rating (kVA)"}),i.jsx("input",{type:"number",value:N,onChange:W=>j(W.target.value),placeholder:"Transformer kVA",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Primary Voltage"}),i.jsxs("select",{value:$,onChange:W=>V(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"}),i.jsx("option",{value:"2400",children:"2400V"}),i.jsx("option",{value:"4160",children:"4160V"}),i.jsx("option",{value:"12470",children:"12470V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Secondary Voltage"}),i.jsxs("select",{value:B,onChange:W=>X(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"120",children:"120V"}),i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"277",children:"277V"}),i.jsx("option",{value:"480",children:"480V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:C.labelText,marginBottom:"0.5rem"},children:"Phase"}),i.jsxs("select",{value:se,onChange:W=>U(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${C.inputBorder}`,borderRadius:"8px",backgroundColor:C.inputBg,color:C.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]})]})]}),z&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:C.cardText,marginTop:0,marginBottom:"1rem"},children:"Transformer Configuration"}),i.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${C.cardBorder}`},children:[i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:C.labelText},children:[i.jsx("strong",{style:{color:C.cardText},children:"Rating:"})," ",z.kva," kVA, ",se==="single"?"Single":"Three"," Phase"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:C.labelText},children:[i.jsx("strong",{style:{color:C.cardText},children:"Configuration:"})," ",z.primaryVoltage,"V / ",z.secondaryVoltage,"V"]})]})]}),i.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#1e40af",marginTop:0,marginBottom:"1rem"},children:"Primary Side"}),i.jsx("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${C.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:C.labelText},children:[i.jsx("strong",{style:{color:C.cardText},children:"Voltage:"})," ",z.primaryVoltage,"V"]})}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Primary Current"}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:z.primaryCurrent}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),i.jsxs("div",{style:{background:C.cardBg,border:`1px solid ${C.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#059669",marginTop:0,marginBottom:"1rem"},children:"Secondary Side"}),i.jsx("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${C.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:C.labelText},children:[i.jsx("strong",{style:{color:C.cardText},children:"Voltage:"})," ",z.secondaryVoltage,"V"]})}),i.jsxs("div",{style:{background:"#d1fae5",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#059669",marginBottom:"0.25rem"},children:"Secondary Current"}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#059669"},children:z.secondaryCurrent}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#059669",marginTop:"0.25rem"},children:"Amperes"})]})]})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Current Formulas:"}),i.jsxs("div",{style:{fontSize:"0.8125rem",marginBottom:"0.25rem"},children:[i.jsx("strong",{children:"Single Phase:"})," I = (kVA × 1000) ÷ V"]}),i.jsxs("div",{style:{fontSize:"0.8125rem",marginBottom:"0.5rem"},children:[i.jsx("strong",{children:"Three Phase:"})," I = (kVA × 1000) ÷ (1.732 × V)"]}),i.jsx("div",{style:{fontSize:"0.75rem",fontStyle:"italic"},children:"Note: Use these currents for selecting primary and secondary protection devices per NEC Article 450."})]})]})})]}),i.jsxs("div",{style:{background:C.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${C.cardBorder}`,fontSize:"0.8125rem",color:C.labelText,marginTop:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:C.cardText},children:"NEC Article 450 - Transformers and Transformer Vaults:"}),"450.3: Overcurrent protection • 450.9: Ventilation requirements • 450.11: Marking • 450.21: Dry-type transformers indoors"]})]})}),cE=be.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=be.useState("residential"),[o,a]=be.useState(""),[c,u]=be.useState(""),[f,h]=be.useState(""),[g,b]=be.useState(""),[A,v]=be.useState(""),[F,E]=be.useState(""),[N,j]=be.useState("240"),[$,V]=be.useState(""),[B,X]=be.useState("80"),[se,U]=be.useState("480"),[C,w]=be.useState("three"),[O,P]=be.useState("25"),S={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},z=()=>{const de=parseFloat(o)||0,ce=parseFloat(c)||0,we=parseFloat(f)||0,je=parseFloat(g)||0,ne=parseFloat(A)||0,D=parseFloat(F)||0,Y=parseFloat(N),re=de*3,ue=2*1500,fe=1500,Se=re+ue+fe;let Ee=0;Se<=3e3?Ee=Se:Ee=3e3+(Se-3e3)*.35;let ke=0;je>0&&(je<=12e3?ke=8e3:ke=8e3+(je-12e3)*.05);const Oe=Math.max(ne,5e3),Ke=we,nt=ce,_e=D,pe=Ee+ke+Oe+Ke+nt+_e,Q=pe/Y;let Je=100;return Q>200?Je=400:Q>150?Je=200:Q>100&&(Je=150),{generalLighting:re,smallAppliance:ue,laundry:fe,subtotal:Se,demandLighting:Ee,rangeDemand:ke,dryerDemand:Oe,whDemand:Ke,hvacDemand:nt,otherDemand:_e,totalDemand:pe,totalAmperage:Q,recommendedService:Je,conductorSize:{100:"4 AWG",150:"1/0 AWG",200:"2/0 AWG",400:"400 kcmil"}[Je]}},W=()=>{const de=parseFloat($)||0,ce=parseFloat(B)/100,we=parseFloat(O)/100,je=parseFloat(se),ne=de*ce,D=ne*(1+we);let Y;C==="single"?Y=D*1e3/je:Y=D*1e3/(1.732*je);const ue=[100,150,200,225,400,600,800,1e3,1200,1600,2e3,2500,3e3,4e3].find(fe=>fe>=Y)||Math.ceil(Y/100)*100;return{connectedLoad:de,demandLoad:ne,futureLoad:D,amperage:Y,recommendedService:ue}},le=z(),ve=W();return be.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="residential"){if(!o){alert("Please enter square footage before exporting to PDF");return}const de={calculatorName:"Service Entrance Sizing - Residential",inputs:{"Square Footage":`${o} sq ft`,"HVAC/Heat Load":c?`${c} W`:"Not specified","Water Heater":f?`${f} W`:"Not specified","Range/Oven":g?`${g} W`:"Not specified",Dryer:A?`${A} W`:"Not specified","Other Loads":F?`${F} W`:"Not specified","Service Voltage":`${N}V`},results:{"Recommended Service Size":`${le.recommendedService}A`,"Service Conductors":`${le.conductorSize} Copper`,"Total Demand Load":`${le.totalDemand.toFixed(0)} W`,"Calculated Amperage":`${le.totalAmperage.toFixed(1)} A`},additionalInfo:{"General Lighting Load":`${le.generalLighting.toLocaleString()} VA`,"Small Appliance Circuits":`${le.smallAppliance.toLocaleString()} VA`,"Laundry Circuit":`${le.laundry.toLocaleString()} VA`,"Lighting Demand (after factors)":`${le.demandLighting.toFixed(0)} W`,"Range Demand":g?`${le.rangeDemand.toFixed(0)} W`:"N/A","Dryer Demand":A?`${le.dryerDemand.toFixed(0)} W`:"N/A","Water Heater":f?`${le.whDemand.toFixed(0)} W`:"N/A",HVAC:c?`${le.hvacDemand.toFixed(0)} W`:"N/A","Calculation Method":"NEC Article 220.82 - Dwelling Unit Optional Calculation"},necReferences:["NEC 220.82 - Dwelling Unit Optional Calculation","NEC 230.42 - Minimum Size and Rating (service conductors)","NEC 230.79 - Rating of Service Disconnecting Means","NEC 230.90 - Where Required (overload protection)","NEC Table 310.15(B)(16) - Allowable Ampacities","Service conductors shown are approximate for 75°C copper. Consult NEC for exact sizing with all derating factors."]};pn(de)}else if(t==="commercial"){if(!$){alert("Please enter total connected load before exporting to PDF");return}const de={calculatorName:"Service Entrance Sizing - Commercial",inputs:{"Total Connected Load":`${$} kW`,"Demand Factor":`${B}%`,"Future Expansion":`${O}%`,"Service Voltage":`${se}V`,"System Phase":C==="single"?"Single Phase":"Three Phase"},results:{"Recommended Service Size":`${ve.recommendedService}A`,"System Configuration":`${se}V ${C==="single"?"Single":"Three"} Phase`,"Connected Load":`${ve.connectedLoad.toFixed(1)} kW`,"Demand Load":`${ve.demandLoad.toFixed(1)} kW`,"With Future Expansion":`${ve.futureLoad.toFixed(1)} kW`,"Calculated Amperage":`${ve.amperage.toFixed(1)} A`},additionalInfo:{"Calculation Method":"Commercial demand calculation with future expansion factor","Demand Factor Applied":`${B}% of connected load`,"Future Growth Allowance":`${O}% spare capacity`,"Formula Used":C==="single"?"Amperage = (kW × 1000) / Voltage":"Amperage = (kW × 1000) / (1.732 × Voltage)"},necReferences:["NEC Article 220 Part IV - Optional Feeder and Service Load Calculations","NEC 220.40 - General (demand factors)","NEC 230.42 - Minimum Size and Rating","NEC 230.79 - Rating of Service Disconnecting Means","Consider demand factors per NEC 220.40 and Article 220 Part IV","Include motor loads, HVAC, and large equipment per NEC requirements","Review utility requirements and available fault current","Future expansion typically 20-30% spare capacity"]};pn(de)}}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:S.cardBg,border:`1px solid ${S.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>n("residential"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="residential"?"#3b82f6":"transparent",color:t==="residential"?"white":S.labelText,border:`1px solid ${t==="residential"?"#3b82f6":S.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Residential"}),i.jsx("button",{onClick:()=>n("commercial"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="commercial"?"#3b82f6":"transparent",color:t==="commercial"?"white":S.labelText,border:`1px solid ${t==="commercial"?"#3b82f6":S.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Commercial"})]})}),t==="residential"?i.jsxs("div",{children:[i.jsxs("div",{style:{background:S.cardBg,border:`1px solid ${S.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:S.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${S.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Information"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Square Footage"}),i.jsx("input",{type:"number",value:o,onChange:de=>a(de.target.value),placeholder:"Living area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:S.subtleText,marginTop:"0.25rem"},children:"Heated/cooled living space"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"HVAC/Heat Load (Watts)"}),i.jsx("input",{type:"number",value:c,onChange:de=>u(de.target.value),placeholder:"Largest load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Water Heater (Watts)"}),i.jsx("input",{type:"number",value:f,onChange:de=>h(de.target.value),placeholder:"Nameplate rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Range/Oven (Watts)"}),i.jsx("input",{type:"number",value:g,onChange:de=>b(de.target.value),placeholder:"Electric range",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Dryer (Watts)"}),i.jsx("input",{type:"number",value:A,onChange:de=>v(de.target.value),placeholder:"Electric dryer",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:S.subtleText,marginTop:"0.25rem"},children:"Minimum 5000W if electric"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Other Loads (Watts)"}),i.jsx("input",{type:"number",value:F,onChange:de=>E(de.target.value),placeholder:"Pool, spa, etc.",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),i.jsxs("select",{value:N,onChange:de=>j(de.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"208",children:"208V"})]})]})]})]}),o&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:S.cardBg,border:`1px solid ${S.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:S.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${S.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Breakdown"}),i.jsxs("div",{style:{background:S.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${S.cardBorder}`},children:[i.jsx("strong",{style:{display:"block",marginBottom:"0.5rem",color:S.cardText,fontSize:"0.875rem"},children:"Connected Loads:"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:S.labelText,marginBottom:"0.25rem"},children:["General Lighting: ",le.generalLighting.toLocaleString()," VA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:S.labelText,marginBottom:"0.25rem"},children:["Small Appliance: ",le.smallAppliance.toLocaleString()," VA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:S.labelText,marginBottom:"0.5rem"},children:["Laundry: ",le.laundry.toLocaleString()," VA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:S.subtleText,paddingTop:"0.5rem",borderTop:`1px solid ${S.cardBorder}`},children:["Subtotal: ",le.subtotal.toLocaleString()," VA"]})]}),i.jsxs("div",{style:{background:S.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${S.cardBorder}`},children:[i.jsx("strong",{style:{display:"block",marginBottom:"0.5rem",color:S.cardText,fontSize:"0.875rem"},children:"Demand Loads (after factors):"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:S.labelText,marginBottom:"0.25rem"},children:["Lighting: ",le.demandLighting.toFixed(0)," W"]}),g&&i.jsxs("div",{style:{fontSize:"0.875rem",color:S.labelText,marginBottom:"0.25rem"},children:["Range: ",le.rangeDemand.toFixed(0)," W"]}),A&&i.jsxs("div",{style:{fontSize:"0.875rem",color:S.labelText,marginBottom:"0.25rem"},children:["Dryer: ",le.dryerDemand.toFixed(0)," W"]}),f&&i.jsxs("div",{style:{fontSize:"0.875rem",color:S.labelText,marginBottom:"0.25rem"},children:["Water Heater: ",le.whDemand.toFixed(0)," W"]}),c&&i.jsxs("div",{style:{fontSize:"0.875rem",color:S.labelText,marginBottom:"0.25rem"},children:["HVAC: ",le.hvacDemand.toFixed(0)," W"]}),F&&i.jsxs("div",{style:{fontSize:"0.875rem",color:S.labelText},children:["Other: ",le.otherDemand.toFixed(0)," W"]})]})]}),i.jsxs("div",{style:{background:S.cardBg,border:`1px solid ${S.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:S.cardText,marginTop:0,marginBottom:"1rem"},children:"Service Sizing Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:S.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:S.labelText,marginBottom:"0.25rem"},children:"Total Demand Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:S.cardText},children:le.totalDemand.toFixed(0)}),i.jsx("div",{style:{fontSize:"0.75rem",color:S.labelText,marginTop:"0.25rem"},children:"Watts"})]}),i.jsxs("div",{style:{background:S.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:S.labelText,marginBottom:"0.25rem"},children:"Calculated Amperage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:S.cardText},children:le.totalAmperage.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:S.labelText,marginTop:"0.25rem"},children:"Amperes"})]})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Recommended Service Size"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[le.recommendedService,"A"]})]}),i.jsx("div",{style:{background:S.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center",border:`1px solid ${S.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:S.labelText},children:[i.jsx("strong",{style:{color:S.cardText},children:"Service Conductors:"})," ",le.conductorSize," Copper"]})})]})]}),i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Important Notes:"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Service conductors are approximate for 75°C copper. Consult NEC Table 310.15(B)(16) for exact sizing with all derating factors."})]})]})})]}):i.jsxs("div",{children:[i.jsxs("div",{style:{background:S.cardBg,border:`1px solid ${S.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:S.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${S.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Information"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Total Connected Load (kW)"}),i.jsx("input",{type:"number",value:$,onChange:de=>V(de.target.value),placeholder:"Total building load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Demand Factor (%)"}),i.jsx("input",{type:"number",value:B,onChange:de=>X(de.target.value),placeholder:"Typically 70-90%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:S.subtleText,marginTop:"0.25rem"},children:"Peak demand percentage"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Future Expansion (%)"}),i.jsx("input",{type:"number",value:O,onChange:de=>P(de.target.value),placeholder:"Typically 20-30%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:S.subtleText,marginTop:"0.25rem"},children:"Spare capacity for growth"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),i.jsxs("select",{value:se,onChange:de=>U(de.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"System Phase"}),i.jsxs("select",{value:C,onChange:de=>w(de.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]})]})]}),$&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:S.cardBg,border:`1px solid ${S.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:S.cardText,marginTop:0,marginBottom:"1rem"},children:"Load Calculation"}),i.jsxs("div",{style:{background:S.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${S.cardBorder}`,marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:S.labelText},children:[i.jsx("strong",{style:{color:S.cardText},children:"Connected Load:"})," ",ve.connectedLoad.toFixed(1)," kW"]}),i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:S.labelText},children:[i.jsxs("strong",{style:{color:S.cardText},children:["Demand Load (",B,"%):"]})," ",ve.demandLoad.toFixed(1)," kW"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:S.labelText},children:[i.jsxs("strong",{style:{color:S.cardText},children:["With Future Expansion (",O,"%):"]})," ",ve.futureLoad.toFixed(1)," kW"]})]}),i.jsxs("div",{style:{background:S.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:S.labelText,marginBottom:"0.25rem"},children:"Calculated Amperage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:S.cardText},children:ve.amperage.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:S.labelText,marginTop:"0.25rem"},children:"Amperes"})]})]}),i.jsxs("div",{style:{background:S.cardBg,border:`1px solid ${S.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:S.cardText,marginTop:0,marginBottom:"1rem"},children:"Recommended Service"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Service Size"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[ve.recommendedService,"A"]})]}),i.jsx("div",{style:{background:S.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center",border:`1px solid ${S.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:S.labelText},children:["@ ",se,"V ",C==="single"?"Single":"Three"," Phase"]})})]})]}),i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Commercial Service Considerations:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Include demand factors per NEC 220.40 and Article 220 Part IV"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider future expansion (typically 20-30% spare capacity)"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Account for motor loads, HVAC, and large equipment"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Review utility requirements and available fault current"}),i.jsx("li",{children:"Consider separate services for different occupancies"})]})]})]})})]}),i.jsxs("div",{style:{background:S.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${S.cardBorder}`,fontSize:"0.8125rem",color:S.labelText,marginTop:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:S.cardText},children:"NEC Article 230 - Services and Service Equipment:"}),"220.82: Dwelling unit optional calculation • 230.42: Minimum conductor size • 230.79: Disconnecting means rating • 230.90: Overload protection"]})]})}),uE=({gecData:r,setGecData:e,colors:t})=>{const n={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}},a=(()=>{if(!r.serviceSize)return null;const c=r.serviceSize;let u="";const f=["14","12","10","8","6","4","3","2","1"],h=["1/0","2/0","3/0","4/0"],g=parseInt(c);return f.includes(c)?parseInt(c)>=2?u="2 or smaller":c==="1"&&(u="1 or 1/0"):h.includes(c)?c==="1/0"?u="1 or 1/0":c==="2/0"||c==="3/0"?u="2/0 or 3/0":c==="4/0"&&(u="4/0 to 350"):isNaN(g)||(g>=250&&g<=350?u="4/0 to 350":g>=400&&g<=600?u="400 to 600":g>=650&&g<=1100?u="650 to 1100":g>1100&&(u="over 1100")),{serviceSize:c,category:u,gecSize:n[r.conductorMaterial][u]||"N/A"}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Service Conductor Size"}),i.jsxs("select",{value:r.serviceSize,onChange:c=>e(u=>({...u,serviceSize:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"",children:"Select Size"}),i.jsx("option",{value:"8",children:"8 AWG"}),i.jsx("option",{value:"6",children:"6 AWG"}),i.jsx("option",{value:"4",children:"4 AWG"}),i.jsx("option",{value:"2",children:"2 AWG"}),i.jsx("option",{value:"1",children:"1 AWG"}),i.jsx("option",{value:"1/0",children:"1/0 AWG"}),i.jsx("option",{value:"2/0",children:"2/0 AWG"}),i.jsx("option",{value:"3/0",children:"3/0 AWG"}),i.jsx("option",{value:"4/0",children:"4/0 AWG"}),i.jsx("option",{value:"250",children:"250 kcmil"}),i.jsx("option",{value:"350",children:"350 kcmil"}),i.jsx("option",{value:"500",children:"500 kcmil"}),i.jsx("option",{value:"750",children:"750 kcmil"}),i.jsx("option",{value:"1000",children:"1000 kcmil"}),i.jsx("option",{value:"1500",children:"1500 kcmil"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Largest ungrounded service conductor"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"GEC Material"}),i.jsxs("select",{value:r.conductorMaterial,onChange:c=>e(u=>({...u,conductorMaterial:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"copper",children:"Copper"}),i.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]}),a&&a.gecSize!=="N/A"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Grounding Electrode Conductor"}),i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[a.gecSize," AWG"]}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Per NEC Table 250.66"}),i.jsxs("div",{children:["Service conductor: ",a.serviceSize," AWG ",r.conductorMaterial]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Important Notes:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"GEC to rod/pipe/plate need not be larger than 6 AWG copper"}),i.jsx("li",{children:"GEC to concrete-encased electrode need not be larger than 4 AWG copper"}),i.jsx("li",{children:"Must be continuous without splices (except as permitted)"})]})]})]})]})},dE=({egcData:r,setEgcData:e,colors:t})=>{const n={copper:{15:"14",20:"12",30:"10",40:"10",60:"10",100:"8",200:"6",300:"4",400:"3",500:"2",600:"1",800:"1/0",1e3:"2/0",1200:"3/0",1600:"4/0",2e3:"250",2500:"350",3e3:"400",4e3:"500",5e3:"700",6e3:"800"},aluminum:{15:"12",20:"10",30:"8",40:"8",60:"8",100:"6",200:"4",300:"2",400:"1",500:"1/0",600:"2/0",800:"3/0",1e3:"4/0",1200:"250",1600:"350",2e3:"400",2500:"500",3e3:"600",4e3:"750",5e3:"1000",6e3:"1200"}},a=(()=>{const c=parseInt(r.ocpdRating);if(!c)return null;const u=Object.keys(n[r.conductorMaterial]).map(Number).sort((h,g)=>h-g),f=u.find(h=>h>=c)||u[u.length-1];return{ocpdRating:c,applicableRating:f,egcSize:n[r.conductorMaterial][f]}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Overcurrent Device Rating (A)"}),i.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:r.ocpdRating,onChange:c=>{const u=c.target.value.replace(/[^0-9]/g,"");e(f=>({...f,ocpdRating:u}))},placeholder:"Enter rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Circuit breaker or fuse rating"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["EGC Material ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsxs("select",{value:r.conductorMaterial,onChange:c=>e(u=>({...u,conductorMaterial:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"copper",children:"Copper"}),i.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Equipment Grounding Conductor"}),i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[a.egcSize," AWG"]}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Per NEC Table 250.122"}),i.jsxs("div",{children:["OCPD rating: ",a.ocpdRating,"A"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Important Notes:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Increase proportionally if conductors upsized for voltage drop"}),i.jsx("li",{children:"Size per each raceway if conductors run in parallel"}),i.jsx("li",{children:"Based on rating of OCPD ahead of circuit"})]})]})]})]})},hE=({bondingData:r,setBondingData:e,colors:t})=>{const n={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}},a=(()=>{if(!r.serviceSize)return null;const c=r.serviceSize;let u="";const f=["14","12","10","8","6","4","3","2","1"],h=["1/0","2/0","3/0","4/0"],g=parseInt(c);return f.includes(c)?parseInt(c)>=2?u="2 or smaller":c==="1"&&(u="1 or 1/0"):h.includes(c)?c==="1/0"?u="1 or 1/0":c==="2/0"||c==="3/0"?u="2/0 or 3/0":c==="4/0"&&(u="4/0 to 350"):isNaN(g)||(g>=250&&g<=350?u="4/0 to 350":g>=400&&g<=600?u="400 to 600":g>=650&&g<=1100?u="650 to 1100":g>1100&&(u="over 1100")),{serviceSize:c,jumperSize:n[r.conductorMaterial][u]||"N/A",jumperType:r.jumperType}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Bonding Jumper Type"}),i.jsxs("select",{value:r.jumperType,onChange:c=>e(u=>({...u,jumperType:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"main",children:"Main Bonding Jumper (Service)"}),i.jsx("option",{value:"system",children:"System Bonding Jumper (Separately Derived)"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Conductor Size"}),i.jsxs("select",{value:r.serviceSize,onChange:c=>e(u=>({...u,serviceSize:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"",children:"Select Size"}),i.jsx("option",{value:"8",children:"8 AWG"}),i.jsx("option",{value:"6",children:"6 AWG"}),i.jsx("option",{value:"4",children:"4 AWG"}),i.jsx("option",{value:"2",children:"2 AWG"}),i.jsx("option",{value:"1",children:"1 AWG"}),i.jsx("option",{value:"1/0",children:"1/0 AWG"}),i.jsx("option",{value:"2/0",children:"2/0 AWG"}),i.jsx("option",{value:"3/0",children:"3/0 AWG"}),i.jsx("option",{value:"4/0",children:"4/0 AWG"}),i.jsx("option",{value:"250",children:"250 kcmil"}),i.jsx("option",{value:"500",children:"500 kcmil"}),i.jsx("option",{value:"750",children:"750 kcmil"}),i.jsx("option",{value:"1000",children:"1000 kcmil"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Material"}),i.jsxs("select",{value:r.conductorMaterial,onChange:c=>e(u=>({...u,conductorMaterial:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"copper",children:"Copper"}),i.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]})]}),a&&a.jumperSize!=="N/A"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:[r.jumperType==="main"?"Main":"System"," Bonding Jumper"]}),i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[a.jumperSize," AWG"]}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:["Per NEC ",r.jumperType==="main"?"250.28(D)":"250.30(A)(1)"]}),i.jsxs("div",{children:["Conductor size: ",a.serviceSize," AWG ",r.conductorMaterial]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:[r.jumperType==="main"?"Main":"System"," Bonding Jumper Requirements:"]}),i.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:r.jumperType==="main"?i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Connects grounded conductor to equipment grounding conductor"}),i.jsx("li",{children:"Sized per Table 250.66 based on service conductor"}),i.jsx("li",{children:"Can be wire, bus, screw, or similar conductor"})]}):i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Required for separately derived systems"}),i.jsx("li",{children:"Connects grounded to equipment grounding conductor"}),i.jsx("li",{children:"Installed at same location as GEC connection"})]})})]})]})]})},fE=be.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=be.useState("gec"),[a,c]=be.useState({serviceSize:"",conductorMaterial:"copper"}),[u,f]=be.useState({ocpdRating:"",conductorMaterial:"copper"}),[h,g]=be.useState({serviceSize:"",conductorMaterial:"copper",jumperType:"main"}),b=be.useMemo(()=>({cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"}),[r]);return be.useImperativeHandle(t,()=>({exportPDF:()=>{let A;if(n==="gec"){if(!a.serviceSize){alert("Please select a service conductor size before exporting");return}const v={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}};let F="";const E=a.serviceSize,N=["14","12","10","8","6","4","3","2","1"],j=["1/0","2/0","3/0","4/0"],$=parseInt(E);N.includes(E)?parseInt(E)>=2?F="2 or smaller":E==="1"&&(F="1 or 1/0"):j.includes(E)?E==="1/0"?F="1 or 1/0":E==="2/0"||E==="3/0"?F="2/0 or 3/0":E==="4/0"&&(F="4/0 to 350"):isNaN($)||($>=250&&$<=350?F="4/0 to 350":$>=400&&$<=600?F="400 to 600":$>=650&&$<=1100?F="650 to 1100":$>1100&&(F="over 1100"));const V=v[a.conductorMaterial][F];A={calculatorName:"Grounding & Bonding - Grounding Electrode Conductor",inputs:{serviceConductorSize:`${a.serviceSize} AWG`,material:a.conductorMaterial.charAt(0).toUpperCase()+a.conductorMaterial.slice(1)},results:{groundingElectrodeConductor:`${V} AWG ${a.conductorMaterial}`},additionalInfo:{note1:"GEC to rod/pipe/plate need not be larger than 6 AWG copper",note2:"GEC to concrete-encased electrode need not be larger than 4 AWG copper",note3:"Must be continuous without splices (except as permitted)"},necReferences:["NEC Table 250.66 - Grounding Electrode Conductor for Alternating-Current Systems","NEC 250.64 - Grounding Electrode Conductor Installation","NEC 250.52 - Grounding Electrodes"]}}else if(n==="egc"){if(!u.ocpdRating){alert("Please enter an overcurrent device rating before exporting");return}const v={copper:{15:"14",20:"12",30:"10",40:"10",60:"10",100:"8",200:"6",300:"4",400:"3",500:"2",600:"1",800:"1/0",1e3:"2/0",1200:"3/0",1600:"4/0",2e3:"250",2500:"350",3e3:"400",4e3:"500",5e3:"700",6e3:"800"},aluminum:{15:"12",20:"10",30:"8",40:"8",60:"8",100:"6",200:"4",300:"2",400:"1",500:"1/0",600:"2/0",800:"3/0",1e3:"4/0",1200:"250",1600:"350",2e3:"400",2500:"500",3e3:"600",4e3:"750",5e3:"1000",6e3:"1200"}},F=parseInt(u.ocpdRating),E=Object.keys(v[u.conductorMaterial]).map(Number).sort(($,V)=>$-V),N=E.find($=>$>=F)||E[E.length-1],j=v[u.conductorMaterial][N];A={calculatorName:"Grounding & Bonding - Equipment Grounding Conductor",inputs:{overcurrentDeviceRating:`${F} Amps`,material:u.conductorMaterial.charAt(0).toUpperCase()+u.conductorMaterial.slice(1)},results:{equipmentGroundingConductor:`${j} AWG ${u.conductorMaterial}`,basedOnOCPDRating:`${N} Amps`},additionalInfo:{note1:"Increase proportionally if conductors upsized for voltage drop",note2:"Size per each raceway if conductors run in parallel",note3:"Based on rating of OCPD ahead of circuit"},necReferences:["NEC Table 250.122 - Minimum Size Equipment Grounding Conductors for Grounding Raceway and Equipment","NEC 250.122(B) - Increased in Size","NEC 250.122(F) - Conductors in Parallel"]}}else if(n==="bonding"){if(!h.serviceSize){alert("Please select a conductor size before exporting");return}const v={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}};let F="";const E=h.serviceSize,N=["14","12","10","8","6","4","3","2","1"],j=["1/0","2/0","3/0","4/0"],$=parseInt(E);N.includes(E)?parseInt(E)>=2?F="2 or smaller":E==="1"&&(F="1 or 1/0"):j.includes(E)?E==="1/0"?F="1 or 1/0":E==="2/0"||E==="3/0"?F="2/0 or 3/0":E==="4/0"&&(F="4/0 to 350"):isNaN($)||($>=250&&$<=350?F="4/0 to 350":$>=400&&$<=600?F="400 to 600":$>=650&&$<=1100?F="650 to 1100":$>1100&&(F="over 1100"));const V=v[h.conductorMaterial][F],B=h.jumperType==="main"?"Main Bonding Jumper":"System Bonding Jumper";A={calculatorName:`Grounding & Bonding - ${B}`,inputs:{jumperType:B,conductorSize:`${h.serviceSize} AWG`,material:h.conductorMaterial.charAt(0).toUpperCase()+h.conductorMaterial.slice(1)},results:{bondingJumperSize:`${V} AWG ${h.conductorMaterial}`},additionalInfo:h.jumperType==="main"?{purpose:"Connects grounded conductor to equipment grounding conductor",sizing:"Sized per Table 250.66 based on service conductor",forms:"Can be wire, bus, screw, or similar conductor"}:{purpose:"Required for separately derived systems",connection:"Connects grounded to equipment grounding conductor",location:"Installed at same location as GEC connection"},necReferences:h.jumperType==="main"?["NEC 250.28 - Main Bonding Jumper and System Bonding Jumper","NEC 250.28(D) - Size","NEC Table 250.66 - Sizing Reference"]:["NEC 250.30 - Grounding Separately Derived Alternating-Current Systems","NEC 250.30(A)(1) - System Bonding Jumper","NEC Table 250.66 - Sizing Reference"]}}pn(A)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"gec",label:"Grounding Electrode"},{id:"egc",label:"Equipment Grounding"},{id:"bonding",label:"Bonding Jumpers"}].map(A=>i.jsx("button",{onClick:()=>o(A.id),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.625rem 1rem",background:n===A.id?"#3b82f6":b.sectionBg,color:n===A.id?"white":b.labelText,border:`1px solid ${n===A.id?"#3b82f6":b.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:A.label},A.id))}),i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[n==="gec"&&i.jsx(uE,{gecData:a,setGecData:c,colors:b}),n==="egc"&&i.jsx(dE,{egcData:u,setEgcData:f,colors:b}),n==="bonding"&&i.jsx(hE,{bondingData:h,setBondingData:g,colors:b})]})]})}),pE=({offsetData:r,setOffsetData:e,colors:t})=>{const n={10:{distance:6,shrink:.01},"22.5":{distance:2.6,shrink:.06},30:{distance:2,shrink:.25},45:{distance:1.4,shrink:.41},60:{distance:1.2,shrink:.58}},a=(()=>{if(!r.obstacleHeight)return null;const c=parseFloat(r.obstacleHeight),u=n[r.bendAngle];return{distanceBetweenBends:(c*u.distance).toFixed(2),shrinkage:(c*u.shrink).toFixed(2),angle:r.bendAngle}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Obstacle Height (inches)"}),i.jsx("input",{type:"number",value:r.obstacleHeight,onChange:c=>e(u=>({...u,obstacleHeight:c.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Height to clear obstacle"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Bend Angle ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsxs("select",{value:r.bendAngle,onChange:c=>e(u=>({...u,bendAngle:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"10",children:"10°"}),i.jsx("option",{value:"22.5",children:"22.5°"}),i.jsx("option",{value:"30",children:"30°"}),i.jsx("option",{value:"45",children:"45°"}),i.jsx("option",{value:"60",children:"60°"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Most common: 30° or 45°"})]})]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Distance Between Bends"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[a.distanceBetweenBends,'"']})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Shrinkage"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[a.shrinkage,'"']})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"How to Make the Bend"}),i.jsxs("div",{children:["Mark first bend, measure ",a.distanceBetweenBends,'" from center of first bend, then make second bend at ',a.angle,"°."]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Offset Bend Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"30° bends are most common for typical offsets"}),i.jsx("li",{children:"45° bends create shorter, steeper offsets"}),i.jsx("li",{children:"Always account for shrinkage in measurements"})]})]})]})]})},mE=({stubUpData:r,setStubUpData:e,colors:t})=>{const n={"1/2":5,"3/4":6,1:8,"1-1/4":11,"1-1/2":14,2:16,"2-1/2":21,3:26,"3-1/2":30,4:34},a=(()=>{if(!r.stubHeight)return null;const c=parseFloat(r.stubHeight),u=n[r.conduitSize];return{markDistance:(c-u).toFixed(2),deduction:u,stubHeight:c.toFixed(2)}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Desired Stub Height (inches)"}),i.jsx("input",{type:"number",value:r.stubHeight,onChange:c=>e(u=>({...u,stubHeight:c.target.value})),placeholder:"Enter stub height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Back of 90° to floor"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Conduit Size ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsx("select",{value:r.conduitSize,onChange:c=>e(u=>({...u,conduitSize:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.keys(n).map(c=>i.jsxs("option",{value:c,children:[c,'"']},c))})]})]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Mark At"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[a.markDistance,'"']})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Deduction"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[a.deduction,'"']})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Conduit Size"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[r.conduitSize,'"']})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"How to Bend"}),i.jsxs("div",{children:["Measure from end of conduit, mark at ",a.markDistance,'", line up mark with arrow on bender, make 90° bend.']})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Stub-Up Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Deduction accounts for the radius of the bend"}),i.jsx("li",{children:"Larger conduit = larger deduction"}),i.jsx("li",{children:"Always check your bender - deductions vary by manufacturer"})]})]})]})]})},gE=({saddleData:r,setSaddleData:e,colors:t})=>{const o=(()=>{if(!r.obstacleHeight)return null;const a=parseFloat(r.obstacleHeight),c=parseFloat(r.obstacleWidth)||a*4,u=a*.3;return{centerBend:45,outerBends:22.5,distanceToOuter:(c/2).toFixed(2),shrinkage:u.toFixed(2),obstacleHeight:a.toFixed(2)}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Obstacle Height (inches)"}),i.jsx("input",{type:"number",value:r.obstacleHeight,onChange:a=>e(c=>({...c,obstacleHeight:a.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Width ",i.jsx("br",{})," (Optional)"]}),i.jsx("input",{type:"number",value:r.obstacleWidth,onChange:a=>e(c=>({...c,obstacleWidth:a.target.value})),placeholder:"Auto: 4x height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Center Bend"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[o.centerBend,"°"]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Outer Bends"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.outerBends,"°"]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Distance to Outer"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.distanceToOuter,'"']})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Bending Sequence"}),i.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Mark center of obstacle on conduit"}),i.jsx("li",{children:"Make 45° center bend at mark"}),i.jsxs("li",{children:["Measure ",o.distanceToOuter,'" from center each direction']}),i.jsx("li",{children:"Make 22.5° bends on each side (opposite direction)"})]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"3-Point Saddle Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Center bend goes up, outer bends go down"}),i.jsx("li",{children:"Most common for going over pipes or other conduits"}),i.jsx("li",{children:"Mark all three bend locations before starting"})]})]})]})]})},yE=({fourPointData:r,setFourPointData:e,colors:t})=>{const o=(()=>{if(!r.obstacleHeight||!r.obstacleWidth)return null;const a=parseFloat(r.obstacleHeight),c=parseFloat(r.obstacleWidth),u=c/2,f=c/4,h=a*.15;return{bendAngle:22.5,distanceToOuter:u.toFixed(2),innerSpacing:f.toFixed(2),shrinkage:h.toFixed(2)}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Height ",i.jsx("br",{})," (inches)"]}),i.jsx("input",{type:"number",value:r.obstacleHeight,onChange:a=>e(c=>({...c,obstacleHeight:a.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Width ",i.jsx("br",{})," (inches)"]}),i.jsx("input",{type:"number",value:r.obstacleWidth,onChange:a=>e(c=>({...c,obstacleWidth:a.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"All Bends"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[o.bendAngle,"°"]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Outer Distance"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.distanceToOuter,'"']})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Inner Spacing"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.innerSpacing,'"']})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Bending Sequence"}),i.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Mark center of obstacle on conduit"}),i.jsxs("li",{children:["Measure ",o.distanceToOuter,'" from center (outer bends)']}),i.jsxs("li",{children:["Measure ",o.innerSpacing,'" from center (inner bends)']}),i.jsx("li",{children:"Make all four 22.5° bends: outer up, inner down"})]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"4-Point Saddle Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Used for larger obstacles where 3-point won't work"}),i.jsx("li",{children:"Outer bends go up, inner bends go down"}),i.jsx("li",{children:"Creates a flatter top for better clearance"})]})]})]})]})},xE=be.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=be.useState("offset"),[a,c]=be.useState({obstacleHeight:"",bendAngle:"30"}),[u,f]=be.useState({stubHeight:"",conduitSize:"3/4"}),[h,g]=be.useState({obstacleHeight:"",obstacleWidth:""}),[b,A]=be.useState({obstacleHeight:"",obstacleWidth:""}),v={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};be.useImperativeHandle(t,()=>({exportPDF:()=>{let E;if(n==="offset"){if(!a.obstacleHeight){alert("Please enter obstacle height for Offset Bends before exporting");return}const N={10:{distance:6,shrink:.01},"22.5":{distance:2.6,shrink:.06},30:{distance:2,shrink:.25},45:{distance:1.4,shrink:.41},60:{distance:1.2,shrink:.58}},j=parseFloat(a.obstacleHeight),$=N[a.bendAngle],V=(j*$.distance).toFixed(2),B=(j*$.shrink).toFixed(2);E={calculatorName:"Conduit Bending - Offset Bends",inputs:{obstacleHeight:`${a.obstacleHeight} inches`,bendAngle:`${a.bendAngle}°`},results:{distanceBetweenBends:`${V} inches`,shrinkage:`${B} inches`},additionalInfo:{instructions:`Mark first bend, measure ${V}" from center of first bend, then make second bend at ${a.bendAngle}°`,multiplierUsed:`Distance: ${$.distance}, Shrink: ${$.shrink}`},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","30° bends are most common for typical offsets","45° bends create shorter, steeper offsets"]}}else if(n==="stubup"){if(!u.stubHeight){alert("Please enter stub height for 90° Stub-Up before exporting");return}const N={"1/2":5,"3/4":6,1:8,"1-1/4":11,"1-1/2":14,2:16,"2-1/2":21,3:26,"3-1/2":30,4:34},j=parseFloat(u.stubHeight),$=N[u.conduitSize],V=(j-$).toFixed(2);E={calculatorName:"Conduit Bending - 90° Stub-Up",inputs:{desiredStubHeight:`${u.stubHeight} inches`,conduitSize:`${u.conduitSize}"`},results:{markAt:`${V} inches`,deduction:`${$} inches`},additionalInfo:{instructions:`Measure from end of conduit, mark at ${V}", line up mark with arrow on bender, make 90° bend`,note:"Deduction accounts for the radius of the bend - larger conduit requires larger deduction"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Always check your bender - deductions vary by manufacturer"]}}else if(n==="saddle"){if(!h.obstacleHeight){alert("Please enter obstacle height for 3-Point Saddle before exporting");return}const N=parseFloat(h.obstacleHeight),j=parseFloat(h.obstacleWidth)||N*4,$=(N*.3).toFixed(2),V=(j/2).toFixed(2);E={calculatorName:"Conduit Bending - 3-Point Saddle",inputs:{obstacleHeight:`${h.obstacleHeight} inches`,obstacleWidth:h.obstacleWidth?`${h.obstacleWidth} inches`:`${j} inches (Auto: 4x height)`},results:{centerBend:"45°",outerBends:"22.5°",distanceToOuter:`${V} inches`,shrinkage:`${$} inches`},additionalInfo:{bendingSequence:`1) Mark center of obstacle on conduit 2) Make 45° center bend at mark 3) Measure ${V}" from center each direction 4) Make 22.5° bends on each side (opposite direction)`,tip:"Center bend goes up, outer bends go down"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Most common for going over pipes or other conduits","Mark all three bend locations before starting"]}}else if(n==="fourpoint"){if(!b.obstacleHeight||!b.obstacleWidth){alert("Please enter both obstacle height and width for 4-Point Saddle before exporting");return}const N=parseFloat(b.obstacleHeight),j=parseFloat(b.obstacleWidth),$=(j/2).toFixed(2),V=(j/4).toFixed(2),B=(N*.15).toFixed(2);E={calculatorName:"Conduit Bending - 4-Point Saddle",inputs:{obstacleHeight:`${b.obstacleHeight} inches`,obstacleWidth:`${b.obstacleWidth} inches`},results:{allBends:"22.5°",outerDistance:`${$} inches`,innerSpacing:`${V} inches`,shrinkage:`${B} inches`},additionalInfo:{bendingSequence:`1) Mark center of obstacle on conduit 2) Measure ${$}" from center (outer bends) 3) Measure ${V}" from center (inner bends) 4) Make all four 22.5° bends: outer up, inner down`,tip:"Used for larger obstacles where 3-point saddle will not work"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Creates a flatter top for better clearance over wide obstacles"]}}pn(E)}}));const F={offset:i.jsx(pE,{offsetData:a,setOffsetData:c,colors:v}),stubup:i.jsx(mE,{stubUpData:u,setStubUpData:f,colors:v}),saddle:i.jsx(gE,{saddleData:h,setSaddleData:g,colors:v}),fourpoint:i.jsx(yE,{fourPointData:b,setFourPointData:A,colors:v})};return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"offset",label:"Offset Bends"},{id:"stubup",label:"90° Stub-Up"},{id:"saddle",label:"3-Point Saddle"},{id:"fourpoint",label:"4-Point Saddle"}].map(E=>i.jsx("button",{onClick:()=>o(E.id),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.625rem 1rem",background:n===E.id?"#3b82f6":v.sectionBg,color:n===E.id?"white":v.labelText,border:`1px solid ${n===E.id?"#3b82f6":v.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:E.label},E.id))}),i.jsx("div",{style:{background:v.cardBg,border:`1px solid ${v.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:F[n]})]})}),vE=({lumensData:r,setLumensData:e,colors:t})=>{const n={living:10,kitchen:50,bathroom:70,bedroom:10,office:50,workshop:75,garage:50,hallway:5,dining:30,laundry:50},o={living:"Living Room (10 fc)",kitchen:"Kitchen (50 fc)",bathroom:"Bathroom (70 fc)",bedroom:"Bedroom (10 fc)",office:"Office/Study (50 fc)",workshop:"Workshop (75 fc)",garage:"Garage (50 fc)",hallway:"Hallway (5 fc)",dining:"Dining Room (30 fc)",laundry:"Laundry Room (50 fc)"},c=(()=>{if(!r.roomLength||!r.roomWidth)return null;const u=parseFloat(r.roomLength),f=parseFloat(r.roomWidth),h=u*f,g=n[r.roomType],b=g*h;let A=null;if(r.lumensPerFixture){const v=parseFloat(r.lumensPerFixture);A=Math.ceil(b/v)}return{area:h.toFixed(1),footCandles:g,totalLumens:b.toFixed(0),fixturesNeeded:A}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),i.jsx("input",{type:"number",value:r.roomLength,onChange:u=>e(f=>({...f,roomLength:u.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),i.jsx("input",{type:"number",value:r.roomWidth,onChange:u=>e(f=>({...f,roomWidth:u.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Room Type ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsx("select",{value:r.roomType,onChange:u=>e(f=>({...f,roomType:u.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.entries(o).map(([u,f])=>i.jsx("option",{value:u,children:f},u))}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"fc = foot-candles"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Lumens per Fixture (Optional)"}),i.jsx("input",{type:"number",value:r.lumensPerFixture,onChange:u=>e(f=>({...f,lumensPerFixture:u.target.value})),placeholder:"e.g., 800",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"To calculate fixture count"})]})]}),c&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:c.fixturesNeeded?"repeat(3, 1fr)":"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Room Area"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:c.area}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"sq ft"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Lumens Needed"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:c.totalLumens}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"lumens"})]}),c.fixturesNeeded&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Fixtures Needed"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:c.fixturesNeeded}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"fixtures"})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Lighting Requirements"}),i.jsxs("div",{children:["Recommended level: ",c.footCandles," foot-candles"]}),c.fixturesNeeded&&i.jsxs("div",{children:["Using ",r.lumensPerFixture," lumens per fixture"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Lighting Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"LED bulbs typically produce 60-100 lumens per watt"}),i.jsx("li",{children:"Layer lighting: combine ambient, task, and accent lighting"}),i.jsx("li",{children:"Dark wall colors absorb light; increase lumens by 10-20%"})]})]})]})]})},bE=({spacingData:r,setSpacingData:e,colors:t})=>{const n={recessed:1.5,pendant:1,track:2,surface:1.5},a=(()=>{if(!r.roomLength||!r.roomWidth)return null;const c=parseFloat(r.roomLength),u=parseFloat(r.roomWidth),f=parseFloat(r.ceilingHeight),h=n[r.fixtureType],g=f*h,b=r.fixtureType==="recessed"?6:g*.8,A=Math.max(2,Math.round(c/b)),v=Math.max(2,Math.round(u/b)),F=A*v,E=c/A,N=u/v,j=E/2,$=N/2;return{maxSpacing:g.toFixed(1),fixturesLength:A,fixturesWidth:v,totalFixtures:F,actualSpacingLength:E.toFixed(1),actualSpacingWidth:N.toFixed(1),wallOffsetLength:j.toFixed(1),wallOffsetWidth:$.toFixed(1)}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),i.jsx("input",{type:"number",value:r.roomLength,onChange:c=>e(u=>({...u,roomLength:c.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),i.jsx("input",{type:"number",value:r.roomWidth,onChange:c=>e(u=>({...u,roomWidth:c.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Ceiling Height (feet)"}),i.jsx("input",{type:"number",value:r.ceilingHeight,onChange:c=>e(u=>({...u,ceilingHeight:c.target.value})),placeholder:"8",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Fixture Type"}),i.jsxs("select",{value:r.fixtureType,onChange:c=>e(u=>({...u,fixtureType:c.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"recessed",children:"Recessed Can (1.5:1 ratio)"}),i.jsx("option",{value:"pendant",children:"Pendant (1:1 ratio)"}),i.jsx("option",{value:"track",children:"Track Light (2:1 ratio)"}),i.jsx("option",{value:"surface",children:"Surface Mount (1.5:1 ratio)"})]})]})]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Max Spacing"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:a.maxSpacing}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"feet"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Fixtures"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:a.totalFixtures}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"fixtures"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Layout"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[a.fixturesLength,"×",a.fixturesWidth]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"grid"})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Spacing Results"}),i.jsxs("div",{children:["Length spacing: ",a.actualSpacingLength," ft"]}),i.jsxs("div",{children:["Width spacing: ",a.actualSpacingWidth," ft"]}),i.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.8125rem"},children:["Start ",a.wallOffsetLength," ft from walls (length) and ",a.wallOffsetWidth," ft from walls (width)"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Spacing Guidelines:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Industry standard: 4-6 feet spacing for recessed cans"}),i.jsx("li",{children:"Spacing ratio = max distance between fixtures ÷ ceiling height"}),i.jsx("li",{children:"Space fixtures evenly with proper wall offsets for uniform coverage"})]})]})]})]})},wE=({wattsData:r,setWattsData:e,colors:t})=>{const n={office:1,retail:1.5,warehouse:.5,school:1.2,hospital:1,hotel:1,restaurant:1.3,residential:1},o={office:"Office Building (1.0 W/sq ft)",retail:"Retail Store (1.5 W/sq ft)",warehouse:"Warehouse (0.5 W/sq ft)",school:"School (1.2 W/sq ft)",hospital:"Hospital (1.0 W/sq ft)",hotel:"Hotel (1.0 W/sq ft)",restaurant:"Restaurant (1.3 W/sq ft)",residential:"Residential (1.0 W/sq ft)"},c=(()=>{if(!r.area)return null;const u=parseFloat(r.area),f=n[r.buildingType],h=u*f,g=h,b=g/120,A=Math.ceil(b/16);return{wattsPerSqFt:f,totalWatts:h.toFixed(0),totalVA:g.toFixed(0),amperage:b.toFixed(1),circuits:A}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Area (square feet)"}),i.jsx("input",{type:"number",value:r.area,onChange:u=>e(f=>({...f,area:u.target.value})),placeholder:"Enter area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Building Type"}),i.jsx("select",{value:r.buildingType,onChange:u=>e(f=>({...f,buildingType:u.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.entries(o).map(([u,f])=>i.jsx("option",{value:u,children:f},u))}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Per NEC Table 220.12"})]})]}),c&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Unit Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:c.wattsPerSqFt}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"W/sq ft"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:c.totalWatts}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"watts"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:c.circuits}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"needed"})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Lighting Load Calculation"}),i.jsxs("div",{children:["Total VA: ",c.totalVA," VA"]}),i.jsxs("div",{children:["Current @ 120V: ",c.amperage," A"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Requirements:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"NEC 220.12 specifies unit lighting loads by occupancy"}),i.jsx("li",{children:"Calculate using building area, not just lit area"}),i.jsx("li",{children:"Continuous loads require 125% conductor/OCPD sizing"})]})]})]})]})},SE=be.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=be.useState("lumens"),[a,c]=be.useState({roomLength:"",roomWidth:"",roomType:"living",lumensPerFixture:""}),[u,f]=be.useState({roomLength:"",roomWidth:"",ceilingHeight:"8",fixtureType:"recessed"}),[h,g]=be.useState({area:"",buildingType:"office"}),b={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};be.useImperativeHandle(t,()=>({exportPDF:()=>{let v;if(n==="lumens"){if(!a.roomLength||!a.roomWidth){alert("Please enter room dimensions before exporting");return}const F={living:"Living Room",kitchen:"Kitchen",bathroom:"Bathroom",bedroom:"Bedroom",office:"Office/Study",workshop:"Workshop",garage:"Garage",hallway:"Hallway",dining:"Dining Room",laundry:"Laundry Room"},E={living:10,kitchen:50,bathroom:70,bedroom:10,office:50,workshop:75,garage:50,hallway:5,dining:30,laundry:50},N=parseFloat(a.roomLength),j=parseFloat(a.roomWidth),$=(N*j).toFixed(1),V=E[a.roomType],B=(V*$).toFixed(0),X={roomLength:`${a.roomLength} feet`,roomWidth:`${a.roomWidth} feet`,roomType:`${F[a.roomType]} (${V} fc)`},se={roomArea:`${$} sq ft`,totalLumensNeeded:`${B} lumens`};if(a.lumensPerFixture){const U=parseFloat(a.lumensPerFixture),C=Math.ceil(parseFloat(B)/U);X.lumensPerFixture=`${a.lumensPerFixture} lumens`,se.fixturesNeeded=`${C} fixtures`}v={calculatorName:"Lighting Calculations - Room Lumens",inputs:X,results:se,additionalInfo:{calculation:`Area (${$} sq ft) × Recommended Level (${V} foot-candles) = ${B} lumens`,tip1:"LED bulbs typically produce 60-100 lumens per watt",tip2:"Layer lighting: combine ambient, task, and accent lighting",tip3:"Dark wall colors absorb light; increase lumens by 10-20%"},necReferences:["IES (Illuminating Engineering Society) recommended light levels","Foot-candles measure illuminance on a surface","1 foot-candle = 1 lumen per square foot"]}}else if(n==="spacing"){if(!u.roomLength||!u.roomWidth){alert("Please enter room dimensions before exporting");return}const F={recessed:"Recessed Can (1.5:1 ratio)",pendant:"Pendant (1:1 ratio)",track:"Track Light (2:1 ratio)",surface:"Surface Mount (1.5:1 ratio)"},E={recessed:1.5,pendant:1,track:2,surface:1.5},N=parseFloat(u.roomLength),j=parseFloat(u.roomWidth),$=parseFloat(u.ceilingHeight),V=E[u.fixtureType],B=($*V).toFixed(1),X=u.fixtureType==="recessed"?6:parseFloat(B)*.8,se=Math.max(2,Math.round(N/X)),U=Math.max(2,Math.round(j/X)),C=se*U,w=(N/se).toFixed(1),O=(j/U).toFixed(1),P=(parseFloat(w)/2).toFixed(1),S=(parseFloat(O)/2).toFixed(1);v={calculatorName:"Lighting Calculations - Fixture Spacing",inputs:{roomLength:`${u.roomLength} feet`,roomWidth:`${u.roomWidth} feet`,ceilingHeight:`${u.ceilingHeight} feet`,fixtureType:F[u.fixtureType]},results:{maximumSpacing:`${B} feet`,totalFixtures:`${C} fixtures`,layoutGrid:`${se} × ${U}`,lengthSpacing:`${w} feet`,widthSpacing:`${O} feet`},additionalInfo:{wallOffsets:`Start ${P} ft from walls (length) and ${S} ft from walls (width)`,spacingFormula:`Maximum spacing = Ceiling height (${$} ft) × Spacing ratio (${V}) = ${B} ft`,tip1:"Industry standard: 4-6 feet spacing for recessed cans",tip2:"Space fixtures evenly with proper wall offsets for uniform coverage"},necReferences:["Spacing ratio guidelines from IES Lighting Handbook","Recessed fixtures: 1.5:1 ratio (spacing to mounting height)","Pendant fixtures: 1:1 ratio for focused task lighting","Track lights: 2:1 ratio for accent lighting"]}}else if(n==="watts"){if(!h.area){alert("Please enter area before exporting");return}const F={office:"Office Building",retail:"Retail Store",warehouse:"Warehouse",school:"School",hospital:"Hospital",hotel:"Hotel",restaurant:"Restaurant",residential:"Residential"},E={office:1,retail:1.5,warehouse:.5,school:1.2,hospital:1,hotel:1,restaurant:1.3,residential:1},N=parseFloat(h.area),j=E[h.buildingType],$=(N*j).toFixed(0),V=$,B=(parseFloat(V)/120).toFixed(1),X=Math.ceil(parseFloat(B)/16);v={calculatorName:"Lighting Calculations - Watts per Square Foot",inputs:{area:`${h.area} square feet`,buildingType:`${F[h.buildingType]} (${j} W/sq ft)`},results:{unitLoad:`${j} W/sq ft`,totalLoad:`${$} watts`,totalVA:`${V} VA`,currentAt120V:`${B} Amps`,requiredCircuits:`${X} × 20A circuits`},additionalInfo:{calculation:`Area (${N} sq ft) × Unit Load (${j} W/sq ft) = ${$} watts`,circuitCalculation:`Total current (${B} A) ÷ 16A (80% of 20A) = ${X} circuits needed`,note:"Continuous loads require 125% conductor/OCPD sizing"},necReferences:["NEC Table 220.12 - General Lighting Loads by Occupancy","NEC 210.19(A)(1) - Branch Circuit Ampacity","NEC 210.20(A) - Continuous and Noncontinuous Loads","Calculate using building area, not just lit area"]}}pn(v)}}));const A={lumens:i.jsx(vE,{lumensData:a,setLumensData:c,colors:b}),spacing:i.jsx(bE,{spacingData:u,setSpacingData:f,colors:b}),watts:i.jsx(wE,{wattsData:h,setWattsData:g,colors:b})};return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"lumens",label:"Room Lumens"},{id:"spacing",label:"Fixture Spacing"},{id:"watts",label:"Watts/Sq Ft"}].map(v=>i.jsx("button",{onClick:()=>o(v.id),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.625rem 1rem",background:n===v.id?"#3b82f6":b.sectionBg,color:n===v.id?"white":b.labelText,border:`1px solid ${n===v.id?"#3b82f6":b.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:v.label},v.id))}),i.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:A[n]})]})}),_E=({generalData:r,setGeneralData:e,colors:t})=>{const o=(()=>{if(!r.roomLength||!r.roomWidth)return null;const a=parseFloat(r.roomLength),c=parseFloat(r.roomWidth),u=(a+c)*2,f=Math.max(2,Math.ceil(u/12));let h=0;if(r.hasCounters){const v=parseFloat(r.counterLength)||0;h=Math.max(2,Math.ceil(v/2))}const g=f+h,b=Math.ceil(g/8),A=Math.ceil(g/10);return{perimeter:u.toFixed(1),wallReceptacles:f,counterReceptacles:h,totalReceptacles:g,circuits15A:b,circuits20A:A}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),i.jsx("input",{type:"number",value:r.roomLength,onChange:a=>e(c=>({...c,roomLength:a.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),i.jsx("input",{type:"number",value:r.roomWidth,onChange:a=>e(c=>({...c,roomWidth:a.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsx("div",{style:{gridColumn:"1 / -1"},children:i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.hasCounters,onChange:a=>e(c=>({...c,hasCounters:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Room has countertops/islands"]})}),r.hasCounters&&i.jsxs("div",{style:{gridColumn:"1 / -1"},children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Counter Length (feet)"}),i.jsx("input",{type:"number",value:r.counterLength,onChange:a=>e(c=>({...c,counterLength:a.target.value})),placeholder:"Enter counter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"For kitchens/break rooms"})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:o.counterReceptacles>0?"repeat(3, 1fr)":"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Wall Receptacles"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.wallReceptacles})]}),o.counterReceptacles>0&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Counter Receptacles"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.counterReceptacles})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Needed"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.totalReceptacles})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"15A Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.circuits15A})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.circuits20A})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"NEC Requirements Met"}),i.jsxs("div",{children:["Room perimeter: ",o.perimeter," ft"]}),i.jsx("div",{children:"Spacing: One receptacle every 12 feet of wall space"}),o.counterReceptacles>0&&i.jsx("div",{children:"Counter spacing: One receptacle every 2 feet"})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC 210.52 Requirements:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Wall: Receptacle within 6 ft of doorway, then every 12 ft"}),i.jsx("li",{children:"No point along wall more than 6 ft from receptacle"}),i.jsx("li",{children:"Counters: One receptacle every 24 inches of counter space"}),i.jsx("li",{children:"Kitchen requires min. 2 small appliance circuits (20A)"})]})]})]})]})},TE=({kitchenData:r,setKitchenData:e,colors:t})=>{const o=(()=>{if(!r.counterLength)return null;const a=parseFloat(r.counterLength),c=parseFloat(r.islandLength)||0,u=Math.max(2,Math.ceil(a/2)),f=c>=2?Math.max(1,Math.ceil(c/4)):0,h=2,g=u+f;let b=0;return r.dishwasher&&b++,r.disposer&&b++,r.microwave&&b++,r.range&&b++,{counterReceptacles:u,islandReceptacles:f,totalReceptacles:u+f,smallApplianceCircuits:h,dedicatedCircuits:b,gfciRequired:g}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Counter Length (feet)"}),i.jsx("input",{type:"number",value:r.counterLength,onChange:a=>e(c=>({...c,counterLength:a.target.value})),placeholder:"Enter counter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Island Length (feet) - Optional"}),i.jsx("input",{type:"number",value:r.islandLength,onChange:a=>e(c=>({...c,islandLength:a.target.value})),placeholder:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:'Required if island ≥ 24" long × 12" wide'})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.75rem",color:t.cardText,fontSize:"0.875rem"},children:"Dedicated Appliance Circuits:"}),i.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.dishwasher,onChange:a=>e(c=>({...c,dishwasher:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Dishwasher (dedicated 15A/20A)"]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.disposer,onChange:a=>e(c=>({...c,disposer:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Garbage Disposer (dedicated 15A/20A)"]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.microwave,onChange:a=>e(c=>({...c,microwave:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Microwave (dedicated 20A)"]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.range,onChange:a=>e(c=>({...c,range:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Range/Cooktop (240V, 40-50A)"]})]})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Counter Receptacles"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.counterReceptacles})]}),o.islandReceptacles>0&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Island Receptacles"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.islandReceptacles})]}),o.islandReceptacles===0&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"GFCI Required"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.gfciRequired})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Small Appliance Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.smallApplianceCircuits}),i.jsx("div",{style:{fontSize:"0.65rem",color:t.subtleText,marginTop:"0.25rem"},children:"20A each"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Dedicated Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.dedicatedCircuits}),i.jsx("div",{style:{fontSize:"0.65rem",color:t.subtleText,marginTop:"0.25rem"},children:"for appliances"})]})]}),i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(lp,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"GFCI Protection Required"}),i.jsxs("div",{children:["All ",o.gfciRequired," countertop receptacles require GFCI protection per NEC 210.8(A)"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Kitchen Requirements:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Min. 2 small appliance circuits (20A) for countertop receptacles"}),i.jsx("li",{children:"Counter receptacles: One every 24 inches, all GFCI protected"}),i.jsx("li",{children:'Island receptacles required if island ≥ 24" long × 12" wide'}),i.jsx("li",{children:"Dishwasher, disposer typically need dedicated 15A or 20A circuits"})]})]})]})]})},AE=({bathroomData:r,setBathroomData:e,colors:t})=>{const o=(()=>{const a=parseInt(r.numBasins)||1,c=r.hasTub;let u=Math.max(1,a);c&&(u=Math.max(u,2));const f=r.sharedCircuit?1:a>=2?2:1;return{receptacles:u,dedicatedCircuits:f,gfciRequired:u,numBasins:a}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Number of Sinks/Basins"}),i.jsxs("select",{value:r.numBasins,onChange:a=>e(c=>({...c,numBasins:a.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"1",children:"1 Basin"}),i.jsx("option",{value:"2",children:"2 Basins (Double Vanity)"}),i.jsx("option",{value:"3",children:"3+ Basins"})]})]}),i.jsx("div",{children:i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.hasTub,onChange:a=>e(c=>({...c,hasTub:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Has Bathtub/Shower Area"]})}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.sharedCircuit,onChange:a=>e(c=>({...c,sharedCircuit:a.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Share circuit with other bathrooms"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",marginLeft:"1.625rem"},children:"One 20A circuit can serve multiple bathrooms if only serving receptacles"})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Receptacles Needed"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.receptacles})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.dedicatedCircuits})]})]}),i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(lp,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"GFCI Protection Required"}),i.jsxs("div",{children:["All ",o.gfciRequired," bathroom receptacles require GFCI protection per NEC 210.8(A)"]})]})]})}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Installation Guidelines"}),i.jsx("div",{children:"• At least one receptacle within 3 feet of each basin"}),i.jsx("div",{children:"• Receptacles must be readily accessible (not behind toilet)"}),i.jsx("div",{children:"• Install at least 12 inches above countertop"})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Bathroom Requirements:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"NEC 210.52(D): Min. 1 receptacle within 3 ft of basin"}),i.jsx("li",{children:"NEC 210.11(C)(3): Min. 1 dedicated 20A circuit for bathroom receptacles"}),i.jsx("li",{children:"NEC 210.8(A): All bathroom receptacles require GFCI protection"}),i.jsx("li",{children:"One 20A circuit can serve receptacles in multiple bathrooms"})]})]})]})]})},CE=be.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=be.useState("general"),[a,c]=be.useState({roomLength:"",roomWidth:"",hasCounters:!1,counterLength:""}),[u,f]=be.useState({counterLength:"",islandLength:"",dishwasher:!1,disposer:!1,microwave:!1,range:!1}),[h,g]=be.useState({numBasins:"1",hasTub:!1,sharedCircuit:!1}),b={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};be.useImperativeHandle(t,()=>({exportPDF:()=>{let v;if(n==="general"){if(!a.roomLength||!a.roomWidth){alert("Please enter room dimensions before exporting");return}const F=parseFloat(a.roomLength),E=parseFloat(a.roomWidth),N=((F+E)*2).toFixed(1),j=Math.max(2,Math.ceil(N/12));let $=0;if(a.hasCounters&&a.counterLength){const C=parseFloat(a.counterLength);$=Math.max(2,Math.ceil(C/2))}const V=j+$,B=Math.ceil(V/8),X=Math.ceil(V/10),se={roomLength:`${a.roomLength} feet`,roomWidth:`${a.roomWidth} feet`,roomPerimeter:`${N} feet`};a.hasCounters&&a.counterLength&&(se.counterLength=`${a.counterLength} feet`);const U={wallReceptacles:`${j} receptacles`,totalReceptacles:`${V} receptacles`,circuits15A:`${B} circuits (15A)`,circuits20A:`${X} circuits (20A)`};$>0&&(U.counterReceptacles=`${$} receptacles`),v={calculatorName:"Receptacle Calculator - General Room",inputs:se,results:U,additionalInfo:{spacing:"One receptacle every 12 feet of wall space",rule:"No point along wall more than 6 feet from receptacle",counterRule:$>0?"Counter receptacles: one every 24 inches":null},necReferences:["NEC 210.52(A) - General Provisions","Receptacle within 6 ft of doorway, then every 12 ft","No point along wall more than 6 ft from receptacle","Conservative: 8 receptacles per 15A circuit, 10 per 20A circuit"]}}else if(n==="kitchen"){if(!u.counterLength){alert("Please enter counter length before exporting");return}const F=parseFloat(u.counterLength),E=parseFloat(u.islandLength)||0,N=Math.max(2,Math.ceil(F/2)),j=E>=2?Math.max(1,Math.ceil(E/4)):0,$=N+j,V=2,B=$;let X=0;const se=[];u.dishwasher&&(X++,se.push("Dishwasher (15A/20A)")),u.disposer&&(X++,se.push("Garbage Disposer (15A/20A)")),u.microwave&&(X++,se.push("Microwave (20A)")),u.range&&(X++,se.push("Range/Cooktop (240V, 40-50A)"));const U={counterLength:`${u.counterLength} feet`};E>0&&(U.islandLength=`${u.islandLength} feet`),se.length>0&&(U.dedicatedAppliances=se.join(", "));const C={counterReceptacles:`${N} receptacles`,totalReceptacles:`${$} receptacles`,smallApplianceCircuits:`${V} circuits (20A each)`,gfciRequired:`${B} GFCI-protected receptacles`};j>0&&(C.islandReceptacles=`${j} receptacles`),X>0&&(C.dedicatedCircuits=`${X} dedicated circuits`),v={calculatorName:"Receptacle Calculator - Kitchen",inputs:U,results:C,additionalInfo:{counterSpacing:"One receptacle every 24 inches of counter space",islandRequirement:'Island receptacles required if island ≥ 24" long × 12" wide',gfciNote:"All countertop receptacles require GFCI protection"},necReferences:["NEC 210.52(C) - Countertops","NEC 210.11(C)(1) - Min. 2 small appliance circuits (20A)","NEC 210.8(A) - GFCI protection required for all countertop receptacles",'Island receptacles required if ≥ 24" long × 12" wide']}}else if(n==="bathroom"){const F=parseInt(h.numBasins)||1,E=h.hasTub;let N=Math.max(1,F);E&&(N=Math.max(N,2));const j=h.sharedCircuit?1:F>=2?2:1,$=N,B={numberOfBasins:F===1?"1 Basin":F===2?"2 Basins (Double Vanity)":"3+ Basins",hasTubShower:E?"Yes":"No",sharedCircuit:h.sharedCircuit?"Yes (shared with other bathrooms)":"No (dedicated)"},X={receptaclesNeeded:`${N} receptacles`,dedicatedCircuits:`${j} circuits (20A)`,gfciRequired:`${$} GFCI-protected receptacles`};v={calculatorName:"Receptacle Calculator - Bathroom",inputs:B,results:X,additionalInfo:{spacing:"At least one receptacle within 3 feet of each basin",installation:"Install at least 12 inches above countertop",accessibility:"Receptacles must be readily accessible (not behind toilet)",gfciNote:"All bathroom receptacles require GFCI protection"},necReferences:["NEC 210.52(D) - Min. 1 receptacle within 3 ft of basin","NEC 210.11(C)(3) - Min. 1 dedicated 20A circuit for bathroom receptacles","NEC 210.8(A) - All bathroom receptacles require GFCI protection","One 20A circuit can serve receptacles in multiple bathrooms"]}}pn(v)}}));const A={general:i.jsx(_E,{generalData:a,setGeneralData:c,colors:b}),kitchen:i.jsx(TE,{kitchenData:u,setKitchenData:f,colors:b}),bathroom:i.jsx(AE,{bathroomData:h,setBathroomData:g,colors:b})};return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"general",label:"General Room"},{id:"kitchen",label:"Kitchen"},{id:"bathroom",label:"Bathroom"}].map(v=>i.jsx("button",{onClick:()=>o(v.id),style:{flex:"1 1 auto",minWidth:"100px",padding:"0.625rem 1rem",background:n===v.id?"#3b82f6":b.sectionBg,color:n===v.id?"white":b.labelText,border:`1px solid ${n===v.id?"#3b82f6":b.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:v.label},v.id))}),i.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:A[n]})]})});function kE({onNavigate:r,currentView:e,isDarkMode:t=!1}){const n={bg:t?"#000000":"#ffffff",border:t?"#1a1a1a":"#e5e7eb",activeText:"#3b82f6",inactiveText:t?"#666666":"#6b7280"},o=c=>({background:"transparent",border:"0",borderWidth:"0",outline:"none",boxShadow:"none",color:c?n.activeText:n.inactiveText,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.625rem",fontWeight:"500",flex:"1 1 0",padding:"0.5rem 0.25rem",margin:0,transition:"color 0.2s",WebkitTapHighlightColor:"transparent",WebkitAppearance:"none",MozAppearance:"none",appearance:"none",minWidth:"0"}),a={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",textAlign:"center",lineHeight:"1",marginTop:"0.125rem"};return i.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,width:"100%",background:n.bg,borderTop:`1px solid ${n.border}`,display:"flex",justifyContent:"space-between",alignItems:"stretch",padding:"0.25rem 0.5rem",paddingBottom:"calc(0.25rem + env(safe-area-inset-bottom))",margin:0,zIndex:1e4,minHeight:"60px",boxSizing:"border-box"},children:[i.jsxs("button",{onClick:()=>r("home"),style:o(e==="home"),children:[i.jsx(sx,{size:22,strokeWidth:e==="home"?2.5:2}),i.jsx("span",{style:a,children:"Home"})]}),i.jsxs("button",{onClick:()=>r("calculators"),style:o(e==="calculators"),children:[i.jsx(Kd,{size:22,strokeWidth:e==="calculators"?2.5:2}),i.jsx("span",{style:a,children:"Calculators"})]}),i.jsxs("button",{onClick:()=>r("jobs"),style:o(e==="jobs"),children:[i.jsx(ap,{size:22,strokeWidth:e==="jobs"?2.5:2}),i.jsx("span",{style:a,children:"Jobs"})]}),i.jsxs("button",{onClick:()=>r("estimates"),style:o(e==="estimates"),children:[i.jsx(q0,{size:22,strokeWidth:e==="estimates"?2.5:2}),i.jsx("span",{style:a,children:"Estimates"})]}),i.jsxs("button",{onClick:()=>r("profile"),style:o(e==="profile"),children:[i.jsx(Of,{size:22,strokeWidth:e==="profile"?2.5:2}),i.jsx("span",{style:a,children:"Profile"})]})]})}const jE=be.forwardRef(({isDarkMode:r,onBack:e},t)=>{const[n,o]=be.useState(""),[a,c]=be.useState("460"),[u,f]=be.useState("3"),[h,g]=be.useState("normal"),[b,A]=be.useState("0"),[v,F]=be.useState("40"),[E,N]=be.useState("variable"),j={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},V=((W,le,ve)=>{if(!W||!le)return 0;const de=parseFloat(W),ce=parseFloat(le);return ve==="3"?de*746/(ce*1.732*.85*.9):de*746/(ce*.85*.9)})(n,a,u),B=W=>{const le=parseFloat(W);return le<=3300?1:le<=5e3?.95:le<=6600?.9:le<=8200?.85:.8},X=W=>{const le=parseFloat(W);return le<=40?1:le<=45?.97:le<=50?.94:.91},se=W=>{switch(W){case"heavy":return 1.25;case"normal":return 1.15;case"light":return 1.1;default:return 1.15}},U=B(b),C=X(v),w=se(h),O=V*w/(U*C),S=[{amps:2,hp460V:1,hp230V:.5},{amps:3,hp460V:1.5,hp230V:1},{amps:5,hp460V:2,hp230V:1.5},{amps:7,hp460V:3,hp230V:2},{amps:10,hp460V:5,hp230V:3},{amps:14,hp460V:7.5,hp230V:5},{amps:18,hp460V:10,hp230V:7.5},{amps:24,hp460V:15,hp230V:10},{amps:31,hp460V:20,hp230V:15},{amps:40,hp460V:25,hp230V:20},{amps:52,hp460V:30,hp230V:25},{amps:62,hp460V:40,hp230V:30},{amps:77,hp460V:50,hp230V:40},{amps:96,hp460V:60,hp230V:50},{amps:124,hp460V:75,hp230V:60},{amps:156,hp460V:100,hp230V:75},{amps:180,hp460V:125,hp230V:100},{amps:240,hp460V:150,hp230V:125},{amps:302,hp460V:200,hp230V:150}].find(W=>W.amps>=O),z=U<1||C<1||h==="heavy";return be.useImperativeHandle(t,()=>({exportPDF:()=>{if(!n){alert("Please enter motor horsepower before exporting to PDF");return}const W=E==="variable"?"Variable Torque (Fans, Pumps)":E==="constant"?"Constant Torque (Conveyors)":"High Starting Torque",le=h==="light"?"Light Duty (Intermittent)":h==="normal"?"Normal Duty":"Heavy Duty (Continuous)",ve={calculatorName:"VFD Sizing Calculator",inputs:{"Motor Horsepower":`${n} HP`,Voltage:`${a}V`,Phases:u==="1"?"Single Phase":"Three Phase","Load Type":W,"Duty Cycle":le,Altitude:`${b} feet`,"Ambient Temperature":`${v}°C`},results:{"Motor Full Load Amperes (FLA)":`${V.toFixed(1)} A`,"Required VFD Current":`${O.toFixed(1)} A`,"Recommended VFD Rating":S?`${S.amps} A`:"N/A","VFD Motor HP (460V)":S?`${S.hp460V} HP`:"N/A","VFD Motor HP (230V)":S?`${S.hp230V} HP`:"N/A","Safety Margin":S?`${((S.amps/O-1)*100).toFixed(0)}%`:"N/A"},additionalInfo:{"Altitude Derating Factor":`${(U*100).toFixed(0)}%`,"Temperature Derating Factor":`${(C*100).toFixed(0)}%`,"Duty Cycle Factor":`${(w*100).toFixed(0)}%`,"Calculation Method":u==="3"?"Three Phase: (HP × 746) ÷ (V × 1.732 × 0.85 × 0.9)":"Single Phase: (HP × 746) ÷ (V × 0.85 × 0.9)","Required VFD Current Formula":"Motor FLA × Duty Cycle Factor ÷ (Altitude Factor × Temperature Factor)"},necReferences:["NEC Article 430 - Motors, Motor Circuits, and Controllers","NEC 430.122 - Rating of Motor Control Circuit Overcurrent Protective Device","Always follow VFD manufacturer specifications","Use shielded cables for motor connections to reduce EMI","Install line and load reactors when recommended by manufacturer","Ensure proper grounding and bonding per NEC Article 250","Consider bypass contactor for critical applications","Verify VFD voltage matches motor nameplate voltage","Consider harmonic filtering for sensitive equipment","Ensure adequate cooling and ventilation for VFD enclosure",U<1?`WARNING: High altitude derating applied (${(U*100).toFixed(0)}%)`:"",C<1?`WARNING: High temperature derating applied (${(C*100).toFixed(0)}%)`:"",h==="heavy"?"WARNING: Heavy duty cycle requires oversizing for continuous operation":""].filter(de=>de!=="")};pn(ve)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${j.cardBorder}`,paddingBottom:"0.5rem"},children:"Motor Information"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Motor Horsepower (HP)"}),i.jsx("input",{type:"number",value:n,onChange:W=>o(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},placeholder:"Enter HP",step:"0.5"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Voltage (V)"}),i.jsxs("select",{value:a,onChange:W=>c(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"230",children:"230V"}),i.jsx("option",{value:"460",children:"460V"}),i.jsx("option",{value:"575",children:"575V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Phases"}),i.jsxs("select",{value:u,onChange:W=>f(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"1",children:"Single Phase"}),i.jsx("option",{value:"3",children:"Three Phase"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Load Type"}),i.jsxs("select",{value:E,onChange:W=>N(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"variable",children:"Variable Torque (Fans, Pumps)"}),i.jsx("option",{value:"constant",children:"Constant Torque (Conveyors)"}),i.jsx("option",{value:"highTorque",children:"High Starting Torque"})]})]})]})]}),i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${j.cardBorder}`,paddingBottom:"0.5rem"},children:"Environmental Conditions"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Duty Cycle"}),i.jsxs("select",{value:h,onChange:W=>g(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"light",children:"Light Duty (Intermittent)"}),i.jsx("option",{value:"normal",children:"Normal Duty"}),i.jsx("option",{value:"heavy",children:"Heavy Duty (Continuous)"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Altitude (feet)"}),i.jsx("input",{type:"number",value:b,onChange:W=>A(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},placeholder:"0",step:"100"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Ambient Temp (°C)"}),i.jsx("input",{type:"number",value:v,onChange:W=>F(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},placeholder:"40"})]})]}),i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${j.cardBorder}`},children:[i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"0.75rem"},children:"Derating Factors"}),i.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:j.labelText},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Altitude Factor:"}),i.jsxs("span",{style:{fontWeight:"600",color:j.cardText},children:[(U*100).toFixed(0),"%"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Temperature Factor:"}),i.jsxs("span",{style:{fontWeight:"600",color:j.cardText},children:[(C*100).toFixed(0),"%"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Duty Cycle Factor:"}),i.jsxs("span",{style:{fontWeight:"600",color:j.cardText},children:[(w*100).toFixed(0),"%"]})]})]})]})]})]}),n&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Motor FLA"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:V.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Required VFD Current"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:O.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Recommended VFD"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:S?S.amps:"N/A"}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),S&&i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${j.cardBorder}`},children:[i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"0.75rem"},children:"VFD Specifications"}),i.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:j.labelText},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Current Rating:"}),i.jsxs("span",{style:{fontWeight:"600",color:j.cardText},children:[S.amps," Amperes"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Motor HP (460V):"}),i.jsxs("span",{style:{fontWeight:"600",color:j.cardText},children:[S.hp460V," HP"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Motor HP (230V):"}),i.jsxs("span",{style:{fontWeight:"600",color:j.cardText},children:[S.hp230V," HP"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"0.5rem",borderTop:`1px solid ${j.cardBorder}`,marginTop:"0.25rem"},children:[i.jsx("span",{children:"Safety Margin:"}),i.jsxs("span",{style:{fontWeight:"600",color:"#059669"},children:[((S.amps/O-1)*100).toFixed(0),"%"]})]})]})]})]}),S&&!z&&i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"VFD Selection Complete"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Selected VFD meets all requirements with adequate safety margin for reliable operation."})]})]})}),z&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(lp,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{lineHeight:"1.5"},children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"600",color:"#78350f",marginBottom:"0.5rem"},children:"Important Considerations"}),i.jsxs("ul",{style:{fontSize:"0.8125rem",color:"#92400e",margin:0,paddingLeft:"1.25rem"},children:[U<1&&i.jsxs("li",{style:{marginBottom:"0.25rem"},children:["High altitude installation requires derating (",(U*100).toFixed(0),"% of rated capacity)"]}),C<1&&i.jsxs("li",{style:{marginBottom:"0.25rem"},children:["High ambient temperature requires derating (",(C*100).toFixed(0),"% of rated capacity)"]}),h==="heavy"&&i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Heavy duty cycle applications require oversizing for continuous operation"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Verify VFD voltage matches motor nameplate voltage"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider harmonic filtering for sensitive equipment"}),i.jsx("li",{children:"Ensure adequate cooling and ventilation"})]})]})]})})]}),i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${j.cardBorder}`,fontSize:"0.8125rem",color:j.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:j.cardText},children:"VFD Installation Notes:"}),"Always follow manufacturer specifications • Use shielded cables for motor connections • Install line and load reactors when recommended • Ensure proper grounding and bonding • Consider bypass contactor for critical applications"]})]})}),EE=be.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=be.useState("inductive"),[o,a]=be.useState("60"),[c,u]=be.useState(""),[f,h]=be.useState("mH"),[g,b]=be.useState("60"),[A,v]=be.useState(""),[F,E]=be.useState("μF"),[N,j]=be.useState(""),[$,V]=be.useState(""),[B,X]=be.useState("inductive"),[se,U]=be.useState(""),[C,w]=be.useState("mH"),[O,P]=be.useState(""),[S,z]=be.useState("μF"),W={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},le=()=>{if(!o||!c)return null;const Y=parseFloat(o);let re=parseFloat(c);return f==="mH"?re=re/1e3:f==="μH"&&(re=re/1e6),{reactance:(2*Math.PI*Y*re).toFixed(2),frequency:Y,inductance:c,unit:f}},ve=()=>{if(!g||!A)return null;const Y=parseFloat(g);let re=parseFloat(A);return F==="μF"?re=re/1e6:F==="nF"?re=re/1e9:F==="pF"&&(re=re/1e12),{reactance:(1/(2*Math.PI*Y*re)).toFixed(2),frequency:Y,capacitance:A,unit:F}},de=()=>{if(!N||!$)return null;const Y=parseFloat(N),re=parseFloat($),ue=Math.sqrt(Y*Y+re*re),fe=Math.atan2(re,Y)*(180/Math.PI);return{impedance:ue.toFixed(2),angle:fe.toFixed(2),resistance:Y,reactance:re,type:B}},ce=()=>{if(!se||!O)return null;let Y=parseFloat(se),re=parseFloat(O);return C==="mH"?Y=Y/1e3:C==="μH"&&(Y=Y/1e6),S==="μF"?re=re/1e6:S==="nF"?re=re/1e9:S==="pF"&&(re=re/1e12),{frequency:(1/(2*Math.PI*Math.sqrt(Y*re))).toFixed(2),inductance:se,inductanceUnit:C,capacitance:O,capacitanceUnit:S}},we=le(),je=ve(),ne=de(),D=ce();return be.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="inductive"){if(!o||!c){alert("Please enter all required values before exporting to PDF");return}const Y={calculatorName:"Reactance & Impedance - Inductive Reactance (XL)",inputs:{Frequency:`${o} Hz`,Inductance:`${c} ${f}`},results:{"Inductive Reactance (XL)":`${we.reactance} Ω`},additionalInfo:{Formula:"XL = 2πfL",Description:"Inductive reactance increases with frequency and opposes changes in current flow"},necReferences:["Inductive reactance is directly proportional to frequency","In AC circuits, inductors oppose current changes","XL increases linearly with both frequency and inductance"]};pn(Y)}else if(t==="capacitive"){if(!g||!A){alert("Please enter all required values before exporting to PDF");return}const Y={calculatorName:"Reactance & Impedance - Capacitive Reactance (XC)",inputs:{Frequency:`${g} Hz`,Capacitance:`${A} ${F}`},results:{"Capacitive Reactance (XC)":`${je.reactance} Ω`},additionalInfo:{Formula:"XC = 1 / (2πfC)",Description:"Capacitive reactance decreases with frequency and opposes changes in voltage"},necReferences:["Capacitive reactance is inversely proportional to frequency","In AC circuits, capacitors oppose voltage changes","XC decreases as frequency or capacitance increases"]};pn(Y)}else if(t==="impedance"){if(!N||!$){alert("Please enter all required values before exporting to PDF");return}const Y={calculatorName:"Reactance & Impedance - Impedance Calculator",inputs:{"Reactance Type":B.charAt(0).toUpperCase()+B.slice(1),"Resistance (R)":`${N} Ω`,"Reactance (X)":`${$} Ω`},results:{"Impedance (Z)":`${ne.impedance} Ω`,"Phase Angle (θ)":`${ne.angle}°`,"Phase Relationship":B==="inductive"?"Leading":"Lagging"},additionalInfo:{"Impedance Formula":"Z = √(R² + X²)","Phase Angle Formula":"θ = arctan(X / R)",Description:"Impedance is the total opposition to current flow in an AC circuit, combining resistance and reactance"},necReferences:["Impedance combines resistive and reactive components","Phase angle indicates the relationship between voltage and current","In inductive circuits, current lags voltage; in capacitive circuits, current leads voltage"]};pn(Y)}else if(t==="resonance"){if(!se||!O){alert("Please enter all required values before exporting to PDF");return}const Y={calculatorName:"Reactance & Impedance - Resonant Frequency",inputs:{Inductance:`${se} ${C}`,Capacitance:`${O} ${S}`},results:{"Resonant Frequency (fr)":`${D.frequency} Hz`},additionalInfo:{Formula:"fr = 1 / (2π√LC)","At Resonance":"Inductive and capacitive reactances are equal and opposite (XL = XC)","Series Circuit":"Minimum impedance at resonance","Parallel Circuit":"Maximum impedance at resonance"},necReferences:["Resonance occurs when XL = XC","At resonant frequency, circuit is purely resistive","Series resonant circuits have minimum impedance","Parallel resonant circuits have maximum impedance"]};pn(Y)}}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:W.cardBg,border:`1px solid ${W.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsxs("button",{onClick:()=>n("inductive"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="inductive"?"#3b82f6":"transparent",color:t==="inductive"?"white":W.labelText,border:`1px solid ${t==="inductive"?"#3b82f6":W.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:["Inductive (X",i.jsx("sub",{children:"L"}),")"]}),i.jsxs("button",{onClick:()=>n("capacitive"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="capacitive"?"#3b82f6":"transparent",color:t==="capacitive"?"white":W.labelText,border:`1px solid ${t==="capacitive"?"#3b82f6":W.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:["Capacitive (X",i.jsx("sub",{children:"C"}),")"]}),i.jsx("button",{onClick:()=>n("impedance"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="impedance"?"#3b82f6":"transparent",color:t==="impedance"?"white":W.labelText,border:`1px solid ${t==="impedance"?"#3b82f6":W.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Impedance (Z)"}),i.jsx("button",{onClick:()=>n("resonance"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="resonance"?"#3b82f6":"transparent",color:t==="resonance"?"white":W.labelText,border:`1px solid ${t==="resonance"?"#3b82f6":W.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Resonance"})]})}),t==="inductive"&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:W.cardBg,border:`1px solid ${W.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:W.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${W.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:W.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),i.jsx("input",{type:"number",value:o,onChange:Y=>a(Y.target.value),placeholder:"60",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:W.subtleText,marginTop:"0.25rem"},children:"Common: 50 Hz or 60 Hz"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:W.labelText,marginBottom:"0.5rem"},children:"Inductance"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[i.jsx("input",{type:"number",value:c,onChange:Y=>u(Y.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"}}),i.jsxs("select",{value:f,onChange:Y=>h(Y.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"H",children:"H"}),i.jsx("option",{value:"mH",children:"mH"}),i.jsx("option",{value:"μH",children:"μH"})]})]})]})]})]}),we&&i.jsx("div",{children:i.jsxs("div",{style:{background:W.cardBg,border:`1px solid ${W.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:W.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Inductive Reactance (X",i.jsx("sub",{children:"L"}),")"]}),i.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:we.reactance}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms (Ω)"})]}),i.jsxs("div",{style:{background:W.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${W.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:W.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:W.cardText},children:"Circuit Values:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:W.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Frequency: ",we.frequency," Hz"]}),i.jsxs("div",{children:["Inductance: ",we.inductance," ",we.unit]}),i.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:W.subtleText},children:["Formula: X",i.jsx("sub",{children:"L"})," = 2πfL"]})]})]})]})})]}),t==="capacitive"&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:W.cardBg,border:`1px solid ${W.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:W.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${W.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:W.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),i.jsx("input",{type:"number",value:g,onChange:Y=>b(Y.target.value),placeholder:"60",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:W.subtleText,marginTop:"0.25rem"},children:"Common: 50 Hz or 60 Hz"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:W.labelText,marginBottom:"0.5rem"},children:"Capacitance"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[i.jsx("input",{type:"number",value:A,onChange:Y=>v(Y.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"}}),i.jsxs("select",{value:F,onChange:Y=>E(Y.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"μF",children:"μF"}),i.jsx("option",{value:"nF",children:"nF"}),i.jsx("option",{value:"pF",children:"pF"})]})]})]})]})]}),je&&i.jsx("div",{children:i.jsxs("div",{style:{background:W.cardBg,border:`1px solid ${W.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:W.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Capacitive Reactance (X",i.jsx("sub",{children:"C"}),")"]}),i.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:je.reactance}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms (Ω)"})]}),i.jsxs("div",{style:{background:W.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${W.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:W.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:W.cardText},children:"Circuit Values:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:W.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Frequency: ",je.frequency," Hz"]}),i.jsxs("div",{children:["Capacitance: ",je.capacitance," ",je.unit]}),i.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:W.subtleText},children:["Formula: X",i.jsx("sub",{children:"C"})," = 1 / (2πfC)"]})]})]})]})})]}),t==="impedance"&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:W.cardBg,border:`1px solid ${W.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:W.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${W.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:W.labelText,marginBottom:"0.5rem"},children:"Reactance Type"}),i.jsxs("select",{value:B,onChange:Y=>X(Y.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"},children:[i.jsxs("option",{value:"inductive",children:["Inductive (X",i.jsx("sub",{children:"L"}),")"]}),i.jsxs("option",{value:"capacitive",children:["Capacitive (X",i.jsx("sub",{children:"C"}),")"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:W.labelText,marginBottom:"0.5rem"},children:"Resistance (R) in Ohms"}),i.jsx("input",{type:"number",value:N,onChange:Y=>j(Y.target.value),placeholder:"Enter resistance",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:W.labelText,marginBottom:"0.5rem"},children:"Reactance (X) in Ohms"}),i.jsx("input",{type:"number",value:$,onChange:Y=>V(Y.target.value),placeholder:"Enter reactance",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"}})]})]})]}),ne&&i.jsx("div",{children:i.jsxs("div",{style:{background:W.cardBg,border:`1px solid ${W.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:W.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Impedance (Z)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:ne.impedance}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms (Ω)"})]}),i.jsxs("div",{style:{background:W.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:W.labelText,marginBottom:"0.25rem"},children:"Phase Angle (θ)"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:W.cardText},children:[ne.angle,"°"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:W.labelText,marginTop:"0.25rem"},children:B==="inductive"?"Leading":"Lagging"})]})]}),i.jsxs("div",{style:{background:W.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${W.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:W.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:W.cardText},children:"Circuit Values:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:W.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Resistance (R): ",ne.resistance," Ω"]}),i.jsxs("div",{children:["Reactance (X): ",ne.reactance," Ω (",ne.type,")"]}),i.jsx("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:W.subtleText},children:"Formula: Z = √(R² + X²)"}),i.jsx("div",{style:{fontStyle:"italic",color:W.subtleText},children:"Phase Angle: θ = arctan(X / R)"})]})]})]})})]}),t==="resonance"&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:W.cardBg,border:`1px solid ${W.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:W.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${W.cardBorder}`,paddingBottom:"0.5rem"},children:"LC Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:W.labelText,marginBottom:"0.5rem"},children:"Inductance"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[i.jsx("input",{type:"number",value:se,onChange:Y=>U(Y.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"}}),i.jsxs("select",{value:C,onChange:Y=>w(Y.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"H",children:"H"}),i.jsx("option",{value:"mH",children:"mH"}),i.jsx("option",{value:"μH",children:"μH"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:W.labelText,marginBottom:"0.5rem"},children:"Capacitance"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[i.jsx("input",{type:"number",value:O,onChange:Y=>P(Y.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"}}),i.jsxs("select",{value:S,onChange:Y=>z(Y.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"μF",children:"μF"}),i.jsx("option",{value:"nF",children:"nF"}),i.jsx("option",{value:"pF",children:"pF"})]})]})]})]})]}),D&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:W.cardBg,border:`1px solid ${W.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:W.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Resonant Frequency (f",i.jsx("sub",{children:"r"}),")"]}),i.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:D.frequency}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Hertz (Hz)"})]}),i.jsxs("div",{style:{background:W.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${W.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:W.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:W.cardText},children:"Circuit Values:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:W.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Inductance: ",D.inductance," ",D.inductanceUnit]}),i.jsxs("div",{children:["Capacitance: ",D.capacitance," ",D.capacitanceUnit]}),i.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:W.subtleText},children:["Formula: f",i.jsx("sub",{children:"r"})," = 1 / (2π√LC)"]})]})]})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"About Resonant Frequency:"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"At resonance, inductive and capacitive reactances are equal and opposite, resulting in minimum impedance in series circuits and maximum impedance in parallel circuits."})]})]})})]})]}),i.jsxs("div",{style:{background:W.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${W.cardBorder}`,fontSize:"0.8125rem",color:W.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:W.cardText},children:"Key Concepts:"}),"X",i.jsx("sub",{children:"L"})," increases with frequency • X",i.jsx("sub",{children:"C"})," decreases with frequency • At resonance X",i.jsx("sub",{children:"L"})," = X",i.jsx("sub",{children:"C"})," • Impedance combines resistance and reactance"]})]})}),IE=be.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=be.useState("correction"),[o,a]=be.useState(""),[c,u]=be.useState("480"),[f,h]=be.useState(""),[g,b]=be.useState("0.95"),[A,v]=be.useState("60"),[F,E]=be.useState(""),[N,j]=be.useState(""),[$,V]=be.useState("0.95"),[B,X]=be.useState(""),[se,U]=be.useState(""),[C,w]=be.useState("8760"),[O,P]=be.useState(""),S={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},z=()=>{if(!o||!f)return null;const de=parseFloat(o),ce=parseFloat(f),we=parseFloat(g),je=parseFloat(c),ne=parseFloat(A),D=Math.acos(ce),Y=Math.acos(we),re=de*Math.tan(D),ue=de*Math.tan(Y),Se=re-ue,Ee=Se*1e9/(2*Math.PI*ne*je*je),ke=de/ce,Oe=de/we,Ke=ke*1e3/(Math.sqrt(3)*je),nt=Oe*1e3/(Math.sqrt(3)*je),_e=(Ke-nt)/Ke*100;return{kVAR:Se.toFixed(2),capacitance:Ee.toFixed(2),existingApparentPower:ke.toFixed(2),correctedApparentPower:Oe.toFixed(2),powerReduction:((ke-Oe)/ke*100).toFixed(1),existingCurrent:Ke.toFixed(2),correctedCurrent:nt.toFixed(2),currentReduction:_e.toFixed(1),existingPF:(ce*100).toFixed(1),targetPF:(we*100).toFixed(1)}},W=()=>{if(!F||!N||!B)return null;const de=parseFloat(F),ce=parseFloat(N),we=parseFloat($),je=parseFloat(B),ne=parseFloat(se)||0,D=parseFloat(C),Y=parseFloat(O)||0,re=de/ce,ue=de/we,fe=re-ue,Se=fe*je,ke=(we-ce)*100*.01,Oe=de*D*(ke/100)*ne,Ke=Y*12,nt=Se*12,_e=nt+Oe+Ke,pe=Math.acos(ce),Q=Math.acos(we),Je=de*(Math.tan(pe)-Math.tan(Q)),Ue=Je*75,tt=_e>0?Ue/_e*12:0;return{kVAReduction:fe.toFixed(2),monthlyDemandSavings:Se.toFixed(2),annualDemandSavings:nt.toFixed(2),annualEnergySavings:Oe.toFixed(2),annualPenaltySavings:Ke.toFixed(2),totalAnnualSavings:_e.toFixed(2),kVARRequired:Je.toFixed(2),estimatedCost:Ue.toFixed(2),paybackMonths:tt.toFixed(1),paybackYears:(tt/12).toFixed(1),fiveYearSavings:(_e*5-Ue).toFixed(2)}},le=z(),ve=W();return be.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="correction"){if(!o||!f){alert("Please enter all required values before exporting to PDF");return}const de={calculatorName:"Power Factor Correction - Capacitor Sizing",inputs:{"Real Power":`${o} kW`,"System Voltage":`${c}V`,"Existing Power Factor":f,"Target Power Factor":g,Frequency:`${A} Hz`},results:{"Required Capacitor Size":`${le.kVAR} kVAR`,"Capacitance per Phase":`${le.capacitance} μF`,"Power Factor Before":`${le.existingPF}%`,"Power Factor After":`${le.targetPF}%`,"Apparent Power Before":`${le.existingApparentPower} kVA`,"Apparent Power After":`${le.correctedApparentPower} kVA`,"Apparent Power Reduction":`${le.powerReduction}%`,"Line Current Before":`${le.existingCurrent} A`,"Line Current After":`${le.correctedCurrent} A`,"Current Reduction":`${le.currentReduction}%`},additionalInfo:{Benefits:"Power factor correction reduces utility demand charges, lowers line losses and voltage drop, increases system capacity, reduces equipment heating, and improves voltage regulation."},necReferences:["NEC Article 460 - Capacitors","NEC 460.8 - Conductors supplying capacitors shall have an ampacity of not less than 135% of the rated current of the capacitor","NEC 460.9 - Rating or Setting of Motor Overload Device"]};pn(de)}else if(t==="savings"){if(!F||!N||!B){alert("Please enter all required values before exporting to PDF");return}const de={calculatorName:"Power Factor Correction - Cost Savings Analysis",inputs:{"Real Power":`${F} kW`,"Operating Hours per Year":C,"Existing Power Factor":N,"Target Power Factor":$,"Demand Charge":`$${B}/kVA/month`,"Energy Rate":se?`$${se}/kWh`:"Not specified","Monthly PF Penalty":O?`$${O}/month`:"None"},results:{"Total Annual Savings":`$${ve.totalAnnualSavings}/year`,"Monthly Demand Savings":`$${ve.monthlyDemandSavings}/month`,"Annual Demand Savings":`$${ve.annualDemandSavings}/year`,"Annual Energy Savings":`$${ve.annualEnergySavings}/year`,"Annual Penalty Savings":`$${ve.annualPenaltySavings}/year`,"kVA Reduction":`${ve.kVAReduction} kVA`,"Required Capacitor Size":`${ve.kVARRequired} kVAR`,"Estimated Equipment Cost":`$${ve.estimatedCost}`,"Payback Period":`${ve.paybackMonths} months (${ve.paybackYears} years)`,"5-Year Net Savings":`$${ve.fiveYearSavings}`},additionalInfo:{"Cost Basis":"Estimated at $75 per kVAR installed","Savings Note":"Actual costs and savings may vary based on equipment selection, installation costs, utility rate structures, and load profiles"},necReferences:["NEC Article 460 - Capacitors","NEC 460.8 - Conductors supplying capacitors shall have an ampacity of not less than 135% of the rated current of the capacitor","IEEE Std 18-2012 - Standard for Shunt Power Capacitors"]};pn(de)}}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:S.cardBg,border:`1px solid ${S.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>n("correction"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="correction"?"#3b82f6":"transparent",color:t==="correction"?"white":S.labelText,border:`1px solid ${t==="correction"?"#3b82f6":S.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Capacitor Sizing"}),i.jsx("button",{onClick:()=>n("savings"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="savings"?"#3b82f6":"transparent",color:t==="savings"?"white":S.labelText,border:`1px solid ${t==="savings"?"#3b82f6":S.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Cost Savings"})]})}),t==="correction"?i.jsxs("div",{children:[i.jsxs("div",{style:{background:S.cardBg,border:`1px solid ${S.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:S.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${S.cardBorder}`,paddingBottom:"0.5rem"},children:"System Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Real Power (kW)"}),i.jsx("input",{type:"number",value:o,onChange:de=>a(de.target.value),placeholder:"Enter load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"System Voltage (V)"}),i.jsxs("select",{value:c,onChange:de=>u(de.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Existing Power Factor"}),i.jsx("input",{type:"number",value:f,onChange:de=>h(de.target.value),placeholder:"0.70 - 0.99",step:"0.01",min:"0.5",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:S.subtleText,marginTop:"0.25rem"},children:"Current (uncorrected)"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:["Target Power  ",i.jsx("br",{}),"Factor ",i.jsx("br",{})]}),i.jsxs("select",{value:g,onChange:de=>b(de.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"0.90",children:"0.90 (90%)"}),i.jsx("option",{value:"0.95",children:"0.95 (95%) - Recommended"}),i.jsx("option",{value:"0.98",children:"0.98 (98%)"}),i.jsx("option",{value:"0.99",children:"0.99 (99%)"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),i.jsxs("select",{value:A,onChange:de=>v(de.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"50",children:"50 Hz"}),i.jsx("option",{value:"60",children:"60 Hz"})]})]})]})]}),le&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:S.cardBg,border:`1px solid ${S.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:S.cardText,marginTop:0,marginBottom:"1rem"},children:"Required Capacitor Bank"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Capacitor Size"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:le.kVAR}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"kVAR"})]}),i.jsxs("div",{style:{background:S.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:S.labelText,marginBottom:"0.25rem"},children:"Capacitance"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:S.cardText},children:le.capacitance}),i.jsx("div",{style:{fontSize:"0.75rem",color:S.labelText,marginTop:"0.25rem"},children:"μF per phase"})]})]}),i.jsxs("div",{style:{background:S.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${S.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:S.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:S.cardText},children:"Power Factor Improvement:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:S.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["From: ",le.existingPF,"% → To: ",le.targetPF,"%"]}),i.jsxs("div",{children:["Real Power: ",o," kW (constant)"]}),i.jsxs("div",{children:["System Voltage: ",c,"V, ",A," Hz"]})]})]})]}),i.jsxs("div",{style:{background:S.cardBg,border:`1px solid ${S.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:S.cardText,marginTop:0,marginBottom:"1rem"},children:"System Improvements"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{background:S.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${S.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:S.cardText,marginBottom:"0.5rem"},children:"Apparent Power Reduction"}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:S.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Before: ",le.existingApparentPower," kVA"]}),i.jsxs("div",{children:["After: ",le.correctedApparentPower," kVA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#059669",marginTop:"0.25rem"},children:["Reduction: ",le.powerReduction,"%"]})]})]}),i.jsxs("div",{style:{background:S.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${S.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:S.cardText,marginBottom:"0.5rem"},children:"Line Current Reduction"}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:S.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Before: ",le.existingCurrent," A"]}),i.jsxs("div",{children:["After: ",le.correctedCurrent," A"]}),i.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#059669",marginTop:"0.25rem"},children:["Reduction: ",le.currentReduction,"%"]})]})]})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(I3,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Benefits of Power Factor Correction:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Reduced utility demand charges"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Lower line losses and voltage drop"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Increased system capacity"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Reduced equipment heating"}),i.jsx("li",{children:"Improved voltage regulation"})]})]})]})})]})]}):i.jsxs("div",{children:[i.jsxs("div",{style:{background:S.cardBg,border:`1px solid ${S.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:S.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${S.cardBorder}`,paddingBottom:"0.5rem"},children:"Load & Power Factor"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Real Power (kW)"}),i.jsx("input",{type:"number",value:F,onChange:de=>E(de.target.value),placeholder:"Enter load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Operating Hours/Year"}),i.jsx("input",{type:"number",value:C,onChange:de=>w(de.target.value),placeholder:"8760",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:S.subtleText,marginTop:"0.25rem"},children:"8760 = 24/7 operation"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Existing Power Factor"}),i.jsx("input",{type:"number",value:N,onChange:de=>j(de.target.value),placeholder:"0.70 - 0.99",step:"0.01",min:"0.5",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Target Power Factor"}),i.jsxs("select",{value:$,onChange:de=>V(de.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"0.90",children:"0.90 (90%)"}),i.jsx("option",{value:"0.95",children:"0.95 (95%)"}),i.jsx("option",{value:"0.98",children:"0.98 (98%)"})]})]})]})]})]}),i.jsxs("div",{style:{background:S.cardBg,border:`1px solid ${S.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:S.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${S.cardBorder}`,paddingBottom:"0.5rem"},children:"Utility Rates"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Demand Charge ($/kVA/month)"}),i.jsx("input",{type:"number",value:B,onChange:de=>X(de.target.value),placeholder:"10 - 25",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:S.subtleText,marginTop:"0.25rem"},children:"Check your utility bill"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Energy Rate ($/kWh) - Optional"}),i.jsx("input",{type:"number",value:se,onChange:de=>U(de.target.value),placeholder:"0.08 - 0.15",step:"0.001",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:S.subtleText,marginTop:"0.25rem"},children:"For energy loss savings"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:S.labelText,marginBottom:"0.5rem"},children:"Monthly PF Penalty ($/month) - Optional"}),i.jsx("input",{type:"number",value:O,onChange:de=>P(de.target.value),placeholder:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${S.inputBorder}`,borderRadius:"8px",backgroundColor:S.inputBg,color:S.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:S.subtleText,marginTop:"0.25rem"},children:"If utility charges PF penalty"})]})]})]}),ve&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:S.cardBg,border:`1px solid ${S.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:S.cardText,marginTop:0,marginBottom:"1rem"},children:"Annual Cost Savings"}),i.jsxs("div",{style:{background:"#d1fae5",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"#059669",marginBottom:"0.5rem",fontWeight:"600"},children:"Total Annual Savings"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#059669"},children:["$",ve.totalAnnualSavings]}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#059669",marginTop:"0.25rem"},children:"per year"})]}),i.jsxs("div",{style:{background:S.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${S.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:S.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:S.cardText},children:"Savings Breakdown:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:S.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Demand Charge Savings: $",ve.annualDemandSavings,"/year"]}),parseFloat(ve.annualEnergySavings)>0&&i.jsxs("div",{children:["Energy Loss Savings: $",ve.annualEnergySavings,"/year"]}),parseFloat(ve.annualPenaltySavings)>0&&i.jsxs("div",{children:["Penalty Elimination: $",ve.annualPenaltySavings,"/year"]}),i.jsxs("div",{style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:`1px solid ${S.cardBorder}`},children:["kVA Reduction: ",ve.kVAReduction," kVA"]})]})]})]}),i.jsxs("div",{style:{background:S.cardBg,border:`1px solid ${S.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:S.cardText,marginTop:0,marginBottom:"1rem"},children:"Return on Investment"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:S.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:S.labelText,marginBottom:"0.25rem"},children:"Estimated Cost"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:S.cardText},children:["$",ve.estimatedCost]}),i.jsxs("div",{style:{fontSize:"0.75rem",color:S.labelText,marginTop:"0.25rem"},children:[ve.kVARRequired," kVAR @ $75/kVAR"]})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Payback Period"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:ve.paybackMonths}),i.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:["months (",ve.paybackYears," years)"]})]})]}),i.jsx("div",{style:{background:S.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${S.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:S.labelText,display:"grid",gap:"0.25rem"},children:[i.jsx("div",{children:i.jsx("strong",{style:{color:S.cardText},children:"5-Year Net Savings:"})}),i.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#059669",marginTop:"0.25rem"},children:["$",ve.fiveYearSavings]}),i.jsx("div",{style:{fontSize:"0.8125rem",color:S.subtleText,marginTop:"0.25rem"},children:"Total savings minus initial investment"})]})})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Note:"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Actual costs and savings may vary based on equipment selection, installation costs, utility rate structures, and load profiles. Consult with a qualified electrical engineer for detailed analysis."})]})]})})]})]}),i.jsxs("div",{style:{background:S.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${S.cardBorder}`,fontSize:"0.8125rem",color:S.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:S.cardText},children:"Power Factor Basics:"}),"PF = Real Power (kW) ÷ Apparent Power (kVA) • Low PF causes higher current and utility charges • Target 0.95+ for optimal efficiency • Capacitors supply reactive power locally"]})]})}),RE=be.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=be.useState("from-kw-pf"),[a,c]=be.useState(""),[u,f]=be.useState(""),[h,g]=be.useState(""),[b,A]=be.useState(""),[v,F]=be.useState("lagging"),E={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},j=(()=>{let V=0,B=0,X=0,se=0,U=0;switch(n){case"from-kw-pf":if(!a||!b)return null;V=parseFloat(a),se=parseFloat(b),X=V/se,U=Math.acos(se)*(180/Math.PI),B=X*Math.sin(Math.acos(se)),v==="leading"&&(B=-B);break;case"from-kw-kvar":if(!a||!u)return null;V=parseFloat(a),B=parseFloat(u),v==="leading"&&(B=-Math.abs(B)),X=Math.sqrt(Math.pow(V,2)+Math.pow(B,2)),se=V/X,U=Math.atan(Math.abs(B)/V)*(180/Math.PI);break;case"from-kva-pf":if(!h||!b)return null;X=parseFloat(h),se=parseFloat(b),V=X*se,U=Math.acos(se)*(180/Math.PI),B=X*Math.sin(Math.acos(se)),v==="leading"&&(B=-B);break;case"from-kva-kw":if(!h||!a||(X=parseFloat(h),V=parseFloat(a),V>X))return null;se=V/X,U=Math.acos(se)*(180/Math.PI),B=Math.sqrt(Math.pow(X,2)-Math.pow(V,2)),v==="leading"&&(B=-B);break;default:return null}return{kW:V,kVAR:B,kVA:X,powerFactor:se,angle:U,isLeading:v==="leading"}})(),$=V=>{const B=Math.abs(V);return B>=.95?{quality:"Excellent",color:"#10b981",bg:"#d1fae5",border:"#6ee7b7"}:B>=.9?{quality:"Good",color:"#3b82f6",bg:"#dbeafe",border:"#93c5fd"}:B>=.85?{quality:"Fair",color:"#f59e0b",bg:"#fef3c7",border:"#fcd34d"}:{quality:"Poor",color:"#ef4444",bg:"#fee2e2",border:"#fca5a5"}};return be.useImperativeHandle(t,()=>({exportPDF:()=>{if(!j){alert("Please enter values before exporting to PDF");return}const V=$(j.powerFactor),X={calculatorName:"Power Triangle Calculator",inputs:{calculationMode:{"from-kw-pf":"Real Power (kW) and Power Factor","from-kw-kvar":"Real Power (kW) and Reactive Power (kVAR)","from-kva-pf":"Apparent Power (kVA) and Power Factor","from-kva-kw":"Apparent Power (kVA) and Real Power (kW)"}[n],...a&&{realPower:`${a} kW`},...u&&{reactivePower:`${u} kVAR`},...h&&{apparentPower:`${h} kVA`},...b&&{powerFactor:b},reactiveType:v==="leading"?"Leading (Capacitive)":"Lagging (Inductive)"},results:{realPower:`${j.kW.toFixed(2)} kW`,reactivePower:`${Math.abs(j.kVAR).toFixed(2)} kVAR (${j.isLeading?"Leading":"Lagging"})`,apparentPower:`${j.kVA.toFixed(2)} kVA`,powerFactor:`${j.powerFactor.toFixed(4)} ${j.isLeading?"(Leading)":"(Lagging)"}`,phaseAngle:`${j.angle.toFixed(2)}°`,powerFactorQuality:V.quality},additionalInfo:{powerTriangleRelationship:"kVA² = kW² + kVAR²",powerFactorFormula:"PF = kW ÷ kVA = cos(θ)",reactivePowerFormula:"kVAR = kVA × sin(θ)",phaseAngleFormula:"θ = arccos(PF)",leadingVsLagging:j.isLeading?"Leading PF: Current leads voltage (capacitive loads)":"Lagging PF: Current lags voltage (inductive loads - most common)"},necReferences:["Power Factor: Ratio of real power to apparent power","Leading PF (capacitive): Synchronous motors, over-excited generators, capacitor banks","Lagging PF (inductive): Most common - motors, transformers, inductive loads","Poor power factor results in: Higher current draw, increased losses, utility penalties","Power factor correction: Add capacitors for lagging PF, add inductors for leading PF","Many utilities charge penalties for power factor below 0.90-0.95"]};pn(X)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${E.cardBorder}`,paddingBottom:"0.5rem"},children:"Calculation Mode"}),i.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:[{value:"from-kw-pf",label:"From kW and Power Factor"},{value:"from-kw-kvar",label:"From kW and kVAR"},{value:"from-kva-pf",label:"From kVA and Power Factor"},{value:"from-kva-kw",label:"From kVA and kW"}].map(V=>i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:n===V.value?E.sectionBg:"transparent",border:`1px solid ${n===V.value?"#3b82f6":E.cardBorder}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseOver:B=>{n!==V.value&&(B.currentTarget.style.background=E.sectionBg)},onMouseOut:B=>{n!==V.value&&(B.currentTarget.style.background="transparent")},children:[i.jsx("input",{type:"radio",name:"calculationMode",value:V.value,checked:n===V.value,onChange:B=>o(B.target.value),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:E.cardText},children:V.label})]},V.value))})]}),i.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${E.cardBorder}`,paddingBottom:"0.5rem"},children:"Input Values"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[(n==="from-kw-pf"||n==="from-kw-kvar"||n==="from-kva-kw")&&i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:["Real Power ",i.jsx("br",{}),"(kW)"]}),i.jsx("input",{type:"number",value:a,onChange:V=>c(V.target.value),placeholder:"Enter kW",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]}),n==="from-kw-kvar"&&i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Reactive Power (kVAR)"}),i.jsx("input",{type:"number",value:u,onChange:V=>f(V.target.value),placeholder:"Enter kVAR",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]}),(n==="from-kva-pf"||n==="from-kva-kw")&&i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:["Apparent Power ",i.jsx("br",{})," (kVA)"]}),i.jsx("input",{type:"number",value:h,onChange:V=>g(V.target.value),placeholder:"Enter kVA",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]}),(n==="from-kw-pf"||n==="from-kva-pf")&&i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:["Power Factor ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsx("input",{type:"number",value:b,onChange:V=>A(V.target.value),placeholder:"0.00 to 1.00",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Reactive Power Type"}),i.jsxs("select",{value:v,onChange:V=>F(V.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"lagging",children:"Lagging (Inductive - Most Common)"}),i.jsx("option",{value:"leading",children:"Leading (Capacitive)"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:E.subtleText,marginTop:"0.25rem"},children:"Inductive: Motors, transformers | Capacitive: Capacitor banks, lightly loaded cables"})]})]}),j&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem"},children:"Power Triangle Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Real Power (kW)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:j.kW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginTop:"0.25rem"},children:"Working Power"})]}),i.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Reactive Power (kVAR)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:Math.abs(j.kVAR).toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginTop:"0.25rem"},children:j.isLeading?"Leading":"Lagging"})]}),i.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Apparent Power (kVA)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:j.kVA.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginTop:"0.25rem"},children:"Total Power"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{style:{background:$(j.powerFactor).bg,border:`1px solid ${$(j.powerFactor).border}`,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:$(j.powerFactor).color,marginBottom:"0.25rem"},children:"Power Factor"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:$(j.powerFactor).color},children:j.powerFactor.toFixed(4)}),i.jsx("div",{style:{fontSize:"0.75rem",color:$(j.powerFactor).color,marginTop:"0.25rem"},children:$(j.powerFactor).quality})]}),i.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Phase Angle (θ)"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:[j.angle.toFixed(2),"°"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginTop:"0.25rem"},children:"V-I Phase Shift"})]})]})]}),i.jsx("div",{style:{background:E.sectionBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#3b82f6",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:E.labelText,lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",color:E.cardText,marginBottom:"0.5rem"},children:"Power Triangle Relationships:"}),i.jsxs("div",{style:{display:"grid",gap:"0.25rem"},children:[i.jsx("div",{children:"• kVA² = kW² + kVAR² (Pythagorean theorem)"}),i.jsx("div",{children:"• Power Factor = kW ÷ kVA = cos(θ)"}),i.jsx("div",{children:"• kVAR = kVA × sin(θ)"}),i.jsxs("div",{children:["• ",j.isLeading?"Leading PF: Current leads voltage (capacitive loads)":"Lagging PF: Current lags voltage (inductive loads - most common)"]})]})]})]})}),j.powerFactor<.9&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"12px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Low Power Factor Alert"}),i.jsxs("div",{children:["Power factor below 0.90 may result in utility penalties and increased energy costs. Consider power factor correction using ",j.isLeading?"inductors (reactors)":"capacitor banks","to improve efficiency and reduce demand charges."]})]})]})})]})]})}),PE=be.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=be.useState("find-power"),[a,c]=be.useState("480"),[u,f]=be.useState(""),[h,g]=be.useState("0.85"),[b,A]=be.useState(""),[v,F]=be.useState("line-to-line"),[E,N]=be.useState(""),j={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},V=(()=>{const B=parseFloat(a),X=parseFloat(u),se=parseFloat(h),U=parseFloat(b),C=E?parseFloat(E)/100:1;if(n==="find-power"){if(!a||!u||!h)return null;const w=Math.sqrt(3)*B*X*se/1e3,O=Math.sqrt(3)*B*X/1e3,P=Math.sqrt(Math.pow(O,2)-Math.pow(w,2));return{kW:w,kVA:O,kVAR:P,current:X,voltage:B,powerFactor:se,amps:X}}else if(n==="find-current"){if(!a||!b||!h)return null;const w=U*1e3/(Math.sqrt(3)*B*se),O=Math.sqrt(3)*B*w/1e3,P=Math.sqrt(Math.pow(O,2)-Math.pow(U,2));return{kW:U,kVA:O,kVAR:P,current:w,voltage:B,powerFactor:se,amps:w}}else if(n==="motor-power"){if(!b||!E)return null;const w=U/C,O=U*1.341;let P=0;return a&&h&&(P=w*1e3/(Math.sqrt(3)*B*se)),{inputKW:w,outputKW:U,outputHP:O,efficiency:C*100,amps:P,voltage:B,powerFactor:se}}return null})();return be.useImperativeHandle(t,()=>({exportPDF:()=>{if(!V){alert("Please enter all required values before exporting to PDF");return}const B={"find-power":"Calculate Power from Voltage & Current","find-current":"Calculate Current from Power & Voltage","motor-power":"Motor Power & Efficiency Calculation"};let X;n==="motor-power"?X={calculatorName:"Three-Phase Power Calculator - Motor",inputs:{calculationMode:B[n],outputPower:`${b} kW`,efficiency:`${E}%`,...a&&{voltage:`${a}V (${v==="line-to-line"?"Line-to-Line":"Line-to-Neutral"})`},...h&&{powerFactor:h}},results:{outputPower:`${V.outputKW.toFixed(2)} kW`,outputPowerHP:`${V.outputHP.toFixed(2)} HP`,inputPower:`${V.inputKW.toFixed(2)} kW`,efficiency:`${V.efficiency.toFixed(1)}%`,...V.amps>0&&{estimatedCurrent:`${V.amps.toFixed(2)} A`}},additionalInfo:{formula:"Input Power = Output Power ÷ Efficiency",hpConversion:"1 kW = 1.341 HP",note:E?`At ${E}% efficiency, motor draws ${V.inputKW.toFixed(2)} kW to produce ${V.outputKW.toFixed(2)} kW output`:""}}:X={calculatorName:"Three-Phase Power Calculator",inputs:{calculationMode:B[n],voltage:`${a}V (${v==="line-to-line"?"Line-to-Line":"Line-to-Neutral"})`,...u&&{current:`${u} A`},...b&&{power:`${b} kW`},powerFactor:h},results:{realPower:`${V.kW.toFixed(2)} kW`,apparentPower:`${V.kVA.toFixed(2)} kVA`,reactivePower:`${V.kVAR.toFixed(2)} kVAR`,current:`${V.amps.toFixed(2)} A`,voltage:`${V.voltage}V`,powerFactor:V.powerFactor},additionalInfo:{powerFormula:"P = √3 × V × I × PF (kW)",apparentPowerFormula:"S = √3 × V × I (kVA)",currentFormula:"I = P / (√3 × V × PF)",sqrt3:"√3 = 1.732",configuration:v==="line-to-line"?"Line-to-Line (most common)":"Line-to-Neutral",note:"Three-phase systems are more efficient for power transmission and are standard in industrial applications"},necReferences:["Three-phase power: P = √3 × VL-L × I × PF","Line-to-Line voltage: Standard between any two phases","Line-to-Neutral voltage: VL-N = VL-L ÷ √3","Common voltages: 208V, 240V, 480V, 600V (North America)","Three-phase systems provide constant power delivery","More efficient than single-phase for large loads and motors"]},pn(X)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${j.cardBorder}`,paddingBottom:"0.5rem"},children:"Calculation Mode"}),i.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:[{value:"find-power",label:"Find Power (from Voltage & Current)"},{value:"find-current",label:"Find Current (from Power & Voltage)"},{value:"motor-power",label:"Motor Power & Efficiency"}].map(B=>i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:n===B.value?j.sectionBg:"transparent",border:`1px solid ${n===B.value?"#3b82f6":j.cardBorder}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseOver:X=>{n!==B.value&&(X.currentTarget.style.background=j.sectionBg)},onMouseOut:X=>{n!==B.value&&(X.currentTarget.style.background="transparent")},children:[i.jsx("input",{type:"radio",name:"calculationMode",value:B.value,checked:n===B.value,onChange:X=>o(X.target.value),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:j.cardText},children:B.label})]},B.value))})]}),i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${j.cardBorder}`,paddingBottom:"0.5rem"},children:"Input Values"}),n==="motor-power"?i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Output Power (kW)"}),i.jsx("input",{type:"number",value:b,onChange:B=>A(B.target.value),placeholder:"Motor output power",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Motor Efficiency (%)"}),i.jsx("input",{type:"number",value:E,onChange:B=>N(B.target.value),placeholder:"85-95% typical",step:"0.1",min:"0",max:"100",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.subtleText,marginTop:"0.25rem"},children:"Optional: For current calculation, enter voltage and PF below"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Voltage (V) - Optional"}),i.jsxs("select",{value:a,onChange:B=>c(B.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"",children:"Select"}),i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"380",children:"380V"}),i.jsx("option",{value:"400",children:"400V"}),i.jsx("option",{value:"415",children:"415V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Power Factor - Optional"}),i.jsx("input",{type:"number",value:h,onChange:B=>g(B.target.value),placeholder:"0.80-0.95",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}})]})]})]}):i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Voltage Configuration"}),i.jsxs("select",{value:v,onChange:B=>F(B.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"line-to-line",children:"Line-to-Line (Most Common)"}),i.jsx("option",{value:"line-to-neutral",children:"Line-to-Neutral"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.subtleText,marginTop:"0.25rem"},children:"Line-to-Line: Voltage between any two phases"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Voltage (V)"}),i.jsxs("select",{value:a,onChange:B=>c(B.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"380",children:"380V"}),i.jsx("option",{value:"400",children:"400V"}),i.jsx("option",{value:"415",children:"415V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),i.jsx("input",{type:"number",value:h,onChange:B=>g(B.target.value),placeholder:"0.80-0.95",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}})]})]}),n==="find-power"&&i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Current (Amps)"}),i.jsx("input",{type:"number",value:u,onChange:B=>f(B.target.value),placeholder:"Line current",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}})]}),n==="find-current"&&i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Power (kW)"}),i.jsx("input",{type:"number",value:b,onChange:B=>A(B.target.value),placeholder:"Real power",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}})]})]})]}),V&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),n==="motor-power"?i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Output Power"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:V.outputKW.toFixed(2)}),i.jsxs("div",{style:{fontSize:"0.75rem",color:j.labelText,marginTop:"0.25rem"},children:["kW (",V.outputHP.toFixed(2)," HP)"]})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Input Power Required"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:V.inputKW.toFixed(2)}),i.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:["kW @ ",V.efficiency.toFixed(1),"% efficiency"]})]})]}),V.amps>0&&i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Estimated Current Draw"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:V.amps.toFixed(2)}),i.jsxs("div",{style:{fontSize:"0.75rem",color:j.labelText,marginTop:"0.25rem"},children:["Amps @ ",a,"V, PF ",h]})]})]}):i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Real Power (kW)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:V.kW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginTop:"0.25rem"},children:"Working Power"})]}),i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Apparent Power (kVA)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:V.kVA.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginTop:"0.25rem"},children:"Total Power"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Current (A)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:V.amps.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Line Current"})]})]})]}),i.jsx("div",{style:{background:j.sectionBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Is,{size:20,color:"#3b82f6",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:j.labelText,lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",color:j.cardText,marginBottom:"0.5rem"},children:n==="motor-power"?"Motor Efficiency:":"Three-Phase Formulas:"}),i.jsx("div",{style:{display:"grid",gap:"0.25rem"},children:n==="motor-power"?i.jsxs(i.Fragment,{children:[i.jsx("div",{children:"• Input Power = Output Power ÷ Efficiency"}),i.jsx("div",{children:"• 1 kW = 1.341 HP"}),i.jsx("div",{children:"• Typical motor efficiency: 85-95%"}),i.jsx("div",{children:"• Higher efficiency motors use less power"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{children:"• P (kW) = √3 × V × I × PF ÷ 1000"}),i.jsx("div",{children:"• S (kVA) = √3 × V × I ÷ 1000"}),i.jsx("div",{children:"• I (A) = P × 1000 ÷ (√3 × V × PF)"}),i.jsx("div",{children:"• √3 = 1.732 (constant for 3-phase)"}),i.jsxs("div",{children:["• ",v==="line-to-line"?"Using Line-to-Line voltage":"Using Line-to-Neutral voltage"]})]})})]})]})}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"12px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(In,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Three-Phase Advantages:"}),i.jsxs("div",{style:{display:"grid",gap:"0.25rem"},children:[i.jsx("div",{children:"• Delivers constant, smooth power (no pulsation)"}),i.jsx("div",{children:"• More efficient for high-power applications"}),i.jsx("div",{children:"• Smaller conductor sizes for same power"}),i.jsx("div",{children:"• Standard for industrial and commercial buildings"}),i.jsx("div",{children:"• Required for large motors and heavy equipment"})]})]})]})})]})]})}),NE=({isDarkMode:r,jobs:e})=>{const[t,n]=be.useState(new Date),[o,a]=be.useState(new Date),c={bg:r?"#000000":"#f9fafb",cardBg:r?"#0a0a0a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#666666":"#6b7280",border:r?"#1a1a1a":"#e5e7eb",selectedDay:"#3b82f6",todayBg:r?"#1a1a1a":"#f3f4f6"},u={scheduled:"#3b82f6","in-progress":"#f59e0b",completed:"#10b981"},f=e.map(w=>({...w,dateObj:w.date?new Date(w.date+"T00:00:00"):null})),h=w=>new Date(w.getFullYear(),w.getMonth()+1,0).getDate(),g=w=>new Date(w.getFullYear(),w.getMonth(),1).getDay(),b=(w,O)=>!w||!O?!1:w.getDate()===O.getDate()&&w.getMonth()===O.getMonth()&&w.getFullYear()===O.getFullYear(),A=w=>b(w,new Date),v=w=>f.filter(O=>O.dateObj&&b(O.dateObj,w)),F=w=>f.some(O=>O.dateObj&&b(O.dateObj,w)),E=()=>{n(new Date(t.getFullYear(),t.getMonth()-1))},N=()=>{n(new Date(t.getFullYear(),t.getMonth()+1))},j=["January","February","March","April","May","June","July","August","September","October","November","December"],$=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],V=h(t),B=g(t),X=[];for(let w=0;w<B;w++)X.push(null);for(let w=1;w<=V;w++)X.push(new Date(t.getFullYear(),t.getMonth(),w));const se=v(o),U=new Date,C=f.filter(w=>w.dateObj&&w.dateObj>=U&&w.status==="scheduled").sort((w,O)=>w.dateObj-O.dateObj).slice(0,5);return i.jsx("div",{style:{minHeight:"100vh",background:c.bg,paddingBottom:"5rem",maxWidth:"100vw",overflowX:"hidden"},children:i.jsxs("div",{style:{padding:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5rem",marginBottom:"1rem",maxWidth:"100%",overflow:"hidden"},children:[i.jsxs("div",{style:{background:c.cardBg,border:`1px solid ${c.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#3b82f6",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:C.length}),i.jsx("div",{style:{fontSize:"0.75rem",color:c.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Upcoming"})]}),i.jsxs("div",{style:{background:c.cardBg,border:`1px solid ${c.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#f59e0b",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:e.filter(w=>w.status==="in-progress").length}),i.jsx("div",{style:{fontSize:"0.75rem",color:c.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"In Progress"})]}),i.jsxs("div",{style:{background:c.cardBg,border:`1px solid ${c.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10b981",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:e.filter(w=>w.status==="completed").length}),i.jsx("div",{style:{fontSize:"0.75rem",color:c.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Completed"})]})]}),i.jsxs("div",{style:{background:c.cardBg,border:`1px solid ${c.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem",boxShadow:"none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[i.jsxs("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:"600",color:c.text},children:[j[t.getMonth()]," ",t.getFullYear()]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:E,style:{background:c.bg,border:`1px solid ${c.border}`,borderRadius:"0.5rem",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",color:c.text},children:i.jsx($S,{size:20})}),i.jsx("button",{onClick:N,style:{background:c.bg,border:`1px solid ${c.border}`,borderRadius:"0.5rem",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",color:c.text},children:i.jsx(qS,{size:20})})]})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.25rem",marginBottom:"0.5rem"},children:$.map(w=>i.jsx("div",{style:{textAlign:"center",fontSize:"0.75rem",fontWeight:"600",color:c.subtext,padding:"0.5rem 0"},children:w},w))}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.125rem"},children:X.map((w,O)=>{if(!w)return i.jsx("div",{},`empty-${O}`);const P=b(w,o),S=A(w),z=F(w);return i.jsxs("button",{onClick:()=>a(w),style:{aspectRatio:"1",border:"none",borderRadius:"0.375rem",background:P?c.selectedDay:S?c.todayBg:"transparent",color:P?"white":c.text,cursor:"pointer",fontSize:"0.75rem",fontWeight:P||S?"600":"400",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",padding:"0.25rem",minWidth:0,width:"100%"},onMouseEnter:W=>{P||(W.currentTarget.style.background=c.todayBg)},onMouseLeave:W=>{!P&&!S?W.currentTarget.style.background="transparent":!P&&S&&(W.currentTarget.style.background=c.todayBg)},children:[w.getDate(),z&&i.jsx("div",{style:{position:"absolute",bottom:"0.125rem",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"0.0625rem"},children:v(w).slice(0,3).map((W,le)=>i.jsx("div",{style:{width:"3px",height:"3px",borderRadius:"50%",background:P?"white":u[W.status]}},le))})]},O)})})]}),i.jsxs("div",{style:{background:c.cardBg,border:`1px solid ${c.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem",boxShadow:"none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[i.jsx("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:"600",color:c.text},children:b(o,new Date)?"Today":o.toLocaleDateString("en-US",{month:"long",day:"numeric"})}),i.jsxs("span",{style:{fontSize:"0.75rem",color:c.subtext,background:c.bg,padding:"0.25rem 0.75rem",borderRadius:"1rem"},children:[se.length," ",se.length===1?"job":"jobs"]})]}),se.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem",color:c.subtext},children:[i.jsx(r0,{size:48,style:{margin:"0 auto 0.5rem",opacity:.3}}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem"},children:"No jobs scheduled for this day"})]}):i.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:se.map(w=>i.jsxs("div",{style:{background:c.bg,border:`1px solid ${c.border}`,borderLeft:`4px solid ${u[w.status]}`,borderRadius:"0.5rem",padding:"1rem"},children:[i.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:i.jsxs("div",{children:[i.jsx("h4",{style:{margin:"0 0 0.25rem 0",fontSize:"1rem",fontWeight:"600",color:c.text},children:w.title}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:c.subtext},children:w.client})]})}),i.jsxs("div",{style:{display:"grid",gap:"0.25rem",fontSize:"0.875rem",color:c.subtext},children:[w.time&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx($0,{size:14}),i.jsxs("span",{children:[w.time,w.duration&&` (${w.duration})`]})]}),w.location&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(lx,{size:14}),i.jsx("span",{children:w.location})]}),w.estimatedCost&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(U0,{size:14}),i.jsxs("span",{children:["$",Number(w.estimatedCost).toLocaleString()]})]})]})]},w.id))})]}),i.jsxs("div",{style:{background:c.cardBg,border:`1px solid ${c.border}`,borderRadius:"0.75rem",padding:"1rem",boxShadow:"none"},children:[i.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"1.125rem",fontWeight:"600",color:c.text},children:"Upcoming Jobs"}),C.length===0?i.jsx("div",{style:{textAlign:"center",padding:"2rem 1rem",color:c.subtext},children:i.jsx("p",{style:{margin:0,fontSize:"0.875rem"},children:"No upcoming jobs scheduled"})}):i.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:C.map(w=>i.jsxs("div",{style:{background:c.bg,border:`1px solid ${c.border}`,borderRadius:"0.5rem",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("h4",{style:{margin:"0 0 0.25rem 0",fontSize:"0.9375rem",fontWeight:"600",color:c.text},children:w.title}),i.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.8125rem",color:c.subtext},children:w.client}),i.jsxs("div",{style:{fontSize:"0.75rem",color:c.subtext,display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(r0,{size:12}),w.dateObj.toLocaleDateString("en-US",{month:"short",day:"numeric"}),w.time&&` at ${w.time}`]})]}),i.jsx("div",{style:{width:"4px",height:"40px",borderRadius:"2px",background:u[w.status]}})]},w.id))})]})]})})},LE=({isDarkMode:r})=>{const[e,t]=be.useState(null),[n,o]=be.useState(!0),[a,c]=be.useState(!0),[u,f]=be.useState(""),[h,g]=be.useState(""),[b,A]=be.useState(""),v={bg:r?"#000000":"#f9fafb",cardBg:r?"#0a0a0a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#666666":"#6b7280",border:r?"#1a1a1a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"};be.useEffect(()=>{const j=L8(Do,$=>{t($),o(!1)});return()=>j()},[]);const F=async j=>{j.preventDefault(),A("");try{const $=await I8(Do,u,h);try{await fetch("/.netlify/functions/send-welcome-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u})})}catch(V){console.error("Welcome email failed:",V)}alert("Welcome! Please check your email to verify your account."),f(""),g("")}catch($){A($.message)}},E=async j=>{j.preventDefault(),A("");try{await R8(Do,u,h),f(""),g("")}catch($){A($.message)}},N=async()=>{try{await B8(Do)}catch(j){A(j.message)}};return n?i.jsx("div",{style:{background:v.bg,minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("div",{style:{color:v.text},children:"Loading..."})}):e?i.jsx("div",{style:{background:v.bg,paddingBottom:"5rem"},children:i.jsxs("div",{style:{padding:"1rem"},children:[i.jsxs("div",{style:{background:v.cardBg,borderRadius:"0.75rem",border:`1px solid ${v.border}`,padding:"2rem 1rem",marginBottom:"1rem",textAlign:"center",boxShadow:"none"},children:[i.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:i.jsx(Of,{size:40,color:"white"})}),i.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:v.text,fontSize:"1.25rem",fontWeight:"600"},children:e.email}),i.jsx("p",{style:{margin:0,color:v.subtext,fontSize:"0.875rem"},children:"Electrician Account"})]}),i.jsxs("div",{style:{background:v.cardBg,borderRadius:"0.75rem",border:`1px solid ${v.border}`,overflow:"hidden",marginBottom:"1rem",boxShadow:"none"},children:[i.jsx("h3",{style:{margin:0,padding:"1rem",color:v.text,fontSize:"1rem",fontWeight:"600",borderBottom:`1px solid ${v.border}`},children:"Account Settings"}),i.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",borderBottom:`1px solid ${v.border}`,display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:v.text},children:[i.jsx(o5,{size:20,color:v.subtext}),i.jsxs("div",{style:{flex:1,textAlign:"left"},children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Email"}),i.jsx("div",{style:{fontSize:"0.8125rem",color:v.subtext},children:e.email})]})]}),i.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",borderBottom:`1px solid ${v.border}`,display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:v.text},children:[i.jsx(LS,{size:20,color:v.subtext}),i.jsxs("div",{style:{flex:1,textAlign:"left"},children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Notifications"}),i.jsx("div",{style:{fontSize:"0.8125rem",color:v.subtext},children:"Manage preferences"})]})]}),i.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:v.text},children:[i.jsx(S3,{size:20,color:v.subtext}),i.jsxs("div",{style:{flex:1,textAlign:"left"},children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Privacy & Security"}),i.jsx("div",{style:{fontSize:"0.8125rem",color:v.subtext},children:"Account protection"})]})]})]}),i.jsxs("button",{onClick:N,style:{width:"100%",padding:"1rem",background:"#ef4444",color:"white",border:"none",borderRadius:"0.75rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:"none"},children:[i.jsx(l3,{size:20}),"Log Out"]})]})}):i.jsx("div",{style:{background:v.bg,minHeight:"100vh",paddingBottom:"5rem"},children:i.jsx("div",{style:{padding:"1rem"},children:i.jsxs("div",{style:{background:v.cardBg,borderRadius:"0.75rem",border:`1px solid ${v.border}`,padding:"2rem 1rem",marginTop:"2rem",boxShadow:"none"},children:[i.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:i.jsx(Of,{size:40,color:"white"})}),i.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:v.text,fontSize:"1.5rem",fontWeight:"700",textAlign:"center"},children:a?"Welcome Back":"Create Account"}),i.jsx("p",{style:{margin:"0 0 2rem 0",color:v.subtext,fontSize:"0.875rem",textAlign:"center"},children:a?"Sign in to your account":"Sign up to get started"}),b&&i.jsx("div",{style:{padding:"0.75rem",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"0.5rem",color:"#dc2626",fontSize:"0.875rem",marginBottom:"1rem"},children:b}),i.jsxs("form",{onSubmit:a?E:F,children:[i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:v.text,fontSize:"0.875rem",fontWeight:"500"},children:"Email"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(o5,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:v.subtext}}),i.jsx("input",{type:"email",value:u,onChange:j=>f(j.target.value),placeholder:"your@email.com",required:!0,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:`1px solid ${v.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:v.inputBg,color:v.text,boxSizing:"border-box"}})]})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:v.text,fontSize:"0.875rem",fontWeight:"500"},children:"Password"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(s3,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:v.subtext}}),i.jsx("input",{type:"password",value:h,onChange:j=>g(j.target.value),placeholder:"••••••••",required:!0,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:`1px solid ${v.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:v.inputBg,color:v.text,boxSizing:"border-box"}})]})]}),i.jsx("button",{type:"submit",style:{width:"100%",padding:"0.875rem",background:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",marginBottom:"1rem"},children:a?"Sign In":"Sign Up"}),i.jsxs("div",{style:{textAlign:"center",color:v.subtext,fontSize:"0.875rem"},children:[a?"Don't have an account? ":"Already have an account? ",i.jsx("button",{type:"button",onClick:()=>{c(!a),A("")},style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",textDecoration:"underline"},children:a?"Sign Up":"Sign In"})]})]})]})})})},BE=({isDarkMode:r})=>{const[e,t]=be.useState([]),[n,o]=be.useState(!0),[a,c]=be.useState(!1),[u,f]=be.useState(null),[h,g]=be.useState({title:"",client:"",location:"",status:"scheduled",date:"",time:"",estimatedCost:"",duration:"",notes:""}),b={bg:r?"#000000":"#f9fafb",cardBg:r?"#0a0a0a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#666666":"#6b7280",border:r?"#1a1a1a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"},A={scheduled:{color:"#3b82f6",icon:$0,label:"Scheduled"},"in-progress":{color:"#f59e0b",icon:lp,label:"In Progress"},completed:{color:"#10b981",icon:In,label:"Completed"}};be.useEffect(()=>{v()},[]),be.useEffect(()=>{console.log("Jobs component mounted"),console.log("Auth state:",Do.currentUser)},[]);const v=async()=>{o(!0);try{const V=await Hg();t(V)}catch(V){console.error("Error loading jobs:",V),alert("Failed to load jobs. Please try again.")}finally{o(!1)}},F=()=>{g({title:"",client:"",location:"",status:"scheduled",date:"",time:"",estimatedCost:"",duration:"",notes:""}),c(!1),f(null)},E=async()=>{if(h.title&&h.client)try{console.log("Attempting to add job..."),console.log("Auth user:",Do.currentUser);const V={name:h.title,title:h.title,client:h.client,location:h.location,status:h.status,date:h.date,time:h.time,estimatedCost:h.estimatedCost,duration:h.duration,notes:h.notes};console.log("Job data:",V),await Fw(V),console.log("Job created successfully!"),F(),v()}catch(V){console.error("Error adding job:",V),alert("Failed to add job. Please try again.")}},N=async()=>{if(h.title&&h.client&&u)try{const{updateJob:V}=await wf(async()=>{const{updateJob:X}=await Promise.resolve().then(()=>Jj);return{updateJob:X}},void 0),B={name:h.title,title:h.title,client:h.client,location:h.location,status:h.status,date:h.date,time:h.time,estimatedCost:h.estimatedCost,duration:h.duration,notes:h.notes};await V(u.id,B),F(),v()}catch(V){console.error("Error updating job:",V),alert("Failed to update job. Please try again.")}},j=V=>{f(V),g({title:V.title||V.name,client:V.client,location:V.location||"",status:V.status,date:V.date||"",time:V.time||"",estimatedCost:V.estimatedCost||"",duration:V.duration||"",notes:V.notes||""}),c(!0),window.scrollTo({top:0,behavior:"smooth"})},$=async(V,B)=>{if(window.confirm(`Are you sure you want to delete "${B}"?`))try{await zw(V),v()}catch(X){console.error("Error deleting job:",X),alert("Failed to delete job. Please try again.")}};return n?i.jsx("div",{style:{minHeight:"100vh",background:b.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("div",{style:{color:b.subtext},children:"Loading jobs..."})}):i.jsx("div",{style:{minHeight:"100vh",background:b.bg,paddingBottom:"5rem"},children:i.jsxs("div",{style:{padding:"1rem"},children:[i.jsxs("div",{style:{background:b.cardBg,borderRadius:"0.75rem",border:`1px solid ${b.border}`,boxShadow:"none",marginBottom:"1rem",overflow:"hidden"},children:[i.jsxs("button",{onClick:()=>c(!a),style:{width:"100%",padding:"1rem",background:"transparent",border:"none",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",color:b.text},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:[i.jsx(Oc,{size:20}),u?"Edit Job":"Add New Job"]}),i.jsx(n0,{size:20,style:{transform:a?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),a&&i.jsx("div",{style:{padding:"0 1rem 1rem 1rem",borderTop:`1px solid ${b.border}`},children:i.jsxs("div",{style:{paddingTop:"1rem"},children:[i.jsx("input",{type:"text",placeholder:"Job Title *",value:h.title,onChange:V=>g(B=>({...B,title:V.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${b.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:b.inputBg,color:b.text,boxSizing:"border-box"}}),i.jsx("input",{type:"text",placeholder:"Client Name *",value:h.client,onChange:V=>g(B=>({...B,client:V.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${b.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:b.inputBg,color:b.text,boxSizing:"border-box"}}),i.jsx("input",{type:"text",placeholder:"Location",value:h.location,onChange:V=>g(B=>({...B,location:V.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${b.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:b.inputBg,color:b.text,boxSizing:"border-box"}}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[i.jsx("input",{type:"date",value:h.date,onChange:V=>g(B=>({...B,date:V.target.value})),style:{padding:"0.75rem",border:`1px solid ${b.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:b.inputBg,color:b.text,boxSizing:"border-box"}}),i.jsx("input",{type:"time",placeholder:"Time",value:h.time,onChange:V=>g(B=>({...B,time:V.target.value})),style:{padding:"0.75rem",border:`1px solid ${b.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:b.inputBg,color:b.text,boxSizing:"border-box"}})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[i.jsx("input",{type:"number",placeholder:"Cost ($)",value:h.estimatedCost,onChange:V=>g(B=>({...B,estimatedCost:V.target.value})),style:{padding:"0.75rem",border:`1px solid ${b.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:b.inputBg,color:b.text,boxSizing:"border-box"}}),i.jsx("input",{type:"text",placeholder:"Duration",value:h.duration,onChange:V=>g(B=>({...B,duration:V.target.value})),style:{padding:"0.75rem",border:`1px solid ${b.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:b.inputBg,color:b.text,boxSizing:"border-box"}})]}),i.jsxs("select",{value:h.status,onChange:V=>g(B=>({...B,status:V.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${b.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:b.inputBg,color:b.text,boxSizing:"border-box"},children:[i.jsx("option",{value:"scheduled",children:"Scheduled"}),i.jsx("option",{value:"in-progress",children:"In Progress"}),i.jsx("option",{value:"completed",children:"Completed"})]}),i.jsx("textarea",{placeholder:"Notes",value:h.notes,onChange:V=>g(B=>({...B,notes:V.target.value})),rows:"3",style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${b.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:b.inputBg,color:b.text,boxSizing:"border-box",resize:"vertical"}}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:u?N:E,disabled:!h.title||!h.client,style:{flex:1,padding:"0.75rem",background:!h.title||!h.client?b.border:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:!h.title||!h.client?"not-allowed":"pointer",opacity:!h.title||!h.client?.5:1},children:u?"Update Job":"Add Job"}),i.jsx("button",{onClick:F,style:{flex:1,padding:"0.75rem",background:"transparent",color:b.text,border:`1px solid ${b.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0 0.25rem"},children:[i.jsx("h3",{style:{margin:0,color:b.text,fontSize:"1.125rem",fontWeight:"600"},children:"Job List"}),i.jsxs("span",{style:{fontSize:"0.875rem",color:b.subtext,background:b.cardBg,padding:"0.25rem 0.75rem",borderRadius:"1rem",border:`1px solid ${b.border}`},children:[e.length," ",e.length===1?"job":"jobs"]})]}),e.length===0?i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.border}`,borderRadius:"0.75rem",textAlign:"center",padding:"3rem 1rem",color:b.subtext},children:[i.jsx(ap,{size:48,style:{margin:"0 auto 1rem",opacity:.5}}),i.jsx("p",{style:{margin:0,fontSize:"0.9375rem"},children:"No jobs yet. Add your first job above!"})]}):[...e].sort((V,B)=>!V.date&&!B.date?0:V.date?B.date?new Date(B.date)-new Date(V.date):-1:1).map(V=>{const B=A[V.status].icon,X=u&&u.id===V.id,se=V.title||V.name;return i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${X?"#3b82f6":b.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"0.75rem",boxShadow:X?"0 0 0 3px rgba(59, 130, 246, 0.1)":"none",transition:"all 0.2s"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("h3",{style:{margin:"0 0 0.25rem 0",color:b.text,fontSize:"1rem",fontWeight:"600"},children:se}),i.jsx("p",{style:{margin:0,color:b.subtext,fontSize:"0.875rem"},children:V.client})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.25rem 0.75rem",borderRadius:"1rem",background:`${A[V.status].color}20`,color:A[V.status].color,fontSize:"0.75rem",fontWeight:"600",whiteSpace:"nowrap"},children:[i.jsx(B,{size:14}),i.jsx("span",{children:A[V.status].label})]})]}),V.location&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:b.subtext,fontSize:"0.875rem"},children:[i.jsx(lx,{size:16}),i.jsx("span",{children:V.location})]}),V.date&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:b.subtext,fontSize:"0.875rem"},children:[i.jsx(r0,{size:16}),i.jsxs("span",{children:[new Date(V.date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),V.time&&` at ${V.time}`,V.duration&&` (${V.duration})`]})]}),V.estimatedCost&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:b.subtext,fontSize:"0.875rem"},children:[i.jsx(U0,{size:16}),i.jsxs("span",{children:["$",Number(V.estimatedCost).toLocaleString()]})]}),V.notes&&i.jsx("p",{style:{margin:"0.75rem 0 0 0",padding:"0.75rem",background:b.bg,borderRadius:"0.5rem",color:b.text,fontSize:"0.875rem",lineHeight:"1.5"},children:V.notes}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem"},children:[i.jsxs("button",{onClick:()=>j(V),style:{flex:1,padding:"0.5rem",background:X?"#3b82f6":"transparent",border:`1px solid ${X?"#3b82f6":b.border}`,borderRadius:"0.5rem",color:X?"white":b.text,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.875rem",fontWeight:X?"600":"400"},children:[i.jsx(mx,{size:16}),X?"Editing...":"Edit"]}),i.jsxs("button",{onClick:()=>$(V.id,se),style:{flex:1,padding:"0.5rem",background:"transparent",border:"1px solid #ef4444",borderRadius:"0.5rem",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.875rem"},children:[i.jsx(Vc,{size:16}),"Delete"]})]})]},V.id)})]})})},FE=({isDarkMode:r,jobs:e=[],onApplyToJob:t})=>{const[n,o]=be.useState([]),[a,c]=be.useState(!1),[u,f]=be.useState(null),[h,g]=be.useState(null),[b,A]=be.useState({name:"",laborHours:"",laborRate:"",materials:[]}),[v,F]=be.useState({name:"",cost:""}),E={bg:r?"#000000":"#f9fafb",cardBg:r?"#0a0a0a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#666666":"#6b7280",border:r?"#1a1a1a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"},N=(w,O,P)=>{const S=(parseFloat(w)||0)*(parseFloat(O)||0),z=P.reduce((W,le)=>W+(parseFloat(le.cost)||0),0);return S+z},j=N(b.laborHours,b.laborRate,b.materials),$=()=>{v.name&&v.cost&&(A(w=>({...w,materials:[...w.materials,{...v}]})),F({name:"",cost:""}))},V=w=>{A(O=>({...O,materials:O.materials.filter((P,S)=>S!==w)}))},B=()=>{if(b.name){const w=N(b.laborHours,b.laborRate,b.materials);o(u?n.map(O=>O.id===u.id?{...b,id:O.id,total:w,createdAt:O.createdAt}:O):[...n,{...b,id:Date.now(),total:w,createdAt:new Date}]),X()}},X=()=>{A({name:"",laborHours:"",laborRate:"",materials:[]}),F({name:"",cost:""}),c(!1),f(null)},se=w=>{f(w),A({name:w.name,laborHours:w.laborHours,laborRate:w.laborRate,materials:[...w.materials]}),c(!0),window.scrollTo({top:0,behavior:"smooth"})},U=w=>{window.confirm("Delete this estimate?")&&o(n.filter(O=>O.id!==w))},C=(w,O)=>{t&&t(w,O),g(null)};return i.jsx("div",{style:{background:E.bg,paddingBottom:"5rem"},children:i.jsxs("div",{style:{padding:"1rem"},children:[i.jsxs("div",{style:{background:E.cardBg,borderRadius:"0.75rem",border:`1px solid ${E.border}`,boxShadow:"none",marginBottom:"1rem",overflow:"hidden"},children:[i.jsxs("button",{onClick:()=>c(!a),style:{width:"100%",padding:"1rem",background:"transparent",border:"none",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",color:E.text},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:[i.jsx(Oc,{size:20}),u?"Edit Estimate":"New Estimate"]}),i.jsx(n0,{size:20,style:{transform:a?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),a&&i.jsx("div",{style:{padding:"0 1rem 1rem 1rem",borderTop:`1px solid ${E.border}`},children:i.jsxs("div",{style:{paddingTop:"1rem"},children:[i.jsx("input",{type:"text",placeholder:"Estimate Name *",value:b.name,onChange:w=>A(O=>({...O,name:w.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${E.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:E.inputBg,color:E.text,boxSizing:"border-box"}}),i.jsx("h4",{style:{margin:"0 0 0.5rem 0",fontSize:"0.875rem",fontWeight:"600",color:E.text},children:"Labor"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[i.jsx("input",{type:"number",placeholder:"Hours",value:b.laborHours,onChange:w=>A(O=>({...O,laborHours:w.target.value})),style:{padding:"0.75rem",border:`1px solid ${E.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:E.inputBg,color:E.text,boxSizing:"border-box"}}),i.jsx("input",{type:"number",placeholder:"Rate ($/hr)",value:b.laborRate,onChange:w=>A(O=>({...O,laborRate:w.target.value})),style:{padding:"0.75rem",border:`1px solid ${E.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:E.inputBg,color:E.text,boxSizing:"border-box"}})]}),i.jsx("h4",{style:{margin:"1rem 0 0.5rem 0",fontSize:"0.875rem",fontWeight:"600",color:E.text},children:"Materials"}),b.materials.map((w,O)=>i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem",padding:"0.75rem",background:E.bg,borderRadius:"0.5rem"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:E.text},children:w.name}),i.jsxs("div",{style:{fontSize:"0.75rem",color:E.subtext},children:["$",parseFloat(w.cost).toFixed(2)]})]}),i.jsx("button",{onClick:()=>V(O),style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",padding:"0.25rem"},children:i.jsx(Vc,{size:16})})]},O)),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[i.jsx("input",{type:"text",placeholder:"Material name",value:v.name,onChange:w=>F(O=>({...O,name:w.target.value})),style:{flex:1,padding:"0.75rem",border:`1px solid ${E.border}`,borderRadius:"0.5rem",fontSize:"0.875rem",background:E.inputBg,color:E.text,boxSizing:"border-box"}}),i.jsx("input",{type:"number",placeholder:"Cost",value:v.cost,onChange:w=>F(O=>({...O,cost:w.target.value})),style:{width:"100px",padding:"0.75rem",border:`1px solid ${E.border}`,borderRadius:"0.5rem",fontSize:"0.875rem",background:E.inputBg,color:E.text,boxSizing:"border-box"}}),i.jsx("button",{onClick:$,style:{padding:"0.75rem",background:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center"},children:i.jsx(Oc,{size:16})})]}),i.jsx("div",{style:{padding:"0.75rem",background:E.bg,borderRadius:"0.5rem",marginBottom:"0.75rem"},children:i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.125rem",fontWeight:"600",color:E.text},children:[i.jsx("span",{children:"Total:"}),i.jsxs("span",{children:["$",j.toFixed(2)]})]})}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsxs("button",{onClick:B,disabled:!b.name,style:{flex:1,padding:"0.75rem",background:b.name?"#2563eb":E.border,color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:b.name?"pointer":"not-allowed",opacity:b.name?1:.5},children:[u?"Update":"Save"," Estimate"]}),i.jsx("button",{onClick:X,style:{flex:1,padding:"0.75rem",background:"transparent",color:E.text,border:`1px solid ${E.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0 0.25rem"},children:[i.jsx("h3",{style:{margin:0,color:E.text,fontSize:"1.125rem",fontWeight:"600"},children:"Saved Estimates"}),i.jsx("span",{style:{fontSize:"0.875rem",color:E.subtext,background:E.cardBg,padding:"0.25rem 0.75rem",borderRadius:"1rem",border:`1px solid ${E.border}`},children:n.length})]}),n.length===0?i.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.border}`,borderRadius:"0.75rem",textAlign:"center",padding:"3rem 1rem",color:E.subtext},children:[i.jsx(q0,{size:48,style:{margin:"0 auto 1rem",opacity:.5}}),i.jsx("p",{style:{margin:0,fontSize:"0.9375rem"},children:"No estimates yet. Create one above!"})]}):n.map(w=>i.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"0.75rem",boxShadow:"none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[i.jsxs("div",{children:[i.jsx("h3",{style:{margin:"0 0 0.25rem 0",color:E.text,fontSize:"1rem",fontWeight:"600"},children:w.name}),i.jsx("p",{style:{margin:0,color:E.subtext,fontSize:"0.75rem"},children:w.createdAt.toLocaleDateString()})]}),i.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10b981"},children:["$",w.total.toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:E.subtext,fontSize:"0.875rem"},children:[i.jsx($0,{size:16}),i.jsxs("span",{children:[w.laborHours,"h × $",w.laborRate,"/hr = $",(w.laborHours*w.laborRate).toFixed(2)]})]}),w.materials.length>0&&i.jsx("div",{style:{padding:"0.75rem",background:E.bg,borderRadius:"0.5rem",marginBottom:"0.75rem"},children:w.materials.map((O,P)=>i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem",color:E.subtext,marginBottom:P<w.materials.length-1?"0.25rem":0},children:[i.jsx("span",{children:O.name}),i.jsxs("span",{children:["$",parseFloat(O.cost).toFixed(2)]})]},P))}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsxs("div",{style:{position:"relative",flex:1},children:[i.jsxs("button",{onClick:()=>g(h===w.id?null:w.id),style:{width:"100%",padding:"0.5rem",background:"#2563eb",border:"none",borderRadius:"0.5rem",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.875rem",fontWeight:"500"},children:[i.jsx(U0,{size:16}),"Add to Job",i.jsx(n0,{size:14})]}),h===w.id&&i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:()=>g(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998}}),i.jsxs("div",{style:{position:"absolute",bottom:"100%",left:0,right:0,marginBottom:"0.5rem",background:E.cardBg,border:`1px solid ${E.border}`,borderRadius:"0.5rem",boxShadow:r?"0 4px 12px rgba(0,0,0,0.6)":"0 4px 12px rgba(0,0,0,0.15)",maxHeight:"200px",overflowY:"auto",zIndex:9999},children:[i.jsx("button",{onClick:()=>C(w,"new"),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${E.border}`,color:"#2563eb",cursor:"pointer",textAlign:"left",fontSize:"0.875rem",fontWeight:"500"},children:"+ Create New Job"}),e.map(O=>i.jsx("button",{onClick:()=>C(w,O.id),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${E.border}`,color:E.text,cursor:"pointer",textAlign:"left",fontSize:"0.875rem"},children:O.title},O.id))]})]})]}),i.jsx("button",{onClick:()=>se(w),style:{padding:"0.5rem",background:"transparent",border:`1px solid ${E.border}`,borderRadius:"0.5rem",color:E.text,cursor:"pointer",display:"flex",alignItems:"center"},children:i.jsx(mx,{size:16})}),i.jsx("button",{onClick:()=>U(w.id),style:{padding:"0.5rem",background:"transparent",border:"1px solid #ef4444",borderRadius:"0.5rem",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center"},children:i.jsx(Vc,{size:16})})]})]},w.id))]})})};function zE(){const[r,e]=be.useState(()=>localStorage.getItem("activeView")||null),[t,n]=be.useState(()=>localStorage.getItem("isDarkMode")==="true"),[o,a]=be.useState(!1),[c,u]=be.useState(!1),[f,h]=be.useState(null),[g,b]=be.useState(!0),[A,v]=be.useState(0);ku.useEffect(()=>{r===null?localStorage.setItem("activeView",""):localStorage.setItem("activeView",r)},[r]),ku.useEffect(()=>{localStorage.setItem("isDarkMode",t)},[t]),ku.useEffect(()=>{const C=()=>{const O=document.querySelector('meta[name="theme-color"]');O&&O.setAttribute("content",t?"#000000":"#2563eb")};C();const w=()=>{document.visibilityState==="visible"&&C()};return document.addEventListener("visibilitychange",w),()=>{document.removeEventListener("visibilitychange",w)}},[t]),ku.useEffect(()=>{window.scrollTo(0,0)},[r]);const F=be.useRef(null);ku.useEffect(()=>{const C=()=>{const w=window.scrollY;w<10?b(!0):w>A&&w>80?b(!1):w<A&&b(!0),v(w)};return window.addEventListener("scroll",C,{passive:!0}),()=>window.removeEventListener("scroll",C)},[A]);const E=C=>{C==="home"?e(null):C==="calculators"?e("calculators"):C==="profile"?e("profile"):C==="jobs"?e("jobs"):C==="estimates"&&e("estimates")},N=()=>{e(null)},j=(C,w)=>{w==="new"?(h(C),e("jobs")):(h({...C,jobId:w}),e("jobs"))},$=()=>{if(F.current&&F.current.exportPDF)try{F.current.exportPDF(),a(!1),u(!0),setTimeout(()=>u(!1),3e3)}catch(C){console.error("PDF export failed:",C),alert("Failed to export PDF. Please try again.")}},V={headerBorder:t?"#000000":"#e5e7eb",menuBg:t?"#000000":"white",cardBorder:t?"#1a1a1a":"#e5e7eb",cardText:t?"#ffffff":"#111827"},B=()=>{switch(r){case"voltage-drop":return i.jsx(AT,{ref:F,isDarkMode:t,onBack:N});case"ohms-law":return i.jsx(Qj,{ref:F,isDarkMode:t,onBack:N});case"box-fill":return i.jsx(Xj,{ref:F,isDarkMode:t,onBack:N});case"conduit-fill":return i.jsx(Zj,{ref:F,isDarkMode:t,onBack:N});case"ampacity":return i.jsx(eE,{ref:F,isDarkMode:t,onBack:N});case"motor-calculations":return i.jsx(iE,{ref:F,isDarkMode:t,onBack:N});case"load-calculations":return i.jsx(aE,{ref:F,isDarkMode:t,onBack:N});case"transformer-sizing":return i.jsx(lE,{ref:F,isDarkMode:t,onBack:N});case"service-entrance":return i.jsx(cE,{ref:F,isDarkMode:t,onBack:N});case"grounding-bonding":return i.jsx(fE,{ref:F,isDarkMode:t,onBack:N});case"conduit-bending":return i.jsx(xE,{ref:F,isDarkMode:t,onBack:N});case"lighting":return i.jsx(SE,{ref:F,isDarkMode:t,onBack:N});case"receptacles":return i.jsx(CE,{ref:F,isDarkMode:t,onBack:N});case"vfd-sizing":return i.jsx(jE,{ref:F,isDarkMode:t,onBack:N});case"reactance-impedance":return i.jsx(EE,{ref:F,isDarkMode:t,onBack:N});case"power-factor":return i.jsx(IE,{ref:F,isDarkMode:t,onBack:N});case"power-triangle":return i.jsx(RE,{ref:F,isDarkMode:t,onBack:N});case"three-phase-power":return i.jsx(PE,{ref:F,isDarkMode:t,onBack:N});case"calculators":return i.jsx(L3,{isDarkMode:t,onSelectCalculator:e});case"profile":return i.jsx(LE,{isDarkMode:t});case"jobs":return i.jsx(BE,{isDarkMode:t});case"estimates":return i.jsx(FE,{isDarkMode:t,onApplyToJob:j});default:return i.jsx(NE,{isDarkMode:t})}},se=r?r==="calculators"?{title:"Calculator Menu",icon:Kd}:r==="profile"?{title:"Profile",icon:Of}:r==="jobs"?{title:"Job Log",icon:ap}:r==="estimates"?{title:"Estimates",icon:q0}:{"voltage-drop":{title:"Voltage Drop",icon:xx},"ohms-law":{title:"Ohm's Law",icon:px},"reactance-impedance":{title:"Reactance & Impedance",icon:cx},"power-factor":{title:"Power Factor Correction",icon:yx},"box-fill":{title:"Box Fill",icon:ux},"conduit-fill":{title:"Conduit Fill",icon:tx},ampacity:{title:"Ampacity",icon:Zy},"motor-calculations":{title:"Motors",icon:fx},"load-calculations":{title:"Load Calculations",icon:ex},"transformer-sizing":{title:"Transformers",icon:hx},"service-entrance":{title:"Service Entrance Sizing",icon:Xy},"grounding-bonding":{title:"Grounding & Bonding",icon:ox},"conduit-bending":{title:"Conduit Bending",icon:rx},lighting:{title:"Lighting",icon:ax},receptacles:{title:"Receptacles",icon:dx},"vfd-sizing":{title:"VFD Sizing",icon:ix},"power-triangle":{title:"Power Triangle",icon:vx},"three-phase-power":{title:"Three-Phase Power",icon:gx}}[r]||{title:"Electrician's Toolkit",icon:Kd}:{title:"Home",icon:sx},U=se.icon;return i.jsxs("div",{className:"App",style:{background:t?"#000000":"#ffffff"},children:[i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,height:"env(safe-area-inset-top)",background:t?"#000000":"#2563eb",zIndex:101}}),i.jsxs("div",{style:{background:t?"#000000":"#2563eb",padding:"0.5rem 1rem",borderBottom:`1px solid ${V.headerBorder}`,position:"fixed",top:"env(safe-area-inset-top)",left:0,right:0,zIndex:100,display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:"48px",transform:g?"translateY(0)":"translateY(calc(-100% - env(safe-area-inset-top)))",transition:"transform 0.3s ease-in-out",paddingLeft:"max(1rem, env(safe-area-inset-left))",paddingRight:"max(1rem, env(safe-area-inset-right))"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(U,{size:20,color:"white",strokeWidth:2}),i.jsx("h1",{style:{fontSize:"1rem",fontWeight:"600",color:"white",margin:0,letterSpacing:"-0.01em"},children:se.title})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:()=>a(!o),style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"40px",minHeight:"40px",lineHeight:1},children:i.jsx(h3,{size:24,color:"white",style:{display:"block",flexShrink:0}})}),o&&i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:()=>a(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:998}}),i.jsx("div",{style:{position:"absolute",top:"2.5rem",right:0,zIndex:999,background:V.menuBg,border:`1px solid ${V.cardBorder}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",minWidth:"200px",overflow:"hidden"},children:i.jsxs("div",{style:{padding:"0.5rem 0"},children:[r&&r!=="profile"&&r!=="jobs"&&r!=="calculators"&&r!=="estimates"&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:$,style:{width:"100%",padding:"0.75rem 1rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:V.cardText,fontSize:"0.875rem",fontWeight:"500"},onMouseEnter:C=>C.target.style.background=t?"#374151":"#f3f4f6",onMouseLeave:C=>C.target.style.background="transparent",children:[i.jsx(nx,{size:16}),i.jsx("span",{children:"Export to PDF"})]}),i.jsx("div",{style:{height:"1px",background:V.cardBorder,margin:"0.5rem 0"}})]}),i.jsxs("button",{onClick:()=>{n(!t),a(!1)},style:{width:"100%",padding:"0.75rem 1rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",color:V.cardText,fontSize:"0.875rem",fontWeight:"500"},onMouseEnter:C=>C.target.style.background=t?"#374151":"#f3f4f6",onMouseLeave:C=>C.target.style.background="transparent",children:[i.jsx("span",{children:t?"Light Mode":"Dark Mode"}),i.jsx("span",{children:t?"☀️":"🌙"})]})]})})]})]})]}),i.jsx("div",{style:{paddingBottom:"calc(65px + env(safe-area-inset-bottom))",paddingTop:"calc(48px + env(safe-area-inset-top))",paddingLeft:r==="calculators"?"0":"env(safe-area-inset-left)",paddingRight:r==="calculators"?"0":"env(safe-area-inset-right)",position:"relative",minHeight:"100vh",boxSizing:"border-box"},children:r?i.jsx("div",{style:{minHeight:"calc(100vh - 3.5rem)",padding:r==="calculators"||r==="jobs"||r==="profile"||r==="estimates"?"0":"1rem",paddingBottom:"5rem"},children:B()}):B()}),c&&i.jsxs("div",{style:{position:"fixed",bottom:"6rem",left:"50%",transform:"translateX(-50%)",background:"#10b981",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",animation:"slideUp 0.3s ease-out",maxWidth:"90%",textAlign:"center"},children:[i.jsx("span",{style:{fontSize:"1.25rem"},children:"✓"}),i.jsx("span",{children:"PDF saved to Downloads"})]}),i.jsx(kE,{onNavigate:E,currentView:r==="profile"?"profile":r==="jobs"?"jobs":r==="estimates"?"estimates":r==="calculators"||r?"calculators":"home",isDarkMode:t})]})}const OE=kS.createRoot(document.getElementById("root"));OE.render(i.jsx(ku.StrictMode,{children:i.jsx(zE,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{if(window.location.hostname==="localhost"){console.log("Skipping service worker on localhost");return}navigator.serviceWorker.register("/electrician-toolkit/service-worker.js").then(r=>{console.log("ServiceWorker registration successful:",r.scope)}).catch(r=>{console.log("ServiceWorker registration failed:",r)})});export{qr as _,ME as c,Jy as g};
