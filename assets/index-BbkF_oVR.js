var wT=Object.defineProperty;var ST=(r,e,t)=>e in r?wT(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Hr=(r,e,t)=>ST(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var KB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jb(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var dg={exports:{}},Bh={},hg={exports:{}},fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function _T(){if(my)return fr;my=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.iterator;function S(ee){return ee===null||typeof ee!="object"?null:(ee=b&&ee[b]||ee["@@iterator"],typeof ee=="function"?ee:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,E={};function L(ee,W,J){this.props=ee,this.context=W,this.refs=E,this.updater=J||x}L.prototype.isReactComponent={},L.prototype.setState=function(ee,W){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,W,"setState")},L.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function A(){}A.prototype=L.prototype;function O(ee,W,J){this.props=ee,this.context=W,this.refs=E,this.updater=J||x}var $=O.prototype=new A;$.constructor=O,B($,L.prototype),$.isPureReactComponent=!0;var F=Array.isArray,ie=Object.prototype.hasOwnProperty,ue={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function k(ee,W,J){var re,he={},me=null,Se=null;if(W!=null)for(re in W.ref!==void 0&&(Se=W.ref),W.key!==void 0&&(me=""+W.key),W)ie.call(W,re)&&!V.hasOwnProperty(re)&&(he[re]=W[re]);var ke=arguments.length-2;if(ke===1)he.children=J;else if(1<ke){for(var Ce=Array(ke),ge=0;ge<ke;ge++)Ce[ge]=arguments[ge+2];he.children=Ce}if(ee&&ee.defaultProps)for(re in ke=ee.defaultProps,ke)he[re]===void 0&&(he[re]=ke[re]);return{$$typeof:r,type:ee,key:me,ref:Se,props:he,_owner:ue.current}}function I(ee,W){return{$$typeof:r,type:ee.type,key:W,ref:ee.ref,props:ee.props,_owner:ee._owner}}function M(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===r}function C(ee){var W={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(J){return W[J]})}var w=/\/+/g;function N(ee,W){return typeof ee=="object"&&ee!==null&&ee.key!=null?C(""+ee.key):W.toString(36)}function D(ee,W,J,re,he){var me=typeof ee;(me==="undefined"||me==="boolean")&&(ee=null);var Se=!1;if(ee===null)Se=!0;else switch(me){case"string":case"number":Se=!0;break;case"object":switch(ee.$$typeof){case r:case e:Se=!0}}if(Se)return Se=ee,he=he(Se),ee=re===""?"."+N(Se,0):re,F(he)?(J="",ee!=null&&(J=ee.replace(w,"$&/")+"/"),D(he,W,J,"",function(ge){return ge})):he!=null&&(M(he)&&(he=I(he,J+(!he.key||Se&&Se.key===he.key?"":(""+he.key).replace(w,"$&/")+"/")+ee)),W.push(he)),1;if(Se=0,re=re===""?".":re+":",F(ee))for(var ke=0;ke<ee.length;ke++){me=ee[ke];var Ce=re+N(me,ke);Se+=D(me,W,J,Ce,he)}else if(Ce=S(ee),typeof Ce=="function")for(ee=Ce.call(ee),ke=0;!(me=ee.next()).done;)me=me.value,Ce=re+N(me,ke++),Se+=D(me,W,J,Ce,he);else if(me==="object")throw W=String(ee),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Se}function q(ee,W,J){if(ee==null)return ee;var re=[],he=0;return D(ee,re,"","",function(me){return W.call(J,me,he++)}),re}function ne(ee){if(ee._status===-1){var W=ee._result;W=W(),W.then(function(J){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=J)},function(J){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=J)}),ee._status===-1&&(ee._status=0,ee._result=W)}if(ee._status===1)return ee._result.default;throw ee._result}var se={current:null},oe={transition:null},xe={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:oe,ReactCurrentOwner:ue};function we(){throw Error("act(...) is not supported in production builds of React.")}return fr.Children={map:q,forEach:function(ee,W,J){q(ee,function(){W.apply(this,arguments)},J)},count:function(ee){var W=0;return q(ee,function(){W++}),W},toArray:function(ee){return q(ee,function(W){return W})||[]},only:function(ee){if(!M(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}},fr.Component=L,fr.Fragment=t,fr.Profiler=i,fr.PureComponent=O,fr.StrictMode=n,fr.Suspense=h,fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xe,fr.act=we,fr.cloneElement=function(ee,W,J){if(ee==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ee+".");var re=B({},ee.props),he=ee.key,me=ee.ref,Se=ee._owner;if(W!=null){if(W.ref!==void 0&&(me=W.ref,Se=ue.current),W.key!==void 0&&(he=""+W.key),ee.type&&ee.type.defaultProps)var ke=ee.type.defaultProps;for(Ce in W)ie.call(W,Ce)&&!V.hasOwnProperty(Ce)&&(re[Ce]=W[Ce]===void 0&&ke!==void 0?ke[Ce]:W[Ce])}var Ce=arguments.length-2;if(Ce===1)re.children=J;else if(1<Ce){ke=Array(Ce);for(var ge=0;ge<Ce;ge++)ke[ge]=arguments[ge+2];re.children=ke}return{$$typeof:r,type:ee.type,key:he,ref:me,props:re,_owner:Se}},fr.createContext=function(ee){return ee={$$typeof:l,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ee.Provider={$$typeof:o,_context:ee},ee.Consumer=ee},fr.createElement=k,fr.createFactory=function(ee){var W=k.bind(null,ee);return W.type=ee,W},fr.createRef=function(){return{current:null}},fr.forwardRef=function(ee){return{$$typeof:u,render:ee}},fr.isValidElement=M,fr.lazy=function(ee){return{$$typeof:g,_payload:{_status:-1,_result:ee},_init:ne}},fr.memo=function(ee,W){return{$$typeof:d,type:ee,compare:W===void 0?null:W}},fr.startTransition=function(ee){var W=oe.transition;oe.transition={};try{ee()}finally{oe.transition=W}},fr.unstable_act=we,fr.useCallback=function(ee,W){return se.current.useCallback(ee,W)},fr.useContext=function(ee){return se.current.useContext(ee)},fr.useDebugValue=function(){},fr.useDeferredValue=function(ee){return se.current.useDeferredValue(ee)},fr.useEffect=function(ee,W){return se.current.useEffect(ee,W)},fr.useId=function(){return se.current.useId()},fr.useImperativeHandle=function(ee,W,J){return se.current.useImperativeHandle(ee,W,J)},fr.useInsertionEffect=function(ee,W){return se.current.useInsertionEffect(ee,W)},fr.useLayoutEffect=function(ee,W){return se.current.useLayoutEffect(ee,W)},fr.useMemo=function(ee,W){return se.current.useMemo(ee,W)},fr.useReducer=function(ee,W,J){return se.current.useReducer(ee,W,J)},fr.useRef=function(ee){return se.current.useRef(ee)},fr.useState=function(ee){return se.current.useState(ee)},fr.useSyncExternalStore=function(ee,W,J){return se.current.useSyncExternalStore(ee,W,J)},fr.useTransition=function(){return se.current.useTransition()},fr.version="18.3.1",fr}var gy;function Q1(){return gy||(gy=1,hg.exports=_T()),hg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy;function TT(){if(yy)return Bh;yy=1;var r=Q1(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,d){var g,b={},S=null,x=null;d!==void 0&&(S=""+d),h.key!==void 0&&(S=""+h.key),h.ref!==void 0&&(x=h.ref);for(g in h)n.call(h,g)&&!o.hasOwnProperty(g)&&(b[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps,h)b[g]===void 0&&(b[g]=h[g]);return{$$typeof:e,type:u,key:S,ref:x,props:b,_owner:i.current}}return Bh.Fragment=t,Bh.jsx=l,Bh.jsxs=l,Bh}var xy;function AT(){return xy||(xy=1,dg.exports=TT()),dg.exports}var s=AT(),fe=Q1();const CT=Jb(fe);var Ep={},fg={exports:{}},Go={},pg={exports:{}},mg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy;function kT(){return vy||(vy=1,(function(r){function e(oe,xe){var we=oe.length;oe.push(xe);e:for(;0<we;){var ee=we-1>>>1,W=oe[ee];if(0<i(W,xe))oe[ee]=xe,oe[we]=W,we=ee;else break e}}function t(oe){return oe.length===0?null:oe[0]}function n(oe){if(oe.length===0)return null;var xe=oe[0],we=oe.pop();if(we!==xe){oe[0]=we;e:for(var ee=0,W=oe.length,J=W>>>1;ee<J;){var re=2*(ee+1)-1,he=oe[re],me=re+1,Se=oe[me];if(0>i(he,we))me<W&&0>i(Se,he)?(oe[ee]=Se,oe[me]=we,ee=me):(oe[ee]=he,oe[re]=we,ee=re);else if(me<W&&0>i(Se,we))oe[ee]=Se,oe[me]=we,ee=me;else break e}}return xe}function i(oe,xe){var we=oe.sortIndex-xe.sortIndex;return we!==0?we:oe.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();r.unstable_now=function(){return l.now()-u}}var h=[],d=[],g=1,b=null,S=3,x=!1,B=!1,E=!1,L=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(oe){for(var xe=t(d);xe!==null;){if(xe.callback===null)n(d);else if(xe.startTime<=oe)n(d),xe.sortIndex=xe.expirationTime,e(h,xe);else break;xe=t(d)}}function F(oe){if(E=!1,$(oe),!B)if(t(h)!==null)B=!0,ne(ie);else{var xe=t(d);xe!==null&&se(F,xe.startTime-oe)}}function ie(oe,xe){B=!1,E&&(E=!1,A(k),k=-1),x=!0;var we=S;try{for($(xe),b=t(h);b!==null&&(!(b.expirationTime>xe)||oe&&!C());){var ee=b.callback;if(typeof ee=="function"){b.callback=null,S=b.priorityLevel;var W=ee(b.expirationTime<=xe);xe=r.unstable_now(),typeof W=="function"?b.callback=W:b===t(h)&&n(h),$(xe)}else n(h);b=t(h)}if(b!==null)var J=!0;else{var re=t(d);re!==null&&se(F,re.startTime-xe),J=!1}return J}finally{b=null,S=we,x=!1}}var ue=!1,V=null,k=-1,I=5,M=-1;function C(){return!(r.unstable_now()-M<I)}function w(){if(V!==null){var oe=r.unstable_now();M=oe;var xe=!0;try{xe=V(!0,oe)}finally{xe?N():(ue=!1,V=null)}}else ue=!1}var N;if(typeof O=="function")N=function(){O(w)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,q=D.port2;D.port1.onmessage=w,N=function(){q.postMessage(null)}}else N=function(){L(w,0)};function ne(oe){V=oe,ue||(ue=!0,N())}function se(oe,xe){k=L(function(){oe(r.unstable_now())},xe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(oe){oe.callback=null},r.unstable_continueExecution=function(){B||x||(B=!0,ne(ie))},r.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<oe?Math.floor(1e3/oe):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(oe){switch(S){case 1:case 2:case 3:var xe=3;break;default:xe=S}var we=S;S=xe;try{return oe()}finally{S=we}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(oe,xe){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var we=S;S=oe;try{return xe()}finally{S=we}},r.unstable_scheduleCallback=function(oe,xe,we){var ee=r.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?ee+we:ee):we=ee,oe){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=we+W,oe={id:g++,callback:xe,priorityLevel:oe,startTime:we,expirationTime:W,sortIndex:-1},we>ee?(oe.sortIndex=we,e(d,oe),t(h)===null&&oe===t(d)&&(E?(A(k),k=-1):E=!0,se(F,we-ee))):(oe.sortIndex=W,e(h,oe),B||x||(B=!0,ne(ie))),oe},r.unstable_shouldYield=C,r.unstable_wrapCallback=function(oe){var xe=S;return function(){var we=S;S=xe;try{return oe.apply(this,arguments)}finally{S=we}}}})(mg)),mg}var by;function IT(){return by||(by=1,pg.exports=kT()),pg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wy;function ET(){if(wy)return Go;wy=1;var r=Q1(),e=IT();function t(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,f=1;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function o(a,c){l(a,c),l(a+"Capture",c)}function l(a,c){for(i[a]=c,a=0;a<c.length;a++)n.add(c[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},b={};function S(a){return h.call(b,a)?!0:h.call(g,a)?!1:d.test(a)?b[a]=!0:(g[a]=!0,!1)}function x(a,c,f,y){if(f!==null&&f.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return y?!1:f!==null?!f.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function B(a,c,f,y){if(c===null||typeof c>"u"||x(a,c,f,y))return!0;if(y)return!1;if(f!==null)switch(f.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function E(a,c,f,y,T,P,K){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=y,this.attributeNamespace=T,this.mustUseProperty=f,this.propertyName=a,this.type=c,this.sanitizeURL=P,this.removeEmptyString=K}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){L[a]=new E(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];L[c]=new E(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){L[a]=new E(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){L[a]=new E(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){L[a]=new E(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){L[a]=new E(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){L[a]=new E(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){L[a]=new E(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){L[a]=new E(a,5,!1,a.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function O(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(A,O);L[c]=new E(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(A,O);L[c]=new E(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(A,O);L[c]=new E(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){L[a]=new E(a,1,!1,a.toLowerCase(),null,!1,!1)}),L.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){L[a]=new E(a,1,!1,a.toLowerCase(),null,!0,!0)});function $(a,c,f,y){var T=L.hasOwnProperty(c)?L[c]:null;(T!==null?T.type!==0:y||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(B(c,f,T,y)&&(f=null),y||T===null?S(c)&&(f===null?a.removeAttribute(c):a.setAttribute(c,""+f)):T.mustUseProperty?a[T.propertyName]=f===null?T.type===3?!1:"":f:(c=T.attributeName,y=T.attributeNamespace,f===null?a.removeAttribute(c):(T=T.type,f=T===3||T===4&&f===!0?"":""+f,y?a.setAttributeNS(y,c,f):a.setAttribute(c,f))))}var F=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),ue=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),C=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),oe=Symbol.iterator;function xe(a){return a===null||typeof a!="object"?null:(a=oe&&a[oe]||a["@@iterator"],typeof a=="function"?a:null)}var we=Object.assign,ee;function W(a){if(ee===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);ee=c&&c[1]||""}return`
`+ee+a}var J=!1;function re(a,c){if(!a||J)return"";J=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(Ve){var y=Ve}Reflect.construct(a,[],c)}else{try{c.call()}catch(Ve){y=Ve}a.call(c.prototype)}else{try{throw Error()}catch(Ve){y=Ve}a()}}catch(Ve){if(Ve&&y&&typeof Ve.stack=="string"){for(var T=Ve.stack.split(`
`),P=y.stack.split(`
`),K=T.length-1,pe=P.length-1;1<=K&&0<=pe&&T[K]!==P[pe];)pe--;for(;1<=K&&0<=pe;K--,pe--)if(T[K]!==P[pe]){if(K!==1||pe!==1)do if(K--,pe--,0>pe||T[K]!==P[pe]){var be=`
`+T[K].replace(" at new "," at ");return a.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",a.displayName)),be}while(1<=K&&0<=pe);break}}}finally{J=!1,Error.prepareStackTrace=f}return(a=a?a.displayName||a.name:"")?W(a):""}function he(a){switch(a.tag){case 5:return W(a.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return a=re(a.type,!1),a;case 11:return a=re(a.type.render,!1),a;case 1:return a=re(a.type,!0),a;default:return""}}function me(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case V:return"Fragment";case ue:return"Portal";case I:return"Profiler";case k:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case C:return(a.displayName||"Context")+".Consumer";case M:return(a._context.displayName||"Context")+".Provider";case w:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case q:return c=a.displayName||null,c!==null?c:me(a.type)||"Memo";case ne:c=a._payload,a=a._init;try{return me(a(c))}catch{}}return null}function Se(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(c);case 8:return c===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function ke(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ce(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ge(a){var c=Ce(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),y=""+a[c];if(!a.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var T=f.get,P=f.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return T.call(this)},set:function(K){y=""+K,P.call(this,K)}}),Object.defineProperty(a,c,{enumerable:f.enumerable}),{getValue:function(){return y},setValue:function(K){y=""+K},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Fe(a){a._valueTracker||(a._valueTracker=ge(a))}function Ke(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var f=c.getValue(),y="";return a&&(y=Ce(a)?a.checked?"true":"false":a.value),a=y,a!==f?(c.setValue(a),!0):!1}function Qe(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function ze(a,c){var f=c.checked;return we({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??a._wrapperState.initialChecked})}function de(a,c){var f=c.defaultValue==null?"":c.defaultValue,y=c.checked!=null?c.checked:c.defaultChecked;f=ke(c.value!=null?c.value:f),a._wrapperState={initialChecked:y,initialValue:f,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Nt(a,c){c=c.checked,c!=null&&$(a,"checked",c,!1)}function Et(a,c){Nt(a,c);var f=ke(c.value),y=c.type;if(f!=null)y==="number"?(f===0&&a.value===""||a.value!=f)&&(a.value=""+f):a.value!==""+f&&(a.value=""+f);else if(y==="submit"||y==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?He(a,c.type,f):c.hasOwnProperty("defaultValue")&&He(a,c.type,ke(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function wt(a,c,f){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var y=c.type;if(!(y!=="submit"&&y!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,f||c===a.value||(a.value=c),a.defaultValue=c}f=a.name,f!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,f!==""&&(a.name=f)}function He(a,c,f){(c!=="number"||Qe(a.ownerDocument)!==a)&&(f==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+f&&(a.defaultValue=""+f))}var ot=Array.isArray;function rt(a,c,f,y){if(a=a.options,c){c={};for(var T=0;T<f.length;T++)c["$"+f[T]]=!0;for(f=0;f<a.length;f++)T=c.hasOwnProperty("$"+a[f].value),a[f].selected!==T&&(a[f].selected=T),T&&y&&(a[f].defaultSelected=!0)}else{for(f=""+ke(f),c=null,T=0;T<a.length;T++){if(a[T].value===f){a[T].selected=!0,y&&(a[T].defaultSelected=!0);return}c!==null||a[T].disabled||(c=a[T])}c!==null&&(c.selected=!0)}}function Jt(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return we({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function _t(a,c){var f=c.value;if(f==null){if(f=c.children,c=c.defaultValue,f!=null){if(c!=null)throw Error(t(92));if(ot(f)){if(1<f.length)throw Error(t(93));f=f[0]}c=f}c==null&&(c=""),f=c}a._wrapperState={initialValue:ke(f)}}function mr(a,c){var f=ke(c.value),y=ke(c.defaultValue);f!=null&&(f=""+f,f!==a.value&&(a.value=f),c.defaultValue==null&&a.defaultValue!==f&&(a.defaultValue=f)),y!=null&&(a.defaultValue=""+y)}function Ft(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function qt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vr(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?qt(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Ot,Tt=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,f,y,T){MSApp.execUnsafeLocalFunction(function(){return a(c,f,y,T)})}:a})(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(Ot=Ot||document.createElement("div"),Ot.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Ot.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function jt(a,c){if(c){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=c;return}}a.textContent=c}var pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ir=["Webkit","ms","Moz","O"];Object.keys(pt).forEach(function(a){Ir.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),pt[c]=pt[a]})});function ir(a,c,f){return c==null||typeof c=="boolean"||c===""?"":f||typeof c!="number"||c===0||pt.hasOwnProperty(a)&&pt[a]?(""+c).trim():c+"px"}function ht(a,c){a=a.style;for(var f in c)if(c.hasOwnProperty(f)){var y=f.indexOf("--")===0,T=ir(f,c[f],y);f==="float"&&(f="cssFloat"),y?a.setProperty(f,T):a[f]=T}}var Ht=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sr(a,c){if(c){if(Ht[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function It(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tr=null;function Wt(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Er=null,zr=null,$t=null;function Mt(a){if(a=Hl(a)){if(typeof Er!="function")throw Error(t(280));var c=a.stateNode;c&&(c=Hc(c),Er(a.stateNode,a.type,c))}}function ar(a){zr?$t?$t.push(a):$t=[a]:zr=a}function Hi(){if(zr){var a=zr,c=$t;if($t=zr=null,Mt(a),c)for(a=0;a<c.length;a++)Mt(c[a])}}function zn(a,c){return a(c)}function Ro(){}var Vn=!1;function Rt(a,c,f){if(Vn)return a(c,f);Vn=!0;try{return zn(a,c,f)}finally{Vn=!1,(zr!==null||$t!==null)&&(Ro(),Hi())}}function Ni(a,c){var f=a.stateNode;if(f===null)return null;var y=Hc(f);if(y===null)return null;f=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(t(231,c,typeof f));return f}var gi=!1;if(u)try{var On={};Object.defineProperty(On,"passive",{get:function(){gi=!0}}),window.addEventListener("test",On,On),window.removeEventListener("test",On,On)}catch{gi=!1}function Bi(a,c,f,y,T,P,K,pe,be){var Ve=Array.prototype.slice.call(arguments,3);try{c.apply(f,Ve)}catch(Ye){this.onError(Ye)}}var Cr=!1,Vr=null,un=!1,Yn=null,Yo={onError:function(a){Cr=!0,Vr=a}};function Gi(a,c,f,y,T,P,K,pe,be){Cr=!1,Vr=null,Bi.apply(Yo,arguments)}function Ki(a,c,f,y,T,P,K,pe,be){if(Gi.apply(this,arguments),Cr){if(Cr){var Ve=Vr;Cr=!1,Vr=null}else throw Error(t(198));un||(un=!0,Yn=Ve)}}function bn(a){var c=a,f=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(f=c.return),a=c.return;while(a)}return c.tag===3?f:null}function Li(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function Fi(a){if(bn(a)!==a)throw Error(t(188))}function bs(a){var c=a.alternate;if(!c){if(c=bn(a),c===null)throw Error(t(188));return c!==a?null:a}for(var f=a,y=c;;){var T=f.return;if(T===null)break;var P=T.alternate;if(P===null){if(y=T.return,y!==null){f=y;continue}break}if(T.child===P.child){for(P=T.child;P;){if(P===f)return Fi(T),a;if(P===y)return Fi(T),c;P=P.sibling}throw Error(t(188))}if(f.return!==y.return)f=T,y=P;else{for(var K=!1,pe=T.child;pe;){if(pe===f){K=!0,f=T,y=P;break}if(pe===y){K=!0,y=T,f=P;break}pe=pe.sibling}if(!K){for(pe=P.child;pe;){if(pe===f){K=!0,f=P,y=T;break}if(pe===y){K=!0,y=P,f=T;break}pe=pe.sibling}if(!K)throw Error(t(189))}}if(f.alternate!==y)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?a:c}function mo(a){return a=bs(a),a!==null?go(a):null}function go(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=go(a);if(c!==null)return c;a=a.sibling}return null}var ws=e.unstable_scheduleCallback,Qo=e.unstable_cancelCallback,Po=e.unstable_shouldYield,Xo=e.unstable_requestPaint,jr=e.unstable_now,Bl=e.unstable_getCurrentPriorityLevel,Us=e.unstable_ImmediatePriority,yi=e.unstable_UserBlockingPriority,Zo=e.unstable_NormalPriority,wa=e.unstable_LowPriority,Ss=e.unstable_IdlePriority,_s=null,xi=null;function Ya(a){if(xi&&typeof xi.onCommitFiberRoot=="function")try{xi.onCommitFiberRoot(_s,a,void 0,(a.current.flags&128)===128)}catch{}}var Qn=Math.clz32?Math.clz32:Ts,No=Math.log,wr=Math.LN2;function Ts(a){return a>>>=0,a===0?32:31-(No(a)/wr|0)|0}var yo=64,vi=4194304;function lr(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Mn(a,c){var f=a.pendingLanes;if(f===0)return 0;var y=0,T=a.suspendedLanes,P=a.pingedLanes,K=f&268435455;if(K!==0){var pe=K&~T;pe!==0?y=lr(pe):(P&=K,P!==0&&(y=lr(P)))}else K=f&~T,K!==0?y=lr(K):P!==0&&(y=lr(P));if(y===0)return 0;if(c!==0&&c!==y&&(c&T)===0&&(T=y&-y,P=c&-c,T>=P||T===16&&(P&4194240)!==0))return c;if((y&4)!==0&&(y|=f&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=y;0<c;)f=31-Qn(c),T=1<<f,y|=a[f],c&=~T;return y}function xo(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Or(a,c){for(var f=a.suspendedLanes,y=a.pingedLanes,T=a.expirationTimes,P=a.pendingLanes;0<P;){var K=31-Qn(P),pe=1<<K,be=T[K];be===-1?((pe&f)===0||(pe&y)!==0)&&(T[K]=xo(pe,c)):be<=c&&(a.expiredLanes|=pe),P&=~pe}}function qs(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Qa(){var a=yo;return yo<<=1,(yo&4194240)===0&&(yo=64),a}function Xa(a){for(var c=[],f=0;31>f;f++)c.push(a);return c}function Hs(a,c,f){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-Qn(c),a[c]=f}function Bo(a,c){var f=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var y=a.eventTimes;for(a=a.expirationTimes;0<f;){var T=31-Qn(f),P=1<<T;c[T]=0,y[T]=-1,a[T]=-1,f&=~P}}function Sa(a,c){var f=a.entangledLanes|=c;for(a=a.entanglements;f;){var y=31-Qn(f),T=1<<y;T&c|a[y]&c&&(a[y]|=c),f&=~T}}var or=0;function li(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Gs,_a,Za,el,Ks,bi=!1,vo=[],Lo=null,wi=null,wn=null,Bt=new Map,es=new Map,zi=[],Ll="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function As(a,c){switch(a){case"focusin":case"focusout":Lo=null;break;case"dragenter":case"dragleave":wi=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":Bt.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":es.delete(c.pointerId)}}function Dn(a,c,f,y,T,P){return a===null||a.nativeEvent!==P?(a={blockedOn:c,domEventName:f,eventSystemFlags:y,nativeEvent:P,targetContainers:[T]},c!==null&&(c=Hl(c),c!==null&&_a(c)),a):(a.eventSystemFlags|=y,c=a.targetContainers,T!==null&&c.indexOf(T)===-1&&c.push(T),a)}function Fo(a,c,f,y,T){switch(c){case"focusin":return Lo=Dn(Lo,a,c,f,y,T),!0;case"dragenter":return wi=Dn(wi,a,c,f,y,T),!0;case"mouseover":return wn=Dn(wn,a,c,f,y,T),!0;case"pointerover":var P=T.pointerId;return Bt.set(P,Dn(Bt.get(P)||null,a,c,f,y,T)),!0;case"gotpointercapture":return P=T.pointerId,es.set(P,Dn(es.get(P)||null,a,c,f,y,T)),!0}return!1}function Ta(a){var c=Na(a.target);if(c!==null){var f=bn(c);if(f!==null){if(c=f.tag,c===13){if(c=Li(f),c!==null){a.blockedOn=c,Ks(a.priority,function(){Za(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Rr(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var f=Cs(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(f===null){f=a.nativeEvent;var y=new f.constructor(f.type,f);tr=y,f.target.dispatchEvent(y),tr=null}else return c=Hl(f),c!==null&&_a(c),a.blockedOn=f,!1;c.shift()}return!0}function Js(a,c,f){Rr(a)&&f.delete(c)}function tl(){bi=!1,Lo!==null&&Rr(Lo)&&(Lo=null),wi!==null&&Rr(wi)&&(wi=null),wn!==null&&Rr(wn)&&(wn=null),Bt.forEach(Js),es.forEach(Js)}function Ji(a,c){a.blockedOn===c&&(a.blockedOn=null,bi||(bi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,tl)))}function bo(a){function c(T){return Ji(T,a)}if(0<vo.length){Ji(vo[0],a);for(var f=1;f<vo.length;f++){var y=vo[f];y.blockedOn===a&&(y.blockedOn=null)}}for(Lo!==null&&Ji(Lo,a),wi!==null&&Ji(wi,a),wn!==null&&Ji(wn,a),Bt.forEach(c),es.forEach(c),f=0;f<zi.length;f++)y=zi[f],y.blockedOn===a&&(y.blockedOn=null);for(;0<zi.length&&(f=zi[0],f.blockedOn===null);)Ta(f),f.blockedOn===null&&zi.shift()}var Yi=F.ReactCurrentBatchConfig,ts=!0;function Qi(a,c,f,y){var T=or,P=Yi.transition;Yi.transition=null;try{or=1,rs(a,c,f,y)}finally{or=T,Yi.transition=P}}function Aa(a,c,f,y){var T=or,P=Yi.transition;Yi.transition=null;try{or=4,rs(a,c,f,y)}finally{or=T,Yi.transition=P}}function rs(a,c,f,y){if(ts){var T=Cs(a,c,f,y);if(T===null)$c(a,c,y,Si,f),As(a,y);else if(Fo(T,a,c,f,y))y.stopPropagation();else if(As(a,y),c&4&&-1<Ll.indexOf(a)){for(;T!==null;){var P=Hl(T);if(P!==null&&Gs(P),P=Cs(a,c,f,y),P===null&&$c(a,c,y,Si,f),P===T)break;T=P}T!==null&&y.stopPropagation()}else $c(a,c,y,null,f)}}var Si=null;function Cs(a,c,f,y){if(Si=null,a=Wt(y),a=Na(a),a!==null)if(c=bn(a),c===null)a=null;else if(f=c.tag,f===13){if(a=Li(c),a!==null)return a;a=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return Si=a,null}function ns(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bl()){case Us:return 1;case yi:return 4;case Zo:case wa:return 16;case Ss:return 536870912;default:return 16}default:return 16}}var ci=null,zo=null,Vo=null;function rl(){if(Vo)return Vo;var a,c=zo,f=c.length,y,T="value"in ci?ci.value:ci.textContent,P=T.length;for(a=0;a<f&&c[a]===T[a];a++);var K=f-a;for(y=1;y<=K&&c[f-y]===T[P-y];y++);return Vo=T.slice(a,1<y?1-y:void 0)}function Vi(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Xn(){return!0}function Ca(){return!1}function Wn(a){function c(f,y,T,P,K){this._reactName=f,this._targetInst=T,this.type=y,this.nativeEvent=P,this.target=K,this.currentTarget=null;for(var pe in a)a.hasOwnProperty(pe)&&(f=a[pe],this[pe]=f?f(P):P[pe]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Xn:Ca,this.isPropagationStopped=Ca,this}return we(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),c}var _i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ks=Wn(_i),_=we({},_i,{view:0,detail:0}),H=Wn(_),ce,ye,Ae,We=we({},_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dt,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ae&&(Ae&&a.type==="mousemove"?(ce=a.screenX-Ae.screenX,ye=a.screenY-Ae.screenY):ye=ce=0,Ae=a),ce)},movementY:function(a){return"movementY"in a?a.movementY:ye}}),Ge=Wn(We),lt=we({},We,{dataTransfer:0}),mt=Wn(lt),Lt=we({},_,{relatedTarget:0}),vt=Wn(Lt),gr=we({},_i,{animationName:0,elapsedTime:0,pseudoElement:0}),Qr=Wn(gr),Mr=we({},_i,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),m=Wn(Mr),R=we({},_i,{data:0}),U=Wn(R),Z={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ie={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Be={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tt(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=Be[a])?!!c[a]:!1}function Dt(){return tt}var Dr=we({},_,{key:function(a){if(a.key){var c=Z[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Vi(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Ie[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dt,charCode:function(a){return a.type==="keypress"?Vi(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Vi(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),dr=Wn(Dr),Xr=we({},We,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$n=Wn(Xr),Oi=we({},_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dt}),en=Wn(Oi),Ti=we({},_i,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oo=Wn(Ti),Ys=we({},We,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Fc=Wn(Ys),dn=[9,13,27,32],is=u&&"CompositionEvent"in window,Is=null;u&&"documentMode"in document&&(Is=document.documentMode);var $u=u&&"TextEvent"in window&&!Is,wo=u&&(!is||Is&&8<Is&&11>=Is),ka=" ",Fl=!1;function zl(a,c){switch(a){case"keyup":return dn.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qs(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Mo=!1;function So(a,c){switch(a){case"compositionend":return Qs(c);case"keypress":return c.which!==32?null:(Fl=!0,ka);case"textInput":return a=c.data,a===ka&&Fl?null:a;default:return null}}function _o(a,c){if(Mo)return a==="compositionend"||!is&&zl(a,c)?(a=rl(),Vo=zo=ci=null,Mo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return wo&&c.locale!=="ko"?null:c.data;default:return null}}var Ia={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Es(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!Ia[a.type]:c==="textarea"}function Xs(a,c,f,y){ar(y),c=Ku(c,"onChange"),0<c.length&&(f=new ks("onChange","change",null,f,y),a.push({event:f,listeners:c}))}var Zs=null,js=null;function Sn(a){Dc(a,0)}function nl(a){var c=fl(a);if(Ke(c))return a}function Rs(a,c){if(a==="change")return c}var os=!1;if(u){var il;if(u){var ol="oninput"in document;if(!ol){var Vl=document.createElement("div");Vl.setAttribute("oninput","return;"),ol=typeof Vl.oninput=="function"}il=ol}else il=!1;os=il&&(!document.documentMode||9<document.documentMode)}function Ol(){Zs&&(Zs.detachEvent("onpropertychange",ea),js=Zs=null)}function ea(a){if(a.propertyName==="value"&&nl(js)){var c=[];Xs(c,js,a,Wt(a)),Rt(Sn,c)}}function Ea(a,c,f){a==="focusin"?(Ol(),Zs=c,js=f,Zs.attachEvent("onpropertychange",ea)):a==="focusout"&&Ol()}function ja(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return nl(js)}function sl(a,c){if(a==="click")return nl(c)}function Ra(a,c){if(a==="input"||a==="change")return nl(c)}function al(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var hn=typeof Object.is=="function"?Object.is:al;function Xi(a,c){if(hn(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var f=Object.keys(a),y=Object.keys(c);if(f.length!==y.length)return!1;for(y=0;y<f.length;y++){var T=f[y];if(!h.call(c,T)||!hn(a[T],c[T]))return!1}return!0}function Sr(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Br(a,c){var f=Sr(a);a=0;for(var y;f;){if(f.nodeType===3){if(y=a+f.textContent.length,a<=c&&y>=c)return{node:f,offset:c-a};a=y}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Sr(f)}}function fn(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?fn(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function jn(){for(var a=window,c=Qe();c instanceof a.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)a=c.contentWindow;else break;c=Qe(a.document)}return c}function ss(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function zc(a){var c=jn(),f=a.focusedElem,y=a.selectionRange;if(c!==f&&f&&f.ownerDocument&&fn(f.ownerDocument.documentElement,f)){if(y!==null&&ss(f)){if(c=y.start,a=y.end,a===void 0&&(a=c),"selectionStart"in f)f.selectionStart=c,f.selectionEnd=Math.min(a,f.value.length);else if(a=(c=f.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var T=f.textContent.length,P=Math.min(y.start,T);y=y.end===void 0?P:Math.min(y.end,T),!a.extend&&P>y&&(T=y,y=P,P=T),T=Br(f,P);var K=Br(f,y);T&&K&&(a.rangeCount!==1||a.anchorNode!==T.node||a.anchorOffset!==T.offset||a.focusNode!==K.node||a.focusOffset!==K.offset)&&(c=c.createRange(),c.setStart(T.node,T.offset),a.removeAllRanges(),P>y?(a.addRange(c),a.extend(K.node,K.offset)):(c.setEnd(K.node,K.offset),a.addRange(c)))}}for(c=[],a=f;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<c.length;f++)a=c[f],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Ml=u&&"documentMode"in document&&11>=document.documentMode,ta=null,Uu=null,Dl=null,qu=!1;function uh(a,c,f){var y=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;qu||ta==null||ta!==Qe(y)||(y=ta,"selectionStart"in y&&ss(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Dl&&Xi(Dl,y)||(Dl=y,y=Ku(Uu,"onSelect"),0<y.length&&(c=new ks("onSelect","select",null,c,f),a.push({event:c,listeners:y}),c.target=ta)))}function Vc(a,c){var f={};return f[a.toLowerCase()]=c.toLowerCase(),f["Webkit"+a]="webkit"+c,f["Moz"+a]="moz"+c,f}var ll={animationend:Vc("Animation","AnimationEnd"),animationiteration:Vc("Animation","AnimationIteration"),animationstart:Vc("Animation","AnimationStart"),transitionend:Vc("Transition","TransitionEnd")},cl={},dh={};u&&(dh=document.createElement("div").style,"AnimationEvent"in window||(delete ll.animationend.animation,delete ll.animationiteration.animation,delete ll.animationstart.animation),"TransitionEvent"in window||delete ll.transitionend.transition);function Oc(a){if(cl[a])return cl[a];if(!ll[a])return a;var c=ll[a],f;for(f in c)if(c.hasOwnProperty(f)&&f in dh)return cl[a]=c[f];return a}var hh=Oc("animationend"),fh=Oc("animationiteration"),ph=Oc("animationstart"),mh=Oc("transitionend"),gh=new Map,yh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ps(a,c){gh.set(a,c),o(c,[a])}for(var Wl=0;Wl<yh.length;Wl++){var Mi=yh[Wl],Do=Mi.toLowerCase(),Hu=Mi[0].toUpperCase()+Mi.slice(1);Ps(Do,"on"+Hu)}Ps(hh,"onAnimationEnd"),Ps(fh,"onAnimationIteration"),Ps(ph,"onAnimationStart"),Ps("dblclick","onDoubleClick"),Ps("focusin","onFocus"),Ps("focusout","onBlur"),Ps(mh,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pa));function Mc(a,c,f){var y=a.type||"unknown-event";a.currentTarget=f,Ki(y,c,void 0,a),a.currentTarget=null}function Dc(a,c){c=(c&4)!==0;for(var f=0;f<a.length;f++){var y=a[f],T=y.event;y=y.listeners;e:{var P=void 0;if(c)for(var K=y.length-1;0<=K;K--){var pe=y[K],be=pe.instance,Ve=pe.currentTarget;if(pe=pe.listener,be!==P&&T.isPropagationStopped())break e;Mc(T,pe,Ve),P=be}else for(K=0;K<y.length;K++){if(pe=y[K],be=pe.instance,Ve=pe.currentTarget,pe=pe.listener,be!==P&&T.isPropagationStopped())break e;Mc(T,pe,Ve),P=be}}}if(un)throw a=Yn,un=!1,Yn=null,a}function Wr(a,c){var f=c[eo];f===void 0&&(f=c[eo]=new Set);var y=a+"__bubble";f.has(y)||(Wc(c,a,2,!1),f.add(y))}function Gu(a,c,f){var y=0;c&&(y|=4),Wc(f,a,y,c)}var $l="_reactListening"+Math.random().toString(36).slice(2);function ul(a){if(!a[$l]){a[$l]=!0,n.forEach(function(f){f!=="selectionchange"&&(Jf.has(f)||Gu(f,!1,a),Gu(f,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[$l]||(c[$l]=!0,Gu("selectionchange",!1,c))}}function Wc(a,c,f,y){switch(ns(c)){case 1:var T=Qi;break;case 4:T=Aa;break;default:T=rs}f=T.bind(null,c,f,a),T=void 0,!gi||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(T=!0),y?T!==void 0?a.addEventListener(c,f,{capture:!0,passive:T}):a.addEventListener(c,f,!0):T!==void 0?a.addEventListener(c,f,{passive:T}):a.addEventListener(c,f,!1)}function $c(a,c,f,y,T){var P=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var K=y.tag;if(K===3||K===4){var pe=y.stateNode.containerInfo;if(pe===T||pe.nodeType===8&&pe.parentNode===T)break;if(K===4)for(K=y.return;K!==null;){var be=K.tag;if((be===3||be===4)&&(be=K.stateNode.containerInfo,be===T||be.nodeType===8&&be.parentNode===T))return;K=K.return}for(;pe!==null;){if(K=Na(pe),K===null)return;if(be=K.tag,be===5||be===6){y=P=K;continue e}pe=pe.parentNode}}y=y.return}Rt(function(){var Ve=P,Ye=Wt(f),Xe=[];e:{var Je=gh.get(a);if(Je!==void 0){var at=ks,gt=a;switch(a){case"keypress":if(Vi(f)===0)break e;case"keydown":case"keyup":at=dr;break;case"focusin":gt="focus",at=vt;break;case"focusout":gt="blur",at=vt;break;case"beforeblur":case"afterblur":at=vt;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=Ge;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=mt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=en;break;case hh:case fh:case ph:at=Qr;break;case mh:at=Oo;break;case"scroll":at=H;break;case"wheel":at=Fc;break;case"copy":case"cut":case"paste":at=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=$n}var bt=(c&4)!==0,Hn=!bt&&a==="scroll",Pe=bt?Je!==null?Je+"Capture":null:Je;bt=[];for(var Te=Ve,Le;Te!==null;){Le=Te;var et=Le.stateNode;if(Le.tag===5&&et!==null&&(Le=et,Pe!==null&&(et=Ni(Te,Pe),et!=null&&bt.push(Uc(Te,et,Le)))),Hn)break;Te=Te.return}0<bt.length&&(Je=new at(Je,gt,null,f,Ye),Xe.push({event:Je,listeners:bt}))}}if((c&7)===0){e:{if(Je=a==="mouseover"||a==="pointerover",at=a==="mouseout"||a==="pointerout",Je&&f!==tr&&(gt=f.relatedTarget||f.fromElement)&&(Na(gt)||gt[Ai]))break e;if((at||Je)&&(Je=Ye.window===Ye?Ye:(Je=Ye.ownerDocument)?Je.defaultView||Je.parentWindow:window,at?(gt=f.relatedTarget||f.toElement,at=Ve,gt=gt?Na(gt):null,gt!==null&&(Hn=bn(gt),gt!==Hn||gt.tag!==5&&gt.tag!==6)&&(gt=null)):(at=null,gt=Ve),at!==gt)){if(bt=Ge,et="onMouseLeave",Pe="onMouseEnter",Te="mouse",(a==="pointerout"||a==="pointerover")&&(bt=$n,et="onPointerLeave",Pe="onPointerEnter",Te="pointer"),Hn=at==null?Je:fl(at),Le=gt==null?Je:fl(gt),Je=new bt(et,Te+"leave",at,f,Ye),Je.target=Hn,Je.relatedTarget=Le,et=null,Na(Ye)===Ve&&(bt=new bt(Pe,Te+"enter",gt,f,Ye),bt.target=Le,bt.relatedTarget=Hn,et=bt),Hn=et,at&&gt)t:{for(bt=at,Pe=gt,Te=0,Le=bt;Le;Le=dl(Le))Te++;for(Le=0,et=Pe;et;et=dl(et))Le++;for(;0<Te-Le;)bt=dl(bt),Te--;for(;0<Le-Te;)Pe=dl(Pe),Le--;for(;Te--;){if(bt===Pe||Pe!==null&&bt===Pe.alternate)break t;bt=dl(bt),Pe=dl(Pe)}bt=null}else bt=null;at!==null&&Yf(Xe,Je,at,bt,!1),gt!==null&&Hn!==null&&Yf(Xe,Hn,gt,bt,!0)}}e:{if(Je=Ve?fl(Ve):window,at=Je.nodeName&&Je.nodeName.toLowerCase(),at==="select"||at==="input"&&Je.type==="file")var At=Rs;else if(Es(Je))if(os)At=Ra;else{At=ja;var zt=Ea}else(at=Je.nodeName)&&at.toLowerCase()==="input"&&(Je.type==="checkbox"||Je.type==="radio")&&(At=sl);if(At&&(At=At(a,Ve))){Xs(Xe,At,f,Ye);break e}zt&&zt(a,Je,Ve),a==="focusout"&&(zt=Je._wrapperState)&&zt.controlled&&Je.type==="number"&&He(Je,"number",Je.value)}switch(zt=Ve?fl(Ve):window,a){case"focusin":(Es(zt)||zt.contentEditable==="true")&&(ta=zt,Uu=Ve,Dl=null);break;case"focusout":Dl=Uu=ta=null;break;case"mousedown":qu=!0;break;case"contextmenu":case"mouseup":case"dragend":qu=!1,uh(Xe,f,Ye);break;case"selectionchange":if(Ml)break;case"keydown":case"keyup":uh(Xe,f,Ye)}var Vt;if(is)e:{switch(a){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else Mo?zl(a,f)&&(Yt="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Yt="onCompositionStart");Yt&&(wo&&f.locale!=="ko"&&(Mo||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Mo&&(Vt=rl()):(ci=Ye,zo="value"in ci?ci.value:ci.textContent,Mo=!0)),zt=Ku(Ve,Yt),0<zt.length&&(Yt=new U(Yt,a,null,f,Ye),Xe.push({event:Yt,listeners:zt}),Vt?Yt.data=Vt:(Vt=Qs(f),Vt!==null&&(Yt.data=Vt)))),(Vt=$u?So(a,f):_o(a,f))&&(Ve=Ku(Ve,"onBeforeInput"),0<Ve.length&&(Ye=new U("onBeforeInput","beforeinput",null,f,Ye),Xe.push({event:Ye,listeners:Ve}),Ye.data=Vt))}Dc(Xe,c)})}function Uc(a,c,f){return{instance:a,listener:c,currentTarget:f}}function Ku(a,c){for(var f=c+"Capture",y=[];a!==null;){var T=a,P=T.stateNode;T.tag===5&&P!==null&&(T=P,P=Ni(a,f),P!=null&&y.unshift(Uc(a,P,T)),P=Ni(a,c),P!=null&&y.push(Uc(a,P,T))),a=a.return}return y}function dl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Yf(a,c,f,y,T){for(var P=c._reactName,K=[];f!==null&&f!==y;){var pe=f,be=pe.alternate,Ve=pe.stateNode;if(be!==null&&be===y)break;pe.tag===5&&Ve!==null&&(pe=Ve,T?(be=Ni(f,P),be!=null&&K.unshift(Uc(f,be,pe))):T||(be=Ni(f,P),be!=null&&K.push(Uc(f,be,pe)))),f=f.return}K.length!==0&&a.push({event:c,listeners:K})}var A0=/\r\n?/g,C0=/\u0000|\uFFFD/g;function Qf(a){return(typeof a=="string"?a:""+a).replace(A0,`
`).replace(C0,"")}function Ju(a,c,f){if(c=Qf(c),Qf(a)!==c&&f)throw Error(t(425))}function Ul(){}var qc=null,hl=null;function xh(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var vh=typeof setTimeout=="function"?setTimeout:void 0,Xf=typeof clearTimeout=="function"?clearTimeout:void 0,Zf=typeof Promise=="function"?Promise:void 0,k0=typeof queueMicrotask=="function"?queueMicrotask:typeof Zf<"u"?function(a){return Zf.resolve(null).then(a).catch(I0)}:vh;function I0(a){setTimeout(function(){throw a})}function bh(a,c){var f=c,y=0;do{var T=f.nextSibling;if(a.removeChild(f),T&&T.nodeType===8)if(f=T.data,f==="/$"){if(y===0){a.removeChild(T),bo(c);return}y--}else f!=="$"&&f!=="$?"&&f!=="$!"||y++;f=T}while(f);bo(c)}function Di(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function Wo(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return a;c--}else f==="/$"&&c++}a=a.previousSibling}return null}var Zi=Math.random().toString(36).slice(2),Ns="__reactFiber$"+Zi,ql="__reactProps$"+Zi,Ai="__reactContainer$"+Zi,eo="__reactEvents$"+Zi,E0="__reactListeners$"+Zi,j0="__reactHandles$"+Zi;function Na(a){var c=a[Ns];if(c)return c;for(var f=a.parentNode;f;){if(c=f[Ai]||f[Ns]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(a=Wo(a);a!==null;){if(f=a[Ns])return f;a=Wo(a)}return c}a=f,f=a.parentNode}return null}function Hl(a){return a=a[Ns]||a[Ai],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function fl(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function Hc(a){return a[ql]||null}var wh=[],ra=-1;function as(a){return{current:a}}function Pr(a){0>ra||(a.current=wh[ra],wh[ra]=null,ra--)}function Lr(a,c){ra++,wh[ra]=a.current,a.current=c}var Ba={},ui=as(Ba),to=as(!1),pl=Ba;function Gl(a,c){var f=a.type.contextTypes;if(!f)return Ba;var y=a.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var T={},P;for(P in f)T[P]=c[P];return y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=T),T}function ro(a){return a=a.childContextTypes,a!=null}function Yu(){Pr(to),Pr(ui)}function ep(a,c,f){if(ui.current!==Ba)throw Error(t(168));Lr(ui,c),Lr(to,f)}function Sh(a,c,f){var y=a.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return f;y=y.getChildContext();for(var T in y)if(!(T in c))throw Error(t(108,Se(a)||"Unknown",T));return we({},f,y)}function ml(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ba,pl=ui.current,Lr(ui,a),Lr(to,to.current),!0}function tp(a,c,f){var y=a.stateNode;if(!y)throw Error(t(169));f?(a=Sh(a,c,pl),y.__reactInternalMemoizedMergedChildContext=a,Pr(to),Pr(ui),Lr(ui,a)):Pr(to),Lr(to,f)}var na=null,Gc=!1,p=!1;function v(a){na===null?na=[a]:na.push(a)}function j(a){Gc=!0,v(a)}function z(){if(!p&&na!==null){p=!0;var a=0,c=or;try{var f=na;for(or=1;a<f.length;a++){var y=f[a];do y=y(!0);while(y!==null)}na=null,Gc=!1}catch(T){throw na!==null&&(na=na.slice(a+1)),ws(Us,z),T}finally{or=c,p=!1}}return null}var G=[],Y=0,Q=null,X=0,te=[],ae=0,ve=null,je=1,le="";function _e(a,c){G[Y++]=X,G[Y++]=Q,Q=a,X=c}function Ee(a,c,f){te[ae++]=je,te[ae++]=le,te[ae++]=ve,ve=a;var y=je;a=le;var T=32-Qn(y)-1;y&=~(1<<T),f+=1;var P=32-Qn(c)+T;if(30<P){var K=T-T%5;P=(y&(1<<K)-1).toString(32),y>>=K,T-=K,je=1<<32-Qn(c)+T|f<<T|y,le=P+a}else je=1<<P|f<<T|y,le=a}function De(a){a.return!==null&&(_e(a,1),Ee(a,1,0))}function Ne(a){for(;a===Q;)Q=G[--Y],G[Y]=null,X=G[--Y],G[Y]=null;for(;a===ve;)ve=te[--ae],te[ae]=null,le=te[--ae],te[ae]=null,je=te[--ae],te[ae]=null}var Oe=null,Me=null,Ue=!1,qe=null;function St(a,c){var f=Vs(5,null,null,0);f.elementType="DELETED",f.stateNode=c,f.return=a,c=a.deletions,c===null?(a.deletions=[f],a.flags|=16):c.push(f)}function ct(a,c){switch(a.tag){case 5:var f=a.type;return c=c.nodeType!==1||f.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,Oe=a,Me=Di(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,Oe=a,Me=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(f=ve!==null?{id:je,overflow:le}:null,a.memoizedState={dehydrated:c,treeContext:f,retryLane:1073741824},f=Vs(18,null,null,0),f.stateNode=c,f.return=a,a.child=f,Oe=a,Me=null,!0):!1;default:return!1}}function Xt(a){return(a.mode&1)!==0&&(a.flags&128)===0}function ft(a){if(Ue){var c=Me;if(c){var f=c;if(!ct(a,c)){if(Xt(a))throw Error(t(418));c=Di(f.nextSibling);var y=Oe;c&&ct(a,c)?St(y,f):(a.flags=a.flags&-4097|2,Ue=!1,Oe=a)}}else{if(Xt(a))throw Error(t(418));a.flags=a.flags&-4097|2,Ue=!1,Oe=a}}}function hr(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Oe=a}function pn(a){if(a!==Oe)return!1;if(!Ue)return hr(a),Ue=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!xh(a.type,a.memoizedProps)),c&&(c=Me)){if(Xt(a))throw rr(),Error(t(418));for(;c;)St(a,c),c=Di(c.nextSibling)}if(hr(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"){if(c===0){Me=Di(a.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++}a=a.nextSibling}Me=null}}else Me=Oe?Di(a.stateNode.nextSibling):null;return!0}function rr(){for(var a=Me;a;)a=Di(a.nextSibling)}function ut(){Me=Oe=null,Ue=!1}function nt(a){qe===null?qe=[a]:qe.push(a)}var _n=F.ReactCurrentBatchConfig;function Gt(a,c,f){if(a=f.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var y=f.stateNode}if(!y)throw Error(t(147,a));var T=y,P=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===P?c.ref:(c=function(K){var pe=T.refs;K===null?delete pe[P]:pe[P]=K},c._stringRef=P,c)}if(typeof a!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,a))}return a}function cr(a,c){throw a=Object.prototype.toString.call(c),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function Zr(a){var c=a._init;return c(a._payload)}function Zn(a){function c(Pe,Te){if(a){var Le=Pe.deletions;Le===null?(Pe.deletions=[Te],Pe.flags|=16):Le.push(Te)}}function f(Pe,Te){if(!a)return null;for(;Te!==null;)c(Pe,Te),Te=Te.sibling;return null}function y(Pe,Te){for(Pe=new Map;Te!==null;)Te.key!==null?Pe.set(Te.key,Te):Pe.set(Te.index,Te),Te=Te.sibling;return Pe}function T(Pe,Te){return Pe=nc(Pe,Te),Pe.index=0,Pe.sibling=null,Pe}function P(Pe,Te,Le){return Pe.index=Le,a?(Le=Pe.alternate,Le!==null?(Le=Le.index,Le<Te?(Pe.flags|=2,Te):Le):(Pe.flags|=2,Te)):(Pe.flags|=1048576,Te)}function K(Pe){return a&&Pe.alternate===null&&(Pe.flags|=2),Pe}function pe(Pe,Te,Le,et){return Te===null||Te.tag!==6?(Te=og(Le,Pe.mode,et),Te.return=Pe,Te):(Te=T(Te,Le),Te.return=Pe,Te)}function be(Pe,Te,Le,et){var At=Le.type;return At===V?Ye(Pe,Te,Le.props.children,et,Le.key):Te!==null&&(Te.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===ne&&Zr(At)===Te.type)?(et=T(Te,Le.props),et.ref=Gt(Pe,Te,Le),et.return=Pe,et):(et=wp(Le.type,Le.key,Le.props,null,Pe.mode,et),et.ref=Gt(Pe,Te,Le),et.return=Pe,et)}function Ve(Pe,Te,Le,et){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==Le.containerInfo||Te.stateNode.implementation!==Le.implementation?(Te=sg(Le,Pe.mode,et),Te.return=Pe,Te):(Te=T(Te,Le.children||[]),Te.return=Pe,Te)}function Ye(Pe,Te,Le,et,At){return Te===null||Te.tag!==7?(Te=tu(Le,Pe.mode,et,At),Te.return=Pe,Te):(Te=T(Te,Le),Te.return=Pe,Te)}function Xe(Pe,Te,Le){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Te=og(""+Te,Pe.mode,Le),Te.return=Pe,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case ie:return Le=wp(Te.type,Te.key,Te.props,null,Pe.mode,Le),Le.ref=Gt(Pe,null,Te),Le.return=Pe,Le;case ue:return Te=sg(Te,Pe.mode,Le),Te.return=Pe,Te;case ne:var et=Te._init;return Xe(Pe,et(Te._payload),Le)}if(ot(Te)||xe(Te))return Te=tu(Te,Pe.mode,Le,null),Te.return=Pe,Te;cr(Pe,Te)}return null}function Je(Pe,Te,Le,et){var At=Te!==null?Te.key:null;if(typeof Le=="string"&&Le!==""||typeof Le=="number")return At!==null?null:pe(Pe,Te,""+Le,et);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case ie:return Le.key===At?be(Pe,Te,Le,et):null;case ue:return Le.key===At?Ve(Pe,Te,Le,et):null;case ne:return At=Le._init,Je(Pe,Te,At(Le._payload),et)}if(ot(Le)||xe(Le))return At!==null?null:Ye(Pe,Te,Le,et,null);cr(Pe,Le)}return null}function at(Pe,Te,Le,et,At){if(typeof et=="string"&&et!==""||typeof et=="number")return Pe=Pe.get(Le)||null,pe(Te,Pe,""+et,At);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case ie:return Pe=Pe.get(et.key===null?Le:et.key)||null,be(Te,Pe,et,At);case ue:return Pe=Pe.get(et.key===null?Le:et.key)||null,Ve(Te,Pe,et,At);case ne:var zt=et._init;return at(Pe,Te,Le,zt(et._payload),At)}if(ot(et)||xe(et))return Pe=Pe.get(Le)||null,Ye(Te,Pe,et,At,null);cr(Te,et)}return null}function gt(Pe,Te,Le,et){for(var At=null,zt=null,Vt=Te,Yt=Te=0,ji=null;Vt!==null&&Yt<Le.length;Yt++){Vt.index>Yt?(ji=Vt,Vt=null):ji=Vt.sibling;var kr=Je(Pe,Vt,Le[Yt],et);if(kr===null){Vt===null&&(Vt=ji);break}a&&Vt&&kr.alternate===null&&c(Pe,Vt),Te=P(kr,Te,Yt),zt===null?At=kr:zt.sibling=kr,zt=kr,Vt=ji}if(Yt===Le.length)return f(Pe,Vt),Ue&&_e(Pe,Yt),At;if(Vt===null){for(;Yt<Le.length;Yt++)Vt=Xe(Pe,Le[Yt],et),Vt!==null&&(Te=P(Vt,Te,Yt),zt===null?At=Vt:zt.sibling=Vt,zt=Vt);return Ue&&_e(Pe,Yt),At}for(Vt=y(Pe,Vt);Yt<Le.length;Yt++)ji=at(Vt,Pe,Yt,Le[Yt],et),ji!==null&&(a&&ji.alternate!==null&&Vt.delete(ji.key===null?Yt:ji.key),Te=P(ji,Te,Yt),zt===null?At=ji:zt.sibling=ji,zt=ji);return a&&Vt.forEach(function(ic){return c(Pe,ic)}),Ue&&_e(Pe,Yt),At}function bt(Pe,Te,Le,et){var At=xe(Le);if(typeof At!="function")throw Error(t(150));if(Le=At.call(Le),Le==null)throw Error(t(151));for(var zt=At=null,Vt=Te,Yt=Te=0,ji=null,kr=Le.next();Vt!==null&&!kr.done;Yt++,kr=Le.next()){Vt.index>Yt?(ji=Vt,Vt=null):ji=Vt.sibling;var ic=Je(Pe,Vt,kr.value,et);if(ic===null){Vt===null&&(Vt=ji);break}a&&Vt&&ic.alternate===null&&c(Pe,Vt),Te=P(ic,Te,Yt),zt===null?At=ic:zt.sibling=ic,zt=ic,Vt=ji}if(kr.done)return f(Pe,Vt),Ue&&_e(Pe,Yt),At;if(Vt===null){for(;!kr.done;Yt++,kr=Le.next())kr=Xe(Pe,kr.value,et),kr!==null&&(Te=P(kr,Te,Yt),zt===null?At=kr:zt.sibling=kr,zt=kr);return Ue&&_e(Pe,Yt),At}for(Vt=y(Pe,Vt);!kr.done;Yt++,kr=Le.next())kr=at(Vt,Pe,Yt,kr.value,et),kr!==null&&(a&&kr.alternate!==null&&Vt.delete(kr.key===null?Yt:kr.key),Te=P(kr,Te,Yt),zt===null?At=kr:zt.sibling=kr,zt=kr);return a&&Vt.forEach(function(bT){return c(Pe,bT)}),Ue&&_e(Pe,Yt),At}function Hn(Pe,Te,Le,et){if(typeof Le=="object"&&Le!==null&&Le.type===V&&Le.key===null&&(Le=Le.props.children),typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case ie:e:{for(var At=Le.key,zt=Te;zt!==null;){if(zt.key===At){if(At=Le.type,At===V){if(zt.tag===7){f(Pe,zt.sibling),Te=T(zt,Le.props.children),Te.return=Pe,Pe=Te;break e}}else if(zt.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===ne&&Zr(At)===zt.type){f(Pe,zt.sibling),Te=T(zt,Le.props),Te.ref=Gt(Pe,zt,Le),Te.return=Pe,Pe=Te;break e}f(Pe,zt);break}else c(Pe,zt);zt=zt.sibling}Le.type===V?(Te=tu(Le.props.children,Pe.mode,et,Le.key),Te.return=Pe,Pe=Te):(et=wp(Le.type,Le.key,Le.props,null,Pe.mode,et),et.ref=Gt(Pe,Te,Le),et.return=Pe,Pe=et)}return K(Pe);case ue:e:{for(zt=Le.key;Te!==null;){if(Te.key===zt)if(Te.tag===4&&Te.stateNode.containerInfo===Le.containerInfo&&Te.stateNode.implementation===Le.implementation){f(Pe,Te.sibling),Te=T(Te,Le.children||[]),Te.return=Pe,Pe=Te;break e}else{f(Pe,Te);break}else c(Pe,Te);Te=Te.sibling}Te=sg(Le,Pe.mode,et),Te.return=Pe,Pe=Te}return K(Pe);case ne:return zt=Le._init,Hn(Pe,Te,zt(Le._payload),et)}if(ot(Le))return gt(Pe,Te,Le,et);if(xe(Le))return bt(Pe,Te,Le,et);cr(Pe,Le)}return typeof Le=="string"&&Le!==""||typeof Le=="number"?(Le=""+Le,Te!==null&&Te.tag===6?(f(Pe,Te.sibling),Te=T(Te,Le),Te.return=Pe,Pe=Te):(f(Pe,Te),Te=og(Le,Pe.mode,et),Te.return=Pe,Pe=Te),K(Pe)):f(Pe,Te)}return Hn}var Rn=Zn(!0),an=Zn(!1),Un=as(null),ei=null,nn=null,pr=null;function _r(){pr=nn=ei=null}function on(a){var c=Un.current;Pr(Un),a._currentValue=c}function Tr(a,c,f){for(;a!==null;){var y=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),a===f)break;a=a.return}}function mn(a,c){ei=a,pr=nn=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(Uo=!0),a.firstContext=null)}function gn(a){var c=a._currentValue;if(pr!==a)if(a={context:a,memoizedValue:c,next:null},nn===null){if(ei===null)throw Error(t(308));nn=a,ei.dependencies={lanes:0,firstContext:a}}else nn=nn.next=a;return c}var $r=null;function Ci(a){$r===null?$r=[a]:$r.push(a)}function Fr(a,c,f,y){var T=c.interleaved;return T===null?(f.next=f,Ci(c)):(f.next=T.next,T.next=f),c.interleaved=f,Ur(a,y)}function Ur(a,c){a.lanes|=c;var f=a.alternate;for(f!==null&&(f.lanes|=c),f=a,a=a.return;a!==null;)a.childLanes|=c,f=a.alternate,f!==null&&(f.childLanes|=c),f=a,a=a.return;return f.tag===3?f.stateNode:null}var Pn=!1;function di(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function no(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Tn(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function An(a,c,f){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(Ar&2)!==0){var T=y.pending;return T===null?c.next=c:(c.next=T.next,T.next=c),y.pending=c,Ur(a,f)}return T=y.interleaved,T===null?(c.next=c,Ci(y)):(c.next=T.next,T.next=c),y.interleaved=c,Ur(a,f)}function ki(a,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194240)!==0)){var y=c.lanes;y&=a.pendingLanes,f|=y,c.lanes=f,Sa(a,f)}}function qr(a,c){var f=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,f===y)){var T=null,P=null;if(f=f.firstBaseUpdate,f!==null){do{var K={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};P===null?T=P=K:P=P.next=K,f=f.next}while(f!==null);P===null?T=P=c:P=P.next=c}else T=P=c;f={baseState:y.baseState,firstBaseUpdate:T,lastBaseUpdate:P,shared:y.shared,effects:y.effects},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=c}function Ii(a,c,f,y){var T=a.updateQueue;Pn=!1;var P=T.firstBaseUpdate,K=T.lastBaseUpdate,pe=T.shared.pending;if(pe!==null){T.shared.pending=null;var be=pe,Ve=be.next;be.next=null,K===null?P=Ve:K.next=Ve,K=be;var Ye=a.alternate;Ye!==null&&(Ye=Ye.updateQueue,pe=Ye.lastBaseUpdate,pe!==K&&(pe===null?Ye.firstBaseUpdate=Ve:pe.next=Ve,Ye.lastBaseUpdate=be))}if(P!==null){var Xe=T.baseState;K=0,Ye=Ve=be=null,pe=P;do{var Je=pe.lane,at=pe.eventTime;if((y&Je)===Je){Ye!==null&&(Ye=Ye.next={eventTime:at,lane:0,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null});e:{var gt=a,bt=pe;switch(Je=c,at=f,bt.tag){case 1:if(gt=bt.payload,typeof gt=="function"){Xe=gt.call(at,Xe,Je);break e}Xe=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=bt.payload,Je=typeof gt=="function"?gt.call(at,Xe,Je):gt,Je==null)break e;Xe=we({},Xe,Je);break e;case 2:Pn=!0}}pe.callback!==null&&pe.lane!==0&&(a.flags|=64,Je=T.effects,Je===null?T.effects=[pe]:Je.push(pe))}else at={eventTime:at,lane:Je,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},Ye===null?(Ve=Ye=at,be=Xe):Ye=Ye.next=at,K|=Je;if(pe=pe.next,pe===null){if(pe=T.shared.pending,pe===null)break;Je=pe,pe=Je.next,Je.next=null,T.lastBaseUpdate=Je,T.shared.pending=null}}while(!0);if(Ye===null&&(be=Xe),T.baseState=be,T.firstBaseUpdate=Ve,T.lastBaseUpdate=Ye,c=T.shared.interleaved,c!==null){T=c;do K|=T.lane,T=T.next;while(T!==c)}else P===null&&(T.shared.lanes=0);Qc|=K,a.lanes=K,a.memoizedState=Xe}}function $o(a,c,f){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var y=a[c],T=y.callback;if(T!==null){if(y.callback=null,y=f,typeof T!="function")throw Error(t(191,T));T.call(y)}}}var ls={},ti=as(ls),Cn=as(ls),La=as(ls);function ia(a){if(a===ls)throw Error(t(174));return a}function Kl(a,c){switch(Lr(La,c),Lr(Cn,a),Lr(ti,ls),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:vr(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=vr(c,a)}Pr(ti),Lr(ti,c)}function Bs(){Pr(ti),Pr(Cn),Pr(La)}function rp(a){ia(La.current);var c=ia(ti.current),f=vr(c,a.type);c!==f&&(Lr(Cn,a),Lr(ti,f))}function _h(a){Cn.current===a&&(Pr(ti),Pr(Cn))}var tn=as(0);function cs(a){for(var c=a;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Th=[];function Ah(){for(var a=0;a<Th.length;a++)Th[a]._workInProgressVersionPrimary=null;Th.length=0}var Qu=F.ReactCurrentDispatcher,Xu=F.ReactCurrentBatchConfig,Ls=0,sn=null,Nn=null,kn=null,Jl=!1,oa=!1,Yl=0,R0=0;function qn(){throw Error(t(321))}function Zu(a,c){if(c===null)return!1;for(var f=0;f<c.length&&f<a.length;f++)if(!hn(a[f],c[f]))return!1;return!0}function Kc(a,c,f,y,T,P){if(Ls=P,sn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Qu.current=a===null||a.memoizedState===null?H4:G4,a=f(y,T),oa){P=0;do{if(oa=!1,Yl=0,25<=P)throw Error(t(301));P+=1,kn=Nn=null,c.updateQueue=null,Qu.current=K4,a=f(y,T)}while(oa)}if(Qu.current=ap,c=Nn!==null&&Nn.next!==null,Ls=0,kn=Nn=sn=null,Jl=!1,c)throw Error(t(300));return a}function Fs(){var a=Yl!==0;return Yl=0,a}function us(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?sn.memoizedState=kn=a:kn=kn.next=a,kn}function To(){if(Nn===null){var a=sn.alternate;a=a!==null?a.memoizedState:null}else a=Nn.next;var c=kn===null?sn.memoizedState:kn.next;if(c!==null)kn=c,Nn=a;else{if(a===null)throw Error(t(310));Nn=a,a={memoizedState:Nn.memoizedState,baseState:Nn.baseState,baseQueue:Nn.baseQueue,queue:Nn.queue,next:null},kn===null?sn.memoizedState=kn=a:kn=kn.next=a}return kn}function Jc(a,c){return typeof c=="function"?c(a):c}function ed(a){var c=To(),f=c.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var y=Nn,T=y.baseQueue,P=f.pending;if(P!==null){if(T!==null){var K=T.next;T.next=P.next,P.next=K}y.baseQueue=T=P,f.pending=null}if(T!==null){P=T.next,y=y.baseState;var pe=K=null,be=null,Ve=P;do{var Ye=Ve.lane;if((Ls&Ye)===Ye)be!==null&&(be=be.next={lane:0,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null}),y=Ve.hasEagerState?Ve.eagerState:a(y,Ve.action);else{var Xe={lane:Ye,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null};be===null?(pe=be=Xe,K=y):be=be.next=Xe,sn.lanes|=Ye,Qc|=Ye}Ve=Ve.next}while(Ve!==null&&Ve!==P);be===null?K=y:be.next=pe,hn(y,c.memoizedState)||(Uo=!0),c.memoizedState=y,c.baseState=K,c.baseQueue=be,f.lastRenderedState=y}if(a=f.interleaved,a!==null){T=a;do P=T.lane,sn.lanes|=P,Qc|=P,T=T.next;while(T!==a)}else T===null&&(f.lanes=0);return[c.memoizedState,f.dispatch]}function Fa(a){var c=To(),f=c.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var y=f.dispatch,T=f.pending,P=c.memoizedState;if(T!==null){f.pending=null;var K=T=T.next;do P=a(P,K.action),K=K.next;while(K!==T);hn(P,c.memoizedState)||(Uo=!0),c.memoizedState=P,c.baseQueue===null&&(c.baseState=P),f.lastRenderedState=P}return[P,y]}function np(){}function Ch(a,c){var f=sn,y=To(),T=c(),P=!hn(y.memoizedState,T);if(P&&(y.memoizedState=T,Uo=!0),y=y.queue,nd(op.bind(null,f,y,a),[a]),y.getSnapshot!==c||P||kn!==null&&kn.memoizedState.tag&1){if(f.flags|=2048,Ao(9,kh.bind(null,f,y,T,c),void 0,null),Ei===null)throw Error(t(349));(Ls&30)!==0||ip(f,c,T)}return T}function ip(a,c,f){a.flags|=16384,a={getSnapshot:c,value:f},c=sn.updateQueue,c===null?(c={lastEffect:null,stores:null},sn.updateQueue=c,c.stores=[a]):(f=c.stores,f===null?c.stores=[a]:f.push(a))}function kh(a,c,f,y){c.value=f,c.getSnapshot=y,Ql(c)&&td(a)}function op(a,c,f){return f(function(){Ql(c)&&td(a)})}function Ql(a){var c=a.getSnapshot;a=a.value;try{var f=c();return!hn(a,f)}catch{return!0}}function td(a){var c=Ur(a,1);c!==null&&ua(c,a,1,-1)}function Yc(a){var c=us();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jc,lastRenderedState:a},c.queue=a,a=a.dispatch=q4.bind(null,sn,a),[c.memoizedState,a]}function Ao(a,c,f,y){return a={tag:a,create:c,destroy:f,deps:y,next:null},c=sn.updateQueue,c===null?(c={lastEffect:null,stores:null},sn.updateQueue=c,c.lastEffect=a.next=a):(f=c.lastEffect,f===null?c.lastEffect=a.next=a:(y=f.next,f.next=a,a.next=y,c.lastEffect=a)),a}function sa(){return To().memoizedState}function ds(a,c,f,y){var T=us();sn.flags|=a,T.memoizedState=Ao(1|c,f,void 0,y===void 0?null:y)}function gl(a,c,f,y){var T=To();y=y===void 0?null:y;var P=void 0;if(Nn!==null){var K=Nn.memoizedState;if(P=K.destroy,y!==null&&Zu(y,K.deps)){T.memoizedState=Ao(c,f,P,y);return}}sn.flags|=a,T.memoizedState=Ao(1|c,f,P,y)}function rd(a,c){return ds(8390656,8,a,c)}function nd(a,c){return gl(2048,8,a,c)}function sp(a,c){return gl(4,2,a,c)}function id(a,c){return gl(4,4,a,c)}function od(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function f2(a,c,f){return f=f!=null?f.concat([a]):null,gl(4,4,od.bind(null,c,a),f)}function P0(){}function p2(a,c){var f=To();c=c===void 0?null:c;var y=f.memoizedState;return y!==null&&c!==null&&Zu(c,y[1])?y[0]:(f.memoizedState=[a,c],a)}function m2(a,c){var f=To();c=c===void 0?null:c;var y=f.memoizedState;return y!==null&&c!==null&&Zu(c,y[1])?y[0]:(a=a(),f.memoizedState=[a,c],a)}function g2(a,c,f){return(Ls&21)===0?(a.baseState&&(a.baseState=!1,Uo=!0),a.memoizedState=f):(hn(f,c)||(f=Qa(),sn.lanes|=f,Qc|=f,a.baseState=!0),c)}function $4(a,c){var f=or;or=f!==0&&4>f?f:4,a(!0);var y=Xu.transition;Xu.transition={};try{a(!1),c()}finally{or=f,Xu.transition=y}}function y2(){return To().memoizedState}function U4(a,c,f){var y=tc(a);if(f={lane:y,action:f,hasEagerState:!1,eagerState:null,next:null},x2(a))v2(c,f);else if(f=Fr(a,c,f,y),f!==null){var T=ko();ua(f,a,y,T),b2(f,c,y)}}function q4(a,c,f){var y=tc(a),T={lane:y,action:f,hasEagerState:!1,eagerState:null,next:null};if(x2(a))v2(c,T);else{var P=a.alternate;if(a.lanes===0&&(P===null||P.lanes===0)&&(P=c.lastRenderedReducer,P!==null))try{var K=c.lastRenderedState,pe=P(K,f);if(T.hasEagerState=!0,T.eagerState=pe,hn(pe,K)){var be=c.interleaved;be===null?(T.next=T,Ci(c)):(T.next=be.next,be.next=T),c.interleaved=T;return}}catch{}finally{}f=Fr(a,c,T,y),f!==null&&(T=ko(),ua(f,a,y,T),b2(f,c,y))}}function x2(a){var c=a.alternate;return a===sn||c!==null&&c===sn}function v2(a,c){oa=Jl=!0;var f=a.pending;f===null?c.next=c:(c.next=f.next,f.next=c),a.pending=c}function b2(a,c,f){if((f&4194240)!==0){var y=c.lanes;y&=a.pendingLanes,f|=y,c.lanes=f,Sa(a,f)}}var ap={readContext:gn,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useInsertionEffect:qn,useLayoutEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useMutableSource:qn,useSyncExternalStore:qn,useId:qn,unstable_isNewReconciler:!1},H4={readContext:gn,useCallback:function(a,c){return us().memoizedState=[a,c===void 0?null:c],a},useContext:gn,useEffect:rd,useImperativeHandle:function(a,c,f){return f=f!=null?f.concat([a]):null,ds(4194308,4,od.bind(null,c,a),f)},useLayoutEffect:function(a,c){return ds(4194308,4,a,c)},useInsertionEffect:function(a,c){return ds(4,2,a,c)},useMemo:function(a,c){var f=us();return c=c===void 0?null:c,a=a(),f.memoizedState=[a,c],a},useReducer:function(a,c,f){var y=us();return c=f!==void 0?f(c):c,y.memoizedState=y.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},y.queue=a,a=a.dispatch=U4.bind(null,sn,a),[y.memoizedState,a]},useRef:function(a){var c=us();return a={current:a},c.memoizedState=a},useState:Yc,useDebugValue:P0,useDeferredValue:function(a){return us().memoizedState=a},useTransition:function(){var a=Yc(!1),c=a[0];return a=$4.bind(null,a[1]),us().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,f){var y=sn,T=us();if(Ue){if(f===void 0)throw Error(t(407));f=f()}else{if(f=c(),Ei===null)throw Error(t(349));(Ls&30)!==0||ip(y,c,f)}T.memoizedState=f;var P={value:f,getSnapshot:c};return T.queue=P,rd(op.bind(null,y,P,a),[a]),y.flags|=2048,Ao(9,kh.bind(null,y,P,f,c),void 0,null),f},useId:function(){var a=us(),c=Ei.identifierPrefix;if(Ue){var f=le,y=je;f=(y&~(1<<32-Qn(y)-1)).toString(32)+f,c=":"+c+"R"+f,f=Yl++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=R0++,c=":"+c+"r"+f.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},G4={readContext:gn,useCallback:p2,useContext:gn,useEffect:nd,useImperativeHandle:f2,useInsertionEffect:sp,useLayoutEffect:id,useMemo:m2,useReducer:ed,useRef:sa,useState:function(){return ed(Jc)},useDebugValue:P0,useDeferredValue:function(a){var c=To();return g2(c,Nn.memoizedState,a)},useTransition:function(){var a=ed(Jc)[0],c=To().memoizedState;return[a,c]},useMutableSource:np,useSyncExternalStore:Ch,useId:y2,unstable_isNewReconciler:!1},K4={readContext:gn,useCallback:p2,useContext:gn,useEffect:nd,useImperativeHandle:f2,useInsertionEffect:sp,useLayoutEffect:id,useMemo:m2,useReducer:Fa,useRef:sa,useState:function(){return Fa(Jc)},useDebugValue:P0,useDeferredValue:function(a){var c=To();return Nn===null?c.memoizedState=a:g2(c,Nn.memoizedState,a)},useTransition:function(){var a=Fa(Jc)[0],c=To().memoizedState;return[a,c]},useMutableSource:np,useSyncExternalStore:Ch,useId:y2,unstable_isNewReconciler:!1};function aa(a,c){if(a&&a.defaultProps){c=we({},c),a=a.defaultProps;for(var f in a)c[f]===void 0&&(c[f]=a[f]);return c}return c}function N0(a,c,f,y){c=a.memoizedState,f=f(y,c),f=f==null?c:we({},c,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var lp={isMounted:function(a){return(a=a._reactInternals)?bn(a)===a:!1},enqueueSetState:function(a,c,f){a=a._reactInternals;var y=ko(),T=tc(a),P=Tn(y,T);P.payload=c,f!=null&&(P.callback=f),c=An(a,P,T),c!==null&&(ua(c,a,T,y),ki(c,a,T))},enqueueReplaceState:function(a,c,f){a=a._reactInternals;var y=ko(),T=tc(a),P=Tn(y,T);P.tag=1,P.payload=c,f!=null&&(P.callback=f),c=An(a,P,T),c!==null&&(ua(c,a,T,y),ki(c,a,T))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var f=ko(),y=tc(a),T=Tn(f,y);T.tag=2,c!=null&&(T.callback=c),c=An(a,T,y),c!==null&&(ua(c,a,y,f),ki(c,a,y))}};function w2(a,c,f,y,T,P,K){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,P,K):c.prototype&&c.prototype.isPureReactComponent?!Xi(f,y)||!Xi(T,P):!0}function S2(a,c,f){var y=!1,T=Ba,P=c.contextType;return typeof P=="object"&&P!==null?P=gn(P):(T=ro(c)?pl:ui.current,y=c.contextTypes,P=(y=y!=null)?Gl(a,T):Ba),c=new c(f,P),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=lp,a.stateNode=c,c._reactInternals=a,y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=T,a.__reactInternalMemoizedMaskedChildContext=P),c}function _2(a,c,f,y){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,y),c.state!==a&&lp.enqueueReplaceState(c,c.state,null)}function B0(a,c,f,y){var T=a.stateNode;T.props=f,T.state=a.memoizedState,T.refs={},di(a);var P=c.contextType;typeof P=="object"&&P!==null?T.context=gn(P):(P=ro(c)?pl:ui.current,T.context=Gl(a,P)),T.state=a.memoizedState,P=c.getDerivedStateFromProps,typeof P=="function"&&(N0(a,c,P,f),T.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(c=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),c!==T.state&&lp.enqueueReplaceState(T,T.state,null),Ii(a,f,T,y),T.state=a.memoizedState),typeof T.componentDidMount=="function"&&(a.flags|=4194308)}function sd(a,c){try{var f="",y=c;do f+=he(y),y=y.return;while(y);var T=f}catch(P){T=`
Error generating stack: `+P.message+`
`+P.stack}return{value:a,source:c,stack:T,digest:null}}function L0(a,c,f){return{value:a,source:null,stack:f??null,digest:c??null}}function F0(a,c){try{console.error(c.value)}catch(f){setTimeout(function(){throw f})}}var J4=typeof WeakMap=="function"?WeakMap:Map;function T2(a,c,f){f=Tn(-1,f),f.tag=3,f.payload={element:null};var y=c.value;return f.callback=function(){mp||(mp=!0,Q0=y),F0(a,c)},f}function A2(a,c,f){f=Tn(-1,f),f.tag=3;var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var T=c.value;f.payload=function(){return y(T)},f.callback=function(){F0(a,c)}}var P=a.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(f.callback=function(){F0(a,c),typeof y!="function"&&(Zl===null?Zl=new Set([this]):Zl.add(this));var K=c.stack;this.componentDidCatch(c.value,{componentStack:K!==null?K:""})}),f}function C2(a,c,f){var y=a.pingCache;if(y===null){y=a.pingCache=new J4;var T=new Set;y.set(c,T)}else T=y.get(c),T===void 0&&(T=new Set,y.set(c,T));T.has(f)||(T.add(f),a=cT.bind(null,a,c,f),c.then(a,a))}function k2(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function I2(a,c,f,y,T){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(c=Tn(-1,1),c.tag=2,An(f,c,1))),f.lanes|=1),a):(a.flags|=65536,a.lanes=T,a)}var Y4=F.ReactCurrentOwner,Uo=!1;function Co(a,c,f,y){c.child=a===null?an(c,null,f,y):Rn(c,a.child,f,y)}function E2(a,c,f,y,T){f=f.render;var P=c.ref;return mn(c,T),y=Kc(a,c,f,y,P,T),f=Fs(),a!==null&&!Uo?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~T,yl(a,c,T)):(Ue&&f&&De(c),c.flags|=1,Co(a,c,y,T),c.child)}function j2(a,c,f,y,T){if(a===null){var P=f.type;return typeof P=="function"&&!ig(P)&&P.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(c.tag=15,c.type=P,R2(a,c,P,y,T)):(a=wp(f.type,null,y,c,c.mode,T),a.ref=c.ref,a.return=c,c.child=a)}if(P=a.child,(a.lanes&T)===0){var K=P.memoizedProps;if(f=f.compare,f=f!==null?f:Xi,f(K,y)&&a.ref===c.ref)return yl(a,c,T)}return c.flags|=1,a=nc(P,y),a.ref=c.ref,a.return=c,c.child=a}function R2(a,c,f,y,T){if(a!==null){var P=a.memoizedProps;if(Xi(P,y)&&a.ref===c.ref)if(Uo=!1,c.pendingProps=y=P,(a.lanes&T)!==0)(a.flags&131072)!==0&&(Uo=!0);else return c.lanes=a.lanes,yl(a,c,T)}return z0(a,c,f,y,T)}function P2(a,c,f){var y=c.pendingProps,T=y.children,P=a!==null?a.memoizedState:null;if(y.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lr(ld,hs),hs|=f;else{if((f&1073741824)===0)return a=P!==null?P.baseLanes|f:f,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,Lr(ld,hs),hs|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=P!==null?P.baseLanes:f,Lr(ld,hs),hs|=y}else P!==null?(y=P.baseLanes|f,c.memoizedState=null):y=f,Lr(ld,hs),hs|=y;return Co(a,c,T,f),c.child}function N2(a,c){var f=c.ref;(a===null&&f!==null||a!==null&&a.ref!==f)&&(c.flags|=512,c.flags|=2097152)}function z0(a,c,f,y,T){var P=ro(f)?pl:ui.current;return P=Gl(c,P),mn(c,T),f=Kc(a,c,f,y,P,T),y=Fs(),a!==null&&!Uo?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~T,yl(a,c,T)):(Ue&&y&&De(c),c.flags|=1,Co(a,c,f,T),c.child)}function B2(a,c,f,y,T){if(ro(f)){var P=!0;ml(c)}else P=!1;if(mn(c,T),c.stateNode===null)up(a,c),S2(c,f,y),B0(c,f,y,T),y=!0;else if(a===null){var K=c.stateNode,pe=c.memoizedProps;K.props=pe;var be=K.context,Ve=f.contextType;typeof Ve=="object"&&Ve!==null?Ve=gn(Ve):(Ve=ro(f)?pl:ui.current,Ve=Gl(c,Ve));var Ye=f.getDerivedStateFromProps,Xe=typeof Ye=="function"||typeof K.getSnapshotBeforeUpdate=="function";Xe||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(pe!==y||be!==Ve)&&_2(c,K,y,Ve),Pn=!1;var Je=c.memoizedState;K.state=Je,Ii(c,y,K,T),be=c.memoizedState,pe!==y||Je!==be||to.current||Pn?(typeof Ye=="function"&&(N0(c,f,Ye,y),be=c.memoizedState),(pe=Pn||w2(c,f,pe,y,Je,be,Ve))?(Xe||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(c.flags|=4194308)):(typeof K.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=be),K.props=y,K.state=be,K.context=Ve,y=pe):(typeof K.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{K=c.stateNode,no(a,c),pe=c.memoizedProps,Ve=c.type===c.elementType?pe:aa(c.type,pe),K.props=Ve,Xe=c.pendingProps,Je=K.context,be=f.contextType,typeof be=="object"&&be!==null?be=gn(be):(be=ro(f)?pl:ui.current,be=Gl(c,be));var at=f.getDerivedStateFromProps;(Ye=typeof at=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(pe!==Xe||Je!==be)&&_2(c,K,y,be),Pn=!1,Je=c.memoizedState,K.state=Je,Ii(c,y,K,T);var gt=c.memoizedState;pe!==Xe||Je!==gt||to.current||Pn?(typeof at=="function"&&(N0(c,f,at,y),gt=c.memoizedState),(Ve=Pn||w2(c,f,Ve,y,Je,gt,be)||!1)?(Ye||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(y,gt,be),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(y,gt,be)),typeof K.componentDidUpdate=="function"&&(c.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof K.componentDidUpdate!="function"||pe===a.memoizedProps&&Je===a.memoizedState||(c.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||pe===a.memoizedProps&&Je===a.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=gt),K.props=y,K.state=gt,K.context=be,y=Ve):(typeof K.componentDidUpdate!="function"||pe===a.memoizedProps&&Je===a.memoizedState||(c.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||pe===a.memoizedProps&&Je===a.memoizedState||(c.flags|=1024),y=!1)}return V0(a,c,f,y,P,T)}function V0(a,c,f,y,T,P){N2(a,c);var K=(c.flags&128)!==0;if(!y&&!K)return T&&tp(c,f,!1),yl(a,c,P);y=c.stateNode,Y4.current=c;var pe=K&&typeof f.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,a!==null&&K?(c.child=Rn(c,a.child,null,P),c.child=Rn(c,null,pe,P)):Co(a,c,pe,P),c.memoizedState=y.state,T&&tp(c,f,!0),c.child}function L2(a){var c=a.stateNode;c.pendingContext?ep(a,c.pendingContext,c.pendingContext!==c.context):c.context&&ep(a,c.context,!1),Kl(a,c.containerInfo)}function F2(a,c,f,y,T){return ut(),nt(T),c.flags|=256,Co(a,c,f,y),c.child}var O0={dehydrated:null,treeContext:null,retryLane:0};function M0(a){return{baseLanes:a,cachePool:null,transitions:null}}function z2(a,c,f){var y=c.pendingProps,T=tn.current,P=!1,K=(c.flags&128)!==0,pe;if((pe=K)||(pe=a!==null&&a.memoizedState===null?!1:(T&2)!==0),pe?(P=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(T|=1),Lr(tn,T&1),a===null)return ft(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(K=y.children,a=y.fallback,P?(y=c.mode,P=c.child,K={mode:"hidden",children:K},(y&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=K):P=Sp(K,y,0,null),a=tu(a,y,f,null),P.return=c,a.return=c,P.sibling=a,c.child=P,c.child.memoizedState=M0(f),c.memoizedState=O0,a):D0(c,K));if(T=a.memoizedState,T!==null&&(pe=T.dehydrated,pe!==null))return Q4(a,c,K,y,pe,T,f);if(P){P=y.fallback,K=c.mode,T=a.child,pe=T.sibling;var be={mode:"hidden",children:y.children};return(K&1)===0&&c.child!==T?(y=c.child,y.childLanes=0,y.pendingProps=be,c.deletions=null):(y=nc(T,be),y.subtreeFlags=T.subtreeFlags&14680064),pe!==null?P=nc(pe,P):(P=tu(P,K,f,null),P.flags|=2),P.return=c,y.return=c,y.sibling=P,c.child=y,y=P,P=c.child,K=a.child.memoizedState,K=K===null?M0(f):{baseLanes:K.baseLanes|f,cachePool:null,transitions:K.transitions},P.memoizedState=K,P.childLanes=a.childLanes&~f,c.memoizedState=O0,y}return P=a.child,a=P.sibling,y=nc(P,{mode:"visible",children:y.children}),(c.mode&1)===0&&(y.lanes=f),y.return=c,y.sibling=null,a!==null&&(f=c.deletions,f===null?(c.deletions=[a],c.flags|=16):f.push(a)),c.child=y,c.memoizedState=null,y}function D0(a,c){return c=Sp({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function cp(a,c,f,y){return y!==null&&nt(y),Rn(c,a.child,null,f),a=D0(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function Q4(a,c,f,y,T,P,K){if(f)return c.flags&256?(c.flags&=-257,y=L0(Error(t(422))),cp(a,c,K,y)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(P=y.fallback,T=c.mode,y=Sp({mode:"visible",children:y.children},T,0,null),P=tu(P,T,K,null),P.flags|=2,y.return=c,P.return=c,y.sibling=P,c.child=y,(c.mode&1)!==0&&Rn(c,a.child,null,K),c.child.memoizedState=M0(K),c.memoizedState=O0,P);if((c.mode&1)===0)return cp(a,c,K,null);if(T.data==="$!"){if(y=T.nextSibling&&T.nextSibling.dataset,y)var pe=y.dgst;return y=pe,P=Error(t(419)),y=L0(P,y,void 0),cp(a,c,K,y)}if(pe=(K&a.childLanes)!==0,Uo||pe){if(y=Ei,y!==null){switch(K&-K){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(y.suspendedLanes|K))!==0?0:T,T!==0&&T!==P.retryLane&&(P.retryLane=T,Ur(a,T),ua(y,a,T,-1))}return ng(),y=L0(Error(t(421))),cp(a,c,K,y)}return T.data==="$?"?(c.flags|=128,c.child=a.child,c=uT.bind(null,a),T._reactRetry=c,null):(a=P.treeContext,Me=Di(T.nextSibling),Oe=c,Ue=!0,qe=null,a!==null&&(te[ae++]=je,te[ae++]=le,te[ae++]=ve,je=a.id,le=a.overflow,ve=c),c=D0(c,y.children),c.flags|=4096,c)}function V2(a,c,f){a.lanes|=c;var y=a.alternate;y!==null&&(y.lanes|=c),Tr(a.return,c,f)}function W0(a,c,f,y,T){var P=a.memoizedState;P===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:f,tailMode:T}:(P.isBackwards=c,P.rendering=null,P.renderingStartTime=0,P.last=y,P.tail=f,P.tailMode=T)}function O2(a,c,f){var y=c.pendingProps,T=y.revealOrder,P=y.tail;if(Co(a,c,y.children,f),y=tn.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&V2(a,f,c);else if(a.tag===19)V2(a,f,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}if(Lr(tn,y),(c.mode&1)===0)c.memoizedState=null;else switch(T){case"forwards":for(f=c.child,T=null;f!==null;)a=f.alternate,a!==null&&cs(a)===null&&(T=f),f=f.sibling;f=T,f===null?(T=c.child,c.child=null):(T=f.sibling,f.sibling=null),W0(c,!1,T,f,P);break;case"backwards":for(f=null,T=c.child,c.child=null;T!==null;){if(a=T.alternate,a!==null&&cs(a)===null){c.child=T;break}a=T.sibling,T.sibling=f,f=T,T=a}W0(c,!0,f,null,P);break;case"together":W0(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function up(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function yl(a,c,f){if(a!==null&&(c.dependencies=a.dependencies),Qc|=c.lanes,(f&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(t(153));if(c.child!==null){for(a=c.child,f=nc(a,a.pendingProps),c.child=f,f.return=c;a.sibling!==null;)a=a.sibling,f=f.sibling=nc(a,a.pendingProps),f.return=c;f.sibling=null}return c.child}function X4(a,c,f){switch(c.tag){case 3:L2(c),ut();break;case 5:rp(c);break;case 1:ro(c.type)&&ml(c);break;case 4:Kl(c,c.stateNode.containerInfo);break;case 10:var y=c.type._context,T=c.memoizedProps.value;Lr(Un,y._currentValue),y._currentValue=T;break;case 13:if(y=c.memoizedState,y!==null)return y.dehydrated!==null?(Lr(tn,tn.current&1),c.flags|=128,null):(f&c.child.childLanes)!==0?z2(a,c,f):(Lr(tn,tn.current&1),a=yl(a,c,f),a!==null?a.sibling:null);Lr(tn,tn.current&1);break;case 19:if(y=(f&c.childLanes)!==0,(a.flags&128)!==0){if(y)return O2(a,c,f);c.flags|=128}if(T=c.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Lr(tn,tn.current),y)break;return null;case 22:case 23:return c.lanes=0,P2(a,c,f)}return yl(a,c,f)}var M2,$0,D2,W2;M2=function(a,c){for(var f=c.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},$0=function(){},D2=function(a,c,f,y){var T=a.memoizedProps;if(T!==y){a=c.stateNode,ia(ti.current);var P=null;switch(f){case"input":T=ze(a,T),y=ze(a,y),P=[];break;case"select":T=we({},T,{value:void 0}),y=we({},y,{value:void 0}),P=[];break;case"textarea":T=Jt(a,T),y=Jt(a,y),P=[];break;default:typeof T.onClick!="function"&&typeof y.onClick=="function"&&(a.onclick=Ul)}sr(f,y);var K;f=null;for(Ve in T)if(!y.hasOwnProperty(Ve)&&T.hasOwnProperty(Ve)&&T[Ve]!=null)if(Ve==="style"){var pe=T[Ve];for(K in pe)pe.hasOwnProperty(K)&&(f||(f={}),f[K]="")}else Ve!=="dangerouslySetInnerHTML"&&Ve!=="children"&&Ve!=="suppressContentEditableWarning"&&Ve!=="suppressHydrationWarning"&&Ve!=="autoFocus"&&(i.hasOwnProperty(Ve)?P||(P=[]):(P=P||[]).push(Ve,null));for(Ve in y){var be=y[Ve];if(pe=T!=null?T[Ve]:void 0,y.hasOwnProperty(Ve)&&be!==pe&&(be!=null||pe!=null))if(Ve==="style")if(pe){for(K in pe)!pe.hasOwnProperty(K)||be&&be.hasOwnProperty(K)||(f||(f={}),f[K]="");for(K in be)be.hasOwnProperty(K)&&pe[K]!==be[K]&&(f||(f={}),f[K]=be[K])}else f||(P||(P=[]),P.push(Ve,f)),f=be;else Ve==="dangerouslySetInnerHTML"?(be=be?be.__html:void 0,pe=pe?pe.__html:void 0,be!=null&&pe!==be&&(P=P||[]).push(Ve,be)):Ve==="children"?typeof be!="string"&&typeof be!="number"||(P=P||[]).push(Ve,""+be):Ve!=="suppressContentEditableWarning"&&Ve!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ve)?(be!=null&&Ve==="onScroll"&&Wr("scroll",a),P||pe===be||(P=[])):(P=P||[]).push(Ve,be))}f&&(P=P||[]).push("style",f);var Ve=P;(c.updateQueue=Ve)&&(c.flags|=4)}},W2=function(a,c,f,y){f!==y&&(c.flags|=4)};function Ih(a,c){if(!Ue)switch(a.tailMode){case"hidden":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function io(a){var c=a.alternate!==null&&a.alternate.child===a.child,f=0,y=0;if(c)for(var T=a.child;T!==null;)f|=T.lanes|T.childLanes,y|=T.subtreeFlags&14680064,y|=T.flags&14680064,T.return=a,T=T.sibling;else for(T=a.child;T!==null;)f|=T.lanes|T.childLanes,y|=T.subtreeFlags,y|=T.flags,T.return=a,T=T.sibling;return a.subtreeFlags|=y,a.childLanes=f,c}function Z4(a,c,f){var y=c.pendingProps;switch(Ne(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return io(c),null;case 1:return ro(c.type)&&Yu(),io(c),null;case 3:return y=c.stateNode,Bs(),Pr(to),Pr(ui),Ah(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(a===null||a.child===null)&&(pn(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,qe!==null&&(eg(qe),qe=null))),$0(a,c),io(c),null;case 5:_h(c);var T=ia(La.current);if(f=c.type,a!==null&&c.stateNode!=null)D2(a,c,f,y,T),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(t(166));return io(c),null}if(a=ia(ti.current),pn(c)){y=c.stateNode,f=c.type;var P=c.memoizedProps;switch(y[Ns]=c,y[ql]=P,a=(c.mode&1)!==0,f){case"dialog":Wr("cancel",y),Wr("close",y);break;case"iframe":case"object":case"embed":Wr("load",y);break;case"video":case"audio":for(T=0;T<Pa.length;T++)Wr(Pa[T],y);break;case"source":Wr("error",y);break;case"img":case"image":case"link":Wr("error",y),Wr("load",y);break;case"details":Wr("toggle",y);break;case"input":de(y,P),Wr("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!P.multiple},Wr("invalid",y);break;case"textarea":_t(y,P),Wr("invalid",y)}sr(f,P),T=null;for(var K in P)if(P.hasOwnProperty(K)){var pe=P[K];K==="children"?typeof pe=="string"?y.textContent!==pe&&(P.suppressHydrationWarning!==!0&&Ju(y.textContent,pe,a),T=["children",pe]):typeof pe=="number"&&y.textContent!==""+pe&&(P.suppressHydrationWarning!==!0&&Ju(y.textContent,pe,a),T=["children",""+pe]):i.hasOwnProperty(K)&&pe!=null&&K==="onScroll"&&Wr("scroll",y)}switch(f){case"input":Fe(y),wt(y,P,!0);break;case"textarea":Fe(y),Ft(y);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(y.onclick=Ul)}y=T,c.updateQueue=y,y!==null&&(c.flags|=4)}else{K=T.nodeType===9?T:T.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=qt(f)),a==="http://www.w3.org/1999/xhtml"?f==="script"?(a=K.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof y.is=="string"?a=K.createElement(f,{is:y.is}):(a=K.createElement(f),f==="select"&&(K=a,y.multiple?K.multiple=!0:y.size&&(K.size=y.size))):a=K.createElementNS(a,f),a[Ns]=c,a[ql]=y,M2(a,c,!1,!1),c.stateNode=a;e:{switch(K=It(f,y),f){case"dialog":Wr("cancel",a),Wr("close",a),T=y;break;case"iframe":case"object":case"embed":Wr("load",a),T=y;break;case"video":case"audio":for(T=0;T<Pa.length;T++)Wr(Pa[T],a);T=y;break;case"source":Wr("error",a),T=y;break;case"img":case"image":case"link":Wr("error",a),Wr("load",a),T=y;break;case"details":Wr("toggle",a),T=y;break;case"input":de(a,y),T=ze(a,y),Wr("invalid",a);break;case"option":T=y;break;case"select":a._wrapperState={wasMultiple:!!y.multiple},T=we({},y,{value:void 0}),Wr("invalid",a);break;case"textarea":_t(a,y),T=Jt(a,y),Wr("invalid",a);break;default:T=y}sr(f,T),pe=T;for(P in pe)if(pe.hasOwnProperty(P)){var be=pe[P];P==="style"?ht(a,be):P==="dangerouslySetInnerHTML"?(be=be?be.__html:void 0,be!=null&&Tt(a,be)):P==="children"?typeof be=="string"?(f!=="textarea"||be!=="")&&jt(a,be):typeof be=="number"&&jt(a,""+be):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(i.hasOwnProperty(P)?be!=null&&P==="onScroll"&&Wr("scroll",a):be!=null&&$(a,P,be,K))}switch(f){case"input":Fe(a),wt(a,y,!1);break;case"textarea":Fe(a),Ft(a);break;case"option":y.value!=null&&a.setAttribute("value",""+ke(y.value));break;case"select":a.multiple=!!y.multiple,P=y.value,P!=null?rt(a,!!y.multiple,P,!1):y.defaultValue!=null&&rt(a,!!y.multiple,y.defaultValue,!0);break;default:typeof T.onClick=="function"&&(a.onclick=Ul)}switch(f){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return io(c),null;case 6:if(a&&c.stateNode!=null)W2(a,c,a.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(t(166));if(f=ia(La.current),ia(ti.current),pn(c)){if(y=c.stateNode,f=c.memoizedProps,y[Ns]=c,(P=y.nodeValue!==f)&&(a=Oe,a!==null))switch(a.tag){case 3:Ju(y.nodeValue,f,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Ju(y.nodeValue,f,(a.mode&1)!==0)}P&&(c.flags|=4)}else y=(f.nodeType===9?f:f.ownerDocument).createTextNode(y),y[Ns]=c,c.stateNode=y}return io(c),null;case 13:if(Pr(tn),y=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Ue&&Me!==null&&(c.mode&1)!==0&&(c.flags&128)===0)rr(),ut(),c.flags|=98560,P=!1;else if(P=pn(c),y!==null&&y.dehydrated!==null){if(a===null){if(!P)throw Error(t(318));if(P=c.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(t(317));P[Ns]=c}else ut(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;io(c),P=!1}else qe!==null&&(eg(qe),qe=null),P=!0;if(!P)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=f,c):(y=y!==null,y!==(a!==null&&a.memoizedState!==null)&&y&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(tn.current&1)!==0?hi===0&&(hi=3):ng())),c.updateQueue!==null&&(c.flags|=4),io(c),null);case 4:return Bs(),$0(a,c),a===null&&ul(c.stateNode.containerInfo),io(c),null;case 10:return on(c.type._context),io(c),null;case 17:return ro(c.type)&&Yu(),io(c),null;case 19:if(Pr(tn),P=c.memoizedState,P===null)return io(c),null;if(y=(c.flags&128)!==0,K=P.rendering,K===null)if(y)Ih(P,!1);else{if(hi!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(K=cs(a),K!==null){for(c.flags|=128,Ih(P,!1),y=K.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),c.subtreeFlags=0,y=f,f=c.child;f!==null;)P=f,a=y,P.flags&=14680066,K=P.alternate,K===null?(P.childLanes=0,P.lanes=a,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=K.childLanes,P.lanes=K.lanes,P.child=K.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=K.memoizedProps,P.memoizedState=K.memoizedState,P.updateQueue=K.updateQueue,P.type=K.type,a=K.dependencies,P.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),f=f.sibling;return Lr(tn,tn.current&1|2),c.child}a=a.sibling}P.tail!==null&&jr()>cd&&(c.flags|=128,y=!0,Ih(P,!1),c.lanes=4194304)}else{if(!y)if(a=cs(K),a!==null){if(c.flags|=128,y=!0,f=a.updateQueue,f!==null&&(c.updateQueue=f,c.flags|=4),Ih(P,!0),P.tail===null&&P.tailMode==="hidden"&&!K.alternate&&!Ue)return io(c),null}else 2*jr()-P.renderingStartTime>cd&&f!==1073741824&&(c.flags|=128,y=!0,Ih(P,!1),c.lanes=4194304);P.isBackwards?(K.sibling=c.child,c.child=K):(f=P.last,f!==null?f.sibling=K:c.child=K,P.last=K)}return P.tail!==null?(c=P.tail,P.rendering=c,P.tail=c.sibling,P.renderingStartTime=jr(),c.sibling=null,f=tn.current,Lr(tn,y?f&1|2:f&1),c):(io(c),null);case 22:case 23:return rg(),y=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==y&&(c.flags|=8192),y&&(c.mode&1)!==0?(hs&1073741824)!==0&&(io(c),c.subtreeFlags&6&&(c.flags|=8192)):io(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function eT(a,c){switch(Ne(c),c.tag){case 1:return ro(c.type)&&Yu(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Bs(),Pr(to),Pr(ui),Ah(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return _h(c),null;case 13:if(Pr(tn),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(t(340));ut()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return Pr(tn),null;case 4:return Bs(),null;case 10:return on(c.type._context),null;case 22:case 23:return rg(),null;case 24:return null;default:return null}}var dp=!1,oo=!1,tT=typeof WeakSet=="function"?WeakSet:Set,dt=null;function ad(a,c){var f=a.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(y){Bn(a,c,y)}else f.current=null}function U0(a,c,f){try{f()}catch(y){Bn(a,c,y)}}var $2=!1;function rT(a,c){if(qc=ts,a=jn(),ss(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var y=f.getSelection&&f.getSelection();if(y&&y.rangeCount!==0){f=y.anchorNode;var T=y.anchorOffset,P=y.focusNode;y=y.focusOffset;try{f.nodeType,P.nodeType}catch{f=null;break e}var K=0,pe=-1,be=-1,Ve=0,Ye=0,Xe=a,Je=null;t:for(;;){for(var at;Xe!==f||T!==0&&Xe.nodeType!==3||(pe=K+T),Xe!==P||y!==0&&Xe.nodeType!==3||(be=K+y),Xe.nodeType===3&&(K+=Xe.nodeValue.length),(at=Xe.firstChild)!==null;)Je=Xe,Xe=at;for(;;){if(Xe===a)break t;if(Je===f&&++Ve===T&&(pe=K),Je===P&&++Ye===y&&(be=K),(at=Xe.nextSibling)!==null)break;Xe=Je,Je=Xe.parentNode}Xe=at}f=pe===-1||be===-1?null:{start:pe,end:be}}else f=null}f=f||{start:0,end:0}}else f=null;for(hl={focusedElem:a,selectionRange:f},ts=!1,dt=c;dt!==null;)if(c=dt,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,dt=a;else for(;dt!==null;){c=dt;try{var gt=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(gt!==null){var bt=gt.memoizedProps,Hn=gt.memoizedState,Pe=c.stateNode,Te=Pe.getSnapshotBeforeUpdate(c.elementType===c.type?bt:aa(c.type,bt),Hn);Pe.__reactInternalSnapshotBeforeUpdate=Te}break;case 3:var Le=c.stateNode.containerInfo;Le.nodeType===1?Le.textContent="":Le.nodeType===9&&Le.documentElement&&Le.removeChild(Le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(et){Bn(c,c.return,et)}if(a=c.sibling,a!==null){a.return=c.return,dt=a;break}dt=c.return}return gt=$2,$2=!1,gt}function Eh(a,c,f){var y=c.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var T=y=y.next;do{if((T.tag&a)===a){var P=T.destroy;T.destroy=void 0,P!==void 0&&U0(c,f,P)}T=T.next}while(T!==y)}}function hp(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&a)===a){var y=f.create;f.destroy=y()}f=f.next}while(f!==c)}}function q0(a){var c=a.ref;if(c!==null){var f=a.stateNode;switch(a.tag){case 5:a=f;break;default:a=f}typeof c=="function"?c(a):c.current=a}}function U2(a){var c=a.alternate;c!==null&&(a.alternate=null,U2(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[Ns],delete c[ql],delete c[eo],delete c[E0],delete c[j0])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function q2(a){return a.tag===5||a.tag===3||a.tag===4}function H2(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||q2(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function H0(a,c,f){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?f.nodeType===8?f.parentNode.insertBefore(a,c):f.insertBefore(a,c):(f.nodeType===8?(c=f.parentNode,c.insertBefore(a,f)):(c=f,c.appendChild(a)),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=Ul));else if(y!==4&&(a=a.child,a!==null))for(H0(a,c,f),a=a.sibling;a!==null;)H0(a,c,f),a=a.sibling}function G0(a,c,f){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?f.insertBefore(a,c):f.appendChild(a);else if(y!==4&&(a=a.child,a!==null))for(G0(a,c,f),a=a.sibling;a!==null;)G0(a,c,f),a=a.sibling}var Wi=null,la=!1;function Xl(a,c,f){for(f=f.child;f!==null;)G2(a,c,f),f=f.sibling}function G2(a,c,f){if(xi&&typeof xi.onCommitFiberUnmount=="function")try{xi.onCommitFiberUnmount(_s,f)}catch{}switch(f.tag){case 5:oo||ad(f,c);case 6:var y=Wi,T=la;Wi=null,Xl(a,c,f),Wi=y,la=T,Wi!==null&&(la?(a=Wi,f=f.stateNode,a.nodeType===8?a.parentNode.removeChild(f):a.removeChild(f)):Wi.removeChild(f.stateNode));break;case 18:Wi!==null&&(la?(a=Wi,f=f.stateNode,a.nodeType===8?bh(a.parentNode,f):a.nodeType===1&&bh(a,f),bo(a)):bh(Wi,f.stateNode));break;case 4:y=Wi,T=la,Wi=f.stateNode.containerInfo,la=!0,Xl(a,c,f),Wi=y,la=T;break;case 0:case 11:case 14:case 15:if(!oo&&(y=f.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){T=y=y.next;do{var P=T,K=P.destroy;P=P.tag,K!==void 0&&((P&2)!==0||(P&4)!==0)&&U0(f,c,K),T=T.next}while(T!==y)}Xl(a,c,f);break;case 1:if(!oo&&(ad(f,c),y=f.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=f.memoizedProps,y.state=f.memoizedState,y.componentWillUnmount()}catch(pe){Bn(f,c,pe)}Xl(a,c,f);break;case 21:Xl(a,c,f);break;case 22:f.mode&1?(oo=(y=oo)||f.memoizedState!==null,Xl(a,c,f),oo=y):Xl(a,c,f);break;default:Xl(a,c,f)}}function K2(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var f=a.stateNode;f===null&&(f=a.stateNode=new tT),c.forEach(function(y){var T=dT.bind(null,a,y);f.has(y)||(f.add(y),y.then(T,T))})}}function ca(a,c){var f=c.deletions;if(f!==null)for(var y=0;y<f.length;y++){var T=f[y];try{var P=a,K=c,pe=K;e:for(;pe!==null;){switch(pe.tag){case 5:Wi=pe.stateNode,la=!1;break e;case 3:Wi=pe.stateNode.containerInfo,la=!0;break e;case 4:Wi=pe.stateNode.containerInfo,la=!0;break e}pe=pe.return}if(Wi===null)throw Error(t(160));G2(P,K,T),Wi=null,la=!1;var be=T.alternate;be!==null&&(be.return=null),T.return=null}catch(Ve){Bn(T,c,Ve)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)J2(c,a),c=c.sibling}function J2(a,c){var f=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(ca(c,a),za(a),y&4){try{Eh(3,a,a.return),hp(3,a)}catch(bt){Bn(a,a.return,bt)}try{Eh(5,a,a.return)}catch(bt){Bn(a,a.return,bt)}}break;case 1:ca(c,a),za(a),y&512&&f!==null&&ad(f,f.return);break;case 5:if(ca(c,a),za(a),y&512&&f!==null&&ad(f,f.return),a.flags&32){var T=a.stateNode;try{jt(T,"")}catch(bt){Bn(a,a.return,bt)}}if(y&4&&(T=a.stateNode,T!=null)){var P=a.memoizedProps,K=f!==null?f.memoizedProps:P,pe=a.type,be=a.updateQueue;if(a.updateQueue=null,be!==null)try{pe==="input"&&P.type==="radio"&&P.name!=null&&Nt(T,P),It(pe,K);var Ve=It(pe,P);for(K=0;K<be.length;K+=2){var Ye=be[K],Xe=be[K+1];Ye==="style"?ht(T,Xe):Ye==="dangerouslySetInnerHTML"?Tt(T,Xe):Ye==="children"?jt(T,Xe):$(T,Ye,Xe,Ve)}switch(pe){case"input":Et(T,P);break;case"textarea":mr(T,P);break;case"select":var Je=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!P.multiple;var at=P.value;at!=null?rt(T,!!P.multiple,at,!1):Je!==!!P.multiple&&(P.defaultValue!=null?rt(T,!!P.multiple,P.defaultValue,!0):rt(T,!!P.multiple,P.multiple?[]:"",!1))}T[ql]=P}catch(bt){Bn(a,a.return,bt)}}break;case 6:if(ca(c,a),za(a),y&4){if(a.stateNode===null)throw Error(t(162));T=a.stateNode,P=a.memoizedProps;try{T.nodeValue=P}catch(bt){Bn(a,a.return,bt)}}break;case 3:if(ca(c,a),za(a),y&4&&f!==null&&f.memoizedState.isDehydrated)try{bo(c.containerInfo)}catch(bt){Bn(a,a.return,bt)}break;case 4:ca(c,a),za(a);break;case 13:ca(c,a),za(a),T=a.child,T.flags&8192&&(P=T.memoizedState!==null,T.stateNode.isHidden=P,!P||T.alternate!==null&&T.alternate.memoizedState!==null||(Y0=jr())),y&4&&K2(a);break;case 22:if(Ye=f!==null&&f.memoizedState!==null,a.mode&1?(oo=(Ve=oo)||Ye,ca(c,a),oo=Ve):ca(c,a),za(a),y&8192){if(Ve=a.memoizedState!==null,(a.stateNode.isHidden=Ve)&&!Ye&&(a.mode&1)!==0)for(dt=a,Ye=a.child;Ye!==null;){for(Xe=dt=Ye;dt!==null;){switch(Je=dt,at=Je.child,Je.tag){case 0:case 11:case 14:case 15:Eh(4,Je,Je.return);break;case 1:ad(Je,Je.return);var gt=Je.stateNode;if(typeof gt.componentWillUnmount=="function"){y=Je,f=Je.return;try{c=y,gt.props=c.memoizedProps,gt.state=c.memoizedState,gt.componentWillUnmount()}catch(bt){Bn(y,f,bt)}}break;case 5:ad(Je,Je.return);break;case 22:if(Je.memoizedState!==null){X2(Xe);continue}}at!==null?(at.return=Je,dt=at):X2(Xe)}Ye=Ye.sibling}e:for(Ye=null,Xe=a;;){if(Xe.tag===5){if(Ye===null){Ye=Xe;try{T=Xe.stateNode,Ve?(P=T.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(pe=Xe.stateNode,be=Xe.memoizedProps.style,K=be!=null&&be.hasOwnProperty("display")?be.display:null,pe.style.display=ir("display",K))}catch(bt){Bn(a,a.return,bt)}}}else if(Xe.tag===6){if(Ye===null)try{Xe.stateNode.nodeValue=Ve?"":Xe.memoizedProps}catch(bt){Bn(a,a.return,bt)}}else if((Xe.tag!==22&&Xe.tag!==23||Xe.memoizedState===null||Xe===a)&&Xe.child!==null){Xe.child.return=Xe,Xe=Xe.child;continue}if(Xe===a)break e;for(;Xe.sibling===null;){if(Xe.return===null||Xe.return===a)break e;Ye===Xe&&(Ye=null),Xe=Xe.return}Ye===Xe&&(Ye=null),Xe.sibling.return=Xe.return,Xe=Xe.sibling}}break;case 19:ca(c,a),za(a),y&4&&K2(a);break;case 21:break;default:ca(c,a),za(a)}}function za(a){var c=a.flags;if(c&2){try{e:{for(var f=a.return;f!==null;){if(q2(f)){var y=f;break e}f=f.return}throw Error(t(160))}switch(y.tag){case 5:var T=y.stateNode;y.flags&32&&(jt(T,""),y.flags&=-33);var P=H2(a);G0(a,P,T);break;case 3:case 4:var K=y.stateNode.containerInfo,pe=H2(a);H0(a,pe,K);break;default:throw Error(t(161))}}catch(be){Bn(a,a.return,be)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function nT(a,c,f){dt=a,Y2(a)}function Y2(a,c,f){for(var y=(a.mode&1)!==0;dt!==null;){var T=dt,P=T.child;if(T.tag===22&&y){var K=T.memoizedState!==null||dp;if(!K){var pe=T.alternate,be=pe!==null&&pe.memoizedState!==null||oo;pe=dp;var Ve=oo;if(dp=K,(oo=be)&&!Ve)for(dt=T;dt!==null;)K=dt,be=K.child,K.tag===22&&K.memoizedState!==null?Z2(T):be!==null?(be.return=K,dt=be):Z2(T);for(;P!==null;)dt=P,Y2(P),P=P.sibling;dt=T,dp=pe,oo=Ve}Q2(a)}else(T.subtreeFlags&8772)!==0&&P!==null?(P.return=T,dt=P):Q2(a)}}function Q2(a){for(;dt!==null;){var c=dt;if((c.flags&8772)!==0){var f=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:oo||hp(5,c);break;case 1:var y=c.stateNode;if(c.flags&4&&!oo)if(f===null)y.componentDidMount();else{var T=c.elementType===c.type?f.memoizedProps:aa(c.type,f.memoizedProps);y.componentDidUpdate(T,f.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var P=c.updateQueue;P!==null&&$o(c,P,y);break;case 3:var K=c.updateQueue;if(K!==null){if(f=null,c.child!==null)switch(c.child.tag){case 5:f=c.child.stateNode;break;case 1:f=c.child.stateNode}$o(c,K,f)}break;case 5:var pe=c.stateNode;if(f===null&&c.flags&4){f=pe;var be=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":be.autoFocus&&f.focus();break;case"img":be.src&&(f.src=be.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var Ve=c.alternate;if(Ve!==null){var Ye=Ve.memoizedState;if(Ye!==null){var Xe=Ye.dehydrated;Xe!==null&&bo(Xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}oo||c.flags&512&&q0(c)}catch(Je){Bn(c,c.return,Je)}}if(c===a){dt=null;break}if(f=c.sibling,f!==null){f.return=c.return,dt=f;break}dt=c.return}}function X2(a){for(;dt!==null;){var c=dt;if(c===a){dt=null;break}var f=c.sibling;if(f!==null){f.return=c.return,dt=f;break}dt=c.return}}function Z2(a){for(;dt!==null;){var c=dt;try{switch(c.tag){case 0:case 11:case 15:var f=c.return;try{hp(4,c)}catch(be){Bn(c,f,be)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var T=c.return;try{y.componentDidMount()}catch(be){Bn(c,T,be)}}var P=c.return;try{q0(c)}catch(be){Bn(c,P,be)}break;case 5:var K=c.return;try{q0(c)}catch(be){Bn(c,K,be)}}}catch(be){Bn(c,c.return,be)}if(c===a){dt=null;break}var pe=c.sibling;if(pe!==null){pe.return=c.return,dt=pe;break}dt=c.return}}var iT=Math.ceil,fp=F.ReactCurrentDispatcher,K0=F.ReactCurrentOwner,zs=F.ReactCurrentBatchConfig,Ar=0,Ei=null,ri=null,$i=0,hs=0,ld=as(0),hi=0,jh=null,Qc=0,pp=0,J0=0,Rh=null,qo=null,Y0=0,cd=1/0,xl=null,mp=!1,Q0=null,Zl=null,gp=!1,ec=null,yp=0,Ph=0,X0=null,xp=-1,vp=0;function ko(){return(Ar&6)!==0?jr():xp!==-1?xp:xp=jr()}function tc(a){return(a.mode&1)===0?1:(Ar&2)!==0&&$i!==0?$i&-$i:_n.transition!==null?(vp===0&&(vp=Qa()),vp):(a=or,a!==0||(a=window.event,a=a===void 0?16:ns(a.type)),a)}function ua(a,c,f,y){if(50<Ph)throw Ph=0,X0=null,Error(t(185));Hs(a,f,y),((Ar&2)===0||a!==Ei)&&(a===Ei&&((Ar&2)===0&&(pp|=f),hi===4&&rc(a,$i)),Ho(a,y),f===1&&Ar===0&&(c.mode&1)===0&&(cd=jr()+500,Gc&&z()))}function Ho(a,c){var f=a.callbackNode;Or(a,c);var y=Mn(a,a===Ei?$i:0);if(y===0)f!==null&&Qo(f),a.callbackNode=null,a.callbackPriority=0;else if(c=y&-y,a.callbackPriority!==c){if(f!=null&&Qo(f),c===1)a.tag===0?j(ty.bind(null,a)):v(ty.bind(null,a)),k0(function(){(Ar&6)===0&&z()}),f=null;else{switch(li(y)){case 1:f=Us;break;case 4:f=yi;break;case 16:f=Zo;break;case 536870912:f=Ss;break;default:f=Zo}f=cy(f,ey.bind(null,a))}a.callbackPriority=c,a.callbackNode=f}}function ey(a,c){if(xp=-1,vp=0,(Ar&6)!==0)throw Error(t(327));var f=a.callbackNode;if(ud()&&a.callbackNode!==f)return null;var y=Mn(a,a===Ei?$i:0);if(y===0)return null;if((y&30)!==0||(y&a.expiredLanes)!==0||c)c=bp(a,y);else{c=y;var T=Ar;Ar|=2;var P=ny();(Ei!==a||$i!==c)&&(xl=null,cd=jr()+500,Zc(a,c));do try{aT();break}catch(pe){ry(a,pe)}while(!0);_r(),fp.current=P,Ar=T,ri!==null?c=0:(Ei=null,$i=0,c=hi)}if(c!==0){if(c===2&&(T=qs(a),T!==0&&(y=T,c=Z0(a,T))),c===1)throw f=jh,Zc(a,0),rc(a,y),Ho(a,jr()),f;if(c===6)rc(a,y);else{if(T=a.current.alternate,(y&30)===0&&!oT(T)&&(c=bp(a,y),c===2&&(P=qs(a),P!==0&&(y=P,c=Z0(a,P))),c===1))throw f=jh,Zc(a,0),rc(a,y),Ho(a,jr()),f;switch(a.finishedWork=T,a.finishedLanes=y,c){case 0:case 1:throw Error(t(345));case 2:eu(a,qo,xl);break;case 3:if(rc(a,y),(y&130023424)===y&&(c=Y0+500-jr(),10<c)){if(Mn(a,0)!==0)break;if(T=a.suspendedLanes,(T&y)!==y){ko(),a.pingedLanes|=a.suspendedLanes&T;break}a.timeoutHandle=vh(eu.bind(null,a,qo,xl),c);break}eu(a,qo,xl);break;case 4:if(rc(a,y),(y&4194240)===y)break;for(c=a.eventTimes,T=-1;0<y;){var K=31-Qn(y);P=1<<K,K=c[K],K>T&&(T=K),y&=~P}if(y=T,y=jr()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*iT(y/1960))-y,10<y){a.timeoutHandle=vh(eu.bind(null,a,qo,xl),y);break}eu(a,qo,xl);break;case 5:eu(a,qo,xl);break;default:throw Error(t(329))}}}return Ho(a,jr()),a.callbackNode===f?ey.bind(null,a):null}function Z0(a,c){var f=Rh;return a.current.memoizedState.isDehydrated&&(Zc(a,c).flags|=256),a=bp(a,c),a!==2&&(c=qo,qo=f,c!==null&&eg(c)),a}function eg(a){qo===null?qo=a:qo.push.apply(qo,a)}function oT(a){for(var c=a;;){if(c.flags&16384){var f=c.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var y=0;y<f.length;y++){var T=f[y],P=T.getSnapshot;T=T.value;try{if(!hn(P(),T))return!1}catch{return!1}}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function rc(a,c){for(c&=~J0,c&=~pp,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var f=31-Qn(c),y=1<<f;a[f]=-1,c&=~y}}function ty(a){if((Ar&6)!==0)throw Error(t(327));ud();var c=Mn(a,0);if((c&1)===0)return Ho(a,jr()),null;var f=bp(a,c);if(a.tag!==0&&f===2){var y=qs(a);y!==0&&(c=y,f=Z0(a,y))}if(f===1)throw f=jh,Zc(a,0),rc(a,c),Ho(a,jr()),f;if(f===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,eu(a,qo,xl),Ho(a,jr()),null}function tg(a,c){var f=Ar;Ar|=1;try{return a(c)}finally{Ar=f,Ar===0&&(cd=jr()+500,Gc&&z())}}function Xc(a){ec!==null&&ec.tag===0&&(Ar&6)===0&&ud();var c=Ar;Ar|=1;var f=zs.transition,y=or;try{if(zs.transition=null,or=1,a)return a()}finally{or=y,zs.transition=f,Ar=c,(Ar&6)===0&&z()}}function rg(){hs=ld.current,Pr(ld)}function Zc(a,c){a.finishedWork=null,a.finishedLanes=0;var f=a.timeoutHandle;if(f!==-1&&(a.timeoutHandle=-1,Xf(f)),ri!==null)for(f=ri.return;f!==null;){var y=f;switch(Ne(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Yu();break;case 3:Bs(),Pr(to),Pr(ui),Ah();break;case 5:_h(y);break;case 4:Bs();break;case 13:Pr(tn);break;case 19:Pr(tn);break;case 10:on(y.type._context);break;case 22:case 23:rg()}f=f.return}if(Ei=a,ri=a=nc(a.current,null),$i=hs=c,hi=0,jh=null,J0=pp=Qc=0,qo=Rh=null,$r!==null){for(c=0;c<$r.length;c++)if(f=$r[c],y=f.interleaved,y!==null){f.interleaved=null;var T=y.next,P=f.pending;if(P!==null){var K=P.next;P.next=T,y.next=K}f.pending=y}$r=null}return a}function ry(a,c){do{var f=ri;try{if(_r(),Qu.current=ap,Jl){for(var y=sn.memoizedState;y!==null;){var T=y.queue;T!==null&&(T.pending=null),y=y.next}Jl=!1}if(Ls=0,kn=Nn=sn=null,oa=!1,Yl=0,K0.current=null,f===null||f.return===null){hi=1,jh=c,ri=null;break}e:{var P=a,K=f.return,pe=f,be=c;if(c=$i,pe.flags|=32768,be!==null&&typeof be=="object"&&typeof be.then=="function"){var Ve=be,Ye=pe,Xe=Ye.tag;if((Ye.mode&1)===0&&(Xe===0||Xe===11||Xe===15)){var Je=Ye.alternate;Je?(Ye.updateQueue=Je.updateQueue,Ye.memoizedState=Je.memoizedState,Ye.lanes=Je.lanes):(Ye.updateQueue=null,Ye.memoizedState=null)}var at=k2(K);if(at!==null){at.flags&=-257,I2(at,K,pe,P,c),at.mode&1&&C2(P,Ve,c),c=at,be=Ve;var gt=c.updateQueue;if(gt===null){var bt=new Set;bt.add(be),c.updateQueue=bt}else gt.add(be);break e}else{if((c&1)===0){C2(P,Ve,c),ng();break e}be=Error(t(426))}}else if(Ue&&pe.mode&1){var Hn=k2(K);if(Hn!==null){(Hn.flags&65536)===0&&(Hn.flags|=256),I2(Hn,K,pe,P,c),nt(sd(be,pe));break e}}P=be=sd(be,pe),hi!==4&&(hi=2),Rh===null?Rh=[P]:Rh.push(P),P=K;do{switch(P.tag){case 3:P.flags|=65536,c&=-c,P.lanes|=c;var Pe=T2(P,be,c);qr(P,Pe);break e;case 1:pe=be;var Te=P.type,Le=P.stateNode;if((P.flags&128)===0&&(typeof Te.getDerivedStateFromError=="function"||Le!==null&&typeof Le.componentDidCatch=="function"&&(Zl===null||!Zl.has(Le)))){P.flags|=65536,c&=-c,P.lanes|=c;var et=A2(P,pe,c);qr(P,et);break e}}P=P.return}while(P!==null)}oy(f)}catch(At){c=At,ri===f&&f!==null&&(ri=f=f.return);continue}break}while(!0)}function ny(){var a=fp.current;return fp.current=ap,a===null?ap:a}function ng(){(hi===0||hi===3||hi===2)&&(hi=4),Ei===null||(Qc&268435455)===0&&(pp&268435455)===0||rc(Ei,$i)}function bp(a,c){var f=Ar;Ar|=2;var y=ny();(Ei!==a||$i!==c)&&(xl=null,Zc(a,c));do try{sT();break}catch(T){ry(a,T)}while(!0);if(_r(),Ar=f,fp.current=y,ri!==null)throw Error(t(261));return Ei=null,$i=0,hi}function sT(){for(;ri!==null;)iy(ri)}function aT(){for(;ri!==null&&!Po();)iy(ri)}function iy(a){var c=ly(a.alternate,a,hs);a.memoizedProps=a.pendingProps,c===null?oy(a):ri=c,K0.current=null}function oy(a){var c=a;do{var f=c.alternate;if(a=c.return,(c.flags&32768)===0){if(f=Z4(f,c,hs),f!==null){ri=f;return}}else{if(f=eT(f,c),f!==null){f.flags&=32767,ri=f;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{hi=6,ri=null;return}}if(c=c.sibling,c!==null){ri=c;return}ri=c=a}while(c!==null);hi===0&&(hi=5)}function eu(a,c,f){var y=or,T=zs.transition;try{zs.transition=null,or=1,lT(a,c,f,y)}finally{zs.transition=T,or=y}return null}function lT(a,c,f,y){do ud();while(ec!==null);if((Ar&6)!==0)throw Error(t(327));f=a.finishedWork;var T=a.finishedLanes;if(f===null)return null;if(a.finishedWork=null,a.finishedLanes=0,f===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var P=f.lanes|f.childLanes;if(Bo(a,P),a===Ei&&(ri=Ei=null,$i=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||gp||(gp=!0,cy(Zo,function(){return ud(),null})),P=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||P){P=zs.transition,zs.transition=null;var K=or;or=1;var pe=Ar;Ar|=4,K0.current=null,rT(a,f),J2(f,a),zc(hl),ts=!!qc,hl=qc=null,a.current=f,nT(f),Xo(),Ar=pe,or=K,zs.transition=P}else a.current=f;if(gp&&(gp=!1,ec=a,yp=T),P=a.pendingLanes,P===0&&(Zl=null),Ya(f.stateNode),Ho(a,jr()),c!==null)for(y=a.onRecoverableError,f=0;f<c.length;f++)T=c[f],y(T.value,{componentStack:T.stack,digest:T.digest});if(mp)throw mp=!1,a=Q0,Q0=null,a;return(yp&1)!==0&&a.tag!==0&&ud(),P=a.pendingLanes,(P&1)!==0?a===X0?Ph++:(Ph=0,X0=a):Ph=0,z(),null}function ud(){if(ec!==null){var a=li(yp),c=zs.transition,f=or;try{if(zs.transition=null,or=16>a?16:a,ec===null)var y=!1;else{if(a=ec,ec=null,yp=0,(Ar&6)!==0)throw Error(t(331));var T=Ar;for(Ar|=4,dt=a.current;dt!==null;){var P=dt,K=P.child;if((dt.flags&16)!==0){var pe=P.deletions;if(pe!==null){for(var be=0;be<pe.length;be++){var Ve=pe[be];for(dt=Ve;dt!==null;){var Ye=dt;switch(Ye.tag){case 0:case 11:case 15:Eh(8,Ye,P)}var Xe=Ye.child;if(Xe!==null)Xe.return=Ye,dt=Xe;else for(;dt!==null;){Ye=dt;var Je=Ye.sibling,at=Ye.return;if(U2(Ye),Ye===Ve){dt=null;break}if(Je!==null){Je.return=at,dt=Je;break}dt=at}}}var gt=P.alternate;if(gt!==null){var bt=gt.child;if(bt!==null){gt.child=null;do{var Hn=bt.sibling;bt.sibling=null,bt=Hn}while(bt!==null)}}dt=P}}if((P.subtreeFlags&2064)!==0&&K!==null)K.return=P,dt=K;else e:for(;dt!==null;){if(P=dt,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:Eh(9,P,P.return)}var Pe=P.sibling;if(Pe!==null){Pe.return=P.return,dt=Pe;break e}dt=P.return}}var Te=a.current;for(dt=Te;dt!==null;){K=dt;var Le=K.child;if((K.subtreeFlags&2064)!==0&&Le!==null)Le.return=K,dt=Le;else e:for(K=Te;dt!==null;){if(pe=dt,(pe.flags&2048)!==0)try{switch(pe.tag){case 0:case 11:case 15:hp(9,pe)}}catch(At){Bn(pe,pe.return,At)}if(pe===K){dt=null;break e}var et=pe.sibling;if(et!==null){et.return=pe.return,dt=et;break e}dt=pe.return}}if(Ar=T,z(),xi&&typeof xi.onPostCommitFiberRoot=="function")try{xi.onPostCommitFiberRoot(_s,a)}catch{}y=!0}return y}finally{or=f,zs.transition=c}}return!1}function sy(a,c,f){c=sd(f,c),c=T2(a,c,1),a=An(a,c,1),c=ko(),a!==null&&(Hs(a,1,c),Ho(a,c))}function Bn(a,c,f){if(a.tag===3)sy(a,a,f);else for(;c!==null;){if(c.tag===3){sy(c,a,f);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Zl===null||!Zl.has(y))){a=sd(f,a),a=A2(c,a,1),c=An(c,a,1),a=ko(),c!==null&&(Hs(c,1,a),Ho(c,a));break}}c=c.return}}function cT(a,c,f){var y=a.pingCache;y!==null&&y.delete(c),c=ko(),a.pingedLanes|=a.suspendedLanes&f,Ei===a&&($i&f)===f&&(hi===4||hi===3&&($i&130023424)===$i&&500>jr()-Y0?Zc(a,0):J0|=f),Ho(a,c)}function ay(a,c){c===0&&((a.mode&1)===0?c=1:(c=vi,vi<<=1,(vi&130023424)===0&&(vi=4194304)));var f=ko();a=Ur(a,c),a!==null&&(Hs(a,c,f),Ho(a,f))}function uT(a){var c=a.memoizedState,f=0;c!==null&&(f=c.retryLane),ay(a,f)}function dT(a,c){var f=0;switch(a.tag){case 13:var y=a.stateNode,T=a.memoizedState;T!==null&&(f=T.retryLane);break;case 19:y=a.stateNode;break;default:throw Error(t(314))}y!==null&&y.delete(c),ay(a,f)}var ly;ly=function(a,c,f){if(a!==null)if(a.memoizedProps!==c.pendingProps||to.current)Uo=!0;else{if((a.lanes&f)===0&&(c.flags&128)===0)return Uo=!1,X4(a,c,f);Uo=(a.flags&131072)!==0}else Uo=!1,Ue&&(c.flags&1048576)!==0&&Ee(c,X,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;up(a,c),a=c.pendingProps;var T=Gl(c,ui.current);mn(c,f),T=Kc(null,c,y,a,T,f);var P=Fs();return c.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,ro(y)?(P=!0,ml(c)):P=!1,c.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,di(c),T.updater=lp,c.stateNode=T,T._reactInternals=c,B0(c,y,a,f),c=V0(null,c,y,!0,P,f)):(c.tag=0,Ue&&P&&De(c),Co(null,c,T,f),c=c.child),c;case 16:y=c.elementType;e:{switch(up(a,c),a=c.pendingProps,T=y._init,y=T(y._payload),c.type=y,T=c.tag=fT(y),a=aa(y,a),T){case 0:c=z0(null,c,y,a,f);break e;case 1:c=B2(null,c,y,a,f);break e;case 11:c=E2(null,c,y,a,f);break e;case 14:c=j2(null,c,y,aa(y.type,a),f);break e}throw Error(t(306,y,""))}return c;case 0:return y=c.type,T=c.pendingProps,T=c.elementType===y?T:aa(y,T),z0(a,c,y,T,f);case 1:return y=c.type,T=c.pendingProps,T=c.elementType===y?T:aa(y,T),B2(a,c,y,T,f);case 3:e:{if(L2(c),a===null)throw Error(t(387));y=c.pendingProps,P=c.memoizedState,T=P.element,no(a,c),Ii(c,y,null,f);var K=c.memoizedState;if(y=K.element,P.isDehydrated)if(P={element:y,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},c.updateQueue.baseState=P,c.memoizedState=P,c.flags&256){T=sd(Error(t(423)),c),c=F2(a,c,y,f,T);break e}else if(y!==T){T=sd(Error(t(424)),c),c=F2(a,c,y,f,T);break e}else for(Me=Di(c.stateNode.containerInfo.firstChild),Oe=c,Ue=!0,qe=null,f=an(c,null,y,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(ut(),y===T){c=yl(a,c,f);break e}Co(a,c,y,f)}c=c.child}return c;case 5:return rp(c),a===null&&ft(c),y=c.type,T=c.pendingProps,P=a!==null?a.memoizedProps:null,K=T.children,xh(y,T)?K=null:P!==null&&xh(y,P)&&(c.flags|=32),N2(a,c),Co(a,c,K,f),c.child;case 6:return a===null&&ft(c),null;case 13:return z2(a,c,f);case 4:return Kl(c,c.stateNode.containerInfo),y=c.pendingProps,a===null?c.child=Rn(c,null,y,f):Co(a,c,y,f),c.child;case 11:return y=c.type,T=c.pendingProps,T=c.elementType===y?T:aa(y,T),E2(a,c,y,T,f);case 7:return Co(a,c,c.pendingProps,f),c.child;case 8:return Co(a,c,c.pendingProps.children,f),c.child;case 12:return Co(a,c,c.pendingProps.children,f),c.child;case 10:e:{if(y=c.type._context,T=c.pendingProps,P=c.memoizedProps,K=T.value,Lr(Un,y._currentValue),y._currentValue=K,P!==null)if(hn(P.value,K)){if(P.children===T.children&&!to.current){c=yl(a,c,f);break e}}else for(P=c.child,P!==null&&(P.return=c);P!==null;){var pe=P.dependencies;if(pe!==null){K=P.child;for(var be=pe.firstContext;be!==null;){if(be.context===y){if(P.tag===1){be=Tn(-1,f&-f),be.tag=2;var Ve=P.updateQueue;if(Ve!==null){Ve=Ve.shared;var Ye=Ve.pending;Ye===null?be.next=be:(be.next=Ye.next,Ye.next=be),Ve.pending=be}}P.lanes|=f,be=P.alternate,be!==null&&(be.lanes|=f),Tr(P.return,f,c),pe.lanes|=f;break}be=be.next}}else if(P.tag===10)K=P.type===c.type?null:P.child;else if(P.tag===18){if(K=P.return,K===null)throw Error(t(341));K.lanes|=f,pe=K.alternate,pe!==null&&(pe.lanes|=f),Tr(K,f,c),K=P.sibling}else K=P.child;if(K!==null)K.return=P;else for(K=P;K!==null;){if(K===c){K=null;break}if(P=K.sibling,P!==null){P.return=K.return,K=P;break}K=K.return}P=K}Co(a,c,T.children,f),c=c.child}return c;case 9:return T=c.type,y=c.pendingProps.children,mn(c,f),T=gn(T),y=y(T),c.flags|=1,Co(a,c,y,f),c.child;case 14:return y=c.type,T=aa(y,c.pendingProps),T=aa(y.type,T),j2(a,c,y,T,f);case 15:return R2(a,c,c.type,c.pendingProps,f);case 17:return y=c.type,T=c.pendingProps,T=c.elementType===y?T:aa(y,T),up(a,c),c.tag=1,ro(y)?(a=!0,ml(c)):a=!1,mn(c,f),S2(c,y,T),B0(c,y,T,f),V0(null,c,y,!0,a,f);case 19:return O2(a,c,f);case 22:return P2(a,c,f)}throw Error(t(156,c.tag))};function cy(a,c){return ws(a,c)}function hT(a,c,f,y){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vs(a,c,f,y){return new hT(a,c,f,y)}function ig(a){return a=a.prototype,!(!a||!a.isReactComponent)}function fT(a){if(typeof a=="function")return ig(a)?1:0;if(a!=null){if(a=a.$$typeof,a===w)return 11;if(a===q)return 14}return 2}function nc(a,c){var f=a.alternate;return f===null?(f=Vs(a.tag,c,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=c,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&14680064,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,c=a.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f}function wp(a,c,f,y,T,P){var K=2;if(y=a,typeof a=="function")ig(a)&&(K=1);else if(typeof a=="string")K=5;else e:switch(a){case V:return tu(f.children,T,P,c);case k:K=8,T|=8;break;case I:return a=Vs(12,f,c,T|2),a.elementType=I,a.lanes=P,a;case N:return a=Vs(13,f,c,T),a.elementType=N,a.lanes=P,a;case D:return a=Vs(19,f,c,T),a.elementType=D,a.lanes=P,a;case se:return Sp(f,T,P,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case M:K=10;break e;case C:K=9;break e;case w:K=11;break e;case q:K=14;break e;case ne:K=16,y=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return c=Vs(K,f,c,T),c.elementType=a,c.type=y,c.lanes=P,c}function tu(a,c,f,y){return a=Vs(7,a,y,c),a.lanes=f,a}function Sp(a,c,f,y){return a=Vs(22,a,y,c),a.elementType=se,a.lanes=f,a.stateNode={isHidden:!1},a}function og(a,c,f){return a=Vs(6,a,null,c),a.lanes=f,a}function sg(a,c,f){return c=Vs(4,a.children!==null?a.children:[],a.key,c),c.lanes=f,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function pT(a,c,f,y,T){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xa(0),this.expirationTimes=Xa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xa(0),this.identifierPrefix=y,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function ag(a,c,f,y,T,P,K,pe,be){return a=new pT(a,c,f,pe,be),c===1?(c=1,P===!0&&(c|=8)):c=0,P=Vs(3,null,null,c),a.current=P,P.stateNode=a,P.memoizedState={element:y,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},di(P),a}function mT(a,c,f){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ue,key:y==null?null:""+y,children:a,containerInfo:c,implementation:f}}function uy(a){if(!a)return Ba;a=a._reactInternals;e:{if(bn(a)!==a||a.tag!==1)throw Error(t(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(ro(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(a.tag===1){var f=a.type;if(ro(f))return Sh(a,f,c)}return c}function dy(a,c,f,y,T,P,K,pe,be){return a=ag(f,y,!0,a,T,P,K,pe,be),a.context=uy(null),f=a.current,y=ko(),T=tc(f),P=Tn(y,T),P.callback=c??null,An(f,P,T),a.current.lanes=T,Hs(a,T,y),Ho(a,y),a}function _p(a,c,f,y){var T=c.current,P=ko(),K=tc(T);return f=uy(f),c.context===null?c.context=f:c.pendingContext=f,c=Tn(P,K),c.payload={element:a},y=y===void 0?null:y,y!==null&&(c.callback=y),a=An(T,c,K),a!==null&&(ua(a,T,K,P),ki(a,T,K)),K}function Tp(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function hy(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<c?f:c}}function lg(a,c){hy(a,c),(a=a.alternate)&&hy(a,c)}function gT(){return null}var fy=typeof reportError=="function"?reportError:function(a){console.error(a)};function cg(a){this._internalRoot=a}Ap.prototype.render=cg.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(t(409));_p(a,c,null,null)},Ap.prototype.unmount=cg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;Xc(function(){_p(null,a,null,null)}),c[Ai]=null}};function Ap(a){this._internalRoot=a}Ap.prototype.unstable_scheduleHydration=function(a){if(a){var c=el();a={blockedOn:null,target:a,priority:c};for(var f=0;f<zi.length&&c!==0&&c<zi[f].priority;f++);zi.splice(f,0,a),f===0&&Ta(a)}};function ug(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Cp(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function py(){}function yT(a,c,f,y,T){if(T){if(typeof y=="function"){var P=y;y=function(){var Ve=Tp(K);P.call(Ve)}}var K=dy(c,y,a,0,null,!1,!1,"",py);return a._reactRootContainer=K,a[Ai]=K.current,ul(a.nodeType===8?a.parentNode:a),Xc(),K}for(;T=a.lastChild;)a.removeChild(T);if(typeof y=="function"){var pe=y;y=function(){var Ve=Tp(be);pe.call(Ve)}}var be=ag(a,0,!1,null,null,!1,!1,"",py);return a._reactRootContainer=be,a[Ai]=be.current,ul(a.nodeType===8?a.parentNode:a),Xc(function(){_p(c,be,f,y)}),be}function kp(a,c,f,y,T){var P=f._reactRootContainer;if(P){var K=P;if(typeof T=="function"){var pe=T;T=function(){var be=Tp(K);pe.call(be)}}_p(c,K,a,T)}else K=yT(f,c,a,T,y);return Tp(K)}Gs=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var f=lr(c.pendingLanes);f!==0&&(Sa(c,f|1),Ho(c,jr()),(Ar&6)===0&&(cd=jr()+500,z()))}break;case 13:Xc(function(){var y=Ur(a,1);if(y!==null){var T=ko();ua(y,a,1,T)}}),lg(a,1)}},_a=function(a){if(a.tag===13){var c=Ur(a,134217728);if(c!==null){var f=ko();ua(c,a,134217728,f)}lg(a,134217728)}},Za=function(a){if(a.tag===13){var c=tc(a),f=Ur(a,c);if(f!==null){var y=ko();ua(f,a,c,y)}lg(a,c)}},el=function(){return or},Ks=function(a,c){var f=or;try{return or=a,c()}finally{or=f}},Er=function(a,c,f){switch(c){case"input":if(Et(a,f),c=f.name,f.type==="radio"&&c!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<f.length;c++){var y=f[c];if(y!==a&&y.form===a.form){var T=Hc(y);if(!T)throw Error(t(90));Ke(y),Et(y,T)}}}break;case"textarea":mr(a,f);break;case"select":c=f.value,c!=null&&rt(a,!!f.multiple,c,!1)}},zn=tg,Ro=Xc;var xT={usingClientEntryPoint:!1,Events:[Hl,fl,Hc,ar,Hi,tg]},Nh={findFiberByHostInstance:Na,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vT={bundleType:Nh.bundleType,version:Nh.version,rendererPackageName:Nh.rendererPackageName,rendererConfig:Nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=mo(a),a===null?null:a.stateNode},findFiberByHostInstance:Nh.findFiberByHostInstance||gT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ip=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ip.isDisabled&&Ip.supportsFiber)try{_s=Ip.inject(vT),xi=Ip}catch{}}return Go.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xT,Go.createPortal=function(a,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ug(c))throw Error(t(200));return mT(a,c,null,f)},Go.createRoot=function(a,c){if(!ug(a))throw Error(t(299));var f=!1,y="",T=fy;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(T=c.onRecoverableError)),c=ag(a,1,!1,null,null,f,!1,y,T),a[Ai]=c.current,ul(a.nodeType===8?a.parentNode:a),new cg(c)},Go.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=mo(c),a=a===null?null:a.stateNode,a},Go.flushSync=function(a){return Xc(a)},Go.hydrate=function(a,c,f){if(!Cp(c))throw Error(t(200));return kp(null,a,c,!0,f)},Go.hydrateRoot=function(a,c,f){if(!ug(a))throw Error(t(405));var y=f!=null&&f.hydratedSources||null,T=!1,P="",K=fy;if(f!=null&&(f.unstable_strictMode===!0&&(T=!0),f.identifierPrefix!==void 0&&(P=f.identifierPrefix),f.onRecoverableError!==void 0&&(K=f.onRecoverableError)),c=dy(c,null,a,1,f??null,T,!1,P,K),a[Ai]=c.current,ul(a),y)for(a=0;a<y.length;a++)f=y[a],T=f._getVersion,T=T(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,T]:c.mutableSourceEagerHydrationData.push(f,T);return new Ap(c)},Go.render=function(a,c,f){if(!Cp(c))throw Error(t(200));return kp(null,a,c,!1,f)},Go.unmountComponentAtNode=function(a){if(!Cp(a))throw Error(t(40));return a._reactRootContainer?(Xc(function(){kp(null,null,a,!1,function(){a._reactRootContainer=null,a[Ai]=null})}),!0):!1},Go.unstable_batchedUpdates=tg,Go.unstable_renderSubtreeIntoContainer=function(a,c,f,y){if(!Cp(f))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return kp(a,c,f,!1,y)},Go.version="18.3.1-next-f1338f8080-20240426",Go}var Sy;function jT(){if(Sy)return fg.exports;Sy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),fg.exports=ET(),fg.exports}var _y;function RT(){if(_y)return Ep;_y=1;var r=jT();return Ep.createRoot=r.createRoot,Ep.hydrateRoot=r.hydrateRoot,Ep}var PT=RT();const NT=Jb(PT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LT=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),Ty=r=>{const e=LT(r);return e.charAt(0).toUpperCase()+e.slice(1)},Yb=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),FT=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=fe.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:o,iconNode:l,...u},h)=>fe.createElement("svg",{ref:h,...zT,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:Yb("lucide",i),...!o&&!FT(u)&&{"aria-hidden":"true"},...u},[...l.map(([d,g])=>fe.createElement(d,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=(r,e)=>{const t=fe.forwardRef(({className:n,...i},o)=>fe.createElement(VT,{ref:o,iconNode:e,className:Yb(`lucide-${BT(Ty(r))}`,`lucide-${r}`,n),...i}));return t.displayName=Ty(r),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],MT=Ut("bell",OT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Qb=Ut("box",DT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Lu=Ut("briefcase",WT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Xb=Ut("building",$T);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"M17 19a1 1 0 0 1-1-1v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a1 1 0 0 1-1 1z",key:"trhst0"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M19 14V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V10",key:"1mo9zo"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M4 10a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2z",key:"1dd30t"}],["path",{d:"M7 5V3",key:"1t1388"}]],Zb=Ut("cable",UT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],cf=Ut("calculator",qT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],e1=Ut("calendar",HT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ew=Ut("chart-column",GT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],gm=Ut("chevron-down",KT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],YT=Ut("chevron-left",JT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],XT=Ut("chevron-right",QT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],e6=Ut("chevron-up",ZT);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],jf=Ut("circle-alert",t6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],En=Ut("circle-check-big",r6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],tw=Ut("circle",n6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qm=Ut("clock",i6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],rw=Ut("corner-down-right",o6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],X1=Ut("dollar-sign",s6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],Hm=Ut("file-down",a6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Rf=Ut("file-text",l6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],nw=Ut("gauge",c6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],iw=Ut("globe",u6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],ow=Ut("house",d6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],xs=Ut("info",h6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],sw=Ut("lightbulb",f6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],aw=Ut("lock",p6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],g6=Ut("log-out",m6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],t1=Ut("mail",y6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],lw=Ut("map-pin",x6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],b6=Ut("menu",v6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["path",{d:"M3 20h4.5a.5.5 0 0 0 .5-.5v-.282a.52.52 0 0 0-.247-.437 8 8 0 1 1 8.494-.001.52.52 0 0 0-.247.438v.282a.5.5 0 0 0 .5.5H21",key:"1x94xo"}]],cw=Ut("omega",w6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],uw=Ut("package",S6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],dw=Ut("plug",_6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ma=Ut("plus",T6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],hw=Ut("radio",A6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Z1=Ut("receipt",C6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],fw=Ut("search",k6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pw=Ut("settings",I6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],j6=Ut("shield",E6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}],["line",{x1:"12",x2:"12",y1:"16",y2:"16",key:"aqc6ln"}],["line",{x1:"12",x2:"12",y1:"8",y2:"8",key:"1mkcni"}]],mw=Ut("square-divide",R6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],gw=Ut("square-pen",P6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["path",{d:"M4 4v16",key:"6qkkli"}],["path",{d:"M9 4v16",key:"81ygyz"}],["path",{d:"M14 4v16",key:"12vmem"}]],yw=Ut("tally-3",N6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],xw=Ut("target",B6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Tc=Ut("trash-2",L6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],vw=Ut("trending-down",F6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],V6=Ut("trending-up",z6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Fu=Ut("triangle-alert",O6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]],bw=Ut("triangle",M6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],uf=Ut("user",D6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],e5=Ut("x",W6),$6="_container_1f4gz_47",U6="_menu_1f4gz_73",q6="_btn_1f4gz_75",ys={container:$6,menu:U6,btn:q6};function H6({onSelectCalculator:r,isDarkMode:e}){const[t,n]=fe.useState(""),i=[{name:"Power Calculations",calculators:[{id:"voltage-drop",name:"Voltage Drop",icon:vw,keywords:"voltage drop vd wire circuit"},{id:"ohms-law",name:"Ohm's Law",icon:mw,keywords:"ohms law voltage current resistance power series parallel circuit"},{id:"reactance-impedance",name:"Reactance",icon:cw,keywords:"reactance impedance xl xc capacitive inductive resonance frequency ac circuit"},{id:"power-factor",name:"Power Factor",icon:xw,keywords:"power factor correction pf capacitor kvar cos phi efficiency demand charge penalty savings"},{id:"power-triangle",name:"Power Triangle",icon:bw,keywords:"power triangle kva kw kvar apparent real reactive power factor angle phase"},{id:"three-phase-power",name:"Three-Phase",icon:yw,keywords:"three phase power 3 phase current voltage kw kva motor industrial commercial wye delta line"}]},{name:"Sizing & Rating",calculators:[{id:"ampacity",name:"Ampacity",icon:Zb,keywords:"ampacity current rating 310 temperature"},{id:"load-calculations",name:"Load Calculations",icon:ew,keywords:"load calculation service size residential commercial demand"},{id:"service-entrance",name:"Service Entrance",icon:Xb,keywords:"service entrance sizing panel main 230"},{id:"grounding-bonding",name:"Grounding & Bonding",icon:iw,keywords:"grounding bonding ground electrode equipment gec egc jumper 250"}]},{name:"Equipment",calculators:[{id:"motor-calculations",name:"Motors",icon:pw,keywords:"motor flc protection starter 430"},{id:"transformer-sizing",name:"Transformers",icon:hw,keywords:"transformer kva sizing current primary secondary 450"},{id:"vfd-sizing",name:"VFD Sizing",icon:nw,keywords:"vfd variable frequency drive motor speed control inverter ac drive"}]},{name:"Installation",calculators:[{id:"box-fill",name:"Box Fill",icon:uw,keywords:"box fill junction cubic inch volume 314"},{id:"pull-box",name:"Pull Box",icon:Qb,keywords:"pull box junction sizing straight angle u-pull 314.28 raceway conduit"},{id:"conduit-fill",name:"Conduit Fill",icon:tw,keywords:"conduit fill emt pvc rigid raceway chapter 9"},{id:"conduit-bending",name:"Conduit Bending",icon:rw,keywords:"conduit bending offset saddle stub bend emt"},{id:"receptacles",name:"Receptacles",icon:dw,keywords:"receptacle outlet gfci plug socket 210.52 counter kitchen bathroom wall spacing"},{id:"lighting",name:"Lighting",icon:sw,keywords:"lighting lumens foot candles fixtures spacing watts illumination"}]}],o={"Power Calculations":"#3b82f6","Sizing & Rating":"#10b981",Equipment:"#f59e0b",Installation:"#8b5cf6",Safety:"#ef4444"},l={mainBg:e?"#000000":"#f3f4f6",cardText:e?"#ffffff":"#111827",inputBg:e?"#0a0a0a":"#ffffff",inputBorder:e?"#1a1a1a":"#d1d5db",inputText:e?"#ffffff":"#111827",placeholderText:e?"#666666":"#6b7280",categoryHeaderText:e?"#cccccc":"#4b5563"},u=i.flatMap(d=>d.calculators.map(g=>({...g,category:d.name}))),h=t?u.filter(d=>{const g=t.toLowerCase();return d.name.toLowerCase().includes(g)||d.keywords.toLowerCase().includes(g)}):null;return s.jsx("div",{style:{minHeight:"100vh",background:l.mainBg,padding:"0"},children:s.jsx("div",{style:{maxWidth:"64rem",margin:"0 auto"},children:s.jsxs("div",{style:{padding:"1.25rem",boxSizing:"border-box"},children:[s.jsxs("div",{style:{marginBottom:"1.5rem",position:"relative"},children:[s.jsx(fw,{size:20,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:l.placeholderText}}),s.jsx("input",{type:"text",placeholder:"Search calculators...",value:t,onChange:d=>n(d.target.value),style:{width:"100%",padding:"0.875rem 1rem 0.875rem 3rem",fontSize:"0.9375rem",border:`1px solid ${l.inputBorder}`,borderRadius:"12px",backgroundColor:l.inputBg,color:l.inputText,boxSizing:"border-box",outline:"none",transition:"all 0.2s ease"},onFocus:d=>{d.target.style.borderColor="#3b82f6",d.target.style.backgroundColor=e?"#000000":"#ffffff",d.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:d=>{d.target.style.borderColor=l.inputBorder,d.target.style.backgroundColor=l.inputBg,d.target.style.boxShadow="none"}})]}),h?s.jsxs("div",{children:[s.jsxs("div",{style:{fontSize:"0.875rem",color:l.placeholderText,marginBottom:"1rem",paddingLeft:"0"},children:[h.length," ",h.length===1?"result":"results"," found"]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.25rem",marginBottom:"1rem",boxSizing:"border-box",width:"100%"},children:h.length>0?h.map(d=>{const g=d.icon,b=o[d.category]||"#3b82f6";return s.jsxs("div",{onClick:()=>{console.log("Clicked calculator:",d.id),r(d.id)},style:{cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[s.jsx("button",{style:{backgroundColor:e?"#1a1a1a":"#ffffff",border:`2px solid ${e?"#2a2a2a":"#d1d5db"}`,borderRadius:"12px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"70px",height:"70px",minWidth:"70px",minHeight:"70px",maxWidth:"70px",maxHeight:"70px",flexShrink:0,boxShadow:e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseOver:S=>{S.currentTarget.style.transform="translateY(-4px) scale(1.05)",S.currentTarget.style.backgroundColor=e?"#252525":"#ffffff",S.currentTarget.style.borderColor=b,S.currentTarget.style.boxShadow=`0 8px 16px ${b}30, 0 4px 6px ${b}20`},onMouseOut:S=>{S.currentTarget.style.transform="translateY(0) scale(1)",S.currentTarget.style.backgroundColor=e?"#1a1a1a":"#ffffff",S.currentTarget.style.borderColor=e?"#2a2a2a":"#d1d5db",S.currentTarget.style.boxShadow=e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)"},onMouseDown:S=>{S.currentTarget.style.transform="translateY(-2px) scale(0.95)"},onMouseUp:S=>{S.currentTarget.style.transform="translateY(-4px) scale(1.05)"},children:s.jsx(g,{size:28,strokeWidth:2,color:b})}),s.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",textAlign:"center",lineHeight:"1.2",color:l.cardText,maxWidth:"90px"},children:d.name})]},d.id)}):s.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem 1rem",color:l.placeholderText,fontSize:"0.9375rem"},children:"No calculators found"})})]}):i.map((d,g)=>s.jsxs("div",{style:{marginBottom:"2rem"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem",paddingLeft:"0"},children:[s.jsx("div",{style:{width:"4px",height:"20px",backgroundColor:o[d.name],borderRadius:"2px"}}),s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:l.categoryHeaderText,margin:0,letterSpacing:"-0.01em"},children:d.name})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.25rem",marginBottom:g<i.length-1?"1.5rem":"1rem",boxSizing:"border-box",width:"100%"},children:d.calculators.map(b=>{const S=b.icon,x=o[d.name];return s.jsxs("div",{onClick:()=>{console.log("Clicked calculator:",b.id),r(b.id)},style:{cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[s.jsx("button",{style:{backgroundColor:e?"#1a1a1a":"#ffffff",border:`2px solid ${e?"#2a2a2a":"#d1d5db"}`,borderRadius:"12px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"70px",height:"70px",minWidth:"70px",minHeight:"70px",maxWidth:"70px",maxHeight:"70px",flexShrink:0,boxShadow:e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseOver:B=>{B.currentTarget.style.transform="translateY(-4px) scale(1.05)",B.currentTarget.style.backgroundColor=e?"#252525":"#ffffff",B.currentTarget.style.borderColor=x,B.currentTarget.style.boxShadow=`0 8px 16px ${x}30, 0 4px 6px ${x}20`},onMouseOut:B=>{B.currentTarget.style.transform="translateY(0) scale(1)",B.currentTarget.style.backgroundColor=e?"#1a1a1a":"#ffffff",B.currentTarget.style.borderColor=e?"#2a2a2a":"#d1d5db",B.currentTarget.style.boxShadow=e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)"},onMouseDown:B=>{B.currentTarget.style.transform="translateY(-2px) scale(0.95)"},onMouseUp:B=>{B.currentTarget.style.transform="translateY(-4px) scale(1.05)"},children:s.jsx(S,{size:28,strokeWidth:2,color:x})}),s.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",textAlign:"center",lineHeight:"1.2",color:l.cardText,maxWidth:"90px"},children:b.name})]},b.id)})})]},d.name))]})})})}const G6="modulepreload",K6=function(r){return"/electrician-toolkit/"+r},Ay={},fu=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let l=function(d){return Promise.all(d.map(g=>Promise.resolve(g).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=l(t.map(d=>{if(d=K6(d),d in Ay)return;Ay[d]=!0;const g=d.endsWith(".css"),b=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${b}`))return;const S=document.createElement("link");if(S.rel=g?"stylesheet":G6,g||(S.as="script"),S.crossOrigin="",S.href=d,h&&S.setAttribute("nonce",h),document.head.appendChild(S),g)return new Promise((x,B)=>{S.addEventListener("load",x),S.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};function Gr(r){"@babel/helpers - typeof";return Gr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gr(r)}var ga=Uint8Array,ms=Uint16Array,t5=Int32Array,r5=new ga([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),n5=new ga([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cy=new ga([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ww=function(r,e){for(var t=new ms(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new t5(t[30]),n=1;n<30;++n)for(var o=t[n];o<t[n+1];++o)i[o]=o-t[n]<<5|n;return{b:t,r:i}},Sw=ww(r5,2),J6=Sw.b,r1=Sw.r;J6[28]=258,r1[258]=28;var Y6=ww(n5,0),ky=Y6.r,n1=new ms(32768);for(var ln=0;ln<32768;++ln){var oc=(ln&43690)>>1|(ln&21845)<<1;oc=(oc&52428)>>2|(oc&13107)<<2,oc=(oc&61680)>>4|(oc&3855)<<4,n1[ln]=((oc&65280)>>8|(oc&255)<<8)>>1}var Yh=(function(r,e,t){for(var n=r.length,i=0,o=new ms(e);i<n;++i)r[i]&&++o[r[i]-1];var l=new ms(e);for(i=1;i<e;++i)l[i]=l[i-1]+o[i-1]<<1;var u;if(t){u=new ms(1<<e);var h=15-e;for(i=0;i<n;++i)if(r[i])for(var d=i<<4|r[i],g=e-r[i],b=l[r[i]-1]++<<g,S=b|(1<<g)-1;b<=S;++b)u[n1[b]>>h]=d}else for(u=new ms(n),i=0;i<n;++i)r[i]&&(u[i]=n1[l[r[i]-1]++]>>15-r[i]);return u}),wu=new ga(288);for(var ln=0;ln<144;++ln)wu[ln]=8;for(var ln=144;ln<256;++ln)wu[ln]=9;for(var ln=256;ln<280;++ln)wu[ln]=7;for(var ln=280;ln<288;++ln)wu[ln]=8;var ym=new ga(32);for(var ln=0;ln<32;++ln)ym[ln]=5;var Q6=Yh(wu,9,0),X6=Yh(ym,5,0),_w=function(r){return(r+7)/8|0},Z6=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new ga(r.subarray(e,t))},vl=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},Lh=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},gg=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var i=t.length,o=t.slice();if(!i)return{t:Aw,l:0};if(i==1){var l=new ga(t[0].s+1);return l[t[0].s]=1,{t:l,l:1}}t.sort(function(ie,ue){return ie.f-ue.f}),t.push({s:-1,f:25001});var u=t[0],h=t[1],d=0,g=1,b=2;for(t[0]={s:-1,f:u.f+h.f,l:u,r:h};g!=i-1;)u=t[t[d].f<t[b].f?d++:b++],h=t[d!=g&&t[d].f<t[b].f?d++:b++],t[g++]={s:-1,f:u.f+h.f,l:u,r:h};for(var S=o[0].s,n=1;n<i;++n)o[n].s>S&&(S=o[n].s);var x=new ms(S+1),B=i1(t[g-1],x,0);if(B>e){var n=0,E=0,L=B-e,A=1<<L;for(o.sort(function(ue,V){return x[V.s]-x[ue.s]||ue.f-V.f});n<i;++n){var O=o[n].s;if(x[O]>e)E+=A-(1<<B-x[O]),x[O]=e;else break}for(E>>=L;E>0;){var $=o[n].s;x[$]<e?E-=1<<e-x[$]++-1:++n}for(;n>=0&&E;--n){var F=o[n].s;x[F]==e&&(--x[F],++E)}B=e}return{t:new ga(x),l:B}},i1=function(r,e,t){return r.s==-1?Math.max(i1(r.l,e,t+1),i1(r.r,e,t+1)):e[r.s]=t},Iy=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new ms(++e),n=0,i=r[0],o=1,l=function(h){t[n++]=h},u=1;u<=e;++u)if(r[u]==i&&u!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)l(32754);o>2&&(l(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(l(i),--o;o>6;o-=6)l(8304);o>2&&(l(o-3<<5|8208),o=0)}for(;o--;)l(i);o=1,i=r[u]}return{c:t.subarray(0,n),n:e}},Fh=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},Tw=function(r,e,t){var n=t.length,i=_w(e+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var o=0;o<n;++o)r[i+o+4]=t[o];return(i+4+n)*8},Ey=function(r,e,t,n,i,o,l,u,h,d,g){vl(e,g++,t),++i[256];for(var b=gg(i,15),S=b.t,x=b.l,B=gg(o,15),E=B.t,L=B.l,A=Iy(S),O=A.c,$=A.n,F=Iy(E),ie=F.c,ue=F.n,V=new ms(19),k=0;k<O.length;++k)++V[O[k]&31];for(var k=0;k<ie.length;++k)++V[ie[k]&31];for(var I=gg(V,7),M=I.t,C=I.l,w=19;w>4&&!M[Cy[w-1]];--w);var N=d+5<<3,D=Fh(i,wu)+Fh(o,ym)+l,q=Fh(i,S)+Fh(o,E)+l+14+3*w+Fh(V,M)+2*V[16]+3*V[17]+7*V[18];if(h>=0&&N<=D&&N<=q)return Tw(e,g,r.subarray(h,h+d));var ne,se,oe,xe;if(vl(e,g,1+(q<D)),g+=2,q<D){ne=Yh(S,x,0),se=S,oe=Yh(E,L,0),xe=E;var we=Yh(M,C,0);vl(e,g,$-257),vl(e,g+5,ue-1),vl(e,g+10,w-4),g+=14;for(var k=0;k<w;++k)vl(e,g+3*k,M[Cy[k]]);g+=3*w;for(var ee=[O,ie],W=0;W<2;++W)for(var J=ee[W],k=0;k<J.length;++k){var re=J[k]&31;vl(e,g,we[re]),g+=M[re],re>15&&(vl(e,g,J[k]>>5&127),g+=J[k]>>12)}}else ne=Q6,se=wu,oe=X6,xe=ym;for(var k=0;k<u;++k){var he=n[k];if(he>255){var re=he>>18&31;Lh(e,g,ne[re+257]),g+=se[re+257],re>7&&(vl(e,g,he>>23&31),g+=r5[re]);var me=he&31;Lh(e,g,oe[me]),g+=xe[me],me>3&&(Lh(e,g,he>>5&8191),g+=n5[me])}else Lh(e,g,ne[he]),g+=se[he]}return Lh(e,g,ne[256]),g+se[256]},eA=new t5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Aw=new ga(0),tA=function(r,e,t,n,i,o){var l=o.z||r.length,u=new ga(n+l+5*(1+Math.ceil(l/7e3))+i),h=u.subarray(n,u.length-i),d=o.l,g=(o.r||0)&7;if(e){g&&(h[0]=o.r>>3);for(var b=eA[e-1],S=b>>13,x=b&8191,B=(1<<t)-1,E=o.p||new ms(32768),L=o.h||new ms(B+1),A=Math.ceil(t/3),O=2*A,$=function(ze){return(r[ze]^r[ze+1]<<A^r[ze+2]<<O)&B},F=new t5(25e3),ie=new ms(288),ue=new ms(32),V=0,k=0,I=o.i||0,M=0,C=o.w||0,w=0;I+2<l;++I){var N=$(I),D=I&32767,q=L[N];if(E[D]=q,L[N]=D,C<=I){var ne=l-I;if((V>7e3||M>24576)&&(ne>423||!d)){g=Ey(r,h,0,F,ie,ue,k,M,w,I-w,g),M=V=k=0,w=I;for(var se=0;se<286;++se)ie[se]=0;for(var se=0;se<30;++se)ue[se]=0}var oe=2,xe=0,we=x,ee=D-q&32767;if(ne>2&&N==$(I-ee))for(var W=Math.min(S,ne)-1,J=Math.min(32767,I),re=Math.min(258,ne);ee<=J&&--we&&D!=q;){if(r[I+oe]==r[I+oe-ee]){for(var he=0;he<re&&r[I+he]==r[I+he-ee];++he);if(he>oe){if(oe=he,xe=ee,he>W)break;for(var me=Math.min(ee,he-2),Se=0,se=0;se<me;++se){var ke=I-ee+se&32767,Ce=E[ke],ge=ke-Ce&32767;ge>Se&&(Se=ge,q=ke)}}}D=q,q=E[D],ee+=D-q&32767}if(xe){F[M++]=268435456|r1[oe]<<18|ky[xe];var Fe=r1[oe]&31,Ke=ky[xe]&31;k+=r5[Fe]+n5[Ke],++ie[257+Fe],++ue[Ke],C=I+oe,++V}else F[M++]=r[I],++ie[r[I]]}}for(I=Math.max(I,C);I<l;++I)F[M++]=r[I],++ie[r[I]];g=Ey(r,h,d,F,ie,ue,k,M,w,I-w,g),d||(o.r=g&7|h[g/8|0]<<3,g-=7,o.h=L,o.p=E,o.i=I,o.w=C)}else{for(var I=o.w||0;I<l+d;I+=65535){var Qe=I+65535;Qe>=l&&(h[g/8|0]=d,Qe=l),g=Tw(h,g+1,r.subarray(I,Qe))}o.i=l}return Z6(u,0,n+_w(g)+i)},Cw=function(){var r=1,e=0;return{p:function(t){for(var n=r,i=e,o=t.length|0,l=0;l!=o;){for(var u=Math.min(l+2655,o);l<u;++l)i+=n+=t[l];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}r=n,e=i},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},rA=function(r,e,t,n,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),l=new ga(o.length+r.length);l.set(o),l.set(r,o.length),r=l,i.w=o.length}return tA(r,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,i)},kw=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},nA=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var i=Cw();i.p(e.dictionary),kw(r,2,i.d())}};function o1(r,e){e||(e={});var t=Cw();t.p(r);var n=rA(r,e,e.dictionary?6:2,4);return nA(n,e),kw(n,n.length-4,t.d()),n}var iA=typeof TextDecoder<"u"&&new TextDecoder,oA=0;try{iA.decode(Aw,{stream:!0}),oA=1}catch{}function sA(r){if(Array.isArray(r))return r}function aA(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,o,l,u=[],h=!0,d=!1;try{if(o=(t=t.call(r)).next,e!==0)for(;!(h=(n=o.call(t)).done)&&(u.push(n.value),u.length!==e);h=!0);}catch(g){d=!0,i=g}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(d)throw i}}return u}}function jy(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function lA(r,e){if(r){if(typeof r=="string")return jy(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?jy(r,e):void 0}}function cA(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ry(r,e){return sA(r)||aA(r,e)||lA(r,e)||cA()}function Py(r,e="utf8"){return new TextDecoder(e).decode(r)}const uA=new TextEncoder;function dA(r){return uA.encode(r)}const hA=1024*8,fA=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),yg={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class i5{constructor(e=hA,t={}){Hr(this,"buffer");Hr(this,"byteLength");Hr(this,"byteOffset");Hr(this,"length");Hr(this,"offset");Hr(this,"lastWrittenByte");Hr(this,"littleEndian");Hr(this,"_data");Hr(this,"_mark");Hr(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,o=e.byteLength-i;let l=i;(ArrayBuffer.isView(e)||e instanceof i5)&&(e.byteLength!==e.buffer.byteLength&&(l=e.byteOffset+i),e=e.buffer),n?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const n=yg[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+n);if(this.littleEndian===fA&&t!=="uint8"&&t!=="int8"){const u=new Uint8Array(this.buffer.slice(i,i+n));u.reverse();const h=new yg[t](u.buffer);return this.offset+=n,h.reverse(),h}const l=new yg[t](o);return this.offset+=n,l}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(e=1){return Py(this.readBytes(e))}decodeText(e=1,t="utf8"){return Py(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(dA(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function eh(r){let e=r.length;for(;--e>=0;)r[e]=0}const pA=3,mA=258,Iw=29,gA=256,yA=gA+1+Iw,Ew=30,xA=512,vA=new Array((yA+2)*2);eh(vA);const bA=new Array(Ew*2);eh(bA);const wA=new Array(xA);eh(wA);const SA=new Array(mA-pA+1);eh(SA);const _A=new Array(Iw);eh(_A);const TA=new Array(Ew);eh(TA);const AA=(r,e,t,n)=>{let i=r&65535|0,o=r>>>16&65535|0,l=0;for(;t!==0;){l=t>2e3?2e3:t,t-=l;do i=i+e[n++]|0,o=o+i|0;while(--l);i%=65521,o%=65521}return i|o<<16|0};var s1=AA;const CA=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},kA=new Uint32Array(CA()),IA=(r,e,t,n)=>{const i=kA,o=n+t;r^=-1;for(let l=n;l<o;l++)r=r>>>8^i[(r^e[l])&255];return r^-1};var Va=IA,a1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},jw={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const EA=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var jA=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)EA(t,n)&&(r[n]=t[n])}}return r},RA=r=>{let e=0;for(let n=0,i=r.length;n<i;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,i=0,o=r.length;n<o;n++){let l=r[n];t.set(l,i),i+=l.length}return t},Rw={assign:jA,flattenChunks:RA};let Pw=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Pw=!1}const df=new Uint8Array(256);for(let r=0;r<256;r++)df[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;df[254]=df[254]=1;var PA=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,i,o,l=r.length,u=0;for(i=0;i<l;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<l&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),u+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(u),o=0,i=0;o<u;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<l&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const NA=(r,e)=>{if(e<65534&&r.subarray&&Pw)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var BA=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,i;const o=new Array(t*2);for(i=0,n=0;n<t;){let l=r[n++];if(l<128){o[i++]=l;continue}let u=df[l];if(u>4){o[i++]=65533,n+=u-1;continue}for(l&=u===2?31:u===3?15:7;u>1&&n<t;)l=l<<6|r[n++]&63,u--;if(u>1){o[i++]=65533;continue}l<65536?o[i++]=l:(l-=65536,o[i++]=55296|l>>10&1023,o[i++]=56320|l&1023)}return NA(o,i)},LA=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+df[r[t]]>e?t:e},l1={string2buf:PA,buf2string:BA,utf8border:LA};function FA(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zA=FA;const jp=16209,VA=16191;var OA=function(e,t){let n,i,o,l,u,h,d,g,b,S,x,B,E,L,A,O,$,F,ie,ue,V,k,I,M;const C=e.state;n=e.next_in,I=e.input,i=n+(e.avail_in-5),o=e.next_out,M=e.output,l=o-(t-e.avail_out),u=o+(e.avail_out-257),h=C.dmax,d=C.wsize,g=C.whave,b=C.wnext,S=C.window,x=C.hold,B=C.bits,E=C.lencode,L=C.distcode,A=(1<<C.lenbits)-1,O=(1<<C.distbits)-1;e:do{B<15&&(x+=I[n++]<<B,B+=8,x+=I[n++]<<B,B+=8),$=E[x&A];t:for(;;){if(F=$>>>24,x>>>=F,B-=F,F=$>>>16&255,F===0)M[o++]=$&65535;else if(F&16){ie=$&65535,F&=15,F&&(B<F&&(x+=I[n++]<<B,B+=8),ie+=x&(1<<F)-1,x>>>=F,B-=F),B<15&&(x+=I[n++]<<B,B+=8,x+=I[n++]<<B,B+=8),$=L[x&O];r:for(;;){if(F=$>>>24,x>>>=F,B-=F,F=$>>>16&255,F&16){if(ue=$&65535,F&=15,B<F&&(x+=I[n++]<<B,B+=8,B<F&&(x+=I[n++]<<B,B+=8)),ue+=x&(1<<F)-1,ue>h){e.msg="invalid distance too far back",C.mode=jp;break e}if(x>>>=F,B-=F,F=o-l,ue>F){if(F=ue-F,F>g&&C.sane){e.msg="invalid distance too far back",C.mode=jp;break e}if(V=0,k=S,b===0){if(V+=d-F,F<ie){ie-=F;do M[o++]=S[V++];while(--F);V=o-ue,k=M}}else if(b<F){if(V+=d+b-F,F-=b,F<ie){ie-=F;do M[o++]=S[V++];while(--F);if(V=0,b<ie){F=b,ie-=F;do M[o++]=S[V++];while(--F);V=o-ue,k=M}}}else if(V+=b-F,F<ie){ie-=F;do M[o++]=S[V++];while(--F);V=o-ue,k=M}for(;ie>2;)M[o++]=k[V++],M[o++]=k[V++],M[o++]=k[V++],ie-=3;ie&&(M[o++]=k[V++],ie>1&&(M[o++]=k[V++]))}else{V=o-ue;do M[o++]=M[V++],M[o++]=M[V++],M[o++]=M[V++],ie-=3;while(ie>2);ie&&(M[o++]=M[V++],ie>1&&(M[o++]=M[V++]))}}else if((F&64)===0){$=L[($&65535)+(x&(1<<F)-1)];continue r}else{e.msg="invalid distance code",C.mode=jp;break e}break}}else if((F&64)===0){$=E[($&65535)+(x&(1<<F)-1)];continue t}else if(F&32){C.mode=VA;break e}else{e.msg="invalid literal/length code",C.mode=jp;break e}break}}while(n<i&&o<u);ie=B>>3,n-=ie,B-=ie<<3,x&=(1<<B)-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=o<u?257+(u-o):257-(o-u),C.hold=x,C.bits=B};const dd=15,Ny=852,By=592,Ly=0,xg=1,Fy=2,MA=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),DA=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),WA=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),$A=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),UA=(r,e,t,n,i,o,l,u)=>{const h=u.bits;let d=0,g=0,b=0,S=0,x=0,B=0,E=0,L=0,A=0,O=0,$,F,ie,ue,V,k=null,I;const M=new Uint16Array(dd+1),C=new Uint16Array(dd+1);let w=null,N,D,q;for(d=0;d<=dd;d++)M[d]=0;for(g=0;g<n;g++)M[e[t+g]]++;for(x=h,S=dd;S>=1&&M[S]===0;S--);if(x>S&&(x=S),S===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,u.bits=1,0;for(b=1;b<S&&M[b]===0;b++);for(x<b&&(x=b),L=1,d=1;d<=dd;d++)if(L<<=1,L-=M[d],L<0)return-1;if(L>0&&(r===Ly||S!==1))return-1;for(C[1]=0,d=1;d<dd;d++)C[d+1]=C[d]+M[d];for(g=0;g<n;g++)e[t+g]!==0&&(l[C[e[t+g]]++]=g);if(r===Ly?(k=w=l,I=20):r===xg?(k=MA,w=DA,I=257):(k=WA,w=$A,I=0),O=0,g=0,d=b,V=o,B=x,E=0,ie=-1,A=1<<x,ue=A-1,r===xg&&A>Ny||r===Fy&&A>By)return 1;for(;;){N=d-E,l[g]+1<I?(D=0,q=l[g]):l[g]>=I?(D=w[l[g]-I],q=k[l[g]-I]):(D=96,q=0),$=1<<d-E,F=1<<B,b=F;do F-=$,i[V+(O>>E)+F]=N<<24|D<<16|q|0;while(F!==0);for($=1<<d-1;O&$;)$>>=1;if($!==0?(O&=$-1,O+=$):O=0,g++,--M[d]===0){if(d===S)break;d=e[t+l[g]]}if(d>x&&(O&ue)!==ie){for(E===0&&(E=x),V+=b,B=d-E,L=1<<B;B+E<S&&(L-=M[B+E],!(L<=0));)B++,L<<=1;if(A+=1<<B,r===xg&&A>Ny||r===Fy&&A>By)return 1;ie=O&ue,i[ie]=x<<24|B<<16|V-o|0}}return O!==0&&(i[V+O]=d-E<<24|64<<16|0),u.bits=x,0};var Qh=UA;const qA=0,Nw=1,Bw=2,{Z_FINISH:zy,Z_BLOCK:HA,Z_TREES:Rp,Z_OK:Su,Z_STREAM_END:GA,Z_NEED_DICT:KA,Z_STREAM_ERROR:$s,Z_DATA_ERROR:Lw,Z_MEM_ERROR:Fw,Z_BUF_ERROR:JA,Z_DEFLATED:Vy}=jw,Gm=16180,Oy=16181,My=16182,Dy=16183,Wy=16184,$y=16185,Uy=16186,qy=16187,Hy=16188,Gy=16189,xm=16190,bl=16191,vg=16192,Ky=16193,bg=16194,Jy=16195,Yy=16196,Qy=16197,Xy=16198,Pp=16199,Np=16200,Zy=16201,ex=16202,tx=16203,rx=16204,nx=16205,wg=16206,ix=16207,ox=16208,yn=16209,zw=16210,Vw=16211,YA=852,QA=592,XA=15,ZA=XA,sx=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function eC(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const zu=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<Gm||e.mode>Vw?1:0},Ow=r=>{if(zu(r))return $s;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=Gm,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(YA),e.distcode=e.distdyn=new Int32Array(QA),e.sane=1,e.back=-1,Su},Mw=r=>{if(zu(r))return $s;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,Ow(r)},Dw=(r,e)=>{let t;if(zu(r))return $s;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?$s:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,Mw(r))},Ww=(r,e)=>{if(!r)return $s;const t=new eC;r.state=t,t.strm=r,t.window=null,t.mode=Gm;const n=Dw(r,e);return n!==Su&&(r.state=null),n},tC=r=>Ww(r,ZA);let ax=!0,Sg,_g;const rC=r=>{if(ax){Sg=new Int32Array(512),_g=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(Qh(Nw,r.lens,0,288,Sg,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;Qh(Bw,r.lens,0,32,_g,0,r.work,{bits:5}),ax=!1}r.lencode=Sg,r.lenbits=9,r.distcode=_g,r.distbits=5},$w=(r,e,t,n)=>{let i;const o=r.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(e.subarray(t-n,t-n+i),o.wnext),n-=i,n?(o.window.set(e.subarray(t-n,t),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},nC=(r,e)=>{let t,n,i,o,l,u,h,d,g,b,S,x,B,E,L=0,A,O,$,F,ie,ue,V,k;const I=new Uint8Array(4);let M,C;const w=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(zu(r)||!r.output||!r.input&&r.avail_in!==0)return $s;t=r.state,t.mode===bl&&(t.mode=vg),l=r.next_out,i=r.output,h=r.avail_out,o=r.next_in,n=r.input,u=r.avail_in,d=t.hold,g=t.bits,b=u,S=h,k=Su;e:for(;;)switch(t.mode){case Gm:if(t.wrap===0){t.mode=vg;break}for(;g<16;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if(t.wrap&2&&d===35615){t.wbits===0&&(t.wbits=15),t.check=0,I[0]=d&255,I[1]=d>>>8&255,t.check=Va(t.check,I,2,0),d=0,g=0,t.mode=Oy;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((d&255)<<8)+(d>>8))%31){r.msg="incorrect header check",t.mode=yn;break}if((d&15)!==Vy){r.msg="unknown compression method",t.mode=yn;break}if(d>>>=4,g-=4,V=(d&15)+8,t.wbits===0&&(t.wbits=V),V>15||V>t.wbits){r.msg="invalid window size",t.mode=yn;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=d&512?Gy:bl,d=0,g=0;break;case Oy:for(;g<16;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if(t.flags=d,(t.flags&255)!==Vy){r.msg="unknown compression method",t.mode=yn;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=yn;break}t.head&&(t.head.text=d>>8&1),t.flags&512&&t.wrap&4&&(I[0]=d&255,I[1]=d>>>8&255,t.check=Va(t.check,I,2,0)),d=0,g=0,t.mode=My;case My:for(;g<32;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}t.head&&(t.head.time=d),t.flags&512&&t.wrap&4&&(I[0]=d&255,I[1]=d>>>8&255,I[2]=d>>>16&255,I[3]=d>>>24&255,t.check=Va(t.check,I,4,0)),d=0,g=0,t.mode=Dy;case Dy:for(;g<16;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}t.head&&(t.head.xflags=d&255,t.head.os=d>>8),t.flags&512&&t.wrap&4&&(I[0]=d&255,I[1]=d>>>8&255,t.check=Va(t.check,I,2,0)),d=0,g=0,t.mode=Wy;case Wy:if(t.flags&1024){for(;g<16;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}t.length=d,t.head&&(t.head.extra_len=d),t.flags&512&&t.wrap&4&&(I[0]=d&255,I[1]=d>>>8&255,t.check=Va(t.check,I,2,0)),d=0,g=0}else t.head&&(t.head.extra=null);t.mode=$y;case $y:if(t.flags&1024&&(x=t.length,x>u&&(x=u),x&&(t.head&&(V=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(o,o+x),V)),t.flags&512&&t.wrap&4&&(t.check=Va(t.check,n,x,o)),u-=x,o+=x,t.length-=x),t.length))break e;t.length=0,t.mode=Uy;case Uy:if(t.flags&2048){if(u===0)break e;x=0;do V=n[o+x++],t.head&&V&&t.length<65536&&(t.head.name+=String.fromCharCode(V));while(V&&x<u);if(t.flags&512&&t.wrap&4&&(t.check=Va(t.check,n,x,o)),u-=x,o+=x,V)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=qy;case qy:if(t.flags&4096){if(u===0)break e;x=0;do V=n[o+x++],t.head&&V&&t.length<65536&&(t.head.comment+=String.fromCharCode(V));while(V&&x<u);if(t.flags&512&&t.wrap&4&&(t.check=Va(t.check,n,x,o)),u-=x,o+=x,V)break e}else t.head&&(t.head.comment=null);t.mode=Hy;case Hy:if(t.flags&512){for(;g<16;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if(t.wrap&4&&d!==(t.check&65535)){r.msg="header crc mismatch",t.mode=yn;break}d=0,g=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=bl;break;case Gy:for(;g<32;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}r.adler=t.check=sx(d),d=0,g=0,t.mode=xm;case xm:if(t.havedict===0)return r.next_out=l,r.avail_out=h,r.next_in=o,r.avail_in=u,t.hold=d,t.bits=g,KA;r.adler=t.check=1,t.mode=bl;case bl:if(e===HA||e===Rp)break e;case vg:if(t.last){d>>>=g&7,g-=g&7,t.mode=wg;break}for(;g<3;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}switch(t.last=d&1,d>>>=1,g-=1,d&3){case 0:t.mode=Ky;break;case 1:if(rC(t),t.mode=Pp,e===Rp){d>>>=2,g-=2;break e}break;case 2:t.mode=Yy;break;case 3:r.msg="invalid block type",t.mode=yn}d>>>=2,g-=2;break;case Ky:for(d>>>=g&7,g-=g&7;g<32;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if((d&65535)!==(d>>>16^65535)){r.msg="invalid stored block lengths",t.mode=yn;break}if(t.length=d&65535,d=0,g=0,t.mode=bg,e===Rp)break e;case bg:t.mode=Jy;case Jy:if(x=t.length,x){if(x>u&&(x=u),x>h&&(x=h),x===0)break e;i.set(n.subarray(o,o+x),l),u-=x,o+=x,h-=x,l+=x,t.length-=x;break}t.mode=bl;break;case Yy:for(;g<14;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if(t.nlen=(d&31)+257,d>>>=5,g-=5,t.ndist=(d&31)+1,d>>>=5,g-=5,t.ncode=(d&15)+4,d>>>=4,g-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=yn;break}t.have=0,t.mode=Qy;case Qy:for(;t.have<t.ncode;){for(;g<3;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}t.lens[w[t.have++]]=d&7,d>>>=3,g-=3}for(;t.have<19;)t.lens[w[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,M={bits:t.lenbits},k=Qh(qA,t.lens,0,19,t.lencode,0,t.work,M),t.lenbits=M.bits,k){r.msg="invalid code lengths set",t.mode=yn;break}t.have=0,t.mode=Xy;case Xy:for(;t.have<t.nlen+t.ndist;){for(;L=t.lencode[d&(1<<t.lenbits)-1],A=L>>>24,O=L>>>16&255,$=L&65535,!(A<=g);){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if($<16)d>>>=A,g-=A,t.lens[t.have++]=$;else{if($===16){for(C=A+2;g<C;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if(d>>>=A,g-=A,t.have===0){r.msg="invalid bit length repeat",t.mode=yn;break}V=t.lens[t.have-1],x=3+(d&3),d>>>=2,g-=2}else if($===17){for(C=A+3;g<C;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}d>>>=A,g-=A,V=0,x=3+(d&7),d>>>=3,g-=3}else{for(C=A+7;g<C;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}d>>>=A,g-=A,V=0,x=11+(d&127),d>>>=7,g-=7}if(t.have+x>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=yn;break}for(;x--;)t.lens[t.have++]=V}}if(t.mode===yn)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=yn;break}if(t.lenbits=9,M={bits:t.lenbits},k=Qh(Nw,t.lens,0,t.nlen,t.lencode,0,t.work,M),t.lenbits=M.bits,k){r.msg="invalid literal/lengths set",t.mode=yn;break}if(t.distbits=6,t.distcode=t.distdyn,M={bits:t.distbits},k=Qh(Bw,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,M),t.distbits=M.bits,k){r.msg="invalid distances set",t.mode=yn;break}if(t.mode=Pp,e===Rp)break e;case Pp:t.mode=Np;case Np:if(u>=6&&h>=258){r.next_out=l,r.avail_out=h,r.next_in=o,r.avail_in=u,t.hold=d,t.bits=g,OA(r,S),l=r.next_out,i=r.output,h=r.avail_out,o=r.next_in,n=r.input,u=r.avail_in,d=t.hold,g=t.bits,t.mode===bl&&(t.back=-1);break}for(t.back=0;L=t.lencode[d&(1<<t.lenbits)-1],A=L>>>24,O=L>>>16&255,$=L&65535,!(A<=g);){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if(O&&(O&240)===0){for(F=A,ie=O,ue=$;L=t.lencode[ue+((d&(1<<F+ie)-1)>>F)],A=L>>>24,O=L>>>16&255,$=L&65535,!(F+A<=g);){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}d>>>=F,g-=F,t.back+=F}if(d>>>=A,g-=A,t.back+=A,t.length=$,O===0){t.mode=nx;break}if(O&32){t.back=-1,t.mode=bl;break}if(O&64){r.msg="invalid literal/length code",t.mode=yn;break}t.extra=O&15,t.mode=Zy;case Zy:if(t.extra){for(C=t.extra;g<C;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}t.length+=d&(1<<t.extra)-1,d>>>=t.extra,g-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=ex;case ex:for(;L=t.distcode[d&(1<<t.distbits)-1],A=L>>>24,O=L>>>16&255,$=L&65535,!(A<=g);){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if((O&240)===0){for(F=A,ie=O,ue=$;L=t.distcode[ue+((d&(1<<F+ie)-1)>>F)],A=L>>>24,O=L>>>16&255,$=L&65535,!(F+A<=g);){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}d>>>=F,g-=F,t.back+=F}if(d>>>=A,g-=A,t.back+=A,O&64){r.msg="invalid distance code",t.mode=yn;break}t.offset=$,t.extra=O&15,t.mode=tx;case tx:if(t.extra){for(C=t.extra;g<C;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}t.offset+=d&(1<<t.extra)-1,d>>>=t.extra,g-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=yn;break}t.mode=rx;case rx:if(h===0)break e;if(x=S-h,t.offset>x){if(x=t.offset-x,x>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=yn;break}x>t.wnext?(x-=t.wnext,B=t.wsize-x):B=t.wnext-x,x>t.length&&(x=t.length),E=t.window}else E=i,B=l-t.offset,x=t.length;x>h&&(x=h),h-=x,t.length-=x;do i[l++]=E[B++];while(--x);t.length===0&&(t.mode=Np);break;case nx:if(h===0)break e;i[l++]=t.length,h--,t.mode=Np;break;case wg:if(t.wrap){for(;g<32;){if(u===0)break e;u--,d|=n[o++]<<g,g+=8}if(S-=h,r.total_out+=S,t.total+=S,t.wrap&4&&S&&(r.adler=t.check=t.flags?Va(t.check,i,S,l-S):s1(t.check,i,S,l-S)),S=h,t.wrap&4&&(t.flags?d:sx(d))!==t.check){r.msg="incorrect data check",t.mode=yn;break}d=0,g=0}t.mode=ix;case ix:if(t.wrap&&t.flags){for(;g<32;){if(u===0)break e;u--,d+=n[o++]<<g,g+=8}if(t.wrap&4&&d!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=yn;break}d=0,g=0}t.mode=ox;case ox:k=GA;break e;case yn:k=Lw;break e;case zw:return Fw;case Vw:default:return $s}return r.next_out=l,r.avail_out=h,r.next_in=o,r.avail_in=u,t.hold=d,t.bits=g,(t.wsize||S!==r.avail_out&&t.mode<yn&&(t.mode<wg||e!==zy))&&$w(r,r.output,r.next_out,S-r.avail_out),b-=r.avail_in,S-=r.avail_out,r.total_in+=b,r.total_out+=S,t.total+=S,t.wrap&4&&S&&(r.adler=t.check=t.flags?Va(t.check,i,S,r.next_out-S):s1(t.check,i,S,r.next_out-S)),r.data_type=t.bits+(t.last?64:0)+(t.mode===bl?128:0)+(t.mode===Pp||t.mode===bg?256:0),(b===0&&S===0||e===zy)&&k===Su&&(k=JA),k},iC=r=>{if(zu(r))return $s;let e=r.state;return e.window&&(e.window=null),r.state=null,Su},oC=(r,e)=>{if(zu(r))return $s;const t=r.state;return(t.wrap&2)===0?$s:(t.head=e,e.done=!1,Su)},sC=(r,e)=>{const t=e.length;let n,i,o;return zu(r)||(n=r.state,n.wrap!==0&&n.mode!==xm)?$s:n.mode===xm&&(i=1,i=s1(i,e,t,0),i!==n.check)?Lw:(o=$w(r,e,t,t),o?(n.mode=zw,Fw):(n.havedict=1,Su))};var aC=Mw,lC=Dw,cC=Ow,uC=tC,dC=Ww,hC=nC,fC=iC,pC=oC,mC=sC,gC="pako inflate (from Nodeca project)",wl={inflateReset:aC,inflateReset2:lC,inflateResetKeep:cC,inflateInit:uC,inflateInit2:dC,inflate:hC,inflateEnd:fC,inflateGetHeader:pC,inflateSetDictionary:mC,inflateInfo:gC};function yC(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var xC=yC;const Uw=Object.prototype.toString,{Z_NO_FLUSH:vC,Z_FINISH:bC,Z_OK:hf,Z_STREAM_END:Tg,Z_NEED_DICT:Ag,Z_STREAM_ERROR:wC,Z_DATA_ERROR:lx,Z_MEM_ERROR:SC}=jw;function Pf(r){this.options=Rw.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zA,this.strm.avail_out=0;let t=wl.inflateInit2(this.strm,e.windowBits);if(t!==hf)throw new Error(a1[t]);if(this.header=new xC,wl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=l1.string2buf(e.dictionary):Uw.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=wl.inflateSetDictionary(this.strm,e.dictionary),t!==hf)))throw new Error(a1[t])}Pf.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let o,l,u;if(this.ended)return!1;for(e===~~e?l=e:l=e===!0?bC:vC,Uw.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),o=wl.inflate(t,l),o===Ag&&i&&(o=wl.inflateSetDictionary(t,i),o===hf?o=wl.inflate(t,l):o===lx&&(o=Ag));t.avail_in>0&&o===Tg&&t.state.wrap>0&&r[t.next_in]!==0;)wl.inflateReset(t),o=wl.inflate(t,l);switch(o){case wC:case lx:case Ag:case SC:return this.onEnd(o),this.ended=!0,!1}if(u=t.avail_out,t.next_out&&(t.avail_out===0||o===Tg))if(this.options.to==="string"){let h=l1.utf8border(t.output,t.next_out),d=t.next_out-h,g=l1.buf2string(t.output,h);t.next_out=d,t.avail_out=n-d,d&&t.output.set(t.output.subarray(h,h+d),0),this.onData(g)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===hf&&u===0)){if(o===Tg)return o=wl.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Pf.prototype.onData=function(r){this.chunks.push(r)};Pf.prototype.onEnd=function(r){r===hf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Rw.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function _C(r,e){const t=new Pf(e);if(t.push(r),t.err)throw t.msg||a1[t.err];return t.result}var TC=Pf,AC=_C,CC={Inflate:TC,inflate:AC};const{Inflate:kC,inflate:IC}=CC;var cx=kC,EC=IC;const qw=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;qw[r]=e}const ux=4294967295;function jC(r,e,t){let n=r;for(let i=0;i<t;i++)n=qw[(n^e[i])&255]^n>>>8;return n}function RC(r,e){return(jC(ux,r,e)^ux)>>>0}function dx(r,e,t){const n=r.readUint32(),i=RC(new Uint8Array(r.buffer,r.byteOffset+r.offset-e-4,e),e);if(i!==n)throw new Error(`CRC mismatch for chunk ${t}. Expected ${n}, found ${i}`)}function Hw(r,e,t){for(let n=0;n<t;n++)e[n]=r[n]}function Gw(r,e,t,n){let i=0;for(;i<n;i++)e[i]=r[i];for(;i<t;i++)e[i]=r[i]+e[i-n]&255}function Kw(r,e,t,n){let i=0;if(t.length===0)for(;i<n;i++)e[i]=r[i];else for(;i<n;i++)e[i]=r[i]+t[i]&255}function Jw(r,e,t,n,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=r[o];for(;o<n;o++)e[o]=r[o]+(e[o-i]>>1)&255}else{for(;o<i;o++)e[o]=r[o]+(t[o]>>1)&255;for(;o<n;o++)e[o]=r[o]+(e[o-i]+t[o]>>1)&255}}function Yw(r,e,t,n,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=r[o];for(;o<n;o++)e[o]=r[o]+e[o-i]&255}else{for(;o<i;o++)e[o]=r[o]+t[o]&255;for(;o<n;o++)e[o]=r[o]+PC(e[o-i],t[o],t[o-i])&255}}function PC(r,e,t){const n=r+e-t,i=Math.abs(n-r),o=Math.abs(n-e),l=Math.abs(n-t);return i<=o&&i<=l?r:o<=l?e:t}function NC(r,e,t,n,i,o){switch(r){case 0:Hw(e,t,i);break;case 1:Gw(e,t,i,o);break;case 2:Kw(e,t,n,i);break;case 3:Jw(e,t,n,i,o);break;case 4:Yw(e,t,n,i,o);break;default:throw new Error(`Unsupported filter: ${r}`)}}const BC=new Uint16Array([255]),LC=new Uint8Array(BC.buffer),FC=LC[0]===255;function zC(r){const{data:e,width:t,height:n,channels:i,depth:o}=r,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(o/8)*i,h=new Uint8Array(n*t*u);let d=0;for(let g=0;g<7;g++){const b=l[g],S=Math.ceil((t-b.x)/b.xStep),x=Math.ceil((n-b.y)/b.yStep);if(S<=0||x<=0)continue;const B=S*u,E=new Uint8Array(B);for(let L=0;L<x;L++){const A=e[d++],O=e.subarray(d,d+B);d+=B;const $=new Uint8Array(B);NC(A,O,$,E,B,u),E.set($);for(let F=0;F<S;F++){const ie=b.x+F*b.xStep,ue=b.y+L*b.yStep;if(!(ie>=t||ue>=n))for(let V=0;V<u;V++)h[(ue*t+ie)*u+V]=$[F*u+V]}}}if(o===16){const g=new Uint16Array(h.buffer);if(FC)for(let b=0;b<g.length;b++)g[b]=VC(g[b]);return g}else return h}function VC(r){return(r&255)<<8|r>>8&255}const OC=new Uint16Array([255]),MC=new Uint8Array(OC.buffer),DC=MC[0]===255,WC=new Uint8Array(0);function hx(r){const{data:e,width:t,height:n,channels:i,depth:o}=r,l=Math.ceil(o/8)*i,u=Math.ceil(o/8*i*t),h=new Uint8Array(n*u);let d=WC,g=0,b,S;for(let x=0;x<n;x++){switch(b=e.subarray(g+1,g+1+u),S=h.subarray(x*u,(x+1)*u),e[g]){case 0:Hw(b,S,u);break;case 1:Gw(b,S,u,l);break;case 2:Kw(b,S,d,u);break;case 3:Jw(b,S,d,u,l);break;case 4:Yw(b,S,d,u,l);break;default:throw new Error(`Unsupported filter: ${e[g]}`)}d=S,g+=u+1}if(o===16){const x=new Uint16Array(h.buffer);if(DC)for(let B=0;B<x.length;B++)x[B]=$C(x[B]);return x}else return h}function $C(r){return(r&255)<<8|r>>8&255}const Kp=Uint8Array.of(137,80,78,71,13,10,26,10);function fx(r){if(!UC(r.readBytes(Kp.length)))throw new Error("wrong PNG signature")}function UC(r){if(r.length<Kp.length)return!1;for(let e=0;e<Kp.length;e++)if(r[e]!==Kp[e])return!1;return!0}const qC="tEXt",HC=0,Qw=new TextDecoder("latin1");function GC(r){if(JC(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const KC=/^[\u0000-\u00FF]*$/;function JC(r){if(!KC.test(r))throw new Error("invalid latin1 text")}function YC(r,e,t){const n=Xw(e);r[n]=QC(e,t-n.length-1)}function Xw(r){for(r.mark();r.readByte()!==HC;);const e=r.offset;r.reset();const t=Qw.decode(r.readBytes(e-r.offset-1));return r.skip(1),GC(t),t}function QC(r,e){return Qw.decode(r.readBytes(e))}const fs={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Cg={UNKNOWN:-1,DEFLATE:0},px={UNKNOWN:-1,ADAPTIVE:0},kg={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Bp={NONE:0,BACKGROUND:1,PREVIOUS:2},Ig={SOURCE:0,OVER:1};class XC extends i5{constructor(t,n={}){super(t);Hr(this,"_checkCrc");Hr(this,"_inflator");Hr(this,"_png");Hr(this,"_apng");Hr(this,"_end");Hr(this,"_hasPalette");Hr(this,"_palette");Hr(this,"_hasTransparency");Hr(this,"_transparency");Hr(this,"_compressionMethod");Hr(this,"_filterMethod");Hr(this,"_interlaceMethod");Hr(this,"_colorType");Hr(this,"_isAnimated");Hr(this,"_numberOfFrames");Hr(this,"_numberOfPlays");Hr(this,"_frames");Hr(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new cx,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Cg.UNKNOWN,this._filterMethod=px.UNKNOWN,this._interlaceMethod=kg.UNKNOWN,this._colorType=fs.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(fx(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeChunk(t,n)}return this.decodeImage(),this._png}decodeApng(){for(fx(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(t,n)}return this.decodeApngImage(),this._apng}decodeChunk(t,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case qC:YC(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?dx(this,t+4,n):this.skip(4)}decodeApngChunk(t,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,n),this.offset=i+t;break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?dx(this,t+4,n):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=ZC(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case fs.GREYSCALE:i=1;break;case fs.TRUECOLOUR:i=3;break;case fs.INDEXED_COLOUR:i=1;break;case fs.GREYSCALE_ALPHA:i=2;break;case fs.TRUECOLOUR_ALPHA:i=4;break;case fs.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==Cg.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const n=t/3;this._hasPalette=!0;const i=[];this._palette=i;for(let o=0;o<n;o++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const n=t,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let n=t,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case fs.GREYSCALE:case fs.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let n=0;n<t/2;n++)this._transparency[n]=this.readUint16();break}case fs.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let n=0;for(;n<t;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case fs.UNKNOWN:case fs.GREYSCALE_ALPHA:case fs.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const n=Xw(this),i=this.readUint8();if(i!==Cg.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const o=this.readBytes(t-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:EC(o)}}decodepHYs(){const t=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:t,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const n={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(t);if(i){if(i.data=hx({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const o=this._apng.frames.at(t-1);this.disposeFrame(i,o,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(t,n,i){switch(t.disposeOp){case Bp.NONE:break;case Bp.BACKGROUND:for(let o=0;o<this._png.height;o++)for(let l=0;l<this._png.width;l++){const u=(o*t.width+l)*this._png.channels;for(let h=0;h<this._png.channels;h++)i.data[u+h]=0}break;case Bp.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,n){const i=1<<this._png.depth,o=(l,u)=>{const h=((l+n.yOffset)*this._png.width+n.xOffset+u)*this._png.channels,d=(l*n.width+u)*this._png.channels;return{index:h,frameIndex:d}};switch(n.blendOp){case Ig.SOURCE:for(let l=0;l<n.height;l++)for(let u=0;u<n.width;u++){const{index:h,frameIndex:d}=o(l,u);for(let g=0;g<this._png.channels;g++)t.data[h+g]=n.data[d+g]}break;case Ig.OVER:for(let l=0;l<n.height;l++)for(let u=0;u<n.width;u++){const{index:h,frameIndex:d}=o(l,u);for(let g=0;g<this._png.channels;g++){const b=n.data[d+this._png.channels-1]/i,S=g%(this._png.channels-1)===0?1:n.data[d+g],x=Math.floor(b*S+(1-b)*t.data[h+g]);t.data[h+g]+=x}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==px.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===kg.NO_INTERLACE)this._png.data=hx({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===kg.ADAM7)this._png.data=zC({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,n=this._frames.at(-1);n?n.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Bp.NONE,blendOp:Ig.SOURCE,data:t}),this._inflator=new cx,this._writingDataChunks=!1}}function ZC(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var mx;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(mx||(mx={}));function ek(r,e){return new XC(r,e).decode()}var Qt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Eg(){Qt.console&&typeof Qt.console.log=="function"&&Qt.console.log.apply(Qt.console,arguments)}var rn={log:Eg,warn:function(r){Qt.console&&(typeof Qt.console.warn=="function"?Qt.console.warn.apply(Qt.console,arguments):Eg.call(null,arguments))},error:function(r){Qt.console&&(typeof Qt.console.error=="function"?Qt.console.error.apply(Qt.console,arguments):Eg(r))}};function jg(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){nu(n.response,e,t)},n.onerror=function(){rn.error("could not download file")},n.send()}function gx(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Lp(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var nu=Qt.saveAs||((typeof window>"u"?"undefined":Gr(window))!=="object"||window!==Qt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=Qt.URL||Qt.webkitURL,i=document.createElement("a");e=e||r.name||"download",i.download=e,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin!==location.origin?gx(i.href)?jg(r,e,t):Lp(i,i.target="_blank"):Lp(i)):(i.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Lp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(gx(r))jg(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){Lp(n)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:Gr(o)!=="object"&&(rn.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return jg(r,e,t);var i=r.type==="application/octet-stream",o=/constructor/i.test(Qt.HTMLElement)||Qt.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||i&&o)&&(typeof FileReader>"u"?"undefined":Gr(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var g=u.result;g=l?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=g:location=g,n=null},u.readAsDataURL(r)}else{var h=Qt.URL||Qt.webkitURL,d=h.createObjectURL(r);n?n.location=d:location.href=d,n=null,setTimeout(function(){h.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Zw(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],n=0;n<t.length;n++){var i=t[n].re,o=t[n].process,l=i.exec(r);l&&(e=o(l),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),h=this.g.toString(16),d=this.b.toString(16);return u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),d.length==1&&(d="0"+d),"#"+u+h+d}}var Jp=Qt.atob.bind(Qt),yx=Qt.btoa.bind(Qt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Rg(r,e){var t=r[0],n=r[1],i=r[2],o=r[3];t=so(t,n,i,o,e[0],7,-680876936),o=so(o,t,n,i,e[1],12,-389564586),i=so(i,o,t,n,e[2],17,606105819),n=so(n,i,o,t,e[3],22,-1044525330),t=so(t,n,i,o,e[4],7,-176418897),o=so(o,t,n,i,e[5],12,1200080426),i=so(i,o,t,n,e[6],17,-1473231341),n=so(n,i,o,t,e[7],22,-45705983),t=so(t,n,i,o,e[8],7,1770035416),o=so(o,t,n,i,e[9],12,-1958414417),i=so(i,o,t,n,e[10],17,-42063),n=so(n,i,o,t,e[11],22,-1990404162),t=so(t,n,i,o,e[12],7,1804603682),o=so(o,t,n,i,e[13],12,-40341101),i=so(i,o,t,n,e[14],17,-1502002290),t=ao(t,n=so(n,i,o,t,e[15],22,1236535329),i,o,e[1],5,-165796510),o=ao(o,t,n,i,e[6],9,-1069501632),i=ao(i,o,t,n,e[11],14,643717713),n=ao(n,i,o,t,e[0],20,-373897302),t=ao(t,n,i,o,e[5],5,-701558691),o=ao(o,t,n,i,e[10],9,38016083),i=ao(i,o,t,n,e[15],14,-660478335),n=ao(n,i,o,t,e[4],20,-405537848),t=ao(t,n,i,o,e[9],5,568446438),o=ao(o,t,n,i,e[14],9,-1019803690),i=ao(i,o,t,n,e[3],14,-187363961),n=ao(n,i,o,t,e[8],20,1163531501),t=ao(t,n,i,o,e[13],5,-1444681467),o=ao(o,t,n,i,e[2],9,-51403784),i=ao(i,o,t,n,e[7],14,1735328473),t=lo(t,n=ao(n,i,o,t,e[12],20,-1926607734),i,o,e[5],4,-378558),o=lo(o,t,n,i,e[8],11,-2022574463),i=lo(i,o,t,n,e[11],16,1839030562),n=lo(n,i,o,t,e[14],23,-35309556),t=lo(t,n,i,o,e[1],4,-1530992060),o=lo(o,t,n,i,e[4],11,1272893353),i=lo(i,o,t,n,e[7],16,-155497632),n=lo(n,i,o,t,e[10],23,-1094730640),t=lo(t,n,i,o,e[13],4,681279174),o=lo(o,t,n,i,e[0],11,-358537222),i=lo(i,o,t,n,e[3],16,-722521979),n=lo(n,i,o,t,e[6],23,76029189),t=lo(t,n,i,o,e[9],4,-640364487),o=lo(o,t,n,i,e[12],11,-421815835),i=lo(i,o,t,n,e[15],16,530742520),t=co(t,n=lo(n,i,o,t,e[2],23,-995338651),i,o,e[0],6,-198630844),o=co(o,t,n,i,e[7],10,1126891415),i=co(i,o,t,n,e[14],15,-1416354905),n=co(n,i,o,t,e[5],21,-57434055),t=co(t,n,i,o,e[12],6,1700485571),o=co(o,t,n,i,e[3],10,-1894986606),i=co(i,o,t,n,e[10],15,-1051523),n=co(n,i,o,t,e[1],21,-2054922799),t=co(t,n,i,o,e[8],6,1873313359),o=co(o,t,n,i,e[15],10,-30611744),i=co(i,o,t,n,e[6],15,-1560198380),n=co(n,i,o,t,e[13],21,1309151649),t=co(t,n,i,o,e[4],6,-145523070),o=co(o,t,n,i,e[11],10,-1120210379),i=co(i,o,t,n,e[2],15,718787259),n=co(n,i,o,t,e[9],21,-343485551),r[0]=gc(t,r[0]),r[1]=gc(n,r[1]),r[2]=gc(i,r[2]),r[3]=gc(o,r[3])}function Km(r,e,t,n,i,o){return e=gc(gc(e,r),gc(n,o)),gc(e<<i|e>>>32-i,t)}function so(r,e,t,n,i,o,l){return Km(e&t|~e&n,r,e,i,o,l)}function ao(r,e,t,n,i,o,l){return Km(e&n|t&~n,r,e,i,o,l)}function lo(r,e,t,n,i,o,l){return Km(e^t^n,r,e,i,o,l)}function co(r,e,t,n,i,o,l){return Km(t^(e|~n),r,e,i,o,l)}function eS(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)Rg(n,tk(r.substring(e-64,e)));r=r.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Rg(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Rg(n,i),n}function tk(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}var xx="0123456789abcdef".split("");function rk(r){for(var e="",t=0;t<4;t++)e+=xx[r>>8*t+4&15]+xx[r>>8*t&15];return e}function nk(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function c1(r){return eS(r).map(nk).join("")}var ik=(function(r){for(var e=0;e<r.length;e++)r[e]=rk(r[e]);return r.join("")})(eS("hello"))!="5d41402abc4b2a76b9719d911017c592";function gc(r,e){if(ik){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function u1(r,e){var t,n,i,o;if(r!==t){for(var l=(i=r,o=1+(256/r.length|0),new Array(o+1).join(i)),u=[],h=0;h<256;h++)u[h]=h;var d=0;for(h=0;h<256;h++){var g=u[h];d=(d+g+l.charCodeAt(h))%256,u[h]=u[d],u[d]=g}t=r,n=u}else u=n;var b=e.length,S=0,x=0,B="";for(h=0;h<b;h++)x=(x+(g=u[S=(S+1)%256]))%256,u[S]=u[x],u[x]=g,l=u[(u[S]+u[x])%256],B+=String.fromCharCode(e.charCodeAt(h)^l);return B}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var vx={print:4,modify:8,copy:16,"annot-forms":32};function bd(r,e,t,n){this.v=1,this.r=2;var i=192;r.forEach(function(u){if(vx.perm!==void 0)throw new Error("Invalid permission: "+u);i+=vx[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),l=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,l),this.P=-(1+(255^i)),this.encryptionKey=c1(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=u1(this.encryptionKey,this.padding)}function wd(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var i=r.charCodeAt(n);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):r[n]}return e}function bx(r){if(Gr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,i){if(i=i||!1,typeof t!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[n,!!i],o},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[t]){var l=e[t][o];try{l[0].apply(r,n)}catch(u){Qt.console&&rn.error("jsPDF PubSub Error",u.message,u)}l[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function vm(r){if(!(this instanceof vm))return new vm(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function tS(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function au(r,e,t,n,i){if(!(this instanceof au))return new au(r,e,t,n,i);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,tS.call(this,n,i)}function kd(r,e,t,n,i){if(!(this instanceof kd))return new kd(r,e,t,n,i);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,tS.call(this,n,i)}function Ct(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],o=arguments[3],l=[],u=1,h=16,d="S",g=null;Gr(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,i=r.format||i,o=r.compress||r.compressPdf||o,(g=r.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),u=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(h=r.floatPrecision),d=r.defaultPathOperation||"S"),l=r.filters||(o===!0?["FlateEncode"]:l),n=n||"mm",t=(""+(t||"P")).toLowerCase();var b=r.putOnlyUsedFonts||!1,S={},x={internal:{},__private__:{}};x.__private__.PubSub=bx;var B="1.3",E=x.__private__.getPdfVersion=function(){return B};x.__private__.setPdfVersion=function(_){B=_};var L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return L};var A=x.__private__.getPageFormat=function(_){return L[_]};i=i||"a4";var O="compat",$="advanced",F=O;function ie(){this.saveGraphicsState(),de(new Rt(jt,0,0,-jt,0,_i()*jt).toString()+" cm"),this.setFontSize(this.getFontSize()/jt),d="n",F=$}function ue(){this.restoreGraphicsState(),d="S",F=O}var V=x.__private__.combineFontStyleAndFontWeight=function(_,H){if(_=="bold"&&H=="normal"||_=="bold"&&H==400||_=="normal"&&H=="italic"||_=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(_=H==400||H==="normal"?_==="italic"?"italic":"normal":H!=700&&H!=="bold"||_!=="normal"?(H==700?"bold":H)+""+_:"bold"),_};x.advancedAPI=function(_){var H=F===O;return H&&ie.call(this),typeof _!="function"||(_(this),H&&ue.call(this)),this},x.compatAPI=function(_){var H=F===$;return H&&ue.call(this),typeof _!="function"||(_(this),H&&ie.call(this)),this},x.isAdvancedAPI=function(){return F===$};var k,I=function(_){if(F!==$)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},M=x.roundToPrecision=x.__private__.roundToPrecision=function(_,H){var ce=e||H;if(isNaN(_)||isNaN(ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(ce).replace(/0+$/,"")};k=x.hpf=x.__private__.hpf=typeof h=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return M(_,h)}:h==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return M(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return M(_,16)};var C=x.f2=x.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return M(_,2)},w=x.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return M(_,3)},N=x.scale=x.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return F===O?_*jt:F===$?_:void 0},D=function(_){return N((function(H){return F===O?_i()-H:F===$?H:void 0})(_))};x.__private__.setPrecision=x.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(e=parseInt(_,10))};var q,ne="00000000000000000000000000000000",se=x.__private__.getFileId=function(){return ne},oe=x.__private__.setFileId=function(_){return ne=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():ne.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(Or=new bd(g.userPermissions,g.userPassword,g.ownerPassword,ne)),ne};x.setFileId=function(_){return oe(_),this},x.getFileId=function(){return se()};var xe=x.__private__.convertDateToPDFDate=function(_){var H=_.getTimezoneOffset(),ce=H<0?"+":"-",ye=Math.floor(Math.abs(H/60)),Ae=Math.abs(H%60),We=[ce,re(ye),"'",re(Ae),"'"].join("");return["D:",_.getFullYear(),re(_.getMonth()+1),re(_.getDate()),re(_.getHours()),re(_.getMinutes()),re(_.getSeconds()),We].join("")},we=x.__private__.convertPDFDateToDate=function(_){var H=parseInt(_.substr(2,4),10),ce=parseInt(_.substr(6,2),10)-1,ye=parseInt(_.substr(8,2),10),Ae=parseInt(_.substr(10,2),10),We=parseInt(_.substr(12,2),10),Ge=parseInt(_.substr(14,2),10);return new Date(H,ce,ye,Ae,We,Ge,0)},ee=x.__private__.setCreationDate=function(_){var H;if(_===void 0&&(_=new Date),_ instanceof Date)H=xe(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=_}return q=H},W=x.__private__.getCreationDate=function(_){var H=q;return _==="jsDate"&&(H=we(q)),H};x.setCreationDate=function(_){return ee(_),this},x.getCreationDate=function(_){return W(_)};var J,re=x.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},he=x.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},me=0,Se=[],ke=[],Ce=0,ge=[],Fe=[],Ke=!1,Qe=ke;x.__private__.setCustomOutputDestination=function(_){Ke=!0,Qe=_};var ze=function(_){Ke||(Qe=_)};x.__private__.resetCustomOutputDestination=function(){Ke=!1,Qe=ke};var de=x.__private__.out=function(_){return _=_.toString(),Ce+=_.length+1,Qe.push(_),Qe},Nt=x.__private__.write=function(_){return de(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},Et=x.__private__.getArrayBuffer=function(_){for(var H=_.length,ce=new ArrayBuffer(H),ye=new Uint8Array(ce);H--;)ye[H]=_.charCodeAt(H);return ce},wt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return wt};var He=r.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(_){return He=F===$?_/jt:_,this};var ot,rt=x.__private__.getFontSize=x.getFontSize=function(){return F===O?He:He*jt},Jt=r.R2L||!1;x.__private__.setR2L=x.setR2L=function(_){return Jt=_,this},x.__private__.getR2L=x.getR2L=function(){return Jt};var _t,mr=x.__private__.setZoomMode=function(_){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))ot=_;else if(isNaN(_)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');ot=_}else ot=parseInt(_,10)};x.__private__.getZoomMode=function(){return ot};var Ft,qt=x.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');_t=_};x.__private__.getPageMode=function(){return _t};var vr=x.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');Ft=_};x.__private__.getLayoutMode=function(){return Ft},x.__private__.setDisplayMode=x.setDisplayMode=function(_,H,ce){return mr(_),vr(H),qt(ce),this};var Ot={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(_){if(Object.keys(Ot).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ot[_]},x.__private__.getDocumentProperties=function(){return Ot},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(_){for(var H in Ot)Ot.hasOwnProperty(H)&&_[H]&&(Ot[H]=_[H]);return this},x.__private__.setDocumentProperty=function(_,H){if(Object.keys(Ot).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ot[_]=H};var Tt,jt,pt,Ir,ir,ht={},Ht={},sr=[],It={},tr={},Wt={},Er={},zr=null,$t=0,Mt=[],ar=new bx(x),Hi=r.hotfixes||[],zn={},Ro={},Vn=[],Rt=function _(H,ce,ye,Ae,We,Ge){if(!(this instanceof _))return new _(H,ce,ye,Ae,We,Ge);isNaN(H)&&(H=1),isNaN(ce)&&(ce=0),isNaN(ye)&&(ye=0),isNaN(Ae)&&(Ae=1),isNaN(We)&&(We=0),isNaN(Ge)&&(Ge=0),this._matrix=[H,ce,ye,Ae,We,Ge]};Object.defineProperty(Rt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Rt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Rt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Rt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Rt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Rt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Rt.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Rt.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Rt.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Rt.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Rt.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Rt.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Rt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Rt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Rt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Rt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Rt.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(k).join(_)},Rt.prototype.multiply=function(_){var H=_.sx*this.sx+_.shy*this.shx,ce=_.sx*this.shy+_.shy*this.sy,ye=_.shx*this.sx+_.sy*this.shx,Ae=_.shx*this.shy+_.sy*this.sy,We=_.tx*this.sx+_.ty*this.shx+this.tx,Ge=_.tx*this.shy+_.ty*this.sy+this.ty;return new Rt(H,ce,ye,Ae,We,Ge)},Rt.prototype.decompose=function(){var _=this.sx,H=this.shy,ce=this.shx,ye=this.sy,Ae=this.tx,We=this.ty,Ge=Math.sqrt(_*_+H*H),lt=(_/=Ge)*ce+(H/=Ge)*ye;ce-=_*lt,ye-=H*lt;var mt=Math.sqrt(ce*ce+ye*ye);return lt/=mt,_*(ye/=mt)<H*(ce/=mt)&&(_=-_,H=-H,lt=-lt,Ge=-Ge),{scale:new Rt(Ge,0,0,mt,0,0),translate:new Rt(1,0,0,1,Ae,We),rotate:new Rt(_,H,-H,_,0,0),skew:new Rt(1,0,lt,1,0,0)}},Rt.prototype.toString=function(_){return this.join(" ")},Rt.prototype.inversed=function(){var _=this.sx,H=this.shy,ce=this.shx,ye=this.sy,Ae=this.tx,We=this.ty,Ge=1/(_*ye-H*ce),lt=ye*Ge,mt=-H*Ge,Lt=-ce*Ge,vt=_*Ge;return new Rt(lt,mt,Lt,vt,-lt*Ae-Lt*We,-mt*Ae-vt*We)},Rt.prototype.applyToPoint=function(_){var H=_.x*this.sx+_.y*this.shx+this.tx,ce=_.x*this.shy+_.y*this.sy+this.ty;return new Si(H,ce)},Rt.prototype.applyToRectangle=function(_){var H=this.applyToPoint(_),ce=this.applyToPoint(new Si(_.x+_.w,_.y+_.h));return new Cs(H.x,H.y,ce.x-H.x,ce.y-H.y)},Rt.prototype.clone=function(){var _=this.sx,H=this.shy,ce=this.shx,ye=this.sy,Ae=this.tx,We=this.ty;return new Rt(_,H,ce,ye,Ae,We)},x.Matrix=Rt;var Ni=x.matrixMult=function(_,H){return H.multiply(_)},gi=new Rt(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=gi;var On=function(_,H){if(!tr[_]){var ce=(H instanceof au?"Sh":"P")+(Object.keys(It).length+1).toString(10);H.id=ce,tr[_]=ce,It[ce]=H,ar.publish("addPattern",H)}};x.ShadingPattern=au,x.TilingPattern=kd,x.addShadingPattern=function(_,H){return I("addShadingPattern()"),On(_,H),this},x.beginTilingPattern=function(_){I("beginTilingPattern()"),ci(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},x.endTilingPattern=function(_,H){I("endTilingPattern()"),H.stream=Fe[J].join(`
`),On(_,H),ar.publish("endTilingPattern",H),Vn.pop().restore()};var Bi,Cr=x.__private__.newObject=function(){var _=Vr();return un(_,!0),_},Vr=x.__private__.newObjectDeferred=function(){return me++,Se[me]=function(){return Ce},me},un=function(_,H){return H=typeof H=="boolean"&&H,Se[_]=Ce,H&&de(_+" 0 obj"),_},Yn=x.__private__.newAdditionalObject=function(){var _={objId:Vr(),content:""};return ge.push(_),_},Yo=Vr(),Gi=Vr(),Ki=x.__private__.decodeColorString=function(_){var H=_.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length!==5||H[4]!=="k"&&H[4]!=="K"||(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var ce=parseFloat(H[0]);H=[ce,ce,ce,"r"]}for(var ye="#",Ae=0;Ae<3;Ae++)ye+=("0"+Math.floor(255*parseFloat(H[Ae])).toString(16)).slice(-2);return ye},bn=x.__private__.encodeColorString=function(_){var H;typeof _=="string"&&(_={ch1:_});var ce=_.ch1,ye=_.ch2,Ae=_.ch3,We=_.ch4,Ge=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ce=="string"&&ce.charAt(0)!=="#"){var lt=new Zw(ce);if(lt.ok)ce=lt.toHex();else if(!/^\d*\.?\d*$/.test(ce))throw new Error('Invalid color "'+ce+'" passed to jsPDF.encodeColorString.')}if(typeof ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ce)&&(ce="#"+ce[1]+ce[1]+ce[2]+ce[2]+ce[3]+ce[3]),typeof ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ce)){var mt=parseInt(ce.substr(1),16);ce=mt>>16&255,ye=mt>>8&255,Ae=255&mt}if(ye===void 0||We===void 0&&ce===ye&&ye===Ae)H=typeof ce=="string"?ce+" "+Ge[0]:_.precision===2?C(ce/255)+" "+Ge[0]:w(ce/255)+" "+Ge[0];else if(We===void 0||Gr(We)==="object"){if(We&&!isNaN(We.a)&&We.a===0)return["1.","1.","1.",Ge[1]].join(" ");H=typeof ce=="string"?[ce,ye,Ae,Ge[1]].join(" "):_.precision===2?[C(ce/255),C(ye/255),C(Ae/255),Ge[1]].join(" "):[w(ce/255),w(ye/255),w(Ae/255),Ge[1]].join(" ")}else H=typeof ce=="string"?[ce,ye,Ae,We,Ge[2]].join(" "):_.precision===2?[C(ce),C(ye),C(Ae),C(We),Ge[2]].join(" "):[w(ce),w(ye),w(Ae),w(We),Ge[2]].join(" ");return H},Li=x.__private__.getFilters=function(){return l},Fi=x.__private__.putStream=function(_){var H=(_=_||{}).data||"",ce=_.filters||Li(),ye=_.alreadyAppliedFilters||[],Ae=_.addLength1||!1,We=H.length,Ge=_.objectId,lt=function(R){return R};if(g!==null&&Ge===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(lt=Or.encryptor(Ge,0));var mt={};ce===!0&&(ce=["FlateEncode"]);var Lt=_.additionalKeyValues||[],vt=(mt=Ct.API.processDataByFilters!==void 0?Ct.API.processDataByFilters(H,ce):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(ye)?ye.join(" "):ye.toString());if(mt.data.length!==0&&(Lt.push({key:"Length",value:mt.data.length}),Ae===!0&&Lt.push({key:"Length1",value:We})),vt.length!=0)if(vt.split("/").length-1==1)Lt.push({key:"Filter",value:vt});else{Lt.push({key:"Filter",value:"["+vt+"]"});for(var gr=0;gr<Lt.length;gr+=1)if(Lt[gr].key==="DecodeParms"){for(var Qr=[],Mr=0;Mr<mt.reverseChain.split("/").length-1;Mr+=1)Qr.push("null");Qr.push(Lt[gr].value),Lt[gr].value="["+Qr.join(" ")+"]"}}de("<<");for(var m=0;m<Lt.length;m++)de("/"+Lt[m].key+" "+Lt[m].value);de(">>"),mt.data.length!==0&&(de("stream"),de(lt(mt.data)),de("endstream"))},bs=x.__private__.putPage=function(_){var H=_.number,ce=_.data,ye=_.objId,Ae=_.contentsObjId;un(ye,!0),de("<</Type /Page"),de("/Parent "+_.rootDictionaryObjId+" 0 R"),de("/Resources "+_.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(k(_.mediaBox.bottomLeftX))+" "+parseFloat(k(_.mediaBox.bottomLeftY))+" "+k(_.mediaBox.topRightX)+" "+k(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&de("/CropBox ["+k(_.cropBox.bottomLeftX)+" "+k(_.cropBox.bottomLeftY)+" "+k(_.cropBox.topRightX)+" "+k(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&de("/BleedBox ["+k(_.bleedBox.bottomLeftX)+" "+k(_.bleedBox.bottomLeftY)+" "+k(_.bleedBox.topRightX)+" "+k(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&de("/TrimBox ["+k(_.trimBox.bottomLeftX)+" "+k(_.trimBox.bottomLeftY)+" "+k(_.trimBox.topRightX)+" "+k(_.trimBox.topRightY)+"]"),_.artBox!==null&&de("/ArtBox ["+k(_.artBox.bottomLeftX)+" "+k(_.artBox.bottomLeftY)+" "+k(_.artBox.topRightX)+" "+k(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&de("/UserUnit "+_.userUnit),ar.publish("putPage",{objId:ye,pageContext:Mt[H],pageNumber:H,page:ce}),de("/Contents "+Ae+" 0 R"),de(">>"),de("endobj");var We=ce.join(`
`);return F===$&&(We+=`
Q`),un(Ae,!0),Fi({data:We,filters:Li(),objectId:Ae}),de("endobj"),ye},mo=x.__private__.putPages=function(){var _,H,ce=[];for(_=1;_<=$t;_++)Mt[_].objId=Vr(),Mt[_].contentsObjId=Vr();for(_=1;_<=$t;_++)ce.push(bs({number:_,data:Fe[_],objId:Mt[_].objId,contentsObjId:Mt[_].contentsObjId,mediaBox:Mt[_].mediaBox,cropBox:Mt[_].cropBox,bleedBox:Mt[_].bleedBox,trimBox:Mt[_].trimBox,artBox:Mt[_].artBox,userUnit:Mt[_].userUnit,rootDictionaryObjId:Yo,resourceDictionaryObjId:Gi}));un(Yo,!0),de("<</Type /Pages");var ye="/Kids [";for(H=0;H<$t;H++)ye+=ce[H]+" 0 R ";de(ye+"]"),de("/Count "+$t),de(">>"),de("endobj"),ar.publish("postPutPages")},go=function(_){ar.publish("putFont",{font:_,out:de,newObject:Cr,putStream:Fi}),_.isAlreadyPutted!==!0&&(_.objectNumber=Cr(),de("<<"),de("/Type /Font"),de("/BaseFont /"+wd(_.postScriptName)),de("/Subtype /Type1"),typeof _.encoding=="string"&&de("/Encoding /"+_.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},ws=function(_){_.objectNumber=Cr();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[k(_.x),k(_.y),k(_.x+_.width),k(_.y+_.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var ce=_.pages[1].join(`
`);Fi({data:ce,additionalKeyValues:H,objectId:_.objectNumber}),de("endobj")},Qo=function(_,H){H||(H=21);var ce=Cr(),ye=(function(Ge,lt){var mt,Lt=[],vt=1/(lt-1);for(mt=0;mt<1;mt+=vt)Lt.push(mt);if(Lt.push(1),Ge[0].offset!=0){var gr={offset:0,color:Ge[0].color};Ge.unshift(gr)}if(Ge[Ge.length-1].offset!=1){var Qr={offset:1,color:Ge[Ge.length-1].color};Ge.push(Qr)}for(var Mr="",m=0,R=0;R<Lt.length;R++){for(mt=Lt[R];mt>Ge[m+1].offset;)m++;var U=Ge[m].offset,Z=(mt-U)/(Ge[m+1].offset-U),Ie=Ge[m].color,Be=Ge[m+1].color;Mr+=he(Math.round((1-Z)*Ie[0]+Z*Be[0]).toString(16))+he(Math.round((1-Z)*Ie[1]+Z*Be[1]).toString(16))+he(Math.round((1-Z)*Ie[2]+Z*Be[2]).toString(16))}return Mr.trim()})(_.colors,H),Ae=[];Ae.push({key:"FunctionType",value:"0"}),Ae.push({key:"Domain",value:"[0.0 1.0]"}),Ae.push({key:"Size",value:"["+H+"]"}),Ae.push({key:"BitsPerSample",value:"8"}),Ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fi({data:ye,additionalKeyValues:Ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ce}),de("endobj"),_.objectNumber=Cr(),de("<< /ShadingType "+_.type),de("/ColorSpace /DeviceRGB");var We="/Coords ["+k(parseFloat(_.coords[0]))+" "+k(parseFloat(_.coords[1]))+" ";_.type===2?We+=k(parseFloat(_.coords[2]))+" "+k(parseFloat(_.coords[3])):We+=k(parseFloat(_.coords[2]))+" "+k(parseFloat(_.coords[3]))+" "+k(parseFloat(_.coords[4]))+" "+k(parseFloat(_.coords[5])),de(We+="]"),_.matrix&&de("/Matrix ["+_.matrix.toString()+"]"),de("/Function "+ce+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},Po=function(_,H){var ce=Vr(),ye=Cr();H.push({resourcesOid:ce,objectOid:ye}),_.objectNumber=ye;var Ae=[];Ae.push({key:"Type",value:"/Pattern"}),Ae.push({key:"PatternType",value:"1"}),Ae.push({key:"PaintType",value:"1"}),Ae.push({key:"TilingType",value:"1"}),Ae.push({key:"BBox",value:"["+_.boundingBox.map(k).join(" ")+"]"}),Ae.push({key:"XStep",value:k(_.xStep)}),Ae.push({key:"YStep",value:k(_.yStep)}),Ae.push({key:"Resources",value:ce+" 0 R"}),_.matrix&&Ae.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),Fi({data:_.stream,additionalKeyValues:Ae,objectId:_.objectNumber}),de("endobj")},Xo=function(_){for(var H in _.objectNumber=Cr(),de("<<"),_)switch(H){case"opacity":de("/ca "+C(_[H]));break;case"stroke-opacity":de("/CA "+C(_[H]))}de(">>"),de("endobj")},jr=function(_){un(_.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var H in de("/Font <<"),ht)ht.hasOwnProperty(H)&&(b===!1||b===!0&&S.hasOwnProperty(H))&&de("/"+H+" "+ht[H].objectNumber+" 0 R");de(">>")})(),(function(){if(Object.keys(It).length>0){for(var H in de("/Shading <<"),It)It.hasOwnProperty(H)&&It[H]instanceof au&&It[H].objectNumber>=0&&de("/"+H+" "+It[H].objectNumber+" 0 R");ar.publish("putShadingPatternDict"),de(">>")}})(),(function(H){if(Object.keys(It).length>0){for(var ce in de("/Pattern <<"),It)It.hasOwnProperty(ce)&&It[ce]instanceof x.TilingPattern&&It[ce].objectNumber>=0&&It[ce].objectNumber<H&&de("/"+ce+" "+It[ce].objectNumber+" 0 R");ar.publish("putTilingPatternDict"),de(">>")}})(_.objectOid),(function(){if(Object.keys(Wt).length>0){var H;for(H in de("/ExtGState <<"),Wt)Wt.hasOwnProperty(H)&&Wt[H].objectNumber>=0&&de("/"+H+" "+Wt[H].objectNumber+" 0 R");ar.publish("putGStateDict"),de(">>")}})(),(function(){for(var H in de("/XObject <<"),zn)zn.hasOwnProperty(H)&&zn[H].objectNumber>=0&&de("/"+H+" "+zn[H].objectNumber+" 0 R");ar.publish("putXobjectDict"),de(">>")})(),de(">>"),de("endobj")},Bl=function(_){Ht[_.fontName]=Ht[_.fontName]||{},Ht[_.fontName][_.fontStyle]=_.id},Us=function(_,H,ce,ye,Ae){var We={id:"F"+(Object.keys(ht).length+1).toString(10),postScriptName:_,fontName:H,fontStyle:ce,encoding:ye,isStandardFont:Ae||!1,metadata:{}};return ar.publish("addFont",{font:We,instance:this}),ht[We.id]=We,Bl(We),We.id},yi=x.__private__.pdfEscape=x.pdfEscape=function(_,H){return(function(ce,ye){var Ae,We,Ge,lt,mt,Lt,vt,gr,Qr;if(Ge=(ye=ye||{}).sourceEncoding||"Unicode",mt=ye.outputEncoding,(ye.autoencode||mt)&&ht[Tt].metadata&&ht[Tt].metadata[Ge]&&ht[Tt].metadata[Ge].encoding&&(lt=ht[Tt].metadata[Ge].encoding,!mt&&ht[Tt].encoding&&(mt=ht[Tt].encoding),!mt&&lt.codePages&&(mt=lt.codePages[0]),typeof mt=="string"&&(mt=lt[mt]),mt)){for(vt=!1,Lt=[],Ae=0,We=ce.length;Ae<We;Ae++)(gr=mt[ce.charCodeAt(Ae)])?Lt.push(String.fromCharCode(gr)):Lt.push(ce[Ae]),Lt[Ae].charCodeAt(0)>>8&&(vt=!0);ce=Lt.join("")}for(Ae=ce.length;vt===void 0&&Ae!==0;)ce.charCodeAt(Ae-1)>>8&&(vt=!0),Ae--;if(!vt)return ce;for(Lt=ye.noBOM?[]:[254,255],Ae=0,We=ce.length;Ae<We;Ae++){if((Qr=(gr=ce.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+ce+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Lt.push(Qr),Lt.push(gr-(Qr<<8))}return String.fromCharCode.apply(void 0,Lt)})(_,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zo=x.__private__.beginPage=function(_){Fe[++$t]=[],Mt[$t]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},_s($t),ze(Fe[J])},wa=function(_,H){var ce,ye,Ae;switch(t=H||t,typeof _=="string"&&(ce=A(_.toLowerCase()),Array.isArray(ce)&&(ye=ce[0],Ae=ce[1])),Array.isArray(_)&&(ye=_[0]*jt,Ae=_[1]*jt),isNaN(ye)&&(ye=i[0],Ae=i[1]),(ye>14400||Ae>14400)&&(rn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ye=Math.min(14400,ye),Ae=Math.min(14400,Ae)),i=[ye,Ae],t.substr(0,1)){case"l":Ae>ye&&(i=[Ae,ye]);break;case"p":ye>Ae&&(i=[Ae,ye])}Zo(i),es(wn),de(Js),Qi!==0&&de(Qi+" J"),Aa!==0&&de(Aa+" j"),ar.publish("addPage",{pageNumber:$t})},Ss=function(_){_>0&&_<=$t&&(Fe.splice(_,1),Mt.splice(_,1),$t--,J>$t&&(J=$t),this.setPage(J))},_s=function(_){_>0&&_<=$t&&(J=_)},xi=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Fe.length-1},Ya=function(_,H,ce){var ye,Ae=void 0;return ce=ce||{},_=_!==void 0?_:ht[Tt].fontName,H=H!==void 0?H:ht[Tt].fontStyle,ye=_.toLowerCase(),Ht[ye]!==void 0&&Ht[ye][H]!==void 0?Ae=Ht[ye][H]:Ht[_]!==void 0&&Ht[_][H]!==void 0?Ae=Ht[_][H]:ce.disableWarning===!1&&rn.warn("Unable to look up font label for font '"+_+"', '"+H+"'. Refer to getFontList() for available fonts."),Ae||ce.noFallback||(Ae=Ht.times[H])==null&&(Ae=Ht.times.normal),Ae},Qn=x.__private__.putInfo=function(){var _=Cr(),H=function(ye){return ye};for(var ce in g!==null&&(H=Or.encryptor(_,0)),de("<<"),de("/Producer ("+yi(H("jsPDF "+Ct.version))+")"),Ot)Ot.hasOwnProperty(ce)&&Ot[ce]&&de("/"+ce.substr(0,1).toUpperCase()+ce.substr(1)+" ("+yi(H(Ot[ce]))+")");de("/CreationDate ("+yi(H(q))+")"),de(">>"),de("endobj")},No=x.__private__.putCatalog=function(_){var H=(_=_||{}).rootDictionaryObjId||Yo;switch(Cr(),de("<<"),de("/Type /Catalog"),de("/Pages "+H+" 0 R"),ot||(ot="fullwidth"),ot){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ce=""+ot;ce.substr(ce.length-1)==="%"&&(ot=parseInt(ot)/100),typeof ot=="number"&&de("/OpenAction [3 0 R /XYZ null null "+C(ot)+"]")}switch(Ft||(Ft="continuous"),Ft){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}_t&&de("/PageMode /"+_t),ar.publish("putCatalog"),de(">>"),de("endobj")},wr=x.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(me+1)),de("/Root "+me+" 0 R"),de("/Info "+(me-1)+" 0 R"),g!==null&&de("/Encrypt "+Or.oid+" 0 R"),de("/ID [ <"+ne+"> <"+ne+"> ]"),de(">>")},Ts=x.__private__.putHeader=function(){de("%PDF-"+B),de("%")},yo=x.__private__.putXRef=function(){var _="0000000000";de("xref"),de("0 "+(me+1)),de("0000000000 65535 f ");for(var H=1;H<=me;H++)typeof Se[H]=="function"?de((_+Se[H]()).slice(-10)+" 00000 n "):Se[H]!==void 0?de((_+Se[H]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},vi=x.__private__.buildDocument=function(){var _;me=0,Ce=0,ke=[],Se=[],ge=[],Yo=Vr(),Gi=Vr(),ze(ke),ar.publish("buildDocument"),Ts(),mo(),(function(){ar.publish("putAdditionalObjects");for(var ce=0;ce<ge.length;ce++){var ye=ge[ce];un(ye.objId,!0),de(ye.content),de("endobj")}ar.publish("postPutAdditionalObjects")})(),_=[],(function(){for(var ce in ht)ht.hasOwnProperty(ce)&&(b===!1||b===!0&&S.hasOwnProperty(ce))&&go(ht[ce])})(),(function(){var ce;for(ce in Wt)Wt.hasOwnProperty(ce)&&Xo(Wt[ce])})(),(function(){for(var ce in zn)zn.hasOwnProperty(ce)&&ws(zn[ce])})(),(function(ce){var ye;for(ye in It)It.hasOwnProperty(ye)&&(It[ye]instanceof au?Qo(It[ye]):It[ye]instanceof kd&&Po(It[ye],ce))})(_),ar.publish("putResources"),_.forEach(jr),jr({resourcesOid:Gi,objectOid:Number.MAX_SAFE_INTEGER}),ar.publish("postPutResources"),g!==null&&(Or.oid=Cr(),de("<<"),de("/Filter /Standard"),de("/V "+Or.v),de("/R "+Or.r),de("/U <"+Or.toHexString(Or.U)+">"),de("/O <"+Or.toHexString(Or.O)+">"),de("/P "+Or.P),de(">>"),de("endobj")),Qn(),No();var H=Ce;return yo(),wr(),de("startxref"),de(""+H),de("%%EOF"),ze(Fe[J]),ke.join(`
`)},lr=x.__private__.getBlob=function(_){return new Blob([Et(_)],{type:"application/pdf"})},Mn=x.output=x.__private__.output=(Bi=function(_,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",_){case void 0:return vi();case"save":x.save(H.filename);break;case"arraybuffer":return Et(vi());case"blob":return lr(vi());case"bloburi":case"bloburl":if(Qt.URL!==void 0&&typeof Qt.URL.createObjectURL=="function")return Qt.URL&&Qt.URL.createObjectURL(lr(vi()))||void 0;rn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ce="",ye=vi();try{ce=yx(ye)}catch{ce=yx(unescape(encodeURIComponent(ye)))}return"data:application/pdf;filename="+H.filename+";base64,"+ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Qt)==="[object Window]"){var Ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",We=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(Ae=H.pdfObjectUrl,We="");var Ge='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ae+'"'+We+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",lt=Qt.open();return lt!==null&&lt.document.write(Ge),lt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Qt)==="[object Window]"){var mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',Lt=Qt.open();if(Lt!==null){Lt.document.write(mt);var vt=this;Lt.document.documentElement.querySelector("#pdfViewer").onload=function(){Lt.document.title=H.filename,Lt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(vt.output("bloburl"))}}return Lt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Qt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var gr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',Qr=Qt.open();if(Qr!==null&&(Qr.document.write(gr),Qr.document.title=H.filename),Qr||typeof safari>"u")return Qr;break;case"datauri":case"dataurl":return Qt.document.location.href=this.output("datauristring",H);default:return null}},Bi.foo=function(){try{return Bi.apply(this,arguments)}catch(ce){var _=ce.stack||"";~_.indexOf(" at ")&&(_=_.split(" at ")[1]);var H="Error in function "+_.split(`
`)[0].split("<")[0]+": "+ce.message;if(!Qt.console)throw new Error(H);Qt.console.error(H,ce),Qt.alert&&alert(H)}},Bi.foo.bar=Bi,Bi.foo),xo=function(_){return Array.isArray(Hi)===!0&&Hi.indexOf(_)>-1};switch(n){case"pt":jt=1;break;case"mm":jt=72/25.4;break;case"cm":jt=72/2.54;break;case"in":jt=72;break;case"px":jt=xo("px_scaling")==1?.75:96/72;break;case"pc":case"em":jt=12;break;case"ex":jt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);jt=n}var Or=null;ee(),oe();var qs=x.__private__.getPageInfo=x.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Mt[_].objId,pageNumber:_,pageContext:Mt[_]}},Qa=x.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in Mt)if(Mt[H].objId===_)break;return qs(H)},Xa=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:Mt[J].objId,pageNumber:J,pageContext:Mt[J]}};x.addPage=function(){return wa.apply(this,arguments),this},x.setPage=function(){return _s.apply(this,arguments),ze.call(this,Fe[J]),this},x.insertPage=function(_){return this.addPage(),this.movePage(J,_),this},x.movePage=function(_,H){var ce,ye;if(_>H){ce=Fe[_],ye=Mt[_];for(var Ae=_;Ae>H;Ae--)Fe[Ae]=Fe[Ae-1],Mt[Ae]=Mt[Ae-1];Fe[H]=ce,Mt[H]=ye,this.setPage(H)}else if(_<H){ce=Fe[_],ye=Mt[_];for(var We=_;We<H;We++)Fe[We]=Fe[We+1],Mt[We]=Mt[We+1];Fe[H]=ce,Mt[H]=ye,this.setPage(H)}return this},x.deletePage=function(){return Ss.apply(this,arguments),this},x.__private__.text=x.text=function(_,H,ce,ye,Ae){var We,Ge,lt,mt,Lt,vt,gr,Qr,Mr,m=(ye=ye||{}).scope||this;if(typeof _=="number"&&typeof H=="number"&&(typeof ce=="string"||Array.isArray(ce))){var R=ce;ce=H,H=_,_=R}if(arguments[3]instanceof Rt==0?(lt=arguments[4],mt=arguments[5],Gr(gr=arguments[3])==="object"&&gr!==null||(typeof lt=="string"&&(mt=lt,lt=null),typeof gr=="string"&&(mt=gr,gr=null),typeof gr=="number"&&(lt=gr,gr=null),ye={flags:gr,angle:lt,align:mt})):(I("The transform parameter of text() with a Matrix value"),Mr=Ae),isNaN(H)||isNaN(ce)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return m;var U,Z="",Ie=typeof ye.lineHeightFactor=="number"?ye.lineHeightFactor:wi,Be=m.internal.scaleFactor;function tt(Sr){return Sr=Sr.split("	").join(Array(ye.TabLen||9).join(" ")),yi(Sr,gr)}function Dt(Sr){for(var Br,fn=Sr.concat(),jn=[],ss=fn.length;ss--;)typeof(Br=fn.shift())=="string"?jn.push(Br):Array.isArray(Sr)&&(Br.length===1||Br[1]===void 0&&Br[2]===void 0)?jn.push(Br[0]):jn.push([Br[0],Br[1],Br[2]]);return jn}function Dr(Sr,Br){var fn;if(typeof Sr=="string")fn=Br(Sr)[0];else if(Array.isArray(Sr)){for(var jn,ss,zc=Sr.concat(),Ml=[],ta=zc.length;ta--;)typeof(jn=zc.shift())=="string"?Ml.push(Br(jn)[0]):Array.isArray(jn)&&typeof jn[0]=="string"&&(ss=Br(jn[0],jn[1],jn[2]),Ml.push([ss[0],ss[1],ss[2]]));fn=Ml}return fn}var dr=!1,Xr=!0;if(typeof _=="string")dr=!0;else if(Array.isArray(_)){var $n=_.concat();Ge=[];for(var Oi,en=$n.length;en--;)(typeof(Oi=$n.shift())!="string"||Array.isArray(Oi)&&typeof Oi[0]!="string")&&(Xr=!1);dr=Xr}if(dr===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var Ti=He/m.internal.scaleFactor,Oo=Ti*(Ie-1);switch(ye.baseline){case"bottom":ce-=Oo;break;case"top":ce+=Ti-Oo;break;case"hanging":ce+=Ti-2*Oo;break;case"middle":ce+=Ti/2-Oo}if((vt=ye.maxWidth||0)>0&&(typeof _=="string"?_=m.splitTextToSize(_,vt):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(Sr,Br){return Sr.concat(m.splitTextToSize(Br,vt))},[]))),We={text:_,x:H,y:ce,options:ye,mutex:{pdfEscape:yi,activeFontKey:Tt,fonts:ht,activeFontSize:He}},ar.publish("preProcessText",We),_=We.text,lt=(ye=We.options).angle,Mr instanceof Rt==0&&lt&&typeof lt=="number"){lt*=Math.PI/180,ye.rotationDirection===0&&(lt=-lt),F===$&&(lt=-lt);var Ys=Math.cos(lt),Fc=Math.sin(lt);Mr=new Rt(Ys,Fc,-Fc,Ys,0,0)}else lt&&lt instanceof Rt&&(Mr=lt);F!==$||Mr||(Mr=gi),(Lt=ye.charSpace||Yi)!==void 0&&(Z+=k(N(Lt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Qr=ye.horizontalScale)!==void 0&&(Z+=k(100*Qr)+` Tz
`),ye.lang;var dn=-1,is=ye.renderingMode!==void 0?ye.renderingMode:ye.stroke,Is=m.internal.getCurrentPageInfo().pageContext;switch(is){case 0:case!1:case"fill":dn=0;break;case 1:case!0:case"stroke":dn=1;break;case 2:case"fillThenStroke":dn=2;break;case 3:case"invisible":dn=3;break;case 4:case"fillAndAddForClipping":dn=4;break;case 5:case"strokeAndAddPathForClipping":dn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":dn=6;break;case 7:case"addToPathForClipping":dn=7}var $u=Is.usedRenderingMode!==void 0?Is.usedRenderingMode:-1;dn!==-1?Z+=dn+` Tr
`:$u!==-1&&(Z+=`0 Tr
`),dn!==-1&&(Is.usedRenderingMode=dn),mt=ye.align||"left";var wo,ka=He*Ie,Fl=m.internal.pageSize.getWidth(),zl=ht[Tt];Lt=ye.charSpace||Yi,vt=ye.maxWidth||0,gr=Object.assign({autoencode:!0,noBOM:!0},ye.flags);var Qs=[],Mo=function(Sr){return m.getStringUnitWidth(Sr,{font:zl,charSpace:Lt,fontSize:He,doKerning:!1})*He/Be};if(Object.prototype.toString.call(_)==="[object Array]"){var So;Ge=Dt(_),mt!=="left"&&(wo=Ge.map(Mo));var _o,Ia=0;if(mt==="right"){H-=wo[0],_=[],en=Ge.length;for(var Es=0;Es<en;Es++)Es===0?(_o=Dn(H),So=Fo(ce)):(_o=N(Ia-wo[Es]),So=-ka),_.push([Ge[Es],_o,So]),Ia=wo[Es]}else if(mt==="center"){H-=wo[0]/2,_=[],en=Ge.length;for(var Xs=0;Xs<en;Xs++)Xs===0?(_o=Dn(H),So=Fo(ce)):(_o=N((Ia-wo[Xs])/2),So=-ka),_.push([Ge[Xs],_o,So]),Ia=wo[Xs]}else if(mt==="left"){_=[],en=Ge.length;for(var Zs=0;Zs<en;Zs++)_.push(Ge[Zs])}else if(mt==="justify"&&zl.encoding==="Identity-H"){_=[],en=Ge.length,vt=vt!==0?vt:Fl;for(var js=0,Sn=0;Sn<en;Sn++)if(So=Sn===0?Fo(ce):-ka,_o=Sn===0?Dn(H):js,Sn<en-1){var nl=N((vt-wo[Sn])/(Ge[Sn].split(" ").length-1)),Rs=Ge[Sn].split(" ");_.push([Rs[0]+" ",_o,So]),js=0;for(var os=1;os<Rs.length;os++){var il=(Mo(Rs[os-1]+" "+Rs[os])-Mo(Rs[os]))*Be+nl;os==Rs.length-1?_.push([Rs[os],il,0]):_.push([Rs[os]+" ",il,0]),js-=il}}else _.push([Ge[Sn],_o,So]);_.push(["",js,0])}else{if(mt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],en=Ge.length,vt=vt!==0?vt:Fl,Sn=0;Sn<en;Sn++){So=Sn===0?Fo(ce):-ka,_o=Sn===0?Dn(H):0;var ol=Ge[Sn].split(" ").length-1,Vl=ol>0?(vt-wo[Sn])/ol:0;Sn<en-1?Qs.push(k(N(Vl))):Qs.push(0),_.push([Ge[Sn],_o,So])}}}(typeof ye.R2L=="boolean"?ye.R2L:Jt)===!0&&(_=Dr(_,function(Sr,Br,fn){return[Sr.split("").reverse().join(""),Br,fn]})),We={text:_,x:H,y:ce,options:ye,mutex:{pdfEscape:yi,activeFontKey:Tt,fonts:ht,activeFontSize:He}},ar.publish("postProcessText",We),_=We.text,U=We.mutex.isHex||!1;var Ol=ht[Tt].encoding;Ol!=="WinAnsiEncoding"&&Ol!=="StandardEncoding"||(_=Dr(_,function(Sr,Br,fn){return[tt(Sr),Br,fn]})),Ge=Dt(_),_=[];for(var ea,Ea,ja,sl=Array.isArray(Ge[0])?1:0,Ra="",al=function(Sr,Br,fn){var jn="";return fn instanceof Rt?(fn=typeof ye.angle=="number"?Ni(fn,new Rt(1,0,0,1,Sr,Br)):Ni(new Rt(1,0,0,1,Sr,Br),fn),F===$&&(fn=Ni(new Rt(1,0,0,-1,0,0),fn)),jn=fn.join(" ")+` Tm
`):jn=k(Sr)+" "+k(Br)+` Td
`,jn},hn=0;hn<Ge.length;hn++){switch(Ra="",sl){case 1:ja=(U?"<":"(")+Ge[hn][0]+(U?">":")"),ea=parseFloat(Ge[hn][1]),Ea=parseFloat(Ge[hn][2]);break;case 0:ja=(U?"<":"(")+Ge[hn]+(U?">":")"),ea=Dn(H),Ea=Fo(ce)}Qs!==void 0&&Qs[hn]!==void 0&&(Ra=Qs[hn]+` Tw
`),hn===0?_.push(Ra+al(ea,Ea,Mr)+ja):sl===0?_.push(Ra+ja):sl===1&&_.push(Ra+al(ea,Ea,Mr)+ja)}_=sl===0?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var Xi=`BT
/`;return Xi+=Tt+" "+He+` Tf
`,Xi+=k(He*Ie)+` TL
`,Xi+=Ji+`
`,Xi+=Z,Xi+=_,de(Xi+="ET"),S[Tt]=!0,m};var Hs=x.__private__.clip=x.clip=function(_){return de(_==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return Hs("evenodd")},x.__private__.discardPath=x.discardPath=function(){return de("n"),this};var Bo=x.__private__.isValidStyle=function(_){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&(H=!0),H};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(_){return Bo(_)&&(d=_),this};var Sa=x.__private__.getStyle=x.getStyle=function(_){var H=d;switch(_){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=_}return H},or=x.close=function(){return de("h"),this};x.stroke=function(){return de("S"),this},x.fill=function(_){return li("f",_),this},x.fillEvenOdd=function(_){return li("f*",_),this},x.fillStroke=function(_){return li("B",_),this},x.fillStrokeEvenOdd=function(_){return li("B*",_),this};var li=function(_,H){Gr(H)==="object"?Za(H,_):de(_)},Gs=function(_){_===null||F===$&&_===void 0||(_=Sa(_),de(_))};function _a(_,H,ce,ye,Ae){var We=new kd(H||this.boundingBox,ce||this.xStep,ye||this.yStep,this.gState,Ae||this.matrix);We.stream=this.stream;var Ge=_+"$$"+this.cloneIndex+++"$$";return On(Ge,We),We}var Za=function(_,H){var ce=tr[_.key],ye=It[ce];if(ye instanceof au)de("q"),de(el(H)),ye.gState&&x.setGState(ye.gState),de(_.matrix.toString()+" cm"),de("/"+ce+" sh"),de("Q");else if(ye instanceof kd){var Ae=new Rt(1,0,0,-1,0,_i());_.matrix&&(Ae=Ae.multiply(_.matrix||gi),ce=_a.call(ye,_.key,_.boundingBox,_.xStep,_.yStep,Ae).id),de("q"),de("/Pattern cs"),de("/"+ce+" scn"),ye.gState&&x.setGState(ye.gState),de(H),de("Q")}},el=function(_){switch(_){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ks=x.moveTo=function(_,H){return de(k(N(_))+" "+k(D(H))+" m"),this},bi=x.lineTo=function(_,H){return de(k(N(_))+" "+k(D(H))+" l"),this},vo=x.curveTo=function(_,H,ce,ye,Ae,We){return de([k(N(_)),k(D(H)),k(N(ce)),k(D(ye)),k(N(Ae)),k(D(We)),"c"].join(" ")),this};x.__private__.line=x.line=function(_,H,ce,ye,Ae){if(isNaN(_)||isNaN(H)||isNaN(ce)||isNaN(ye)||!Bo(Ae))throw new Error("Invalid arguments passed to jsPDF.line");return F===O?this.lines([[ce-_,ye-H]],_,H,[1,1],Ae||"S"):this.lines([[ce-_,ye-H]],_,H,[1,1]).stroke()},x.__private__.lines=x.lines=function(_,H,ce,ye,Ae,We){var Ge,lt,mt,Lt,vt,gr,Qr,Mr,m,R,U,Z;if(typeof _=="number"&&(Z=ce,ce=H,H=_,_=Z),ye=ye||[1,1],We=We||!1,isNaN(H)||isNaN(ce)||!Array.isArray(_)||!Array.isArray(ye)||!Bo(Ae)||typeof We!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ks(H,ce),Ge=ye[0],lt=ye[1],Lt=_.length,R=H,U=ce,mt=0;mt<Lt;mt++)(vt=_[mt]).length===2?(R=vt[0]*Ge+R,U=vt[1]*lt+U,bi(R,U)):(gr=vt[0]*Ge+R,Qr=vt[1]*lt+U,Mr=vt[2]*Ge+R,m=vt[3]*lt+U,R=vt[4]*Ge+R,U=vt[5]*lt+U,vo(gr,Qr,Mr,m,R,U));return We&&or(),Gs(Ae),this},x.path=function(_){for(var H=0;H<_.length;H++){var ce=_[H],ye=ce.c;switch(ce.op){case"m":Ks(ye[0],ye[1]);break;case"l":bi(ye[0],ye[1]);break;case"c":vo.apply(this,ye);break;case"h":or()}}return this},x.__private__.rect=x.rect=function(_,H,ce,ye,Ae){if(isNaN(_)||isNaN(H)||isNaN(ce)||isNaN(ye)||!Bo(Ae))throw new Error("Invalid arguments passed to jsPDF.rect");return F===O&&(ye=-ye),de([k(N(_)),k(D(H)),k(N(ce)),k(N(ye)),"re"].join(" ")),Gs(Ae),this},x.__private__.triangle=x.triangle=function(_,H,ce,ye,Ae,We,Ge){if(isNaN(_)||isNaN(H)||isNaN(ce)||isNaN(ye)||isNaN(Ae)||isNaN(We)||!Bo(Ge))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ce-_,ye-H],[Ae-ce,We-ye],[_-Ae,H-We]],_,H,[1,1],Ge,!0),this},x.__private__.roundedRect=x.roundedRect=function(_,H,ce,ye,Ae,We,Ge){if(isNaN(_)||isNaN(H)||isNaN(ce)||isNaN(ye)||isNaN(Ae)||isNaN(We)||!Bo(Ge))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var lt=4/3*(Math.SQRT2-1);return Ae=Math.min(Ae,.5*ce),We=Math.min(We,.5*ye),this.lines([[ce-2*Ae,0],[Ae*lt,0,Ae,We-We*lt,Ae,We],[0,ye-2*We],[0,We*lt,-Ae*lt,We,-Ae,We],[2*Ae-ce,0],[-Ae*lt,0,-Ae,-We*lt,-Ae,-We],[0,2*We-ye],[0,-We*lt,Ae*lt,-We,Ae,-We]],_+Ae,H,[1,1],Ge,!0),this},x.__private__.ellipse=x.ellipse=function(_,H,ce,ye,Ae){if(isNaN(_)||isNaN(H)||isNaN(ce)||isNaN(ye)||!Bo(Ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var We=4/3*(Math.SQRT2-1)*ce,Ge=4/3*(Math.SQRT2-1)*ye;return Ks(_+ce,H),vo(_+ce,H-Ge,_+We,H-ye,_,H-ye),vo(_-We,H-ye,_-ce,H-Ge,_-ce,H),vo(_-ce,H+Ge,_-We,H+ye,_,H+ye),vo(_+We,H+ye,_+ce,H+Ge,_+ce,H),Gs(Ae),this},x.__private__.circle=x.circle=function(_,H,ce,ye){if(isNaN(_)||isNaN(H)||isNaN(ce)||!Bo(ye))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,H,ce,ce,ye)},x.setFont=function(_,H,ce){return ce&&(H=V(H,ce)),Tt=Ya(_,H,{disableWarning:!1}),this};var Lo=x.__private__.getFont=x.getFont=function(){return ht[Ya.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var _,H,ce={};for(_ in Ht)if(Ht.hasOwnProperty(_))for(H in ce[_]=[],Ht[_])Ht[_].hasOwnProperty(H)&&ce[_].push(H);return ce},x.addFont=function(_,H,ce,ye,Ae){var We=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&We.indexOf(arguments[3])!==-1?Ae=arguments[3]:arguments[3]&&We.indexOf(arguments[3])==-1&&(ce=V(ce,ye)),Us.call(this,_,H,ce,Ae=Ae||"Identity-H")};var wi,wn=r.lineWidth||.200025,Bt=x.__private__.getLineWidth=x.getLineWidth=function(){return wn},es=x.__private__.setLineWidth=x.setLineWidth=function(_){return wn=_,de(k(N(_))+" w"),this};x.__private__.setLineDash=Ct.API.setLineDash=Ct.API.setLineDashPattern=function(_,H){if(_=_||[],H=H||0,isNaN(H)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(ce){return k(N(ce))}).join(" "),H=k(N(H)),de("["+_+"] "+H+" d"),this};var zi=x.__private__.getLineHeight=x.getLineHeight=function(){return He*wi};x.__private__.getLineHeight=x.getLineHeight=function(){return He*wi};var Ll=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(wi=_),this},As=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return wi};Ll(r.lineHeight);var Dn=x.__private__.getHorizontalCoordinate=function(_){return N(_)},Fo=x.__private__.getVerticalCoordinate=function(_){return F===$?_:Mt[J].mediaBox.topRightY-Mt[J].mediaBox.bottomLeftY-N(_)},Ta=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(_){return k(Dn(_))},Rr=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(_){return k(Fo(_))},Js=r.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return Ki(Js)},x.__private__.setStrokeColor=x.setDrawColor=function(_,H,ce,ye){return Js=bn({ch1:_,ch2:H,ch3:ce,ch4:ye,pdfColorType:"draw",precision:2}),de(Js),this};var tl=r.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return Ki(tl)},x.__private__.setFillColor=x.setFillColor=function(_,H,ce,ye){return tl=bn({ch1:_,ch2:H,ch3:ce,ch4:ye,pdfColorType:"fill",precision:2}),de(tl),this};var Ji=r.textColor||"0 g",bo=x.__private__.getTextColor=x.getTextColor=function(){return Ki(Ji)};x.__private__.setTextColor=x.setTextColor=function(_,H,ce,ye){return Ji=bn({ch1:_,ch2:H,ch3:ce,ch4:ye,pdfColorType:"text",precision:3}),this};var Yi=r.charSpace,ts=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(Yi||0)};x.__private__.setCharSpace=x.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Yi=_,this};var Qi=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(_){var H=x.CapJoinStyles[_];if(H===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qi=H,de(H+" J"),this};var Aa=0;x.__private__.setLineJoin=x.setLineJoin=function(_){var H=x.CapJoinStyles[_];if(H===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Aa=H,de(H+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(k(N(_))+" M"),this},x.GState=vm,x.setGState=function(_){(_=typeof _=="string"?Wt[Er[_]]:rs(null,_)).equals(zr)||(de("/"+_.id+" gs"),zr=_)};var rs=function(_,H){if(!_||!Er[_]){var ce=!1;for(var ye in Wt)if(Wt.hasOwnProperty(ye)&&Wt[ye].equals(H)){ce=!0;break}if(ce)H=Wt[ye];else{var Ae="GS"+(Object.keys(Wt).length+1).toString(10);Wt[Ae]=H,H.id=Ae}return _&&(Er[_]=H.id),ar.publish("addGState",H),H}};x.addGState=function(_,H){return rs(_,H),this},x.saveGraphicsState=function(){return de("q"),sr.push({key:Tt,size:He,color:Ji}),this},x.restoreGraphicsState=function(){de("Q");var _=sr.pop();return Tt=_.key,He=_.size,Ji=_.color,zr=null,this},x.setCurrentTransformationMatrix=function(_){return de(_.toString()+" cm"),this},x.comment=function(_){return de("#"+_),this};var Si=function(_,H){var ce=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ce},set:function(We){isNaN(We)||(ce=parseFloat(We))}});var ye=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ye},set:function(We){isNaN(We)||(ye=parseFloat(We))}});var Ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ae},set:function(We){Ae=We.toString()}}),this},Cs=function(_,H,ce,ye){Si.call(this,_,H),this.type="rect";var Ae=ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ae},set:function(Ge){isNaN(Ge)||(Ae=parseFloat(Ge))}});var We=ye||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return We},set:function(Ge){isNaN(Ge)||(We=parseFloat(Ge))}}),this},ns=function(){this.page=$t,this.currentPage=J,this.pages=Fe.slice(0),this.pagesContext=Mt.slice(0),this.x=pt,this.y=Ir,this.matrix=ir,this.width=Vo(J),this.height=Vi(J),this.outputDestination=Qe,this.id="",this.objectNumber=-1};ns.prototype.restore=function(){$t=this.page,J=this.currentPage,Mt=this.pagesContext,Fe=this.pages,pt=this.x,Ir=this.y,ir=this.matrix,rl(J,this.width),Xn(J,this.height),Qe=this.outputDestination};var ci=function(_,H,ce,ye,Ae){Vn.push(new ns),$t=J=0,Fe=[],pt=_,Ir=H,ir=Ae,Zo([ce,ye])};for(var zo in x.beginFormObject=function(_,H,ce,ye,Ae){return ci(_,H,ce,ye,Ae),this},x.endFormObject=function(_){return(function(H){if(Ro[H])Vn.pop().restore();else{var ce=new ns,ye="Xo"+(Object.keys(zn).length+1).toString(10);ce.id=ye,Ro[H]=ye,zn[ye]=ce,ar.publish("addFormObject",ce),Vn.pop().restore()}})(_),this},x.doFormObject=function(_,H){var ce=zn[Ro[_]];return de("q"),de(H.toString()+" cm"),de("/"+ce.id+" Do"),de("Q"),this},x.getFormObject=function(_){var H=zn[Ro[_]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},x.save=function(_,H){return _=_||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(nu(lr(vi()),_),typeof nu.unload=="function"&&Qt.setTimeout&&setTimeout(nu.unload,911),this):new Promise(function(ce,ye){try{var Ae=nu(lr(vi()),_);typeof nu.unload=="function"&&Qt.setTimeout&&setTimeout(nu.unload,911),ce(Ae)}catch(We){ye(We.message)}})},Ct.API)Ct.API.hasOwnProperty(zo)&&(zo==="events"&&Ct.API.events.length?(function(_,H){var ce,ye,Ae;for(Ae=H.length-1;Ae!==-1;Ae--)ce=H[Ae][0],ye=H[Ae][1],_.subscribe.apply(_,[ce].concat(typeof ye=="function"?[ye]:ye))})(ar,Ct.API.events):x[zo]=Ct.API[zo]);function Vo(_){return Mt[_].mediaBox.topRightX-Mt[_].mediaBox.bottomLeftX}function rl(_,H){Mt[_].mediaBox.topRightX=H+Mt[_].mediaBox.bottomLeftX}function Vi(_){return Mt[_].mediaBox.topRightY-Mt[_].mediaBox.bottomLeftY}function Xn(_,H){Mt[_].mediaBox.topRightY=H+Mt[_].mediaBox.bottomLeftY}var Ca=x.getPageWidth=function(_){return Vo(_=_||J)/jt},Wn=x.setPageWidth=function(_,H){rl(_,H*jt)},_i=x.getPageHeight=function(_){return Vi(_=_||J)/jt},ks=x.setPageHeight=function(_,H){Xn(_,H*jt)};return x.internal={pdfEscape:yi,getStyle:Sa,getFont:Lo,getFontSize:rt,getCharSpace:ts,getTextColor:bo,getLineHeight:zi,getLineHeightFactor:As,getLineWidth:Bt,write:Nt,getHorizontalCoordinate:Dn,getVerticalCoordinate:Fo,getCoordinateString:Ta,getVerticalCoordinateString:Rr,collections:{},newObject:Cr,newAdditionalObject:Yn,newObjectDeferred:Vr,newObjectDeferredBegin:un,getFilters:Li,putStream:Fi,events:ar,scaleFactor:jt,pageSize:{getWidth:function(){return Ca(J)},setWidth:function(_){Wn(J,_)},getHeight:function(){return _i(J)},setHeight:function(_){ks(J,_)}},encryptionOptions:g,encryption:Or,getEncryptor:function(_){return g!==null?Or.encryptor(_,0):function(H){return H}},output:Mn,getNumberOfPages:xi,pages:Fe,out:de,f2:C,f3:w,getPageInfo:qs,getPageInfoByObjId:Qa,getCurrentPageInfo:Xa,getPDFVersion:E,Point:Si,Rectangle:Cs,Matrix:Rt,hasHotfix:xo},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return Ca(J)},set:function(_){Wn(J,_)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return _i(J)},set:function(_){ks(J,_)},enumerable:!0,configurable:!0}),(function(_){for(var H=0,ce=wt.length;H<ce;H++){var ye=Us.call(this,_[H][0],_[H][1],_[H][2],wt[H][3],!0);b===!1&&(S[ye]=!0);var Ae=_[H][0].split("-");Bl({id:ye,fontName:Ae[0],fontStyle:Ae[1]||""})}ar.publish("addFonts",{fonts:ht,dictionary:Ht})}).call(x,wt),Tt="F1",wa(i,t),ar.publish("initialized"),x}bd.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},bd.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},bd.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},bd.prototype.processOwnerPassword=function(r,e){return u1(c1(e).substr(0,5),r)},bd.prototype.encryptor=function(r,e){var t=c1(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return u1(t,n)}},vm.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||Gr(r)!==Gr(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},Ct.API={events:[]},Ct.version="3.0.3";var Ln=Ct.API,o5=1,Vu=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},hd=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},nr=function(r){return r.toFixed(2)},sc=function(r){return r.toFixed(5)};Ln.__acroform__={};var Jo=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},wx=function(r){return r*o5},Oa=function(r){var e=new nS,t=yt.internal.getHeight(r)||0,n=yt.internal.getWidth(r)||0;return e.BBox=[0,0,Number(nr(n)),Number(nr(t))],e},ok=Ln.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},sk=Ln.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},ak=Ln.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},Gn=Ln.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ak(r,e-1)},Kn=Ln.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return ok(r,e-1)},Jn=Ln.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return sk(r,e-1)},lk=Ln.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=r[0],o=r[1],l=r[2],u=r[3],h={};return h.lowerLeft_X=t(i)||0,h.lowerLeft_Y=n(o+u)||0,h.upperRight_X=t(i+l)||0,h.upperRight_Y=n(o)||0,[Number(nr(h.lowerLeft_X)),Number(nr(h.lowerLeft_Y)),Number(nr(h.upperRight_X)),Number(nr(h.upperRight_Y))]},ck=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=d1(r,t),i=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+i+" "+nr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Oa(r);return o.scope=r.scope,o.stream=e.join(`
`),o}},d1=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=r.multiline?i.map(function(C){return C.split(`
`)}):i.map(function(C){return[C]});var o=t,l=yt.internal.getHeight(r)||0;l=l<0?-l:l;var u=yt.internal.getWidth(r)||0;u=u<0?-u:u;var h=function(C,w,N){if(C+1<i.length){var D=w+" "+i[C+1][0];return Fp(D,r,N).width<=u-4}return!1};o++;e:for(;o>0;){e="",o--;var d,g,b=Fp("3",r,o).height,S=r.multiline?l-o:(l-b)/2,x=S+=2,B=0,E=0,L=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+Fp(e,r,o=12).width+", FieldWidth:"+u+`
`;break}for(var A="",O=0,$=0;$<i.length;$++)if(i.hasOwnProperty($)){var F=!1;if(i[$].length!==1&&L!==i[$].length-1){if((b+2)*(O+2)+2>l)continue e;A+=i[$][L],F=!0,E=$,$--}else{A=(A+=i[$][L]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var ie=parseInt($),ue=h(ie,A,o),V=$>=i.length-1;if(ue&&!V){A+=" ",L=0;continue}if(ue||V){if(V)E=ie;else if(r.multiline&&(b+2)*(O+2)+2>l)continue e}else{if(!r.multiline||(b+2)*(O+2)+2>l)continue e;E=ie}}for(var k="",I=B;I<=E;I++){var M=i[I];if(r.multiline){if(I===E){k+=M[L]+" ",L=(L+1)%M.length;continue}if(I===B){k+=M[M.length-1]+" ";continue}}k+=M[0]+" "}switch(k=k.substr(k.length-1)==" "?k.substr(0,k.length-1):k,g=Fp(k,r,o).width,r.textAlign){case"right":d=u-g-2;break;case"center":d=(u-g)/2;break;default:d=2}e+=nr(d)+" "+nr(x)+` Td
`,e+="("+Vu(k)+`) Tj
`,e+=-nr(d)+` 0 Td
`,x=-(o+2),g=0,B=F?E:E+1,O++,A=""}break}return n.text=e,n.fontSize=o,n},Fp=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},uk={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},dk=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},hk=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(xa.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(uk)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");o5=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new iS,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];o.objId=void 0,o.hasAnnotation&&dk(o,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,i){var o=!n;for(var l in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(l)){var u=n[l],h=[],d=u.Rect;if(u.Rect&&(u.Rect=lk(u.Rect,i)),i.internal.newObjectDeferredBegin(u.objId,!0),u.DA=yt.createDefaultAppearanceStream(u),Gr(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(h=u.getKeyValueListForStream()),u.Rect=d,u.hasAppearanceStream&&!u.appearanceStreamContent){var g=ck(u);h.push({key:"AP",value:"<</N "+g+">>"}),i.internal.acroformPlugin.xForms.push(g)}if(u.appearanceStreamContent){var b="";for(var S in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(S)){var x=u.appearanceStreamContent[S];if(b+="/"+S+" ",b+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var l in x)if(x.hasOwnProperty(l)){var B=x[l];typeof B=="function"&&(B=B.call(i,u)),b+="/"+l+" "+B+" ",i.internal.acroformPlugin.xForms.indexOf(B)>=0||i.internal.acroformPlugin.xForms.push(B)}}else typeof(B=x)=="function"&&(B=B.call(i,u)),b+="/"+l+" "+B,i.internal.acroformPlugin.xForms.indexOf(B)>=0||i.internal.acroformPlugin.xForms.push(B);b+=">>"}h.push({key:"AP",value:`<<
`+b+">>"})}i.internal.putStream({additionalKeyValues:h,objectId:u.objId}),i.internal.out("endobj")}o&&(function(E,L){for(var A in E)if(E.hasOwnProperty(A)){var O=A,$=E[A];L.internal.newObjectDeferredBegin($.objId,!0),Gr($)==="object"&&typeof $.putStream=="function"&&$.putStream(),delete E[O]}})(i.internal.acroformPlugin.xForms,i)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},rS=Ln.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(l){return l};if(Array.isArray(r)){for(var i="[",o=0;o<r.length;o++)switch(o!==0&&(i+=" "),Gr(r[o])){case"boolean":case"number":case"object":i+=r[o].toString();break;case"string":r[o].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),i+="("+Vu(n(r[o].toString()))+")"):i+=r[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Pg=function(r,e,t){var n=function(i){return i};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+Vu(n(r))+")"},Da=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Da.prototype.toString=function(){return this.objId+" 0 R"},Da.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Da.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],i=this[n];i&&(Array.isArray(i)?r.push({key:n,value:rS(i,this.objId,this.scope)}):i instanceof Da?(i.scope=this.scope,r.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&r.push({key:n,value:i}))}return r};var nS=function(){Da.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};Jo(nS,Da);var iS=function(){Da.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Vu(t(r))+")"}},set:function(t){r=t}})};Jo(iS,Da);var xa=function r(){Da.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');e=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Gn(e,3)},set:function(A){A?this.F=Kn(e,3):this.F=Jn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');t=A}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(A){n=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(A){n[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(A){n[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(A){n[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(A){n[3]=A}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof bm)return;o="FieldObject"+r.FieldNum++}var A=function(O){return O};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+Vu(A(o))+")"},set:function(A){o=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(A){o=A}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(A){l=A}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(A){u=A}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(A){h=A}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/o5:d},set:function(A){d=A}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(A){g=A}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof bm||this instanceof mu))return Pg(b,this.objId,this.scope)},set:function(A){A=A.toString(),b=A}});var S=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof Pi==0?Pg(S,this.objId,this.scope):S},set:function(A){A=A.toString(),S=this instanceof Pi==0?A.substr(0,1)==="("?hd(A.substr(1,A.length-2)):hd(A):A}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pi==1?hd(S.substr(1,S.length-1)):S},set:function(A){A=A.toString(),S=this instanceof Pi==1?"/"+A:A}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Pi==0?Pg(x,this.objId,this.scope):x},set:function(A){A=A.toString(),x=this instanceof Pi==0?A.substr(0,1)==="("?hd(A.substr(1,A.length-2)):hd(A):A}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pi==1?hd(x.substr(1,x.length-1)):x},set:function(A){A=A.toString(),x=this instanceof Pi==1?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var B,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(A){A=!!A,E=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(B)return B},set:function(A){B=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,1)},set:function(A){A?this.Ff=Kn(this.Ff,1):this.Ff=Jn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,2)},set:function(A){A?this.Ff=Kn(this.Ff,2):this.Ff=Jn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,3)},set:function(A){A?this.Ff=Kn(this.Ff,3):this.Ff=Jn(this.Ff,3)}});var L=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(L!==null)return L},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');L=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(L){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:L=2;break;case"center":case 1:L=1;break;default:L=0}}})};Jo(xa,Da);var Ed=function(){xa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return rS(e,this.objId,this.scope)},set:function(t){var n,i;i=[],typeof(n=t)=="string"&&(i=(function(o,l,u){u||(u=1);for(var h,d=[];h=l.exec(o);)d.push(h[u]);return d})(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,18)},set:function(t){t?this.Ff=Kn(this.Ff,18):this.Ff=Jn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Kn(this.Ff,19):this.Ff=Jn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,20)},set:function(t){t?(this.Ff=Kn(this.Ff,20),e.sort()):this.Ff=Jn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,22)},set:function(t){t?this.Ff=Kn(this.Ff,22):this.Ff=Jn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,23)},set:function(t){t?this.Ff=Kn(this.Ff,23):this.Ff=Jn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,27)},set:function(t){t?this.Ff=Kn(this.Ff,27):this.Ff=Jn(this.Ff,27)}}),this.hasAppearanceStream=!1};Jo(Ed,xa);var jd=function(){Ed.call(this),this.fontName="helvetica",this.combo=!1};Jo(jd,Ed);var Rd=function(){jd.call(this),this.combo=!0};Jo(Rd,jd);var Yp=function(){Rd.call(this),this.edit=!0};Jo(Yp,Rd);var Pi=function(){xa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,15)},set:function(t){t?this.Ff=Kn(this.Ff,15):this.Ff=Jn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,16)},set:function(t){t?this.Ff=Kn(this.Ff,16):this.Ff=Jn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,17)},set:function(t){t?this.Ff=Kn(this.Ff,17):this.Ff=Jn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,26)},set:function(t){t?this.Ff=Kn(this.Ff,26):this.Ff=Jn(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+Vu(t(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Gr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};Jo(Pi,xa);var Qp=function(){Pi.call(this),this.pushButton=!0};Jo(Qp,Pi);var Pd=function(){Pi.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};Jo(Pd,Pi);var bm=function(){var r,e;xa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,l=[];for(o in l.push("<<"),n)l.push("/"+o+" ("+Vu(i(n[o]))+")");return l.push(">>"),l.join(`
`)},set:function(i){Gr(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Jo(bm,xa),Pd.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},Pd.prototype.createOption=function(r){var e=new bm;return e.Parent=this,e.optionName=r,this.Kids.push(e),fk.call(this.scope,e),e};var Xp=function(){Pi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yt.CheckBox.createAppearanceStream()};Jo(Xp,Pi);var mu=function(){xa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,13)},set:function(e){e?this.Ff=Kn(this.Ff,13):this.Ff=Jn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,21)},set:function(e){e?this.Ff=Kn(this.Ff,21):this.Ff=Jn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,23)},set:function(e){e?this.Ff=Kn(this.Ff,23):this.Ff=Jn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,24)},set:function(e){e?this.Ff=Kn(this.Ff,24):this.Ff=Jn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,25)},set:function(e){e?this.Ff=Kn(this.Ff,25):this.Ff=Jn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,26)},set:function(e){e?this.Ff=Kn(this.Ff,26):this.Ff=Jn(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Jo(mu,xa);var Zp=function(){mu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,14)},set:function(r){r?this.Ff=Kn(this.Ff,14):this.Ff=Jn(this.Ff,14)}}),this.password=!0};Jo(Zp,mu);var yt={CheckBox:{createAppearanceStream:function(){return{N:{On:yt.CheckBox.YesNormal},D:{On:yt.CheckBox.YesPushDown,Off:yt.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=Oa(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),o=d1(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+nr(yt.internal.getWidth(r))+" "+nr(yt.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+nr(o.fontSize)+" Tf "+i),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=Oa(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),i=[],o=yt.internal.getHeight(r),l=yt.internal.getWidth(r),u=d1(r,r.caption);return i.push("1 g"),i.push("0 0 "+nr(l)+" "+nr(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+nr(l-1)+" "+nr(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+nr(u.fontSize)+" Tf "+n),i.push(u.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(r){var e=Oa(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+nr(yt.internal.getWidth(r))+" "+nr(yt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:yt.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=yt.RadioButton.Circle.YesNormal,e.D[r]=yt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=Oa(r);e.scope=r.scope;var t=[],n=yt.internal.getWidth(r)<=yt.internal.getHeight(r)?yt.internal.getWidth(r)/4:yt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=yt.internal.Bezier_C,o=Number((n*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+sc(yt.internal.getWidth(r)/2)+" "+sc(yt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),t.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),t.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),t.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Oa(r);e.scope=r.scope;var t=[],n=yt.internal.getWidth(r)<=yt.internal.getHeight(r)?yt.internal.getWidth(r)/4:yt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*yt.internal.Bezier_C).toFixed(5)),l=Number((n*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+sc(yt.internal.getWidth(r)/2)+" "+sc(yt.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+sc(yt.internal.getWidth(r)/2)+" "+sc(yt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+l+" "+l+" "+n+" 0 "+n+" c"),t.push("-"+l+" "+n+" -"+n+" "+l+" -"+n+" 0 c"),t.push("-"+n+" -"+l+" -"+l+" -"+n+" 0 -"+n+" c"),t.push(l+" -"+n+" "+n+" -"+l+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=Oa(r);e.scope=r.scope;var t=[],n=yt.internal.getWidth(r)<=yt.internal.getHeight(r)?yt.internal.getWidth(r)/4:yt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+sc(yt.internal.getWidth(r)/2)+" "+sc(yt.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:yt.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=yt.RadioButton.Cross.YesNormal,e.D[r]=yt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=Oa(r);e.scope=r.scope;var t=[],n=yt.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+nr(yt.internal.getWidth(r)-2)+" "+nr(yt.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(nr(n.x1.x)+" "+nr(n.x1.y)+" m"),t.push(nr(n.x2.x)+" "+nr(n.x2.y)+" l"),t.push(nr(n.x4.x)+" "+nr(n.x4.y)+" m"),t.push(nr(n.x3.x)+" "+nr(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Oa(r);e.scope=r.scope;var t=yt.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+nr(yt.internal.getWidth(r))+" "+nr(yt.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+nr(yt.internal.getWidth(r)-2)+" "+nr(yt.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(nr(t.x1.x)+" "+nr(t.x1.y)+" m"),n.push(nr(t.x2.x)+" "+nr(t.x2.y)+" l"),n.push(nr(t.x4.x)+" "+nr(t.x4.y)+" m"),n.push(nr(t.x3.x)+" "+nr(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=Oa(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+nr(yt.internal.getWidth(r))+" "+nr(yt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};yt.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=yt.internal.getWidth(r),t=yt.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},yt.internal.getWidth=function(r){var e=0;return Gr(r)==="object"&&(e=wx(r.Rect[2])),e},yt.internal.getHeight=function(r){var e=0;return Gr(r)==="object"&&(e=wx(r.Rect[3])),e};var fk=Ln.addField=function(r){if(hk(this,r),!(r instanceof xa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};Ln.AcroFormChoiceField=Ed,Ln.AcroFormListBox=jd,Ln.AcroFormComboBox=Rd,Ln.AcroFormEditBox=Yp,Ln.AcroFormButton=Pi,Ln.AcroFormPushButton=Qp,Ln.AcroFormRadioButton=Pd,Ln.AcroFormCheckBox=Xp,Ln.AcroFormTextField=mu,Ln.AcroFormPasswordField=Zp,Ln.AcroFormAppearance=yt,Ln.AcroForm={ChoiceField:Ed,ListBox:jd,ComboBox:Rd,EditBox:Yp,Button:Pi,PushButton:Qp,RadioButton:Pd,CheckBox:Xp,TextField:mu,PasswordField:Zp,Appearance:yt},Ct.AcroForm={ChoiceField:Ed,ListBox:jd,ComboBox:Rd,EditBox:Yp,Button:Pi,PushButton:Qp,RadioButton:Pd,CheckBox:Xp,TextField:mu,PasswordField:Zp,Appearance:yt};Ct.AcroForm;function oS(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){var e="addImage_";r.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=r.__addimage__.getImageFileTypeByImageData=function(C,w){var N,D,q,ne,se,oe=t;if((w=w||t)==="RGBA"||C.data!==void 0&&C.data instanceof Uint8ClampedArray&&"height"in C&&"width"in C)return"RGBA";if(ue(C))for(se in n)for(q=n[se],N=0;N<q.length;N+=1){for(ne=!0,D=0;D<q[N].length;D+=1)if(q[N][D]!==void 0&&q[N][D]!==C[D]){ne=!1;break}if(ne===!0){oe=se;break}}else for(se in n)for(q=n[se],N=0;N<q.length;N+=1){for(ne=!0,D=0;D<q[N].length;D+=1)if(q[N][D]!==void 0&&q[N][D]!==C.charCodeAt(D)){ne=!1;break}if(ne===!0){oe=se;break}}return oe===t&&w!==t&&(oe=w),oe},o=function C(w){for(var N=this.internal.write,D=this.internal.putStream,q=(0,this.internal.getFilters)();q.indexOf("FlateEncode")!==-1;)q.splice(q.indexOf("FlateEncode"),1);w.objectId=this.internal.newObject();var ne=[];if(ne.push({key:"Type",value:"/XObject"}),ne.push({key:"Subtype",value:"/Image"}),ne.push({key:"Width",value:w.width}),ne.push({key:"Height",value:w.height}),w.colorSpace===A.INDEXED?ne.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(w.palette.length/3-1)+" "+("sMask"in w&&w.sMask!==void 0?w.objectId+2:w.objectId+1)+" 0 R]"}):(ne.push({key:"ColorSpace",value:"/"+w.colorSpace}),w.colorSpace===A.DEVICE_CMYK&&ne.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ne.push({key:"BitsPerComponent",value:w.bitsPerComponent}),"decodeParameters"in w&&w.decodeParameters!==void 0&&ne.push({key:"DecodeParms",value:"<<"+w.decodeParameters+">>"}),"transparency"in w&&Array.isArray(w.transparency)&&w.transparency.length>0){for(var se="",oe=0,xe=w.transparency.length;oe<xe;oe++)se+=w.transparency[oe]+" "+w.transparency[oe]+" ";ne.push({key:"Mask",value:"["+se+"]"})}w.sMask!==void 0&&ne.push({key:"SMask",value:w.objectId+1+" 0 R"});var we=w.filter!==void 0?["/"+w.filter]:void 0;if(D({data:w.data,additionalKeyValues:ne,alreadyAppliedFilters:we,objectId:w.objectId}),N("endobj"),"sMask"in w&&w.sMask!==void 0){var ee,W=(ee=w.sMaskBitsPerComponent)!==null&&ee!==void 0?ee:w.bitsPerComponent,J={width:w.width,height:w.height,colorSpace:"DeviceGray",bitsPerComponent:W,data:w.sMask};"filter"in w&&(J.decodeParameters="/Predictor ".concat(w.predictor," /Colors 1 /BitsPerComponent ").concat(W," /Columns ").concat(w.width),J.filter=w.filter),C.call(this,J)}if(w.colorSpace===A.INDEXED){var re=this.internal.newObject();D({data:k(new Uint8Array(w.palette)),objectId:re}),N("endobj")}},l=function(){var C=this.internal.collections[e+"images"];for(var w in C)o.call(this,C[w])},u=function(){var C,w=this.internal.collections[e+"images"],N=this.internal.write;for(var D in w)N("/I"+(C=w[D]).index,C.objectId,"0","R")},h=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",u))},d=function(){var C=this.internal.collections[e+"images"];return h.call(this),C},g=function(){return Object.keys(this.internal.collections[e+"images"]).length},b=function(C){return typeof r["process"+C.toUpperCase()]=="function"},S=function(C){return Gr(C)==="object"&&C.nodeType===1},x=function(C,w){if(C.nodeName==="IMG"&&C.hasAttribute("src")){var N=""+C.getAttribute("src");if(N.indexOf("data:image/")===0)return Jp(unescape(N).split("base64,").pop());var D=r.loadFile(N,!0);if(D!==void 0)return D}if(C.nodeName==="CANVAS"){if(C.width===0||C.height===0)throw new Error("Given canvas must have data. Canvas width: "+C.width+", height: "+C.height);var q;switch(w){case"PNG":q="image/png";break;case"WEBP":q="image/webp";break;default:q="image/jpeg"}return Jp(C.toDataURL(q,1).split("base64,").pop())}},B=function(C){var w=this.internal.collections[e+"images"];if(w){for(var N in w)if(C===w[N].alias)return w[N]}},E=function(C,w,N){return C||w||(C=-96,w=-96),C<0&&(C=-1*N.width*72/C/this.internal.scaleFactor),w<0&&(w=-1*N.height*72/w/this.internal.scaleFactor),C===0&&(C=w*N.width/N.height),w===0&&(w=C*N.height/N.width),[C,w]},L=function(C,w,N,D,q,ne){var se=E.call(this,N,D,q),oe=this.internal.getCoordinateString,xe=this.internal.getVerticalCoordinateString,we=d.call(this);if(N=se[0],D=se[1],we[q.index]=q,ne){ne*=Math.PI/180;var ee=Math.cos(ne),W=Math.sin(ne),J=function(he){return he.toFixed(4)},re=[J(ee),J(W),J(-1*W),J(ee),0,0,"cm"]}this.internal.write("q"),ne?(this.internal.write([1,"0","0",1,oe(C),xe(w+D),"cm"].join(" ")),this.internal.write(re.join(" ")),this.internal.write([oe(N),"0","0",oe(D),"0","0","cm"].join(" "))):this.internal.write([oe(N),"0","0",oe(D),oe(C),xe(w+D),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+q.index+" Do"),this.internal.write("Q")},A=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var O=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},$=r.__addimage__.sHashCode=function(C){var w,N,D=0;if(typeof C=="string")for(N=C.length,w=0;w<N;w++)D=(D<<5)-D+C.charCodeAt(w),D|=0;else if(ue(C))for(N=C.byteLength/2,w=0;w<N;w++)D=(D<<5)-D+C[w],D|=0;return D},F=r.__addimage__.validateStringAsBase64=function(C){(C=C||"").toString().trim();var w=!0;return C.length===0&&(w=!1),C.length%4!=0&&(w=!1),/^[A-Za-z0-9+/]+$/.test(C.substr(0,C.length-2))===!1&&(w=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(C.substr(-2))===!1&&(w=!1),w},ie=r.__addimage__.extractImageFromDataUrl=function(C){if(C==null||!(C=C.trim()).startsWith("data:"))return null;var w=C.indexOf(",");return w<0?null:C.substring(0,w).trim().endsWith("base64")?C.substring(w+1):null};r.__addimage__.isArrayBuffer=function(C){return C instanceof ArrayBuffer};var ue=r.__addimage__.isArrayBufferView=function(C){return C instanceof Int8Array||C instanceof Uint8Array||C instanceof Uint8ClampedArray||C instanceof Int16Array||C instanceof Uint16Array||C instanceof Int32Array||C instanceof Uint32Array||C instanceof Float32Array||C instanceof Float64Array},V=r.__addimage__.binaryStringToUint8Array=function(C){for(var w=C.length,N=new Uint8Array(w),D=0;D<w;D++)N[D]=C.charCodeAt(D);return N},k=r.__addimage__.arrayBufferToBinaryString=function(C){for(var w="",N=ue(C)?C:new Uint8Array(C),D=0;D<N.length;D+=8192)w+=String.fromCharCode.apply(null,N.subarray(D,D+8192));return w};r.addImage=function(){var C,w,N,D,q,ne,se,oe,xe;if(typeof arguments[1]=="number"?(w=t,N=arguments[1],D=arguments[2],q=arguments[3],ne=arguments[4],se=arguments[5],oe=arguments[6],xe=arguments[7]):(w=arguments[1],N=arguments[2],D=arguments[3],q=arguments[4],ne=arguments[5],se=arguments[6],oe=arguments[7],xe=arguments[8]),Gr(C=arguments[0])==="object"&&!S(C)&&"imageData"in C){var we=C;C=we.imageData,w=we.format||w||t,N=we.x||N||0,D=we.y||D||0,q=we.w||we.width||q,ne=we.h||we.height||ne,se=we.alias||se,oe=we.compression||oe,xe=we.rotation||we.angle||xe}var ee=this.internal.getFilters();if(oe===void 0&&ee.indexOf("FlateEncode")!==-1&&(oe="SLOW"),isNaN(N)||isNaN(D))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var W=I.call(this,C,w,se,oe);return L.call(this,N,D,q,ne,W,xe),this};var I=function(C,w,N,D){var q,ne,se;if(typeof C=="string"&&i(C)===t){C=unescape(C);var oe=M(C,!1);(oe!==""||(oe=r.loadFile(C,!0))!==void 0)&&(C=oe)}if(S(C)&&(C=x(C,w)),w=i(C,w),!b(w))throw new Error("addImage does not support files of type '"+w+"', please ensure that a plugin for '"+w+"' support is added.");if(((se=N)==null||se.length===0)&&(N=(function(xe){return typeof xe=="string"||ue(xe)?$(xe):ue(xe.data)?$(xe.data):null})(C)),(q=B.call(this,N))||(C instanceof Uint8Array||w==="RGBA"||(ne=C,C=V(C)),q=this["process"+w.toUpperCase()](C,g.call(this),N,(function(xe){return xe&&typeof xe=="string"&&(xe=xe.toUpperCase()),xe in r.image_compression?xe:O.NONE})(D),ne)),!q)throw new Error("An unknown error occurred whilst processing the image.");return q},M=r.__addimage__.convertBase64ToBinaryString=function(C,w){w=typeof w!="boolean"||w;var N,D="";if(typeof C=="string"){var q;N=(q=ie(C))!==null&&q!==void 0?q:C;try{D=Jp(N)}catch(ne){if(w)throw F(N)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ne.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return D};r.getImageProperties=function(C){var w,N,D="";if(S(C)&&(C=x(C)),typeof C=="string"&&i(C)===t&&((D=M(C,!1))===""&&(D=r.loadFile(C)||""),C=D),N=i(C),!b(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(C instanceof Uint8Array||(C=V(C)),!(w=this["process"+N.toUpperCase()](C)))throw new Error("An unknown error occurred whilst processing the image");return w.fileType=N,w}})(Ct.API),(function(r){var e=function(t){if(t!==void 0&&t!="")return!0};Ct.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,i,o,l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,g=!1,b=0;b<d.length&&!g;b++)switch((n=d[b]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var S=0;S<d.length;S++){n=d[S];var x=this.internal.pdfEscape,B=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),L=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(E.objId),O=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+l(n.bounds.x)+" "+u(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y)+"] ")+"/Contents ("+x(A(n.contents))+")",o+=" /Popup "+L.objId+" 0 R",o+=" /P "+h.objId+" 0 R",o+=" /T ("+x(A(O))+") >>",E.content=o;var $=E.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+l(n.bounds.x+30)+" "+u(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w+30)+" "+u(n.bounds.y)+"] ")+" /Parent "+$,n.open&&(o+=" /Open true"),o+=" >>",L.content=o,this.internal.write(E.objId,"0 R",L.objId,"0 R");break;case"freetext":i="/Rect ["+l(n.bounds.x)+" "+u(n.bounds.y)+" "+l(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y+n.bounds.h)+"] ";var F=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+x(B(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var ie=this.annotations._nameMap[n.options.name];n.options.pageNumber=ie.page,n.options.top=ie.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+x(B(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;default:var ue=u(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+ue+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,i,o,l){var u=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:h(t),y:d(n),w:h(t+i),h:d(n+o)},options:l,type:"link"})},r.textWithLink=function(t,n,i,o){var l,u,h=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){u=o.maxWidth;var g=this.splitTextToSize(t,u).length;l=Math.ceil(d*g)}else u=h,l=d;return this.text(t,n,i,o),i+=.2*d,o.align==="center"&&(n-=h/2),o.align==="right"&&(n-=h),this.link(n,i-d,u,l,o),h},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}})(Ct.API),(function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];r.__arabicParser__={};var o=r.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},l=r.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},u=r.__arabicParser__.isArabicEndLetter=function(E){return l(E)&&o(E)&&e[E.charCodeAt(0)].length<=2},h=r.__arabicParser__.isArabicAlfLetter=function(E){return l(E)&&i.indexOf(E.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return l(E)&&o(E)&&e[E.charCodeAt(0)].length>=1};var d=r.__arabicParser__.arabicLetterHasFinalForm=function(E){return l(E)&&o(E)&&e[E.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(E){return l(E)&&o(E)&&e[E.charCodeAt(0)].length>=3};var g=r.__arabicParser__.arabicLetterHasMedialForm=function(E){return l(E)&&o(E)&&e[E.charCodeAt(0)].length==4},b=r.__arabicParser__.resolveLigatures=function(E){var L=0,A=t,O="",$=0;for(L=0;L<E.length;L+=1)A[E.charCodeAt(L)]!==void 0?($++,typeof(A=A[E.charCodeAt(L)])=="number"&&(O+=String.fromCharCode(A),A=t,$=0),L===E.length-1&&(A=t,O+=E.charAt(L-($-1)),L-=$-1,$=0)):(A=t,O+=E.charAt(L-$),L-=$,$=0);return O};r.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&n[E.charCodeAt(0)]!==void 0};var S=r.__arabicParser__.getCorrectForm=function(E,L,A){return l(E)?o(E)===!1?-1:!d(E)||!l(L)&&!l(A)||!l(A)&&u(L)||u(E)&&!l(L)||u(E)&&h(L)||u(E)&&u(L)?0:g(E)&&l(L)&&!u(L)&&l(A)&&d(A)?3:u(E)||!l(A)?1:2:-1},x=function(E){var L=0,A=0,O=0,$="",F="",ie="",ue=(E=E||"").split("\\s+"),V=[];for(L=0;L<ue.length;L+=1){for(V.push(""),A=0;A<ue[L].length;A+=1)$=ue[L][A],F=ue[L][A-1],ie=ue[L][A+1],l($)?(O=S($,F,ie),V[L]+=O!==-1?String.fromCharCode(e[$.charCodeAt(0)][O]):$):V[L]+=$;V[L]=b(V[L])}return V.join(" ")},B=r.__arabicParser__.processArabic=r.processArabic=function(){var E,L=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(L)){var O=0;for(A=[],O=0;O<L.length;O+=1)Array.isArray(L[O])?A.push([x(L[O][0]),L[O][1],L[O][2]]):A.push([x(L[O])]);E=A}else E=x(L);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};r.events.push(["preProcessText",B])})(Ct.API),Ct.API.autoPrint=function(r){var e;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(u){t=u}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(u){n=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(u){o=u}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(u){l=u}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var i;if((t=t||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Ct.API),(function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(E){h=E}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(E){d=E}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(E){g=E}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(E){b=E}});var S=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return S},set:function(E){S=E}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(E){x=E}});var B=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return B},set:function(E){B=E}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(h){return n.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},r.getTextDimensions=function(h,d){n.call(this);var g=(d=d||{}).fontSize||this.getFontSize(),b=d.font||this.getFont(),S=d.scaleFactor||this.internal.scaleFactor,x=0,B=0,E=0,L=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var A=d.maxWidth;A>0?typeof h=="string"?h=this.splitTextToSize(h,A):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function($,F){return $.concat(L.splitTextToSize(F,A))},[])):h=Array.isArray(h)?h:[h];for(var O=0;O<h.length;O++)x<(E=this.getStringUnitWidth(h[O],{font:b})*g)&&(x=E);return x!==0&&(B=h.length),{w:x/=S,h:Math.max((B*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/S,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=r.cell=function(){var h;h=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,b=this.internal.__cell__.margins||e,S=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===h.lineNumber?(h.x=(d.x||0)+(d.width||0),h.y=d.y||0):d.y+d.height+h.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=b.top,x&&S&&(this.printHeaderRow(h.lineNumber,!0),h.y+=S[0].height)):h.y=d.y+d.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-g,h.y+g,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+g,{align:"center",baseline:"top",maxWidth:h.width-g-g}):this.text(h.text,h.x+g,h.y+g,{align:"left",baseline:"top",maxWidth:h.width-g-g})),this.internal.__cell__.lastCell=h,this};r.table=function(h,d,g,b,S){if(n.call(this),!g)throw new Error("No data for PDF table.");var x,B,E,L,A=[],O=[],$=[],F={},ie={},ue=[],V=[],k=(S=S||{}).autoSize||!1,I=S.printHeaders!==!1,M=S.css&&S.css["font-size"]!==void 0?16*S.css["font-size"]:S.fontSize||12,C=S.margins||Object.assign({width:this.getPageWidth()},e),w=typeof S.padding=="number"?S.padding:3,N=S.headerBackgroundColor||"#c8c8c8",D=S.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=w,this.internal.__cell__.headerBackgroundColor=N,this.internal.__cell__.headerTextColor=D,this.setFontSize(M),b==null)O=A=Object.keys(g[0]),$=A.map(function(){return"left"});else if(Array.isArray(b)&&Gr(b[0])==="object")for(A=b.map(function(we){return we.name}),O=b.map(function(we){return we.prompt||we.name||""}),$=b.map(function(we){return we.align||"left"}),x=0;x<b.length;x+=1)ie[b[x].name]=.7499990551181103*b[x].width;else Array.isArray(b)&&typeof b[0]=="string"&&(O=A=b,$=A.map(function(){return"left"}));if(k||Array.isArray(b)&&typeof b[0]=="string")for(x=0;x<A.length;x+=1){for(F[L=A[x]]=g.map(function(we){return we[L]}),this.setFont(void 0,"bold"),ue.push(this.getTextDimensions(O[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),B=F[L],this.setFont(void 0,"normal"),E=0;E<B.length;E+=1)ue.push(this.getTextDimensions(B[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ie[L]=Math.max.apply(null,ue)+w+w,ue=[]}if(I){var q={};for(x=0;x<A.length;x+=1)q[A[x]]={},q[A[x]].text=O[x],q[A[x]].align=$[x];var ne=u.call(this,q,ie);V=A.map(function(we){return new o(h,d,ie[we],ne,q[we].text,void 0,q[we].align)}),this.setTableHeaderRow(V),this.printHeaderRow(1,!1)}var se=b.reduce(function(we,ee){return we[ee.name]=ee.align,we},{});for(x=0;x<g.length;x+=1){"rowStart"in S&&S.rowStart instanceof Function&&S.rowStart({row:x,data:g[x]},this);var oe=u.call(this,g[x],ie);for(E=0;E<A.length;E+=1){var xe=g[x][A[E]];"cellStart"in S&&S.cellStart instanceof Function&&S.cellStart({row:x,col:E,data:xe},this),l.call(this,new o(h,d,ie[A[E]],oe,xe,x+2,se[A[E]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=d,this};var u=function(h,d){var g=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,S=this.internal.scaleFactor;return Object.keys(h).map(function(x){var B=h[x];return this.splitTextToSize(B.hasOwnProperty("text")?B.text:B,d[x]-g-g)},this).map(function(x){return this.getLineHeightFactor()*x.length*b/S+g+g},this).reduce(function(x,B){return Math.max(x,B)},0)};r.setTableHeaderRow=function(h){n.call(this),this.internal.__cell__.tableHeaderRow=h},r.printHeaderRow=function(h,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var S=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){g=this.internal.__cell__.tableHeaderRow[x].clone(),d&&(g.y=this.internal.__cell__.margins.top||0,S.push(g)),g.lineNumber=h;var B=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,g),this.setTextColor(B)}S.length>0&&this.setTableHeaderRow(S),this.setFont(void 0,"normal"),t=!1}})(Ct.API);var sS={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},aS=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],h1=oS(aS),lS=[100,200,300,400,500,600,700,800,900],pk=oS(lS);function Ng(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return sS[o=o||"normal"]?o:"normal"})(r.style),n=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(r.weight),i=(function(o){return typeof h1[o=o||"normal"]=="number"?o:"normal"})(r.stretch);return{family:e,style:t,weight:n,stretch:i,src:r.src||[],ref:r.ref||{name:e,style:[i,t,n].join(" ")}}}function Sx(r,e,t,n){var i;for(i=t;i>=0&&i<e.length;i+=n)if(r[e[i]])return r[e[i]];for(i=t;i>=0&&i<e.length;i-=n)if(r[e[i]])return r[e[i]]}var mk={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},_x={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Tx(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function Ax(r){return r.trimLeft()}function gk(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function yk(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var zp,Cx,kx,fd,Vp,Ix,Ex,jx,Bg=["times"];function Rx(r,e,t,n,i){var o=4,l=Nx;switch(i){case Ct.API.image_compression.FAST:o=1,l=Px;break;case Ct.API.image_compression.MEDIUM:o=6,l=Bx;break;case Ct.API.image_compression.SLOW:o=9,l=Lx}r=(function(h,d,g,b){for(var S,x=h.length/d,B=new Uint8Array(h.length+x),E=[xk,Px,Nx,Bx,Lx],L=0;L<x;L+=1){var A=L*d,O=h.subarray(A,A+d);if(b)B.set(b(O,g,S),A+L);else{for(var $=E.length,F=[],ie=0;ie<$;ie+=1)F[ie]=E[ie](O,g,S);var ue=bk(F.concat());B.set(F[ue],A+L)}S=O}return B})(r,e,Math.ceil(t*n/8),l);var u=o1(r,{level:o});return Ct.API.__addimage__.arrayBufferToBinaryString(u)}function xk(r){var e=Array.apply([],r);return e.unshift(0),e}function Px(r,e){var t=r.length,n=[];n[0]=1;for(var i=0;i<t;i+=1){var o=r[i-e]||0;n[i+1]=r[i]-o+256&255}return n}function Nx(r,e,t){var n=r.length,i=[];i[0]=2;for(var o=0;o<n;o+=1){var l=t&&t[o]||0;i[o+1]=r[o]-l+256&255}return i}function Bx(r,e,t){var n=r.length,i=[];i[0]=3;for(var o=0;o<n;o+=1){var l=r[o-e]||0,u=t&&t[o]||0;i[o+1]=r[o]+256-(l+u>>>1)&255}return i}function Lx(r,e,t){var n=r.length,i=[];i[0]=4;for(var o=0;o<n;o+=1){var l=vk(r[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);i[o+1]=r[o]-l+256&255}return i}function vk(r,e,t){if(r===e&&e===t)return r;var n=Math.abs(e-t),i=Math.abs(r-t),o=Math.abs(r+e-t-t);return n<=i&&n<=o?r:i<=o?e:t}function bk(r){var e=r.map(function(t){return t.reduce(function(n,i){return n+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function Lg(r,e,t){var n=e*t,i=Math.floor(n/8),o=16-(n-8*i+t),l=(1<<t)-1;return cS(r,i)>>o&l}function Fx(r,e,t,n){var i=t*n,o=Math.floor(i/8),l=16-(i-8*o+n),u=(1<<n)-1,h=(e&u)<<l;(function(d,g,b){if(g+1<d.byteLength)d.setUint16(g,b,!1);else{var S=b>>8&255;d.setUint8(g,S)}})(r,o,cS(r,o)&~(u<<l)&65535|h)}function cS(r,e){return e+1<r.byteLength?r.getUint16(e,!1):r.getUint8(e)<<8}function wk(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,i=r[e++],o=i>>7,l=1<<1+(7&i);r[e++],r[e++];var u=null,h=null;o&&(u=e,h=l,e+=3*l);var d=!0,g=[],b=0,S=null,x=0,B=null;for(this.width=t,this.height=n;d&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,B=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((C=r[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=r[e++];b=r[e++]|r[e++]<<8,S=r[e++],1&E||(S=null),x=E>>2&7,e++;break;case 254:for(;;){if(!((C=r[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var L=r[e++]|r[e++]<<8,A=r[e++]|r[e++]<<8,O=r[e++]|r[e++]<<8,$=r[e++]|r[e++]<<8,F=r[e++],ie=F>>6&1,ue=1<<1+(7&F),V=u,k=h,I=!1;F>>7&&(I=!0,V=e,k=ue,e+=3*ue);var M=e;for(e++;;){var C;if(!((C=r[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}g.push({x:L,y:A,width:O,height:$,has_local_palette:I,palette_offset:V,palette_size:k,data_offset:M,data_length:e-M,transparent_index:S,interlaced:!!ie,delay:b,disposal:x});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return B},this.frameInfo=function(w){if(w<0||w>=g.length)throw new Error("Frame index out of range.");return g[w]},this.decodeAndBlitFrameBGRA=function(w,N){var D=this.frameInfo(w),q=D.width*D.height,ne=new Uint8Array(q);zx(r,D.data_offset,ne,q);var se=D.palette_offset,oe=D.transparent_index;oe===null&&(oe=256);var xe=D.width,we=t-xe,ee=xe,W=4*(D.y*t+D.x),J=4*((D.y+D.height)*t+D.x),re=W,he=4*we;D.interlaced===!0&&(he+=4*t*7);for(var me=8,Se=0,ke=ne.length;Se<ke;++Se){var Ce=ne[Se];if(ee===0&&(ee=xe,(re+=he)>=J&&(he=4*we+4*t*(me-1),re=W+(xe+we)*(me<<1),me>>=1)),Ce===oe)re+=4;else{var ge=r[se+3*Ce],Fe=r[se+3*Ce+1],Ke=r[se+3*Ce+2];N[re++]=Ke,N[re++]=Fe,N[re++]=ge,N[re++]=255}--ee}},this.decodeAndBlitFrameRGBA=function(w,N){var D=this.frameInfo(w),q=D.width*D.height,ne=new Uint8Array(q);zx(r,D.data_offset,ne,q);var se=D.palette_offset,oe=D.transparent_index;oe===null&&(oe=256);var xe=D.width,we=t-xe,ee=xe,W=4*(D.y*t+D.x),J=4*((D.y+D.height)*t+D.x),re=W,he=4*we;D.interlaced===!0&&(he+=4*t*7);for(var me=8,Se=0,ke=ne.length;Se<ke;++Se){var Ce=ne[Se];if(ee===0&&(ee=xe,(re+=he)>=J&&(he=4*we+4*t*(me-1),re=W+(xe+we)*(me<<1),me>>=1)),Ce===oe)re+=4;else{var ge=r[se+3*Ce],Fe=r[se+3*Ce+1],Ke=r[se+3*Ce+2];N[re++]=ge,N[re++]=Fe,N[re++]=Ke,N[re++]=255}--ee}}}function zx(r,e,t,n){for(var i=r[e++],o=1<<i,l=o+1,u=l+1,h=i+1,d=(1<<h)-1,g=0,b=0,S=0,x=r[e++],B=new Int32Array(4096),E=null;;){for(;g<16&&x!==0;)b|=r[e++]<<g,g+=8,x===1?x=r[e++]:--x;if(g<h)break;var L=b&d;if(b>>=h,g-=h,L!==o){if(L===l)break;for(var A=L<u?L:E,O=0,$=A;$>o;)$=B[$]>>8,++O;var F=$;if(S+O+(A!==L?1:0)>n)return void rn.log("Warning, gif stream longer than expected.");t[S++]=F;var ie=S+=O;for(A!==L&&(t[S++]=F),$=A;O--;)$=B[$],t[--ie]=255&$,$>>=8;E!==null&&u<4096&&(B[u++]=E<<8|F,u>=d+1&&h<12&&(++h,d=d<<1|1)),E=L}else u=l+1,d=(1<<(h=i+1))-1,E=null}return S!==n&&rn.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Fg(r){var e,t,n,i,o,l=Math.floor,u=new Array(64),h=new Array(64),d=new Array(64),g=new Array(64),b=new Array(65535),S=new Array(65535),x=new Array(64),B=new Array(64),E=[],L=0,A=7,O=new Array(64),$=new Array(64),F=new Array(64),ie=new Array(256),ue=new Array(2048),V=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],w=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ne(W,J){for(var re=0,he=0,me=new Array,Se=1;Se<=16;Se++){for(var ke=1;ke<=W[Se];ke++)me[J[he]]=[],me[J[he]][0]=re,me[J[he]][1]=Se,he++,re++;re*=2}return me}function se(W){for(var J=W[0],re=W[1]-1;re>=0;)J&1<<re&&(L|=1<<A),re--,--A<0&&(L==255?(oe(255),oe(0)):oe(L),A=7,L=0)}function oe(W){E.push(W)}function xe(W){oe(W>>8&255),oe(255&W)}function we(W,J,re,he,me){for(var Se,ke=me[0],Ce=me[240],ge=(function(He,ot){var rt,Jt,_t,mr,Ft,qt,vr,Ot,Tt,jt,pt=0;for(Tt=0;Tt<8;++Tt){rt=He[pt],Jt=He[pt+1],_t=He[pt+2],mr=He[pt+3],Ft=He[pt+4],qt=He[pt+5],vr=He[pt+6];var Ir=rt+(Ot=He[pt+7]),ir=rt-Ot,ht=Jt+vr,Ht=Jt-vr,sr=_t+qt,It=_t-qt,tr=mr+Ft,Wt=mr-Ft,Er=Ir+tr,zr=Ir-tr,$t=ht+sr,Mt=ht-sr;He[pt]=Er+$t,He[pt+4]=Er-$t;var ar=.707106781*(Mt+zr);He[pt+2]=zr+ar,He[pt+6]=zr-ar;var Hi=.382683433*((Er=Wt+It)-(Mt=Ht+ir)),zn=.5411961*Er+Hi,Ro=1.306562965*Mt+Hi,Vn=.707106781*($t=It+Ht),Rt=ir+Vn,Ni=ir-Vn;He[pt+5]=Ni+zn,He[pt+3]=Ni-zn,He[pt+1]=Rt+Ro,He[pt+7]=Rt-Ro,pt+=8}for(pt=0,Tt=0;Tt<8;++Tt){rt=He[pt],Jt=He[pt+8],_t=He[pt+16],mr=He[pt+24],Ft=He[pt+32],qt=He[pt+40],vr=He[pt+48];var gi=rt+(Ot=He[pt+56]),On=rt-Ot,Bi=Jt+vr,Cr=Jt-vr,Vr=_t+qt,un=_t-qt,Yn=mr+Ft,Yo=mr-Ft,Gi=gi+Yn,Ki=gi-Yn,bn=Bi+Vr,Li=Bi-Vr;He[pt]=Gi+bn,He[pt+32]=Gi-bn;var Fi=.707106781*(Li+Ki);He[pt+16]=Ki+Fi,He[pt+48]=Ki-Fi;var bs=.382683433*((Gi=Yo+un)-(Li=Cr+On)),mo=.5411961*Gi+bs,go=1.306562965*Li+bs,ws=.707106781*(bn=un+Cr),Qo=On+ws,Po=On-ws;He[pt+40]=Po+mo,He[pt+24]=Po-mo,He[pt+8]=Qo+go,He[pt+56]=Qo-go,pt++}for(Tt=0;Tt<64;++Tt)jt=He[Tt]*ot[Tt],x[Tt]=jt>0?jt+.5|0:jt-.5|0;return x})(W,J),Fe=0;Fe<64;++Fe)B[V[Fe]]=ge[Fe];var Ke=B[0]-re;re=B[0],Ke==0?se(he[0]):(se(he[S[Se=32767+Ke]]),se(b[Se]));for(var Qe=63;Qe>0&&B[Qe]==0;)Qe--;if(Qe==0)return se(ke),re;for(var ze,de=1;de<=Qe;){for(var Nt=de;B[de]==0&&de<=Qe;)++de;var Et=de-Nt;if(Et>=16){ze=Et>>4;for(var wt=1;wt<=ze;++wt)se(Ce);Et&=15}Se=32767+B[de],se(me[(Et<<4)+S[Se]]),se(b[Se]),de++}return Qe!=63&&se(ke),re}function ee(W){W=Math.min(Math.max(W,1),100),o!=W&&((function(J){for(var re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],he=0;he<64;he++){var me=l((re[he]*J+50)/100);me=Math.min(Math.max(me,1),255),u[V[he]]=me}for(var Se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ke=0;ke<64;ke++){var Ce=l((Se[ke]*J+50)/100);Ce=Math.min(Math.max(Ce,1),255),h[V[ke]]=Ce}for(var ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Fe=0,Ke=0;Ke<8;Ke++)for(var Qe=0;Qe<8;Qe++)d[Fe]=1/(u[V[Fe]]*ge[Ke]*ge[Qe]*8),g[Fe]=1/(h[V[Fe]]*ge[Ke]*ge[Qe]*8),Fe++})(W<50?Math.floor(5e3/W):Math.floor(200-2*W)),o=W)}this.encode=function(W,J){J&&ee(J),E=new Array,L=0,A=7,xe(65496),xe(65504),xe(16),oe(74),oe(70),oe(73),oe(70),oe(0),oe(1),oe(1),oe(0),xe(1),xe(1),oe(0),oe(0),(function(){xe(65499),xe(132),oe(0);for(var Jt=0;Jt<64;Jt++)oe(u[Jt]);oe(1);for(var _t=0;_t<64;_t++)oe(h[_t])})(),(function(Jt,_t){xe(65472),xe(17),oe(8),xe(_t),xe(Jt),oe(3),oe(1),oe(17),oe(0),oe(2),oe(17),oe(1),oe(3),oe(17),oe(1)})(W.width,W.height),(function(){xe(65476),xe(418),oe(0);for(var Jt=0;Jt<16;Jt++)oe(k[Jt+1]);for(var _t=0;_t<=11;_t++)oe(I[_t]);oe(16);for(var mr=0;mr<16;mr++)oe(M[mr+1]);for(var Ft=0;Ft<=161;Ft++)oe(C[Ft]);oe(1);for(var qt=0;qt<16;qt++)oe(w[qt+1]);for(var vr=0;vr<=11;vr++)oe(N[vr]);oe(17);for(var Ot=0;Ot<16;Ot++)oe(D[Ot+1]);for(var Tt=0;Tt<=161;Tt++)oe(q[Tt])})(),xe(65498),xe(12),oe(3),oe(1),oe(0),oe(2),oe(17),oe(3),oe(17),oe(0),oe(63),oe(0);var re=0,he=0,me=0;L=0,A=7,this.encode.displayName="_encode_";for(var Se,ke,Ce,ge,Fe,Ke,Qe,ze,de,Nt=W.data,Et=W.width,wt=W.height,He=4*Et,ot=0;ot<wt;){for(Se=0;Se<He;){for(Fe=He*ot+Se,Qe=-1,ze=0,de=0;de<64;de++)Ke=Fe+(ze=de>>3)*He+(Qe=4*(7&de)),ot+ze>=wt&&(Ke-=He*(ot+1+ze-wt)),Se+Qe>=He&&(Ke-=Se+Qe-He+4),ke=Nt[Ke++],Ce=Nt[Ke++],ge=Nt[Ke++],O[de]=(ue[ke]+ue[Ce+256|0]+ue[ge+512|0]>>16)-128,$[de]=(ue[ke+768|0]+ue[Ce+1024|0]+ue[ge+1280|0]>>16)-128,F[de]=(ue[ke+1280|0]+ue[Ce+1536|0]+ue[ge+1792|0]>>16)-128;re=we(O,d,re,e,n),he=we($,g,he,t,i),me=we(F,g,me,t,i),Se+=32}ot+=8}if(A>=0){var rt=[];rt[1]=A+1,rt[0]=(1<<A+1)-1,se(rt)}return xe(65497),new Uint8Array(E)},r=r||50,(function(){for(var W=String.fromCharCode,J=0;J<256;J++)ie[J]=W(J)})(),e=ne(k,I),t=ne(w,N),n=ne(M,C),i=ne(D,q),(function(){for(var W=1,J=2,re=1;re<=15;re++){for(var he=W;he<J;he++)S[32767+he]=re,b[32767+he]=[],b[32767+he][1]=re,b[32767+he][0]=he;for(var me=-(J-1);me<=-W;me++)S[32767+me]=re,b[32767+me]=[],b[32767+me][1]=re,b[32767+me][0]=J-1+me;W<<=1,J<<=1}})(),(function(){for(var W=0;W<256;W++)ue[W]=19595*W,ue[W+256|0]=38470*W,ue[W+512|0]=7471*W+32768,ue[W+768|0]=-11059*W,ue[W+1024|0]=-21709*W,ue[W+1280|0]=32768*W+8421375,ue[W+1536|0]=-27439*W,ue[W+1792|0]=-5329*W})(),ee(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function da(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Vx(r){function e(I){if(!I)throw Error("assert :P")}function t(I,M,C){for(var w=0;4>w;w++)if(I[M+w]!=C.charCodeAt(w))return!0;return!1}function n(I,M,C,w,N){for(var D=0;D<N;D++)I[M+D]=C[w+D]}function i(I,M,C,w){for(var N=0;N<w;N++)I[M+N]=C}function o(I){return new Int32Array(I)}function l(I,M){for(var C=[],w=0;w<I;w++)C.push(new M);return C}function u(I,M){var C=[];return(function w(N,D,q){for(var ne=q[D],se=0;se<ne&&(N.push(q.length>D+1?[]:new M),!(q.length<D+1));se++)w(N[se],D+1,q)})(C,0,I),C}var h=function(){var I=this;function M(p,v){for(var j=1<<v-1>>>0;p&j;)j>>>=1;return j?(p&j-1)+j:p}function C(p,v,j,z,G){e(!(z%j));do p[v+(z-=j)]=G;while(0<z)}function w(p,v,j,z,G){if(e(2328>=G),512>=G)var Y=o(512);else if((Y=o(G))==null)return 0;return(function(Q,X,te,ae,ve,je){var le,_e,Ee=X,De=1<<te,Ne=o(16),Oe=o(16);for(e(ve!=0),e(ae!=null),e(Q!=null),e(0<te),_e=0;_e<ve;++_e){if(15<ae[_e])return 0;++Ne[ae[_e]]}if(Ne[0]==ve)return 0;for(Oe[1]=0,le=1;15>le;++le){if(Ne[le]>1<<le)return 0;Oe[le+1]=Oe[le]+Ne[le]}for(_e=0;_e<ve;++_e)le=ae[_e],0<ae[_e]&&(je[Oe[le]++]=_e);if(Oe[15]==1)return(ae=new N).g=0,ae.value=je[0],C(Q,Ee,1,De,ae),De;var Me,Ue=-1,qe=De-1,St=0,ct=1,Xt=1,ft=1<<te;for(_e=0,le=1,ve=2;le<=te;++le,ve<<=1){if(ct+=Xt<<=1,0>(Xt-=Ne[le]))return 0;for(;0<Ne[le];--Ne[le])(ae=new N).g=le,ae.value=je[_e++],C(Q,Ee+St,ve,ft,ae),St=M(St,le)}for(le=te+1,ve=2;15>=le;++le,ve<<=1){if(ct+=Xt<<=1,0>(Xt-=Ne[le]))return 0;for(;0<Ne[le];--Ne[le]){if(ae=new N,(St&qe)!=Ue){for(Ee+=ft,Me=1<<(Ue=le)-te;15>Ue&&!(0>=(Me-=Ne[Ue]));)++Ue,Me<<=1;De+=ft=1<<(Me=Ue-te),Q[X+(Ue=St&qe)].g=Me+te,Q[X+Ue].value=Ee-X-Ue}ae.g=le-te,ae.value=je[_e++],C(Q,Ee+(St>>te),ve,ft,ae),St=M(St,le)}}return ct!=2*Oe[15]-1?0:De})(p,v,j,z,G,Y)}function N(){this.value=this.g=0}function D(){this.value=this.g=0}function q(){this.G=l(5,N),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Mo,D)}function ne(p,v,j,z){e(p!=null),e(v!=null),e(2147483648>z),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=v,p.pa=j,p.Jd=v,p.Yc=j+z,p.Zc=4<=z?j+z-4+1:j,ke(p)}function se(p,v){for(var j=0;0<v--;)j|=ge(p,128)<<v;return j}function oe(p,v){var j=se(p,v);return Ce(p)?-j:j}function xe(p,v,j,z){var G,Y=0;for(e(p!=null),e(v!=null),e(4294967288>z),p.Sb=z,p.Ra=0,p.u=0,p.h=0,4<z&&(z=4),G=0;G<z;++G)Y+=v[j+G]<<8*G;p.Ra=Y,p.bb=z,p.oa=v,p.pa=j}function we(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<Ia-8>>>0,++p.bb,p.u-=8;he(p)&&(p.h=1,p.u=0)}function ee(p,v){if(e(0<=v),!p.h&&v<=_o){var j=re(p)&So[v];return p.u+=v,we(p),j}return p.h=1,p.u=0}function W(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function J(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function re(p){return p.Ra>>>(p.u&Ia-1)>>>0}function he(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>Ia}function me(p,v){p.u=v,p.h=he(p)}function Se(p){p.u>=Es&&(e(p.u>=Es),we(p))}function ke(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function Ce(p){return se(p,1)}function ge(p,v){var j=p.Ca;0>p.b&&ke(p);var z=p.b,G=j*v>>>8,Y=(p.I>>>z>G)+0;for(Y?(j-=G,p.I-=G+1<<z>>>0):j=G+1,z=j,G=0;256<=z;)G+=8,z>>=8;return z=7^G+Xs[z],p.b-=z,p.Ca=(j<<z)-1,Y}function Fe(p,v,j){p[v+0]=j>>24&255,p[v+1]=j>>16&255,p[v+2]=j>>8&255,p[v+3]=255&j}function Ke(p,v){return p[v+0]|p[v+1]<<8}function Qe(p,v){return Ke(p,v)|p[v+2]<<16}function ze(p,v){return Ke(p,v)|Ke(p,v+2)<<16}function de(p,v){var j=1<<v;return e(p!=null),e(0<v),p.X=o(j),p.X==null?0:(p.Mb=32-v,p.Xa=v,1)}function Nt(p,v){e(p!=null),e(v!=null),e(p.Xa==v.Xa),n(v.X,0,p.X,0,1<<v.Xa)}function Et(){this.X=[],this.Xa=this.Mb=0}function wt(p,v,j,z){e(j!=null),e(z!=null);var G=j[0],Y=z[0];return G==0&&(G=(p*Y+v/2)/v),Y==0&&(Y=(v*G+p/2)/p),0>=G||0>=Y?0:(j[0]=G,z[0]=Y,1)}function He(p,v){return p+(1<<v)-1>>>v}function ot(p,v){return((4278255360&p)+(4278255360&v)>>>0&4278255360)+((16711935&p)+(16711935&v)>>>0&16711935)>>>0}function rt(p,v){I[v]=function(j,z,G,Y,Q,X,te){var ae;for(ae=0;ae<Q;++ae){var ve=I[p](X[te+ae-1],G,Y+ae);X[te+ae]=ot(j[z+ae],ve)}}}function Jt(){this.ud=this.hd=this.jd=0}function _t(p,v){return((4278124286&(p^v))>>>1)+(p&v)>>>0}function mr(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function Ft(p,v){return mr(p+(p-v+.5>>1))}function qt(p,v,j){return Math.abs(v-j)-Math.abs(p-j)}function vr(p,v,j,z,G,Y,Q){for(z=Y[Q-1],j=0;j<G;++j)Y[Q+j]=z=ot(p[v+j],z)}function Ot(p,v,j,z,G){var Y;for(Y=0;Y<j;++Y){var Q=p[v+Y],X=Q>>8&255,te=16711935&(te=(te=16711935&Q)+((X<<16)+X));z[G+Y]=(4278255360&Q)+te>>>0}}function Tt(p,v){v.jd=255&p,v.hd=p>>8&255,v.ud=p>>16&255}function jt(p,v,j,z,G,Y){var Q;for(Q=0;Q<z;++Q){var X=v[j+Q],te=X>>>8,ae=X,ve=255&(ve=(ve=X>>>16)+((p.jd<<24>>24)*(te<<24>>24)>>>5));ae=255&(ae=(ae+=(p.hd<<24>>24)*(te<<24>>24)>>>5)+((p.ud<<24>>24)*(ve<<24>>24)>>>5)),G[Y+Q]=(4278255360&X)+(ve<<16)+ae}}function pt(p,v,j,z,G){I[v]=function(Y,Q,X,te,ae,ve,je,le,_e){for(te=je;te<le;++te)for(je=0;je<_e;++je)ae[ve++]=G(X[z(Y[Q++])])},I[p]=function(Y,Q,X,te,ae,ve,je){var le=8>>Y.b,_e=Y.Ea,Ee=Y.K[0],De=Y.w;if(8>le)for(Y=(1<<Y.b)-1,De=(1<<le)-1;Q<X;++Q){var Ne,Oe=0;for(Ne=0;Ne<_e;++Ne)Ne&Y||(Oe=z(te[ae++])),ve[je++]=G(Ee[Oe&De]),Oe>>=le}else I["VP8LMapColor"+j](te,ae,Ee,De,ve,je,Q,X,_e)}}function Ir(p,v,j,z,G){for(j=v+j;v<j;){var Y=p[v++];z[G++]=Y>>16&255,z[G++]=Y>>8&255,z[G++]=255&Y}}function ir(p,v,j,z,G){for(j=v+j;v<j;){var Y=p[v++];z[G++]=Y>>16&255,z[G++]=Y>>8&255,z[G++]=255&Y,z[G++]=Y>>24&255}}function ht(p,v,j,z,G){for(j=v+j;v<j;){var Y=(Q=p[v++])>>16&240|Q>>12&15,Q=240&Q|Q>>28&15;z[G++]=Y,z[G++]=Q}}function Ht(p,v,j,z,G){for(j=v+j;v<j;){var Y=(Q=p[v++])>>16&248|Q>>13&7,Q=Q>>5&224|Q>>3&31;z[G++]=Y,z[G++]=Q}}function sr(p,v,j,z,G){for(j=v+j;v<j;){var Y=p[v++];z[G++]=255&Y,z[G++]=Y>>8&255,z[G++]=Y>>16&255}}function It(p,v,j,z,G,Y){if(Y==0)for(j=v+j;v<j;)Fe(z,((Y=p[v++])[0]>>24|Y[1]>>8&65280|Y[2]<<8&16711680|Y[3]<<24)>>>0),G+=32;else n(z,G,p,v,j)}function tr(p,v){I[v][0]=I[p+"0"],I[v][1]=I[p+"1"],I[v][2]=I[p+"2"],I[v][3]=I[p+"3"],I[v][4]=I[p+"4"],I[v][5]=I[p+"5"],I[v][6]=I[p+"6"],I[v][7]=I[p+"7"],I[v][8]=I[p+"8"],I[v][9]=I[p+"9"],I[v][10]=I[p+"10"],I[v][11]=I[p+"11"],I[v][12]=I[p+"12"],I[v][13]=I[p+"13"],I[v][14]=I[p+"0"],I[v][15]=I[p+"0"]}function Wt(p){return p==$l||p==ul||p==Wc||p==$c}function Er(){this.eb=[],this.size=this.A=this.fb=0}function zr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function $t(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Er,this.f.kb=new zr,this.sd=null}function Mt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ar(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Hi(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function zn(p,v){var j=p.T,z=v.ba.f.RGBA,G=z.eb,Y=z.fb+p.ka*z.A,Q=eo[v.ba.S],X=p.y,te=p.O,ae=p.f,ve=p.N,je=p.ea,le=p.W,_e=v.cc,Ee=v.dc,De=v.Mc,Ne=v.Nc,Oe=p.ka,Me=p.ka+p.T,Ue=p.U,qe=Ue+1>>1;for(Oe==0?Q(X,te,null,null,ae,ve,je,le,ae,ve,je,le,G,Y,null,null,Ue):(Q(v.ec,v.fc,X,te,_e,Ee,De,Ne,ae,ve,je,le,G,Y-z.A,G,Y,Ue),++j);Oe+2<Me;Oe+=2)_e=ae,Ee=ve,De=je,Ne=le,ve+=p.Rc,le+=p.Rc,Y+=2*z.A,Q(X,(te+=2*p.fa)-p.fa,X,te,_e,Ee,De,Ne,ae,ve,je,le,G,Y-z.A,G,Y,Ue);return te+=p.fa,p.j+Me<p.o?(n(v.ec,v.fc,X,te,Ue),n(v.cc,v.dc,ae,ve,qe),n(v.Mc,v.Nc,je,le,qe),j--):1&Me||Q(X,te,null,null,ae,ve,je,le,ae,ve,je,le,G,Y+z.A,null,null,Ue),j}function Ro(p,v,j){var z=p.F,G=[p.J];if(z!=null){var Y=p.U,Q=v.ba.S,X=Q==Dc||Q==Wc;v=v.ba.f.RGBA;var te=[0],ae=p.ka;te[0]=p.T,p.Kb&&(ae==0?--te[0]:(--ae,G[0]-=p.width),p.j+p.ka+p.T==p.o&&(te[0]=p.o-p.j-ae));var ve=v.eb;ae=v.fb+ae*v.A,p=Oc(z,G[0],p.width,Y,te,ve,ae+(X?0:3),v.A),e(j==te),p&&Wt(Q)&&cl(ve,ae,X,Y,te,v.A)}return 0}function Vn(p){var v=p.ma,j=v.ba.S,z=11>j,G=j==Pa||j==Mc||j==Dc||j==Wr||j==12||Wt(j);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!Fl(v.Oa,p,G?11:12))return 0;if(G&&Wt(j)&&tt(),p.da)alert("todo:use_scaling");else{if(z){if(v.Ib=Hi,p.Kb){if(j=p.U+1>>1,v.memory=o(p.U+2*j),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+p.U,v.Mc=v.cc,v.Nc=v.dc+j,v.Ib=zn,tt()}}else alert("todo:EmitYUV");G&&(v.Jb=Ro,z&&Ie())}if(z&&!ui){for(p=0;256>p;++p)to[p]=89858*(p-128)+as>>ra,ro[p]=-22014*(p-128)+as,Gl[p]=-45773*(p-128),pl[p]=113618*(p-128)+as>>ra;for(p=Pr;p<Lr;++p)v=76283*(p-16)+as>>ra,Yu[p-Pr]=dn(v,255),ep[p-Pr]=dn(v+8>>4,15);ui=1}return 1}function Rt(p){var v=p.ma,j=p.U,z=p.T;return e(!(1&p.ka)),0>=j||0>=z?0:(j=v.Ib(p,v),v.Jb!=null&&v.Jb(p,v,j),v.Dc+=j,1)}function Ni(p){p.ma.memory=null}function gi(p,v,j,z){return ee(p,8)!=47?0:(v[0]=ee(p,14)+1,j[0]=ee(p,14)+1,z[0]=ee(p,1),ee(p,3)!=0?0:!p.h)}function On(p,v){if(4>p)return p+1;var j=p-2>>1;return(2+(1&p)<<j)+ee(v,j)+1}function Bi(p,v){return 120<v?v-120:1<=(j=((j=C0[v-1])>>4)*p+(8-(15&j)))?j:1;var j}function Cr(p,v,j){var z=re(j),G=p[v+=255&z].g-8;return 0<G&&(me(j,j.u+8),z=re(j),v+=p[v].value,v+=z&(1<<G)-1),me(j,j.u+p[v].g),p[v].value}function Vr(p,v,j){return j.g+=p.g,j.value+=p.value<<v>>>0,e(8>=j.g),p.g}function un(p,v,j){var z=p.xc;return e((v=z==0?0:p.vc[p.md*(j>>z)+(v>>z)])<p.Wb),p.Ya[v]}function Yn(p,v,j,z){var G=p.ab,Y=p.c*v,Q=p.C;v=Q+v;var X=j,te=z;for(z=p.Ta,j=p.Ua;0<G--;){var ae=p.gc[G],ve=Q,je=v,le=X,_e=te,Ee=(te=z,X=j,ae.Ea);switch(e(ve<je),e(je<=ae.nc),ae.hc){case 2:Sn(le,_e,(je-ve)*Ee,te,X);break;case 0:var De=ve,Ne=je,Oe=te,Me=X,Ue=(ft=ae).Ea;De==0&&(Zs(le,_e,null,null,1,Oe,Me),vr(le,_e+1,0,0,Ue-1,Oe,Me+1),_e+=Ue,Me+=Ue,++De);for(var qe=1<<ft.b,St=qe-1,ct=He(Ue,ft.b),Xt=ft.K,ft=ft.w+(De>>ft.b)*ct;De<Ne;){var hr=Xt,pn=ft,rr=1;for(js(le,_e,Oe,Me-Ue,1,Oe,Me);rr<Ue;){var ut=(rr&~St)+qe;ut>Ue&&(ut=Ue),(0,ol[hr[pn++]>>8&15])(le,_e+ +rr,Oe,Me+rr-Ue,ut-rr,Oe,Me+rr),rr=ut}_e+=Ue,Me+=Ue,++De&St||(ft+=ct)}je!=ae.nc&&n(te,X-Ee,te,X+(je-ve-1)*Ee,Ee);break;case 1:for(Ee=le,Ne=_e,Ue=(le=ae.Ea)-(Me=le&~(Oe=(_e=1<<ae.b)-1)),De=He(le,ae.b),qe=ae.K,ae=ae.w+(ve>>ae.b)*De;ve<je;){for(St=qe,ct=ae,Xt=new Jt,ft=Ne+Me,hr=Ne+le;Ne<ft;)Tt(St[ct++],Xt),Vl(Xt,Ee,Ne,_e,te,X),Ne+=_e,X+=_e;Ne<hr&&(Tt(St[ct++],Xt),Vl(Xt,Ee,Ne,Ue,te,X),Ne+=Ue,X+=Ue),++ve&Oe||(ae+=De)}break;case 3:if(le==te&&_e==X&&0<ae.b){for(Ne=te,le=Ee=X+(je-ve)*Ee-(Me=(je-ve)*He(ae.Ea,ae.b)),_e=te,Oe=X,De=[],Me=(Ue=Me)-1;0<=Me;--Me)De[Me]=_e[Oe+Me];for(Me=Ue-1;0<=Me;--Me)Ne[le+Me]=De[Me];nl(ae,ve,je,te,Ee,te,X)}else nl(ae,ve,je,le,_e,te,X)}X=z,te=j}te!=j&&n(z,j,X,te,Y)}function Yo(p,v){var j=p.V,z=p.Ba+p.c*p.C,G=v-p.C;if(e(v<=p.l.o),e(16>=G),0<G){var Y=p.l,Q=p.Ta,X=p.Ua,te=Y.width;if(Yn(p,G,j,z),G=X=[X],e((j=p.C)<(z=v)),e(Y.v<Y.va),z>Y.o&&(z=Y.o),j<Y.j){var ae=Y.j-j;j=Y.j,G[0]+=ae*te}if(j>=z?j=0:(G[0]+=4*Y.v,Y.ka=j-Y.j,Y.U=Y.va-Y.v,Y.T=z-j,j=1),j){if(X=X[0],11>(j=p.ca).S){var ve=j.f.RGBA,je=(z=j.S,G=Y.U,Y=Y.T,ae=ve.eb,ve.A),le=Y;for(ve=ve.fb+p.Ma*ve.A;0<le--;){var _e=Q,Ee=X,De=G,Ne=ae,Oe=ve;switch(z){case Hu:Ol(_e,Ee,De,Ne,Oe);break;case Pa:ea(_e,Ee,De,Ne,Oe);break;case $l:ea(_e,Ee,De,Ne,Oe),cl(Ne,Oe,0,De,1,0);break;case Jf:sl(_e,Ee,De,Ne,Oe);break;case Mc:It(_e,Ee,De,Ne,Oe,1);break;case ul:It(_e,Ee,De,Ne,Oe,1),cl(Ne,Oe,0,De,1,0);break;case Dc:It(_e,Ee,De,Ne,Oe,0);break;case Wc:It(_e,Ee,De,Ne,Oe,0),cl(Ne,Oe,1,De,1,0);break;case Wr:Ea(_e,Ee,De,Ne,Oe);break;case $c:Ea(_e,Ee,De,Ne,Oe),dh(Ne,Oe,De,1,0);break;case Gu:ja(_e,Ee,De,Ne,Oe);break;default:e(0)}X+=te,ve+=je}p.Ma+=Y}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=j.height)}}p.C=v,e(p.C<=p.i)}function Gi(p){var v;if(0<p.ua)return 0;for(v=0;v<p.Wb;++v){var j=p.Ya[v].G,z=p.Ya[v].H;if(0<j[1][z[1]+0].g||0<j[2][z[2]+0].g||0<j[3][z[3]+0].g)return 0}return 1}function Ki(p,v,j,z,G,Y){if(p.Z!=0){var Q=p.qd,X=p.rd;for(e(Ai[p.Z]!=null);v<j;++v)Ai[p.Z](Q,X,z,G,z,G,Y),Q=z,X=G,G+=Y;p.qd=Q,p.rd=X}}function bn(p,v){var j=p.l.ma,z=j.Z==0||j.Z==1?p.l.j:p.C;if(z=p.C<z?z:p.C,e(v<=p.l.o),v>z){var G=p.l.width,Y=j.ca,Q=j.tb+G*z,X=p.V,te=p.Ba+p.c*z,ae=p.gc;e(p.ab==1),e(ae[0].hc==3),os(ae[0],z,v,X,te,Y,Q),Ki(j,z,v,Y,Q,G)}p.C=p.Ma=v}function Li(p,v,j,z,G,Y,Q){var X=p.$/z,te=p.$%z,ae=p.m,ve=p.s,je=j+p.$,le=je;G=j+z*G;var _e=j+z*Y,Ee=280+ve.ua,De=p.Pb?X:16777216,Ne=0<ve.ua?ve.Wa:null,Oe=ve.wc,Me=je<_e?un(ve,te,X):null;e(p.C<Y),e(_e<=G);var Ue=!1;e:for(;;){for(;Ue||je<_e;){var qe=0;if(X>=De){var St=je-j;e((De=p).Pb),De.wd=De.m,De.xd=St,0<De.s.ua&&Nt(De.s.Wa,De.s.vb),De=X+Ju}if(te&Oe||(Me=un(ve,te,X)),e(Me!=null),Me.Qb&&(v[je]=Me.qb,Ue=!0),!Ue)if(Se(ae),Me.jc){qe=ae,St=v;var ct=je,Xt=Me.pd[re(qe)&Mo-1];e(Me.jc),256>Xt.g?(me(qe,qe.u+Xt.g),St[ct]=Xt.value,qe=0):(me(qe,qe.u+Xt.g-256),e(256<=Xt.value),qe=Xt.value),qe==0&&(Ue=!0)}else qe=Cr(Me.G[0],Me.H[0],ae);if(ae.h)break;if(Ue||256>qe){if(!Ue)if(Me.nd)v[je]=(Me.qb|qe<<8)>>>0;else{if(Se(ae),Ue=Cr(Me.G[1],Me.H[1],ae),Se(ae),St=Cr(Me.G[2],Me.H[2],ae),ct=Cr(Me.G[3],Me.H[3],ae),ae.h)break;v[je]=(ct<<24|Ue<<16|qe<<8|St)>>>0}if(Ue=!1,++je,++te>=z&&(te=0,++X,Q!=null&&X<=Y&&!(X%16)&&Q(p,X),Ne!=null))for(;le<je;)qe=v[le++],Ne.X[(506832829*qe&4294967295)>>>Ne.Mb]=qe}else if(280>qe){if(qe=On(qe-256,ae),St=Cr(Me.G[4],Me.H[4],ae),Se(ae),St=Bi(z,St=On(St,ae)),ae.h)break;if(je-j<St||G-je<qe)break e;for(ct=0;ct<qe;++ct)v[je+ct]=v[je+ct-St];for(je+=qe,te+=qe;te>=z;)te-=z,++X,Q!=null&&X<=Y&&!(X%16)&&Q(p,X);if(e(je<=G),te&Oe&&(Me=un(ve,te,X)),Ne!=null)for(;le<je;)qe=v[le++],Ne.X[(506832829*qe&4294967295)>>>Ne.Mb]=qe}else{if(!(qe<Ee))break e;for(Ue=qe-280,e(Ne!=null);le<je;)qe=v[le++],Ne.X[(506832829*qe&4294967295)>>>Ne.Mb]=qe;qe=je,e(!(Ue>>>(St=Ne).Xa)),v[qe]=St.X[Ue],Ue=!0}Ue||e(ae.h==he(ae))}if(p.Pb&&ae.h&&je<G)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&Nt(p.s.vb,p.s.Wa);else{if(ae.h)break e;Q!=null&&Q(p,X>Y?Y:X),p.a=0,p.$=je-j}return 1}return p.a=3,0}function Fi(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var v=p.Wa;v!=null&&(v.X=null),p.vb=null,e(p!=null)}function bs(){var p=new mt;return p==null?null:(p.a=0,p.xb=ql,tr("Predictor","VP8LPredictors"),tr("Predictor","VP8LPredictors_C"),tr("PredictorAdd","VP8LPredictorsAdd"),tr("PredictorAdd","VP8LPredictorsAdd_C"),Sn=Ot,Vl=jt,Ol=Ir,ea=ir,Ea=ht,ja=Ht,sl=sr,I.VP8LMapColor32b=Rs,I.VP8LMapColor8b=il,p)}function mo(p,v,j,z,G){var Y=1,Q=[p],X=[v],te=z.m,ae=z.s,ve=null,je=0;e:for(;;){if(j)for(;Y&&ee(te,1);){var le=Q,_e=X,Ee=z,De=1,Ne=Ee.m,Oe=Ee.gc[Ee.ab],Me=ee(Ne,2);if(Ee.Oc&1<<Me)Y=0;else{switch(Ee.Oc|=1<<Me,Oe.hc=Me,Oe.Ea=le[0],Oe.nc=_e[0],Oe.K=[null],++Ee.ab,e(4>=Ee.ab),Me){case 0:case 1:Oe.b=ee(Ne,3)+2,De=mo(He(Oe.Ea,Oe.b),He(Oe.nc,Oe.b),0,Ee,Oe.K),Oe.K=Oe.K[0];break;case 3:var Ue,qe=ee(Ne,8)+1,St=16<qe?0:4<qe?1:2<qe?2:3;if(le[0]=He(Oe.Ea,St),Oe.b=St,Ue=De=mo(qe,1,0,Ee,Oe.K)){var ct,Xt=qe,ft=Oe,hr=1<<(8>>ft.b),pn=o(hr);if(pn==null)Ue=0;else{var rr=ft.K[0],ut=ft.w;for(pn[0]=ft.K[0][0],ct=1;ct<1*Xt;++ct)pn[ct]=ot(rr[ut+ct],pn[ct-1]);for(;ct<4*hr;++ct)pn[ct]=0;ft.K[0]=null,ft.K[0]=pn,Ue=1}}De=Ue;break;case 2:break;default:e(0)}Y=De}}if(Q=Q[0],X=X[0],Y&&ee(te,1)&&!(Y=1<=(je=ee(te,4))&&11>=je)){z.a=3;break e}var nt;if(nt=Y)t:{var _n,Gt,cr,Zr=z,Zn=Q,Rn=X,an=je,Un=j,ei=Zr.m,nn=Zr.s,pr=[null],_r=1,on=0,Tr=Qf[an];r:for(;;){if(Un&&ee(ei,1)){var mn=ee(ei,3)+2,gn=He(Zn,mn),$r=He(Rn,mn),Ci=gn*$r;if(!mo(gn,$r,0,Zr,pr))break r;for(pr=pr[0],nn.xc=mn,_n=0;_n<Ci;++_n){var Fr=pr[_n]>>8&65535;pr[_n]=Fr,Fr>=_r&&(_r=Fr+1)}}if(ei.h)break r;for(Gt=0;5>Gt;++Gt){var Ur=dl[Gt];!Gt&&0<an&&(Ur+=1<<an),on<Ur&&(on=Ur)}var Pn=l(_r*Tr,N),di=_r,no=l(di,q);if(no==null)var Tn=null;else e(65536>=di),Tn=no;var An=o(on);if(Tn==null||An==null||Pn==null){Zr.a=1;break r}var ki=Pn;for(_n=cr=0;_n<_r;++_n){var qr=Tn[_n],Ii=qr.G,$o=qr.H,ls=0,ti=1,Cn=0;for(Gt=0;5>Gt;++Gt){Ur=dl[Gt],Ii[Gt]=ki,$o[Gt]=cr,!Gt&&0<an&&(Ur+=1<<an);i:{var La,ia=Ur,Kl=Zr,Bs=An,rp=ki,_h=cr,tn=0,cs=Kl.m,Th=ee(cs,1);if(i(Bs,0,0,ia),Th){var Ah=ee(cs,1)+1,Qu=ee(cs,1),Xu=ee(cs,Qu==0?1:8);Bs[Xu]=1,Ah==2&&(Bs[Xu=ee(cs,8)]=1);var Ls=1}else{var sn=o(19),Nn=ee(cs,4)+4;if(19<Nn){Kl.a=3;var kn=0;break i}for(La=0;La<Nn;++La)sn[A0[La]]=ee(cs,3);var Jl=void 0,oa=void 0,Yl=Kl,R0=sn,qn=ia,Zu=Bs,Kc=0,Fs=Yl.m,us=8,To=l(128,N);n:for(;w(To,0,7,R0,19);){if(ee(Fs,1)){var Jc=2+2*ee(Fs,3);if((Jl=2+ee(Fs,Jc))>qn)break n}else Jl=qn;for(oa=0;oa<qn&&Jl--;){Se(Fs);var ed=To[0+(127&re(Fs))];me(Fs,Fs.u+ed.g);var Fa=ed.value;if(16>Fa)Zu[oa++]=Fa,Fa!=0&&(us=Fa);else{var np=Fa==16,Ch=Fa-16,ip=Ku[Ch],kh=ee(Fs,Uc[Ch])+ip;if(oa+kh>qn)break n;for(var op=np?us:0;0<kh--;)Zu[oa++]=op}}Kc=1;break n}Kc||(Yl.a=3),Ls=Kc}(Ls=Ls&&!cs.h)&&(tn=w(rp,_h,8,Bs,ia)),Ls&&tn!=0?kn=tn:(Kl.a=3,kn=0)}if(kn==0)break r;if(ti&&Yf[Gt]==1&&(ti=ki[cr].g==0),ls+=ki[cr].g,cr+=kn,3>=Gt){var Ql,td=An[0];for(Ql=1;Ql<Ur;++Ql)An[Ql]>td&&(td=An[Ql]);Cn+=td}}if(qr.nd=ti,qr.Qb=0,ti&&(qr.qb=(Ii[3][$o[3]+0].value<<24|Ii[1][$o[1]+0].value<<16|Ii[2][$o[2]+0].value)>>>0,ls==0&&256>Ii[0][$o[0]+0].value&&(qr.Qb=1,qr.qb+=Ii[0][$o[0]+0].value<<8)),qr.jc=!qr.Qb&&6>Cn,qr.jc){var Yc,Ao=qr;for(Yc=0;Yc<Mo;++Yc){var sa=Yc,ds=Ao.pd[sa],gl=Ao.G[0][Ao.H[0]+sa];256<=gl.value?(ds.g=gl.g+256,ds.value=gl.value):(ds.g=0,ds.value=0,sa>>=Vr(gl,8,ds),sa>>=Vr(Ao.G[1][Ao.H[1]+sa],16,ds),sa>>=Vr(Ao.G[2][Ao.H[2]+sa],0,ds),Vr(Ao.G[3][Ao.H[3]+sa],24,ds))}}}nn.vc=pr,nn.Wb=_r,nn.Ya=Tn,nn.yc=Pn,nt=1;break t}nt=0}if(!(Y=nt)){z.a=3;break e}if(0<je){if(ae.ua=1<<je,!de(ae.Wa,je)){z.a=1,Y=0;break e}}else ae.ua=0;var rd=z,nd=Q,sp=X,id=rd.s,od=id.xc;if(rd.c=nd,rd.i=sp,id.md=He(nd,od),id.wc=od==0?-1:(1<<od)-1,j){z.xb=Ns;break e}if((ve=o(Q*X))==null){z.a=1,Y=0;break e}Y=(Y=Li(z,ve,0,Q,X,X,null))&&!te.h;break e}return Y?(G!=null?G[0]=ve:(e(ve==null),e(j)),z.$=0,j||Fi(ae)):Fi(ae),Y}function go(p,v){var j=p.c*p.i,z=j+v+16*v;return e(p.c<=v),p.V=o(z),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+j+v,1)}function ws(p,v){var j=p.C,z=v-j,G=p.V,Y=p.Ba+p.c*j;for(e(v<=p.l.o);0<z;){var Q=16<z?16:z,X=p.l.ma,te=p.l.width,ae=te*Q,ve=X.ca,je=X.tb+te*j,le=p.Ta,_e=p.Ua;Yn(p,Q,G,Y),hh(le,_e,ve,je,ae),Ki(X,j,j+Q,ve,je,te),z-=Q,G+=Q*p.c,j+=Q}e(j==v),p.C=p.Ma=v}function Qo(){this.ub=this.yd=this.td=this.Rb=0}function Po(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Xo(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function jr(){this.Yb=(function(){var p=[];return(function v(j,z,G){for(var Y=G[z],Q=0;Q<Y&&(j.push(G.length>z+1?[]:0),!(G.length<z+1));Q++)v(j[Q],z+1,G)})(p,0,[3,11]),p})()}function Bl(){this.jb=o(3),this.Wc=u([4,8],jr),this.Xc=u([4,17],jr)}function Us(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function yi(){this.ld=this.La=this.dd=this.tc=0}function Zo(){this.Na=this.la=0}function wa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ss(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function _s(){this.uc=this.M=this.Nb=0,this.wa=Array(new yi),this.Y=0,this.ya=Array(new Ss),this.aa=0,this.l=new Qn}function xi(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Ya(){this.cb=this.a=0,this.sc="",this.m=new W,this.Od=new Qo,this.Kc=new Po,this.ed=new Us,this.Qa=new Xo,this.Ic=this.$c=this.Aa=0,this.D=new _s,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,W),this.ia=0,this.pb=l(4,wa),this.Pa=new Bl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new xi),this.Hd=0,this.rb=Array(new Zo),this.sb=0,this.wa=Array(new yi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ss),this.L=this.aa=0,this.gd=u([4,2],yi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Qn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function No(){var p=new Ya;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,hl||(hl=vi)),p}function wr(p,v,j){return p.a==0&&(p.a=v,p.sc=j,p.cb=0),0}function Ts(p,v,j){return 3<=j&&p[v+0]==157&&p[v+1]==1&&p[v+2]==42}function yo(p,v){if(p==null)return 0;if(p.a=0,p.sc="OK",v==null)return wr(p,2,"null VP8Io passed to VP8GetHeaders()");var j=v.data,z=v.w,G=v.ha;if(4>G)return wr(p,7,"Truncated header.");var Y=j[z+0]|j[z+1]<<8|j[z+2]<<16,Q=p.Od;if(Q.Rb=!(1&Y),Q.td=Y>>1&7,Q.yd=Y>>4&1,Q.ub=Y>>5,3<Q.td)return wr(p,3,"Incorrect keyframe parameters.");if(!Q.yd)return wr(p,4,"Frame not displayable.");z+=3,G-=3;var X=p.Kc;if(Q.Rb){if(7>G)return wr(p,7,"cannot parse picture header");if(!Ts(j,z,G))return wr(p,3,"Bad code word");X.c=16383&(j[z+4]<<8|j[z+3]),X.Td=j[z+4]>>6,X.i=16383&(j[z+6]<<8|j[z+5]),X.Ud=j[z+6]>>6,z+=7,G-=7,p.za=X.c+15>>4,p.Ub=X.i+15>>4,v.width=X.c,v.height=X.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,i((Y=p.Pa).jb,0,255,Y.jb.length),e((Y=p.Qa)!=null),Y.Cb=0,Y.Bb=0,Y.Fb=1,i(Y.Zb,0,0,Y.Zb.length),i(Y.Lb,0,0,Y.Lb)}if(Q.ub>G)return wr(p,7,"bad partition length");ne(Y=p.m,j,z,Q.ub),z+=Q.ub,G-=Q.ub,Q.Rb&&(X.Ld=Ce(Y),X.Kd=Ce(Y)),X=p.Qa;var te,ae=p.Pa;if(e(Y!=null),e(X!=null),X.Cb=Ce(Y),X.Cb){if(X.Bb=Ce(Y),Ce(Y)){for(X.Fb=Ce(Y),te=0;4>te;++te)X.Zb[te]=Ce(Y)?oe(Y,7):0;for(te=0;4>te;++te)X.Lb[te]=Ce(Y)?oe(Y,6):0}if(X.Bb)for(te=0;3>te;++te)ae.jb[te]=Ce(Y)?se(Y,8):255}else X.Bb=0;if(Y.Ka)return wr(p,3,"cannot parse segment header");if((X=p.ed).zd=Ce(Y),X.Tb=se(Y,6),X.wb=se(Y,3),X.Pc=Ce(Y),X.Pc&&Ce(Y)){for(ae=0;4>ae;++ae)Ce(Y)&&(X.vd[ae]=oe(Y,6));for(ae=0;4>ae;++ae)Ce(Y)&&(X.od[ae]=oe(Y,6))}if(p.L=X.Tb==0?0:X.zd?1:2,Y.Ka)return wr(p,3,"cannot parse filter header");var ve=G;if(G=te=z,z=te+ve,X=ve,p.Xb=(1<<se(p.m,2))-1,ve<3*(ae=p.Xb))j=7;else{for(te+=3*ae,X-=3*ae,ve=0;ve<ae;++ve){var je=j[G+0]|j[G+1]<<8|j[G+2]<<16;je>X&&(je=X),ne(p.Jc[+ve],j,te,je),te+=je,X-=je,G+=3}ne(p.Jc[+ae],j,te,X),j=te<z?0:5}if(j!=0)return wr(p,j,"cannot parse partitions");for(j=se(te=p.m,7),G=Ce(te)?oe(te,4):0,z=Ce(te)?oe(te,4):0,X=Ce(te)?oe(te,4):0,ae=Ce(te)?oe(te,4):0,te=Ce(te)?oe(te,4):0,ve=p.Qa,je=0;4>je;++je){if(ve.Cb){var le=ve.Zb[je];ve.Fb||(le+=j)}else{if(0<je){p.pb[je]=p.pb[0];continue}le=j}var _e=p.pb[je];_e.Sc[0]=Ul[dn(le+G,127)],_e.Sc[1]=qc[dn(le+0,127)],_e.Eb[0]=2*Ul[dn(le+z,127)],_e.Eb[1]=101581*qc[dn(le+X,127)]>>16,8>_e.Eb[1]&&(_e.Eb[1]=8),_e.Qc[0]=Ul[dn(le+ae,117)],_e.Qc[1]=qc[dn(le+te,127)],_e.lc=le+te}if(!Q.Rb)return wr(p,4,"Not a key frame.");for(Ce(Y),Q=p.Pa,j=0;4>j;++j){for(G=0;8>G;++G)for(z=0;3>z;++z)for(X=0;11>X;++X)ae=ge(Y,I0[j][G][z][X])?se(Y,8):Zf[j][G][z][X],Q.Wc[j][G].Yb[z][X]=ae;for(G=0;17>G;++G)Q.Xc[j][G]=Q.Wc[j][bh[G]]}return p.kc=Ce(Y),p.kc&&(p.Bd=se(Y,8)),p.cb=1}function vi(p,v,j,z,G,Y,Q){var X=v[G].Yb[j];for(j=0;16>G;++G){if(!ge(p,X[j+0]))return G;for(;!ge(p,X[j+1]);)if(X=v[++G].Yb[0],j=0,G==16)return 16;var te=v[G+1].Yb;if(ge(p,X[j+2])){var ae=p,ve=0;if(ge(ae,(le=X)[(je=j)+3]))if(ge(ae,le[je+6])){for(X=0,je=2*(ve=ge(ae,le[je+8]))+(le=ge(ae,le[je+9+ve])),ve=0,le=xh[je];le[X];++X)ve+=ve+ge(ae,le[X]);ve+=3+(8<<je)}else ge(ae,le[je+7])?(ve=7+2*ge(ae,165),ve+=ge(ae,145)):ve=5+ge(ae,159);else ve=ge(ae,le[je+4])?3+ge(ae,le[je+5]):2;X=te[2]}else ve=1,X=te[1];te=Q+vh[G],0>(ae=p).b&&ke(ae);var je,le=ae.b,_e=(je=ae.Ca>>1)-(ae.I>>le)>>31;--ae.b,ae.Ca+=_e,ae.Ca|=1,ae.I-=(je+1&_e)<<le,Y[te]=((ve^_e)-_e)*z[(0<G)+0]}return 16}function lr(p){var v=p.rb[p.sb-1];v.la=0,v.Na=0,i(p.zc,0,0,p.zc.length),p.ja=0}function Mn(p,v,j,z,G){G=p[v+j+32*z]+(G>>3),p[v+j+32*z]=-256&G?0>G?0:255:G}function xo(p,v,j,z,G,Y){Mn(p,v,0,j,z+G),Mn(p,v,1,j,z+Y),Mn(p,v,2,j,z-Y),Mn(p,v,3,j,z-G)}function Or(p){return(20091*p>>16)+p}function qs(p,v,j,z){var G,Y=0,Q=o(16);for(G=0;4>G;++G){var X=p[v+0]+p[v+8],te=p[v+0]-p[v+8],ae=(35468*p[v+4]>>16)-Or(p[v+12]),ve=Or(p[v+4])+(35468*p[v+12]>>16);Q[Y+0]=X+ve,Q[Y+1]=te+ae,Q[Y+2]=te-ae,Q[Y+3]=X-ve,Y+=4,v++}for(G=Y=0;4>G;++G)X=(p=Q[Y+0]+4)+Q[Y+8],te=p-Q[Y+8],ae=(35468*Q[Y+4]>>16)-Or(Q[Y+12]),Mn(j,z,0,0,X+(ve=Or(Q[Y+4])+(35468*Q[Y+12]>>16))),Mn(j,z,1,0,te+ae),Mn(j,z,2,0,te-ae),Mn(j,z,3,0,X-ve),Y++,z+=32}function Qa(p,v,j,z){var G=p[v+0]+4,Y=35468*p[v+4]>>16,Q=Or(p[v+4]),X=35468*p[v+1]>>16;xo(j,z,0,G+Q,p=Or(p[v+1]),X),xo(j,z,1,G+Y,p,X),xo(j,z,2,G-Y,p,X),xo(j,z,3,G-Q,p,X)}function Xa(p,v,j,z,G){qs(p,v,j,z),G&&qs(p,v+16,j,z+4)}function Hs(p,v,j,z){al(p,v+0,j,z,1),al(p,v+32,j,z+128,1)}function Bo(p,v,j,z){var G;for(p=p[v+0]+4,G=0;4>G;++G)for(v=0;4>v;++v)Mn(j,z,v,G,p)}function Sa(p,v,j,z){p[v+0]&&Sr(p,v+0,j,z),p[v+16]&&Sr(p,v+16,j,z+4),p[v+32]&&Sr(p,v+32,j,z+128),p[v+48]&&Sr(p,v+48,j,z+128+4)}function or(p,v,j,z){var G,Y=o(16);for(G=0;4>G;++G){var Q=p[v+0+G]+p[v+12+G],X=p[v+4+G]+p[v+8+G],te=p[v+4+G]-p[v+8+G],ae=p[v+0+G]-p[v+12+G];Y[0+G]=Q+X,Y[8+G]=Q-X,Y[4+G]=ae+te,Y[12+G]=ae-te}for(G=0;4>G;++G)Q=(p=Y[0+4*G]+3)+Y[3+4*G],X=Y[1+4*G]+Y[2+4*G],te=Y[1+4*G]-Y[2+4*G],ae=p-Y[3+4*G],j[z+0]=Q+X>>3,j[z+16]=ae+te>>3,j[z+32]=Q-X>>3,j[z+48]=ae-te>>3,z+=64}function li(p,v,j){var z,G=v-32,Y=Mi,Q=255-p[G-1];for(z=0;z<j;++z){var X,te=Y,ae=Q+p[v-1];for(X=0;X<j;++X)p[v+X]=te[ae+p[G+X]];v+=32}}function Gs(p,v){li(p,v,4)}function _a(p,v){li(p,v,8)}function Za(p,v){li(p,v,16)}function el(p,v){var j;for(j=0;16>j;++j)n(p,v+32*j,p,v-32,16)}function Ks(p,v){var j;for(j=16;0<j;--j)i(p,v,p[v-1],16),v+=32}function bi(p,v,j){var z;for(z=0;16>z;++z)i(v,j+32*z,p,16)}function vo(p,v){var j,z=16;for(j=0;16>j;++j)z+=p[v-1+32*j]+p[v+j-32];bi(z>>5,p,v)}function Lo(p,v){var j,z=8;for(j=0;16>j;++j)z+=p[v-1+32*j];bi(z>>4,p,v)}function wi(p,v){var j,z=8;for(j=0;16>j;++j)z+=p[v+j-32];bi(z>>4,p,v)}function wn(p,v){bi(128,p,v)}function Bt(p,v,j){return p+2*v+j+2>>2}function es(p,v){var j,z=v-32;for(z=new Uint8Array([Bt(p[z-1],p[z+0],p[z+1]),Bt(p[z+0],p[z+1],p[z+2]),Bt(p[z+1],p[z+2],p[z+3]),Bt(p[z+2],p[z+3],p[z+4])]),j=0;4>j;++j)n(p,v+32*j,z,0,z.length)}function zi(p,v){var j=p[v-1],z=p[v-1+32],G=p[v-1+64],Y=p[v-1+96];Fe(p,v+0,16843009*Bt(p[v-1-32],j,z)),Fe(p,v+32,16843009*Bt(j,z,G)),Fe(p,v+64,16843009*Bt(z,G,Y)),Fe(p,v+96,16843009*Bt(G,Y,Y))}function Ll(p,v){var j,z=4;for(j=0;4>j;++j)z+=p[v+j-32]+p[v-1+32*j];for(z>>=3,j=0;4>j;++j)i(p,v+32*j,z,4)}function As(p,v){var j=p[v-1+0],z=p[v-1+32],G=p[v-1+64],Y=p[v-1-32],Q=p[v+0-32],X=p[v+1-32],te=p[v+2-32],ae=p[v+3-32];p[v+0+96]=Bt(z,G,p[v-1+96]),p[v+1+96]=p[v+0+64]=Bt(j,z,G),p[v+2+96]=p[v+1+64]=p[v+0+32]=Bt(Y,j,z),p[v+3+96]=p[v+2+64]=p[v+1+32]=p[v+0+0]=Bt(Q,Y,j),p[v+3+64]=p[v+2+32]=p[v+1+0]=Bt(X,Q,Y),p[v+3+32]=p[v+2+0]=Bt(te,X,Q),p[v+3+0]=Bt(ae,te,X)}function Dn(p,v){var j=p[v+1-32],z=p[v+2-32],G=p[v+3-32],Y=p[v+4-32],Q=p[v+5-32],X=p[v+6-32],te=p[v+7-32];p[v+0+0]=Bt(p[v+0-32],j,z),p[v+1+0]=p[v+0+32]=Bt(j,z,G),p[v+2+0]=p[v+1+32]=p[v+0+64]=Bt(z,G,Y),p[v+3+0]=p[v+2+32]=p[v+1+64]=p[v+0+96]=Bt(G,Y,Q),p[v+3+32]=p[v+2+64]=p[v+1+96]=Bt(Y,Q,X),p[v+3+64]=p[v+2+96]=Bt(Q,X,te),p[v+3+96]=Bt(X,te,te)}function Fo(p,v){var j=p[v-1+0],z=p[v-1+32],G=p[v-1+64],Y=p[v-1-32],Q=p[v+0-32],X=p[v+1-32],te=p[v+2-32],ae=p[v+3-32];p[v+0+0]=p[v+1+64]=Y+Q+1>>1,p[v+1+0]=p[v+2+64]=Q+X+1>>1,p[v+2+0]=p[v+3+64]=X+te+1>>1,p[v+3+0]=te+ae+1>>1,p[v+0+96]=Bt(G,z,j),p[v+0+64]=Bt(z,j,Y),p[v+0+32]=p[v+1+96]=Bt(j,Y,Q),p[v+1+32]=p[v+2+96]=Bt(Y,Q,X),p[v+2+32]=p[v+3+96]=Bt(Q,X,te),p[v+3+32]=Bt(X,te,ae)}function Ta(p,v){var j=p[v+0-32],z=p[v+1-32],G=p[v+2-32],Y=p[v+3-32],Q=p[v+4-32],X=p[v+5-32],te=p[v+6-32],ae=p[v+7-32];p[v+0+0]=j+z+1>>1,p[v+1+0]=p[v+0+64]=z+G+1>>1,p[v+2+0]=p[v+1+64]=G+Y+1>>1,p[v+3+0]=p[v+2+64]=Y+Q+1>>1,p[v+0+32]=Bt(j,z,G),p[v+1+32]=p[v+0+96]=Bt(z,G,Y),p[v+2+32]=p[v+1+96]=Bt(G,Y,Q),p[v+3+32]=p[v+2+96]=Bt(Y,Q,X),p[v+3+64]=Bt(Q,X,te),p[v+3+96]=Bt(X,te,ae)}function Rr(p,v){var j=p[v-1+0],z=p[v-1+32],G=p[v-1+64],Y=p[v-1+96];p[v+0+0]=j+z+1>>1,p[v+2+0]=p[v+0+32]=z+G+1>>1,p[v+2+32]=p[v+0+64]=G+Y+1>>1,p[v+1+0]=Bt(j,z,G),p[v+3+0]=p[v+1+32]=Bt(z,G,Y),p[v+3+32]=p[v+1+64]=Bt(G,Y,Y),p[v+3+64]=p[v+2+64]=p[v+0+96]=p[v+1+96]=p[v+2+96]=p[v+3+96]=Y}function Js(p,v){var j=p[v-1+0],z=p[v-1+32],G=p[v-1+64],Y=p[v-1+96],Q=p[v-1-32],X=p[v+0-32],te=p[v+1-32],ae=p[v+2-32];p[v+0+0]=p[v+2+32]=j+Q+1>>1,p[v+0+32]=p[v+2+64]=z+j+1>>1,p[v+0+64]=p[v+2+96]=G+z+1>>1,p[v+0+96]=Y+G+1>>1,p[v+3+0]=Bt(X,te,ae),p[v+2+0]=Bt(Q,X,te),p[v+1+0]=p[v+3+32]=Bt(j,Q,X),p[v+1+32]=p[v+3+64]=Bt(z,j,Q),p[v+1+64]=p[v+3+96]=Bt(G,z,j),p[v+1+96]=Bt(Y,G,z)}function tl(p,v){var j;for(j=0;8>j;++j)n(p,v+32*j,p,v-32,8)}function Ji(p,v){var j;for(j=0;8>j;++j)i(p,v,p[v-1],8),v+=32}function bo(p,v,j){var z;for(z=0;8>z;++z)i(v,j+32*z,p,8)}function Yi(p,v){var j,z=8;for(j=0;8>j;++j)z+=p[v+j-32]+p[v-1+32*j];bo(z>>4,p,v)}function ts(p,v){var j,z=4;for(j=0;8>j;++j)z+=p[v+j-32];bo(z>>3,p,v)}function Qi(p,v){var j,z=4;for(j=0;8>j;++j)z+=p[v-1+32*j];bo(z>>3,p,v)}function Aa(p,v){bo(128,p,v)}function rs(p,v,j){var z=p[v-j],G=p[v+0],Y=3*(G-z)+Ps[1020+p[v-2*j]-p[v+j]],Q=Wl[112+(Y+4>>3)];p[v-j]=Mi[255+z+Wl[112+(Y+3>>3)]],p[v+0]=Mi[255+G-Q]}function Si(p,v,j,z){var G=p[v+0],Y=p[v+j];return Do[255+p[v-2*j]-p[v-j]]>z||Do[255+Y-G]>z}function Cs(p,v,j,z){return 4*Do[255+p[v-j]-p[v+0]]+Do[255+p[v-2*j]-p[v+j]]<=z}function ns(p,v,j,z,G){var Y=p[v-3*j],Q=p[v-2*j],X=p[v-j],te=p[v+0],ae=p[v+j],ve=p[v+2*j],je=p[v+3*j];return 4*Do[255+X-te]+Do[255+Q-ae]>z?0:Do[255+p[v-4*j]-Y]<=G&&Do[255+Y-Q]<=G&&Do[255+Q-X]<=G&&Do[255+je-ve]<=G&&Do[255+ve-ae]<=G&&Do[255+ae-te]<=G}function ci(p,v,j,z){var G=2*z+1;for(z=0;16>z;++z)Cs(p,v+z,j,G)&&rs(p,v+z,j)}function zo(p,v,j,z){var G=2*z+1;for(z=0;16>z;++z)Cs(p,v+z*j,1,G)&&rs(p,v+z*j,1)}function Vo(p,v,j,z){var G;for(G=3;0<G;--G)ci(p,v+=4*j,j,z)}function rl(p,v,j,z){var G;for(G=3;0<G;--G)zo(p,v+=4,j,z)}function Vi(p,v,j,z,G,Y,Q,X){for(Y=2*Y+1;0<G--;){if(ns(p,v,j,Y,Q))if(Si(p,v,j,X))rs(p,v,j);else{var te=p,ae=v,ve=j,je=te[ae-2*ve],le=te[ae-ve],_e=te[ae+0],Ee=te[ae+ve],De=te[ae+2*ve],Ne=27*(Me=Ps[1020+3*(_e-le)+Ps[1020+je-Ee]])+63>>7,Oe=18*Me+63>>7,Me=9*Me+63>>7;te[ae-3*ve]=Mi[255+te[ae-3*ve]+Me],te[ae-2*ve]=Mi[255+je+Oe],te[ae-ve]=Mi[255+le+Ne],te[ae+0]=Mi[255+_e-Ne],te[ae+ve]=Mi[255+Ee-Oe],te[ae+2*ve]=Mi[255+De-Me]}v+=z}}function Xn(p,v,j,z,G,Y,Q,X){for(Y=2*Y+1;0<G--;){if(ns(p,v,j,Y,Q))if(Si(p,v,j,X))rs(p,v,j);else{var te=p,ae=v,ve=j,je=te[ae-ve],le=te[ae+0],_e=te[ae+ve],Ee=Wl[112+(4+(De=3*(le-je))>>3)],De=Wl[112+(De+3>>3)],Ne=Ee+1>>1;te[ae-2*ve]=Mi[255+te[ae-2*ve]+Ne],te[ae-ve]=Mi[255+je+De],te[ae+0]=Mi[255+le-Ee],te[ae+ve]=Mi[255+_e-Ne]}v+=z}}function Ca(p,v,j,z,G,Y){Vi(p,v,j,1,16,z,G,Y)}function Wn(p,v,j,z,G,Y){Vi(p,v,1,j,16,z,G,Y)}function _i(p,v,j,z,G,Y){var Q;for(Q=3;0<Q;--Q)Xn(p,v+=4*j,j,1,16,z,G,Y)}function ks(p,v,j,z,G,Y){var Q;for(Q=3;0<Q;--Q)Xn(p,v+=4,1,j,16,z,G,Y)}function _(p,v,j,z,G,Y,Q,X){Vi(p,v,G,1,8,Y,Q,X),Vi(j,z,G,1,8,Y,Q,X)}function H(p,v,j,z,G,Y,Q,X){Vi(p,v,1,G,8,Y,Q,X),Vi(j,z,1,G,8,Y,Q,X)}function ce(p,v,j,z,G,Y,Q,X){Xn(p,v+4*G,G,1,8,Y,Q,X),Xn(j,z+4*G,G,1,8,Y,Q,X)}function ye(p,v,j,z,G,Y,Q,X){Xn(p,v+4,1,G,8,Y,Q,X),Xn(j,z+4,1,G,8,Y,Q,X)}function Ae(){this.ba=new $t,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ar,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function We(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ge(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function lt(){this.ua=0,this.Wa=new Et,this.vb=new Et,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new N}function mt(){this.xb=this.a=0,this.l=new Qn,this.ca=new $t,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new J,this.Pb=0,this.wd=new J,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new lt,this.ab=0,this.gc=l(4,Ge),this.Oc=0}function Lt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Qn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function vt(p,v,j,z,G,Y,Q){for(p=p==null?0:p[v+0],v=0;v<Q;++v)G[Y+v]=p+j[z+v]&255,p=G[Y+v]}function gr(p,v,j,z,G,Y,Q){var X;if(p==null)vt(null,null,j,z,G,Y,Q);else for(X=0;X<Q;++X)G[Y+X]=p[v+X]+j[z+X]&255}function Qr(p,v,j,z,G,Y,Q){if(p==null)vt(null,null,j,z,G,Y,Q);else{var X,te=p[v+0],ae=te,ve=te;for(X=0;X<Q;++X)ae=ve+(te=p[v+X])-ae,ve=j[z+X]+(-256&ae?0>ae?0:255:ae)&255,ae=te,G[Y+X]=ve}}function Mr(p,v,j,z){var G=v.width,Y=v.o;if(e(p!=null&&v!=null),0>j||0>=z||j+z>Y)return null;if(!p.Cc){if(p.ga==null){var Q;if(p.ga=new Lt,(Q=p.ga==null)||(Q=v.width*v.o,e(p.Gb.length==0),p.Gb=o(Q),p.Uc=0,p.Gb==null?Q=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,Q=1),Q=!Q),!Q){Q=p.ga;var X=p.Fa,te=p.P,ae=p.qc,ve=p.mb,je=p.nb,le=te+1,_e=ae-1,Ee=Q.l;if(e(X!=null&&ve!=null&&v!=null),Ai[0]=null,Ai[1]=vt,Ai[2]=gr,Ai[3]=Qr,Q.ca=ve,Q.tb=je,Q.c=v.width,Q.i=v.height,e(0<Q.c&&0<Q.i),1>=ae)v=0;else if(Q.$a=3&X[te+0],Q.Z=X[te+0]>>2&3,Q.Lc=X[te+0]>>4&3,te=X[te+0]>>6&3,0>Q.$a||1<Q.$a||4<=Q.Z||1<Q.Lc||te)v=0;else if(Ee.put=Rt,Ee.ac=Vn,Ee.bc=Ni,Ee.ma=Q,Ee.width=v.width,Ee.height=v.height,Ee.Da=v.Da,Ee.v=v.v,Ee.va=v.va,Ee.j=v.j,Ee.o=v.o,Q.$a)e:{e(Q.$a==1),v=bs();t:for(;;){if(v==null){v=0;break e}if(e(Q!=null),Q.mc=v,v.c=Q.c,v.i=Q.i,v.l=Q.l,v.l.ma=Q,v.l.width=Q.c,v.l.height=Q.i,v.a=0,xe(v.m,X,le,_e),!mo(Q.c,Q.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&Gi(v.s)?(Q.ic=1,X=v.c*v.i,v.Ta=null,v.Ua=0,v.V=o(X),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(Q.ic=0,v=go(v,Q.c)),!v))break t;v=1;break e}Q.mc=null,v=0}else v=_e>=Q.c*Q.i;Q=!v}if(Q)return null;p.ga.Lc!=1?p.Ga=0:z=Y-j}e(p.ga!=null),e(j+z<=Y);e:{if(v=(X=p.ga).c,Y=X.l.o,X.$a==0){if(le=p.rc,_e=p.Vc,Ee=p.Fa,te=p.P+1+j*v,ae=p.mb,ve=p.nb+j*v,e(te<=p.P+p.qc),X.Z!=0)for(e(Ai[X.Z]!=null),Q=0;Q<z;++Q)Ai[X.Z](le,_e,Ee,te,ae,ve,v),le=ae,_e=ve,ve+=v,te+=v;else for(Q=0;Q<z;++Q)n(ae,ve,Ee,te,v),le=ae,_e=ve,ve+=v,te+=v;p.rc=le,p.Vc=_e}else{if(e(X.mc!=null),v=j+z,e((Q=X.mc)!=null),e(v<=Q.i),Q.C>=v)v=1;else if(X.ic||Ie(),X.ic){X=Q.V,le=Q.Ba,_e=Q.c;var De=Q.i,Ne=(Ee=1,te=Q.$/_e,ae=Q.$%_e,ve=Q.m,je=Q.s,Q.$),Oe=_e*De,Me=_e*v,Ue=je.wc,qe=Ne<Me?un(je,ae,te):null;e(Ne<=Oe),e(v<=De),e(Gi(je));t:for(;;){for(;!ve.h&&Ne<Me;){if(ae&Ue||(qe=un(je,ae,te)),e(qe!=null),Se(ve),256>(De=Cr(qe.G[0],qe.H[0],ve)))X[le+Ne]=De,++Ne,++ae>=_e&&(ae=0,++te<=v&&!(te%16)&&bn(Q,te));else{if(!(280>De)){Ee=0;break t}De=On(De-256,ve);var St,ct=Cr(qe.G[4],qe.H[4],ve);if(Se(ve),!(Ne>=(ct=Bi(_e,ct=On(ct,ve)))&&Oe-Ne>=De)){Ee=0;break t}for(St=0;St<De;++St)X[le+Ne+St]=X[le+Ne+St-ct];for(Ne+=De,ae+=De;ae>=_e;)ae-=_e,++te<=v&&!(te%16)&&bn(Q,te);Ne<Me&&ae&Ue&&(qe=un(je,ae,te))}e(ve.h==he(ve))}bn(Q,te>v?v:te);break t}!Ee||ve.h&&Ne<Oe?(Ee=0,Q.a=ve.h?5:3):Q.$=Ne,v=Ee}else v=Li(Q,Q.V,Q.Ba,Q.c,Q.i,v,ws);if(!v){z=0;break e}}j+z>=Y&&(p.Cc=1),z=1}if(!z)return null;if(p.Cc&&((z=p.ga)!=null&&(z.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+j*G}function m(p,v,j,z,G,Y){for(;0<G--;){var Q,X=p,te=v+(j?1:0),ae=p,ve=v+(j?0:3);for(Q=0;Q<z;++Q){var je=ae[ve+4*Q];je!=255&&(je*=32897,X[te+4*Q+0]=X[te+4*Q+0]*je>>23,X[te+4*Q+1]=X[te+4*Q+1]*je>>23,X[te+4*Q+2]=X[te+4*Q+2]*je>>23)}v+=Y}}function R(p,v,j,z,G){for(;0<z--;){var Y;for(Y=0;Y<j;++Y){var Q=p[v+2*Y+0],X=15&(ae=p[v+2*Y+1]),te=4369*X,ae=(240&ae|ae>>4)*te>>16;p[v+2*Y+0]=(240&Q|Q>>4)*te>>16&240|(15&Q|Q<<4)*te>>16>>4&15,p[v+2*Y+1]=240&ae|X}v+=G}}function U(p,v,j,z,G,Y,Q,X){var te,ae,ve=255;for(ae=0;ae<G;++ae){for(te=0;te<z;++te){var je=p[v+te];Y[Q+4*te]=je,ve&=je}v+=j,Q+=X}return ve!=255}function Z(p,v,j,z,G){var Y;for(Y=0;Y<G;++Y)j[z+Y]=p[v+Y]>>8}function Ie(){cl=m,dh=R,Oc=U,hh=Z}function Be(p,v,j){I[p]=function(z,G,Y,Q,X,te,ae,ve,je,le,_e,Ee,De,Ne,Oe,Me,Ue){var qe,St=Ue-1>>1,ct=X[te+0]|ae[ve+0]<<16,Xt=je[le+0]|_e[Ee+0]<<16;e(z!=null);var ft=3*ct+Xt+131074>>2;for(v(z[G+0],255&ft,ft>>16,De,Ne),Y!=null&&(ft=3*Xt+ct+131074>>2,v(Y[Q+0],255&ft,ft>>16,Oe,Me)),qe=1;qe<=St;++qe){var hr=X[te+qe]|ae[ve+qe]<<16,pn=je[le+qe]|_e[Ee+qe]<<16,rr=ct+hr+Xt+pn+524296,ut=rr+2*(hr+Xt)>>3;ft=ut+ct>>1,ct=(rr=rr+2*(ct+pn)>>3)+hr>>1,v(z[G+2*qe-1],255&ft,ft>>16,De,Ne+(2*qe-1)*j),v(z[G+2*qe-0],255&ct,ct>>16,De,Ne+(2*qe-0)*j),Y!=null&&(ft=rr+Xt>>1,ct=ut+pn>>1,v(Y[Q+2*qe-1],255&ft,ft>>16,Oe,Me+(2*qe-1)*j),v(Y[Q+2*qe+0],255&ct,ct>>16,Oe,Me+(2*qe+0)*j)),ct=hr,Xt=pn}1&Ue||(ft=3*ct+Xt+131074>>2,v(z[G+Ue-1],255&ft,ft>>16,De,Ne+(Ue-1)*j),Y!=null&&(ft=3*Xt+ct+131074>>2,v(Y[Q+Ue-1],255&ft,ft>>16,Oe,Me+(Ue-1)*j)))}}function tt(){eo[Hu]=E0,eo[Pa]=Na,eo[Jf]=j0,eo[Mc]=Hl,eo[Dc]=fl,eo[Wr]=Hc,eo[Gu]=wh,eo[$l]=Na,eo[ul]=Hl,eo[Wc]=fl,eo[$c]=Hc}function Dt(p){return p&-16384?0>p?0:255:p>>Ba}function Dr(p,v){return Dt((19077*p>>8)+(26149*v>>8)-14234)}function dr(p,v,j){return Dt((19077*p>>8)-(6419*v>>8)-(13320*j>>8)+8708)}function Xr(p,v){return Dt((19077*p>>8)+(33050*v>>8)-17685)}function $n(p,v,j,z,G){z[G+0]=Dr(p,j),z[G+1]=dr(p,v,j),z[G+2]=Xr(p,v)}function Oi(p,v,j,z,G){z[G+0]=Xr(p,v),z[G+1]=dr(p,v,j),z[G+2]=Dr(p,j)}function en(p,v,j,z,G){var Y=dr(p,v,j);v=Y<<3&224|Xr(p,v)>>3,z[G+0]=248&Dr(p,j)|Y>>5,z[G+1]=v}function Ti(p,v,j,z,G){var Y=240&Xr(p,v)|15;z[G+0]=240&Dr(p,j)|dr(p,v,j)>>4,z[G+1]=Y}function Oo(p,v,j,z,G){z[G+0]=255,$n(p,v,j,z,G+1)}function Ys(p,v,j,z,G){Oi(p,v,j,z,G),z[G+3]=255}function Fc(p,v,j,z,G){$n(p,v,j,z,G),z[G+3]=255}function dn(p,v){return 0>p?0:p>v?v:p}function is(p,v,j){I[p]=function(z,G,Y,Q,X,te,ae,ve,je){for(var le=ve+(-2&je)*j;ve!=le;)v(z[G+0],Y[Q+0],X[te+0],ae,ve),v(z[G+1],Y[Q+0],X[te+0],ae,ve+j),G+=2,++Q,++te,ve+=2*j;1&je&&v(z[G+0],Y[Q+0],X[te+0],ae,ve)}}function Is(p,v,j){return j==0?p==0?v==0?6:5:v==0?4:0:j}function $u(p,v,j,z,G){switch(p>>>30){case 3:al(v,j,z,G,0);break;case 2:hn(v,j,z,G);break;case 1:Sr(v,j,z,G)}}function wo(p,v){var j,z,G=v.M,Y=v.Nb,Q=p.oc,X=p.pc+40,te=p.oc,ae=p.pc+584,ve=p.oc,je=p.pc+600;for(j=0;16>j;++j)Q[X+32*j-1]=129;for(j=0;8>j;++j)te[ae+32*j-1]=129,ve[je+32*j-1]=129;for(0<G?Q[X-1-32]=te[ae-1-32]=ve[je-1-32]=129:(i(Q,X-32-1,127,21),i(te,ae-32-1,127,9),i(ve,je-32-1,127,9)),z=0;z<p.za;++z){var le=v.ya[v.aa+z];if(0<z){for(j=-1;16>j;++j)n(Q,X+32*j-4,Q,X+32*j+12,4);for(j=-1;8>j;++j)n(te,ae+32*j-4,te,ae+32*j+4,4),n(ve,je+32*j-4,ve,je+32*j+4,4)}var _e=p.Gd,Ee=p.Hd+z,De=le.ad,Ne=le.Hc;if(0<G&&(n(Q,X-32,_e[Ee].y,0,16),n(te,ae-32,_e[Ee].f,0,8),n(ve,je-32,_e[Ee].ea,0,8)),le.Za){var Oe=Q,Me=X-32+16;for(0<G&&(z>=p.za-1?i(Oe,Me,_e[Ee].y[15],4):n(Oe,Me,_e[Ee+1].y,0,4)),j=0;4>j;j++)Oe[Me+128+j]=Oe[Me+256+j]=Oe[Me+384+j]=Oe[Me+0+j];for(j=0;16>j;++j,Ne<<=2)Oe=Q,Me=X+Sh[j],Wo[le.Ob[j]](Oe,Me),$u(Ne,De,16*+j,Oe,Me)}else if(Oe=Is(z,G,le.Ob[0]),Di[Oe](Q,X),Ne!=0)for(j=0;16>j;++j,Ne<<=2)$u(Ne,De,16*+j,Q,X+Sh[j]);for(j=le.Gc,Oe=Is(z,G,le.Dd),Zi[Oe](te,ae),Zi[Oe](ve,je),Ne=De,Oe=te,Me=ae,255&(le=0|j)&&(170&le?Xi(Ne,256,Oe,Me):Br(Ne,256,Oe,Me)),le=ve,Ne=je,255&(j>>=8)&&(170&j?Xi(De,320,le,Ne):Br(De,320,le,Ne)),G<p.Ub-1&&(n(_e[Ee].y,0,Q,X+480,16),n(_e[Ee].f,0,te,ae+224,8),n(_e[Ee].ea,0,ve,je+224,8)),j=8*Y*p.B,_e=p.sa,Ee=p.ta+16*z+16*Y*p.R,De=p.qa,le=p.ra+8*z+j,Ne=p.Ha,Oe=p.Ia+8*z+j,j=0;16>j;++j)n(_e,Ee+j*p.R,Q,X+32*j,16);for(j=0;8>j;++j)n(De,le+j*p.B,te,ae+32*j,8),n(Ne,Oe+j*p.B,ve,je+32*j,8)}}function ka(p,v,j,z,G,Y,Q,X,te){var ae=[0],ve=[0],je=0,le=te!=null?te.kd:0,_e=te??new We;if(p==null||12>j)return 7;_e.data=p,_e.w=v,_e.ha=j,v=[v],j=[j],_e.gb=[_e.gb];e:{var Ee=v,De=j,Ne=_e.gb;if(e(p!=null),e(De!=null),e(Ne!=null),Ne[0]=0,12<=De[0]&&!t(p,Ee[0],"RIFF")){if(t(p,Ee[0]+8,"WEBP")){Ne=3;break e}var Oe=ze(p,Ee[0]+4);if(12>Oe||4294967286<Oe){Ne=3;break e}if(le&&Oe>De[0]-8){Ne=7;break e}Ne[0]=Oe,Ee[0]+=12,De[0]-=12}Ne=0}if(Ne!=0)return Ne;for(Oe=0<_e.gb[0],j=j[0];;){e:{var Me=p;De=v,Ne=j;var Ue=ae,qe=ve,St=Ee=[0];if((ft=je=[je])[0]=0,8>Ne[0])Ne=7;else{if(!t(Me,De[0],"VP8X")){if(ze(Me,De[0]+4)!=10){Ne=3;break e}if(18>Ne[0]){Ne=7;break e}var ct=ze(Me,De[0]+8),Xt=1+Qe(Me,De[0]+12);if(2147483648<=Xt*(Me=1+Qe(Me,De[0]+15))){Ne=3;break e}St!=null&&(St[0]=ct),Ue!=null&&(Ue[0]=Xt),qe!=null&&(qe[0]=Me),De[0]+=18,Ne[0]-=18,ft[0]=1}Ne=0}}if(je=je[0],Ee=Ee[0],Ne!=0)return Ne;if(De=!!(2&Ee),!Oe&&je)return 3;if(Y!=null&&(Y[0]=!!(16&Ee)),Q!=null&&(Q[0]=De),X!=null&&(X[0]=0),Q=ae[0],Ee=ve[0],je&&De&&te==null){Ne=0;break}if(4>j){Ne=7;break}if(Oe&&je||!Oe&&!je&&!t(p,v[0],"ALPH")){j=[j],_e.na=[_e.na],_e.P=[_e.P],_e.Sa=[_e.Sa];e:{ct=p,Ne=v,Oe=j;var ft=_e.gb;Ue=_e.na,qe=_e.P,St=_e.Sa,Xt=22,e(ct!=null),e(Oe!=null),Me=Ne[0];var hr=Oe[0];for(e(Ue!=null),e(St!=null),Ue[0]=null,qe[0]=null,St[0]=0;;){if(Ne[0]=Me,Oe[0]=hr,8>hr){Ne=7;break e}var pn=ze(ct,Me+4);if(4294967286<pn){Ne=3;break e}var rr=8+pn+1&-2;if(Xt+=rr,0<ft&&Xt>ft){Ne=3;break e}if(!t(ct,Me,"VP8 ")||!t(ct,Me,"VP8L")){Ne=0;break e}if(hr[0]<rr){Ne=7;break e}t(ct,Me,"ALPH")||(Ue[0]=ct,qe[0]=Me+8,St[0]=pn),Me+=rr,hr-=rr}}if(j=j[0],_e.na=_e.na[0],_e.P=_e.P[0],_e.Sa=_e.Sa[0],Ne!=0)break}j=[j],_e.Ja=[_e.Ja],_e.xa=[_e.xa];e:if(ft=p,Ne=v,Oe=j,Ue=_e.gb[0],qe=_e.Ja,St=_e.xa,ct=Ne[0],Me=!t(ft,ct,"VP8 "),Xt=!t(ft,ct,"VP8L"),e(ft!=null),e(Oe!=null),e(qe!=null),e(St!=null),8>Oe[0])Ne=7;else{if(Me||Xt){if(ft=ze(ft,ct+4),12<=Ue&&ft>Ue-12){Ne=3;break e}if(le&&ft>Oe[0]-8){Ne=7;break e}qe[0]=ft,Ne[0]+=8,Oe[0]-=8,St[0]=Xt}else St[0]=5<=Oe[0]&&ft[ct+0]==47&&!(ft[ct+4]>>5),qe[0]=Oe[0];Ne=0}if(j=j[0],_e.Ja=_e.Ja[0],_e.xa=_e.xa[0],v=v[0],Ne!=0)break;if(4294967286<_e.Ja)return 3;if(X==null||De||(X[0]=_e.xa?2:1),Q=[Q],Ee=[Ee],_e.xa){if(5>j){Ne=7;break}X=Q,le=Ee,De=Y,p==null||5>j?p=0:5<=j&&p[v+0]==47&&!(p[v+4]>>5)?(Oe=[0],ft=[0],Ue=[0],xe(qe=new J,p,v,j),gi(qe,Oe,ft,Ue)?(X!=null&&(X[0]=Oe[0]),le!=null&&(le[0]=ft[0]),De!=null&&(De[0]=Ue[0]),p=1):p=0):p=0}else{if(10>j){Ne=7;break}X=Ee,p==null||10>j||!Ts(p,v+3,j-3)?p=0:(le=p[v+0]|p[v+1]<<8|p[v+2]<<16,De=16383&(p[v+7]<<8|p[v+6]),p=16383&(p[v+9]<<8|p[v+8]),1&le||3<(le>>1&7)||!(le>>4&1)||le>>5>=_e.Ja||!De||!p?p=0:(Q&&(Q[0]=De),X&&(X[0]=p),p=1))}if(!p||(Q=Q[0],Ee=Ee[0],je&&(ae[0]!=Q||ve[0]!=Ee)))return 3;te!=null&&(te[0]=_e,te.offset=v-te.w,e(4294967286>v-te.w),e(te.offset==te.ha-j));break}return Ne==0||Ne==7&&je&&te==null?(Y!=null&&(Y[0]|=_e.na!=null&&0<_e.na.length),z!=null&&(z[0]=Q),G!=null&&(G[0]=Ee),0):Ne}function Fl(p,v,j){var z=v.width,G=v.height,Y=0,Q=0,X=z,te=G;if(v.Da=p!=null&&0<p.Da,v.Da&&(X=p.cd,te=p.bd,Y=p.v,Q=p.j,11>j||(Y&=-2,Q&=-2),0>Y||0>Q||0>=X||0>=te||Y+X>z||Q+te>G))return 0;if(v.v=Y,v.j=Q,v.va=Y+X,v.o=Q+te,v.U=X,v.T=te,v.da=p!=null&&0<p.da,v.da){if(!wt(X,te,j=[p.ib],Y=[p.hb]))return 0;v.ib=j[0],v.hb=Y[0]}return v.ob=p!=null&&p.ob,v.Kb=p==null||!p.Sd,v.da&&(v.ob=v.ib<3*z/4&&v.hb<3*G/4,v.Kb=0),1}function zl(p){if(p==null)return 2;if(11>p.S){var v=p.f.RGBA;v.fb+=(p.height-1)*v.A,v.A=-v.A}else v=p.f.kb,p=p.height,v.O+=(p-1)*v.fa,v.fa=-v.fa,v.N+=(p-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(p-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(p-1)*v.lb,v.lb=-v.lb);return 0}function Qs(p,v,j,z){if(z==null||0>=p||0>=v)return 2;if(j!=null){if(j.Da){var G=j.cd,Y=j.bd,Q=-2&j.v,X=-2&j.j;if(0>Q||0>X||0>=G||0>=Y||Q+G>p||X+Y>v)return 2;p=G,v=Y}if(j.da){if(!wt(p,v,G=[j.ib],Y=[j.hb]))return 2;p=G[0],v=Y[0]}}z.width=p,z.height=v;e:{var te=z.width,ae=z.height;if(p=z.S,0>=te||0>=ae||!(p>=Hu&&13>p))p=2;else{if(0>=z.Rd&&z.sd==null){Q=Y=G=v=0;var ve=(X=te*Gc[p])*ae;if(11>p||(Y=(ae+1)/2*(v=(te+1)/2),p==12&&(Q=(G=te)*ae)),(ae=o(ve+2*Y+Q))==null){p=1;break e}z.sd=ae,11>p?((te=z.f.RGBA).eb=ae,te.fb=0,te.A=X,te.size=ve):((te=z.f.kb).y=ae,te.O=0,te.fa=X,te.Fd=ve,te.f=ae,te.N=0+ve,te.Ab=v,te.Cd=Y,te.ea=ae,te.W=0+ve+Y,te.Db=v,te.Ed=Y,p==12&&(te.F=ae,te.J=0+ve+2*Y),te.Tc=Q,te.lb=G)}if(v=1,G=z.S,Y=z.width,Q=z.height,G>=Hu&&13>G)if(11>G)p=z.f.RGBA,v&=(X=Math.abs(p.A))*(Q-1)+Y<=p.size,v&=X>=Y*Gc[G],v&=p.eb!=null;else{p=z.f.kb,X=(Y+1)/2,ve=(Q+1)/2,te=Math.abs(p.fa),ae=Math.abs(p.Ab);var je=Math.abs(p.Db),le=Math.abs(p.lb),_e=le*(Q-1)+Y;v&=te*(Q-1)+Y<=p.Fd,v&=ae*(ve-1)+X<=p.Cd,v=(v&=je*(ve-1)+X<=p.Ed)&te>=Y&ae>=X&je>=X,v&=p.y!=null,v&=p.f!=null,v&=p.ea!=null,G==12&&(v&=le>=Y,v&=_e<=p.Tc,v&=p.F!=null)}else v=0;p=v?0:2}}return p!=0||j!=null&&j.fd&&(p=zl(z)),p}var Mo=64,So=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],_o=24,Ia=32,Es=8,Xs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];rt("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(p){return p},I.Predictor2=function(p,v,j){return v[j+0]},I.Predictor3=function(p,v,j){return v[j+1]},I.Predictor4=function(p,v,j){return v[j-1]},I.Predictor5=function(p,v,j){return _t(_t(p,v[j+1]),v[j+0])},I.Predictor6=function(p,v,j){return _t(p,v[j-1])},I.Predictor7=function(p,v,j){return _t(p,v[j+0])},I.Predictor8=function(p,v,j){return _t(v[j-1],v[j+0])},I.Predictor9=function(p,v,j){return _t(v[j+0],v[j+1])},I.Predictor10=function(p,v,j){return _t(_t(p,v[j-1]),_t(v[j+0],v[j+1]))},I.Predictor11=function(p,v,j){var z=v[j+0];return 0>=qt(z>>24&255,p>>24&255,(v=v[j-1])>>24&255)+qt(z>>16&255,p>>16&255,v>>16&255)+qt(z>>8&255,p>>8&255,v>>8&255)+qt(255&z,255&p,255&v)?z:p},I.Predictor12=function(p,v,j){var z=v[j+0];return(mr((p>>24&255)+(z>>24&255)-((v=v[j-1])>>24&255))<<24|mr((p>>16&255)+(z>>16&255)-(v>>16&255))<<16|mr((p>>8&255)+(z>>8&255)-(v>>8&255))<<8|mr((255&p)+(255&z)-(255&v)))>>>0},I.Predictor13=function(p,v,j){var z=v[j-1];return(Ft((p=_t(p,v[j+0]))>>24&255,z>>24&255)<<24|Ft(p>>16&255,z>>16&255)<<16|Ft(p>>8&255,z>>8&255)<<8|Ft(255&p,255&z))>>>0};var Zs=I.PredictorAdd0;I.PredictorAdd1=vr,rt("Predictor2","PredictorAdd2"),rt("Predictor3","PredictorAdd3"),rt("Predictor4","PredictorAdd4"),rt("Predictor5","PredictorAdd5"),rt("Predictor6","PredictorAdd6"),rt("Predictor7","PredictorAdd7"),rt("Predictor8","PredictorAdd8"),rt("Predictor9","PredictorAdd9"),rt("Predictor10","PredictorAdd10"),rt("Predictor11","PredictorAdd11"),rt("Predictor12","PredictorAdd12"),rt("Predictor13","PredictorAdd13");var js=I.PredictorAdd2;pt("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),pt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var Sn,nl=I.ColorIndexInverseTransform,Rs=I.MapARGB,os=I.VP8LColorIndexInverseTransformAlpha,il=I.MapAlpha,ol=I.VP8LPredictorsAdd=[];ol.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var Vl,Ol,ea,Ea,ja,sl,Ra,al,hn,Xi,Sr,Br,fn,jn,ss,zc,Ml,ta,Uu,Dl,qu,uh,Vc,ll,cl,dh,Oc,hh,fh=o(511),ph=o(2041),mh=o(225),gh=o(767),yh=0,Ps=ph,Wl=mh,Mi=gh,Do=fh,Hu=0,Pa=1,Jf=2,Mc=3,Dc=4,Wr=5,Gu=6,$l=7,ul=8,Wc=9,$c=10,Uc=[2,3,7],Ku=[3,3,11],dl=[280,256,256,256,40],Yf=[0,1,1,1,0],A0=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],C0=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Qf=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ju=8,Ul=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],qc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],hl=null,xh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],vh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Xf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Zf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],k0=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],I0=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],bh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Di=[],Wo=[],Zi=[],Ns=1,ql=2,Ai=[],eo=[];Be("UpsampleRgbLinePair",$n,3),Be("UpsampleBgrLinePair",Oi,3),Be("UpsampleRgbaLinePair",Fc,4),Be("UpsampleBgraLinePair",Ys,4),Be("UpsampleArgbLinePair",Oo,4),Be("UpsampleRgba4444LinePair",Ti,2),Be("UpsampleRgb565LinePair",en,2);var E0=I.UpsampleRgbLinePair,j0=I.UpsampleBgrLinePair,Na=I.UpsampleRgbaLinePair,Hl=I.UpsampleBgraLinePair,fl=I.UpsampleArgbLinePair,Hc=I.UpsampleRgba4444LinePair,wh=I.UpsampleRgb565LinePair,ra=16,as=1<<ra-1,Pr=-227,Lr=482,Ba=6,ui=0,to=o(256),pl=o(256),Gl=o(256),ro=o(256),Yu=o(Lr-Pr),ep=o(Lr-Pr);is("YuvToRgbRow",$n,3),is("YuvToBgrRow",Oi,3),is("YuvToRgbaRow",Fc,4),is("YuvToBgraRow",Ys,4),is("YuvToArgbRow",Oo,4),is("YuvToRgba4444Row",Ti,2),is("YuvToRgb565Row",en,2);var Sh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ml=[0,2,8],tp=[8,7,6,4,4,2,2,2,1,1,1,1],na=1;this.WebPDecodeRGBA=function(p,v,j,z,G){var Y=Pa,Q=new Ae,X=new $t;Q.ba=X,X.S=Y,X.width=[X.width],X.height=[X.height];var te=X.width,ae=X.height,ve=new Mt;if(ve==null||p==null)var je=2;else e(ve!=null),je=ka(p,v,j,ve.width,ve.height,ve.Pd,ve.Qd,ve.format,null);if(je!=0?te=0:(te!=null&&(te[0]=ve.width[0]),ae!=null&&(ae[0]=ve.height[0]),te=1),te){X.width=X.width[0],X.height=X.height[0],z!=null&&(z[0]=X.width),G!=null&&(G[0]=X.height);e:{if(z=new Qn,(G=new We).data=p,G.w=v,G.ha=j,G.kd=1,v=[0],e(G!=null),((p=ka(G.data,G.w,G.ha,null,null,null,v,null,G))==0||p==7)&&v[0]&&(p=4),(v=p)==0){if(e(Q!=null),z.data=G.data,z.w=G.w+G.offset,z.ha=G.ha-G.offset,z.put=Rt,z.ac=Vn,z.bc=Ni,z.ma=Q,G.xa){if((p=bs())==null){Q=1;break e}if((function(le,_e){var Ee=[0],De=[0],Ne=[0];t:for(;;){if(le==null)return 0;if(_e==null)return le.a=2,0;if(le.l=_e,le.a=0,xe(le.m,_e.data,_e.w,_e.ha),!gi(le.m,Ee,De,Ne)){le.a=3;break t}if(le.xb=ql,_e.width=Ee[0],_e.height=De[0],!mo(Ee[0],De[0],1,le,null))break t;return 1}return e(le.a!=0),0})(p,z)){if(z=(v=Qs(z.width,z.height,Q.Oa,Q.ba))==0){t:{z=p;r:for(;;){if(z==null){z=0;break t}if(e(z.s.yc!=null),e(z.s.Ya!=null),e(0<z.s.Wb),e((j=z.l)!=null),e((G=j.ma)!=null),z.xb!=0){if(z.ca=G.ba,z.tb=G.tb,e(z.ca!=null),!Fl(G.Oa,j,Mc)){z.a=2;break r}if(!go(z,j.width)||j.da)break r;if((j.da||Wt(z.ca.S))&&Ie(),11>z.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),z.ca.f.kb.F!=null&&Ie()),z.Pb&&0<z.s.ua&&z.s.vb.X==null&&!de(z.s.vb,z.s.Wa.Xa)){z.a=1;break r}z.xb=0}if(!Li(z,z.V,z.Ba,z.c,z.i,j.o,Yo))break r;G.Dc=z.Ma,z=1;break t}e(z.a!=0),z=0}z=!z}z&&(v=p.a)}else v=p.a}else{if((p=new No)==null){Q=1;break e}if(p.Fa=G.na,p.P=G.P,p.qc=G.Sa,yo(p,z)){if((v=Qs(z.width,z.height,Q.Oa,Q.ba))==0){if(p.Aa=0,j=Q.Oa,e((G=p)!=null),j!=null){if(0<(te=0>(te=j.Md)?0:100<te?255:255*te/100)){for(ae=ve=0;4>ae;++ae)12>(je=G.pb[ae]).lc&&(je.ia=te*tp[0>je.lc?0:je.lc]>>3),ve|=je.ia;ve&&(alert("todo:VP8InitRandom"),G.ia=1)}G.Ga=j.Id,100<G.Ga?G.Ga=100:0>G.Ga&&(G.Ga=0)}(function(le,_e){if(le==null)return 0;if(_e==null)return wr(le,2,"NULL VP8Io parameter in VP8Decode().");if(!le.cb&&!yo(le,_e))return 0;if(e(le.cb),_e.ac==null||_e.ac(_e)){_e.ob&&(le.L=0);var Ee=ml[le.L];if(le.L==2?(le.yb=0,le.zb=0):(le.yb=_e.v-Ee>>4,le.zb=_e.j-Ee>>4,0>le.yb&&(le.yb=0),0>le.zb&&(le.zb=0)),le.Va=_e.o+15+Ee>>4,le.Hb=_e.va+15+Ee>>4,le.Hb>le.za&&(le.Hb=le.za),le.Va>le.Ub&&(le.Va=le.Ub),0<le.L){var De=le.ed;for(Ee=0;4>Ee;++Ee){var Ne;if(le.Qa.Cb){var Oe=le.Qa.Lb[Ee];le.Qa.Fb||(Oe+=De.Tb)}else Oe=De.Tb;for(Ne=0;1>=Ne;++Ne){var Me=le.gd[Ee][Ne],Ue=Oe;if(De.Pc&&(Ue+=De.vd[0],Ne&&(Ue+=De.od[0])),0<(Ue=0>Ue?0:63<Ue?63:Ue)){var qe=Ue;0<De.wb&&(qe=4<De.wb?qe>>2:qe>>1)>9-De.wb&&(qe=9-De.wb),1>qe&&(qe=1),Me.dd=qe,Me.tc=2*Ue+qe,Me.ld=40<=Ue?2:15<=Ue?1:0}else Me.tc=0;Me.La=Ne}}}Ee=0}else wr(le,6,"Frame setup failed"),Ee=le.a;if(Ee=Ee==0){if(Ee){le.$c=0,0<le.Aa||(le.Ic=na);t:{Ee=le.Ic,De=4*(qe=le.za);var St=32*qe,ct=qe+1,Xt=0<le.L?qe*(0<le.Aa?2:1):0,ft=(le.Aa==2?2:1)*qe;if((Me=De+832+(Ne=3*(16*Ee+ml[le.L])/2*St)+(Oe=le.Fa!=null&&0<le.Fa.length?le.Kc.c*le.Kc.i:0))!=Me)Ee=0;else{if(Me>le.Vb){if(le.Vb=0,le.Ec=o(Me),le.Fc=0,le.Ec==null){Ee=wr(le,1,"no memory during frame initialization.");break t}le.Vb=Me}Me=le.Ec,Ue=le.Fc,le.Ac=Me,le.Bc=Ue,Ue+=De,le.Gd=l(St,xi),le.Hd=0,le.rb=l(ct+1,Zo),le.sb=1,le.wa=Xt?l(Xt,yi):null,le.Y=0,le.D.Nb=0,le.D.wa=le.wa,le.D.Y=le.Y,0<le.Aa&&(le.D.Y+=qe),e(!0),le.oc=Me,le.pc=Ue,Ue+=832,le.ya=l(ft,Ss),le.aa=0,le.D.ya=le.ya,le.D.aa=le.aa,le.Aa==2&&(le.D.aa+=qe),le.R=16*qe,le.B=8*qe,qe=(St=ml[le.L])*le.R,St=St/2*le.B,le.sa=Me,le.ta=Ue+qe,le.qa=le.sa,le.ra=le.ta+16*Ee*le.R+St,le.Ha=le.qa,le.Ia=le.ra+8*Ee*le.B+St,le.$c=0,Ue+=Ne,le.mb=Oe?Me:null,le.nb=Oe?Ue:null,e(Ue+Oe<=le.Fc+le.Vb),lr(le),i(le.Ac,le.Bc,0,De),Ee=1}}if(Ee){if(_e.ka=0,_e.y=le.sa,_e.O=le.ta,_e.f=le.qa,_e.N=le.ra,_e.ea=le.Ha,_e.Vd=le.Ia,_e.fa=le.R,_e.Rc=le.B,_e.F=null,_e.J=0,!yh){for(Ee=-255;255>=Ee;++Ee)fh[255+Ee]=0>Ee?-Ee:Ee;for(Ee=-1020;1020>=Ee;++Ee)ph[1020+Ee]=-128>Ee?-128:127<Ee?127:Ee;for(Ee=-112;112>=Ee;++Ee)mh[112+Ee]=-16>Ee?-16:15<Ee?15:Ee;for(Ee=-255;510>=Ee;++Ee)gh[255+Ee]=0>Ee?0:255<Ee?255:Ee;yh=1}Ra=or,al=Xa,Xi=Hs,Sr=Bo,Br=Sa,hn=Qa,fn=Ca,jn=Wn,ss=_,zc=H,Ml=_i,ta=ks,Uu=ce,Dl=ye,qu=ci,uh=zo,Vc=Vo,ll=rl,Wo[0]=Ll,Wo[1]=Gs,Wo[2]=es,Wo[3]=zi,Wo[4]=As,Wo[5]=Fo,Wo[6]=Dn,Wo[7]=Ta,Wo[8]=Js,Wo[9]=Rr,Di[0]=vo,Di[1]=Za,Di[2]=el,Di[3]=Ks,Di[4]=Lo,Di[5]=wi,Di[6]=wn,Zi[0]=Yi,Zi[1]=_a,Zi[2]=tl,Zi[3]=Ji,Zi[4]=Qi,Zi[5]=ts,Zi[6]=Aa,Ee=1}else Ee=0}Ee&&(Ee=(function(hr,pn){for(hr.M=0;hr.M<hr.Va;++hr.M){var rr,ut=hr.Jc[hr.M&hr.Xb],nt=hr.m,_n=hr;for(rr=0;rr<_n.za;++rr){var Gt=nt,cr=_n,Zr=cr.Ac,Zn=cr.Bc+4*rr,Rn=cr.zc,an=cr.ya[cr.aa+rr];if(cr.Qa.Bb?an.$b=ge(Gt,cr.Pa.jb[0])?2+ge(Gt,cr.Pa.jb[2]):ge(Gt,cr.Pa.jb[1]):an.$b=0,cr.kc&&(an.Ad=ge(Gt,cr.Bd)),an.Za=!ge(Gt,145)+0,an.Za){var Un=an.Ob,ei=0;for(cr=0;4>cr;++cr){var nn,pr=Rn[0+cr];for(nn=0;4>nn;++nn){pr=k0[Zr[Zn+nn]][pr];for(var _r=Xf[ge(Gt,pr[0])];0<_r;)_r=Xf[2*_r+ge(Gt,pr[_r])];pr=-_r,Zr[Zn+nn]=pr}n(Un,ei,Zr,Zn,4),ei+=4,Rn[0+cr]=pr}}else pr=ge(Gt,156)?ge(Gt,128)?1:3:ge(Gt,163)?2:0,an.Ob[0]=pr,i(Zr,Zn,pr,4),i(Rn,0,pr,4);an.Dd=ge(Gt,142)?ge(Gt,114)?ge(Gt,183)?1:3:2:0}if(_n.m.Ka)return wr(hr,7,"Premature end-of-partition0 encountered.");for(;hr.ja<hr.za;++hr.ja){if(_n=ut,Gt=(nt=hr).rb[nt.sb-1],Zr=nt.rb[nt.sb+nt.ja],rr=nt.ya[nt.aa+nt.ja],Zn=nt.kc?rr.Ad:0)Gt.la=Zr.la=0,rr.Za||(Gt.Na=Zr.Na=0),rr.Hc=0,rr.Gc=0,rr.ia=0;else{var on,Tr;if(Gt=Zr,Zr=_n,Zn=nt.Pa.Xc,Rn=nt.ya[nt.aa+nt.ja],an=nt.pb[Rn.$b],cr=Rn.ad,Un=0,ei=nt.rb[nt.sb-1],pr=nn=0,i(cr,Un,0,384),Rn.Za)var mn=0,gn=Zn[3];else{_r=o(16);var $r=Gt.Na+ei.Na;if($r=hl(Zr,Zn[1],$r,an.Eb,0,_r,0),Gt.Na=ei.Na=(0<$r)+0,1<$r)Ra(_r,0,cr,Un);else{var Ci=_r[0]+3>>3;for(_r=0;256>_r;_r+=16)cr[Un+_r]=Ci}mn=1,gn=Zn[0]}var Fr=15&Gt.la,Ur=15&ei.la;for(_r=0;4>_r;++_r){var Pn=1&Ur;for(Ci=Tr=0;4>Ci;++Ci)Fr=Fr>>1|(Pn=($r=hl(Zr,gn,$r=Pn+(1&Fr),an.Sc,mn,cr,Un))>mn)<<7,Tr=Tr<<2|(3<$r?3:1<$r?2:cr[Un+0]!=0),Un+=16;Fr>>=4,Ur=Ur>>1|Pn<<7,nn=(nn<<8|Tr)>>>0}for(gn=Fr,mn=Ur>>4,on=0;4>on;on+=2){for(Tr=0,Fr=Gt.la>>4+on,Ur=ei.la>>4+on,_r=0;2>_r;++_r){for(Pn=1&Ur,Ci=0;2>Ci;++Ci)$r=Pn+(1&Fr),Fr=Fr>>1|(Pn=0<($r=hl(Zr,Zn[2],$r,an.Qc,0,cr,Un)))<<3,Tr=Tr<<2|(3<$r?3:1<$r?2:cr[Un+0]!=0),Un+=16;Fr>>=2,Ur=Ur>>1|Pn<<5}pr|=Tr<<4*on,gn|=Fr<<4<<on,mn|=(240&Ur)<<on}Gt.la=gn,ei.la=mn,Rn.Hc=nn,Rn.Gc=pr,Rn.ia=43690&pr?0:an.ia,Zn=!(nn|pr)}if(0<nt.L&&(nt.wa[nt.Y+nt.ja]=nt.gd[rr.$b][rr.Za],nt.wa[nt.Y+nt.ja].La|=!Zn),_n.Ka)return wr(hr,7,"Premature end-of-file encountered.")}if(lr(hr),nt=pn,_n=1,rr=(ut=hr).D,Gt=0<ut.L&&ut.M>=ut.zb&&ut.M<=ut.Va,ut.Aa==0)t:{if(rr.M=ut.M,rr.uc=Gt,wo(ut,rr),_n=1,rr=(Tr=ut.D).Nb,Gt=(pr=ml[ut.L])*ut.R,Zr=pr/2*ut.B,_r=16*rr*ut.R,Ci=8*rr*ut.B,Zn=ut.sa,Rn=ut.ta-Gt+_r,an=ut.qa,cr=ut.ra-Zr+Ci,Un=ut.Ha,ei=ut.Ia-Zr+Ci,Ur=(Fr=Tr.M)==0,nn=Fr>=ut.Va-1,ut.Aa==2&&wo(ut,Tr),Tr.uc)for(Pn=($r=ut).D.M,e($r.D.uc),Tr=$r.yb;Tr<$r.Hb;++Tr){mn=Tr,gn=Pn;var di=(no=(Cn=$r).D).Nb;on=Cn.R;var no=no.wa[no.Y+mn],Tn=Cn.sa,An=Cn.ta+16*di*on+16*mn,ki=no.dd,qr=no.tc;if(qr!=0)if(e(3<=qr),Cn.L==1)0<mn&&uh(Tn,An,on,qr+4),no.La&&ll(Tn,An,on,qr),0<gn&&qu(Tn,An,on,qr+4),no.La&&Vc(Tn,An,on,qr);else{var Ii=Cn.B,$o=Cn.qa,ls=Cn.ra+8*di*Ii+8*mn,ti=Cn.Ha,Cn=Cn.Ia+8*di*Ii+8*mn;di=no.ld,0<mn&&(jn(Tn,An,on,qr+4,ki,di),zc($o,ls,ti,Cn,Ii,qr+4,ki,di)),no.La&&(ta(Tn,An,on,qr,ki,di),Dl($o,ls,ti,Cn,Ii,qr,ki,di)),0<gn&&(fn(Tn,An,on,qr+4,ki,di),ss($o,ls,ti,Cn,Ii,qr+4,ki,di)),no.La&&(Ml(Tn,An,on,qr,ki,di),Uu($o,ls,ti,Cn,Ii,qr,ki,di))}}if(ut.ia&&alert("todo:DitherRow"),nt.put!=null){if(Tr=16*Fr,Fr=16*(Fr+1),Ur?(nt.y=ut.sa,nt.O=ut.ta+_r,nt.f=ut.qa,nt.N=ut.ra+Ci,nt.ea=ut.Ha,nt.W=ut.Ia+Ci):(Tr-=pr,nt.y=Zn,nt.O=Rn,nt.f=an,nt.N=cr,nt.ea=Un,nt.W=ei),nn||(Fr-=pr),Fr>nt.o&&(Fr=nt.o),nt.F=null,nt.J=null,ut.Fa!=null&&0<ut.Fa.length&&Tr<Fr&&(nt.J=Mr(ut,nt,Tr,Fr-Tr),nt.F=ut.mb,nt.F==null&&nt.F.length==0)){_n=wr(ut,3,"Could not decode alpha data.");break t}Tr<nt.j&&(pr=nt.j-Tr,Tr=nt.j,e(!(1&pr)),nt.O+=ut.R*pr,nt.N+=ut.B*(pr>>1),nt.W+=ut.B*(pr>>1),nt.F!=null&&(nt.J+=nt.width*pr)),Tr<Fr&&(nt.O+=nt.v,nt.N+=nt.v>>1,nt.W+=nt.v>>1,nt.F!=null&&(nt.J+=nt.v),nt.ka=Tr-nt.j,nt.U=nt.va-nt.v,nt.T=Fr-Tr,_n=nt.put(nt))}rr+1!=ut.Ic||nn||(n(ut.sa,ut.ta-Gt,Zn,Rn+16*ut.R,Gt),n(ut.qa,ut.ra-Zr,an,cr+8*ut.B,Zr),n(ut.Ha,ut.Ia-Zr,Un,ei+8*ut.B,Zr))}if(!_n)return wr(hr,6,"Output aborted.")}return 1})(le,_e)),_e.bc!=null&&_e.bc(_e),Ee&=1}return Ee?(le.cb=0,Ee):0})(p,z)||(v=p.a)}}else v=p.a}v==0&&Q.Oa!=null&&Q.Oa.fd&&(v=zl(Q.ba))}Q=v}Y=Q!=0?null:11>Y?X.f.RGBA.eb:X.f.kb.y}else Y=null;return Y};var Gc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(I,M){for(var C="",w=0;w<4;w++)C+=String.fromCharCode(I[M++]);return C}function g(I,M){return I[M+0]|I[M+1]<<8}function b(I,M){return(I[M+0]|I[M+1]<<8|I[M+2]<<16)>>>0}function S(I,M){return(I[M+0]|I[M+1]<<8|I[M+2]<<16|I[M+3]<<24)>>>0}new h;var x=[0],B=[0],E=[],L=new h,A=r,O=(function(I,M){var C={},w=0,N=!1,D=0,q=0;if(C.frames=[],!(function(W,J){for(var re=0;re<4;re++)if(W[J+re]!="RIFF".charCodeAt(re))return!0;return!1})(I,M)){for(S(I,M+=4),M+=8;M<I.length;){var ne=d(I,M),se=S(I,M+=4);M+=4;var oe=se+(1&se);switch(ne){case"VP8 ":case"VP8L":C.frames[w]===void 0&&(C.frames[w]={}),(ee=C.frames[w]).src_off=N?q:M-8,ee.src_size=D+se+8,w++,N&&(N=!1,D=0,q=0);break;case"VP8X":(ee=C.header={}).feature_flags=I[M];var xe=M+4;ee.canvas_width=1+b(I,xe),xe+=3,ee.canvas_height=1+b(I,xe),xe+=3;break;case"ALPH":N=!0,D=oe+8,q=M-8;break;case"ANIM":(ee=C.header).bgcolor=S(I,M),xe=M+4,ee.loop_count=g(I,xe),xe+=2;break;case"ANMF":var we,ee;(ee=C.frames[w]={}).offset_x=2*b(I,M),M+=3,ee.offset_y=2*b(I,M),M+=3,ee.width=1+b(I,M),M+=3,ee.height=1+b(I,M),M+=3,ee.duration=b(I,M),M+=3,we=I[M++],ee.dispose=1&we,ee.blend=we>>1&1}ne!="ANMF"&&(M+=oe)}return C}})(A,0);O.response=A,O.rgbaoutput=!0,O.dataurl=!1;var $=O.header?O.header:null,F=O.frames?O.frames:null;if($){$.loop_counter=$.loop_count,x=[$.canvas_height],B=[$.canvas_width];for(var ie=0;ie<F.length&&F[ie].blend!=0;ie++);}var ue=F[0],V=L.WebPDecodeRGBA(A,ue.src_off,ue.src_size,B,x);ue.rgba=V,ue.imgwidth=B[0],ue.imgheight=x[0];for(var k=0;k<B[0]*x[0]*4;k++)E[k]=V[k];return this.width=B,this.height=x,this.data=E,this}(function(r){var e,t,n,i,o,l,u,h,d,g=function(W){return W=W||{},this.isStrokeTransparent=W.isStrokeTransparent||!1,this.strokeOpacity=W.strokeOpacity||1,this.strokeStyle=W.strokeStyle||"#000000",this.fillStyle=W.fillStyle||"#000000",this.isFillTransparent=W.isFillTransparent||!1,this.fillOpacity=W.fillOpacity||1,this.font=W.font||"10px sans-serif",this.textBaseline=W.textBaseline||"alphabetic",this.textAlign=W.textAlign||"left",this.lineWidth=W.lineWidth||1,this.lineJoin=W.lineJoin||"miter",this.lineCap=W.lineCap||"butt",this.path=W.path||[],this.transform=W.transform!==void 0?W.transform.clone():new h,this.globalCompositeOperation=W.globalCompositeOperation||"normal",this.globalAlpha=W.globalAlpha||1,this.clip_path=W.clip_path||[],this.currentPoint=W.currentPoint||new l,this.miterLimit=W.miterLimit||10,this.lastPoint=W.lastPoint||new l,this.lineDashOffset=W.lineDashOffset||0,this.lineDash=W.lineDash||[],this.margin=W.margin||[0,0,0,0],this.prevPageLastElemOffset=W.prevPageLastElemOffset||0,this.ignoreClearRect=typeof W.ignoreClearRect!="boolean"||W.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new b(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,l=this.internal.Point,u=this.internal.Rectangle,h=this.internal.Matrix,d=new g}]);var b=function(W){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var J=W;Object.defineProperty(this,"pdf",{get:function(){return J}});var re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return re},set:function(ze){re=!!ze}});var he=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return he},set:function(ze){he=!!ze}});var me=0;Object.defineProperty(this,"posX",{get:function(){return me},set:function(ze){isNaN(ze)||(me=ze)}});var Se=0;Object.defineProperty(this,"posY",{get:function(){return Se},set:function(ze){isNaN(ze)||(Se=ze)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ze){var de;typeof ze=="number"?de=[ze,ze,ze,ze]:((de=new Array(4))[0]=ze[0],de[1]=ze.length>=2?ze[1]:de[0],de[2]=ze.length>=3?ze[2]:de[0],de[3]=ze.length>=4?ze[3]:de[1]),d.margin=de}});var ke=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ke},set:function(ze){ke=ze}});var Ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ce},set:function(ze){Ce=ze}});var ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ge},set:function(ze){ge=ze}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ze){ze instanceof g&&(d=ze)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ze){d.path=ze}});var Fe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Fe},set:function(ze){Fe=ze}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ze){var de;de=S(ze),this.ctx.fillStyle=de.style,this.ctx.isFillTransparent=de.a===0,this.ctx.fillOpacity=de.a,this.pdf.setFillColor(de.r,de.g,de.b,{a:de.a}),this.pdf.setTextColor(de.r,de.g,de.b,{a:de.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ze){var de=S(ze);this.ctx.strokeStyle=de.style,this.ctx.isStrokeTransparent=de.a===0,this.ctx.strokeOpacity=de.a,de.a===0?this.pdf.setDrawColor(255,255,255):(de.a,this.pdf.setDrawColor(de.r,de.g,de.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ze){["butt","round","square"].indexOf(ze)!==-1&&(this.ctx.lineCap=ze,this.pdf.setLineCap(ze))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ze){isNaN(ze)||(this.ctx.lineWidth=ze,this.pdf.setLineWidth(ze))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ze){["bevel","round","miter"].indexOf(ze)!==-1&&(this.ctx.lineJoin=ze,this.pdf.setLineJoin(ze))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ze){isNaN(ze)||(this.ctx.miterLimit=ze,this.pdf.setMiterLimit(ze))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ze){this.ctx.textBaseline=ze}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ze){["right","end","center","left","start"].indexOf(ze)!==-1&&(this.ctx.textAlign=ze)}});var Ke=null,Qe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Qe},set:function(ze){Ke=null,Qe=ze}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ze){var de;if(this.ctx.font=ze,(de=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ze))!==null){var Nt=de[1];de[2];var Et=de[3],wt=de[4];de[5];var He=de[6],ot=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(wt)[2];wt=Math.floor(ot==="px"?parseFloat(wt)*this.pdf.internal.scaleFactor:ot==="em"?parseFloat(wt)*this.pdf.getFontSize():parseFloat(wt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(wt);var rt=(function(jt){var pt,Ir,ir=[],ht=jt.trim();if(ht==="")return Bg;if(ht in _x)return[_x[ht]];for(;ht!=="";){switch(Ir=null,pt=(ht=Ax(ht)).charAt(0)){case'"':case"'":Ir=gk(ht.substring(1),pt);break;default:Ir=yk(ht)}if(Ir===null||(ir.push(Ir[0]),(ht=Ax(Ir[1]))!==""&&ht.charAt(0)!==","))return Bg;ht=ht.replace(/^,/,"")}return ir})(He);if(this.fontFaces){var Jt=(function(jt,pt){if(Ke===null){var Ir=(function(ir){var ht=[];return Object.keys(ir).forEach(function(Ht){ir[Ht].forEach(function(sr){var It=null;switch(sr){case"bold":It={family:Ht,weight:"bold"};break;case"italic":It={family:Ht,style:"italic"};break;case"bolditalic":It={family:Ht,weight:"bold",style:"italic"};break;case"":case"normal":It={family:Ht}}It!==null&&(It.ref={name:Ht,style:sr},ht.push(It))})}),ht})(jt.getFontList());Ke=(function(ir){for(var ht={},Ht=0;Ht<ir.length;++Ht){var sr=Ng(ir[Ht]),It=sr.family,tr=sr.stretch,Wt=sr.style,Er=sr.weight;ht[It]=ht[It]||{},ht[It][tr]=ht[It][tr]||{},ht[It][tr][Wt]=ht[It][tr][Wt]||{},ht[It][tr][Wt][Er]=sr}return ht})(Ir.concat(pt))}return Ke})(this.pdf,this.fontFaces),_t=rt.map(function(jt){return{family:jt,stretch:"normal",weight:Et,style:Nt}}),mr=(function(jt,pt,Ir){for(var ir=(Ir=Ir||{}).defaultFontFamily||"times",ht=Object.assign({},mk,Ir.genericFontFamilies||{}),Ht=null,sr=null,It=0;It<pt.length;++It)if(ht[(Ht=Ng(pt[It])).family]&&(Ht.family=ht[Ht.family]),jt.hasOwnProperty(Ht.family)){sr=jt[Ht.family];break}if(!(sr=sr||jt[ir]))throw new Error("Could not find a font-family for the rule '"+Tx(Ht)+"' and default family '"+ir+"'.");if(sr=(function(tr,Wt){if(Wt[tr])return Wt[tr];var Er=h1[tr],zr=Er<=h1.normal?-1:1,$t=Sx(Wt,aS,Er,zr);if(!$t)throw new Error("Could not find a matching font-stretch value for "+tr);return $t})(Ht.stretch,sr),sr=(function(tr,Wt){if(Wt[tr])return Wt[tr];for(var Er=sS[tr],zr=0;zr<Er.length;++zr)if(Wt[Er[zr]])return Wt[Er[zr]];throw new Error("Could not find a matching font-style for "+tr)})(Ht.style,sr),!(sr=(function(tr,Wt){if(Wt[tr])return Wt[tr];if(tr===400&&Wt[500])return Wt[500];if(tr===500&&Wt[400])return Wt[400];var Er=pk[tr],zr=Sx(Wt,lS,Er,tr<400?-1:1);if(!zr)throw new Error("Could not find a matching font-weight for value "+tr);return zr})(Ht.weight,sr)))throw new Error("Failed to resolve a font for the rule '"+Tx(Ht)+"'.");return sr})(Jt,_t);this.pdf.setFont(mr.ref.name,mr.ref.style)}else{var Ft="";(Et==="bold"||parseInt(Et,10)>=700||Nt==="bold")&&(Ft="bold"),Nt==="italic"&&(Ft+="italic"),Ft.length===0&&(Ft="normal");for(var qt="",vr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ot=0;Ot<rt.length;Ot++){if(this.pdf.internal.getFont(rt[Ot],Ft,{noFallback:!0,disableWarning:!0})!==void 0){qt=rt[Ot];break}if(Ft==="bolditalic"&&this.pdf.internal.getFont(rt[Ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)qt=rt[Ot],Ft="bold";else if(this.pdf.internal.getFont(rt[Ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){qt=rt[Ot],Ft="normal";break}}if(qt===""){for(var Tt=0;Tt<rt.length;Tt++)if(vr[rt[Tt]]){qt=vr[rt[Tt]];break}}qt=qt===""?"Times":qt,this.pdf.setFont(qt,Ft)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ze){this.ctx.globalCompositeOperation=ze}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ze){this.ctx.globalAlpha=ze}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ze){this.ctx.lineDashOffset=ze,ee.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ze){this.ctx.lineDash=ze,ee.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ze){this.ctx.ignoreClearRect=!!ze}})};b.prototype.setLineDash=function(W){this.lineDash=W},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){F.call(this,"fill",!1)},b.prototype.stroke=function(){F.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(W,J){if(isNaN(W)||isNaN(J))throw rn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var re=this.ctx.transform.applyToPoint(new l(W,J));this.path.push({type:"mt",x:re.x,y:re.y}),this.ctx.lastPoint=new l(W,J)},b.prototype.closePath=function(){var W=new l(0,0),J=0;for(J=this.path.length-1;J!==-1;J--)if(this.path[J].type==="begin"&&Gr(this.path[J+1])==="object"&&typeof this.path[J+1].x=="number"){W=new l(this.path[J+1].x,this.path[J+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(W.x,W.y)},b.prototype.lineTo=function(W,J){if(isNaN(W)||isNaN(J))throw rn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var re=this.ctx.transform.applyToPoint(new l(W,J));this.path.push({type:"lt",x:re.x,y:re.y}),this.ctx.lastPoint=new l(re.x,re.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},b.prototype.quadraticCurveTo=function(W,J,re,he){if(isNaN(re)||isNaN(he)||isNaN(W)||isNaN(J))throw rn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var me=this.ctx.transform.applyToPoint(new l(re,he)),Se=this.ctx.transform.applyToPoint(new l(W,J));this.path.push({type:"qct",x1:Se.x,y1:Se.y,x:me.x,y:me.y}),this.ctx.lastPoint=new l(me.x,me.y)},b.prototype.bezierCurveTo=function(W,J,re,he,me,Se){if(isNaN(me)||isNaN(Se)||isNaN(W)||isNaN(J)||isNaN(re)||isNaN(he))throw rn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ke=this.ctx.transform.applyToPoint(new l(me,Se)),Ce=this.ctx.transform.applyToPoint(new l(W,J)),ge=this.ctx.transform.applyToPoint(new l(re,he));this.path.push({type:"bct",x1:Ce.x,y1:Ce.y,x2:ge.x,y2:ge.y,x:ke.x,y:ke.y}),this.ctx.lastPoint=new l(ke.x,ke.y)},b.prototype.arc=function(W,J,re,he,me,Se){if(isNaN(W)||isNaN(J)||isNaN(re)||isNaN(he)||isNaN(me))throw rn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Se=!!Se,!this.ctx.transform.isIdentity){var ke=this.ctx.transform.applyToPoint(new l(W,J));W=ke.x,J=ke.y;var Ce=this.ctx.transform.applyToPoint(new l(0,re)),ge=this.ctx.transform.applyToPoint(new l(0,0));re=Math.sqrt(Math.pow(Ce.x-ge.x,2)+Math.pow(Ce.y-ge.y,2))}Math.abs(me-he)>=2*Math.PI&&(he=0,me=2*Math.PI),this.path.push({type:"arc",x:W,y:J,radius:re,startAngle:he,endAngle:me,counterclockwise:Se})},b.prototype.arcTo=function(W,J,re,he,me){throw new Error("arcTo not implemented.")},b.prototype.rect=function(W,J,re,he){if(isNaN(W)||isNaN(J)||isNaN(re)||isNaN(he))throw rn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(W,J),this.lineTo(W+re,J),this.lineTo(W+re,J+he),this.lineTo(W,J+he),this.lineTo(W,J),this.lineTo(W+re,J),this.lineTo(W,J)},b.prototype.fillRect=function(W,J,re,he){if(isNaN(W)||isNaN(J)||isNaN(re)||isNaN(he))throw rn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var me={};this.lineCap!=="butt"&&(me.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(me.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(W,J,re,he),this.fill(),me.hasOwnProperty("lineCap")&&(this.lineCap=me.lineCap),me.hasOwnProperty("lineJoin")&&(this.lineJoin=me.lineJoin)}},b.prototype.strokeRect=function(W,J,re,he){if(isNaN(W)||isNaN(J)||isNaN(re)||isNaN(he))throw rn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");B.call(this)||(this.beginPath(),this.rect(W,J,re,he),this.stroke())},b.prototype.clearRect=function(W,J,re,he){if(isNaN(W)||isNaN(J)||isNaN(re)||isNaN(he))throw rn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(W,J,re,he))},b.prototype.save=function(W){W=typeof W!="boolean"||W;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("q");if(this.pdf.setPage(J),W){this.ctx.fontSize=this.pdf.internal.getFontSize();var he=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=he}},b.prototype.restore=function(W){W=typeof W!="boolean"||W;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("Q");this.pdf.setPage(J),W&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var S=function(W){var J,re,he,me;if(W.isCanvasGradient===!0&&(W=W.getColor()),!W)return{r:0,g:0,b:0,a:0,style:W};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(W))J=0,re=0,he=0,me=0;else{var Se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(W);if(Se!==null)J=parseInt(Se[1]),re=parseInt(Se[2]),he=parseInt(Se[3]),me=1;else if((Se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(W))!==null)J=parseInt(Se[1]),re=parseInt(Se[2]),he=parseInt(Se[3]),me=parseFloat(Se[4]);else{if(me=1,typeof W=="string"&&W.charAt(0)!=="#"){var ke=new Zw(W);W=ke.ok?ke.toHex():"#000000"}W.length===4?(J=W.substring(1,2),J+=J,re=W.substring(2,3),re+=re,he=W.substring(3,4),he+=he):(J=W.substring(1,3),re=W.substring(3,5),he=W.substring(5,7)),J=parseInt(J,16),re=parseInt(re,16),he=parseInt(he,16)}}return{r:J,g:re,b:he,a:me,style:W}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},B=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(W,J,re,he){if(isNaN(J)||isNaN(re)||typeof W!="string")throw rn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(he=isNaN(he)?void 0:he,!x.call(this)){var me=oe(this.ctx.transform.rotation),Se=this.ctx.transform.scaleX;w.call(this,{text:W,x:J,y:re,scale:Se,angle:me,align:this.textAlign,maxWidth:he})}},b.prototype.strokeText=function(W,J,re,he){if(isNaN(J)||isNaN(re)||typeof W!="string")throw rn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!B.call(this)){he=isNaN(he)?void 0:he;var me=oe(this.ctx.transform.rotation),Se=this.ctx.transform.scaleX;w.call(this,{text:W,x:J,y:re,scale:Se,renderingMode:"stroke",angle:me,align:this.textAlign,maxWidth:he})}},b.prototype.measureText=function(W){if(typeof W!="string")throw rn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var J=this.pdf,re=this.pdf.internal.scaleFactor,he=J.internal.getFontSize(),me=J.getStringUnitWidth(W)*he/J.internal.scaleFactor;return new function(Se){var ke=(Se=Se||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ke}}),this}({width:me*=Math.round(96*re/72*1e4)/1e4})},b.prototype.scale=function(W,J){if(isNaN(W)||isNaN(J))throw rn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var re=new h(W,0,0,J,0,0);this.ctx.transform=this.ctx.transform.multiply(re)},b.prototype.rotate=function(W){if(isNaN(W))throw rn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var J=new h(Math.cos(W),Math.sin(W),-Math.sin(W),Math.cos(W),0,0);this.ctx.transform=this.ctx.transform.multiply(J)},b.prototype.translate=function(W,J){if(isNaN(W)||isNaN(J))throw rn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var re=new h(1,0,0,1,W,J);this.ctx.transform=this.ctx.transform.multiply(re)},b.prototype.transform=function(W,J,re,he,me,Se){if(isNaN(W)||isNaN(J)||isNaN(re)||isNaN(he)||isNaN(me)||isNaN(Se))throw rn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ke=new h(W,J,re,he,me,Se);this.ctx.transform=this.ctx.transform.multiply(ke)},b.prototype.setTransform=function(W,J,re,he,me,Se){W=isNaN(W)?1:W,J=isNaN(J)?0:J,re=isNaN(re)?0:re,he=isNaN(he)?1:he,me=isNaN(me)?0:me,Se=isNaN(Se)?0:Se,this.ctx.transform=new h(W,J,re,he,me,Se)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(W,J,re,he,me,Se,ke,Ce,ge){var Fe=this.pdf.getImageProperties(W),Ke=1,Qe=1,ze=1,de=1;he!==void 0&&Ce!==void 0&&(ze=Ce/he,de=ge/me,Ke=Fe.width/he*Ce/he,Qe=Fe.height/me*ge/me),Se===void 0&&(Se=J,ke=re,J=0,re=0),he!==void 0&&Ce===void 0&&(Ce=he,ge=me),he===void 0&&Ce===void 0&&(Ce=Fe.width,ge=Fe.height);for(var Nt,Et=this.ctx.transform.decompose(),wt=oe(Et.rotate.shx),He=new h,ot=(He=(He=(He=He.multiply(Et.translate)).multiply(Et.skew)).multiply(Et.scale)).applyToRectangle(new u(Se-J*ze,ke-re*de,he*Ke,me*Qe)),rt=L.call(this,ot),Jt=[],_t=0;_t<rt.length;_t+=1)Jt.indexOf(rt[_t])===-1&&Jt.push(rt[_t]);if($(Jt),this.autoPaging)for(var mr=Jt[0],Ft=Jt[Jt.length-1],qt=mr;qt<Ft+1;qt++){this.pdf.setPage(qt);var vr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ot=qt===1?this.posY+this.margin[0]:this.margin[0],Tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],jt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=qt===1?0:Tt+(qt-2)*jt;if(this.ctx.clip_path.length!==0){var Ir=this.path;Nt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(Nt,this.posX+this.margin[3],-pt+Ot+this.ctx.prevPageLastElemOffset),ie.call(this,"fill",!0),this.path=Ir}var ir=JSON.parse(JSON.stringify(ot));ir=O([ir],this.posX+this.margin[3],-pt+Ot+this.ctx.prevPageLastElemOffset)[0];var ht=(qt>mr||qt<Ft)&&E.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vr,jt,null).clip().discardPath()),this.pdf.addImage(W,"JPEG",ir.x,ir.y,ir.w,ir.h,null,null,wt),ht&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(W,"JPEG",ot.x,ot.y,ot.w,ot.h,null,null,wt)};var L=function(W,J,re){var he=[];J=J||this.pdf.internal.pageSize.width,re=re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var me=this.posY+this.ctx.prevPageLastElemOffset;switch(W.type){default:case"mt":case"lt":he.push(Math.floor((W.y+me)/re)+1);break;case"arc":he.push(Math.floor((W.y+me-W.radius)/re)+1),he.push(Math.floor((W.y+me+W.radius)/re)+1);break;case"qct":var Se=xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,W.x1,W.y1,W.x,W.y);he.push(Math.floor((Se.y+me)/re)+1),he.push(Math.floor((Se.y+Se.h+me)/re)+1);break;case"bct":var ke=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,W.x1,W.y1,W.x2,W.y2,W.x,W.y);he.push(Math.floor((ke.y+me)/re)+1),he.push(Math.floor((ke.y+ke.h+me)/re)+1);break;case"rect":he.push(Math.floor((W.y+me)/re)+1),he.push(Math.floor((W.y+W.h+me)/re)+1)}for(var Ce=0;Ce<he.length;Ce+=1)for(;this.pdf.internal.getNumberOfPages()<he[Ce];)A.call(this);return he},A=function(){var W=this.fillStyle,J=this.strokeStyle,re=this.font,he=this.lineCap,me=this.lineWidth,Se=this.lineJoin;this.pdf.addPage(),this.fillStyle=W,this.strokeStyle=J,this.font=re,this.lineCap=he,this.lineWidth=me,this.lineJoin=Se},O=function(W,J,re){for(var he=0;he<W.length;he++)switch(W[he].type){case"bct":W[he].x2+=J,W[he].y2+=re;case"qct":W[he].x1+=J,W[he].y1+=re;default:W[he].x+=J,W[he].y+=re}return W},$=function(W){return W.sort(function(J,re){return J-re})},F=function(W,J){for(var re,he,me=this.fillStyle,Se=this.strokeStyle,ke=this.lineCap,Ce=this.lineWidth,ge=Math.abs(Ce*this.ctx.transform.scaleX),Fe=this.lineJoin,Ke=JSON.parse(JSON.stringify(this.path)),Qe=JSON.parse(JSON.stringify(this.path)),ze=[],de=0;de<Qe.length;de++)if(Qe[de].x!==void 0)for(var Nt=L.call(this,Qe[de]),Et=0;Et<Nt.length;Et+=1)ze.indexOf(Nt[Et])===-1&&ze.push(Nt[Et]);for(var wt=0;wt<ze.length;wt++)for(;this.pdf.internal.getNumberOfPages()<ze[wt];)A.call(this);if($(ze),this.autoPaging)for(var He=ze[0],ot=ze[ze.length-1],rt=He;rt<ot+1;rt++){this.pdf.setPage(rt),this.fillStyle=me,this.strokeStyle=Se,this.lineCap=ke,this.lineWidth=ge,this.lineJoin=Fe;var Jt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_t=rt===1?this.posY+this.margin[0]:this.margin[0],mr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],qt=rt===1?0:mr+(rt-2)*Ft;if(this.ctx.clip_path.length!==0){var vr=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(re,this.posX+this.margin[3],-qt+_t+this.ctx.prevPageLastElemOffset),ie.call(this,W,!0),this.path=vr}if(he=JSON.parse(JSON.stringify(Ke)),this.path=O(he,this.posX+this.margin[3],-qt+_t+this.ctx.prevPageLastElemOffset),J===!1||rt===0){var Ot=(rt>He||rt<ot)&&E.call(this);Ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Jt,Ft,null).clip().discardPath()),ie.call(this,W,J),Ot&&this.pdf.restoreGraphicsState()}this.lineWidth=Ce}else this.lineWidth=ge,ie.call(this,W,J),this.lineWidth=Ce;this.path=Ke},ie=function(W,J){if((W!=="stroke"||J||!B.call(this))&&(W==="stroke"||J||!x.call(this))){for(var re,he,me=[],Se=this.path,ke=0;ke<Se.length;ke++){var Ce=Se[ke];switch(Ce.type){case"begin":me.push({begin:!0});break;case"close":me.push({close:!0});break;case"mt":me.push({start:Ce,deltas:[],abs:[]});break;case"lt":var ge=me.length;if(Se[ke-1]&&!isNaN(Se[ke-1].x)&&(re=[Ce.x-Se[ke-1].x,Ce.y-Se[ke-1].y],ge>0)){for(;ge>=0;ge--)if(me[ge-1].close!==!0&&me[ge-1].begin!==!0){me[ge-1].deltas.push(re),me[ge-1].abs.push(Ce);break}}break;case"bct":re=[Ce.x1-Se[ke-1].x,Ce.y1-Se[ke-1].y,Ce.x2-Se[ke-1].x,Ce.y2-Se[ke-1].y,Ce.x-Se[ke-1].x,Ce.y-Se[ke-1].y],me[me.length-1].deltas.push(re);break;case"qct":var Fe=Se[ke-1].x+2/3*(Ce.x1-Se[ke-1].x),Ke=Se[ke-1].y+2/3*(Ce.y1-Se[ke-1].y),Qe=Ce.x+2/3*(Ce.x1-Ce.x),ze=Ce.y+2/3*(Ce.y1-Ce.y),de=Ce.x,Nt=Ce.y;re=[Fe-Se[ke-1].x,Ke-Se[ke-1].y,Qe-Se[ke-1].x,ze-Se[ke-1].y,de-Se[ke-1].x,Nt-Se[ke-1].y],me[me.length-1].deltas.push(re);break;case"arc":me.push({deltas:[],abs:[],arc:!0}),Array.isArray(me[me.length-1].abs)&&me[me.length-1].abs.push(Ce)}}he=J?null:W==="stroke"?"stroke":"fill";for(var Et=!1,wt=0;wt<me.length;wt++)if(me[wt].arc)for(var He=me[wt].abs,ot=0;ot<He.length;ot++){var rt=He[ot];rt.type==="arc"?k.call(this,rt.x,rt.y,rt.radius,rt.startAngle,rt.endAngle,rt.counterclockwise,void 0,J,!Et):N.call(this,rt.x,rt.y),Et=!0}else if(me[wt].close===!0)this.pdf.internal.out("h"),Et=!1;else if(me[wt].begin!==!0){var Jt=me[wt].start.x,_t=me[wt].start.y;D.call(this,me[wt].deltas,Jt,_t),Et=!0}he&&I.call(this,he),J&&M.call(this)}},ue=function(W){var J=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,re=J*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return W-re;case"top":return W+J-re;case"hanging":return W+J-2*re;case"middle":return W+J/2-re;default:return W}},V=function(W){return W+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var W=function(){};return W.colorStops=[],W.addColorStop=function(J,re){this.colorStops.push([J,re])},W.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},W.isCanvasGradient=!0,W},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(W,J,re,he,me,Se,ke,Ce,ge){for(var Fe=ne.call(this,re,he,me,Se),Ke=0;Ke<Fe.length;Ke++){var Qe=Fe[Ke];Ke===0&&(ge?C.call(this,Qe.x1+W,Qe.y1+J):N.call(this,Qe.x1+W,Qe.y1+J)),q.call(this,W,J,Qe.x2,Qe.y2,Qe.x3,Qe.y3,Qe.x4,Qe.y4)}Ce?M.call(this):I.call(this,ke)},I=function(W){switch(W){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(W,J){this.pdf.internal.out(t(W)+" "+n(J)+" m")},w=function(W){var J;switch(W.align){case"right":case"end":J="right";break;case"center":J="center";break;default:J="left"}var re=this.pdf.getTextDimensions(W.text),he=ue.call(this,W.y),me=V.call(this,he)-re.h,Se=this.ctx.transform.applyToPoint(new l(W.x,he)),ke=this.ctx.transform.decompose(),Ce=new h;Ce=(Ce=(Ce=Ce.multiply(ke.translate)).multiply(ke.skew)).multiply(ke.scale);for(var ge,Fe,Ke,Qe=this.ctx.transform.applyToRectangle(new u(W.x,he,re.w,re.h)),ze=Ce.applyToRectangle(new u(W.x,me,re.w,re.h)),de=L.call(this,ze),Nt=[],Et=0;Et<de.length;Et+=1)Nt.indexOf(de[Et])===-1&&Nt.push(de[Et]);if($(Nt),this.autoPaging)for(var wt=Nt[0],He=Nt[Nt.length-1],ot=wt;ot<He+1;ot++){this.pdf.setPage(ot);var rt=ot===1?this.posY+this.margin[0]:this.margin[0],Jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_t=this.pdf.internal.pageSize.height-this.margin[2],mr=_t-this.margin[0],Ft=this.pdf.internal.pageSize.width-this.margin[1],qt=Ft-this.margin[3],vr=ot===1?0:Jt+(ot-2)*mr;if(this.ctx.clip_path.length!==0){var Ot=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(ge,this.posX+this.margin[3],-1*vr+rt),ie.call(this,"fill",!0),this.path=Ot}var Tt=O([JSON.parse(JSON.stringify(ze))],this.posX+this.margin[3],-vr+rt+this.ctx.prevPageLastElemOffset)[0];W.scale>=.01&&(Fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Fe*W.scale),Ke=this.lineWidth,this.lineWidth=Ke*W.scale);var jt=this.autoPaging!=="text";if(jt||Tt.y+Tt.h<=_t){if(jt||Tt.y>=rt&&Tt.x<=Ft){var pt=jt?W.text:this.pdf.splitTextToSize(W.text,W.maxWidth||Ft-Tt.x)[0],Ir=O([JSON.parse(JSON.stringify(Qe))],this.posX+this.margin[3],-vr+rt+this.ctx.prevPageLastElemOffset)[0],ir=jt&&(ot>wt||ot<He)&&E.call(this);ir&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qt,mr,null).clip().discardPath()),this.pdf.text(pt,Ir.x,Ir.y,{angle:W.angle,align:J,renderingMode:W.renderingMode}),ir&&this.pdf.restoreGraphicsState()}}else Tt.y<_t&&(this.ctx.prevPageLastElemOffset+=_t-Tt.y);W.scale>=.01&&(this.pdf.setFontSize(Fe),this.lineWidth=Ke)}else W.scale>=.01&&(Fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Fe*W.scale),Ke=this.lineWidth,this.lineWidth=Ke*W.scale),this.pdf.text(W.text,Se.x+this.posX,Se.y+this.posY,{angle:W.angle,align:J,renderingMode:W.renderingMode,maxWidth:W.maxWidth}),W.scale>=.01&&(this.pdf.setFontSize(Fe),this.lineWidth=Ke)},N=function(W,J,re,he){re=re||0,he=he||0,this.pdf.internal.out(t(W+re)+" "+n(J+he)+" l")},D=function(W,J,re){return this.pdf.lines(W,J,re,null,null)},q=function(W,J,re,he,me,Se,ke,Ce){this.pdf.internal.out([e(i(re+W)),e(o(he+J)),e(i(me+W)),e(o(Se+J)),e(i(ke+W)),e(o(Ce+J)),"c"].join(" "))},ne=function(W,J,re,he){for(var me=2*Math.PI,Se=Math.PI/2;J>re;)J-=me;var ke=Math.abs(re-J);ke<me&&he&&(ke=me-ke);for(var Ce=[],ge=he?-1:1,Fe=J;ke>1e-5;){var Ke=Fe+ge*Math.min(ke,Se);Ce.push(se.call(this,W,Fe,Ke)),ke-=Math.abs(Ke-Fe),Fe=Ke}return Ce},se=function(W,J,re){var he=(re-J)/2,me=W*Math.cos(he),Se=W*Math.sin(he),ke=me,Ce=-Se,ge=ke*ke+Ce*Ce,Fe=ge+ke*me+Ce*Se,Ke=4/3*(Math.sqrt(2*ge*Fe)-Fe)/(ke*Se-Ce*me),Qe=ke-Ke*Ce,ze=Ce+Ke*ke,de=Qe,Nt=-ze,Et=he+J,wt=Math.cos(Et),He=Math.sin(Et);return{x1:W*Math.cos(J),y1:W*Math.sin(J),x2:Qe*wt-ze*He,y2:Qe*He+ze*wt,x3:de*wt-Nt*He,y3:de*He+Nt*wt,x4:W*Math.cos(re),y4:W*Math.sin(re)}},oe=function(W){return 180*W/Math.PI},xe=function(W,J,re,he,me,Se){var ke=W+.5*(re-W),Ce=J+.5*(he-J),ge=me+.5*(re-me),Fe=Se+.5*(he-Se),Ke=Math.min(W,me,ke,ge),Qe=Math.max(W,me,ke,ge),ze=Math.min(J,Se,Ce,Fe),de=Math.max(J,Se,Ce,Fe);return new u(Ke,ze,Qe-Ke,de-ze)},we=function(W,J,re,he,me,Se,ke,Ce){var ge,Fe,Ke,Qe,ze,de,Nt,Et,wt,He,ot,rt,Jt,_t,mr=re-W,Ft=he-J,qt=me-re,vr=Se-he,Ot=ke-me,Tt=Ce-Se;for(Fe=0;Fe<41;Fe++)wt=(Nt=(Ke=W+(ge=Fe/40)*mr)+ge*((ze=re+ge*qt)-Ke))+ge*(ze+ge*(me+ge*Ot-ze)-Nt),He=(Et=(Qe=J+ge*Ft)+ge*((de=he+ge*vr)-Qe))+ge*(de+ge*(Se+ge*Tt-de)-Et),Fe==0?(ot=wt,rt=He,Jt=wt,_t=He):(ot=Math.min(ot,wt),rt=Math.min(rt,He),Jt=Math.max(Jt,wt),_t=Math.max(_t,He));return new u(Math.round(ot),Math.round(rt),Math.round(Jt-ot),Math.round(_t-rt))},ee=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var W,J,re=(W=this.ctx.lineDash,J=this.ctx.lineDashOffset,JSON.stringify({lineDash:W,lineDashOffset:J}));this.prevLineDash!==re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=re)}}})(Ct.API),(function(r){var e=function(l){var u,h,d,g,b,S,x,B,E,L;for(h=[],d=0,g=(l+=u="\0\0\0\0".slice(l.length%4||4)).length;g>d;d+=4)(b=(l.charCodeAt(d)<<24)+(l.charCodeAt(d+1)<<16)+(l.charCodeAt(d+2)<<8)+l.charCodeAt(d+3))!==0?(S=(b=((b=((b=((b=(b-(L=b%85))/85)-(E=b%85))/85)-(B=b%85))/85)-(x=b%85))/85)%85,h.push(S+33,x+33,B+33,E+33,L+33)):h.push(122);return(function(A,O){for(var $=O;$>0;$--)A.pop()})(h,u.length),String.fromCharCode.apply(String,h)+"~>"},t=function(l){var u,h,d,g,b,S=String,x="length",B=255,E="charCodeAt",L="slice",A="replace";for(l[L](-2),l=l[L](0,-2)[A](/\s/g,"")[A]("z","!!!!!"),d=[],g=0,b=(l+=u="uuuuu"[L](l[x]%5||5))[x];b>g;g+=5)h=52200625*(l[E](g)-33)+614125*(l[E](g+1)-33)+7225*(l[E](g+2)-33)+85*(l[E](g+3)-33)+(l[E](g+4)-33),d.push(B&h>>24,B&h>>16,B&h>>8,B&h);return(function(O,$){for(var F=$;F>0;F--)O.pop()})(d,u[x]),S.fromCharCode.apply(S,d)},n=function(l){return l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(l){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),u.test(l)===!1)return"";for(var h="",d=0;d<l.length;d+=2)h+=String.fromCharCode("0x"+(l[d]+l[d+1]));return h},o=function(l){for(var u=new Uint8Array(l.length),h=l.length;h--;)u[h]=l.charCodeAt(h);return(u=o1(u)).reduce(function(d,g){return d+String.fromCharCode(g)},"")};r.processDataByFilters=function(l,u){var h=0,d=l||"",g=[];for(typeof(u=u||[])=="string"&&(u=[u]),h=0;h<u.length;h+=1)switch(u[h]){case"ASCII85Decode":case"/ASCII85Decode":d=t(d),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=i(d),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=n(d),g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=o(d),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[h]+'" is not implemented')}return{data:d,reverseChain:g.reverse().join(" ")}}})(Ct.API),(function(r){r.loadFile=function(e,t,n){return(function(i,o,l){o=o!==!1,l=typeof l=="function"?l:function(){};var u=void 0;try{u=(function(h,d,g){var b=new XMLHttpRequest,S=0,x=function(B){var E=B.length,L=[],A=String.fromCharCode;for(S=0;S<E;S+=1)L.push(A(255&B.charCodeAt(S)));return L.join("")};if(b.open("GET",h,!d),b.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(b.onload=function(){b.status===200?g(x(this.responseText)):g(void 0)}),b.send(null),d&&b.status===200)return x(b.responseText)})(i,o,l)}catch{}return u})(e,t,n)},r.loadImageFile=r.loadFile})(Ct.API),(function(r){function e(){return(Qt.html2canvas?Promise.resolve(Qt.html2canvas):fu(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function t(){return(Qt.DOMPurify?Promise.resolve(Qt.DOMPurify):fu(()=>import("./purify.es-aGzT-_H7.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var n=function(u){var h=Gr(u);return h==="undefined"?"undefined":h==="string"||u instanceof String?"string":h==="number"||u instanceof Number?"number":h==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":h==="object"?"object":"unknown"},i=function(u,h){var d=document.createElement(u);for(var g in h.className&&(d.className=h.className),h.innerHTML&&h.dompurify&&(d.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)d.style[g]=h.style[g];return d},o=function u(h,d){for(var g=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),b=h.firstChild;b;b=b.nextSibling)d!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||g.appendChild(u(b,d));return h.nodeType===1&&(h.nodeName==="CANVAS"?(g.width=h.width,g.height=h.height,g.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(g.value=h.value),g.addEventListener("load",function(){g.scrollTop=h.scrollTop,g.scrollLeft=h.scrollLeft},!0)),g},l=function u(h){var d=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),g=u.convert(Promise.resolve(),d);return(g=g.setProgress(1,u,1,[u])).set(h)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(u,h){return u.__proto__=h||l.prototype,u},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(u,h){return this.then(function(){switch(h=h||(function(d){switch(n(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(u),h){case"string":return this.then(t).then(function(d){return this.set({src:i("div",{innerHTML:u,dompurify:d})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},l.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(h){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,h(this.prop.container,d)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(h){var d=this.opt.jsPDF,g=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,S=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete S.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=g,g)for(var x=0;x<g.length;++x){var B=g[x],E=B.src.find(function(L){return L.format==="truetype"});E&&d.addFont(E.url,B.ref.name,B.ref.style)}return S.windowHeight=S.windowHeight||0,S.windowHeight=S.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):S.windowHeight,d.context2d.save(!0),h(this.prop.container,S)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(u,h,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(u,h):this.outputPdf(u,h)},l.prototype.outputPdf=function(u,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,h)})},l.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},l.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(u){if(n(u)!=="object")return this;var h=Object.keys(u||{}).map(function(d){if(d in l.template.prop)return function(){this.prop[d]=u[d]};switch(d){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[d]=u[d]}}},this);return this.then(function(){return this.thenList(h)})},l.prototype.get=function(u,h){return this.then(function(){var d=u in l.template.prop?this.prop[u]:this.opt[u];return h?h(d):d})},l.prototype.setMargin=function(u){return this.then(function(){switch(n(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},l.prototype.setPageSize=function(u){function h(d,g){return Math.floor(d*g/72*96)}return this.then(function(){(u=u||Ct.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:h(u.inner.width,u.k),height:h(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},l.prototype.setProgress=function(u,h,d,g){return u!=null&&(this.progress.val=u),h!=null&&(this.progress.state=h),d!=null&&(this.progress.n=d),g!=null&&(this.progress.stack=g),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(u,h,d,g){return this.setProgress(u?this.progress.val+u:null,h||null,d?this.progress.n+d:null,g?this.progress.stack.concat(g):null)},l.prototype.then=function(u,h){var d=this;return this.thenCore(u,h,function(g,b){return d.updateProgress(null,null,1,[g]),Promise.prototype.then.call(this,function(S){return d.updateProgress(null,g),S}).then(g,b).then(function(S){return d.updateProgress(1),S})})},l.prototype.thenCore=function(u,h,d){d=d||Promise.prototype.then;var g=this;u&&(u=u.bind(g)),h&&(h=h.bind(g));var b=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?g:l.convert(Object.assign({},g),Promise.prototype),S=d.call(b,u,h);return l.convert(S,g.__proto__)},l.prototype.thenExternal=function(u,h){return Promise.prototype.then.call(this,u,h)},l.prototype.thenList=function(u){var h=this;return u.forEach(function(d){h=h.thenCore(d)}),h},l.prototype.catch=function(u){u&&(u=u.bind(this));var h=Promise.prototype.catch.call(this,u);return l.convert(h,this)},l.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},l.prototype.error=function(u){return this.then(function(){throw new Error(u)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Ct.getPageSize=function(u,h,d){if(Gr(u)==="object"){var g=u;u=g.orientation,h=g.unit||h,d=g.format||d}h=h||"mm",d=d||"a4",u=(""+(u||"P")).toLowerCase();var b,S=(""+d).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+h}var B,E=0,L=0;if(x.hasOwnProperty(S))E=x[S][1]/b,L=x[S][0]/b;else try{E=d[1],L=d[0]}catch{throw new Error("Invalid format: "+d)}if(u==="p"||u==="portrait")u="p",L>E&&(B=L,L=E,E=B);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",E>L&&(B=L,L=E,E=B)}return{width:L,height:E,unit:h,k:b,orientation:u}},r.html=function(u,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(Ng):null;var d=new l(h);return h.worker?d:d.from(u).doCallback()}})(Ct.API),Ct.API.addJS=function(r){return kx=r,this.internal.events.subscribe("postPutResources",function(){zp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(zp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Cx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+kx+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){zp!==void 0&&Cx!==void 0&&this.internal.out("/Names <</JavaScript "+zp+" 0 R>>")}),this},(function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),o=0;o<i.length;o++){var l=i[o],u=n.exec(l);if(u!=null){var h=u[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(l)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,g=[];for(o=0;o<d;o++){var b=t.internal.newObject();g.push(b);var S=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+S.objId+" 0 R /XYZ null null null]>> endobj")}var x=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<g.length;o++)t.internal.write("(page_"+(o+1)+")"+g[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+x+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,i,o){var l={title:i,options:o,children:[]};return n==null&&(n=this.root),n.children.push(l),l},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var l=n.children[o];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var u=this.count=this.count_r({count:0},l);if(u>0&&this.line("/Count "+u),l.options&&l.options.pageNumber){var h=t.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,i){for(var o=0;o<i.children.length;o++)n.count++,this.count_r(n,i.children[o]);return n.count}}])})(Ct.API),(function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,i,o,l,u){var h,d=this.decode.DCT_DECODE,g=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=l||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,h=(function(b){for(var S,x=256*b.charCodeAt(4)+b.charCodeAt(5),B=b.length,E={width:0,height:0,numcomponents:1},L=4;L<B;L+=2){if(L+=x,e.indexOf(b.charCodeAt(L+1))!==-1){S=256*b.charCodeAt(L+5)+b.charCodeAt(L+6),E={width:256*b.charCodeAt(L+7)+b.charCodeAt(L+8),height:S,numcomponents:b.charCodeAt(L+9)};break}x=256*b.charCodeAt(L+2)+b.charCodeAt(L+3)}return E})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),h.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}g={data:t,width:h.width,height:h.height,colorSpace:u,bitsPerComponent:8,filter:d,index:n,alias:i}}return g}})(Ct.API),Ct.API.processPNG=function(r,e,t,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var i,o=ek(r,{checkCrc:!0}),l=o.width,u=o.height,h=o.channels,d=o.palette,g=o.depth;i=d&&h===1?(function(k){for(var I=k.width,M=k.height,C=k.data,w=k.palette,N=k.depth,D=!1,q=[],ne=[],se=void 0,oe=!1,xe=0,we=0;we<w.length;we++){var ee=Ry(w[we],4),W=ee[0],J=ee[1],re=ee[2],he=ee[3];q.push(W,J,re),he!=null&&(he===0?(xe++,ne.length<1&&ne.push(we)):he<255&&(oe=!0))}if(oe||xe>1){D=!0,ne=void 0;var me=I*M;se=new Uint8Array(me);for(var Se=new DataView(C.buffer),ke=0;ke<me;ke++){var Ce=Lg(Se,ke,N),ge=Ry(w[Ce],4)[3];se[ke]=ge}}else xe===0&&(ne=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:D?8:void 0,colorBytes:C,alphaBytes:se,needSMask:D,palette:q,mask:ne}})(o):h===2||h===4?(function(k){for(var I=k.data,M=k.width,C=k.height,w=k.channels,N=k.depth,D=w===2?"DeviceGray":"DeviceRGB",q=w-1,ne=M*C,se=q,oe=ne*se,xe=1*ne,we=Math.ceil(oe*N/8),ee=Math.ceil(xe*N/8),W=new Uint8Array(we),J=new Uint8Array(ee),re=new DataView(I.buffer),he=new DataView(W.buffer),me=new DataView(J.buffer),Se=!1,ke=0;ke<ne;ke++){for(var Ce=ke*w,ge=0;ge<se;ge++)Fx(he,Lg(re,Ce+ge,N),ke*se+ge,N);var Fe=Lg(re,Ce+se,N);Fe<(1<<N)-1&&(Se=!0),Fx(me,Fe,1*ke,N)}return{colorSpace:D,colorsPerPixel:q,sMaskBitsPerComponent:Se?N:void 0,colorBytes:W,alphaBytes:J,needSMask:Se}})(o):(function(k){var I=k.data,M=k.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:M,colorsPerPixel:M==="DeviceGray"?1:3,colorBytes:I instanceof Uint16Array?(function(C){for(var w=C.length,N=new Uint8Array(2*w),D=new DataView(N.buffer,N.byteOffset,N.byteLength),q=0;q<w;q++)D.setUint16(2*q,C[q],!1);return N})(I):I,needSMask:!1}})(o);var b,S,x,B=i,E=B.colorSpace,L=B.colorsPerPixel,A=B.sMaskBitsPerComponent,O=B.colorBytes,$=B.alphaBytes,F=B.needSMask,ie=B.palette,ue=B.mask,V=null;return n!==Ct.API.image_compression.NONE&&typeof o1=="function"?(V=(function(k){var I;switch(k){case Ct.API.image_compression.FAST:I=11;break;case Ct.API.image_compression.MEDIUM:I=13;break;case Ct.API.image_compression.SLOW:I=14;break;default:I=12}return I})(n),b=this.decode.FLATE_DECODE,S="/Predictor ".concat(V," /Colors ").concat(L," /BitsPerComponent ").concat(g," /Columns ").concat(l),r=Rx(O,Math.ceil(l*L*g/8),L,g,n),F&&(x=Rx($,Math.ceil(l*A/8),1,A,n))):(b=void 0,S=void 0,r=O,F&&(x=$)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(x&&this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),{alias:t,data:r,index:e,filter:b,decodeParameters:S,transparency:ue,palette:ie,sMask:x,predictor:V,width:l,height:u,bitsPerComponent:g,sMaskBitsPerComponent:A,colorSpace:E}}},(function(r){r.processGIF89A=function(e,t,n,i){var o=new wk(e),l=o.width,u=o.height,h=[];o.decodeAndBlitFrameRGBA(0,h);var d={data:h,width:l,height:u},g=new Fg(100).encode(d,100);return r.processJPEG.call(this,g,t,n,i)},r.processGIF87A=r.processGIF89A})(Ct.API),da.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},da.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){rn.log("bit decode error:"+t)}},da.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+8*i*4,u=0;u<8&&8*i+u<this.width;u++){var h=this.palette[o>>7-u&1];this.data[l+4*u]=h.blue,this.data[l+4*u+1]=h.green,this.data[l+4*u+2]=h.red,this.data[l+4*u+3]=255}t!==0&&(this.pos+=4-t)}},da.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<r;i++){var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+2*i*4,u=o>>4,h=15&o,d=this.palette[u];if(this.data[l]=d.blue,this.data[l+1]=d.green,this.data[l+2]=d.red,this.data[l+3]=255,2*i+1>=this.width)break;d=this.palette[h],this.data[l+4]=d.blue,this.data[l+4+1]=d.green,this.data[l+4+2]=d.red,this.data[l+4+3]=255}e!==0&&(this.pos+=4-e)}},da.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;if(i<this.palette.length){var l=this.palette[i];this.data[o]=l.red,this.data[o+1]=l.green,this.data[o+2]=l.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}r!==0&&(this.pos+=4-r)}},da.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,u=(o>>5&e)/e*255|0,h=(o>>10&e)/e*255|0,d=o>>15?255:0,g=n*this.width*4+4*i;this.data[g]=h,this.data[g+1]=u,this.data[g+2]=l,this.data[g+3]=d}this.pos+=r}},da.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(l&e)/e*255|0,h=(l>>5&t)/t*255|0,d=(l>>11)/e*255|0,g=i*this.width*4+4*o;this.data[g]=d,this.data[g+1]=h,this.data[g+2]=u,this.data[g+3]=255}this.pos+=r}},da.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*t;this.data[l]=o,this.data[l+1]=i,this.data[l+2]=n,this.data[l+3]=255}this.pos+=this.width%4}},da.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=o,this.data[u+1]=i,this.data[u+2]=n,this.data[u+3]=l}},da.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(e,t,n,i){var o=new da(e,!1),l=o.width,u=o.height,h={data:o.getData(),width:l,height:u},d=new Fg(100).encode(h,100);return r.processJPEG.call(this,d,t,n,i)}})(Ct.API),Vx.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(e,t,n,i){var o=new Vx(e),l=o.width,u=o.height,h={data:o.getData(),width:l,height:u},d=new Fg(100).encode(h,100);return r.processJPEG.call(this,d,t,n,i)}})(Ct.API),Ct.API.processRGBA=function(r,e,t){for(var n=r.data,i=n.length,o=new Uint8Array(i/4*3),l=new Uint8Array(i/4),u=0,h=0,d=0;d<i;d+=4){var g=n[d],b=n[d+1],S=n[d+2],x=n[d+3];o[u++]=g,o[u++]=b,o[u++]=S,l[h++]=x}var B=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:B,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Ct.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},fd=Ct.API,Vp=fd.getCharWidthsArray=function(r,e){var t,n,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),l=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:i.metadata.Unicode.widths,h=u.fof?u.fof:1,d=e.kerning?e.kerning:i.metadata.Unicode.kerning,g=d.fof?d.fof:1,b=e.doKerning!==!1,S=0,x=r.length,B=0,E=u[0]||h,L=[];for(t=0;t<x;t++)n=r.charCodeAt(t),typeof i.metadata.widthOfString=="function"?L.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+l*(1e3/o)||0)/1e3):(S=b&&Gr(d[n])==="object"&&!isNaN(parseInt(d[n][B],10))?d[n][B]/g:0,L.push((u[n]||E)/h+S)),B=n;return L},Ix=fd.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return fd.processArabic&&(r=fd.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,i)/t:Vp.apply(this,arguments).reduce(function(o,l){return o+l},0)},Ex=function(r,e,t,n){for(var i=[],o=0,l=r.length,u=0;o!==l&&u+e[o]<t;)u+=e[o],o++;i.push(r.slice(0,o));var h=o;for(u=0;o!==l;)u+e[o]>n&&(i.push(r.slice(h,o)),u=0,h=o),u+=e[o],o++;return h!==o&&i.push(r.slice(h,o)),i},jx=function(r,e,t){t||(t={});var n,i,o,l,u,h,d,g=[],b=[g],S=t.textIndent||0,x=0,B=0,E=r.split(" "),L=Vp.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?E[0].length+2:t.lineIndent||0){var A=Array(h).join(" "),O=[];E.map(function(F){(F=F.split(/\s*\n/)).length>1?O=O.concat(F.map(function(ie,ue){return(ue&&ie.length?`
`:"")+ie})):O.push(F[0])}),E=O,h=Ix.apply(this,[A,t])}for(o=0,l=E.length;o<l;o++){var $=0;if(n=E[o],h&&n[0]==`
`&&(n=n.substr(1),$=1),S+x+(B=(i=Vp.apply(this,[n,t])).reduce(function(F,ie){return F+ie},0))>e||$){if(B>e){for(u=Ex.apply(this,[n,i,e-(S+x),e]),g.push(u.shift()),g=[u.pop()];u.length;)b.push([u.shift()]);B=i.slice(n.length-(g[0]?g[0].length:0)).reduce(function(F,ie){return F+ie},0)}else g=[n];b.push(g),S=B+h,x=L}else g.push(n),S+=x+B,x=L}return d=h?function(F,ie){return(ie?A:"")+F.join(" ")}:function(F){return F.join(" ")},b.map(d)},fd.splitTextToSize=function(r,e,t){var n,i=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var b=this.internal.getFont(g.fontName,g.fontStyle),S="Unicode";return b.metadata[S]?{widths:b.metadata[S].widths||{0:1},kerning:b.metadata[S].kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var l=1*this.internal.scaleFactor*e/i;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=t.lineIndent;var u,h,d=[];for(u=0,h=n.length;u<h;u++)d=d.concat(jx.apply(this,[n[u],l,o]));return d},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",n={},i={},o=0;o<16;o++)n[t[o]]=e[o],i[e[o]]=t[o];var l=function(S){return"0x"+parseInt(S,10).toString(16)},u=r.__fontmetrics__.compress=function(S){var x,B,E,L,A=["{"];for(var O in S){if(x=S[O],isNaN(parseInt(O,10))?B="'"+O+"'":(O=parseInt(O,10),B=(B=l(O).slice(2)).slice(0,-1)+i[B.slice(-1)]),typeof x=="number")x<0?(E=l(x).slice(3),L="-"):(E=l(x).slice(2),L=""),E=L+E.slice(0,-1)+i[E.slice(-1)];else{if(Gr(x)!=="object")throw new Error("Don't know what to do with value type "+Gr(x)+".");E=u(x)}A.push(B+E)}return A.push("}"),A.join("")},h=r.__fontmetrics__.uncompress=function(S){if(typeof S!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,B,E,L,A={},O=1,$=A,F=[],ie="",ue="",V=S.length-1,k=1;k<V;k+=1)(L=S[k])=="'"?x?(E=x.join(""),x=void 0):x=[]:x?x.push(L):L=="{"?(F.push([$,E]),$={},E=void 0):L=="}"?((B=F.pop())[0][B[1]]=$,E=void 0,$=B[0]):L=="-"?O=-1:E===void 0?n.hasOwnProperty(L)?(ie+=n[L],E=parseInt(ie,16)*O,O=1,ie=""):ie+=L:n.hasOwnProperty(L)?(ue+=n[L],$[E]=parseInt(ue,16)*O,O=1,E=void 0,ue=""):ue+=L;return A},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},b={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(S){var x=S.font,B=b.Unicode[x.postScriptName];B&&(x.metadata.Unicode={},x.metadata.Unicode.widths=B.widths,x.metadata.Unicode.kerning=B.kerning);var E=g.Unicode[x.postScriptName];E&&(x.metadata.Unicode.encoding=E,x.encoding=E.codePages[0])}])})(Ct.API),(function(r){var e=function(t){for(var n=t.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=t.charCodeAt(o);return i};r.API.events.push(["addFont",function(t){var n=void 0,i=t.font,o=t.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(l,u){u=/^\x00\x01\x00\x00/.test(u)?e(u):e(Jp(u)),l.metadata=r.API.TTFFont.open(u),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(i,n)}}])})(Ct),Ct.API.addSvgAsImage=function(r,e,t,n,i,o,l,u){if(isNaN(e)||isNaN(t))throw rn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw rn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=n,h.height=i;var d=h.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,h.width,h.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return(Qt.canvg?Promise.resolve(Qt.canvg):fu(()=>import("./index.es-BGRWuA_W.js"),[])).catch(function(S){return Promise.reject(new Error("Could not load canvg: "+S))}).then(function(S){return S.default?S.default:S}).then(function(S){return S.fromString(d,r,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(S){return S.render(g)}).then(function(){b.addImage(h.toDataURL("image/jpeg",1),e,t,n,i,l,u)})},Ct.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,t);return this},Ct.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,i,o,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(l),h=[],d=0,g=0,b=0;function S(B,E){var L,A=!1;for(L=0;L<B.length;L+=1)B[L]===E&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var x=u.length;for(b=0;b<x;b+=1)t[u[b]].value=t[u[b]].defaultValue,t[u[b]].explicitSet=!1}if(Gr(r)==="object"){for(i in r)if(o=r[i],S(u,i)&&o!==void 0){if(t[i].type==="boolean"&&typeof o=="boolean")t[i].value=o;else if(t[i].type==="name"&&S(t[i].valueSet,o))t[i].value=o;else if(t[i].type==="integer"&&Number.isInteger(o))t[i].value=o;else if(t[i].type==="array"){for(d=0;d<o.length;d+=1)if(n=!0,o[d].length===1&&typeof o[d][0]=="number")h.push(String(o[d]-1));else if(o[d].length>1){for(g=0;g<o[d].length;g+=1)typeof o[d][g]!="number"&&(n=!1);n===!0&&h.push([o[d][0]-1,o[d][1]-1].join(" "))}t[i].value="["+h.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var B,E=[];for(B in t)t[B].explicitSet===!0&&(t[B].type==="name"?E.push("/"+B+" /"+t[B].value):E.push("/"+B+" "+t[B].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),d=o.length+l.length+u.length+i.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+o+l+u+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Ct.API),(function(r){var e=r.API,t=e.pdfEscape16=function(o,l){for(var u,h=l.metadata.Unicode.widths,d=["","0","00","000","0000"],g=[""],b=0,S=o.length;b<S;++b){if(u=l.metadata.characterToGlyph(o.charCodeAt(b)),l.metadata.glyIdsUsed.push(u),l.metadata.toUnicode[u]=o.charCodeAt(b),h.indexOf(u)==-1&&(h.push(u),h.push([parseInt(l.metadata.widthOfGlyph(u),10)])),u=="0")return g.join("");u=u.toString(16),g.push(d[4-u.length],u)}return g.join("")},n=function(o){var l,u,h,d,g,b,S;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],b=0,S=(u=Object.keys(o).sort(function(x,B){return x-B})).length;b<S;b++)l=u[b],h.length>=100&&(g+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),o[l]!==void 0&&o[l]!==null&&typeof o[l].toString=="function"&&(d=("0000"+o[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),h.push("<"+l+"><"+d+">"));return h.length&&(g+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),g+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(l){var u=l.font,h=l.out,d=l.newObject,g=l.putStream;if(u.metadata instanceof r.API.TTFFont&&u.encoding==="Identity-H"){for(var b=u.metadata.Unicode.widths,S=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),x="",B=0;B<S.length;B++)x+=String.fromCharCode(S[B]);var E=d();g({data:x,addLength1:!0,objectId:E}),h("endobj");var L=d();g({data:n(u.metadata.toUnicode),addLength1:!0,objectId:L}),h("endobj");var A=d();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+wd(u.fontName)),h("/FontFile2 "+E+" 0 R"),h("/FontBBox "+r.API.PDFObject.convert(u.metadata.bbox)),h("/Flags "+u.metadata.flags),h("/StemV "+u.metadata.stemV),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h(">>"),h("endobj");var O=d();h("<<"),h("/Type /Font"),h("/BaseFont /"+wd(u.fontName)),h("/FontDescriptor "+A+" 0 R"),h("/W "+r.API.PDFObject.convert(b)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+u.encoding+")"),h(">>"),h(">>"),h("endobj"),u.objectNumber=d(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+L+" 0 R"),h("/BaseFont /"+wd(u.fontName)),h("/Encoding /"+u.encoding),h("/DescendantFonts ["+O+" 0 R]"),h(">>"),h("endobj"),u.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(l){var u=l.font,h=l.out,d=l.newObject,g=l.putStream;if(u.metadata instanceof r.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var b=u.metadata.rawData,S="",x=0;x<b.length;x++)S+=String.fromCharCode(b[x]);var B=d();g({data:S,addLength1:!0,objectId:B}),h("endobj");var E=d();g({data:n(u.metadata.toUnicode),addLength1:!0,objectId:E}),h("endobj");var L=d();h("<<"),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h("/StemV "+u.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+B+" 0 R"),h("/Flags 96"),h("/FontBBox "+r.API.PDFObject.convert(u.metadata.bbox)),h("/FontName /"+wd(u.fontName)),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h(">>"),h("endobj"),u.objectNumber=d();for(var A=0;A<u.metadata.hmtx.widths.length;A++)u.metadata.hmtx.widths[A]=parseInt(u.metadata.hmtx.widths[A]*(1e3/u.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+wd(u.fontName)+"/FontDescriptor "+L+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),h("endobj"),u.isAlreadyPutted=!0}})(o)}]);var i=function(o){var l,u=o.text||"",h=o.x,d=o.y,g=o.options||{},b=o.mutex||{},S=b.pdfEscape,x=b.activeFontKey,B=b.fonts,E=x,L="",A=0,O="",$=B[E].encoding;if(B[E].encoding!=="Identity-H")return{text:u,x:h,y:d,options:g,mutex:b};for(O=u,E=x,Array.isArray(u)&&(O=u[0]),A=0;A<O.length;A+=1)B[E].metadata.hasOwnProperty("cmap")&&(l=B[E].metadata.cmap.unicode.codeMap[O[A].charCodeAt(0)]),l||O[A].charCodeAt(0)<256&&B[E].metadata.hasOwnProperty("Unicode")?L+=O[A]:L+="";var F="";return parseInt(E.slice(1))<14||$==="WinAnsiEncoding"?F=S(L,E).split("").map(function(ie){return ie.charCodeAt(0).toString(16)}).join(""):$==="Identity-H"&&(F=t(L,B[E])),b.isHex=!0,{text:F,x:h,y:d,options:g,mutex:b}};e.events.push(["postProcessText",function(o){var l=o.text||"",u=[],h={text:l,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(l)){var d=0;for(d=0;d<l.length;d+=1)Array.isArray(l[d])&&l[d].length===3?u.push([i(Object.assign({},h,{text:l[d][0]})).text,l[d][1],l[d][2]]):u.push(i(Object.assign({},h,{text:l[d]})).text);o.text=u}else o.text=i(Object.assign({},h,{text:l})).text}])})(Ct),(function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Ct.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var i,o,l,u,h,d,g,b=e,S=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],B={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},L=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,$=0;this.__bidiEngine__={};var F=function(C){var w=C.charCodeAt(),N=w>>8,D=E[N];return D!==void 0?b[256*D+(255&w)]:N===252||N===253?"AL":A.test(N)?"L":N===8?"R":"N"},ie=function(C){for(var w,N=0;N<C.length;N++){if((w=F(C.charAt(N)))==="L")return!1;if(w==="R")return!0}return!1},ue=function(C,w,N,D){var q,ne,se,oe,xe=w[D];switch(xe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"N":case"AN":break;case"EN":O&&(xe="AN");break;case"AL":O=!0,xe="R";break;case"WS":case"BN":xe="N";break;case"CS":D<1||D+1>=w.length||(q=N[D-1])!=="EN"&&q!=="AN"||(ne=w[D+1])!=="EN"&&ne!=="AN"?xe="N":O&&(ne="AN"),xe=ne===q?ne:"N";break;case"ES":xe=(q=D>0?N[D-1]:"B")==="EN"&&D+1<w.length&&w[D+1]==="EN"?"EN":"N";break;case"ET":if(D>0&&N[D-1]==="EN"){xe="EN";break}if(O){xe="N";break}for(se=D+1,oe=w.length;se<oe&&w[se]==="ET";)se++;xe=se<oe&&w[se]==="EN"?"EN":"N";break;case"NSM":if(l&&!u){for(oe=w.length,se=D+1;se<oe&&w[se]==="NSM";)se++;if(se<oe){var we=C[D],ee=we>=1425&&we<=2303||we===64286;if(q=w[se],ee&&(q==="R"||q==="AL")){xe="R";break}}}xe=D<1||(q=w[D-1])==="B"?"N":N[D-1];break;case"B":O=!1,i=!0,xe=$;break;case"S":o=!0,xe="N"}return xe},V=function(C,w,N){var D=C.split("");return N&&k(D,N,{hiLevel:$}),D.reverse(),w&&w.reverse(),D.join("")},k=function(C,w,N){var D,q,ne,se,oe,xe=-1,we=C.length,ee=0,W=[],J=$?x:S,re=[];for(O=!1,i=!1,o=!1,q=0;q<we;q++)re[q]=F(C[q]);for(ne=0;ne<we;ne++){if(oe=ee,W[ne]=ue(C,re,W,ne),D=240&(ee=J[oe][B[W[ne]]]),ee&=15,w[ne]=se=J[ee][5],D>0)if(D===16){for(q=xe;q<ne;q++)w[q]=1;xe=-1}else xe=-1;if(J[ee][6])xe===-1&&(xe=ne);else if(xe>-1){for(q=xe;q<ne;q++)w[q]=se;xe=-1}re[ne]==="B"&&(w[ne]=0),N.hiLevel|=se}o&&(function(he,me,Se){for(var ke=0;ke<Se;ke++)if(he[ke]==="S"){me[ke]=$;for(var Ce=ke-1;Ce>=0&&he[Ce]==="WS";Ce--)me[Ce]=$}})(re,w,we)},I=function(C,w,N,D,q){if(!(q.hiLevel<C)){if(C===1&&$===1&&!i)return w.reverse(),void(N&&N.reverse());for(var ne,se,oe,xe,we=w.length,ee=0;ee<we;){if(D[ee]>=C){for(oe=ee+1;oe<we&&D[oe]>=C;)oe++;for(xe=ee,se=oe-1;xe<se;xe++,se--)ne=w[xe],w[xe]=w[se],w[se]=ne,N&&(ne=N[xe],N[xe]=N[se],N[se]=ne);ee=oe}ee++}}},M=function(C,w,N){var D=C.split(""),q={hiLevel:$};return N||(N=[]),k(D,N,q),(function(ne,se,oe){if(oe.hiLevel!==0&&g)for(var xe,we=0;we<ne.length;we++)se[we]===1&&(xe=L.indexOf(ne[we]))>=0&&(ne[we]=L[xe+1])})(D,N,q),I(2,D,w,N,q),I(1,D,w,N,q),D.join("")};return this.__bidiEngine__.doBidiReorder=function(C,w,N){if((function(q,ne){if(ne)for(var se=0;se<q.length;se++)ne[se]=se;u===void 0&&(u=ie(q)),d===void 0&&(d=ie(q))})(C,w),l||!h||d)if(l&&h&&u^d)$=u?1:0,C=V(C,w,N);else if(!l&&h&&d)$=u?1:0,C=M(C,w,N),C=V(C,w);else if(!l||u||h||d){if(l&&!h&&u^d)C=V(C,w),u?($=0,C=M(C,w,N)):($=1,C=M(C,w,N),C=V(C,w));else if(l&&u&&!h&&d)$=1,C=M(C,w,N),C=V(C,w);else if(!l&&!h&&u^d){var D=g;u?($=1,C=M(C,w,N),$=0,g=!1,C=M(C,w,N),g=D):($=0,C=M(C,w,N),C=V(C,w),$=1,g=!1,C=M(C,w,N),g=D,C=V(C,w))}}else $=0,C=M(C,w,N);else $=u?1:0,C=M(C,w,N);return C},this.__bidiEngine__.setOptions=function(C){C&&(l=C.isInputVisual,h=C.isOutputVisual,u=C.isInputRtl,d=C.isOutputRtl,g=C.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var o=n.options||{};n.mutex,o.lang;var l=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var u=0;for(l=[],u=0;u<i.length;u+=1)Object.prototype.toString.call(i[u])==="[object Array]"?l.push([t.doBidiReorder(i[u][0]),i[u][1],i[u][2]]):l.push([t.doBidiReorder(i[u])]);n.text=l}else n.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(Ct),Ct.API.TTFFont=(function(){function r(e){var t;if(this.rawData=e,t=this.contents=new Ac(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Fk(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new Sk(this.contents),this.head=new Tk(this),this.name=new Ek(this),this.cmap=new uS(this),this.toUnicode={},this.hhea=new Ak(this),this.maxp=new jk(this),this.hmtx=new Rk(this),this.post=new kk(this),this.os2=new Ck(this),this.loca=new Lk(this),this.glyf=new Pk(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,u,h,d;for(d=[],l=0,u=(h=this.bbox).length;l<u;l++)e=h[l],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var i,o,l,u;for(l=0,o=0,u=(e=""+e).length;0<=u?o<u:o>u;o=0<=u?++o:--o)i=e.charCodeAt(o),l+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/t)||0;return l*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r})();var va,Ac=(function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,i;for(i=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,i,o,l,u,h;return e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),u=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^o)+65536*(255^l)+256*(255^u)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*i+16777216*o+65536*l+256*u+h},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,i,o;for(o=[],n=0,i=e.length;n<i;n++)t=e[n],o.push(this.writeByte(t));return o},r})(),Sk=(function(){var r;function e(t){var n,i,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,i,o,l,u,h,d,g,b,S,x,B,E;for(E in x=Object.keys(t).length,h=Math.log(2),b=16*Math.floor(Math.log(x)/h),l=Math.floor(b/h),g=16*x-b,(i=new Ac).writeInt(this.scalarType),i.writeShort(x),i.writeShort(b),i.writeShort(l),i.writeShort(g),o=16*x,d=i.pos+o,u=null,B=[],t)for(S=t[E],i.writeString(E),i.writeInt(r(S)),i.writeInt(d),i.writeInt(S.length),B=B.concat(S),E==="head"&&(u=d),d+=S.length;d%4;)B.push(0),d++;return i.write(B),n=2981146554-r(i.data),i.pos=u+8,i.writeUInt32(n),i.data},r=function(t){var n,i,o,l;for(t=dS.call(t);t.length%4;)t.push(0);for(o=new Ac(t),i=0,n=0,l=t.length;n<l;n=n+=4)i+=o.readUInt32();return 4294967295&i},e})(),_k={}.hasOwnProperty,Ja=function(r,e){for(var t in e)_k.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};va=(function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var Tk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var t;return(t=new Ac).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},r})(),Ox=(function(){function r(e,t){var n,i,o,l,u,h,d,g,b,S,x,B,E,L,A,O,$;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),b=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(x=e.readUInt16(),S=x/2,e.pos+=6,o=(function(){var F,ie;for(ie=[],h=F=0;0<=S?F<S:F>S;h=0<=S?++F:--F)ie.push(e.readUInt16());return ie})(),e.pos+=2,E=(function(){var F,ie;for(ie=[],h=F=0;0<=S?F<S:F>S;h=0<=S?++F:--F)ie.push(e.readUInt16());return ie})(),d=(function(){var F,ie;for(ie=[],h=F=0;0<=S?F<S:F>S;h=0<=S?++F:--F)ie.push(e.readUInt16());return ie})(),g=(function(){var F,ie;for(ie=[],h=F=0;0<=S?F<S:F>S;h=0<=S?++F:--F)ie.push(e.readUInt16());return ie})(),i=(this.length-e.pos+this.offset)/2,u=(function(){var F,ie;for(ie=[],h=F=0;0<=i?F<i:F>i;h=0<=i?++F:--F)ie.push(e.readUInt16());return ie})(),h=A=0,$=o.length;A<$;h=++A)for(L=o[h],n=O=B=E[h];B<=L?O<=L:O>=L;n=B<=L?++O:--O)g[h]===0?l=n+d[h]:(l=u[g[h]/2+(n-B)-(S-h)]||0)!==0&&(l+=d[h]),this.codeMap[n]=65535&l}e.pos=b}return r.encode=function(e,t){var n,i,o,l,u,h,d,g,b,S,x,B,E,L,A,O,$,F,ie,ue,V,k,I,M,C,w,N,D,q,ne,se,oe,xe,we,ee,W,J,re,he,me,Se,ke,Ce,ge,Fe,Ke;switch(D=new Ac,l=Object.keys(e).sort(function(Qe,ze){return Qe-ze}),t){case"macroman":for(E=0,L=(function(){var Qe=[];for(B=0;B<256;++B)Qe.push(0);return Qe})(),O={0:0},o={},q=0,xe=l.length;q<xe;q++)O[Ce=e[i=l[q]]]==null&&(O[Ce]=++E),o[i]={old:e[i],new:O[e[i]]},L[i]=O[e[i]];return D.writeUInt16(1),D.writeUInt16(0),D.writeUInt32(12),D.writeUInt16(0),D.writeUInt16(262),D.writeUInt16(0),D.write(L),{charMap:o,subtable:D.data,maxGlyphID:E+1};case"unicode":for(w=[],b=[],$=0,O={},n={},A=d=null,ne=0,we=l.length;ne<we;ne++)O[ie=e[i=l[ne]]]==null&&(O[ie]=++$),n[i]={old:ie,new:O[ie]},u=O[ie]-i,A!=null&&u===d||(A&&b.push(A),w.push(i),d=u),A=i;for(A&&b.push(A),b.push(65535),w.push(65535),M=2*(I=w.length),k=2*Math.pow(Math.log(I)/Math.LN2,2),S=Math.log(k/2)/Math.LN2,V=2*I-k,h=[],ue=[],x=[],B=se=0,ee=w.length;se<ee;B=++se){if(C=w[B],g=b[B],C===65535){h.push(0),ue.push(0);break}if(C-(N=n[C].new)>=32768)for(h.push(0),ue.push(2*(x.length+I-B)),i=oe=C;C<=g?oe<=g:oe>=g;i=C<=g?++oe:--oe)x.push(n[i].new);else h.push(N-C),ue.push(0)}for(D.writeUInt16(3),D.writeUInt16(1),D.writeUInt32(12),D.writeUInt16(4),D.writeUInt16(16+8*I+2*x.length),D.writeUInt16(0),D.writeUInt16(M),D.writeUInt16(k),D.writeUInt16(S),D.writeUInt16(V),Se=0,W=b.length;Se<W;Se++)i=b[Se],D.writeUInt16(i);for(D.writeUInt16(0),ke=0,J=w.length;ke<J;ke++)i=w[ke],D.writeUInt16(i);for(ge=0,re=h.length;ge<re;ge++)u=h[ge],D.writeUInt16(u);for(Fe=0,he=ue.length;Fe<he;Fe++)F=ue[Fe],D.writeUInt16(F);for(Ke=0,me=x.length;Ke<me;Ke++)E=x[Ke],D.writeUInt16(E);return{charMap:n,subtable:D.data,maxGlyphID:$+1}}},r})(),uS=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="cmap",r.prototype.parse=function(e){var t,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)t=new Ox(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},r.encode=function(e,t){var n,i;return t==null&&(t="macroman"),n=Ox.encode(e,t),(i=new Ac).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},r})(),Ak=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r})(),Ck=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n})(),this.charRange=(function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r})(),kk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="post",r.prototype.parse=function(e){var t,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(n=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var l,u,h;for(h=[],o=l=0,u=this.file.maxp.numGlyphs;0<=u?l<u:l>u;o=0<=u?++l:--l)h.push(e.readUInt32());return h}).call(this)}},r})(),Ik=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Ek=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="name",r.prototype.parse=function(e){var t,n,i,o,l,u,h,d,g,b,S;for(e.pos=this.offset,e.readShort(),t=e.readShort(),u=e.readShort(),n=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+u+e.readShort()});for(h={},o=g=0,b=n.length;g<b;o=++g)i=n[o],e.pos=i.offset,d=e.readString(i.length),l=new Ik(d,i),h[S=i.nameID]==null&&(h[S]=[]),h[i.nameID].push(l);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},r})(),jk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r})(),Rk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="hmtx",r.prototype.parse=function(e){var t,n,i,o,l,u,h;for(e.pos=this.offset,this.metrics=[],t=0,u=this.file.hhea.numberOfMetrics;0<=u?t<u:t>u;t=0<=u?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,g;for(g=[],t=d=0;0<=i?d<i:d>i;t=0<=i?++d:--d)g.push(e.readInt16());return g})(),this.widths=(function(){var d,g,b,S;for(S=[],d=0,g=(b=this.metrics).length;d<g;d++)o=b[d],S.push(o.advance);return S}).call(this),n=this.widths[this.widths.length-1],h=[],t=l=0;0<=i?l<i:l>i;t=0<=i?++l:--l)h.push(this.widths.push(n));return h},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r})(),dS=[].slice,Pk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var t,n,i,o,l,u,h,d,g,b;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,n=o.indexOf(e),(i=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+n,l=(u=new Ac(t.read(i))).readShort(),d=u.readShort(),b=u.readShort(),h=u.readShort(),g=u.readShort(),this.cache[e]=l===-1?new Bk(u,d,b,h,g):new Nk(u,l,d,b,h,g),this.cache[e]))},r.prototype.encode=function(e,t,n){var i,o,l,u,h;for(l=[],o=[],u=0,h=t.length;u<h;u++)i=e[t[u]],o.push(l.length),i&&(l=l.concat(i.encode(n)));return o.push(l.length),{table:l,offsets:o}},r})(),Nk=(function(){function r(e,t,n,i,o,l){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=l,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),Bk=(function(){function r(e,t,n,i,o){var l,u;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;u=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&u;)l.pos+=1&u?4:2,128&u?l.pos+=8:64&u?l.pos+=4:8&u&&(l.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new Ac(dS.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r})(),Lk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ja(r,va),r.prototype.tag="loca",r.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=4)o.push(e.readUInt32());return o}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<n.length;++l)if(n[l]=i,o<t.length&&t[o]==l){++o,n[l]=i;var u=this.offsets[l],h=this.offsets[l+1]-u;h>0&&(i+=h)}for(var d=new Array(4*n.length),g=0;g<n.length;++g)d[4*g+3]=255&n[g],d[4*g+2]=(65280&n[g])>>8,d[4*g+1]=(16711680&n[g])>>16,d[4*g]=(4278190080&n[g])>>24;return d},r})(),Fk=(function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,i,o;for(t in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)n=o[t],e[t]=i[n];return e},r.prototype.glyphsFor=function(e){var t,n,i,o,l,u,h;for(i={},l=0,u=e.length;l<u;l++)i[o=e[l]]=this.font.glyf.glyphFor(o);for(o in t=[],i)(n=i[o])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(o in h=this.glyphsFor(t))n=h[o],i[o]=n;return i},r.prototype.encode=function(e,t){var n,i,o,l,u,h,d,g,b,S,x,B,E,L,A;for(i in n=uS.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(e),x={0:0},A=n.charMap)x[(h=A[i]).old]=h.new;for(B in S=n.maxGlyphID,l)B in x||(x[B]=S++);return g=(function(O){var $,F;for($ in F={},O)F[O[$]]=$;return F})(x),b=Object.keys(g).sort(function(O,$){return O-$}),E=(function(){var O,$,F;for(F=[],O=0,$=b.length;O<$;O++)u=b[O],F.push(g[u]);return F})(),o=this.font.glyf.encode(l,E,x),d=this.font.loca.encode(o.offsets,E),L={cmap:this.font.cmap.raw(),glyf:o.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(L["OS/2"]=this.font.os2.raw()),this.font.directory.encode(L)},r})();Ct.API.PDFObject=(function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,i,o,l;if(Array.isArray(t))return"["+(function(){var u,h,d;for(d=[],u=0,h=t.length;u<h;u++)n=t[u],d.push(e.convert(n));return d})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in o=["<<"],t)l=t[i],o.push("/"+i+" "+e.convert(l));return o.push(">>"),o.join(`
`)}return""+t},e})();const cn=r=>{const{calculatorName:e,inputs:t,results:n,necReferences:i,additionalInfo:o}=r,l=new Ct({orientation:"portrait",unit:"mm",format:"letter"}),u=l.internal.pageSize.getWidth(),h=l.internal.pageSize.getHeight(),d=15,g=u-d*2;let b=d;const S=ie=>b+ie>h-d?(l.addPage(),b=d,!0):!1,x=(ie,ue,V,k,I=10)=>{l.setFontSize(I);const M=l.splitTextToSize(ie,k);return l.text(M,ue,V),M.length*(I*.4)};l.setFillColor(37,99,235),l.rect(0,0,u,25,"F"),l.setTextColor(255,255,255),l.setFontSize(20),l.setFont("helvetica","bold"),l.text("Electrician Toolkit",d,12),l.setFontSize(12),l.setFont("helvetica","normal"),l.text(e,d,19),l.setFontSize(9);const B=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});l.text(B,u-d-l.getTextWidth(B),19),b=35,l.setTextColor(0,0,0),l.setFontSize(14),l.setFont("helvetica","bold"),l.text("Input Parameters",d,b),b+=7,l.setDrawColor(37,99,235),l.setLineWidth(.5),l.line(d,b,u-d,b),b+=5,l.setFontSize(10),l.setFont("helvetica","normal"),Object.entries(t).forEach(([ie,ue])=>{S(10);const V=ie.replace(/([A-Z])/g," $1").trim(),k=V.charAt(0).toUpperCase()+V.slice(1);l.setFont("helvetica","bold");const I=`${k}:`;l.text(I,d+5,b);const M=l.getTextWidth(I);l.setFont("helvetica","normal"),l.text(String(ue),d+5+M+3,b),b+=6}),b+=5,S(20),l.setFontSize(14),l.setFont("helvetica","bold"),l.text("Results",d,b),b+=7,l.setDrawColor(37,99,235),l.line(d,b,u-d,b),b+=5,l.setFontSize(10),l.setFont("helvetica","normal"),Object.entries(n).forEach(([ie,ue])=>{S(10);const V=ie.replace(/([A-Z])/g," $1").trim(),k=V.charAt(0).toUpperCase()+V.slice(1);l.setFont("helvetica","bold");const I=`${k}:`;l.text(I,d+5,b);let M=String(ue);typeof ue=="boolean"&&(M=ue?"Yes":"No");const C=l.getTextWidth(I);l.setFont("helvetica","normal"),l.text(M,d+5+C+3,b),b+=6}),b+=5,o&&Object.keys(o).length>0&&(S(20),l.setFontSize(14),l.setFont("helvetica","bold"),l.text("Calculation Details",d,b),b+=7,l.setDrawColor(37,99,235),l.line(d,b,u-d,b),b+=5,l.setFontSize(10),l.setFont("helvetica","normal"),Object.entries(o).forEach(([ie,ue])=>{S(10);const V=ie.replace(/([A-Z])/g," $1").trim(),k=V.charAt(0).toUpperCase()+V.slice(1),I=x(`${k}: ${ue}`,d+5,b,g-10,10);b+=I+2}),b+=5),i&&(S(20),l.setFontSize(14),l.setFont("helvetica","bold"),l.text("NEC Code References",d,b),b+=7,l.setDrawColor(37,99,235),l.line(d,b,u-d,b),b+=5,l.setFontSize(10),l.setFont("helvetica","normal"),(Array.isArray(i)?i:[i]).forEach(ue=>{S(15);const V=x(` ${ue}`,d+5,b,g-10,10);b+=V+2}));const E=h-10;l.setFontSize(8),l.setTextColor(100,100,100),l.setFont("helvetica","italic");const L="This calculation is for reference only. Always verify with current NEC and local codes.",A=l.getTextWidth(L);l.text(L,(u-A)/2,E);const O=e.toLowerCase().replace(/\s+/g,"-"),$=new Date().toISOString().split("T")[0],F=`${O}-${$}.pdf`;l.save(F)},zk=()=>{};var Mx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Vk=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const o=r[t++];e[n++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=r[t++],l=r[t++],u=r[t++],h=((i&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(h>>10)),e[n++]=String.fromCharCode(56320+(h&1023))}else{const o=r[t++],l=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},fS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const o=r[i],l=i+1<r.length,u=l?r[i+1]:0,h=i+2<r.length,d=h?r[i+2]:0,g=o>>2,b=(o&3)<<4|u>>4;let S=(u&15)<<2|d>>6,x=d&63;h||(x=64,l||(S=64)),n.push(t[g],t[b],t[S],t[x])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(hS(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Vk(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const o=t[r.charAt(i++)],u=i<r.length?t[r.charAt(i)]:0;++i;const d=i<r.length?t[r.charAt(i)]:64;++i;const b=i<r.length?t[r.charAt(i)]:64;if(++i,o==null||u==null||d==null||b==null)throw new Ok;const S=o<<2|u>>4;if(n.push(S),d!==64){const x=u<<4&240|d>>2;if(n.push(x),b!==64){const B=d<<6&192|b;n.push(B)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Ok extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Mk=function(r){const e=hS(r);return fS.encodeByteArray(e,!0)},wm=function(r){return Mk(r).replace(/\./g,"")},pS=function(r){try{return fS.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=()=>mS().__FIREBASE_DEFAULTS__,Wk=()=>{if(typeof process>"u"||typeof Mx>"u")return;const r=Mx.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},$k=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&pS(r[1]);return e&&JSON.parse(e)},Jm=()=>{try{return zk()||Dk()||Wk()||$k()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},gS=r=>{var e,t;return(t=(e=Jm())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},Uk=r=>{const e=gS(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},yS=()=>{var r;return(r=Jm())==null?void 0:r.config},xS=r=>{var e;return(e=Jm())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vS(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,o=r.sub||r.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...r};return[wm(JSON.stringify(t)),wm(JSON.stringify(l)),""].join(".")}const Xh={};function Gk(){const r={prod:[],emulator:[]};for(const e of Object.keys(Xh))Xh[e]?r.emulator.push(e):r.prod.push(e);return r}function Kk(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Dx=!1;function bS(r,e){if(typeof window>"u"||typeof document>"u"||!th(window.location.host)||Xh[r]===e||Xh[r]||Dx)return;Xh[r]=e;function t(S){return`__firebase__banner__${S}`}const n="__firebase__banner",o=Gk().prod.length>0;function l(){const S=document.getElementById(n);S&&S.remove()}function u(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function h(S,x){S.setAttribute("width","24"),S.setAttribute("id",x),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function d(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Dx=!0,l()},S}function g(S,x){S.setAttribute("id",x),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function b(){const S=Kk(n),x=t("text"),B=document.getElementById(x)||document.createElement("span"),E=t("learnmore"),L=document.getElementById(E)||document.createElement("a"),A=t("preprendIcon"),O=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const $=S.element;u($),g(L,E);const F=d();h(O,A),$.append(O,B,L,F),document.body.appendChild($)}o?(B.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Jk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fi())}function wS(){var e;const r=(e=Jm())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Yk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Qk(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Xk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Zk(){const r=fi();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function SS(){return!wS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _S(){return!wS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function TS(){try{return typeof indexedDB=="object"}catch{return!1}}function eI(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="FirebaseError";class Rl extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=tI,Object.setPrototypeOf(this,Rl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nf.prototype.create)}}class Nf{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?rI(o,n):"Error",u=`${this.serviceName}: ${l} (${i}).`;return new Rl(i,u,n)}}function rI(r,e){return r.replace(nI,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const nI=/\{\$([^}]+)}/g;function iI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function _u(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const o=r[i],l=e[i];if(Wx(o)&&Wx(l)){if(!_u(o,l))return!1}else if(o!==l)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function Wx(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function $h(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,o]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Uh(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function oI(r,e){const t=new sI(r,e);return t.subscribe.bind(t)}class sI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");aI(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=zg),i.error===void 0&&(i.error=zg),i.complete===void 0&&(i.complete=zg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function zg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(r){return r&&r._delegate?r._delegate:r}class Tu{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new qk;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uI(e))try{this.getOrInitializeService({instanceIdentifier:iu})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});n.resolve(o)}catch{}}}}clearInstance(e=iu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=iu){return this.instances.has(e)}getOptions(e=iu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);n===u&&l.resolve(i)}return i}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const o=this.instances.get(n);return o&&e(o,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:cI(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=iu){return this.component?this.component.multipleInstances?e:iu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cI(r){return r===iu?void 0:r}function uI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yr;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(yr||(yr={}));const hI={debug:yr.DEBUG,verbose:yr.VERBOSE,info:yr.INFO,warn:yr.WARN,error:yr.ERROR,silent:yr.SILENT},fI=yr.INFO,pI={[yr.DEBUG]:"log",[yr.VERBOSE]:"log",[yr.INFO]:"info",[yr.WARN]:"warn",[yr.ERROR]:"error"},mI=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=pI[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class s5{constructor(e){this.name=e,this._logLevel=fI,this._logHandler=mI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,yr.DEBUG,...e),this._logHandler(this,yr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,yr.VERBOSE,...e),this._logHandler(this,yr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,yr.INFO,...e),this._logHandler(this,yr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,yr.WARN,...e),this._logHandler(this,yr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,yr.ERROR,...e),this._logHandler(this,yr.ERROR,...e)}}const gI=(r,e)=>e.some(t=>r instanceof t);let $x,Ux;function yI(){return $x||($x=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xI(){return Ux||(Ux=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AS=new WeakMap,f1=new WeakMap,CS=new WeakMap,Vg=new WeakMap,a5=new WeakMap;function vI(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",o),r.removeEventListener("error",l)},o=()=>{t(xc(r.result)),i()},l=()=>{n(r.error),i()};r.addEventListener("success",o),r.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&AS.set(t,r)}).catch(()=>{}),a5.set(e,r),e}function bI(r){if(f1.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",l),r.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",o),r.addEventListener("error",l),r.addEventListener("abort",l)});f1.set(r,e)}let p1={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return f1.get(r);if(e==="objectStoreNames")return r.objectStoreNames||CS.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xc(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function wI(r){p1=r(p1)}function SI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Og(this),e,...t);return CS.set(n,e.sort?e.sort():[e]),xc(n)}:xI().includes(r)?function(...e){return r.apply(Og(this),e),xc(AS.get(this))}:function(...e){return xc(r.apply(Og(this),e))}}function _I(r){return typeof r=="function"?SI(r):(r instanceof IDBTransaction&&bI(r),gI(r,yI())?new Proxy(r,p1):r)}function xc(r){if(r instanceof IDBRequest)return vI(r);if(Vg.has(r))return Vg.get(r);const e=_I(r);return e!==r&&(Vg.set(r,e),a5.set(e,r)),e}const Og=r=>a5.get(r);function TI(r,e,{blocked:t,upgrade:n,blocking:i,terminated:o}={}){const l=indexedDB.open(r,e),u=xc(l);return n&&l.addEventListener("upgradeneeded",h=>{n(xc(l.result),h.oldVersion,h.newVersion,xc(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const AI=["get","getKey","getAll","getAllKeys","count"],CI=["put","add","delete","clear"],Mg=new Map;function qx(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Mg.get(e))return Mg.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=CI.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||AI.includes(t)))return;const o=async function(l,...u){const h=this.transaction(l,i?"readwrite":"readonly");let d=h.store;return n&&(d=d.index(u.shift())),(await Promise.all([d[t](...u),i&&h.done]))[0]};return Mg.set(e,o),o}wI(r=>({...r,get:(e,t,n)=>qx(e,t)||r.get(e,t,n),has:(e,t)=>!!qx(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(II(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function II(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const m1="@firebase/app",Hx="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=new s5("@firebase/app"),EI="@firebase/app-compat",jI="@firebase/analytics-compat",RI="@firebase/analytics",PI="@firebase/app-check-compat",NI="@firebase/app-check",BI="@firebase/auth",LI="@firebase/auth-compat",FI="@firebase/database",zI="@firebase/data-connect",VI="@firebase/database-compat",OI="@firebase/functions",MI="@firebase/functions-compat",DI="@firebase/installations",WI="@firebase/installations-compat",$I="@firebase/messaging",UI="@firebase/messaging-compat",qI="@firebase/performance",HI="@firebase/performance-compat",GI="@firebase/remote-config",KI="@firebase/remote-config-compat",JI="@firebase/storage",YI="@firebase/storage-compat",QI="@firebase/firestore",XI="@firebase/ai",ZI="@firebase/firestore-compat",e8="firebase",t8="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="[DEFAULT]",r8={[m1]:"fire-core",[EI]:"fire-core-compat",[RI]:"fire-analytics",[jI]:"fire-analytics-compat",[NI]:"fire-app-check",[PI]:"fire-app-check-compat",[BI]:"fire-auth",[LI]:"fire-auth-compat",[FI]:"fire-rtdb",[zI]:"fire-data-connect",[VI]:"fire-rtdb-compat",[OI]:"fire-fn",[MI]:"fire-fn-compat",[DI]:"fire-iid",[WI]:"fire-iid-compat",[$I]:"fire-fcm",[UI]:"fire-fcm-compat",[qI]:"fire-perf",[HI]:"fire-perf-compat",[GI]:"fire-rc",[KI]:"fire-rc-compat",[JI]:"fire-gcs",[YI]:"fire-gcs-compat",[QI]:"fire-fst",[ZI]:"fire-fst-compat",[XI]:"fire-vertex","fire-js":"fire-js",[e8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=new Map,n8=new Map,y1=new Map;function Gx(r,e){try{r.container.addComponent(e)}catch(t){kl.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function zd(r){const e=r.name;if(y1.has(e))return kl.debug(`There were multiple attempts to register component ${e}.`),!1;y1.set(e,r);for(const t of Sm.values())Gx(t,r);for(const t of n8.values())Gx(t,r);return!0}function l5(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Os(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vc=new Nf("app","Firebase",i8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Tu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=t8;function kS(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:g1,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw vc.create("bad-app-name",{appName:String(i)});if(t||(t=yS()),!t)throw vc.create("no-options");const o=Sm.get(i);if(o){if(_u(t,o.options)&&_u(n,o.config))return o;throw vc.create("duplicate-app",{appName:i})}const l=new dI(i);for(const h of y1.values())l.addComponent(h);const u=new o8(t,n,l);return Sm.set(i,u),u}function IS(r=g1){const e=Sm.get(r);if(!e&&r===g1&&yS())return kS();if(!e)throw vc.create("no-app",{appName:r});return e}function bc(r,e,t){let n=r8[r]??r;t&&(n+=`-${t}`);const i=n.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${n}" with version "${e}":`];i&&l.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kl.warn(l.join(" "));return}zd(new Tu(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8="firebase-heartbeat-database",a8=1,ff="firebase-heartbeat-store";let Dg=null;function ES(){return Dg||(Dg=TI(s8,a8,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ff)}catch(t){console.warn(t)}}}}).catch(r=>{throw vc.create("idb-open",{originalErrorMessage:r.message})})),Dg}async function l8(r){try{const t=(await ES()).transaction(ff),n=await t.objectStore(ff).get(jS(r));return await t.done,n}catch(e){if(e instanceof Rl)kl.warn(e.message);else{const t=vc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kl.warn(t.message)}}}async function Kx(r,e){try{const n=(await ES()).transaction(ff,"readwrite");await n.objectStore(ff).put(e,jS(r)),await n.done}catch(t){if(t instanceof Rl)kl.warn(t.message);else{const n=vc.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});kl.warn(n.message)}}}function jS(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8=1024,u8=30;class d8{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new f8(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Jx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>u8){const l=p8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){kl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Jx(),{heartbeatsToSend:n,unsentEntries:i}=h8(this._heartbeatsCache.heartbeats),o=wm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return kl.warn(t),""}}}function Jx(){return new Date().toISOString().substring(0,10)}function h8(r,e=c8){const t=[];let n=r.slice();for(const i of r){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),Yx(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Yx(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class f8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TS()?eI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await l8(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Kx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Kx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Yx(r){return wm(JSON.stringify({version:2,heartbeats:r})).length}function p8(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(r){zd(new Tu("platform-logger",e=>new kI(e),"PRIVATE")),zd(new Tu("heartbeat",e=>new d8(e),"PRIVATE")),bc(m1,Hx,r),bc(m1,Hx,"esm2020"),bc("fire-js","")}m8("");var g8="firebase",y8="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bc(g8,y8,"app");function RS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const x8=RS,PS=new Nf("auth","Firebase",RS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m=new s5("@firebase/auth");function v8(r,...e){_m.logLevel<=yr.WARN&&_m.warn(`Auth (${rh}): ${r}`,...e)}function em(r,...e){_m.logLevel<=yr.ERROR&&_m.error(`Auth (${rh}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(r,...e){throw c5(r,...e)}function Ua(r,...e){return c5(r,...e)}function NS(r,e,t){const n={...x8(),[e]:t};return new Nf("auth","Firebase",n).create(e,{appName:r.name})}function Al(r){return NS(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function c5(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return PS.create(r,...e)}function Kt(r,e,...t){if(!r)throw c5(e,...t)}function Sl(r){const e="INTERNAL ASSERTION FAILED: "+r;throw em(e),new Error(e)}function Il(r,e){r||Sl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function b8(){return Qx()==="http:"||Qx()==="https:"}function Qx(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(b8()||Qk()||"connection"in navigator)?navigator.onLine:!0}function S8(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,t){this.shortDelay=e,this.longDelay=t,Il(t>e,"Short delay should be less than long delay!"),this.isMobile=Jk()||Xk()}get(){return w8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(r,e){Il(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],A8=new Lf(3e4,6e4);function Rc(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Pc(r,e,t,n,i={}){return LS(r,i,async()=>{let o={},l={};n&&(e==="GET"?l=n:o={body:JSON.stringify(n)});const u=Bf({key:r.config.apiKey,...l}).slice(1),h=await r._getAdditionalHeaders();h["Content-Type"]="application/json",r.languageCode&&(h["X-Firebase-Locale"]=r.languageCode);const d={method:e,headers:h,...o};return Yk()||(d.referrerPolicy="no-referrer"),r.emulatorConfig&&th(r.emulatorConfig.host)&&(d.credentials="include"),BS.fetch()(await FS(r,r.config.apiHost,t,u),d)})}async function LS(r,e,t){r._canInitEmulator=!1;const n={..._8,...e};try{const i=new k8(r),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Op(r,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[h,d]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Op(r,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Op(r,"email-already-in-use",l);if(h==="USER_DISABLED")throw Op(r,"user-disabled",l);const g=n[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw NS(r,g,d);ya(r,g)}}catch(i){if(i instanceof Rl)throw i;ya(r,"network-request-failed",{message:String(i)})}}async function Ff(r,e,t,n,i={}){const o=await Pc(r,e,t,n,i);return"mfaPendingCredential"in o&&ya(r,"multi-factor-auth-required",{_serverResponse:o}),o}async function FS(r,e,t,n){const i=`${e}${t}?${n}`,o=r,l=o.config.emulator?u5(r.config,i):`${r.config.apiScheme}://${i}`;return T8.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function C8(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class k8{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Ua(this.auth,"network-request-failed")),A8.get())})}}function Op(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=Ua(r,e,n);return i.customData._tokenResponse=t,i}function Xx(r){return r!==void 0&&r.enterprise!==void 0}class I8{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return C8(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function E8(r,e){return Pc(r,"GET","/v2/recaptchaConfig",Rc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j8(r,e){return Pc(r,"POST","/v1/accounts:delete",e)}async function Tm(r,e){return Pc(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function R8(r,e=!1){const t=pi(r),n=await t.getIdToken(e),i=d5(n);Kt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:n,authTime:Zh(Wg(i.auth_time)),issuedAtTime:Zh(Wg(i.iat)),expirationTime:Zh(Wg(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Wg(r){return Number(r)*1e3}function d5(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return em("JWT malformed, contained fewer than 3 sections"),null;try{const i=pS(t);return i?JSON.parse(i):(em("Failed to decode base64 JWT payload"),null)}catch(i){return em("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Zx(r){const e=d5(r);return Kt(e,"internal-error"),Kt(typeof e.exp<"u","internal-error"),Kt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pf(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Rl&&P8(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function P8({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zh(this.lastLoginAt),this.creationTime=Zh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Am(r){var b;const e=r.auth,t=await r.getIdToken(),n=await pf(r,Tm(e,{idToken:t}));Kt(n==null?void 0:n.users.length,e,"internal-error");const i=n.users[0];r._notifyReloadListener(i);const o=(b=i.providerUserInfo)!=null&&b.length?zS(i.providerUserInfo):[],l=L8(r.providerData,o),u=r.isAnonymous,h=!(r.email&&i.passwordHash)&&!(l!=null&&l.length),d=u?h:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new v1(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(r,g)}async function B8(r){const e=pi(r);await Am(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function L8(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function zS(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F8(r,e){const t=await LS(r,{},async()=>{const n=Bf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=r.config,l=await FS(r,i,"/v1/token",`key=${o}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:n};return r.emulatorConfig&&th(r.emulatorConfig.host)&&(h.credentials="include"),BS.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function z8(r,e){return Pc(r,"POST","/v2/accounts:revokeToken",Rc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Kt(e.idToken,"internal-error"),Kt(typeof e.idToken<"u","internal-error"),Kt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Kt(e.length!==0,"internal-error");const t=Zx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Kt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:o}=await F8(e,t);this.updateTokensAndExpiration(n,i,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:o}=t,l=new Nd;return n&&(Kt(typeof n=="string","internal-error",{appName:e}),l.refreshToken=n),i&&(Kt(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Kt(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nd,this.toJSON())}_performRefresh(){return Sl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(r,e){Kt(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class fa{constructor({uid:e,auth:t,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new N8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new v1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await pf(this,this.stsTokenManager.getToken(this.auth,e));return Kt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return R8(this,e)}reload(){return B8(this)}_assign(e){this!==e&&(Kt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Kt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Am(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Os(this.auth.app))return Promise.reject(Al(this.auth));const e=await this.getIdToken();return await pf(this,j8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,u=t.tenantId??void 0,h=t._redirectEventId??void 0,d=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:b,emailVerified:S,isAnonymous:x,providerData:B,stsTokenManager:E}=t;Kt(b&&E,e,"internal-error");const L=Nd.fromJSON(this.name,E);Kt(typeof b=="string",e,"internal-error"),ac(n,e.name),ac(i,e.name),Kt(typeof S=="boolean",e,"internal-error"),Kt(typeof x=="boolean",e,"internal-error"),ac(o,e.name),ac(l,e.name),ac(u,e.name),ac(h,e.name),ac(d,e.name),ac(g,e.name);const A=new fa({uid:b,auth:e,email:i,emailVerified:S,displayName:n,isAnonymous:x,photoURL:l,phoneNumber:o,tenantId:u,stsTokenManager:L,createdAt:d,lastLoginAt:g});return B&&Array.isArray(B)&&(A.providerData=B.map(O=>({...O}))),h&&(A._redirectEventId=h),A}static async _fromIdTokenResponse(e,t,n=!1){const i=new Nd;i.updateFromServerResponse(t);const o=new fa({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Am(o),o}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];Kt(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?zS(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),u=new Nd;u.updateFromIdToken(n);const h=new fa({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:l}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new v1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,d),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=new Map;function _l(r){Il(r instanceof Function,"Expected a class definition");let e=ev.get(r);return e?(Il(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,ev.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}VS.type="NONE";const tv=VS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(r,e,t){return`firebase:${r}:${e}:${t}`}class Bd{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:o}=this.auth;this.fullUserKey=tm(this.userKey,i.apiKey,o),this.fullPersistenceKey=tm("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Tm(this.auth,{idToken:e}).catch(()=>{});return t?fa._fromGetAccountInfoResponse(this.auth,t,e):null}return fa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Bd(_l(tv),e,n);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=i[0]||_l(tv);const l=tm(n,e.config.apiKey,e.name);let u=null;for(const d of t)try{const g=await d._get(l);if(g){let b;if(typeof g=="string"){const S=await Tm(e,{idToken:g}).catch(()=>{});if(!S)break;b=await fa._fromGetAccountInfoResponse(e,S,g)}else b=fa._fromJSON(e,g);d!==o&&(u=b),o=d;break}}catch{}const h=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Bd(o,e,n):(o=h[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async d=>{if(d!==o)try{await d._remove(l)}catch{}})),new Bd(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(US(e))return"Blackberry";if(qS(e))return"Webos";if(MS(e))return"Safari";if((e.includes("chrome/")||DS(e))&&!e.includes("edge/"))return"Chrome";if($S(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function OS(r=fi()){return/firefox\//i.test(r)}function MS(r=fi()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DS(r=fi()){return/crios\//i.test(r)}function WS(r=fi()){return/iemobile/i.test(r)}function $S(r=fi()){return/android/i.test(r)}function US(r=fi()){return/blackberry/i.test(r)}function qS(r=fi()){return/webos/i.test(r)}function h5(r=fi()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function V8(r=fi()){var e;return h5(r)&&!!((e=window.navigator)!=null&&e.standalone)}function O8(){return Zk()&&document.documentMode===10}function HS(r=fi()){return h5(r)||$S(r)||qS(r)||US(r)||/windows phone/i.test(r)||WS(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(r,e=[]){let t;switch(r){case"Browser":t=rv(fi());break;case"Worker":t=`${rv(fi())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${rh}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=o=>new Promise((l,u)=>{try{const h=e(o);l(h)}catch(h){u(h)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D8(r,e={}){return Pc(r,"GET","/v2/passwordPolicy",Rc(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W8=6;class $8{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??W8,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nv(this),this.idTokenSubscription=new nv(this),this.beforeStateQueue=new M8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_l(t)),this._initializationPromise=this.queue(async()=>{var n,i,o;if(!this._deleted&&(this.persistenceManager=await Bd.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Tm(this,{idToken:e}),n=await fa._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Os(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=n==null?void 0:n._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===u)&&(h!=null&&h.user)&&(n=h.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(l){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Kt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Am(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=S8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Os(this.app))return Promise.reject(Al(this));const t=e?pi(e):null;return t&&Kt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Kt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Os(this.app)?Promise.reject(Al(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Os(this.app)?Promise.reject(Al(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_l(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await D8(this),t=new $8(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nf("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await z8(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_l(e)||this._popupRedirectResolver;Kt(t,this,"argument-error"),this.redirectPersistenceManager=await Bd.create(this,[_l(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Kt(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,n,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Kt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(Os(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&v8(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ou(r){return pi(r)}class nv{constructor(e){this.auth=e,this.observer=null,this.addObserver=oI(t=>this.observer=t)}get next(){return Kt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ym={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function q8(r){Ym=r}function KS(r){return Ym.loadJS(r)}function H8(){return Ym.recaptchaEnterpriseScript}function G8(){return Ym.gapiScript}function K8(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class J8{constructor(){this.enterprise=new Y8}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Y8{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Q8="recaptcha-enterprise",JS="NO_RECAPTCHA";class X8{constructor(e){this.type=Q8,this.auth=Ou(e)}async verify(e="verify",t=!1){async function n(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{E8(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new I8(h);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,l(d.siteKey)}}).catch(h=>{u(h)})})}function i(o,l,u){const h=window.grecaptcha;Xx(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(d=>{l(d)}).catch(()=>{l(JS)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new J8().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{n(this.auth).then(u=>{if(!t&&Xx(window.grecaptcha))i(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=H8();h.length!==0&&(h+=u),KS(h).then(()=>{i(u,o,l)}).catch(d=>{l(d)})}}).catch(u=>{l(u)})})}}async function iv(r,e,t,n=!1,i=!1){const o=new X8(r);let l;if(i)l=JS;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,d=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return n?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function b1(r,e,t,n,i){var o;if((o=r._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await iv(r,e,t,t==="getOobCode");return n(r,l)}else return n(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await iv(r,e,t,t==="getOobCode");return n(r,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8(r,e){const t=l5(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(_u(o,e??{}))return i;ya(i,"already-initialized")}return t.initialize({options:e})}function eE(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(_l);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function tE(r,e,t){const n=Ou(r);Kt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,o=YS(e),{host:l,port:u}=rE(e),h=u===null?"":`:${u}`,d={url:`${o}//${l}${h}/`},g=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){Kt(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Kt(_u(d,n.config.emulator)&&_u(g,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=g,n.settings.appVerificationDisabledForTesting=!0,th(l)?(vS(`${o}//${l}${h}`),bS("Auth",!0)):nE()}function YS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function rE(r){const e=YS(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const o=i[1];return{host:o,port:ov(n.substr(o.length+1))}}else{const[o,l]=n.split(":");return{host:o,port:ov(l)}}}function ov(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function nE(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Sl("not implemented")}_getIdTokenResponse(e){return Sl("not implemented")}_linkToIdToken(e,t){return Sl("not implemented")}_getReauthenticationResolver(e){return Sl("not implemented")}}async function iE(r,e){return Pc(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oE(r,e){return Ff(r,"POST","/v1/accounts:signInWithPassword",Rc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sE(r,e){return Ff(r,"POST","/v1/accounts:signInWithEmailLink",Rc(r,e))}async function aE(r,e){return Ff(r,"POST","/v1/accounts:signInWithEmailLink",Rc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends f5{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new mf(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new mf(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return b1(e,t,"signInWithPassword",oE);case"emailLink":return sE(e,{email:this._email,oobCode:this._password});default:ya(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return b1(e,n,"signUpPassword",iE);case"emailLink":return aE(e,{idToken:t,email:this._email,oobCode:this._password});default:ya(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ld(r,e){return Ff(r,"POST","/v1/accounts:signInWithIdp",Rc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="http://localhost";class Au extends f5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Au(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ya("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...o}=t;if(!n||!i)return null;const l=new Au(n,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ld(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ld(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ld(e,t)}buildRequest(){const e={requestUri:lE,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Bf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uE(r){const e=$h(Uh(r)).link,t=e?$h(Uh(e)).deep_link_id:null,n=$h(Uh(r)).deep_link_id;return(n?$h(Uh(n)).link:null)||n||t||e||r}class p5{constructor(e){const t=$h(Uh(e)),n=t.apiKey??null,i=t.oobCode??null,o=cE(t.mode??null);Kt(n&&i&&o,"argument-error"),this.apiKey=n,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=uE(e);try{return new p5(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(){this.providerId=nh.PROVIDER_ID}static credential(e,t){return mf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=p5.parseLink(t);return Kt(n,"argument-error"),mf._fromEmailAndCode(e,n.code,n.tenantId)}}nh.PROVIDER_ID="password";nh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends QS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends zf{constructor(){super("facebook.com")}static credential(e){return Au._fromParams({providerId:dc.PROVIDER_ID,signInMethod:dc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dc.credentialFromTaggedObject(e)}static credentialFromError(e){return dc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dc.credential(e.oauthAccessToken)}catch{return null}}}dc.FACEBOOK_SIGN_IN_METHOD="facebook.com";dc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends zf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Au._fromParams({providerId:hc.PROVIDER_ID,signInMethod:hc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return hc.credentialFromTaggedObject(e)}static credentialFromError(e){return hc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return hc.credential(t,n)}catch{return null}}}hc.GOOGLE_SIGN_IN_METHOD="google.com";hc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends zf{constructor(){super("github.com")}static credential(e){return Au._fromParams({providerId:fc.PROVIDER_ID,signInMethod:fc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fc.credentialFromTaggedObject(e)}static credentialFromError(e){return fc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fc.credential(e.oauthAccessToken)}catch{return null}}}fc.GITHUB_SIGN_IN_METHOD="github.com";fc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends zf{constructor(){super("twitter.com")}static credential(e,t){return Au._fromParams({providerId:pc.PROVIDER_ID,signInMethod:pc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return pc.credentialFromTaggedObject(e)}static credentialFromError(e){return pc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return pc.credential(t,n)}catch{return null}}}pc.TWITTER_SIGN_IN_METHOD="twitter.com";pc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dE(r,e){return Ff(r,"POST","/v1/accounts:signUp",Rc(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const o=await fa._fromIdTokenResponse(e,n,i),l=sv(n);return new Cu({user:o,providerId:l,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=sv(n);return new Cu({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function sv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm extends Rl{constructor(e,t,n,i){super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Cm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Cm(e,t,n,i)}}function XS(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Cm._fromErrorAndOperation(r,o,e,n):o})}async function hE(r,e,t=!1){const n=await pf(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Cu._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fE(r,e,t=!1){const{auth:n}=r;if(Os(n.app))return Promise.reject(Al(n));const i="reauthenticate";try{const o=await pf(r,XS(n,i,e,r),t);Kt(o.idToken,n,"internal-error");const l=d5(o.idToken);Kt(l,n,"internal-error");const{sub:u}=l;return Kt(r.uid===u,n,"user-mismatch"),Cu._forOperation(r,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ya(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZS(r,e,t=!1){if(Os(r.app))return Promise.reject(Al(r));const n="signIn",i=await XS(r,n,e),o=await Cu._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(o.user),o}async function pE(r,e){return ZS(Ou(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e_(r){const e=Ou(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function t_(r,e,t){if(Os(r.app))return Promise.reject(Al(r));const n=Ou(r),l=await b1(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dE).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&e_(r),h}),u=await Cu._fromIdTokenResponse(n,"signIn",l);return await n._updateCurrentUser(u.user),u}function r_(r,e,t){return Os(r.app)?Promise.reject(Al(r)):pE(pi(r),nh.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&e_(r),n})}function mE(r,e,t,n){return pi(r).onIdTokenChanged(e,t,n)}function gE(r,e,t){return pi(r).beforeAuthStateChanged(e,t)}function Qm(r,e,t,n){return pi(r).onAuthStateChanged(e,t,n)}function yE(r){return pi(r).signOut()}const km="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(km,"1"),this.storage.removeItem(km),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=1e3,vE=10;class i_ extends n_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,h)=>{this.notifyListeners(l,h)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(n);!t&&this.localCache[n]===l||this.notifyListeners(n,l)},o=this.storage.getItem(n);O8()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,vE):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},xE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}i_.type="LOCAL";const bE=i_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_ extends n_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}o_.type="SESSION";const s_=o_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new Xm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const u=Array.from(l).map(async d=>d(t.origin,o)),h=await wE(u);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((u,h)=>{const d=m5("",20);i.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},n);l={messageChannel:i,onMessage(b){const S=b;if(S.data.eventId===d)switch(S.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(S.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(){return window}function _E(r){qa().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(){return typeof qa().WorkerGlobalScope<"u"&&typeof qa().importScripts=="function"}async function TE(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AE(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function CE(){return a_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="firebaseLocalStorageDb",kE=1,Im="firebaseLocalStorage",c_="fbase_key";class Vf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Zm(r,e){return r.transaction([Im],e?"readwrite":"readonly").objectStore(Im)}function IE(){const r=indexedDB.deleteDatabase(l_);return new Vf(r).toPromise()}function w1(){const r=indexedDB.open(l_,kE);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(Im,{keyPath:c_})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(Im)?e(n):(n.close(),await IE(),e(await w1()))})})}async function av(r,e,t){const n=Zm(r,!0).put({[c_]:e,value:t});return new Vf(n).toPromise()}async function EE(r,e){const t=Zm(r,!1).get(e),n=await new Vf(t).toPromise();return n===void 0?null:n.value}function lv(r,e){const t=Zm(r,!0).delete(e);return new Vf(t).toPromise()}const jE=800,RE=3;class u_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await w1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>RE)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return a_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xm._getInstance(CE()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await TE(),!this.activeServiceWorker)return;this.sender=new SE(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AE()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await w1();return await av(e,km,"1"),await lv(e,km),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>av(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>EE(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>lv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Zm(i,!1).getAll();return new Vf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}u_.type="LOCAL";const PE=u_;new Lf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(r,e){return e?_l(e):(Kt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5 extends f5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ld(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ld(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ld(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function BE(r){return ZS(r.auth,new g5(r),r.bypassAuthState)}function LE(r){const{auth:e,user:t}=r;return Kt(t,e,"internal-error"),fE(t,new g5(r),r.bypassAuthState)}async function FE(r){const{auth:e,user:t}=r;return Kt(t,e,"internal-error"),hE(t,new g5(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,t,n,i,o=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BE;case"linkViaPopup":case"linkViaRedirect":return FE;case"reauthViaPopup":case"reauthViaRedirect":return LE;default:ya(this.auth,"internal-error")}}resolve(e){Il(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Il(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=new Lf(2e3,1e4);class Id extends d_{constructor(e,t,n,i,o){super(e,t,i,o),this.provider=n,this.authWindow=null,this.pollId=null,Id.currentPopupAction&&Id.currentPopupAction.cancel(),Id.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Kt(e,this.auth,"internal-error"),e}async onExecution(){Il(this.filter.length===1,"Popup operations only handle one event");const e=m5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ua(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ua(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Id.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ua(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zE.get())};e()}}Id.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="pendingRedirect",rm=new Map;class OE extends d_{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=rm.get(this.auth._key());if(!e){try{const n=await ME(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}rm.set(this.auth._key(),e)}return this.bypassAuthState||rm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ME(r,e){const t=$E(e),n=WE(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function DE(r,e){rm.set(r._key(),e)}function WE(r){return _l(r._redirectPersistence)}function $E(r){return tm(VE,r.config.apiKey,r.name)}async function UE(r,e,t=!1){if(Os(r.app))return Promise.reject(Al(r));const n=Ou(r),i=NE(n,e),l=await new OE(n,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await n._persistUserIfCurrent(l.user),await n._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=600*1e3;class HE{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GE(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!h_(e)){const i=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ua(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qE&&this.cachedEventUids.clear(),this.cachedEventUids.has(cv(e))}saveEventToCache(e){this.cachedEventUids.add(cv(e)),this.lastProcessedEventTime=Date.now()}}function cv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function h_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GE(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return h_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KE(r,e={}){return Pc(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YE=/^https?/;async function QE(r){if(r.config.emulator)return;const{authorizedDomains:e}=await KE(r);for(const t of e)try{if(XE(t))return}catch{}ya(r,"unauthorized-domain")}function XE(r){const e=x1(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const l=new URL(r);return l.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===n}if(!YE.test(t))return!1;if(JE.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=new Lf(3e4,6e4);function uv(){const r=qa().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function e7(r){return new Promise((e,t)=>{var i,o,l;function n(){uv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uv(),t(Ua(r,"network-request-failed"))},timeout:ZE.get()})}if((o=(i=qa().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=qa().gapi)!=null&&l.load)n();else{const u=K8("iframefcb");return qa()[u]=()=>{gapi.load?n():t(Ua(r,"network-request-failed"))},KS(`${G8()}?onload=${u}`).catch(h=>t(h))}}).catch(e=>{throw nm=null,e})}let nm=null;function t7(r){return nm=nm||e7(r),nm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7=new Lf(5e3,15e3),n7="__/auth/iframe",i7="emulator/auth/iframe",o7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a7(r){const e=r.config;Kt(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?u5(e,i7):`https://${r.config.authDomain}/${n7}`,n={apiKey:e.apiKey,appName:r.name,v:rh},i=s7.get(r.config.apiHost);i&&(n.eid=i);const o=r._getFrameworks();return o.length&&(n.fw=o.join(",")),`${t}?${Bf(n).slice(1)}`}async function l7(r){const e=await t7(r),t=qa().gapi;return Kt(t,r,"internal-error"),e.open({where:document.body,url:a7(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o7,dontclear:!0},n=>new Promise(async(i,o)=>{await n.restyle({setHideOnLeave:!1});const l=Ua(r,"network-request-failed"),u=qa().setTimeout(()=>{o(l)},r7.get());function h(){qa().clearTimeout(u),i(n)}n.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u7=500,d7=600,h7="_blank",f7="http://localhost";class dv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function p7(r,e,t,n=u7,i=d7){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-n)/2,0).toString();let u="";const h={...c7,width:n.toString(),height:i.toString(),top:o,left:l},d=fi().toLowerCase();t&&(u=DS(d)?h7:t),OS(d)&&(e=e||f7,h.scrollbars="yes");const g=Object.entries(h).reduce((S,[x,B])=>`${S}${x}=${B},`,"");if(V8(d)&&u!=="_self")return m7(e||"",u),new dv(null);const b=window.open(e||"",u,g);Kt(b,r,"popup-blocked");try{b.focus()}catch{}return new dv(b)}function m7(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7="__/auth/handler",y7="emulator/auth/handler",x7=encodeURIComponent("fac");async function hv(r,e,t,n,i,o){Kt(r.config.authDomain,r,"auth-domain-config-required"),Kt(r.config.apiKey,r,"invalid-api-key");const l={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:rh,eventId:i};if(e instanceof QS){e.setDefaultLanguage(r.languageCode),l.providerId=e.providerId||"",iI(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,b]of Object.entries({}))l[g]=b}if(e instanceof zf){const g=e.getScopes().filter(b=>b!=="");g.length>0&&(l.scopes=g.join(","))}r.tenantId&&(l.tid=r.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await r._getAppCheckToken(),d=h?`#${x7}=${encodeURIComponent(h)}`:"";return`${v7(r)}?${Bf(u).slice(1)}${d}`}function v7({config:r}){return r.emulator?u5(r,y7):`https://${r.authDomain}/${g7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="webStorageSupport";class b7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=s_,this._completeRedirectFn=UE,this._overrideRedirectResult=DE}async _openPopup(e,t,n,i){var l;Il((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await hv(e,t,n,x1(),i);return p7(e,o,m5())}async _openRedirect(e,t,n,i){await this._originValidation(e);const o=await hv(e,t,n,x1(),i);return _E(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Il(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await l7(e),n=new HE(e);return t.register("authEvent",i=>(Kt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($g,{type:$g},i=>{var l;const o=(l=i==null?void 0:i[0])==null?void 0:l[$g];o!==void 0&&t(!!o),ya(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=QE(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return HS()||MS()||h5()}}const w7=b7;var fv="@firebase/auth",pv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Kt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _7(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function T7(r){zd(new Tu("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=n.options;Kt(l&&!l.includes(":"),"invalid-api-key",{appName:n.name});const h={apiKey:l,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GS(r)},d=new U8(n,i,o,h);return eE(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),zd(new Tu("auth-internal",e=>{const t=Ou(e.getProvider("auth").getImmediate());return(n=>new S7(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bc(fv,pv,_7(r)),bc(fv,pv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7=300,C7=xS("authIdTokenMaxAge")||A7;let mv=null;const k7=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>C7)return;const i=t==null?void 0:t.token;mv!==i&&(mv=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function I7(r=IS()){const e=l5(r,"auth");if(e.isInitialized())return e.getImmediate();const t=Z8(r,{popupRedirectResolver:w7,persistence:[PE,bE,s_]}),n=xS("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const l=k7(o.toString());gE(t,l,()=>l(t.currentUser)),mE(t,u=>l(u))}}const i=gS("auth");return i&&tE(t,`http://${i}`),t}function E7(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}q8({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const o=Ua("internal-error");o.customData=i,t(o)},n.type="text/javascript",n.charset="UTF-8",E7().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});T7("Browser");var gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wc,f_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,k){function I(){}I.prototype=k.prototype,V.F=k.prototype,V.prototype=new I,V.prototype.constructor=V,V.D=function(M,C,w){for(var N=Array(arguments.length-2),D=2;D<arguments.length;D++)N[D-2]=arguments[D];return k.prototype[C].apply(M,N)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(V,k,I){I||(I=0);const M=Array(16);if(typeof k=="string")for(var C=0;C<16;++C)M[C]=k.charCodeAt(I++)|k.charCodeAt(I++)<<8|k.charCodeAt(I++)<<16|k.charCodeAt(I++)<<24;else for(C=0;C<16;++C)M[C]=k[I++]|k[I++]<<8|k[I++]<<16|k[I++]<<24;k=V.g[0],I=V.g[1],C=V.g[2];let w=V.g[3],N;N=k+(w^I&(C^w))+M[0]+3614090360&4294967295,k=I+(N<<7&4294967295|N>>>25),N=w+(C^k&(I^C))+M[1]+3905402710&4294967295,w=k+(N<<12&4294967295|N>>>20),N=C+(I^w&(k^I))+M[2]+606105819&4294967295,C=w+(N<<17&4294967295|N>>>15),N=I+(k^C&(w^k))+M[3]+3250441966&4294967295,I=C+(N<<22&4294967295|N>>>10),N=k+(w^I&(C^w))+M[4]+4118548399&4294967295,k=I+(N<<7&4294967295|N>>>25),N=w+(C^k&(I^C))+M[5]+1200080426&4294967295,w=k+(N<<12&4294967295|N>>>20),N=C+(I^w&(k^I))+M[6]+2821735955&4294967295,C=w+(N<<17&4294967295|N>>>15),N=I+(k^C&(w^k))+M[7]+4249261313&4294967295,I=C+(N<<22&4294967295|N>>>10),N=k+(w^I&(C^w))+M[8]+1770035416&4294967295,k=I+(N<<7&4294967295|N>>>25),N=w+(C^k&(I^C))+M[9]+2336552879&4294967295,w=k+(N<<12&4294967295|N>>>20),N=C+(I^w&(k^I))+M[10]+4294925233&4294967295,C=w+(N<<17&4294967295|N>>>15),N=I+(k^C&(w^k))+M[11]+2304563134&4294967295,I=C+(N<<22&4294967295|N>>>10),N=k+(w^I&(C^w))+M[12]+1804603682&4294967295,k=I+(N<<7&4294967295|N>>>25),N=w+(C^k&(I^C))+M[13]+4254626195&4294967295,w=k+(N<<12&4294967295|N>>>20),N=C+(I^w&(k^I))+M[14]+2792965006&4294967295,C=w+(N<<17&4294967295|N>>>15),N=I+(k^C&(w^k))+M[15]+1236535329&4294967295,I=C+(N<<22&4294967295|N>>>10),N=k+(C^w&(I^C))+M[1]+4129170786&4294967295,k=I+(N<<5&4294967295|N>>>27),N=w+(I^C&(k^I))+M[6]+3225465664&4294967295,w=k+(N<<9&4294967295|N>>>23),N=C+(k^I&(w^k))+M[11]+643717713&4294967295,C=w+(N<<14&4294967295|N>>>18),N=I+(w^k&(C^w))+M[0]+3921069994&4294967295,I=C+(N<<20&4294967295|N>>>12),N=k+(C^w&(I^C))+M[5]+3593408605&4294967295,k=I+(N<<5&4294967295|N>>>27),N=w+(I^C&(k^I))+M[10]+38016083&4294967295,w=k+(N<<9&4294967295|N>>>23),N=C+(k^I&(w^k))+M[15]+3634488961&4294967295,C=w+(N<<14&4294967295|N>>>18),N=I+(w^k&(C^w))+M[4]+3889429448&4294967295,I=C+(N<<20&4294967295|N>>>12),N=k+(C^w&(I^C))+M[9]+568446438&4294967295,k=I+(N<<5&4294967295|N>>>27),N=w+(I^C&(k^I))+M[14]+3275163606&4294967295,w=k+(N<<9&4294967295|N>>>23),N=C+(k^I&(w^k))+M[3]+4107603335&4294967295,C=w+(N<<14&4294967295|N>>>18),N=I+(w^k&(C^w))+M[8]+1163531501&4294967295,I=C+(N<<20&4294967295|N>>>12),N=k+(C^w&(I^C))+M[13]+2850285829&4294967295,k=I+(N<<5&4294967295|N>>>27),N=w+(I^C&(k^I))+M[2]+4243563512&4294967295,w=k+(N<<9&4294967295|N>>>23),N=C+(k^I&(w^k))+M[7]+1735328473&4294967295,C=w+(N<<14&4294967295|N>>>18),N=I+(w^k&(C^w))+M[12]+2368359562&4294967295,I=C+(N<<20&4294967295|N>>>12),N=k+(I^C^w)+M[5]+4294588738&4294967295,k=I+(N<<4&4294967295|N>>>28),N=w+(k^I^C)+M[8]+2272392833&4294967295,w=k+(N<<11&4294967295|N>>>21),N=C+(w^k^I)+M[11]+1839030562&4294967295,C=w+(N<<16&4294967295|N>>>16),N=I+(C^w^k)+M[14]+4259657740&4294967295,I=C+(N<<23&4294967295|N>>>9),N=k+(I^C^w)+M[1]+2763975236&4294967295,k=I+(N<<4&4294967295|N>>>28),N=w+(k^I^C)+M[4]+1272893353&4294967295,w=k+(N<<11&4294967295|N>>>21),N=C+(w^k^I)+M[7]+4139469664&4294967295,C=w+(N<<16&4294967295|N>>>16),N=I+(C^w^k)+M[10]+3200236656&4294967295,I=C+(N<<23&4294967295|N>>>9),N=k+(I^C^w)+M[13]+681279174&4294967295,k=I+(N<<4&4294967295|N>>>28),N=w+(k^I^C)+M[0]+3936430074&4294967295,w=k+(N<<11&4294967295|N>>>21),N=C+(w^k^I)+M[3]+3572445317&4294967295,C=w+(N<<16&4294967295|N>>>16),N=I+(C^w^k)+M[6]+76029189&4294967295,I=C+(N<<23&4294967295|N>>>9),N=k+(I^C^w)+M[9]+3654602809&4294967295,k=I+(N<<4&4294967295|N>>>28),N=w+(k^I^C)+M[12]+3873151461&4294967295,w=k+(N<<11&4294967295|N>>>21),N=C+(w^k^I)+M[15]+530742520&4294967295,C=w+(N<<16&4294967295|N>>>16),N=I+(C^w^k)+M[2]+3299628645&4294967295,I=C+(N<<23&4294967295|N>>>9),N=k+(C^(I|~w))+M[0]+4096336452&4294967295,k=I+(N<<6&4294967295|N>>>26),N=w+(I^(k|~C))+M[7]+1126891415&4294967295,w=k+(N<<10&4294967295|N>>>22),N=C+(k^(w|~I))+M[14]+2878612391&4294967295,C=w+(N<<15&4294967295|N>>>17),N=I+(w^(C|~k))+M[5]+4237533241&4294967295,I=C+(N<<21&4294967295|N>>>11),N=k+(C^(I|~w))+M[12]+1700485571&4294967295,k=I+(N<<6&4294967295|N>>>26),N=w+(I^(k|~C))+M[3]+2399980690&4294967295,w=k+(N<<10&4294967295|N>>>22),N=C+(k^(w|~I))+M[10]+4293915773&4294967295,C=w+(N<<15&4294967295|N>>>17),N=I+(w^(C|~k))+M[1]+2240044497&4294967295,I=C+(N<<21&4294967295|N>>>11),N=k+(C^(I|~w))+M[8]+1873313359&4294967295,k=I+(N<<6&4294967295|N>>>26),N=w+(I^(k|~C))+M[15]+4264355552&4294967295,w=k+(N<<10&4294967295|N>>>22),N=C+(k^(w|~I))+M[6]+2734768916&4294967295,C=w+(N<<15&4294967295|N>>>17),N=I+(w^(C|~k))+M[13]+1309151649&4294967295,I=C+(N<<21&4294967295|N>>>11),N=k+(C^(I|~w))+M[4]+4149444226&4294967295,k=I+(N<<6&4294967295|N>>>26),N=w+(I^(k|~C))+M[11]+3174756917&4294967295,w=k+(N<<10&4294967295|N>>>22),N=C+(k^(w|~I))+M[2]+718787259&4294967295,C=w+(N<<15&4294967295|N>>>17),N=I+(w^(C|~k))+M[9]+3951481745&4294967295,V.g[0]=V.g[0]+k&4294967295,V.g[1]=V.g[1]+(C+(N<<21&4294967295|N>>>11))&4294967295,V.g[2]=V.g[2]+C&4294967295,V.g[3]=V.g[3]+w&4294967295}n.prototype.v=function(V,k){k===void 0&&(k=V.length);const I=k-this.blockSize,M=this.C;let C=this.h,w=0;for(;w<k;){if(C==0)for(;w<=I;)i(this,V,w),w+=this.blockSize;if(typeof V=="string"){for(;w<k;)if(M[C++]=V.charCodeAt(w++),C==this.blockSize){i(this,M),C=0;break}}else for(;w<k;)if(M[C++]=V[w++],C==this.blockSize){i(this,M),C=0;break}}this.h=C,this.o+=k},n.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var k=1;k<V.length-8;++k)V[k]=0;k=this.o*8;for(var I=V.length-8;I<V.length;++I)V[I]=k&255,k/=256;for(this.v(V),V=Array(16),k=0,I=0;I<4;++I)for(let M=0;M<32;M+=8)V[k++]=this.g[I]>>>M&255;return V};function o(V,k){var I=u;return Object.prototype.hasOwnProperty.call(I,V)?I[V]:I[V]=k(V)}function l(V,k){this.h=k;const I=[];let M=!0;for(let C=V.length-1;C>=0;C--){const w=V[C]|0;M&&w==k||(I[C]=w,M=!1)}this.g=I}var u={};function h(V){return-128<=V&&V<128?o(V,function(k){return new l([k|0],k<0?-1:0)}):new l([V|0],V<0?-1:0)}function d(V){if(isNaN(V)||!isFinite(V))return b;if(V<0)return L(d(-V));const k=[];let I=1;for(let M=0;V>=I;M++)k[M]=V/I|0,I*=4294967296;return new l(k,0)}function g(V,k){if(V.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(V.charAt(0)=="-")return L(g(V.substring(1),k));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=d(Math.pow(k,8));let M=b;for(let w=0;w<V.length;w+=8){var C=Math.min(8,V.length-w);const N=parseInt(V.substring(w,w+C),k);C<8?(C=d(Math.pow(k,C)),M=M.j(C).add(d(N))):(M=M.j(I),M=M.add(d(N)))}return M}var b=h(0),S=h(1),x=h(16777216);r=l.prototype,r.m=function(){if(E(this))return-L(this).m();let V=0,k=1;for(let I=0;I<this.g.length;I++){const M=this.i(I);V+=(M>=0?M:4294967296+M)*k,k*=4294967296}return V},r.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(B(this))return"0";if(E(this))return"-"+L(this).toString(V);const k=d(Math.pow(V,6));var I=this;let M="";for(;;){const C=F(I,k).g;I=A(I,C.j(k));let w=((I.g.length>0?I.g[0]:I.h)>>>0).toString(V);if(I=C,B(I))return w+M;for(;w.length<6;)w="0"+w;M=w+M}},r.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function B(V){if(V.h!=0)return!1;for(let k=0;k<V.g.length;k++)if(V.g[k]!=0)return!1;return!0}function E(V){return V.h==-1}r.l=function(V){return V=A(this,V),E(V)?-1:B(V)?0:1};function L(V){const k=V.g.length,I=[];for(let M=0;M<k;M++)I[M]=~V.g[M];return new l(I,~V.h).add(S)}r.abs=function(){return E(this)?L(this):this},r.add=function(V){const k=Math.max(this.g.length,V.g.length),I=[];let M=0;for(let C=0;C<=k;C++){let w=M+(this.i(C)&65535)+(V.i(C)&65535),N=(w>>>16)+(this.i(C)>>>16)+(V.i(C)>>>16);M=N>>>16,w&=65535,N&=65535,I[C]=N<<16|w}return new l(I,I[I.length-1]&-2147483648?-1:0)};function A(V,k){return V.add(L(k))}r.j=function(V){if(B(this)||B(V))return b;if(E(this))return E(V)?L(this).j(L(V)):L(L(this).j(V));if(E(V))return L(this.j(L(V)));if(this.l(x)<0&&V.l(x)<0)return d(this.m()*V.m());const k=this.g.length+V.g.length,I=[];for(var M=0;M<2*k;M++)I[M]=0;for(M=0;M<this.g.length;M++)for(let C=0;C<V.g.length;C++){const w=this.i(M)>>>16,N=this.i(M)&65535,D=V.i(C)>>>16,q=V.i(C)&65535;I[2*M+2*C]+=N*q,O(I,2*M+2*C),I[2*M+2*C+1]+=w*q,O(I,2*M+2*C+1),I[2*M+2*C+1]+=N*D,O(I,2*M+2*C+1),I[2*M+2*C+2]+=w*D,O(I,2*M+2*C+2)}for(V=0;V<k;V++)I[V]=I[2*V+1]<<16|I[2*V];for(V=k;V<2*k;V++)I[V]=0;return new l(I,0)};function O(V,k){for(;(V[k]&65535)!=V[k];)V[k+1]+=V[k]>>>16,V[k]&=65535,k++}function $(V,k){this.g=V,this.h=k}function F(V,k){if(B(k))throw Error("division by zero");if(B(V))return new $(b,b);if(E(V))return k=F(L(V),k),new $(L(k.g),L(k.h));if(E(k))return k=F(V,L(k)),new $(L(k.g),k.h);if(V.g.length>30){if(E(V)||E(k))throw Error("slowDivide_ only works with positive integers.");for(var I=S,M=k;M.l(V)<=0;)I=ie(I),M=ie(M);var C=ue(I,1),w=ue(M,1);for(M=ue(M,2),I=ue(I,2);!B(M);){var N=w.add(M);N.l(V)<=0&&(C=C.add(I),w=N),M=ue(M,1),I=ue(I,1)}return k=A(V,C.j(k)),new $(C,k)}for(C=b;V.l(k)>=0;){for(I=Math.max(1,Math.floor(V.m()/k.m())),M=Math.ceil(Math.log(I)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),w=d(I),N=w.j(k);E(N)||N.l(V)>0;)I-=M,w=d(I),N=w.j(k);B(w)&&(w=S),C=C.add(w),V=A(V,N)}return new $(C,V)}r.B=function(V){return F(this,V).h},r.and=function(V){const k=Math.max(this.g.length,V.g.length),I=[];for(let M=0;M<k;M++)I[M]=this.i(M)&V.i(M);return new l(I,this.h&V.h)},r.or=function(V){const k=Math.max(this.g.length,V.g.length),I=[];for(let M=0;M<k;M++)I[M]=this.i(M)|V.i(M);return new l(I,this.h|V.h)},r.xor=function(V){const k=Math.max(this.g.length,V.g.length),I=[];for(let M=0;M<k;M++)I[M]=this.i(M)^V.i(M);return new l(I,this.h^V.h)};function ie(V){const k=V.g.length+1,I=[];for(let M=0;M<k;M++)I[M]=V.i(M)<<1|V.i(M-1)>>>31;return new l(I,V.h)}function ue(V,k){const I=k>>5;k%=32;const M=V.g.length-I,C=[];for(let w=0;w<M;w++)C[w]=k>0?V.i(w+I)>>>k|V.i(w+I+1)<<32-k:V.i(w+I);return new l(C,V.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,f_=n,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=g,wc=l}).apply(typeof gv<"u"?gv:typeof self<"u"?self:typeof window<"u"?window:{});var Mp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var p_,qh,m_,im,S1,g_,y_,x_;(function(){var r,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mp=="object"&&Mp];for(var R=0;R<m.length;++R){var U=m[R];if(U&&U.Math==Math)return U}throw Error("Cannot find global object")}var n=t(this);function i(m,R){if(R)e:{var U=n;m=m.split(".");for(var Z=0;Z<m.length-1;Z++){var Ie=m[Z];if(!(Ie in U))break e;U=U[Ie]}m=m[m.length-1],Z=U[m],R=R(Z),R!=Z&&R!=null&&e(U,m,{configurable:!0,writable:!0,value:R})}}i("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(m){return m||function(R){var U=[],Z;for(Z in R)Object.prototype.hasOwnProperty.call(R,Z)&&U.push([Z,R[Z]]);return U}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(m){var R=typeof m;return R=="object"&&m!=null||R=="function"}function h(m,R,U){return m.call.apply(m.bind,arguments)}function d(m,R,U){return d=h,d.apply(null,arguments)}function g(m,R){var U=Array.prototype.slice.call(arguments,1);return function(){var Z=U.slice();return Z.push.apply(Z,arguments),m.apply(this,Z)}}function b(m,R){function U(){}U.prototype=R.prototype,m.Z=R.prototype,m.prototype=new U,m.prototype.constructor=m,m.Ob=function(Z,Ie,Be){for(var tt=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)tt[Dt-2]=arguments[Dt];return R.prototype[Ie].apply(Z,tt)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function x(m){const R=m.length;if(R>0){const U=Array(R);for(let Z=0;Z<R;Z++)U[Z]=m[Z];return U}return[]}function B(m,R){for(let Z=1;Z<arguments.length;Z++){const Ie=arguments[Z];var U=typeof Ie;if(U=U!="object"?U:Ie?Array.isArray(Ie)?"array":U:"null",U=="array"||U=="object"&&typeof Ie.length=="number"){U=m.length||0;const Be=Ie.length||0;m.length=U+Be;for(let tt=0;tt<Be;tt++)m[U+tt]=Ie[tt]}else m.push(Ie)}}class E{constructor(R,U){this.i=R,this.j=U,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function L(m){l.setTimeout(()=>{throw m},0)}function A(){var m=V;let R=null;return m.g&&(R=m.g,m.g=m.g.next,m.g||(m.h=null),R.next=null),R}class O{constructor(){this.h=this.g=null}add(R,U){const Z=$.get();Z.set(R,U),this.h?this.h.next=Z:this.g=Z,this.h=Z}}var $=new E(()=>new F,m=>m.reset());class F{constructor(){this.next=this.g=this.h=null}set(R,U){this.h=R,this.g=U,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ue=!1,V=new O,k=()=>{const m=Promise.resolve(void 0);ie=()=>{m.then(I)}};function I(){for(var m;m=A();){try{m.h.call(m.g)}catch(U){L(U)}var R=$;R.j(m),R.h<100&&(R.h++,m.next=R.g,R.g=m)}ue=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(m,R){this.type=m,this.g=this.target=R,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var w=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,R=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const U=()=>{};l.addEventListener("test",U,R),l.removeEventListener("test",U,R)}catch{}return m})();function N(m){return/^[\s\xa0]*$/.test(m)}function D(m,R){C.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,R)}b(D,C),D.prototype.init=function(m,R){const U=this.type=m.type,Z=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=R,R=m.relatedTarget,R||(U=="mouseover"?R=m.fromElement:U=="mouseout"&&(R=m.toElement)),this.relatedTarget=R,Z?(this.clientX=Z.clientX!==void 0?Z.clientX:Z.pageX,this.clientY=Z.clientY!==void 0?Z.clientY:Z.pageY,this.screenX=Z.screenX||0,this.screenY=Z.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&D.Z.h.call(this)},D.prototype.h=function(){D.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var q="closure_listenable_"+(Math.random()*1e6|0),ne=0;function se(m,R,U,Z,Ie){this.listener=m,this.proxy=null,this.src=R,this.type=U,this.capture=!!Z,this.ha=Ie,this.key=++ne,this.da=this.fa=!1}function oe(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function xe(m,R,U){for(const Z in m)R.call(U,m[Z],Z,m)}function we(m,R){for(const U in m)R.call(void 0,m[U],U,m)}function ee(m){const R={};for(const U in m)R[U]=m[U];return R}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(m,R){let U,Z;for(let Ie=1;Ie<arguments.length;Ie++){Z=arguments[Ie];for(U in Z)m[U]=Z[U];for(let Be=0;Be<W.length;Be++)U=W[Be],Object.prototype.hasOwnProperty.call(Z,U)&&(m[U]=Z[U])}}function re(m){this.src=m,this.g={},this.h=0}re.prototype.add=function(m,R,U,Z,Ie){const Be=m.toString();m=this.g[Be],m||(m=this.g[Be]=[],this.h++);const tt=me(m,R,Z,Ie);return tt>-1?(R=m[tt],U||(R.fa=!1)):(R=new se(R,this.src,Be,!!Z,Ie),R.fa=U,m.push(R)),R};function he(m,R){const U=R.type;if(U in m.g){var Z=m.g[U],Ie=Array.prototype.indexOf.call(Z,R,void 0),Be;(Be=Ie>=0)&&Array.prototype.splice.call(Z,Ie,1),Be&&(oe(R),m.g[U].length==0&&(delete m.g[U],m.h--))}}function me(m,R,U,Z){for(let Ie=0;Ie<m.length;++Ie){const Be=m[Ie];if(!Be.da&&Be.listener==R&&Be.capture==!!U&&Be.ha==Z)return Ie}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),ke={};function Ce(m,R,U,Z,Ie){if(Array.isArray(R)){for(let Be=0;Be<R.length;Be++)Ce(m,R[Be],U,Z,Ie);return null}return U=wt(U),m&&m[q]?m.J(R,U,u(Z)?!!Z.capture:!1,Ie):ge(m,R,U,!1,Z,Ie)}function ge(m,R,U,Z,Ie,Be){if(!R)throw Error("Invalid event type");const tt=u(Ie)?!!Ie.capture:!!Ie;let Dt=Nt(m);if(Dt||(m[Se]=Dt=new re(m)),U=Dt.add(R,U,Z,tt,Be),U.proxy)return U;if(Z=Fe(),U.proxy=Z,Z.src=m,Z.listener=U,m.addEventListener)w||(Ie=tt),Ie===void 0&&(Ie=!1),m.addEventListener(R.toString(),Z,Ie);else if(m.attachEvent)m.attachEvent(ze(R.toString()),Z);else if(m.addListener&&m.removeListener)m.addListener(Z);else throw Error("addEventListener and attachEvent are unavailable.");return U}function Fe(){function m(U){return R.call(m.src,m.listener,U)}const R=de;return m}function Ke(m,R,U,Z,Ie){if(Array.isArray(R))for(var Be=0;Be<R.length;Be++)Ke(m,R[Be],U,Z,Ie);else Z=u(Z)?!!Z.capture:!!Z,U=wt(U),m&&m[q]?(m=m.i,Be=String(R).toString(),Be in m.g&&(R=m.g[Be],U=me(R,U,Z,Ie),U>-1&&(oe(R[U]),Array.prototype.splice.call(R,U,1),R.length==0&&(delete m.g[Be],m.h--)))):m&&(m=Nt(m))&&(R=m.g[R.toString()],m=-1,R&&(m=me(R,U,Z,Ie)),(U=m>-1?R[m]:null)&&Qe(U))}function Qe(m){if(typeof m!="number"&&m&&!m.da){var R=m.src;if(R&&R[q])he(R.i,m);else{var U=m.type,Z=m.proxy;R.removeEventListener?R.removeEventListener(U,Z,m.capture):R.detachEvent?R.detachEvent(ze(U),Z):R.addListener&&R.removeListener&&R.removeListener(Z),(U=Nt(R))?(he(U,m),U.h==0&&(U.src=null,R[Se]=null)):oe(m)}}}function ze(m){return m in ke?ke[m]:ke[m]="on"+m}function de(m,R){if(m.da)m=!0;else{R=new D(R,this);const U=m.listener,Z=m.ha||m.src;m.fa&&Qe(m),m=U.call(Z,R)}return m}function Nt(m){return m=m[Se],m instanceof re?m:null}var Et="__closure_events_fn_"+(Math.random()*1e9>>>0);function wt(m){return typeof m=="function"?m:(m[Et]||(m[Et]=function(R){return m.handleEvent(R)}),m[Et])}function He(){M.call(this),this.i=new re(this),this.M=this,this.G=null}b(He,M),He.prototype[q]=!0,He.prototype.removeEventListener=function(m,R,U,Z){Ke(this,m,R,U,Z)};function ot(m,R){var U,Z=m.G;if(Z)for(U=[];Z;Z=Z.G)U.push(Z);if(m=m.M,Z=R.type||R,typeof R=="string")R=new C(R,m);else if(R instanceof C)R.target=R.target||m;else{var Ie=R;R=new C(Z,m),J(R,Ie)}Ie=!0;let Be,tt;if(U)for(tt=U.length-1;tt>=0;tt--)Be=R.g=U[tt],Ie=rt(Be,Z,!0,R)&&Ie;if(Be=R.g=m,Ie=rt(Be,Z,!0,R)&&Ie,Ie=rt(Be,Z,!1,R)&&Ie,U)for(tt=0;tt<U.length;tt++)Be=R.g=U[tt],Ie=rt(Be,Z,!1,R)&&Ie}He.prototype.N=function(){if(He.Z.N.call(this),this.i){var m=this.i;for(const R in m.g){const U=m.g[R];for(let Z=0;Z<U.length;Z++)oe(U[Z]);delete m.g[R],m.h--}}this.G=null},He.prototype.J=function(m,R,U,Z){return this.i.add(String(m),R,!1,U,Z)},He.prototype.K=function(m,R,U,Z){return this.i.add(String(m),R,!0,U,Z)};function rt(m,R,U,Z){if(R=m.i.g[String(R)],!R)return!0;R=R.concat();let Ie=!0;for(let Be=0;Be<R.length;++Be){const tt=R[Be];if(tt&&!tt.da&&tt.capture==U){const Dt=tt.listener,Dr=tt.ha||tt.src;tt.fa&&he(m.i,tt),Ie=Dt.call(Dr,Z)!==!1&&Ie}}return Ie&&!Z.defaultPrevented}function Jt(m,R){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=d(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:l.setTimeout(m,R||0)}function _t(m){m.g=Jt(()=>{m.g=null,m.i&&(m.i=!1,_t(m))},m.l);const R=m.h;m.h=null,m.m.apply(null,R)}class mr extends M{constructor(R,U){super(),this.m=R,this.l=U,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ft(m){M.call(this),this.h=m,this.g={}}b(Ft,M);var qt=[];function vr(m){xe(m.g,function(R,U){this.g.hasOwnProperty(U)&&Qe(R)},m),m.g={}}Ft.prototype.N=function(){Ft.Z.N.call(this),vr(this)},Ft.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ot=l.JSON.stringify,Tt=l.JSON.parse,jt=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function pt(){}function Ir(){}var ir={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ht(){C.call(this,"d")}b(ht,C);function Ht(){C.call(this,"c")}b(Ht,C);var sr={},It=null;function tr(){return It=It||new He}sr.Ia="serverreachability";function Wt(m){C.call(this,sr.Ia,m)}b(Wt,C);function Er(m){const R=tr();ot(R,new Wt(R))}sr.STAT_EVENT="statevent";function zr(m,R){C.call(this,sr.STAT_EVENT,m),this.stat=R}b(zr,C);function $t(m){const R=tr();ot(R,new zr(R,m))}sr.Ja="timingevent";function Mt(m,R){C.call(this,sr.Ja,m),this.size=R}b(Mt,C);function ar(m,R){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},R)}function Hi(){this.g=!0}Hi.prototype.ua=function(){this.g=!1};function zn(m,R,U,Z,Ie,Be){m.info(function(){if(m.g)if(Be){var tt="",Dt=Be.split("&");for(let dr=0;dr<Dt.length;dr++){var Dr=Dt[dr].split("=");if(Dr.length>1){const Xr=Dr[0];Dr=Dr[1];const $n=Xr.split("_");tt=$n.length>=2&&$n[1]=="type"?tt+(Xr+"="+Dr+"&"):tt+(Xr+"=redacted&")}}}else tt=null;else tt=Be;return"XMLHTTP REQ ("+Z+") [attempt "+Ie+"]: "+R+`
`+U+`
`+tt})}function Ro(m,R,U,Z,Ie,Be,tt){m.info(function(){return"XMLHTTP RESP ("+Z+") [ attempt "+Ie+"]: "+R+`
`+U+`
`+Be+" "+tt})}function Vn(m,R,U,Z){m.info(function(){return"XMLHTTP TEXT ("+R+"): "+Ni(m,U)+(Z?" "+Z:"")})}function Rt(m,R){m.info(function(){return"TIMEOUT: "+R})}Hi.prototype.info=function(){};function Ni(m,R){if(!m.g)return R;if(!R)return null;try{const Be=JSON.parse(R);if(Be){for(m=0;m<Be.length;m++)if(Array.isArray(Be[m])){var U=Be[m];if(!(U.length<2)){var Z=U[1];if(Array.isArray(Z)&&!(Z.length<1)){var Ie=Z[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(let tt=1;tt<Z.length;tt++)Z[tt]=""}}}}return Ot(Be)}catch{return R}}var gi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},On={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Bi;function Cr(){}b(Cr,pt),Cr.prototype.g=function(){return new XMLHttpRequest},Bi=new Cr;function Vr(m){return encodeURIComponent(String(m))}function un(m){var R=1;m=m.split(":");const U=[];for(;R>0&&m.length;)U.push(m.shift()),R--;return m.length&&U.push(m.join(":")),U}function Yn(m,R,U,Z){this.j=m,this.i=R,this.l=U,this.S=Z||1,this.V=new Ft(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Yo}function Yo(){this.i=null,this.g="",this.h=!1}var Gi={},Ki={};function bn(m,R,U){m.M=1,m.A=Mn(wr(R)),m.u=U,m.R=!0,Li(m,null)}function Li(m,R){m.F=Date.now(),go(m),m.B=wr(m.A);var U=m.B,Z=m.S;Array.isArray(Z)||(Z=[String(Z)]),el(U.i,"t",Z),m.C=0,U=m.j.L,m.h=new Yo,m.g=lt(m.j,U?R:null,!m.u),m.P>0&&(m.O=new mr(d(m.Y,m,m.g),m.P)),R=m.V,U=m.g,Z=m.ba;var Ie="readystatechange";Array.isArray(Ie)||(Ie&&(qt[0]=Ie.toString()),Ie=qt);for(let Be=0;Be<Ie.length;Be++){const tt=Ce(U,Ie[Be],Z||R.handleEvent,!1,R.h||R);if(!tt)break;R.g[tt.key]=tt}R=m.J?ee(m.J):{},m.u?(m.v||(m.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,R)):(m.v="GET",m.g.ea(m.B,m.v,null,R)),Er(),zn(m.i,m.v,m.B,m.l,m.S,m.u)}Yn.prototype.ba=function(m){m=m.target;const R=this.O;R&&Qi(m)==3?R.j():this.Y(m)},Yn.prototype.Y=function(m){try{if(m==this.g)e:{const Dt=Qi(this.g),Dr=this.g.ya(),dr=this.g.ca();if(!(Dt<3)&&(Dt!=3||this.g&&(this.h.h||this.g.la()||Aa(this.g)))){this.K||Dt!=4||Dr==7||(Dr==8||dr<=0?Er(3):Er(2)),Qo(this);var R=this.g.ca();this.X=R;var U=Fi(this);if(this.o=R==200,Ro(this.i,this.v,this.B,this.l,this.S,Dt,R),this.o){if(this.U&&!this.L){t:{if(this.g){var Z,Ie=this.g;if((Z=Ie.g?Ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(Z)){var Be=Z;break t}}Be=null}if(m=Be)Vn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,jr(this,m);else{this.o=!1,this.m=3,$t(12),Xo(this),Po(this);break e}}if(this.R){m=!0;let Xr;for(;!this.K&&this.C<U.length;)if(Xr=mo(this,U),Xr==Ki){Dt==4&&(this.m=4,$t(14),m=!1),Vn(this.i,this.l,null,"[Incomplete Response]");break}else if(Xr==Gi){this.m=4,$t(15),Vn(this.i,this.l,U,"[Invalid Chunk]"),m=!1;break}else Vn(this.i,this.l,Xr,null),jr(this,Xr);if(bs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||U.length!=0||this.h.h||(this.m=1,$t(16),m=!1),this.o=this.o&&m,!m)Vn(this.i,this.l,U,"[Invalid Chunked Response]"),Xo(this),Po(this);else if(U.length>0&&!this.W){this.W=!0;var tt=this.j;tt.g==this&&tt.aa&&!tt.P&&(tt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),ks(tt),tt.P=!0,$t(11))}}else Vn(this.i,this.l,U,null),jr(this,U);Dt==4&&Xo(this),this.o&&!this.K&&(Dt==4?ce(this.j,this):(this.o=!1,go(this)))}else rs(this.g),R==400&&U.indexOf("Unknown SID")>0?(this.m=3,$t(12)):(this.m=0,$t(13)),Xo(this),Po(this)}}}catch{}finally{}};function Fi(m){if(!bs(m))return m.g.la();const R=Aa(m.g);if(R==="")return"";let U="";const Z=R.length,Ie=Qi(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Xo(m),Po(m),"";m.h.i=new l.TextDecoder}for(let Be=0;Be<Z;Be++)m.h.h=!0,U+=m.h.i.decode(R[Be],{stream:!(Ie&&Be==Z-1)});return R.length=0,m.h.g+=U,m.C=0,m.h.g}function bs(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function mo(m,R){var U=m.C,Z=R.indexOf(`
`,U);return Z==-1?Ki:(U=Number(R.substring(U,Z)),isNaN(U)?Gi:(Z+=1,Z+U>R.length?Ki:(R=R.slice(Z,Z+U),m.C=Z+U,R)))}Yn.prototype.cancel=function(){this.K=!0,Xo(this)};function go(m){m.T=Date.now()+m.H,ws(m,m.H)}function ws(m,R){if(m.D!=null)throw Error("WatchDog timer not null");m.D=ar(d(m.aa,m),R)}function Qo(m){m.D&&(l.clearTimeout(m.D),m.D=null)}Yn.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Rt(this.i,this.B),this.M!=2&&(Er(),$t(17)),Xo(this),this.m=2,Po(this)):ws(this,this.T-m)};function Po(m){m.j.I==0||m.K||ce(m.j,m)}function Xo(m){Qo(m);var R=m.O;R&&typeof R.dispose=="function"&&R.dispose(),m.O=null,vr(m.V),m.g&&(R=m.g,m.g=null,R.abort(),R.dispose())}function jr(m,R){try{var U=m.j;if(U.I!=0&&(U.g==m||wa(U.h,m))){if(!m.L&&wa(U.h,m)&&U.I==3){try{var Z=U.Ba.g.parse(R)}catch{Z=null}if(Array.isArray(Z)&&Z.length==3){var Ie=Z;if(Ie[0]==0){e:if(!U.v){if(U.g)if(U.g.F+3e3<m.F)H(U),ci(U);else break e;_i(U),$t(18)}}else U.xa=Ie[1],0<U.xa-U.K&&Ie[2]<37500&&U.F&&U.A==0&&!U.C&&(U.C=ar(d(U.Va,U),6e3));Zo(U.h)<=1&&U.ta&&(U.ta=void 0)}else Ae(U,11)}else if((m.L||U.g==m)&&H(U),!N(R))for(Ie=U.Ba.g.parse(R),R=0;R<Ie.length;R++){let dr=Ie[R];const Xr=dr[0];if(!(Xr<=U.K))if(U.K=Xr,dr=dr[1],U.I==2)if(dr[0]=="c"){U.M=dr[1],U.ba=dr[2];const $n=dr[3];$n!=null&&(U.ka=$n,U.j.info("VER="+U.ka));const Oi=dr[4];Oi!=null&&(U.za=Oi,U.j.info("SVER="+U.za));const en=dr[5];en!=null&&typeof en=="number"&&en>0&&(Z=1.5*en,U.O=Z,U.j.info("backChannelRequestTimeoutMs_="+Z)),Z=U;const Ti=m.g;if(Ti){const Oo=Ti.g?Ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oo){var Be=Z.h;Be.g||Oo.indexOf("spdy")==-1&&Oo.indexOf("quic")==-1&&Oo.indexOf("h2")==-1||(Be.j=Be.l,Be.g=new Set,Be.h&&(Ss(Be,Be.h),Be.h=null))}if(Z.G){const Ys=Ti.g?Ti.g.getResponseHeader("X-HTTP-Session-Id"):null;Ys&&(Z.wa=Ys,lr(Z.J,Z.G,Ys))}}U.I=3,U.l&&U.l.ra(),U.aa&&(U.T=Date.now()-m.F,U.j.info("Handshake RTT: "+U.T+"ms")),Z=U;var tt=m;if(Z.na=Ge(Z,Z.L?Z.ba:null,Z.W),tt.L){_s(Z.h,tt);var Dt=tt,Dr=Z.O;Dr&&(Dt.H=Dr),Dt.D&&(Qo(Dt),go(Dt)),Z.g=tt}else Wn(Z);U.i.length>0&&Vo(U)}else dr[0]!="stop"&&dr[0]!="close"||Ae(U,7);else U.I==3&&(dr[0]=="stop"||dr[0]=="close"?dr[0]=="stop"?Ae(U,7):ns(U):dr[0]!="noop"&&U.l&&U.l.qa(dr),U.A=0)}}Er(4)}catch{}}var Bl=class{constructor(m,R){this.g=m,this.map=R}};function Us(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yi(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Zo(m){return m.h?1:m.g?m.g.size:0}function wa(m,R){return m.h?m.h==R:m.g?m.g.has(R):!1}function Ss(m,R){m.g?m.g.add(R):m.h=R}function _s(m,R){m.h&&m.h==R?m.h=null:m.g&&m.g.has(R)&&m.g.delete(R)}Us.prototype.cancel=function(){if(this.i=xi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function xi(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let R=m.i;for(const U of m.g.values())R=R.concat(U.G);return R}return x(m.i)}var Ya=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qn(m,R){if(m){m=m.split("&");for(let U=0;U<m.length;U++){const Z=m[U].indexOf("=");let Ie,Be=null;Z>=0?(Ie=m[U].substring(0,Z),Be=m[U].substring(Z+1)):Ie=m[U],R(Ie,Be?decodeURIComponent(Be.replace(/\+/g," ")):"")}}}function No(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;m instanceof No?(this.l=m.l,Ts(this,m.j),this.o=m.o,this.g=m.g,yo(this,m.u),this.h=m.h,vi(this,Ks(m.i)),this.m=m.m):m&&(R=String(m).match(Ya))?(this.l=!1,Ts(this,R[1]||"",!0),this.o=xo(R[2]||""),this.g=xo(R[3]||"",!0),yo(this,R[4]),this.h=xo(R[5]||"",!0),vi(this,R[6]||"",!0),this.m=xo(R[7]||"")):(this.l=!1,this.i=new or(null,this.l))}No.prototype.toString=function(){const m=[];var R=this.j;R&&m.push(Or(R,Qa,!0),":");var U=this.g;return(U||R=="file")&&(m.push("//"),(R=this.o)&&m.push(Or(R,Qa,!0),"@"),m.push(Vr(U).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U=this.u,U!=null&&m.push(":",String(U))),(U=this.h)&&(this.g&&U.charAt(0)!="/"&&m.push("/"),m.push(Or(U,U.charAt(0)=="/"?Hs:Xa,!0))),(U=this.i.toString())&&m.push("?",U),(U=this.m)&&m.push("#",Or(U,Sa)),m.join("")},No.prototype.resolve=function(m){const R=wr(this);let U=!!m.j;U?Ts(R,m.j):U=!!m.o,U?R.o=m.o:U=!!m.g,U?R.g=m.g:U=m.u!=null;var Z=m.h;if(U)yo(R,m.u);else if(U=!!m.h){if(Z.charAt(0)!="/")if(this.g&&!this.h)Z="/"+Z;else{var Ie=R.h.lastIndexOf("/");Ie!=-1&&(Z=R.h.slice(0,Ie+1)+Z)}if(Ie=Z,Ie==".."||Ie==".")Z="";else if(Ie.indexOf("./")!=-1||Ie.indexOf("/.")!=-1){Z=Ie.lastIndexOf("/",0)==0,Ie=Ie.split("/");const Be=[];for(let tt=0;tt<Ie.length;){const Dt=Ie[tt++];Dt=="."?Z&&tt==Ie.length&&Be.push(""):Dt==".."?((Be.length>1||Be.length==1&&Be[0]!="")&&Be.pop(),Z&&tt==Ie.length&&Be.push("")):(Be.push(Dt),Z=!0)}Z=Be.join("/")}else Z=Ie}return U?R.h=Z:U=m.i.toString()!=="",U?vi(R,Ks(m.i)):U=!!m.m,U&&(R.m=m.m),R};function wr(m){return new No(m)}function Ts(m,R,U){m.j=U?xo(R,!0):R,m.j&&(m.j=m.j.replace(/:$/,""))}function yo(m,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);m.u=R}else m.u=null}function vi(m,R,U){R instanceof or?(m.i=R,vo(m.i,m.l)):(U||(R=Or(R,Bo)),m.i=new or(R,m.l))}function lr(m,R,U){m.i.set(R,U)}function Mn(m){return lr(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function xo(m,R){return m?R?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Or(m,R,U){return typeof m=="string"?(m=encodeURI(m).replace(R,qs),U&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function qs(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Qa=/[#\/\?@]/g,Xa=/[#\?:]/g,Hs=/[#\?]/g,Bo=/[#\?@]/g,Sa=/#/g;function or(m,R){this.h=this.g=null,this.i=m||null,this.j=!!R}function li(m){m.g||(m.g=new Map,m.h=0,m.i&&Qn(m.i,function(R,U){m.add(decodeURIComponent(R.replace(/\+/g," ")),U)}))}r=or.prototype,r.add=function(m,R){li(this),this.i=null,m=bi(this,m);let U=this.g.get(m);return U||this.g.set(m,U=[]),U.push(R),this.h+=1,this};function Gs(m,R){li(m),R=bi(m,R),m.g.has(R)&&(m.i=null,m.h-=m.g.get(R).length,m.g.delete(R))}function _a(m,R){return li(m),R=bi(m,R),m.g.has(R)}r.forEach=function(m,R){li(this),this.g.forEach(function(U,Z){U.forEach(function(Ie){m.call(R,Ie,Z,this)},this)},this)};function Za(m,R){li(m);let U=[];if(typeof R=="string")_a(m,R)&&(U=U.concat(m.g.get(bi(m,R))));else for(m=Array.from(m.g.values()),R=0;R<m.length;R++)U=U.concat(m[R]);return U}r.set=function(m,R){return li(this),this.i=null,m=bi(this,m),_a(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[R]),this.h+=1,this},r.get=function(m,R){return m?(m=Za(this,m),m.length>0?String(m[0]):R):R};function el(m,R,U){Gs(m,R),U.length>0&&(m.i=null,m.g.set(bi(m,R),x(U)),m.h+=U.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],R=Array.from(this.g.keys());for(let Z=0;Z<R.length;Z++){var U=R[Z];const Ie=Vr(U);U=Za(this,U);for(let Be=0;Be<U.length;Be++){let tt=Ie;U[Be]!==""&&(tt+="="+Vr(U[Be])),m.push(tt)}}return this.i=m.join("&")};function Ks(m){const R=new or;return R.i=m.i,m.g&&(R.g=new Map(m.g),R.h=m.h),R}function bi(m,R){return R=String(R),m.j&&(R=R.toLowerCase()),R}function vo(m,R){R&&!m.j&&(li(m),m.i=null,m.g.forEach(function(U,Z){const Ie=Z.toLowerCase();Z!=Ie&&(Gs(this,Z),el(this,Ie,U))},m)),m.j=R}function Lo(m,R){const U=new Hi;if(l.Image){const Z=new Image;Z.onload=g(wn,U,"TestLoadImage: loaded",!0,R,Z),Z.onerror=g(wn,U,"TestLoadImage: error",!1,R,Z),Z.onabort=g(wn,U,"TestLoadImage: abort",!1,R,Z),Z.ontimeout=g(wn,U,"TestLoadImage: timeout",!1,R,Z),l.setTimeout(function(){Z.ontimeout&&Z.ontimeout()},1e4),Z.src=m}else R(!1)}function wi(m,R){const U=new Hi,Z=new AbortController,Ie=setTimeout(()=>{Z.abort(),wn(U,"TestPingServer: timeout",!1,R)},1e4);fetch(m,{signal:Z.signal}).then(Be=>{clearTimeout(Ie),Be.ok?wn(U,"TestPingServer: ok",!0,R):wn(U,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(Ie),wn(U,"TestPingServer: error",!1,R)})}function wn(m,R,U,Z,Ie){try{Ie&&(Ie.onload=null,Ie.onerror=null,Ie.onabort=null,Ie.ontimeout=null),Z(U)}catch{}}function Bt(){this.g=new jt}function es(m){this.i=m.Sb||null,this.h=m.ab||!1}b(es,pt),es.prototype.g=function(){return new zi(this.i,this.h)};function zi(m,R){He.call(this),this.H=m,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(zi,He),r=zi.prototype,r.open=function(m,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=R,this.readyState=1,Dn(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(R.body=m),(this.H||l).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,As(this)),this.readyState=0},r.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Dn(this)),this.g&&(this.readyState=3,Dn(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ll(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ll(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}r.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var R=m.value?m.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!m.done}))&&(this.response=this.responseText+=R)}m.done?As(this):Dn(this),this.readyState==3&&Ll(this)}},r.Oa=function(m){this.g&&(this.response=this.responseText=m,As(this))},r.Na=function(m){this.g&&(this.response=m,As(this))},r.ga=function(){this.g&&As(this)};function As(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Dn(m)}r.setRequestHeader=function(m,R){this.A.append(m,R)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],R=this.h.entries();for(var U=R.next();!U.done;)U=U.value,m.push(U[0]+": "+U[1]),U=R.next();return m.join(`\r
`)};function Dn(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Fo(m){let R="";return xe(m,function(U,Z){R+=Z,R+=":",R+=U,R+=`\r
`}),R}function Ta(m,R,U){e:{for(Z in U){var Z=!1;break e}Z=!0}Z||(U=Fo(U),typeof m=="string"?U!=null&&Vr(U):lr(m,R,U))}function Rr(m){He.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(Rr,He);var Js=/^https?$/i,tl=["POST","PUT"];r=Rr.prototype,r.Fa=function(m){this.H=m},r.ea=function(m,R,U,Z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);R=R?R.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bi.g(),this.g.onreadystatechange=S(d(this.Ca,this));try{this.B=!0,this.g.open(R,String(m),!0),this.B=!1}catch(Be){Ji(this,Be);return}if(m=U||"",U=new Map(this.headers),Z)if(Object.getPrototypeOf(Z)===Object.prototype)for(var Ie in Z)U.set(Ie,Z[Ie]);else if(typeof Z.keys=="function"&&typeof Z.get=="function")for(const Be of Z.keys())U.set(Be,Z.get(Be));else throw Error("Unknown input type for opt_headers: "+String(Z));Z=Array.from(U.keys()).find(Be=>Be.toLowerCase()=="content-type"),Ie=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(tl,R,void 0)>=0)||Z||Ie||U.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Be,tt]of U)this.g.setRequestHeader(Be,tt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Be){Ji(this,Be)}};function Ji(m,R){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=R,m.o=5,bo(m),ts(m)}function bo(m){m.A||(m.A=!0,ot(m,"complete"),ot(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,ot(this,"complete"),ot(this,"abort"),ts(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ts(this,!0)),Rr.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Yi(this):this.Xa())},r.Xa=function(){Yi(this)};function Yi(m){if(m.h&&typeof o<"u"){if(m.v&&Qi(m)==4)setTimeout(m.Ca.bind(m),0);else if(ot(m,"readystatechange"),Qi(m)==4){m.h=!1;try{const Be=m.ca();e:switch(Be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var U;if(!(U=R)){var Z;if(Z=Be===0){let tt=String(m.D).match(Ya)[1]||null;!tt&&l.self&&l.self.location&&(tt=l.self.location.protocol.slice(0,-1)),Z=!Js.test(tt?tt.toLowerCase():"")}U=Z}if(U)ot(m,"complete"),ot(m,"success");else{m.o=6;try{var Ie=Qi(m)>2?m.g.statusText:""}catch{Ie=""}m.l=Ie+" ["+m.ca()+"]",bo(m)}}finally{ts(m)}}}}function ts(m,R){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const U=m.g;m.g=null,R||ot(m,"ready");try{U.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Qi(m){return m.g?m.g.readyState:0}r.ca=function(){try{return Qi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(m){if(this.g){var R=this.g.responseText;return m&&R.indexOf(m)==0&&(R=R.substring(m.length)),Tt(R)}};function Aa(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function rs(m){const R={};m=(m.g&&Qi(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let Z=0;Z<m.length;Z++){if(N(m[Z]))continue;var U=un(m[Z]);const Ie=U[0];if(U=U[1],typeof U!="string")continue;U=U.trim();const Be=R[Ie]||[];R[Ie]=Be,Be.push(U)}we(R,function(Z){return Z.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Si(m,R,U){return U&&U.internalChannelParams&&U.internalChannelParams[m]||R}function Cs(m){this.za=0,this.i=[],this.j=new Hi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Si("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Si("baseRetryDelayMs",5e3,m),this.Za=Si("retryDelaySeedMs",1e4,m),this.Ta=Si("forwardChannelMaxRetries",2,m),this.va=Si("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Us(m&&m.concurrentRequestLimit),this.Ba=new Bt,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Cs.prototype,r.ka=8,r.I=1,r.connect=function(m,R,U,Z){$t(0),this.W=m,this.H=R||{},U&&Z!==void 0&&(this.H.OSID=U,this.H.OAID=Z),this.F=this.X,this.J=Ge(this,null,this.W),Vo(this)};function ns(m){if(zo(m),m.I==3){var R=m.V++,U=wr(m.J);if(lr(U,"SID",m.M),lr(U,"RID",R),lr(U,"TYPE","terminate"),Xn(m,U),R=new Yn(m,m.j,R),R.M=2,R.A=Mn(wr(U)),U=!1,l.navigator&&l.navigator.sendBeacon)try{U=l.navigator.sendBeacon(R.A.toString(),"")}catch{}!U&&l.Image&&(new Image().src=R.A,U=!0),U||(R.g=lt(R.j,null),R.g.ea(R.A)),R.F=Date.now(),go(R)}We(m)}function ci(m){m.g&&(ks(m),m.g.cancel(),m.g=null)}function zo(m){ci(m),m.v&&(l.clearTimeout(m.v),m.v=null),H(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function Vo(m){if(!yi(m.h)&&!m.m){m.m=!0;var R=m.Ea;ie||k(),ue||(ie(),ue=!0),V.add(R,m),m.D=0}}function rl(m,R){return Zo(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=R.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=ar(d(m.Ea,m,R),ye(m,m.D)),m.D++,!0)}r.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const Ie=new Yn(this,this.j,m);let Be=this.o;if(this.U&&(Be?(Be=ee(Be),J(Be,this.U)):Be=this.U),this.u!==null||this.R||(Ie.J=Be,Be=null),this.S)e:{for(var R=0,U=0;U<this.i.length;U++){t:{var Z=this.i[U];if("__data__"in Z.map&&(Z=Z.map.__data__,typeof Z=="string")){Z=Z.length;break t}Z=void 0}if(Z===void 0)break;if(R+=Z,R>4096){R=U;break e}if(R===4096||U===this.i.length-1){R=U+1;break e}}R=1e3}else R=1e3;R=Ca(this,Ie,R),U=wr(this.J),lr(U,"RID",m),lr(U,"CVER",22),this.G&&lr(U,"X-HTTP-Session-Id",this.G),Xn(this,U),Be&&(this.R?R="headers="+Vr(Fo(Be))+"&"+R:this.u&&Ta(U,this.u,Be)),Ss(this.h,Ie),this.Ra&&lr(U,"TYPE","init"),this.S?(lr(U,"$req",R),lr(U,"SID","null"),Ie.U=!0,bn(Ie,U,null)):bn(Ie,U,R),this.I=2}}else this.I==3&&(m?Vi(this,m):this.i.length==0||yi(this.h)||Vi(this))};function Vi(m,R){var U;R?U=R.l:U=m.V++;const Z=wr(m.J);lr(Z,"SID",m.M),lr(Z,"RID",U),lr(Z,"AID",m.K),Xn(m,Z),m.u&&m.o&&Ta(Z,m.u,m.o),U=new Yn(m,m.j,U,m.D+1),m.u===null&&(U.J=m.o),R&&(m.i=R.G.concat(m.i)),R=Ca(m,U,1e3),U.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Ss(m.h,U),bn(U,Z,R)}function Xn(m,R){m.H&&xe(m.H,function(U,Z){lr(R,Z,U)}),m.l&&xe({},function(U,Z){lr(R,Z,U)})}function Ca(m,R,U){U=Math.min(m.i.length,U);const Z=m.l?d(m.l.Ka,m.l,m):null;e:{var Ie=m.i;let Dt=-1;for(;;){const Dr=["count="+U];Dt==-1?U>0?(Dt=Ie[0].g,Dr.push("ofs="+Dt)):Dt=0:Dr.push("ofs="+Dt);let dr=!0;for(let Xr=0;Xr<U;Xr++){var Be=Ie[Xr].g;const $n=Ie[Xr].map;if(Be-=Dt,Be<0)Dt=Math.max(0,Ie[Xr].g-100),dr=!1;else try{Be="req"+Be+"_"||"";try{var tt=$n instanceof Map?$n:Object.entries($n);for(const[Oi,en]of tt){let Ti=en;u(en)&&(Ti=Ot(en)),Dr.push(Be+Oi+"="+encodeURIComponent(Ti))}}catch(Oi){throw Dr.push(Be+"type="+encodeURIComponent("_badmap")),Oi}}catch{Z&&Z($n)}}if(dr){tt=Dr.join("&");break e}}tt=void 0}return m=m.i.splice(0,U),R.G=m,tt}function Wn(m){if(!m.g&&!m.v){m.Y=1;var R=m.Da;ie||k(),ue||(ie(),ue=!0),V.add(R,m),m.A=0}}function _i(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=ar(d(m.Da,m),ye(m,m.A)),m.A++,!0)}r.Da=function(){if(this.v=null,_(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=ar(d(this.Wa,this),m)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,$t(10),ci(this),_(this))};function ks(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function _(m){m.g=new Yn(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var R=wr(m.na);lr(R,"RID","rpc"),lr(R,"SID",m.M),lr(R,"AID",m.K),lr(R,"CI",m.F?"0":"1"),!m.F&&m.ia&&lr(R,"TO",m.ia),lr(R,"TYPE","xmlhttp"),Xn(m,R),m.u&&m.o&&Ta(R,m.u,m.o),m.O&&(m.g.H=m.O);var U=m.g;m=m.ba,U.M=1,U.A=Mn(wr(R)),U.u=null,U.R=!0,Li(U,m)}r.Va=function(){this.C!=null&&(this.C=null,ci(this),_i(this),$t(19))};function H(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function ce(m,R){var U=null;if(m.g==R){H(m),ks(m),m.g=null;var Z=2}else if(wa(m.h,R))U=R.G,_s(m.h,R),Z=1;else return;if(m.I!=0){if(R.o)if(Z==1){U=R.u?R.u.length:0,R=Date.now()-R.F;var Ie=m.D;Z=tr(),ot(Z,new Mt(Z,U)),Vo(m)}else Wn(m);else if(Ie=R.m,Ie==3||Ie==0&&R.X>0||!(Z==1&&rl(m,R)||Z==2&&_i(m)))switch(U&&U.length>0&&(R=m.h,R.i=R.i.concat(U)),Ie){case 1:Ae(m,5);break;case 4:Ae(m,10);break;case 3:Ae(m,6);break;default:Ae(m,2)}}}function ye(m,R){let U=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(U*=2),U*R}function Ae(m,R){if(m.j.info("Error code "+R),R==2){var U=d(m.bb,m),Z=m.Ua;const Ie=!Z;Z=new No(Z||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ts(Z,"https"),Mn(Z),Ie?Lo(Z.toString(),U):wi(Z.toString(),U)}else $t(2);m.I=0,m.l&&m.l.pa(R),We(m),zo(m)}r.bb=function(m){m?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function We(m){if(m.I=0,m.ja=[],m.l){const R=xi(m.h);(R.length!=0||m.i.length!=0)&&(B(m.ja,R),B(m.ja,m.i),m.h.i.length=0,x(m.i),m.i.length=0),m.l.oa()}}function Ge(m,R,U){var Z=U instanceof No?wr(U):new No(U);if(Z.g!="")R&&(Z.g=R+"."+Z.g),yo(Z,Z.u);else{var Ie=l.location;Z=Ie.protocol,R=R?R+"."+Ie.hostname:Ie.hostname,Ie=+Ie.port;const Be=new No(null);Z&&Ts(Be,Z),R&&(Be.g=R),Ie&&yo(Be,Ie),U&&(Be.h=U),Z=Be}return U=m.G,R=m.wa,U&&R&&lr(Z,U,R),lr(Z,"VER",m.ka),Xn(m,Z),Z}function lt(m,R,U){if(R&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=m.Aa&&!m.ma?new Rr(new es({ab:U})):new Rr(m.ma),R.Fa(m.L),R}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function mt(){}r=mt.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Lt(){}Lt.prototype.g=function(m,R){return new vt(m,R)};function vt(m,R){He.call(this),this.g=new Cs(R),this.l=m,this.h=R&&R.messageUrlParams||null,m=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(m?m["X-WebChannel-Content-Type"]=R.messageContentType:m={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(m?m["X-WebChannel-Client-Profile"]=R.sa:m={"X-WebChannel-Client-Profile":R.sa}),this.g.U=m,(m=R&&R.Qb)&&!N(m)&&(this.g.u=m),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!N(R)&&(this.g.G=R,m=this.h,m!==null&&R in m&&(m=this.h,R in m&&delete m[R])),this.j=new Mr(this)}b(vt,He),vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vt.prototype.close=function(){ns(this.g)},vt.prototype.o=function(m){var R=this.g;if(typeof m=="string"){var U={};U.__data__=m,m=U}else this.v&&(U={},U.__data__=Ot(m),m=U);R.i.push(new Bl(R.Ya++,m)),R.I==3&&Vo(R)},vt.prototype.N=function(){this.g.l=null,delete this.j,ns(this.g),delete this.g,vt.Z.N.call(this)};function gr(m){ht.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var R=m.__sm__;if(R){e:{for(const U in R){m=U;break e}m=void 0}(this.i=m)&&(m=this.i,R=R!==null&&m in R?R[m]:void 0),this.data=R}else this.data=m}b(gr,ht);function Qr(){Ht.call(this),this.status=1}b(Qr,Ht);function Mr(m){this.g=m}b(Mr,mt),Mr.prototype.ra=function(){ot(this.g,"a")},Mr.prototype.qa=function(m){ot(this.g,new gr(m))},Mr.prototype.pa=function(m){ot(this.g,new Qr)},Mr.prototype.oa=function(){ot(this.g,"b")},Lt.prototype.createWebChannel=Lt.prototype.g,vt.prototype.send=vt.prototype.o,vt.prototype.open=vt.prototype.m,vt.prototype.close=vt.prototype.close,x_=function(){return new Lt},y_=function(){return tr()},g_=sr,S1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},gi.NO_ERROR=0,gi.TIMEOUT=8,gi.HTTP_ERROR=6,im=gi,On.COMPLETE="complete",m_=On,Ir.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",He.prototype.listen=He.prototype.J,qh=Ir,Rr.prototype.listenOnce=Rr.prototype.K,Rr.prototype.getLastError=Rr.prototype.Ha,Rr.prototype.getLastErrorCode=Rr.prototype.ya,Rr.prototype.getStatus=Rr.prototype.ca,Rr.prototype.getResponseJson=Rr.prototype.La,Rr.prototype.getResponseText=Rr.prototype.la,Rr.prototype.send=Rr.prototype.ea,Rr.prototype.setWithCredentials=Rr.prototype.Fa,p_=Rr}).apply(typeof Mp<"u"?Mp:typeof self<"u"?self:typeof window<"u"?window:{});const yv="@firebase/firestore",xv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ui.UNAUTHENTICATED=new Ui(null),Ui.GOOGLE_CREDENTIALS=new Ui("google-credentials-uid"),Ui.FIRST_PARTY=new Ui("first-party-uid"),Ui.MOCK_USER=new Ui("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=new s5("@firebase/firestore");function Sd(){return ku.logLevel}function Ze(r,...e){if(ku.logLevel<=yr.DEBUG){const t=e.map(y5);ku.debug(`Firestore (${ih}): ${r}`,...t)}}function Io(r,...e){if(ku.logLevel<=yr.ERROR){const t=e.map(y5);ku.error(`Firestore (${ih}): ${r}`,...t)}}function Iu(r,...e){if(ku.logLevel<=yr.WARN){const t=e.map(y5);ku.warn(`Firestore (${ih}): ${r}`,...t)}}function y5(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,v_(r,n,t)}function v_(r,e,t){let n=`FIRESTORE (${ih}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Io(n),new Error(n)}function kt(r,e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,r||v_(e,i,n)}function er(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class it extends Rl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class j7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ui.UNAUTHENTICATED)))}shutdown(){}}class R7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class P7{constructor(e){this.t=e,this.currentUser=Ui.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){kt(this.o===void 0,42304);let n=this.i;const i=h=>this.i!==n?(n=this.i,t(h)):Promise.resolve();let o=new Cl;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Cl,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},u=h=>{Ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Cl)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(Ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(kt(typeof n.accessToken=="string",31837,{l:n}),new b_(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return kt(e===null||typeof e=="string",2055,{h:e}),new Ui(e)}}class N7{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Ui.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class B7{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new N7(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ui.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L7{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Os(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){kt(this.o===void 0,3512);const n=o=>{o.error!=null&&Ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,Ze("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>n(o)))};const i=o=>{Ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(kt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F7(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=F7(40);for(let o=0;o<i.length;++o)n.length<20&&i[o]<t&&(n+=e.charAt(i[o]%62))}return n}}function Zt(r,e){return r<e?-1:r>e?1:0}function _1(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const i=r.charAt(n),o=e.charAt(n);if(i!==o)return Ug(i)===Ug(o)?Zt(i,o):Ug(i)?1:-1}return Zt(r.length,e.length)}const z7=55296,V7=57343;function Ug(r){const e=r.charCodeAt(0);return e>=z7&&e<=V7}function Vd(r,e,t){return r.length===e.length&&r.every(((n,i)=>t(n,e[i])))}function w_(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="__name__";class Ma{constructor(e,t,n){t===void 0?t=0:t>e.length&&xt(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&xt(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Ma.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ma?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const o=Ma.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Zt(e.length,t.length)}static compareSegments(e,t){const n=Ma.isNumericId(e),i=Ma.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?Ma.extractNumericId(e).compare(Ma.extractNumericId(t)):_1(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wc.fromString(e.substring(4,e.length-2))}}class Nr extends Ma{construct(e,t,n){return new Nr(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new it($e.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((i=>i.length>0)))}return new Nr(t)}static emptyPath(){return new Nr([])}}const O7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends Ma{construct(e,t,n){return new In(e,t,n)}static isValidIdentifier(e){return O7.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bv}static keyField(){return new In([bv])}static fromServerFormat(e){const t=[];let n="",i=0;const o=()=>{if(n.length===0)throw new it($e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let l=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new it($e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new it($e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=h,i+=2}else u==="`"?(l=!l,i++):u!=="."||l?(n+=u,i++):(o(),i++)}if(o(),l)throw new it($e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(t)}static emptyPath(){return new In([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.path=e}static fromPath(e){return new st(Nr.fromString(e))}static fromName(e){return new st(Nr.fromString(e).popFirst(5))}static empty(){return new st(Nr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Nr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new st(new Nr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(r,e,t){if(!t)throw new it($e.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function M7(r,e,t,n){if(e===!0&&n===!0)throw new it($e.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function wv(r){if(!st.isDocumentKey(r))throw new it($e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Sv(r){if(st.isDocumentKey(r))throw new it($e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function __(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function e0(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":xt(12329,{type:typeof r})}function pa(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new it($e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=e0(r);throw new it($e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(r,e){const t={typeString:r};return e&&(t.value=e),t}function Of(r,e){if(!__(r))throw new it($e.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const i=e[n].typeString,o="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const l=r[n];if(i&&typeof l!==i){t=`JSON field '${n}' must be a ${i}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${n}' field to equal '${o.value}'`;break}}if(t)throw new it($e.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=-62135596800,Tv=1e6;class Kr{static now(){return Kr.fromMillis(Date.now())}static fromDate(e){return Kr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Tv);return new Kr(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new it($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new it($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_v)throw new it($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new it($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tv}_compareTo(e){return this.seconds===e.seconds?Zt(this.nanoseconds,e.nanoseconds):Zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Kr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Of(e,Kr._jsonSchema))return new Kr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_v;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Kr._jsonSchemaVersion="firestore/timestamp/1.0",Kr._jsonSchema={type:ii("string",Kr._jsonSchemaVersion),seconds:ii("number"),nanoseconds:ii("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{static fromTimestamp(e){return new Pt(e)}static min(){return new Pt(new Kr(0,0))}static max(){return new Pt(new Kr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf=-1;class Em{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}function T1(r){return r.fields.find((e=>e.kind===2))}function ou(r){return r.fields.filter((e=>e.kind!==2))}Em.UNKNOWN_ID=-1;class om{constructor(e,t){this.fieldPath=e,this.kind=t}}class yf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new yf(0,vs.min())}}function D7(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=Pt.fromTimestamp(n===1e9?new Kr(t+1,0):new Kr(t,n));return new vs(i,st.empty(),e)}function T_(r){return new vs(r.readTime,r.key,gf)}class vs{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new vs(Pt.min(),st.empty(),gf)}static max(){return new vs(Pt.max(),st.empty(),gf)}}function v5(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=st.comparator(r.documentKey,e.documentKey),t!==0?t:Zt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class C_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mu(r){if(r.code!==$e.FAILED_PRECONDITION||r.message!==A_)throw r;Ze("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Re(((n,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Re?t:Re.resolve(t)}catch(t){return Re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Re.reject(t)}static resolve(e){return new Re(((t,n)=>{t(e)}))}static reject(e){return new Re(((t,n)=>{n(e)}))}static waitFor(e){return new Re(((t,n)=>{let i=0,o=0,l=!1;e.forEach((u=>{++i,u.next((()=>{++o,l&&o===i&&t()}),(h=>n(h)))})),l=!0,o===i&&t()}))}static or(e){let t=Re.resolve(!1);for(const n of e)t=t.next((i=>i?Re.resolve(i):n()));return t}static forEach(e,t){const n=[];return e.forEach(((i,o)=>{n.push(t.call(this,i,o))})),this.waitFor(n)}static mapArray(e,t){return new Re(((n,i)=>{const o=e.length,l=new Array(o);let u=0;for(let h=0;h<o;h++){const d=h;t(e[d]).next((g=>{l[d]=g,++u,u===o&&n(l)}),(g=>i(g)))}}))}static doWhile(e,t){return new Re(((n,i)=>{const o=()=>{e()===!0?t().next((()=>{o()}),i):n()};o()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="SimpleDb";class t0{static open(e,t,n,i){try{return new t0(t,e.transaction(i,n))}catch(o){throw new ef(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Cl,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ef(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const i=b5(n.target.error);this.S.reject(new ef(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ze(ps,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new $7(t)}}class Sc{static delete(e){return Ze(ps,"Removing database:",e),lu(mS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!TS())return!1;if(Sc.F())return!0;const e=fi(),t=Sc.M(e),n=0<t&&t<10,i=k_(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,Sc.M(fi())===12.2&&Io("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Ze(ps,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const l=o.target.result;t(l)},i.onblocked=()=>{n(new ef(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const l=o.target.error;l.name==="VersionError"?n(new it($e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?n(new it($e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):n(new ef(e,l))},i.onupgradeneeded=o=>{Ze(ps,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.N.k(l,i.transaction,o.oldVersion,this.version).next((()=>{Ze(ps,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,i){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const u=t0.open(this.db,e,o?"readonly":"readwrite",n),h=i(u).next((d=>(u.C(),d))).catch((d=>(u.abort(d),Re.reject(d)))).toPromise();return h.catch((()=>{})),await u.D,h}catch(u){const h=u,d=h.name!=="FirebaseError"&&l<3;if(Ze(ps,"Transaction failed with error:",h.message,"Retrying:",d),this.close(),!d)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function k_(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class W7{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return lu(this.U.delete())}}class ef extends it{constructor(e,t){super($e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Nc(r){return r.name==="IndexedDbTransactionError"}class $7{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(Ze(ps,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ze(ps,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),lu(n)}add(e){return Ze(ps,"ADD",this.store.name,e,e),lu(this.store.add(e))}get(e){return lu(this.store.get(e)).next((t=>(t===void 0&&(t=null),Ze(ps,"GET",this.store.name,e,t),t)))}delete(e){return Ze(ps,"DELETE",this.store.name,e),lu(this.store.delete(e))}count(){return Ze(ps,"COUNT",this.store.name),lu(this.store.count())}J(e,t){const n=this.options(e,t),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(n.range);return new Re(((l,u)=>{o.onerror=h=>{u(h.target.error)},o.onsuccess=h=>{l(h.target.result)}}))}{const o=this.cursor(n),l=[];return this.H(o,((u,h)=>{l.push(h)})).next((()=>l))}}Y(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new Re(((i,o)=>{n.onerror=l=>{o(l.target.error)},n.onsuccess=l=>{i(l.target.result)}}))}Z(e,t){Ze(ps,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const i=this.cursor(n);return this.H(i,((o,l,u)=>u.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.H(i,t)}te(e){const t=this.cursor({});return new Re(((n,i)=>{t.onerror=o=>{const l=b5(o.target.error);i(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next((u=>{u?l.continue():n()})):n()}}))}H(e,t){const n=[];return new Re(((i,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const u=l.target.result;if(!u)return void i();const h=new W7(u),d=t(u.primaryKey,u.value,h);if(d instanceof Re){const g=d.catch((b=>(h.done(),Re.reject(b))));n.push(g)}h.isDone?i():h.G===null?u.continue():u.continue(h.G)}})).next((()=>Re.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function lu(r){return new Re(((e,t)=>{r.onsuccess=n=>{const i=n.target.result;e(i)},r.onerror=n=>{const i=b5(n.target.error);t(i)}}))}let Av=!1;function b5(r){const e=Sc.M(fi());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new it("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Av||(Av=!0,setTimeout((()=>{throw n}),0)),n}}return r}const tf="IndexBackfiller";class U7{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Ze(tf,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();Ze(tf,`Documents written: ${t}`)}catch(t){Nc(t)?Ze(tf,"Ignoring IndexedDB error during index backfill: ",t):await Mu(t)}await this.re(6e4)}))}}class q7{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const n=new Set;let i=t,o=!0;return Re.doWhile((()=>o===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!n.has(l))return Ze(tf,`Processing collection: ${l}`),this.oe(e,l,i).next((u=>{i-=u,n.add(l)}));o=!1})))).next((()=>t-i))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,n).next((o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(i,o))).next((u=>(Ze(tf,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>l.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((i,o)=>{const l=T_(o);v5(l,n)>0&&(n=l)})),new vs(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ds.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=-1;function r0(r){return r==null}function xf(r){return r===0&&1/r==-1/0}function H7(r){return typeof r=="number"&&Number.isInteger(r)&&!xf(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="";function po(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Cv(e)),e=G7(r.get(t),e);return Cv(e)}function G7(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const o=r.charAt(i);switch(o){case"\0":t+="";break;case jm:t+="";break;default:t+=o}}return t}function Cv(r){return r+jm+""}function Wa(r){const e=r.length;if(kt(e>=2,64408,{path:r}),e===2)return kt(r.charAt(0)===jm&&r.charAt(1)==="",56145,{path:r}),Nr.emptyPath();const t=e-2,n=[];let i="";for(let o=0;o<e;){const l=r.indexOf(jm,o);switch((l<0||l>t)&&xt(50515,{path:r}),r.charAt(l+1)){case"":const u=r.substring(o,l);let h;i.length===0?h=u:(i+=u,h=i,i=""),n.push(h);break;case"":i+=r.substring(o,l),i+="\0";break;case"":i+=r.substring(o,l+1);break;default:xt(61167,{path:r})}o=l+2}return new Nr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su="remoteDocuments",Mf="owner",pd="owner",vf="mutationQueues",K7="userId",ha="mutations",kv="batchId",pu="userMutationsIndex",Iv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(r,e){return[r,po(e)]}function I_(r,e,t){return[r,po(e),t]}const J7={},Od="documentMutations",Rm="remoteDocumentsV14",Y7=["prefixPath","collectionGroup","readTime","documentId"],am="documentKeyIndex",Q7=["prefixPath","collectionGroup","documentId"],E_="collectionGroupIndex",X7=["collectionGroup","readTime","prefixPath","documentId"],bf="remoteDocumentGlobal",A1="remoteDocumentGlobalKey",Md="targets",j_="queryTargetsIndex",Z7=["canonicalId","targetId"],Dd="targetDocuments",ej=["targetId","path"],w5="documentTargetsIndex",tj=["path","targetId"],Pm="targetGlobalKey",yu="targetGlobal",wf="collectionParents",rj=["collectionId","parent"],Wd="clientMetadata",nj="clientId",n0="bundles",ij="bundleId",i0="namedQueries",oj="name",S5="indexConfiguration",sj="indexId",C1="collectionGroupIndex",aj="collectionGroup",rf="indexState",lj=["indexId","uid"],R_="sequenceNumberIndex",cj=["uid","sequenceNumber"],nf="indexEntries",uj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],P_="documentKeyIndex",dj=["indexId","uid","orderedDocumentKey"],o0="documentOverlays",hj=["userId","collectionPath","documentId"],k1="collectionPathOverlayIndex",fj=["userId","collectionPath","largestBatchId"],N_="collectionGroupOverlayIndex",pj=["userId","collectionGroup","largestBatchId"],_5="globals",mj="name",B_=[vf,ha,Od,su,Md,Mf,yu,Dd,Wd,bf,wf,n0,i0],gj=[...B_,o0],L_=[vf,ha,Od,Rm,Md,Mf,yu,Dd,Wd,bf,wf,n0,i0,o0],F_=L_,T5=[...F_,S5,rf,nf],yj=T5,z_=[...T5,_5],xj=z_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1 extends C_{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function mi(r,e){const t=er(r);return Sc.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Bc(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function V_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,t){this.comparator=e,this.root=t||qi.EMPTY}insert(e,t){return new vn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qi.BLACK,null,null))}remove(e){return new vn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dp(this.root,e,this.comparator,!0)}}class Dp{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qi{constructor(e,t,n,i,o){this.key=e,this.value=t,this.color=n??qi.RED,this.left=i??qi.EMPTY,this.right=o??qi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,o){return new qi(e??this.key,t??this.value,n??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const o=n(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,n),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return qi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return qi.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xt(27949);return e+(this.isRed()?0:1)}}qi.EMPTY=null,qi.RED=!0,qi.BLACK=!1;qi.EMPTY=new class{constructor(){this.size=0}get key(){throw xt(57766)}get value(){throw xt(16141)}get color(){throw xt(16727)}get left(){throw xt(29726)}get right(){throw xt(36894)}copy(e,t,n,i,o){return this}insert(e,t,n){return new qi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this.comparator=e,this.data=new vn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jv(this.data.getIterator())}getIteratorFrom(e){return new jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof Yr)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=n.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Yr(this.comparator);return t.data=e,t}}class jv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function md(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new Ko([])}unionWith(e){let t=new Yr(In.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ko(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vd(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new O_("Invalid base64 string: "+o):o}})(e);return new ai(t)}static fromUint8Array(e){const t=(function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o})(e);return new ai(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ai.EMPTY_BYTE_STRING=new ai("");const vj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function El(r){if(kt(!!r,39018),typeof r=="string"){let e=0;const t=vj.exec(r);if(kt(!!t,46558,{timestamp:r}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:xn(r.seconds),nanos:xn(r.nanos)}}function xn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function jl(r){return typeof r=="string"?ai.fromBase64String(r):ai.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="server_timestamp",D_="__type__",W_="__previous_value__",$_="__local_write_time__";function A5(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[D_])==null?void 0:n.stringValue)===M_}function s0(r){const e=r.mapValue.fields[W_];return A5(e)?s0(e):e}function Sf(r){const e=El(r.mapValue.fields[$_].timestampValue);return new Kr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,t,n,i,o,l,u,h,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=d,this.isUsingEmulator=g}}const Nm="(default)";class Eu{constructor(e,t){this.projectId=e,this.database=t||Nm}static empty(){return new Eu("","")}get isDefaultDatabase(){return this.database===Nm}isEqual(e){return e instanceof Eu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5="__type__",U_="__max__",yc={mapValue:{fields:{__type__:{stringValue:U_}}}},k5="__vector__",$d="value",lm={nullValue:"NULL_VALUE"};function Cc(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?A5(r)?4:q_(r)?9007199254740991:a0(r)?10:11:xt(28295,{value:r})}function Ka(r,e){if(r===e)return!0;const t=Cc(r);if(t!==Cc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Sf(r).isEqual(Sf(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=El(i.timestampValue),u=El(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(i,o){return jl(i.bytesValue).isEqual(jl(o.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(i,o){return xn(i.geoPointValue.latitude)===xn(o.geoPointValue.latitude)&&xn(i.geoPointValue.longitude)===xn(o.geoPointValue.longitude)})(r,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return xn(i.integerValue)===xn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=xn(i.doubleValue),u=xn(o.doubleValue);return l===u?xf(l)===xf(u):isNaN(l)&&isNaN(u)}return!1})(r,e);case 9:return Vd(r.arrayValue.values||[],e.arrayValue.values||[],Ka);case 10:case 11:return(function(i,o){const l=i.mapValue.fields||{},u=o.mapValue.fields||{};if(Ev(l)!==Ev(u))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(u[h]===void 0||!Ka(l[h],u[h])))return!1;return!0})(r,e);default:return xt(52216,{left:r})}}function _f(r,e){return(r.values||[]).find((t=>Ka(t,e)))!==void 0}function kc(r,e){if(r===e)return 0;const t=Cc(r),n=Cc(e);if(t!==n)return Zt(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Zt(r.booleanValue,e.booleanValue);case 2:return(function(o,l){const u=xn(o.integerValue||o.doubleValue),h=xn(l.integerValue||l.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(r,e);case 3:return Rv(r.timestampValue,e.timestampValue);case 4:return Rv(Sf(r),Sf(e));case 5:return _1(r.stringValue,e.stringValue);case 6:return(function(o,l){const u=jl(o),h=jl(l);return u.compareTo(h)})(r.bytesValue,e.bytesValue);case 7:return(function(o,l){const u=o.split("/"),h=l.split("/");for(let d=0;d<u.length&&d<h.length;d++){const g=Zt(u[d],h[d]);if(g!==0)return g}return Zt(u.length,h.length)})(r.referenceValue,e.referenceValue);case 8:return(function(o,l){const u=Zt(xn(o.latitude),xn(l.latitude));return u!==0?u:Zt(xn(o.longitude),xn(l.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Pv(r.arrayValue,e.arrayValue);case 10:return(function(o,l){var S,x,B,E;const u=o.fields||{},h=l.fields||{},d=(S=u[$d])==null?void 0:S.arrayValue,g=(x=h[$d])==null?void 0:x.arrayValue,b=Zt(((B=d==null?void 0:d.values)==null?void 0:B.length)||0,((E=g==null?void 0:g.values)==null?void 0:E.length)||0);return b!==0?b:Pv(d,g)})(r.mapValue,e.mapValue);case 11:return(function(o,l){if(o===yc.mapValue&&l===yc.mapValue)return 0;if(o===yc.mapValue)return 1;if(l===yc.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),d=l.fields||{},g=Object.keys(d);h.sort(),g.sort();for(let b=0;b<h.length&&b<g.length;++b){const S=_1(h[b],g[b]);if(S!==0)return S;const x=kc(u[h[b]],d[g[b]]);if(x!==0)return x}return Zt(h.length,g.length)})(r.mapValue,e.mapValue);default:throw xt(23264,{he:t})}}function Rv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Zt(r,e);const t=El(r),n=El(e),i=Zt(t.seconds,n.seconds);return i!==0?i:Zt(t.nanos,n.nanos)}function Pv(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const o=kc(t[i],n[i]);if(o)return o}return Zt(t.length,n.length)}function Ud(r){return E1(r)}function E1(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=El(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return jl(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return st.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",i=!0;for(const o of t.values||[])i?i=!1:n+=",",n+=E1(o);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of n)o?o=!1:i+=",",i+=`${l}:${E1(t.fields[l])}`;return i+"}"})(r.mapValue):xt(61005,{value:r})}function cm(r){switch(Cc(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=s0(r);return e?16+cm(e):16;case 5:return 2*r.stringValue.length;case 6:return jl(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,o)=>i+cm(o)),0)})(r.arrayValue);case 10:case 11:return(function(n){let i=0;return Bc(n.fields,((o,l)=>{i+=o.length+cm(l)})),i})(r.mapValue);default:throw xt(13486,{value:r})}}function Tf(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function j1(r){return!!r&&"integerValue"in r}function Af(r){return!!r&&"arrayValue"in r}function Nv(r){return!!r&&"nullValue"in r}function Bv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function um(r){return!!r&&"mapValue"in r}function a0(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[C5])==null?void 0:n.stringValue)===k5}function of(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Bc(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=of(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=of(r.arrayValue.values[t]);return e}return{...r}}function q_(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===U_}const H_={mapValue:{fields:{[C5]:{stringValue:k5},[$d]:{arrayValue:{}}}}};function wj(r){return"nullValue"in r?lm:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Tf(Eu.empty(),st.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?a0(r)?H_:{mapValue:{}}:xt(35942,{value:r})}function Sj(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Tf(Eu.empty(),st.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?H_:"mapValue"in r?a0(r)?{mapValue:{}}:yc:xt(61959,{value:r})}function Lv(r,e){const t=kc(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Fv(r,e){const t=kc(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.value=e}static empty(){return new fo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!um(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=of(t)}setAll(e){let t=In.emptyPath(),n={},i=[];e.forEach(((l,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,n,i),n={},i=[],t=u.popLast()}l?n[u.lastSegment()]=of(l):i.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,n,i)}delete(e){const t=this.field(e.popLast());um(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ka(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];um(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Bc(t,((i,o)=>e[i]=o));for(const i of n)delete e[i]}clone(){return new fo(of(this.value))}}function G_(r){const e=[];return Bc(r.fields,((t,n)=>{const i=new In([t]);if(um(n)){const o=G_(n.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)})),new Ko(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,t,n,i,o,l,u){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Fn(e,0,Pt.min(),Pt.min(),Pt.min(),fo.empty(),0)}static newFoundDocument(e,t,n,i){return new Fn(e,1,t,Pt.min(),n,i,0)}static newNoDocument(e,t){return new Fn(e,2,t,Pt.min(),Pt.min(),fo.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,Pt.min(),Pt.min(),fo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t){this.position=e,this.inclusive=t}}function zv(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const o=e[i],l=r.position[i];if(o.field.isKeyField()?n=st.comparator(st.fromName(l.referenceValue),t.key):n=kc(l,t.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function Vv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ka(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,t="asc"){this.field=e,this.dir=t}}function _j(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{}class xr extends K_{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new Tj(e,t,n):t==="array-contains"?new kj(e,n):t==="in"?new e3(e,n):t==="not-in"?new Ij(e,n):t==="array-contains-any"?new Ej(e,n):new xr(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new Aj(e,n):new Cj(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(kc(t,this.value)):t!==null&&Cc(this.value)===Cc(t)&&this.matchesComparison(kc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jr extends K_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Jr(e,t)}matches(e){return Hd(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Hd(r){return r.op==="and"}function R1(r){return r.op==="or"}function I5(r){return J_(r)&&Hd(r)}function J_(r){for(const e of r.filters)if(e instanceof Jr)return!1;return!0}function P1(r){if(r instanceof xr)return r.field.canonicalString()+r.op.toString()+Ud(r.value);if(I5(r))return r.filters.map((e=>P1(e))).join(",");{const e=r.filters.map((t=>P1(t))).join(",");return`${r.op}(${e})`}}function Y_(r,e){return r instanceof xr?(function(n,i){return i instanceof xr&&n.op===i.op&&n.field.isEqual(i.field)&&Ka(n.value,i.value)})(r,e):r instanceof Jr?(function(n,i){return i instanceof Jr&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((o,l,u)=>o&&Y_(l,i.filters[u])),!0):!1})(r,e):void xt(19439)}function Q_(r,e){const t=r.filters.concat(e);return Jr.create(t,r.op)}function X_(r){return r instanceof xr?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ud(t.value)}`})(r):r instanceof Jr?(function(t){return t.op.toString()+" {"+t.getFilters().map(X_).join(" ,")+"}"})(r):"Filter"}class Tj extends xr{constructor(e,t,n){super(e,t,n),this.key=st.fromName(n.referenceValue)}matches(e){const t=st.comparator(e.key,this.key);return this.matchesComparison(t)}}class Aj extends xr{constructor(e,t){super(e,"in",t),this.keys=Z_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Cj extends xr{constructor(e,t){super(e,"not-in",t),this.keys=Z_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Z_(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((n=>st.fromName(n.referenceValue)))}class kj extends xr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Af(t)&&_f(t.arrayValue,this.value)}}class e3 extends xr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&_f(this.value.arrayValue,t)}}class Ij extends xr{constructor(e,t){super(e,"not-in",t)}matches(e){if(_f(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_f(this.value.arrayValue,t)}}class Ej extends xr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Af(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>_f(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,t=null,n=[],i=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=o,this.startAt=l,this.endAt=u,this.Te=null}}function N1(r,e=null,t=[],n=[],i=null,o=null,l=null){return new jj(r,e,t,n,i,o,l)}function ju(r){const e=er(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>P1(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(o){return o.field.canonicalString()+o.dir})(n))).join(","),r0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>Ud(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>Ud(n))).join(",")),e.Te=t}return e.Te}function Df(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!_j(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Y_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Vv(r.startAt,e.startAt)&&Vv(r.endAt,e.endAt)}function Bm(r){return st.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Lm(r,e){return r.filters.filter((t=>t instanceof xr&&t.field.isEqual(e)))}function Ov(r,e,t){let n=lm,i=!0;for(const o of Lm(r,e)){let l=lm,u=!0;switch(o.op){case"<":case"<=":l=wj(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,u=!1;break;case"!=":case"not-in":l=lm}Lv({value:n,inclusive:i},{value:l,inclusive:u})<0&&(n=l,i=u)}if(t!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(e)){const l=t.position[o];Lv({value:n,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(n=l,i=t.inclusive);break}}return{value:n,inclusive:i}}function Mv(r,e,t){let n=yc,i=!0;for(const o of Lm(r,e)){let l=yc,u=!0;switch(o.op){case">=":case">":l=Sj(o.value),u=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,u=!1;break;case"!=":case"not-in":l=yc}Fv({value:n,inclusive:i},{value:l,inclusive:u})>0&&(n=l,i=u)}if(t!==null){for(let o=0;o<r.orderBy.length;++o)if(r.orderBy[o].field.isEqual(e)){const l=t.position[o];Fv({value:n,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(n=l,i=t.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,t=null,n=[],i=[],o=null,l="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Rj(r,e,t,n,i,o,l,u){return new oh(r,e,t,n,i,o,l,u)}function l0(r){return new oh(r)}function Dv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function t3(r){return r.collectionGroup!==null}function sf(r){const e=er(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Yr(In.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((d=>{d.isInequality()&&(u=u.add(d.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Cf(o,n))})),t.has(In.keyField().canonicalString())||e.Ie.push(new Cf(In.keyField(),n))}return e.Ie}function Ws(r){const e=er(r);return e.Ee||(e.Ee=Pj(e,sf(r))),e.Ee}function Pj(r,e){if(r.limitType==="F")return N1(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new Cf(i.field,o)}));const t=r.endAt?new qd(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new qd(r.startAt.position,r.startAt.inclusive):null;return N1(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function B1(r,e){const t=r.filters.concat([e]);return new oh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function L1(r,e,t){return new oh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function c0(r,e){return Df(Ws(r),Ws(e))&&r.limitType===e.limitType}function r3(r){return`${ju(Ws(r))}|lt:${r.limitType}`}function _d(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((i=>X_(i))).join(", ")}]`),r0(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((i=>Ud(i))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((i=>Ud(i))).join(",")),`Target(${n})`})(Ws(r))}; limitType=${r.limitType})`}function Wf(r,e){return e.isFoundDocument()&&(function(n,i){const o=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):st.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)})(r,e)&&(function(n,i){for(const o of sf(n))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(r,e)&&(function(n,i){for(const o of n.filters)if(!o.matches(i))return!1;return!0})(r,e)&&(function(n,i){return!(n.startAt&&!(function(l,u,h){const d=zv(l,u,h);return l.inclusive?d<=0:d<0})(n.startAt,sf(n),i)||n.endAt&&!(function(l,u,h){const d=zv(l,u,h);return l.inclusive?d>=0:d>0})(n.endAt,sf(n),i))})(r,e)}function Nj(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function n3(r){return(e,t)=>{let n=!1;for(const i of sf(r)){const o=Bj(i,e,t);if(o!==0)return o;n=n||i.field.isKeyField()}return 0}}function Bj(r,e,t){const n=r.field.isKeyField()?st.comparator(e.key,t.key):(function(o,l,u){const h=l.data.field(o),d=u.data.field(o);return h!==null&&d!==null?kc(h,d):xt(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return xt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,o]of n)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bc(this.inner,((t,n)=>{for(const[i,o]of n)e(i,o)}))}isEmpty(){return V_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=new vn(st.comparator);function gs(){return Lj}const i3=new vn(st.comparator);function Hh(...r){let e=i3;for(const t of r)e=e.insert(t.key,t);return e}function o3(r){let e=i3;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function $a(){return af()}function s3(){return af()}function af(){return new Pl((r=>r.toString()),((r,e)=>r.isEqual(e)))}const Fj=new vn(st.comparator),zj=new Yr(st.comparator);function ur(...r){let e=zj;for(const t of r)e=e.add(t);return e}const Vj=new Yr(Zt);function Oj(){return Vj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xf(e)?"-0":e}}function a3(r){return{integerValue:""+r}}function Mj(r,e){return H7(e)?a3(e):E5(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(){this._=void 0}}function Dj(r,e,t){return r instanceof Gd?(function(i,o){const l={fields:{[D_]:{stringValue:M_},[$_]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&A5(o)&&(o=s0(o)),o&&(l.fields[W_]=o),{mapValue:l}})(t,e):r instanceof Kd?c3(r,e):r instanceof Jd?u3(r,e):(function(i,o){const l=l3(i,o),u=Wv(l)+Wv(i.Ae);return j1(l)&&j1(i.Ae)?a3(u):E5(i.serializer,u)})(r,e)}function Wj(r,e,t){return r instanceof Kd?c3(r,e):r instanceof Jd?u3(r,e):t}function l3(r,e){return r instanceof kf?(function(n){return j1(n)||(function(o){return!!o&&"doubleValue"in o})(n)})(e)?e:{integerValue:0}:null}class Gd extends u0{}class Kd extends u0{constructor(e){super(),this.elements=e}}function c3(r,e){const t=d3(e);for(const n of r.elements)t.some((i=>Ka(i,n)))||t.push(n);return{arrayValue:{values:t}}}class Jd extends u0{constructor(e){super(),this.elements=e}}function u3(r,e){let t=d3(e);for(const n of r.elements)t=t.filter((i=>!Ka(i,n)));return{arrayValue:{values:t}}}class kf extends u0{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Wv(r){return xn(r.integerValue||r.doubleValue)}function d3(r){return Af(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e,t){this.field=e,this.transform=t}}function $j(r,e){return r.field.isEqual(e.field)&&(function(n,i){return n instanceof Kd&&i instanceof Kd||n instanceof Jd&&i instanceof Jd?Vd(n.elements,i.elements,Ka):n instanceof kf&&i instanceof kf?Ka(n.Ae,i.Ae):n instanceof Gd&&i instanceof Gd})(r.transform,e.transform)}class Uj{constructor(e,t){this.version=e,this.transformResults=t}}class Eo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Eo}static exists(e){return new Eo(void 0,e)}static updateTime(e){return new Eo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dm(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class d0{}function f3(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new h0(r.key,Eo.none()):new sh(r.key,r.data,Eo.none());{const t=r.data,n=fo.empty();let i=new Yr(In.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?n.delete(o):n.set(o,l),i=i.add(o)}return new Nl(r.key,n,new Ko(i.toArray()),Eo.none())}}function qj(r,e,t){r instanceof sh?(function(i,o,l){const u=i.value.clone(),h=Uv(i.fieldTransforms,o,l.transformResults);u.setAll(h),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(r,e,t):r instanceof Nl?(function(i,o,l){if(!dm(i.precondition,o))return void o.convertToUnknownDocument(l.version);const u=Uv(i.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(p3(i)),h.setAll(u),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(r,e,t):(function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function lf(r,e,t,n){return r instanceof sh?(function(o,l,u,h){if(!dm(o.precondition,l))return u;const d=o.value.clone(),g=qv(o.fieldTransforms,h,l);return d.setAll(g),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null})(r,e,t,n):r instanceof Nl?(function(o,l,u,h){if(!dm(o.precondition,l))return u;const d=qv(o.fieldTransforms,h,l),g=l.data;return g.setAll(p3(o)),g.setAll(d),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((b=>b.field)))})(r,e,t,n):(function(o,l,u){return dm(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(r,e,t)}function Hj(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),o=l3(n.transform,i||null);o!=null&&(t===null&&(t=fo.empty()),t.set(n.field,o))}return t||null}function $v(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Vd(n,i,((o,l)=>$j(o,l)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class sh extends d0{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Nl extends d0{constructor(e,t,n,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function p3(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function Uv(r,e,t){const n=new Map;kt(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let i=0;i<t.length;i++){const o=r[i],l=o.transform,u=e.data.field(o.field);n.set(o.field,Wj(l,u,t[i]))}return n}function qv(r,e,t){const n=new Map;for(const i of r){const o=i.transform,l=t.data.field(i.field);n.set(i.field,Dj(o,l,e))}return n}class h0 extends d0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class m3 extends d0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&qj(o,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=lf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=lf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=s3();return this.mutations.forEach((i=>{const o=e.get(i.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(i.key)?null:u;const h=f3(l,u);h!==null&&n.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(Pt.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ur())}isEqual(e){return this.batchId===e.batchId&&Vd(this.mutations,e.mutations,((t,n)=>$v(t,n)))&&Vd(this.baseMutations,e.baseMutations,((t,n)=>$v(t,n)))}}class R5{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){kt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=(function(){return Fj})();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,n[l].version);return new R5(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ni,br;function Kj(r){switch(r){case $e.OK:return xt(64938);case $e.CANCELLED:case $e.UNKNOWN:case $e.DEADLINE_EXCEEDED:case $e.RESOURCE_EXHAUSTED:case $e.INTERNAL:case $e.UNAVAILABLE:case $e.UNAUTHENTICATED:return!1;case $e.INVALID_ARGUMENT:case $e.NOT_FOUND:case $e.ALREADY_EXISTS:case $e.PERMISSION_DENIED:case $e.FAILED_PRECONDITION:case $e.ABORTED:case $e.OUT_OF_RANGE:case $e.UNIMPLEMENTED:case $e.DATA_LOSS:return!0;default:return xt(15467,{code:r})}}function g3(r){if(r===void 0)return Io("GRPC error has no .code"),$e.UNKNOWN;switch(r){case ni.OK:return $e.OK;case ni.CANCELLED:return $e.CANCELLED;case ni.UNKNOWN:return $e.UNKNOWN;case ni.DEADLINE_EXCEEDED:return $e.DEADLINE_EXCEEDED;case ni.RESOURCE_EXHAUSTED:return $e.RESOURCE_EXHAUSTED;case ni.INTERNAL:return $e.INTERNAL;case ni.UNAVAILABLE:return $e.UNAVAILABLE;case ni.UNAUTHENTICATED:return $e.UNAUTHENTICATED;case ni.INVALID_ARGUMENT:return $e.INVALID_ARGUMENT;case ni.NOT_FOUND:return $e.NOT_FOUND;case ni.ALREADY_EXISTS:return $e.ALREADY_EXISTS;case ni.PERMISSION_DENIED:return $e.PERMISSION_DENIED;case ni.FAILED_PRECONDITION:return $e.FAILED_PRECONDITION;case ni.ABORTED:return $e.ABORTED;case ni.OUT_OF_RANGE:return $e.OUT_OF_RANGE;case ni.UNIMPLEMENTED:return $e.UNIMPLEMENTED;case ni.DATA_LOSS:return $e.DATA_LOSS;default:return xt(39323,{code:r})}}(br=ni||(ni={}))[br.OK=0]="OK",br[br.CANCELLED=1]="CANCELLED",br[br.UNKNOWN=2]="UNKNOWN",br[br.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",br[br.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",br[br.NOT_FOUND=5]="NOT_FOUND",br[br.ALREADY_EXISTS=6]="ALREADY_EXISTS",br[br.PERMISSION_DENIED=7]="PERMISSION_DENIED",br[br.UNAUTHENTICATED=16]="UNAUTHENTICATED",br[br.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",br[br.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",br[br.ABORTED=10]="ABORTED",br[br.OUT_OF_RANGE=11]="OUT_OF_RANGE",br[br.UNIMPLEMENTED=12]="UNIMPLEMENTED",br[br.INTERNAL=13]="INTERNAL",br[br.UNAVAILABLE=14]="UNAVAILABLE",br[br.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=new wc([4294967295,4294967295],0);function Hv(r){const e=Jj().encode(r),t=new f_;return t.update(e),new Uint8Array(t.digest())}function Gv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new wc([t,n],0),new wc([i,o],0)]}class N5{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Gh(`Invalid padding: ${t}`);if(n<0)throw new Gh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Gh(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Gh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=wc.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(wc.fromNumber(n)));return i.compare(Yj)===1&&(i=new wc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Hv(e),[n,i]=Gv(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(n,i,o);if(!this.we(l))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new N5(o,i,t);return n.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const t=Hv(e),[n,i]=Gv(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(n,i,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Gh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,t,n,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,$f.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new f0(Pt.min(),i,new vn(Zt),gs(),ur())}}class $f{constructor(e,t,n,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new $f(n,t,ur(),ur(),ur())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,t,n,i){this.be=e,this.removedTargetIds=t,this.key=n,this.De=i}}class y3{constructor(e,t){this.targetId=e,this.Ce=t}}class x3{constructor(e,t,n=ai.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Kv{constructor(){this.ve=0,this.Fe=Jv(),this.Me=ai.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ur(),t=ur(),n=ur();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:xt(38017,{changeType:o})}})),new $f(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Jv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,kt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Qj{constructor(e){this.Ge=e,this.ze=new Map,this.je=gs(),this.Je=Wp(),this.He=Wp(),this.Ye=new vn(Zt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:xt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,n=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(Bm(o))if(n===0){const l=new st(o.path);this.et(t,l,Fn.newNoDocument(l,Pt.min()))}else kt(n===1,20013,{expectedCount:n});else{const l=this._t(t);if(l!==n){const u=this.ut(e),h=u?this.ct(u,e,l):1;if(h!==0){this.it(t);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:o=0}=t;let l,u;try{l=jl(n).toUint8Array()}catch(h){if(h instanceof O_)return Iu("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new N5(l,i,o)}catch(h){return Iu(h instanceof Gh?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let i=0;return n.forEach((o=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const u=this.ot(l);if(u){if(o.current&&Bm(u.target)){const h=new st(u.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,Fn.newNoDocument(h,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let n=ur();this.He.forEach(((o,l)=>{let u=!0;l.forEachWhile((h=>{const d=this.ot(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(n=n.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const i=new f0(e,t,this.Ye,this.je,n);return this.je=gs(),this.Je=Wp(),this.He=Wp(),this.Ye=new vn(Zt),i}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Kv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Yr(Zt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Yr(Zt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ze("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Kv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Wp(){return new vn(st.comparator)}function Jv(){return new vn(st.comparator)}const Xj={asc:"ASCENDING",desc:"DESCENDING"},Zj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eR={and:"AND",or:"OR"};class tR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function F1(r,e){return r.useProto3Json||r0(e)?e:{value:e}}function Yd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function v3(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function rR(r,e){return Yd(r,e.toTimestamp())}function jo(r){return kt(!!r,49232),Pt.fromTimestamp((function(t){const n=El(t);return new Kr(n.seconds,n.nanos)})(r))}function B5(r,e){return z1(r,e).canonicalString()}function z1(r,e){const t=(function(i){return new Nr(["projects",i.projectId,"databases",i.database])})(r).child("documents");return e===void 0?t:t.child(e)}function b3(r){const e=Nr.fromString(r);return kt(E3(e),10190,{key:e.toString()}),e}function Fm(r,e){return B5(r.databaseId,e.path)}function xu(r,e){const t=b3(e);if(t.get(1)!==r.databaseId.projectId)throw new it($e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new it($e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new st(_3(t))}function w3(r,e){return B5(r.databaseId,e)}function S3(r){const e=b3(r);return e.length===4?Nr.emptyPath():_3(e)}function V1(r){return new Nr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function _3(r){return kt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Yv(r,e,t){return{name:Fm(r,e),fields:t.value.mapValue.fields}}function nR(r,e,t){const n=xu(r,e.name),i=jo(e.updateTime),o=e.createTime?jo(e.createTime):Pt.min(),l=new fo({mapValue:{fields:e.fields}}),u=Fn.newFoundDocument(n,i,o,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function iR(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:xt(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(d,g){return d.useProto3Json?(kt(g===void 0||typeof g=="string",58123),ai.fromBase64String(g||"")):(kt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),ai.fromUint8Array(g||new Uint8Array))})(r,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(d){const g=d.code===void 0?$e.UNKNOWN:g3(d.code);return new it(g,d.message||"")})(l);t=new x3(n,i,o,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=xu(r,n.document.name),o=jo(n.document.updateTime),l=n.document.createTime?jo(n.document.createTime):Pt.min(),u=new fo({mapValue:{fields:n.document.fields}}),h=Fn.newFoundDocument(i,o,l,u),d=n.targetIds||[],g=n.removedTargetIds||[];t=new hm(d,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=xu(r,n.document),o=n.readTime?jo(n.readTime):Pt.min(),l=Fn.newNoDocument(i,o),u=n.removedTargetIds||[];t=new hm([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=xu(r,n.document),o=n.removedTargetIds||[];t=new hm([],o,i,null)}else{if(!("filter"in e))return xt(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:o}=n,l=new Gj(i,o),u=n.targetId;t=new y3(u,l)}}return t}function zm(r,e){let t;if(e instanceof sh)t={update:Yv(r,e.key,e.value)};else if(e instanceof h0)t={delete:Fm(r,e.key)};else if(e instanceof Nl)t={update:Yv(r,e.key,e.data),updateMask:uR(e.fieldMask)};else{if(!(e instanceof m3))return xt(16599,{Vt:e.type});t={verify:Fm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(o,l){const u=l.transform;if(u instanceof Gd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Kd)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Jd)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof kf)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw xt(20930,{transform:l.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:rR(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:xt(27497)})(r,e.precondition)),t}function O1(r,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?Eo.updateTime(jo(o.updateTime)):o.exists!==void 0?Eo.exists(o.exists):Eo.none()})(e.currentDocument):Eo.none(),n=e.updateTransforms?e.updateTransforms.map((i=>(function(l,u){let h=null;if("setToServerValue"in u)kt(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),h=new Gd;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];h=new Kd(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];h=new Jd(g)}else"increment"in u?h=new kf(l,u.increment):xt(16584,{proto:u});const d=In.fromServerFormat(u.fieldPath);return new h3(d,h)})(r,i))):[];if(e.update){e.update.name;const i=xu(r,e.update.name),o=new fo({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(h){const d=h.fieldPaths||[];return new Ko(d.map((g=>In.fromServerFormat(g))))})(e.updateMask);return new Nl(i,o,l,t,n)}return new sh(i,o,t,n)}if(e.delete){const i=xu(r,e.delete);return new h0(i,t)}if(e.verify){const i=xu(r,e.verify);return new m3(i,t)}return xt(1463,{proto:e})}function oR(r,e){return r&&r.length>0?(kt(e!==void 0,14353),r.map((t=>(function(i,o){let l=i.updateTime?jo(i.updateTime):jo(o);return l.isEqual(Pt.min())&&(l=jo(o)),new Uj(l,i.transformResults||[])})(t,e)))):[]}function T3(r,e){return{documents:[w3(r,e.path)]}}function A3(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=w3(r,i);const o=(function(d){if(d.length!==0)return I3(Jr.create(d,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(d){if(d.length!==0)return d.map((g=>(function(S){return{field:Td(S.field),direction:aR(S.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=F1(r,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function C3(r){let e=S3(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){kt(n===1,65062);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(b){const S=k3(b);return S instanceof Jr&&I5(S)?S.getFilters():[S]})(t.where));let l=[];t.orderBy&&(l=(function(b){return b.map((S=>(function(B){return new Cf(Ad(B.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(S)))})(t.orderBy));let u=null;t.limit&&(u=(function(b){let S;return S=typeof b=="object"?b.value:b,r0(S)?null:S})(t.limit));let h=null;t.startAt&&(h=(function(b){const S=!!b.before,x=b.values||[];return new qd(x,S)})(t.startAt));let d=null;return t.endAt&&(d=(function(b){const S=!b.before,x=b.values||[];return new qd(x,S)})(t.endAt)),Rj(e,i,l,o,u,"F",h,d)}function sR(r,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function k3(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Ad(t.unaryFilter.field);return xr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Ad(t.unaryFilter.field);return xr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ad(t.unaryFilter.field);return xr.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ad(t.unaryFilter.field);return xr.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xt(61313);default:return xt(60726)}})(r):r.fieldFilter!==void 0?(function(t){return xr.create(Ad(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xt(58110);default:return xt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Jr.create(t.compositeFilter.filters.map((n=>k3(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xt(1026)}})(t.compositeFilter.op))})(r):xt(30097,{filter:r})}function aR(r){return Xj[r]}function lR(r){return Zj[r]}function cR(r){return eR[r]}function Td(r){return{fieldPath:r.canonicalString()}}function Ad(r){return In.fromServerFormat(r.fieldPath)}function I3(r){return r instanceof xr?(function(t){if(t.op==="=="){if(Bv(t.value))return{unaryFilter:{field:Td(t.field),op:"IS_NAN"}};if(Nv(t.value))return{unaryFilter:{field:Td(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Bv(t.value))return{unaryFilter:{field:Td(t.field),op:"IS_NOT_NAN"}};if(Nv(t.value))return{unaryFilter:{field:Td(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Td(t.field),op:lR(t.op),value:t.value}}})(r):r instanceof Jr?(function(t){const n=t.getFilters().map((i=>I3(i)));return n.length===1?n[0]:{compositeFilter:{op:cR(t.op),filters:n}}})(r):xt(54877,{filter:r})}function uR(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function E3(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,t,n,i,o=Pt.min(),l=Pt.min(),u=ai.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Tl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e){this.yt=e}}function dR(r,e){let t;if(e.document)t=nR(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=st.fromSegments(e.noDocument.path),i=Pu(e.noDocument.readTime);t=Fn.newNoDocument(n,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return xt(56709);{const n=st.fromSegments(e.unknownDocument.path),i=Pu(e.unknownDocument.version);t=Fn.newUnknownDocument(n,i)}}return e.readTime&&t.setReadTime((function(i){const o=new Kr(i[0],i[1]);return Pt.fromTimestamp(o)})(e.readTime)),t}function Qv(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Vm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(o,l){return{name:Fm(o,l.key),fields:l.data.value.mapValue.fields,updateTime:Yd(o,l.version.toTimestamp()),createTime:Yd(o,l.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:Ru(e.version)};else{if(!e.isUnknownDocument())return xt(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:Ru(e.version)}}return n}function Vm(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Ru(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pu(r){const e=new Kr(r.seconds,r.nanoseconds);return Pt.fromTimestamp(e)}function cu(r,e){const t=(e.baseMutations||[]).map((o=>O1(r.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];l.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const n=e.mutations.map((o=>O1(r.yt,o))),i=Kr.fromMillis(e.localWriteTimeMs);return new j5(e.batchId,i,t,n)}function Kh(r){const e=Pu(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Pu(r.lastLimboFreeSnapshotVersion):Pt.min();let n;return n=(function(o){return o.documents!==void 0})(r.query)?(function(o){const l=o.documents.length;return kt(l===1,1966,{count:l}),Ws(l0(S3(o.documents[0])))})(r.query):(function(o){return Ws(C3(o))})(r.query),new Tl(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,ai.fromBase64String(r.resumeToken))}function R3(r,e){const t=Ru(e.snapshotVersion),n=Ru(e.lastLimboFreeSnapshotVersion);let i;i=Bm(e.target)?T3(r.yt,e.target):A3(r.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ju(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function P3(r){const e=C3({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?L1(e,e.limit,"L"):e}function qg(r,e){return new P5(e.largestBatchId,O1(r.yt,e.overlayMutation))}function Xv(r,e){const t=e.path.lastSegment();return[r,po(e.path.popLast()),t]}function Zv(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:Ru(n.readTime),documentKey:po(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{getBundleMetadata(e,t){return eb(e).get(t).next((n=>{if(n)return(function(o){return{id:o.bundleId,createTime:Pu(o.createTime),version:o.version}})(n)}))}saveBundleMetadata(e,t){return eb(e).put((function(i){return{bundleId:i.id,createTime:Ru(jo(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return tb(e).get(t).next((n=>{if(n)return(function(o){return{name:o.name,query:P3(o.bundledQuery),readTime:Pu(o.readTime)}})(n)}))}saveNamedQuery(e,t){return tb(e).put((function(i){return{name:i.name,readTime:Ru(jo(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function eb(r){return mi(r,n0)}function tb(r){return mi(r,i0)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new p0(e,n)}getOverlay(e,t){return zh(e).get(Xv(this.userId,t)).next((n=>n?qg(this.serializer,n):null))}getOverlays(e,t){const n=$a();return Re.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&n.set(i,o)})))).next((()=>n))}saveOverlays(e,t,n){const i=[];return n.forEach(((o,l)=>{const u=new P5(t,l);i.push(this.St(e,u))})),Re.waitFor(i)}removeOverlaysForBatchId(e,t,n){const i=new Set;t.forEach((l=>i.add(po(l.getCollectionPath()))));const o=[];return i.forEach((l=>{const u=IDBKeyRange.bound([this.userId,l,n],[this.userId,l,n+1],!1,!0);o.push(zh(e).Z(k1,u))})),Re.waitFor(o)}getOverlaysForCollection(e,t,n){const i=$a(),o=po(t),l=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return zh(e).J(k1,l).next((u=>{for(const h of u){const d=qg(this.serializer,h);i.set(d.getKey(),d)}return i}))}getOverlaysForCollectionGroup(e,t,n,i){const o=$a();let l;const u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zh(e).ee({index:N_,range:u},((h,d,g)=>{const b=qg(this.serializer,d);o.size()<i||b.largestBatchId===l?(o.set(b.getKey(),b),l=b.largestBatchId):g.done()})).next((()=>o))}St(e,t){return zh(e).put((function(i,o,l){const[u,h,d]=Xv(o,l.mutation.key);return{userId:o,collectionPath:h,documentId:d,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:zm(i.yt,l.mutation)}})(this.serializer,this.userId,t))}}function zh(r){return mi(r,o0)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{bt(e){return mi(e,_5)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const n=t==null?void 0:t.value;return n?ai.fromUint8Array(n):ai.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(xn(e.integerValue));else if("doubleValue"in e){const n=xn(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),xf(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),typeof n=="string"&&(n=El(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(jl(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?q_(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):a0(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):xt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const i of Object.keys(n))this.Ot(i,t),this.Ct(n[i],t)}kt(e,t){var l,u;const n=e.fields||{};this.Ft(t,53);const i=$d,o=((u=(l=n[i].arrayValue)==null?void 0:l.values)==null?void 0:u.length)||0;this.Ft(t,15),t.Mt(xn(o)),this.Ot(i,t),this.Ct(n[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const i of n)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),st.fromName(e).path.forEach((n=>{this.Ft(t,60),this.Ut(n,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}uu.Kt=new uu;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=255;function pR(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function rb(r){const e=64-(function(n){let i=0;for(let o=0;o<8;++o){const l=pR(255&n[o]);if(i+=l,l!==8)break}return i})(r);return Math.ceil(e/8)}class mR{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),n=rb(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),n=rb(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(gd),this.sn(255)}_n(){this.an(gd),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let i=1;i<t.length;++i)t[i]^=n?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===gd?(this.sn(gd),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===gd?(this.an(gd),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class gR{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class yR{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Vh{constructor(){this.cn=new mR,this.ln=new gR(this.cn),this.hn=new yR(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,t,n,i){this.Tn=e,this.In=t,this.En=n,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new du(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:fm(this.En),directionalValue:fm(this.dn),orderedDocumentKey:fm(t),documentKey:n.path.toArray()}}Vn(e,t,n){const i=this.Rn(e,t,n);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function lc(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=nb(r.En,e.En),t!==0?t:(t=nb(r.dn,e.dn),t!==0?t:st.comparator(r.In,e.In)))}function nb(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}function fm(r){return _S()?(function(t){let n="";for(let i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return n})(r):r}function ib(r){return typeof r!="string"?r:(function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n})(r)}class ob{constructor(e){this.mn=new Yr(((t,n)=>In.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const n=t;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(kt(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=T1(e);if(t!==void 0&&!this.wn(t))return!1;const n=ou(e);let i=new Set,o=0,l=0;for(;o<n.length&&this.wn(n[o]);++o)i=i.add(n[o].fieldPath.canonicalString());if(o===n.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!i.has(u.field.canonicalString())){const h=n[o];if(!this.Sn(u,h)||!this.bn(this.fn[l++],h))return!1}++o}for(;o<n.length;++o){const u=n[o];if(l>=this.fn.length||!this.bn(this.fn[l++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new Yr(In.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new om(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new om(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new om(n.field,n.dir==="asc"?0:1)));return new Em(Em.UNKNOWN_ID,this.collectionId,t,yf.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(r){var t,n;if(kt(r instanceof xr||r instanceof Jr,20012),r instanceof xr){if(r instanceof e3){const i=((n=(t=r.value.arrayValue)==null?void 0:t.values)==null?void 0:n.map((o=>xr.create(r.field,"==",o))))||[];return Jr.create(i,"or")}return r}const e=r.filters.map((i=>N3(i)));return Jr.create(e,r.op)}function xR(r){if(r.getFilters().length===0)return[];const e=W1(N3(r));return kt(B3(e),7391),M1(e)||D1(e)?[e]:e.getFilters()}function M1(r){return r instanceof xr}function D1(r){return r instanceof Jr&&I5(r)}function B3(r){return M1(r)||D1(r)||(function(t){if(t instanceof Jr&&R1(t)){for(const n of t.getFilters())if(!M1(n)&&!D1(n))return!1;return!0}return!1})(r)}function W1(r){if(kt(r instanceof xr||r instanceof Jr,34018),r instanceof xr)return r;if(r.filters.length===1)return W1(r.filters[0]);const e=r.filters.map((n=>W1(n)));let t=Jr.create(e,r.op);return t=Om(t),B3(t)?t:(kt(t instanceof Jr,64498),kt(Hd(t),40251),kt(t.filters.length>1,57927),t.filters.reduce(((n,i)=>L5(n,i))))}function L5(r,e){let t;return kt(r instanceof xr||r instanceof Jr,38388),kt(e instanceof xr||e instanceof Jr,25473),t=r instanceof xr?e instanceof xr?(function(i,o){return Jr.create([i,o],"and")})(r,e):sb(r,e):e instanceof xr?sb(e,r):(function(i,o){if(kt(i.filters.length>0&&o.filters.length>0,48005),Hd(i)&&Hd(o))return Q_(i,o.getFilters());const l=R1(i)?i:o,u=R1(i)?o:i,h=l.filters.map((d=>L5(d,u)));return Jr.create(h,"or")})(r,e),Om(t)}function sb(r,e){if(Hd(e))return Q_(e,r.getFilters());{const t=e.filters.map((n=>L5(r,n)));return Jr.create(t,"or")}}function Om(r){if(kt(r instanceof xr||r instanceof Jr,11850),r instanceof xr)return r;const e=r.getFilters();if(e.length===1)return Om(e[0]);if(J_(r))return r;const t=e.map((i=>Om(i))),n=[];return t.forEach((i=>{i instanceof xr?n.push(i):i instanceof Jr&&(i.op===r.op?n.push(...i.filters):n.push(i))})),n.length===1?n[0]:Jr.create(n,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.Cn=new F5}addToCollectionParentIndex(e,t){return this.Cn.add(t),Re.resolve()}getCollectionParents(e,t){return Re.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Re.resolve()}deleteFieldIndex(e,t){return Re.resolve()}deleteAllFieldIndexes(e){return Re.resolve()}createTargetIndexes(e,t){return Re.resolve()}getDocumentsMatchingTarget(e,t){return Re.resolve(null)}getIndexType(e,t){return Re.resolve(0)}getFieldIndexes(e,t){return Re.resolve([])}getNextCollectionGroupToUpdate(e){return Re.resolve(null)}getMinOffset(e,t){return Re.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,t){return Re.resolve(vs.min())}updateCollectionGroup(e,t,n){return Re.resolve()}updateIndexEntries(e,t){return Re.resolve()}}class F5{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Yr(Nr.comparator),o=!i.has(n);return this.index[t]=i.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Yr(Nr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="IndexedDbIndexManager",$p=new Uint8Array(0);class bR{constructor(e,t){this.databaseId=t,this.vn=new F5,this.Fn=new Pl((n=>ju(n)),((n,i)=>Df(n,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:n,parent:po(i)};return lb(e).put(o)}return Re.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[w_(t),""],!1,!0);return lb(e).J(i).next((o=>{for(const l of o){if(l.collectionId!==t)break;n.push(Wa(l.parent))}return n}))}addFieldIndex(e,t){const n=Oh(e),i=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(t);delete i.indexId;const o=n.add(i);if(t.indexState){const l=xd(e);return o.next((u=>{l.put(Zv(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const n=Oh(e),i=xd(e),o=yd(e);return n.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Oh(e),n=yd(e),i=xd(e);return t.Z().next((()=>n.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return Re.forEach(this.Mn(t),(n=>this.getIndexType(e,n).next((i=>{if(i===0||i===1){const o=new ob(n).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const n=yd(e);let i=!0;const o=new Map;return Re.forEach(this.Mn(t),(l=>this.xn(e,l).next((u=>{i&&(i=!!u),o.set(l,u)})))).next((()=>{if(i){let l=ur();const u=[];return Re.forEach(o,((h,d)=>{Ze(ab,`Using index ${(function($){return`id=${$.indexId}|cg=${$.collectionGroup}|f=${$.fields.map((F=>`${F.fieldPath}:${F.kind}`)).join(",")}`})(h)} to execute ${ju(t)}`);const g=(function($,F){const ie=T1(F);if(ie===void 0)return null;for(const ue of Lm($,ie.fieldPath))switch(ue.op){case"array-contains-any":return ue.value.arrayValue.values||[];case"array-contains":return[ue.value]}return null})(d,h),b=(function($,F){const ie=new Map;for(const ue of ou(F))for(const V of Lm($,ue.fieldPath))switch(V.op){case"==":case"in":ie.set(ue.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return ie.set(ue.fieldPath.canonicalString(),V.value),Array.from(ie.values())}return null})(d,h),S=(function($,F){const ie=[];let ue=!0;for(const V of ou(F)){const k=V.kind===0?Ov($,V.fieldPath,$.startAt):Mv($,V.fieldPath,$.startAt);ie.push(k.value),ue&&(ue=k.inclusive)}return new qd(ie,ue)})(d,h),x=(function($,F){const ie=[];let ue=!0;for(const V of ou(F)){const k=V.kind===0?Mv($,V.fieldPath,$.endAt):Ov($,V.fieldPath,$.endAt);ie.push(k.value),ue&&(ue=k.inclusive)}return new qd(ie,ue)})(d,h),B=this.On(h,d,S),E=this.On(h,d,x),L=this.Nn(h,d,b),A=this.Bn(h.indexId,g,B,S.inclusive,E,x.inclusive,L);return Re.forEach(A,(O=>n.Y(O,t.limit).next(($=>{$.forEach((F=>{const ie=st.fromSegments(F.documentKey);l.has(ie)||(l=l.add(ie),u.push(ie))}))}))))})).next((()=>u))}return Re.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=xR(Jr.create(e.filters,"and")).map((n=>N1(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,n,i,o,l,u){const h=(t!=null?t.length:1)*Math.max(n.length,o.length),d=h/(t!=null?t.length:1),g=[];for(let b=0;b<h;++b){const S=t?this.Ln(t[b/d]):$p,x=this.kn(e,S,n[b%d],i),B=this.qn(e,S,o[b%d],l),E=u.map((L=>this.kn(e,S,L,!0)));g.push(...this.createRange(x,B,E))}return g}kn(e,t,n,i){const o=new du(e,st.empty(),t,n);return i?o:o.An()}qn(e,t,n,i){const o=new du(e,st.empty(),t,n);return i?o.An():o}xn(e,t){const n=new ob(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((o=>{let l=null;for(const u of o)n.yn(u)&&(!l||u.fields.length>l.fields.length)&&(l=u);return l}))}getIndexType(e,t){let n=2;const i=this.Mn(t);return Re.forEach(i,(o=>this.xn(e,o).next((l=>{l?n!==0&&l.fields.length<(function(h){let d=new Yr(In.comparator),g=!1;for(const b of h.filters)for(const S of b.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?g=!0:d=d.add(S.field));for(const b of h.orderBy)b.field.isKeyField()||(d=d.add(b.field));return d.size+(g?1:0)})(o)&&(n=1):n=0})))).next((()=>(function(l){return l.limit!==null})(t)&&i.length>1&&n===2?1:n))}Qn(e,t){const n=new Vh;for(const i of ou(e)){const o=t.data.field(i.fieldPath);if(o==null)return null;const l=n.Pn(i.kind);uu.Kt.Dt(o,l)}return n.un()}Ln(e){const t=new Vh;return uu.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new Vh;return uu.Kt.Dt(Tf(this.databaseId,t),n.Pn((function(o){const l=ou(o);return l.length===0?0:l[l.length-1].kind})(e))),n.un()}Nn(e,t,n){if(n===null)return[];let i=[];i.push(new Vh);let o=0;for(const l of ou(e)){const u=n[o++];for(const h of i)if(this.Un(t,l.fieldPath)&&Af(u))i=this.Kn(i,l,u);else{const d=h.Pn(l.kind);uu.Kt.Dt(u,d)}}return this.Wn(i)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const i=[...e],o=[];for(const l of n.arrayValue.values||[])for(const u of i){const h=new Vh;h.seed(u.un()),uu.Kt.Dt(l,h.Pn(t.kind)),o.push(h)}return o}Un(e,t){return!!e.filters.find((n=>n instanceof xr&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=Oh(e),i=xd(e);return(t?n.J(C1,IDBKeyRange.bound(t,t)):n.J()).next((o=>{const l=[];return Re.forEach(o,(u=>i.get([u.indexId,this.uid]).next((h=>{l.push((function(g,b){const S=b?new yf(b.sequenceNumber,new vs(Pu(b.readTime),new st(Wa(b.documentKey)),b.largestBatchId)):yf.empty(),x=g.fields.map((([B,E])=>new om(In.fromServerFormat(B),E)));return new Em(g.indexId,g.collectionGroup,x,S)})(u,h))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,i)=>{const o=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Zt(n.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const i=Oh(e),o=xd(e);return this.Gn(e).next((l=>i.J(C1,IDBKeyRange.bound(t,t)).next((u=>Re.forEach(u,(h=>o.put(Zv(h.indexId,this.uid,l,n))))))))}updateIndexEntries(e,t){const n=new Map;return Re.forEach(t,((i,o)=>{const l=n.get(i.collectionGroup);return(l?Re.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next((u=>(n.set(i.collectionGroup,u),Re.forEach(u,(h=>this.zn(e,i,h).next((d=>{const g=this.jn(o,h);return d.isEqual(g)?Re.resolve():this.Jn(e,o,h,d,g)})))))))}))}Hn(e,t,n,i){return yd(e).put(i.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,i){return yd(e).delete(i.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const i=yd(e);let o=new Yr(lc);return i.ee({index:P_,range:IDBKeyRange.only([n.indexId,this.uid,fm(this.$n(n,t))])},((l,u)=>{o=o.add(new du(n.indexId,t,ib(u.arrayValue),ib(u.directionalValue)))})).next((()=>o))}jn(e,t){let n=new Yr(lc);const i=this.Qn(t,e);if(i==null)return n;const o=T1(t);if(o!=null){const l=e.data.field(o.fieldPath);if(Af(l))for(const u of l.arrayValue.values||[])n=n.add(new du(t.indexId,e.key,this.Ln(u),i))}else n=n.add(new du(t.indexId,e.key,$p,i));return n}Jn(e,t,n,i,o){Ze(ab,"Updating index entries for document '%s'",t.key);const l=[];return(function(h,d,g,b,S){const x=h.getIterator(),B=d.getIterator();let E=md(x),L=md(B);for(;E||L;){let A=!1,O=!1;if(E&&L){const $=g(E,L);$<0?O=!0:$>0&&(A=!0)}else E!=null?O=!0:A=!0;A?(b(L),L=md(B)):O?(S(E),E=md(x)):(E=md(x),L=md(B))}})(i,o,lc,(u=>{l.push(this.Hn(e,t,n,u))}),(u=>{l.push(this.Yn(e,t,n,u))})),Re.waitFor(l)}Gn(e){let t=1;return xd(e).ee({index:R_,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,i,o)=>{o.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((l,u)=>lc(l,u))).filter(((l,u,h)=>!u||lc(l,h[u-1])!==0));const i=[];i.push(e);for(const l of n){const u=lc(l,e),h=lc(l,t);if(u===0)i[0]=e.An();else if(u>0&&h<0)i.push(l),i.push(l.An());else if(h>0)break}i.push(t);const o=[];for(let l=0;l<i.length;l+=2){if(this.Zn(i[l],i[l+1]))return[];const u=i[l].Vn(this.uid,$p,st.empty()),h=i[l+1].Vn(this.uid,$p,st.empty());o.push(IDBKeyRange.bound(u,h))}return o}Zn(e,t){return lc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(cb)}getMinOffset(e,t){return Re.mapArray(this.Mn(t),(n=>this.xn(e,n).next((i=>i||xt(44426))))).next(cb)}}function lb(r){return mi(r,wf)}function yd(r){return mi(r,nf)}function Oh(r){return mi(r,S5)}function xd(r){return mi(r,rf)}function cb(r){kt(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const i=r[n].indexState.offset;v5(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new vs(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},L3=41943040;class ho{static withCacheSize(e){return new ho(e,ho.DEFAULT_COLLECTION_PERCENTILE,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(r,e,t){const n=r.store(ha),i=r.store(Od),o=[],l=IDBKeyRange.only(t.batchId);let u=0;const h=n.ee({range:l},((g,b,S)=>(u++,S.delete())));o.push(h.next((()=>{kt(u===1,47070,{batchId:t.batchId})})));const d=[];for(const g of t.mutations){const b=I_(e,g.key.path,t.batchId);o.push(i.delete(b)),d.push(g.key)}return Re.waitFor(o).next((()=>d))}function Mm(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw xt(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ho.DEFAULT_COLLECTION_PERCENTILE=10,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ho.DEFAULT=new ho(L3,ho.DEFAULT_COLLECTION_PERCENTILE,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ho.DISABLED=new ho(-1,0,0);class m0{constructor(e,t,n,i){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=i,this.Xn={}}static wt(e,t,n,i){kt(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new m0(o,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cc(e).ee({index:pu,range:n},((i,o,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,n,i){const o=Cd(e),l=cc(e);return l.add({}).next((u=>{kt(typeof u=="number",49019);const h=new j5(u,t,n,i),d=(function(x,B,E){const L=E.baseMutations.map((O=>zm(x.yt,O))),A=E.mutations.map((O=>zm(x.yt,O)));return{userId:B,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:L,mutations:A}})(this.serializer,this.userId,h),g=[];let b=new Yr(((S,x)=>Zt(S.canonicalString(),x.canonicalString())));for(const S of i){const x=I_(this.userId,S.key.path,u);b=b.add(S.key.path.popLast()),g.push(l.put(d)),g.push(o.put(x,J7))}return b.forEach((S=>{g.push(this.indexManager.addToCollectionParentIndex(e,S))})),e.addOnCommittedListener((()=>{this.Xn[u]=h.keys()})),Re.waitFor(g).next((()=>h))}))}lookupMutationBatch(e,t){return cc(e).get(t).next((n=>n?(kt(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),cu(this.serializer,n)):null))}er(e,t){return this.Xn[t]?Re.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const i=n.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let o=null;return cc(e).ee({index:pu,range:i},((l,u,h)=>{u.userId===this.userId&&(kt(u.batchId>=n,47524,{tr:n}),o=cu(this.serializer,u)),h.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=gu;return cc(e).ee({index:pu,range:t,reverse:!0},((i,o,l)=>{n=o.batchId,l.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,gu],[this.userId,Number.POSITIVE_INFINITY]);return cc(e).J(pu,t).next((n=>n.map((i=>cu(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=sm(this.userId,t.path),i=IDBKeyRange.lowerBound(n),o=[];return Cd(e).ee({range:i},((l,u,h)=>{const[d,g,b]=l,S=Wa(g);if(d===this.userId&&t.path.isEqual(S))return cc(e).get(b).next((x=>{if(!x)throw xt(61480,{nr:l,batchId:b});kt(x.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:x.userId,batchId:b}),o.push(cu(this.serializer,x))}));h.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Yr(Zt);const i=[];return t.forEach((o=>{const l=sm(this.userId,o.path),u=IDBKeyRange.lowerBound(l),h=Cd(e).ee({range:u},((d,g,b)=>{const[S,x,B]=d,E=Wa(x);S===this.userId&&o.path.isEqual(E)?n=n.add(B):b.done()}));i.push(h)})),Re.waitFor(i).next((()=>this.rr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,o=sm(this.userId,n),l=IDBKeyRange.lowerBound(o);let u=new Yr(Zt);return Cd(e).ee({range:l},((h,d,g)=>{const[b,S,x]=h,B=Wa(S);b===this.userId&&n.isPrefixOf(B)?B.length===i&&(u=u.add(x)):g.done()})).next((()=>this.rr(e,u)))}rr(e,t){const n=[],i=[];return t.forEach((o=>{i.push(cc(e).get(o).next((l=>{if(l===null)throw xt(35274,{batchId:o});kt(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:o}),n.push(cu(this.serializer,l))})))})),Re.waitFor(i).next((()=>n))}removeMutationBatch(e,t){return F3(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),Re.forEach(n,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Re.resolve();const n=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),i=[];return Cd(e).ee({range:n},((o,l,u)=>{if(o[0]===this.userId){const h=Wa(o[1]);i.push(h)}else u.done()})).next((()=>{kt(i.length===0,56720,{sr:i.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return z3(e,this.userId,t)}_r(e){return V3(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:gu,lastStreamToken:""}))}}function z3(r,e,t){const n=sm(e,t.path),i=n[1],o=IDBKeyRange.lowerBound(n);let l=!1;return Cd(r).ee({range:o,X:!0},((u,h,d)=>{const[g,b,S]=u;g===e&&b===i&&(l=!0),d.done()})).next((()=>l))}function cc(r){return mi(r,ha)}function Cd(r){return mi(r,Od)}function V3(r){return mi(r,vf)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Nu(0)}static cr(){return new Nu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const n=new Nu(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Pt.fromTimestamp(new Kr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>vd(e).delete(t.targetId))).next((()=>this.lr(e))).next((n=>(kt(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n))))}removeTargets(e,t,n){let i=0;const o=[];return vd(e).ee(((l,u)=>{const h=Kh(u);h.sequenceNumber<=t&&n.get(h.targetId)===null&&(i++,o.push(this.removeTargetData(e,h)))})).next((()=>Re.waitFor(o))).next((()=>i))}forEachTarget(e,t){return vd(e).ee(((n,i)=>{const o=Kh(i);t(o)}))}lr(e){return db(e).get(Pm).next((t=>(kt(t!==null,2888),t)))}hr(e,t){return db(e).put(Pm,t)}Pr(e,t){return vd(e).put(R3(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const n=ju(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let o=null;return vd(e).ee({range:i,index:j_},((l,u,h)=>{const d=Kh(u);Df(t,d.target)&&(o=d,h.done())})).next((()=>o))}addMatchingKeys(e,t,n){const i=[],o=mc(e);return t.forEach((l=>{const u=po(l.path);i.push(o.put({targetId:n,path:u})),i.push(this.referenceDelegate.addReference(e,n,l))})),Re.waitFor(i)}removeMatchingKeys(e,t,n){const i=mc(e);return Re.forEach(t,(o=>{const l=po(o.path);return Re.waitFor([i.delete([n,l]),this.referenceDelegate.removeReference(e,n,o)])}))}removeMatchingKeysForTargetId(e,t){const n=mc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=mc(e);let o=ur();return i.ee({range:n,X:!0},((l,u,h)=>{const d=Wa(l[1]),g=new st(d);o=o.add(g)})).next((()=>o))}containsKey(e,t){const n=po(t.path),i=IDBKeyRange.bound([n],[w_(n)],!1,!0);let o=0;return mc(e).ee({index:w5,X:!0,range:i},(([l,u],h,d)=>{l!==0&&(o++,d.done())})).next((()=>o>0))}At(e,t){return vd(e).get(t).next((n=>n?Kh(n):null))}}function vd(r){return mi(r,Md)}function db(r){return mi(r,yu)}function mc(r){return mi(r,Dd)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="LruGarbageCollector",SR=1048576;function fb([r,e],[t,n]){const i=Zt(r,t);return i===0?Zt(e,n):i}class _R{constructor(e){this.Ir=e,this.buffer=new Yr(fb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();fb(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class O3{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ze(hb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Nc(t)?Ze(hb,"Ignoring IndexedDB error during garbage collection: ",t):await Mu(t)}await this.Vr(3e5)}))}}class TR{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return Re.resolve(Ds.ce);const n=new _R(t);return this.mr.forEachTarget(e,(i=>n.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>n.Ar(i))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ze("LruGarbageCollector","Garbage collection skipped; disabled"),Re.resolve(ub)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ub):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,i,o,l,u,h,d;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(Ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),i=this.params.maximumSequenceNumbersToCollect):i=b,l=Date.now(),this.nthSequenceNumber(e,i)))).next((b=>(n=b,u=Date.now(),this.removeTargets(e,n,t)))).next((b=>(o=b,h=Date.now(),this.removeOrphanedDocuments(e,n)))).next((b=>(d=Date.now(),Sd()<=yr.DEBUG&&Ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${i} in `+(u-l)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${b} documents in `+(d-h)+`ms
Total Duration: ${d-g}ms`),Re.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:b}))))}}function M3(r,e){return new TR(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,t){this.db=e,this.garbageCollector=M3(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((i=>n+i))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((n,i)=>t(i)))}addReference(e,t,n){return Up(e,n)}removeReference(e,t,n){return Up(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Up(e,t)}br(e,t){return(function(i,o){let l=!1;return V3(i).te((u=>z3(i,u,o).next((h=>(h&&(l=!0),Re.resolve(!h)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Sr(e,((l,u)=>{if(u<=t){const h=this.br(e,l).next((d=>{if(!d)return o++,n.getEntry(e,l).next((()=>(n.removeEntry(l,Pt.min()),mc(e).delete((function(b){return[0,po(b.path)]})(l)))))}));i.push(h)}})).next((()=>Re.waitFor(i))).next((()=>n.apply(e))).next((()=>o))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Up(e,t)}Sr(e,t){const n=mc(e);let i,o=Ds.ce;return n.ee({index:w5},(([l,u],{path:h,sequenceNumber:d})=>{l===0?(o!==Ds.ce&&t(new st(Wa(i)),o),o=d,i=h):o=Ds.ce})).next((()=>{o!==Ds.ce&&t(new st(Wa(i)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Up(r,e){return mc(r).put((function(n,i){return{targetId:0,path:po(n.path),sequenceNumber:i}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(){this.changes=new Pl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Re.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return ru(e).put(n)}removeEntry(e,t,n){return ru(e).delete((function(o,l){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Vm(l),u[u.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Dr(e,n))))}getEntry(e,t){let n=Fn.newInvalidDocument(t);return ru(e).ee({index:am,range:IDBKeyRange.only(Mh(t))},((i,o)=>{n=this.Cr(t,o)})).next((()=>n))}vr(e,t){let n={size:0,document:Fn.newInvalidDocument(t)};return ru(e).ee({index:am,range:IDBKeyRange.only(Mh(t))},((i,o)=>{n={document:this.Cr(t,o),size:Mm(o)}})).next((()=>n))}getEntries(e,t){let n=gs();return this.Fr(e,t,((i,o)=>{const l=this.Cr(i,o);n=n.insert(i,l)})).next((()=>n))}Mr(e,t){let n=gs(),i=new vn(st.comparator);return this.Fr(e,t,((o,l)=>{const u=this.Cr(o,l);n=n.insert(o,u),i=i.insert(o,Mm(l))})).next((()=>({documents:n,Or:i})))}Fr(e,t,n){if(t.isEmpty())return Re.resolve();let i=new Yr(gb);t.forEach((h=>i=i.add(h)));const o=IDBKeyRange.bound(Mh(i.first()),Mh(i.last())),l=i.getIterator();let u=l.getNext();return ru(e).ee({index:am,range:o},((h,d,g)=>{const b=st.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;u&&gb(u,b)<0;)n(u,null),u=l.getNext();u&&u.isEqual(b)&&(n(u,d),u=l.hasNext()?l.getNext():null),u?g.j(Mh(u)):g.done()})).next((()=>{for(;u;)n(u,null),u=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,n,i,o){const l=t.path,u=[l.popLast().toArray(),l.lastSegment(),Vm(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],h=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ru(e).J(IDBKeyRange.bound(u,h,!0)).next((d=>{o==null||o.incrementDocumentReadCount(d.length);let g=gs();for(const b of d){const S=this.Cr(st.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);S.isFoundDocument()&&(Wf(t,S)||i.has(S.key))&&(g=g.insert(S.key,S))}return g}))}getAllFromCollectionGroup(e,t,n,i){let o=gs();const l=mb(t,n),u=mb(t,vs.max());return ru(e).ee({index:E_,range:IDBKeyRange.bound(l,u,!0)},((h,d,g)=>{const b=this.Cr(st.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);o=o.insert(b.key,b),o.size===i&&g.done()})).next((()=>o))}newChangeBuffer(e){return new kR(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return pb(e).get(A1).next((t=>(kt(!!t,20021),t)))}Dr(e,t){return pb(e).put(A1,t)}Cr(e,t){if(t){const n=dR(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(Pt.min())))return n}return Fn.newInvalidDocument(e)}}function W3(r){return new CR(r)}class kR extends D3{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Pl((n=>n.toString()),((n,i)=>n.isEqual(i)))}applyChanges(e){const t=[];let n=0,i=new Yr(((o,l)=>Zt(o.canonicalString(),l.canonicalString())));return this.changes.forEach(((o,l)=>{const u=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,u.readTime)),l.isValidDocument()){const h=Qv(this.Nr.serializer,l);i=i.add(o.path.popLast());const d=Mm(h);n+=d-u.size,t.push(this.Nr.addEntry(e,o,h))}else if(n-=u.size,this.trackRemovals){const h=Qv(this.Nr.serializer,l.convertToNoDocument(Pt.min()));t.push(this.Nr.addEntry(e,o,h))}})),i.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,n)),Re.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((n=>(this.Br.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:n,Or:i})=>(i.forEach(((o,l)=>{this.Br.set(o,{size:l,readTime:n.get(o).readTime})})),n)))}}function pb(r){return mi(r,bf)}function ru(r){return mi(r,Rm)}function Mh(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mb(r,e){const t=e.documentKey.path.toArray();return[r,Vm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function gb(r,e){const t=r.path.toArray(),n=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<n.length-2;++o)if(i=Zt(t[o],n[o]),i)return i;return i=Zt(t.length,n.length),i||(i=Zt(t[t.length-2],n[n.length-2]),i||Zt(t[t.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(n!==null&&lf(n.mutation,i,Ko.empty(),Kr.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,ur()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=ur()){const i=$a();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((o=>{let l=Hh();return o.forEach(((u,h)=>{l=l.insert(u,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const n=$a();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,ur())))}populateOverlays(e,t,n){const i=[];return n.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((l,u)=>{t.set(l,u)}))}))}computeViews(e,t,n,i){let o=gs();const l=af(),u=(function(){return af()})();return t.forEach(((h,d)=>{const g=n.get(d.key);i.has(d.key)&&(g===void 0||g.mutation instanceof Nl)?o=o.insert(d.key,d):g!==void 0?(l.set(d.key,g.mutation.getFieldMask()),lf(g.mutation,d,g.mutation.getFieldMask(),Kr.now())):l.set(d.key,Ko.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((d,g)=>l.set(d,g))),t.forEach(((d,g)=>u.set(d,new IR(g,l.get(d)??null)))),u)))}recalculateAndSaveOverlays(e,t){const n=af();let i=new vn(((l,u)=>l-u)),o=ur();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const u of l)u.keys().forEach((h=>{const d=t.get(h);if(d===null)return;let g=n.get(h)||Ko.empty();g=u.applyToLocalView(d,g),n.set(h,g);const b=(i.get(u.batchId)||ur()).add(h);i=i.insert(u.batchId,b)}))})).next((()=>{const l=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),d=h.key,g=h.value,b=s3();g.forEach((S=>{if(!o.has(S)){const x=f3(t.get(S),n.get(S));x!==null&&b.set(S,x),o=o.add(S)}})),l.push(this.documentOverlayCache.saveOverlays(e,d,b))}return Re.waitFor(l)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,i){return(function(l){return st.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):t3(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-o.size):Re.resolve($a());let u=gf,h=o;return l.next((d=>Re.forEach(d,((g,b)=>(u<b.largestBatchId&&(u=b.largestBatchId),o.get(g)?Re.resolve():this.remoteDocumentCache.getEntry(e,g).next((S=>{h=h.insert(g,S)}))))).next((()=>this.populateOverlays(e,d,o))).next((()=>this.computeViews(e,h,d,ur()))).next((g=>({batchId:u,changes:o3(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new st(t)).next((n=>{let i=Hh();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const o=t.collectionGroup;let l=Hh();return this.indexManager.getCollectionParents(e,o).next((u=>Re.forEach(u,(h=>{const d=(function(b,S){return new oh(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,n,i).next((g=>{g.forEach(((b,S)=>{l=l.insert(b,S)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,i)))).next((l=>{o.forEach(((h,d)=>{const g=d.getKey();l.get(g)===null&&(l=l.insert(g,Fn.newInvalidDocument(g)))}));let u=Hh();return l.forEach(((h,d)=>{const g=o.get(h);g!==void 0&&lf(g.mutation,d,Ko.empty(),Kr.now()),Wf(t,d)&&(u=u.insert(h,d))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Re.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:jo(i.createTime)}})(t)),Re.resolve()}getNamedQuery(e,t){return Re.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:P3(i.bundledQuery),readTime:jo(i.readTime)}})(t)),Re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(){this.overlays=new vn(st.comparator),this.qr=new Map}getOverlay(e,t){return Re.resolve(this.overlays.get(t))}getOverlays(e,t){const n=$a();return Re.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&n.set(i,o)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((i,o)=>{this.St(e,t,o)})),Re.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(n)),Re.resolve()}getOverlaysForCollection(e,t,n){const i=$a(),o=t.length+1,l=new st(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const h=u.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&h.largestBatchId>n&&i.set(h.getKey(),h)}return Re.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let o=new vn(((d,g)=>d-g));const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>n){let g=o.get(d.largestBatchId);g===null&&(g=$a(),o=o.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const u=$a(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((d,g)=>u.set(d,g))),!(u.size()>=i)););return Re.resolve(u)}St(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(n.key,new P5(t,n));let o=this.qr.get(t);o===void 0&&(o=ur(),this.qr.set(t,o)),this.qr.set(t,o.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.sessionToken=ai.EMPTY_BYTE_STRING}getSessionToken(e){return Re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(){this.Qr=new Yr(Ri.$r),this.Ur=new Yr(Ri.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Ri(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new Ri(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new st(new Nr([])),n=new Ri(t,e),i=new Ri(t,e+1),o=[];return this.Ur.forEachInRange([n,i],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new st(new Nr([])),n=new Ri(t,e),i=new Ri(t,e+1);let o=ur();return this.Ur.forEachInRange([n,i],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new Ri(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Ri{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return st.comparator(e.key,t.key)||Zt(e.Yr,t.Yr)}static Kr(e,t){return Zt(e.Yr,t.Yr)||st.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Yr(Ri.$r)}checkEmpty(e){return Re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new j5(o,t,n,i);this.mutationQueue.push(l);for(const u of i)this.Zr=this.Zr.add(new Ri(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Re.resolve(l)}lookupMutationBatch(e,t){return Re.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.ei(n),o=i<0?0:i;return Re.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Re.resolve(this.mutationQueue.length===0?gu:this.tr-1)}getAllMutationBatches(e){return Re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ri(t,0),i=new Ri(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,i],(l=>{const u=this.Xr(l.Yr);o.push(u)})),Re.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Yr(Zt);return t.forEach((i=>{const o=new Ri(i,0),l=new Ri(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(u=>{n=n.add(u.Yr)}))})),Re.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let o=n;st.isDocumentKey(o)||(o=o.child(""));const l=new Ri(new st(o),0);let u=new Yr(Zt);return this.Zr.forEachWhile((h=>{const d=h.key.path;return!!n.isPrefixOf(d)&&(d.length===i&&(u=u.add(h.Yr)),!0)}),l),Re.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((n=>{const i=this.Xr(n);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){kt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Re.forEach(t.mutations,(i=>{const o=new Ri(i.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new Ri(t,0),i=this.Zr.firstAfterOrEqual(n);return Re.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Re.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.ri=e,this.docs=(function(){return new vn(st.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),o=i?i.size:0,l=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Re.resolve(n?n.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let n=gs();return t.forEach((i=>{const o=this.docs.get(i);n=n.insert(i,o?o.document.mutableCopy():Fn.newInvalidDocument(i))})),Re.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let o=gs();const l=t.path,u=new st(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:d,value:{document:g}}=h.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||v5(T_(g),n)<=0||(i.has(g.key)||Wf(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return Re.resolve(o)}getAllFromCollectionGroup(e,t,n,i){xt(9500)}ii(e,t){return Re.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new BR(this)}getSize(e){return Re.resolve(this.size)}}class BR extends D3{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)})),Re.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.persistence=e,this.si=new Pl((t=>ju(t)),Df),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.oi=0,this._i=new z5,this.targetCount=0,this.ai=Nu.ur()}forEachTarget(e,t){return this.si.forEach(((n,i)=>t(i))),Re.resolve()}getLastRemoteSnapshotVersion(e){return Re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Re.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Nu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Re.resolve()}updateTargetData(e,t){return this.Pr(t),Re.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Re.resolve()}removeTargets(e,t,n){let i=0;const o=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=t&&n.get(u.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Re.waitFor(o).next((()=>i))}getTargetCount(e){return Re.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Re.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Re.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((l=>{o.push(i.markPotentiallyOrphaned(e,l))})),Re.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Re.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Re.resolve(n)}containsKey(e,t){return Re.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ds(0),this.li=!1,this.li=!0,this.hi=new RR,this.referenceDelegate=e(this),this.Pi=new LR(this),this.indexManager=new vR,this.remoteDocumentCache=(function(i){return new NR(i)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new j3(t),this.Ii=new ER(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new PR(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Ze("MemoryPersistence","Starting transaction:",e);const i=new FR(this.ci.next());return this.referenceDelegate.Ei(),n(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,t){return Re.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class FR extends C_{constructor(e){super(),this.currentSequenceNumber=e}}class g0{constructor(e){this.persistence=e,this.Ri=new z5,this.Vi=null}static mi(e){return new g0(e)}get fi(){if(this.Vi)return this.Vi;throw xt(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Re.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Re.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Re.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Re.forEach(this.fi,(n=>{const i=st.fromPath(n);return this.gi(e,i).next((o=>{o||t.removeEntry(i,Pt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Re.or([()=>Re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Dm{constructor(e,t){this.persistence=e,this.pi=new Pl((n=>po(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=M3(this,t)}static mi(e,t){return new Dm(e,t)}Ei(){}di(e){return Re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((i=>n+i))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return Re.forEach(this.pi,((n,i)=>this.br(e,n,i).next((o=>o?Re.resolve():t(i)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(l=>this.br(e,l,t).next((u=>{u||(n++,o.removeEntry(l,Pt.min()))})))).next((()=>o.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Re.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Re.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Re.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Re.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=cm(e.data.value)),t}br(e,t,n){return Re.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return Re.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.serializer=e}k(e,t,n,i){const o=new t0("createOrUpgrade",t);n<1&&i>=1&&((function(h){h.createObjectStore(Mf)})(e),(function(h){h.createObjectStore(vf,{keyPath:K7}),h.createObjectStore(ha,{keyPath:kv,autoIncrement:!0}).createIndex(pu,Iv,{unique:!0}),h.createObjectStore(Od)})(e),yb(e),(function(h){h.createObjectStore(su)})(e));let l=Re.resolve();return n<3&&i>=3&&(n!==0&&((function(h){h.deleteObjectStore(Dd),h.deleteObjectStore(Md),h.deleteObjectStore(yu)})(e),yb(e)),l=l.next((()=>(function(h){const d=h.store(yu),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pt.min().toTimestamp(),targetCount:0};return d.put(Pm,g)})(o)))),n<4&&i>=4&&(n!==0&&(l=l.next((()=>(function(h,d){return d.store(ha).J().next((b=>{h.deleteObjectStore(ha),h.createObjectStore(ha,{keyPath:kv,autoIncrement:!0}).createIndex(pu,Iv,{unique:!0});const S=d.store(ha),x=b.map((B=>S.put(B)));return Re.waitFor(x)}))})(e,o)))),l=l.next((()=>{(function(h){h.createObjectStore(Wd,{keyPath:nj})})(e)}))),n<5&&i>=5&&(l=l.next((()=>this.yi(o)))),n<6&&i>=6&&(l=l.next((()=>((function(h){h.createObjectStore(bf)})(e),this.wi(o))))),n<7&&i>=7&&(l=l.next((()=>this.Si(o)))),n<8&&i>=8&&(l=l.next((()=>this.bi(e,o)))),n<9&&i>=9&&(l=l.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&i>=10&&(l=l.next((()=>this.Di(o)))),n<11&&i>=11&&(l=l.next((()=>{(function(h){h.createObjectStore(n0,{keyPath:ij})})(e),(function(h){h.createObjectStore(i0,{keyPath:oj})})(e)}))),n<12&&i>=12&&(l=l.next((()=>{(function(h){const d=h.createObjectStore(o0,{keyPath:hj});d.createIndex(k1,fj,{unique:!1}),d.createIndex(N_,pj,{unique:!1})})(e)}))),n<13&&i>=13&&(l=l.next((()=>(function(h){const d=h.createObjectStore(Rm,{keyPath:Y7});d.createIndex(am,Q7),d.createIndex(E_,X7)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(su)))),n<14&&i>=14&&(l=l.next((()=>this.Fi(e,o)))),n<15&&i>=15&&(l=l.next((()=>(function(h){h.createObjectStore(S5,{keyPath:sj,autoIncrement:!0}).createIndex(C1,aj,{unique:!1}),h.createObjectStore(rf,{keyPath:lj}).createIndex(R_,cj,{unique:!1}),h.createObjectStore(nf,{keyPath:uj}).createIndex(P_,dj,{unique:!1})})(e)))),n<16&&i>=16&&(l=l.next((()=>{t.objectStore(rf).clear()})).next((()=>{t.objectStore(nf).clear()}))),n<17&&i>=17&&(l=l.next((()=>{(function(h){h.createObjectStore(_5,{keyPath:mj})})(e)}))),n<18&&i>=18&&_S()&&(l=l.next((()=>{t.objectStore(rf).clear()})).next((()=>{t.objectStore(nf).clear()}))),l}wi(e){let t=0;return e.store(su).ee(((n,i)=>{t+=Mm(i)})).next((()=>{const n={byteSize:t};return e.store(bf).put(A1,n)}))}yi(e){const t=e.store(vf),n=e.store(ha);return t.J().next((i=>Re.forEach(i,(o=>{const l=IDBKeyRange.bound([o.userId,gu],[o.userId,o.lastAcknowledgedBatchId]);return n.J(pu,l).next((u=>Re.forEach(u,(h=>{kt(h.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:h.batchId});const d=cu(this.serializer,h);return F3(e,o.userId,d).next((()=>{}))}))))}))))}Si(e){const t=e.store(Dd),n=e.store(su);return e.store(yu).get(Pm).next((i=>{const o=[];return n.ee(((l,u)=>{const h=new Nr(l),d=(function(b){return[0,po(b)]})(h);o.push(t.get(d).next((g=>g?Re.resolve():(b=>t.put({targetId:0,path:po(b),sequenceNumber:i.highestListenSequenceNumber}))(h))))})).next((()=>Re.waitFor(o)))}))}bi(e,t){e.createObjectStore(wf,{keyPath:rj});const n=t.store(wf),i=new F5,o=l=>{if(i.add(l)){const u=l.lastSegment(),h=l.popLast();return n.put({collectionId:u,parent:po(h)})}};return t.store(su).ee({X:!0},((l,u)=>{const h=new Nr(l);return o(h.popLast())})).next((()=>t.store(Od).ee({X:!0},(([l,u,h],d)=>{const g=Wa(u);return o(g.popLast())}))))}Di(e){const t=e.store(Md);return t.ee(((n,i)=>{const o=Kh(i),l=R3(this.serializer,o);return t.put(l)}))}Ci(e,t){const n=t.store(su),i=[];return n.ee(((o,l)=>{const u=t.store(Rm),h=(function(b){return b.document?new st(Nr.fromString(b.document.name).popFirst(5)):b.noDocument?st.fromSegments(b.noDocument.path):b.unknownDocument?st.fromSegments(b.unknownDocument.path):xt(36783)})(l).path.toArray(),d={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(u.put(d))})).next((()=>Re.waitFor(i)))}Fi(e,t){const n=t.store(ha),i=W3(this.serializer),o=new V5(g0.mi,this.serializer.yt);return n.J().next((l=>{const u=new Map;return l.forEach((h=>{let d=u.get(h.userId)??ur();cu(this.serializer,h).keys().forEach((g=>d=d.add(g))),u.set(h.userId,d)})),Re.forEach(u,((h,d)=>{const g=new Ui(d),b=p0.wt(this.serializer,g),S=o.getIndexManager(g),x=m0.wt(g,this.serializer,S,o.referenceDelegate);return new $3(i,x,b,S).recalculateAndSaveOverlaysForDocumentKeys(new I1(t,Ds.ce),h).next()}))}))}}function yb(r){r.createObjectStore(Dd,{keyPath:ej}).createIndex(w5,tj,{unique:!0}),r.createObjectStore(Md,{keyPath:"targetId"}).createIndex(j_,Z7,{unique:!0}),r.createObjectStore(yu)}const uc="IndexedDbPersistence",Hg=18e5,Gg=5e3,Kg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",VR="main";class O5{constructor(e,t,n,i,o,l,u,h,d,g,b=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=o,this.window=l,this.document=u,this.xi=d,this.Oi=g,this.Ni=b,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=S=>Promise.resolve(),!O5.v())throw new it($e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AR(this,i),this.$i=t+VR,this.serializer=new j3(h),this.Ui=new Sc(this.$i,this.Ni,new zR(this.serializer)),this.hi=new fR,this.Pi=new wR(this.referenceDelegate,this.serializer),this.remoteDocumentCache=W3(this.serializer),this.Ii=new hR,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Io(uc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new it($e.FAILED_PRECONDITION,Kg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Ds(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>qp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Nc(e))return Ze(uc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ze(uc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Dh(e).get(pd).next((t=>Re.resolve(this.es(t))))}ts(e){return qp(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Hg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=mi(t,Wd);return n.J().next((i=>{const o=this.ss(i,Hg),l=i.filter((u=>o.indexOf(u)===-1));return Re.forEach(l,(u=>n.delete(u.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Re.resolve(!0):Dh(e).get(pd).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Gg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new it($e.FAILED_PRECONDITION,Kg);return!1}}return!(!this.networkEnabled||!this.inForeground)||qp(e).J().next((n=>this.ss(n,Gg).find((i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(o||l&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Ze(uc,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Mf,Wd],(e=>{const t=new I1(e,Ds.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((n=>this.rs(n.updateTimeMs,t)&&!this.us(n.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>qp(e).J().next((t=>this.ss(t,Hg).map((n=>n.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return m0.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bR(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return p0.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){Ze(uc,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",o=(function(h){return h===18?xj:h===17?z_:h===16?yj:h===15?T5:h===14?F_:h===13?L_:h===12?gj:h===11?B_:void xt(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,i,o,(u=>(l=new I1(u,this.ci?this.ci.next():Ds.ce),t==="readwrite-primary"?this.Hi(l).next((h=>!!h||this.Yi(l))).next((h=>{if(!h)throw Io(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new it($e.FAILED_PRECONDITION,A_);return n(l)})).next((h=>this.Xi(l).next((()=>h)))):this.Is(l).next((()=>n(l)))))).then((u=>(l.raiseOnCommittedEvent(),u)))}Is(e){return Dh(e).get(pd).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Gg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new it($e.FAILED_PRECONDITION,Kg)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Dh(e).put(pd,t)}static v(){return Sc.v()}Zi(e){const t=Dh(e);return t.get(pd).next((n=>this.es(n)?(Ze(uc,"Releasing primary lease."),t.delete(pd)):Re.resolve()))}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Io(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;SS()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const n=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return Ze(uc,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Io(uc,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Io("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Dh(r){return mi(r,Mf)}function qp(r){return mi(r,Wd)}function OR(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=i}static As(e,t){let n=ur(),i=ur();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new M5(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return SS()?8:k_(fi())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,i){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,i,n).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new MR;return this.Ss(e,t,l).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,l,u.size)}))})).next((()=>o.result))}bs(e,t,n,i){return n.documentReadCount<this.fs?(Sd()<=yr.DEBUG&&Ze("QueryEngine","SDK will not create cache indexes for query:",_d(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Re.resolve()):(Sd()<=yr.DEBUG&&Ze("QueryEngine","Query:",_d(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(Sd()<=yr.DEBUG&&Ze("QueryEngine","The SDK decides to create cache indexes for query:",_d(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ws(t))):Re.resolve())}ys(e,t){if(Dv(t))return Re.resolve(null);let n=Ws(t);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=L1(t,null,"F"),n=Ws(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((o=>{const l=ur(...o);return this.ps.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,n).next((h=>{const d=this.Ds(t,u);return this.Cs(t,d,l,h.readTime)?this.ys(e,L1(t,null,"F")):this.vs(e,d,t,h)}))))})))))}ws(e,t,n,i){return Dv(t)||i.isEqual(Pt.min())?Re.resolve(null):this.ps.getDocuments(e,n).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,n,i)?Re.resolve(null):(Sd()<=yr.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_d(t)),this.vs(e,l,t,D7(i,gf)).next((u=>u)))}))}Ds(e,t){let n=new Yr(n3(e));return t.forEach(((i,o)=>{Wf(e,o)&&(n=n.add(o))})),n}Cs(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,n){return Sd()<=yr.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",_d(t)),this.ps.getDocumentsMatchingQuery(e,t,vs.min(),n)}vs(e,t,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5="LocalStore",DR=3e8;class WR{constructor(e,t,n,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new vn(Zt),this.xs=new Pl((o=>ju(o)),Df),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function q3(r,e,t,n){return new WR(r,e,t,n)}async function H3(r,e){const t=er(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next((o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((o=>{const l=[],u=[];let h=ur();for(const d of i){l.push(d.batchId);for(const g of d.mutations)h=h.add(g.key)}for(const d of o){u.push(d.batchId);for(const g of d.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(n,h).next((d=>({Ls:d,removedBatchIds:l,addedBatchIds:u})))}))}))}function $R(r,e){const t=er(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,h,d,g){const b=d.batch,S=b.keys();let x=Re.resolve();return S.forEach((B=>{x=x.next((()=>g.getEntry(h,B))).next((E=>{const L=d.docVersions.get(B);kt(L!==null,48541),E.version.compareTo(L)<0&&(b.applyToRemoteDocument(E,d),E.isValidDocument()&&(E.setReadTime(d.commitVersion),g.addEntry(E)))}))})),x.next((()=>u.mutationQueue.removeMutationBatch(h,b)))})(t,n,e,o).next((()=>o.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(u){let h=ur();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(h=h.add(u.batch.mutations[d].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(n,i)))}))}function G3(r){const e=er(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function UR(r,e){const t=er(r),n=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const u=[];e.targetChanges.forEach(((g,b)=>{const S=i.get(b);if(!S)return;u.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,b))));let x=S.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(b)!==null?x=x.withResumeToken(ai.EMPTY_BYTE_STRING,Pt.min()).withLastLimboFreeSnapshotVersion(Pt.min()):g.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(g.resumeToken,n)),i=i.insert(b,x),(function(E,L,A){return E.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=DR?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0})(S,x,g)&&u.push(t.Pi.updateTargetData(o,x))}));let h=gs(),d=ur();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),u.push(qR(o,l,e.documentUpdates).next((g=>{h=g.ks,d=g.qs}))),!n.isEqual(Pt.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((b=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n)));u.push(g)}return Re.waitFor(u).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,h,d))).next((()=>h))})).then((o=>(t.Ms=i,o)))}function qR(r,e,t){let n=ur(),i=ur();return t.forEach((o=>n=n.add(o))),e.getEntries(r,n).next((o=>{let l=gs();return t.forEach(((u,h)=>{const d=o.get(u);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(Pt.min())?(e.removeEntry(u,h.readTime),l=l.insert(u,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),l=l.insert(u,h)):Ze(D5,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",h.version)})),{ks:l,qs:i}}))}function HR(r,e){const t=er(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=gu),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function GR(r,e){const t=er(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return t.Pi.getTargetData(n,e).next((o=>o?(i=o,Re.resolve(i)):t.Pi.allocateTargetId(n).next((l=>(i=new Tl(e,l,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=t.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function $1(r,e,t){const n=er(r),i=n.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",o,(l=>n.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Nc(l))throw l;Ze(D5,`Failed to update sequence numbers for target ${e}: ${l}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function xb(r,e,t){const n=er(r);let i=Pt.min(),o=ur();return n.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,d,g){const b=er(h),S=b.xs.get(g);return S!==void 0?Re.resolve(b.Ms.get(S)):b.Pi.getTargetData(d,g)})(n,l,Ws(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(l,u.targetId).next((h=>{o=h}))})).next((()=>n.Fs.getDocumentsMatchingQuery(l,e,t?i:Pt.min(),t?o:ur()))).next((u=>(KR(n,Nj(e),u),{documents:u,Qs:o})))))}function KR(r,e,t){let n=r.Os.get(e)||Pt.min();t.forEach(((i,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)})),r.Os.set(e,n)}class vb{constructor(){this.activeTargetIds=Oj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class K3{constructor(){this.Mo=new vb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vb,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="ConnectivityMonitor";class wb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ze(bb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ze(bb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hp=null;function U1(){return Hp===null?Hp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hp++,"0x"+Hp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="RestConnection",YR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===Nm?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,t,n,i,o){const l=U1(),u=this.zo(e,t.toUriEncodedString());Ze(Jg,`Sending RPC '${e}' ${l}:`,u,n);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,i,o);const{host:d}=new URL(u),g=th(d);return this.Jo(e,u,h,n,g).then((b=>(Ze(Jg,`Received RPC '${e}' ${l}: `,b),b)),(b=>{throw Iu(Jg,`RPC '${e}' ${l} failed with error: `,b,"url: ",u,"request:",n),b}))}Ho(e,t,n,i,o,l){return this.Go(e,t,n,i,o)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ih})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),n&&n.headers.forEach(((i,o)=>e[o]=i))}zo(e,t){const n=YR[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo="WebChannelConnection";class ZR extends QR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,i,o){const l=U1();return new Promise(((u,h)=>{const d=new p_;d.setWithCredentials(!0),d.listenOnce(m_.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case im.NO_ERROR:const b=d.getResponseJson();Ze(uo,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(b)),u(b);break;case im.TIMEOUT:Ze(uo,`RPC '${e}' ${l} timed out`),h(new it($e.DEADLINE_EXCEEDED,"Request time out"));break;case im.HTTP_ERROR:const S=d.getStatus();if(Ze(uo,`RPC '${e}' ${l} failed with status:`,S,"response text:",d.getResponseText()),S>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const B=x==null?void 0:x.error;if(B&&B.status&&B.message){const E=(function(A){const O=A.toLowerCase().replace(/_/g,"-");return Object.values($e).indexOf(O)>=0?O:$e.UNKNOWN})(B.status);h(new it(E,B.message))}else h(new it($e.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new it($e.UNAVAILABLE,"Connection failed."));break;default:xt(9055,{l_:e,streamId:l,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Ze(uo,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(i);Ze(uo,`RPC '${e}' ${l} sending request:`,i),d.send(t,"POST",g,n,15)}))}T_(e,t,n){const i=U1(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=x_(),u=y_(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,n),h.encodeInitMessageHeaders=!0;const g=o.join("");Ze(uo,`Creating RPC '${e}' stream ${i}: ${g}`,h);const b=l.createWebChannel(g,h);this.I_(b);let S=!1,x=!1;const B=new XR({Yo:L=>{x?Ze(uo,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(S||(Ze(uo,`Opening RPC '${e}' stream ${i} transport.`),b.open(),S=!0),Ze(uo,`RPC '${e}' stream ${i} sending:`,L),b.send(L))},Zo:()=>b.close()}),E=(L,A,O)=>{L.listen(A,($=>{try{O($)}catch(F){setTimeout((()=>{throw F}),0)}}))};return E(b,qh.EventType.OPEN,(()=>{x||(Ze(uo,`RPC '${e}' stream ${i} transport opened.`),B.o_())})),E(b,qh.EventType.CLOSE,(()=>{x||(x=!0,Ze(uo,`RPC '${e}' stream ${i} transport closed`),B.a_(),this.E_(b))})),E(b,qh.EventType.ERROR,(L=>{x||(x=!0,Iu(uo,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),B.a_(new it($e.UNAVAILABLE,"The operation could not be completed")))})),E(b,qh.EventType.MESSAGE,(L=>{var A;if(!x){const O=L.data[0];kt(!!O,16349);const $=O,F=($==null?void 0:$.error)||((A=$[0])==null?void 0:A.error);if(F){Ze(uo,`RPC '${e}' stream ${i} received error:`,F);const ie=F.status;let ue=(function(I){const M=ni[I];if(M!==void 0)return g3(M)})(ie),V=F.message;ue===void 0&&(ue=$e.INTERNAL,V="Unknown error status: "+ie+" with message "+F.message),x=!0,B.a_(new it(ue,V)),b.close()}else Ze(uo,`RPC '${e}' stream ${i} received:`,O),B.u_(O)}})),E(u,g_.STAT_EVENT,(L=>{L.stat===S1.PROXY?Ze(uo,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===S1.NOPROXY&&Ze(uo,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(){return typeof window<"u"?window:null}function pm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(r){return new tR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e,t,n=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-n);i>0&&Ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="PersistentStream";class Y3{constructor(e,t,n,i,o,l,u,h){this.Mi=e,this.S_=n,this.b_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new J3(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===$e.RESOURCE_EXHAUSTED?(Io(t.toString()),Io("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===$e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.D_===t&&this.G_(n,i)}),(n=>{e((()=>{const i=new it($e.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{n((()=>this.z_(i)))})),this.stream.onMessage((i=>{n((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ze(Sb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ze(Sb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class tP extends Y3{constructor(e,t,n,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=iR(this.serializer,e),n=(function(o){if(!("targetChange"in o))return Pt.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Pt.min():l.readTime?jo(l.readTime):Pt.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=V1(this.serializer),t.addTarget=(function(o,l){let u;const h=l.target;if(u=Bm(h)?{documents:T3(o,h)}:{query:A3(o,h).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=v3(o,l.resumeToken);const d=F1(o,l.expectedCount);d!==null&&(u.expectedCount=d)}else if(l.snapshotVersion.compareTo(Pt.min())>0){u.readTime=Yd(o,l.snapshotVersion.toTimestamp());const d=F1(o,l.expectedCount);d!==null&&(u.expectedCount=d)}return u})(this.serializer,e);const n=sR(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=V1(this.serializer),t.removeTarget=e,this.q_(t)}}class rP extends Y3{constructor(e,t,n,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return kt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,kt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){kt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=oR(e.writeResults,e.commitTime),n=jo(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=V1(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>zm(this.serializer,n)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{}class iP extends nP{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new it($e.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,z1(t,n),i,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new it($e.UNKNOWN,o.toString())}))}Ho(e,t,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(e,z1(t,n),i,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new it($e.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class oP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Io(t),this.aa=!1):Ze("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu="RemoteStore";class sP{constructor(e,t,n,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{n.enqueueAndForget((async()=>{Du(this)&&(Ze(Bu,"Restarting streams for network reachability change."),await(async function(h){const d=er(h);d.Ea.add(4),await Uf(d),d.Ra.set("Unknown"),d.Ea.delete(4),await x0(d)})(this))}))})),this.Ra=new oP(n,i)}}async function x0(r){if(Du(r))for(const e of r.da)await e(!0)}async function Uf(r){for(const e of r.da)await e(!1)}function Q3(r,e){const t=er(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),q5(t)?U5(t):ah(t).O_()&&$5(t,e))}function W5(r,e){const t=er(r),n=ah(t);t.Ia.delete(e),n.O_()&&X3(t,e),t.Ia.size===0&&(n.O_()?n.L_():Du(t)&&t.Ra.set("Unknown"))}function $5(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ah(r).Y_(e)}function X3(r,e){r.Va.Ue(e),ah(r).Z_(e)}function U5(r){r.Va=new Qj({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),ah(r).start(),r.Ra.ua()}function q5(r){return Du(r)&&!ah(r).x_()&&r.Ia.size>0}function Du(r){return er(r).Ea.size===0}function Z3(r){r.Va=void 0}async function aP(r){r.Ra.set("Online")}async function lP(r){r.Ia.forEach(((e,t)=>{$5(r,e)}))}async function cP(r,e){Z3(r),q5(r)?(r.Ra.ha(e),U5(r)):r.Ra.set("Unknown")}async function uP(r,e,t){if(r.Ra.set("Online"),e instanceof x3&&e.state===2&&e.cause)try{await(async function(i,o){const l=o.cause;for(const u of o.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,l),i.Ia.delete(u),i.Va.removeTarget(u))})(r,e)}catch(n){Ze(Bu,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Wm(r,n)}else if(e instanceof hm?r.Va.Ze(e):e instanceof y3?r.Va.st(e):r.Va.tt(e),!t.isEqual(Pt.min()))try{const n=await G3(r.localStore);t.compareTo(n)>=0&&await(function(o,l){const u=o.Va.Tt(l);return u.targetChanges.forEach(((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.Ia.get(d);g&&o.Ia.set(d,g.withResumeToken(h.resumeToken,l))}})),u.targetMismatches.forEach(((h,d)=>{const g=o.Ia.get(h);if(!g)return;o.Ia.set(h,g.withResumeToken(ai.EMPTY_BYTE_STRING,g.snapshotVersion)),X3(o,h);const b=new Tl(g.target,h,d,g.sequenceNumber);$5(o,b)})),o.remoteSyncer.applyRemoteEvent(u)})(r,t)}catch(n){Ze(Bu,"Failed to raise snapshot:",n),await Wm(r,n)}}async function Wm(r,e,t){if(!Nc(e))throw e;r.Ea.add(1),await Uf(r),r.Ra.set("Offline"),t||(t=()=>G3(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Ze(Bu,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await x0(r)}))}function e4(r,e){return e().catch((t=>Wm(r,t,e)))}async function qf(r){const e=er(r),t=Ic(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gu;for(;dP(e);)try{const i=await HR(e.localStore,n);if(i===null){e.Ta.length===0&&t.L_();break}n=i.batchId,hP(e,i)}catch(i){await Wm(e,i)}t4(e)&&r4(e)}function dP(r){return Du(r)&&r.Ta.length<10}function hP(r,e){r.Ta.push(e);const t=Ic(r);t.O_()&&t.X_&&t.ea(e.mutations)}function t4(r){return Du(r)&&!Ic(r).x_()&&r.Ta.length>0}function r4(r){Ic(r).start()}async function fP(r){Ic(r).ra()}async function pP(r){const e=Ic(r);for(const t of r.Ta)e.ea(t.mutations)}async function mP(r,e,t){const n=r.Ta.shift(),i=R5.from(n,e,t);await e4(r,(()=>r.remoteSyncer.applySuccessfulWrite(i))),await qf(r)}async function gP(r,e){e&&Ic(r).X_&&await(async function(n,i){if((function(l){return Kj(l)&&l!==$e.ABORTED})(i.code)){const o=n.Ta.shift();Ic(n).B_(),await e4(n,(()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i))),await qf(n)}})(r,e),t4(r)&&r4(r)}async function _b(r,e){const t=er(r);t.asyncQueue.verifyOperationInProgress(),Ze(Bu,"RemoteStore received new credentials");const n=Du(t);t.Ea.add(3),await Uf(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await x0(t)}async function yP(r,e){const t=er(r);e?(t.Ea.delete(2),await x0(t)):e||(t.Ea.add(2),await Uf(t),t.Ra.set("Unknown"))}function ah(r){return r.ma||(r.ma=(function(t,n,i){const o=er(t);return o.sa(),new tP(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(r.datastore,r.asyncQueue,{Xo:aP.bind(null,r),t_:lP.bind(null,r),r_:cP.bind(null,r),H_:uP.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),q5(r)?U5(r):r.Ra.set("Unknown")):(await r.ma.stop(),Z3(r))}))),r.ma}function Ic(r){return r.fa||(r.fa=(function(t,n,i){const o=er(t);return o.sa(),new rP(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:fP.bind(null,r),r_:gP.bind(null,r),ta:pP.bind(null,r),na:mP.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await qf(r)):(await r.fa.stop(),r.Ta.length>0&&(Ze(Bu,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,t,n,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=o,this.deferred=new Cl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,o){const l=Date.now()+n,u=new H5(e,t,l,i,o);return u.start(n),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new it($e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function G5(r,e){if(Io("AsyncQueue",`${e}: ${r}`),Nc(r))return new it($e.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{static emptySet(e){return new Fd(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||st.comparator(t.key,n.key):(t,n)=>st.comparator(t.key,n.key),this.keyedMap=Hh(),this.sortedSet=new vn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=n.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Fd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.ga=new vn(st.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Qd{constructor(e,t,n,i,o,l,u,h,d){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,t,n,i,o){const l=[];return t.forEach((u=>{l.push({type:0,doc:u})})),new Qd(e,t,Fd.emptySet(t),l,n,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&c0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class vP{constructor(){this.queries=Ab(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const i=er(t),o=i.queries;i.queries=Ab(),o.forEach(((l,u)=>{for(const h of u.Sa)h.onError(n)}))})(this,new it($e.ABORTED,"Firestore shutting down"))}}function Ab(){return new Pl((r=>r3(r)),c0)}async function n4(r,e){const t=er(r);let n=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(n=2):(o=new xP,n=e.Da()?0:1);try{switch(n){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const u=G5(l,`Initialization of query '${_d(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&K5(t)}async function i4(r,e){const t=er(r),n=e.query;let i=3;const o=t.queries.get(n);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function bP(r,e){const t=er(r);let n=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const u of l.Sa)u.Fa(i)&&(n=!0);l.wa=i}}n&&K5(t)}function wP(r,e,t){const n=er(r),i=n.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);n.queries.delete(e)}function K5(r){r.Ca.forEach((e=>{e.next()}))}var q1,Cb;(Cb=q1||(q1={})).Ma="default",Cb.Cache="cache";class o4{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Qd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Qd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==q1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.key=e}}class a4{constructor(e){this.key=e}}class SP{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ur(),this.mutatedKeys=ur(),this.eu=n3(e),this.tu=new Fd(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Tb,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,u=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((g,b)=>{const S=i.get(g),x=Wf(this.query,b)?b:null,B=!!S&&this.mutatedKeys.has(S.key),E=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let L=!1;S&&x?S.data.isEqual(x.data)?B!==E&&(n.track({type:3,doc:x}),L=!0):this.su(S,x)||(n.track({type:2,doc:x}),L=!0,(h&&this.eu(x,h)>0||d&&this.eu(x,d)<0)&&(u=!0)):!S&&x?(n.track({type:0,doc:x}),L=!0):S&&!x&&(n.track({type:1,doc:S}),L=!0,(h||d)&&(u=!0)),L&&(x?(l=l.add(x),o=E?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),n.track({type:1,doc:g})}return{tu:l,iu:n,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,b)=>(function(x,B){const E=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xt(20277,{Rt:L})}};return E(x)-E(B)})(g.type,b.type)||this.eu(g.doc,b.doc))),this.ou(n),i=i??!1;const u=t&&!i?this._u():[],h=this.Xa.size===0&&this.current&&!i?1:0,d=h!==this.Za;return this.Za=h,l.length!==0||d?{snapshot:new Qd(this.query,e.tu,o,l,e.mutatedKeys,h===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Tb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ur(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new a4(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new s4(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=ur();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Qd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const J5="SyncEngine";class _P{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class TP{constructor(e){this.key=e,this.hu=!1}}class AP{constructor(e,t,n,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Pl((u=>r3(u)),c0),this.Iu=new Map,this.Eu=new Set,this.du=new vn(st.comparator),this.Au=new Map,this.Ru=new z5,this.Vu={},this.mu=new Map,this.fu=Nu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function CP(r,e,t=!0){const n=f4(r);let i;const o=n.Tu.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await l4(n,e,t,!0),i}async function kP(r,e){const t=f4(r);await l4(t,e,!0,!1)}async function l4(r,e,t,n){const i=await GR(r.localStore,Ws(e)),o=i.targetId,l=r.sharedClientState.addLocalQueryTarget(o,t);let u;return n&&(u=await IP(r,e,o,l==="current",i.resumeToken)),r.isPrimaryClient&&t&&Q3(r.remoteStore,i),u}async function IP(r,e,t,n,i){r.pu=(b,S,x)=>(async function(E,L,A,O){let $=L.view.ru(A);$.Cs&&($=await xb(E.localStore,L.query,!1).then((({documents:V})=>L.view.ru(V,$))));const F=O&&O.targetChanges.get(L.targetId),ie=O&&O.targetMismatches.get(L.targetId)!=null,ue=L.view.applyChanges($,E.isPrimaryClient,F,ie);return Ib(E,L.targetId,ue.au),ue.snapshot})(r,b,S,x);const o=await xb(r.localStore,e,!0),l=new SP(e,o.Qs),u=l.ru(o.documents),h=$f.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),d=l.applyChanges(u,r.isPrimaryClient,h);Ib(r,t,d.au);const g=new _P(e,t,l);return r.Tu.set(e,g),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),d.snapshot}async function EP(r,e,t){const n=er(r),i=n.Tu.get(e),o=n.Iu.get(i.targetId);if(o.length>1)return n.Iu.set(i.targetId,o.filter((l=>!c0(l,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await $1(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),t&&W5(n.remoteStore,i.targetId),H1(n,i.targetId)})).catch(Mu)):(H1(n,i.targetId),await $1(n.localStore,i.targetId,!0))}async function jP(r,e){const t=er(r),n=t.Tu.get(e),i=t.Iu.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),W5(t.remoteStore,n.targetId))}async function RP(r,e,t){const n=p4(r);try{const i=await(function(l,u){const h=er(l),d=Kr.now(),g=u.reduce(((x,B)=>x.add(B.key)),ur());let b,S;return h.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let B=gs(),E=ur();return h.Ns.getEntries(x,g).next((L=>{B=L,B.forEach(((A,O)=>{O.isValidDocument()||(E=E.add(A))}))})).next((()=>h.localDocuments.getOverlayedDocuments(x,B))).next((L=>{b=L;const A=[];for(const O of u){const $=Hj(O,b.get(O.key).overlayedDocument);$!=null&&A.push(new Nl(O.key,$,G_($.value.mapValue),Eo.exists(!0)))}return h.mutationQueue.addMutationBatch(x,d,A,u)})).next((L=>{S=L;const A=L.applyToLocalDocumentSet(b,E);return h.documentOverlayCache.saveOverlays(x,L.batchId,A)}))})).then((()=>({batchId:S.batchId,changes:o3(b)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(l,u,h){let d=l.Vu[l.currentUser.toKey()];d||(d=new vn(Zt)),d=d.insert(u,h),l.Vu[l.currentUser.toKey()]=d})(n,i.batchId,t),await Hf(n,i.changes),await qf(n.remoteStore)}catch(i){const o=G5(i,"Failed to persist write");t.reject(o)}}async function c4(r,e){const t=er(r);try{const n=await UR(t.localStore,e);e.targetChanges.forEach(((i,o)=>{const l=t.Au.get(o);l&&(kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?kt(l.hu,14607):i.removedDocuments.size>0&&(kt(l.hu,42227),l.hu=!1))})),await Hf(t,n,e)}catch(n){await Mu(n)}}function kb(r,e,t){const n=er(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.Tu.forEach(((o,l)=>{const u=l.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(l,u){const h=er(l);h.onlineState=u;let d=!1;h.queries.forEach(((g,b)=>{for(const S of b.Sa)S.va(u)&&(d=!0)})),d&&K5(h)})(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function PP(r,e,t){const n=er(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Au.get(e),o=i&&i.key;if(o){let l=new vn(st.comparator);l=l.insert(o,Fn.newNoDocument(o,Pt.min()));const u=ur().add(o),h=new f0(Pt.min(),new Map,new vn(Zt),l,u);await c4(n,h),n.du=n.du.remove(o),n.Au.delete(e),Y5(n)}else await $1(n.localStore,e,!1).then((()=>H1(n,e,t))).catch(Mu)}async function NP(r,e){const t=er(r),n=e.batch.batchId;try{const i=await $R(t.localStore,e);d4(t,n,null),u4(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Hf(t,i)}catch(i){await Mu(i)}}async function BP(r,e,t){const n=er(r);try{const i=await(function(l,u){const h=er(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let g;return h.mutationQueue.lookupMutationBatch(d,u).next((b=>(kt(b!==null,37113),g=b.keys(),h.mutationQueue.removeMutationBatch(d,b)))).next((()=>h.mutationQueue.performConsistencyCheck(d))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(d,g,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g))).next((()=>h.localDocuments.getDocuments(d,g)))}))})(n.localStore,e);d4(n,e,t),u4(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Hf(n,i)}catch(i){await Mu(i)}}function u4(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function d4(r,e,t){const n=er(r);let i=n.Vu[n.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function H1(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||h4(r,n)}))}function h4(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(W5(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Y5(r))}function Ib(r,e,t){for(const n of t)n instanceof s4?(r.Ru.addReference(n.key,e),LP(r,n)):n instanceof a4?(Ze(J5,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||h4(r,n.key)):xt(19791,{wu:n})}function LP(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(Ze(J5,"New document in limbo: "+t),r.Eu.add(n),Y5(r))}function Y5(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new st(Nr.fromString(e)),n=r.fu.next();r.Au.set(n,new TP(t)),r.du=r.du.insert(t,n),Q3(r.remoteStore,new Tl(Ws(l0(t.path)),n,"TargetPurposeLimboResolution",Ds.ce))}}async function Hf(r,e,t){const n=er(r),i=[],o=[],l=[];n.Tu.isEmpty()||(n.Tu.forEach(((u,h)=>{l.push(n.pu(h,e,t).then((d=>{var g;if((d||t)&&n.isPrimaryClient){const b=d?!d.fromCache:(g=t==null?void 0:t.targetChanges.get(h.targetId))==null?void 0:g.current;n.sharedClientState.updateQueryState(h.targetId,b?"current":"not-current")}if(d){i.push(d);const b=M5.As(h.targetId,d);o.push(b)}})))})),await Promise.all(l),n.Pu.H_(i),await(async function(h,d){const g=er(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>Re.forEach(d,(S=>Re.forEach(S.Es,(x=>g.persistence.referenceDelegate.addReference(b,S.targetId,x))).next((()=>Re.forEach(S.ds,(x=>g.persistence.referenceDelegate.removeReference(b,S.targetId,x)))))))))}catch(b){if(!Nc(b))throw b;Ze(D5,"Failed to update sequence numbers: "+b)}for(const b of d){const S=b.targetId;if(!b.fromCache){const x=g.Ms.get(S),B=x.snapshotVersion,E=x.withLastLimboFreeSnapshotVersion(B);g.Ms=g.Ms.insert(S,E)}}})(n.localStore,o))}async function FP(r,e){const t=er(r);if(!t.currentUser.isEqual(e)){Ze(J5,"User change. New user:",e.toKey());const n=await H3(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((u=>{u.forEach((h=>{h.reject(new it($e.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Hf(t,n.Ls)}}function zP(r,e){const t=er(r),n=t.Au.get(e);if(n&&n.hu)return ur().add(n.key);{let i=ur();const o=t.Iu.get(e);if(!o)return i;for(const l of o){const u=t.Tu.get(l);i=i.unionWith(u.view.nu)}return i}}function f4(r){const e=er(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=c4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PP.bind(null,e),e.Pu.H_=bP.bind(null,e.eventManager),e.Pu.yu=wP.bind(null,e.eventManager),e}function p4(r){const e=er(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BP.bind(null,e),e}class If{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=y0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return q3(this.persistence,new U3,e.initialUser,this.serializer)}Cu(e){return new V5(g0.mi,this.serializer)}Du(e){return new K3}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}If.provider={build:()=>new If};class VP extends If{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){kt(this.persistence.referenceDelegate instanceof Dm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new O3(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ho.withCacheSize(this.cacheSizeBytes):ho.DEFAULT;return new V5((n=>Dm.mi(n,t)),this.serializer)}}class OP extends If{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await p4(this.xu.syncEngine),await qf(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return q3(this.persistence,new U3,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new O3(n,e.asyncQueue,t)}Mu(e,t){const n=new q7(t,this.persistence);return new U7(e.asyncQueue,n)}Cu(e){const t=OR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ho.withCacheSize(this.cacheSizeBytes):ho.DEFAULT;return new O5(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,eP(),pm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new K3}}class $m{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>kb(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=FP.bind(null,this.syncEngine),await yP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new vP})()}createDatastore(e){const t=y0(e.databaseInfo.databaseId),n=(function(o){return new ZR(o)})(e.databaseInfo);return(function(o,l,u,h){return new iP(o,l,u,h)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,i,o,l,u){return new sP(n,i,o,l,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>kb(this.syncEngine,t,0)),(function(){return wb.v()?new wb:new JR})())}createSyncEngine(e,t){return(function(i,o,l,u,h,d,g){const b=new AP(i,o,l,u,h,d);return g&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const o=er(i);Ze(Bu,"RemoteStore shutting down."),o.Ea.add(5),await Uf(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}$m.provider={build:()=>new $m};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Io("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec="FirestoreClient";class MP{constructor(e,t,n,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Ui.UNAUTHENTICATED,this.clientId=x5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,(async l=>{Ze(Ec,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(n,(l=>(Ze(Ec,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=G5(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Yg(r,e){r.asyncQueue.verifyOperationInProgress(),Ze(Ec,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async i=>{n.isEqual(i)||(await H3(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Eb(r,e){r.asyncQueue.verifyOperationInProgress();const t=await DP(r);Ze(Ec,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>_b(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,i)=>_b(e.remoteStore,i))),r._onlineComponents=e}async function DP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Ze(Ec,"Using user provided OfflineComponentProvider");try{await Yg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===$e.FAILED_PRECONDITION||i.code===$e.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Iu("Error using user provided cache. Falling back to memory cache: "+t),await Yg(r,new If)}}else Ze(Ec,"Using default OfflineComponentProvider"),await Yg(r,new VP(void 0));return r._offlineComponents}async function g4(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Ze(Ec,"Using user provided OnlineComponentProvider"),await Eb(r,r._uninitializedComponentsProvider._online)):(Ze(Ec,"Using default OnlineComponentProvider"),await Eb(r,new $m))),r._onlineComponents}function WP(r){return g4(r).then((e=>e.syncEngine))}async function G1(r){const e=await g4(r),t=e.eventManager;return t.onListen=CP.bind(null,e.syncEngine),t.onUnlisten=EP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jP.bind(null,e.syncEngine),t}function $P(r,e,t={}){const n=new Cl;return r.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,h,d){const g=new m4({next:S=>{g.Nu(),l.enqueueAndForget((()=>i4(o,b))),S.fromCache&&h.source==="server"?d.reject(new it($e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(S)},error:S=>d.reject(S)}),b=new o4(u,g,{includeMetadataChanges:!0,qa:!0});return n4(o,b)})(await G1(r),r.asyncQueue,e,t,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="firestore.googleapis.com",Rb=!0;class Pb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new it($e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=x4,this.ssl=Rb}else this.host=e.host,this.ssl=e.ssl??Rb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=L3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SR)throw new it($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}M7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y4(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new it($e.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new it($e.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new it($e.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class v0{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new it($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new it($e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new j7;switch(n.type){case"firstParty":return new B7(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new it($e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=jb.get(t);n&&(Ze("ComponentProvider","Removing Datastore"),jb.delete(t),n.terminate())})(this),Promise.resolve()}}function UP(r,e,t,n={}){var d;r=pa(r,v0);const i=th(e),o=r._getSettings(),l={...o,emulatorOptions:r._getEmulatorOptions()},u=`${e}:${t}`;i&&(vS(`https://${u}`),bS("Firestore",!0)),o.host!==x4&&o.host!==u&&Iu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:i,emulatorOptions:n};if(!_u(h,l)&&(r._setSettings(h),n.mockUserToken)){let g,b;if(typeof n.mockUserToken=="string")g=n.mockUserToken,b=Ui.MOCK_USER;else{g=Hk(n.mockUserToken,(d=r._app)==null?void 0:d.options.projectId);const S=n.mockUserToken.sub||n.mockUserToken.user_id;if(!S)throw new it($e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Ui(S)}r._authCredentials=new R7(new b_(g,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Lc(this.firestore,e,this._query)}}class oi{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _c(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new oi(this.firestore,e,this._key)}toJSON(){return{type:oi._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Of(t,oi._jsonSchema))return new oi(e,n||null,new st(Nr.fromString(t.referencePath)))}}oi._jsonSchemaVersion="firestore/documentReference/1.0",oi._jsonSchema={type:ii("string",oi._jsonSchemaVersion),referencePath:ii("string")};class _c extends Lc{constructor(e,t,n){super(e,t,l0(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new oi(this.firestore,null,new st(e))}withConverter(e){return new _c(this.firestore,e,this._path)}}function lh(r,e,...t){if(r=pi(r),S_("collection","path",e),r instanceof v0){const n=Nr.fromString(e,...t);return Sv(n),new _c(r,null,n)}{if(!(r instanceof oi||r instanceof _c))throw new it($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Nr.fromString(e,...t));return Sv(n),new _c(r.firestore,null,n)}}function ch(r,e,...t){if(r=pi(r),arguments.length===1&&(e=x5.newId()),S_("doc","path",e),r instanceof v0){const n=Nr.fromString(e,...t);return wv(n),new oi(r,null,new st(n))}{if(!(r instanceof oi||r instanceof _c))throw new it($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Nr.fromString(e,...t));return wv(n),new oi(r.firestore,r instanceof _c?r.converter:null,new st(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="AsyncQueue";class Bb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new J3(this,"async_queue_retry"),this._c=()=>{const n=pm();n&&Ze(Nb,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=pm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=pm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Cl;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Nc(e))throw e;Ze(Nb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Io("INTERNAL UNHANDLED ERROR: ",Lb(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=H5.createAndSchedule(this,e,t,n,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&xt(47125,{Pc:Lb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Lb(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of n)if(o in i&&typeof i[o]=="function")return!0;return!1})(r,["next","error","complete"])}class jc extends v0{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new Bb,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Bb(e),this._firestoreClient=void 0,await e}}}function qP(r,e){const t=typeof r=="object"?r:IS(),n=typeof r=="string"?r:Nm,i=l5(t,"firestore").getImmediate({identifier:n});if(!i._initialized){const o=Uk("firestore");o&&UP(i,...o)}return i}function Q5(r){if(r._terminated)throw new it($e.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||v4(r),r._firestoreClient}function v4(r){var n,i,o;const e=r._freezeSettings(),t=(function(u,h,d,g){return new bj(u,h,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,y4(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(r._databaseId,((n=r._app)==null?void 0:n.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new MP(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}})(r._componentsProvider))}function HP(r,e){Iu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return GP(r,$m.provider,{build:n=>new OP(n,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function GP(r,e,t){if((r=pa(r,jc))._firestoreClient||r._terminated)throw new it($e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new it($e.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},v4(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ms(ai.fromBase64String(e))}catch(t){throw new it($e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ms(ai.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ms._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Of(e,Ms._jsonSchema))return Ms.fromBase64String(e.bytes)}}Ms._jsonSchemaVersion="firestore/bytes/1.0",Ms._jsonSchema={type:ii("string",Ms._jsonSchemaVersion),bytes:ii("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new it($e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new it($e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new it($e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Zt(this._lat,e._lat)||Zt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ha._jsonSchemaVersion}}static fromJSON(e){if(Of(e,Ha._jsonSchema))return new Ha(e.latitude,e.longitude)}}Ha._jsonSchemaVersion="firestore/geoPoint/1.0",Ha._jsonSchema={type:ii("string",Ha._jsonSchemaVersion),latitude:ii("number"),longitude:ii("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ga._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Of(e,Ga._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ga(e.vectorValues);throw new it($e.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ga._jsonSchemaVersion="firestore/vectorValue/1.0",Ga._jsonSchema={type:ii("string",Ga._jsonSchemaVersion),vectorValues:ii("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=/^__.*__$/;class JP{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Nl(e,this.data,this.fieldMask,t,this.fieldTransforms):new sh(e,this.data,t,this.fieldTransforms)}}class b4{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Nl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function w4(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xt(40011,{Ac:r})}}class X5{constructor(e,t,n,i,o,l){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new X5({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Um(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(w4(this.Ac)&&KP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class YP{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||y0(e)}Cc(e,t,n,i=!1){return new X5({Ac:e,methodName:t,Dc:n,path:In.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Z5(r){const e=r._freezeSettings(),t=y0(r._databaseId);return new YP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function QP(r,e,t,n,i,o={}){const l=r.Cc(o.merge||o.mergeFields?2:0,e,t,i);t2("Data must be an object, but it was:",l,n);const u=S4(n,l);let h,d;if(o.merge)h=new Ko(l.fieldMask),d=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const b of o.mergeFields){const S=K1(e,b,t);if(!l.contains(S))throw new it($e.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);T4(g,S)||g.push(S)}h=new Ko(g),d=l.fieldTransforms.filter((b=>h.covers(b.field)))}else h=null,d=l.fieldTransforms;return new JP(new fo(u),h,d)}class S0 extends w0{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof S0}}class e2 extends w0{_toFieldTransform(e){return new h3(e.path,new Gd)}isEqual(e){return e instanceof e2}}function XP(r,e,t,n){const i=r.Cc(1,e,t);t2("Data must be an object, but it was:",i,n);const o=[],l=fo.empty();Bc(n,((h,d)=>{const g=r2(e,h,t);d=pi(d);const b=i.yc(g);if(d instanceof S0)o.push(g);else{const S=Gf(d,b);S!=null&&(o.push(g),l.set(g,S))}}));const u=new Ko(o);return new b4(l,u,i.fieldTransforms)}function ZP(r,e,t,n,i,o){const l=r.Cc(1,e,t),u=[K1(e,n,t)],h=[i];if(o.length%2!=0)throw new it($e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<o.length;S+=2)u.push(K1(e,o[S])),h.push(o[S+1]);const d=[],g=fo.empty();for(let S=u.length-1;S>=0;--S)if(!T4(d,u[S])){const x=u[S];let B=h[S];B=pi(B);const E=l.yc(x);if(B instanceof S0)d.push(x);else{const L=Gf(B,E);L!=null&&(d.push(x),g.set(x,L))}}const b=new Ko(d);return new b4(g,b,l.fieldTransforms)}function eN(r,e,t,n=!1){return Gf(t,r.Cc(n?4:3,e))}function Gf(r,e){if(_4(r=pi(r)))return t2("Unsupported field value:",e,r),S4(r,e);if(r instanceof w0)return(function(n,i){if(!w4(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,i){const o=[];let l=0;for(const u of n){let h=Gf(u,i.wc(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}})(r,e)}return(function(n,i){if((n=pi(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Mj(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=Kr.fromDate(n);return{timestampValue:Yd(i.serializer,o)}}if(n instanceof Kr){const o=new Kr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Yd(i.serializer,o)}}if(n instanceof Ha)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ms)return{bytesValue:v3(i.serializer,n._byteString)};if(n instanceof oi){const o=i.databaseId,l=n.firestore._databaseId;if(!l.isEqual(o))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:B5(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Ga)return(function(l,u){return{mapValue:{fields:{[C5]:{stringValue:k5},[$d]:{arrayValue:{values:l.toArray().map((d=>{if(typeof d!="number")throw u.Sc("VectorValues must only contain numeric values.");return E5(u.serializer,d)}))}}}}}})(n,i);throw i.Sc(`Unsupported field value: ${e0(n)}`)})(r,e)}function S4(r,e){const t={};return V_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bc(r,((n,i)=>{const o=Gf(i,e.mc(n));o!=null&&(t[n]=o)})),{mapValue:{fields:t}}}function _4(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Kr||r instanceof Ha||r instanceof Ms||r instanceof oi||r instanceof w0||r instanceof Ga)}function t2(r,e,t){if(!_4(t)||!__(t)){const n=e0(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function K1(r,e,t){if((e=pi(e))instanceof b0)return e._internalPath;if(typeof e=="string")return r2(r,e);throw Um("Field path arguments must be of type string or ",r,!1,void 0,t)}const tN=new RegExp("[~\\*/\\[\\]]");function r2(r,e,t){if(e.search(tN)>=0)throw Um(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new b0(...e.split("."))._internalPath}catch{throw Um(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Um(r,e,t,n,i){const o=n&&!n.isEmpty(),l=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${n}`),l&&(h+=` in document ${i}`),h+=")"),new it($e.INVALID_ARGUMENT,u+r+h)}function T4(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,t,n,i,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new oi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class rN extends A4{data(){return super.data()}}function _0(r,e){return typeof e=="string"?r2(r,e):e instanceof b0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new it($e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n2{}class k4 extends n2{}function i2(r,e,...t){let n=[];e instanceof n2&&n.push(e),n=n.concat(t),(function(o){const l=o.filter((h=>h instanceof o2)).length,u=o.filter((h=>h instanceof T0)).length;if(l>1||l>0&&u>0)throw new it($e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)r=i._apply(r);return r}class T0 extends k4{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new T0(e,t,n)}_apply(e){const t=this._parse(e);return E4(e._query,t),new Lc(e.firestore,e.converter,B1(e._query,t))}_parse(e){const t=Z5(e.firestore);return(function(o,l,u,h,d,g,b){let S;if(d.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new it($e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Vb(b,g);const B=[];for(const E of b)B.push(zb(h,o,E));S={arrayValue:{values:B}}}else S=zb(h,o,b)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Vb(b,g),S=eN(u,l,b,g==="in"||g==="not-in");return xr.create(d,g,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function nN(r,e,t){const n=e,i=_0("where",r);return T0._create(i,n,t)}class o2 extends n2{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new o2(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:Jr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let l=i;const u=o.getFlattenedFilters();for(const h of u)E4(l,h),l=B1(l,h)})(e._query,t),new Lc(e.firestore,e.converter,B1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class s2 extends k4{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new s2(e,t)}_apply(e){const t=(function(i,o,l){if(i.startAt!==null)throw new it($e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new it($e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cf(o,l)})(e._query,this._field,this._direction);return new Lc(e.firestore,e.converter,(function(i,o){const l=i.explicitOrderBy.concat([o]);return new oh(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function I4(r,e="asc"){const t=e,n=_0("orderBy",r);return s2._create(n,t)}function zb(r,e,t){if(typeof(t=pi(t))=="string"){if(t==="")throw new it($e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!t3(e)&&t.indexOf("/")!==-1)throw new it($e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Nr.fromString(t));if(!st.isDocumentKey(n))throw new it($e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Tf(r,new st(n))}if(t instanceof oi)return Tf(r,t._key);throw new it($e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${e0(t)}.`)}function Vb(r,e){if(!Array.isArray(r)||r.length===0)throw new it($e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function E4(r,e){const t=(function(i,o){for(const l of i)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(r.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new it($e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new it($e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class iN{convertValue(e,t="none"){switch(Cc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Bc(e,((i,o)=>{n[i]=this.convertValue(o,t)})),n}convertVectorValue(e){var n,i,o;const t=(o=(i=(n=e.fields)==null?void 0:n[$d].arrayValue)==null?void 0:i.values)==null?void 0:o.map((l=>xn(l.doubleValue)));return new Ga(t)}convertGeoPoint(e){return new Ha(xn(e.latitude),xn(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=s0(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Sf(e));default:return null}}convertTimestamp(e){const t=El(e);return new Kr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Nr.fromString(e);kt(E3(n),9688,{name:e});const i=new Eu(n.get(1),n.get(3)),o=new st(n.popFirst(5));return i.isEqual(t)||Io(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(r,e,t){let n;return n=r?r.toFirestore(e):e,n}class Jh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vu extends A4{constructor(e,t,n,i,o,l){super(e,t,n,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(_0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new it($e.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=vu._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}vu._jsonSchemaVersion="firestore/documentSnapshot/1.0",vu._jsonSchema={type:ii("string",vu._jsonSchemaVersion),bundleSource:ii("string","DocumentSnapshot"),bundleName:ii("string"),bundle:ii("string")};class mm extends vu{data(e={}){return super.data(e)}}class bu{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Jh(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new mm(this._firestore,this._userDataWriter,n.key,n,new Jh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new it($e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((u=>{const h=new mm(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Jh(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const h=new mm(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Jh(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,g=-1;return u.type!==0&&(d=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),g=l.indexOf(u.doc.key)),{type:sN(u.type),doc:h,oldIndex:d,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new it($e.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=x5.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function sN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xt(61501,{type:r})}}bu._jsonSchemaVersion="firestore/querySnapshot/1.0",bu._jsonSchema={type:ii("string",bu._jsonSchemaVersion),bundleSource:ii("string","QuerySnapshot"),bundleName:ii("string"),bundle:ii("string")};class a2 extends iN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ms(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new oi(this.firestore,null,t)}}function j4(r){r=pa(r,Lc);const e=pa(r.firestore,jc),t=Q5(e),n=new a2(e);return C4(r._query),$P(t,r._query).then((i=>new bu(e,n,r,i)))}function R4(r,e,t,...n){r=pa(r,oi);const i=pa(r.firestore,jc),o=Z5(i);let l;return l=typeof(e=pi(e))=="string"||e instanceof b0?ZP(o,"updateDoc",r._key,e,t,n):XP(o,"updateDoc",r._key,e),c2(i,[l.toMutation(r._key,Eo.exists(!0))])}function P4(r){return c2(pa(r.firestore,jc),[new h0(r._key,Eo.none())])}function l2(r,e){const t=pa(r.firestore,jc),n=ch(r),i=oN(r.converter,e);return c2(t,[QP(Z5(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,Eo.exists(!1))]).then((()=>n))}function aN(r,...e){var h,d,g;r=pi(r);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||Fb(e[n])||(t=e[n++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Fb(e[n])){const b=e[n];e[n]=(h=b.next)==null?void 0:h.bind(b),e[n+1]=(d=b.error)==null?void 0:d.bind(b),e[n+2]=(g=b.complete)==null?void 0:g.bind(b)}let o,l,u;if(r instanceof oi)l=pa(r.firestore,jc),u=l0(r._key.path),o={next:b=>{e[n]&&e[n](lN(l,r,b))},error:e[n+1],complete:e[n+2]};else{const b=pa(r,Lc);l=pa(b.firestore,jc),u=b._query;const S=new a2(l);o={next:x=>{e[n]&&e[n](new bu(l,S,b,x))},error:e[n+1],complete:e[n+2]},C4(r._query)}return(function(S,x,B,E){const L=new m4(E),A=new o4(x,L,B);return S.asyncQueue.enqueueAndForget((async()=>n4(await G1(S),A))),()=>{L.Nu(),S.asyncQueue.enqueueAndForget((async()=>i4(await G1(S),A)))}})(Q5(l),u,i,o)}function c2(r,e){return(function(n,i){const o=new Cl;return n.asyncQueue.enqueueAndForget((async()=>RP(await WP(n),i,o))),o.promise})(Q5(r),e)}function lN(r,e,t){const n=t.docs.get(e._key),i=new a2(r);return new vu(r,i,e._key,n,new Jh(t.hasPendingWrites,t.fromCache),e.converter)}function Xd(){return new e2("serverTimestamp")}(function(e,t=!0){(function(i){ih=i})(rh),zd(new Tu("firestore",((n,{instanceIdentifier:i,options:o})=>{const l=n.getProvider("app").getImmediate(),u=new jc(new P7(n.getProvider("auth-internal")),new L7(l,n.getProvider("app-check-internal")),(function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new it($e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eu(d.options.projectId,g)})(l,i),l);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),bc(yv,xv,e),bc(yv,xv,"esm2020")})();const cN={apiKey:"AIzaSyCyIga2EWsEZLqApS633i9uRIy5p745EJg",authDomain:"electrician-toolkit-33497.firebaseapp.com",projectId:"electrician-toolkit-33497",storageBucket:"electrician-toolkit-33497.firebasestorage.app",messagingSenderId:"878846360709",appId:"1:878846360709:web:af750d7f4d2a9495b17dec",measurementId:"G-JWZ1TDP25R"},N4=kS(cN),si=I7(N4),ba=qP(N4);HP(ba).then(()=>{console.log(" Firebase offline persistence enabled")}).catch(r=>{r.code==="failed-precondition"?console.warn(" Multiple tabs open, persistence only enabled in first tab"):r.code==="unimplemented"?console.warn(" Browser doesn't support persistence"):console.error(" Error enabling persistence:",r)});const u2="jobs_cache_v1",d2="jobs_cache_timestamp_v1",uN=300*1e3,B4=(r,e)=>{try{const t={userId:e,jobs:r,timestamp:Date.now()};localStorage.setItem(u2,JSON.stringify(t)),localStorage.setItem(d2,Date.now().toString())}catch(t){console.warn("Failed to cache jobs:",t)}},dN=r=>{try{const e=localStorage.getItem(u2);if(!e)return null;const t=JSON.parse(e);if(t.userId!==r)return Ef(),null;const n=parseInt(localStorage.getItem(d2)||"0");return Date.now()-n>uN?(Ef(),null):t.jobs}catch(e){return console.warn("Failed to load cached jobs:",e),null}},Ef=()=>{try{localStorage.removeItem(u2),localStorage.removeItem(d2)}catch(r){console.warn("Failed to clear cache:",r)}},Wu=async()=>{var r;try{const e=(r=si.currentUser)==null?void 0:r.uid;if(!e)throw new Error("User not authenticated");const t=dN(e);return t?(console.log(" Loaded jobs from localStorage cache (instant)"),Ob(e),t):(console.log(" Fetching jobs from Firebase..."),await Ob(e))}catch(e){throw console.error("Error fetching jobs:",e),e}},Ob=async r=>{const e=lh(ba,"users",r,"jobs"),t=i2(e,I4("createdAt","desc")),i=(await j4(t)).docs.map(o=>({id:o.id,...o.data()}));return B4(i,r),i},L4=(r,e)=>{if(!r)throw new Error("User not authenticated");const t=lh(ba,"users",r,"jobs"),n=i2(t,I4("createdAt","desc"));return aN(n,i=>{const o=i.docs.map(l=>({id:l.id,...l.data()}));console.log(` Real-time update: ${o.length} jobs (from ${i.metadata.fromCache?"cache":"server"})`),B4(o,r),e(o)},i=>{console.error("Error in real-time listener:",i)})},J1=async r=>{var e;try{const t=(e=si.currentUser)==null?void 0:e.uid;if(!t)throw new Error("User not authenticated");const n=lh(ba,"users",t,"jobs"),i={...r,createdAt:Xd(),status:r.status||"active"},o=await l2(n,i);return Ef(),console.log(" Job created:",o.id),o.id}catch(t){throw console.error("Error creating job:",t),t}},hN=async(r,e)=>{var t;try{const n=(t=si.currentUser)==null?void 0:t.uid;if(!n)throw new Error("User not authenticated");const i=ch(ba,"users",n,"jobs",r);await R4(i,{...e,updatedAt:Xd()}),Ef(),console.log(" Job updated:",r)}catch(n){throw console.error("Error updating job:",n),n}},F4=async r=>{var e;try{const t=(e=si.currentUser)==null?void 0:e.uid;if(!t)throw new Error("User not authenticated");const n=ch(ba,"users",t,"jobs",r);await P4(n),Ef(),console.log(" Job deleted:",r)}catch(t){throw console.error("Error deleting job:",t),t}},Kf=async(r,e)=>{var t;try{const n=(t=si.currentUser)==null?void 0:t.uid;if(!n)throw new Error("User not authenticated");const i=ch(ba,"users",n,"jobs",r),o=lh(i,"calculations"),l={...e,createdAt:Xd()},u=await l2(o,l);return console.log(" Calculation added:",u.id),u.id}catch(n){throw console.error("Error adding calculation:",n),n}},Mb=Object.freeze(Object.defineProperty({__proto__:null,addCalculationToJob:Kf,createJob:J1,deleteJob:F4,getUserJobs:Wu,subscribeToJobs:L4,updateJob:hN},Symbol.toStringTag,{value:"Module"})),fN=fe.forwardRef(({isDarkMode:r=!1,onExportSuccess:e},t)=>{const[n,i]=fe.useState(""),[o,l]=fe.useState(""),[u,h]=fe.useState(""),[d,g]=fe.useState("12"),[b,S]=fe.useState("single"),[x,B]=fe.useState("copper"),[E,L]=fe.useState("1.0"),[A,O]=fe.useState(!1),[$,F]=fe.useState([]),[ie,ue]=fe.useState(!1),V={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},k={14:4110,12:6530,10:10380,8:16510,6:26240,4:41740,3:52620,2:66360,1:83690,"1/0":105600,"2/0":133100,"3/0":167800,"4/0":211600,250:25e4,300:3e5,350:35e4,400:4e5,500:5e5,600:6e5,750:75e4,1e3:1e6},I={copper:{dc:10.8,ac:12.9},aluminum:{dc:17.4,ac:21.2}},C=(()=>{if(!n||!o||!u)return{drop:"0.00",percentage:"0.00",excessive:!1};const q=parseFloat(n),ne=parseFloat(o),se=parseFloat(u),oe=k[d],xe=parseFloat(E),we=I[x].ac;let ee;b==="single"?ee=2*we*ne*se*xe/oe:ee=1.732*we*ne*se*xe/oe;const W=ee/q*100,J=W>3;return{drop:ee.toFixed(2),percentage:W.toFixed(2),excessive:J}})(),w=async()=>{O(!0),ue(!0);try{const q=await Wu();F(q)}catch(q){console.error("Error loading jobs:",q),alert("Failed to load jobs. Please try again.")}finally{ue(!1)}},N=async q=>{try{const ne={type:"voltage-drop",data:{voltage:parseFloat(n),current:parseFloat(o),distance:parseFloat(u),wireSize:d,phaseType:b,conductorType:x,powerFactor:parseFloat(E),results:{voltageDrop:C.drop,percentageDrop:C.percentage,excessive:C.excessive}}};await Kf(q,ne),O(!1),alert("Calculation attached to job successfully!")}catch(ne){console.error("Error attaching calculation:",ne),alert("Failed to attach calculation. Please try again.")}},D=()=>{if(!n||!o||!u){alert("Please enter all required values before exporting to PDF");return}const q={calculatorName:"Voltage Drop Calculator",inputs:{systemType:b==="single"?"Single Phase":"Three Phase",conductorMaterial:x.charAt(0).toUpperCase()+x.slice(1),systemVoltage:`${n} V`,loadCurrent:`${o} A`,oneWayDistance:`${u} ft`,wireSize:d.includes("/")?`${d} AWG`:`${d} ${parseInt(d)<=4?"AWG":"kcmil"}`,powerFactor:E},results:{voltageDrop:`${C.drop} V`,percentageDrop:`${C.percentage}%`,necCompliant:C.excessive?"NO - Exceeds 3% limit":"YES - Within 3% limit",status:C.excessive?" WARNING: Exceeds NEC 3% Limit":" Within NEC limits"},additionalInfo:{formula:b==="single"?"2  K  I  L  PF  CM":"1.732  K  I  L  PF  CM",kConstant:`${I[x].ac} (${x} AC)`,circularMils:k[d].toLocaleString(),powerFactorUsed:E,systemConfiguration:b==="single"?"Single phase":"Three phase"},necReferences:["NEC Guidelines: Branch circuits - 3% max","Feeders - 3% max","Combined branch circuit and feeder - 5% max","Note: Excessive voltage drop can cause equipment malfunction and reduced efficiency"]};cn(q),e&&e()};return fe.useImperativeHandle(t,()=>({exportPDF:D})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{background:V.cardBg,border:`1px solid ${V.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:V.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${V.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:V.labelText,marginBottom:"0.5rem"},children:"System Type"}),s.jsxs("select",{value:b,onChange:q=>S(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${V.inputBorder}`,borderRadius:"8px",backgroundColor:V.inputBg,color:V.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"single",children:"Single Phase"}),s.jsx("option",{value:"three",children:"Three Phase"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:V.labelText,marginBottom:"0.5rem"},children:"Conductor Material"}),s.jsxs("select",{value:x,onChange:q=>B(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${V.inputBorder}`,borderRadius:"8px",backgroundColor:V.inputBg,color:V.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"copper",children:"Copper"}),s.jsx("option",{value:"aluminum",children:"Aluminum"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:V.labelText,marginBottom:"0.5rem"},children:"System Voltage (V)"}),s.jsx("input",{type:"number",value:n,onChange:q=>i(q.target.value),placeholder:"120, 240, 480",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${V.inputBorder}`,borderRadius:"8px",backgroundColor:V.inputBg,color:V.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:V.labelText,marginBottom:"0.5rem"},children:"Load Current (Amps)"}),s.jsx("input",{type:"number",value:o,onChange:q=>l(q.target.value),placeholder:"15, 20, 30",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${V.inputBorder}`,borderRadius:"8px",backgroundColor:V.inputBg,color:V.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:V.labelText,marginBottom:"0.5rem"},children:"One-Way Distance (feet)"}),s.jsx("input",{type:"number",value:u,onChange:q=>h(q.target.value),placeholder:"100, 200, 500",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${V.inputBorder}`,borderRadius:"8px",backgroundColor:V.inputBg,color:V.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:V.labelText,marginBottom:"0.5rem"},children:"Wire Size (AWG/kcmil)"}),s.jsxs("select",{value:d,onChange:q=>g(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${V.inputBorder}`,borderRadius:"8px",backgroundColor:V.inputBg,color:V.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"14",children:"14 AWG"}),s.jsx("option",{value:"12",children:"12 AWG"}),s.jsx("option",{value:"10",children:"10 AWG"}),s.jsx("option",{value:"8",children:"8 AWG"}),s.jsx("option",{value:"6",children:"6 AWG"}),s.jsx("option",{value:"4",children:"4 AWG"}),s.jsx("option",{value:"3",children:"3 AWG"}),s.jsx("option",{value:"2",children:"2 AWG"}),s.jsx("option",{value:"1",children:"1 AWG"}),s.jsx("option",{value:"1/0",children:"1/0 AWG"}),s.jsx("option",{value:"2/0",children:"2/0 AWG"}),s.jsx("option",{value:"3/0",children:"3/0 AWG"}),s.jsx("option",{value:"4/0",children:"4/0 AWG"}),s.jsx("option",{value:"250",children:"250 kcmil"}),s.jsx("option",{value:"300",children:"300 kcmil"}),s.jsx("option",{value:"350",children:"350 kcmil"}),s.jsx("option",{value:"400",children:"400 kcmil"}),s.jsx("option",{value:"500",children:"500 kcmil"}),s.jsx("option",{value:"600",children:"600 kcmil"}),s.jsx("option",{value:"750",children:"750 kcmil"}),s.jsx("option",{value:"1000",children:"1000 kcmil"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:V.labelText,marginBottom:"0.5rem"},children:"Power Factor (AC loads)"}),s.jsxs("select",{value:E,onChange:q=>L(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${V.inputBorder}`,borderRadius:"8px",backgroundColor:V.inputBg,color:V.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"1.0",children:"1.0 (Resistive loads)"}),s.jsx("option",{value:"0.9",children:"0.9 (Most motors)"}),s.jsx("option",{value:"0.85",children:"0.85 (Typical mixed load)"}),s.jsx("option",{value:"0.8",children:"0.8 (Poor power factor)"})]})]})]})]}),n&&o&&u&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:V.cardBg,border:`1px solid ${V.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:V.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:V.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:V.labelText,marginBottom:"0.25rem"},children:"Voltage Drop"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:V.cardText},children:C.drop}),s.jsx("div",{style:{fontSize:"0.75rem",color:V.labelText,marginTop:"0.25rem"},children:"Volts"})]}),s.jsxs("div",{style:{background:C.excessive?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:C.excessive?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Percentage Drop"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:C.excessive?"#dc2626":"#1e40af"},children:[C.percentage,"%"]}),s.jsx("div",{style:{fontSize:"0.75rem",color:C.excessive?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:"Max: 3%"})]})]}),s.jsxs("div",{style:{background:V.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${V.cardBorder}`},children:[s.jsx("strong",{style:{color:V.cardText,display:"block",marginBottom:"0.5rem",fontSize:"0.875rem"},children:"Calculation Details:"}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:V.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["Formula: ",b==="single"?"2":"1.732","  K  I  L  PF  CM"]}),s.jsxs("div",{children:["K constant (",x,"): ",I[x].ac]}),s.jsxs("div",{children:["Circular mils: ",k[d].toLocaleString()]}),s.jsxs("div",{children:["Power factor: ",E]}),s.jsxs("div",{children:["System: ",b==="single"?"Single":"Three"," phase"]})]})]})]}),C.excessive?s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem",fontSize:"0.9375rem"},children:"WARNING: Exceeds NEC 3% Limit"}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"Consider using larger wire size to reduce voltage drop. Excessive voltage drop can cause equipment malfunction and reduced efficiency."})]})]})}):s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Voltage drop is within NEC limits"}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"This circuit meets the NEC recommended 3% maximum voltage drop for branch circuits."})]})]})}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[s.jsxs("button",{onClick:D,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:q=>q.currentTarget.style.background="#2563eb",onMouseOut:q=>q.currentTarget.style.background="#3b82f6",children:[s.jsx(Hm,{size:18}),"Export to PDF"]}),s.jsxs("button",{onClick:w,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:q=>q.currentTarget.style.background="#059669",onMouseOut:q=>q.currentTarget.style.background="#10b981",children:[s.jsx(Lu,{size:18}),"Attach to Job"]})]})]}),s.jsxs("div",{style:{background:V.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${V.cardBorder}`,fontSize:"0.8125rem",color:V.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:V.cardText},children:"NEC Guidelines:"}),"Branch circuits: 3% max  Feeders: 3% max  Combined: 5% max"]}),A&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:s.jsxs("div",{style:{background:V.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[s.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:V.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),s.jsx("div",{style:{marginBottom:"1rem"},children:ie?s.jsx("div",{style:{textAlign:"center",padding:"2rem",color:V.labelText},children:"Loading jobs..."}):$&&$.length>0?$.map(q=>s.jsxs("div",{onClick:()=>N(q.id),style:{padding:"1rem",background:V.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${V.cardBorder}`,transition:"all 0.2s"},onMouseOver:ne=>ne.currentTarget.style.transform="translateY(-2px)",onMouseOut:ne=>ne.currentTarget.style.transform="translateY(0)",children:[s.jsx("div",{style:{fontWeight:"600",color:V.cardText,marginBottom:"0.25rem"},children:q.name}),s.jsx("div",{style:{fontSize:"0.875rem",color:V.labelText},children:q.location||"No location"})]},q.id)):s.jsx("div",{style:{textAlign:"center",padding:"2rem",color:V.labelText},children:s.jsx("p",{children:"No jobs found. Create a job first."})})}),s.jsx("button",{onClick:()=>O(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:q=>q.currentTarget.style.background="#4b5563",onMouseOut:q=>q.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})}),pN=({isDarkMode:r,colors:e,onExport:t})=>{const[n,i]=fe.useState(""),[o,l]=fe.useState(""),[u,h]=fe.useState(""),[d,g]=fe.useState(""),[b,S]=fe.useState({V:"",I:"",R:"",P:""}),[x,B]=fe.useState(!1),[E,L]=fe.useState([]),[A,O]=fe.useState(!1);fe.useEffect(()=>{$()},[n,o,u,d]);const $=()=>{const k=parseFloat(n)||0,I=parseFloat(o)||0,M=parseFloat(u)||0,C=parseFloat(d)||0,w={V:"",I:"",R:"",P:""};!n&&I&&M?w.V=(I*M).toFixed(1):!n&&C&&I&&I!==0?w.V=(C/I).toFixed(1):!n&&C&&M?w.V=Math.sqrt(C*M).toFixed(1):n&&(w.V=k.toFixed(1)),!o&&k&&M&&M!==0?w.I=(k/M).toFixed(1):!o&&C&&k&&k!==0?w.I=(C/k).toFixed(1):!o&&C&&M&&M!==0?w.I=Math.sqrt(C/M).toFixed(1):o&&(w.I=I.toFixed(1)),!u&&k&&I&&I!==0?w.R=(k/I).toFixed(1):!u&&k&&C&&C!==0?w.R=(k*k/C).toFixed(1):!u&&C&&I&&I!==0?w.R=(C/(I*I)).toFixed(1):u&&(w.R=M.toFixed(1)),!d&&k&&I?w.P=(k*I).toFixed(1):!d&&I&&M?w.P=(I*I*M).toFixed(1):!d&&k&&M&&M!==0?w.P=(k*k/M).toFixed(1):d&&(w.P=C.toFixed(1)),S(w)},F=()=>{i(""),l(""),h(""),g(""),S({V:"",I:"",R:"",P:""})},ie=async()=>{B(!0),O(!0);try{const k=await Wu();L(k)}catch(k){console.error("Error loading jobs:",k),alert("Failed to load jobs. Please try again.")}finally{O(!1)}},ue=async k=>{try{const I={type:"ohms-law-basic",data:{voltage:parseFloat(n)||parseFloat(b.V)||0,current:parseFloat(o)||parseFloat(b.I)||0,resistance:parseFloat(u)||parseFloat(b.R)||0,power:parseFloat(d)||parseFloat(b.P)||0}};await Kf(k,I),B(!1),alert("Calculation attached to job successfully!")}catch(I){console.error("Error attaching calculation:",I),alert("Failed to attach calculation. Please try again.")}},V=()=>{if(!(n||o||u||d||b.V||b.I||b.R||b.P)){alert("Please enter at least 2 values before exporting");return}const I={},M={};n&&(I.voltage=`${n} V`),o&&(I.current=`${o} A`),u&&(I.resistance=`${u} `),d&&(I.power=`${d} W`),b.V&&(M.voltage=`${b.V} V`),b.I&&(M.current=`${b.I} A`),b.R&&(M.resistance=`${b.R} `),b.P&&(M.power=`${b.P} W`),t({calculatorName:"Ohm's Law Calculator - Basic",inputs:I,results:M,additionalInfo:{note:"Calculations based on fundamental electrical formulas"},necReferences:["Ohm's Law: E = I  R","Power formulas: P = E  I, P = I  R, P = E  R","Current: I = E  R, I = P  E, I = (P  R)","Resistance: R = E  I, R = E  P, R = P  I"]})};return s.jsxs("div",{children:[s.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:"Enter any 2 known values to calculate the remaining values"})]})}),s.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Volts (E)"}),s.jsx("input",{type:"number",value:n||b.V,onChange:k=>i(k.target.value),placeholder:"Enter voltage",disabled:o&&u||o&&d||u&&d,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:o&&u||o&&d||u&&d?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:o&&u||o&&d||u&&d?"not-allowed":"text"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Amps (I)"}),s.jsx("input",{type:"number",value:o||b.I,onChange:k=>l(k.target.value),placeholder:"Enter current",disabled:n&&u||n&&d||u&&d,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:n&&u||n&&d||u&&d?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:n&&u||n&&d||u&&d?"not-allowed":"text"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Ohms (R)"}),s.jsx("input",{type:"number",value:u||b.R,onChange:k=>h(k.target.value),placeholder:"Enter resistance",disabled:n&&o||n&&d||o&&d,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:n&&o||n&&d||o&&d?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:n&&o||n&&d||o&&d?"not-allowed":"text"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Watts (P)"}),s.jsx("input",{type:"number",value:d||b.P,onChange:k=>g(k.target.value),placeholder:"Enter power",disabled:n&&o||n&&u||o&&u,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:n&&o||n&&u||o&&u?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:n&&o||n&&u||o&&u?"not-allowed":"text"}})]})]}),s.jsx("button",{onClick:F,style:{width:"100%",background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),(b.V||b.I||b.R||b.P)&&s.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[b.V&&s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Voltage"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:b.V}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Volts"})]}),b.I&&s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Current"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:b.I}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),b.R&&s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Resistance"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:b.R}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Ohms"})]}),b.P&&s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Power"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:b.P}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Watts"})]})]})]}),(n||o||u||d)&&s.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[s.jsxs("button",{onClick:V,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:k=>k.currentTarget.style.background="#2563eb",onMouseOut:k=>k.currentTarget.style.background="#3b82f6",children:[s.jsx(Hm,{size:18}),"Export to PDF"]}),s.jsxs("button",{onClick:ie,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:k=>k.currentTarget.style.background="#059669",onMouseOut:k=>k.currentTarget.style.background="#10b981",children:[s.jsx(Lu,{size:18}),"Attach to Job"]})]}),x&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:s.jsxs("div",{style:{background:e.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[s.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:e.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),s.jsx("div",{style:{marginBottom:"1rem"},children:A?s.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:"Loading jobs..."}):E&&E.length>0?E.map(k=>s.jsxs("div",{onClick:()=>ue(k.id),style:{padding:"1rem",background:e.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${e.cardBorder}`,transition:"all 0.2s"},onMouseOver:I=>I.currentTarget.style.transform="translateY(-2px)",onMouseOut:I=>I.currentTarget.style.transform="translateY(0)",children:[s.jsx("div",{style:{fontWeight:"600",color:e.cardText,marginBottom:"0.25rem"},children:k.name}),s.jsx("div",{style:{fontSize:"0.875rem",color:e.labelText},children:k.location||"No location"})]},k.id)):s.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:s.jsx("p",{children:"No jobs found. Create a job first."})})}),s.jsx("button",{onClick:()=>B(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:k=>k.currentTarget.style.background="#4b5563",onMouseOut:k=>k.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})},mN=({isDarkMode:r,colors:e,onExport:t})=>{const[n,i]=fe.useState([{id:1,R:"",V:"",I:"",P:""}]),[o,l]=fe.useState({R:"",V:"",I:"",P:""}),[u,h]=fe.useState(!1),[d,g]=fe.useState([]),[b,S]=fe.useState(!1),x=(I,M)=>Object.entries(I).filter(([w,N])=>w!==M&&N&&N!=="").map(([w])=>w).length>=2,B=()=>{const I=Math.max(...n.map(M=>M.id),0)+1;i([...n,{id:I,R:"",V:"",I:"",P:""}])},E=I=>{n.length>1&&i(n.filter(M=>M.id!==I))},L=(I,M,C)=>{i(n.map(w=>w.id===I?{...w,[M]:C}:w))},A=(I,M)=>{const C=[];if(M.I&&M.I!==""){const w=parseFloat(M.I);I.forEach((N,D)=>{if(N.I&&N.I!==""){const q=parseFloat(N.I);Math.abs(q-w)>.01&&C.push(`Total current (${w}A) conflicts with Component ${D+1} current (${q}A)`)}})}return C},O=()=>{const I=A(n,o);if(I.length>0){alert(`Conflicts detected:
`+I.join(`
`));return}let M=[...n];if(o.I&&o.I!==""){const D=parseFloat(o.I);M=M.map(q=>!q.I||q.I===""?{...q,I:D.toFixed(1)}:q)}let C=!0,w=0;const N=50;for(;C&&w<N;){C=!1,w++;let D=null;for(let q of M)if(q.I&&!isNaN(parseFloat(q.I))){D=parseFloat(q.I);break}if(D===null)for(let q of M){const ne=parseFloat(q.V),se=parseFloat(q.R),oe=parseFloat(q.P);if(!isNaN(ne)&&!isNaN(se)&&se!==0){D=ne/se;break}else if(!isNaN(oe)&&!isNaN(ne)&&ne!==0){D=oe/ne;break}else if(!isNaN(oe)&&!isNaN(se)&&se!==0){D=Math.sqrt(oe/se);break}}D!==null&&(M=M.map(q=>!q.I||q.I===""?(C=!0,{...q,I:D.toFixed(1)}):q)),M=M.map(q=>{const ne={...q},se=parseFloat(q.V),oe=parseFloat(q.I),xe=parseFloat(q.R),we=parseFloat(q.P);(q.R===""||isNaN(xe))&&!isNaN(se)&&!isNaN(oe)&&oe!==0?(ne.R=(se/oe).toFixed(1),C=!0):(q.R===""||isNaN(xe))&&!isNaN(we)&&!isNaN(oe)&&oe!==0?(ne.R=(we/(oe*oe)).toFixed(1),C=!0):(q.R===""||isNaN(xe))&&!isNaN(se)&&!isNaN(we)&&we!==0&&(ne.R=(se*se/we).toFixed(1),C=!0);const ee=parseFloat(ne.R),W=parseFloat(ne.I);(q.V===""||isNaN(se))&&!isNaN(W)&&!isNaN(ee)?(ne.V=(W*ee).toFixed(1),C=!0):(q.V===""||isNaN(se))&&!isNaN(we)&&!isNaN(W)&&W!==0?(ne.V=(we/W).toFixed(1),C=!0):(q.V===""||isNaN(se))&&!isNaN(we)&&!isNaN(ee)&&(ne.V=Math.sqrt(we*ee).toFixed(1),C=!0);const J=parseFloat(ne.V);return(q.P===""||isNaN(we))&&!isNaN(J)&&!isNaN(W)?(ne.P=(J*W).toFixed(1),C=!0):(q.P===""||isNaN(we))&&!isNaN(W)&&!isNaN(ee)?(ne.P=(W*W*ee).toFixed(1),C=!0):(q.P===""||isNaN(we))&&!isNaN(J)&&!isNaN(ee)&&ee!==0&&(ne.P=(J*J/ee).toFixed(1),C=!0),ne})}i(M)},$=()=>{i([{id:1,R:"",V:"",I:"",P:""}]),l({R:"",V:"",I:"",P:""})},F=()=>{const I=n.reduce((D,q)=>{const ne=parseFloat(q.R);return D+(isNaN(ne)?0:ne)},0),M=n.reduce((D,q)=>{const ne=parseFloat(q.V);return D+(isNaN(ne)?0:ne)},0),C=n.reduce((D,q)=>{const ne=parseFloat(q.P);return D+(isNaN(ne)?0:ne)},0),w=n.find(D=>!isNaN(parseFloat(D.I))),N=w?parseFloat(w.I):0;return{totalR:I,totalV:M,totalI:N,totalP:C}},ie=async()=>{h(!0),S(!0);try{const I=await Wu();g(I)}catch(I){console.error("Error loading jobs:",I),alert("Failed to load jobs. Please try again.")}finally{S(!1)}},ue=async I=>{try{const M=F();await Kf(I,{type:"ohms-law-series",data:{components:n,totals:M}}),h(!1),alert("Calculation attached to job successfully!")}catch(M){console.error("Error attaching calculation:",M),alert("Failed to attach calculation. Please try again.")}},V=()=>{if(!n.some(N=>N.R||N.V||N.I||N.P)){alert("Please enter component values before exporting");return}const M=F(),C={};n.forEach((N,D)=>{const q=[];N.R&&q.push(`R=${N.R}`),N.V&&q.push(`V=${N.V}V`),N.I&&q.push(`I=${N.I}A`),N.P&&q.push(`P=${N.P}W`),q.length>0&&(C[`component${D+1}`]=q.join(", "))});const w={calculatorName:"Ohm's Law Calculator - Series Circuit",inputs:C,results:{totalResistance:`${M.totalR.toFixed(1)} `,totalVoltage:`${M.totalV.toFixed(1)} V`,current:`${M.totalI.toFixed(1)} A (constant)`,totalPower:`${M.totalP.toFixed(1)} W`},additionalInfo:{circuitType:"Series Circuit",principle:"Current is constant across all components",totalResistanceFormula:"R_total = R1 + R2 + R3 + ...",totalVoltageFormula:"V_total = V1 + V2 + V3 + ..."},necReferences:["Series circuits: Current is the same through all components","Total resistance = Sum of all resistances","Total voltage = Sum of voltage drops across components","Total power = Sum of power dissipated in each component"]};t(w)},k=n.some(I=>I.R||I.V||I.I||I.P);return s.jsxs("div",{children:[s.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:"Series Circuit: Current is constant across all components"})]})}),s.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${e.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Totals (Optional)"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"0.5rem"},children:["V","I","R","P"].map(I=>{const M={R:"Ohms (R)",V:"Volts (E)",I:"Amps (I)",P:"Watts (P)"};return s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:M[I]}),s.jsx("input",{type:"number",value:o[I],onChange:C=>l({...o,[I]:C.target.value}),placeholder:"Optional",disabled:x(o,I),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:x(o,I)?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:x(o,I)?"not-allowed":"text"}})]},I)})}),s.jsx("p",{style:{fontSize:"0.8125rem",color:e.subtleText,margin:0,fontStyle:"italic"},children:"Enter known total values to help solve the circuit. Current is constant in series."})]}),n.map((I,M)=>s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${e.cardBorder}`},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",marginBottom:"0.75rem",gap:"0.5rem"},children:[s.jsxs("h4",{style:{fontWeight:"600",color:e.labelText,margin:0,fontSize:"0.875rem"},children:["Component ",M+1]}),n.length>1&&s.jsx("button",{onClick:()=>E(I.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:s.jsx(Tc,{size:18})})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem"},children:[{field:"V",label:"Volts (E)"},{field:"I",label:"Amps (I)"},{field:"R",label:"Ohms (R)"},{field:"P",label:"Watts (P)"}].map(({field:C,label:w})=>s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"500",color:e.subtleText,marginBottom:"0.25rem"},children:w}),s.jsx("input",{type:"number",value:I[C],onChange:N=>L(I.id,C,N.target.value),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:e.inputBg,color:e.cardText,boxSizing:"border-box"}})]},C))})]},I.id)),s.jsxs("button",{onClick:B,style:{width:"100%",background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[s.jsx(ma,{size:16}),"Add Component"]}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[s.jsxs("button",{onClick:O,style:{flex:1,background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[s.jsx(cf,{size:20}),"Calculate"]}),s.jsx("button",{onClick:$,style:{flex:1,background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),s.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem"},children:"Circuit Totals"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Voltage"}),s.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalV.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"E"})]}),s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Amperage"}),s.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalI.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"I"})]}),s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Resistance"}),s.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalR.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"R"})]}),s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Wattage"}),s.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalP.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"P"})]})]})]}),k&&s.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[s.jsxs("button",{onClick:V,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:I=>I.currentTarget.style.background="#2563eb",onMouseOut:I=>I.currentTarget.style.background="#3b82f6",children:[s.jsx(Hm,{size:18}),"Export to PDF"]}),s.jsxs("button",{onClick:ie,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:I=>I.currentTarget.style.background="#059669",onMouseOut:I=>I.currentTarget.style.background="#10b981",children:[s.jsx(Lu,{size:18}),"Attach to Job"]})]}),u&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:s.jsxs("div",{style:{background:e.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[s.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:e.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),s.jsx("div",{style:{marginBottom:"1rem"},children:b?s.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:"Loading jobs..."}):d&&d.length>0?d.map(I=>s.jsxs("div",{onClick:()=>ue(I.id),style:{padding:"1rem",background:e.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${e.cardBorder}`,transition:"all 0.2s"},onMouseOver:M=>M.currentTarget.style.transform="translateY(-2px)",onMouseOut:M=>M.currentTarget.style.transform="translateY(0)",children:[s.jsx("div",{style:{fontWeight:"600",color:e.cardText,marginBottom:"0.25rem"},children:I.name}),s.jsx("div",{style:{fontSize:"0.875rem",color:e.labelText},children:I.location||"No location"})]},I.id)):s.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:s.jsx("p",{children:"No jobs found. Create a job first."})})}),s.jsx("button",{onClick:()=>h(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:I=>I.currentTarget.style.background="#4b5563",onMouseOut:I=>I.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})},gN=({isDarkMode:r,colors:e,onExport:t})=>{const[n,i]=fe.useState([{id:1,R:"",V:"",I:"",P:""}]),[o,l]=fe.useState({R:"",V:"",I:"",P:""}),[u,h]=fe.useState(!1),[d,g]=fe.useState([]),[b,S]=fe.useState(!1),x=(I,M)=>Object.entries(I).filter(([w,N])=>w!==M&&N&&N!=="").map(([w])=>w).length>=2,B=()=>{const I=Math.max(...n.map(M=>M.id),0)+1;i([...n,{id:I,R:"",V:"",I:"",P:""}])},E=I=>{n.length>1&&i(n.filter(M=>M.id!==I))},L=(I,M,C)=>{i(n.map(w=>w.id===I?{...w,[M]:C}:w))},A=(I,M)=>{const C=[];if(M.V&&M.V!==""){const w=parseFloat(M.V);I.forEach((N,D)=>{if(N.V&&N.V!==""){const q=parseFloat(N.V);Math.abs(q-w)>.01&&C.push(`Total voltage (${w}V) conflicts with Component ${D+1} voltage (${q}V)`)}})}return C},O=()=>{const I=A(n,o);if(I.length>0){alert(`Conflicts detected:
`+I.join(`
`));return}let M=[...n];if(o.V&&o.V!==""){const D=parseFloat(o.V);M=M.map(q=>!q.V||q.V===""?{...q,V:D.toFixed(1)}:q)}let C=!0,w=0;const N=50;for(;C&&w<N;){C=!1,w++;let D=null;for(let q of M)if(q.V&&!isNaN(parseFloat(q.V))){D=parseFloat(q.V);break}if(D===null)for(let q of M){const ne=parseFloat(q.I),se=parseFloat(q.R),oe=parseFloat(q.P);if(!isNaN(ne)&&!isNaN(se)){D=ne*se;break}else if(!isNaN(oe)&&!isNaN(ne)&&ne!==0){D=oe/ne;break}else if(!isNaN(oe)&&!isNaN(se)){D=Math.sqrt(oe*se);break}}D!==null&&(M=M.map(q=>!q.V||q.V===""?(C=!0,{...q,V:D.toFixed(1)}):q)),M=M.map(q=>{const ne={...q},se=parseFloat(q.V),oe=parseFloat(q.I),xe=parseFloat(q.R),we=parseFloat(q.P);(q.R===""||isNaN(xe))&&!isNaN(se)&&!isNaN(oe)&&oe!==0?(ne.R=(se/oe).toFixed(1),C=!0):(q.R===""||isNaN(xe))&&!isNaN(we)&&!isNaN(oe)&&oe!==0?(ne.R=(we/(oe*oe)).toFixed(1),C=!0):(q.R===""||isNaN(xe))&&!isNaN(se)&&!isNaN(we)&&we!==0&&(ne.R=(se*se/we).toFixed(1),C=!0);const ee=parseFloat(ne.R),W=parseFloat(ne.V);(q.I===""||isNaN(oe))&&!isNaN(W)&&!isNaN(ee)&&ee!==0?(ne.I=(W/ee).toFixed(1),C=!0):(q.I===""||isNaN(oe))&&!isNaN(we)&&!isNaN(W)&&W!==0?(ne.I=(we/W).toFixed(1),C=!0):(q.I===""||isNaN(oe))&&!isNaN(we)&&!isNaN(ee)&&ee!==0&&(ne.I=Math.sqrt(we/ee).toFixed(1),C=!0);const J=parseFloat(ne.I);return(q.P===""||isNaN(we))&&!isNaN(W)&&!isNaN(J)?(ne.P=(W*J).toFixed(1),C=!0):(q.P===""||isNaN(we))&&!isNaN(J)&&!isNaN(ee)?(ne.P=(J*J*ee).toFixed(1),C=!0):(q.P===""||isNaN(we))&&!isNaN(W)&&!isNaN(ee)&&ee!==0&&(ne.P=(W*W/ee).toFixed(1),C=!0),ne})}i(M)},$=()=>{i([{id:1,R:"",V:"",I:"",P:""}]),l({R:"",V:"",I:"",P:""})},F=()=>{const I=n.reduce((q,ne)=>{const se=parseFloat(ne.I);return q+(isNaN(se)?0:se)},0),M=n.reduce((q,ne)=>{const se=parseFloat(ne.P);return q+(isNaN(se)?0:se)},0),C=n.find(q=>!isNaN(parseFloat(q.V))),w=C?parseFloat(C.V):0,N=n.map(q=>parseFloat(q.R)).filter(q=>!isNaN(q)&&q>0);return{totalR:N.length>0?1/N.reduce((q,ne)=>q+1/ne,0):0,totalV:w,totalI:I,totalP:M}},ie=async()=>{h(!0),S(!0);try{const I=await Wu();g(I)}catch(I){console.error("Error loading jobs:",I),alert("Failed to load jobs. Please try again.")}finally{S(!1)}},ue=async I=>{try{const M=F();await Kf(I,{type:"ohms-law-parallel",data:{components:n,totals:M}}),h(!1),alert("Calculation attached to job successfully!")}catch(M){console.error("Error attaching calculation:",M),alert("Failed to attach calculation. Please try again.")}},V=()=>{if(!n.some(N=>N.R||N.V||N.I||N.P)){alert("Please enter component values before exporting");return}const M=F(),C={};n.forEach((N,D)=>{const q=[];N.R&&q.push(`R=${N.R}`),N.V&&q.push(`V=${N.V}V`),N.I&&q.push(`I=${N.I}A`),N.P&&q.push(`P=${N.P}W`),q.length>0&&(C[`component${D+1}`]=q.join(", "))});const w={calculatorName:"Ohm's Law Calculator - Parallel Circuit",inputs:C,results:{totalResistance:`${M.totalR.toFixed(1)} `,voltage:`${M.totalV.toFixed(1)} V (constant)`,totalCurrent:`${M.totalI.toFixed(1)} A`,totalPower:`${M.totalP.toFixed(1)} W`},additionalInfo:{circuitType:"Parallel Circuit",principle:"Voltage is constant across all components",totalResistanceFormula:"1/R_total = 1/R1 + 1/R2 + 1/R3 + ...",totalCurrentFormula:"I_total = I1 + I2 + I3 + ..."},necReferences:["Parallel circuits: Voltage is the same across all components","Total resistance = 1  (1/R1 + 1/R2 + 1/R3 + ...)","Total current = Sum of currents through each branch","Total power = Sum of power dissipated in each component"]};t(w)},k=n.some(I=>I.R||I.V||I.I||I.P);return s.jsxs("div",{children:[s.jsx("div",{style:{background:"#faf5ff",border:"1px solid #a855f7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#7e22ce",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#7e22ce",lineHeight:"1.5"},children:"Parallel Circuit: Voltage is constant across all components"})]})}),s.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${e.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Totals (Optional)"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"0.5rem"},children:["V","I","R","P"].map(I=>{const M={R:"Ohms (R)",V:"Volts (E)",I:"Amps (I)",P:"Watts (P)"};return s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:M[I]}),s.jsx("input",{type:"number",value:o[I],onChange:C=>l({...o,[I]:C.target.value}),placeholder:"Optional",disabled:x(o,I),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:x(o,I)?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:x(o,I)?"not-allowed":"text"}})]},I)})}),s.jsx("p",{style:{fontSize:"0.8125rem",color:e.subtleText,margin:0,fontStyle:"italic"},children:"Enter known total values to help solve the circuit. Voltage is constant in parallel."})]}),n.map((I,M)=>s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${e.cardBorder}`},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",marginBottom:"0.75rem",gap:"0.5rem"},children:[s.jsxs("h4",{style:{fontWeight:"600",color:e.labelText,margin:0,fontSize:"0.875rem"},children:["Component ",M+1]}),n.length>1&&s.jsx("button",{onClick:()=>E(I.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:s.jsx(Tc,{size:18})})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem"},children:[{field:"V",label:"Volts (E)"},{field:"I",label:"Amps (I)"},{field:"R",label:"Ohms (R)"},{field:"P",label:"Watts (P)"}].map(({field:C,label:w})=>s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"500",color:e.subtleText,marginBottom:"0.25rem"},children:w}),s.jsx("input",{type:"number",value:I[C],onChange:N=>L(I.id,C,N.target.value),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:e.inputBg,color:e.cardText,boxSizing:"border-box"}})]},C))})]},I.id)),s.jsxs("button",{onClick:B,style:{width:"100%",background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[s.jsx(ma,{size:16}),"Add Component"]}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[s.jsxs("button",{onClick:O,style:{flex:1,background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[s.jsx(cf,{size:20}),"Calculate"]}),s.jsx("button",{onClick:$,style:{flex:1,background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),s.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem"},children:"Circuit Totals"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Voltage"}),s.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalV.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"E"})]}),s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Amperage"}),s.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalI.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"I"})]}),s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Resistance"}),s.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalR.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"R"})]}),s.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Wattage"}),s.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:F().totalP.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"P"})]})]})]}),k&&s.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[s.jsxs("button",{onClick:V,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:I=>I.currentTarget.style.background="#2563eb",onMouseOut:I=>I.currentTarget.style.background="#3b82f6",children:[s.jsx(Hm,{size:18}),"Export to PDF"]}),s.jsxs("button",{onClick:ie,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:I=>I.currentTarget.style.background="#059669",onMouseOut:I=>I.currentTarget.style.background="#10b981",children:[s.jsx(Lu,{size:18}),"Attach to Job"]})]}),u&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:s.jsxs("div",{style:{background:e.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[s.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:e.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),s.jsx("div",{style:{marginBottom:"1rem"},children:b?s.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:"Loading jobs..."}):d&&d.length>0?d.map(I=>s.jsxs("div",{onClick:()=>ue(I.id),style:{padding:"1rem",background:e.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${e.cardBorder}`,transition:"all 0.2s"},onMouseOver:M=>M.currentTarget.style.transform="translateY(-2px)",onMouseOut:M=>M.currentTarget.style.transform="translateY(0)",children:[s.jsx("div",{style:{fontWeight:"600",color:e.cardText,marginBottom:"0.25rem"},children:I.name}),s.jsx("div",{style:{fontSize:"0.875rem",color:e.labelText},children:I.location||"No location"})]},I.id)):s.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:s.jsx("p",{children:"No jobs found. Create a job first."})})}),s.jsx("button",{onClick:()=>h(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:I=>I.currentTarget.style.background="#4b5563",onMouseOut:I=>I.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})},yN=fe.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=fe.useState("basic"),i={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},o=l=>{cn(l)};return fe.useImperativeHandle(e,()=>({exportPDF:()=>{alert("Please use the Export to PDF button within the calculator")}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{background:i.cardBg,border:`1px solid ${i.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem"},children:[s.jsx("button",{onClick:()=>n("basic"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="basic"?"#3b82f6":i.sectionBg,color:t==="basic"?"white":i.labelText,border:`1px solid ${t==="basic"?"#3b82f6":i.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Basic"}),s.jsx("button",{onClick:()=>n("series"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="series"?"#3b82f6":i.sectionBg,color:t==="series"?"white":i.labelText,border:`1px solid ${t==="series"?"#3b82f6":i.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Series"}),s.jsx("button",{onClick:()=>n("parallel"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="parallel"?"#3b82f6":i.sectionBg,color:t==="parallel"?"white":i.labelText,border:`1px solid ${t==="parallel"?"#3b82f6":i.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Parallel"})]}),t==="basic"&&s.jsx(pN,{isDarkMode:r,colors:i,onExport:o}),t==="series"&&s.jsx(mN,{isDarkMode:r,colors:i,onExport:o}),t==="parallel"&&s.jsx(gN,{isDarkMode:r,colors:i,onExport:o}),s.jsxs("div",{style:{background:i.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${i.cardBorder}`,fontSize:"0.8125rem",color:i.labelText,marginTop:"1rem"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:i.cardText},children:"Formulas:"}),s.jsx("div",{children:"E = I  R"}),s.jsx("div",{children:"P = E  I"}),s.jsx("div",{children:"I = E  R"}),s.jsx("div",{children:"P = I  R"}),s.jsx("div",{children:"R = E  I"}),s.jsx("div",{children:"P = E  R"})]})]})}),hu={"4x1.25-round-octagon":{capacity:12.5,name:'4" x 1-1/4" Round/Octagon',type:"round-octagon"},"4x1.5-round-octagon":{capacity:15.5,name:'4" x 1-1/2" Round/Octagon',type:"round-octagon"},"4x2.125-round-octagon":{capacity:21.5,name:'4" x 2-1/8" Round/Octagon',type:"round-octagon"},"4x1.25-square":{capacity:18,name:'4" x 1-1/4" Square',type:"square"},"4x1.5-square":{capacity:21,name:'4" x 1-1/2" Square',type:"square"},"4x2.125-square":{capacity:30.3,name:'4" x 2-1/8" Square',type:"square"},"4-11/16x1.25-square":{capacity:25.5,name:'4-11/16" x 1-1/4" Square',type:"square"},"4-11/16x1.5-square":{capacity:29.5,name:'4-11/16" x 1-1/2" Square',type:"square"},"4-11/16x2.125-square":{capacity:42,name:'4-11/16" x 2-1/8" Square',type:"square"},"3x2x1.5-device":{capacity:7.5,name:'3" x 2" x 1-1/2" Device',type:"device"},"3x2x2-device":{capacity:10,name:'3" x 2" x 2" Device',type:"device"},"3x2x2.25-device":{capacity:10.5,name:'3" x 2" x 2-1/4" Device',type:"device"},"3x2x2.5-device":{capacity:12.5,name:'3" x 2" x 2-1/2" Device',type:"device"},"3x2x2.75-device":{capacity:14,name:'3" x 2" x 2-3/4" Device',type:"device"},"3x2x3.5-device":{capacity:18,name:'3" x 2" x 3-1/2" Device',type:"device"},"4x2.125x1.5-device":{capacity:10.3,name:'4" x 2-1/8" x 1-1/2" Device',type:"device"},"4x2.125x1.875-device":{capacity:13,name:'4" x 2-1/8" x 1-7/8" Device',type:"device"},"4x2.125x2.125-device":{capacity:14.5,name:'4" x 2-1/8" x 2-1/8" Device',type:"device"},"3.5x2x2.5-masonry":{capacity:14,name:'3-1/2" x 2" x 2-1/2" Masonry',type:"masonry"},"3.5x2x3.5-masonry":{capacity:21,name:'3-1/2" x 2" x 3-1/2" Masonry',type:"masonry"},"fs-1.25-single":{capacity:13.5,name:'FS Single Cover/Gang (1-1/4" min)',type:"fs-fd"},"fd-2.125-single":{capacity:18,name:'FD Single Cover/Gang (2-1/8" min)',type:"fs-fd"},"fs-1.25-multiple":{capacity:18,name:'FS Multiple Cover/Gang (1-1/4" min)',type:"fs-fd"},"fd-2.125-multiple":{capacity:24,name:'FD Multiple Cover/Gang (2-1/8" min)',type:"fs-fd"}},xN={18:1.5,16:1.75,14:2,12:2.25,10:2.5,8:3,6:5},vN=["18","16","14","12","10","8","6"],bN=r=>{var e;return((e=hu[r])==null?void 0:e.capacity)||0},wN=r=>{var e;return((e=hu[r])==null?void 0:e.name)||"Unknown Box"},Db=r=>xN[r]||0,Gp={mainSection:"NEC 314.16 - Number of Conductors in Outlet, Device, and Junction Boxes",calculations:"NEC 314.16(B) - Box Fill Calculations",table:"NEC Table 314.16(B) - Volume Allowance Required per Conductor",rules:["Each conductor = volume from Table 314.16(B)","Each device (receptacle/switch) counts as 2 conductor volumes","All equipment grounding conductors combined count as 1 conductor volume","One or more cable clamps count as 1 conductor volume","Conductor size for devices/clamps/grounds is based on largest conductor entering the box"]},SN=fe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=fe.useState("4x1.5-square"),[o,l]=fe.useState([{size:"12",count:""}]),[u,h]=fe.useState({outlets:"",switches:"",clamps:"",groundWires:!1}),d={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},g=()=>{l([...o,{size:"12",count:""}])},b=O=>{o.length>1&&l(o.filter(($,F)=>F!==O))},S=(O,$,F)=>{const ie=[...o];ie[O][$]=F,l(ie)},B=(()=>{let O=0;const $=o.map(w=>{const N=parseInt(w.count)||0,D=Db(w.size),q=D*N;return O+=q,{size:w.size,count:N,allowanceEach:D,subtotal:q}}),F=o.reduce((w,N)=>{if((parseInt(N.count)||0)>0){const q=parseInt(N.size.replace("/",""))||0,ne=parseInt(w.replace("/",""))||0;return q<ne?N.size:w}return w},"14"),ie=Db(F),ue=parseInt(u.outlets)||0,V=parseInt(u.switches)||0,k=(ue+V)*2*ie;O+=k;const M=(parseInt(u.clamps)||0)>0?ie:0;O+=M;const C=u.groundWires?ie:0;return O+=C,{conductorDetails:$,deviceFill:k,clampFill:M,groundFill:C,totalFill:O,largestWireSize:F,deviceWireAllowance:ie}})(),E=bN(n),L=E>0?(B.totalFill/E*100).toFixed(1):0,A=B.totalFill>E;return fe.useImperativeHandle(t,()=>({exportPDF:()=>{const O={};o.forEach((k,I)=>{const M=parseInt(k.count)||0;M>0&&(O[`Conductor ${I+1}`]=`${M} ${k.size} AWG`)});const $={};B.conductorDetails.forEach((k,I)=>{k.count>0&&($[`${k.count} ${k.size} AWG`]=`${k.allowanceEach} cu.in. each = ${k.subtotal.toFixed(2)} cu.in. total`)});const F=parseInt(u.outlets)||0,ie=parseInt(u.switches)||0,ue=parseInt(u.clamps)||0,V={calculatorName:"Box Fill Calculator",inputs:{boxType:`${wN(n)} (${E} cu.in.)`,...O,receptaclesOutlets:F>0?`${F} (counts as ${F*2} conductors)`:"0",switches:ie>0?`${ie} (counts as ${ie*2} conductors)`:"0",cableClamps:ue>0?`${ue} (counts as 1 conductor volume)`:"0",equipmentGroundingConductors:u.groundWires?"Yes (counts as 1 conductor volume)":"No"},results:{boxCapacity:`${E} cu.in.`,calculatedFill:`${B.totalFill.toFixed(2)} cu.in.`,fillPercentage:`${L}%`,status:A?" OVERFILLED - Violates NEC 314.16":" Within NEC limits",deviceFill:B.deviceFill>0?`${B.deviceFill.toFixed(2)} cu.in.`:"N/A",clampFill:B.clampFill>0?`${B.clampFill.toFixed(2)} cu.in.`:"N/A",groundFill:B.groundFill>0?`${B.groundFill.toFixed(2)} cu.in.`:"N/A"},additionalInfo:{...$,largestWireSize:`${B.largestWireSize} AWG (used for device/clamp/ground allowance)`,deviceWireAllowance:`${B.deviceWireAllowance} cu.in. per conductor`},necReferences:[Gp.mainSection,Gp.calculations,Gp.table,...Gp.rules,A?"WARNING: This configuration exceeds the maximum allowable box fill":null].filter(Boolean)};cn(V)}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Box Selection"}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Box Type"}),s.jsxs("select",{value:n,onChange:O=>i(O.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:[s.jsx("optgroup",{label:"Device Boxes (Single Gang)",children:Object.entries(hu).filter(([O,$])=>$.type==="device-single").map(([O,$])=>s.jsxs("option",{value:O,children:[$.name," - ",$.capacity," cu.in."]},O))}),s.jsx("optgroup",{label:"Device Boxes (Multi-Gang)",children:Object.entries(hu).filter(([O,$])=>$.type==="device-multi").map(([O,$])=>s.jsxs("option",{value:O,children:[$.name," - ",$.capacity," cu.in."]},O))}),s.jsx("optgroup",{label:"Square Boxes",children:Object.entries(hu).filter(([O,$])=>$.type==="square").map(([O,$])=>s.jsxs("option",{value:O,children:[$.name," - ",$.capacity," cu.in."]},O))}),s.jsx("optgroup",{label:"Round/Octagon Boxes",children:Object.entries(hu).filter(([O,$])=>$.type==="round-octagon").map(([O,$])=>s.jsxs("option",{value:O,children:[$.name," - ",$.capacity," cu.in."]},O))}),s.jsx("optgroup",{label:"Masonry Boxes",children:Object.entries(hu).filter(([O,$])=>$.type==="masonry").map(([O,$])=>s.jsxs("option",{value:O,children:[$.name," - ",$.capacity," cu.in."]},O))})]})]})]}),s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Conductors"}),o.map((O,$)=>s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${d.cardBorder}`},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[s.jsxs("h4",{style:{fontWeight:"600",color:d.labelText,margin:0,fontSize:"0.875rem"},children:["Wire Size ",$+1]}),o.length>1&&s.jsx("button",{onClick:()=>b($),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:s.jsx(Tc,{size:20})})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[s.jsx("select",{value:O.size,onChange:F=>S($,"size",F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:vN.map(F=>s.jsxs("option",{value:F,children:[F," AWG"]},F))}),s.jsx("input",{type:"number",value:O.count,onChange:F=>S($,"count",F.target.value),placeholder:"Quantity",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}})]})]},$)),s.jsxs("button",{onClick:g,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[s.jsx(ma,{size:16}),"Add Wire Size"]}),s.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.5rem",margin:"0.5rem 0 0 0"},children:"Count all insulated conductors entering, leaving, or passing through the box"})]}),s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Devices & Other Items"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Receptacles/Outlets"}),s.jsx("input",{type:"number",value:u.outlets,onChange:O=>h({...u,outlets:O.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}}),s.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"Each device counts as 2 conductors"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Switches"}),s.jsx("input",{type:"number",value:u.switches,onChange:O=>h({...u,switches:O.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}}),s.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"Each device counts as 2 conductors"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Cable Clamps"}),s.jsx("input",{type:"number",value:u.clamps,onChange:O=>h({...u,clamps:O.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}}),s.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"One or more = 1 conductor volume"})]})]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:u.groundWires,onChange:O=>h({...u,groundWires:O.target.checked}),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),s.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:d.labelText},children:"Equipment Grounding Conductors Present"})]}),s.jsx("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginLeft:"2rem",margin:"0.25rem 0 0 2rem"},children:"All grounds combined count as 1 conductor volume"})]}),s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Box Capacity"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:E}),s.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"cu.in."})]}),s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Calculated Fill"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:B.totalFill.toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"cu.in."})]}),s.jsxs("div",{style:{background:A?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:A?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Fill Percentage"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:A?"#dc2626":"#1e40af"},children:[L,"%"]}),s.jsx("div",{style:{fontSize:"0.75rem",color:A?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:A?"OVERFILLED":"Within Limits"})]})]}),B.conductorDetails.length>0&&B.conductorDetails.some(O=>O.count>0)&&s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${d.cardBorder}`},children:[s.jsx("strong",{style:{color:d.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Conductor Breakdown:"}),B.conductorDetails.map((O,$)=>O.count>0&&s.jsxs("div",{style:{marginTop:$>0?"0.75rem":0,paddingTop:$>0?"0.75rem":0,borderTop:$>0?`1px solid ${d.cardBorder}`:"none",fontSize:"0.875rem",color:d.labelText},children:[s.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:[O.count," ",O.size," AWG"]}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:d.subtleText},children:[O.allowanceEach," cu.in. each = ",O.subtotal.toFixed(2)," cu.in. total"]})]},$))]}),!A&&B.totalFill>0?s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Box fill is within NEC limits"}),B.deviceFill>0&&s.jsxs("div",{children:["Devices: ",B.deviceFill.toFixed(2)," cu.in."]}),B.clampFill>0&&s.jsxs("div",{children:["Clamps: ",B.clampFill.toFixed(2)," cu.in."]}),B.groundFill>0&&s.jsxs("div",{children:["Grounds: ",B.groundFill.toFixed(2)," cu.in."]})]})]})}):A?s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",fontSize:"0.9375rem"},children:"BOX OVERFILLED - Violates NEC 314.16"}),s.jsx("div",{style:{marginBottom:"0.5rem"},children:"Reduce number of devices or use larger box"}),B.deviceFill>0&&s.jsxs("div",{children:["Devices: ",B.deviceFill.toFixed(2)," cu.in."]}),B.clampFill>0&&s.jsxs("div",{children:["Clamps: ",B.clampFill.toFixed(2)," cu.in."]}),B.groundFill>0&&s.jsxs("div",{children:["Grounds: ",B.groundFill.toFixed(2)," cu.in."]})]})]})}):null]}),s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${d.cardBorder}`,fontSize:"0.8125rem",color:d.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:d.cardText},children:"NEC 314.16 Requirements:"}),"Conductor = table volume  Device = 2 volumes  All grounds = 1 volume  Clamps = 1 volume"]})]})}),Wb=[{value:"straight",label:"Straight Pull"},{value:"angle",label:"Angle Pull (L-shaped)"},{value:"u-pull",label:"U-Pull (Same Side)"}],_N=["0.5","0.75","1","1.25","1.5","2","2.5","3","3.5","4","5","6"],TN={"0.5":'1/2"',"0.75":'3/4"',1:'1"',"1.25":'1-1/4"',"1.5":'1-1/2"',2:'2"',"2.5":'2-1/2"',3:'3"',"3.5":'3-1/2"',4:'4"',5:'5"',6:'6"'},Zd={straight:{length:8},angle:{distance:6},uPull:{distance:6}},Qg=r=>TN[r]||r,h2=r=>parseFloat(r),AN=r=>{const e=h2(r),t=e*Zd.straight.length;return{minLength:t,formula:`${e}"  ${Zd.straight.length} = ${t}"`,necReference:"NEC 314.28(A)(1)"}},CN=r=>{if(!r||r.length===0)return null;const e=r.map(o=>h2(o.size)),t=Math.max(...e),n=e.reduce((o,l)=>o+l,0)-t,i=t*Zd.angle.distance+n;return{minDistance:i,largestRaceway:t,sumOfOthers:n,formula:`(${t}"  ${Zd.angle.distance}) + ${n}" = ${i}"`,necReference:"NEC 314.28(A)(2)"}},kN=r=>{const e=h2(r),t=e*Zd.uPull.distance;return{minDistance:t,formula:`${e}"  ${Zd.uPull.distance} = ${t}"`,necReference:"NEC 314.28(A)(2)"}},Xg={mainSection:"NEC 314.28 - Pull and Junction Boxes and Conduit Bodies",conductorSize:"Applies to boxes containing conductors 4 AWG or larger",rules:["Straight Pull: Length = 8  trade size of largest raceway","Angle/U Pull: Distance = 6  largest raceway + sum of other raceways on same wall","Rows of conduits: Each row calculated separately","Box depth: Must accommodate the largest conduit locknut and bushing","These are minimum dimensions - larger boxes may be used"]},IN=fe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=fe.useState("straight"),[o,l]=fe.useState([{size:"1"}]),u={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},h=()=>{l([...o,{size:"1"}])},d=x=>{o.length>1&&l(o.filter((B,E)=>E!==x))},g=(x,B)=>{const E=[...o];E[x].size=B,l(E)},S=(()=>{const B=Math.max(...o.map(E=>parseFloat(E.size))).toString();if(n==="straight")return AN(B);if(n==="angle")return CN(o);if(n==="u-pull")return kN(B)})();return fe.useImperativeHandle(t,()=>({exportPDF:()=>{var L;const x=((L=Wb.find(A=>A.value===n))==null?void 0:L.label)||n,B=o.map((A,O)=>`Raceway ${O+1}: ${Qg(A.size)}`).join(", "),E={calculatorName:"Pull Box Calculator",inputs:{pullType:x,numberOfRaceways:o.length,raceways:B,largestRaceway:S?Qg(Math.max(...o.map(A=>A.size)).toString()):"N/A"},results:{minimumDimension:S?`${S.minLength||S.minDistance}" inches`:"N/A",formula:(S==null?void 0:S.formula)||"N/A",necReference:(S==null?void 0:S.necReference)||"N/A"},additionalInfo:{calculation:(S==null?void 0:S.formula)||"N/A",note:"These are minimum dimensions per NEC. Larger boxes may be used.",conductorRequirement:"Applies to conductors 4 AWG or larger"},necReferences:[Xg.mainSection,S==null?void 0:S.necReference,Xg.conductorSize,...Xg.rules].filter(Boolean)};cn(E)}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${u.cardBorder}`,paddingBottom:"0.5rem"},children:"Pull Box Configuration"}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:u.labelText,marginBottom:"0.5rem"},children:"Pull Type"}),s.jsx("select",{value:n,onChange:x=>i(x.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"},children:Wb.map(x=>s.jsx("option",{value:x.value,children:x.label},x.value))})]}),s.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#dbeafe",border:"1px solid #93c5fd",borderRadius:"8px",fontSize:"0.8125rem",color:"#1e40af",display:"flex",gap:"0.5rem"},children:[s.jsx(xs,{size:16,style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{children:[n==="straight"&&"Straight Pull: Conduits enter and exit on opposite sides",n==="angle"&&"Angle Pull: Conduits enter on one side and exit on adjacent side (L-shaped)",n==="u-pull"&&"U-Pull: Conduits enter and exit on the same side"]})]})]}),s.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${u.cardBorder}`,paddingBottom:"0.5rem"},children:[n==="straight"&&"Raceway Size",n==="angle"&&"Raceways on Same Wall",n==="u-pull"&&"Raceway Size"]}),o.map((x,B)=>s.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${u.cardBorder}`},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[s.jsx("h4",{style:{fontWeight:"600",color:u.labelText,margin:0,fontSize:"0.875rem"},children:n==="angle"?B===0?"Largest Raceway":`Other Raceway ${B}`:"Largest Raceway"}),n==="angle"&&B>0&&s.jsx("button",{onClick:()=>d(B),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:s.jsx(Tc,{size:20})})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:u.labelText,marginBottom:"0.5rem"},children:"Trade Size"}),s.jsx("select",{value:x.size,onChange:E=>g(B,E.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"},children:_N.map(E=>s.jsx("option",{value:E,children:Qg(E)},E))})]})]},B)),n==="angle"&&s.jsxs("button",{onClick:h,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[s.jsx(ma,{size:16}),"Add Other Raceway"]}),s.jsxs("p",{style:{fontSize:"0.75rem",color:u.subtleText,marginTop:"0.5rem",margin:"0.5rem 0 0 0"},children:[n==="straight"&&"Enter the largest raceway entering the box",n==="angle"&&"Enter largest raceway first, then add any other raceways entering on the same wall",n==="u-pull"&&"Enter the largest raceway entering and exiting on the same side"]})]}),S&&s.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem"},children:"Minimum Box Dimensions"}),s.jsxs("div",{style:{background:u.sectionBg,padding:"1.5rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsxs("div",{style:{fontSize:"0.875rem",color:u.labelText,marginBottom:"0.5rem"},children:["Minimum ",n==="straight"?"Length":"Distance"]}),s.jsxs("div",{style:{fontSize:"3rem",fontWeight:"700",color:"#3b82f6",lineHeight:1},children:[(S.minLength||S.minDistance).toFixed(1),'"']}),s.jsx("div",{style:{fontSize:"0.875rem",color:u.subtleText,marginTop:"0.5rem"},children:S.formula})]}),s.jsx("div",{style:{background:"#dbeafe",border:"1px solid #93c5fd",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"NEC Requirement Met"}),s.jsxs("div",{style:{marginBottom:"0.5rem"},children:["Reference: ",S.necReference]}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"These are minimum dimensions. Larger boxes may be used for ease of installation."})]})}),n==="angle"&&S.largestRaceway&&s.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",marginTop:"1rem",border:`1px solid ${u.cardBorder}`},children:[s.jsx("strong",{style:{color:u.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Angle Pull Calculation:"}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:u.labelText,lineHeight:"1.8"},children:[s.jsxs("div",{style:{marginBottom:"0.5rem"},children:[s.jsx("strong",{children:"Step 1:"})," Largest raceway  6"]}),s.jsxs("div",{style:{paddingLeft:"1rem",color:u.subtleText},children:[S.largestRaceway,'"  6 = ',(S.largestRaceway*6).toFixed(1),'"']}),s.jsxs("div",{style:{marginTop:"0.75rem",marginBottom:"0.5rem"},children:[s.jsx("strong",{children:"Step 2:"})," Add other raceways on same wall"]}),s.jsx("div",{style:{paddingLeft:"1rem",color:u.subtleText},children:S.sumOfOthers>0?`Sum of others = ${S.sumOfOthers.toFixed(1)}"`:"No other raceways"}),s.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:`1px solid ${u.cardBorder}`,fontWeight:"600",color:"#3b82f6"},children:["Total: ",(S.largestRaceway*6).toFixed(1),'" + ',S.sumOfOthers.toFixed(1),'" = ',S.minDistance.toFixed(1),'"']})]})]})]}),s.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${u.cardBorder}`,fontSize:"0.8125rem",color:u.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:u.cardText},children:"NEC 314.28 Requirements:"}),s.jsx("div",{style:{lineHeight:"1.6"},children:"Straight: 8 largest  Angle/U: 6 largest + others  For conductors 4 AWG or larger"})]})]})}),EN=[{value:"emt",label:"EMT - Electrical Metallic Tubing"},{value:"ent",label:"ENT - Electrical Nonmetallic Tubing"},{value:"fmc",label:"FMC - Flexible Metal Conduit"},{value:"imc",label:"IMC - Intermediate Metal Conduit"},{value:"lfnc-b",label:"LFNC-B - Liquidtight Flexible Nonmetallic Conduit (Type B)"},{value:"lfnc-a",label:"LFNC-A - Liquidtight Flexible Nonmetallic Conduit (Type A)"},{value:"lfmc",label:"LFMC - Liquidtight Flexible Metal Conduit"},{value:"rmc",label:"RMC - Rigid Metal Conduit"},{value:"pvc-40",label:"PVC Schedule 40"},{value:"pvc-80",label:"PVC Schedule 80"},{value:"pvc-a",label:"PVC Type A"},{value:"pvc-eb",label:"PVC Type EB"}],jN={"0.375":'3/8"',"0.5":'1/2"',"0.75":'3/4"',1:'1"',"1.25":'1-1/4"',"1.5":'1-1/2"',2:'2"',"2.5":'2-1/2"',3:'3"',"3.5":'3-1/2"',4:'4"',5:'5"',6:'6"'},z4={"emt-0.5":{name:'1/2" EMT',area:.304},"emt-0.75":{name:'3/4" EMT',area:.533},"emt-1":{name:'1" EMT',area:.864},"emt-1.25":{name:'1-1/4" EMT',area:1.496},"emt-1.5":{name:'1-1/2" EMT',area:2.036},"emt-2":{name:'2" EMT',area:3.356},"emt-2.5":{name:'2-1/2" EMT',area:5.858},"emt-3":{name:'3" EMT',area:8.846},"emt-3.5":{name:'3-1/2" EMT',area:11.545},"emt-4":{name:'4" EMT',area:14.753},"ent-0.5":{name:'1/2" ENT',area:.246},"ent-0.75":{name:'3/4" ENT',area:.454},"ent-1":{name:'1" ENT',area:.785},"ent-1.25":{name:'1-1/4" ENT',area:1.41},"ent-1.5":{name:'1-1/2" ENT',area:1.936},"ent-2":{name:'2" ENT',area:3.205},"fmc-0.375":{name:'3/8" FMC',area:.116},"fmc-0.5":{name:'1/2" FMC',area:.317},"fmc-0.75":{name:'3/4" FMC',area:.533},"fmc-1":{name:'1" FMC',area:.817},"fmc-1.25":{name:'1-1/4" FMC',area:1.277},"fmc-1.5":{name:'1-1/2" FMC',area:1.858},"fmc-2":{name:'2" FMC',area:3.269},"fmc-2.5":{name:'2-1/2" FMC',area:4.909},"fmc-3":{name:'3" FMC',area:7.069},"fmc-3.5":{name:'3-1/2" FMC',area:9.621},"fmc-4":{name:'4" FMC',area:12.566},"imc-0.5":{name:'1/2" IMC',area:.342},"imc-0.75":{name:'3/4" IMC',area:.586},"imc-1":{name:'1" IMC',area:.959},"imc-1.25":{name:'1-1/4" IMC',area:1.647},"imc-1.5":{name:'1-1/2" IMC',area:2.225},"imc-2":{name:'2" IMC',area:3.63},"imc-2.5":{name:'2-1/2" IMC',area:5.135},"imc-3":{name:'3" IMC',area:7.922},"imc-3.5":{name:'3-1/2" IMC',area:10.584},"imc-4":{name:'4" IMC',area:13.631},"lfnc-b-0.375":{name:'3/8" LFNC-B',area:.192},"lfnc-b-0.5":{name:'1/2" LFNC-B',area:.314},"lfnc-b-0.75":{name:'3/4" LFNC-B',area:.541},"lfnc-b-1":{name:'1" LFNC-B',area:.873},"lfnc-b-1.25":{name:'1-1/4" LFNC-B',area:1.528},"lfnc-b-1.5":{name:'1-1/2" LFNC-B',area:1.981},"lfnc-b-2":{name:'2" LFNC-B',area:3.246},"lfnc-a-0.375":{name:'3/8" LFNC-A',area:.192},"lfnc-a-0.5":{name:'1/2" LFNC-A',area:.312},"lfnc-a-0.75":{name:'3/4" LFNC-A',area:.535},"lfnc-a-1":{name:'1" LFNC-A',area:.854},"lfnc-a-1.25":{name:'1-1/4" LFNC-A',area:1.502},"lfnc-a-1.5":{name:'1-1/2" LFNC-A',area:2.018},"lfnc-a-2":{name:'2" LFNC-A',area:3.343},"lfmc-0.375":{name:'3/8" LFMC',area:.192},"lfmc-0.5":{name:'1/2" LFMC',area:.314},"lfmc-0.75":{name:'3/4" LFMC',area:.541},"lfmc-1":{name:'1" LFMC',area:.873},"lfmc-1.25":{name:'1-1/4" LFMC',area:1.528},"lfmc-1.5":{name:'1-1/2" LFMC',area:1.981},"lfmc-2":{name:'2" LFMC',area:3.246},"lfmc-2.5":{name:'2-1/2" LFMC',area:4.881},"lfmc-3":{name:'3" LFMC',area:7.475},"lfmc-3.5":{name:'3-1/2" LFMC',area:9.731},"lfmc-4":{name:'4" LFMC',area:12.692},"rmc-0.5":{name:'1/2" RMC',area:.314},"rmc-0.75":{name:'3/4" RMC',area:.549},"rmc-1":{name:'1" RMC',area:.887},"rmc-1.25":{name:'1-1/4" RMC',area:1.526},"rmc-1.5":{name:'1-1/2" RMC',area:2.071},"rmc-2":{name:'2" RMC',area:3.408},"rmc-2.5":{name:'2-1/2" RMC',area:4.866},"rmc-3":{name:'3" RMC',area:7.499},"rmc-3.5":{name:'3-1/2" RMC',area:10.01},"rmc-4":{name:'4" RMC',area:12.882},"rmc-5":{name:'5" RMC',area:20.212},"rmc-6":{name:'6" RMC',area:29.158},"pvc-40-0.5":{name:'1/2" PVC Sch 40',area:.285},"pvc-40-0.75":{name:'3/4" PVC Sch 40',area:.508},"pvc-40-1":{name:'1" PVC Sch 40',area:.832},"pvc-40-1.25":{name:'1-1/4" PVC Sch 40',area:1.453},"pvc-40-1.5":{name:'1-1/2" PVC Sch 40',area:1.986},"pvc-40-2":{name:'2" PVC Sch 40',area:3.291},"pvc-40-2.5":{name:'2-1/2" PVC Sch 40',area:4.695},"pvc-40-3":{name:'3" PVC Sch 40',area:7.268},"pvc-40-3.5":{name:'3-1/2" PVC Sch 40',area:9.737},"pvc-40-4":{name:'4" PVC Sch 40',area:12.554},"pvc-40-5":{name:'5" PVC Sch 40',area:19.761},"pvc-40-6":{name:'6" PVC Sch 40',area:28.567},"pvc-80-0.5":{name:'1/2" PVC Sch 80',area:.217},"pvc-80-0.75":{name:'3/4" PVC Sch 80',area:.409},"pvc-80-1":{name:'1" PVC Sch 80',area:.688},"pvc-80-1.25":{name:'1-1/4" PVC Sch 80',area:1.237},"pvc-80-1.5":{name:'1-1/2" PVC Sch 80',area:1.711},"pvc-80-2":{name:'2" PVC Sch 80',area:2.874},"pvc-80-2.5":{name:'2-1/2" PVC Sch 80',area:4.119},"pvc-80-3":{name:'3" PVC Sch 80',area:6.442},"pvc-80-3.5":{name:'3-1/2" PVC Sch 80',area:8.688},"pvc-80-4":{name:'4" PVC Sch 80',area:11.258},"pvc-80-5":{name:'5" PVC Sch 80',area:17.855},"pvc-80-6":{name:'6" PVC Sch 80',area:25.598},"pvc-a-0.5":{name:'1/2" PVC Type A',area:.385},"pvc-a-0.75":{name:'3/4" PVC Type A',area:.65},"pvc-a-1":{name:'1" PVC Type A',area:1.084},"pvc-a-1.25":{name:'1-1/4" PVC Type A',area:1.767},"pvc-a-1.5":{name:'1-1/2" PVC Type A',area:2.324},"pvc-a-2":{name:'2" PVC Type A',area:3.647},"pvc-a-2.5":{name:'2-1/2" PVC Type A',area:5.453},"pvc-a-3":{name:'3" PVC Type A',area:8.194},"pvc-a-3.5":{name:'3-1/2" PVC Type A',area:10.694},"pvc-a-4":{name:'4" PVC Type A',area:13.723},"pvc-eb-2":{name:'2" PVC Type EB',area:3.874},"pvc-eb-3":{name:'3" PVC Type EB',area:8.709},"pvc-eb-3.5":{name:'3-1/2" PVC Type EB',area:11.365},"pvc-eb-4":{name:'4" PVC Type EB',area:14.448},"pvc-eb-5":{name:'5" PVC Type EB',area:22.195},"pvc-eb-6":{name:'6" PVC Type EB',area:31.53}},$b=r=>{const e=r+"-";return Object.keys(z4).filter(n=>n.startsWith(e)).map(n=>n.replace(e,"")).sort((n,i)=>parseFloat(n)-parseFloat(i))},RN=(r,e)=>{const t=`${r}-${e}`;return z4[t]||null},PN=[{value:"thhn",label:"THHN/THWN-2"},{value:"thw",label:"THW"},{value:"thhw",label:"THHW"},{value:"xhhw",label:"XHHW-2"},{value:"xhh",label:"XHH"}],NN=["18","16","14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750","800","900","1000","1250","1500","1750","2000"],Y1={thhn:{14:.0097,12:.0133,10:.0211,8:.0366,6:.0507,4:.0824,3:.0973,2:.1158,1:.1562,"1/0":.1855,"2/0":.2223,"3/0":.2679,"4/0":.3237,250:.397,300:.4608,350:.5242,400:.5863,500:.7073,600:.8676,700:.9887,750:1.0496,800:1.1085,900:1.2311,1e3:1.3478},thwn:{14:.0097,12:.0133,10:.0211,8:.0366,6:.0507,4:.0824,3:.0973,2:.1158,1:.1562,"1/0":.1855,"2/0":.2223,"3/0":.2679,"4/0":.3237,250:.397,300:.4608,350:.5242,400:.5863,500:.7073,600:.8676,700:.9887,750:1.0496,800:1.1085,900:1.2311,1e3:1.3478},thw:{14:.0139,12:.0181,10:.0243,8:.0437,6:.0726,4:.0973,3:.1134,2:.1333,1:.1901,"1/0":.2223,"2/0":.2624,"3/0":.3117,"4/0":.3718,250:.4596,300:.5281,350:.5958,400:.6619,500:.7901,600:.9729,700:1.101,750:1.1652,800:1.2272,900:1.3561,1e3:1.4784,1250:1.8602,1500:2.1695,1750:2.4773,2e3:2.7818},thhw:{14:.0139,12:.0181,10:.0243,8:.0437,6:.0726,4:.0973,3:.1134,2:.1333,1:.1901,"1/0":.2223,"2/0":.2624,"3/0":.3117,"4/0":.3718,250:.4596,300:.5281,350:.5958,400:.6619,500:.7901,600:.9729,700:1.101,750:1.1652,800:1.2272,900:1.3561,1e3:1.4784,1250:1.8602,1500:2.1695,1750:2.4773,2e3:2.7818},xhhw:{14:.0139,12:.0181,10:.0243,8:.0437,6:.059,4:.0814,3:.0962,2:.1146,1:.1534,"1/0":.1825,"2/0":.219,"3/0":.2642,"4/0":.3197,250:.3904,300:.4536,350:.5166,400:.5782,500:.6984,600:.8709,700:.9923,750:1.0532,800:1.1122,900:1.2351,1e3:1.3519,1250:1.718,1500:2.0157,1750:2.3127,2e3:2.6073},xhh:{14:.0139,12:.0181,10:.0243,8:.0437,6:.059,4:.0814,3:.0962,2:.1146,1:.1534,"1/0":.1825,"2/0":.219,"3/0":.2642,"4/0":.3197,250:.3904,300:.4536,350:.5166,400:.5782,500:.6984,600:.8709,700:.9923,750:1.0532,800:1.1122,900:1.2351,1e3:1.3519,1250:1.718,1500:2.0157,1750:2.3127,2e3:2.6073}},BN=(r,e)=>{var t;return((t=Y1[r])==null?void 0:t[e])||0},LN=r=>Y1[r]?NN.filter(e=>Y1[r][e]!==void 0):[],FN=fe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=fe.useState("emt"),[o,l]=fe.useState("0.5"),[u,h]=fe.useState([{wireType:"thwn",size:"12",count:""}]),d={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},g=$b(n),b=A=>{i(A);const O=$b(A);O.includes(o)||l(O[0]||"0.5")},S=()=>{h([...u,{wireType:"thwn",size:"12",count:""}])},x=A=>{u.length>1&&h(u.filter((O,$)=>$!==A))},B=(A,O,$)=>{const F=[...u];F[A][O]=$,h(F)},E=()=>{const A=RN(n,o);if(!A)return null;const O=A.area;let $=0,F=0;const ie=u.map(k=>{const I=parseInt(k.count)||0,M=BN(k.wireType,k.size),C=M*I;return $+=C,F+=I,{wireType:k.wireType,size:k.size,count:I,areaEach:M,subtotal:C}}),ue=($/O*100).toFixed(1);let V=40;return F===1?V=53:F===2&&(V=31),{conduitInfo:A,conduitArea:O.toFixed(3),totalWireArea:$.toFixed(3),fillPercentage:parseFloat(ue),maxFill:V,totalWireCount:F,conductorDetails:ie,isOverfilled:parseFloat(ue)>V}};fe.useImperativeHandle(t,()=>({exportPDF:()=>{const A=E();if(A.totalWireCount===0){alert("Please enter at least one conductor with a quantity before exporting");return}const O=A.conductorDetails.filter(F=>F.count>0).map(F=>`${F.count} ${F.size} AWG ${F.wireType.toUpperCase()}-2: ${F.areaEach.toFixed(4)} sq.in. each = ${F.subtotal.toFixed(4)} sq.in. total`).join("; "),$={calculatorName:"Conduit Fill Calculator",inputs:{conduitType:A.conduitInfo.name,totalConductors:A.totalWireCount},results:{conduitArea:`${A.conduitArea} sq.in.`,totalWireArea:`${A.totalWireArea} sq.in.`,fillPercentage:`${A.fillPercentage}%`,maximumAllowedFill:`${A.maxFill}%`,complianceStatus:A.isOverfilled?"OVERFILLED - Violates NEC":"Within NEC Limits"},additionalInfo:{conductorBreakdown:O,fillRule:A.totalWireCount===1?"1 conductor: 53% max fill":A.totalWireCount===2?"2 conductors: 31% max fill":"3+ conductors: 40% max fill",recommendation:A.isOverfilled?"Reduce number of conductors or use larger conduit":"Installation meets NEC requirements"},necReferences:["NEC Chapter 9, Table 1 - Percent of Cross Section of Conduit and Tubing for Conductors","NEC Chapter 9, Table 4 - Dimensions and Percent Area of Conduit and Tubing","NEC Chapter 9, Table 5 - Dimensions of Insulated Conductors and Fixture Wires","1 conductor: 53% max fill","2 conductors: 31% max fill","3+ conductors: 40% max fill","Nipples (24 inches or less): 60% max fill"]};cn($)}}));const L=E();return s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Conduit Selection"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Conduit Type"}),s.jsx("select",{value:n,onChange:A=>b(A.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:EN.map(A=>s.jsx("option",{value:A.value,children:A.label},A.value))})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Conduit Size"}),s.jsx("select",{value:o,onChange:A=>l(A.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:g.map(A=>s.jsx("option",{value:A,children:jN[A]||A},A))})]})]})]}),s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Conductors"}),u.map((A,O)=>s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${d.cardBorder}`},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[s.jsxs("h4",{style:{fontWeight:"600",color:d.labelText,margin:0,fontSize:"0.875rem"},children:["Conductor ",O+1]}),u.length>1&&s.jsx("button",{onClick:()=>x(O),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:s.jsx(Tc,{size:20})})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"0.75rem"},children:[s.jsx("select",{value:A.wireType,onChange:$=>B(O,"wireType",$.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:PN.map($=>s.jsx("option",{value:$.value,children:$.label},$.value))}),s.jsx("select",{value:A.size,onChange:$=>B(O,"size",$.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:LN(A.wireType).map($=>{const ie=!$.includes("/")&&parseInt($)>=250?"kcmil":"AWG";return s.jsxs("option",{value:$,children:[$," ",ie]},$)})}),s.jsx("input",{type:"number",value:A.count,onChange:$=>B(O,"count",$.target.value),placeholder:"Quantity",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"}})]})]},O)),s.jsxs("button",{onClick:S,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[s.jsx(ma,{size:16}),"Add Conductor"]})]}),L&&s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Conduit Area"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:L.conduitArea}),s.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"sq.in."})]}),s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginBottom:"0.25rem"},children:"Wire Area"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:d.cardText},children:L.totalWireArea}),s.jsx("div",{style:{fontSize:"0.75rem",color:d.labelText,marginTop:"0.25rem"},children:"sq.in."})]}),s.jsxs("div",{style:{background:L.isOverfilled?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:L.isOverfilled?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Fill Percentage"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:L.isOverfilled?"#dc2626":"#1e40af"},children:[L.fillPercentage,"%"]}),s.jsxs("div",{style:{fontSize:"0.75rem",color:L.isOverfilled?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:["Max: ",L.maxFill,"%"]})]})]}),L.conductorDetails.length>0&&L.totalWireCount>0&&s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${d.cardBorder}`},children:[s.jsx("strong",{style:{color:d.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Conductor Breakdown:"}),L.conductorDetails.map((A,O)=>A.count>0&&s.jsxs("div",{style:{marginTop:O>0?"0.75rem":0,paddingTop:O>0?"0.75rem":0,borderTop:O>0?`1px solid ${d.cardBorder}`:"none",fontSize:"0.875rem",color:d.labelText},children:[s.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:[A.count," ",A.size," ",!A.size.includes("/")&&parseInt(A.size)>=250?"kcmil":"AWG"," ",A.wireType.toUpperCase(),"-2"]}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:d.subtleText},children:[A.areaEach.toFixed(4)," sq.in. each = ",A.subtotal.toFixed(4)," sq.in. total"]})]},O))]}),!L.isOverfilled&&L.totalWireCount>0?s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Conduit fill is within NEC limits"}),s.jsxs("div",{children:["Total conductors: ",L.totalWireCount]})]})]})}):L.isOverfilled?s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",fontSize:"0.9375rem"},children:"CONDUIT OVERFILLED - Violates NEC Chapter 9"}),s.jsx("div",{children:"Reduce number of conductors or use larger conduit"})]})]})}):null]}),s.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${d.cardBorder}`,fontSize:"0.8125rem",color:d.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:d.cardText},children:"NEC Chapter 9, Table 1:"}),'1 conductor: 53%  2 conductors: 31%  3+ conductors: 40%  Nipples (<24"): 60%']})]})}),zN=[{value:"copper",label:"Copper"},{value:"aluminum",label:"Aluminum"}],VN=[{value:"60C",label:"60C (140F)"},{value:"75C",label:"75C (167F)"},{value:"90C",label:"90C (194F)"}],ON=[{value:"18",label:"18 AWG"},{value:"16",label:"16 AWG"},{value:"14",label:"14 AWG"},{value:"12",label:"12 AWG"},{value:"10",label:"10 AWG"},{value:"8",label:"8 AWG"},{value:"6",label:"6 AWG"},{value:"4",label:"4 AWG"},{value:"3",label:"3 AWG"},{value:"2",label:"2 AWG"},{value:"1",label:"1 AWG"},{value:"1/0",label:"1/0 AWG"},{value:"2/0",label:"2/0 AWG"},{value:"3/0",label:"3/0 AWG"},{value:"4/0",label:"4/0 AWG"},{value:"250",label:"250 kcmil"},{value:"300",label:"300 kcmil"},{value:"350",label:"350 kcmil"},{value:"400",label:"400 kcmil"},{value:"500",label:"500 kcmil"},{value:"600",label:"600 kcmil"},{value:"700",label:"700 kcmil"},{value:"750",label:"750 kcmil"},{value:"800",label:"800 kcmil"},{value:"900",label:"900 kcmil"},{value:"1000",label:"1000 kcmil"},{value:"1250",label:"1250 kcmil"},{value:"1500",label:"1500 kcmil"},{value:"1750",label:"1750 kcmil"},{value:"2000",label:"2000 kcmil"}],MN=[{value:"10",label:"10C (50F)"},{value:"15",label:"15C (59F)"},{value:"20",label:"20C (68F)"},{value:"25",label:"25C (77F)"},{value:"30",label:"30C (86F) - Standard"},{value:"35",label:"35C (95F)"},{value:"40",label:"40C (104F)"},{value:"45",label:"45C (113F)"},{value:"50",label:"50C (122F)"}],DN={copper:{"60C":{18:0,16:0,14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:350,700:385,750:400,800:410,900:435,1e3:455,1250:495,1500:525,1750:545,2e3:555},"75C":{18:0,16:0,14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,700:460,750:475,800:490,900:520,1e3:545,1250:590,1500:625,1750:650,2e3:665},"90C":{18:14,16:18,14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535,800:555,900:585,1e3:615,1250:665,1500:705,1750:735,2e3:750}},aluminum:{"60C":{18:0,16:0,14:0,12:15,10:25,8:30,6:40,4:55,3:65,2:75,1:85,"1/0":100,"2/0":115,"3/0":130,"4/0":150,250:170,300:195,350:210,400:225,500:260,600:285,700:310,750:320,800:330,900:355,1e3:375,1250:405,1500:435,1750:455,2e3:470},"75C":{18:0,16:0,14:0,12:20,10:30,8:40,6:50,4:65,3:75,2:90,1:100,"1/0":120,"2/0":135,"3/0":155,"4/0":180,250:205,300:230,350:250,400:270,500:310,600:340,700:375,750:385,800:395,900:425,1e3:445,1250:485,1500:520,1750:545,2e3:560},"90C":{18:0,16:0,14:0,12:25,10:35,8:45,6:55,4:75,3:85,2:100,1:115,"1/0":135,"2/0":150,"3/0":175,"4/0":205,250:230,300:260,350:280,400:305,500:350,600:385,700:420,750:435,800:445,900:480,1e3:500,1250:545,1500:585,1750:615,2e3:630}}},WN={"60C":{10:1.29,15:1.2,20:1.11,25:1.05,30:1,35:.94,40:.88,45:.82,50:.75,55:.67,60:.58,65:.47,70:.33},"75C":{10:1.2,15:1.15,20:1.11,25:1.05,30:1,35:.94,40:.88,45:.82,50:.75,55:.67,60:.58,65:.47,70:.33,75:0},"90C":{10:1.15,15:1.12,20:1.08,25:1.04,30:1,35:.96,40:.91,45:.87,50:.82,55:.76,60:.71,65:.65,70:.58,75:.5,80:.41,85:.29,90:0}},$N={copper:{14:15,12:20,10:30},aluminum:{12:15,10:25}},UN=(r,e,t)=>{var n,i;return((i=(n=DN[r])==null?void 0:n[e])==null?void 0:i[t])||0},qN=(r,e)=>{var t;return((t=WN[r])==null?void 0:t[e])||1},HN=r=>{const e=parseInt(r);return e<=3?1:e<=6?.8:e<=9?.7:e<=20?.5:e<=30?.45:e<=40?.4:.35},GN=(r,e)=>{var t;return((t=$N[r])==null?void 0:t[e])||null},Ub=(r,e)=>e==="18"?"Thermostats, lighting controls, doorbells, signaling circuits":e==="16"?"Electronics, lighting control systems, doorbells, low-voltage applications":r<=15||r<=20?"Lighting circuits, small appliances":r<=25?"General outlets, lighting circuits":r<=30?"Small appliances, dryers (240V)":r<=40?"Electric ranges, large appliances":r<=50?"Electric ranges, welders, heat pumps":r<=100?"Sub-panels, large motors":r<=200?"Main panels, large commercial loads":r<=400?"Service entrances, large commercial/industrial applications":r<=600?"Large service entrances, industrial feeders":"Large industrial services, utility connections",KN=(r,e,t,n,i)=>{const o=qN(e,t),l=HN(n);let u=r*o*l,h=u;return i&&(h=u*.8),{base:r,tempFactor:o,conductorFactor:l,derated:Math.round(u*10)/10,continuous:Math.round(h*10)/10}},qb=r=>({"60C":"60C (140F)","75C":"75C (167F)","90C":"90C (194F)"})[r]||r,JN=r=>({10:"10C (50F)",15:"15C (59F)",20:"20C (68F)",25:"25C (77F)",30:"30C (86F)",35:"35C (95F)",40:"40C (104F)",45:"45C (113F)",50:"50C (122F)"})[r]||`${r}C`,Hb=r=>r.includes("/")?`${r} AWG`:parseInt(r)<=16?`${r} AWG`:`${r} kcmil`,Wh={ampacityTable:"NEC Table 310.16 - Allowable Ampacities of Insulated Conductors",tempCorrection:"NEC 310.15(B)(2)(a) - Temperature Correction Factors",conductorAdjustment:"NEC 310.15(B)(3)(a) - Conductor Bundling Adjustment Factors",ocpdLimit:"NEC 240.4(D) - Small Conductor Overcurrent Protection",continuousLoad:"NEC 210.19(A)(1) - Continuous Load Sizing (125% factor)"},YN=fe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=fe.useState("12"),[o,l]=fe.useState("copper"),[u,h]=fe.useState("75C"),[d,g]=fe.useState("30"),[b,S]=fe.useState("3"),[x,B]=fe.useState(!1),E={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},L=UN(o,u,n),A=GN(o,n),O=KN(L,u,d,b,x),$=O.tempFactor!==1||O.conductorFactor!==1||x;return fe.useImperativeHandle(t,()=>({exportPDF:()=>{const F={calculatorName:"Ampacity Lookup Calculator",inputs:{wireSize:Hb(n),wireMaterial:o.charAt(0).toUpperCase()+o.slice(1),temperatureRating:qb(u),ambientTemperature:JN(d),currentCarryingConductors:b,continuousLoad:x?"Yes (3+ hours)":"No"},results:{baseAmpacity:`${O.base} A`,deratedAmpacity:$?`${O.derated} A`:"N/A (no derating applied)",finalAmpacity:`${x?O.continuous:$?O.derated:O.base} A`,ocpdLimit:A?`${A} A (NEC 240.4(D))`:"No special limit",commonApplications:Ub(L,n)},additionalInfo:{temperatureCorrectionFactor:`${O.tempFactor.toFixed(2)}`,conductorAdjustmentFactor:`${O.conductorFactor.toFixed(2)}`,continuousLoadFactor:x?"0.80":"Not applied",deratingApplied:$?"Yes":"No"},necReferences:[Wh.ampacityTable,Wh.tempCorrection,Wh.conductorAdjustment,A?Wh.ocpdLimit:null,x?Wh.continuousLoad:null].filter(Boolean)};cn(F)}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${E.cardBorder}`,paddingBottom:"0.5rem"},children:"Wire Selection"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Wire Size"}),s.jsx("select",{value:n,onChange:F=>i(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:ON.map(F=>s.jsx("option",{value:F.value,children:F.label},F.value))})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Wire Material"}),s.jsx("select",{value:o,onChange:F=>l(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:zN.map(F=>s.jsx("option",{value:F.value,children:F.label},F.value))})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Temperature Rating"}),s.jsx("select",{value:u,onChange:F=>h(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:VN.map(F=>s.jsx("option",{value:F.value,children:F.label},F.value))})]})]})]})]}),s.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${E.cardBorder}`,paddingBottom:"0.5rem"},children:"Derating Factors (Optional)"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Ambient Temp (C)"}),s.jsx("select",{value:d,onChange:F=>g(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:MN.map(F=>s.jsx("option",{value:F.value,children:F.label},F.value))})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Current-Carrying Conductors"}),s.jsx("input",{type:"number",value:b,onChange:F=>S(F.target.value),min:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]})]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:x,onChange:F=>B(F.target.checked),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),s.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:E.labelText},children:"Continuous Load (3+ hours) - Apply 80% factor"})]}),s.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${E.cardBorder}`},children:[s.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"0.75rem"},children:"Applied Factors"}),s.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:E.labelText},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Temperature Factor:"}),s.jsxs("span",{style:{fontWeight:"600",color:E.cardText},children:["",O.tempFactor.toFixed(2)]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Conductor Adjustment:"}),s.jsxs("span",{style:{fontWeight:"600",color:E.cardText},children:["",O.conductorFactor.toFixed(2)]})]}),x&&s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Continuous Load:"}),s.jsx("span",{style:{fontWeight:"600",color:E.cardText},children:"0.80"})]})]})]})]})]}),s.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:$?"repeat(3, 1fr)":"1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Base Ampacity"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:[O.base," A"]})]}),$&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Derated Ampacity"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:[O.derated," A"]})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Final Ampacity"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[x?O.continuous:O.derated," A"]})]})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5",width:"100%"},children:[s.jsxs("div",{style:{marginBottom:"0.5rem"},children:[s.jsx("strong",{children:"Wire:"})," ",Hb(n)," ",o]}),s.jsxs("div",{style:{marginBottom:"0.5rem"},children:[s.jsx("strong",{children:"Temperature Rating:"})," ",qb(u)]})]})]})}),A&&s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("strong",{children:"NEC 240.4(D) Limit:"})," ",A,"A max overcurrent protection"]})]})}),s.jsx("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${E.cardBorder}`},children:s.jsxs("div",{style:{fontSize:"0.875rem",color:E.labelText,lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",color:E.cardText,marginBottom:"0.5rem"},children:"Common Applications:"}),Ub(L,n)]})})]})]})}),QN=({flcData:r,setFlcData:e,colors:t})=>{var u,h;const n={single:{115:{.25:4.4,.33:5.8,.5:7.2,.75:9.8,1:13.8,1.5:20,2:24,3:34,5:56},230:{.25:2.2,.33:2.9,.5:3.6,.75:4.9,1:6.9,1.5:10,2:12,3:17,5:28}},three:{230:{.5:2,.75:2.8,1:3.6,1.5:5.2,2:6.8,3:9.6,5:15.2,7.5:22,10:28,15:42,20:54,25:68,30:80,40:104,50:130,60:154,75:192,100:248,125:312,150:360,200:480},460:{.5:1,.75:1.4,1:1.8,1.5:2.6,2:3.4,3:4.8,5:7.6,7.5:11,10:14,15:21,20:27,25:34,30:40,40:52,50:65,60:77,75:96,100:124,125:156,150:180,200:240},575:{.5:.8,.75:1.1,1:1.4,1.5:2.1,2:2.7,3:3.9,5:6.1,7.5:9,10:11,15:17,20:22,25:27,30:32,40:41,50:52,60:62,75:77,100:99,125:125,150:144,200:192},2300:{250:65,300:77,350:90,400:103,450:116,500:129},4e3:{500:74,600:88,700:103,800:118,900:132,1e3:147}}},o=(()=>{const d=parseFloat(r.horsepower),g=parseInt(r.voltage);if(n[r.phase]&&n[r.phase][g]&&n[r.phase][g][d])return n[r.phase][g][d];const b=parseFloat(r.efficiency),S=parseFloat(r.powerFactor);return r.phase==="single"?d*746/(g*b*S):d*746/(1.732*g*b*S)})(),l=(h=(u=n[r.phase])==null?void 0:u[parseInt(r.voltage)])==null?void 0:h[parseFloat(r.horsepower)];return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Horsepower"}),s.jsxs("select",{value:r.horsepower,onChange:d=>e({...r,horsepower:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"",children:"Select HP"}),s.jsx("option",{value:"0.25",children:"1/4 HP"}),s.jsx("option",{value:"0.33",children:"1/3 HP"}),s.jsx("option",{value:"0.5",children:"1/2 HP"}),s.jsx("option",{value:"0.75",children:"3/4 HP"}),s.jsx("option",{value:"1",children:"1 HP"}),s.jsx("option",{value:"1.5",children:"1.5 HP"}),s.jsx("option",{value:"2",children:"2 HP"}),s.jsx("option",{value:"3",children:"3 HP"}),s.jsx("option",{value:"5",children:"5 HP"}),s.jsx("option",{value:"7.5",children:"7.5 HP"}),s.jsx("option",{value:"10",children:"10 HP"}),s.jsx("option",{value:"15",children:"15 HP"}),s.jsx("option",{value:"20",children:"20 HP"}),s.jsx("option",{value:"25",children:"25 HP"}),s.jsx("option",{value:"30",children:"30 HP"}),s.jsx("option",{value:"40",children:"40 HP"}),s.jsx("option",{value:"50",children:"50 HP"}),s.jsx("option",{value:"75",children:"75 HP"}),s.jsx("option",{value:"100",children:"100 HP"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Voltage"}),s.jsxs("select",{value:r.voltage,onChange:d=>e({...r,voltage:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"115",children:"115V"}),s.jsx("option",{value:"230",children:"230V"}),s.jsx("option",{value:"460",children:"460V"}),s.jsx("option",{value:"480",children:"480V"}),s.jsx("option",{value:"575",children:"575V"}),s.jsx("option",{value:"2300",children:"2300V"}),s.jsx("option",{value:"4000",children:"4000V"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Phase"}),s.jsxs("select",{value:r.phase,onChange:d=>e({...r,phase:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"single",children:"Single Phase"}),s.jsx("option",{value:"three",children:"Three Phase"})]})]})]}),r.horsepower&&!l&&s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Efficiency"}),s.jsxs("select",{value:r.efficiency,onChange:d=>e({...r,efficiency:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"0.8",children:"80% (Standard)"}),s.jsx("option",{value:"0.85",children:"85% (High Efficiency)"}),s.jsx("option",{value:"0.9",children:"90% (Premium)"}),s.jsx("option",{value:"0.95",children:"95% (Super Premium)"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),s.jsxs("select",{value:r.powerFactor,onChange:d=>e({...r,powerFactor:d.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"0.7",children:"0.7 (Poor)"}),s.jsx("option",{value:"0.8",children:"0.8 (Typical)"}),s.jsx("option",{value:"0.85",children:"0.85 (Good)"}),s.jsx("option",{value:"0.9",children:"0.9 (Excellent)"})]})]})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${t.cardBorder}`},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.5rem",textAlign:"center"},children:"Full Load Current"}),s.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:t.cardText,textAlign:"center"},children:o?o.toFixed(1):"0.0"}),s.jsx("div",{style:{fontSize:"0.875rem",color:t.labelText,textAlign:"center",marginTop:"0.25rem"},children:"Amperes"})]}),l?s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Value from NEC Table 430.250"}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"Standard full load current from NEC tables"})]})]})}):r.horsepower?s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Calculated Value"}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"Not in NEC tables - calculated using efficiency and power factor"})]})]})}):null]})},XN=({protectionData:r,setProtectionData:e,colors:t})=>{const n={"inverse-time-breaker":250,"instantaneous-trip-breaker":800,"inverse-time-fuse":175,"time-delay-fuse":175},o=(()=>{if(!r.flc)return{calculated:"0",standard:0};const l=parseFloat(r.flc),u=n[r.protectionType],h=l*u/100,g=[15,20,25,30,35,40,45,50,60,70,80,90,100,110,125,150,175,200,225,250,300,350,400,450,500,600,700,800,1e3,1200,1600,2e3,2500,3e3,4e3,5e3,6e3].find(b=>b>=h)||h;return{calculated:h.toFixed(1),standard:g,percentage:u}})();return s.jsxs("div",{className:ys.container,children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Full Load Current (FLC)"}),s.jsx("input",{type:"number",value:r.flc,onChange:l=>e({...r,flc:l.target.value}),placeholder:"Enter FLC in amps",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Protection Type"}),s.jsxs("select",{value:r.protectionType,onChange:l=>e({...r,protectionType:l.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"inverse-time-breaker",children:"Inverse Time Breaker"}),s.jsx("option",{value:"instantaneous-trip-breaker",children:"Instantaneous Trip Breaker"}),s.jsx("option",{value:"inverse-time-fuse",children:"Inverse Time Fuse"}),s.jsx("option",{value:"time-delay-fuse",children:"Time Delay Fuse"})]})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Calculated Maximum"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.calculated}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Standard Size"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.standard}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),r.flc&&s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.8125rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Reference:"}),"Per NEC Table 430.52 (",o.percentage,"% of FLC)"]})]})},ZN=({wireSizeData:r,setWireSizeData:e,colors:t})=>{const i=(()=>{if(!r.flc)return null;const o=parseFloat(r.flc)*1.25,l={"60C":{14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:355,700:385,750:400},"75C":{14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,750:475},"90C":{14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535}},u={14:15,12:20,10:30},d=["14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750"].find(g=>{const b=l[r.tempRating][g]>=o,S=!u[g]||u[g]>=o;return b&&S});return{requiredAmps:o.toFixed(1),wireSize:d||"Larger than 750 kcmil required",ampacity:d?l[r.tempRating][d]:"N/A",ocpdLimit:d&&u[d]?u[d]:null}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Full Load Current (FLC)"}),s.jsx("input",{type:"number",value:r.flc,onChange:o=>e({...r,flc:o.target.value}),placeholder:"Enter FLC in amps",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Temperature Rating"}),s.jsxs("select",{value:r.tempRating,onChange:o=>e({...r,tempRating:o.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"60C",children:"60C (140F) - TW, UF"}),s.jsx("option",{value:"75C",children:"75C (167F) - THWN, XHHW"}),s.jsx("option",{value:"90C",children:"90C (194F) - THHN, XHHW-2"})]})]})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${t.cardBorder}`},children:[s.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,marginBottom:"0.75rem"},children:[s.jsx("strong",{style:{color:t.cardText},children:"Required Current Capacity:"})," ",i.requiredAmps," Amps (125% of FLC)"]}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.5rem",textAlign:"center"},children:"Minimum Wire Size"}),s.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:t.cardText,textAlign:"center",marginBottom:"0.5rem"},children:i.wireSize}),i.ampacity!=="N/A"&&s.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,textAlign:"center"},children:["Ampacity: ",i.ampacity," Amps"]})]}),i.ocpdLimit&&s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"NEC 240.4(D) Limitation"}),s.jsxs("div",{style:{fontSize:"0.8125rem"},children:[i.ocpdLimit,"A maximum overcurrent protection for ",i.wireSize," wire"]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.8125rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Reference:"}),"Per NEC 430.22 - Branch circuit conductors must carry 125% of motor FLC"]})]})]})},eB=fe.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=fe.useState("flc"),[i,o]=fe.useState({horsepower:"",voltage:"480",phase:"three",efficiency:"0.85",powerFactor:"0.8"}),[l,u]=fe.useState({flc:"",protectionType:"inverse-time-breaker"}),[h,d]=fe.useState({flc:"",tempRating:"75C"}),g={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};fe.useImperativeHandle(e,()=>({exportPDF:()=>{var x,B;let S;if(t==="flc"){if(!i.horsepower){alert("Please select motor horsepower before exporting");return}const E={single:{115:{.25:4.4,.33:5.8,.5:7.2,.75:9.8,1:13.8,1.5:20,2:24,3:34,5:56},230:{.25:2.2,.33:2.9,.5:3.6,.75:4.9,1:6.9,1.5:10,2:12,3:17,5:28}},three:{230:{.5:2,.75:2.8,1:3.6,1.5:5.2,2:6.8,3:9.6,5:15.2,7.5:22,10:28,15:42,20:54,25:68,30:80,40:104,50:130,60:154,75:192,100:248,125:312,150:360,200:480},460:{.5:1,.75:1.4,1:1.8,1.5:2.6,2:3.4,3:4.8,5:7.6,7.5:11,10:14,15:21,20:27,25:34,30:40,40:52,50:65,60:77,75:96,100:124,125:156,150:180,200:240},575:{.5:.8,.75:1.1,1:1.4,1.5:2.1,2:2.7,3:3.9,5:6.1,7.5:9,10:11,15:17,20:22,25:27,30:32,40:41,50:52,60:62,75:77,100:99,125:125,150:144,200:192},2300:{250:65,300:77,350:90,400:103,450:116,500:129},4e3:{500:74,600:88,700:103,800:118,900:132,1e3:147}}},L=parseFloat(i.horsepower),A=parseInt(i.voltage);let O,$=!1;if((B=(x=E[i.phase])==null?void 0:x[A])!=null&&B[L])O=E[i.phase][A][L],$=!0;else{const ie=parseFloat(i.efficiency),ue=parseFloat(i.powerFactor);i.phase==="single"?O=L*746/(A*ie*ue):O=L*746/(1.732*A*ie*ue)}const F={motorHorsepower:`${L} HP`,voltage:`${i.voltage}V`,phase:i.phase==="single"?"Single Phase":"Three Phase"};$||(F.motorEfficiency=`${(parseFloat(i.efficiency)*100).toFixed(0)}%`,F.powerFactor=i.powerFactor),S={calculatorName:"Motor Calculations - Full Load Current",inputs:F,results:{fullLoadCurrent:`${O.toFixed(1)} Amperes`,source:$?"NEC Table 430.250":"Calculated"},additionalInfo:$?{note:"Standard full load current from NEC tables"}:{calculation:i.phase==="single"?`FLC = (${L} HP  746)  (${A}V  ${i.efficiency} eff  ${i.powerFactor} pf) = ${O.toFixed(1)}A`:`FLC = (${L} HP  746)  (1.732  ${A}V  ${i.efficiency} eff  ${i.powerFactor} pf) = ${O.toFixed(1)}A`,note:"Calculated value - not in NEC tables"},necReferences:["NEC Table 430.250 - Full-Load Current, Three-Phase Alternating-Current Motors","NEC Table 430.248 - Full-Load Current, Single-Phase Alternating-Current Motors","NEC 430.6 - Ampacity and Motor Rating Determination"]}}else if(t==="protection"){if(!l.flc){alert("Please enter motor FLC before exporting");return}const E={"inverse-time-breaker":"Inverse Time Breaker","instantaneous-trip-breaker":"Instantaneous Trip Breaker","inverse-time-fuse":"Inverse Time Fuse","time-delay-fuse":"Time Delay Fuse"},L={"inverse-time-breaker":250,"instantaneous-trip-breaker":800,"inverse-time-fuse":175,"time-delay-fuse":175},A=parseFloat(l.flc),O=L[l.protectionType],$=A*O/100,ie=[15,20,25,30,35,40,45,50,60,70,80,90,100,110,125,150,175,200,225,250,300,350,400,450,500,600,700,800,1e3,1200,1600,2e3,2500,3e3,4e3,5e3,6e3].find(ue=>ue>=$)||$;S={calculatorName:"Motor Calculations - Branch Circuit Protection",inputs:{motorFullLoadCurrent:`${l.flc} Amps`,protectionType:E[l.protectionType]},results:{calculatedMaximum:`${$.toFixed(1)} Amperes`,standardSize:`${ie} Amperes`},additionalInfo:{calculation:`Maximum = ${A}A  ${O}% = ${$.toFixed(1)}A`,nextStandardSize:`Next standard OCPD size: ${ie}A`},necReferences:[`NEC Table 430.52 - Maximum Rating or Setting of Motor Branch-Circuit Short-Circuit and Ground-Fault Protective Devices (${O}% of FLC)`,"NEC 430.52(C) - Rating or Setting for Individual Motor Circuit","NEC 240.6 - Standard Ampere Ratings"]}}else if(t==="wiresize"){if(!h.flc){alert("Please enter motor FLC before exporting");return}const E={"60C":"60C (140F) - TW, UF","75C":"75C (167F) - THWN, XHHW","90C":"90C (194F) - THHN, XHHW-2"},L=(parseFloat(h.flc)*1.25).toFixed(1),A={"60C":{14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:355,700:385,750:400},"75C":{14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,750:475},"90C":{14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535}},O={14:15,12:20,10:30},F=["14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750"].find(V=>{const k=A[h.tempRating][V]>=parseFloat(L),I=!O[V]||O[V]>=parseFloat(L);return k&&I}),ie=F||"Larger than 750 kcmil required",ue=F?A[h.tempRating][F]:"N/A";S={calculatorName:"Motor Calculations - Wire Sizing",inputs:{motorFullLoadCurrent:`${h.flc} Amps`,temperatureRating:E[h.tempRating]},results:{requiredCapacity:`${L} Amps (125% of FLC)`,minimumWireSize:ie,wireAmpacity:ue!=="N/A"?`${ue} Amps`:"N/A"},additionalInfo:{calculation:`Required capacity = ${h.flc}A  125% = ${L}A`,...F&&O[F]&&{ocpdLimitation:`NEC 240.4(D): ${O[F]}A maximum OCPD for ${ie} wire`}},necReferences:["NEC 430.22 - Single Motor - Conductors supplying a single motor shall have an ampacity not less than 125% of FLC","NEC Table 310.16 - Allowable Ampacities of Insulated Conductors","NEC 240.4(D) - Small Conductors - Unless specifically permitted, overcurrent protection shall not exceed limits"]}}cn(S)}}));const b={flc:s.jsx(QN,{flcData:i,setFlcData:o,colors:g}),protection:s.jsx(XN,{protectionData:l,setProtectionData:u,colors:g}),wiresize:s.jsx(ZN,{wireSizeData:h,setWireSizeData:d,colors:g})};return s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:g.cardBg,border:`1px solid ${g.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:s.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[s.jsx("button",{className:ys.btn,onClick:()=>n("flc"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="flc"?"#3b82f6":"transparent",color:t==="flc"?"white":g.labelText,border:`1px solid ${t==="flc"?"#3b82f6":g.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Full Load Current"}),s.jsx("button",{className:ys.btn,onClick:()=>n("protection"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="protection"?"#3b82f6":"transparent",color:t==="protection"?"white":g.labelText,border:`1px solid ${t==="protection"?"#3b82f6":g.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Circuit Protection"}),s.jsx("button",{className:ys.btn,onClick:()=>n("wiresize"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="wiresize"?"#3b82f6":"transparent",color:t==="wiresize"?"white":g.labelText,border:`1px solid ${t==="wiresize"?"#3b82f6":g.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Wire Sizing"})]})}),s.jsx("div",{style:{background:g.cardBg,border:`1px solid ${g.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:b[t]}),s.jsxs("div",{style:{background:g.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${g.cardBorder}`,fontSize:"0.8125rem",color:g.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:g.cardText},children:"NEC References:"}),"430.22 - Conductors (125% FLC)  430.52 - Circuit protection  430.250 - FLC tables  430.32 - Overload protection"]})]})}),tB=({data:r,setData:e,colors:t})=>{const i=(()=>{const o=parseFloat(r.squareFootage)||0,l=parseFloat(r.smallApplianceCircuits)||0,u=parseFloat(r.laundryCircuits)||0,h=parseFloat(r.rangeKW)||0,d=parseFloat(r.dryerKW)||0,g=parseFloat(r.waterHeaterKW)||0,b=parseFloat(r.hvacKW)||0,S=parseFloat(r.otherLoadsKW)||0,x=parseFloat(r.voltage),B=o*3,E=l*1500,L=u*1500,A=B+E+L;let O=0;A<=3e3?O=A:A<=12e4?O=3e3+(A-3e3)*.35:O=43950+(A-12e4)*.25;let $=0;h>0&&(h<=12?$=8e3:$=8e3+(h-12)*400);const F=Math.max(d*1e3,5e3),ie=g*1e3,ue=b*1e3,V=S*1e3,k=O+$+F+ie+ue+V,I=k/1e3,M=k/x;let C=100;return M>200?C=400:M>150?C=200:M>100&&(C=150),{generalLighting:B,smallApplianceLoad:E,laundryLoad:L,subtotalVA:A,demandLighting:O,rangeDemand:$,dryerDemand:F,waterHeaterDemand:ie,hvacDemand:ue,otherDemand:V,totalDemandVA:k,totalDemandKW:I,totalAmperage:M,recommendedService:C}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem",minHeight:"2.5rem"},children:["Square",s.jsx("br",{}),"Footage",s.jsx("br",{}),"   ",s.jsx("br",{})]}),s.jsx("input",{type:"number",value:r.squareFootage,onChange:o=>e(l=>({...l,squareFootage:o.target.value})),placeholder:"Living area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Small Appliance Circuits"}),s.jsx("input",{type:"number",value:r.smallApplianceCircuits,onChange:o=>e(l=>({...l,smallApplianceCircuits:o.target.value})),placeholder:"Min 2",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"@ 1500 VA each"})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Laundry Circuits ",s.jsx("br",{}),"   ",s.jsx("br",{})]}),s.jsx("input",{type:"number",value:r.laundryCircuits,onChange:o=>e(l=>({...l,laundryCircuits:o.target.value})),placeholder:"Typically 1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"@ 1500 VA"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Electric Range (kW)"}),s.jsx("input",{type:"number",value:r.rangeKW,onChange:o=>e(l=>({...l,rangeKW:o.target.value})),placeholder:"Nameplate rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Electric Dryer (kW)"}),s.jsx("input",{type:"number",value:r.dryerKW,onChange:o=>e(l=>({...l,dryerKW:o.target.value})),placeholder:"Min 5 kW",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Water Heater (kW)"}),s.jsx("input",{type:"number",value:r.waterHeaterKW,onChange:o=>e(l=>({...l,waterHeaterKW:o.target.value})),placeholder:"Rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"HVAC/Heat (kW)"}),s.jsx("input",{type:"number",value:r.hvacKW,onChange:o=>e(l=>({...l,hvacKW:o.target.value})),placeholder:"Largest load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Other Loads (kW)"}),s.jsx("input",{type:"number",value:r.otherLoadsKW,onChange:o=>e(l=>({...l,otherLoadsKW:o.target.value})),placeholder:"Pool, spa, etc",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),s.jsxs("select",{value:r.voltage,onChange:o=>e(l=>({...l,voltage:o.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"208",children:"208V"})]}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]})]}),r.squareFootage&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Demand"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.totalDemandKW.toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Amperage"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.totalAmperage.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"amps"})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Recommended Service"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:i.recommendedService}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"amp service"})]})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,marginBottom:"1rem"},children:[s.jsx("div",{style:{fontWeight:"600",color:t.cardText,marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Connected Loads:"}),s.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["General Lighting: ",i.generalLighting.toLocaleString()," VA"]}),s.jsxs("div",{children:["Small Appliance: ",i.smallApplianceLoad.toLocaleString()," VA"]}),s.jsxs("div",{children:["Laundry: ",i.laundryLoad.toLocaleString()," VA"]}),s.jsx("div",{style:{borderTop:`1px solid ${t.cardBorder}`,marginTop:"0.5rem",paddingTop:"0.5rem"},children:s.jsxs("strong",{children:["Subtotal: ",i.subtotalVA.toLocaleString()," VA"]})})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5",width:"100%"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Demand Loads (with factors applied):"}),s.jsxs("div",{children:["Lighting: ",i.demandLighting.toFixed(0)," VA"]}),r.rangeKW>0&&s.jsxs("div",{children:["Range: ",i.rangeDemand.toLocaleString()," W"]}),r.dryerKW>0&&s.jsxs("div",{children:["Dryer: ",i.dryerDemand.toLocaleString()," W"]}),r.waterHeaterKW>0&&s.jsxs("div",{children:["Water Heater: ",i.waterHeaterDemand.toLocaleString()," W"]}),r.hvacKW>0&&s.jsxs("div",{children:["HVAC: ",i.hvacDemand.toLocaleString()," W"]}),r.otherLoadsKW>0&&s.jsxs("div",{children:["Other: ",i.otherDemand.toLocaleString()," W"]})]})]})})]})]})},rB=({data:r,setData:e,colors:t})=>{const n={office:3.5,warehouse:.25,retail:3,school:3,restaurant:2,hotel:2,hospital:2,industrial:2},o=(()=>{const l=parseFloat(r.squareFootage)||0,u=parseFloat(r.hvacLoad)||0,h=parseFloat(r.receptacleLoad)||0,d=parseFloat(r.motorLoads)||0,g=parseFloat(r.otherLoads)||0,b=parseFloat(r.demandFactor)/100,S=parseFloat(r.voltage),x=l*n[r.occupancyType],B=x/1e3+u+h+d+g,E=B*b;let L;return r.phase==="single"?L=E*1e3/S:L=E*1e3/(1.732*S),{lightingVA:x,lightingKW:x/1e3,hvac:u,receptacles:h,motors:d,other:g,totalConnectedKW:B,demandLoadKW:E,amperage:L}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Square Footage"}),s.jsx("input",{type:"number",value:r.squareFootage,onChange:l=>e(u=>({...u,squareFootage:l.target.value})),placeholder:"Building area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Occupancy Type"}),s.jsxs("select",{value:r.occupancyType,onChange:l=>e(u=>({...u,occupancyType:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"office",children:"Office (3.5 VA/sq ft)"}),s.jsx("option",{value:"warehouse",children:"Warehouse (0.25 VA/sq ft)"}),s.jsx("option",{value:"retail",children:"Retail (3.0 VA/sq ft)"}),s.jsx("option",{value:"school",children:"School (3.0 VA/sq ft)"}),s.jsx("option",{value:"restaurant",children:"Restaurant (2.0 VA/sq ft)"}),s.jsx("option",{value:"hotel",children:"Hotel (2.0 VA/sq ft)"}),s.jsx("option",{value:"hospital",children:"Hospital (2.0 VA/sq ft)"}),s.jsx("option",{value:"industrial",children:"Industrial (2.0 VA/sq ft)"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"HVAC Load (kW)"}),s.jsx("input",{type:"number",value:r.hvacLoad,onChange:l=>e(u=>({...u,hvacLoad:l.target.value})),placeholder:"Total HVAC",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Receptacle Load (kW)"}),s.jsx("input",{type:"number",value:r.receptacleLoad,onChange:l=>e(u=>({...u,receptacleLoad:l.target.value})),placeholder:"Receptacles",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Loads (kW)"}),s.jsx("input",{type:"number",value:r.motorLoads,onChange:l=>e(u=>({...u,motorLoads:l.target.value})),placeholder:"Total motors",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Other Loads (kW)"}),s.jsx("input",{type:"number",value:r.otherLoads,onChange:l=>e(u=>({...u,otherLoads:l.target.value})),placeholder:"Additional",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Demand Factor (%)"}),s.jsx("input",{type:"number",value:r.demandFactor,onChange:l=>e(u=>({...u,demandFactor:l.target.value})),placeholder:"80-100%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Peak load %"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"System Voltage"}),s.jsxs("select",{value:r.voltage,onChange:l=>e(u=>({...u,voltage:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"208",children:"208V"}),s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"277",children:"277V"}),s.jsx("option",{value:"480",children:"480V"}),s.jsx("option",{value:"600",children:"600V"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["System",s.jsx("br",{})," Phase"]}),s.jsxs("select",{value:r.phase,onChange:l=>e(u=>({...u,phase:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"single",children:"Single Phase"}),s.jsx("option",{value:"three",children:"Three Phase"})]})]})]}),r.squareFootage&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Connected Load"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.totalConnectedKW.toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Demand Load"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.demandLoadKW.toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Amperage"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.amperage.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"amps"})]})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,marginBottom:"1rem"},children:[s.jsx("div",{style:{fontWeight:"600",color:t.cardText,marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Connected Loads:"}),s.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["Lighting: ",o.lightingKW.toFixed(2)," kW (",o.lightingVA.toFixed(0)," VA)"]}),r.hvacLoad>0&&s.jsxs("div",{children:["HVAC: ",o.hvac.toFixed(2)," kW"]}),r.receptacleLoad>0&&s.jsxs("div",{children:["Receptacles: ",o.receptacles.toFixed(2)," kW"]}),r.motorLoads>0&&s.jsxs("div",{children:["Motors: ",o.motors.toFixed(2)," kW"]}),r.otherLoads>0&&s.jsxs("div",{children:["Other: ",o.other.toFixed(2)," kW"]})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"System Configuration"}),s.jsxs("div",{children:[r.voltage,"V ",r.phase==="single"?"Single":"Three"," Phase"]}),s.jsxs("div",{children:[r.demandFactor,"% demand factor applied"]})]})]})})]})]})},nB=fe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=fe.useState("residential"),[o,l]=fe.useState({squareFootage:"",smallApplianceCircuits:"2",laundryCircuits:"1",rangeKW:"",dryerKW:"5",waterHeaterKW:"",hvacKW:"",otherLoadsKW:"",voltage:"240"}),[u,h]=fe.useState({squareFootage:"",occupancyType:"office",hvacLoad:"",receptacleLoad:"",motorLoads:"",otherLoads:"",demandFactor:"100",voltage:"480",phase:"three"}),d={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};return fe.useImperativeHandle(t,()=>({exportPDF:()=>{let g;if(n==="residential"){if(!o.squareFootage){alert("Please enter square footage before exporting");return}const b=parseFloat(o.squareFootage),S=parseFloat(o.smallApplianceCircuits)||0,x=parseFloat(o.laundryCircuits)||0,B=parseFloat(o.rangeKW)||0,E=parseFloat(o.dryerKW)||0,L=parseFloat(o.waterHeaterKW)||0,A=parseFloat(o.hvacKW)||0,O=parseFloat(o.otherLoadsKW)||0,$=parseFloat(o.voltage),F=b*3,ie=S*1500,ue=x*1500,V=F+ie+ue;let k=0;V<=3e3?k=V:V<=12e4?k=3e3+(V-3e3)*.35:k=3e3+117e3*.35+(V-12e4)*.25;let I=0;B>0&&(I=B<=12?8e3:8e3+(B-12)*400);const M=Math.max(E*1e3,5e3),C=L*1e3,w=A*1e3,N=O*1e3,D=k+I+M+C+w+N,q=(D/1e3).toFixed(2),ne=(D/$).toFixed(1);let se=100;parseFloat(ne)>200?se=400:parseFloat(ne)>150?se=200:parseFloat(ne)>100&&(se=150);const oe={squareFootage:`${o.squareFootage} sq ft`,smallApplianceCircuits:`${S} circuits @ 1500 VA each`,laundryCircuits:`${x} circuit @ 1500 VA`,serviceVoltage:`${o.voltage}V`};B>0&&(oe.electricRange=`${B} kW`),E>0&&(oe.electricDryer=`${E} kW`),L>0&&(oe.waterHeater=`${L} kW`),A>0&&(oe.hvacHeat=`${A} kW`),O>0&&(oe.otherLoads=`${O} kW`),g={calculatorName:"Load Calculations - Residential (NEC 220.82)",inputs:oe,results:{totalDemandLoad:`${q} kW (${D.toLocaleString()} VA)`,totalAmperage:`${ne} Amps`,recommendedService:`${se} Amp Service`},additionalInfo:{generalLighting:`${F.toLocaleString()} VA (${b} sq ft  3 VA/sq ft)`,smallAppliance:`${ie.toLocaleString()} VA`,laundry:`${ue.toLocaleString()} VA`,lightingSubtotal:`${V.toLocaleString()} VA`,demandLightingAfterFactors:`${k.toFixed(0)} VA`,...B>0&&{rangeDemand:`${I.toLocaleString()} W`},...E>0&&{dryerDemand:`${M.toLocaleString()} W (min 5000 W)`},...L>0&&{waterHeaterDemand:`${C.toLocaleString()} W`},...A>0&&{hvacDemand:`${w.toLocaleString()} W`},...O>0&&{otherDemand:`${N.toLocaleString()} W`}},necReferences:["NEC 220.82 - Dwelling Unit Optional Calculation","NEC 220.83 - Existing Dwelling Unit","NEC Table 220.55 - Demand Factors for Electric Ranges","General lighting: 3 VA per square foot (NEC 220.12)","Demand factors: First 3000 VA @ 100%, Next 117000 VA @ 35%, Remainder @ 25%"]}}else if(n==="commercial"){if(!u.squareFootage){alert("Please enter square footage before exporting");return}const b={office:3.5,warehouse:.25,retail:3,school:3,restaurant:2,hotel:2,hospital:2,industrial:2},S={office:"Office",warehouse:"Warehouse",retail:"Retail",school:"School",restaurant:"Restaurant",hotel:"Hotel",hospital:"Hospital",industrial:"Industrial"},x=parseFloat(u.squareFootage),B=parseFloat(u.hvacLoad)||0,E=parseFloat(u.receptacleLoad)||0,L=parseFloat(u.motorLoads)||0,A=parseFloat(u.otherLoads)||0,O=parseFloat(u.demandFactor)/100,$=parseFloat(u.voltage),F=x*b[u.occupancyType],ie=(F/1e3).toFixed(2),ue=(F/1e3+B+E+L+A).toFixed(2),V=(parseFloat(ue)*O).toFixed(2);let k;u.phase==="single"?k=(parseFloat(V)*1e3/$).toFixed(1):k=(parseFloat(V)*1e3/(1.732*$)).toFixed(1);const I={squareFootage:`${u.squareFootage} sq ft`,occupancyType:`${S[u.occupancyType]} (${b[u.occupancyType]} VA/sq ft)`,demandFactor:`${u.demandFactor}%`,systemConfiguration:`${u.voltage}V ${u.phase==="single"?"Single":"Three"} Phase`};B>0&&(I.hvacLoad=`${B} kW`),E>0&&(I.receptacleLoad=`${E} kW`),L>0&&(I.motorLoads=`${L} kW`),A>0&&(I.otherLoads=`${A} kW`),g={calculatorName:"Load Calculations - Commercial",inputs:I,results:{connectedLoad:`${ue} kW`,demandLoad:`${V} kW`,totalAmperage:`${k} Amps`},additionalInfo:{lighting:`${ie} kW (${F.toFixed(0)} VA)`,calculationMethod:u.phase==="single"?`Amperage = (${V} kW  1000)  ${$}V = ${k} A`:`Amperage = (${V} kW  1000)  (1.732  ${$}V) = ${k} A`,demandFactorNote:`${u.demandFactor}% demand factor applied to total connected load`},necReferences:["NEC Article 220 - Branch-Circuit, Feeder, and Service Load Calculations","NEC Table 220.12 - General Lighting Loads by Occupancy","NEC 220.42 - General Lighting","NEC 220.50 - Motors","Always verify with actual connected loads and local codes"]}}cn(g)}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"residential",label:"Residential"},{id:"commercial",label:"Commercial"}].map(g=>s.jsx("button",{onClick:()=>i(g.id),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.625rem 1rem",background:n===g.id?"#3b82f6":d.sectionBg,color:n===g.id?"white":d.labelText,border:`1px solid ${n===g.id?"#3b82f6":d.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:g.label},g.id))}),s.jsx("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:n==="residential"?s.jsx(tB,{data:o,setData:l,colors:d}):s.jsx(rB,{data:u,setData:h,colors:d})})]})}),iB=fe.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=fe.useState("sizing"),[i,o]=fe.useState(""),[l,u]=fe.useState("480"),[h,d]=fe.useState("208"),[g,b]=fe.useState("three"),[S,x]=fe.useState("continuous"),[B,E]=fe.useState("0.85"),[L,A]=fe.useState(""),[O,$]=fe.useState("480"),[F,ie]=fe.useState("208"),[ue,V]=fe.useState("three"),k={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},I=[3,6,9,15,30,45,75,112.5,150,225,300,500,750,1e3,1500,2e3,2500,3e3],M=()=>{const D=parseFloat(i)||0;if(D===0)return null;let q=1;S==="continuous"&&(q=1.25);const ne=D*q,se=I.find(oe=>oe>=ne)||ne;return{loadKVA:D,requiredKVA:ne.toFixed(1),recommendedSize:se,utilizationPercent:(D/se*100).toFixed(1)}},C=()=>{const D=parseFloat(L)||0;if(D===0)return null;const q=parseFloat(O),ne=parseFloat(F);let se,oe;return ue==="single"?(se=D*1e3/q,oe=D*1e3/ne):(se=D*1e3/(1.732*q),oe=D*1e3/(1.732*ne)),{kva:D,primaryCurrent:se.toFixed(1),secondaryCurrent:oe.toFixed(1),primaryVoltage:q,secondaryVoltage:ne}},w=M(),N=C();return fe.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="sizing"){if(!i){alert("Please enter load (kVA) before exporting to PDF");return}const D={calculatorName:"Transformer Calculations - Transformer Sizing",inputs:{Load:`${i} kVA`,"Primary Voltage":`${l}V`,"Secondary Voltage":`${h}V`,Phase:g==="single"?"Single Phase":"Three Phase","Load Type":S==="continuous"?"Continuous (125% sizing)":"Non-Continuous (100% sizing)","Power Factor":B},results:{"Recommended Transformer Size":`${w.recommendedSize} kVA`,Configuration:`${l}V to ${h}V`,Phase:g==="single"?"Single Phase":"Three Phase","Connected Load":`${w.loadKVA} kVA`,"Required Capacity":`${w.requiredKVA} kVA`,Utilization:`${w.utilizationPercent}%`},additionalInfo:{"Sizing Factor":S==="continuous"?"125% (continuous loads)":"100% (non-continuous loads)","Calculation Method":"Required Capacity = Connected Load  Sizing Factor","Utilization Note":parseFloat(w.utilizationPercent)>80?"WARNING: Utilization above 80% may result in higher operating temperatures and reduced equipment life":"Utilization is within acceptable range"},necReferences:["NEC 450.3 - Overcurrent Protection for Transformers","NEC 450.9 - Ventilation Requirements","NEC 450.11 - Marking Requirements","NEC 450.21 - Dry-Type Transformers Installed Indoors","Size continuous loads at 125% per NEC requirements","Keep utilization below 80% for optimal efficiency and equipment life","Consider future load growth (typically 20-25% spare capacity)","Account for inrush current for motor loads","Consider ambient temperature and ventilation requirements"]};cn(D)}else if(t==="currents"){if(!L){alert("Please enter transformer rating (kVA) before exporting to PDF");return}const D=ue==="single"?"I = (kVA  1000)  V":"I = (kVA  1000)  (1.732  V)",q={calculatorName:"Transformer Calculations - Current Calculations",inputs:{"Transformer Rating":`${L} kVA`,"Primary Voltage":`${O}V`,"Secondary Voltage":`${F}V`,Phase:ue==="single"?"Single Phase":"Three Phase"},results:{Configuration:`${N.kva} kVA, ${ue==="single"?"Single":"Three"} Phase`,"Voltage Ratio":`${N.primaryVoltage}V / ${N.secondaryVoltage}V`,"Primary Current":`${N.primaryCurrent} A`,"Secondary Current":`${N.secondaryCurrent} A`},additionalInfo:{"Formula Used":D,"Primary Side":`${N.primaryCurrent}A at ${N.primaryVoltage}V`,"Secondary Side":`${N.secondaryCurrent}A at ${N.secondaryVoltage}V`,Application:"Use these currents for selecting primary and secondary protection devices per NEC Article 450"},necReferences:["NEC Article 450 - Transformers and Transformer Vaults","NEC 450.3 - Overcurrent Protection","Single Phase Formula: I = (kVA  1000)  V","Three Phase Formula: I = (kVA  1000)  (1.732  V)","Primary and secondary protection must be sized per calculated currents","Consider temperature correction and adjustment factors for conductors","Account for voltage drop in feeder calculations"]};cn(q)}}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:s.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[s.jsx("button",{onClick:()=>n("sizing"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="sizing"?"#3b82f6":"transparent",color:t==="sizing"?"white":k.labelText,border:`1px solid ${t==="sizing"?"#3b82f6":k.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Transformer Sizing"}),s.jsx("button",{onClick:()=>n("currents"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="currents"?"#3b82f6":"transparent",color:t==="currents"?"white":k.labelText,border:`1px solid ${t==="currents"?"#3b82f6":k.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Current Calculations"})]})}),t==="sizing"?s.jsxs("div",{children:[s.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:k.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${k.cardBorder}`,paddingBottom:"0.5rem"},children:"Transformer Parameters"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Load (kVA)"}),s.jsx("input",{type:"number",value:i,onChange:D=>o(D.target.value),placeholder:"Connected load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:k.subtleText,marginTop:"0.25rem"},children:"Total connected or demand load"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Primary Voltage"}),s.jsxs("select",{value:l,onChange:D=>u(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"208",children:"208V"}),s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"480",children:"480V"}),s.jsx("option",{value:"600",children:"600V"}),s.jsx("option",{value:"2400",children:"2400V"}),s.jsx("option",{value:"4160",children:"4160V"}),s.jsx("option",{value:"12470",children:"12470V"}),s.jsx("option",{value:"13200",children:"13200V"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Secondary Voltage"}),s.jsxs("select",{value:h,onChange:D=>d(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"120",children:"120V"}),s.jsx("option",{value:"208",children:"208V"}),s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"277",children:"277V"}),s.jsx("option",{value:"480",children:"480V"}),s.jsx("option",{value:"600",children:"600V"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Phase"}),s.jsxs("select",{value:g,onChange:D=>b(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"single",children:"Single Phase"}),s.jsx("option",{value:"three",children:"Three Phase"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Load Type"}),s.jsxs("select",{value:S,onChange:D=>x(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"continuous",children:"Continuous (125% sizing)"}),s.jsx("option",{value:"noncontinuous",children:"Non-Continuous (100% sizing)"})]}),s.jsx("div",{style:{fontSize:"0.75rem",color:k.subtleText,marginTop:"0.25rem"},children:"Continuous loads operate 3+ hours"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),s.jsxs("select",{value:B,onChange:D=>E(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"1.0",children:"1.0 (Unity)"}),s.jsx("option",{value:"0.95",children:"0.95 (Excellent)"}),s.jsx("option",{value:"0.9",children:"0.9 (Good)"}),s.jsx("option",{value:"0.85",children:"0.85 (Typical)"}),s.jsx("option",{value:"0.8",children:"0.8 (Poor)"})]})]})]})]}),w&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:k.cardText,marginTop:0,marginBottom:"1rem"},children:"Sizing Calculation"}),s.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${k.cardBorder}`},children:[s.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:k.labelText},children:[s.jsx("strong",{style:{color:k.cardText},children:"Connected Load:"})," ",w.loadKVA," kVA"]}),s.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:k.labelText},children:[s.jsx("strong",{style:{color:k.cardText},children:"Required Capacity:"})," ",w.requiredKVA," kVA"]}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:k.subtleText,fontStyle:"italic"},children:["(",S==="continuous"?"125%":"100%"," sizing factor applied)"]})]})]}),s.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:k.cardText,marginTop:0,marginBottom:"1rem"},children:"Recommended Transformer"}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Transformer Size"}),s.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[w.recommendedSize," kVA"]})]}),s.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${k.cardBorder}`,marginBottom:"1rem"},children:[s.jsxs("div",{style:{fontSize:"0.875rem",color:k.labelText,marginBottom:"0.5rem"},children:[s.jsx("strong",{style:{color:k.cardText},children:"Configuration:"})," ",l,"V to ",h,"V"]}),s.jsxs("div",{style:{fontSize:"0.875rem",color:k.labelText},children:[s.jsx("strong",{style:{color:k.cardText},children:"Phase:"})," ",g==="single"?"Single":"Three"," Phase"]})]}),s.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:k.labelText,marginBottom:"0.25rem"},children:"Utilization"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:k.cardText},children:[w.utilizationPercent,"%"]})]})]}),parseFloat(w.utilizationPercent)>80&&s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(Fu,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"High Utilization Warning"}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"Transformer utilization above 80% may result in higher operating temperatures and reduced equipment life. Consider next size up for better efficiency."})]})]})})]}),s.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Transformer Sizing Guidelines:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Size for continuous loads at 125% per NEC 450.3"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider future load growth (typically 20-25%)"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Keep utilization below 80% for optimal efficiency"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Account for inrush current for motor loads"}),s.jsx("li",{children:"Consider ambient temperature and ventilation"})]})]})]})})]}):s.jsxs("div",{children:[s.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:k.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${k.cardBorder}`,paddingBottom:"0.5rem"},children:"Transformer Information"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Transformer Rating (kVA)"}),s.jsx("input",{type:"number",value:L,onChange:D=>A(D.target.value),placeholder:"Transformer kVA",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Primary Voltage"}),s.jsxs("select",{value:O,onChange:D=>$(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"208",children:"208V"}),s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"480",children:"480V"}),s.jsx("option",{value:"600",children:"600V"}),s.jsx("option",{value:"2400",children:"2400V"}),s.jsx("option",{value:"4160",children:"4160V"}),s.jsx("option",{value:"12470",children:"12470V"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Secondary Voltage"}),s.jsxs("select",{value:F,onChange:D=>ie(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"120",children:"120V"}),s.jsx("option",{value:"208",children:"208V"}),s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"277",children:"277V"}),s.jsx("option",{value:"480",children:"480V"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:k.labelText,marginBottom:"0.5rem"},children:"Phase"}),s.jsxs("select",{value:ue,onChange:D=>V(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${k.inputBorder}`,borderRadius:"8px",backgroundColor:k.inputBg,color:k.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"single",children:"Single Phase"}),s.jsx("option",{value:"three",children:"Three Phase"})]})]})]})]}),N&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:k.cardText,marginTop:0,marginBottom:"1rem"},children:"Transformer Configuration"}),s.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${k.cardBorder}`},children:[s.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:k.labelText},children:[s.jsx("strong",{style:{color:k.cardText},children:"Rating:"})," ",N.kva," kVA, ",ue==="single"?"Single":"Three"," Phase"]}),s.jsxs("div",{style:{fontSize:"0.875rem",color:k.labelText},children:[s.jsx("strong",{style:{color:k.cardText},children:"Configuration:"})," ",N.primaryVoltage,"V / ",N.secondaryVoltage,"V"]})]})]}),s.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#1e40af",marginTop:0,marginBottom:"1rem"},children:"Primary Side"}),s.jsx("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${k.cardBorder}`},children:s.jsxs("div",{style:{fontSize:"0.875rem",color:k.labelText},children:[s.jsx("strong",{style:{color:k.cardText},children:"Voltage:"})," ",N.primaryVoltage,"V"]})}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Primary Current"}),s.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:N.primaryCurrent}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),s.jsxs("div",{style:{background:k.cardBg,border:`1px solid ${k.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#059669",marginTop:0,marginBottom:"1rem"},children:"Secondary Side"}),s.jsx("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${k.cardBorder}`},children:s.jsxs("div",{style:{fontSize:"0.875rem",color:k.labelText},children:[s.jsx("strong",{style:{color:k.cardText},children:"Voltage:"})," ",N.secondaryVoltage,"V"]})}),s.jsxs("div",{style:{background:"#d1fae5",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#059669",marginBottom:"0.25rem"},children:"Secondary Current"}),s.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#059669"},children:N.secondaryCurrent}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#059669",marginTop:"0.25rem"},children:"Amperes"})]})]})]}),s.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Current Formulas:"}),s.jsxs("div",{style:{fontSize:"0.8125rem",marginBottom:"0.25rem"},children:[s.jsx("strong",{children:"Single Phase:"})," I = (kVA  1000)  V"]}),s.jsxs("div",{style:{fontSize:"0.8125rem",marginBottom:"0.5rem"},children:[s.jsx("strong",{children:"Three Phase:"})," I = (kVA  1000)  (1.732  V)"]}),s.jsx("div",{style:{fontSize:"0.75rem",fontStyle:"italic"},children:"Note: Use these currents for selecting primary and secondary protection devices per NEC Article 450."})]})]})})]}),s.jsxs("div",{style:{background:k.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${k.cardBorder}`,fontSize:"0.8125rem",color:k.labelText,marginTop:"1rem"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:k.cardText},children:"NEC Article 450 - Transformers and Transformer Vaults:"}),"450.3: Overcurrent protection  450.9: Ventilation requirements  450.11: Marking  450.21: Dry-type transformers indoors"]})]})}),oB=fe.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=fe.useState("residential"),[i,o]=fe.useState(""),[l,u]=fe.useState(""),[h,d]=fe.useState(""),[g,b]=fe.useState(""),[S,x]=fe.useState(""),[B,E]=fe.useState(""),[L,A]=fe.useState("240"),[O,$]=fe.useState(""),[F,ie]=fe.useState("80"),[ue,V]=fe.useState("480"),[k,I]=fe.useState("three"),[M,C]=fe.useState("25"),w={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},N=()=>{const se=parseFloat(i)||0,oe=parseFloat(l)||0,xe=parseFloat(h)||0,we=parseFloat(g)||0,ee=parseFloat(S)||0,W=parseFloat(B)||0,J=parseFloat(L),re=se*3,he=2*1500,me=1500,Se=re+he+me;let ke=0;Se<=3e3?ke=Se:ke=3e3+(Se-3e3)*.35;let Ce=0;we>0&&(we<=12e3?Ce=8e3:Ce=8e3+(we-12e3)*.05);const ge=Math.max(ee,5e3),Fe=xe,Ke=oe,Qe=W,ze=ke+Ce+ge+Fe+Ke+Qe,de=ze/J;let Nt=100;return de>200?Nt=400:de>150?Nt=200:de>100&&(Nt=150),{generalLighting:re,smallAppliance:he,laundry:me,subtotal:Se,demandLighting:ke,rangeDemand:Ce,dryerDemand:ge,whDemand:Fe,hvacDemand:Ke,otherDemand:Qe,totalDemand:ze,totalAmperage:de,recommendedService:Nt,conductorSize:{100:"4 AWG",150:"1/0 AWG",200:"2/0 AWG",400:"400 kcmil"}[Nt]}},D=()=>{const se=parseFloat(O)||0,oe=parseFloat(F)/100,xe=parseFloat(M)/100,we=parseFloat(ue),ee=se*oe,W=ee*(1+xe);let J;k==="single"?J=W*1e3/we:J=W*1e3/(1.732*we);const he=[100,150,200,225,400,600,800,1e3,1200,1600,2e3,2500,3e3,4e3].find(me=>me>=J)||Math.ceil(J/100)*100;return{connectedLoad:se,demandLoad:ee,futureLoad:W,amperage:J,recommendedService:he}},q=N(),ne=D();return fe.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="residential"){if(!i){alert("Please enter square footage before exporting to PDF");return}const se={calculatorName:"Service Entrance Sizing - Residential",inputs:{"Square Footage":`${i} sq ft`,"HVAC/Heat Load":l?`${l} W`:"Not specified","Water Heater":h?`${h} W`:"Not specified","Range/Oven":g?`${g} W`:"Not specified",Dryer:S?`${S} W`:"Not specified","Other Loads":B?`${B} W`:"Not specified","Service Voltage":`${L}V`},results:{"Recommended Service Size":`${q.recommendedService}A`,"Service Conductors":`${q.conductorSize} Copper`,"Total Demand Load":`${q.totalDemand.toFixed(0)} W`,"Calculated Amperage":`${q.totalAmperage.toFixed(1)} A`},additionalInfo:{"General Lighting Load":`${q.generalLighting.toLocaleString()} VA`,"Small Appliance Circuits":`${q.smallAppliance.toLocaleString()} VA`,"Laundry Circuit":`${q.laundry.toLocaleString()} VA`,"Lighting Demand (after factors)":`${q.demandLighting.toFixed(0)} W`,"Range Demand":g?`${q.rangeDemand.toFixed(0)} W`:"N/A","Dryer Demand":S?`${q.dryerDemand.toFixed(0)} W`:"N/A","Water Heater":h?`${q.whDemand.toFixed(0)} W`:"N/A",HVAC:l?`${q.hvacDemand.toFixed(0)} W`:"N/A","Calculation Method":"NEC Article 220.82 - Dwelling Unit Optional Calculation"},necReferences:["NEC 220.82 - Dwelling Unit Optional Calculation","NEC 230.42 - Minimum Size and Rating (service conductors)","NEC 230.79 - Rating of Service Disconnecting Means","NEC 230.90 - Where Required (overload protection)","NEC Table 310.15(B)(16) - Allowable Ampacities","Service conductors shown are approximate for 75C copper. Consult NEC for exact sizing with all derating factors."]};cn(se)}else if(t==="commercial"){if(!O){alert("Please enter total connected load before exporting to PDF");return}const se={calculatorName:"Service Entrance Sizing - Commercial",inputs:{"Total Connected Load":`${O} kW`,"Demand Factor":`${F}%`,"Future Expansion":`${M}%`,"Service Voltage":`${ue}V`,"System Phase":k==="single"?"Single Phase":"Three Phase"},results:{"Recommended Service Size":`${ne.recommendedService}A`,"System Configuration":`${ue}V ${k==="single"?"Single":"Three"} Phase`,"Connected Load":`${ne.connectedLoad.toFixed(1)} kW`,"Demand Load":`${ne.demandLoad.toFixed(1)} kW`,"With Future Expansion":`${ne.futureLoad.toFixed(1)} kW`,"Calculated Amperage":`${ne.amperage.toFixed(1)} A`},additionalInfo:{"Calculation Method":"Commercial demand calculation with future expansion factor","Demand Factor Applied":`${F}% of connected load`,"Future Growth Allowance":`${M}% spare capacity`,"Formula Used":k==="single"?"Amperage = (kW  1000) / Voltage":"Amperage = (kW  1000) / (1.732  Voltage)"},necReferences:["NEC Article 220 Part IV - Optional Feeder and Service Load Calculations","NEC 220.40 - General (demand factors)","NEC 230.42 - Minimum Size and Rating","NEC 230.79 - Rating of Service Disconnecting Means","Consider demand factors per NEC 220.40 and Article 220 Part IV","Include motor loads, HVAC, and large equipment per NEC requirements","Review utility requirements and available fault current","Future expansion typically 20-30% spare capacity"]};cn(se)}}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:s.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[s.jsx("button",{onClick:()=>n("residential"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="residential"?"#3b82f6":"transparent",color:t==="residential"?"white":w.labelText,border:`1px solid ${t==="residential"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Residential"}),s.jsx("button",{onClick:()=>n("commercial"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="commercial"?"#3b82f6":"transparent",color:t==="commercial"?"white":w.labelText,border:`1px solid ${t==="commercial"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Commercial"})]})}),t==="residential"?s.jsxs("div",{children:[s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Information"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Square Footage"}),s.jsx("input",{type:"number",value:i,onChange:se=>o(se.target.value),placeholder:"Living area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Heated/cooled living space"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"HVAC/Heat Load (Watts)"}),s.jsx("input",{type:"number",value:l,onChange:se=>u(se.target.value),placeholder:"Largest load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Water Heater (Watts)"}),s.jsx("input",{type:"number",value:h,onChange:se=>d(se.target.value),placeholder:"Nameplate rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Range/Oven (Watts)"}),s.jsx("input",{type:"number",value:g,onChange:se=>b(se.target.value),placeholder:"Electric range",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Dryer (Watts)"}),s.jsx("input",{type:"number",value:S,onChange:se=>x(se.target.value),placeholder:"Electric dryer",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Minimum 5000W if electric"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Other Loads (Watts)"}),s.jsx("input",{type:"number",value:B,onChange:se=>E(se.target.value),placeholder:"Pool, spa, etc.",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),s.jsxs("select",{value:L,onChange:se=>A(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"208",children:"208V"})]})]})]})]}),i&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Breakdown"}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${w.cardBorder}`},children:[s.jsx("strong",{style:{display:"block",marginBottom:"0.5rem",color:w.cardText,fontSize:"0.875rem"},children:"Connected Loads:"}),s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["General Lighting: ",q.generalLighting.toLocaleString()," VA"]}),s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Small Appliance: ",q.smallAppliance.toLocaleString()," VA"]}),s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.5rem"},children:["Laundry: ",q.laundry.toLocaleString()," VA"]}),s.jsxs("div",{style:{fontSize:"0.875rem",color:w.subtleText,paddingTop:"0.5rem",borderTop:`1px solid ${w.cardBorder}`},children:["Subtotal: ",q.subtotal.toLocaleString()," VA"]})]}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[s.jsx("strong",{style:{display:"block",marginBottom:"0.5rem",color:w.cardText,fontSize:"0.875rem"},children:"Demand Loads (after factors):"}),s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Lighting: ",q.demandLighting.toFixed(0)," W"]}),g&&s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Range: ",q.rangeDemand.toFixed(0)," W"]}),S&&s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Dryer: ",q.dryerDemand.toFixed(0)," W"]}),h&&s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Water Heater: ",q.whDemand.toFixed(0)," W"]}),l&&s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["HVAC: ",q.hvacDemand.toFixed(0)," W"]}),B&&s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText},children:["Other: ",q.otherDemand.toFixed(0)," W"]})]})]}),s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Service Sizing Results"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Total Demand Load"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:q.totalDemand.toFixed(0)}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"Watts"})]}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Calculated Amperage"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:q.totalAmperage.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"Amperes"})]})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Recommended Service Size"}),s.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[q.recommendedService,"A"]})]}),s.jsx("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center",border:`1px solid ${w.cardBorder}`},children:s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText},children:[s.jsx("strong",{style:{color:w.cardText},children:"Service Conductors:"})," ",q.conductorSize," Copper"]})})]})]}),s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Important Notes:"}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"Service conductors are approximate for 75C copper. Consult NEC Table 310.15(B)(16) for exact sizing with all derating factors."})]})]})})]}):s.jsxs("div",{children:[s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Information"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Total Connected Load (kW)"}),s.jsx("input",{type:"number",value:O,onChange:se=>$(se.target.value),placeholder:"Total building load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Demand Factor (%)"}),s.jsx("input",{type:"number",value:F,onChange:se=>ie(se.target.value),placeholder:"Typically 70-90%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Peak demand percentage"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Future Expansion (%)"}),s.jsx("input",{type:"number",value:M,onChange:se=>C(se.target.value),placeholder:"Typically 20-30%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Spare capacity for growth"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),s.jsxs("select",{value:ue,onChange:se=>V(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"208",children:"208V"}),s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"480",children:"480V"}),s.jsx("option",{value:"600",children:"600V"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"System Phase"}),s.jsxs("select",{value:k,onChange:se=>I(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"single",children:"Single Phase"}),s.jsx("option",{value:"three",children:"Three Phase"})]})]})]})]}),O&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Load Calculation"}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`,marginBottom:"1rem"},children:[s.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:w.labelText},children:[s.jsx("strong",{style:{color:w.cardText},children:"Connected Load:"})," ",ne.connectedLoad.toFixed(1)," kW"]}),s.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:w.labelText},children:[s.jsxs("strong",{style:{color:w.cardText},children:["Demand Load (",F,"%):"]})," ",ne.demandLoad.toFixed(1)," kW"]}),s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText},children:[s.jsxs("strong",{style:{color:w.cardText},children:["With Future Expansion (",M,"%):"]})," ",ne.futureLoad.toFixed(1)," kW"]})]}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Calculated Amperage"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:ne.amperage.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"Amperes"})]})]}),s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Recommended Service"}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Service Size"}),s.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[ne.recommendedService,"A"]})]}),s.jsx("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center",border:`1px solid ${w.cardBorder}`},children:s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText},children:["@ ",ue,"V ",k==="single"?"Single":"Three"," Phase"]})})]})]}),s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Commercial Service Considerations:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Include demand factors per NEC 220.40 and Article 220 Part IV"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider future expansion (typically 20-30% spare capacity)"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Account for motor loads, HVAC, and large equipment"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Review utility requirements and available fault current"}),s.jsx("li",{children:"Consider separate services for different occupancies"})]})]})]})})]}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`,fontSize:"0.8125rem",color:w.labelText,marginTop:"1rem"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:w.cardText},children:"NEC Article 230 - Services and Service Equipment:"}),"220.82: Dwelling unit optional calculation  230.42: Minimum conductor size  230.79: Disconnecting means rating  230.90: Overload protection"]})]})}),sB=({gecData:r,setGecData:e,colors:t})=>{const n={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}},o=(()=>{if(!r.serviceSize)return null;const l=r.serviceSize;let u="";const h=["14","12","10","8","6","4","3","2","1"],d=["1/0","2/0","3/0","4/0"],g=parseInt(l);return h.includes(l)?parseInt(l)>=2?u="2 or smaller":l==="1"&&(u="1 or 1/0"):d.includes(l)?l==="1/0"?u="1 or 1/0":l==="2/0"||l==="3/0"?u="2/0 or 3/0":l==="4/0"&&(u="4/0 to 350"):isNaN(g)||(g>=250&&g<=350?u="4/0 to 350":g>=400&&g<=600?u="400 to 600":g>=650&&g<=1100?u="650 to 1100":g>1100&&(u="over 1100")),{serviceSize:l,category:u,gecSize:n[r.conductorMaterial][u]||"N/A"}})();return s.jsxs("div",{className:ys.container,children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Service Conductor",s.jsx("br",{})," Size"]}),s.jsxs("select",{value:r.serviceSize,onChange:l=>e(u=>({...u,serviceSize:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"",children:"Select Size"}),s.jsx("option",{value:"8",children:"8 AWG"}),s.jsx("option",{value:"6",children:"6 AWG"}),s.jsx("option",{value:"4",children:"4 AWG"}),s.jsx("option",{value:"2",children:"2 AWG"}),s.jsx("option",{value:"1",children:"1 AWG"}),s.jsx("option",{value:"1/0",children:"1/0 AWG"}),s.jsx("option",{value:"2/0",children:"2/0 AWG"}),s.jsx("option",{value:"3/0",children:"3/0 AWG"}),s.jsx("option",{value:"4/0",children:"4/0 AWG"}),s.jsx("option",{value:"250",children:"250 kcmil"}),s.jsx("option",{value:"350",children:"350 kcmil"}),s.jsx("option",{value:"500",children:"500 kcmil"}),s.jsx("option",{value:"750",children:"750 kcmil"}),s.jsx("option",{value:"1000",children:"1000 kcmil"}),s.jsx("option",{value:"1500",children:"1500 kcmil"})]}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Largest ungrounded service conductor"})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["GEC ",s.jsx("br",{}),"Material"]}),s.jsxs("select",{value:r.conductorMaterial,onChange:l=>e(u=>({...u,conductorMaterial:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"copper",children:"Copper"}),s.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]}),o&&o.gecSize!=="N/A"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Grounding Electrode Conductor"}),s.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[o.gecSize," AWG"]}),s.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Per NEC Table 250.66"}),s.jsxs("div",{children:["Service conductor: ",o.serviceSize," AWG ",r.conductorMaterial]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Important Notes:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"GEC to rod/pipe/plate need not be larger than 6 AWG copper"}),s.jsx("li",{children:"GEC to concrete-encased electrode need not be larger than 4 AWG copper"}),s.jsx("li",{children:"Must be continuous without splices (except as permitted)"})]})]})]})]})},aB=({egcData:r,setEgcData:e,colors:t})=>{const n={copper:{15:"14",20:"12",30:"10",40:"10",60:"10",100:"8",200:"6",300:"4",400:"3",500:"2",600:"1",800:"1/0",1e3:"2/0",1200:"3/0",1600:"4/0",2e3:"250",2500:"350",3e3:"400",4e3:"500",5e3:"700",6e3:"800"},aluminum:{15:"12",20:"10",30:"8",40:"8",60:"8",100:"6",200:"4",300:"2",400:"1",500:"1/0",600:"2/0",800:"3/0",1e3:"4/0",1200:"250",1600:"350",2e3:"400",2500:"500",3e3:"600",4e3:"750",5e3:"1000",6e3:"1200"}},o=(()=>{const l=parseInt(r.ocpdRating);if(!l)return null;const u=Object.keys(n[r.conductorMaterial]).map(Number).sort((d,g)=>d-g),h=u.find(d=>d>=l)||u[u.length-1];return{ocpdRating:l,applicableRating:h,egcSize:n[r.conductorMaterial][h]}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Overcurrent Device Rating (A)"}),s.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:r.ocpdRating,onChange:l=>{const u=l.target.value.replace(/[^0-9]/g,"");e(h=>({...h,ocpdRating:u}))},placeholder:"Enter rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Circuit breaker or fuse rating"})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["EGC ",s.jsx("br",{})," Material"]}),s.jsxs("select",{value:r.conductorMaterial,onChange:l=>e(u=>({...u,conductorMaterial:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"copper",children:"Copper"}),s.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]}),o&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Equipment Grounding Conductor"}),s.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[o.egcSize," AWG"]}),s.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Per NEC Table 250.122"}),s.jsxs("div",{children:["OCPD rating: ",o.ocpdRating,"A"]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Important Notes:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Increase proportionally if conductors upsized for voltage drop"}),s.jsx("li",{children:"Size per each raceway if conductors run in parallel"}),s.jsx("li",{children:"Based on rating of OCPD ahead of circuit"})]})]})]})]})},lB=({bondingData:r,setBondingData:e,colors:t})=>{const n={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}},o=(()=>{if(!r.serviceSize)return null;const l=r.serviceSize;let u="";const h=["14","12","10","8","6","4","3","2","1"],d=["1/0","2/0","3/0","4/0"],g=parseInt(l);return h.includes(l)?parseInt(l)>=2?u="2 or smaller":l==="1"&&(u="1 or 1/0"):d.includes(l)?l==="1/0"?u="1 or 1/0":l==="2/0"||l==="3/0"?u="2/0 or 3/0":l==="4/0"&&(u="4/0 to 350"):isNaN(g)||(g>=250&&g<=350?u="4/0 to 350":g>=400&&g<=600?u="400 to 600":g>=650&&g<=1100?u="650 to 1100":g>1100&&(u="over 1100")),{serviceSize:l,jumperSize:n[r.conductorMaterial][u]||"N/A",jumperType:r.jumperType}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Bonding Jumper Type"}),s.jsxs("select",{value:r.jumperType,onChange:l=>e(u=>({...u,jumperType:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"main",children:"Main Bonding Jumper (Service)"}),s.jsx("option",{value:"system",children:"System Bonding Jumper (Separately Derived)"})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Conductor Size"}),s.jsxs("select",{value:r.serviceSize,onChange:l=>e(u=>({...u,serviceSize:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"",children:"Select Size"}),s.jsx("option",{value:"8",children:"8 AWG"}),s.jsx("option",{value:"6",children:"6 AWG"}),s.jsx("option",{value:"4",children:"4 AWG"}),s.jsx("option",{value:"2",children:"2 AWG"}),s.jsx("option",{value:"1",children:"1 AWG"}),s.jsx("option",{value:"1/0",children:"1/0 AWG"}),s.jsx("option",{value:"2/0",children:"2/0 AWG"}),s.jsx("option",{value:"3/0",children:"3/0 AWG"}),s.jsx("option",{value:"4/0",children:"4/0 AWG"}),s.jsx("option",{value:"250",children:"250 kcmil"}),s.jsx("option",{value:"500",children:"500 kcmil"}),s.jsx("option",{value:"750",children:"750 kcmil"}),s.jsx("option",{value:"1000",children:"1000 kcmil"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Material"}),s.jsxs("select",{value:r.conductorMaterial,onChange:l=>e(u=>({...u,conductorMaterial:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"copper",children:"Copper"}),s.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]})]}),o&&o.jumperSize!=="N/A"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:[r.jumperType==="main"?"Main":"System"," Bonding Jumper"]}),s.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[o.jumperSize," AWG"]}),s.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:["Per NEC ",r.jumperType==="main"?"250.28(D)":"250.30(A)(1)"]}),s.jsxs("div",{children:["Conductor size: ",o.serviceSize," AWG ",r.conductorMaterial]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:[r.jumperType==="main"?"Main":"System"," Bonding Jumper Requirements:"]}),s.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:r.jumperType==="main"?s.jsxs(s.Fragment,{children:[s.jsx("li",{children:"Connects grounded conductor to equipment grounding conductor"}),s.jsx("li",{children:"Sized per Table 250.66 based on service conductor"}),s.jsx("li",{children:"Can be wire, bus, screw, or similar conductor"})]}):s.jsxs(s.Fragment,{children:[s.jsx("li",{children:"Required for separately derived systems"}),s.jsx("li",{children:"Connects grounded to equipment grounding conductor"}),s.jsx("li",{children:"Installed at same location as GEC connection"})]})})]})]})]})},cB=fe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=fe.useState("gec"),[o,l]=fe.useState({serviceSize:"",conductorMaterial:"copper"}),[u,h]=fe.useState({ocpdRating:"",conductorMaterial:"copper"}),[d,g]=fe.useState({serviceSize:"",conductorMaterial:"copper",jumperType:"main"}),b=fe.useMemo(()=>({cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"}),[r]);return fe.useImperativeHandle(t,()=>({exportPDF:()=>{let S;if(n==="gec"){if(!o.serviceSize){alert("Please select a service conductor size before exporting");return}const x={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}};let B="";const E=o.serviceSize,L=["14","12","10","8","6","4","3","2","1"],A=["1/0","2/0","3/0","4/0"],O=parseInt(E);L.includes(E)?parseInt(E)>=2?B="2 or smaller":E==="1"&&(B="1 or 1/0"):A.includes(E)?E==="1/0"?B="1 or 1/0":E==="2/0"||E==="3/0"?B="2/0 or 3/0":E==="4/0"&&(B="4/0 to 350"):isNaN(O)||(O>=250&&O<=350?B="4/0 to 350":O>=400&&O<=600?B="400 to 600":O>=650&&O<=1100?B="650 to 1100":O>1100&&(B="over 1100"));const $=x[o.conductorMaterial][B];S={calculatorName:"Grounding & Bonding - Grounding Electrode Conductor",inputs:{serviceConductorSize:`${o.serviceSize} AWG`,material:o.conductorMaterial.charAt(0).toUpperCase()+o.conductorMaterial.slice(1)},results:{groundingElectrodeConductor:`${$} AWG ${o.conductorMaterial}`},additionalInfo:{note1:"GEC to rod/pipe/plate need not be larger than 6 AWG copper",note2:"GEC to concrete-encased electrode need not be larger than 4 AWG copper",note3:"Must be continuous without splices (except as permitted)"},necReferences:["NEC Table 250.66 - Grounding Electrode Conductor for Alternating-Current Systems","NEC 250.64 - Grounding Electrode Conductor Installation","NEC 250.52 - Grounding Electrodes"]}}else if(n==="egc"){if(!u.ocpdRating){alert("Please enter an overcurrent device rating before exporting");return}const x={copper:{15:"14",20:"12",30:"10",40:"10",60:"10",100:"8",200:"6",300:"4",400:"3",500:"2",600:"1",800:"1/0",1e3:"2/0",1200:"3/0",1600:"4/0",2e3:"250",2500:"350",3e3:"400",4e3:"500",5e3:"700",6e3:"800"},aluminum:{15:"12",20:"10",30:"8",40:"8",60:"8",100:"6",200:"4",300:"2",400:"1",500:"1/0",600:"2/0",800:"3/0",1e3:"4/0",1200:"250",1600:"350",2e3:"400",2500:"500",3e3:"600",4e3:"750",5e3:"1000",6e3:"1200"}},B=parseInt(u.ocpdRating),E=Object.keys(x[u.conductorMaterial]).map(Number).sort((O,$)=>O-$),L=E.find(O=>O>=B)||E[E.length-1],A=x[u.conductorMaterial][L];S={calculatorName:"Grounding & Bonding - Equipment Grounding Conductor",inputs:{overcurrentDeviceRating:`${B} Amps`,material:u.conductorMaterial.charAt(0).toUpperCase()+u.conductorMaterial.slice(1)},results:{equipmentGroundingConductor:`${A} AWG ${u.conductorMaterial}`,basedOnOCPDRating:`${L} Amps`},additionalInfo:{note1:"Increase proportionally if conductors upsized for voltage drop",note2:"Size per each raceway if conductors run in parallel",note3:"Based on rating of OCPD ahead of circuit"},necReferences:["NEC Table 250.122 - Minimum Size Equipment Grounding Conductors for Grounding Raceway and Equipment","NEC 250.122(B) - Increased in Size","NEC 250.122(F) - Conductors in Parallel"]}}else if(n==="bonding"){if(!d.serviceSize){alert("Please select a conductor size before exporting");return}const x={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}};let B="";const E=d.serviceSize,L=["14","12","10","8","6","4","3","2","1"],A=["1/0","2/0","3/0","4/0"],O=parseInt(E);L.includes(E)?parseInt(E)>=2?B="2 or smaller":E==="1"&&(B="1 or 1/0"):A.includes(E)?E==="1/0"?B="1 or 1/0":E==="2/0"||E==="3/0"?B="2/0 or 3/0":E==="4/0"&&(B="4/0 to 350"):isNaN(O)||(O>=250&&O<=350?B="4/0 to 350":O>=400&&O<=600?B="400 to 600":O>=650&&O<=1100?B="650 to 1100":O>1100&&(B="over 1100"));const $=x[d.conductorMaterial][B],F=d.jumperType==="main"?"Main Bonding Jumper":"System Bonding Jumper";S={calculatorName:`Grounding & Bonding - ${F}`,inputs:{jumperType:F,conductorSize:`${d.serviceSize} AWG`,material:d.conductorMaterial.charAt(0).toUpperCase()+d.conductorMaterial.slice(1)},results:{bondingJumperSize:`${$} AWG ${d.conductorMaterial}`},additionalInfo:d.jumperType==="main"?{purpose:"Connects grounded conductor to equipment grounding conductor",sizing:"Sized per Table 250.66 based on service conductor",forms:"Can be wire, bus, screw, or similar conductor"}:{purpose:"Required for separately derived systems",connection:"Connects grounded to equipment grounding conductor",location:"Installed at same location as GEC connection"},necReferences:d.jumperType==="main"?["NEC 250.28 - Main Bonding Jumper and System Bonding Jumper","NEC 250.28(D) - Size","NEC Table 250.66 - Sizing Reference"]:["NEC 250.30 - Grounding Separately Derived Alternating-Current Systems","NEC 250.30(A)(1) - System Bonding Jumper","NEC Table 250.66 - Sizing Reference"]}}cn(S)}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"gec",label:"Grounding Electrode"},{id:"egc",label:"Equipment Grounding"},{id:"bonding",label:"Bonding Jumpers"}].map(S=>s.jsx("button",{className:ys.btn,onClick:()=>i(S.id),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.625rem 1rem",background:n===S.id?"#3b82f6":b.sectionBg,color:n===S.id?"white":b.labelText,border:`1px solid ${n===S.id?"#3b82f6":b.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:S.label},S.id))}),s.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[n==="gec"&&s.jsx(sB,{gecData:o,setGecData:l,colors:b}),n==="egc"&&s.jsx(aB,{egcData:u,setEgcData:h,colors:b}),n==="bonding"&&s.jsx(lB,{bondingData:d,setBondingData:g,colors:b})]})]})}),uB=({offsetData:r,setOffsetData:e,colors:t})=>{const n={10:{distance:6,shrink:.01},"22.5":{distance:2.6,shrink:.06},30:{distance:2,shrink:.25},45:{distance:1.4,shrink:.41},60:{distance:1.2,shrink:.58}},o=(()=>{if(!r.obstacleHeight)return null;const l=parseFloat(r.obstacleHeight),u=n[r.bendAngle];return{distanceBetweenBends:(l*u.distance).toFixed(2),shrinkage:(l*u.shrink).toFixed(2),angle:r.bendAngle}})();return s.jsxs("div",{className:ys.menu,children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Obstacle Height (inches)"}),s.jsx("input",{type:"number",value:r.obstacleHeight,onChange:l=>e(u=>({...u,obstacleHeight:l.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Height to clear obstacle"})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Bend Angle ",s.jsx("br",{}),"  ",s.jsx("br",{})]}),s.jsxs("select",{value:r.bendAngle,onChange:l=>e(u=>({...u,bendAngle:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"10",children:"10"}),s.jsx("option",{value:"22.5",children:"22.5"}),s.jsx("option",{value:"30",children:"30"}),s.jsx("option",{value:"45",children:"45"}),s.jsx("option",{value:"60",children:"60"})]}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Most common: 30 or 45"})]})]}),o&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Distance Between Bends"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[o.distanceBetweenBends,'"']})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Shrinkage"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.shrinkage,'"']})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"How to Make the Bend"}),s.jsxs("div",{children:["Mark first bend, measure ",o.distanceBetweenBends,'" from center of first bend, then make second bend at ',o.angle,"."]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Offset Bend Tips:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"30 bends are most common for typical offsets"}),s.jsx("li",{children:"45 bends create shorter, steeper offsets"}),s.jsx("li",{children:"Always account for shrinkage in measurements"})]})]})]})]})},dB=({stubUpData:r,setStubUpData:e,colors:t})=>{const n={"1/2":5,"3/4":6,1:8,"1-1/4":11,"1-1/2":14,2:16,"2-1/2":21,3:26,"3-1/2":30,4:34},o=(()=>{if(!r.stubHeight)return null;const l=parseFloat(r.stubHeight),u=n[r.conduitSize];return{markDistance:(l-u).toFixed(2),deduction:u,stubHeight:l.toFixed(2)}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Desired Stub Height (inches)"}),s.jsx("input",{type:"number",value:r.stubHeight,onChange:l=>e(u=>({...u,stubHeight:l.target.value})),placeholder:"Enter stub height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Back of 90 to floor"})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Conduit Size ",s.jsx("br",{}),"  ",s.jsx("br",{})]}),s.jsx("select",{value:r.conduitSize,onChange:l=>e(u=>({...u,conduitSize:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.keys(n).map(l=>s.jsxs("option",{value:l,children:[l,'"']},l))})]})]}),o&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Mark At"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[o.markDistance,'"']})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Deduction"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.deduction,'"']})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Conduit Size"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[r.conduitSize,'"']})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"How to Bend"}),s.jsxs("div",{children:["Measure from end of conduit, mark at ",o.markDistance,'", line up mark with arrow on bender, make 90 bend.']})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Stub-Up Tips:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Deduction accounts for the radius of the bend"}),s.jsx("li",{children:"Larger conduit = larger deduction"}),s.jsx("li",{children:"Always check your bender - deductions vary by manufacturer"})]})]})]})]})},hB=({saddleData:r,setSaddleData:e,colors:t})=>{const i=(()=>{if(!r.obstacleHeight)return null;const o=parseFloat(r.obstacleHeight),l=parseFloat(r.obstacleWidth)||o*4,u=o*.3;return{centerBend:45,outerBends:22.5,distanceToOuter:(l/2).toFixed(2),shrinkage:u.toFixed(2),obstacleHeight:o.toFixed(2)}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Obstacle Height (inches)"}),s.jsx("input",{type:"number",value:r.obstacleHeight,onChange:o=>e(l=>({...l,obstacleHeight:o.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Width ",s.jsx("br",{})," (Optional)"]}),s.jsx("input",{type:"number",value:r.obstacleWidth,onChange:o=>e(l=>({...l,obstacleWidth:o.target.value})),placeholder:"Auto: 4x height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Center Bend"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[i.centerBend,""]})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Outer Bends"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[i.outerBends,""]})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Distance to Outer"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[i.distanceToOuter,'"']})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Bending Sequence"}),s.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Mark center of obstacle on conduit"}),s.jsx("li",{children:"Make 45 center bend at mark"}),s.jsxs("li",{children:["Measure ",i.distanceToOuter,'" from center each direction']}),s.jsx("li",{children:"Make 22.5 bends on each side (opposite direction)"})]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"3-Point Saddle Tips:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Center bend goes up, outer bends go down"}),s.jsx("li",{children:"Most common for going over pipes or other conduits"}),s.jsx("li",{children:"Mark all three bend locations before starting"})]})]})]})]})},fB=({fourPointData:r,setFourPointData:e,colors:t})=>{const i=(()=>{if(!r.obstacleHeight||!r.obstacleWidth)return null;const o=parseFloat(r.obstacleHeight),l=parseFloat(r.obstacleWidth),u=l/2,h=l/4,d=o*.15;return{bendAngle:22.5,distanceToOuter:u.toFixed(2),innerSpacing:h.toFixed(2),shrinkage:d.toFixed(2)}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Height ",s.jsx("br",{})," (inches)"]}),s.jsx("input",{type:"number",value:r.obstacleHeight,onChange:o=>e(l=>({...l,obstacleHeight:o.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Width ",s.jsx("br",{})," (inches)"]}),s.jsx("input",{type:"number",value:r.obstacleWidth,onChange:o=>e(l=>({...l,obstacleWidth:o.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"All Bends"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[i.bendAngle,""]})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Outer Distance"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[i.distanceToOuter,'"']})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Inner Spacing"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[i.innerSpacing,'"']})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Bending Sequence"}),s.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Mark center of obstacle on conduit"}),s.jsxs("li",{children:["Measure ",i.distanceToOuter,'" from center (outer bends)']}),s.jsxs("li",{children:["Measure ",i.innerSpacing,'" from center (inner bends)']}),s.jsx("li",{children:"Make all four 22.5 bends: outer up, inner down"})]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"4-Point Saddle Tips:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Used for larger obstacles where 3-point won't work"}),s.jsx("li",{children:"Outer bends go up, inner bends go down"}),s.jsx("li",{children:"Creates a flatter top for better clearance"})]})]})]})]})},pB=fe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=fe.useState("offset"),[o,l]=fe.useState({obstacleHeight:"",bendAngle:"30"}),[u,h]=fe.useState({stubHeight:"",conduitSize:"3/4"}),[d,g]=fe.useState({obstacleHeight:"",obstacleWidth:""}),[b,S]=fe.useState({obstacleHeight:"",obstacleWidth:""}),x={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};fe.useImperativeHandle(t,()=>({exportPDF:()=>{let E;if(n==="offset"){if(!o.obstacleHeight){alert("Please enter obstacle height for Offset Bends before exporting");return}const L={10:{distance:6,shrink:.01},"22.5":{distance:2.6,shrink:.06},30:{distance:2,shrink:.25},45:{distance:1.4,shrink:.41},60:{distance:1.2,shrink:.58}},A=parseFloat(o.obstacleHeight),O=L[o.bendAngle],$=(A*O.distance).toFixed(2),F=(A*O.shrink).toFixed(2);E={calculatorName:"Conduit Bending - Offset Bends",inputs:{obstacleHeight:`${o.obstacleHeight} inches`,bendAngle:`${o.bendAngle}`},results:{distanceBetweenBends:`${$} inches`,shrinkage:`${F} inches`},additionalInfo:{instructions:`Mark first bend, measure ${$}" from center of first bend, then make second bend at ${o.bendAngle}`,multiplierUsed:`Distance: ${O.distance}, Shrink: ${O.shrink}`},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","30 bends are most common for typical offsets","45 bends create shorter, steeper offsets"]}}else if(n==="stubup"){if(!u.stubHeight){alert("Please enter stub height for 90 Stub-Up before exporting");return}const L={"1/2":5,"3/4":6,1:8,"1-1/4":11,"1-1/2":14,2:16,"2-1/2":21,3:26,"3-1/2":30,4:34},A=parseFloat(u.stubHeight),O=L[u.conduitSize],$=(A-O).toFixed(2);E={calculatorName:"Conduit Bending - 90 Stub-Up",inputs:{desiredStubHeight:`${u.stubHeight} inches`,conduitSize:`${u.conduitSize}"`},results:{markAt:`${$} inches`,deduction:`${O} inches`},additionalInfo:{instructions:`Measure from end of conduit, mark at ${$}", line up mark with arrow on bender, make 90 bend`,note:"Deduction accounts for the radius of the bend - larger conduit requires larger deduction"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Always check your bender - deductions vary by manufacturer"]}}else if(n==="saddle"){if(!d.obstacleHeight){alert("Please enter obstacle height for 3-Point Saddle before exporting");return}const L=parseFloat(d.obstacleHeight),A=parseFloat(d.obstacleWidth)||L*4,O=(L*.3).toFixed(2),$=(A/2).toFixed(2);E={calculatorName:"Conduit Bending - 3-Point Saddle",inputs:{obstacleHeight:`${d.obstacleHeight} inches`,obstacleWidth:d.obstacleWidth?`${d.obstacleWidth} inches`:`${A} inches (Auto: 4x height)`},results:{centerBend:"45",outerBends:"22.5",distanceToOuter:`${$} inches`,shrinkage:`${O} inches`},additionalInfo:{bendingSequence:`1) Mark center of obstacle on conduit 2) Make 45 center bend at mark 3) Measure ${$}" from center each direction 4) Make 22.5 bends on each side (opposite direction)`,tip:"Center bend goes up, outer bends go down"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Most common for going over pipes or other conduits","Mark all three bend locations before starting"]}}else if(n==="fourpoint"){if(!b.obstacleHeight||!b.obstacleWidth){alert("Please enter both obstacle height and width for 4-Point Saddle before exporting");return}const L=parseFloat(b.obstacleHeight),A=parseFloat(b.obstacleWidth),O=(A/2).toFixed(2),$=(A/4).toFixed(2),F=(L*.15).toFixed(2);E={calculatorName:"Conduit Bending - 4-Point Saddle",inputs:{obstacleHeight:`${b.obstacleHeight} inches`,obstacleWidth:`${b.obstacleWidth} inches`},results:{allBends:"22.5",outerDistance:`${O} inches`,innerSpacing:`${$} inches`,shrinkage:`${F} inches`},additionalInfo:{bendingSequence:`1) Mark center of obstacle on conduit 2) Measure ${O}" from center (outer bends) 3) Measure ${$}" from center (inner bends) 4) Make all four 22.5 bends: outer up, inner down`,tip:"Used for larger obstacles where 3-point saddle will not work"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Creates a flatter top for better clearance over wide obstacles"]}}cn(E)}}));const B={offset:s.jsx(uB,{offsetData:o,setOffsetData:l,colors:x}),stubup:s.jsx(dB,{stubUpData:u,setStubUpData:h,colors:x}),saddle:s.jsx(hB,{saddleData:d,setSaddleData:g,colors:x}),fourpoint:s.jsx(fB,{fourPointData:b,setFourPointData:S,colors:x})};return s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:x.cardBg,border:`1px solid ${x.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"offset",label:"Offset Bends"},{id:"stubup",label:"90 Stub-Up"},{id:"saddle",label:"3-Point Saddle"},{id:"fourpoint",label:"4-Point Saddle"}].map(E=>s.jsx("button",{className:ys.btn,onClick:()=>i(E.id),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.625rem 1rem",background:n===E.id?"#3b82f6":x.sectionBg,color:n===E.id?"white":x.labelText,border:`1px solid ${n===E.id?"#3b82f6":x.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:E.label},E.id))}),s.jsx("div",{style:{background:x.cardBg,border:`1px solid ${x.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:B[n]})]})}),mB=({lumensData:r,setLumensData:e,colors:t})=>{const n={living:10,kitchen:50,bathroom:70,bedroom:10,office:50,workshop:75,garage:50,hallway:5,dining:30,laundry:50},i={living:"Living Room (10 fc)",kitchen:"Kitchen (50 fc)",bathroom:"Bathroom (70 fc)",bedroom:"Bedroom (10 fc)",office:"Office/Study (50 fc)",workshop:"Workshop (75 fc)",garage:"Garage (50 fc)",hallway:"Hallway (5 fc)",dining:"Dining Room (30 fc)",laundry:"Laundry Room (50 fc)"},l=(()=>{if(!r.roomLength||!r.roomWidth)return null;const u=parseFloat(r.roomLength),h=parseFloat(r.roomWidth),d=u*h,g=n[r.roomType],b=g*d;let S=null;if(r.lumensPerFixture){const x=parseFloat(r.lumensPerFixture);S=Math.ceil(b/x)}return{area:d.toFixed(1),footCandles:g,totalLumens:b.toFixed(0),fixturesNeeded:S}})();return s.jsxs("div",{className:ys.menu,children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),s.jsx("input",{type:"number",value:r.roomLength,onChange:u=>e(h=>({...h,roomLength:u.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),s.jsx("input",{type:"number",value:r.roomWidth,onChange:u=>e(h=>({...h,roomWidth:u.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Room Type ",s.jsx("br",{}),"  ",s.jsx("br",{})]}),s.jsx("select",{value:r.roomType,onChange:u=>e(h=>({...h,roomType:u.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.entries(i).map(([u,h])=>s.jsx("option",{value:u,children:h},u))}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"fc = foot-candles"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Lumens per Fixture (Optional)"}),s.jsx("input",{type:"number",value:r.lumensPerFixture,onChange:u=>e(h=>({...h,lumensPerFixture:u.target.value})),placeholder:"e.g., 800",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"To calculate fixture count"})]})]}),l&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:l.fixturesNeeded?"repeat(3, 1fr)":"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Room Area"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:l.area}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"sq ft"})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Lumens Needed"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:l.totalLumens}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"lumens"})]}),l.fixturesNeeded&&s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Fixtures Needed"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:l.fixturesNeeded}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"fixtures"})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Lighting Requirements"}),s.jsxs("div",{children:["Recommended level: ",l.footCandles," foot-candles"]}),l.fixturesNeeded&&s.jsxs("div",{children:["Using ",r.lumensPerFixture," lumens per fixture"]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Lighting Tips:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"LED bulbs typically produce 60-100 lumens per watt"}),s.jsx("li",{children:"Layer lighting: combine ambient, task, and accent lighting"}),s.jsx("li",{children:"Dark wall colors absorb light; increase lumens by 10-20%"})]})]})]})]})},gB=({spacingData:r,setSpacingData:e,colors:t})=>{const n={recessed:1.5,pendant:1,track:2,surface:1.5},o=(()=>{if(!r.roomLength||!r.roomWidth)return null;const l=parseFloat(r.roomLength),u=parseFloat(r.roomWidth),h=parseFloat(r.ceilingHeight),d=n[r.fixtureType],g=h*d,b=r.fixtureType==="recessed"?6:g*.8,S=Math.max(2,Math.round(l/b)),x=Math.max(2,Math.round(u/b)),B=S*x,E=l/S,L=u/x,A=E/2,O=L/2;return{maxSpacing:g.toFixed(1),fixturesLength:S,fixturesWidth:x,totalFixtures:B,actualSpacingLength:E.toFixed(1),actualSpacingWidth:L.toFixed(1),wallOffsetLength:A.toFixed(1),wallOffsetWidth:O.toFixed(1)}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),s.jsx("input",{type:"number",value:r.roomLength,onChange:l=>e(u=>({...u,roomLength:l.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),s.jsx("input",{type:"number",value:r.roomWidth,onChange:l=>e(u=>({...u,roomWidth:l.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Ceiling Height (feet)"}),s.jsx("input",{type:"number",value:r.ceilingHeight,onChange:l=>e(u=>({...u,ceilingHeight:l.target.value})),placeholder:"8",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Fixture Type"}),s.jsxs("select",{value:r.fixtureType,onChange:l=>e(u=>({...u,fixtureType:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"recessed",children:"Recessed Can (1.5:1 ratio)"}),s.jsx("option",{value:"pendant",children:"Pendant (1:1 ratio)"}),s.jsx("option",{value:"track",children:"Track Light (2:1 ratio)"}),s.jsx("option",{value:"surface",children:"Surface Mount (1.5:1 ratio)"})]})]})]}),o&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Max Spacing"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.maxSpacing}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"feet"})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Fixtures"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.totalFixtures}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"fixtures"})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Layout"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.fixturesLength,"",o.fixturesWidth]}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"grid"})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Spacing Results"}),s.jsxs("div",{children:["Length spacing: ",o.actualSpacingLength," ft"]}),s.jsxs("div",{children:["Width spacing: ",o.actualSpacingWidth," ft"]}),s.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.8125rem"},children:["Start ",o.wallOffsetLength," ft from walls (length) and ",o.wallOffsetWidth," ft from walls (width)"]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Spacing Guidelines:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Industry standard: 4-6 feet spacing for recessed cans"}),s.jsx("li",{children:"Spacing ratio = max distance between fixtures  ceiling height"}),s.jsx("li",{children:"Space fixtures evenly with proper wall offsets for uniform coverage"})]})]})]})]})},yB=({wattsData:r,setWattsData:e,colors:t})=>{const n={office:1,retail:1.5,warehouse:.5,school:1.2,hospital:1,hotel:1,restaurant:1.3,residential:1},i={office:"Office Building (1.0 W/sq ft)",retail:"Retail Store (1.5 W/sq ft)",warehouse:"Warehouse (0.5 W/sq ft)",school:"School (1.2 W/sq ft)",hospital:"Hospital (1.0 W/sq ft)",hotel:"Hotel (1.0 W/sq ft)",restaurant:"Restaurant (1.3 W/sq ft)",residential:"Residential (1.0 W/sq ft)"},l=(()=>{if(!r.area)return null;const u=parseFloat(r.area),h=n[r.buildingType],d=u*h,g=d,b=g/120,S=Math.ceil(b/16);return{wattsPerSqFt:h,totalWatts:d.toFixed(0),totalVA:g.toFixed(0),amperage:b.toFixed(1),circuits:S}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Area (square feet)"}),s.jsx("input",{type:"number",value:r.area,onChange:u=>e(h=>({...h,area:u.target.value})),placeholder:"Enter area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Building Type"}),s.jsx("select",{value:r.buildingType,onChange:u=>e(h=>({...h,buildingType:u.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.entries(i).map(([u,h])=>s.jsx("option",{value:u,children:h},u))}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Per NEC Table 220.12"})]})]}),l&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Unit Load"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:l.wattsPerSqFt}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"W/sq ft"})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Load"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:l.totalWatts}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"watts"})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:l.circuits}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"needed"})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Lighting Load Calculation"}),s.jsxs("div",{children:["Total VA: ",l.totalVA," VA"]}),s.jsxs("div",{children:["Current @ 120V: ",l.amperage," A"]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Requirements:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"NEC 220.12 specifies unit lighting loads by occupancy"}),s.jsx("li",{children:"Calculate using building area, not just lit area"}),s.jsx("li",{children:"Continuous loads require 125% conductor/OCPD sizing"})]})]})]})]})},xB=fe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=fe.useState("lumens"),[o,l]=fe.useState({roomLength:"",roomWidth:"",roomType:"living",lumensPerFixture:""}),[u,h]=fe.useState({roomLength:"",roomWidth:"",ceilingHeight:"8",fixtureType:"recessed"}),[d,g]=fe.useState({area:"",buildingType:"office"}),b={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};fe.useImperativeHandle(t,()=>({exportPDF:()=>{let x;if(n==="lumens"){if(!o.roomLength||!o.roomWidth){alert("Please enter room dimensions before exporting");return}const B={living:"Living Room",kitchen:"Kitchen",bathroom:"Bathroom",bedroom:"Bedroom",office:"Office/Study",workshop:"Workshop",garage:"Garage",hallway:"Hallway",dining:"Dining Room",laundry:"Laundry Room"},E={living:10,kitchen:50,bathroom:70,bedroom:10,office:50,workshop:75,garage:50,hallway:5,dining:30,laundry:50},L=parseFloat(o.roomLength),A=parseFloat(o.roomWidth),O=(L*A).toFixed(1),$=E[o.roomType],F=($*O).toFixed(0),ie={roomLength:`${o.roomLength} feet`,roomWidth:`${o.roomWidth} feet`,roomType:`${B[o.roomType]} (${$} fc)`},ue={roomArea:`${O} sq ft`,totalLumensNeeded:`${F} lumens`};if(o.lumensPerFixture){const V=parseFloat(o.lumensPerFixture),k=Math.ceil(parseFloat(F)/V);ie.lumensPerFixture=`${o.lumensPerFixture} lumens`,ue.fixturesNeeded=`${k} fixtures`}x={calculatorName:"Lighting Calculations - Room Lumens",inputs:ie,results:ue,additionalInfo:{calculation:`Area (${O} sq ft)  Recommended Level (${$} foot-candles) = ${F} lumens`,tip1:"LED bulbs typically produce 60-100 lumens per watt",tip2:"Layer lighting: combine ambient, task, and accent lighting",tip3:"Dark wall colors absorb light; increase lumens by 10-20%"},necReferences:["IES (Illuminating Engineering Society) recommended light levels","Foot-candles measure illuminance on a surface","1 foot-candle = 1 lumen per square foot"]}}else if(n==="spacing"){if(!u.roomLength||!u.roomWidth){alert("Please enter room dimensions before exporting");return}const B={recessed:"Recessed Can (1.5:1 ratio)",pendant:"Pendant (1:1 ratio)",track:"Track Light (2:1 ratio)",surface:"Surface Mount (1.5:1 ratio)"},E={recessed:1.5,pendant:1,track:2,surface:1.5},L=parseFloat(u.roomLength),A=parseFloat(u.roomWidth),O=parseFloat(u.ceilingHeight),$=E[u.fixtureType],F=(O*$).toFixed(1),ie=u.fixtureType==="recessed"?6:parseFloat(F)*.8,ue=Math.max(2,Math.round(L/ie)),V=Math.max(2,Math.round(A/ie)),k=ue*V,I=(L/ue).toFixed(1),M=(A/V).toFixed(1),C=(parseFloat(I)/2).toFixed(1),w=(parseFloat(M)/2).toFixed(1);x={calculatorName:"Lighting Calculations - Fixture Spacing",inputs:{roomLength:`${u.roomLength} feet`,roomWidth:`${u.roomWidth} feet`,ceilingHeight:`${u.ceilingHeight} feet`,fixtureType:B[u.fixtureType]},results:{maximumSpacing:`${F} feet`,totalFixtures:`${k} fixtures`,layoutGrid:`${ue}  ${V}`,lengthSpacing:`${I} feet`,widthSpacing:`${M} feet`},additionalInfo:{wallOffsets:`Start ${C} ft from walls (length) and ${w} ft from walls (width)`,spacingFormula:`Maximum spacing = Ceiling height (${O} ft)  Spacing ratio (${$}) = ${F} ft`,tip1:"Industry standard: 4-6 feet spacing for recessed cans",tip2:"Space fixtures evenly with proper wall offsets for uniform coverage"},necReferences:["Spacing ratio guidelines from IES Lighting Handbook","Recessed fixtures: 1.5:1 ratio (spacing to mounting height)","Pendant fixtures: 1:1 ratio for focused task lighting","Track lights: 2:1 ratio for accent lighting"]}}else if(n==="watts"){if(!d.area){alert("Please enter area before exporting");return}const B={office:"Office Building",retail:"Retail Store",warehouse:"Warehouse",school:"School",hospital:"Hospital",hotel:"Hotel",restaurant:"Restaurant",residential:"Residential"},E={office:1,retail:1.5,warehouse:.5,school:1.2,hospital:1,hotel:1,restaurant:1.3,residential:1},L=parseFloat(d.area),A=E[d.buildingType],O=(L*A).toFixed(0),$=O,F=(parseFloat($)/120).toFixed(1),ie=Math.ceil(parseFloat(F)/16);x={calculatorName:"Lighting Calculations - Watts per Square Foot",inputs:{area:`${d.area} square feet`,buildingType:`${B[d.buildingType]} (${A} W/sq ft)`},results:{unitLoad:`${A} W/sq ft`,totalLoad:`${O} watts`,totalVA:`${$} VA`,currentAt120V:`${F} Amps`,requiredCircuits:`${ie}  20A circuits`},additionalInfo:{calculation:`Area (${L} sq ft)  Unit Load (${A} W/sq ft) = ${O} watts`,circuitCalculation:`Total current (${F} A)  16A (80% of 20A) = ${ie} circuits needed`,note:"Continuous loads require 125% conductor/OCPD sizing"},necReferences:["NEC Table 220.12 - General Lighting Loads by Occupancy","NEC 210.19(A)(1) - Branch Circuit Ampacity","NEC 210.20(A) - Continuous and Noncontinuous Loads","Calculate using building area, not just lit area"]}}cn(x)}}));const S={lumens:s.jsx(mB,{lumensData:o,setLumensData:l,colors:b}),spacing:s.jsx(gB,{spacingData:u,setSpacingData:h,colors:b}),watts:s.jsx(yB,{wattsData:d,setWattsData:g,colors:b})};return s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"lumens",label:"Room Lumens"},{id:"spacing",label:"Fixture Spacing"},{id:"watts",label:"Watts/Sq Ft"}].map(x=>s.jsx("button",{className:ys.btn,onClick:()=>i(x.id),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.625rem 1rem",background:n===x.id?"#3b82f6":b.sectionBg,color:n===x.id?"white":b.labelText,border:`1px solid ${n===x.id?"#3b82f6":b.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:x.label},x.id))}),s.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:S[n]})]})}),vB=({generalData:r,setGeneralData:e,colors:t})=>{const i=(()=>{if(!r.roomLength||!r.roomWidth)return null;const o=parseFloat(r.roomLength),l=parseFloat(r.roomWidth),u=(o+l)*2,h=Math.max(2,Math.ceil(u/12));let d=0;if(r.hasCounters){const x=parseFloat(r.counterLength)||0;d=Math.max(2,Math.ceil(x/2))}const g=h+d,b=Math.ceil(g/8),S=Math.ceil(g/10);return{perimeter:u.toFixed(1),wallReceptacles:h,counterReceptacles:d,totalReceptacles:g,circuits15A:b,circuits20A:S}})();return s.jsxs("div",{className:ys.menu,children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),s.jsx("input",{type:"number",value:r.roomLength,onChange:o=>e(l=>({...l,roomLength:o.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),s.jsx("input",{type:"number",value:r.roomWidth,onChange:o=>e(l=>({...l,roomWidth:o.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsx("div",{style:{gridColumn:"1 / -1"},children:s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:r.hasCounters,onChange:o=>e(l=>({...l,hasCounters:o.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Room has countertops/islands"]})}),r.hasCounters&&s.jsxs("div",{style:{gridColumn:"1 / -1"},children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Counter Length (feet)"}),s.jsx("input",{type:"number",value:r.counterLength,onChange:o=>e(l=>({...l,counterLength:o.target.value})),placeholder:"Enter counter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"For kitchens/break rooms"})]})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:i.counterReceptacles>0?"repeat(3, 1fr)":"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Wall Receptacles"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:i.wallReceptacles})]}),i.counterReceptacles>0&&s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Counter Receptacles"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.counterReceptacles})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Needed"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.totalReceptacles})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"15A Circuits"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.circuits15A})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.circuits20A})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"NEC Requirements Met"}),s.jsxs("div",{children:["Room perimeter: ",i.perimeter," ft"]}),s.jsx("div",{children:"Spacing: One receptacle every 12 feet of wall space"}),i.counterReceptacles>0&&s.jsx("div",{children:"Counter spacing: One receptacle every 2 feet"})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC 210.52 Requirements:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Wall: Receptacle within 6 ft of doorway, then every 12 ft"}),s.jsx("li",{children:"No point along wall more than 6 ft from receptacle"}),s.jsx("li",{children:"Counters: One receptacle every 24 inches of counter space"}),s.jsx("li",{children:"Kitchen requires min. 2 small appliance circuits (20A)"})]})]})]})]})},bB=({kitchenData:r,setKitchenData:e,colors:t})=>{const i=(()=>{if(!r.counterLength)return null;const o=parseFloat(r.counterLength),l=parseFloat(r.islandLength)||0,u=Math.max(2,Math.ceil(o/2)),h=l>=2?Math.max(1,Math.ceil(l/4)):0,d=2,g=u+h;let b=0;return r.dishwasher&&b++,r.disposer&&b++,r.microwave&&b++,r.range&&b++,{counterReceptacles:u,islandReceptacles:h,totalReceptacles:u+h,smallApplianceCircuits:d,dedicatedCircuits:b,gfciRequired:g}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Counter Length (feet)"}),s.jsx("input",{type:"number",value:r.counterLength,onChange:o=>e(l=>({...l,counterLength:o.target.value})),placeholder:"Enter counter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Island Length (feet) - Optional"}),s.jsx("input",{type:"number",value:r.islandLength,onChange:o=>e(l=>({...l,islandLength:o.target.value})),placeholder:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:'Required if island  24" long  12" wide'})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.75rem",color:t.cardText,fontSize:"0.875rem"},children:"Dedicated Appliance Circuits:"}),s.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:r.dishwasher,onChange:o=>e(l=>({...l,dishwasher:o.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Dishwasher (dedicated 15A/20A)"]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:r.disposer,onChange:o=>e(l=>({...l,disposer:o.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Garbage Disposer (dedicated 15A/20A)"]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:r.microwave,onChange:o=>e(l=>({...l,microwave:o.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Microwave (dedicated 20A)"]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:r.range,onChange:o=>e(l=>({...l,range:o.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Range/Cooktop (240V, 40-50A)"]})]})]})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Counter Receptacles"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:i.counterReceptacles})]}),i.islandReceptacles>0&&s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Island Receptacles"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.islandReceptacles})]}),i.islandReceptacles===0&&s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"GFCI Required"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.gfciRequired})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Small Appliance Circuits"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.smallApplianceCircuits}),s.jsx("div",{style:{fontSize:"0.65rem",color:t.subtleText,marginTop:"0.25rem"},children:"20A each"})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Dedicated Circuits"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.dedicatedCircuits}),s.jsx("div",{style:{fontSize:"0.65rem",color:t.subtleText,marginTop:"0.25rem"},children:"for appliances"})]})]}),s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(jf,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"GFCI Protection Required"}),s.jsxs("div",{children:["All ",i.gfciRequired," countertop receptacles require GFCI protection per NEC 210.8(A)"]})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Kitchen Requirements:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"Min. 2 small appliance circuits (20A) for countertop receptacles"}),s.jsx("li",{children:"Counter receptacles: One every 24 inches, all GFCI protected"}),s.jsx("li",{children:'Island receptacles required if island  24" long  12" wide'}),s.jsx("li",{children:"Dishwasher, disposer typically need dedicated 15A or 20A circuits"})]})]})]})]})},wB=({bathroomData:r,setBathroomData:e,colors:t})=>{const i=(()=>{const o=parseInt(r.numBasins)||1,l=r.hasTub;let u=Math.max(1,o);l&&(u=Math.max(u,2));const h=r.sharedCircuit?1:o>=2?2:1;return{receptacles:u,dedicatedCircuits:h,gfciRequired:u,numBasins:o}})();return s.jsxs("div",{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Number of Sinks/Basins"}),s.jsxs("select",{value:r.numBasins,onChange:o=>e(l=>({...l,numBasins:o.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"1",children:"1 Basin"}),s.jsx("option",{value:"2",children:"2 Basins (Double Vanity)"}),s.jsx("option",{value:"3",children:"3+ Basins"})]})]}),s.jsx("div",{children:s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:r.hasTub,onChange:o=>e(l=>({...l,hasTub:o.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Has Bathtub/Shower Area"]})}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:r.sharedCircuit,onChange:o=>e(l=>({...l,sharedCircuit:o.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Share circuit with other bathrooms"]}),s.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",marginLeft:"1.625rem"},children:"One 20A circuit can serve multiple bathrooms if only serving receptacles"})]})]}),i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Receptacles Needed"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:i.receptacles})]}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:i.dedicatedCircuits})]})]}),s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(jf,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"GFCI Protection Required"}),s.jsxs("div",{children:["All ",i.gfciRequired," bathroom receptacles require GFCI protection per NEC 210.8(A)"]})]})]})}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Installation Guidelines"}),s.jsx("div",{children:" At least one receptacle within 3 feet of each basin"}),s.jsx("div",{children:" Receptacles must be readily accessible (not behind toilet)"}),s.jsx("div",{children:" Install at least 12 inches above countertop"})]})]})}),s.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Bathroom Requirements:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[s.jsx("li",{children:"NEC 210.52(D): Min. 1 receptacle within 3 ft of basin"}),s.jsx("li",{children:"NEC 210.11(C)(3): Min. 1 dedicated 20A circuit for bathroom receptacles"}),s.jsx("li",{children:"NEC 210.8(A): All bathroom receptacles require GFCI protection"}),s.jsx("li",{children:"One 20A circuit can serve receptacles in multiple bathrooms"})]})]})]})]})},SB=fe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=fe.useState("general"),[o,l]=fe.useState({roomLength:"",roomWidth:"",hasCounters:!1,counterLength:""}),[u,h]=fe.useState({counterLength:"",islandLength:"",dishwasher:!1,disposer:!1,microwave:!1,range:!1}),[d,g]=fe.useState({numBasins:"1",hasTub:!1,sharedCircuit:!1}),b={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};fe.useImperativeHandle(t,()=>({exportPDF:()=>{let x;if(n==="general"){if(!o.roomLength||!o.roomWidth){alert("Please enter room dimensions before exporting");return}const B=parseFloat(o.roomLength),E=parseFloat(o.roomWidth),L=((B+E)*2).toFixed(1),A=Math.max(2,Math.ceil(L/12));let O=0;if(o.hasCounters&&o.counterLength){const k=parseFloat(o.counterLength);O=Math.max(2,Math.ceil(k/2))}const $=A+O,F=Math.ceil($/8),ie=Math.ceil($/10),ue={roomLength:`${o.roomLength} feet`,roomWidth:`${o.roomWidth} feet`,roomPerimeter:`${L} feet`};o.hasCounters&&o.counterLength&&(ue.counterLength=`${o.counterLength} feet`);const V={wallReceptacles:`${A} receptacles`,totalReceptacles:`${$} receptacles`,circuits15A:`${F} circuits (15A)`,circuits20A:`${ie} circuits (20A)`};O>0&&(V.counterReceptacles=`${O} receptacles`),x={calculatorName:"Receptacle Calculator - General Room",inputs:ue,results:V,additionalInfo:{spacing:"One receptacle every 12 feet of wall space",rule:"No point along wall more than 6 feet from receptacle",counterRule:O>0?"Counter receptacles: one every 24 inches":null},necReferences:["NEC 210.52(A) - General Provisions","Receptacle within 6 ft of doorway, then every 12 ft","No point along wall more than 6 ft from receptacle","Conservative: 8 receptacles per 15A circuit, 10 per 20A circuit"]}}else if(n==="kitchen"){if(!u.counterLength){alert("Please enter counter length before exporting");return}const B=parseFloat(u.counterLength),E=parseFloat(u.islandLength)||0,L=Math.max(2,Math.ceil(B/2)),A=E>=2?Math.max(1,Math.ceil(E/4)):0,O=L+A,$=2,F=O;let ie=0;const ue=[];u.dishwasher&&(ie++,ue.push("Dishwasher (15A/20A)")),u.disposer&&(ie++,ue.push("Garbage Disposer (15A/20A)")),u.microwave&&(ie++,ue.push("Microwave (20A)")),u.range&&(ie++,ue.push("Range/Cooktop (240V, 40-50A)"));const V={counterLength:`${u.counterLength} feet`};E>0&&(V.islandLength=`${u.islandLength} feet`),ue.length>0&&(V.dedicatedAppliances=ue.join(", "));const k={counterReceptacles:`${L} receptacles`,totalReceptacles:`${O} receptacles`,smallApplianceCircuits:`${$} circuits (20A each)`,gfciRequired:`${F} GFCI-protected receptacles`};A>0&&(k.islandReceptacles=`${A} receptacles`),ie>0&&(k.dedicatedCircuits=`${ie} dedicated circuits`),x={calculatorName:"Receptacle Calculator - Kitchen",inputs:V,results:k,additionalInfo:{counterSpacing:"One receptacle every 24 inches of counter space",islandRequirement:'Island receptacles required if island  24" long  12" wide',gfciNote:"All countertop receptacles require GFCI protection"},necReferences:["NEC 210.52(C) - Countertops","NEC 210.11(C)(1) - Min. 2 small appliance circuits (20A)","NEC 210.8(A) - GFCI protection required for all countertop receptacles",'Island receptacles required if  24" long  12" wide']}}else if(n==="bathroom"){const B=parseInt(d.numBasins)||1,E=d.hasTub;let L=Math.max(1,B);E&&(L=Math.max(L,2));const A=d.sharedCircuit?1:B>=2?2:1,O=L,F={numberOfBasins:B===1?"1 Basin":B===2?"2 Basins (Double Vanity)":"3+ Basins",hasTubShower:E?"Yes":"No",sharedCircuit:d.sharedCircuit?"Yes (shared with other bathrooms)":"No (dedicated)"},ie={receptaclesNeeded:`${L} receptacles`,dedicatedCircuits:`${A} circuits (20A)`,gfciRequired:`${O} GFCI-protected receptacles`};x={calculatorName:"Receptacle Calculator - Bathroom",inputs:F,results:ie,additionalInfo:{spacing:"At least one receptacle within 3 feet of each basin",installation:"Install at least 12 inches above countertop",accessibility:"Receptacles must be readily accessible (not behind toilet)",gfciNote:"All bathroom receptacles require GFCI protection"},necReferences:["NEC 210.52(D) - Min. 1 receptacle within 3 ft of basin","NEC 210.11(C)(3) - Min. 1 dedicated 20A circuit for bathroom receptacles","NEC 210.8(A) - All bathroom receptacles require GFCI protection","One 20A circuit can serve receptacles in multiple bathrooms"]}}cn(x)}}));const S={general:s.jsx(vB,{generalData:o,setGeneralData:l,colors:b}),kitchen:s.jsx(bB,{kitchenData:u,setKitchenData:h,colors:b}),bathroom:s.jsx(wB,{bathroomData:d,setBathroomData:g,colors:b})};return s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"general",label:"General Room"},{id:"kitchen",label:"Kitchen"},{id:"bathroom",label:"Bathroom"}].map(x=>s.jsx("button",{className:ys.btn,onClick:()=>i(x.id),style:{flex:"1 1 auto",minWidth:"100px",padding:"0.625rem 1rem",background:n===x.id?"#3b82f6":b.sectionBg,color:n===x.id?"white":b.labelText,border:`1px solid ${n===x.id?"#3b82f6":b.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:x.label},x.id))}),s.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:S[n]})]})});function _B({onNavigate:r,currentView:e,isDarkMode:t=!1}){const n={bg:t?"#1a1a1a":"#ffffff",border:t?"#2a2a2a":"#e5e7eb",activeText:"#3b82f6",inactiveText:t?"#999999":"#6b7280"},i=l=>({background:"transparent",border:"0",borderWidth:"0",outline:"none",boxShadow:"none",color:l?n.activeText:n.inactiveText,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",gap:"0.25rem",fontSize:"0.625rem",fontWeight:"500",flex:"1 1 0",padding:"0.5rem 0.25rem",paddingTop:"0.75rem",margin:0,transition:"color 0.2s",WebkitTapHighlightColor:"transparent",WebkitAppearance:"none",MozAppearance:"none",appearance:"none",minWidth:"0"}),o={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",textAlign:"center",lineHeight:"1",marginTop:"0.125rem"};return s.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,width:"100%",background:n.bg,borderTop:`1px solid ${n.border}`,display:"flex",justifyContent:"space-between",alignItems:"stretch",padding:"0.25rem 0.5rem",paddingBottom:"calc(0.25rem + env(safe-area-inset-bottom))",margin:0,zIndex:1e4,minHeight:"80px",boxSizing:"border-box"},children:[s.jsxs("button",{onClick:()=>r("home"),style:i(e==="home"),children:[s.jsx(ow,{size:22,strokeWidth:e==="home"?2.5:2}),s.jsx("span",{style:o,children:"Home"})]}),s.jsxs("button",{onClick:()=>r("calculators"),style:i(e==="calculators"),children:[s.jsx(cf,{size:22,strokeWidth:e==="calculators"?2.5:2}),s.jsx("span",{style:o,children:"Calculators"})]}),s.jsxs("button",{onClick:()=>r("jobs"),style:i(e==="jobs"),children:[s.jsx(Lu,{size:22,strokeWidth:e==="jobs"?2.5:2}),s.jsx("span",{style:o,children:"Jobs"})]}),s.jsxs("button",{onClick:()=>r("estimates"),style:i(e==="estimates"),children:[s.jsx(Rf,{size:22,strokeWidth:e==="estimates"?2.5:2}),s.jsx("span",{style:o,children:"Estimates"})]}),s.jsxs("button",{onClick:()=>r("invoices"),style:i(e==="invoices"),children:[s.jsx(Z1,{size:22,strokeWidth:e==="invoices"?2.5:2}),s.jsx("span",{style:o,children:"Invoices"})]})]})}const TB=fe.forwardRef(({isDarkMode:r,onBack:e},t)=>{const[n,i]=fe.useState(""),[o,l]=fe.useState("460"),[u,h]=fe.useState("3"),[d,g]=fe.useState("normal"),[b,S]=fe.useState("0"),[x,B]=fe.useState("40"),[E,L]=fe.useState("variable"),A={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},$=((D,q,ne)=>{if(!D||!q)return 0;const se=parseFloat(D),oe=parseFloat(q);return ne==="3"?se*746/(oe*1.732*.85*.9):se*746/(oe*.85*.9)})(n,o,u),F=D=>{const q=parseFloat(D);return q<=3300?1:q<=5e3?.95:q<=6600?.9:q<=8200?.85:.8},ie=D=>{const q=parseFloat(D);return q<=40?1:q<=45?.97:q<=50?.94:.91},ue=D=>{switch(D){case"heavy":return 1.25;case"normal":return 1.15;case"light":return 1.1;default:return 1.15}},V=F(b),k=ie(x),I=ue(d),M=$*I/(V*k),w=[{amps:2,hp460V:1,hp230V:.5},{amps:3,hp460V:1.5,hp230V:1},{amps:5,hp460V:2,hp230V:1.5},{amps:7,hp460V:3,hp230V:2},{amps:10,hp460V:5,hp230V:3},{amps:14,hp460V:7.5,hp230V:5},{amps:18,hp460V:10,hp230V:7.5},{amps:24,hp460V:15,hp230V:10},{amps:31,hp460V:20,hp230V:15},{amps:40,hp460V:25,hp230V:20},{amps:52,hp460V:30,hp230V:25},{amps:62,hp460V:40,hp230V:30},{amps:77,hp460V:50,hp230V:40},{amps:96,hp460V:60,hp230V:50},{amps:124,hp460V:75,hp230V:60},{amps:156,hp460V:100,hp230V:75},{amps:180,hp460V:125,hp230V:100},{amps:240,hp460V:150,hp230V:125},{amps:302,hp460V:200,hp230V:150}].find(D=>D.amps>=M),N=V<1||k<1||d==="heavy";return fe.useImperativeHandle(t,()=>({exportPDF:()=>{if(!n){alert("Please enter motor horsepower before exporting to PDF");return}const D=E==="variable"?"Variable Torque (Fans, Pumps)":E==="constant"?"Constant Torque (Conveyors)":"High Starting Torque",q=d==="light"?"Light Duty (Intermittent)":d==="normal"?"Normal Duty":"Heavy Duty (Continuous)",ne={calculatorName:"VFD Sizing Calculator",inputs:{"Motor Horsepower":`${n} HP`,Voltage:`${o}V`,Phases:u==="1"?"Single Phase":"Three Phase","Load Type":D,"Duty Cycle":q,Altitude:`${b} feet`,"Ambient Temperature":`${x}C`},results:{"Motor Full Load Amperes (FLA)":`${$.toFixed(1)} A`,"Required VFD Current":`${M.toFixed(1)} A`,"Recommended VFD Rating":w?`${w.amps} A`:"N/A","VFD Motor HP (460V)":w?`${w.hp460V} HP`:"N/A","VFD Motor HP (230V)":w?`${w.hp230V} HP`:"N/A","Safety Margin":w?`${((w.amps/M-1)*100).toFixed(0)}%`:"N/A"},additionalInfo:{"Altitude Derating Factor":`${(V*100).toFixed(0)}%`,"Temperature Derating Factor":`${(k*100).toFixed(0)}%`,"Duty Cycle Factor":`${(I*100).toFixed(0)}%`,"Calculation Method":u==="3"?"Three Phase: (HP  746)  (V  1.732  0.85  0.9)":"Single Phase: (HP  746)  (V  0.85  0.9)","Required VFD Current Formula":"Motor FLA  Duty Cycle Factor  (Altitude Factor  Temperature Factor)"},necReferences:["NEC Article 430 - Motors, Motor Circuits, and Controllers","NEC 430.122 - Rating of Motor Control Circuit Overcurrent Protective Device","Always follow VFD manufacturer specifications","Use shielded cables for motor connections to reduce EMI","Install line and load reactors when recommended by manufacturer","Ensure proper grounding and bonding per NEC Article 250","Consider bypass contactor for critical applications","Verify VFD voltage matches motor nameplate voltage","Consider harmonic filtering for sensitive equipment","Ensure adequate cooling and ventilation for VFD enclosure",V<1?`WARNING: High altitude derating applied (${(V*100).toFixed(0)}%)`:"",k<1?`WARNING: High temperature derating applied (${(k*100).toFixed(0)}%)`:"",d==="heavy"?"WARNING: Heavy duty cycle requires oversizing for continuous operation":""].filter(se=>se!=="")};cn(ne)}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${A.cardBorder}`,paddingBottom:"0.5rem"},children:"Motor Information"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Motor Horsepower (HP)"}),s.jsx("input",{type:"number",value:n,onChange:D=>i(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},placeholder:"Enter HP",step:"0.5"})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Voltage (V)"}),s.jsxs("select",{value:o,onChange:D=>l(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"230",children:"230V"}),s.jsx("option",{value:"460",children:"460V"}),s.jsx("option",{value:"575",children:"575V"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Phases"}),s.jsxs("select",{value:u,onChange:D=>h(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"1",children:"Single Phase"}),s.jsx("option",{value:"3",children:"Three Phase"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Load Type"}),s.jsxs("select",{value:E,onChange:D=>L(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"variable",children:"Variable Torque (Fans, Pumps)"}),s.jsx("option",{value:"constant",children:"Constant Torque (Conveyors)"}),s.jsx("option",{value:"highTorque",children:"High Starting Torque"})]})]})]})]}),s.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${A.cardBorder}`,paddingBottom:"0.5rem"},children:"Environmental Conditions"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Duty Cycle"}),s.jsxs("select",{value:d,onChange:D=>g(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"light",children:"Light Duty (Intermittent)"}),s.jsx("option",{value:"normal",children:"Normal Duty"}),s.jsx("option",{value:"heavy",children:"Heavy Duty (Continuous)"})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Altitude (feet)"}),s.jsx("input",{type:"number",value:b,onChange:D=>S(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},placeholder:"0",step:"100"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Ambient Temp (C)"}),s.jsx("input",{type:"number",value:x,onChange:D=>B(D.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},placeholder:"40"})]})]}),s.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${A.cardBorder}`},children:[s.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"0.75rem"},children:"Derating Factors"}),s.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:A.labelText},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Altitude Factor:"}),s.jsxs("span",{style:{fontWeight:"600",color:A.cardText},children:[(V*100).toFixed(0),"%"]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Temperature Factor:"}),s.jsxs("span",{style:{fontWeight:"600",color:A.cardText},children:[(k*100).toFixed(0),"%"]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Duty Cycle Factor:"}),s.jsxs("span",{style:{fontWeight:"600",color:A.cardText},children:[(I*100).toFixed(0),"%"]})]})]})]})]})]}),n&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginBottom:"0.25rem"},children:"Motor FLA"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:A.cardText},children:$.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),s.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginBottom:"0.25rem"},children:"Required VFD Current"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:A.cardText},children:M.toFixed(1)}),s.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Recommended VFD"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:w?w.amps:"N/A"}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),w&&s.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${A.cardBorder}`},children:[s.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"0.75rem"},children:"VFD Specifications"}),s.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:A.labelText},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Current Rating:"}),s.jsxs("span",{style:{fontWeight:"600",color:A.cardText},children:[w.amps," Amperes"]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Motor HP (460V):"}),s.jsxs("span",{style:{fontWeight:"600",color:A.cardText},children:[w.hp460V," HP"]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:"Motor HP (230V):"}),s.jsxs("span",{style:{fontWeight:"600",color:A.cardText},children:[w.hp230V," HP"]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"0.5rem",borderTop:`1px solid ${A.cardBorder}`,marginTop:"0.25rem"},children:[s.jsx("span",{children:"Safety Margin:"}),s.jsxs("span",{style:{fontWeight:"600",color:"#059669"},children:[((w.amps/M-1)*100).toFixed(0),"%"]})]})]})]})]}),w&&!N&&s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"VFD Selection Complete"}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"Selected VFD meets all requirements with adequate safety margin for reliable operation."})]})]})}),N&&s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(jf,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{lineHeight:"1.5"},children:[s.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"600",color:"#78350f",marginBottom:"0.5rem"},children:"Important Considerations"}),s.jsxs("ul",{style:{fontSize:"0.8125rem",color:"#92400e",margin:0,paddingLeft:"1.25rem"},children:[V<1&&s.jsxs("li",{style:{marginBottom:"0.25rem"},children:["High altitude installation requires derating (",(V*100).toFixed(0),"% of rated capacity)"]}),k<1&&s.jsxs("li",{style:{marginBottom:"0.25rem"},children:["High ambient temperature requires derating (",(k*100).toFixed(0),"% of rated capacity)"]}),d==="heavy"&&s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Heavy duty cycle applications require oversizing for continuous operation"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Verify VFD voltage matches motor nameplate voltage"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider harmonic filtering for sensitive equipment"}),s.jsx("li",{children:"Ensure adequate cooling and ventilation"})]})]})]})})]}),s.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${A.cardBorder}`,fontSize:"0.8125rem",color:A.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:A.cardText},children:"VFD Installation Notes:"}),"Always follow manufacturer specifications  Use shielded cables for motor connections  Install line and load reactors when recommended  Ensure proper grounding and bonding  Consider bypass contactor for critical applications"]})]})}),AB=fe.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=fe.useState("inductive"),[i,o]=fe.useState("60"),[l,u]=fe.useState(""),[h,d]=fe.useState("mH"),[g,b]=fe.useState("60"),[S,x]=fe.useState(""),[B,E]=fe.useState("F"),[L,A]=fe.useState(""),[O,$]=fe.useState(""),[F,ie]=fe.useState("inductive"),[ue,V]=fe.useState(""),[k,I]=fe.useState("mH"),[M,C]=fe.useState(""),[w,N]=fe.useState("F"),D={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},q=()=>{if(!i||!l)return null;const J=parseFloat(i);let re=parseFloat(l);return h==="mH"?re=re/1e3:h==="H"&&(re=re/1e6),{reactance:(2*Math.PI*J*re).toFixed(2),frequency:J,inductance:l,unit:h}},ne=()=>{if(!g||!S)return null;const J=parseFloat(g);let re=parseFloat(S);return B==="F"?re=re/1e6:B==="nF"?re=re/1e9:B==="pF"&&(re=re/1e12),{reactance:(1/(2*Math.PI*J*re)).toFixed(2),frequency:J,capacitance:S,unit:B}},se=()=>{if(!L||!O)return null;const J=parseFloat(L),re=parseFloat(O),he=Math.sqrt(J*J+re*re),me=Math.atan2(re,J)*(180/Math.PI);return{impedance:he.toFixed(2),angle:me.toFixed(2),resistance:J,reactance:re,type:F}},oe=()=>{if(!ue||!M)return null;let J=parseFloat(ue),re=parseFloat(M);return k==="mH"?J=J/1e3:k==="H"&&(J=J/1e6),w==="F"?re=re/1e6:w==="nF"?re=re/1e9:w==="pF"&&(re=re/1e12),{frequency:(1/(2*Math.PI*Math.sqrt(J*re))).toFixed(2),inductance:ue,inductanceUnit:k,capacitance:M,capacitanceUnit:w}},xe=q(),we=ne(),ee=se(),W=oe();return fe.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="inductive"){if(!i||!l){alert("Please enter all required values before exporting to PDF");return}const J={calculatorName:"Reactance & Impedance - Inductive Reactance (XL)",inputs:{Frequency:`${i} Hz`,Inductance:`${l} ${h}`},results:{"Inductive Reactance (XL)":`${xe.reactance} `},additionalInfo:{Formula:"XL = 2fL",Description:"Inductive reactance increases with frequency and opposes changes in current flow"},necReferences:["Inductive reactance is directly proportional to frequency","In AC circuits, inductors oppose current changes","XL increases linearly with both frequency and inductance"]};cn(J)}else if(t==="capacitive"){if(!g||!S){alert("Please enter all required values before exporting to PDF");return}const J={calculatorName:"Reactance & Impedance - Capacitive Reactance (XC)",inputs:{Frequency:`${g} Hz`,Capacitance:`${S} ${B}`},results:{"Capacitive Reactance (XC)":`${we.reactance} `},additionalInfo:{Formula:"XC = 1 / (2fC)",Description:"Capacitive reactance decreases with frequency and opposes changes in voltage"},necReferences:["Capacitive reactance is inversely proportional to frequency","In AC circuits, capacitors oppose voltage changes","XC decreases as frequency or capacitance increases"]};cn(J)}else if(t==="impedance"){if(!L||!O){alert("Please enter all required values before exporting to PDF");return}const J={calculatorName:"Reactance & Impedance - Impedance Calculator",inputs:{"Reactance Type":F.charAt(0).toUpperCase()+F.slice(1),"Resistance (R)":`${L} `,"Reactance (X)":`${O} `},results:{"Impedance (Z)":`${ee.impedance} `,"Phase Angle ()":`${ee.angle}`,"Phase Relationship":F==="inductive"?"Leading":"Lagging"},additionalInfo:{"Impedance Formula":"Z = (R + X)","Phase Angle Formula":" = arctan(X / R)",Description:"Impedance is the total opposition to current flow in an AC circuit, combining resistance and reactance"},necReferences:["Impedance combines resistive and reactive components","Phase angle indicates the relationship between voltage and current","In inductive circuits, current lags voltage; in capacitive circuits, current leads voltage"]};cn(J)}else if(t==="resonance"){if(!ue||!M){alert("Please enter all required values before exporting to PDF");return}const J={calculatorName:"Reactance & Impedance - Resonant Frequency",inputs:{Inductance:`${ue} ${k}`,Capacitance:`${M} ${w}`},results:{"Resonant Frequency (fr)":`${W.frequency} Hz`},additionalInfo:{Formula:"fr = 1 / (2LC)","At Resonance":"Inductive and capacitive reactances are equal and opposite (XL = XC)","Series Circuit":"Minimum impedance at resonance","Parallel Circuit":"Maximum impedance at resonance"},necReferences:["Resonance occurs when XL = XC","At resonant frequency, circuit is purely resistive","Series resonant circuits have minimum impedance","Parallel resonant circuits have maximum impedance"]};cn(J)}}})),s.jsx("div",{className:ys.container,children:s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:s.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[s.jsxs("button",{onClick:()=>n("inductive"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="inductive"?"#3b82f6":"transparent",color:t==="inductive"?"white":D.labelText,border:`1px solid ${t==="inductive"?"#3b82f6":D.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:["Inductive (X",s.jsx("sub",{children:"L"}),")"]}),s.jsxs("button",{onClick:()=>n("capacitive"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="capacitive"?"#3b82f6":"transparent",color:t==="capacitive"?"white":D.labelText,border:`1px solid ${t==="capacitive"?"#3b82f6":D.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:["Capacitive (X",s.jsx("sub",{children:"C"}),")"]}),s.jsx("button",{onClick:()=>n("impedance"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="impedance"?"#3b82f6":"transparent",color:t==="impedance"?"white":D.labelText,border:`1px solid ${t==="impedance"?"#3b82f6":D.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Impedance (Z)"}),s.jsx("button",{onClick:()=>n("resonance"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="resonance"?"#3b82f6":"transparent",color:t==="resonance"?"white":D.labelText,border:`1px solid ${t==="resonance"?"#3b82f6":D.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Resonance"})]})}),t==="inductive"&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${D.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),s.jsx("input",{type:"number",value:i,onChange:J=>o(J.target.value),placeholder:"60",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:D.subtleText,marginTop:"0.25rem"},children:"Common: 50 Hz or 60 Hz"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Inductance"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[s.jsx("input",{type:"number",value:l,onChange:J=>u(J.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}}),s.jsxs("select",{value:h,onChange:J=>d(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"H",children:"H"}),s.jsx("option",{value:"mH",children:"mH"}),s.jsx("option",{value:"H",children:"H"})]})]})]})]})]}),xe&&s.jsx("div",{children:s.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Inductive Reactance (X",s.jsx("sub",{children:"L"}),")"]}),s.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:xe.reactance}),s.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms ()"})]}),s.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${D.cardBorder}`},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:D.labelText,marginBottom:"0.5rem"},children:s.jsx("strong",{style:{color:D.cardText},children:"Circuit Values:"})}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:D.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["Frequency: ",xe.frequency," Hz"]}),s.jsxs("div",{children:["Inductance: ",xe.inductance," ",xe.unit]}),s.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:D.subtleText},children:["Formula: X",s.jsx("sub",{children:"L"})," = 2fL"]})]})]})]})})]}),t==="capacitive"&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${D.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),s.jsx("input",{type:"number",value:g,onChange:J=>b(J.target.value),placeholder:"60",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:D.subtleText,marginTop:"0.25rem"},children:"Common: 50 Hz or 60 Hz"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Capacitance"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[s.jsx("input",{type:"number",value:S,onChange:J=>x(J.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}}),s.jsxs("select",{value:B,onChange:J=>E(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"F",children:"F"}),s.jsx("option",{value:"F",children:"F"}),s.jsx("option",{value:"nF",children:"nF"}),s.jsx("option",{value:"pF",children:"pF"})]})]})]})]})]}),we&&s.jsx("div",{children:s.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Capacitive Reactance (X",s.jsx("sub",{children:"C"}),")"]}),s.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:we.reactance}),s.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms ()"})]}),s.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${D.cardBorder}`},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:D.labelText,marginBottom:"0.5rem"},children:s.jsx("strong",{style:{color:D.cardText},children:"Circuit Values:"})}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:D.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["Frequency: ",we.frequency," Hz"]}),s.jsxs("div",{children:["Capacitance: ",we.capacitance," ",we.unit]}),s.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:D.subtleText},children:["Formula: X",s.jsx("sub",{children:"C"})," = 1 / (2fC)"]})]})]})]})})]}),t==="impedance"&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${D.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Reactance Type"}),s.jsxs("select",{value:F,onChange:J=>ie(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[s.jsxs("option",{value:"inductive",children:["Inductive (X",s.jsx("sub",{children:"L"}),")"]}),s.jsxs("option",{value:"capacitive",children:["Capacitive (X",s.jsx("sub",{children:"C"}),")"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Resistance (R) in Ohms"}),s.jsx("input",{type:"number",value:L,onChange:J=>A(J.target.value),placeholder:"Enter resistance",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Reactance (X) in Ohms"}),s.jsx("input",{type:"number",value:O,onChange:J=>$(J.target.value),placeholder:"Enter reactance",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}})]})]})]}),ee&&s.jsx("div",{children:s.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Impedance (Z)"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:ee.impedance}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms ()"})]}),s.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:D.labelText,marginBottom:"0.25rem"},children:"Phase Angle ()"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:D.cardText},children:[ee.angle,""]}),s.jsx("div",{style:{fontSize:"0.75rem",color:D.labelText,marginTop:"0.25rem"},children:F==="inductive"?"Leading":"Lagging"})]})]}),s.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${D.cardBorder}`},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:D.labelText,marginBottom:"0.5rem"},children:s.jsx("strong",{style:{color:D.cardText},children:"Circuit Values:"})}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:D.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["Resistance (R): ",ee.resistance," "]}),s.jsxs("div",{children:["Reactance (X): ",ee.reactance,"  (",ee.type,")"]}),s.jsx("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:D.subtleText},children:"Formula: Z = (R + X)"}),s.jsx("div",{style:{fontStyle:"italic",color:D.subtleText},children:"Phase Angle:  = arctan(X / R)"})]})]})]})})]}),t==="resonance"&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${D.cardBorder}`,paddingBottom:"0.5rem"},children:"LC Circuit Parameters"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Inductance"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[s.jsx("input",{type:"number",value:ue,onChange:J=>V(J.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}}),s.jsxs("select",{value:k,onChange:J=>I(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"H",children:"H"}),s.jsx("option",{value:"mH",children:"mH"}),s.jsx("option",{value:"H",children:"H"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:D.labelText,marginBottom:"0.5rem"},children:"Capacitance"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[s.jsx("input",{type:"number",value:M,onChange:J=>C(J.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"}}),s.jsxs("select",{value:w,onChange:J=>N(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${D.inputBorder}`,borderRadius:"8px",backgroundColor:D.inputBg,color:D.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"F",children:"F"}),s.jsx("option",{value:"F",children:"F"}),s.jsx("option",{value:"nF",children:"nF"}),s.jsx("option",{value:"pF",children:"pF"})]})]})]})]})]}),W&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:D.cardBg,border:`1px solid ${D.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:D.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Resonant Frequency (f",s.jsx("sub",{children:"r"}),")"]}),s.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:W.frequency}),s.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Hertz (Hz)"})]}),s.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${D.cardBorder}`},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:D.labelText,marginBottom:"0.5rem"},children:s.jsx("strong",{style:{color:D.cardText},children:"Circuit Values:"})}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:D.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["Inductance: ",W.inductance," ",W.inductanceUnit]}),s.jsxs("div",{children:["Capacitance: ",W.capacitance," ",W.capacitanceUnit]}),s.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:D.subtleText},children:["Formula: f",s.jsx("sub",{children:"r"})," = 1 / (2LC)"]})]})]})]}),s.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"About Resonant Frequency:"}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"At resonance, inductive and capacitive reactances are equal and opposite, resulting in minimum impedance in series circuits and maximum impedance in parallel circuits."})]})]})})]})]}),s.jsxs("div",{style:{background:D.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${D.cardBorder}`,fontSize:"0.8125rem",color:D.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:D.cardText},children:"Key Concepts:"}),"X",s.jsx("sub",{children:"L"})," increases with frequency  X",s.jsx("sub",{children:"C"})," decreases with frequency  At resonance X",s.jsx("sub",{children:"L"})," = X",s.jsx("sub",{children:"C"}),"  Impedance combines resistance and reactance"]})]})})}),CB=fe.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=fe.useState("correction"),[i,o]=fe.useState(""),[l,u]=fe.useState("480"),[h,d]=fe.useState(""),[g,b]=fe.useState("0.95"),[S,x]=fe.useState("60"),[B,E]=fe.useState(""),[L,A]=fe.useState(""),[O,$]=fe.useState("0.95"),[F,ie]=fe.useState(""),[ue,V]=fe.useState(""),[k,I]=fe.useState("8760"),[M,C]=fe.useState(""),w={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},N=()=>{if(!i||!h)return null;const se=parseFloat(i),oe=parseFloat(h),xe=parseFloat(g),we=parseFloat(l),ee=parseFloat(S),W=Math.acos(oe),J=Math.acos(xe),re=se*Math.tan(W),he=se*Math.tan(J),Se=re-he,ke=Se*1e9/(2*Math.PI*ee*we*we),Ce=se/oe,ge=se/xe,Fe=Ce*1e3/(Math.sqrt(3)*we),Ke=ge*1e3/(Math.sqrt(3)*we),Qe=(Fe-Ke)/Fe*100;return{kVAR:Se.toFixed(2),capacitance:ke.toFixed(2),existingApparentPower:Ce.toFixed(2),correctedApparentPower:ge.toFixed(2),powerReduction:((Ce-ge)/Ce*100).toFixed(1),existingCurrent:Fe.toFixed(2),correctedCurrent:Ke.toFixed(2),currentReduction:Qe.toFixed(1),existingPF:(oe*100).toFixed(1),targetPF:(xe*100).toFixed(1)}},D=()=>{if(!B||!L||!F)return null;const se=parseFloat(B),oe=parseFloat(L),xe=parseFloat(O),we=parseFloat(F),ee=parseFloat(ue)||0,W=parseFloat(k),J=parseFloat(M)||0,re=se/oe,he=se/xe,me=re-he,Se=me*we,Ce=(xe-oe)*100*.01,ge=se*W*(Ce/100)*ee,Fe=J*12,Ke=Se*12,Qe=Ke+ge+Fe,ze=Math.acos(oe),de=Math.acos(xe),Nt=se*(Math.tan(ze)-Math.tan(de)),Et=Nt*75,wt=Qe>0?Et/Qe*12:0;return{kVAReduction:me.toFixed(2),monthlyDemandSavings:Se.toFixed(2),annualDemandSavings:Ke.toFixed(2),annualEnergySavings:ge.toFixed(2),annualPenaltySavings:Fe.toFixed(2),totalAnnualSavings:Qe.toFixed(2),kVARRequired:Nt.toFixed(2),estimatedCost:Et.toFixed(2),paybackMonths:wt.toFixed(1),paybackYears:(wt/12).toFixed(1),fiveYearSavings:(Qe*5-Et).toFixed(2)}},q=N(),ne=D();return fe.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="correction"){if(!i||!h){alert("Please enter all required values before exporting to PDF");return}const se={calculatorName:"Power Factor Correction - Capacitor Sizing",inputs:{"Real Power":`${i} kW`,"System Voltage":`${l}V`,"Existing Power Factor":h,"Target Power Factor":g,Frequency:`${S} Hz`},results:{"Required Capacitor Size":`${q.kVAR} kVAR`,"Capacitance per Phase":`${q.capacitance} F`,"Power Factor Before":`${q.existingPF}%`,"Power Factor After":`${q.targetPF}%`,"Apparent Power Before":`${q.existingApparentPower} kVA`,"Apparent Power After":`${q.correctedApparentPower} kVA`,"Apparent Power Reduction":`${q.powerReduction}%`,"Line Current Before":`${q.existingCurrent} A`,"Line Current After":`${q.correctedCurrent} A`,"Current Reduction":`${q.currentReduction}%`},additionalInfo:{Benefits:"Power factor correction reduces utility demand charges, lowers line losses and voltage drop, increases system capacity, reduces equipment heating, and improves voltage regulation."},necReferences:["NEC Article 460 - Capacitors","NEC 460.8 - Conductors supplying capacitors shall have an ampacity of not less than 135% of the rated current of the capacitor","NEC 460.9 - Rating or Setting of Motor Overload Device"]};cn(se)}else if(t==="savings"){if(!B||!L||!F){alert("Please enter all required values before exporting to PDF");return}const se={calculatorName:"Power Factor Correction - Cost Savings Analysis",inputs:{"Real Power":`${B} kW`,"Operating Hours per Year":k,"Existing Power Factor":L,"Target Power Factor":O,"Demand Charge":`$${F}/kVA/month`,"Energy Rate":ue?`$${ue}/kWh`:"Not specified","Monthly PF Penalty":M?`$${M}/month`:"None"},results:{"Total Annual Savings":`$${ne.totalAnnualSavings}/year`,"Monthly Demand Savings":`$${ne.monthlyDemandSavings}/month`,"Annual Demand Savings":`$${ne.annualDemandSavings}/year`,"Annual Energy Savings":`$${ne.annualEnergySavings}/year`,"Annual Penalty Savings":`$${ne.annualPenaltySavings}/year`,"kVA Reduction":`${ne.kVAReduction} kVA`,"Required Capacitor Size":`${ne.kVARRequired} kVAR`,"Estimated Equipment Cost":`$${ne.estimatedCost}`,"Payback Period":`${ne.paybackMonths} months (${ne.paybackYears} years)`,"5-Year Net Savings":`$${ne.fiveYearSavings}`},additionalInfo:{"Cost Basis":"Estimated at $75 per kVAR installed","Savings Note":"Actual costs and savings may vary based on equipment selection, installation costs, utility rate structures, and load profiles"},necReferences:["NEC Article 460 - Capacitors","NEC 460.8 - Conductors supplying capacitors shall have an ampacity of not less than 135% of the rated current of the capacitor","IEEE Std 18-2012 - Standard for Shunt Power Capacitors"]};cn(se)}}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsx("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:s.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[s.jsx("button",{onClick:()=>n("correction"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="correction"?"#3b82f6":"transparent",color:t==="correction"?"white":w.labelText,border:`1px solid ${t==="correction"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Capacitor Sizing"}),s.jsx("button",{onClick:()=>n("savings"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="savings"?"#3b82f6":"transparent",color:t==="savings"?"white":w.labelText,border:`1px solid ${t==="savings"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Cost Savings"})]})}),t==="correction"?s.jsxs("div",{children:[s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"System Parameters"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Real Power (kW)"}),s.jsx("input",{type:"number",value:i,onChange:se=>o(se.target.value),placeholder:"Enter load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"System Voltage (V)"}),s.jsxs("select",{value:l,onChange:se=>u(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"208",children:"208V"}),s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"480",children:"480V"}),s.jsx("option",{value:"600",children:"600V"})]})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Existing Power Factor"}),s.jsx("input",{type:"number",value:h,onChange:se=>d(se.target.value),placeholder:"0.70 - 0.99",step:"0.01",min:"0.5",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Current (uncorrected)"})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:["Target Power  ",s.jsx("br",{}),"Factor ",s.jsx("br",{})]}),s.jsxs("select",{value:g,onChange:se=>b(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"0.90",children:"0.90 (90%)"}),s.jsx("option",{value:"0.95",children:"0.95 (95%) - Recommended"}),s.jsx("option",{value:"0.98",children:"0.98 (98%)"}),s.jsx("option",{value:"0.99",children:"0.99 (99%)"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),s.jsxs("select",{value:S,onChange:se=>x(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"50",children:"50 Hz"}),s.jsx("option",{value:"60",children:"60 Hz"})]})]})]})]}),q&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Required Capacitor Bank"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Capacitor Size"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:q.kVAR}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"kVAR"})]}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Capacitance"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:q.capacitance}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"F per phase"})]})]}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.5rem"},children:s.jsx("strong",{style:{color:w.cardText},children:"Power Factor Improvement:"})}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["From: ",q.existingPF,"%  To: ",q.targetPF,"%"]}),s.jsxs("div",{children:["Real Power: ",i," kW (constant)"]}),s.jsxs("div",{children:["System Voltage: ",l,"V, ",S," Hz"]})]})]})]}),s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"System Improvements"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[s.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:w.cardText,marginBottom:"0.5rem"},children:"Apparent Power Reduction"}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["Before: ",q.existingApparentPower," kVA"]}),s.jsxs("div",{children:["After: ",q.correctedApparentPower," kVA"]}),s.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#059669",marginTop:"0.25rem"},children:["Reduction: ",q.powerReduction,"%"]})]})]}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[s.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:w.cardText,marginBottom:"0.5rem"},children:"Line Current Reduction"}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["Before: ",q.existingCurrent," A"]}),s.jsxs("div",{children:["After: ",q.correctedCurrent," A"]}),s.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#059669",marginTop:"0.25rem"},children:["Reduction: ",q.currentReduction,"%"]})]})]})]})]}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(V6,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Benefits of Power Factor Correction:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Reduced utility demand charges"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Lower line losses and voltage drop"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Increased system capacity"}),s.jsx("li",{style:{marginBottom:"0.25rem"},children:"Reduced equipment heating"}),s.jsx("li",{children:"Improved voltage regulation"})]})]})]})})]})]}):s.jsxs("div",{children:[s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Load & Power Factor"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:["Real Power ",s.jsx("br",{})," (kW)"]}),s.jsx("input",{type:"number",value:B,onChange:se=>E(se.target.value),placeholder:"Enter load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Operating Hours/Year"}),s.jsx("input",{type:"number",value:k,onChange:se=>I(se.target.value),placeholder:"8760",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"8760 = 24/7 operation"})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Existing Power Factor"}),s.jsx("input",{type:"number",value:L,onChange:se=>A(se.target.value),placeholder:"0.70 - 0.99",step:"0.01",min:"0.5",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:["Target Power ",s.jsx("br",{})," Factor"]}),s.jsxs("select",{value:O,onChange:se=>$(se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"0.90",children:"0.90 (90%)"}),s.jsx("option",{value:"0.95",children:"0.95 (95%)"}),s.jsx("option",{value:"0.98",children:"0.98 (98%)"})]})]})]})]})]}),s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Utility Rates"}),s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Demand Charge ($/kVA/month)"}),s.jsx("input",{type:"number",value:F,onChange:se=>ie(se.target.value),placeholder:"10 - 25",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Check your utility bill"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Energy Rate ($/kWh) - Optional"}),s.jsx("input",{type:"number",value:ue,onChange:se=>V(se.target.value),placeholder:"0.08 - 0.15",step:"0.001",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"For energy loss savings"})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Monthly PF Penalty ($/month) - Optional"}),s.jsx("input",{type:"number",value:M,onChange:se=>C(se.target.value),placeholder:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"If utility charges PF penalty"})]})]})]}),ne&&s.jsxs("div",{children:[s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Annual Cost Savings"}),s.jsxs("div",{style:{background:"#d1fae5",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:"#059669",marginBottom:"0.5rem",fontWeight:"600"},children:"Total Annual Savings"}),s.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#059669"},children:["$",ne.totalAnnualSavings]}),s.jsx("div",{style:{fontSize:"0.875rem",color:"#059669",marginTop:"0.25rem"},children:"per year"})]}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.5rem"},children:s.jsx("strong",{style:{color:w.cardText},children:"Savings Breakdown:"})}),s.jsxs("div",{style:{fontSize:"0.8125rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[s.jsxs("div",{children:["Demand Charge Savings: $",ne.annualDemandSavings,"/year"]}),parseFloat(ne.annualEnergySavings)>0&&s.jsxs("div",{children:["Energy Loss Savings: $",ne.annualEnergySavings,"/year"]}),parseFloat(ne.annualPenaltySavings)>0&&s.jsxs("div",{children:["Penalty Elimination: $",ne.annualPenaltySavings,"/year"]}),s.jsxs("div",{style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:`1px solid ${w.cardBorder}`},children:["kVA Reduction: ",ne.kVAReduction," kVA"]})]})]})]}),s.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Return on Investment"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Estimated Cost"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:["$",ne.estimatedCost]}),s.jsxs("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:[ne.kVARRequired," kVAR @ $75/kVAR"]})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Payback Period"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:ne.paybackMonths}),s.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:["months (",ne.paybackYears," years)"]})]})]}),s.jsx("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:s.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[s.jsx("div",{children:s.jsx("strong",{style:{color:w.cardText},children:"5-Year Net Savings:"})}),s.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#059669",marginTop:"0.25rem"},children:["$",ne.fiveYearSavings]}),s.jsx("div",{style:{fontSize:"0.8125rem",color:w.subtleText,marginTop:"0.25rem"},children:"Total savings minus initial investment"})]})})]}),s.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Note:"}),s.jsx("div",{style:{fontSize:"0.8125rem"},children:"Actual costs and savings may vary based on equipment selection, installation costs, utility rate structures, and load profiles. Consult with a qualified electrical engineer for detailed analysis."})]})]})})]})]}),s.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`,fontSize:"0.8125rem",color:w.labelText},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:w.cardText},children:"Power Factor Basics:"}),"PF = Real Power (kW)  Apparent Power (kVA)  Low PF causes higher current and utility charges  Target 0.95+ for optimal efficiency  Capacitors supply reactive power locally"]})]})}),kB=fe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=fe.useState("from-kw-pf"),[o,l]=fe.useState(""),[u,h]=fe.useState(""),[d,g]=fe.useState(""),[b,S]=fe.useState(""),[x,B]=fe.useState("lagging"),E={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},A=(()=>{let $=0,F=0,ie=0,ue=0,V=0;switch(n){case"from-kw-pf":if(!o||!b)return null;$=parseFloat(o),ue=parseFloat(b),ie=$/ue,V=Math.acos(ue)*(180/Math.PI),F=ie*Math.sin(Math.acos(ue)),x==="leading"&&(F=-F);break;case"from-kw-kvar":if(!o||!u)return null;$=parseFloat(o),F=parseFloat(u),x==="leading"&&(F=-Math.abs(F)),ie=Math.sqrt(Math.pow($,2)+Math.pow(F,2)),ue=$/ie,V=Math.atan(Math.abs(F)/$)*(180/Math.PI);break;case"from-kva-pf":if(!d||!b)return null;ie=parseFloat(d),ue=parseFloat(b),$=ie*ue,V=Math.acos(ue)*(180/Math.PI),F=ie*Math.sin(Math.acos(ue)),x==="leading"&&(F=-F);break;case"from-kva-kw":if(!d||!o||(ie=parseFloat(d),$=parseFloat(o),$>ie))return null;ue=$/ie,V=Math.acos(ue)*(180/Math.PI),F=Math.sqrt(Math.pow(ie,2)-Math.pow($,2)),x==="leading"&&(F=-F);break;default:return null}return{kW:$,kVAR:F,kVA:ie,powerFactor:ue,angle:V,isLeading:x==="leading"}})(),O=$=>{const F=Math.abs($);return F>=.95?{quality:"Excellent",color:"#10b981",bg:"#d1fae5",border:"#6ee7b7"}:F>=.9?{quality:"Good",color:"#3b82f6",bg:"#dbeafe",border:"#93c5fd"}:F>=.85?{quality:"Fair",color:"#f59e0b",bg:"#fef3c7",border:"#fcd34d"}:{quality:"Poor",color:"#ef4444",bg:"#fee2e2",border:"#fca5a5"}};return fe.useImperativeHandle(t,()=>({exportPDF:()=>{if(!A){alert("Please enter values before exporting to PDF");return}const $=O(A.powerFactor),ie={calculatorName:"Power Triangle Calculator",inputs:{calculationMode:{"from-kw-pf":"Real Power (kW) and Power Factor","from-kw-kvar":"Real Power (kW) and Reactive Power (kVAR)","from-kva-pf":"Apparent Power (kVA) and Power Factor","from-kva-kw":"Apparent Power (kVA) and Real Power (kW)"}[n],...o&&{realPower:`${o} kW`},...u&&{reactivePower:`${u} kVAR`},...d&&{apparentPower:`${d} kVA`},...b&&{powerFactor:b},reactiveType:x==="leading"?"Leading (Capacitive)":"Lagging (Inductive)"},results:{realPower:`${A.kW.toFixed(2)} kW`,reactivePower:`${Math.abs(A.kVAR).toFixed(2)} kVAR (${A.isLeading?"Leading":"Lagging"})`,apparentPower:`${A.kVA.toFixed(2)} kVA`,powerFactor:`${A.powerFactor.toFixed(4)} ${A.isLeading?"(Leading)":"(Lagging)"}`,phaseAngle:`${A.angle.toFixed(2)}`,powerFactorQuality:$.quality},additionalInfo:{powerTriangleRelationship:"kVA = kW + kVAR",powerFactorFormula:"PF = kW  kVA = cos()",reactivePowerFormula:"kVAR = kVA  sin()",phaseAngleFormula:" = arccos(PF)",leadingVsLagging:A.isLeading?"Leading PF: Current leads voltage (capacitive loads)":"Lagging PF: Current lags voltage (inductive loads - most common)"},necReferences:["Power Factor: Ratio of real power to apparent power","Leading PF (capacitive): Synchronous motors, over-excited generators, capacitor banks","Lagging PF (inductive): Most common - motors, transformers, inductive loads","Poor power factor results in: Higher current draw, increased losses, utility penalties","Power factor correction: Add capacitors for lagging PF, add inductors for leading PF","Many utilities charge penalties for power factor below 0.90-0.95"]};cn(ie)}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${E.cardBorder}`,paddingBottom:"0.5rem"},children:"Calculation Mode"}),s.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:[{value:"from-kw-pf",label:"From kW and Power Factor"},{value:"from-kw-kvar",label:"From kW and kVAR"},{value:"from-kva-pf",label:"From kVA and Power Factor"},{value:"from-kva-kw",label:"From kVA and kW"}].map($=>s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:n===$.value?E.sectionBg:"transparent",border:`1px solid ${n===$.value?"#3b82f6":E.cardBorder}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseOver:F=>{n!==$.value&&(F.currentTarget.style.background=E.sectionBg)},onMouseOut:F=>{n!==$.value&&(F.currentTarget.style.background="transparent")},children:[s.jsx("input",{type:"radio",name:"calculationMode",value:$.value,checked:n===$.value,onChange:F=>i(F.target.value),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),s.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:E.cardText},children:$.label})]},$.value))})]}),s.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${E.cardBorder}`,paddingBottom:"0.5rem"},children:"Input Values"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[(n==="from-kw-pf"||n==="from-kw-kvar"||n==="from-kva-kw")&&s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:["Real Power ",s.jsx("br",{}),"(kW)"]}),s.jsx("input",{type:"number",value:o,onChange:$=>l($.target.value),placeholder:"Enter kW",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]}),n==="from-kw-kvar"&&s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Reactive Power (kVAR)"}),s.jsx("input",{type:"number",value:u,onChange:$=>h($.target.value),placeholder:"Enter kVAR",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]}),(n==="from-kva-pf"||n==="from-kva-kw")&&s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:["Apparent Power ",s.jsx("br",{})," (kVA)"]}),s.jsx("input",{type:"number",value:d,onChange:$=>g($.target.value),placeholder:"Enter kVA",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]}),(n==="from-kw-pf"||n==="from-kva-pf")&&s.jsxs("div",{children:[s.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:["Power Factor ",s.jsx("br",{}),"  ",s.jsx("br",{})]}),s.jsx("input",{type:"number",value:b,onChange:$=>S($.target.value),placeholder:"0.00 to 1.00",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"}})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:E.labelText,marginBottom:"0.5rem"},children:"Reactive Power Type"}),s.jsxs("select",{value:x,onChange:$=>B($.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${E.inputBorder}`,borderRadius:"8px",backgroundColor:E.inputBg,color:E.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"lagging",children:"Lagging (Inductive - Most Common)"}),s.jsx("option",{value:"leading",children:"Leading (Capacitive)"})]}),s.jsx("div",{style:{fontSize:"0.75rem",color:E.subtleText,marginTop:"0.25rem"},children:"Inductive: Motors, transformers | Capacitive: Capacitor banks, lightly loaded cables"})]})]}),A&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{background:E.cardBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:E.cardText,marginTop:0,marginBottom:"1rem"},children:"Power Triangle Results"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Real Power (kW)"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:A.kW.toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginTop:"0.25rem"},children:"Working Power"})]}),s.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Reactive Power (kVAR)"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:Math.abs(A.kVAR).toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginTop:"0.25rem"},children:A.isLeading?"Leading":"Lagging"})]}),s.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Apparent Power (kVA)"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:A.kVA.toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginTop:"0.25rem"},children:"Total Power"})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[s.jsxs("div",{style:{background:O(A.powerFactor).bg,border:`1px solid ${O(A.powerFactor).border}`,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:O(A.powerFactor).color,marginBottom:"0.25rem"},children:"Power Factor"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:O(A.powerFactor).color},children:A.powerFactor.toFixed(4)}),s.jsx("div",{style:{fontSize:"0.75rem",color:O(A.powerFactor).color,marginTop:"0.25rem"},children:O(A.powerFactor).quality})]}),s.jsxs("div",{style:{background:E.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginBottom:"0.25rem"},children:"Phase Angle ()"}),s.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:E.cardText},children:[A.angle.toFixed(2),""]}),s.jsx("div",{style:{fontSize:"0.75rem",color:E.labelText,marginTop:"0.25rem"},children:"V-I Phase Shift"})]})]})]}),s.jsx("div",{style:{background:E.sectionBg,border:`1px solid ${E.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#3b82f6",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:E.labelText,lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",color:E.cardText,marginBottom:"0.5rem"},children:"Power Triangle Relationships:"}),s.jsxs("div",{style:{display:"grid",gap:"0.25rem"},children:[s.jsx("div",{children:" kVA = kW + kVAR (Pythagorean theorem)"}),s.jsx("div",{children:" Power Factor = kW  kVA = cos()"}),s.jsx("div",{children:" kVAR = kVA  sin()"}),s.jsxs("div",{children:[" ",A.isLeading?"Leading PF: Current leads voltage (capacitive loads)":"Lagging PF: Current lags voltage (inductive loads - most common)"]})]})]})]})}),A.powerFactor<.9&&s.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"12px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Low Power Factor Alert"}),s.jsxs("div",{children:["Power factor below 0.90 may result in utility penalties and increased energy costs. Consider power factor correction using ",A.isLeading?"inductors (reactors)":"capacitor banks","to improve efficiency and reduce demand charges."]})]})]})})]})]})}),IB=fe.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,i]=fe.useState("find-power"),[o,l]=fe.useState("480"),[u,h]=fe.useState(""),[d,g]=fe.useState("0.85"),[b,S]=fe.useState(""),[x,B]=fe.useState("line-to-line"),[E,L]=fe.useState(""),A={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},$=(()=>{const F=parseFloat(o),ie=parseFloat(u),ue=parseFloat(d),V=parseFloat(b),k=E?parseFloat(E)/100:1;if(n==="find-power"){if(!o||!u||!d)return null;const I=Math.sqrt(3)*F*ie*ue/1e3,M=Math.sqrt(3)*F*ie/1e3,C=Math.sqrt(Math.pow(M,2)-Math.pow(I,2));return{kW:I,kVA:M,kVAR:C,current:ie,voltage:F,powerFactor:ue,amps:ie}}else if(n==="find-current"){if(!o||!b||!d)return null;const I=V*1e3/(Math.sqrt(3)*F*ue),M=Math.sqrt(3)*F*I/1e3,C=Math.sqrt(Math.pow(M,2)-Math.pow(V,2));return{kW:V,kVA:M,kVAR:C,current:I,voltage:F,powerFactor:ue,amps:I}}else if(n==="motor-power"){if(!b||!E)return null;const I=V/k,M=V*1.341;let C=0;return o&&d&&(C=I*1e3/(Math.sqrt(3)*F*ue)),{inputKW:I,outputKW:V,outputHP:M,efficiency:k*100,amps:C,voltage:F,powerFactor:ue}}return null})();return fe.useImperativeHandle(t,()=>({exportPDF:()=>{if(!$){alert("Please enter all required values before exporting to PDF");return}const F={"find-power":"Calculate Power from Voltage & Current","find-current":"Calculate Current from Power & Voltage","motor-power":"Motor Power & Efficiency Calculation"};let ie;n==="motor-power"?ie={calculatorName:"Three-Phase Power Calculator - Motor",inputs:{calculationMode:F[n],outputPower:`${b} kW`,efficiency:`${E}%`,...o&&{voltage:`${o}V (${x==="line-to-line"?"Line-to-Line":"Line-to-Neutral"})`},...d&&{powerFactor:d}},results:{outputPower:`${$.outputKW.toFixed(2)} kW`,outputPowerHP:`${$.outputHP.toFixed(2)} HP`,inputPower:`${$.inputKW.toFixed(2)} kW`,efficiency:`${$.efficiency.toFixed(1)}%`,...$.amps>0&&{estimatedCurrent:`${$.amps.toFixed(2)} A`}},additionalInfo:{formula:"Input Power = Output Power  Efficiency",hpConversion:"1 kW = 1.341 HP",note:E?`At ${E}% efficiency, motor draws ${$.inputKW.toFixed(2)} kW to produce ${$.outputKW.toFixed(2)} kW output`:""}}:ie={calculatorName:"Three-Phase Power Calculator",inputs:{calculationMode:F[n],voltage:`${o}V (${x==="line-to-line"?"Line-to-Line":"Line-to-Neutral"})`,...u&&{current:`${u} A`},...b&&{power:`${b} kW`},powerFactor:d},results:{realPower:`${$.kW.toFixed(2)} kW`,apparentPower:`${$.kVA.toFixed(2)} kVA`,reactivePower:`${$.kVAR.toFixed(2)} kVAR`,current:`${$.amps.toFixed(2)} A`,voltage:`${$.voltage}V`,powerFactor:$.powerFactor},additionalInfo:{powerFormula:"P = 3  V  I  PF (kW)",apparentPowerFormula:"S = 3  V  I (kVA)",currentFormula:"I = P / (3  V  PF)",sqrt3:"3 = 1.732",configuration:x==="line-to-line"?"Line-to-Line (most common)":"Line-to-Neutral",note:"Three-phase systems are more efficient for power transmission and are standard in industrial applications"},necReferences:["Three-phase power: P = 3  VL-L  I  PF","Line-to-Line voltage: Standard between any two phases","Line-to-Neutral voltage: VL-N = VL-L  3","Common voltages: 208V, 240V, 480V, 600V (North America)","Three-phase systems provide constant power delivery","More efficient than single-phase for large loads and motors"]},cn(ie)}})),s.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[s.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${A.cardBorder}`,paddingBottom:"0.5rem"},children:"Calculation Mode"}),s.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:[{value:"find-power",label:"Find Power (from Voltage & Current)"},{value:"find-current",label:"Find Current (from Power & Voltage)"},{value:"motor-power",label:"Motor Power & Efficiency"}].map(F=>s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:n===F.value?A.sectionBg:"transparent",border:`1px solid ${n===F.value?"#3b82f6":A.cardBorder}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseOver:ie=>{n!==F.value&&(ie.currentTarget.style.background=A.sectionBg)},onMouseOut:ie=>{n!==F.value&&(ie.currentTarget.style.background="transparent")},children:[s.jsx("input",{type:"radio",name:"calculationMode",value:F.value,checked:n===F.value,onChange:ie=>i(ie.target.value),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),s.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:A.cardText},children:F.label})]},F.value))})]}),s.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${A.cardBorder}`,paddingBottom:"0.5rem"},children:"Input Values"}),n==="motor-power"?s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Output Power (kW)"}),s.jsx("input",{type:"number",value:b,onChange:F=>S(F.target.value),placeholder:"Motor output power",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Motor Efficiency (%)"}),s.jsx("input",{type:"number",value:E,onChange:F=>L(F.target.value),placeholder:"85-95% typical",step:"0.1",min:"0",max:"100",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"}}),s.jsx("div",{style:{fontSize:"0.75rem",color:A.subtleText,marginTop:"0.25rem"},children:"Optional: For current calculation, enter voltage and PF below"})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Voltage (V) - Optional"}),s.jsxs("select",{value:o,onChange:F=>l(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"",children:"Select"}),s.jsx("option",{value:"208",children:"208V"}),s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"380",children:"380V"}),s.jsx("option",{value:"400",children:"400V"}),s.jsx("option",{value:"415",children:"415V"}),s.jsx("option",{value:"480",children:"480V"}),s.jsx("option",{value:"600",children:"600V"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Power Factor - Optional"}),s.jsx("input",{type:"number",value:d,onChange:F=>g(F.target.value),placeholder:"0.80-0.95",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"}})]})]})]}):s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Voltage Configuration"}),s.jsxs("select",{value:x,onChange:F=>B(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"line-to-line",children:"Line-to-Line (Most Common)"}),s.jsx("option",{value:"line-to-neutral",children:"Line-to-Neutral"})]}),s.jsx("div",{style:{fontSize:"0.75rem",color:A.subtleText,marginTop:"0.25rem"},children:"Line-to-Line: Voltage between any two phases"})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Voltage (V)"}),s.jsxs("select",{value:o,onChange:F=>l(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[s.jsx("option",{value:"208",children:"208V"}),s.jsx("option",{value:"240",children:"240V"}),s.jsx("option",{value:"380",children:"380V"}),s.jsx("option",{value:"400",children:"400V"}),s.jsx("option",{value:"415",children:"415V"}),s.jsx("option",{value:"480",children:"480V"}),s.jsx("option",{value:"600",children:"600V"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),s.jsx("input",{type:"number",value:d,onChange:F=>g(F.target.value),placeholder:"0.80-0.95",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"}})]})]}),n==="find-power"&&s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Current (Amps)"}),s.jsx("input",{type:"number",value:u,onChange:F=>h(F.target.value),placeholder:"Line current",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"}})]}),n==="find-current"&&s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Power (kW)"}),s.jsx("input",{type:"number",value:b,onChange:F=>S(F.target.value),placeholder:"Real power",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"}})]})]})]}),$&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),n==="motor-power"?s.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[s.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginBottom:"0.25rem"},children:"Output Power"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:A.cardText},children:$.outputKW.toFixed(2)}),s.jsxs("div",{style:{fontSize:"0.75rem",color:A.labelText,marginTop:"0.25rem"},children:["kW (",$.outputHP.toFixed(2)," HP)"]})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Input Power Required"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:$.inputKW.toFixed(2)}),s.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:["kW @ ",$.efficiency.toFixed(1),"% efficiency"]})]})]}),$.amps>0&&s.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginBottom:"0.25rem"},children:"Estimated Current Draw"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:A.cardText},children:$.amps.toFixed(2)}),s.jsxs("div",{style:{fontSize:"0.75rem",color:A.labelText,marginTop:"0.25rem"},children:["Amps @ ",o,"V, PF ",d]})]})]}):s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginBottom:"0.25rem"},children:"Real Power (kW)"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:A.cardText},children:$.kW.toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginTop:"0.25rem"},children:"Working Power"})]}),s.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginBottom:"0.25rem"},children:"Apparent Power (kVA)"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:A.cardText},children:$.kVA.toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginTop:"0.25rem"},children:"Total Power"})]}),s.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Current (A)"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:$.amps.toFixed(2)}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Line Current"})]})]})]}),s.jsx("div",{style:{background:A.sectionBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(xs,{size:20,color:"#3b82f6",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:A.labelText,lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",color:A.cardText,marginBottom:"0.5rem"},children:n==="motor-power"?"Motor Efficiency:":"Three-Phase Formulas:"}),s.jsx("div",{style:{display:"grid",gap:"0.25rem"},children:n==="motor-power"?s.jsxs(s.Fragment,{children:[s.jsx("div",{children:" Input Power = Output Power  Efficiency"}),s.jsx("div",{children:" 1 kW = 1.341 HP"}),s.jsx("div",{children:" Typical motor efficiency: 85-95%"}),s.jsx("div",{children:" Higher efficiency motors use less power"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{children:" P (kW) = 3  V  I  PF  1000"}),s.jsx("div",{children:" S (kVA) = 3  V  I  1000"}),s.jsx("div",{children:" I (A) = P  1000  (3  V  PF)"}),s.jsx("div",{children:" 3 = 1.732 (constant for 3-phase)"}),s.jsxs("div",{children:[" ",x==="line-to-line"?"Using Line-to-Line voltage":"Using Line-to-Neutral voltage"]})]})})]})]})}),s.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"12px",padding:"1rem"},children:s.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[s.jsx(En,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),s.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Three-Phase Advantages:"}),s.jsxs("div",{style:{display:"grid",gap:"0.25rem"},children:[s.jsx("div",{children:" Delivers constant, smooth power (no pulsation)"}),s.jsx("div",{children:" More efficient for high-power applications"}),s.jsx("div",{children:" Smaller conductor sizes for same power"}),s.jsx("div",{children:" Standard for industrial and commercial buildings"}),s.jsx("div",{children:" Required for large motors and heavy equipment"})]})]})]})})]})]})}),EB=({isDarkMode:r})=>{const[e,t]=fe.useState(new Date),[n,i]=fe.useState(new Date),[o,l]=fe.useState([]),[u,h]=fe.useState(!0),d={bg:r?"#000000":"#f9fafb",cardBg:r?"#0a0a0a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#666666":"#6b7280",border:r?"#1a1a1a":"#e5e7eb",selectedDay:"#3b82f6",todayBg:r?"#1a1a1a":"#f3f4f6"},g={scheduled:"#3b82f6","in-progress":"#f59e0b",completed:"#10b981"};fe.useEffect(()=>{const w=Qm(si,async N=>{if(N)try{const D=await Wu();l(D)}catch(D){console.error("Error loading jobs:",D)}finally{h(!1)}else l([]),h(!1)});return()=>w()},[]);const b=o.map(w=>({...w,dateObj:w.date?new Date(w.date+"T00:00:00"):null})),S=w=>new Date(w.getFullYear(),w.getMonth()+1,0).getDate(),x=w=>new Date(w.getFullYear(),w.getMonth(),1).getDay(),B=(w,N)=>!w||!N?!1:w.getDate()===N.getDate()&&w.getMonth()===N.getMonth()&&w.getFullYear()===N.getFullYear(),E=w=>B(w,new Date),L=w=>b.filter(N=>N.dateObj&&B(N.dateObj,w)),A=w=>b.some(N=>N.dateObj&&B(N.dateObj,w)),O=()=>{t(new Date(e.getFullYear(),e.getMonth()-1))},$=()=>{t(new Date(e.getFullYear(),e.getMonth()+1))},F=["January","February","March","April","May","June","July","August","September","October","November","December"],ie=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ue=S(e),V=x(e),k=[];for(let w=0;w<V;w++)k.push(null);for(let w=1;w<=ue;w++)k.push(new Date(e.getFullYear(),e.getMonth(),w));const I=L(n),M=new Date,C=b.filter(w=>w.dateObj&&w.dateObj>=M&&w.status==="scheduled").sort((w,N)=>w.dateObj-N.dateObj).slice(0,5);return u?s.jsx("div",{style:{minHeight:"100vh",background:d.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("div",{style:{color:d.text},children:"Loading..."})}):s.jsx("div",{style:{minHeight:"100vh",background:d.bg,paddingBottom:"5rem",maxWidth:"100vw",overflowX:"hidden"},children:s.jsxs("div",{style:{padding:"1rem"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5rem",marginBottom:"1rem",maxWidth:"100%",overflow:"hidden"},children:[s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#3b82f6",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:C.length}),s.jsx("div",{style:{fontSize:"0.75rem",color:d.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Upcoming"})]}),s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#f59e0b",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:o.filter(w=>w.status==="in-progress").length}),s.jsx("div",{style:{fontSize:"0.75rem",color:d.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"In Progress"})]}),s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10b981",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:o.filter(w=>w.status==="completed").length}),s.jsx("div",{style:{fontSize:"0.75rem",color:d.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Completed"})]})]}),s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem",boxShadow:"none"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[s.jsxs("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:"600",color:d.text},children:[F[e.getMonth()]," ",e.getFullYear()]}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsx("button",{onClick:O,style:{background:d.bg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",color:d.text},children:s.jsx(YT,{size:20})}),s.jsx("button",{onClick:$,style:{background:d.bg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",color:d.text},children:s.jsx(XT,{size:20})})]})]}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.25rem",marginBottom:"0.5rem"},children:ie.map(w=>s.jsx("div",{style:{textAlign:"center",fontSize:"0.75rem",fontWeight:"600",color:d.subtext,padding:"0.5rem 0"},children:w},w))}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.125rem"},children:k.map((w,N)=>{if(!w)return s.jsx("div",{},`empty-${N}`);const D=B(w,n),q=E(w),ne=A(w);return s.jsxs("button",{onClick:()=>i(w),style:{aspectRatio:"1",border:"none",borderRadius:"0.375rem",background:D?d.selectedDay:q?d.todayBg:"transparent",color:D?"white":d.text,cursor:"pointer",fontSize:"0.75rem",fontWeight:D||q?"600":"400",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",padding:"0.25rem",minWidth:0,width:"100%"},onMouseEnter:se=>{D||(se.currentTarget.style.background=d.todayBg)},onMouseLeave:se=>{!D&&!q?se.currentTarget.style.background="transparent":!D&&q&&(se.currentTarget.style.background=d.todayBg)},children:[w.getDate(),ne&&s.jsx("div",{style:{position:"absolute",bottom:"0.125rem",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"0.0625rem"},children:L(w).slice(0,3).map((se,oe)=>s.jsx("div",{style:{width:"3px",height:"3px",borderRadius:"50%",background:D?"white":g[se.status]}},oe))})]},N)})})]}),s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem",boxShadow:"none"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[s.jsx("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:"600",color:d.text},children:B(n,new Date)?"Today":n.toLocaleDateString("en-US",{month:"long",day:"numeric"})}),s.jsxs("span",{style:{fontSize:"0.75rem",color:d.subtext,background:d.bg,padding:"0.25rem 0.75rem",borderRadius:"1rem"},children:[I.length," ",I.length===1?"job":"jobs"]})]}),I.length===0?s.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem",color:d.subtext},children:[s.jsx(e1,{size:48,style:{margin:"0 auto 0.5rem",opacity:.3}}),s.jsx("p",{style:{margin:0,fontSize:"0.875rem"},children:"No jobs scheduled for this day"})]}):s.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:I.map(w=>s.jsxs("div",{style:{background:d.bg,border:`1px solid ${d.border}`,borderLeft:`4px solid ${g[w.status]}`,borderRadius:"0.5rem",padding:"1rem"},children:[s.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:s.jsxs("div",{children:[s.jsx("h4",{style:{margin:"0 0 0.25rem 0",fontSize:"1rem",fontWeight:"600",color:d.text},children:w.title||w.name}),s.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:d.subtext},children:w.client})]})}),s.jsxs("div",{style:{display:"grid",gap:"0.25rem",fontSize:"0.875rem",color:d.subtext},children:[w.time&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx(qm,{size:14}),s.jsxs("span",{children:[w.time,w.duration&&` (${w.duration})`]})]}),w.location&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx(lw,{size:14}),s.jsx("span",{children:w.location})]}),w.estimatedCost&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx(X1,{size:14}),s.jsxs("span",{children:["$",Number(w.estimatedCost).toLocaleString()]})]})]})]},w.id))})]}),s.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",boxShadow:"none"},children:[s.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"1.125rem",fontWeight:"600",color:d.text},children:"Upcoming Jobs"}),C.length===0?s.jsx("div",{style:{textAlign:"center",padding:"2rem 1rem",color:d.subtext},children:s.jsx("p",{style:{margin:0,fontSize:"0.875rem"},children:"No upcoming jobs scheduled"})}):s.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:C.map(w=>s.jsxs("div",{style:{background:d.bg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("h4",{style:{margin:"0 0 0.25rem 0",fontSize:"0.9375rem",fontWeight:"600",color:d.text},children:w.title||w.name}),s.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.8125rem",color:d.subtext},children:w.client}),s.jsxs("div",{style:{fontSize:"0.75rem",color:d.subtext,display:"flex",alignItems:"center",gap:"0.25rem"},children:[s.jsx(e1,{size:12}),w.dateObj.toLocaleDateString("en-US",{month:"short",day:"numeric"}),w.time&&` at ${w.time}`]})]}),s.jsx("div",{style:{width:"4px",height:"40px",borderRadius:"2px",background:g[w.status]}})]},w.id))})]})]})})},jB=({isDarkMode:r})=>{const[e,t]=fe.useState(null),[n,i]=fe.useState(!0),[o,l]=fe.useState(!0),[u,h]=fe.useState(""),[d,g]=fe.useState(""),[b,S]=fe.useState(""),x={bg:r?"#000000":"#f9fafb",cardBg:r?"#0a0a0a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#666666":"#6b7280",border:r?"#1a1a1a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"};fe.useEffect(()=>{const A=Qm(si,O=>{t(O),i(!1)});return()=>A()},[]);const B=async A=>{A.preventDefault(),S("");try{const O=await t_(si,u,d);try{await fetch("/.netlify/functions/send-welcome-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u})})}catch($){console.error("Welcome email failed:",$)}alert("Welcome! Please check your email to verify your account."),h(""),g("")}catch(O){S(O.message)}},E=async A=>{A.preventDefault(),S("");try{await r_(si,u,d),h(""),g("")}catch(O){S(O.message)}},L=async()=>{try{await yE(si)}catch(A){S(A.message)}};return n?s.jsx("div",{style:{background:x.bg,minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("div",{style:{color:x.text},children:"Loading..."})}):e?s.jsx("div",{style:{background:x.bg,paddingBottom:"5rem"},children:s.jsxs("div",{style:{padding:"1rem"},children:[s.jsxs("div",{style:{background:x.cardBg,borderRadius:"0.75rem",border:`1px solid ${x.border}`,padding:"2rem 1rem",marginBottom:"1rem",textAlign:"center",boxShadow:"none"},children:[s.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:s.jsx(uf,{size:40,color:"white"})}),s.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:x.text,fontSize:"1.25rem",fontWeight:"600"},children:e.email}),s.jsx("p",{style:{margin:0,color:x.subtext,fontSize:"0.875rem"},children:"Electrician Account"})]}),s.jsxs("div",{style:{background:x.cardBg,borderRadius:"0.75rem",border:`1px solid ${x.border}`,overflow:"hidden",marginBottom:"1rem",boxShadow:"none"},children:[s.jsx("h3",{style:{margin:0,padding:"1rem",color:x.text,fontSize:"1rem",fontWeight:"600",borderBottom:`1px solid ${x.border}`},children:"Account Settings"}),s.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",borderBottom:`1px solid ${x.border}`,display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:x.text},children:[s.jsx(t1,{size:20,color:x.subtext}),s.jsxs("div",{style:{flex:1,textAlign:"left"},children:[s.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Email"}),s.jsx("div",{style:{fontSize:"0.8125rem",color:x.subtext},children:e.email})]})]}),s.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",borderBottom:`1px solid ${x.border}`,display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:x.text},children:[s.jsx(MT,{size:20,color:x.subtext}),s.jsxs("div",{style:{flex:1,textAlign:"left"},children:[s.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Notifications"}),s.jsx("div",{style:{fontSize:"0.8125rem",color:x.subtext},children:"Manage preferences"})]})]}),s.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:x.text},children:[s.jsx(j6,{size:20,color:x.subtext}),s.jsxs("div",{style:{flex:1,textAlign:"left"},children:[s.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Privacy & Security"}),s.jsx("div",{style:{fontSize:"0.8125rem",color:x.subtext},children:"Account protection"})]})]})]}),s.jsxs("button",{onClick:L,style:{width:"100%",padding:"1rem",background:"#ef4444",color:"white",border:"none",borderRadius:"0.75rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:"none"},children:[s.jsx(g6,{size:20}),"Log Out"]})]})}):s.jsx("div",{style:{background:x.bg,minHeight:"100vh",paddingBottom:"5rem"},children:s.jsx("div",{style:{padding:"1rem"},children:s.jsxs("div",{style:{background:x.cardBg,borderRadius:"0.75rem",border:`1px solid ${x.border}`,padding:"2rem 1rem",marginTop:"2rem",boxShadow:"none"},children:[s.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:s.jsx(uf,{size:40,color:"white"})}),s.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:x.text,fontSize:"1.5rem",fontWeight:"700",textAlign:"center"},children:o?"Welcome Back":"Create Account"}),s.jsx("p",{style:{margin:"0 0 2rem 0",color:x.subtext,fontSize:"0.875rem",textAlign:"center"},children:o?"Sign in to your account":"Sign up to get started"}),b&&s.jsx("div",{style:{padding:"0.75rem",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"0.5rem",color:"#dc2626",fontSize:"0.875rem",marginBottom:"1rem"},children:b}),s.jsxs("form",{onSubmit:o?E:B,children:[s.jsxs("div",{style:{marginBottom:"1rem"},children:[s.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.text,fontSize:"0.875rem",fontWeight:"500"},children:"Email"}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx(t1,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:x.subtext}}),s.jsx("input",{type:"email",value:u,onChange:A=>h(A.target.value),placeholder:"your@email.com",required:!0,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:`1px solid ${x.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:x.inputBg,color:x.text,boxSizing:"border-box"}})]})]}),s.jsxs("div",{style:{marginBottom:"1.5rem"},children:[s.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.text,fontSize:"0.875rem",fontWeight:"500"},children:"Password"}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx(aw,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:x.subtext}}),s.jsx("input",{type:"password",value:d,onChange:A=>g(A.target.value),placeholder:"",required:!0,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:`1px solid ${x.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:x.inputBg,color:x.text,boxSizing:"border-box"}})]})]}),s.jsx("button",{type:"submit",style:{width:"100%",padding:"0.875rem",background:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",marginBottom:"1rem"},children:o?"Sign In":"Sign Up"}),s.jsxs("div",{style:{textAlign:"center",color:x.subtext,fontSize:"0.875rem"},children:[o?"Don't have an account? ":"Already have an account? ",s.jsx("button",{type:"button",onClick:()=>{l(!o),S("")},style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",textDecoration:"underline"},children:o?"Sign Up":"Sign In"})]})]})]})})})},RB="_addJobButton_euajw_3",PB="_addJobContainer_euajw_19",Gb={addJobButton:RB,addJobContainer:PB},NB="_actionButtons_2jz29_3",BB="_cardHeader_2jz29_42",LB="_cardTitle_2jz29_49",Zg={actionButtons:NB,cardHeader:BB,cardTitle:LB},FB=({job:r,statusConfig:e,statusDropdownOpen:t,setStatusDropdownOpen:n,onUpdateStatus:i,onViewJob:o,onViewEstimate:l,onViewInvoice:u,isDarkMode:h,colors:d})=>{const g=fe.useRef(null),[b,S]=fe.useState(!1),x=e[r.status].icon,B=r.title||r.name;return s.jsxs("div",{onClick:()=>S(!b),style:{background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"0.75rem",transition:"all 0.2s",cursor:"pointer",WebkitTapHighlightColor:"transparent",userSelect:"none"},children:[s.jsxs("div",{className:Zg.cardHeader,children:[s.jsxs("div",{className:Zg.cardTitle,children:[s.jsxs("h3",{style:{margin:"0 0 0.25rem 0",color:d.text,fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[B,b?s.jsx(e6,{size:18}):s.jsx(gm,{size:18})]}),s.jsx("p",{style:{margin:0,color:d.subtext,fontSize:"0.875rem"},children:r.client})]}),s.jsxs("div",{style:{position:"relative"},ref:t===r.id?g:null,children:[s.jsxs("button",{onClick:E=>{E.stopPropagation(),n(t===r.id?null:r.id)},style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",padding:"4px 8px",borderRadius:"4px",background:`${e[r.status].color}20`,color:e[r.status].color,fontSize:"11px",fontWeight:"600",whiteSpace:"nowrap",border:"none",cursor:"pointer",transition:"all 0.2s",lineHeight:"1",minHeight:"unset",minWidth:"unset",height:"fit-content",width:"fit-content",boxSizing:"border-box"},children:[s.jsx(x,{size:12}),s.jsx("span",{children:e[r.status].label})]}),t===r.id&&s.jsx("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.5rem",background:d.cardBg,border:`1px solid ${d.border}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:100,minWidth:"140px",overflow:"hidden"},children:Object.entries(e).map(([E,L])=>{const A=L.icon;return s.jsxs("button",{onClick:O=>{O.stopPropagation(),i(r.id,E)},style:{width:"100%",padding:"0.625rem 0.75rem",background:r.status===E?`${L.color}20`:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:L.color,fontSize:"0.875rem",fontWeight:r.status===E?"600":"500",transition:"background 0.2s"},onMouseEnter:O=>{r.status!==E&&(O.target.style.background=h?"#2a2a2a":"#f3f4f6")},onMouseLeave:O=>{r.status!==E&&(O.target.style.background="transparent")},children:[s.jsx(A,{size:16}),s.jsx("span",{children:L.label})]},E)})})]})]}),(r.location||r.date)&&s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem",color:d.subtext,fontSize:"0.875rem",gap:"1rem"},children:[r.location&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx(lw,{size:16}),s.jsx("span",{children:r.location})]}),r.date&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginLeft:"auto"},children:[s.jsx(e1,{size:16}),s.jsxs("span",{children:[new Date(r.date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),r.time&&` (${r.time})`,r.duration&&` ${r.duration}`]})]})]}),b&&s.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:`1px solid ${d.border}`},children:[r.estimatedCost&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:d.subtext,fontSize:"0.875rem"},children:[s.jsx(X1,{size:16}),s.jsxs("span",{children:["$",Number(r.estimatedCost).toLocaleString()]})]}),r.notes&&s.jsx("div",{style:{marginTop:"0.5rem"},children:s.jsx("p",{style:{margin:0,padding:"0.75rem",background:d.bg,borderRadius:"0.5rem",color:d.text,fontSize:"0.875rem",lineHeight:"1.5"},children:r.notes})})]}),s.jsxs("div",{className:Zg.actionButtons,children:[s.jsxs("button",{onClick:E=>{E.stopPropagation(),o(r)},title:"Edit Job",style:{background:"#2563eb",border:"none",borderRadius:"0.5rem",color:"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:"600"},children:[s.jsx(gw,{size:16}),s.jsx("span",{children:"Edit"})]}),s.jsxs("button",{onClick:E=>{E.stopPropagation(),l(r)},title:r.estimateId?"View Estimate":"No estimate linked",style:{background:r.estimateId?"#10b981":d.border,border:"none",borderRadius:"0.5rem",color:"white",cursor:r.estimateId?"pointer":"not-allowed",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:"600",opacity:r.estimateId?1:.5},disabled:!r.estimateId,children:[s.jsx(Rf,{size:16}),s.jsx("span",{children:"Estimate"})]}),s.jsxs("button",{onClick:E=>{E.stopPropagation(),u(r)},title:r.invoiceId?"View Invoice":"No invoice linked",style:{background:r.invoiceId?"#f59e0b":d.border,border:"none",borderRadius:"0.5rem",color:"white",cursor:r.invoiceId?"pointer":"not-allowed",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:"600",opacity:r.invoiceId?1:.5},disabled:!r.invoiceId,children:[s.jsx(Z1,{size:16}),s.jsx("span",{children:"Invoice"})]})]})]})},zB=({linkedEstimate:r,estimates:e,showMenu:t,setShowMenu:n,onSelectEstimate:i,onCreateNewEstimate:o,onViewEstimate:l,onRemoveEstimate:u,menuRef:h,isDarkMode:d,colors:g})=>r?s.jsxs("div",{style:{marginBottom:"0.75rem"},children:[s.jsxs("button",{type:"button",onClick:()=>l(r.id),style:{width:"100%",padding:"0.75rem",background:g.bg,border:`1px solid ${g.border}`,borderRadius:"0.5rem",cursor:"pointer",textAlign:"left",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:g.text,marginBottom:"0.25rem"},children:r.name}),s.jsxs("div",{style:{fontSize:"0.75rem",color:g.subtext},children:["$",Number(r.total||0).toLocaleString()]})]}),s.jsx("div",{style:{padding:"0.25rem 0.5rem",background:"#2563eb",color:"white",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:"View"})]}),s.jsx("button",{type:"button",onClick:u,style:{width:"100%",padding:"0.5rem",marginTop:"0.5rem",background:"transparent",border:`1px solid ${g.border}`,borderRadius:"0.5rem",color:g.subtext,cursor:"pointer",fontSize:"0.75rem"},children:"Remove Estimate"})]}):s.jsxs("div",{style:{position:"relative",marginBottom:"0.75rem"},ref:t?h:null,children:[s.jsxs("button",{type:"button",onClick:()=>n(!t),style:{width:"100%",padding:"0.75rem",background:g.inputBg,border:`1px solid ${g.border}`,borderRadius:"0.5rem",color:"#2563eb",cursor:"pointer",fontSize:"0.9375rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[s.jsx(ma,{size:18}),"Add Estimate"]}),t&&s.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"0.5rem",background:g.cardBg,border:`1px solid ${g.border}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:100,maxHeight:"200px",overflowY:"auto"},children:[s.jsxs("button",{type:"button",onClick:o,style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${g.border}`,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563eb",fontSize:"0.875rem",fontWeight:"600",textAlign:"left"},onMouseEnter:b=>b.target.style.background=d?"#2a2a2a":"#f3f4f6",onMouseLeave:b=>b.target.style.background="transparent",children:[s.jsx(ma,{size:16}),"Create New Estimate"]}),e.length===0?s.jsx("div",{style:{padding:"1rem",textAlign:"center",color:g.subtext,fontSize:"0.875rem"},children:"No estimates available"}):e.map(b=>s.jsxs("button",{type:"button",onClick:()=>i(b),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${g.border}`,cursor:"pointer",textAlign:"left",color:g.text,fontSize:"0.875rem"},onMouseEnter:S=>S.target.style.background=d?"#2a2a2a":"#f3f4f6",onMouseLeave:S=>S.target.style.background="transparent",children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:b.name||"Untitled Estimate"}),s.jsxs("div",{style:{color:g.subtext,fontSize:"0.75rem"},children:["$",Number(b.total||0).toLocaleString()]})]},b.id))]})]}),V4=({formData:r,setFormData:e,linkedEstimate:t,estimates:n,showEstimateMenu:i,setShowEstimateMenu:o,onSelectEstimate:l,onCreateNewEstimate:u,onViewEstimate:h,onRemoveEstimate:d,estimateMenuRef:g,isDarkMode:b,colors:S})=>s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"text",placeholder:"Job Title *",value:r.title,onChange:x=>e(B=>({...B,title:x.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}}),s.jsx("input",{type:"text",placeholder:"Client Name *",value:r.client,onChange:x=>e(B=>({...B,client:x.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}}),s.jsx("input",{type:"text",placeholder:"Location",value:r.location,onChange:x=>e(B=>({...B,location:x.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[s.jsx("input",{type:"date",value:r.date,onChange:x=>e(B=>({...B,date:x.target.value})),style:{padding:"0.75rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}}),s.jsx("input",{type:"time",value:r.time,onChange:x=>e(B=>({...B,time:x.target.value})),style:{padding:"0.75rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}})]}),s.jsx(zB,{linkedEstimate:t,estimates:n,showMenu:i,setShowMenu:o,onSelectEstimate:l,onCreateNewEstimate:u,onViewEstimate:h,onRemoveEstimate:d,menuRef:g,isDarkMode:b,colors:S}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[s.jsx("input",{type:"number",placeholder:"Cost ($)",value:r.estimatedCost,onChange:x=>e(B=>({...B,estimatedCost:x.target.value})),style:{padding:"0.75rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}}),s.jsx("input",{type:"text",placeholder:"Duration",value:r.duration,onChange:x=>e(B=>({...B,duration:x.target.value})),style:{padding:"0.75rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}})]}),s.jsxs("select",{value:r.status,onChange:x=>e(B=>({...B,status:x.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"},children:[s.jsx("option",{value:"scheduled",children:"Scheduled"}),s.jsx("option",{value:"in-progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"})]}),s.jsx("textarea",{placeholder:"Notes",value:r.notes,onChange:x=>e(B=>({...B,notes:x.target.value})),rows:"3",style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box",resize:"vertical"}})]}),VB=({viewingJob:r,formData:e,setFormData:t,linkedEstimate:n,estimates:i,showEstimateMenu:o,setShowEstimateMenu:l,onSelectEstimate:u,onCreateNewEstimate:h,onViewEstimate:d,onRemoveEstimate:g,estimateMenuRef:b,onClose:S,onSave:x,onDelete:B,isDarkMode:E,colors:L})=>r?s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:S,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:1e3,animation:"fadeIn 0.2s"}}),s.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:L.cardBg,borderRadius:"1rem",padding:"1.5rem",paddingBottom:"calc(100px + env(safe-area-inset-bottom))",width:"90%",maxWidth:"500px",maxHeight:"80vh",overflowY:"auto",zIndex:1001,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.3)",WebkitOverflowScrolling:"touch"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[s.jsx("h2",{style:{margin:0,fontSize:"1.25rem",fontWeight:"600",color:L.text},children:"Job Details"}),s.jsx("button",{onClick:S,style:{background:"transparent",border:"none",cursor:"pointer",padding:"0.5rem",color:L.subtext,display:"flex",alignItems:"center"},children:s.jsx(e5,{size:24})})]}),s.jsxs("div",{children:[s.jsx(V4,{formData:e,setFormData:t,linkedEstimate:n,estimates:i,showEstimateMenu:o,setShowEstimateMenu:l,onSelectEstimate:u,onCreateNewEstimate:h,onViewEstimate:d,onRemoveEstimate:g,estimateMenuRef:b,isDarkMode:E,colors:L}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsx("button",{onClick:x,disabled:!e.title||!e.client,style:{flex:1,padding:"0.75rem",background:!e.title||!e.client?L.border:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:!e.title||!e.client?"not-allowed":"pointer",opacity:!e.title||!e.client?.5:1},children:"Save Changes"}),s.jsx("button",{onClick:()=>B(r.id,r.title||r.name),style:{padding:"0.75rem",background:"transparent",color:"#ef4444",border:"1px solid #ef4444",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.25rem"},children:s.jsx(Tc,{size:16})})]})]})]})]}):null,OB=({activeStatusTab:r,setActiveStatusTab:e,statusCounts:t,statusConfig:n,colors:i})=>s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.375rem",marginBottom:"1rem"},children:[s.jsxs("button",{onClick:()=>e("all"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${r==="all"?i.text:i.border}`,background:r==="all"?i.text:"transparent",color:r==="all"?i.bg:i.text,fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"0.375rem",transition:"all 0.2s"},children:[s.jsx("span",{children:"All"}),s.jsx("span",{style:{background:r==="all"?i.bg:i.cardBg,color:r==="all"?i.text:i.subtext,padding:"0.125rem 0.375rem",borderRadius:"1rem",fontSize:"0.7rem",fontWeight:"700",minWidth:"1.25rem",textAlign:"center"},children:t.all})]}),s.jsxs("button",{onClick:()=>e("scheduled"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${r==="scheduled"?n.scheduled.color:i.border}`,background:r==="scheduled"?`${n.scheduled.color}20`:"transparent",color:r==="scheduled"?n.scheduled.color:i.text,fontSize:"0.7rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.125rem",transition:"all 0.2s"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[s.jsx(qm,{size:12}),s.jsx("span",{style:{background:r==="scheduled"?n.scheduled.color:i.cardBg,color:r==="scheduled"?"white":i.subtext,padding:"0.125rem 0.3rem",borderRadius:"1rem",fontSize:"0.65rem",fontWeight:"700",minWidth:"1.25rem",textAlign:"center"},children:t.scheduled})]}),s.jsx("span",{style:{fontSize:"0.65rem"},children:"Scheduled"})]}),s.jsxs("button",{onClick:()=>e("in-progress"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${r==="in-progress"?n["in-progress"].color:i.border}`,background:r==="in-progress"?`${n["in-progress"].color}20`:"transparent",color:r==="in-progress"?n["in-progress"].color:i.text,fontSize:"0.7rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.125rem",transition:"all 0.2s"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[s.jsx(jf,{size:12}),s.jsx("span",{style:{background:r==="in-progress"?n["in-progress"].color:i.cardBg,color:r==="in-progress"?"white":i.subtext,padding:"0.125rem 0.3rem",borderRadius:"1rem",fontSize:"0.65rem",fontWeight:"700",minWidth:"1.25rem",textAlign:"center"},children:t["in-progress"]})]}),s.jsx("span",{style:{fontSize:"0.65rem"},children:"In Progress"})]}),s.jsxs("button",{onClick:()=>e("completed"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${r==="completed"?n.completed.color:i.border}`,background:r==="completed"?`${n.completed.color}20`:"transparent",color:r==="completed"?n.completed.color:i.text,fontSize:"0.7rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.125rem",transition:"all 0.2s"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[s.jsx(En,{size:12}),s.jsx("span",{style:{background:r==="completed"?n.completed.color:i.cardBg,color:r==="completed"?"white":i.subtext,padding:"0.125rem 0.3rem",borderRadius:"1rem",fontSize:"0.65rem",fontWeight:"700",minWidth:"1.25rem",textAlign:"center"},children:t.completed})]}),s.jsx("span",{style:{fontSize:"0.65rem"},children:"Completed"})]})]}),MB=({isOpen:r,onClose:e,isDarkMode:t})=>{const[n,i]=fe.useState(!0),[o,l]=fe.useState(""),[u,h]=fe.useState(""),[d,g]=fe.useState(""),[b,S]=fe.useState(!1),x={cardBg:t?"#0a0a0a":"#ffffff",text:t?"#ffffff":"#111827",subtext:t?"#666666":"#6b7280",border:t?"#1a1a1a":"#e5e7eb",inputBg:t?"#000000":"#ffffff"};if(!r)return null;const B=async A=>{A.preventDefault(),g(""),S(!0);try{await t_(si,o,u);try{await fetch("/.netlify/functions/send-welcome-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o})})}catch(O){console.error("Welcome email failed:",O)}l(""),h(""),e(),alert("Welcome! Your account has been created.")}catch(O){g(O.message)}finally{S(!1)}},E=async A=>{A.preventDefault(),g(""),S(!0);try{await r_(si,o,u),l(""),h(""),e()}catch(O){g(O.message)}finally{S(!1)}},L=A=>{A.target===A.currentTarget&&e()};return s.jsx("div",{onClick:L,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:s.jsxs("div",{style:{background:x.cardBg,borderRadius:"0.75rem",border:`1px solid ${x.border}`,padding:"2rem 1.5rem",maxWidth:"400px",width:"100%",position:"relative",maxHeight:"90vh",overflowY:"auto"},children:[s.jsx("button",{onClick:e,style:{position:"absolute",top:"1rem",right:"1rem",background:"transparent",border:"none",cursor:"pointer",color:x.subtext,padding:"0.25rem",display:"flex",alignItems:"center"},children:s.jsx(e5,{size:24})}),s.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:s.jsx(uf,{size:40,color:"white"})}),s.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:x.text,fontSize:"1.5rem",fontWeight:"700",textAlign:"center"},children:n?"Welcome Back":"Create Account"}),s.jsx("p",{style:{margin:"0 0 2rem 0",color:x.subtext,fontSize:"0.875rem",textAlign:"center"},children:n?"Sign in to manage your jobs":"Sign up to get started"}),d&&s.jsx("div",{style:{padding:"0.75rem",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"0.5rem",color:"#dc2626",fontSize:"0.875rem",marginBottom:"1rem"},children:d}),s.jsxs("form",{onSubmit:n?E:B,children:[s.jsxs("div",{style:{marginBottom:"1rem"},children:[s.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.text,fontSize:"0.875rem",fontWeight:"500"},children:"Email"}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx(t1,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:x.subtext}}),s.jsx("input",{type:"email",value:o,onChange:A=>l(A.target.value),placeholder:"your@email.com",required:!0,disabled:b,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:`1px solid ${x.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:x.inputBg,color:x.text,boxSizing:"border-box"}})]})]}),s.jsxs("div",{style:{marginBottom:"1.5rem"},children:[s.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:x.text,fontSize:"0.875rem",fontWeight:"500"},children:"Password"}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx(aw,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:x.subtext}}),s.jsx("input",{type:"password",value:u,onChange:A=>h(A.target.value),placeholder:"",required:!0,disabled:b,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:`1px solid ${x.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:x.inputBg,color:x.text,boxSizing:"border-box"}})]})]}),s.jsx("button",{type:"submit",disabled:b,style:{width:"100%",padding:"0.875rem",background:b?x.border:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",cursor:b?"not-allowed":"pointer",marginBottom:"1rem"},children:b?"Please wait...":n?"Sign In":"Sign Up"}),s.jsxs("div",{style:{textAlign:"center",color:x.subtext,fontSize:"0.875rem"},children:[n?"Don't have an account? ":"Already have an account? ",s.jsx("button",{type:"button",onClick:()=>{i(!n),g("")},disabled:b,style:{background:"none",border:"none",color:"#2563eb",cursor:b?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"600",textDecoration:"underline"},children:n?"Sign Up":"Sign In"})]})]})]})})},DB=({isDarkMode:r,onNavigateToEstimates:e})=>{var Ce;const[t,n]=fe.useState([]),[i,o]=fe.useState(!0),[l,u]=fe.useState(!1),[h,d]=fe.useState(null),[g,b]=fe.useState(null),[S,x]=fe.useState(null),[B,E]=fe.useState(!1),[L,A]=fe.useState([]),O=fe.useRef(null),[$,F]=fe.useState(null),[ie,ue]=fe.useState(""),[V,k]=fe.useState("all"),[I,M]=fe.useState(!1),[C,w]=fe.useState({title:"",client:"",location:"",status:"scheduled",date:"",time:"",estimatedCost:"",duration:"",notes:""}),N={bg:r?"#000000":"#f9fafb",cardBg:r?"#1a1a1a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#999999":"#6b7280",border:r?"#2a2a2a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"},D={scheduled:{color:"#3b82f6",icon:qm,label:"Scheduled"},"in-progress":{color:"#f59e0b",icon:jf,label:"In Progress"},completed:{color:"#10b981",icon:En,label:"Completed"}};fe.useEffect(()=>{let ge=null;const Fe=Qm(si,async Ke=>{Ke?(q(),ge=L4(Ke.uid,Qe=>{console.log(" Real-time update received"),n(Qe),o(!1)})):o(!1)});return()=>{Fe(),ge&&ge()}},[]),fe.useEffect(()=>{const ge=async()=>{try{const{getUserEstimates:Fe}=await fu(async()=>{const{getUserEstimates:Qe}=await Promise.resolve().then(()=>Kb);return{getUserEstimates:Qe}},void 0),Ke=await Fe();A(Ke)}catch(Fe){console.error("Error loading estimates:",Fe)}};si.currentUser&&ge()},[]),fe.useEffect(()=>{const ge=Fe=>{O.current&&!O.current.contains(Fe.target)&&E(!1)};return document.addEventListener("mousedown",ge),()=>document.removeEventListener("mousedown",ge)},[]);const q=async()=>{o(!0);try{const ge=await Wu();n(ge)}catch(ge){console.error("Error loading jobs:",ge),alert("Failed to load jobs. Please try again.")}finally{o(!1)}},ne=()=>{w({title:"",client:"",location:"",status:"scheduled",date:"",time:"",estimatedCost:"",duration:"",notes:""}),u(!1),b(null),d(null),F(null)},se=async()=>{if(C.title&&C.client)try{const ge={name:C.title,title:C.title,client:C.client,location:C.location,status:C.status,date:C.date,time:C.time,estimatedCost:C.estimatedCost,duration:C.duration,notes:C.notes,estimateId:($==null?void 0:$.id)||null};await J1(ge),ne()}catch(ge){console.error("Error adding job:",ge),alert("Failed to add job. Please try again.")}},oe=async()=>{if(C.title&&C.client&&g)try{const{updateJob:ge}=await fu(async()=>{const{updateJob:Ke}=await Promise.resolve().then(()=>Mb);return{updateJob:Ke}},void 0),Fe={name:C.title,title:C.title,client:C.client,location:C.location,status:C.status,date:C.date,time:C.time,estimatedCost:C.estimatedCost,duration:C.duration,notes:C.notes,estimateId:($==null?void 0:$.id)||null};await ge(g.id,Fe),ne()}catch(ge){console.error("Error updating job:",ge),alert("Failed to update job. Please try again.")}},xe=async(ge,Fe)=>{try{const{updateJob:Ke}=await fu(async()=>{const{updateJob:ze}=await Promise.resolve().then(()=>Mb);return{updateJob:ze}},void 0),Qe=t.find(ze=>ze.id===ge);await Ke(ge,{...Qe,status:Fe}),x(null)}catch(Ke){console.error("Error updating status:",Ke),alert("Failed to update status. Please try again.")}},we=ge=>{if(d(ge),b(ge),w({title:ge.title||ge.name,client:ge.client,location:ge.location||"",status:ge.status,date:ge.date||"",time:ge.time||"",estimatedCost:ge.estimatedCost||"",duration:ge.duration||"",notes:ge.notes||""}),ge.estimateId){const Fe=L.find(Ke=>Ke.id===ge.estimateId);Fe&&F(Fe)}else F(null)},ee=async(ge,Fe)=>{if(window.confirm(`Are you sure you want to delete "${Fe}"?`))try{await F4(ge),h&&h.id===ge&&ne()}catch(Ke){console.error("Error deleting job:",Ke),alert("Failed to delete job. Please try again.")}},W=ge=>{ge&&(w(Fe=>({...Fe,estimatedCost:ge.total.toString(),estimateId:ge.id})),F(ge)),E(!1)},J=async()=>{if(E(!1),l&&C.title&&C.client)try{const ge={name:C.title,title:C.title,client:C.client,location:C.location,status:C.status,date:C.date,time:C.time,estimatedCost:C.estimatedCost,duration:C.duration,notes:C.notes},Ke={jobId:await J1(ge),jobName:C.title,jobClient:C.client};e&&e(Ke),ne()}catch(ge){console.error("Error creating job:",ge),alert("Failed to create job. Please try again.")}else if(h){const ge={jobId:h.id,jobName:h.title||h.name,jobClient:h.client};e&&e(ge)}else alert("Please fill in the job title and client name first.")},re=ge=>{e&&e({viewEstimateId:ge})},he=()=>{F(null),w(ge=>({...ge,estimatedCost:"",estimateId:null}))},me=async ge=>{if(E(ge),ge===!0)try{const{getUserEstimates:Fe}=await fu(async()=>{const{getUserEstimates:Qe}=await Promise.resolve().then(()=>Kb);return{getUserEstimates:Qe}},void 0),Ke=await Fe();A(Ke)}catch(Fe){console.error("Error loading estimates:",Fe)}},Se=t.filter(ge=>{if(ie){const Fe=ie.toLowerCase(),Ke=(ge.title||ge.name||"").toLowerCase(),Qe=(ge.client||"").toLowerCase(),ze=(ge.location||"").toLowerCase(),de=(ge.notes||"").toLowerCase();if(!(Ke.includes(Fe)||Qe.includes(Fe)||ze.includes(Fe)||de.includes(Fe)))return!1}return V==="all"?!0:ge.status===V}),ke={all:t.length,scheduled:t.filter(ge=>ge.status==="scheduled").length,"in-progress":t.filter(ge=>ge.status==="in-progress").length,completed:t.filter(ge=>ge.status==="completed").length};return i?s.jsx("div",{style:{minHeight:"100vh",background:N.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("div",{style:{color:N.subtext},children:"Loading jobs..."})}):s.jsxs("div",{className:"jobs-container",children:[s.jsx(MB,{isOpen:I,onClose:()=>M(!1),isDarkMode:r}),s.jsxs("div",{style:{minHeight:"100vh",background:N.bg,paddingBottom:"5rem"},children:[s.jsx(VB,{viewingJob:h,formData:C,setFormData:w,linkedEstimate:$,estimates:L,showEstimateMenu:B,setShowEstimateMenu:me,onSelectEstimate:W,onCreateNewEstimate:J,onViewEstimate:re,onRemoveEstimate:he,estimateMenuRef:O,onClose:ne,onSave:oe,onDelete:ee,isDarkMode:r,colors:N}),s.jsxs("div",{style:{padding:"1rem 0.25rem"},children:[s.jsx(OB,{activeStatusTab:V,setActiveStatusTab:k,statusCounts:ke,statusConfig:D,colors:N}),s.jsxs("div",{style:{marginBottom:"1rem",position:"relative"},children:[s.jsx("input",{type:"text",placeholder:"Search jobs...",value:ie,onChange:ge=>ue(ge.target.value),style:{width:"100%",padding:"0.75rem",paddingLeft:"2.5rem",paddingRight:ie?"2.5rem":"0.75rem",border:`1px solid ${N.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:N.inputBg,color:N.text,boxSizing:"border-box"}}),s.jsx(fw,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:N.subtext,pointerEvents:"none"}}),ie&&s.jsx("button",{onClick:()=>ue(""),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:N.subtext,padding:"0.25rem",display:"flex",alignItems:"center"},children:s.jsx(e5,{size:18})})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0 0.25rem"},children:[s.jsx("h3",{style:{margin:0,color:N.text,fontSize:"1.125rem",fontWeight:"600"},children:V==="all"?"All Jobs":V==="scheduled"?"Scheduled Jobs":V==="in-progress"?"In Progress Jobs":"Completed Jobs"}),s.jsxs("span",{style:{fontSize:"0.875rem",color:N.subtext,background:N.cardBg,padding:"0.25rem 0.75rem",borderRadius:"1rem",border:`1px solid ${N.border}`},children:[Se.length," ",Se.length===1?"job":"jobs"]})]}),s.jsxs("div",{className:Gb.addJobContainer,style:{background:N.cardBg,border:`1px solid ${N.border}`},children:[s.jsxs("button",{onClick:()=>{if(!si.currentUser){M(!0);return}u(!l)},className:Gb.addJobButton,style:{color:N.text},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:[s.jsx(ma,{size:18}),"Add New Job"]}),s.jsx(gm,{size:18,style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),l&&s.jsx("div",{style:{padding:"0 1rem 1rem 1rem",borderTop:`1px solid ${N.border}`},children:s.jsxs("div",{style:{paddingTop:"1rem"},children:[s.jsx(V4,{formData:C,setFormData:w,linkedEstimate:$,estimates:L,showEstimateMenu:B,setShowEstimateMenu:me,onSelectEstimate:W,onCreateNewEstimate:J,onViewEstimate:re,onRemoveEstimate:he,estimateMenuRef:O,isDarkMode:r,colors:N}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsx("button",{onClick:se,disabled:!C.title||!C.client,style:{flex:1,padding:"0.75rem",background:!C.title||!C.client?N.border:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:!C.title||!C.client?"not-allowed":"pointer",opacity:!C.title||!C.client?.5:1},children:"Add Job"}),s.jsx("button",{onClick:ne,style:{flex:1,padding:"0.75rem",background:"transparent",color:N.text,border:`1px solid ${N.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})})]}),Se.length===0?s.jsxs("div",{style:{background:N.cardBg,border:`1px solid ${N.border}`,borderRadius:"0.75rem",textAlign:"center",padding:"3rem 1rem",color:N.subtext},children:[s.jsx(Lu,{size:48,style:{margin:"0 auto 1rem",opacity:.5}}),s.jsx("p",{style:{margin:0,fontSize:"0.9375rem"},children:ie?"No jobs match your search.":V==="all"?"No jobs yet. Add your first job above!":`No ${(Ce=D[V])==null?void 0:Ce.label.toLowerCase()} jobs.`})]}):[...Se].sort((ge,Fe)=>!ge.date&&!Fe.date?0:ge.date?Fe.date?new Date(Fe.date)-new Date(ge.date):-1:1).map(ge=>s.jsx(FB,{job:ge,statusConfig:D,statusDropdownOpen:S,setStatusDropdownOpen:x,onUpdateStatus:xe,onViewJob:we,onViewEstimate:Fe=>{Fe.estimateId&&e&&e({viewEstimateId:Fe.estimateId})},onViewInvoice:Fe=>{Fe.invoiceId&&console.log("View invoice:",Fe.invoiceId)},isDarkMode:r,colors:N},ge.id))]})]})]})},O4=async()=>{try{const r=si.currentUser;if(!r)throw new Error("No user logged in");const e=lh(ba,"estimates"),t=i2(e,nN("userId","==",r.uid)),n=await j4(t),i=[];return n.forEach(o=>{var l;i.push({id:o.id,...o.data(),createdAt:((l=o.data().createdAt)==null?void 0:l.toDate())||new Date})}),i}catch(r){throw console.error("Error getting estimates:",r),r}},M4=async r=>{try{const e=si.currentUser;if(!e)throw new Error("No user logged in");const t=lh(ba,"estimates");return(await l2(t,{...r,userId:e.uid,createdAt:Xd(),updatedAt:Xd()})).id}catch(e){throw console.error("Error creating estimate:",e),e}},D4=async(r,e)=>{try{if(!si.currentUser)throw new Error("No user logged in");const n=ch(ba,"estimates",r);await R4(n,{...e,updatedAt:Xd()})}catch(t){throw console.error("Error updating estimate:",t),t}},W4=async r=>{try{if(!si.currentUser)throw new Error("No user logged in");const t=ch(ba,"estimates",r);await P4(t)}catch(e){throw console.error("Error deleting estimate:",e),e}},Kb=Object.freeze(Object.defineProperty({__proto__:null,createEstimate:M4,deleteEstimate:W4,getUserEstimates:O4,updateEstimate:D4},Symbol.toStringTag,{value:"Module"})),WB=({isDarkMode:r,jobs:e=[],onApplyToJob:t,pendingEstimateData:n,onClearPendingData:i,navigationData:o})=>{const[l,u]=fe.useState([]),[h,d]=fe.useState(!0),[g,b]=fe.useState(!1),[S,x]=fe.useState(null),[B,E]=fe.useState(null),[L,A]=fe.useState({name:"",laborHours:"",laborRate:"",materials:[],jobId:null}),[O,$]=fe.useState({name:"",cost:""}),F={bg:r?"#000000":"#f9fafb",cardBg:r?"#1a1a1a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#999999":"#6b7280",border:r?"#2a2a2a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"};fe.useEffect(()=>{const q=Qm(si,ne=>{ne?ie():d(!1)});return()=>q()},[]),fe.useEffect(()=>{n&&(A({name:n.jobName||"",laborHours:"",laborRate:"",materials:[],jobId:n.jobId||null}),b(!0),i&&i())},[n,i]),fe.useEffect(()=>{if(o!=null&&o.viewEstimateId){const q=l.find(ne=>ne.id===o.viewEstimateId);q&&w(q)}},[o,l]);const ie=async()=>{d(!0);try{const q=await O4();u(q)}catch(q){console.error("Error loading estimates:",q),alert("Failed to load estimates. Please try again.")}finally{d(!1)}},ue=(q,ne,se)=>{const oe=(parseFloat(q)||0)*(parseFloat(ne)||0),xe=se.reduce((we,ee)=>we+(parseFloat(ee.cost)||0),0);return oe+xe},V=ue(L.laborHours,L.laborRate,L.materials),k=()=>{O.name&&O.cost&&(A(q=>({...q,materials:[...q.materials,{...O}]})),$({name:"",cost:""}))},I=q=>{A(ne=>({...ne,materials:ne.materials.filter((se,oe)=>oe!==q)}))},M=async()=>{if(L.name)try{const q=ue(L.laborHours,L.laborRate,L.materials),ne={name:L.name,laborHours:parseFloat(L.laborHours)||0,laborRate:parseFloat(L.laborRate)||0,materials:L.materials,total:q,jobId:L.jobId||null};S?await D4(S.id,ne):await M4(ne),C(),ie()}catch(q){console.error("Error saving estimate:",q),alert("Failed to save estimate. Please try again.")}},C=()=>{A({name:"",laborHours:"",laborRate:"",materials:[],jobId:null}),$({name:"",cost:""}),b(!1),x(null)},w=q=>{x(q),A({name:q.name,laborHours:q.laborHours.toString(),laborRate:q.laborRate.toString(),materials:[...q.materials],jobId:q.jobId||null}),b(!0),window.scrollTo({top:0,behavior:"smooth"})},N=async(q,ne)=>{if(window.confirm(`Delete "${ne}"?`))try{await W4(q),ie()}catch(se){console.error("Error deleting estimate:",se),alert("Failed to delete estimate. Please try again.")}},D=(q,ne)=>{t&&t(q,ne),E(null)};return h?s.jsx("div",{style:{minHeight:"100vh",background:F.bg,display:"flex",alignItems:"center",justifyContent:"center",paddingBottom:"5rem"},children:s.jsx("div",{style:{color:F.subtext},children:"Loading estimates..."})}):s.jsx("div",{style:{background:F.bg,minHeight:"100vh",paddingBottom:"5rem"},children:s.jsxs("div",{style:{padding:"1rem"},children:[s.jsxs("div",{style:{background:F.cardBg,borderRadius:"0.75rem",border:`1px solid ${F.border}`,boxShadow:"none",marginBottom:"1rem",overflow:"hidden"},children:[s.jsxs("button",{onClick:()=>b(!g),style:{width:"100%",padding:"1rem",background:"transparent",border:"none",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",color:F.text},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:[s.jsx(ma,{size:20}),S?"Edit Estimate":"New Estimate"]}),s.jsx(gm,{size:20,style:{transform:g?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),g&&s.jsx("div",{style:{padding:"0 1rem 1rem 1rem",borderTop:`1px solid ${F.border}`},children:s.jsxs("div",{style:{paddingTop:"1rem"},children:[s.jsx("input",{type:"text",placeholder:"Estimate Name *",value:L.name,onChange:q=>A(ne=>({...ne,name:q.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}}),s.jsx("h4",{style:{margin:"0 0 0.5rem 0",fontSize:"0.875rem",fontWeight:"600",color:F.text},children:"Labor"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[s.jsx("input",{type:"number",placeholder:"Hours",value:L.laborHours,onChange:q=>A(ne=>({...ne,laborHours:q.target.value})),style:{padding:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}}),s.jsx("input",{type:"number",placeholder:"Rate ($/hr)",value:L.laborRate,onChange:q=>A(ne=>({...ne,laborRate:q.target.value})),style:{padding:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}})]}),s.jsx("h4",{style:{margin:"1rem 0 0.5rem 0",fontSize:"0.875rem",fontWeight:"600",color:F.text},children:"Materials"}),L.materials.map((q,ne)=>s.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem",padding:"0.75rem",background:F.bg,borderRadius:"0.5rem"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:F.text},children:q.name}),s.jsxs("div",{style:{fontSize:"0.75rem",color:F.subtext},children:["$",parseFloat(q.cost).toFixed(2)]})]}),s.jsx("button",{onClick:()=>I(ne),style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",padding:"0.25rem"},children:s.jsx(Tc,{size:16})})]},ne)),s.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[s.jsx("input",{type:"text",placeholder:"Material name",value:O.name,onChange:q=>$(ne=>({...ne,name:q.target.value})),style:{flex:1,padding:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.875rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}}),s.jsx("input",{type:"number",placeholder:"Cost",value:O.cost,onChange:q=>$(ne=>({...ne,cost:q.target.value})),style:{width:"100px",padding:"0.75rem",border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.875rem",background:F.inputBg,color:F.text,boxSizing:"border-box"}}),s.jsx("button",{onClick:k,style:{padding:"0.75rem",background:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center"},children:s.jsx(ma,{size:16})})]}),s.jsx("div",{style:{padding:"0.75rem",background:F.bg,borderRadius:"0.5rem",marginBottom:"0.75rem"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.125rem",fontWeight:"600",color:F.text},children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{children:["$",V.toFixed(2)]})]})}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsxs("button",{onClick:M,disabled:!L.name,style:{flex:1,padding:"0.75rem",background:L.name?"#2563eb":F.border,color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:L.name?"pointer":"not-allowed",opacity:L.name?1:.5},children:[S?"Update":"Save"," Estimate"]}),s.jsx("button",{onClick:C,style:{flex:1,padding:"0.75rem",background:"transparent",color:F.text,border:`1px solid ${F.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0 0.25rem"},children:[s.jsx("h3",{style:{margin:0,color:F.text,fontSize:"1.125rem",fontWeight:"600"},children:"Saved Estimates"}),s.jsx("span",{style:{fontSize:"0.875rem",color:F.subtext,background:F.cardBg,padding:"0.25rem 0.75rem",borderRadius:"1rem",border:`1px solid ${F.border}`},children:l.length})]}),l.length===0?s.jsxs("div",{style:{background:F.cardBg,border:`1px solid ${F.border}`,borderRadius:"0.75rem",textAlign:"center",padding:"3rem 1rem",color:F.subtext},children:[s.jsx(Rf,{size:48,style:{margin:"0 auto 1rem",opacity:.5}}),s.jsx("p",{style:{margin:0,fontSize:"0.9375rem"},children:"No estimates yet. Create one above!"})]}):l.map(q=>{var ne;return s.jsxs("div",{style:{background:F.cardBg,border:`1px solid ${F.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"0.75rem",boxShadow:"none"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[s.jsxs("div",{children:[s.jsx("h3",{style:{margin:"0 0 0.25rem 0",color:F.text,fontSize:"1rem",fontWeight:"600"},children:q.name}),s.jsx("p",{style:{margin:0,color:F.subtext,fontSize:"0.75rem"},children:((ne=q.createdAt)==null?void 0:ne.toLocaleDateString())||"N/A"})]}),s.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10b981"},children:["$",q.total.toFixed(2)]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:F.subtext,fontSize:"0.875rem"},children:[s.jsx(qm,{size:16}),s.jsxs("span",{children:[q.laborHours,"h  $",q.laborRate,"/hr = $",(q.laborHours*q.laborRate).toFixed(2)]})]}),q.materials.length>0&&s.jsx("div",{style:{padding:"0.75rem",background:F.bg,borderRadius:"0.5rem",marginBottom:"0.75rem"},children:q.materials.map((se,oe)=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem",color:F.subtext,marginBottom:oe<q.materials.length-1?"0.25rem":0},children:[s.jsx("span",{children:se.name}),s.jsxs("span",{children:["$",parseFloat(se.cost).toFixed(2)]})]},oe))}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsxs("div",{style:{position:"relative",flex:1},children:[s.jsxs("button",{onClick:()=>E(B===q.id?null:q.id),style:{width:"100%",padding:"0.5rem",background:"#2563eb",border:"none",borderRadius:"0.5rem",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.875rem",fontWeight:"500"},children:[s.jsx(X1,{size:16}),"Add to Job",s.jsx(gm,{size:14})]}),B===q.id&&s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:()=>E(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998}}),s.jsxs("div",{style:{position:"absolute",bottom:"100%",left:0,right:0,marginBottom:"0.5rem",background:F.cardBg,border:`1px solid ${F.border}`,borderRadius:"0.5rem",boxShadow:r?"0 4px 12px rgba(0,0,0,0.6)":"0 4px 12px rgba(0,0,0,0.15)",maxHeight:"200px",overflowY:"auto",zIndex:9999},children:[s.jsx("button",{onClick:()=>D(q,"new"),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${F.border}`,color:"#2563eb",cursor:"pointer",textAlign:"left",fontSize:"0.875rem",fontWeight:"500"},children:"+ Create New Job"}),e.map(se=>s.jsx("button",{onClick:()=>D(q,se.id),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${F.border}`,color:F.text,cursor:"pointer",textAlign:"left",fontSize:"0.875rem"},children:se.title||se.name},se.id))]})]})]}),s.jsx("button",{onClick:()=>w(q),style:{padding:"0.5rem",background:"transparent",border:`1px solid ${F.border}`,borderRadius:"0.5rem",color:F.text,cursor:"pointer",display:"flex",alignItems:"center"},children:s.jsx(gw,{size:16})}),s.jsx("button",{onClick:()=>N(q.id,q.name),style:{padding:"0.5rem",background:"transparent",border:"1px solid #ef4444",borderRadius:"0.5rem",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center"},children:s.jsx(Tc,{size:16})})]})]},q.id)})]})})};function $B({isDarkMode:r=!1}){const[e,t]=fe.useState([{id:1,invoiceNumber:"INV-001",client:"ABC Construction",date:"2025-10-01",amount:2500,status:"Paid"},{id:2,invoiceNumber:"INV-002",client:"Smith Residence",date:"2025-10-10",amount:1200,status:"Pending"},{id:3,invoiceNumber:"INV-003",client:"Downtown Office Building",date:"2025-10-12",amount:4800,status:"Overdue"}]),n={bg:r?"#000000":"#f9fafb",cardBg:r?"#111111":"#ffffff",border:r?"#1a1a1a":"#e5e7eb",text:r?"#ffffff":"#111827",textSecondary:r?"#9ca3af":"#6b7280",buttonBg:"#3b82f6",buttonText:"#ffffff",paidBg:r?"#064e3b":"#d1fae5",paidText:r?"#6ee7b7":"#065f46",pendingBg:r?"#78350f":"#fef3c7",pendingText:r?"#fcd34d":"#92400e",overdueBg:r?"#7f1d1d":"#fee2e2",overdueText:r?"#fca5a5":"#991b1b"},i=o=>{switch(o){case"Paid":return{background:n.paidBg,color:n.paidText};case"Pending":return{background:n.pendingBg,color:n.pendingText};case"Overdue":return{background:n.overdueBg,color:n.overdueText};default:return{}}};return s.jsx("div",{style:{minHeight:"100vh",background:n.bg,paddingTop:"1rem"},children:s.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[s.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary,marginBottom:"0.25rem"},children:"Total"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:n.text},children:e.length})]}),s.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary,marginBottom:"0.25rem"},children:"Paid"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:n.paidText},children:e.filter(o=>o.status==="Paid").length})]}),s.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary,marginBottom:"0.25rem"},children:"Pending"}),s.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:n.pendingText},children:e.filter(o=>o.status==="Pending").length})]})]}),s.jsxs("button",{style:{width:"100%",background:n.buttonBg,color:n.buttonText,border:"none",borderRadius:"0.5rem",padding:"0.875rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[s.jsx(ma,{size:20}),s.jsx("span",{children:"Create New Invoice"})]}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.length===0?s.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"3rem 1rem",textAlign:"center"},children:[s.jsx(Rf,{size:48,color:n.textSecondary,style:{margin:"0 auto 1rem"}}),s.jsx("p",{style:{color:n.textSecondary,fontSize:"0.875rem",margin:0},children:"No invoices yet. Create your first invoice!"})]}):e.map(o=>s.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:l=>{l.currentTarget.style.transform="translateY(-2px)",l.currentTarget.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"},onMouseLeave:l=>{l.currentTarget.style.transform="translateY(0)",l.currentTarget.style.boxShadow="none"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:n.text,marginBottom:"0.25rem"},children:o.invoiceNumber}),s.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary},children:o.client})]}),s.jsx("div",{style:{...i(o.status),padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.75rem",fontWeight:"600"},children:o.status})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"0.75rem",borderTop:`1px solid ${n.border}`},children:[s.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary},children:new Date(o.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),s.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"600",color:n.text},children:["$",o.amount.toFixed(2)]})]})]},o.id))})]})})}function UB({headerInfo:r,isDarkMode:e,headerVisible:t,showMenu:n,setShowMenu:i,onNavigate:o,setIsDarkMode:l}){const u=r.icon,h={headerBorder:e?"#2a2a2a":"#e5e7eb",menuBg:e?"#1a1a1a":"white",cardBorder:e?"#2a2a2a":"#e5e7eb",cardText:e?"#ffffff":"#111827"};return s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,height:"env(safe-area-inset-top)",background:e?"#1a1a1a":"#2563eb",zIndex:101}}),s.jsxs("div",{style:{background:e?"#1a1a1a":"#2563eb",padding:"0.5rem 1rem",borderBottom:`1px solid ${h.headerBorder}`,position:"fixed",top:"env(safe-area-inset-top)",left:0,right:0,zIndex:100,display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:"48px",transform:t?"translateY(0)":"translateY(calc(-100% - env(safe-area-inset-top)))",transition:"transform 0.3s ease-in-out",paddingLeft:"max(1rem, env(safe-area-inset-left))",paddingRight:"max(1rem, env(safe-area-inset-right))"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx(u,{size:20,color:"white",strokeWidth:2}),s.jsx("h1",{style:{fontSize:"1rem",fontWeight:"600",color:"white",margin:0,letterSpacing:"-0.01em"},children:r.title})]}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("button",{onClick:()=>i(!n),style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"40px",minHeight:"40px",lineHeight:1},children:s.jsx(b6,{size:24,color:"white",style:{display:"block",flexShrink:0}})}),n&&s.jsxs(s.Fragment,{children:[s.jsx("div",{onClick:()=>i(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:998}}),s.jsx("div",{style:{position:"absolute",top:"2.5rem",right:0,zIndex:999,background:h.menuBg,border:`1px solid ${h.cardBorder}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",minWidth:"200px",overflow:"hidden"},children:s.jsxs("div",{style:{padding:"0.5rem 0"},children:[s.jsxs("button",{onClick:()=>{o("profile"),i(!1)},style:{width:"100%",padding:"0.75rem 1rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:h.cardText,fontSize:"0.875rem",fontWeight:"500"},onMouseEnter:d=>d.target.style.background=e?"#374151":"#f3f4f6",onMouseLeave:d=>d.target.style.background="transparent",children:[s.jsx(uf,{size:16}),s.jsx("span",{children:"Profile"})]}),s.jsx("div",{style:{height:"1px",background:h.cardBorder,margin:"0.5rem 0"}}),s.jsxs("button",{onClick:()=>{l(!e),i(!1)},style:{width:"100%",padding:"0.75rem 1rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",color:h.cardText,fontSize:"0.875rem",fontWeight:"500"},onMouseEnter:d=>d.target.style.background=e?"#374151":"#f3f4f6",onMouseLeave:d=>d.target.style.background="transparent",children:[s.jsx("span",{children:e?"Light Mode":"Dark Mode"}),s.jsx("span",{children:e?"":""})]})]})})]})]})]})]})}function qB(){const[r,e]=fe.useState(()=>localStorage.getItem("activeView")||null),[t,n]=fe.useState(()=>localStorage.getItem("isDarkMode")==="true"),[i,o]=fe.useState(!1),[l,u]=fe.useState(!1),[h,d]=fe.useState(null),[g,b]=fe.useState(null),[S,x]=fe.useState(!0),[B,E]=fe.useState(0);fe.useEffect(()=>{const V=k=>{k.state&&k.state.view!==void 0&&e(k.state.view)};return window.addEventListener("popstate",V),window.history.state||window.history.replaceState({view:r},""),()=>{window.removeEventListener("popstate",V)}},[]),fe.useEffect(()=>{window.history.state&&window.history.state.view!==r&&window.history.pushState({view:r},"")},[r]),fe.useEffect(()=>{r===null?localStorage.setItem("activeView",""):localStorage.setItem("activeView",r)},[r]),fe.useEffect(()=>{localStorage.setItem("isDarkMode",t)},[t]),fe.useEffect(()=>{const V=t?"#000000":"#f5f5f5",k=document.querySelector('meta[name="theme-color"]');k&&k.setAttribute("content",V),document.body.style.backgroundColor=V,document.documentElement.style.backgroundColor=V},[t]),fe.useEffect(()=>{const V=()=>{const I=document.querySelector('meta[name="theme-color"]');I&&I.setAttribute("content",t?"#1a1a1a":"#2563eb")};V();const k=()=>{document.visibilityState==="visible"&&V()};return document.addEventListener("visibilitychange",k),()=>{document.removeEventListener("visibilitychange",k)}},[t]),fe.useEffect(()=>{window.scrollTo(0,0)},[r]);const L=fe.useRef(null);fe.useEffect(()=>{const V=()=>{const k=window.scrollY;k<10?x(!0):k>B&&k>80?x(!1):k<B&&x(!0),E(k)};return window.addEventListener("scroll",V,{passive:!0}),()=>window.removeEventListener("scroll",V)},[B]),fe.useEffect(()=>{r!=="estimates"&&b(null)},[r]);const A=(V,k=null)=>{V==="home"?e(null):V==="calculators"?e("calculators"):V==="profile"?e("profile"):V==="jobs"?e("jobs"):V==="estimates"?(e("estimates"),k&&(k.viewEstimateId?b(k):d(k))):V==="invoices"&&e("invoices")},O=()=>{window.history.back()},$=(V,k)=>{k==="new"?(d(V),e("jobs")):(d({...V,jobId:k}),e("jobs"))},F=()=>{const V=()=>{u(!0),setTimeout(()=>u(!1),3e3)};switch(r){case"voltage-drop":return s.jsx(fN,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"ohms-law":return s.jsx(yN,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"box-fill":return s.jsx(SN,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"conduit-fill":return s.jsx(FN,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"ampacity":return s.jsx(YN,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"motor-calculations":return s.jsx(eB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"load-calculations":return s.jsx(nB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"transformer-sizing":return s.jsx(iB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"service-entrance":return s.jsx(oB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"grounding-bonding":return s.jsx(cB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"conduit-bending":return s.jsx(pB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"lighting":return s.jsx(xB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"receptacles":return s.jsx(SB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"vfd-sizing":return s.jsx(TB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"reactance-impedance":return s.jsx(AB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"power-factor":return s.jsx(CB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"power-triangle":return s.jsx(kB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"three-phase-power":return s.jsx(IB,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"pull-box":return s.jsx(IN,{ref:L,isDarkMode:t,onBack:O,onExportSuccess:V});case"calculators":return s.jsx(H6,{isDarkMode:t,onSelectCalculator:e});case"profile":return s.jsx(jB,{isDarkMode:t});case"jobs":return s.jsx(DB,{isDarkMode:t,onNavigateToEstimates:k=>A("estimates",k)});case"estimates":return s.jsx(WB,{isDarkMode:t,onApplyToJob:$,pendingEstimateData:h,onClearPendingData:()=>d(null),navigationData:g});case"invoices":return s.jsx($B,{isDarkMode:t});default:return s.jsx(EB,{isDarkMode:t})}},ue=r?r==="calculators"?{title:"Calculator Menu",icon:cf}:r==="profile"?{title:"Profile",icon:uf}:r==="jobs"?{title:"Job Log",icon:Lu}:r==="estimates"?{title:"Estimates",icon:Rf}:r==="invoices"?{title:"Invoices",icon:Z1}:{"voltage-drop":{title:"Voltage Drop",icon:vw},"ohms-law":{title:"Ohm's Law",icon:mw},"reactance-impedance":{title:"Reactance & Impedance",icon:cw},"power-factor":{title:"Power Factor Correction",icon:xw},"box-fill":{title:"Box Fill",icon:uw},"conduit-fill":{title:"Conduit Fill",icon:tw},ampacity:{title:"Ampacity",icon:Zb},"motor-calculations":{title:"Motors",icon:pw},"load-calculations":{title:"Load Calculations",icon:ew},"transformer-sizing":{title:"Transformers",icon:hw},"service-entrance":{title:"Service Entrance Sizing",icon:Xb},"grounding-bonding":{title:"Grounding & Bonding",icon:iw},"conduit-bending":{title:"Conduit Bending",icon:rw},lighting:{title:"Lighting",icon:sw},receptacles:{title:"Receptacles",icon:dw},"vfd-sizing":{title:"VFD Sizing",icon:nw},"power-triangle":{title:"Power Triangle",icon:bw},"three-phase-power":{title:"Three-Phase Power",icon:yw},"pull-box":{title:"Pull Box Sizing",icon:Qb}}[r]||{title:"Electrician's Toolkit",icon:cf}:{title:"Home",icon:ow};return s.jsxs("div",{className:"App",style:{background:t?"#000000":"#ffffff",overscrollBehavior:"none"},children:[s.jsx(UB,{headerInfo:ue,isDarkMode:t,headerVisible:S,showMenu:i,setShowMenu:o,onNavigate:A,setIsDarkMode:n}),s.jsx("div",{style:{paddingBottom:"calc(65px + env(safe-area-inset-bottom))",paddingTop:"calc(48px + env(safe-area-inset-top))",paddingLeft:r==="calculators"?"0":"env(safe-area-inset-left)",paddingRight:r==="calculators"?"0":"env(safe-area-inset-right)",position:"relative",minHeight:"100vh",boxSizing:"border-box"},children:r?s.jsx("div",{style:{minHeight:"calc(100vh - 3.5rem)",padding:r==="calculators"||r==="jobs"||r==="profile"||r==="estimates"||r==="invoices"?"0":"1rem",paddingBottom:"5rem"},children:F()}):F()}),l&&s.jsxs("div",{style:{position:"fixed",bottom:"6rem",left:"50%",transform:"translateX(-50%)",background:"#10b981",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",animation:"slideUp 0.3s ease-out",maxWidth:"90%",textAlign:"center"},children:[s.jsx("span",{style:{fontSize:"1.25rem"},children:""}),s.jsx("span",{children:"PDF saved to Downloads"})]}),s.jsx(_B,{onNavigate:A,currentView:r==="jobs"?"jobs":r==="estimates"?"estimates":r==="invoices"?"invoices":r==="profile"?"profile":r==="calculators"||r?"calculators":"home",isDarkMode:t})]})}const HB=NT.createRoot(document.getElementById("root"));HB.render(s.jsx(CT.StrictMode,{children:s.jsx(qB,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{if(window.location.hostname==="localhost"){console.log("Skipping service worker on localhost");return}navigator.serviceWorker.register("/electrician-toolkit/service-worker.js").then(r=>{console.log("ServiceWorker registration successful:",r.scope)}).catch(r=>{console.log("ServiceWorker registration failed:",r)})});export{Gr as _,KB as c,Jb as g};
