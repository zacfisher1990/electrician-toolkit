var W4=Object.defineProperty;var $4=(r,e,t)=>e in r?W4(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Gr=(r,e,t)=>$4(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();var tF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Tg={exports:{}},Oh={},Cg={exports:{}},fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ty;function q4(){if(Ty)return fr;Ty=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function _(ie){return ie===null||typeof ie!="object"?null:(ie=y&&ie[y]||ie["@@iterator"],typeof ie=="function"?ie:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,j={};function z(ie,$,Y){this.props=ie,this.context=$,this.refs=j,this.updater=Y||b}z.prototype.isReactComponent={},z.prototype.setState=function(ie,$){if(typeof ie!="object"&&typeof ie!="function"&&ie!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ie,$,"setState")},z.prototype.forceUpdate=function(ie){this.updater.enqueueForceUpdate(this,ie,"forceUpdate")};function T(){}T.prototype=z.prototype;function M(ie,$,Y){this.props=ie,this.context=$,this.refs=j,this.updater=Y||b}var F=M.prototype=new T;F.constructor=M,R(F,z.prototype),F.isPureReactComponent=!0;var B=Array.isArray,J=Object.prototype.hasOwnProperty,se={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function A(ie,$,Y){var ae,fe={},me=null,Se=null;if($!=null)for(ae in $.ref!==void 0&&(Se=$.ref),$.key!==void 0&&(me=""+$.key),$)J.call($,ae)&&!O.hasOwnProperty(ae)&&(fe[ae]=$[ae]);var ke=arguments.length-2;if(ke===1)fe.children=Y;else if(1<ke){for(var Ae=Array(ke),Fe=0;Fe<ke;Fe++)Ae[Fe]=arguments[Fe+2];fe.children=Ae}if(ie&&ie.defaultProps)for(ae in ke=ie.defaultProps,ke)fe[ae]===void 0&&(fe[ae]=ke[ae]);return{$$typeof:r,type:ie,key:me,ref:Se,props:fe,_owner:se.current}}function S(ie,$){return{$$typeof:r,type:ie.type,key:$,ref:ie.ref,props:ie.props,_owner:ie._owner}}function V(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===r}function I(ie){var $={"=":"=0",":":"=2"};return"$"+ie.replace(/[=:]/g,function(Y){return $[Y]})}var w=/\/+/g;function N(ie,$){return typeof ie=="object"&&ie!==null&&ie.key!=null?I(""+ie.key):$.toString(36)}function W(ie,$,Y,ae,fe){var me=typeof ie;(me==="undefined"||me==="boolean")&&(ie=null);var Se=!1;if(ie===null)Se=!0;else switch(me){case"string":case"number":Se=!0;break;case"object":switch(ie.$$typeof){case r:case e:Se=!0}}if(Se)return Se=ie,fe=fe(Se),ie=ae===""?"."+N(Se,0):ae,B(fe)?(Y="",ie!=null&&(Y=ie.replace(w,"$&/")+"/"),W(fe,$,Y,"",function(Fe){return Fe})):fe!=null&&(V(fe)&&(fe=S(fe,Y+(!fe.key||Se&&Se.key===fe.key?"":(""+fe.key).replace(w,"$&/")+"/")+ie)),$.push(fe)),1;if(Se=0,ae=ae===""?".":ae+":",B(ie))for(var ke=0;ke<ie.length;ke++){me=ie[ke];var Ae=ae+N(me,ke);Se+=W(me,$,Y,Ae,fe)}else if(Ae=_(ie),typeof Ae=="function")for(ie=Ae.call(ie),ke=0;!(me=ie.next()).done;)me=me.value,Ae=ae+N(me,ke++),Se+=W(me,$,Y,Ae,fe);else if(me==="object")throw $=String(ie),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(ie).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return Se}function q(ie,$,Y){if(ie==null)return ie;var ae=[],fe=0;return W(ie,ae,"","",function(me){return $.call(Y,me,fe++)}),ae}function re(ie){if(ie._status===-1){var $=ie._result;$=$(),$.then(function(Y){(ie._status===0||ie._status===-1)&&(ie._status=1,ie._result=Y)},function(Y){(ie._status===0||ie._status===-1)&&(ie._status=2,ie._result=Y)}),ie._status===-1&&(ie._status=0,ie._result=$)}if(ie._status===1)return ie._result.default;throw ie._result}var Z={current:null},te={transition:null},ye={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:te,ReactCurrentOwner:se};function we(){throw Error("act(...) is not supported in production builds of React.")}return fr.Children={map:q,forEach:function(ie,$,Y){q(ie,function(){$.apply(this,arguments)},Y)},count:function(ie){var $=0;return q(ie,function(){$++}),$},toArray:function(ie){return q(ie,function($){return $})||[]},only:function(ie){if(!V(ie))throw Error("React.Children.only expected to receive a single React element child.");return ie}},fr.Component=z,fr.Fragment=t,fr.Profiler=o,fr.PureComponent=M,fr.StrictMode=n,fr.Suspense=h,fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ye,fr.act=we,fr.cloneElement=function(ie,$,Y){if(ie==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ie+".");var ae=R({},ie.props),fe=ie.key,me=ie.ref,Se=ie._owner;if($!=null){if($.ref!==void 0&&(me=$.ref,Se=se.current),$.key!==void 0&&(fe=""+$.key),ie.type&&ie.type.defaultProps)var ke=ie.type.defaultProps;for(Ae in $)J.call($,Ae)&&!O.hasOwnProperty(Ae)&&(ae[Ae]=$[Ae]===void 0&&ke!==void 0?ke[Ae]:$[Ae])}var Ae=arguments.length-2;if(Ae===1)ae.children=Y;else if(1<Ae){ke=Array(Ae);for(var Fe=0;Fe<Ae;Fe++)ke[Fe]=arguments[Fe+2];ae.children=ke}return{$$typeof:r,type:ie.type,key:fe,ref:me,props:ae,_owner:Se}},fr.createContext=function(ie){return ie={$$typeof:l,_currentValue:ie,_currentValue2:ie,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ie.Provider={$$typeof:s,_context:ie},ie.Consumer=ie},fr.createElement=A,fr.createFactory=function(ie){var $=A.bind(null,ie);return $.type=ie,$},fr.createRef=function(){return{current:null}},fr.forwardRef=function(ie){return{$$typeof:d,render:ie}},fr.isValidElement=V,fr.lazy=function(ie){return{$$typeof:g,_payload:{_status:-1,_result:ie},_init:re}},fr.memo=function(ie,$){return{$$typeof:u,type:ie,compare:$===void 0?null:$}},fr.startTransition=function(ie){var $=te.transition;te.transition={};try{ie()}finally{te.transition=$}},fr.unstable_act=we,fr.useCallback=function(ie,$){return Z.current.useCallback(ie,$)},fr.useContext=function(ie){return Z.current.useContext(ie)},fr.useDebugValue=function(){},fr.useDeferredValue=function(ie){return Z.current.useDeferredValue(ie)},fr.useEffect=function(ie,$){return Z.current.useEffect(ie,$)},fr.useId=function(){return Z.current.useId()},fr.useImperativeHandle=function(ie,$,Y){return Z.current.useImperativeHandle(ie,$,Y)},fr.useInsertionEffect=function(ie,$){return Z.current.useInsertionEffect(ie,$)},fr.useLayoutEffect=function(ie,$){return Z.current.useLayoutEffect(ie,$)},fr.useMemo=function(ie,$){return Z.current.useMemo(ie,$)},fr.useReducer=function(ie,$,Y){return Z.current.useReducer(ie,$,Y)},fr.useRef=function(ie){return Z.current.useRef(ie)},fr.useState=function(ie){return Z.current.useState(ie)},fr.useSyncExternalStore=function(ie,$,Y){return Z.current.useSyncExternalStore(ie,$,Y)},fr.useTransition=function(){return Z.current.useTransition()},fr.version="18.3.1",fr}var Cy;function u5(){return Cy||(Cy=1,Cg.exports=q4()),Cg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay;function U4(){if(Ay)return Oh;Ay=1;var r=u5(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(d,h,u){var g,y={},_=null,b=null;u!==void 0&&(_=""+u),h.key!==void 0&&(_=""+h.key),h.ref!==void 0&&(b=h.ref);for(g in h)n.call(h,g)&&!s.hasOwnProperty(g)&&(y[g]=h[g]);if(d&&d.defaultProps)for(g in h=d.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:d,key:_,ref:b,props:y,_owner:o.current}}return Oh.Fragment=t,Oh.jsx=l,Oh.jsxs=l,Oh}var ky;function H4(){return ky||(ky=1,Tg.exports=U4()),Tg.exports}var i=H4(),ce=u5();const G4=dw(ce);var Bp={},Ag={exports:{}},Yo={},kg={exports:{}},jg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy;function K4(){return jy||(jy=1,(function(r){function e(te,ye){var we=te.length;te.push(ye);e:for(;0<we;){var ie=we-1>>>1,$=te[ie];if(0<o($,ye))te[ie]=ye,te[we]=$,we=ie;else break e}}function t(te){return te.length===0?null:te[0]}function n(te){if(te.length===0)return null;var ye=te[0],we=te.pop();if(we!==ye){te[0]=we;e:for(var ie=0,$=te.length,Y=$>>>1;ie<Y;){var ae=2*(ie+1)-1,fe=te[ae],me=ae+1,Se=te[me];if(0>o(fe,we))me<$&&0>o(Se,fe)?(te[ie]=Se,te[me]=we,ie=me):(te[ie]=fe,te[ae]=we,ie=ae);else if(me<$&&0>o(Se,we))te[ie]=Se,te[me]=we,ie=me;else break e}}return ye}function o(te,ye){var we=te.sortIndex-ye.sortIndex;return we!==0?we:te.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var l=Date,d=l.now();r.unstable_now=function(){return l.now()-d}}var h=[],u=[],g=1,y=null,_=3,b=!1,R=!1,j=!1,z=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(te){for(var ye=t(u);ye!==null;){if(ye.callback===null)n(u);else if(ye.startTime<=te)n(u),ye.sortIndex=ye.expirationTime,e(h,ye);else break;ye=t(u)}}function B(te){if(j=!1,F(te),!R)if(t(h)!==null)R=!0,re(J);else{var ye=t(u);ye!==null&&Z(B,ye.startTime-te)}}function J(te,ye){R=!1,j&&(j=!1,T(A),A=-1),b=!0;var we=_;try{for(F(ye),y=t(h);y!==null&&(!(y.expirationTime>ye)||te&&!I());){var ie=y.callback;if(typeof ie=="function"){y.callback=null,_=y.priorityLevel;var $=ie(y.expirationTime<=ye);ye=r.unstable_now(),typeof $=="function"?y.callback=$:y===t(h)&&n(h),F(ye)}else n(h);y=t(h)}if(y!==null)var Y=!0;else{var ae=t(u);ae!==null&&Z(B,ae.startTime-ye),Y=!1}return Y}finally{y=null,_=we,b=!1}}var se=!1,O=null,A=-1,S=5,V=-1;function I(){return!(r.unstable_now()-V<S)}function w(){if(O!==null){var te=r.unstable_now();V=te;var ye=!0;try{ye=O(!0,te)}finally{ye?N():(se=!1,O=null)}}else se=!1}var N;if(typeof M=="function")N=function(){M(w)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,q=W.port2;W.port1.onmessage=w,N=function(){q.postMessage(null)}}else N=function(){z(w,0)};function re(te){O=te,se||(se=!0,N())}function Z(te,ye){A=z(function(){te(r.unstable_now())},ye)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_continueExecution=function(){R||b||(R=!0,re(J))},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return _},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(te){switch(_){case 1:case 2:case 3:var ye=3;break;default:ye=_}var we=_;_=ye;try{return te()}finally{_=we}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(te,ye){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var we=_;_=te;try{return ye()}finally{_=we}},r.unstable_scheduleCallback=function(te,ye,we){var ie=r.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?ie+we:ie):we=ie,te){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=we+$,te={id:g++,callback:ye,priorityLevel:te,startTime:we,expirationTime:$,sortIndex:-1},we>ie?(te.sortIndex=we,e(u,te),t(h)===null&&te===t(u)&&(j?(T(A),A=-1):j=!0,Z(B,we-ie))):(te.sortIndex=$,e(h,te),R||b||(R=!0,re(J))),te},r.unstable_shouldYield=I,r.unstable_wrapCallback=function(te){var ye=_;return function(){var we=_;_=ye;try{return te.apply(this,arguments)}finally{_=we}}}})(jg)),jg}var Iy;function J4(){return Iy||(Iy=1,kg.exports=K4()),kg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ey;function Y4(){if(Ey)return Yo;Ey=1;var r=u5(),e=J4();function t(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,f=1;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,o={};function s(a,c){l(a,c),l(a+"Capture",c)}function l(a,c){for(o[a]=c,a=0;a<c.length;a++)n.add(c[a])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function _(a){return h.call(y,a)?!0:h.call(g,a)?!1:u.test(a)?y[a]=!0:(g[a]=!0,!1)}function b(a,c,f,x){if(f!==null&&f.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return x?!1:f!==null?!f.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function R(a,c,f,x){if(c===null||typeof c>"u"||b(a,c,f,x))return!0;if(x)return!1;if(f!==null)switch(f.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function j(a,c,f,x,k,L,K){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=x,this.attributeNamespace=k,this.mustUseProperty=f,this.propertyName=a,this.type=c,this.sanitizeURL=L,this.removeEmptyString=K}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){z[a]=new j(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];z[c]=new j(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){z[a]=new j(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){z[a]=new j(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){z[a]=new j(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){z[a]=new j(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){z[a]=new j(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){z[a]=new j(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){z[a]=new j(a,5,!1,a.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function M(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(T,M);z[c]=new j(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(T,M);z[c]=new j(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(T,M);z[c]=new j(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){z[a]=new j(a,1,!1,a.toLowerCase(),null,!1,!1)}),z.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){z[a]=new j(a,1,!1,a.toLowerCase(),null,!0,!0)});function F(a,c,f,x){var k=z.hasOwnProperty(c)?z[c]:null;(k!==null?k.type!==0:x||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(R(c,f,k,x)&&(f=null),x||k===null?_(c)&&(f===null?a.removeAttribute(c):a.setAttribute(c,""+f)):k.mustUseProperty?a[k.propertyName]=f===null?k.type===3?!1:"":f:(c=k.attributeName,x=k.attributeNamespace,f===null?a.removeAttribute(c):(k=k.type,f=k===3||k===4&&f===!0?"":""+f,x?a.setAttributeNS(x,c,f):a.setAttribute(c,f))))}var B=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J=Symbol.for("react.element"),se=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),I=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),te=Symbol.iterator;function ye(a){return a===null||typeof a!="object"?null:(a=te&&a[te]||a["@@iterator"],typeof a=="function"?a:null)}var we=Object.assign,ie;function $(a){if(ie===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);ie=c&&c[1]||""}return`
`+ie+a}var Y=!1;function ae(a,c){if(!a||Y)return"";Y=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ze){var x=ze}Reflect.construct(a,[],c)}else{try{c.call()}catch(ze){x=ze}a.call(c.prototype)}else{try{throw Error()}catch(ze){x=ze}a()}}catch(ze){if(ze&&x&&typeof ze.stack=="string"){for(var k=ze.stack.split(`
`),L=x.stack.split(`
`),K=k.length-1,pe=L.length-1;1<=K&&0<=pe&&k[K]!==L[pe];)pe--;for(;1<=K&&0<=pe;K--,pe--)if(k[K]!==L[pe]){if(K!==1||pe!==1)do if(K--,pe--,0>pe||k[K]!==L[pe]){var ve=`
`+k[K].replace(" at new "," at ");return a.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",a.displayName)),ve}while(1<=K&&0<=pe);break}}}finally{Y=!1,Error.prepareStackTrace=f}return(a=a?a.displayName||a.name:"")?$(a):""}function fe(a){switch(a.tag){case 5:return $(a.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return a=ae(a.type,!1),a;case 11:return a=ae(a.type.render,!1),a;case 1:return a=ae(a.type,!0),a;default:return""}}function me(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case O:return"Fragment";case se:return"Portal";case S:return"Profiler";case A:return"StrictMode";case N:return"Suspense";case W:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case I:return(a.displayName||"Context")+".Consumer";case V:return(a._context.displayName||"Context")+".Provider";case w:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case q:return c=a.displayName||null,c!==null?c:me(a.type)||"Memo";case re:c=a._payload,a=a._init;try{return me(a(c))}catch{}}return null}function Se(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(c);case 8:return c===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function ke(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ae(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Fe(a){var c=Ae(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),x=""+a[c];if(!a.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var k=f.get,L=f.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return k.call(this)},set:function(K){x=""+K,L.call(this,K)}}),Object.defineProperty(a,c,{enumerable:f.enumerable}),{getValue:function(){return x},setValue:function(K){x=""+K},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function He(a){a._valueTracker||(a._valueTracker=Fe(a))}function Ze(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var f=c.getValue(),x="";return a&&(x=Ae(a)?a.checked?"true":"false":a.value),a=x,a!==f?(c.setValue(a),!0):!1}function Xe(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function ge(a,c){var f=c.checked;return we({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??a._wrapperState.initialChecked})}function le(a,c){var f=c.defaultValue==null?"":c.defaultValue,x=c.checked!=null?c.checked:c.defaultChecked;f=ke(c.value!=null?c.value:f),a._wrapperState={initialChecked:x,initialValue:f,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function at(a,c){c=c.checked,c!=null&&F(a,"checked",c,!1)}function dt(a,c){at(a,c);var f=ke(c.value),x=c.type;if(f!=null)x==="number"?(f===0&&a.value===""||a.value!=f)&&(a.value=""+f):a.value!==""+f&&(a.value=""+f);else if(x==="submit"||x==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?$e(a,c.type,f):c.hasOwnProperty("defaultValue")&&$e(a,c.type,ke(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function lt(a,c,f){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var x=c.type;if(!(x!=="submit"&&x!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,f||c===a.value||(a.value=c),a.defaultValue=c}f=a.name,f!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,f!==""&&(a.name=f)}function $e(a,c,f){(c!=="number"||Xe(a.ownerDocument)!==a)&&(f==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+f&&(a.defaultValue=""+f))}var nt=Array.isArray;function tt(a,c,f,x){if(a=a.options,c){c={};for(var k=0;k<f.length;k++)c["$"+f[k]]=!0;for(f=0;f<a.length;f++)k=c.hasOwnProperty("$"+a[f].value),a[f].selected!==k&&(a[f].selected=k),k&&x&&(a[f].defaultSelected=!0)}else{for(f=""+ke(f),c=null,k=0;k<a.length;k++){if(a[k].value===f){a[k].selected=!0,x&&(a[k].defaultSelected=!0);return}c!==null||a[k].disabled||(c=a[k])}c!==null&&(c.selected=!0)}}function Jt(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return we({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function At(a,c){var f=c.value;if(f==null){if(f=c.children,c=c.defaultValue,f!=null){if(c!=null)throw Error(t(92));if(nt(f)){if(1<f.length)throw Error(t(93));f=f[0]}c=f}c==null&&(c=""),f=c}a._wrapperState={initialValue:ke(f)}}function mr(a,c){var f=ke(c.value),x=ke(c.defaultValue);f!=null&&(f=""+f,f!==a.value&&(a.value=f),c.defaultValue==null&&a.defaultValue!==f&&(a.defaultValue=f)),x!=null&&(a.defaultValue=""+x)}function zt(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function Ut(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function br(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?Ut(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Mt,kt=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,f,x,k){MSApp.execUnsafeLocalFunction(function(){return a(c,f,x,k)})}:a})(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(Mt=Mt||document.createElement("div"),Mt.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Mt.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function Pt(a,c){if(c){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=c;return}}a.textContent=c}var xt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jr=["Webkit","ms","Moz","O"];Object.keys(xt).forEach(function(a){jr.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),xt[c]=xt[a]})});function ir(a,c,f){return c==null||typeof c=="boolean"||c===""?"":f||typeof c!="number"||c===0||xt.hasOwnProperty(a)&&xt[a]?(""+c).trim():c+"px"}function mt(a,c){a=a.style;for(var f in c)if(c.hasOwnProperty(f)){var x=f.indexOf("--")===0,k=ir(f,c[f],x);f==="float"&&(f="cssFloat"),x?a.setProperty(f,k):a[f]=k}}var Ht=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sr(a,c){if(c){if(Ht[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function Rt(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tr=null;function $t(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ir=null,Vr=null,qt=null;function Dt(a){if(a=rc(a)){if(typeof Ir!="function")throw Error(t(280));var c=a.stateNode;c&&(c=ed(c),Ir(a.stateNode,a.type,c))}}function ar(a){Vr?qt?qt.push(a):qt=[a]:Vr=a}function Ki(){if(Vr){var a=Vr,c=qt;if(qt=Vr=null,Dt(a),c)for(a=0;a<c.length;a++)Dt(c[a])}}function zn(a,c){return a(c)}function Bo(){}var Vn=!1;function Nt(a,c,f){if(Vn)return a(c,f);Vn=!0;try{return zn(a,c,f)}finally{Vn=!1,(Vr!==null||qt!==null)&&(Bo(),Ki())}}function Bi(a,c){var f=a.stateNode;if(f===null)return null;var x=ed(f);if(x===null)return null;f=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(a=a.type,x=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!x;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(t(231,c,typeof f));return f}var mi=!1;if(d)try{var On={};Object.defineProperty(On,"passive",{get:function(){mi=!0}}),window.addEventListener("test",On,On),window.removeEventListener("test",On,On)}catch{mi=!1}function Li(a,c,f,x,k,L,K,pe,ve){var ze=Array.prototype.slice.call(arguments,3);try{c.apply(f,ze)}catch(Je){this.onError(Je)}}var Ar=!1,Or=null,un=!1,Xn=null,Zo={onError:function(a){Ar=!0,Or=a}};function Ji(a,c,f,x,k,L,K,pe,ve){Ar=!1,Or=null,Li.apply(Zo,arguments)}function Yi(a,c,f,x,k,L,K,pe,ve){if(Ji.apply(this,arguments),Ar){if(Ar){var ze=Or;Ar=!1,Or=null}else throw Error(t(198));un||(un=!0,Xn=ze)}}function wn(a){var c=a,f=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(f=c.return),a=c.return;while(a)}return c.tag===3?f:null}function Fi(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function zi(a){if(wn(a)!==a)throw Error(t(188))}function ws(a){var c=a.alternate;if(!c){if(c=wn(a),c===null)throw Error(t(188));return c!==a?null:a}for(var f=a,x=c;;){var k=f.return;if(k===null)break;var L=k.alternate;if(L===null){if(x=k.return,x!==null){f=x;continue}break}if(k.child===L.child){for(L=k.child;L;){if(L===f)return zi(k),a;if(L===x)return zi(k),c;L=L.sibling}throw Error(t(188))}if(f.return!==x.return)f=k,x=L;else{for(var K=!1,pe=k.child;pe;){if(pe===f){K=!0,f=k,x=L;break}if(pe===x){K=!0,x=k,f=L;break}pe=pe.sibling}if(!K){for(pe=L.child;pe;){if(pe===f){K=!0,f=L,x=k;break}if(pe===x){K=!0,x=L,f=k;break}pe=pe.sibling}if(!K)throw Error(t(189))}}if(f.alternate!==x)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?a:c}function yo(a){return a=ws(a),a!==null?bo(a):null}function bo(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=bo(a);if(c!==null)return c;a=a.sibling}return null}var Ss=e.unstable_scheduleCallback,es=e.unstable_cancelCallback,Lo=e.unstable_shouldYield,ts=e.unstable_requestPaint,Er=e.unstable_now,ql=e.unstable_getCurrentPriorityLevel,Ks=e.unstable_ImmediatePriority,gi=e.unstable_UserBlockingPriority,rs=e.unstable_NormalPriority,_a=e.unstable_LowPriority,_s=e.unstable_IdlePriority,Ts=null,xi=null;function rl(a){if(xi&&typeof xi.onCommitFiberRoot=="function")try{xi.onCommitFiberRoot(Ts,a,void 0,(a.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:Cs,Fo=Math.log,wr=Math.LN2;function Cs(a){return a>>>=0,a===0?32:31-(Fo(a)/wr|0)|0}var vo=64,yi=4194304;function lr(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Mn(a,c){var f=a.pendingLanes;if(f===0)return 0;var x=0,k=a.suspendedLanes,L=a.pingedLanes,K=f&268435455;if(K!==0){var pe=K&~k;pe!==0?x=lr(pe):(L&=K,L!==0&&(x=lr(L)))}else K=f&~k,K!==0?x=lr(K):L!==0&&(x=lr(L));if(x===0)return 0;if(c!==0&&c!==x&&(c&k)===0&&(k=x&-x,L=c&-c,k>=L||k===16&&(L&4194240)!==0))return c;if((x&4)!==0&&(x|=f&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=x;0<c;)f=31-Zn(c),k=1<<f,x|=a[f],c&=~k;return x}function wo(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mr(a,c){for(var f=a.suspendedLanes,x=a.pingedLanes,k=a.expirationTimes,L=a.pendingLanes;0<L;){var K=31-Zn(L),pe=1<<K,ve=k[K];ve===-1?((pe&f)===0||(pe&x)!==0)&&(k[K]=wo(pe,c)):ve<=c&&(a.expiredLanes|=pe),L&=~pe}}function Js(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function nl(){var a=vo;return vo<<=1,(vo&4194240)===0&&(vo=64),a}function il(a){for(var c=[],f=0;31>f;f++)c.push(a);return c}function Ys(a,c,f){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-Zn(c),a[c]=f}function zo(a,c){var f=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var x=a.eventTimes;for(a=a.expirationTimes;0<f;){var k=31-Zn(f),L=1<<k;c[k]=0,x[k]=-1,a[k]=-1,f&=~L}}function Ta(a,c){var f=a.entangledLanes|=c;for(a=a.entanglements;f;){var x=31-Zn(f),k=1<<x;k&c|a[x]&c&&(a[x]|=c),f&=~k}}var or=0;function li(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Qs,Ca,ol,sl,Xs,bi=!1,So=[],Vo=null,vi=null,Sn=null,Lt=new Map,ns=new Map,Vi=[],Ul="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function As(a,c){switch(a){case"focusin":case"focusout":Vo=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":Sn=null;break;case"pointerover":case"pointerout":Lt.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":ns.delete(c.pointerId)}}function Dn(a,c,f,x,k,L){return a===null||a.nativeEvent!==L?(a={blockedOn:c,domEventName:f,eventSystemFlags:x,nativeEvent:L,targetContainers:[k]},c!==null&&(c=rc(c),c!==null&&Ca(c)),a):(a.eventSystemFlags|=x,c=a.targetContainers,k!==null&&c.indexOf(k)===-1&&c.push(k),a)}function Oo(a,c,f,x,k){switch(c){case"focusin":return Vo=Dn(Vo,a,c,f,x,k),!0;case"dragenter":return vi=Dn(vi,a,c,f,x,k),!0;case"mouseover":return Sn=Dn(Sn,a,c,f,x,k),!0;case"pointerover":var L=k.pointerId;return Lt.set(L,Dn(Lt.get(L)||null,a,c,f,x,k)),!0;case"gotpointercapture":return L=k.pointerId,ns.set(L,Dn(ns.get(L)||null,a,c,f,x,k)),!0}return!1}function Aa(a){var c=La(a.target);if(c!==null){var f=wn(c);if(f!==null){if(c=f.tag,c===13){if(c=Fi(f),c!==null){a.blockedOn=c,Xs(a.priority,function(){ol(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Rr(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var f=ks(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(f===null){f=a.nativeEvent;var x=new f.constructor(f.type,f);tr=x,f.target.dispatchEvent(x),tr=null}else return c=rc(f),c!==null&&Ca(c),a.blockedOn=f,!1;c.shift()}return!0}function Zs(a,c,f){Rr(a)&&f.delete(c)}function al(){bi=!1,Vo!==null&&Rr(Vo)&&(Vo=null),vi!==null&&Rr(vi)&&(vi=null),Sn!==null&&Rr(Sn)&&(Sn=null),Lt.forEach(Zs),ns.forEach(Zs)}function Qi(a,c){a.blockedOn===c&&(a.blockedOn=null,bi||(bi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,al)))}function _o(a){function c(k){return Qi(k,a)}if(0<So.length){Qi(So[0],a);for(var f=1;f<So.length;f++){var x=So[f];x.blockedOn===a&&(x.blockedOn=null)}}for(Vo!==null&&Qi(Vo,a),vi!==null&&Qi(vi,a),Sn!==null&&Qi(Sn,a),Lt.forEach(c),ns.forEach(c),f=0;f<Vi.length;f++)x=Vi[f],x.blockedOn===a&&(x.blockedOn=null);for(;0<Vi.length&&(f=Vi[0],f.blockedOn===null);)Aa(f),f.blockedOn===null&&Vi.shift()}var Xi=B.ReactCurrentBatchConfig,is=!0;function Zi(a,c,f,x){var k=or,L=Xi.transition;Xi.transition=null;try{or=1,os(a,c,f,x)}finally{or=k,Xi.transition=L}}function ka(a,c,f,x){var k=or,L=Xi.transition;Xi.transition=null;try{or=4,os(a,c,f,x)}finally{or=k,Xi.transition=L}}function os(a,c,f,x){if(is){var k=ks(a,c,f,x);if(k===null)Qc(a,c,x,wi,f),As(a,x);else if(Oo(k,a,c,f,x))x.stopPropagation();else if(As(a,x),c&4&&-1<Ul.indexOf(a)){for(;k!==null;){var L=rc(k);if(L!==null&&Qs(L),L=ks(a,c,f,x),L===null&&Qc(a,c,x,wi,f),L===k)break;k=L}k!==null&&x.stopPropagation()}else Qc(a,c,x,null,f)}}var wi=null;function ks(a,c,f,x){if(wi=null,a=$t(x),a=La(a),a!==null)if(c=wn(a),c===null)a=null;else if(f=c.tag,f===13){if(a=Fi(c),a!==null)return a;a=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return wi=a,null}function ss(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ql()){case Ks:return 1;case gi:return 4;case rs:case _a:return 16;case _s:return 536870912;default:return 16}default:return 16}}var ci=null,Mo=null,Do=null;function ll(){if(Do)return Do;var a,c=Mo,f=c.length,x,k="value"in ci?ci.value:ci.textContent,L=k.length;for(a=0;a<f&&c[a]===k[a];a++);var K=f-a;for(x=1;x<=K&&c[f-x]===k[L-x];x++);return Do=k.slice(a,1<x?1-x:void 0)}function Oi(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function ei(){return!0}function ja(){return!1}function Wn(a){function c(f,x,k,L,K){this._reactName=f,this._targetInst=k,this.type=x,this.nativeEvent=L,this.target=K,this.currentTarget=null;for(var pe in a)a.hasOwnProperty(pe)&&(f=a[pe],this[pe]=f?f(L):L[pe]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?ei:ja,this.isPropagationStopped=ja,this}return we(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=ei)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=ei)},persist:function(){},isPersistent:ei}),c}var Si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},js=Wn(Si),C=we({},Si,{view:0,detail:0}),H=Wn(C),he,xe,Ce,De=we({},C,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wt,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ce&&(Ce&&a.type==="mousemove"?(he=a.screenX-Ce.screenX,xe=a.screenY-Ce.screenY):xe=he=0,Ce=a),he)},movementY:function(a){return"movementY"in a?a.movementY:xe}}),Ge=Wn(De),ut=we({},De,{dataTransfer:0}),yt=Wn(ut),Ft=we({},C,{relatedTarget:0}),St=Wn(Ft),gr=we({},Si,{animationName:0,elapsedTime:0,pseudoElement:0}),Zr=Wn(gr),Dr=we({},Si,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),m=Wn(Dr),P=we({},Si,{data:0}),U=Wn(P),ne={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},je={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Be={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rt(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=Be[a])?!!c[a]:!1}function Wt(){return rt}var Wr=we({},C,{key:function(a){if(a.key){var c=ne[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Oi(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?je[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wt,charCode:function(a){return a.type==="keypress"?Oi(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Oi(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),ur=Wn(Wr),en=we({},De,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$n=Wn(en),Mi=we({},C,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wt}),rn=Wn(Mi),_i=we({},Si,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wo=Wn(_i),ea=we({},De,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),qc=Wn(ea),hn=[9,13,27,32],as=d&&"CompositionEvent"in window,Is=null;d&&"documentMode"in document&&(Is=document.documentMode);var Kd=d&&"TextEvent"in window&&!Is,To=d&&(!as||Is&&8<Is&&11>=Is),Ia=" ",Hl=!1;function Gl(a,c){switch(a){case"keyup":return hn.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ta(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var $o=!1;function Co(a,c){switch(a){case"compositionend":return ta(c);case"keypress":return c.which!==32?null:(Hl=!0,Ia);case"textInput":return a=c.data,a===Ia&&Hl?null:a;default:return null}}function Ao(a,c){if($o)return a==="compositionend"||!as&&Gl(a,c)?(a=ll(),Do=Mo=ci=null,$o=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return To&&c.locale!=="ko"?null:c.data;default:return null}}var Ea={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Es(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!Ea[a.type]:c==="textarea"}function ra(a,c,f,x){ar(x),c=Zd(c,"onChange"),0<c.length&&(f=new js("onChange","change",null,f,x),a.push({event:f,listeners:c}))}var na=null,Rs=null;function _n(a){Jc(a,0)}function cl(a){var c=bl(a);if(Ze(c))return a}function Ps(a,c){if(a==="change")return c}var ls=!1;if(d){var dl;if(d){var ul="oninput"in document;if(!ul){var Kl=document.createElement("div");Kl.setAttribute("oninput","return;"),ul=typeof Kl.oninput=="function"}dl=ul}else dl=!1;ls=dl&&(!document.documentMode||9<document.documentMode)}function Jl(){na&&(na.detachEvent("onpropertychange",ia),Rs=na=null)}function ia(a){if(a.propertyName==="value"&&cl(Rs)){var c=[];ra(c,Rs,a,$t(a)),Nt(_n,c)}}function Ra(a,c,f){a==="focusin"?(Jl(),na=c,Rs=f,na.attachEvent("onpropertychange",ia)):a==="focusout"&&Jl()}function Pa(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return cl(Rs)}function hl(a,c){if(a==="click")return cl(c)}function Na(a,c){if(a==="input"||a==="change")return cl(c)}function fl(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var fn=typeof Object.is=="function"?Object.is:fl;function eo(a,c){if(fn(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var f=Object.keys(a),x=Object.keys(c);if(f.length!==x.length)return!1;for(x=0;x<f.length;x++){var k=f[x];if(!h.call(c,k)||!fn(a[k],c[k]))return!1}return!0}function Sr(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Lr(a,c){var f=Sr(a);a=0;for(var x;f;){if(f.nodeType===3){if(x=a+f.textContent.length,a<=c&&x>=c)return{node:f,offset:c-a};a=x}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Sr(f)}}function pn(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?pn(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function En(){for(var a=window,c=Xe();c instanceof a.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)a=c.contentWindow;else break;c=Xe(a.document)}return c}function cs(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function Uc(a){var c=En(),f=a.focusedElem,x=a.selectionRange;if(c!==f&&f&&f.ownerDocument&&pn(f.ownerDocument.documentElement,f)){if(x!==null&&cs(f)){if(c=x.start,a=x.end,a===void 0&&(a=c),"selectionStart"in f)f.selectionStart=c,f.selectionEnd=Math.min(a,f.value.length);else if(a=(c=f.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var k=f.textContent.length,L=Math.min(x.start,k);x=x.end===void 0?L:Math.min(x.end,k),!a.extend&&L>x&&(k=x,x=L,L=k),k=Lr(f,L);var K=Lr(f,x);k&&K&&(a.rangeCount!==1||a.anchorNode!==k.node||a.anchorOffset!==k.offset||a.focusNode!==K.node||a.focusOffset!==K.offset)&&(c=c.createRange(),c.setStart(k.node,k.offset),a.removeAllRanges(),L>x?(a.addRange(c),a.extend(K.node,K.offset)):(c.setEnd(K.node,K.offset),a.addRange(c)))}}for(c=[],a=f;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<c.length;f++)a=c[f],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Yl=d&&"documentMode"in document&&11>=document.documentMode,oa=null,Jd=null,Ql=null,Yd=!1;function mh(a,c,f){var x=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Yd||oa==null||oa!==Xe(x)||(x=oa,"selectionStart"in x&&cs(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Ql&&eo(Ql,x)||(Ql=x,x=Zd(Jd,"onSelect"),0<x.length&&(c=new js("onSelect","select",null,c,f),a.push({event:c,listeners:x}),c.target=oa)))}function Hc(a,c){var f={};return f[a.toLowerCase()]=c.toLowerCase(),f["Webkit"+a]="webkit"+c,f["Moz"+a]="moz"+c,f}var pl={animationend:Hc("Animation","AnimationEnd"),animationiteration:Hc("Animation","AnimationIteration"),animationstart:Hc("Animation","AnimationStart"),transitionend:Hc("Transition","TransitionEnd")},ml={},gh={};d&&(gh=document.createElement("div").style,"AnimationEvent"in window||(delete pl.animationend.animation,delete pl.animationiteration.animation,delete pl.animationstart.animation),"TransitionEvent"in window||delete pl.transitionend.transition);function Gc(a){if(ml[a])return ml[a];if(!pl[a])return a;var c=pl[a],f;for(f in c)if(c.hasOwnProperty(f)&&f in gh)return ml[a]=c[f];return a}var xh=Gc("animationend"),yh=Gc("animationiteration"),bh=Gc("animationstart"),vh=Gc("transitionend"),wh=new Map,Sh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ns(a,c){wh.set(a,c),s(c,[a])}for(var Xl=0;Xl<Sh.length;Xl++){var Di=Sh[Xl],qo=Di.toLowerCase(),Qd=Di[0].toUpperCase()+Di.slice(1);Ns(qo,"on"+Qd)}Ns(xh,"onAnimationEnd"),Ns(yh,"onAnimationIteration"),Ns(bh,"onAnimationStart"),Ns("dblclick","onDoubleClick"),Ns("focusin","onFocus"),Ns("focusout","onBlur"),Ns(vh,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ep=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ba));function Kc(a,c,f){var x=a.type||"unknown-event";a.currentTarget=f,Yi(x,c,void 0,a),a.currentTarget=null}function Jc(a,c){c=(c&4)!==0;for(var f=0;f<a.length;f++){var x=a[f],k=x.event;x=x.listeners;e:{var L=void 0;if(c)for(var K=x.length-1;0<=K;K--){var pe=x[K],ve=pe.instance,ze=pe.currentTarget;if(pe=pe.listener,ve!==L&&k.isPropagationStopped())break e;Kc(k,pe,ze),L=ve}else for(K=0;K<x.length;K++){if(pe=x[K],ve=pe.instance,ze=pe.currentTarget,pe=pe.listener,ve!==L&&k.isPropagationStopped())break e;Kc(k,pe,ze),L=ve}}}if(un)throw a=Xn,un=!1,Xn=null,a}function $r(a,c){var f=c[ro];f===void 0&&(f=c[ro]=new Set);var x=a+"__bubble";f.has(x)||(Yc(c,a,2,!1),f.add(x))}function Xd(a,c,f){var x=0;c&&(x|=4),Yc(f,a,x,c)}var Zl="_reactListening"+Math.random().toString(36).slice(2);function gl(a){if(!a[Zl]){a[Zl]=!0,n.forEach(function(f){f!=="selectionchange"&&(ep.has(f)||Xd(f,!1,a),Xd(f,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[Zl]||(c[Zl]=!0,Xd("selectionchange",!1,c))}}function Yc(a,c,f,x){switch(ss(c)){case 1:var k=Zi;break;case 4:k=ka;break;default:k=os}f=k.bind(null,c,f,a),k=void 0,!mi||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(k=!0),x?k!==void 0?a.addEventListener(c,f,{capture:!0,passive:k}):a.addEventListener(c,f,!0):k!==void 0?a.addEventListener(c,f,{passive:k}):a.addEventListener(c,f,!1)}function Qc(a,c,f,x,k){var L=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var K=x.tag;if(K===3||K===4){var pe=x.stateNode.containerInfo;if(pe===k||pe.nodeType===8&&pe.parentNode===k)break;if(K===4)for(K=x.return;K!==null;){var ve=K.tag;if((ve===3||ve===4)&&(ve=K.stateNode.containerInfo,ve===k||ve.nodeType===8&&ve.parentNode===k))return;K=K.return}for(;pe!==null;){if(K=La(pe),K===null)return;if(ve=K.tag,ve===5||ve===6){x=L=K;continue e}pe=pe.parentNode}}x=x.return}Nt(function(){var ze=L,Je=$t(f),Ye=[];e:{var Ke=wh.get(a);if(Ke!==void 0){var ct=js,bt=a;switch(a){case"keypress":if(Oi(f)===0)break e;case"keydown":case"keyup":ct=ur;break;case"focusin":bt="focus",ct=St;break;case"focusout":bt="blur",ct=St;break;case"beforeblur":case"afterblur":ct=St;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ct=Ge;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ct=yt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ct=rn;break;case xh:case yh:case bh:ct=Zr;break;case vh:ct=Wo;break;case"scroll":ct=H;break;case"wheel":ct=qc;break;case"copy":case"cut":case"paste":ct=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ct=$n}var _t=(c&4)!==0,Hn=!_t&&a==="scroll",Pe=_t?Ke!==null?Ke+"Capture":null:Ke;_t=[];for(var Te=ze,Le;Te!==null;){Le=Te;var et=Le.stateNode;if(Le.tag===5&&et!==null&&(Le=et,Pe!==null&&(et=Bi(Te,Pe),et!=null&&_t.push(Xc(Te,et,Le)))),Hn)break;Te=Te.return}0<_t.length&&(Ke=new ct(Ke,bt,null,f,Je),Ye.push({event:Ke,listeners:_t}))}}if((c&7)===0){e:{if(Ke=a==="mouseover"||a==="pointerover",ct=a==="mouseout"||a==="pointerout",Ke&&f!==tr&&(bt=f.relatedTarget||f.fromElement)&&(La(bt)||bt[Ti]))break e;if((ct||Ke)&&(Ke=Je.window===Je?Je:(Ke=Je.ownerDocument)?Ke.defaultView||Ke.parentWindow:window,ct?(bt=f.relatedTarget||f.toElement,ct=ze,bt=bt?La(bt):null,bt!==null&&(Hn=wn(bt),bt!==Hn||bt.tag!==5&&bt.tag!==6)&&(bt=null)):(ct=null,bt=ze),ct!==bt)){if(_t=Ge,et="onMouseLeave",Pe="onMouseEnter",Te="mouse",(a==="pointerout"||a==="pointerover")&&(_t=$n,et="onPointerLeave",Pe="onPointerEnter",Te="pointer"),Hn=ct==null?Ke:bl(ct),Le=bt==null?Ke:bl(bt),Ke=new _t(et,Te+"leave",ct,f,Je),Ke.target=Hn,Ke.relatedTarget=Le,et=null,La(Je)===ze&&(_t=new _t(Pe,Te+"enter",bt,f,Je),_t.target=Le,_t.relatedTarget=Hn,et=_t),Hn=et,ct&&bt)t:{for(_t=ct,Pe=bt,Te=0,Le=_t;Le;Le=xl(Le))Te++;for(Le=0,et=Pe;et;et=xl(et))Le++;for(;0<Te-Le;)_t=xl(_t),Te--;for(;0<Le-Te;)Pe=xl(Pe),Le--;for(;Te--;){if(_t===Pe||Pe!==null&&_t===Pe.alternate)break t;_t=xl(_t),Pe=xl(Pe)}_t=null}else _t=null;ct!==null&&tp(Ye,Ke,ct,_t,!1),bt!==null&&Hn!==null&&tp(Ye,Hn,bt,_t,!0)}}e:{if(Ke=ze?bl(ze):window,ct=Ke.nodeName&&Ke.nodeName.toLowerCase(),ct==="select"||ct==="input"&&Ke.type==="file")var jt=Ps;else if(Es(Ke))if(ls)jt=Na;else{jt=Pa;var Vt=Ra}else(ct=Ke.nodeName)&&ct.toLowerCase()==="input"&&(Ke.type==="checkbox"||Ke.type==="radio")&&(jt=hl);if(jt&&(jt=jt(a,ze))){ra(Ye,jt,f,Je);break e}Vt&&Vt(a,Ke,ze),a==="focusout"&&(Vt=Ke._wrapperState)&&Vt.controlled&&Ke.type==="number"&&$e(Ke,"number",Ke.value)}switch(Vt=ze?bl(ze):window,a){case"focusin":(Es(Vt)||Vt.contentEditable==="true")&&(oa=Vt,Jd=ze,Ql=null);break;case"focusout":Ql=Jd=oa=null;break;case"mousedown":Yd=!0;break;case"contextmenu":case"mouseup":case"dragend":Yd=!1,mh(Ye,f,Je);break;case"selectionchange":if(Yl)break;case"keydown":case"keyup":mh(Ye,f,Je)}var Ot;if(as)e:{switch(a){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else $o?Gl(a,f)&&(Yt="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Yt="onCompositionStart");Yt&&(To&&f.locale!=="ko"&&($o||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&$o&&(Ot=ll()):(ci=Je,Mo="value"in ci?ci.value:ci.textContent,$o=!0)),Vt=Zd(ze,Yt),0<Vt.length&&(Yt=new U(Yt,a,null,f,Je),Ye.push({event:Yt,listeners:Vt}),Ot?Yt.data=Ot:(Ot=ta(f),Ot!==null&&(Yt.data=Ot)))),(Ot=Kd?Co(a,f):Ao(a,f))&&(ze=Zd(ze,"onBeforeInput"),0<ze.length&&(Je=new U("onBeforeInput","beforeinput",null,f,Je),Ye.push({event:Je,listeners:ze}),Je.data=Ot))}Jc(Ye,c)})}function Xc(a,c,f){return{instance:a,listener:c,currentTarget:f}}function Zd(a,c){for(var f=c+"Capture",x=[];a!==null;){var k=a,L=k.stateNode;k.tag===5&&L!==null&&(k=L,L=Bi(a,f),L!=null&&x.unshift(Xc(a,L,k)),L=Bi(a,c),L!=null&&x.push(Xc(a,L,k))),a=a.return}return x}function xl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function tp(a,c,f,x,k){for(var L=c._reactName,K=[];f!==null&&f!==x;){var pe=f,ve=pe.alternate,ze=pe.stateNode;if(ve!==null&&ve===x)break;pe.tag===5&&ze!==null&&(pe=ze,k?(ve=Bi(f,L),ve!=null&&K.unshift(Xc(f,ve,pe))):k||(ve=Bi(f,L),ve!=null&&K.push(Xc(f,ve,pe)))),f=f.return}K.length!==0&&a.push({event:c,listeners:K})}var V0=/\r\n?/g,O0=/\u0000|\uFFFD/g;function rp(a){return(typeof a=="string"?a:""+a).replace(V0,`
`).replace(O0,"")}function eu(a,c,f){if(c=rp(c),rp(a)!==c&&f)throw Error(t(425))}function ec(){}var Zc=null,yl=null;function _h(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Th=typeof setTimeout=="function"?setTimeout:void 0,np=typeof clearTimeout=="function"?clearTimeout:void 0,ip=typeof Promise=="function"?Promise:void 0,M0=typeof queueMicrotask=="function"?queueMicrotask:typeof ip<"u"?function(a){return ip.resolve(null).then(a).catch(D0)}:Th;function D0(a){setTimeout(function(){throw a})}function Ch(a,c){var f=c,x=0;do{var k=f.nextSibling;if(a.removeChild(f),k&&k.nodeType===8)if(f=k.data,f==="/$"){if(x===0){a.removeChild(k),_o(c);return}x--}else f!=="$"&&f!=="$?"&&f!=="$!"||x++;f=k}while(f);_o(c)}function Wi(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function Uo(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return a;c--}else f==="/$"&&c++}a=a.previousSibling}return null}var to=Math.random().toString(36).slice(2),Bs="__reactFiber$"+to,tc="__reactProps$"+to,Ti="__reactContainer$"+to,ro="__reactEvents$"+to,W0="__reactListeners$"+to,$0="__reactHandles$"+to;function La(a){var c=a[Bs];if(c)return c;for(var f=a.parentNode;f;){if(c=f[Ti]||f[Bs]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(a=Uo(a);a!==null;){if(f=a[Bs])return f;a=Uo(a)}return c}a=f,f=a.parentNode}return null}function rc(a){return a=a[Bs]||a[Ti],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function bl(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function ed(a){return a[tc]||null}var Ah=[],sa=-1;function ds(a){return{current:a}}function Pr(a){0>sa||(a.current=Ah[sa],Ah[sa]=null,sa--)}function Fr(a,c){sa++,Ah[sa]=a.current,a.current=c}var Fa={},di=ds(Fa),no=ds(!1),vl=Fa;function nc(a,c){var f=a.type.contextTypes;if(!f)return Fa;var x=a.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===c)return x.__reactInternalMemoizedMaskedChildContext;var k={},L;for(L in f)k[L]=c[L];return x&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=k),k}function io(a){return a=a.childContextTypes,a!=null}function tu(){Pr(no),Pr(di)}function op(a,c,f){if(di.current!==Fa)throw Error(t(168));Fr(di,c),Fr(no,f)}function kh(a,c,f){var x=a.stateNode;if(c=c.childContextTypes,typeof x.getChildContext!="function")return f;x=x.getChildContext();for(var k in x)if(!(k in c))throw Error(t(108,Se(a)||"Unknown",k));return we({},f,x)}function wl(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Fa,vl=di.current,Fr(di,a),Fr(no,no.current),!0}function sp(a,c,f){var x=a.stateNode;if(!x)throw Error(t(169));f?(a=kh(a,c,vl),x.__reactInternalMemoizedMergedChildContext=a,Pr(no),Pr(di),Fr(di,a)):Pr(no),Fr(no,f)}var aa=null,td=!1,p=!1;function v(a){aa===null?aa=[a]:aa.push(a)}function E(a){td=!0,v(a)}function D(){if(!p&&aa!==null){p=!0;var a=0,c=or;try{var f=aa;for(or=1;a<f.length;a++){var x=f[a];do x=x(!0);while(x!==null)}aa=null,td=!1}catch(k){throw aa!==null&&(aa=aa.slice(a+1)),Ss(Ks,D),k}finally{or=c,p=!1}}return null}var G=[],Q=0,X=null,ee=0,oe=[],de=0,be=null,Ee=1,ue="";function _e(a,c){G[Q++]=ee,G[Q++]=X,X=a,ee=c}function Ie(a,c,f){oe[de++]=Ee,oe[de++]=ue,oe[de++]=be,be=a;var x=Ee;a=ue;var k=32-Zn(x)-1;x&=~(1<<k),f+=1;var L=32-Zn(c)+k;if(30<L){var K=k-k%5;L=(x&(1<<K)-1).toString(32),x>>=K,k-=K,Ee=1<<32-Zn(c)+k|f<<k|x,ue=L+a}else Ee=1<<L|f<<k|x,ue=a}function Me(a){a.return!==null&&(_e(a,1),Ie(a,1,0))}function Ne(a){for(;a===X;)X=G[--Q],G[Q]=null,ee=G[--Q],G[Q]=null;for(;a===be;)be=oe[--de],oe[de]=null,ue=oe[--de],oe[de]=null,Ee=oe[--de],oe[de]=null}var Ve=null,Oe=null,qe=!1,Ue=null;function Ct(a,c){var f=Os(5,null,null,0);f.elementType="DELETED",f.stateNode=c,f.return=a,c=a.deletions,c===null?(a.deletions=[f],a.flags|=16):c.push(f)}function ht(a,c){switch(a.tag){case 5:var f=a.type;return c=c.nodeType!==1||f.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,Ve=a,Oe=Wi(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,Ve=a,Oe=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(f=be!==null?{id:Ee,overflow:ue}:null,a.memoizedState={dehydrated:c,treeContext:f,retryLane:1073741824},f=Os(18,null,null,0),f.stateNode=c,f.return=a,a.child=f,Ve=a,Oe=null,!0):!1;default:return!1}}function Xt(a){return(a.mode&1)!==0&&(a.flags&128)===0}function gt(a){if(qe){var c=Oe;if(c){var f=c;if(!ht(a,c)){if(Xt(a))throw Error(t(418));c=Wi(f.nextSibling);var x=Ve;c&&ht(a,c)?Ct(x,f):(a.flags=a.flags&-4097|2,qe=!1,Ve=a)}}else{if(Xt(a))throw Error(t(418));a.flags=a.flags&-4097|2,qe=!1,Ve=a}}}function hr(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Ve=a}function mn(a){if(a!==Ve)return!1;if(!qe)return hr(a),qe=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!_h(a.type,a.memoizedProps)),c&&(c=Oe)){if(Xt(a))throw rr(),Error(t(418));for(;c;)Ct(a,c),c=Wi(c.nextSibling)}if(hr(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"){if(c===0){Oe=Wi(a.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++}a=a.nextSibling}Oe=null}}else Oe=Ve?Wi(a.stateNode.nextSibling):null;return!0}function rr(){for(var a=Oe;a;)a=Wi(a.nextSibling)}function ft(){Oe=Ve=null,qe=!1}function ot(a){Ue===null?Ue=[a]:Ue.push(a)}var Tn=B.ReactCurrentBatchConfig;function Gt(a,c,f){if(a=f.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var x=f.stateNode}if(!x)throw Error(t(147,a));var k=x,L=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===L?c.ref:(c=function(K){var pe=k.refs;K===null?delete pe[L]:pe[L]=K},c._stringRef=L,c)}if(typeof a!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,a))}return a}function cr(a,c){throw a=Object.prototype.toString.call(c),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function tn(a){var c=a._init;return c(a._payload)}function ti(a){function c(Pe,Te){if(a){var Le=Pe.deletions;Le===null?(Pe.deletions=[Te],Pe.flags|=16):Le.push(Te)}}function f(Pe,Te){if(!a)return null;for(;Te!==null;)c(Pe,Te),Te=Te.sibling;return null}function x(Pe,Te){for(Pe=new Map;Te!==null;)Te.key!==null?Pe.set(Te.key,Te):Pe.set(Te.index,Te),Te=Te.sibling;return Pe}function k(Pe,Te){return Pe=fc(Pe,Te),Pe.index=0,Pe.sibling=null,Pe}function L(Pe,Te,Le){return Pe.index=Le,a?(Le=Pe.alternate,Le!==null?(Le=Le.index,Le<Te?(Pe.flags|=2,Te):Le):(Pe.flags|=2,Te)):(Pe.flags|=1048576,Te)}function K(Pe){return a&&Pe.alternate===null&&(Pe.flags|=2),Pe}function pe(Pe,Te,Le,et){return Te===null||Te.tag!==6?(Te=yg(Le,Pe.mode,et),Te.return=Pe,Te):(Te=k(Te,Le),Te.return=Pe,Te)}function ve(Pe,Te,Le,et){var jt=Le.type;return jt===O?Je(Pe,Te,Le.props.children,et,Le.key):Te!==null&&(Te.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===re&&tn(jt)===Te.type)?(et=k(Te,Le.props),et.ref=Gt(Pe,Te,Le),et.return=Pe,et):(et=Ap(Le.type,Le.key,Le.props,null,Pe.mode,et),et.ref=Gt(Pe,Te,Le),et.return=Pe,et)}function ze(Pe,Te,Le,et){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==Le.containerInfo||Te.stateNode.implementation!==Le.implementation?(Te=bg(Le,Pe.mode,et),Te.return=Pe,Te):(Te=k(Te,Le.children||[]),Te.return=Pe,Te)}function Je(Pe,Te,Le,et,jt){return Te===null||Te.tag!==7?(Te=cd(Le,Pe.mode,et,jt),Te.return=Pe,Te):(Te=k(Te,Le),Te.return=Pe,Te)}function Ye(Pe,Te,Le){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Te=yg(""+Te,Pe.mode,Le),Te.return=Pe,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case J:return Le=Ap(Te.type,Te.key,Te.props,null,Pe.mode,Le),Le.ref=Gt(Pe,null,Te),Le.return=Pe,Le;case se:return Te=bg(Te,Pe.mode,Le),Te.return=Pe,Te;case re:var et=Te._init;return Ye(Pe,et(Te._payload),Le)}if(nt(Te)||ye(Te))return Te=cd(Te,Pe.mode,Le,null),Te.return=Pe,Te;cr(Pe,Te)}return null}function Ke(Pe,Te,Le,et){var jt=Te!==null?Te.key:null;if(typeof Le=="string"&&Le!==""||typeof Le=="number")return jt!==null?null:pe(Pe,Te,""+Le,et);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case J:return Le.key===jt?ve(Pe,Te,Le,et):null;case se:return Le.key===jt?ze(Pe,Te,Le,et):null;case re:return jt=Le._init,Ke(Pe,Te,jt(Le._payload),et)}if(nt(Le)||ye(Le))return jt!==null?null:Je(Pe,Te,Le,et,null);cr(Pe,Le)}return null}function ct(Pe,Te,Le,et,jt){if(typeof et=="string"&&et!==""||typeof et=="number")return Pe=Pe.get(Le)||null,pe(Te,Pe,""+et,jt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case J:return Pe=Pe.get(et.key===null?Le:et.key)||null,ve(Te,Pe,et,jt);case se:return Pe=Pe.get(et.key===null?Le:et.key)||null,ze(Te,Pe,et,jt);case re:var Vt=et._init;return ct(Pe,Te,Le,Vt(et._payload),jt)}if(nt(et)||ye(et))return Pe=Pe.get(Le)||null,Je(Te,Pe,et,jt,null);cr(Te,et)}return null}function bt(Pe,Te,Le,et){for(var jt=null,Vt=null,Ot=Te,Yt=Te=0,Ii=null;Ot!==null&&Yt<Le.length;Yt++){Ot.index>Yt?(Ii=Ot,Ot=null):Ii=Ot.sibling;var kr=Ke(Pe,Ot,Le[Yt],et);if(kr===null){Ot===null&&(Ot=Ii);break}a&&Ot&&kr.alternate===null&&c(Pe,Ot),Te=L(kr,Te,Yt),Vt===null?jt=kr:Vt.sibling=kr,Vt=kr,Ot=Ii}if(Yt===Le.length)return f(Pe,Ot),qe&&_e(Pe,Yt),jt;if(Ot===null){for(;Yt<Le.length;Yt++)Ot=Ye(Pe,Le[Yt],et),Ot!==null&&(Te=L(Ot,Te,Yt),Vt===null?jt=Ot:Vt.sibling=Ot,Vt=Ot);return qe&&_e(Pe,Yt),jt}for(Ot=x(Pe,Ot);Yt<Le.length;Yt++)Ii=ct(Ot,Pe,Yt,Le[Yt],et),Ii!==null&&(a&&Ii.alternate!==null&&Ot.delete(Ii.key===null?Yt:Ii.key),Te=L(Ii,Te,Yt),Vt===null?jt=Ii:Vt.sibling=Ii,Vt=Ii);return a&&Ot.forEach(function(pc){return c(Pe,pc)}),qe&&_e(Pe,Yt),jt}function _t(Pe,Te,Le,et){var jt=ye(Le);if(typeof jt!="function")throw Error(t(150));if(Le=jt.call(Le),Le==null)throw Error(t(151));for(var Vt=jt=null,Ot=Te,Yt=Te=0,Ii=null,kr=Le.next();Ot!==null&&!kr.done;Yt++,kr=Le.next()){Ot.index>Yt?(Ii=Ot,Ot=null):Ii=Ot.sibling;var pc=Ke(Pe,Ot,kr.value,et);if(pc===null){Ot===null&&(Ot=Ii);break}a&&Ot&&pc.alternate===null&&c(Pe,Ot),Te=L(pc,Te,Yt),Vt===null?jt=pc:Vt.sibling=pc,Vt=pc,Ot=Ii}if(kr.done)return f(Pe,Ot),qe&&_e(Pe,Yt),jt;if(Ot===null){for(;!kr.done;Yt++,kr=Le.next())kr=Ye(Pe,kr.value,et),kr!==null&&(Te=L(kr,Te,Yt),Vt===null?jt=kr:Vt.sibling=kr,Vt=kr);return qe&&_e(Pe,Yt),jt}for(Ot=x(Pe,Ot);!kr.done;Yt++,kr=Le.next())kr=ct(Ot,Pe,Yt,kr.value,et),kr!==null&&(a&&kr.alternate!==null&&Ot.delete(kr.key===null?Yt:kr.key),Te=L(kr,Te,Yt),Vt===null?jt=kr:Vt.sibling=kr,Vt=kr);return a&&Ot.forEach(function(D4){return c(Pe,D4)}),qe&&_e(Pe,Yt),jt}function Hn(Pe,Te,Le,et){if(typeof Le=="object"&&Le!==null&&Le.type===O&&Le.key===null&&(Le=Le.props.children),typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case J:e:{for(var jt=Le.key,Vt=Te;Vt!==null;){if(Vt.key===jt){if(jt=Le.type,jt===O){if(Vt.tag===7){f(Pe,Vt.sibling),Te=k(Vt,Le.props.children),Te.return=Pe,Pe=Te;break e}}else if(Vt.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===re&&tn(jt)===Vt.type){f(Pe,Vt.sibling),Te=k(Vt,Le.props),Te.ref=Gt(Pe,Vt,Le),Te.return=Pe,Pe=Te;break e}f(Pe,Vt);break}else c(Pe,Vt);Vt=Vt.sibling}Le.type===O?(Te=cd(Le.props.children,Pe.mode,et,Le.key),Te.return=Pe,Pe=Te):(et=Ap(Le.type,Le.key,Le.props,null,Pe.mode,et),et.ref=Gt(Pe,Te,Le),et.return=Pe,Pe=et)}return K(Pe);case se:e:{for(Vt=Le.key;Te!==null;){if(Te.key===Vt)if(Te.tag===4&&Te.stateNode.containerInfo===Le.containerInfo&&Te.stateNode.implementation===Le.implementation){f(Pe,Te.sibling),Te=k(Te,Le.children||[]),Te.return=Pe,Pe=Te;break e}else{f(Pe,Te);break}else c(Pe,Te);Te=Te.sibling}Te=bg(Le,Pe.mode,et),Te.return=Pe,Pe=Te}return K(Pe);case re:return Vt=Le._init,Hn(Pe,Te,Vt(Le._payload),et)}if(nt(Le))return bt(Pe,Te,Le,et);if(ye(Le))return _t(Pe,Te,Le,et);cr(Pe,Le)}return typeof Le=="string"&&Le!==""||typeof Le=="number"?(Le=""+Le,Te!==null&&Te.tag===6?(f(Pe,Te.sibling),Te=k(Te,Le),Te.return=Pe,Pe=Te):(f(Pe,Te),Te=yg(Le,Pe.mode,et),Te.return=Pe,Pe=Te),K(Pe)):f(Pe,Te)}return Hn}var Rn=ti(!0),cn=ti(!1),qn=ds(null),ri=null,sn=null,pr=null;function _r(){pr=sn=ri=null}function an(a){var c=qn.current;Pr(qn),a._currentValue=c}function Tr(a,c,f){for(;a!==null;){var x=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),a===f)break;a=a.return}}function gn(a,c){ri=a,pr=sn=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(Go=!0),a.firstContext=null)}function xn(a){var c=a._currentValue;if(pr!==a)if(a={context:a,memoizedValue:c,next:null},sn===null){if(ri===null)throw Error(t(308));sn=a,ri.dependencies={lanes:0,firstContext:a}}else sn=sn.next=a;return c}var qr=null;function Ci(a){qr===null?qr=[a]:qr.push(a)}function zr(a,c,f,x){var k=c.interleaved;return k===null?(f.next=f,Ci(c)):(f.next=k.next,k.next=f),c.interleaved=f,Ur(a,x)}function Ur(a,c){a.lanes|=c;var f=a.alternate;for(f!==null&&(f.lanes|=c),f=a,a=a.return;a!==null;)a.childLanes|=c,f=a.alternate,f!==null&&(f.childLanes|=c),f=a,a=a.return;return f.tag===3?f.stateNode:null}var Pn=!1;function ui(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oo(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Cn(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function An(a,c,f){var x=a.updateQueue;if(x===null)return null;if(x=x.shared,(Cr&2)!==0){var k=x.pending;return k===null?c.next=c:(c.next=k.next,k.next=c),x.pending=c,Ur(a,f)}return k=x.interleaved,k===null?(c.next=c,Ci(x)):(c.next=k.next,k.next=c),x.interleaved=c,Ur(a,f)}function Ai(a,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194240)!==0)){var x=c.lanes;x&=a.pendingLanes,f|=x,c.lanes=f,Ta(a,f)}}function Hr(a,c){var f=a.updateQueue,x=a.alternate;if(x!==null&&(x=x.updateQueue,f===x)){var k=null,L=null;if(f=f.firstBaseUpdate,f!==null){do{var K={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};L===null?k=L=K:L=L.next=K,f=f.next}while(f!==null);L===null?k=L=c:L=L.next=c}else k=L=c;f={baseState:x.baseState,firstBaseUpdate:k,lastBaseUpdate:L,shared:x.shared,effects:x.effects},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=c}function ki(a,c,f,x){var k=a.updateQueue;Pn=!1;var L=k.firstBaseUpdate,K=k.lastBaseUpdate,pe=k.shared.pending;if(pe!==null){k.shared.pending=null;var ve=pe,ze=ve.next;ve.next=null,K===null?L=ze:K.next=ze,K=ve;var Je=a.alternate;Je!==null&&(Je=Je.updateQueue,pe=Je.lastBaseUpdate,pe!==K&&(pe===null?Je.firstBaseUpdate=ze:pe.next=ze,Je.lastBaseUpdate=ve))}if(L!==null){var Ye=k.baseState;K=0,Je=ze=ve=null,pe=L;do{var Ke=pe.lane,ct=pe.eventTime;if((x&Ke)===Ke){Je!==null&&(Je=Je.next={eventTime:ct,lane:0,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null});e:{var bt=a,_t=pe;switch(Ke=c,ct=f,_t.tag){case 1:if(bt=_t.payload,typeof bt=="function"){Ye=bt.call(ct,Ye,Ke);break e}Ye=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=_t.payload,Ke=typeof bt=="function"?bt.call(ct,Ye,Ke):bt,Ke==null)break e;Ye=we({},Ye,Ke);break e;case 2:Pn=!0}}pe.callback!==null&&pe.lane!==0&&(a.flags|=64,Ke=k.effects,Ke===null?k.effects=[pe]:Ke.push(pe))}else ct={eventTime:ct,lane:Ke,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},Je===null?(ze=Je=ct,ve=Ye):Je=Je.next=ct,K|=Ke;if(pe=pe.next,pe===null){if(pe=k.shared.pending,pe===null)break;Ke=pe,pe=Ke.next,Ke.next=null,k.lastBaseUpdate=Ke,k.shared.pending=null}}while(!0);if(Je===null&&(ve=Ye),k.baseState=ve,k.firstBaseUpdate=ze,k.lastBaseUpdate=Je,c=k.shared.interleaved,c!==null){k=c;do K|=k.lane,k=k.next;while(k!==c)}else L===null&&(k.shared.lanes=0);od|=K,a.lanes=K,a.memoizedState=Ye}}function Ho(a,c,f){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var x=a[c],k=x.callback;if(k!==null){if(x.callback=null,x=f,typeof k!="function")throw Error(t(191,k));k.call(x)}}}var us={},ni=ds(us),kn=ds(us),za=ds(us);function la(a){if(a===us)throw Error(t(174));return a}function ic(a,c){switch(Fr(za,c),Fr(kn,a),Fr(ni,us),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:br(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=br(c,a)}Pr(ni),Fr(ni,c)}function Ls(){Pr(ni),Pr(kn),Pr(za)}function ap(a){la(za.current);var c=la(ni.current),f=br(c,a.type);c!==f&&(Fr(kn,a),Fr(ni,f))}function jh(a){kn.current===a&&(Pr(ni),Pr(kn))}var nn=ds(0);function hs(a){for(var c=a;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Ih=[];function Eh(){for(var a=0;a<Ih.length;a++)Ih[a]._workInProgressVersionPrimary=null;Ih.length=0}var ru=B.ReactCurrentDispatcher,nu=B.ReactCurrentBatchConfig,Fs=0,ln=null,Nn=null,jn=null,oc=!1,ca=!1,sc=0,q0=0;function Un(){throw Error(t(321))}function iu(a,c){if(c===null)return!1;for(var f=0;f<c.length&&f<a.length;f++)if(!fn(a[f],c[f]))return!1;return!0}function rd(a,c,f,x,k,L){if(Fs=L,ln=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,ru.current=a===null||a.memoizedState===null?f4:p4,a=f(x,k),ca){L=0;do{if(ca=!1,sc=0,25<=L)throw Error(t(301));L+=1,jn=Nn=null,c.updateQueue=null,ru.current=m4,a=f(x,k)}while(ca)}if(ru.current=hp,c=Nn!==null&&Nn.next!==null,Fs=0,jn=Nn=ln=null,oc=!1,c)throw Error(t(300));return a}function zs(){var a=sc!==0;return sc=0,a}function fs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jn===null?ln.memoizedState=jn=a:jn=jn.next=a,jn}function ko(){if(Nn===null){var a=ln.alternate;a=a!==null?a.memoizedState:null}else a=Nn.next;var c=jn===null?ln.memoizedState:jn.next;if(c!==null)jn=c,Nn=a;else{if(a===null)throw Error(t(310));Nn=a,a={memoizedState:Nn.memoizedState,baseState:Nn.baseState,baseQueue:Nn.baseQueue,queue:Nn.queue,next:null},jn===null?ln.memoizedState=jn=a:jn=jn.next=a}return jn}function nd(a,c){return typeof c=="function"?c(a):c}function ou(a){var c=ko(),f=c.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var x=Nn,k=x.baseQueue,L=f.pending;if(L!==null){if(k!==null){var K=k.next;k.next=L.next,L.next=K}x.baseQueue=k=L,f.pending=null}if(k!==null){L=k.next,x=x.baseState;var pe=K=null,ve=null,ze=L;do{var Je=ze.lane;if((Fs&Je)===Je)ve!==null&&(ve=ve.next={lane:0,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null}),x=ze.hasEagerState?ze.eagerState:a(x,ze.action);else{var Ye={lane:Je,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null};ve===null?(pe=ve=Ye,K=x):ve=ve.next=Ye,ln.lanes|=Je,od|=Je}ze=ze.next}while(ze!==null&&ze!==L);ve===null?K=x:ve.next=pe,fn(x,c.memoizedState)||(Go=!0),c.memoizedState=x,c.baseState=K,c.baseQueue=ve,f.lastRenderedState=x}if(a=f.interleaved,a!==null){k=a;do L=k.lane,ln.lanes|=L,od|=L,k=k.next;while(k!==a)}else k===null&&(f.lanes=0);return[c.memoizedState,f.dispatch]}function Va(a){var c=ko(),f=c.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var x=f.dispatch,k=f.pending,L=c.memoizedState;if(k!==null){f.pending=null;var K=k=k.next;do L=a(L,K.action),K=K.next;while(K!==k);fn(L,c.memoizedState)||(Go=!0),c.memoizedState=L,c.baseQueue===null&&(c.baseState=L),f.lastRenderedState=L}return[L,x]}function lp(){}function Rh(a,c){var f=ln,x=ko(),k=c(),L=!fn(x.memoizedState,k);if(L&&(x.memoizedState=k,Go=!0),x=x.queue,lu(dp.bind(null,f,x,a),[a]),x.getSnapshot!==c||L||jn!==null&&jn.memoizedState.tag&1){if(f.flags|=2048,jo(9,Ph.bind(null,f,x,k,c),void 0,null),ji===null)throw Error(t(349));(Fs&30)!==0||cp(f,c,k)}return k}function cp(a,c,f){a.flags|=16384,a={getSnapshot:c,value:f},c=ln.updateQueue,c===null?(c={lastEffect:null,stores:null},ln.updateQueue=c,c.stores=[a]):(f=c.stores,f===null?c.stores=[a]:f.push(a))}function Ph(a,c,f,x){c.value=f,c.getSnapshot=x,ac(c)&&su(a)}function dp(a,c,f){return f(function(){ac(c)&&su(a)})}function ac(a){var c=a.getSnapshot;a=a.value;try{var f=c();return!fn(a,f)}catch{return!0}}function su(a){var c=Ur(a,1);c!==null&&pa(c,a,1,-1)}function id(a){var c=fs();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nd,lastRenderedState:a},c.queue=a,a=a.dispatch=h4.bind(null,ln,a),[c.memoizedState,a]}function jo(a,c,f,x){return a={tag:a,create:c,destroy:f,deps:x,next:null},c=ln.updateQueue,c===null?(c={lastEffect:null,stores:null},ln.updateQueue=c,c.lastEffect=a.next=a):(f=c.lastEffect,f===null?c.lastEffect=a.next=a:(x=f.next,f.next=a,a.next=x,c.lastEffect=a)),a}function da(){return ko().memoizedState}function ps(a,c,f,x){var k=fs();ln.flags|=a,k.memoizedState=jo(1|c,f,void 0,x===void 0?null:x)}function Sl(a,c,f,x){var k=ko();x=x===void 0?null:x;var L=void 0;if(Nn!==null){var K=Nn.memoizedState;if(L=K.destroy,x!==null&&iu(x,K.deps)){k.memoizedState=jo(c,f,L,x);return}}ln.flags|=a,k.memoizedState=jo(1|c,f,L,x)}function au(a,c){return ps(8390656,8,a,c)}function lu(a,c){return Sl(2048,8,a,c)}function up(a,c){return Sl(4,2,a,c)}function cu(a,c){return Sl(4,4,a,c)}function du(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function Sx(a,c,f){return f=f!=null?f.concat([a]):null,Sl(4,4,du.bind(null,c,a),f)}function U0(){}function _x(a,c){var f=ko();c=c===void 0?null:c;var x=f.memoizedState;return x!==null&&c!==null&&iu(c,x[1])?x[0]:(f.memoizedState=[a,c],a)}function Tx(a,c){var f=ko();c=c===void 0?null:c;var x=f.memoizedState;return x!==null&&c!==null&&iu(c,x[1])?x[0]:(a=a(),f.memoizedState=[a,c],a)}function Cx(a,c,f){return(Fs&21)===0?(a.baseState&&(a.baseState=!1,Go=!0),a.memoizedState=f):(fn(f,c)||(f=nl(),ln.lanes|=f,od|=f,a.baseState=!0),c)}function d4(a,c){var f=or;or=f!==0&&4>f?f:4,a(!0);var x=nu.transition;nu.transition={};try{a(!1),c()}finally{or=f,nu.transition=x}}function Ax(){return ko().memoizedState}function u4(a,c,f){var x=uc(a);if(f={lane:x,action:f,hasEagerState:!1,eagerState:null,next:null},kx(a))jx(c,f);else if(f=zr(a,c,f,x),f!==null){var k=Eo();pa(f,a,x,k),Ix(f,c,x)}}function h4(a,c,f){var x=uc(a),k={lane:x,action:f,hasEagerState:!1,eagerState:null,next:null};if(kx(a))jx(c,k);else{var L=a.alternate;if(a.lanes===0&&(L===null||L.lanes===0)&&(L=c.lastRenderedReducer,L!==null))try{var K=c.lastRenderedState,pe=L(K,f);if(k.hasEagerState=!0,k.eagerState=pe,fn(pe,K)){var ve=c.interleaved;ve===null?(k.next=k,Ci(c)):(k.next=ve.next,ve.next=k),c.interleaved=k;return}}catch{}finally{}f=zr(a,c,k,x),f!==null&&(k=Eo(),pa(f,a,x,k),Ix(f,c,x))}}function kx(a){var c=a.alternate;return a===ln||c!==null&&c===ln}function jx(a,c){ca=oc=!0;var f=a.pending;f===null?c.next=c:(c.next=f.next,f.next=c),a.pending=c}function Ix(a,c,f){if((f&4194240)!==0){var x=c.lanes;x&=a.pendingLanes,f|=x,c.lanes=f,Ta(a,f)}}var hp={readContext:xn,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useInsertionEffect:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useSyncExternalStore:Un,useId:Un,unstable_isNewReconciler:!1},f4={readContext:xn,useCallback:function(a,c){return fs().memoizedState=[a,c===void 0?null:c],a},useContext:xn,useEffect:au,useImperativeHandle:function(a,c,f){return f=f!=null?f.concat([a]):null,ps(4194308,4,du.bind(null,c,a),f)},useLayoutEffect:function(a,c){return ps(4194308,4,a,c)},useInsertionEffect:function(a,c){return ps(4,2,a,c)},useMemo:function(a,c){var f=fs();return c=c===void 0?null:c,a=a(),f.memoizedState=[a,c],a},useReducer:function(a,c,f){var x=fs();return c=f!==void 0?f(c):c,x.memoizedState=x.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},x.queue=a,a=a.dispatch=u4.bind(null,ln,a),[x.memoizedState,a]},useRef:function(a){var c=fs();return a={current:a},c.memoizedState=a},useState:id,useDebugValue:U0,useDeferredValue:function(a){return fs().memoizedState=a},useTransition:function(){var a=id(!1),c=a[0];return a=d4.bind(null,a[1]),fs().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,f){var x=ln,k=fs();if(qe){if(f===void 0)throw Error(t(407));f=f()}else{if(f=c(),ji===null)throw Error(t(349));(Fs&30)!==0||cp(x,c,f)}k.memoizedState=f;var L={value:f,getSnapshot:c};return k.queue=L,au(dp.bind(null,x,L,a),[a]),x.flags|=2048,jo(9,Ph.bind(null,x,L,f,c),void 0,null),f},useId:function(){var a=fs(),c=ji.identifierPrefix;if(qe){var f=ue,x=Ee;f=(x&~(1<<32-Zn(x)-1)).toString(32)+f,c=":"+c+"R"+f,f=sc++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=q0++,c=":"+c+"r"+f.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},p4={readContext:xn,useCallback:_x,useContext:xn,useEffect:lu,useImperativeHandle:Sx,useInsertionEffect:up,useLayoutEffect:cu,useMemo:Tx,useReducer:ou,useRef:da,useState:function(){return ou(nd)},useDebugValue:U0,useDeferredValue:function(a){var c=ko();return Cx(c,Nn.memoizedState,a)},useTransition:function(){var a=ou(nd)[0],c=ko().memoizedState;return[a,c]},useMutableSource:lp,useSyncExternalStore:Rh,useId:Ax,unstable_isNewReconciler:!1},m4={readContext:xn,useCallback:_x,useContext:xn,useEffect:lu,useImperativeHandle:Sx,useInsertionEffect:up,useLayoutEffect:cu,useMemo:Tx,useReducer:Va,useRef:da,useState:function(){return Va(nd)},useDebugValue:U0,useDeferredValue:function(a){var c=ko();return Nn===null?c.memoizedState=a:Cx(c,Nn.memoizedState,a)},useTransition:function(){var a=Va(nd)[0],c=ko().memoizedState;return[a,c]},useMutableSource:lp,useSyncExternalStore:Rh,useId:Ax,unstable_isNewReconciler:!1};function ua(a,c){if(a&&a.defaultProps){c=we({},c),a=a.defaultProps;for(var f in a)c[f]===void 0&&(c[f]=a[f]);return c}return c}function H0(a,c,f,x){c=a.memoizedState,f=f(x,c),f=f==null?c:we({},c,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var fp={isMounted:function(a){return(a=a._reactInternals)?wn(a)===a:!1},enqueueSetState:function(a,c,f){a=a._reactInternals;var x=Eo(),k=uc(a),L=Cn(x,k);L.payload=c,f!=null&&(L.callback=f),c=An(a,L,k),c!==null&&(pa(c,a,k,x),Ai(c,a,k))},enqueueReplaceState:function(a,c,f){a=a._reactInternals;var x=Eo(),k=uc(a),L=Cn(x,k);L.tag=1,L.payload=c,f!=null&&(L.callback=f),c=An(a,L,k),c!==null&&(pa(c,a,k,x),Ai(c,a,k))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var f=Eo(),x=uc(a),k=Cn(f,x);k.tag=2,c!=null&&(k.callback=c),c=An(a,k,x),c!==null&&(pa(c,a,x,f),Ai(c,a,x))}};function Ex(a,c,f,x,k,L,K){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(x,L,K):c.prototype&&c.prototype.isPureReactComponent?!eo(f,x)||!eo(k,L):!0}function Rx(a,c,f){var x=!1,k=Fa,L=c.contextType;return typeof L=="object"&&L!==null?L=xn(L):(k=io(c)?vl:di.current,x=c.contextTypes,L=(x=x!=null)?nc(a,k):Fa),c=new c(f,L),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=fp,a.stateNode=c,c._reactInternals=a,x&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=k,a.__reactInternalMemoizedMaskedChildContext=L),c}function Px(a,c,f,x){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,x),c.state!==a&&fp.enqueueReplaceState(c,c.state,null)}function G0(a,c,f,x){var k=a.stateNode;k.props=f,k.state=a.memoizedState,k.refs={},ui(a);var L=c.contextType;typeof L=="object"&&L!==null?k.context=xn(L):(L=io(c)?vl:di.current,k.context=nc(a,L)),k.state=a.memoizedState,L=c.getDerivedStateFromProps,typeof L=="function"&&(H0(a,c,L,f),k.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(c=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),c!==k.state&&fp.enqueueReplaceState(k,k.state,null),ki(a,f,k,x),k.state=a.memoizedState),typeof k.componentDidMount=="function"&&(a.flags|=4194308)}function uu(a,c){try{var f="",x=c;do f+=fe(x),x=x.return;while(x);var k=f}catch(L){k=`
Error generating stack: `+L.message+`
`+L.stack}return{value:a,source:c,stack:k,digest:null}}function K0(a,c,f){return{value:a,source:null,stack:f??null,digest:c??null}}function J0(a,c){try{console.error(c.value)}catch(f){setTimeout(function(){throw f})}}var g4=typeof WeakMap=="function"?WeakMap:Map;function Nx(a,c,f){f=Cn(-1,f),f.tag=3,f.payload={element:null};var x=c.value;return f.callback=function(){vp||(vp=!0,dg=x),J0(a,c)},f}function Bx(a,c,f){f=Cn(-1,f),f.tag=3;var x=a.type.getDerivedStateFromError;if(typeof x=="function"){var k=c.value;f.payload=function(){return x(k)},f.callback=function(){J0(a,c)}}var L=a.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(f.callback=function(){J0(a,c),typeof x!="function"&&(cc===null?cc=new Set([this]):cc.add(this));var K=c.stack;this.componentDidCatch(c.value,{componentStack:K!==null?K:""})}),f}function Lx(a,c,f){var x=a.pingCache;if(x===null){x=a.pingCache=new g4;var k=new Set;x.set(c,k)}else k=x.get(c),k===void 0&&(k=new Set,x.set(c,k));k.has(f)||(k.add(f),a=E4.bind(null,a,c,f),c.then(a,a))}function Fx(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function zx(a,c,f,x,k){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(c=Cn(-1,1),c.tag=2,An(f,c,1))),f.lanes|=1),a):(a.flags|=65536,a.lanes=k,a)}var x4=B.ReactCurrentOwner,Go=!1;function Io(a,c,f,x){c.child=a===null?cn(c,null,f,x):Rn(c,a.child,f,x)}function Vx(a,c,f,x,k){f=f.render;var L=c.ref;return gn(c,k),x=rd(a,c,f,x,L,k),f=zs(),a!==null&&!Go?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~k,_l(a,c,k)):(qe&&f&&Me(c),c.flags|=1,Io(a,c,x,k),c.child)}function Ox(a,c,f,x,k){if(a===null){var L=f.type;return typeof L=="function"&&!xg(L)&&L.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(c.tag=15,c.type=L,Mx(a,c,L,x,k)):(a=Ap(f.type,null,x,c,c.mode,k),a.ref=c.ref,a.return=c,c.child=a)}if(L=a.child,(a.lanes&k)===0){var K=L.memoizedProps;if(f=f.compare,f=f!==null?f:eo,f(K,x)&&a.ref===c.ref)return _l(a,c,k)}return c.flags|=1,a=fc(L,x),a.ref=c.ref,a.return=c,c.child=a}function Mx(a,c,f,x,k){if(a!==null){var L=a.memoizedProps;if(eo(L,x)&&a.ref===c.ref)if(Go=!1,c.pendingProps=x=L,(a.lanes&k)!==0)(a.flags&131072)!==0&&(Go=!0);else return c.lanes=a.lanes,_l(a,c,k)}return Y0(a,c,f,x,k)}function Dx(a,c,f){var x=c.pendingProps,k=x.children,L=a!==null?a.memoizedState:null;if(x.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fr(fu,ms),ms|=f;else{if((f&1073741824)===0)return a=L!==null?L.baseLanes|f:f,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,Fr(fu,ms),ms|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=L!==null?L.baseLanes:f,Fr(fu,ms),ms|=x}else L!==null?(x=L.baseLanes|f,c.memoizedState=null):x=f,Fr(fu,ms),ms|=x;return Io(a,c,k,f),c.child}function Wx(a,c){var f=c.ref;(a===null&&f!==null||a!==null&&a.ref!==f)&&(c.flags|=512,c.flags|=2097152)}function Y0(a,c,f,x,k){var L=io(f)?vl:di.current;return L=nc(c,L),gn(c,k),f=rd(a,c,f,x,L,k),x=zs(),a!==null&&!Go?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~k,_l(a,c,k)):(qe&&x&&Me(c),c.flags|=1,Io(a,c,f,k),c.child)}function $x(a,c,f,x,k){if(io(f)){var L=!0;wl(c)}else L=!1;if(gn(c,k),c.stateNode===null)mp(a,c),Rx(c,f,x),G0(c,f,x,k),x=!0;else if(a===null){var K=c.stateNode,pe=c.memoizedProps;K.props=pe;var ve=K.context,ze=f.contextType;typeof ze=="object"&&ze!==null?ze=xn(ze):(ze=io(f)?vl:di.current,ze=nc(c,ze));var Je=f.getDerivedStateFromProps,Ye=typeof Je=="function"||typeof K.getSnapshotBeforeUpdate=="function";Ye||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(pe!==x||ve!==ze)&&Px(c,K,x,ze),Pn=!1;var Ke=c.memoizedState;K.state=Ke,ki(c,x,K,k),ve=c.memoizedState,pe!==x||Ke!==ve||no.current||Pn?(typeof Je=="function"&&(H0(c,f,Je,x),ve=c.memoizedState),(pe=Pn||Ex(c,f,pe,x,Ke,ve,ze))?(Ye||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(c.flags|=4194308)):(typeof K.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=ve),K.props=x,K.state=ve,K.context=ze,x=pe):(typeof K.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{K=c.stateNode,oo(a,c),pe=c.memoizedProps,ze=c.type===c.elementType?pe:ua(c.type,pe),K.props=ze,Ye=c.pendingProps,Ke=K.context,ve=f.contextType,typeof ve=="object"&&ve!==null?ve=xn(ve):(ve=io(f)?vl:di.current,ve=nc(c,ve));var ct=f.getDerivedStateFromProps;(Je=typeof ct=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(pe!==Ye||Ke!==ve)&&Px(c,K,x,ve),Pn=!1,Ke=c.memoizedState,K.state=Ke,ki(c,x,K,k);var bt=c.memoizedState;pe!==Ye||Ke!==bt||no.current||Pn?(typeof ct=="function"&&(H0(c,f,ct,x),bt=c.memoizedState),(ze=Pn||Ex(c,f,ze,x,Ke,bt,ve)||!1)?(Je||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(x,bt,ve),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(x,bt,ve)),typeof K.componentDidUpdate=="function"&&(c.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof K.componentDidUpdate!="function"||pe===a.memoizedProps&&Ke===a.memoizedState||(c.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||pe===a.memoizedProps&&Ke===a.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=bt),K.props=x,K.state=bt,K.context=ve,x=ze):(typeof K.componentDidUpdate!="function"||pe===a.memoizedProps&&Ke===a.memoizedState||(c.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||pe===a.memoizedProps&&Ke===a.memoizedState||(c.flags|=1024),x=!1)}return Q0(a,c,f,x,L,k)}function Q0(a,c,f,x,k,L){Wx(a,c);var K=(c.flags&128)!==0;if(!x&&!K)return k&&sp(c,f,!1),_l(a,c,L);x=c.stateNode,x4.current=c;var pe=K&&typeof f.getDerivedStateFromError!="function"?null:x.render();return c.flags|=1,a!==null&&K?(c.child=Rn(c,a.child,null,L),c.child=Rn(c,null,pe,L)):Io(a,c,pe,L),c.memoizedState=x.state,k&&sp(c,f,!0),c.child}function qx(a){var c=a.stateNode;c.pendingContext?op(a,c.pendingContext,c.pendingContext!==c.context):c.context&&op(a,c.context,!1),ic(a,c.containerInfo)}function Ux(a,c,f,x,k){return ft(),ot(k),c.flags|=256,Io(a,c,f,x),c.child}var X0={dehydrated:null,treeContext:null,retryLane:0};function Z0(a){return{baseLanes:a,cachePool:null,transitions:null}}function Hx(a,c,f){var x=c.pendingProps,k=nn.current,L=!1,K=(c.flags&128)!==0,pe;if((pe=K)||(pe=a!==null&&a.memoizedState===null?!1:(k&2)!==0),pe?(L=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(k|=1),Fr(nn,k&1),a===null)return gt(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(K=x.children,a=x.fallback,L?(x=c.mode,L=c.child,K={mode:"hidden",children:K},(x&1)===0&&L!==null?(L.childLanes=0,L.pendingProps=K):L=kp(K,x,0,null),a=cd(a,x,f,null),L.return=c,a.return=c,L.sibling=a,c.child=L,c.child.memoizedState=Z0(f),c.memoizedState=X0,a):eg(c,K));if(k=a.memoizedState,k!==null&&(pe=k.dehydrated,pe!==null))return y4(a,c,K,x,pe,k,f);if(L){L=x.fallback,K=c.mode,k=a.child,pe=k.sibling;var ve={mode:"hidden",children:x.children};return(K&1)===0&&c.child!==k?(x=c.child,x.childLanes=0,x.pendingProps=ve,c.deletions=null):(x=fc(k,ve),x.subtreeFlags=k.subtreeFlags&14680064),pe!==null?L=fc(pe,L):(L=cd(L,K,f,null),L.flags|=2),L.return=c,x.return=c,x.sibling=L,c.child=x,x=L,L=c.child,K=a.child.memoizedState,K=K===null?Z0(f):{baseLanes:K.baseLanes|f,cachePool:null,transitions:K.transitions},L.memoizedState=K,L.childLanes=a.childLanes&~f,c.memoizedState=X0,x}return L=a.child,a=L.sibling,x=fc(L,{mode:"visible",children:x.children}),(c.mode&1)===0&&(x.lanes=f),x.return=c,x.sibling=null,a!==null&&(f=c.deletions,f===null?(c.deletions=[a],c.flags|=16):f.push(a)),c.child=x,c.memoizedState=null,x}function eg(a,c){return c=kp({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function pp(a,c,f,x){return x!==null&&ot(x),Rn(c,a.child,null,f),a=eg(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function y4(a,c,f,x,k,L,K){if(f)return c.flags&256?(c.flags&=-257,x=K0(Error(t(422))),pp(a,c,K,x)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(L=x.fallback,k=c.mode,x=kp({mode:"visible",children:x.children},k,0,null),L=cd(L,k,K,null),L.flags|=2,x.return=c,L.return=c,x.sibling=L,c.child=x,(c.mode&1)!==0&&Rn(c,a.child,null,K),c.child.memoizedState=Z0(K),c.memoizedState=X0,L);if((c.mode&1)===0)return pp(a,c,K,null);if(k.data==="$!"){if(x=k.nextSibling&&k.nextSibling.dataset,x)var pe=x.dgst;return x=pe,L=Error(t(419)),x=K0(L,x,void 0),pp(a,c,K,x)}if(pe=(K&a.childLanes)!==0,Go||pe){if(x=ji,x!==null){switch(K&-K){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(x.suspendedLanes|K))!==0?0:k,k!==0&&k!==L.retryLane&&(L.retryLane=k,Ur(a,k),pa(x,a,k,-1))}return gg(),x=K0(Error(t(421))),pp(a,c,K,x)}return k.data==="$?"?(c.flags|=128,c.child=a.child,c=R4.bind(null,a),k._reactRetry=c,null):(a=L.treeContext,Oe=Wi(k.nextSibling),Ve=c,qe=!0,Ue=null,a!==null&&(oe[de++]=Ee,oe[de++]=ue,oe[de++]=be,Ee=a.id,ue=a.overflow,be=c),c=eg(c,x.children),c.flags|=4096,c)}function Gx(a,c,f){a.lanes|=c;var x=a.alternate;x!==null&&(x.lanes|=c),Tr(a.return,c,f)}function tg(a,c,f,x,k){var L=a.memoizedState;L===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:f,tailMode:k}:(L.isBackwards=c,L.rendering=null,L.renderingStartTime=0,L.last=x,L.tail=f,L.tailMode=k)}function Kx(a,c,f){var x=c.pendingProps,k=x.revealOrder,L=x.tail;if(Io(a,c,x.children,f),x=nn.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Gx(a,f,c);else if(a.tag===19)Gx(a,f,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}x&=1}if(Fr(nn,x),(c.mode&1)===0)c.memoizedState=null;else switch(k){case"forwards":for(f=c.child,k=null;f!==null;)a=f.alternate,a!==null&&hs(a)===null&&(k=f),f=f.sibling;f=k,f===null?(k=c.child,c.child=null):(k=f.sibling,f.sibling=null),tg(c,!1,k,f,L);break;case"backwards":for(f=null,k=c.child,c.child=null;k!==null;){if(a=k.alternate,a!==null&&hs(a)===null){c.child=k;break}a=k.sibling,k.sibling=f,f=k,k=a}tg(c,!0,f,null,L);break;case"together":tg(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function mp(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function _l(a,c,f){if(a!==null&&(c.dependencies=a.dependencies),od|=c.lanes,(f&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(t(153));if(c.child!==null){for(a=c.child,f=fc(a,a.pendingProps),c.child=f,f.return=c;a.sibling!==null;)a=a.sibling,f=f.sibling=fc(a,a.pendingProps),f.return=c;f.sibling=null}return c.child}function b4(a,c,f){switch(c.tag){case 3:qx(c),ft();break;case 5:ap(c);break;case 1:io(c.type)&&wl(c);break;case 4:ic(c,c.stateNode.containerInfo);break;case 10:var x=c.type._context,k=c.memoizedProps.value;Fr(qn,x._currentValue),x._currentValue=k;break;case 13:if(x=c.memoizedState,x!==null)return x.dehydrated!==null?(Fr(nn,nn.current&1),c.flags|=128,null):(f&c.child.childLanes)!==0?Hx(a,c,f):(Fr(nn,nn.current&1),a=_l(a,c,f),a!==null?a.sibling:null);Fr(nn,nn.current&1);break;case 19:if(x=(f&c.childLanes)!==0,(a.flags&128)!==0){if(x)return Kx(a,c,f);c.flags|=128}if(k=c.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),Fr(nn,nn.current),x)break;return null;case 22:case 23:return c.lanes=0,Dx(a,c,f)}return _l(a,c,f)}var Jx,rg,Yx,Qx;Jx=function(a,c){for(var f=c.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},rg=function(){},Yx=function(a,c,f,x){var k=a.memoizedProps;if(k!==x){a=c.stateNode,la(ni.current);var L=null;switch(f){case"input":k=ge(a,k),x=ge(a,x),L=[];break;case"select":k=we({},k,{value:void 0}),x=we({},x,{value:void 0}),L=[];break;case"textarea":k=Jt(a,k),x=Jt(a,x),L=[];break;default:typeof k.onClick!="function"&&typeof x.onClick=="function"&&(a.onclick=ec)}sr(f,x);var K;f=null;for(ze in k)if(!x.hasOwnProperty(ze)&&k.hasOwnProperty(ze)&&k[ze]!=null)if(ze==="style"){var pe=k[ze];for(K in pe)pe.hasOwnProperty(K)&&(f||(f={}),f[K]="")}else ze!=="dangerouslySetInnerHTML"&&ze!=="children"&&ze!=="suppressContentEditableWarning"&&ze!=="suppressHydrationWarning"&&ze!=="autoFocus"&&(o.hasOwnProperty(ze)?L||(L=[]):(L=L||[]).push(ze,null));for(ze in x){var ve=x[ze];if(pe=k!=null?k[ze]:void 0,x.hasOwnProperty(ze)&&ve!==pe&&(ve!=null||pe!=null))if(ze==="style")if(pe){for(K in pe)!pe.hasOwnProperty(K)||ve&&ve.hasOwnProperty(K)||(f||(f={}),f[K]="");for(K in ve)ve.hasOwnProperty(K)&&pe[K]!==ve[K]&&(f||(f={}),f[K]=ve[K])}else f||(L||(L=[]),L.push(ze,f)),f=ve;else ze==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,pe=pe?pe.__html:void 0,ve!=null&&pe!==ve&&(L=L||[]).push(ze,ve)):ze==="children"?typeof ve!="string"&&typeof ve!="number"||(L=L||[]).push(ze,""+ve):ze!=="suppressContentEditableWarning"&&ze!=="suppressHydrationWarning"&&(o.hasOwnProperty(ze)?(ve!=null&&ze==="onScroll"&&$r("scroll",a),L||pe===ve||(L=[])):(L=L||[]).push(ze,ve))}f&&(L=L||[]).push("style",f);var ze=L;(c.updateQueue=ze)&&(c.flags|=4)}},Qx=function(a,c,f,x){f!==x&&(c.flags|=4)};function Nh(a,c){if(!qe)switch(a.tailMode){case"hidden":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:x.sibling=null}}function so(a){var c=a.alternate!==null&&a.alternate.child===a.child,f=0,x=0;if(c)for(var k=a.child;k!==null;)f|=k.lanes|k.childLanes,x|=k.subtreeFlags&14680064,x|=k.flags&14680064,k.return=a,k=k.sibling;else for(k=a.child;k!==null;)f|=k.lanes|k.childLanes,x|=k.subtreeFlags,x|=k.flags,k.return=a,k=k.sibling;return a.subtreeFlags|=x,a.childLanes=f,c}function v4(a,c,f){var x=c.pendingProps;switch(Ne(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return so(c),null;case 1:return io(c.type)&&tu(),so(c),null;case 3:return x=c.stateNode,Ls(),Pr(no),Pr(di),Eh(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(a===null||a.child===null)&&(mn(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Ue!==null&&(fg(Ue),Ue=null))),rg(a,c),so(c),null;case 5:jh(c);var k=la(za.current);if(f=c.type,a!==null&&c.stateNode!=null)Yx(a,c,f,x,k),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!x){if(c.stateNode===null)throw Error(t(166));return so(c),null}if(a=la(ni.current),mn(c)){x=c.stateNode,f=c.type;var L=c.memoizedProps;switch(x[Bs]=c,x[tc]=L,a=(c.mode&1)!==0,f){case"dialog":$r("cancel",x),$r("close",x);break;case"iframe":case"object":case"embed":$r("load",x);break;case"video":case"audio":for(k=0;k<Ba.length;k++)$r(Ba[k],x);break;case"source":$r("error",x);break;case"img":case"image":case"link":$r("error",x),$r("load",x);break;case"details":$r("toggle",x);break;case"input":le(x,L),$r("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!L.multiple},$r("invalid",x);break;case"textarea":At(x,L),$r("invalid",x)}sr(f,L),k=null;for(var K in L)if(L.hasOwnProperty(K)){var pe=L[K];K==="children"?typeof pe=="string"?x.textContent!==pe&&(L.suppressHydrationWarning!==!0&&eu(x.textContent,pe,a),k=["children",pe]):typeof pe=="number"&&x.textContent!==""+pe&&(L.suppressHydrationWarning!==!0&&eu(x.textContent,pe,a),k=["children",""+pe]):o.hasOwnProperty(K)&&pe!=null&&K==="onScroll"&&$r("scroll",x)}switch(f){case"input":He(x),lt(x,L,!0);break;case"textarea":He(x),zt(x);break;case"select":case"option":break;default:typeof L.onClick=="function"&&(x.onclick=ec)}x=k,c.updateQueue=x,x!==null&&(c.flags|=4)}else{K=k.nodeType===9?k:k.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Ut(f)),a==="http://www.w3.org/1999/xhtml"?f==="script"?(a=K.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof x.is=="string"?a=K.createElement(f,{is:x.is}):(a=K.createElement(f),f==="select"&&(K=a,x.multiple?K.multiple=!0:x.size&&(K.size=x.size))):a=K.createElementNS(a,f),a[Bs]=c,a[tc]=x,Jx(a,c,!1,!1),c.stateNode=a;e:{switch(K=Rt(f,x),f){case"dialog":$r("cancel",a),$r("close",a),k=x;break;case"iframe":case"object":case"embed":$r("load",a),k=x;break;case"video":case"audio":for(k=0;k<Ba.length;k++)$r(Ba[k],a);k=x;break;case"source":$r("error",a),k=x;break;case"img":case"image":case"link":$r("error",a),$r("load",a),k=x;break;case"details":$r("toggle",a),k=x;break;case"input":le(a,x),k=ge(a,x),$r("invalid",a);break;case"option":k=x;break;case"select":a._wrapperState={wasMultiple:!!x.multiple},k=we({},x,{value:void 0}),$r("invalid",a);break;case"textarea":At(a,x),k=Jt(a,x),$r("invalid",a);break;default:k=x}sr(f,k),pe=k;for(L in pe)if(pe.hasOwnProperty(L)){var ve=pe[L];L==="style"?mt(a,ve):L==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,ve!=null&&kt(a,ve)):L==="children"?typeof ve=="string"?(f!=="textarea"||ve!=="")&&Pt(a,ve):typeof ve=="number"&&Pt(a,""+ve):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(o.hasOwnProperty(L)?ve!=null&&L==="onScroll"&&$r("scroll",a):ve!=null&&F(a,L,ve,K))}switch(f){case"input":He(a),lt(a,x,!1);break;case"textarea":He(a),zt(a);break;case"option":x.value!=null&&a.setAttribute("value",""+ke(x.value));break;case"select":a.multiple=!!x.multiple,L=x.value,L!=null?tt(a,!!x.multiple,L,!1):x.defaultValue!=null&&tt(a,!!x.multiple,x.defaultValue,!0);break;default:typeof k.onClick=="function"&&(a.onclick=ec)}switch(f){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return so(c),null;case 6:if(a&&c.stateNode!=null)Qx(a,c,a.memoizedProps,x);else{if(typeof x!="string"&&c.stateNode===null)throw Error(t(166));if(f=la(za.current),la(ni.current),mn(c)){if(x=c.stateNode,f=c.memoizedProps,x[Bs]=c,(L=x.nodeValue!==f)&&(a=Ve,a!==null))switch(a.tag){case 3:eu(x.nodeValue,f,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&eu(x.nodeValue,f,(a.mode&1)!==0)}L&&(c.flags|=4)}else x=(f.nodeType===9?f:f.ownerDocument).createTextNode(x),x[Bs]=c,c.stateNode=x}return so(c),null;case 13:if(Pr(nn),x=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(qe&&Oe!==null&&(c.mode&1)!==0&&(c.flags&128)===0)rr(),ft(),c.flags|=98560,L=!1;else if(L=mn(c),x!==null&&x.dehydrated!==null){if(a===null){if(!L)throw Error(t(318));if(L=c.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(t(317));L[Bs]=c}else ft(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;so(c),L=!1}else Ue!==null&&(fg(Ue),Ue=null),L=!0;if(!L)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=f,c):(x=x!==null,x!==(a!==null&&a.memoizedState!==null)&&x&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(nn.current&1)!==0?hi===0&&(hi=3):gg())),c.updateQueue!==null&&(c.flags|=4),so(c),null);case 4:return Ls(),rg(a,c),a===null&&gl(c.stateNode.containerInfo),so(c),null;case 10:return an(c.type._context),so(c),null;case 17:return io(c.type)&&tu(),so(c),null;case 19:if(Pr(nn),L=c.memoizedState,L===null)return so(c),null;if(x=(c.flags&128)!==0,K=L.rendering,K===null)if(x)Nh(L,!1);else{if(hi!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(K=hs(a),K!==null){for(c.flags|=128,Nh(L,!1),x=K.updateQueue,x!==null&&(c.updateQueue=x,c.flags|=4),c.subtreeFlags=0,x=f,f=c.child;f!==null;)L=f,a=x,L.flags&=14680066,K=L.alternate,K===null?(L.childLanes=0,L.lanes=a,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=K.childLanes,L.lanes=K.lanes,L.child=K.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=K.memoizedProps,L.memoizedState=K.memoizedState,L.updateQueue=K.updateQueue,L.type=K.type,a=K.dependencies,L.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),f=f.sibling;return Fr(nn,nn.current&1|2),c.child}a=a.sibling}L.tail!==null&&Er()>pu&&(c.flags|=128,x=!0,Nh(L,!1),c.lanes=4194304)}else{if(!x)if(a=hs(K),a!==null){if(c.flags|=128,x=!0,f=a.updateQueue,f!==null&&(c.updateQueue=f,c.flags|=4),Nh(L,!0),L.tail===null&&L.tailMode==="hidden"&&!K.alternate&&!qe)return so(c),null}else 2*Er()-L.renderingStartTime>pu&&f!==1073741824&&(c.flags|=128,x=!0,Nh(L,!1),c.lanes=4194304);L.isBackwards?(K.sibling=c.child,c.child=K):(f=L.last,f!==null?f.sibling=K:c.child=K,L.last=K)}return L.tail!==null?(c=L.tail,L.rendering=c,L.tail=c.sibling,L.renderingStartTime=Er(),c.sibling=null,f=nn.current,Fr(nn,x?f&1|2:f&1),c):(so(c),null);case 22:case 23:return mg(),x=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==x&&(c.flags|=8192),x&&(c.mode&1)!==0?(ms&1073741824)!==0&&(so(c),c.subtreeFlags&6&&(c.flags|=8192)):so(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function w4(a,c){switch(Ne(c),c.tag){case 1:return io(c.type)&&tu(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Ls(),Pr(no),Pr(di),Eh(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return jh(c),null;case 13:if(Pr(nn),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(t(340));ft()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return Pr(nn),null;case 4:return Ls(),null;case 10:return an(c.type._context),null;case 22:case 23:return mg(),null;case 24:return null;default:return null}}var gp=!1,ao=!1,S4=typeof WeakSet=="function"?WeakSet:Set,pt=null;function hu(a,c){var f=a.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(x){Bn(a,c,x)}else f.current=null}function ng(a,c,f){try{f()}catch(x){Bn(a,c,x)}}var Xx=!1;function _4(a,c){if(Zc=is,a=En(),cs(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var x=f.getSelection&&f.getSelection();if(x&&x.rangeCount!==0){f=x.anchorNode;var k=x.anchorOffset,L=x.focusNode;x=x.focusOffset;try{f.nodeType,L.nodeType}catch{f=null;break e}var K=0,pe=-1,ve=-1,ze=0,Je=0,Ye=a,Ke=null;t:for(;;){for(var ct;Ye!==f||k!==0&&Ye.nodeType!==3||(pe=K+k),Ye!==L||x!==0&&Ye.nodeType!==3||(ve=K+x),Ye.nodeType===3&&(K+=Ye.nodeValue.length),(ct=Ye.firstChild)!==null;)Ke=Ye,Ye=ct;for(;;){if(Ye===a)break t;if(Ke===f&&++ze===k&&(pe=K),Ke===L&&++Je===x&&(ve=K),(ct=Ye.nextSibling)!==null)break;Ye=Ke,Ke=Ye.parentNode}Ye=ct}f=pe===-1||ve===-1?null:{start:pe,end:ve}}else f=null}f=f||{start:0,end:0}}else f=null;for(yl={focusedElem:a,selectionRange:f},is=!1,pt=c;pt!==null;)if(c=pt,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,pt=a;else for(;pt!==null;){c=pt;try{var bt=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(bt!==null){var _t=bt.memoizedProps,Hn=bt.memoizedState,Pe=c.stateNode,Te=Pe.getSnapshotBeforeUpdate(c.elementType===c.type?_t:ua(c.type,_t),Hn);Pe.__reactInternalSnapshotBeforeUpdate=Te}break;case 3:var Le=c.stateNode.containerInfo;Le.nodeType===1?Le.textContent="":Le.nodeType===9&&Le.documentElement&&Le.removeChild(Le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(et){Bn(c,c.return,et)}if(a=c.sibling,a!==null){a.return=c.return,pt=a;break}pt=c.return}return bt=Xx,Xx=!1,bt}function Bh(a,c,f){var x=c.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var k=x=x.next;do{if((k.tag&a)===a){var L=k.destroy;k.destroy=void 0,L!==void 0&&ng(c,f,L)}k=k.next}while(k!==x)}}function xp(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&a)===a){var x=f.create;f.destroy=x()}f=f.next}while(f!==c)}}function ig(a){var c=a.ref;if(c!==null){var f=a.stateNode;switch(a.tag){case 5:a=f;break;default:a=f}typeof c=="function"?c(a):c.current=a}}function Zx(a){var c=a.alternate;c!==null&&(a.alternate=null,Zx(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[Bs],delete c[tc],delete c[ro],delete c[W0],delete c[$0])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function ey(a){return a.tag===5||a.tag===3||a.tag===4}function ty(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||ey(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function og(a,c,f){var x=a.tag;if(x===5||x===6)a=a.stateNode,c?f.nodeType===8?f.parentNode.insertBefore(a,c):f.insertBefore(a,c):(f.nodeType===8?(c=f.parentNode,c.insertBefore(a,f)):(c=f,c.appendChild(a)),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=ec));else if(x!==4&&(a=a.child,a!==null))for(og(a,c,f),a=a.sibling;a!==null;)og(a,c,f),a=a.sibling}function sg(a,c,f){var x=a.tag;if(x===5||x===6)a=a.stateNode,c?f.insertBefore(a,c):f.appendChild(a);else if(x!==4&&(a=a.child,a!==null))for(sg(a,c,f),a=a.sibling;a!==null;)sg(a,c,f),a=a.sibling}var $i=null,ha=!1;function lc(a,c,f){for(f=f.child;f!==null;)ry(a,c,f),f=f.sibling}function ry(a,c,f){if(xi&&typeof xi.onCommitFiberUnmount=="function")try{xi.onCommitFiberUnmount(Ts,f)}catch{}switch(f.tag){case 5:ao||hu(f,c);case 6:var x=$i,k=ha;$i=null,lc(a,c,f),$i=x,ha=k,$i!==null&&(ha?(a=$i,f=f.stateNode,a.nodeType===8?a.parentNode.removeChild(f):a.removeChild(f)):$i.removeChild(f.stateNode));break;case 18:$i!==null&&(ha?(a=$i,f=f.stateNode,a.nodeType===8?Ch(a.parentNode,f):a.nodeType===1&&Ch(a,f),_o(a)):Ch($i,f.stateNode));break;case 4:x=$i,k=ha,$i=f.stateNode.containerInfo,ha=!0,lc(a,c,f),$i=x,ha=k;break;case 0:case 11:case 14:case 15:if(!ao&&(x=f.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){k=x=x.next;do{var L=k,K=L.destroy;L=L.tag,K!==void 0&&((L&2)!==0||(L&4)!==0)&&ng(f,c,K),k=k.next}while(k!==x)}lc(a,c,f);break;case 1:if(!ao&&(hu(f,c),x=f.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=f.memoizedProps,x.state=f.memoizedState,x.componentWillUnmount()}catch(pe){Bn(f,c,pe)}lc(a,c,f);break;case 21:lc(a,c,f);break;case 22:f.mode&1?(ao=(x=ao)||f.memoizedState!==null,lc(a,c,f),ao=x):lc(a,c,f);break;default:lc(a,c,f)}}function ny(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var f=a.stateNode;f===null&&(f=a.stateNode=new S4),c.forEach(function(x){var k=P4.bind(null,a,x);f.has(x)||(f.add(x),x.then(k,k))})}}function fa(a,c){var f=c.deletions;if(f!==null)for(var x=0;x<f.length;x++){var k=f[x];try{var L=a,K=c,pe=K;e:for(;pe!==null;){switch(pe.tag){case 5:$i=pe.stateNode,ha=!1;break e;case 3:$i=pe.stateNode.containerInfo,ha=!0;break e;case 4:$i=pe.stateNode.containerInfo,ha=!0;break e}pe=pe.return}if($i===null)throw Error(t(160));ry(L,K,k),$i=null,ha=!1;var ve=k.alternate;ve!==null&&(ve.return=null),k.return=null}catch(ze){Bn(k,c,ze)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)iy(c,a),c=c.sibling}function iy(a,c){var f=a.alternate,x=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(fa(c,a),Oa(a),x&4){try{Bh(3,a,a.return),xp(3,a)}catch(_t){Bn(a,a.return,_t)}try{Bh(5,a,a.return)}catch(_t){Bn(a,a.return,_t)}}break;case 1:fa(c,a),Oa(a),x&512&&f!==null&&hu(f,f.return);break;case 5:if(fa(c,a),Oa(a),x&512&&f!==null&&hu(f,f.return),a.flags&32){var k=a.stateNode;try{Pt(k,"")}catch(_t){Bn(a,a.return,_t)}}if(x&4&&(k=a.stateNode,k!=null)){var L=a.memoizedProps,K=f!==null?f.memoizedProps:L,pe=a.type,ve=a.updateQueue;if(a.updateQueue=null,ve!==null)try{pe==="input"&&L.type==="radio"&&L.name!=null&&at(k,L),Rt(pe,K);var ze=Rt(pe,L);for(K=0;K<ve.length;K+=2){var Je=ve[K],Ye=ve[K+1];Je==="style"?mt(k,Ye):Je==="dangerouslySetInnerHTML"?kt(k,Ye):Je==="children"?Pt(k,Ye):F(k,Je,Ye,ze)}switch(pe){case"input":dt(k,L);break;case"textarea":mr(k,L);break;case"select":var Ke=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!L.multiple;var ct=L.value;ct!=null?tt(k,!!L.multiple,ct,!1):Ke!==!!L.multiple&&(L.defaultValue!=null?tt(k,!!L.multiple,L.defaultValue,!0):tt(k,!!L.multiple,L.multiple?[]:"",!1))}k[tc]=L}catch(_t){Bn(a,a.return,_t)}}break;case 6:if(fa(c,a),Oa(a),x&4){if(a.stateNode===null)throw Error(t(162));k=a.stateNode,L=a.memoizedProps;try{k.nodeValue=L}catch(_t){Bn(a,a.return,_t)}}break;case 3:if(fa(c,a),Oa(a),x&4&&f!==null&&f.memoizedState.isDehydrated)try{_o(c.containerInfo)}catch(_t){Bn(a,a.return,_t)}break;case 4:fa(c,a),Oa(a);break;case 13:fa(c,a),Oa(a),k=a.child,k.flags&8192&&(L=k.memoizedState!==null,k.stateNode.isHidden=L,!L||k.alternate!==null&&k.alternate.memoizedState!==null||(cg=Er())),x&4&&ny(a);break;case 22:if(Je=f!==null&&f.memoizedState!==null,a.mode&1?(ao=(ze=ao)||Je,fa(c,a),ao=ze):fa(c,a),Oa(a),x&8192){if(ze=a.memoizedState!==null,(a.stateNode.isHidden=ze)&&!Je&&(a.mode&1)!==0)for(pt=a,Je=a.child;Je!==null;){for(Ye=pt=Je;pt!==null;){switch(Ke=pt,ct=Ke.child,Ke.tag){case 0:case 11:case 14:case 15:Bh(4,Ke,Ke.return);break;case 1:hu(Ke,Ke.return);var bt=Ke.stateNode;if(typeof bt.componentWillUnmount=="function"){x=Ke,f=Ke.return;try{c=x,bt.props=c.memoizedProps,bt.state=c.memoizedState,bt.componentWillUnmount()}catch(_t){Bn(x,f,_t)}}break;case 5:hu(Ke,Ke.return);break;case 22:if(Ke.memoizedState!==null){ay(Ye);continue}}ct!==null?(ct.return=Ke,pt=ct):ay(Ye)}Je=Je.sibling}e:for(Je=null,Ye=a;;){if(Ye.tag===5){if(Je===null){Je=Ye;try{k=Ye.stateNode,ze?(L=k.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none"):(pe=Ye.stateNode,ve=Ye.memoizedProps.style,K=ve!=null&&ve.hasOwnProperty("display")?ve.display:null,pe.style.display=ir("display",K))}catch(_t){Bn(a,a.return,_t)}}}else if(Ye.tag===6){if(Je===null)try{Ye.stateNode.nodeValue=ze?"":Ye.memoizedProps}catch(_t){Bn(a,a.return,_t)}}else if((Ye.tag!==22&&Ye.tag!==23||Ye.memoizedState===null||Ye===a)&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===a)break e;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===a)break e;Je===Ye&&(Je=null),Ye=Ye.return}Je===Ye&&(Je=null),Ye.sibling.return=Ye.return,Ye=Ye.sibling}}break;case 19:fa(c,a),Oa(a),x&4&&ny(a);break;case 21:break;default:fa(c,a),Oa(a)}}function Oa(a){var c=a.flags;if(c&2){try{e:{for(var f=a.return;f!==null;){if(ey(f)){var x=f;break e}f=f.return}throw Error(t(160))}switch(x.tag){case 5:var k=x.stateNode;x.flags&32&&(Pt(k,""),x.flags&=-33);var L=ty(a);sg(a,L,k);break;case 3:case 4:var K=x.stateNode.containerInfo,pe=ty(a);og(a,pe,K);break;default:throw Error(t(161))}}catch(ve){Bn(a,a.return,ve)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function T4(a,c,f){pt=a,oy(a)}function oy(a,c,f){for(var x=(a.mode&1)!==0;pt!==null;){var k=pt,L=k.child;if(k.tag===22&&x){var K=k.memoizedState!==null||gp;if(!K){var pe=k.alternate,ve=pe!==null&&pe.memoizedState!==null||ao;pe=gp;var ze=ao;if(gp=K,(ao=ve)&&!ze)for(pt=k;pt!==null;)K=pt,ve=K.child,K.tag===22&&K.memoizedState!==null?ly(k):ve!==null?(ve.return=K,pt=ve):ly(k);for(;L!==null;)pt=L,oy(L),L=L.sibling;pt=k,gp=pe,ao=ze}sy(a)}else(k.subtreeFlags&8772)!==0&&L!==null?(L.return=k,pt=L):sy(a)}}function sy(a){for(;pt!==null;){var c=pt;if((c.flags&8772)!==0){var f=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:ao||xp(5,c);break;case 1:var x=c.stateNode;if(c.flags&4&&!ao)if(f===null)x.componentDidMount();else{var k=c.elementType===c.type?f.memoizedProps:ua(c.type,f.memoizedProps);x.componentDidUpdate(k,f.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var L=c.updateQueue;L!==null&&Ho(c,L,x);break;case 3:var K=c.updateQueue;if(K!==null){if(f=null,c.child!==null)switch(c.child.tag){case 5:f=c.child.stateNode;break;case 1:f=c.child.stateNode}Ho(c,K,f)}break;case 5:var pe=c.stateNode;if(f===null&&c.flags&4){f=pe;var ve=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":ve.autoFocus&&f.focus();break;case"img":ve.src&&(f.src=ve.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ze=c.alternate;if(ze!==null){var Je=ze.memoizedState;if(Je!==null){var Ye=Je.dehydrated;Ye!==null&&_o(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ao||c.flags&512&&ig(c)}catch(Ke){Bn(c,c.return,Ke)}}if(c===a){pt=null;break}if(f=c.sibling,f!==null){f.return=c.return,pt=f;break}pt=c.return}}function ay(a){for(;pt!==null;){var c=pt;if(c===a){pt=null;break}var f=c.sibling;if(f!==null){f.return=c.return,pt=f;break}pt=c.return}}function ly(a){for(;pt!==null;){var c=pt;try{switch(c.tag){case 0:case 11:case 15:var f=c.return;try{xp(4,c)}catch(ve){Bn(c,f,ve)}break;case 1:var x=c.stateNode;if(typeof x.componentDidMount=="function"){var k=c.return;try{x.componentDidMount()}catch(ve){Bn(c,k,ve)}}var L=c.return;try{ig(c)}catch(ve){Bn(c,L,ve)}break;case 5:var K=c.return;try{ig(c)}catch(ve){Bn(c,K,ve)}}}catch(ve){Bn(c,c.return,ve)}if(c===a){pt=null;break}var pe=c.sibling;if(pe!==null){pe.return=c.return,pt=pe;break}pt=c.return}}var C4=Math.ceil,yp=B.ReactCurrentDispatcher,ag=B.ReactCurrentOwner,Vs=B.ReactCurrentBatchConfig,Cr=0,ji=null,ii=null,qi=0,ms=0,fu=ds(0),hi=0,Lh=null,od=0,bp=0,lg=0,Fh=null,Ko=null,cg=0,pu=1/0,Tl=null,vp=!1,dg=null,cc=null,wp=!1,dc=null,Sp=0,zh=0,ug=null,_p=-1,Tp=0;function Eo(){return(Cr&6)!==0?Er():_p!==-1?_p:_p=Er()}function uc(a){return(a.mode&1)===0?1:(Cr&2)!==0&&qi!==0?qi&-qi:Tn.transition!==null?(Tp===0&&(Tp=nl()),Tp):(a=or,a!==0||(a=window.event,a=a===void 0?16:ss(a.type)),a)}function pa(a,c,f,x){if(50<zh)throw zh=0,ug=null,Error(t(185));Ys(a,f,x),((Cr&2)===0||a!==ji)&&(a===ji&&((Cr&2)===0&&(bp|=f),hi===4&&hc(a,qi)),Jo(a,x),f===1&&Cr===0&&(c.mode&1)===0&&(pu=Er()+500,td&&D()))}function Jo(a,c){var f=a.callbackNode;Mr(a,c);var x=Mn(a,a===ji?qi:0);if(x===0)f!==null&&es(f),a.callbackNode=null,a.callbackPriority=0;else if(c=x&-x,a.callbackPriority!==c){if(f!=null&&es(f),c===1)a.tag===0?E(dy.bind(null,a)):v(dy.bind(null,a)),M0(function(){(Cr&6)===0&&D()}),f=null;else{switch(li(x)){case 1:f=Ks;break;case 4:f=gi;break;case 16:f=rs;break;case 536870912:f=_s;break;default:f=rs}f=yy(f,cy.bind(null,a))}a.callbackPriority=c,a.callbackNode=f}}function cy(a,c){if(_p=-1,Tp=0,(Cr&6)!==0)throw Error(t(327));var f=a.callbackNode;if(mu()&&a.callbackNode!==f)return null;var x=Mn(a,a===ji?qi:0);if(x===0)return null;if((x&30)!==0||(x&a.expiredLanes)!==0||c)c=Cp(a,x);else{c=x;var k=Cr;Cr|=2;var L=hy();(ji!==a||qi!==c)&&(Tl=null,pu=Er()+500,ad(a,c));do try{j4();break}catch(pe){uy(a,pe)}while(!0);_r(),yp.current=L,Cr=k,ii!==null?c=0:(ji=null,qi=0,c=hi)}if(c!==0){if(c===2&&(k=Js(a),k!==0&&(x=k,c=hg(a,k))),c===1)throw f=Lh,ad(a,0),hc(a,x),Jo(a,Er()),f;if(c===6)hc(a,x);else{if(k=a.current.alternate,(x&30)===0&&!A4(k)&&(c=Cp(a,x),c===2&&(L=Js(a),L!==0&&(x=L,c=hg(a,L))),c===1))throw f=Lh,ad(a,0),hc(a,x),Jo(a,Er()),f;switch(a.finishedWork=k,a.finishedLanes=x,c){case 0:case 1:throw Error(t(345));case 2:ld(a,Ko,Tl);break;case 3:if(hc(a,x),(x&130023424)===x&&(c=cg+500-Er(),10<c)){if(Mn(a,0)!==0)break;if(k=a.suspendedLanes,(k&x)!==x){Eo(),a.pingedLanes|=a.suspendedLanes&k;break}a.timeoutHandle=Th(ld.bind(null,a,Ko,Tl),c);break}ld(a,Ko,Tl);break;case 4:if(hc(a,x),(x&4194240)===x)break;for(c=a.eventTimes,k=-1;0<x;){var K=31-Zn(x);L=1<<K,K=c[K],K>k&&(k=K),x&=~L}if(x=k,x=Er()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*C4(x/1960))-x,10<x){a.timeoutHandle=Th(ld.bind(null,a,Ko,Tl),x);break}ld(a,Ko,Tl);break;case 5:ld(a,Ko,Tl);break;default:throw Error(t(329))}}}return Jo(a,Er()),a.callbackNode===f?cy.bind(null,a):null}function hg(a,c){var f=Fh;return a.current.memoizedState.isDehydrated&&(ad(a,c).flags|=256),a=Cp(a,c),a!==2&&(c=Ko,Ko=f,c!==null&&fg(c)),a}function fg(a){Ko===null?Ko=a:Ko.push.apply(Ko,a)}function A4(a){for(var c=a;;){if(c.flags&16384){var f=c.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var x=0;x<f.length;x++){var k=f[x],L=k.getSnapshot;k=k.value;try{if(!fn(L(),k))return!1}catch{return!1}}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function hc(a,c){for(c&=~lg,c&=~bp,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var f=31-Zn(c),x=1<<f;a[f]=-1,c&=~x}}function dy(a){if((Cr&6)!==0)throw Error(t(327));mu();var c=Mn(a,0);if((c&1)===0)return Jo(a,Er()),null;var f=Cp(a,c);if(a.tag!==0&&f===2){var x=Js(a);x!==0&&(c=x,f=hg(a,x))}if(f===1)throw f=Lh,ad(a,0),hc(a,c),Jo(a,Er()),f;if(f===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,ld(a,Ko,Tl),Jo(a,Er()),null}function pg(a,c){var f=Cr;Cr|=1;try{return a(c)}finally{Cr=f,Cr===0&&(pu=Er()+500,td&&D())}}function sd(a){dc!==null&&dc.tag===0&&(Cr&6)===0&&mu();var c=Cr;Cr|=1;var f=Vs.transition,x=or;try{if(Vs.transition=null,or=1,a)return a()}finally{or=x,Vs.transition=f,Cr=c,(Cr&6)===0&&D()}}function mg(){ms=fu.current,Pr(fu)}function ad(a,c){a.finishedWork=null,a.finishedLanes=0;var f=a.timeoutHandle;if(f!==-1&&(a.timeoutHandle=-1,np(f)),ii!==null)for(f=ii.return;f!==null;){var x=f;switch(Ne(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&tu();break;case 3:Ls(),Pr(no),Pr(di),Eh();break;case 5:jh(x);break;case 4:Ls();break;case 13:Pr(nn);break;case 19:Pr(nn);break;case 10:an(x.type._context);break;case 22:case 23:mg()}f=f.return}if(ji=a,ii=a=fc(a.current,null),qi=ms=c,hi=0,Lh=null,lg=bp=od=0,Ko=Fh=null,qr!==null){for(c=0;c<qr.length;c++)if(f=qr[c],x=f.interleaved,x!==null){f.interleaved=null;var k=x.next,L=f.pending;if(L!==null){var K=L.next;L.next=k,x.next=K}f.pending=x}qr=null}return a}function uy(a,c){do{var f=ii;try{if(_r(),ru.current=hp,oc){for(var x=ln.memoizedState;x!==null;){var k=x.queue;k!==null&&(k.pending=null),x=x.next}oc=!1}if(Fs=0,jn=Nn=ln=null,ca=!1,sc=0,ag.current=null,f===null||f.return===null){hi=1,Lh=c,ii=null;break}e:{var L=a,K=f.return,pe=f,ve=c;if(c=qi,pe.flags|=32768,ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var ze=ve,Je=pe,Ye=Je.tag;if((Je.mode&1)===0&&(Ye===0||Ye===11||Ye===15)){var Ke=Je.alternate;Ke?(Je.updateQueue=Ke.updateQueue,Je.memoizedState=Ke.memoizedState,Je.lanes=Ke.lanes):(Je.updateQueue=null,Je.memoizedState=null)}var ct=Fx(K);if(ct!==null){ct.flags&=-257,zx(ct,K,pe,L,c),ct.mode&1&&Lx(L,ze,c),c=ct,ve=ze;var bt=c.updateQueue;if(bt===null){var _t=new Set;_t.add(ve),c.updateQueue=_t}else bt.add(ve);break e}else{if((c&1)===0){Lx(L,ze,c),gg();break e}ve=Error(t(426))}}else if(qe&&pe.mode&1){var Hn=Fx(K);if(Hn!==null){(Hn.flags&65536)===0&&(Hn.flags|=256),zx(Hn,K,pe,L,c),ot(uu(ve,pe));break e}}L=ve=uu(ve,pe),hi!==4&&(hi=2),Fh===null?Fh=[L]:Fh.push(L),L=K;do{switch(L.tag){case 3:L.flags|=65536,c&=-c,L.lanes|=c;var Pe=Nx(L,ve,c);Hr(L,Pe);break e;case 1:pe=ve;var Te=L.type,Le=L.stateNode;if((L.flags&128)===0&&(typeof Te.getDerivedStateFromError=="function"||Le!==null&&typeof Le.componentDidCatch=="function"&&(cc===null||!cc.has(Le)))){L.flags|=65536,c&=-c,L.lanes|=c;var et=Bx(L,pe,c);Hr(L,et);break e}}L=L.return}while(L!==null)}py(f)}catch(jt){c=jt,ii===f&&f!==null&&(ii=f=f.return);continue}break}while(!0)}function hy(){var a=yp.current;return yp.current=hp,a===null?hp:a}function gg(){(hi===0||hi===3||hi===2)&&(hi=4),ji===null||(od&268435455)===0&&(bp&268435455)===0||hc(ji,qi)}function Cp(a,c){var f=Cr;Cr|=2;var x=hy();(ji!==a||qi!==c)&&(Tl=null,ad(a,c));do try{k4();break}catch(k){uy(a,k)}while(!0);if(_r(),Cr=f,yp.current=x,ii!==null)throw Error(t(261));return ji=null,qi=0,hi}function k4(){for(;ii!==null;)fy(ii)}function j4(){for(;ii!==null&&!Lo();)fy(ii)}function fy(a){var c=xy(a.alternate,a,ms);a.memoizedProps=a.pendingProps,c===null?py(a):ii=c,ag.current=null}function py(a){var c=a;do{var f=c.alternate;if(a=c.return,(c.flags&32768)===0){if(f=v4(f,c,ms),f!==null){ii=f;return}}else{if(f=w4(f,c),f!==null){f.flags&=32767,ii=f;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{hi=6,ii=null;return}}if(c=c.sibling,c!==null){ii=c;return}ii=c=a}while(c!==null);hi===0&&(hi=5)}function ld(a,c,f){var x=or,k=Vs.transition;try{Vs.transition=null,or=1,I4(a,c,f,x)}finally{Vs.transition=k,or=x}return null}function I4(a,c,f,x){do mu();while(dc!==null);if((Cr&6)!==0)throw Error(t(327));f=a.finishedWork;var k=a.finishedLanes;if(f===null)return null;if(a.finishedWork=null,a.finishedLanes=0,f===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var L=f.lanes|f.childLanes;if(zo(a,L),a===ji&&(ii=ji=null,qi=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||wp||(wp=!0,yy(rs,function(){return mu(),null})),L=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||L){L=Vs.transition,Vs.transition=null;var K=or;or=1;var pe=Cr;Cr|=4,ag.current=null,_4(a,f),iy(f,a),Uc(yl),is=!!Zc,yl=Zc=null,a.current=f,T4(f),ts(),Cr=pe,or=K,Vs.transition=L}else a.current=f;if(wp&&(wp=!1,dc=a,Sp=k),L=a.pendingLanes,L===0&&(cc=null),rl(f.stateNode),Jo(a,Er()),c!==null)for(x=a.onRecoverableError,f=0;f<c.length;f++)k=c[f],x(k.value,{componentStack:k.stack,digest:k.digest});if(vp)throw vp=!1,a=dg,dg=null,a;return(Sp&1)!==0&&a.tag!==0&&mu(),L=a.pendingLanes,(L&1)!==0?a===ug?zh++:(zh=0,ug=a):zh=0,D(),null}function mu(){if(dc!==null){var a=li(Sp),c=Vs.transition,f=or;try{if(Vs.transition=null,or=16>a?16:a,dc===null)var x=!1;else{if(a=dc,dc=null,Sp=0,(Cr&6)!==0)throw Error(t(331));var k=Cr;for(Cr|=4,pt=a.current;pt!==null;){var L=pt,K=L.child;if((pt.flags&16)!==0){var pe=L.deletions;if(pe!==null){for(var ve=0;ve<pe.length;ve++){var ze=pe[ve];for(pt=ze;pt!==null;){var Je=pt;switch(Je.tag){case 0:case 11:case 15:Bh(8,Je,L)}var Ye=Je.child;if(Ye!==null)Ye.return=Je,pt=Ye;else for(;pt!==null;){Je=pt;var Ke=Je.sibling,ct=Je.return;if(Zx(Je),Je===ze){pt=null;break}if(Ke!==null){Ke.return=ct,pt=Ke;break}pt=ct}}}var bt=L.alternate;if(bt!==null){var _t=bt.child;if(_t!==null){bt.child=null;do{var Hn=_t.sibling;_t.sibling=null,_t=Hn}while(_t!==null)}}pt=L}}if((L.subtreeFlags&2064)!==0&&K!==null)K.return=L,pt=K;else e:for(;pt!==null;){if(L=pt,(L.flags&2048)!==0)switch(L.tag){case 0:case 11:case 15:Bh(9,L,L.return)}var Pe=L.sibling;if(Pe!==null){Pe.return=L.return,pt=Pe;break e}pt=L.return}}var Te=a.current;for(pt=Te;pt!==null;){K=pt;var Le=K.child;if((K.subtreeFlags&2064)!==0&&Le!==null)Le.return=K,pt=Le;else e:for(K=Te;pt!==null;){if(pe=pt,(pe.flags&2048)!==0)try{switch(pe.tag){case 0:case 11:case 15:xp(9,pe)}}catch(jt){Bn(pe,pe.return,jt)}if(pe===K){pt=null;break e}var et=pe.sibling;if(et!==null){et.return=pe.return,pt=et;break e}pt=pe.return}}if(Cr=k,D(),xi&&typeof xi.onPostCommitFiberRoot=="function")try{xi.onPostCommitFiberRoot(Ts,a)}catch{}x=!0}return x}finally{or=f,Vs.transition=c}}return!1}function my(a,c,f){c=uu(f,c),c=Nx(a,c,1),a=An(a,c,1),c=Eo(),a!==null&&(Ys(a,1,c),Jo(a,c))}function Bn(a,c,f){if(a.tag===3)my(a,a,f);else for(;c!==null;){if(c.tag===3){my(c,a,f);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(cc===null||!cc.has(x))){a=uu(f,a),a=Bx(c,a,1),c=An(c,a,1),a=Eo(),c!==null&&(Ys(c,1,a),Jo(c,a));break}}c=c.return}}function E4(a,c,f){var x=a.pingCache;x!==null&&x.delete(c),c=Eo(),a.pingedLanes|=a.suspendedLanes&f,ji===a&&(qi&f)===f&&(hi===4||hi===3&&(qi&130023424)===qi&&500>Er()-cg?ad(a,0):lg|=f),Jo(a,c)}function gy(a,c){c===0&&((a.mode&1)===0?c=1:(c=yi,yi<<=1,(yi&130023424)===0&&(yi=4194304)));var f=Eo();a=Ur(a,c),a!==null&&(Ys(a,c,f),Jo(a,f))}function R4(a){var c=a.memoizedState,f=0;c!==null&&(f=c.retryLane),gy(a,f)}function P4(a,c){var f=0;switch(a.tag){case 13:var x=a.stateNode,k=a.memoizedState;k!==null&&(f=k.retryLane);break;case 19:x=a.stateNode;break;default:throw Error(t(314))}x!==null&&x.delete(c),gy(a,f)}var xy;xy=function(a,c,f){if(a!==null)if(a.memoizedProps!==c.pendingProps||no.current)Go=!0;else{if((a.lanes&f)===0&&(c.flags&128)===0)return Go=!1,b4(a,c,f);Go=(a.flags&131072)!==0}else Go=!1,qe&&(c.flags&1048576)!==0&&Ie(c,ee,c.index);switch(c.lanes=0,c.tag){case 2:var x=c.type;mp(a,c),a=c.pendingProps;var k=nc(c,di.current);gn(c,f),k=rd(null,c,x,a,k,f);var L=zs();return c.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,io(x)?(L=!0,wl(c)):L=!1,c.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,ui(c),k.updater=fp,c.stateNode=k,k._reactInternals=c,G0(c,x,a,f),c=Q0(null,c,x,!0,L,f)):(c.tag=0,qe&&L&&Me(c),Io(null,c,k,f),c=c.child),c;case 16:x=c.elementType;e:{switch(mp(a,c),a=c.pendingProps,k=x._init,x=k(x._payload),c.type=x,k=c.tag=B4(x),a=ua(x,a),k){case 0:c=Y0(null,c,x,a,f);break e;case 1:c=$x(null,c,x,a,f);break e;case 11:c=Vx(null,c,x,a,f);break e;case 14:c=Ox(null,c,x,ua(x.type,a),f);break e}throw Error(t(306,x,""))}return c;case 0:return x=c.type,k=c.pendingProps,k=c.elementType===x?k:ua(x,k),Y0(a,c,x,k,f);case 1:return x=c.type,k=c.pendingProps,k=c.elementType===x?k:ua(x,k),$x(a,c,x,k,f);case 3:e:{if(qx(c),a===null)throw Error(t(387));x=c.pendingProps,L=c.memoizedState,k=L.element,oo(a,c),ki(c,x,null,f);var K=c.memoizedState;if(x=K.element,L.isDehydrated)if(L={element:x,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},c.updateQueue.baseState=L,c.memoizedState=L,c.flags&256){k=uu(Error(t(423)),c),c=Ux(a,c,x,f,k);break e}else if(x!==k){k=uu(Error(t(424)),c),c=Ux(a,c,x,f,k);break e}else for(Oe=Wi(c.stateNode.containerInfo.firstChild),Ve=c,qe=!0,Ue=null,f=cn(c,null,x,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(ft(),x===k){c=_l(a,c,f);break e}Io(a,c,x,f)}c=c.child}return c;case 5:return ap(c),a===null&&gt(c),x=c.type,k=c.pendingProps,L=a!==null?a.memoizedProps:null,K=k.children,_h(x,k)?K=null:L!==null&&_h(x,L)&&(c.flags|=32),Wx(a,c),Io(a,c,K,f),c.child;case 6:return a===null&&gt(c),null;case 13:return Hx(a,c,f);case 4:return ic(c,c.stateNode.containerInfo),x=c.pendingProps,a===null?c.child=Rn(c,null,x,f):Io(a,c,x,f),c.child;case 11:return x=c.type,k=c.pendingProps,k=c.elementType===x?k:ua(x,k),Vx(a,c,x,k,f);case 7:return Io(a,c,c.pendingProps,f),c.child;case 8:return Io(a,c,c.pendingProps.children,f),c.child;case 12:return Io(a,c,c.pendingProps.children,f),c.child;case 10:e:{if(x=c.type._context,k=c.pendingProps,L=c.memoizedProps,K=k.value,Fr(qn,x._currentValue),x._currentValue=K,L!==null)if(fn(L.value,K)){if(L.children===k.children&&!no.current){c=_l(a,c,f);break e}}else for(L=c.child,L!==null&&(L.return=c);L!==null;){var pe=L.dependencies;if(pe!==null){K=L.child;for(var ve=pe.firstContext;ve!==null;){if(ve.context===x){if(L.tag===1){ve=Cn(-1,f&-f),ve.tag=2;var ze=L.updateQueue;if(ze!==null){ze=ze.shared;var Je=ze.pending;Je===null?ve.next=ve:(ve.next=Je.next,Je.next=ve),ze.pending=ve}}L.lanes|=f,ve=L.alternate,ve!==null&&(ve.lanes|=f),Tr(L.return,f,c),pe.lanes|=f;break}ve=ve.next}}else if(L.tag===10)K=L.type===c.type?null:L.child;else if(L.tag===18){if(K=L.return,K===null)throw Error(t(341));K.lanes|=f,pe=K.alternate,pe!==null&&(pe.lanes|=f),Tr(K,f,c),K=L.sibling}else K=L.child;if(K!==null)K.return=L;else for(K=L;K!==null;){if(K===c){K=null;break}if(L=K.sibling,L!==null){L.return=K.return,K=L;break}K=K.return}L=K}Io(a,c,k.children,f),c=c.child}return c;case 9:return k=c.type,x=c.pendingProps.children,gn(c,f),k=xn(k),x=x(k),c.flags|=1,Io(a,c,x,f),c.child;case 14:return x=c.type,k=ua(x,c.pendingProps),k=ua(x.type,k),Ox(a,c,x,k,f);case 15:return Mx(a,c,c.type,c.pendingProps,f);case 17:return x=c.type,k=c.pendingProps,k=c.elementType===x?k:ua(x,k),mp(a,c),c.tag=1,io(x)?(a=!0,wl(c)):a=!1,gn(c,f),Rx(c,x,k),G0(c,x,k,f),Q0(null,c,x,!0,a,f);case 19:return Kx(a,c,f);case 22:return Dx(a,c,f)}throw Error(t(156,c.tag))};function yy(a,c){return Ss(a,c)}function N4(a,c,f,x){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Os(a,c,f,x){return new N4(a,c,f,x)}function xg(a){return a=a.prototype,!(!a||!a.isReactComponent)}function B4(a){if(typeof a=="function")return xg(a)?1:0;if(a!=null){if(a=a.$$typeof,a===w)return 11;if(a===q)return 14}return 2}function fc(a,c){var f=a.alternate;return f===null?(f=Os(a.tag,c,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=c,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&14680064,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,c=a.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f}function Ap(a,c,f,x,k,L){var K=2;if(x=a,typeof a=="function")xg(a)&&(K=1);else if(typeof a=="string")K=5;else e:switch(a){case O:return cd(f.children,k,L,c);case A:K=8,k|=8;break;case S:return a=Os(12,f,c,k|2),a.elementType=S,a.lanes=L,a;case N:return a=Os(13,f,c,k),a.elementType=N,a.lanes=L,a;case W:return a=Os(19,f,c,k),a.elementType=W,a.lanes=L,a;case Z:return kp(f,k,L,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case V:K=10;break e;case I:K=9;break e;case w:K=11;break e;case q:K=14;break e;case re:K=16,x=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return c=Os(K,f,c,k),c.elementType=a,c.type=x,c.lanes=L,c}function cd(a,c,f,x){return a=Os(7,a,x,c),a.lanes=f,a}function kp(a,c,f,x){return a=Os(22,a,x,c),a.elementType=Z,a.lanes=f,a.stateNode={isHidden:!1},a}function yg(a,c,f){return a=Os(6,a,null,c),a.lanes=f,a}function bg(a,c,f){return c=Os(4,a.children!==null?a.children:[],a.key,c),c.lanes=f,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function L4(a,c,f,x,k){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=il(0),this.expirationTimes=il(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=il(0),this.identifierPrefix=x,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function vg(a,c,f,x,k,L,K,pe,ve){return a=new L4(a,c,f,pe,ve),c===1?(c=1,L===!0&&(c|=8)):c=0,L=Os(3,null,null,c),a.current=L,L.stateNode=a,L.memoizedState={element:x,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},ui(L),a}function F4(a,c,f){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:se,key:x==null?null:""+x,children:a,containerInfo:c,implementation:f}}function by(a){if(!a)return Fa;a=a._reactInternals;e:{if(wn(a)!==a||a.tag!==1)throw Error(t(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(io(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(a.tag===1){var f=a.type;if(io(f))return kh(a,f,c)}return c}function vy(a,c,f,x,k,L,K,pe,ve){return a=vg(f,x,!0,a,k,L,K,pe,ve),a.context=by(null),f=a.current,x=Eo(),k=uc(f),L=Cn(x,k),L.callback=c??null,An(f,L,k),a.current.lanes=k,Ys(a,k,x),Jo(a,x),a}function jp(a,c,f,x){var k=c.current,L=Eo(),K=uc(k);return f=by(f),c.context===null?c.context=f:c.pendingContext=f,c=Cn(L,K),c.payload={element:a},x=x===void 0?null:x,x!==null&&(c.callback=x),a=An(k,c,K),a!==null&&(pa(a,k,K,L),Ai(a,k,K)),K}function Ip(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function wy(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<c?f:c}}function wg(a,c){wy(a,c),(a=a.alternate)&&wy(a,c)}function z4(){return null}var Sy=typeof reportError=="function"?reportError:function(a){console.error(a)};function Sg(a){this._internalRoot=a}Ep.prototype.render=Sg.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(t(409));jp(a,c,null,null)},Ep.prototype.unmount=Sg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;sd(function(){jp(null,a,null,null)}),c[Ti]=null}};function Ep(a){this._internalRoot=a}Ep.prototype.unstable_scheduleHydration=function(a){if(a){var c=sl();a={blockedOn:null,target:a,priority:c};for(var f=0;f<Vi.length&&c!==0&&c<Vi[f].priority;f++);Vi.splice(f,0,a),f===0&&Aa(a)}};function _g(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Rp(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function _y(){}function V4(a,c,f,x,k){if(k){if(typeof x=="function"){var L=x;x=function(){var ze=Ip(K);L.call(ze)}}var K=vy(c,x,a,0,null,!1,!1,"",_y);return a._reactRootContainer=K,a[Ti]=K.current,gl(a.nodeType===8?a.parentNode:a),sd(),K}for(;k=a.lastChild;)a.removeChild(k);if(typeof x=="function"){var pe=x;x=function(){var ze=Ip(ve);pe.call(ze)}}var ve=vg(a,0,!1,null,null,!1,!1,"",_y);return a._reactRootContainer=ve,a[Ti]=ve.current,gl(a.nodeType===8?a.parentNode:a),sd(function(){jp(c,ve,f,x)}),ve}function Pp(a,c,f,x,k){var L=f._reactRootContainer;if(L){var K=L;if(typeof k=="function"){var pe=k;k=function(){var ve=Ip(K);pe.call(ve)}}jp(c,K,a,k)}else K=V4(f,c,a,k,x);return Ip(K)}Qs=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var f=lr(c.pendingLanes);f!==0&&(Ta(c,f|1),Jo(c,Er()),(Cr&6)===0&&(pu=Er()+500,D()))}break;case 13:sd(function(){var x=Ur(a,1);if(x!==null){var k=Eo();pa(x,a,1,k)}}),wg(a,1)}},Ca=function(a){if(a.tag===13){var c=Ur(a,134217728);if(c!==null){var f=Eo();pa(c,a,134217728,f)}wg(a,134217728)}},ol=function(a){if(a.tag===13){var c=uc(a),f=Ur(a,c);if(f!==null){var x=Eo();pa(f,a,c,x)}wg(a,c)}},sl=function(){return or},Xs=function(a,c){var f=or;try{return or=a,c()}finally{or=f}},Ir=function(a,c,f){switch(c){case"input":if(dt(a,f),c=f.name,f.type==="radio"&&c!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<f.length;c++){var x=f[c];if(x!==a&&x.form===a.form){var k=ed(x);if(!k)throw Error(t(90));Ze(x),dt(x,k)}}}break;case"textarea":mr(a,f);break;case"select":c=f.value,c!=null&&tt(a,!!f.multiple,c,!1)}},zn=pg,Bo=sd;var O4={usingClientEntryPoint:!1,Events:[rc,bl,ed,ar,Ki,pg]},Vh={findFiberByHostInstance:La,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},M4={bundleType:Vh.bundleType,version:Vh.version,rendererPackageName:Vh.rendererPackageName,rendererConfig:Vh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=yo(a),a===null?null:a.stateNode},findFiberByHostInstance:Vh.findFiberByHostInstance||z4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Np=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Np.isDisabled&&Np.supportsFiber)try{Ts=Np.inject(M4),xi=Np}catch{}}return Yo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O4,Yo.createPortal=function(a,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_g(c))throw Error(t(200));return F4(a,c,null,f)},Yo.createRoot=function(a,c){if(!_g(a))throw Error(t(299));var f=!1,x="",k=Sy;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),c=vg(a,1,!1,null,null,f,!1,x,k),a[Ti]=c.current,gl(a.nodeType===8?a.parentNode:a),new Sg(c)},Yo.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=yo(c),a=a===null?null:a.stateNode,a},Yo.flushSync=function(a){return sd(a)},Yo.hydrate=function(a,c,f){if(!Rp(c))throw Error(t(200));return Pp(null,a,c,!0,f)},Yo.hydrateRoot=function(a,c,f){if(!_g(a))throw Error(t(405));var x=f!=null&&f.hydratedSources||null,k=!1,L="",K=Sy;if(f!=null&&(f.unstable_strictMode===!0&&(k=!0),f.identifierPrefix!==void 0&&(L=f.identifierPrefix),f.onRecoverableError!==void 0&&(K=f.onRecoverableError)),c=vy(c,null,a,1,f??null,k,!1,L,K),a[Ti]=c.current,gl(a),x)for(a=0;a<x.length;a++)f=x[a],k=f._getVersion,k=k(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,k]:c.mutableSourceEagerHydrationData.push(f,k);return new Ep(c)},Yo.render=function(a,c,f){if(!Rp(c))throw Error(t(200));return Pp(null,a,c,!1,f)},Yo.unmountComponentAtNode=function(a){if(!Rp(a))throw Error(t(40));return a._reactRootContainer?(sd(function(){Pp(null,null,a,!1,function(){a._reactRootContainer=null,a[Ti]=null})}),!0):!1},Yo.unstable_batchedUpdates=pg,Yo.unstable_renderSubtreeIntoContainer=function(a,c,f,x){if(!Rp(f))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return Pp(a,c,f,!1,x)},Yo.version="18.3.1-next-f1338f8080-20240426",Yo}var Ry;function Q4(){if(Ry)return Ag.exports;Ry=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ag.exports=Y4(),Ag.exports}var Py;function X4(){if(Py)return Bp;Py=1;var r=Q4();return Bp.createRoot=r.createRoot,Bp.hydrateRoot=r.hydrateRoot,Bp}var Z4=X4();const e6=dw(Z4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r6=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),Ny=r=>{const e=r6(r);return e.charAt(0).toUpperCase()+e.slice(1)},uw=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),n6=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=ce.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:o="",children:s,iconNode:l,...d},h)=>ce.createElement("svg",{ref:h,...i6,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:uw("lucide",o),...!s&&!n6(d)&&{"aria-hidden":"true"},...d},[...l.map(([u,g])=>ce.createElement(u,g)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=(r,e)=>{const t=ce.forwardRef(({className:n,...o},s)=>ce.createElement(o6,{ref:s,iconNode:e,className:uw(`lucide-${t6(Ny(r))}`,`lucide-${r}`,n),...o}));return t.displayName=Ny(r),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],hw=Tt("arrow-down",s6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],fw=Tt("arrow-up",a6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],c6=Tt("bell",l6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],pw=Tt("box",d6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Dd=Tt("briefcase",u6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],mw=Tt("building",h6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["path",{d:"M17 19a1 1 0 0 1-1-1v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a1 1 0 0 1-1 1z",key:"trhst0"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M19 14V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V10",key:"1mo9zo"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M4 10a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2a2 2 0 0 1-2 2z",key:"1dd30t"}],["path",{d:"M7 5V3",key:"1t1388"}]],gw=Tt("cable",f6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],mf=Tt("calculator",p6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],p1=Tt("calendar",m6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],xw=Tt("chart-column",g6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],y6=Tt("check",x6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Sm=Tt("chevron-down",b6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],w6=Tt("chevron-left",v6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],_6=Tt("chevron-right",S6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],C6=Tt("chevron-up",T6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Rl=Tt("circle-alert",A6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Br=Tt("circle-check-big",k6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],I6=Tt("circle-x",j6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],yw=Tt("circle",E6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],r0=Tt("clock",R6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],bw=Tt("corner-down-right",P6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],h5=Tt("dollar-sign",N6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],_m=Tt("eye-off",B6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Tm=Tt("eye",L6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],n0=Tt("file-down",F6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Lf=Tt("file-text",z6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],vw=Tt("gauge",V6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ww=Tt("globe",O6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Sw=Tt("house",M6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Gi=Tt("info",D6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],_w=Tt("lightbulb",W6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],q6=Tt("loader",$6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],tf=Tt("lock",U6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],G6=Tt("log-out",H6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Cm=Tt("mail",K6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Tw=Tt("map-pin",J6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Q6=Tt("menu",Y6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["path",{d:"M5 12h14",key:"1ays0h"}]],Cw=Tt("minus",X6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["path",{d:"M3 20h4.5a.5.5 0 0 0 .5-.5v-.282a.52.52 0 0 0-.247-.437 8 8 0 1 1 8.494-.001.52.52 0 0 0-.247.438v.282a.5.5 0 0 0 .5.5H21",key:"1x94xo"}]],Aw=Tt("omega",Z6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],kw=Tt("package",eC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],rC=Tt("play",tC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],jw=Tt("plug",nC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qs=Tt("plus",iC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Iw=Tt("radio",oC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],f5=Tt("receipt",sC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Ew=Tt("ruler",aC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Rw=Tt("search",lC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Pw=Tt("settings",cC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],uC=Tt("shield",dC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}],["line",{x1:"12",x2:"12",y1:"16",y2:"16",key:"aqc6ln"}],["line",{x1:"12",x2:"12",y1:"8",y2:"8",key:"1mkcni"}]],Nw=Tt("square-divide",hC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Bw=Tt("square-pen",fC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],mC=Tt("square",pC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["path",{d:"M4 4v16",key:"6qkkli"}],["path",{d:"M9 4v16",key:"81ygyz"}],["path",{d:"M14 4v16",key:"12vmem"}]],Lw=Tt("tally-3",gC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Fw=Tt("target",xC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Nl=Tt("trash-2",yC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],zw=Tt("trending-down",bC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],wC=Tt("trending-up",vC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Us=Tt("triangle-alert",SC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]],Vw=Tt("triangle",_C);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$u=Tt("user",TC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Am=Tt("x",CC);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],kC=Tt("zap",AC),jC="_menu_1rv94_37",IC="_btn_1rv94_38",sh={menu:jC,btn:IC};function EC({onSelectCalculator:r,isDarkMode:e}){const[t,n]=ce.useState(""),o=[{name:"Installation",calculators:[{id:"box-fill",name:"Box Fill",icon:kw,keywords:"box fill junction cubic inch volume 314"},{id:"pull-box",name:"Pull Box",icon:pw,keywords:"pull box junction sizing straight angle u-pull 314.28 raceway conduit"},{id:"conduit-fill",name:"Conduit Fill",icon:yw,keywords:"conduit fill emt pvc rigid raceway chapter 9"},{id:"conduit-bending",name:"Conduit Bending",icon:bw,keywords:"conduit bending offset saddle stub bend emt"},{id:"underground-depth",name:"Underground Depth",icon:hw,keywords:"underground depth burial trench cable direct bury 300.5 nec pvc rmc duct install"},{id:"overhead-clearance",name:"Overhead Clearance",icon:fw,keywords:"overhead clearance aerial height span service drop mast 225 attachment point roof"},{id:"working-space",name:"Working Space",icon:Ew,keywords:"working space clearance 110.26 condition panel switchboard equipment depth width height electrical room"},{id:"receptacles",name:"Receptacles",icon:jw,keywords:"receptacle outlet gfci plug socket 210.52 counter kitchen bathroom wall spacing"},{id:"lighting",name:"Lighting",icon:_w,keywords:"lighting lumens foot candles fixtures spacing watts illumination"}]},{name:"Power Calculations",calculators:[{id:"voltage-drop",name:"Voltage Drop",icon:zw,keywords:"voltage drop vd wire circuit"},{id:"ohms-law",name:"Ohm's Law",icon:Nw,keywords:"ohms law voltage current resistance power series parallel circuit"},{id:"reactance-impedance",name:"Reactance",icon:Aw,keywords:"reactance impedance xl xc capacitive inductive resonance frequency ac circuit"},{id:"power-factor",name:"Power Factor",icon:Fw,keywords:"power factor correction pf capacitor kvar cos phi efficiency demand charge penalty savings"},{id:"power-triangle",name:"Power Triangle",icon:Vw,keywords:"power triangle kva kw kvar apparent real reactive power factor angle phase"},{id:"three-phase-power",name:"Three-Phase",icon:Lw,keywords:"three phase power 3 phase current voltage kw kva motor industrial commercial wye delta line"}]},{name:"Sizing & Rating",calculators:[{id:"ampacity",name:"Ampacity",icon:gw,keywords:"ampacity current rating 310 temperature"},{id:"load-calculations",name:"Load Calculations",icon:xw,keywords:"load calculation service size residential commercial demand"},{id:"service-entrance",name:"Service Entrance",icon:mw,keywords:"service entrance sizing panel main 230"},{id:"grounding-bonding",name:"Grounding & Bonding",icon:ww,keywords:"grounding bonding ground electrode equipment gec egc jumper 250"},{id:"neutral-sizing",name:"Neutral Sizing",icon:Cw,keywords:"neutral sizing conductor 220.61 feeder service range dryer balanced load line to neutral"}]},{name:"Equipment",calculators:[{id:"motor-calculations",name:"Motors",icon:Pw,keywords:"motor flc protection starter 430"},{id:"transformer-sizing",name:"Transformers",icon:Iw,keywords:"transformer kva sizing current primary secondary 450"},{id:"vfd-sizing",name:"VFD Sizing",icon:vw,keywords:"vfd variable frequency drive motor speed control inverter ac drive"}]}],s={"Power Calculations":"#3b82f6","Sizing & Rating":"#10b981",Equipment:"#f59e0b",Installation:"#8b5cf6",Safety:"#ef4444"},l={mainBg:e?"#000000":"#f3f4f6",cardText:e?"#ffffff":"#111827",inputBg:e?"#0a0a0a":"#ffffff",inputBorder:e?"#1a1a1a":"#d1d5db",inputText:e?"#ffffff":"#111827",placeholderText:e?"#666666":"#6b7280",categoryHeaderText:e?"#cccccc":"#4b5563"},d=o.flatMap(u=>u.calculators.map(g=>({...g,category:u.name}))),h=t?d.filter(u=>{const g=t.toLowerCase();return u.name.toLowerCase().includes(g)||u.keywords.toLowerCase().includes(g)}):null;return i.jsx("div",{style:{minHeight:"100vh",background:l.mainBg,padding:"0"},children:i.jsx("div",{style:{maxWidth:"64rem",margin:"0 auto"},children:i.jsxs("div",{style:{padding:"1.25rem",boxSizing:"border-box"},children:[i.jsxs("div",{style:{marginBottom:"1.5rem",position:"relative"},children:[i.jsx(Rw,{size:20,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:l.placeholderText}}),i.jsx("input",{type:"text",placeholder:"Search calculators...",value:t,onChange:u=>n(u.target.value),style:{width:"100%",padding:"0.875rem 1rem 0.875rem 3rem",fontSize:"0.9375rem",border:`1px solid ${l.inputBorder}`,borderRadius:"12px",backgroundColor:l.inputBg,color:l.inputText,boxSizing:"border-box",outline:"none",transition:"all 0.2s ease"},onFocus:u=>{u.target.style.borderColor="#3b82f6",u.target.style.backgroundColor=e?"#000000":"#ffffff",u.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:u=>{u.target.style.borderColor=l.inputBorder,u.target.style.backgroundColor=l.inputBg,u.target.style.boxShadow="none"}})]}),h?i.jsxs("div",{children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:l.placeholderText,marginBottom:"1rem",paddingLeft:"0"},children:[h.length," ",h.length===1?"result":"results"," found"]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.25rem",marginBottom:"1rem",boxSizing:"border-box",width:"100%"},children:h.length>0?h.map(u=>{const g=u.icon,y=s[u.category];return i.jsxs("div",{onClick:()=>{console.log("Clicked calculator:",u.id),r(u.id)},style:{cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[i.jsx("button",{style:{backgroundColor:e?"#1a1a1a":"#ffffff",border:`2px solid ${e?"#2a2a2a":"#d1d5db"}`,borderRadius:"12px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"70px",height:"70px",minWidth:"70px",minHeight:"70px",maxWidth:"70px",maxHeight:"70px",flexShrink:0,boxShadow:e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseOver:_=>{_.currentTarget.style.transform="translateY(-4px) scale(1.05)",_.currentTarget.style.backgroundColor=e?"#252525":"#ffffff",_.currentTarget.style.borderColor=y,_.currentTarget.style.boxShadow=`0 8px 16px ${y}30, 0 4px 6px ${y}20`},onMouseOut:_=>{_.currentTarget.style.transform="translateY(0) scale(1)",_.currentTarget.style.backgroundColor=e?"#1a1a1a":"#ffffff",_.currentTarget.style.borderColor=e?"#2a2a2a":"#d1d5db",_.currentTarget.style.boxShadow=e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)"},onMouseDown:_=>{_.currentTarget.style.transform="translateY(-2px) scale(0.95)"},onMouseUp:_=>{_.currentTarget.style.transform="translateY(-4px) scale(1.05)"},children:i.jsx(g,{size:28,strokeWidth:2,color:y})}),i.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",textAlign:"center",lineHeight:"1.2",color:l.cardText,maxWidth:"90px"},children:u.name})]},u.id)}):i.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"3rem 1rem",color:l.placeholderText,fontSize:"0.9375rem"},children:"No calculators found"})})]}):o.map((u,g)=>i.jsxs("div",{style:{marginBottom:"2rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem",paddingLeft:"0"},children:[i.jsx("div",{style:{width:"4px",height:"20px",backgroundColor:s[u.name],borderRadius:"2px"}}),i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:l.categoryHeaderText,margin:0,letterSpacing:"-0.01em"},children:u.name})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.25rem",marginBottom:g<o.length-1?"1.5rem":"1rem",boxSizing:"border-box",width:"100%"},children:u.calculators.map(y=>{const _=y.icon,b=s[u.name];return i.jsxs("div",{onClick:()=>{console.log("Clicked calculator:",y.id),r(y.id)},style:{cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[i.jsx("button",{style:{backgroundColor:e?"#1a1a1a":"#ffffff",border:`2px solid ${e?"#2a2a2a":"#d1d5db"}`,borderRadius:"12px",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"70px",height:"70px",minWidth:"70px",minHeight:"70px",maxWidth:"70px",maxHeight:"70px",flexShrink:0,boxShadow:e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)",transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseOver:R=>{R.currentTarget.style.transform="translateY(-4px) scale(1.05)",R.currentTarget.style.backgroundColor=e?"#252525":"#ffffff",R.currentTarget.style.borderColor=b,R.currentTarget.style.boxShadow=`0 8px 16px ${b}30, 0 4px 6px ${b}20`},onMouseOut:R=>{R.currentTarget.style.transform="translateY(0) scale(1)",R.currentTarget.style.backgroundColor=e?"#1a1a1a":"#ffffff",R.currentTarget.style.borderColor=e?"#2a2a2a":"#d1d5db",R.currentTarget.style.boxShadow=e?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)"},onMouseDown:R=>{R.currentTarget.style.transform="translateY(-2px) scale(0.95)"},onMouseUp:R=>{R.currentTarget.style.transform="translateY(-4px) scale(1.05)"},children:i.jsx(_,{size:28,strokeWidth:2,color:b})}),i.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",textAlign:"center",lineHeight:"1.2",color:l.cardText,maxWidth:"90px"},children:y.name})]},y.id)})})]},u.name))]})})})}const RC="modulepreload",PC=function(r){return"/"+r},By={},wc=function(e,t,n){let o=Promise.resolve();if(t&&t.length>0){let l=function(u){return Promise.all(u.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=l(t.map(u=>{if(u=PC(u),u in By)return;By[u]=!0;const g=u.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${y}`))return;const _=document.createElement("link");if(_.rel=g?"stylesheet":RC,g||(_.as="script"),_.crossOrigin="",_.href=u,h&&_.setAttribute("nonce",h),document.head.appendChild(_),g)return new Promise((b,R)=>{_.addEventListener("load",b),_.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return o.then(l=>{for(const d of l||[])d.status==="rejected"&&s(d.reason);return e().catch(s)})};function Kr(r){"@babel/helpers - typeof";return Kr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kr(r)}var ba=Uint8Array,ys=Uint16Array,p5=Int32Array,m5=new ba([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),g5=new ba([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ly=new ba([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ow=function(r,e){for(var t=new ys(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var o=new p5(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)o[s]=s-t[n]<<5|n;return{b:t,r:o}},Mw=Ow(m5,2),NC=Mw.b,m1=Mw.r;NC[28]=258,m1[258]=28;var BC=Ow(g5,0),Fy=BC.r,g1=new ys(32768);for(var dn=0;dn<32768;++dn){var mc=(dn&43690)>>1|(dn&21845)<<1;mc=(mc&52428)>>2|(mc&13107)<<2,mc=(mc&61680)>>4|(mc&3855)<<4,g1[dn]=((mc&65280)>>8|(mc&255)<<8)>>1}var rf=(function(r,e,t){for(var n=r.length,o=0,s=new ys(e);o<n;++o)r[o]&&++s[r[o]-1];var l=new ys(e);for(o=1;o<e;++o)l[o]=l[o-1]+s[o-1]<<1;var d;if(t){d=new ys(1<<e);var h=15-e;for(o=0;o<n;++o)if(r[o])for(var u=o<<4|r[o],g=e-r[o],y=l[r[o]-1]++<<g,_=y|(1<<g)-1;y<=_;++y)d[g1[y]>>h]=u}else for(d=new ys(n),o=0;o<n;++o)r[o]&&(d[o]=g1[l[r[o]-1]++]>>15-r[o]);return d}),kd=new ba(288);for(var dn=0;dn<144;++dn)kd[dn]=8;for(var dn=144;dn<256;++dn)kd[dn]=9;for(var dn=256;dn<280;++dn)kd[dn]=7;for(var dn=280;dn<288;++dn)kd[dn]=8;var km=new ba(32);for(var dn=0;dn<32;++dn)km[dn]=5;var LC=rf(kd,9,0),FC=rf(km,5,0),Dw=function(r){return(r+7)/8|0},zC=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new ba(r.subarray(e,t))},Cl=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},Mh=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},Ig=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var o=t.length,s=t.slice();if(!o)return{t:$w,l:0};if(o==1){var l=new ba(t[0].s+1);return l[t[0].s]=1,{t:l,l:1}}t.sort(function(J,se){return J.f-se.f}),t.push({s:-1,f:25001});var d=t[0],h=t[1],u=0,g=1,y=2;for(t[0]={s:-1,f:d.f+h.f,l:d,r:h};g!=o-1;)d=t[t[u].f<t[y].f?u++:y++],h=t[u!=g&&t[u].f<t[y].f?u++:y++],t[g++]={s:-1,f:d.f+h.f,l:d,r:h};for(var _=s[0].s,n=1;n<o;++n)s[n].s>_&&(_=s[n].s);var b=new ys(_+1),R=x1(t[g-1],b,0);if(R>e){var n=0,j=0,z=R-e,T=1<<z;for(s.sort(function(se,O){return b[O.s]-b[se.s]||se.f-O.f});n<o;++n){var M=s[n].s;if(b[M]>e)j+=T-(1<<R-b[M]),b[M]=e;else break}for(j>>=z;j>0;){var F=s[n].s;b[F]<e?j-=1<<e-b[F]++-1:++n}for(;n>=0&&j;--n){var B=s[n].s;b[B]==e&&(--b[B],++j)}R=e}return{t:new ba(b),l:R}},x1=function(r,e,t){return r.s==-1?Math.max(x1(r.l,e,t+1),x1(r.r,e,t+1)):e[r.s]=t},zy=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new ys(++e),n=0,o=r[0],s=1,l=function(h){t[n++]=h},d=1;d<=e;++d)if(r[d]==o&&d!=e)++s;else{if(!o&&s>2){for(;s>138;s-=138)l(32754);s>2&&(l(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(l(o),--s;s>6;s-=6)l(8304);s>2&&(l(s-3<<5|8208),s=0)}for(;s--;)l(o);s=1,o=r[d]}return{c:t.subarray(0,n),n:e}},Dh=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},Ww=function(r,e,t){var n=t.length,o=Dw(e+2);r[o]=n&255,r[o+1]=n>>8,r[o+2]=r[o]^255,r[o+3]=r[o+1]^255;for(var s=0;s<n;++s)r[o+s+4]=t[s];return(o+4+n)*8},Vy=function(r,e,t,n,o,s,l,d,h,u,g){Cl(e,g++,t),++o[256];for(var y=Ig(o,15),_=y.t,b=y.l,R=Ig(s,15),j=R.t,z=R.l,T=zy(_),M=T.c,F=T.n,B=zy(j),J=B.c,se=B.n,O=new ys(19),A=0;A<M.length;++A)++O[M[A]&31];for(var A=0;A<J.length;++A)++O[J[A]&31];for(var S=Ig(O,7),V=S.t,I=S.l,w=19;w>4&&!V[Ly[w-1]];--w);var N=u+5<<3,W=Dh(o,kd)+Dh(s,km)+l,q=Dh(o,_)+Dh(s,j)+l+14+3*w+Dh(O,V)+2*O[16]+3*O[17]+7*O[18];if(h>=0&&N<=W&&N<=q)return Ww(e,g,r.subarray(h,h+u));var re,Z,te,ye;if(Cl(e,g,1+(q<W)),g+=2,q<W){re=rf(_,b,0),Z=_,te=rf(j,z,0),ye=j;var we=rf(V,I,0);Cl(e,g,F-257),Cl(e,g+5,se-1),Cl(e,g+10,w-4),g+=14;for(var A=0;A<w;++A)Cl(e,g+3*A,V[Ly[A]]);g+=3*w;for(var ie=[M,J],$=0;$<2;++$)for(var Y=ie[$],A=0;A<Y.length;++A){var ae=Y[A]&31;Cl(e,g,we[ae]),g+=V[ae],ae>15&&(Cl(e,g,Y[A]>>5&127),g+=Y[A]>>12)}}else re=LC,Z=kd,te=FC,ye=km;for(var A=0;A<d;++A){var fe=n[A];if(fe>255){var ae=fe>>18&31;Mh(e,g,re[ae+257]),g+=Z[ae+257],ae>7&&(Cl(e,g,fe>>23&31),g+=m5[ae]);var me=fe&31;Mh(e,g,te[me]),g+=ye[me],me>3&&(Mh(e,g,fe>>5&8191),g+=g5[me])}else Mh(e,g,re[fe]),g+=Z[fe]}return Mh(e,g,re[256]),g+Z[256]},VC=new p5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),$w=new ba(0),OC=function(r,e,t,n,o,s){var l=s.z||r.length,d=new ba(n+l+5*(1+Math.ceil(l/7e3))+o),h=d.subarray(n,d.length-o),u=s.l,g=(s.r||0)&7;if(e){g&&(h[0]=s.r>>3);for(var y=VC[e-1],_=y>>13,b=y&8191,R=(1<<t)-1,j=s.p||new ys(32768),z=s.h||new ys(R+1),T=Math.ceil(t/3),M=2*T,F=function(ge){return(r[ge]^r[ge+1]<<T^r[ge+2]<<M)&R},B=new p5(25e3),J=new ys(288),se=new ys(32),O=0,A=0,S=s.i||0,V=0,I=s.w||0,w=0;S+2<l;++S){var N=F(S),W=S&32767,q=z[N];if(j[W]=q,z[N]=W,I<=S){var re=l-S;if((O>7e3||V>24576)&&(re>423||!u)){g=Vy(r,h,0,B,J,se,A,V,w,S-w,g),V=O=A=0,w=S;for(var Z=0;Z<286;++Z)J[Z]=0;for(var Z=0;Z<30;++Z)se[Z]=0}var te=2,ye=0,we=b,ie=W-q&32767;if(re>2&&N==F(S-ie))for(var $=Math.min(_,re)-1,Y=Math.min(32767,S),ae=Math.min(258,re);ie<=Y&&--we&&W!=q;){if(r[S+te]==r[S+te-ie]){for(var fe=0;fe<ae&&r[S+fe]==r[S+fe-ie];++fe);if(fe>te){if(te=fe,ye=ie,fe>$)break;for(var me=Math.min(ie,fe-2),Se=0,Z=0;Z<me;++Z){var ke=S-ie+Z&32767,Ae=j[ke],Fe=ke-Ae&32767;Fe>Se&&(Se=Fe,q=ke)}}}W=q,q=j[W],ie+=W-q&32767}if(ye){B[V++]=268435456|m1[te]<<18|Fy[ye];var He=m1[te]&31,Ze=Fy[ye]&31;A+=m5[He]+g5[Ze],++J[257+He],++se[Ze],I=S+te,++O}else B[V++]=r[S],++J[r[S]]}}for(S=Math.max(S,I);S<l;++S)B[V++]=r[S],++J[r[S]];g=Vy(r,h,u,B,J,se,A,V,w,S-w,g),u||(s.r=g&7|h[g/8|0]<<3,g-=7,s.h=z,s.p=j,s.i=S,s.w=I)}else{for(var S=s.w||0;S<l+u;S+=65535){var Xe=S+65535;Xe>=l&&(h[g/8|0]=u,Xe=l),g=Ww(h,g+1,r.subarray(S,Xe))}s.i=l}return zC(d,0,n+Dw(g)+o)},qw=function(){var r=1,e=0;return{p:function(t){for(var n=r,o=e,s=t.length|0,l=0;l!=s;){for(var d=Math.min(l+2655,s);l<d;++l)o+=n+=t[l];n=(n&65535)+15*(n>>16),o=(o&65535)+15*(o>>16)}r=n,e=o},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},MC=function(r,e,t,n,o){if(!o&&(o={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),l=new ba(s.length+r.length);l.set(s),l.set(r,s.length),r=l,o.w=s.length}return OC(r,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,o)},Uw=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},DC=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var o=qw();o.p(e.dictionary),Uw(r,2,o.d())}};function y1(r,e){e||(e={});var t=qw();t.p(r);var n=MC(r,e,e.dictionary?6:2,4);return DC(n,e),Uw(n,n.length-4,t.d()),n}var WC=typeof TextDecoder<"u"&&new TextDecoder,$C=0;try{WC.decode($w,{stream:!0}),$C=1}catch{}function qC(r){if(Array.isArray(r))return r}function UC(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,o,s,l,d=[],h=!0,u=!1;try{if(s=(t=t.call(r)).next,e!==0)for(;!(h=(n=s.call(t)).done)&&(d.push(n.value),d.length!==e);h=!0);}catch(g){u=!0,o=g}finally{try{if(!h&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw o}}return d}}function Oy(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function HC(r,e){if(r){if(typeof r=="string")return Oy(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Oy(r,e):void 0}}function GC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function My(r,e){return qC(r)||UC(r,e)||HC(r,e)||GC()}function Dy(r,e="utf8"){return new TextDecoder(e).decode(r)}const KC=new TextEncoder;function JC(r){return KC.encode(r)}const YC=1024*8,QC=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),Eg={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class x5{constructor(e=YC,t={}){Gr(this,"buffer");Gr(this,"byteLength");Gr(this,"byteOffset");Gr(this,"length");Gr(this,"offset");Gr(this,"lastWrittenByte");Gr(this,"littleEndian");Gr(this,"_data");Gr(this,"_mark");Gr(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const o=t.offset?t.offset>>>0:0,s=e.byteLength-o;let l=o;(ArrayBuffer.isView(e)||e instanceof x5)&&(e.byteLength!==e.buffer.byteLength&&(l=e.byteOffset+o),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,o=new Uint8Array(n);o.set(new Uint8Array(this.buffer)),this.buffer=o.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const n=Eg[t].BYTES_PER_ELEMENT*e,o=this.byteOffset+this.offset,s=this.buffer.slice(o,o+n);if(this.littleEndian===QC&&t!=="uint8"&&t!=="int8"){const d=new Uint8Array(this.buffer.slice(o,o+n));d.reverse();const h=new Eg[t](d.buffer);return this.offset+=n,h.reverse(),h}const l=new Eg[t](s);return this.offset+=n,l}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(e=1){return Dy(this.readBytes(e))}decodeText(e=1,t="utf8"){return Dy(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(JC(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function ah(r){let e=r.length;for(;--e>=0;)r[e]=0}const XC=3,ZC=258,Hw=29,eA=256,tA=eA+1+Hw,Gw=30,rA=512,nA=new Array((tA+2)*2);ah(nA);const iA=new Array(Gw*2);ah(iA);const oA=new Array(rA);ah(oA);const sA=new Array(ZC-XC+1);ah(sA);const aA=new Array(Hw);ah(aA);const lA=new Array(Gw);ah(lA);const cA=(r,e,t,n)=>{let o=r&65535|0,s=r>>>16&65535|0,l=0;for(;t!==0;){l=t>2e3?2e3:t,t-=l;do o=o+e[n++]|0,s=s+o|0;while(--l);o%=65521,s%=65521}return o|s<<16|0};var b1=cA;const dA=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},uA=new Uint32Array(dA()),hA=(r,e,t,n)=>{const o=uA,s=n+t;r^=-1;for(let l=n;l<s;l++)r=r>>>8^o[(r^e[l])&255];return r^-1};var Ma=hA,v1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Kw={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const fA=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var pA=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)fA(t,n)&&(r[n]=t[n])}}return r},mA=r=>{let e=0;for(let n=0,o=r.length;n<o;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,o=0,s=r.length;n<s;n++){let l=r[n];t.set(l,o),o+=l.length}return t},Jw={assign:pA,flattenChunks:mA};let Yw=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Yw=!1}const gf=new Uint8Array(256);for(let r=0;r<256;r++)gf[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;gf[254]=gf[254]=1;var gA=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,o,s,l=r.length,d=0;for(o=0;o<l;o++)t=r.charCodeAt(o),(t&64512)===55296&&o+1<l&&(n=r.charCodeAt(o+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),o++)),d+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(d),s=0,o=0;s<d;o++)t=r.charCodeAt(o),(t&64512)===55296&&o+1<l&&(n=r.charCodeAt(o+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),o++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e};const xA=(r,e)=>{if(e<65534&&r.subarray&&Yw)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var yA=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,o;const s=new Array(t*2);for(o=0,n=0;n<t;){let l=r[n++];if(l<128){s[o++]=l;continue}let d=gf[l];if(d>4){s[o++]=65533,n+=d-1;continue}for(l&=d===2?31:d===3?15:7;d>1&&n<t;)l=l<<6|r[n++]&63,d--;if(d>1){s[o++]=65533;continue}l<65536?s[o++]=l:(l-=65536,s[o++]=55296|l>>10&1023,s[o++]=56320|l&1023)}return xA(s,o)},bA=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+gf[r[t]]>e?t:e},w1={string2buf:gA,buf2string:yA,utf8border:bA};function vA(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var wA=vA;const Lp=16209,SA=16191;var _A=function(e,t){let n,o,s,l,d,h,u,g,y,_,b,R,j,z,T,M,F,B,J,se,O,A,S,V;const I=e.state;n=e.next_in,S=e.input,o=n+(e.avail_in-5),s=e.next_out,V=e.output,l=s-(t-e.avail_out),d=s+(e.avail_out-257),h=I.dmax,u=I.wsize,g=I.whave,y=I.wnext,_=I.window,b=I.hold,R=I.bits,j=I.lencode,z=I.distcode,T=(1<<I.lenbits)-1,M=(1<<I.distbits)-1;e:do{R<15&&(b+=S[n++]<<R,R+=8,b+=S[n++]<<R,R+=8),F=j[b&T];t:for(;;){if(B=F>>>24,b>>>=B,R-=B,B=F>>>16&255,B===0)V[s++]=F&65535;else if(B&16){J=F&65535,B&=15,B&&(R<B&&(b+=S[n++]<<R,R+=8),J+=b&(1<<B)-1,b>>>=B,R-=B),R<15&&(b+=S[n++]<<R,R+=8,b+=S[n++]<<R,R+=8),F=z[b&M];r:for(;;){if(B=F>>>24,b>>>=B,R-=B,B=F>>>16&255,B&16){if(se=F&65535,B&=15,R<B&&(b+=S[n++]<<R,R+=8,R<B&&(b+=S[n++]<<R,R+=8)),se+=b&(1<<B)-1,se>h){e.msg="invalid distance too far back",I.mode=Lp;break e}if(b>>>=B,R-=B,B=s-l,se>B){if(B=se-B,B>g&&I.sane){e.msg="invalid distance too far back",I.mode=Lp;break e}if(O=0,A=_,y===0){if(O+=u-B,B<J){J-=B;do V[s++]=_[O++];while(--B);O=s-se,A=V}}else if(y<B){if(O+=u+y-B,B-=y,B<J){J-=B;do V[s++]=_[O++];while(--B);if(O=0,y<J){B=y,J-=B;do V[s++]=_[O++];while(--B);O=s-se,A=V}}}else if(O+=y-B,B<J){J-=B;do V[s++]=_[O++];while(--B);O=s-se,A=V}for(;J>2;)V[s++]=A[O++],V[s++]=A[O++],V[s++]=A[O++],J-=3;J&&(V[s++]=A[O++],J>1&&(V[s++]=A[O++]))}else{O=s-se;do V[s++]=V[O++],V[s++]=V[O++],V[s++]=V[O++],J-=3;while(J>2);J&&(V[s++]=V[O++],J>1&&(V[s++]=V[O++]))}}else if((B&64)===0){F=z[(F&65535)+(b&(1<<B)-1)];continue r}else{e.msg="invalid distance code",I.mode=Lp;break e}break}}else if((B&64)===0){F=j[(F&65535)+(b&(1<<B)-1)];continue t}else if(B&32){I.mode=SA;break e}else{e.msg="invalid literal/length code",I.mode=Lp;break e}break}}while(n<o&&s<d);J=R>>3,n-=J,R-=J<<3,b&=(1<<R)-1,e.next_in=n,e.next_out=s,e.avail_in=n<o?5+(o-n):5-(n-o),e.avail_out=s<d?257+(d-s):257-(s-d),I.hold=b,I.bits=R};const gu=15,Wy=852,$y=592,qy=0,Rg=1,Uy=2,TA=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),CA=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),AA=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),kA=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),jA=(r,e,t,n,o,s,l,d)=>{const h=d.bits;let u=0,g=0,y=0,_=0,b=0,R=0,j=0,z=0,T=0,M=0,F,B,J,se,O,A=null,S;const V=new Uint16Array(gu+1),I=new Uint16Array(gu+1);let w=null,N,W,q;for(u=0;u<=gu;u++)V[u]=0;for(g=0;g<n;g++)V[e[t+g]]++;for(b=h,_=gu;_>=1&&V[_]===0;_--);if(b>_&&(b=_),_===0)return o[s++]=1<<24|64<<16|0,o[s++]=1<<24|64<<16|0,d.bits=1,0;for(y=1;y<_&&V[y]===0;y++);for(b<y&&(b=y),z=1,u=1;u<=gu;u++)if(z<<=1,z-=V[u],z<0)return-1;if(z>0&&(r===qy||_!==1))return-1;for(I[1]=0,u=1;u<gu;u++)I[u+1]=I[u]+V[u];for(g=0;g<n;g++)e[t+g]!==0&&(l[I[e[t+g]]++]=g);if(r===qy?(A=w=l,S=20):r===Rg?(A=TA,w=CA,S=257):(A=AA,w=kA,S=0),M=0,g=0,u=y,O=s,R=b,j=0,J=-1,T=1<<b,se=T-1,r===Rg&&T>Wy||r===Uy&&T>$y)return 1;for(;;){N=u-j,l[g]+1<S?(W=0,q=l[g]):l[g]>=S?(W=w[l[g]-S],q=A[l[g]-S]):(W=96,q=0),F=1<<u-j,B=1<<R,y=B;do B-=F,o[O+(M>>j)+B]=N<<24|W<<16|q|0;while(B!==0);for(F=1<<u-1;M&F;)F>>=1;if(F!==0?(M&=F-1,M+=F):M=0,g++,--V[u]===0){if(u===_)break;u=e[t+l[g]]}if(u>b&&(M&se)!==J){for(j===0&&(j=b),O+=y,R=u-j,z=1<<R;R+j<_&&(z-=V[R+j],!(z<=0));)R++,z<<=1;if(T+=1<<R,r===Rg&&T>Wy||r===Uy&&T>$y)return 1;J=M&se,o[J]=b<<24|R<<16|O-s|0}}return M!==0&&(o[O+M]=u-j<<24|64<<16|0),d.bits=b,0};var nf=jA;const IA=0,Qw=1,Xw=2,{Z_FINISH:Hy,Z_BLOCK:EA,Z_TREES:Fp,Z_OK:jd,Z_STREAM_END:RA,Z_NEED_DICT:PA,Z_STREAM_ERROR:Hs,Z_DATA_ERROR:Zw,Z_MEM_ERROR:eS,Z_BUF_ERROR:NA,Z_DEFLATED:Gy}=Kw,i0=16180,Ky=16181,Jy=16182,Yy=16183,Qy=16184,Xy=16185,Zy=16186,e2=16187,t2=16188,r2=16189,jm=16190,Al=16191,Pg=16192,n2=16193,Ng=16194,i2=16195,o2=16196,s2=16197,a2=16198,zp=16199,Vp=16200,l2=16201,c2=16202,d2=16203,u2=16204,h2=16205,Bg=16206,f2=16207,p2=16208,yn=16209,tS=16210,rS=16211,BA=852,LA=592,FA=15,zA=FA,m2=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function VA(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Wd=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<i0||e.mode>rS?1:0},nS=r=>{if(Wd(r))return Hs;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=i0,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(BA),e.distcode=e.distdyn=new Int32Array(LA),e.sane=1,e.back=-1,jd},iS=r=>{if(Wd(r))return Hs;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,nS(r)},oS=(r,e)=>{let t;if(Wd(r))return Hs;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Hs:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,iS(r))},sS=(r,e)=>{if(!r)return Hs;const t=new VA;r.state=t,t.strm=r,t.window=null,t.mode=i0;const n=oS(r,e);return n!==jd&&(r.state=null),n},OA=r=>sS(r,zA);let g2=!0,Lg,Fg;const MA=r=>{if(g2){Lg=new Int32Array(512),Fg=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(nf(Qw,r.lens,0,288,Lg,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;nf(Xw,r.lens,0,32,Fg,0,r.work,{bits:5}),g2=!1}r.lencode=Lg,r.lenbits=9,r.distcode=Fg,r.distbits=5},aS=(r,e,t,n)=>{let o;const s=r.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(o=s.wsize-s.wnext,o>n&&(o=n),s.window.set(e.subarray(t-n,t-n+o),s.wnext),n-=o,n?(s.window.set(e.subarray(t-n,t),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0},DA=(r,e)=>{let t,n,o,s,l,d,h,u,g,y,_,b,R,j,z=0,T,M,F,B,J,se,O,A;const S=new Uint8Array(4);let V,I;const w=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Wd(r)||!r.output||!r.input&&r.avail_in!==0)return Hs;t=r.state,t.mode===Al&&(t.mode=Pg),l=r.next_out,o=r.output,h=r.avail_out,s=r.next_in,n=r.input,d=r.avail_in,u=t.hold,g=t.bits,y=d,_=h,A=jd;e:for(;;)switch(t.mode){case i0:if(t.wrap===0){t.mode=Pg;break}for(;g<16;){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}if(t.wrap&2&&u===35615){t.wbits===0&&(t.wbits=15),t.check=0,S[0]=u&255,S[1]=u>>>8&255,t.check=Ma(t.check,S,2,0),u=0,g=0,t.mode=Ky;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((u&255)<<8)+(u>>8))%31){r.msg="incorrect header check",t.mode=yn;break}if((u&15)!==Gy){r.msg="unknown compression method",t.mode=yn;break}if(u>>>=4,g-=4,O=(u&15)+8,t.wbits===0&&(t.wbits=O),O>15||O>t.wbits){r.msg="invalid window size",t.mode=yn;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=u&512?r2:Al,u=0,g=0;break;case Ky:for(;g<16;){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}if(t.flags=u,(t.flags&255)!==Gy){r.msg="unknown compression method",t.mode=yn;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=yn;break}t.head&&(t.head.text=u>>8&1),t.flags&512&&t.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,t.check=Ma(t.check,S,2,0)),u=0,g=0,t.mode=Jy;case Jy:for(;g<32;){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}t.head&&(t.head.time=u),t.flags&512&&t.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,S[2]=u>>>16&255,S[3]=u>>>24&255,t.check=Ma(t.check,S,4,0)),u=0,g=0,t.mode=Yy;case Yy:for(;g<16;){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}t.head&&(t.head.xflags=u&255,t.head.os=u>>8),t.flags&512&&t.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,t.check=Ma(t.check,S,2,0)),u=0,g=0,t.mode=Qy;case Qy:if(t.flags&1024){for(;g<16;){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}t.length=u,t.head&&(t.head.extra_len=u),t.flags&512&&t.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,t.check=Ma(t.check,S,2,0)),u=0,g=0}else t.head&&(t.head.extra=null);t.mode=Xy;case Xy:if(t.flags&1024&&(b=t.length,b>d&&(b=d),b&&(t.head&&(O=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(s,s+b),O)),t.flags&512&&t.wrap&4&&(t.check=Ma(t.check,n,b,s)),d-=b,s+=b,t.length-=b),t.length))break e;t.length=0,t.mode=Zy;case Zy:if(t.flags&2048){if(d===0)break e;b=0;do O=n[s+b++],t.head&&O&&t.length<65536&&(t.head.name+=String.fromCharCode(O));while(O&&b<d);if(t.flags&512&&t.wrap&4&&(t.check=Ma(t.check,n,b,s)),d-=b,s+=b,O)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=e2;case e2:if(t.flags&4096){if(d===0)break e;b=0;do O=n[s+b++],t.head&&O&&t.length<65536&&(t.head.comment+=String.fromCharCode(O));while(O&&b<d);if(t.flags&512&&t.wrap&4&&(t.check=Ma(t.check,n,b,s)),d-=b,s+=b,O)break e}else t.head&&(t.head.comment=null);t.mode=t2;case t2:if(t.flags&512){for(;g<16;){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}if(t.wrap&4&&u!==(t.check&65535)){r.msg="header crc mismatch",t.mode=yn;break}u=0,g=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=Al;break;case r2:for(;g<32;){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}r.adler=t.check=m2(u),u=0,g=0,t.mode=jm;case jm:if(t.havedict===0)return r.next_out=l,r.avail_out=h,r.next_in=s,r.avail_in=d,t.hold=u,t.bits=g,PA;r.adler=t.check=1,t.mode=Al;case Al:if(e===EA||e===Fp)break e;case Pg:if(t.last){u>>>=g&7,g-=g&7,t.mode=Bg;break}for(;g<3;){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}switch(t.last=u&1,u>>>=1,g-=1,u&3){case 0:t.mode=n2;break;case 1:if(MA(t),t.mode=zp,e===Fp){u>>>=2,g-=2;break e}break;case 2:t.mode=o2;break;case 3:r.msg="invalid block type",t.mode=yn}u>>>=2,g-=2;break;case n2:for(u>>>=g&7,g-=g&7;g<32;){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}if((u&65535)!==(u>>>16^65535)){r.msg="invalid stored block lengths",t.mode=yn;break}if(t.length=u&65535,u=0,g=0,t.mode=Ng,e===Fp)break e;case Ng:t.mode=i2;case i2:if(b=t.length,b){if(b>d&&(b=d),b>h&&(b=h),b===0)break e;o.set(n.subarray(s,s+b),l),d-=b,s+=b,h-=b,l+=b,t.length-=b;break}t.mode=Al;break;case o2:for(;g<14;){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}if(t.nlen=(u&31)+257,u>>>=5,g-=5,t.ndist=(u&31)+1,u>>>=5,g-=5,t.ncode=(u&15)+4,u>>>=4,g-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=yn;break}t.have=0,t.mode=s2;case s2:for(;t.have<t.ncode;){for(;g<3;){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}t.lens[w[t.have++]]=u&7,u>>>=3,g-=3}for(;t.have<19;)t.lens[w[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,V={bits:t.lenbits},A=nf(IA,t.lens,0,19,t.lencode,0,t.work,V),t.lenbits=V.bits,A){r.msg="invalid code lengths set",t.mode=yn;break}t.have=0,t.mode=a2;case a2:for(;t.have<t.nlen+t.ndist;){for(;z=t.lencode[u&(1<<t.lenbits)-1],T=z>>>24,M=z>>>16&255,F=z&65535,!(T<=g);){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}if(F<16)u>>>=T,g-=T,t.lens[t.have++]=F;else{if(F===16){for(I=T+2;g<I;){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}if(u>>>=T,g-=T,t.have===0){r.msg="invalid bit length repeat",t.mode=yn;break}O=t.lens[t.have-1],b=3+(u&3),u>>>=2,g-=2}else if(F===17){for(I=T+3;g<I;){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}u>>>=T,g-=T,O=0,b=3+(u&7),u>>>=3,g-=3}else{for(I=T+7;g<I;){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}u>>>=T,g-=T,O=0,b=11+(u&127),u>>>=7,g-=7}if(t.have+b>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=yn;break}for(;b--;)t.lens[t.have++]=O}}if(t.mode===yn)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=yn;break}if(t.lenbits=9,V={bits:t.lenbits},A=nf(Qw,t.lens,0,t.nlen,t.lencode,0,t.work,V),t.lenbits=V.bits,A){r.msg="invalid literal/lengths set",t.mode=yn;break}if(t.distbits=6,t.distcode=t.distdyn,V={bits:t.distbits},A=nf(Xw,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,V),t.distbits=V.bits,A){r.msg="invalid distances set",t.mode=yn;break}if(t.mode=zp,e===Fp)break e;case zp:t.mode=Vp;case Vp:if(d>=6&&h>=258){r.next_out=l,r.avail_out=h,r.next_in=s,r.avail_in=d,t.hold=u,t.bits=g,_A(r,_),l=r.next_out,o=r.output,h=r.avail_out,s=r.next_in,n=r.input,d=r.avail_in,u=t.hold,g=t.bits,t.mode===Al&&(t.back=-1);break}for(t.back=0;z=t.lencode[u&(1<<t.lenbits)-1],T=z>>>24,M=z>>>16&255,F=z&65535,!(T<=g);){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}if(M&&(M&240)===0){for(B=T,J=M,se=F;z=t.lencode[se+((u&(1<<B+J)-1)>>B)],T=z>>>24,M=z>>>16&255,F=z&65535,!(B+T<=g);){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}u>>>=B,g-=B,t.back+=B}if(u>>>=T,g-=T,t.back+=T,t.length=F,M===0){t.mode=h2;break}if(M&32){t.back=-1,t.mode=Al;break}if(M&64){r.msg="invalid literal/length code",t.mode=yn;break}t.extra=M&15,t.mode=l2;case l2:if(t.extra){for(I=t.extra;g<I;){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}t.length+=u&(1<<t.extra)-1,u>>>=t.extra,g-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=c2;case c2:for(;z=t.distcode[u&(1<<t.distbits)-1],T=z>>>24,M=z>>>16&255,F=z&65535,!(T<=g);){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}if((M&240)===0){for(B=T,J=M,se=F;z=t.distcode[se+((u&(1<<B+J)-1)>>B)],T=z>>>24,M=z>>>16&255,F=z&65535,!(B+T<=g);){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}u>>>=B,g-=B,t.back+=B}if(u>>>=T,g-=T,t.back+=T,M&64){r.msg="invalid distance code",t.mode=yn;break}t.offset=F,t.extra=M&15,t.mode=d2;case d2:if(t.extra){for(I=t.extra;g<I;){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}t.offset+=u&(1<<t.extra)-1,u>>>=t.extra,g-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=yn;break}t.mode=u2;case u2:if(h===0)break e;if(b=_-h,t.offset>b){if(b=t.offset-b,b>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=yn;break}b>t.wnext?(b-=t.wnext,R=t.wsize-b):R=t.wnext-b,b>t.length&&(b=t.length),j=t.window}else j=o,R=l-t.offset,b=t.length;b>h&&(b=h),h-=b,t.length-=b;do o[l++]=j[R++];while(--b);t.length===0&&(t.mode=Vp);break;case h2:if(h===0)break e;o[l++]=t.length,h--,t.mode=Vp;break;case Bg:if(t.wrap){for(;g<32;){if(d===0)break e;d--,u|=n[s++]<<g,g+=8}if(_-=h,r.total_out+=_,t.total+=_,t.wrap&4&&_&&(r.adler=t.check=t.flags?Ma(t.check,o,_,l-_):b1(t.check,o,_,l-_)),_=h,t.wrap&4&&(t.flags?u:m2(u))!==t.check){r.msg="incorrect data check",t.mode=yn;break}u=0,g=0}t.mode=f2;case f2:if(t.wrap&&t.flags){for(;g<32;){if(d===0)break e;d--,u+=n[s++]<<g,g+=8}if(t.wrap&4&&u!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=yn;break}u=0,g=0}t.mode=p2;case p2:A=RA;break e;case yn:A=Zw;break e;case tS:return eS;case rS:default:return Hs}return r.next_out=l,r.avail_out=h,r.next_in=s,r.avail_in=d,t.hold=u,t.bits=g,(t.wsize||_!==r.avail_out&&t.mode<yn&&(t.mode<Bg||e!==Hy))&&aS(r,r.output,r.next_out,_-r.avail_out),y-=r.avail_in,_-=r.avail_out,r.total_in+=y,r.total_out+=_,t.total+=_,t.wrap&4&&_&&(r.adler=t.check=t.flags?Ma(t.check,o,_,r.next_out-_):b1(t.check,o,_,r.next_out-_)),r.data_type=t.bits+(t.last?64:0)+(t.mode===Al?128:0)+(t.mode===zp||t.mode===Ng?256:0),(y===0&&_===0||e===Hy)&&A===jd&&(A=NA),A},WA=r=>{if(Wd(r))return Hs;let e=r.state;return e.window&&(e.window=null),r.state=null,jd},$A=(r,e)=>{if(Wd(r))return Hs;const t=r.state;return(t.wrap&2)===0?Hs:(t.head=e,e.done=!1,jd)},qA=(r,e)=>{const t=e.length;let n,o,s;return Wd(r)||(n=r.state,n.wrap!==0&&n.mode!==jm)?Hs:n.mode===jm&&(o=1,o=b1(o,e,t,0),o!==n.check)?Zw:(s=aS(r,e,t,t),s?(n.mode=tS,eS):(n.havedict=1,jd))};var UA=iS,HA=oS,GA=nS,KA=OA,JA=sS,YA=DA,QA=WA,XA=$A,ZA=qA,ek="pako inflate (from Nodeca project)",kl={inflateReset:UA,inflateReset2:HA,inflateResetKeep:GA,inflateInit:KA,inflateInit2:JA,inflate:YA,inflateEnd:QA,inflateGetHeader:XA,inflateSetDictionary:ZA,inflateInfo:ek};function tk(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var rk=tk;const lS=Object.prototype.toString,{Z_NO_FLUSH:nk,Z_FINISH:ik,Z_OK:xf,Z_STREAM_END:zg,Z_NEED_DICT:Vg,Z_STREAM_ERROR:ok,Z_DATA_ERROR:x2,Z_MEM_ERROR:sk}=Kw;function Ff(r){this.options=Jw.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new wA,this.strm.avail_out=0;let t=kl.inflateInit2(this.strm,e.windowBits);if(t!==xf)throw new Error(v1[t]);if(this.header=new rk,kl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=w1.string2buf(e.dictionary):lS.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=kl.inflateSetDictionary(this.strm,e.dictionary),t!==xf)))throw new Error(v1[t])}Ff.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,o=this.options.dictionary;let s,l,d;if(this.ended)return!1;for(e===~~e?l=e:l=e===!0?ik:nk,lS.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),s=kl.inflate(t,l),s===Vg&&o&&(s=kl.inflateSetDictionary(t,o),s===xf?s=kl.inflate(t,l):s===x2&&(s=Vg));t.avail_in>0&&s===zg&&t.state.wrap>0&&r[t.next_in]!==0;)kl.inflateReset(t),s=kl.inflate(t,l);switch(s){case ok:case x2:case Vg:case sk:return this.onEnd(s),this.ended=!0,!1}if(d=t.avail_out,t.next_out&&(t.avail_out===0||s===zg))if(this.options.to==="string"){let h=w1.utf8border(t.output,t.next_out),u=t.next_out-h,g=w1.buf2string(t.output,h);t.next_out=u,t.avail_out=n-u,u&&t.output.set(t.output.subarray(h,h+u),0),this.onData(g)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===xf&&d===0)){if(s===zg)return s=kl.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Ff.prototype.onData=function(r){this.chunks.push(r)};Ff.prototype.onEnd=function(r){r===xf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Jw.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function ak(r,e){const t=new Ff(e);if(t.push(r),t.err)throw t.msg||v1[t.err];return t.result}var lk=Ff,ck=ak,dk={Inflate:lk,inflate:ck};const{Inflate:uk,inflate:hk}=dk;var y2=uk,fk=hk;const cS=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;cS[r]=e}const b2=4294967295;function pk(r,e,t){let n=r;for(let o=0;o<t;o++)n=cS[(n^e[o])&255]^n>>>8;return n}function mk(r,e){return(pk(b2,r,e)^b2)>>>0}function v2(r,e,t){const n=r.readUint32(),o=mk(new Uint8Array(r.buffer,r.byteOffset+r.offset-e-4,e),e);if(o!==n)throw new Error(`CRC mismatch for chunk ${t}. Expected ${n}, found ${o}`)}function dS(r,e,t){for(let n=0;n<t;n++)e[n]=r[n]}function uS(r,e,t,n){let o=0;for(;o<n;o++)e[o]=r[o];for(;o<t;o++)e[o]=r[o]+e[o-n]&255}function hS(r,e,t,n){let o=0;if(t.length===0)for(;o<n;o++)e[o]=r[o];else for(;o<n;o++)e[o]=r[o]+t[o]&255}function fS(r,e,t,n,o){let s=0;if(t.length===0){for(;s<o;s++)e[s]=r[s];for(;s<n;s++)e[s]=r[s]+(e[s-o]>>1)&255}else{for(;s<o;s++)e[s]=r[s]+(t[s]>>1)&255;for(;s<n;s++)e[s]=r[s]+(e[s-o]+t[s]>>1)&255}}function pS(r,e,t,n,o){let s=0;if(t.length===0){for(;s<o;s++)e[s]=r[s];for(;s<n;s++)e[s]=r[s]+e[s-o]&255}else{for(;s<o;s++)e[s]=r[s]+t[s]&255;for(;s<n;s++)e[s]=r[s]+gk(e[s-o],t[s],t[s-o])&255}}function gk(r,e,t){const n=r+e-t,o=Math.abs(n-r),s=Math.abs(n-e),l=Math.abs(n-t);return o<=s&&o<=l?r:s<=l?e:t}function xk(r,e,t,n,o,s){switch(r){case 0:dS(e,t,o);break;case 1:uS(e,t,o,s);break;case 2:hS(e,t,n,o);break;case 3:fS(e,t,n,o,s);break;case 4:pS(e,t,n,o,s);break;default:throw new Error(`Unsupported filter: ${r}`)}}const yk=new Uint16Array([255]),bk=new Uint8Array(yk.buffer),vk=bk[0]===255;function wk(r){const{data:e,width:t,height:n,channels:o,depth:s}=r,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],d=Math.ceil(s/8)*o,h=new Uint8Array(n*t*d);let u=0;for(let g=0;g<7;g++){const y=l[g],_=Math.ceil((t-y.x)/y.xStep),b=Math.ceil((n-y.y)/y.yStep);if(_<=0||b<=0)continue;const R=_*d,j=new Uint8Array(R);for(let z=0;z<b;z++){const T=e[u++],M=e.subarray(u,u+R);u+=R;const F=new Uint8Array(R);xk(T,M,F,j,R,d),j.set(F);for(let B=0;B<_;B++){const J=y.x+B*y.xStep,se=y.y+z*y.yStep;if(!(J>=t||se>=n))for(let O=0;O<d;O++)h[(se*t+J)*d+O]=F[B*d+O]}}}if(s===16){const g=new Uint16Array(h.buffer);if(vk)for(let y=0;y<g.length;y++)g[y]=Sk(g[y]);return g}else return h}function Sk(r){return(r&255)<<8|r>>8&255}const _k=new Uint16Array([255]),Tk=new Uint8Array(_k.buffer),Ck=Tk[0]===255,Ak=new Uint8Array(0);function w2(r){const{data:e,width:t,height:n,channels:o,depth:s}=r,l=Math.ceil(s/8)*o,d=Math.ceil(s/8*o*t),h=new Uint8Array(n*d);let u=Ak,g=0,y,_;for(let b=0;b<n;b++){switch(y=e.subarray(g+1,g+1+d),_=h.subarray(b*d,(b+1)*d),e[g]){case 0:dS(y,_,d);break;case 1:uS(y,_,d,l);break;case 2:hS(y,_,u,d);break;case 3:fS(y,_,u,d,l);break;case 4:pS(y,_,u,d,l);break;default:throw new Error(`Unsupported filter: ${e[g]}`)}u=_,g+=d+1}if(s===16){const b=new Uint16Array(h.buffer);if(Ck)for(let R=0;R<b.length;R++)b[R]=kk(b[R]);return b}else return h}function kk(r){return(r&255)<<8|r>>8&255}const em=Uint8Array.of(137,80,78,71,13,10,26,10);function S2(r){if(!jk(r.readBytes(em.length)))throw new Error("wrong PNG signature")}function jk(r){if(r.length<em.length)return!1;for(let e=0;e<em.length;e++)if(r[e]!==em[e])return!1;return!0}const Ik="tEXt",Ek=0,mS=new TextDecoder("latin1");function Rk(r){if(Nk(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const Pk=/^[\u0000-\u00FF]*$/;function Nk(r){if(!Pk.test(r))throw new Error("invalid latin1 text")}function Bk(r,e,t){const n=gS(e);r[n]=Lk(e,t-n.length-1)}function gS(r){for(r.mark();r.readByte()!==Ek;);const e=r.offset;r.reset();const t=mS.decode(r.readBytes(e-r.offset-1));return r.skip(1),Rk(t),t}function Lk(r,e){return mS.decode(r.readBytes(e))}const gs={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Og={UNKNOWN:-1,DEFLATE:0},_2={UNKNOWN:-1,ADAPTIVE:0},Mg={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Op={NONE:0,BACKGROUND:1,PREVIOUS:2},Dg={SOURCE:0,OVER:1};class Fk extends x5{constructor(t,n={}){super(t);Gr(this,"_checkCrc");Gr(this,"_inflator");Gr(this,"_png");Gr(this,"_apng");Gr(this,"_end");Gr(this,"_hasPalette");Gr(this,"_palette");Gr(this,"_hasTransparency");Gr(this,"_transparency");Gr(this,"_compressionMethod");Gr(this,"_filterMethod");Gr(this,"_interlaceMethod");Gr(this,"_colorType");Gr(this,"_isAnimated");Gr(this,"_numberOfFrames");Gr(this,"_numberOfPlays");Gr(this,"_frames");Gr(this,"_writingDataChunks");const{checkCrc:o=!1}=n;this._checkCrc=o,this._inflator=new y2,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Og.UNKNOWN,this._filterMethod=_2.UNKNOWN,this._interlaceMethod=Mg.UNKNOWN,this._colorType=gs.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(S2(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeChunk(t,n)}return this.decodeImage(),this._png}decodeApng(){for(S2(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(t,n)}return this.decodeApngImage(),this._apng}decodeChunk(t,n){const o=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case Ik:Bk(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-o!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?v2(this,t+4,n):this.skip(4)}decodeApngChunk(t,n){const o=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,n),this.offset=o+t;break}if(this.offset-o!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?v2(this,t+4,n):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=zk(this.readUint8());const n=this.readUint8();this._colorType=n;let o;switch(n){case gs.GREYSCALE:o=1;break;case gs.TRUECOLOUR:o=3;break;case gs.INDEXED_COLOUR:o=1;break;case gs.GREYSCALE_ALPHA:o=2;break;case gs.TRUECOLOUR_ALPHA:o=4;break;case gs.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=o,this._compressionMethod=this.readUint8(),this._compressionMethod!==Og.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const n=t/3;this._hasPalette=!0;const o=[];this._palette=o;for(let s=0;s<n;s++)o.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const n=t,o=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,o,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let n=t,o=this.offset+this.byteOffset;if(o+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,o,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case gs.GREYSCALE:case gs.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let n=0;n<t/2;n++)this._transparency[n]=this.readUint16();break}case gs.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let n=0;for(;n<t;n++){const o=this.readByte();this._palette[n].push(o)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case gs.UNKNOWN:case gs.GREYSCALE_ALPHA:case gs.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const n=gS(this),o=this.readUint8();if(o!==Og.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${o}`);const s=this.readBytes(t-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:fk(s)}}decodepHYs(){const t=this.readUint32(),n=this.readUint32(),o=this.readByte();this._png.resolution={x:t,y:n,unit:o}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const n={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},o=this._frames.at(t);if(o){if(o.data=w2({data:o.data,width:o.width,height:o.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||o.xOffset===0&&o.yOffset===0&&o.width===this._png.width&&o.height===this._png.height)n.data=o.data;else{const s=this._apng.frames.at(t-1);this.disposeFrame(o,s,n),this.addFrameDataToCanvas(n,o)}this._apng.frames.push(n)}}return this._apng}disposeFrame(t,n,o){switch(t.disposeOp){case Op.NONE:break;case Op.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let l=0;l<this._png.width;l++){const d=(s*t.width+l)*this._png.channels;for(let h=0;h<this._png.channels;h++)o.data[d+h]=0}break;case Op.PREVIOUS:o.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,n){const o=1<<this._png.depth,s=(l,d)=>{const h=((l+n.yOffset)*this._png.width+n.xOffset+d)*this._png.channels,u=(l*n.width+d)*this._png.channels;return{index:h,frameIndex:u}};switch(n.blendOp){case Dg.SOURCE:for(let l=0;l<n.height;l++)for(let d=0;d<n.width;d++){const{index:h,frameIndex:u}=s(l,d);for(let g=0;g<this._png.channels;g++)t.data[h+g]=n.data[u+g]}break;case Dg.OVER:for(let l=0;l<n.height;l++)for(let d=0;d<n.width;d++){const{index:h,frameIndex:u}=s(l,d);for(let g=0;g<this._png.channels;g++){const y=n.data[u+this._png.channels-1]/o,_=g%(this._png.channels-1)===0?1:n.data[u+g],b=Math.floor(y*_+(1-y)*t.data[h+g]);t.data[h+g]+=b}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==_2.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Mg.NO_INTERLACE)this._png.data=w2({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Mg.ADAM7)this._png.data=wk({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,n=this._frames.at(-1);n?n.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Op.NONE,blendOp:Dg.SOURCE,data:t}),this._inflator=new y2,this._writingDataChunks=!1}}function zk(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var T2;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(T2||(T2={}));function Vk(r,e){return new Fk(r,e).decode()}var Qt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Wg(){Qt.console&&typeof Qt.console.log=="function"&&Qt.console.log.apply(Qt.console,arguments)}var on={log:Wg,warn:function(r){Qt.console&&(typeof Qt.console.warn=="function"?Qt.console.warn.apply(Qt.console,arguments):Wg.call(null,arguments))},error:function(r){Qt.console&&(typeof Qt.console.error=="function"?Qt.console.error.apply(Qt.console,arguments):Wg(r))}};function $g(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){ud(n.response,e,t)},n.onerror=function(){on.error("could not download file")},n.send()}function C2(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Mp(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var ud=Qt.saveAs||((typeof window>"u"?"undefined":Kr(window))!=="object"||window!==Qt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=Qt.URL||Qt.webkitURL,o=document.createElement("a");e=e||r.name||"download",o.download=e,o.rel="noopener",typeof r=="string"?(o.href=r,o.origin!==location.origin?C2(o.href)?$g(r,e,t):Mp(o,o.target="_blank"):Mp(o)):(o.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(o.href)},4e4),setTimeout(function(){Mp(o)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(C2(r))$g(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){Mp(n)})}else navigator.msSaveOrOpenBlob((function(o,s){return s===void 0?s={autoBom:!1}:Kr(s)!=="object"&&(on.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o})(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return $g(r,e,t);var o=r.type==="application/octet-stream",s=/constructor/i.test(Qt.HTMLElement)||Qt.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&s)&&(typeof FileReader>"u"?"undefined":Kr(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var g=d.result;g=l?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=g:location=g,n=null},d.readAsDataURL(r)}else{var h=Qt.URL||Qt.webkitURL,u=h.createObjectURL(r);n?n.location=u:location.href=u,n=null,setTimeout(function(){h.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function xS(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],n=0;n<t.length;n++){var o=t[n].re,s=t[n].process,l=o.exec(r);l&&(e=s(l),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),h=this.g.toString(16),u=this.b.toString(16);return d.length==1&&(d="0"+d),h.length==1&&(h="0"+h),u.length==1&&(u="0"+u),"#"+d+h+u}}var tm=Qt.atob.bind(Qt),A2=Qt.btoa.bind(Qt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function qg(r,e){var t=r[0],n=r[1],o=r[2],s=r[3];t=lo(t,n,o,s,e[0],7,-680876936),s=lo(s,t,n,o,e[1],12,-389564586),o=lo(o,s,t,n,e[2],17,606105819),n=lo(n,o,s,t,e[3],22,-1044525330),t=lo(t,n,o,s,e[4],7,-176418897),s=lo(s,t,n,o,e[5],12,1200080426),o=lo(o,s,t,n,e[6],17,-1473231341),n=lo(n,o,s,t,e[7],22,-45705983),t=lo(t,n,o,s,e[8],7,1770035416),s=lo(s,t,n,o,e[9],12,-1958414417),o=lo(o,s,t,n,e[10],17,-42063),n=lo(n,o,s,t,e[11],22,-1990404162),t=lo(t,n,o,s,e[12],7,1804603682),s=lo(s,t,n,o,e[13],12,-40341101),o=lo(o,s,t,n,e[14],17,-1502002290),t=co(t,n=lo(n,o,s,t,e[15],22,1236535329),o,s,e[1],5,-165796510),s=co(s,t,n,o,e[6],9,-1069501632),o=co(o,s,t,n,e[11],14,643717713),n=co(n,o,s,t,e[0],20,-373897302),t=co(t,n,o,s,e[5],5,-701558691),s=co(s,t,n,o,e[10],9,38016083),o=co(o,s,t,n,e[15],14,-660478335),n=co(n,o,s,t,e[4],20,-405537848),t=co(t,n,o,s,e[9],5,568446438),s=co(s,t,n,o,e[14],9,-1019803690),o=co(o,s,t,n,e[3],14,-187363961),n=co(n,o,s,t,e[8],20,1163531501),t=co(t,n,o,s,e[13],5,-1444681467),s=co(s,t,n,o,e[2],9,-51403784),o=co(o,s,t,n,e[7],14,1735328473),t=uo(t,n=co(n,o,s,t,e[12],20,-1926607734),o,s,e[5],4,-378558),s=uo(s,t,n,o,e[8],11,-2022574463),o=uo(o,s,t,n,e[11],16,1839030562),n=uo(n,o,s,t,e[14],23,-35309556),t=uo(t,n,o,s,e[1],4,-1530992060),s=uo(s,t,n,o,e[4],11,1272893353),o=uo(o,s,t,n,e[7],16,-155497632),n=uo(n,o,s,t,e[10],23,-1094730640),t=uo(t,n,o,s,e[13],4,681279174),s=uo(s,t,n,o,e[0],11,-358537222),o=uo(o,s,t,n,e[3],16,-722521979),n=uo(n,o,s,t,e[6],23,76029189),t=uo(t,n,o,s,e[9],4,-640364487),s=uo(s,t,n,o,e[12],11,-421815835),o=uo(o,s,t,n,e[15],16,530742520),t=ho(t,n=uo(n,o,s,t,e[2],23,-995338651),o,s,e[0],6,-198630844),s=ho(s,t,n,o,e[7],10,1126891415),o=ho(o,s,t,n,e[14],15,-1416354905),n=ho(n,o,s,t,e[5],21,-57434055),t=ho(t,n,o,s,e[12],6,1700485571),s=ho(s,t,n,o,e[3],10,-1894986606),o=ho(o,s,t,n,e[10],15,-1051523),n=ho(n,o,s,t,e[1],21,-2054922799),t=ho(t,n,o,s,e[8],6,1873313359),s=ho(s,t,n,o,e[15],10,-30611744),o=ho(o,s,t,n,e[6],15,-1560198380),n=ho(n,o,s,t,e[13],21,1309151649),t=ho(t,n,o,s,e[4],6,-145523070),s=ho(s,t,n,o,e[11],10,-1120210379),o=ho(o,s,t,n,e[2],15,718787259),n=ho(n,o,s,t,e[9],21,-343485551),r[0]=kc(t,r[0]),r[1]=kc(n,r[1]),r[2]=kc(o,r[2]),r[3]=kc(s,r[3])}function o0(r,e,t,n,o,s){return e=kc(kc(e,r),kc(n,s)),kc(e<<o|e>>>32-o,t)}function lo(r,e,t,n,o,s,l){return o0(e&t|~e&n,r,e,o,s,l)}function co(r,e,t,n,o,s,l){return o0(e&n|t&~n,r,e,o,s,l)}function uo(r,e,t,n,o,s,l){return o0(e^t^n,r,e,o,s,l)}function ho(r,e,t,n,o,s,l){return o0(t^(e|~n),r,e,o,s,l)}function yS(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)qg(n,Ok(r.substring(e-64,e)));r=r.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)o[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(qg(n,o),e=0;e<16;e++)o[e]=0;return o[14]=8*t,qg(n,o),n}function Ok(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}var k2="0123456789abcdef".split("");function Mk(r){for(var e="",t=0;t<4;t++)e+=k2[r>>8*t+4&15]+k2[r>>8*t&15];return e}function Dk(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function S1(r){return yS(r).map(Dk).join("")}var Wk=(function(r){for(var e=0;e<r.length;e++)r[e]=Mk(r[e]);return r.join("")})(yS("hello"))!="5d41402abc4b2a76b9719d911017c592";function kc(r,e){if(Wk){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function _1(r,e){var t,n,o,s;if(r!==t){for(var l=(o=r,s=1+(256/r.length|0),new Array(s+1).join(o)),d=[],h=0;h<256;h++)d[h]=h;var u=0;for(h=0;h<256;h++){var g=d[h];u=(u+g+l.charCodeAt(h))%256,d[h]=d[u],d[u]=g}t=r,n=d}else d=n;var y=e.length,_=0,b=0,R="";for(h=0;h<y;h++)b=(b+(g=d[_=(_+1)%256]))%256,d[_]=d[b],d[b]=g,l=d[(d[_]+d[b])%256],R+=String.fromCharCode(e.charCodeAt(h)^l);return R}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var j2={print:4,modify:8,copy:16,"annot-forms":32};function Cu(r,e,t,n){this.v=1,this.r=2;var o=192;r.forEach(function(d){if(j2.perm!==void 0)throw new Error("Invalid permission: "+d);o+=j2[d]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),l=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,l),this.P=-(1+(255^o)),this.encryptionKey=S1(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=_1(this.encryptionKey,this.padding)}function Au(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var o=r.charCodeAt(n);e+=o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?"#"+("0"+o.toString(16)).slice(-2):r[n]}return e}function I2(r){if(Kr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,o){if(o=o||!1,typeof t!="string"||typeof n!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[n,!!o],s},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),o=[];for(var s in e[t]){var l=e[t][s];try{l[0].apply(r,n)}catch(d){Qt.console&&on.error("jsPDF PubSub Error",d.message,d)}l[1]&&o.push(s)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Im(r){if(!(this instanceof Im))return new Im(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function bS(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function md(r,e,t,n,o){if(!(this instanceof md))return new md(r,e,t,n,o);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,bS.call(this,n,o)}function Pu(r,e,t,n,o){if(!(this instanceof Pu))return new Pu(r,e,t,n,o);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,bS.call(this,n,o)}function It(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],o=arguments[2],s=arguments[3],l=[],d=1,h=16,u="S",g=null;Kr(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,o=r.format||o,s=r.compress||r.compressPdf||s,(g=r.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),d=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(h=r.floatPrecision),u=r.defaultPathOperation||"S"),l=r.filters||(s===!0?["FlateEncode"]:l),n=n||"mm",t=(""+(t||"P")).toLowerCase();var y=r.putOnlyUsedFonts||!1,_={},b={internal:{},__private__:{}};b.__private__.PubSub=I2;var R="1.3",j=b.__private__.getPdfVersion=function(){return R};b.__private__.setPdfVersion=function(C){R=C};var z={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return z};var T=b.__private__.getPageFormat=function(C){return z[C]};o=o||"a4";var M="compat",F="advanced",B=M;function J(){this.saveGraphicsState(),le(new Nt(Pt,0,0,-Pt,0,Si()*Pt).toString()+" cm"),this.setFontSize(this.getFontSize()/Pt),u="n",B=F}function se(){this.restoreGraphicsState(),u="S",B=M}var O=b.__private__.combineFontStyleAndFontWeight=function(C,H){if(C=="bold"&&H=="normal"||C=="bold"&&H==400||C=="normal"&&H=="italic"||C=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(C=H==400||H==="normal"?C==="italic"?"italic":"normal":H!=700&&H!=="bold"||C!=="normal"?(H==700?"bold":H)+""+C:"bold"),C};b.advancedAPI=function(C){var H=B===M;return H&&J.call(this),typeof C!="function"||(C(this),H&&se.call(this)),this},b.compatAPI=function(C){var H=B===F;return H&&se.call(this),typeof C!="function"||(C(this),H&&J.call(this)),this},b.isAdvancedAPI=function(){return B===F};var A,S=function(C){if(B!==F)throw new Error(C+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=b.roundToPrecision=b.__private__.roundToPrecision=function(C,H){var he=e||H;if(isNaN(C)||isNaN(he))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return C.toFixed(he).replace(/0+$/,"")};A=b.hpf=b.__private__.hpf=typeof h=="number"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return V(C,h)}:h==="smart"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return V(C,C>-1&&C<1?16:5)}:function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return V(C,16)};var I=b.f2=b.__private__.f2=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f2");return V(C,2)},w=b.__private__.f3=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f3");return V(C,3)},N=b.scale=b.__private__.scale=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.scale");return B===M?C*Pt:B===F?C:void 0},W=function(C){return N((function(H){return B===M?Si()-H:B===F?H:void 0})(C))};b.__private__.setPrecision=b.setPrecision=function(C){typeof parseInt(C,10)=="number"&&(e=parseInt(C,10))};var q,re="00000000000000000000000000000000",Z=b.__private__.getFileId=function(){return re},te=b.__private__.setFileId=function(C){return re=C!==void 0&&/^[a-fA-F0-9]{32}$/.test(C)?C.toUpperCase():re.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(Mr=new Cu(g.userPermissions,g.userPassword,g.ownerPassword,re)),re};b.setFileId=function(C){return te(C),this},b.getFileId=function(){return Z()};var ye=b.__private__.convertDateToPDFDate=function(C){var H=C.getTimezoneOffset(),he=H<0?"+":"-",xe=Math.floor(Math.abs(H/60)),Ce=Math.abs(H%60),De=[he,ae(xe),"'",ae(Ce),"'"].join("");return["D:",C.getFullYear(),ae(C.getMonth()+1),ae(C.getDate()),ae(C.getHours()),ae(C.getMinutes()),ae(C.getSeconds()),De].join("")},we=b.__private__.convertPDFDateToDate=function(C){var H=parseInt(C.substr(2,4),10),he=parseInt(C.substr(6,2),10)-1,xe=parseInt(C.substr(8,2),10),Ce=parseInt(C.substr(10,2),10),De=parseInt(C.substr(12,2),10),Ge=parseInt(C.substr(14,2),10);return new Date(H,he,xe,Ce,De,Ge,0)},ie=b.__private__.setCreationDate=function(C){var H;if(C===void 0&&(C=new Date),C instanceof Date)H=ye(C);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(C))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=C}return q=H},$=b.__private__.getCreationDate=function(C){var H=q;return C==="jsDate"&&(H=we(q)),H};b.setCreationDate=function(C){return ie(C),this},b.getCreationDate=function(C){return $(C)};var Y,ae=b.__private__.padd2=function(C){return("0"+parseInt(C)).slice(-2)},fe=b.__private__.padd2Hex=function(C){return("00"+(C=C.toString())).substr(C.length)},me=0,Se=[],ke=[],Ae=0,Fe=[],He=[],Ze=!1,Xe=ke;b.__private__.setCustomOutputDestination=function(C){Ze=!0,Xe=C};var ge=function(C){Ze||(Xe=C)};b.__private__.resetCustomOutputDestination=function(){Ze=!1,Xe=ke};var le=b.__private__.out=function(C){return C=C.toString(),Ae+=C.length+1,Xe.push(C),Xe},at=b.__private__.write=function(C){return le(arguments.length===1?C.toString():Array.prototype.join.call(arguments," "))},dt=b.__private__.getArrayBuffer=function(C){for(var H=C.length,he=new ArrayBuffer(H),xe=new Uint8Array(he);H--;)xe[H]=C.charCodeAt(H);return he},lt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return lt};var $e=r.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(C){return $e=B===F?C/Pt:C,this};var nt,tt=b.__private__.getFontSize=b.getFontSize=function(){return B===M?$e:$e*Pt},Jt=r.R2L||!1;b.__private__.setR2L=b.setR2L=function(C){return Jt=C,this},b.__private__.getR2L=b.getR2L=function(){return Jt};var At,mr=b.__private__.setZoomMode=function(C){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(C))nt=C;else if(isNaN(C)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(C)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+C+'" is not recognized.');nt=C}else nt=parseInt(C,10)};b.__private__.getZoomMode=function(){return nt};var zt,Ut=b.__private__.setPageMode=function(C){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(C)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+C+'" is not recognized.');At=C};b.__private__.getPageMode=function(){return At};var br=b.__private__.setLayoutMode=function(C){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(C)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+C+'" is not recognized.');zt=C};b.__private__.getLayoutMode=function(){return zt},b.__private__.setDisplayMode=b.setDisplayMode=function(C,H,he){return mr(C),br(H),Ut(he),this};var Mt={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(C){if(Object.keys(Mt).indexOf(C)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Mt[C]},b.__private__.getDocumentProperties=function(){return Mt},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(C){for(var H in Mt)Mt.hasOwnProperty(H)&&C[H]&&(Mt[H]=C[H]);return this},b.__private__.setDocumentProperty=function(C,H){if(Object.keys(Mt).indexOf(C)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Mt[C]=H};var kt,Pt,xt,jr,ir,mt={},Ht={},sr=[],Rt={},tr={},$t={},Ir={},Vr=null,qt=0,Dt=[],ar=new I2(b),Ki=r.hotfixes||[],zn={},Bo={},Vn=[],Nt=function C(H,he,xe,Ce,De,Ge){if(!(this instanceof C))return new C(H,he,xe,Ce,De,Ge);isNaN(H)&&(H=1),isNaN(he)&&(he=0),isNaN(xe)&&(xe=0),isNaN(Ce)&&(Ce=1),isNaN(De)&&(De=0),isNaN(Ge)&&(Ge=0),this._matrix=[H,he,xe,Ce,De,Ge]};Object.defineProperty(Nt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(Nt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(Nt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(Nt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(Nt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(Nt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(Nt.prototype,"a",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(Nt.prototype,"b",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(Nt.prototype,"c",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(Nt.prototype,"d",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(Nt.prototype,"e",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(Nt.prototype,"f",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(Nt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Nt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Nt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Nt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Nt.prototype.join=function(C){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(C)},Nt.prototype.multiply=function(C){var H=C.sx*this.sx+C.shy*this.shx,he=C.sx*this.shy+C.shy*this.sy,xe=C.shx*this.sx+C.sy*this.shx,Ce=C.shx*this.shy+C.sy*this.sy,De=C.tx*this.sx+C.ty*this.shx+this.tx,Ge=C.tx*this.shy+C.ty*this.sy+this.ty;return new Nt(H,he,xe,Ce,De,Ge)},Nt.prototype.decompose=function(){var C=this.sx,H=this.shy,he=this.shx,xe=this.sy,Ce=this.tx,De=this.ty,Ge=Math.sqrt(C*C+H*H),ut=(C/=Ge)*he+(H/=Ge)*xe;he-=C*ut,xe-=H*ut;var yt=Math.sqrt(he*he+xe*xe);return ut/=yt,C*(xe/=yt)<H*(he/=yt)&&(C=-C,H=-H,ut=-ut,Ge=-Ge),{scale:new Nt(Ge,0,0,yt,0,0),translate:new Nt(1,0,0,1,Ce,De),rotate:new Nt(C,H,-H,C,0,0),skew:new Nt(1,0,ut,1,0,0)}},Nt.prototype.toString=function(C){return this.join(" ")},Nt.prototype.inversed=function(){var C=this.sx,H=this.shy,he=this.shx,xe=this.sy,Ce=this.tx,De=this.ty,Ge=1/(C*xe-H*he),ut=xe*Ge,yt=-H*Ge,Ft=-he*Ge,St=C*Ge;return new Nt(ut,yt,Ft,St,-ut*Ce-Ft*De,-yt*Ce-St*De)},Nt.prototype.applyToPoint=function(C){var H=C.x*this.sx+C.y*this.shx+this.tx,he=C.x*this.shy+C.y*this.sy+this.ty;return new wi(H,he)},Nt.prototype.applyToRectangle=function(C){var H=this.applyToPoint(C),he=this.applyToPoint(new wi(C.x+C.w,C.y+C.h));return new ks(H.x,H.y,he.x-H.x,he.y-H.y)},Nt.prototype.clone=function(){var C=this.sx,H=this.shy,he=this.shx,xe=this.sy,Ce=this.tx,De=this.ty;return new Nt(C,H,he,xe,Ce,De)},b.Matrix=Nt;var Bi=b.matrixMult=function(C,H){return H.multiply(C)},mi=new Nt(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=mi;var On=function(C,H){if(!tr[C]){var he=(H instanceof md?"Sh":"P")+(Object.keys(Rt).length+1).toString(10);H.id=he,tr[C]=he,Rt[he]=H,ar.publish("addPattern",H)}};b.ShadingPattern=md,b.TilingPattern=Pu,b.addShadingPattern=function(C,H){return S("addShadingPattern()"),On(C,H),this},b.beginTilingPattern=function(C){S("beginTilingPattern()"),ci(C.boundingBox[0],C.boundingBox[1],C.boundingBox[2]-C.boundingBox[0],C.boundingBox[3]-C.boundingBox[1],C.matrix)},b.endTilingPattern=function(C,H){S("endTilingPattern()"),H.stream=He[Y].join(`
`),On(C,H),ar.publish("endTilingPattern",H),Vn.pop().restore()};var Li,Ar=b.__private__.newObject=function(){var C=Or();return un(C,!0),C},Or=b.__private__.newObjectDeferred=function(){return me++,Se[me]=function(){return Ae},me},un=function(C,H){return H=typeof H=="boolean"&&H,Se[C]=Ae,H&&le(C+" 0 obj"),C},Xn=b.__private__.newAdditionalObject=function(){var C={objId:Or(),content:""};return Fe.push(C),C},Zo=Or(),Ji=Or(),Yi=b.__private__.decodeColorString=function(C){var H=C.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length!==5||H[4]!=="k"&&H[4]!=="K"||(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var he=parseFloat(H[0]);H=[he,he,he,"r"]}for(var xe="#",Ce=0;Ce<3;Ce++)xe+=("0"+Math.floor(255*parseFloat(H[Ce])).toString(16)).slice(-2);return xe},wn=b.__private__.encodeColorString=function(C){var H;typeof C=="string"&&(C={ch1:C});var he=C.ch1,xe=C.ch2,Ce=C.ch3,De=C.ch4,Ge=C.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof he=="string"&&he.charAt(0)!=="#"){var ut=new xS(he);if(ut.ok)he=ut.toHex();else if(!/^\d*\.?\d*$/.test(he))throw new Error('Invalid color "'+he+'" passed to jsPDF.encodeColorString.')}if(typeof he=="string"&&/^#[0-9A-Fa-f]{3}$/.test(he)&&(he="#"+he[1]+he[1]+he[2]+he[2]+he[3]+he[3]),typeof he=="string"&&/^#[0-9A-Fa-f]{6}$/.test(he)){var yt=parseInt(he.substr(1),16);he=yt>>16&255,xe=yt>>8&255,Ce=255&yt}if(xe===void 0||De===void 0&&he===xe&&xe===Ce)H=typeof he=="string"?he+" "+Ge[0]:C.precision===2?I(he/255)+" "+Ge[0]:w(he/255)+" "+Ge[0];else if(De===void 0||Kr(De)==="object"){if(De&&!isNaN(De.a)&&De.a===0)return["1.","1.","1.",Ge[1]].join(" ");H=typeof he=="string"?[he,xe,Ce,Ge[1]].join(" "):C.precision===2?[I(he/255),I(xe/255),I(Ce/255),Ge[1]].join(" "):[w(he/255),w(xe/255),w(Ce/255),Ge[1]].join(" ")}else H=typeof he=="string"?[he,xe,Ce,De,Ge[2]].join(" "):C.precision===2?[I(he),I(xe),I(Ce),I(De),Ge[2]].join(" "):[w(he),w(xe),w(Ce),w(De),Ge[2]].join(" ");return H},Fi=b.__private__.getFilters=function(){return l},zi=b.__private__.putStream=function(C){var H=(C=C||{}).data||"",he=C.filters||Fi(),xe=C.alreadyAppliedFilters||[],Ce=C.addLength1||!1,De=H.length,Ge=C.objectId,ut=function(P){return P};if(g!==null&&Ge===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(ut=Mr.encryptor(Ge,0));var yt={};he===!0&&(he=["FlateEncode"]);var Ft=C.additionalKeyValues||[],St=(yt=It.API.processDataByFilters!==void 0?It.API.processDataByFilters(H,he):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(xe)?xe.join(" "):xe.toString());if(yt.data.length!==0&&(Ft.push({key:"Length",value:yt.data.length}),Ce===!0&&Ft.push({key:"Length1",value:De})),St.length!=0)if(St.split("/").length-1==1)Ft.push({key:"Filter",value:St});else{Ft.push({key:"Filter",value:"["+St+"]"});for(var gr=0;gr<Ft.length;gr+=1)if(Ft[gr].key==="DecodeParms"){for(var Zr=[],Dr=0;Dr<yt.reverseChain.split("/").length-1;Dr+=1)Zr.push("null");Zr.push(Ft[gr].value),Ft[gr].value="["+Zr.join(" ")+"]"}}le("<<");for(var m=0;m<Ft.length;m++)le("/"+Ft[m].key+" "+Ft[m].value);le(">>"),yt.data.length!==0&&(le("stream"),le(ut(yt.data)),le("endstream"))},ws=b.__private__.putPage=function(C){var H=C.number,he=C.data,xe=C.objId,Ce=C.contentsObjId;un(xe,!0),le("<</Type /Page"),le("/Parent "+C.rootDictionaryObjId+" 0 R"),le("/Resources "+C.resourceDictionaryObjId+" 0 R"),le("/MediaBox ["+parseFloat(A(C.mediaBox.bottomLeftX))+" "+parseFloat(A(C.mediaBox.bottomLeftY))+" "+A(C.mediaBox.topRightX)+" "+A(C.mediaBox.topRightY)+"]"),C.cropBox!==null&&le("/CropBox ["+A(C.cropBox.bottomLeftX)+" "+A(C.cropBox.bottomLeftY)+" "+A(C.cropBox.topRightX)+" "+A(C.cropBox.topRightY)+"]"),C.bleedBox!==null&&le("/BleedBox ["+A(C.bleedBox.bottomLeftX)+" "+A(C.bleedBox.bottomLeftY)+" "+A(C.bleedBox.topRightX)+" "+A(C.bleedBox.topRightY)+"]"),C.trimBox!==null&&le("/TrimBox ["+A(C.trimBox.bottomLeftX)+" "+A(C.trimBox.bottomLeftY)+" "+A(C.trimBox.topRightX)+" "+A(C.trimBox.topRightY)+"]"),C.artBox!==null&&le("/ArtBox ["+A(C.artBox.bottomLeftX)+" "+A(C.artBox.bottomLeftY)+" "+A(C.artBox.topRightX)+" "+A(C.artBox.topRightY)+"]"),typeof C.userUnit=="number"&&C.userUnit!==1&&le("/UserUnit "+C.userUnit),ar.publish("putPage",{objId:xe,pageContext:Dt[H],pageNumber:H,page:he}),le("/Contents "+Ce+" 0 R"),le(">>"),le("endobj");var De=he.join(`
`);return B===F&&(De+=`
Q`),un(Ce,!0),zi({data:De,filters:Fi(),objectId:Ce}),le("endobj"),xe},yo=b.__private__.putPages=function(){var C,H,he=[];for(C=1;C<=qt;C++)Dt[C].objId=Or(),Dt[C].contentsObjId=Or();for(C=1;C<=qt;C++)he.push(ws({number:C,data:He[C],objId:Dt[C].objId,contentsObjId:Dt[C].contentsObjId,mediaBox:Dt[C].mediaBox,cropBox:Dt[C].cropBox,bleedBox:Dt[C].bleedBox,trimBox:Dt[C].trimBox,artBox:Dt[C].artBox,userUnit:Dt[C].userUnit,rootDictionaryObjId:Zo,resourceDictionaryObjId:Ji}));un(Zo,!0),le("<</Type /Pages");var xe="/Kids [";for(H=0;H<qt;H++)xe+=he[H]+" 0 R ";le(xe+"]"),le("/Count "+qt),le(">>"),le("endobj"),ar.publish("postPutPages")},bo=function(C){ar.publish("putFont",{font:C,out:le,newObject:Ar,putStream:zi}),C.isAlreadyPutted!==!0&&(C.objectNumber=Ar(),le("<<"),le("/Type /Font"),le("/BaseFont /"+Au(C.postScriptName)),le("/Subtype /Type1"),typeof C.encoding=="string"&&le("/Encoding /"+C.encoding),le("/FirstChar 32"),le("/LastChar 255"),le(">>"),le("endobj"))},Ss=function(C){C.objectNumber=Ar();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[A(C.x),A(C.y),A(C.x+C.width),A(C.y+C.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+C.matrix.toString()+"]"});var he=C.pages[1].join(`
`);zi({data:he,additionalKeyValues:H,objectId:C.objectNumber}),le("endobj")},es=function(C,H){H||(H=21);var he=Ar(),xe=(function(Ge,ut){var yt,Ft=[],St=1/(ut-1);for(yt=0;yt<1;yt+=St)Ft.push(yt);if(Ft.push(1),Ge[0].offset!=0){var gr={offset:0,color:Ge[0].color};Ge.unshift(gr)}if(Ge[Ge.length-1].offset!=1){var Zr={offset:1,color:Ge[Ge.length-1].color};Ge.push(Zr)}for(var Dr="",m=0,P=0;P<Ft.length;P++){for(yt=Ft[P];yt>Ge[m+1].offset;)m++;var U=Ge[m].offset,ne=(yt-U)/(Ge[m+1].offset-U),je=Ge[m].color,Be=Ge[m+1].color;Dr+=fe(Math.round((1-ne)*je[0]+ne*Be[0]).toString(16))+fe(Math.round((1-ne)*je[1]+ne*Be[1]).toString(16))+fe(Math.round((1-ne)*je[2]+ne*Be[2]).toString(16))}return Dr.trim()})(C.colors,H),Ce=[];Ce.push({key:"FunctionType",value:"0"}),Ce.push({key:"Domain",value:"[0.0 1.0]"}),Ce.push({key:"Size",value:"["+H+"]"}),Ce.push({key:"BitsPerSample",value:"8"}),Ce.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ce.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),zi({data:xe,additionalKeyValues:Ce,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:he}),le("endobj"),C.objectNumber=Ar(),le("<< /ShadingType "+C.type),le("/ColorSpace /DeviceRGB");var De="/Coords ["+A(parseFloat(C.coords[0]))+" "+A(parseFloat(C.coords[1]))+" ";C.type===2?De+=A(parseFloat(C.coords[2]))+" "+A(parseFloat(C.coords[3])):De+=A(parseFloat(C.coords[2]))+" "+A(parseFloat(C.coords[3]))+" "+A(parseFloat(C.coords[4]))+" "+A(parseFloat(C.coords[5])),le(De+="]"),C.matrix&&le("/Matrix ["+C.matrix.toString()+"]"),le("/Function "+he+" 0 R"),le("/Extend [true true]"),le(">>"),le("endobj")},Lo=function(C,H){var he=Or(),xe=Ar();H.push({resourcesOid:he,objectOid:xe}),C.objectNumber=xe;var Ce=[];Ce.push({key:"Type",value:"/Pattern"}),Ce.push({key:"PatternType",value:"1"}),Ce.push({key:"PaintType",value:"1"}),Ce.push({key:"TilingType",value:"1"}),Ce.push({key:"BBox",value:"["+C.boundingBox.map(A).join(" ")+"]"}),Ce.push({key:"XStep",value:A(C.xStep)}),Ce.push({key:"YStep",value:A(C.yStep)}),Ce.push({key:"Resources",value:he+" 0 R"}),C.matrix&&Ce.push({key:"Matrix",value:"["+C.matrix.toString()+"]"}),zi({data:C.stream,additionalKeyValues:Ce,objectId:C.objectNumber}),le("endobj")},ts=function(C){for(var H in C.objectNumber=Ar(),le("<<"),C)switch(H){case"opacity":le("/ca "+I(C[H]));break;case"stroke-opacity":le("/CA "+I(C[H]))}le(">>"),le("endobj")},Er=function(C){un(C.resourcesOid,!0),le("<<"),le("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var H in le("/Font <<"),mt)mt.hasOwnProperty(H)&&(y===!1||y===!0&&_.hasOwnProperty(H))&&le("/"+H+" "+mt[H].objectNumber+" 0 R");le(">>")})(),(function(){if(Object.keys(Rt).length>0){for(var H in le("/Shading <<"),Rt)Rt.hasOwnProperty(H)&&Rt[H]instanceof md&&Rt[H].objectNumber>=0&&le("/"+H+" "+Rt[H].objectNumber+" 0 R");ar.publish("putShadingPatternDict"),le(">>")}})(),(function(H){if(Object.keys(Rt).length>0){for(var he in le("/Pattern <<"),Rt)Rt.hasOwnProperty(he)&&Rt[he]instanceof b.TilingPattern&&Rt[he].objectNumber>=0&&Rt[he].objectNumber<H&&le("/"+he+" "+Rt[he].objectNumber+" 0 R");ar.publish("putTilingPatternDict"),le(">>")}})(C.objectOid),(function(){if(Object.keys($t).length>0){var H;for(H in le("/ExtGState <<"),$t)$t.hasOwnProperty(H)&&$t[H].objectNumber>=0&&le("/"+H+" "+$t[H].objectNumber+" 0 R");ar.publish("putGStateDict"),le(">>")}})(),(function(){for(var H in le("/XObject <<"),zn)zn.hasOwnProperty(H)&&zn[H].objectNumber>=0&&le("/"+H+" "+zn[H].objectNumber+" 0 R");ar.publish("putXobjectDict"),le(">>")})(),le(">>"),le("endobj")},ql=function(C){Ht[C.fontName]=Ht[C.fontName]||{},Ht[C.fontName][C.fontStyle]=C.id},Ks=function(C,H,he,xe,Ce){var De={id:"F"+(Object.keys(mt).length+1).toString(10),postScriptName:C,fontName:H,fontStyle:he,encoding:xe,isStandardFont:Ce||!1,metadata:{}};return ar.publish("addFont",{font:De,instance:this}),mt[De.id]=De,ql(De),De.id},gi=b.__private__.pdfEscape=b.pdfEscape=function(C,H){return(function(he,xe){var Ce,De,Ge,ut,yt,Ft,St,gr,Zr;if(Ge=(xe=xe||{}).sourceEncoding||"Unicode",yt=xe.outputEncoding,(xe.autoencode||yt)&&mt[kt].metadata&&mt[kt].metadata[Ge]&&mt[kt].metadata[Ge].encoding&&(ut=mt[kt].metadata[Ge].encoding,!yt&&mt[kt].encoding&&(yt=mt[kt].encoding),!yt&&ut.codePages&&(yt=ut.codePages[0]),typeof yt=="string"&&(yt=ut[yt]),yt)){for(St=!1,Ft=[],Ce=0,De=he.length;Ce<De;Ce++)(gr=yt[he.charCodeAt(Ce)])?Ft.push(String.fromCharCode(gr)):Ft.push(he[Ce]),Ft[Ce].charCodeAt(0)>>8&&(St=!0);he=Ft.join("")}for(Ce=he.length;St===void 0&&Ce!==0;)he.charCodeAt(Ce-1)>>8&&(St=!0),Ce--;if(!St)return he;for(Ft=xe.noBOM?[]:[254,255],Ce=0,De=he.length;Ce<De;Ce++){if((Zr=(gr=he.charCodeAt(Ce))>>8)>>8)throw new Error("Character at position "+Ce+" of string '"+he+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ft.push(Zr),Ft.push(gr-(Zr<<8))}return String.fromCharCode.apply(void 0,Ft)})(C,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rs=b.__private__.beginPage=function(C){He[++qt]=[],Dt[qt]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(C[0]),topRightY:Number(C[1])}},Ts(qt),ge(He[Y])},_a=function(C,H){var he,xe,Ce;switch(t=H||t,typeof C=="string"&&(he=T(C.toLowerCase()),Array.isArray(he)&&(xe=he[0],Ce=he[1])),Array.isArray(C)&&(xe=C[0]*Pt,Ce=C[1]*Pt),isNaN(xe)&&(xe=o[0],Ce=o[1]),(xe>14400||Ce>14400)&&(on.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),xe=Math.min(14400,xe),Ce=Math.min(14400,Ce)),o=[xe,Ce],t.substr(0,1)){case"l":Ce>xe&&(o=[Ce,xe]);break;case"p":xe>Ce&&(o=[Ce,xe])}rs(o),ns(Sn),le(Zs),Zi!==0&&le(Zi+" J"),ka!==0&&le(ka+" j"),ar.publish("addPage",{pageNumber:qt})},_s=function(C){C>0&&C<=qt&&(He.splice(C,1),Dt.splice(C,1),qt--,Y>qt&&(Y=qt),this.setPage(Y))},Ts=function(C){C>0&&C<=qt&&(Y=C)},xi=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return He.length-1},rl=function(C,H,he){var xe,Ce=void 0;return he=he||{},C=C!==void 0?C:mt[kt].fontName,H=H!==void 0?H:mt[kt].fontStyle,xe=C.toLowerCase(),Ht[xe]!==void 0&&Ht[xe][H]!==void 0?Ce=Ht[xe][H]:Ht[C]!==void 0&&Ht[C][H]!==void 0?Ce=Ht[C][H]:he.disableWarning===!1&&on.warn("Unable to look up font label for font '"+C+"', '"+H+"'. Refer to getFontList() for available fonts."),Ce||he.noFallback||(Ce=Ht.times[H])==null&&(Ce=Ht.times.normal),Ce},Zn=b.__private__.putInfo=function(){var C=Ar(),H=function(xe){return xe};for(var he in g!==null&&(H=Mr.encryptor(C,0)),le("<<"),le("/Producer ("+gi(H("jsPDF "+It.version))+")"),Mt)Mt.hasOwnProperty(he)&&Mt[he]&&le("/"+he.substr(0,1).toUpperCase()+he.substr(1)+" ("+gi(H(Mt[he]))+")");le("/CreationDate ("+gi(H(q))+")"),le(">>"),le("endobj")},Fo=b.__private__.putCatalog=function(C){var H=(C=C||{}).rootDictionaryObjId||Zo;switch(Ar(),le("<<"),le("/Type /Catalog"),le("/Pages "+H+" 0 R"),nt||(nt="fullwidth"),nt){case"fullwidth":le("/OpenAction [3 0 R /FitH null]");break;case"fullheight":le("/OpenAction [3 0 R /FitV null]");break;case"fullpage":le("/OpenAction [3 0 R /Fit]");break;case"original":le("/OpenAction [3 0 R /XYZ null null 1]");break;default:var he=""+nt;he.substr(he.length-1)==="%"&&(nt=parseInt(nt)/100),typeof nt=="number"&&le("/OpenAction [3 0 R /XYZ null null "+I(nt)+"]")}switch(zt||(zt="continuous"),zt){case"continuous":le("/PageLayout /OneColumn");break;case"single":le("/PageLayout /SinglePage");break;case"two":case"twoleft":le("/PageLayout /TwoColumnLeft");break;case"tworight":le("/PageLayout /TwoColumnRight")}At&&le("/PageMode /"+At),ar.publish("putCatalog"),le(">>"),le("endobj")},wr=b.__private__.putTrailer=function(){le("trailer"),le("<<"),le("/Size "+(me+1)),le("/Root "+me+" 0 R"),le("/Info "+(me-1)+" 0 R"),g!==null&&le("/Encrypt "+Mr.oid+" 0 R"),le("/ID [ <"+re+"> <"+re+"> ]"),le(">>")},Cs=b.__private__.putHeader=function(){le("%PDF-"+R),le("%ºß¬à")},vo=b.__private__.putXRef=function(){var C="0000000000";le("xref"),le("0 "+(me+1)),le("0000000000 65535 f ");for(var H=1;H<=me;H++)typeof Se[H]=="function"?le((C+Se[H]()).slice(-10)+" 00000 n "):Se[H]!==void 0?le((C+Se[H]).slice(-10)+" 00000 n "):le("0000000000 00000 n ")},yi=b.__private__.buildDocument=function(){var C;me=0,Ae=0,ke=[],Se=[],Fe=[],Zo=Or(),Ji=Or(),ge(ke),ar.publish("buildDocument"),Cs(),yo(),(function(){ar.publish("putAdditionalObjects");for(var he=0;he<Fe.length;he++){var xe=Fe[he];un(xe.objId,!0),le(xe.content),le("endobj")}ar.publish("postPutAdditionalObjects")})(),C=[],(function(){for(var he in mt)mt.hasOwnProperty(he)&&(y===!1||y===!0&&_.hasOwnProperty(he))&&bo(mt[he])})(),(function(){var he;for(he in $t)$t.hasOwnProperty(he)&&ts($t[he])})(),(function(){for(var he in zn)zn.hasOwnProperty(he)&&Ss(zn[he])})(),(function(he){var xe;for(xe in Rt)Rt.hasOwnProperty(xe)&&(Rt[xe]instanceof md?es(Rt[xe]):Rt[xe]instanceof Pu&&Lo(Rt[xe],he))})(C),ar.publish("putResources"),C.forEach(Er),Er({resourcesOid:Ji,objectOid:Number.MAX_SAFE_INTEGER}),ar.publish("postPutResources"),g!==null&&(Mr.oid=Ar(),le("<<"),le("/Filter /Standard"),le("/V "+Mr.v),le("/R "+Mr.r),le("/U <"+Mr.toHexString(Mr.U)+">"),le("/O <"+Mr.toHexString(Mr.O)+">"),le("/P "+Mr.P),le(">>"),le("endobj")),Zn(),Fo();var H=Ae;return vo(),wr(),le("startxref"),le(""+H),le("%%EOF"),ge(He[Y]),ke.join(`
`)},lr=b.__private__.getBlob=function(C){return new Blob([dt(C)],{type:"application/pdf"})},Mn=b.output=b.__private__.output=(Li=function(C,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",C){case void 0:return yi();case"save":b.save(H.filename);break;case"arraybuffer":return dt(yi());case"blob":return lr(yi());case"bloburi":case"bloburl":if(Qt.URL!==void 0&&typeof Qt.URL.createObjectURL=="function")return Qt.URL&&Qt.URL.createObjectURL(lr(yi()))||void 0;on.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var he="",xe=yi();try{he=A2(xe)}catch{he=A2(unescape(encodeURIComponent(xe)))}return"data:application/pdf;filename="+H.filename+";base64,"+he;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Qt)==="[object Window]"){var Ce="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",De=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(Ce=H.pdfObjectUrl,De="");var Ge='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ce+'"'+De+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",ut=Qt.open();return ut!==null&&ut.document.write(Ge),ut}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Qt)==="[object Window]"){var yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',Ft=Qt.open();if(Ft!==null){Ft.document.write(yt);var St=this;Ft.document.documentElement.querySelector("#pdfViewer").onload=function(){Ft.document.title=H.filename,Ft.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(St.output("bloburl"))}}return Ft}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Qt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var gr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',Zr=Qt.open();if(Zr!==null&&(Zr.document.write(gr),Zr.document.title=H.filename),Zr||typeof safari>"u")return Zr;break;case"datauri":case"dataurl":return Qt.document.location.href=this.output("datauristring",H);default:return null}},Li.foo=function(){try{return Li.apply(this,arguments)}catch(he){var C=he.stack||"";~C.indexOf(" at ")&&(C=C.split(" at ")[1]);var H="Error in function "+C.split(`
`)[0].split("<")[0]+": "+he.message;if(!Qt.console)throw new Error(H);Qt.console.error(H,he),Qt.alert&&alert(H)}},Li.foo.bar=Li,Li.foo),wo=function(C){return Array.isArray(Ki)===!0&&Ki.indexOf(C)>-1};switch(n){case"pt":Pt=1;break;case"mm":Pt=72/25.4;break;case"cm":Pt=72/2.54;break;case"in":Pt=72;break;case"px":Pt=wo("px_scaling")==1?.75:96/72;break;case"pc":case"em":Pt=12;break;case"ex":Pt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Pt=n}var Mr=null;ie(),te();var Js=b.__private__.getPageInfo=b.getPageInfo=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Dt[C].objId,pageNumber:C,pageContext:Dt[C]}},nl=b.__private__.getPageInfoByObjId=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in Dt)if(Dt[H].objId===C)break;return Js(H)},il=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:Dt[Y].objId,pageNumber:Y,pageContext:Dt[Y]}};b.addPage=function(){return _a.apply(this,arguments),this},b.setPage=function(){return Ts.apply(this,arguments),ge.call(this,He[Y]),this},b.insertPage=function(C){return this.addPage(),this.movePage(Y,C),this},b.movePage=function(C,H){var he,xe;if(C>H){he=He[C],xe=Dt[C];for(var Ce=C;Ce>H;Ce--)He[Ce]=He[Ce-1],Dt[Ce]=Dt[Ce-1];He[H]=he,Dt[H]=xe,this.setPage(H)}else if(C<H){he=He[C],xe=Dt[C];for(var De=C;De<H;De++)He[De]=He[De+1],Dt[De]=Dt[De+1];He[H]=he,Dt[H]=xe,this.setPage(H)}return this},b.deletePage=function(){return _s.apply(this,arguments),this},b.__private__.text=b.text=function(C,H,he,xe,Ce){var De,Ge,ut,yt,Ft,St,gr,Zr,Dr,m=(xe=xe||{}).scope||this;if(typeof C=="number"&&typeof H=="number"&&(typeof he=="string"||Array.isArray(he))){var P=he;he=H,H=C,C=P}if(arguments[3]instanceof Nt==0?(ut=arguments[4],yt=arguments[5],Kr(gr=arguments[3])==="object"&&gr!==null||(typeof ut=="string"&&(yt=ut,ut=null),typeof gr=="string"&&(yt=gr,gr=null),typeof gr=="number"&&(ut=gr,gr=null),xe={flags:gr,angle:ut,align:yt})):(S("The transform parameter of text() with a Matrix value"),Dr=Ce),isNaN(H)||isNaN(he)||C==null)throw new Error("Invalid arguments passed to jsPDF.text");if(C.length===0)return m;var U,ne="",je=typeof xe.lineHeightFactor=="number"?xe.lineHeightFactor:vi,Be=m.internal.scaleFactor;function rt(Sr){return Sr=Sr.split("	").join(Array(xe.TabLen||9).join(" ")),gi(Sr,gr)}function Wt(Sr){for(var Lr,pn=Sr.concat(),En=[],cs=pn.length;cs--;)typeof(Lr=pn.shift())=="string"?En.push(Lr):Array.isArray(Sr)&&(Lr.length===1||Lr[1]===void 0&&Lr[2]===void 0)?En.push(Lr[0]):En.push([Lr[0],Lr[1],Lr[2]]);return En}function Wr(Sr,Lr){var pn;if(typeof Sr=="string")pn=Lr(Sr)[0];else if(Array.isArray(Sr)){for(var En,cs,Uc=Sr.concat(),Yl=[],oa=Uc.length;oa--;)typeof(En=Uc.shift())=="string"?Yl.push(Lr(En)[0]):Array.isArray(En)&&typeof En[0]=="string"&&(cs=Lr(En[0],En[1],En[2]),Yl.push([cs[0],cs[1],cs[2]]));pn=Yl}return pn}var ur=!1,en=!0;if(typeof C=="string")ur=!0;else if(Array.isArray(C)){var $n=C.concat();Ge=[];for(var Mi,rn=$n.length;rn--;)(typeof(Mi=$n.shift())!="string"||Array.isArray(Mi)&&typeof Mi[0]!="string")&&(en=!1);ur=en}if(ur===!1)throw new Error('Type of text must be string or Array. "'+C+'" is not recognized.');typeof C=="string"&&(C=C.match(/[\r?\n]/)?C.split(/\r\n|\r|\n/g):[C]);var _i=$e/m.internal.scaleFactor,Wo=_i*(je-1);switch(xe.baseline){case"bottom":he-=Wo;break;case"top":he+=_i-Wo;break;case"hanging":he+=_i-2*Wo;break;case"middle":he+=_i/2-Wo}if((St=xe.maxWidth||0)>0&&(typeof C=="string"?C=m.splitTextToSize(C,St):Object.prototype.toString.call(C)==="[object Array]"&&(C=C.reduce(function(Sr,Lr){return Sr.concat(m.splitTextToSize(Lr,St))},[]))),De={text:C,x:H,y:he,options:xe,mutex:{pdfEscape:gi,activeFontKey:kt,fonts:mt,activeFontSize:$e}},ar.publish("preProcessText",De),C=De.text,ut=(xe=De.options).angle,Dr instanceof Nt==0&&ut&&typeof ut=="number"){ut*=Math.PI/180,xe.rotationDirection===0&&(ut=-ut),B===F&&(ut=-ut);var ea=Math.cos(ut),qc=Math.sin(ut);Dr=new Nt(ea,qc,-qc,ea,0,0)}else ut&&ut instanceof Nt&&(Dr=ut);B!==F||Dr||(Dr=mi),(Ft=xe.charSpace||Xi)!==void 0&&(ne+=A(N(Ft))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Zr=xe.horizontalScale)!==void 0&&(ne+=A(100*Zr)+` Tz
`),xe.lang;var hn=-1,as=xe.renderingMode!==void 0?xe.renderingMode:xe.stroke,Is=m.internal.getCurrentPageInfo().pageContext;switch(as){case 0:case!1:case"fill":hn=0;break;case 1:case!0:case"stroke":hn=1;break;case 2:case"fillThenStroke":hn=2;break;case 3:case"invisible":hn=3;break;case 4:case"fillAndAddForClipping":hn=4;break;case 5:case"strokeAndAddPathForClipping":hn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":hn=6;break;case 7:case"addToPathForClipping":hn=7}var Kd=Is.usedRenderingMode!==void 0?Is.usedRenderingMode:-1;hn!==-1?ne+=hn+` Tr
`:Kd!==-1&&(ne+=`0 Tr
`),hn!==-1&&(Is.usedRenderingMode=hn),yt=xe.align||"left";var To,Ia=$e*je,Hl=m.internal.pageSize.getWidth(),Gl=mt[kt];Ft=xe.charSpace||Xi,St=xe.maxWidth||0,gr=Object.assign({autoencode:!0,noBOM:!0},xe.flags);var ta=[],$o=function(Sr){return m.getStringUnitWidth(Sr,{font:Gl,charSpace:Ft,fontSize:$e,doKerning:!1})*$e/Be};if(Object.prototype.toString.call(C)==="[object Array]"){var Co;Ge=Wt(C),yt!=="left"&&(To=Ge.map($o));var Ao,Ea=0;if(yt==="right"){H-=To[0],C=[],rn=Ge.length;for(var Es=0;Es<rn;Es++)Es===0?(Ao=Dn(H),Co=Oo(he)):(Ao=N(Ea-To[Es]),Co=-Ia),C.push([Ge[Es],Ao,Co]),Ea=To[Es]}else if(yt==="center"){H-=To[0]/2,C=[],rn=Ge.length;for(var ra=0;ra<rn;ra++)ra===0?(Ao=Dn(H),Co=Oo(he)):(Ao=N((Ea-To[ra])/2),Co=-Ia),C.push([Ge[ra],Ao,Co]),Ea=To[ra]}else if(yt==="left"){C=[],rn=Ge.length;for(var na=0;na<rn;na++)C.push(Ge[na])}else if(yt==="justify"&&Gl.encoding==="Identity-H"){C=[],rn=Ge.length,St=St!==0?St:Hl;for(var Rs=0,_n=0;_n<rn;_n++)if(Co=_n===0?Oo(he):-Ia,Ao=_n===0?Dn(H):Rs,_n<rn-1){var cl=N((St-To[_n])/(Ge[_n].split(" ").length-1)),Ps=Ge[_n].split(" ");C.push([Ps[0]+" ",Ao,Co]),Rs=0;for(var ls=1;ls<Ps.length;ls++){var dl=($o(Ps[ls-1]+" "+Ps[ls])-$o(Ps[ls]))*Be+cl;ls==Ps.length-1?C.push([Ps[ls],dl,0]):C.push([Ps[ls]+" ",dl,0]),Rs-=dl}}else C.push([Ge[_n],Ao,Co]);C.push(["",Rs,0])}else{if(yt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(C=[],rn=Ge.length,St=St!==0?St:Hl,_n=0;_n<rn;_n++){Co=_n===0?Oo(he):-Ia,Ao=_n===0?Dn(H):0;var ul=Ge[_n].split(" ").length-1,Kl=ul>0?(St-To[_n])/ul:0;_n<rn-1?ta.push(A(N(Kl))):ta.push(0),C.push([Ge[_n],Ao,Co])}}}(typeof xe.R2L=="boolean"?xe.R2L:Jt)===!0&&(C=Wr(C,function(Sr,Lr,pn){return[Sr.split("").reverse().join(""),Lr,pn]})),De={text:C,x:H,y:he,options:xe,mutex:{pdfEscape:gi,activeFontKey:kt,fonts:mt,activeFontSize:$e}},ar.publish("postProcessText",De),C=De.text,U=De.mutex.isHex||!1;var Jl=mt[kt].encoding;Jl!=="WinAnsiEncoding"&&Jl!=="StandardEncoding"||(C=Wr(C,function(Sr,Lr,pn){return[rt(Sr),Lr,pn]})),Ge=Wt(C),C=[];for(var ia,Ra,Pa,hl=Array.isArray(Ge[0])?1:0,Na="",fl=function(Sr,Lr,pn){var En="";return pn instanceof Nt?(pn=typeof xe.angle=="number"?Bi(pn,new Nt(1,0,0,1,Sr,Lr)):Bi(new Nt(1,0,0,1,Sr,Lr),pn),B===F&&(pn=Bi(new Nt(1,0,0,-1,0,0),pn)),En=pn.join(" ")+` Tm
`):En=A(Sr)+" "+A(Lr)+` Td
`,En},fn=0;fn<Ge.length;fn++){switch(Na="",hl){case 1:Pa=(U?"<":"(")+Ge[fn][0]+(U?">":")"),ia=parseFloat(Ge[fn][1]),Ra=parseFloat(Ge[fn][2]);break;case 0:Pa=(U?"<":"(")+Ge[fn]+(U?">":")"),ia=Dn(H),Ra=Oo(he)}ta!==void 0&&ta[fn]!==void 0&&(Na=ta[fn]+` Tw
`),fn===0?C.push(Na+fl(ia,Ra,Dr)+Pa):hl===0?C.push(Na+Pa):hl===1&&C.push(Na+fl(ia,Ra,Dr)+Pa)}C=hl===0?C.join(` Tj
T* `):C.join(` Tj
`),C+=` Tj
`;var eo=`BT
/`;return eo+=kt+" "+$e+` Tf
`,eo+=A($e*je)+` TL
`,eo+=Qi+`
`,eo+=ne,eo+=C,le(eo+="ET"),_[kt]=!0,m};var Ys=b.__private__.clip=b.clip=function(C){return le(C==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return Ys("evenodd")},b.__private__.discardPath=b.discardPath=function(){return le("n"),this};var zo=b.__private__.isValidStyle=function(C){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(C)!==-1&&(H=!0),H};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(C){return zo(C)&&(u=C),this};var Ta=b.__private__.getStyle=b.getStyle=function(C){var H=u;switch(C){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=C}return H},or=b.close=function(){return le("h"),this};b.stroke=function(){return le("S"),this},b.fill=function(C){return li("f",C),this},b.fillEvenOdd=function(C){return li("f*",C),this},b.fillStroke=function(C){return li("B",C),this},b.fillStrokeEvenOdd=function(C){return li("B*",C),this};var li=function(C,H){Kr(H)==="object"?ol(H,C):le(C)},Qs=function(C){C===null||B===F&&C===void 0||(C=Ta(C),le(C))};function Ca(C,H,he,xe,Ce){var De=new Pu(H||this.boundingBox,he||this.xStep,xe||this.yStep,this.gState,Ce||this.matrix);De.stream=this.stream;var Ge=C+"$$"+this.cloneIndex+++"$$";return On(Ge,De),De}var ol=function(C,H){var he=tr[C.key],xe=Rt[he];if(xe instanceof md)le("q"),le(sl(H)),xe.gState&&b.setGState(xe.gState),le(C.matrix.toString()+" cm"),le("/"+he+" sh"),le("Q");else if(xe instanceof Pu){var Ce=new Nt(1,0,0,-1,0,Si());C.matrix&&(Ce=Ce.multiply(C.matrix||mi),he=Ca.call(xe,C.key,C.boundingBox,C.xStep,C.yStep,Ce).id),le("q"),le("/Pattern cs"),le("/"+he+" scn"),xe.gState&&b.setGState(xe.gState),le(H),le("Q")}},sl=function(C){switch(C){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Xs=b.moveTo=function(C,H){return le(A(N(C))+" "+A(W(H))+" m"),this},bi=b.lineTo=function(C,H){return le(A(N(C))+" "+A(W(H))+" l"),this},So=b.curveTo=function(C,H,he,xe,Ce,De){return le([A(N(C)),A(W(H)),A(N(he)),A(W(xe)),A(N(Ce)),A(W(De)),"c"].join(" ")),this};b.__private__.line=b.line=function(C,H,he,xe,Ce){if(isNaN(C)||isNaN(H)||isNaN(he)||isNaN(xe)||!zo(Ce))throw new Error("Invalid arguments passed to jsPDF.line");return B===M?this.lines([[he-C,xe-H]],C,H,[1,1],Ce||"S"):this.lines([[he-C,xe-H]],C,H,[1,1]).stroke()},b.__private__.lines=b.lines=function(C,H,he,xe,Ce,De){var Ge,ut,yt,Ft,St,gr,Zr,Dr,m,P,U,ne;if(typeof C=="number"&&(ne=he,he=H,H=C,C=ne),xe=xe||[1,1],De=De||!1,isNaN(H)||isNaN(he)||!Array.isArray(C)||!Array.isArray(xe)||!zo(Ce)||typeof De!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Xs(H,he),Ge=xe[0],ut=xe[1],Ft=C.length,P=H,U=he,yt=0;yt<Ft;yt++)(St=C[yt]).length===2?(P=St[0]*Ge+P,U=St[1]*ut+U,bi(P,U)):(gr=St[0]*Ge+P,Zr=St[1]*ut+U,Dr=St[2]*Ge+P,m=St[3]*ut+U,P=St[4]*Ge+P,U=St[5]*ut+U,So(gr,Zr,Dr,m,P,U));return De&&or(),Qs(Ce),this},b.path=function(C){for(var H=0;H<C.length;H++){var he=C[H],xe=he.c;switch(he.op){case"m":Xs(xe[0],xe[1]);break;case"l":bi(xe[0],xe[1]);break;case"c":So.apply(this,xe);break;case"h":or()}}return this},b.__private__.rect=b.rect=function(C,H,he,xe,Ce){if(isNaN(C)||isNaN(H)||isNaN(he)||isNaN(xe)||!zo(Ce))throw new Error("Invalid arguments passed to jsPDF.rect");return B===M&&(xe=-xe),le([A(N(C)),A(W(H)),A(N(he)),A(N(xe)),"re"].join(" ")),Qs(Ce),this},b.__private__.triangle=b.triangle=function(C,H,he,xe,Ce,De,Ge){if(isNaN(C)||isNaN(H)||isNaN(he)||isNaN(xe)||isNaN(Ce)||isNaN(De)||!zo(Ge))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[he-C,xe-H],[Ce-he,De-xe],[C-Ce,H-De]],C,H,[1,1],Ge,!0),this},b.__private__.roundedRect=b.roundedRect=function(C,H,he,xe,Ce,De,Ge){if(isNaN(C)||isNaN(H)||isNaN(he)||isNaN(xe)||isNaN(Ce)||isNaN(De)||!zo(Ge))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ut=4/3*(Math.SQRT2-1);return Ce=Math.min(Ce,.5*he),De=Math.min(De,.5*xe),this.lines([[he-2*Ce,0],[Ce*ut,0,Ce,De-De*ut,Ce,De],[0,xe-2*De],[0,De*ut,-Ce*ut,De,-Ce,De],[2*Ce-he,0],[-Ce*ut,0,-Ce,-De*ut,-Ce,-De],[0,2*De-xe],[0,-De*ut,Ce*ut,-De,Ce,-De]],C+Ce,H,[1,1],Ge,!0),this},b.__private__.ellipse=b.ellipse=function(C,H,he,xe,Ce){if(isNaN(C)||isNaN(H)||isNaN(he)||isNaN(xe)||!zo(Ce))throw new Error("Invalid arguments passed to jsPDF.ellipse");var De=4/3*(Math.SQRT2-1)*he,Ge=4/3*(Math.SQRT2-1)*xe;return Xs(C+he,H),So(C+he,H-Ge,C+De,H-xe,C,H-xe),So(C-De,H-xe,C-he,H-Ge,C-he,H),So(C-he,H+Ge,C-De,H+xe,C,H+xe),So(C+De,H+xe,C+he,H+Ge,C+he,H),Qs(Ce),this},b.__private__.circle=b.circle=function(C,H,he,xe){if(isNaN(C)||isNaN(H)||isNaN(he)||!zo(xe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(C,H,he,he,xe)},b.setFont=function(C,H,he){return he&&(H=O(H,he)),kt=rl(C,H,{disableWarning:!1}),this};var Vo=b.__private__.getFont=b.getFont=function(){return mt[rl.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var C,H,he={};for(C in Ht)if(Ht.hasOwnProperty(C))for(H in he[C]=[],Ht[C])Ht[C].hasOwnProperty(H)&&he[C].push(H);return he},b.addFont=function(C,H,he,xe,Ce){var De=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&De.indexOf(arguments[3])!==-1?Ce=arguments[3]:arguments[3]&&De.indexOf(arguments[3])==-1&&(he=O(he,xe)),Ks.call(this,C,H,he,Ce=Ce||"Identity-H")};var vi,Sn=r.lineWidth||.200025,Lt=b.__private__.getLineWidth=b.getLineWidth=function(){return Sn},ns=b.__private__.setLineWidth=b.setLineWidth=function(C){return Sn=C,le(A(N(C))+" w"),this};b.__private__.setLineDash=It.API.setLineDash=It.API.setLineDashPattern=function(C,H){if(C=C||[],H=H||0,isNaN(H)||!Array.isArray(C))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return C=C.map(function(he){return A(N(he))}).join(" "),H=A(N(H)),le("["+C+"] "+H+" d"),this};var Vi=b.__private__.getLineHeight=b.getLineHeight=function(){return $e*vi};b.__private__.getLineHeight=b.getLineHeight=function(){return $e*vi};var Ul=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(C){return typeof(C=C||1.15)=="number"&&(vi=C),this},As=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return vi};Ul(r.lineHeight);var Dn=b.__private__.getHorizontalCoordinate=function(C){return N(C)},Oo=b.__private__.getVerticalCoordinate=function(C){return B===F?C:Dt[Y].mediaBox.topRightY-Dt[Y].mediaBox.bottomLeftY-N(C)},Aa=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(C){return A(Dn(C))},Rr=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(C){return A(Oo(C))},Zs=r.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return Yi(Zs)},b.__private__.setStrokeColor=b.setDrawColor=function(C,H,he,xe){return Zs=wn({ch1:C,ch2:H,ch3:he,ch4:xe,pdfColorType:"draw",precision:2}),le(Zs),this};var al=r.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return Yi(al)},b.__private__.setFillColor=b.setFillColor=function(C,H,he,xe){return al=wn({ch1:C,ch2:H,ch3:he,ch4:xe,pdfColorType:"fill",precision:2}),le(al),this};var Qi=r.textColor||"0 g",_o=b.__private__.getTextColor=b.getTextColor=function(){return Yi(Qi)};b.__private__.setTextColor=b.setTextColor=function(C,H,he,xe){return Qi=wn({ch1:C,ch2:H,ch3:he,ch4:xe,pdfColorType:"text",precision:3}),this};var Xi=r.charSpace,is=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(Xi||0)};b.__private__.setCharSpace=b.setCharSpace=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Xi=C,this};var Zi=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(C){var H=b.CapJoinStyles[C];if(H===void 0)throw new Error("Line cap style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zi=H,le(H+" J"),this};var ka=0;b.__private__.setLineJoin=b.setLineJoin=function(C){var H=b.CapJoinStyles[C];if(H===void 0)throw new Error("Line join style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ka=H,le(H+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(C){if(C=C||0,isNaN(C))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return le(A(N(C))+" M"),this},b.GState=Im,b.setGState=function(C){(C=typeof C=="string"?$t[Ir[C]]:os(null,C)).equals(Vr)||(le("/"+C.id+" gs"),Vr=C)};var os=function(C,H){if(!C||!Ir[C]){var he=!1;for(var xe in $t)if($t.hasOwnProperty(xe)&&$t[xe].equals(H)){he=!0;break}if(he)H=$t[xe];else{var Ce="GS"+(Object.keys($t).length+1).toString(10);$t[Ce]=H,H.id=Ce}return C&&(Ir[C]=H.id),ar.publish("addGState",H),H}};b.addGState=function(C,H){return os(C,H),this},b.saveGraphicsState=function(){return le("q"),sr.push({key:kt,size:$e,color:Qi}),this},b.restoreGraphicsState=function(){le("Q");var C=sr.pop();return kt=C.key,$e=C.size,Qi=C.color,Vr=null,this},b.setCurrentTransformationMatrix=function(C){return le(C.toString()+" cm"),this},b.comment=function(C){return le("#"+C),this};var wi=function(C,H){var he=C||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return he},set:function(De){isNaN(De)||(he=parseFloat(De))}});var xe=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return xe},set:function(De){isNaN(De)||(xe=parseFloat(De))}});var Ce="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ce},set:function(De){Ce=De.toString()}}),this},ks=function(C,H,he,xe){wi.call(this,C,H),this.type="rect";var Ce=he||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ce},set:function(Ge){isNaN(Ge)||(Ce=parseFloat(Ge))}});var De=xe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return De},set:function(Ge){isNaN(Ge)||(De=parseFloat(Ge))}}),this},ss=function(){this.page=qt,this.currentPage=Y,this.pages=He.slice(0),this.pagesContext=Dt.slice(0),this.x=xt,this.y=jr,this.matrix=ir,this.width=Do(Y),this.height=Oi(Y),this.outputDestination=Xe,this.id="",this.objectNumber=-1};ss.prototype.restore=function(){qt=this.page,Y=this.currentPage,Dt=this.pagesContext,He=this.pages,xt=this.x,jr=this.y,ir=this.matrix,ll(Y,this.width),ei(Y,this.height),Xe=this.outputDestination};var ci=function(C,H,he,xe,Ce){Vn.push(new ss),qt=Y=0,He=[],xt=C,jr=H,ir=Ce,rs([he,xe])};for(var Mo in b.beginFormObject=function(C,H,he,xe,Ce){return ci(C,H,he,xe,Ce),this},b.endFormObject=function(C){return(function(H){if(Bo[H])Vn.pop().restore();else{var he=new ss,xe="Xo"+(Object.keys(zn).length+1).toString(10);he.id=xe,Bo[H]=xe,zn[xe]=he,ar.publish("addFormObject",he),Vn.pop().restore()}})(C),this},b.doFormObject=function(C,H){var he=zn[Bo[C]];return le("q"),le(H.toString()+" cm"),le("/"+he.id+" Do"),le("Q"),this},b.getFormObject=function(C){var H=zn[Bo[C]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},b.save=function(C,H){return C=C||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(ud(lr(yi()),C),typeof ud.unload=="function"&&Qt.setTimeout&&setTimeout(ud.unload,911),this):new Promise(function(he,xe){try{var Ce=ud(lr(yi()),C);typeof ud.unload=="function"&&Qt.setTimeout&&setTimeout(ud.unload,911),he(Ce)}catch(De){xe(De.message)}})},It.API)It.API.hasOwnProperty(Mo)&&(Mo==="events"&&It.API.events.length?(function(C,H){var he,xe,Ce;for(Ce=H.length-1;Ce!==-1;Ce--)he=H[Ce][0],xe=H[Ce][1],C.subscribe.apply(C,[he].concat(typeof xe=="function"?[xe]:xe))})(ar,It.API.events):b[Mo]=It.API[Mo]);function Do(C){return Dt[C].mediaBox.topRightX-Dt[C].mediaBox.bottomLeftX}function ll(C,H){Dt[C].mediaBox.topRightX=H+Dt[C].mediaBox.bottomLeftX}function Oi(C){return Dt[C].mediaBox.topRightY-Dt[C].mediaBox.bottomLeftY}function ei(C,H){Dt[C].mediaBox.topRightY=H+Dt[C].mediaBox.bottomLeftY}var ja=b.getPageWidth=function(C){return Do(C=C||Y)/Pt},Wn=b.setPageWidth=function(C,H){ll(C,H*Pt)},Si=b.getPageHeight=function(C){return Oi(C=C||Y)/Pt},js=b.setPageHeight=function(C,H){ei(C,H*Pt)};return b.internal={pdfEscape:gi,getStyle:Ta,getFont:Vo,getFontSize:tt,getCharSpace:is,getTextColor:_o,getLineHeight:Vi,getLineHeightFactor:As,getLineWidth:Lt,write:at,getHorizontalCoordinate:Dn,getVerticalCoordinate:Oo,getCoordinateString:Aa,getVerticalCoordinateString:Rr,collections:{},newObject:Ar,newAdditionalObject:Xn,newObjectDeferred:Or,newObjectDeferredBegin:un,getFilters:Fi,putStream:zi,events:ar,scaleFactor:Pt,pageSize:{getWidth:function(){return ja(Y)},setWidth:function(C){Wn(Y,C)},getHeight:function(){return Si(Y)},setHeight:function(C){js(Y,C)}},encryptionOptions:g,encryption:Mr,getEncryptor:function(C){return g!==null?Mr.encryptor(C,0):function(H){return H}},output:Mn,getNumberOfPages:xi,pages:He,out:le,f2:I,f3:w,getPageInfo:Js,getPageInfoByObjId:nl,getCurrentPageInfo:il,getPDFVersion:j,Point:wi,Rectangle:ks,Matrix:Nt,hasHotfix:wo},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return ja(Y)},set:function(C){Wn(Y,C)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return Si(Y)},set:function(C){js(Y,C)},enumerable:!0,configurable:!0}),(function(C){for(var H=0,he=lt.length;H<he;H++){var xe=Ks.call(this,C[H][0],C[H][1],C[H][2],lt[H][3],!0);y===!1&&(_[xe]=!0);var Ce=C[H][0].split("-");ql({id:xe,fontName:Ce[0],fontStyle:Ce[1]||""})}ar.publish("addFonts",{fonts:mt,dictionary:Ht})}).call(b,lt),kt="F1",_a(o,t),ar.publish("initialized"),b}Cu.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},Cu.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Cu.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},Cu.prototype.processOwnerPassword=function(r,e){return _1(S1(e).substr(0,5),r)},Cu.prototype.encryptor=function(r,e){var t=S1(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return _1(t,n)}},Im.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||Kr(r)!==Kr(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},It.API={events:[]},It.version="3.0.3";var Ln=It.API,y5=1,$d=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xu=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},nr=function(r){return r.toFixed(2)},gc=function(r){return r.toFixed(5)};Ln.__acroform__={};var Xo=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},E2=function(r){return r*y5},qa=function(r){var e=new wS,t=vt.internal.getHeight(r)||0,n=vt.internal.getWidth(r)||0;return e.BBox=[0,0,Number(nr(n)),Number(nr(t))],e},$k=Ln.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},qk=Ln.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},Uk=Ln.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},Gn=Ln.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Uk(r,e-1)},Kn=Ln.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return $k(r,e-1)},Jn=Ln.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return qk(r,e-1)},Hk=Ln.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,o=r[0],s=r[1],l=r[2],d=r[3],h={};return h.lowerLeft_X=t(o)||0,h.lowerLeft_Y=n(s+d)||0,h.upperRight_X=t(o+l)||0,h.upperRight_Y=n(s)||0,[Number(nr(h.lowerLeft_X)),Number(nr(h.lowerLeft_Y)),Number(nr(h.upperRight_X)),Number(nr(h.upperRight_Y))]},Gk=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=T1(r,t),o=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+o+" "+nr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=qa(r);return s.scope=r.scope,s.stream=e.join(`
`),s}},T1=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=r.multiline?o.map(function(I){return I.split(`
`)}):o.map(function(I){return[I]});var s=t,l=vt.internal.getHeight(r)||0;l=l<0?-l:l;var d=vt.internal.getWidth(r)||0;d=d<0?-d:d;var h=function(I,w,N){if(I+1<o.length){var W=w+" "+o[I+1][0];return Dp(W,r,N).width<=d-4}return!1};s++;e:for(;s>0;){e="",s--;var u,g,y=Dp("3",r,s).height,_=r.multiline?l-s:(l-y)/2,b=_+=2,R=0,j=0,z=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Dp(e,r,s=12).width+", FieldWidth:"+d+`
`;break}for(var T="",M=0,F=0;F<o.length;F++)if(o.hasOwnProperty(F)){var B=!1;if(o[F].length!==1&&z!==o[F].length-1){if((y+2)*(M+2)+2>l)continue e;T+=o[F][z],B=!0,j=F,F--}else{T=(T+=o[F][z]+" ").substr(T.length-1)==" "?T.substr(0,T.length-1):T;var J=parseInt(F),se=h(J,T,s),O=F>=o.length-1;if(se&&!O){T+=" ",z=0;continue}if(se||O){if(O)j=J;else if(r.multiline&&(y+2)*(M+2)+2>l)continue e}else{if(!r.multiline||(y+2)*(M+2)+2>l)continue e;j=J}}for(var A="",S=R;S<=j;S++){var V=o[S];if(r.multiline){if(S===j){A+=V[z]+" ",z=(z+1)%V.length;continue}if(S===R){A+=V[V.length-1]+" ";continue}}A+=V[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,g=Dp(A,r,s).width,r.textAlign){case"right":u=d-g-2;break;case"center":u=(d-g)/2;break;default:u=2}e+=nr(u)+" "+nr(b)+` Td
`,e+="("+$d(A)+`) Tj
`,e+=-nr(u)+` 0 Td
`,b=-(s+2),g=0,R=B?j:j+1,M++,T=""}break}return n.text=e,n.fontSize=s,n},Dp=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:o}},Kk={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Jk=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},Yk=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(wa.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(Kk)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");y5=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new SS,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in n)if(n.hasOwnProperty(o)){var s=n[o];s.objId=void 0,s.hasAnnotation&&Jk(s,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,o){var s=!n;for(var l in n||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(l)){var d=n[l],h=[],u=d.Rect;if(d.Rect&&(d.Rect=Hk(d.Rect,o)),o.internal.newObjectDeferredBegin(d.objId,!0),d.DA=vt.createDefaultAppearanceStream(d),Kr(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(h=d.getKeyValueListForStream()),d.Rect=u,d.hasAppearanceStream&&!d.appearanceStreamContent){var g=Gk(d);h.push({key:"AP",value:"<</N "+g+">>"}),o.internal.acroformPlugin.xForms.push(g)}if(d.appearanceStreamContent){var y="";for(var _ in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(_)){var b=d.appearanceStreamContent[_];if(y+="/"+_+" ",y+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var l in b)if(b.hasOwnProperty(l)){var R=b[l];typeof R=="function"&&(R=R.call(o,d)),y+="/"+l+" "+R+" ",o.internal.acroformPlugin.xForms.indexOf(R)>=0||o.internal.acroformPlugin.xForms.push(R)}}else typeof(R=b)=="function"&&(R=R.call(o,d)),y+="/"+l+" "+R,o.internal.acroformPlugin.xForms.indexOf(R)>=0||o.internal.acroformPlugin.xForms.push(R);y+=">>"}h.push({key:"AP",value:`<<
`+y+">>"})}o.internal.putStream({additionalKeyValues:h,objectId:d.objId}),o.internal.out("endobj")}s&&(function(j,z){for(var T in j)if(j.hasOwnProperty(T)){var M=T,F=j[T];z.internal.newObjectDeferredBegin(F.objId,!0),Kr(F)==="object"&&typeof F.putStream=="function"&&F.putStream(),delete j[M]}})(o.internal.acroformPlugin.xForms,o)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},vS=Ln.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(l){return l};if(Array.isArray(r)){for(var o="[",s=0;s<r.length;s++)switch(s!==0&&(o+=" "),Kr(r[s])){case"boolean":case"number":case"object":o+=r[s].toString();break;case"string":r[s].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),o+="("+$d(n(r[s].toString()))+")"):o+=r[s].toString()}return o+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ug=function(r,e,t){var n=function(o){return o};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+$d(n(r))+")"},Ha=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ha.prototype.toString=function(){return this.objId+" 0 R"},Ha.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Ha.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],o=this[n];o&&(Array.isArray(o)?r.push({key:n,value:vS(o,this.objId,this.scope)}):o instanceof Ha?(o.scope=this.scope,r.push({key:n,value:o.objId+" 0 R"})):typeof o!="function"&&r.push({key:n,value:o}))}return r};var wS=function(){Ha.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};Xo(wS,Ha);var SS=function(){Ha.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+$d(t(r))+")"}},set:function(t){r=t}})};Xo(SS,Ha);var wa=function r(){Ha.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute F supplied.');e=T}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Gn(e,3)},set:function(T){T?this.F=Kn(e,3):this.F=Jn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute Ff supplied.');t=T}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(T){n=T!==void 0?T:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(T){n[0]=T}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(T){n[1]=T}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(T){n[2]=T}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(T){n[3]=T}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(T){switch(T){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=T;break;default:throw new Error('Invalid value "'+T+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Em)return;s="FieldObject"+r.FieldNum++}var T=function(M){return M};return this.scope&&(T=this.scope.internal.getEncryptor(this.objId)),"("+$d(T(s))+")"},set:function(T){s=T.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(T){s=T}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(T){l=T}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(T){d=T}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(T){h=T}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/y5:u},set:function(T){u=T}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(T){g=T}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof Em||this instanceof Sd))return Ug(y,this.objId,this.scope)},set:function(T){T=T.toString(),y=T}});var _=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof Pi==0?Ug(_,this.objId,this.scope):_},set:function(T){T=T.toString(),_=this instanceof Pi==0?T.substr(0,1)==="("?xu(T.substr(1,T.length-2)):xu(T):T}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pi==1?xu(_.substr(1,_.length-1)):_},set:function(T){T=T.toString(),_=this instanceof Pi==1?"/"+T:T}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(T){this.V=T}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Pi==0?Ug(b,this.objId,this.scope):b},set:function(T){T=T.toString(),b=this instanceof Pi==0?T.substr(0,1)==="("?xu(T.substr(1,T.length-2)):xu(T):T}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pi==1?xu(b.substr(1,b.length-1)):b},set:function(T){T=T.toString(),b=this instanceof Pi==1?"/"+T:T}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var R,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(T){T=!!T,j=T}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(R)return R},set:function(T){R=T}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,1)},set:function(T){T?this.Ff=Kn(this.Ff,1):this.Ff=Jn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,2)},set:function(T){T?this.Ff=Kn(this.Ff,2):this.Ff=Jn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,3)},set:function(T){T?this.Ff=Kn(this.Ff,3):this.Ff=Jn(this.Ff,3)}});var z=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(z!==null)return z},set:function(T){if([0,1,2].indexOf(T)===-1)throw new Error('Invalid value "'+T+'" for attribute Q supplied.');z=T}}),Object.defineProperty(this,"textAlign",{get:function(){var T;switch(z){case 0:default:T="left";break;case 1:T="center";break;case 2:T="right"}return T},configurable:!0,enumerable:!0,set:function(T){switch(T){case"right":case 2:z=2;break;case"center":case 1:z=1;break;default:z=0}}})};Xo(wa,Ha);var Bu=function(){wa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return vS(e,this.objId,this.scope)},set:function(t){var n,o;o=[],typeof(n=t)=="string"&&(o=(function(s,l,d){d||(d=1);for(var h,u=[];h=l.exec(s);)u.push(h[d]);return u})(n,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,18)},set:function(t){t?this.Ff=Kn(this.Ff,18):this.Ff=Jn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Kn(this.Ff,19):this.Ff=Jn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,20)},set:function(t){t?(this.Ff=Kn(this.Ff,20),e.sort()):this.Ff=Jn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,22)},set:function(t){t?this.Ff=Kn(this.Ff,22):this.Ff=Jn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,23)},set:function(t){t?this.Ff=Kn(this.Ff,23):this.Ff=Jn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,27)},set:function(t){t?this.Ff=Kn(this.Ff,27):this.Ff=Jn(this.Ff,27)}}),this.hasAppearanceStream=!1};Xo(Bu,wa);var Lu=function(){Bu.call(this),this.fontName="helvetica",this.combo=!1};Xo(Lu,Bu);var Fu=function(){Lu.call(this),this.combo=!0};Xo(Fu,Lu);var rm=function(){Fu.call(this),this.edit=!0};Xo(rm,Fu);var Pi=function(){wa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,15)},set:function(t){t?this.Ff=Kn(this.Ff,15):this.Ff=Jn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,16)},set:function(t){t?this.Ff=Kn(this.Ff,16):this.Ff=Jn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,17)},set:function(t){t?this.Ff=Kn(this.Ff,17):this.Ff=Jn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,26)},set:function(t){t?this.Ff=Kn(this.Ff,26):this.Ff=Jn(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,o=[];for(n in o.push("<<"),e)o.push("/"+n+" ("+$d(t(e[n]))+")");return o.push(">>"),o.join(`
`)}},set:function(t){Kr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};Xo(Pi,wa);var nm=function(){Pi.call(this),this.pushButton=!0};Xo(nm,Pi);var zu=function(){Pi.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};Xo(zu,Pi);var Em=function(){var r,e;wa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(o){r=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(d){return d};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var s,l=[];for(s in l.push("<<"),n)l.push("/"+s+" ("+$d(o(n[s]))+")");return l.push(">>"),l.join(`
`)},set:function(o){Kr(o)==="object"&&(n=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(o){typeof o=="string"&&(n.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(o){t="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=vt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Xo(Em,wa),zu.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},zu.prototype.createOption=function(r){var e=new Em;return e.Parent=this,e.optionName=r,this.Kids.push(e),Qk.call(this.scope,e),e};var im=function(){Pi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=vt.CheckBox.createAppearanceStream()};Xo(im,Pi);var Sd=function(){wa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,13)},set:function(e){e?this.Ff=Kn(this.Ff,13):this.Ff=Jn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,21)},set:function(e){e?this.Ff=Kn(this.Ff,21):this.Ff=Jn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,23)},set:function(e){e?this.Ff=Kn(this.Ff,23):this.Ff=Jn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,24)},set:function(e){e?this.Ff=Kn(this.Ff,24):this.Ff=Jn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,25)},set:function(e){e?this.Ff=Kn(this.Ff,25):this.Ff=Jn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,26)},set:function(e){e?this.Ff=Kn(this.Ff,26):this.Ff=Jn(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Xo(Sd,wa);var om=function(){Sd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Gn(this.Ff,14)},set:function(r){r?this.Ff=Kn(this.Ff,14):this.Ff=Jn(this.Ff,14)}}),this.password=!0};Xo(om,Sd);var vt={CheckBox:{createAppearanceStream:function(){return{N:{On:vt.CheckBox.YesNormal},D:{On:vt.CheckBox.YesPushDown,Off:vt.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=qa(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,o=r.scope.__private__.encodeColorString(r.color),s=T1(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+nr(vt.internal.getWidth(r))+" "+nr(vt.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+nr(s.fontSize)+" Tf "+o),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=qa(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),o=[],s=vt.internal.getHeight(r),l=vt.internal.getWidth(r),d=T1(r,r.caption);return o.push("1 g"),o.push("0 0 "+nr(l)+" "+nr(s)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+nr(l-1)+" "+nr(s-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+t+" "+nr(d.fontSize)+" Tf "+n),o.push(d.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(r){var e=qa(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+nr(vt.internal.getWidth(r))+" "+nr(vt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:vt.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=vt.RadioButton.Circle.YesNormal,e.D[r]=vt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=qa(r);e.scope=r.scope;var t=[],n=vt.internal.getWidth(r)<=vt.internal.getHeight(r)?vt.internal.getWidth(r)/4:vt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var o=vt.internal.Bezier_C,s=Number((n*o).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+gc(vt.internal.getWidth(r)/2)+" "+gc(vt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),t.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),t.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),t.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=qa(r);e.scope=r.scope;var t=[],n=vt.internal.getWidth(r)<=vt.internal.getHeight(r)?vt.internal.getWidth(r)/4:vt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var o=Number((2*n).toFixed(5)),s=Number((o*vt.internal.Bezier_C).toFixed(5)),l=Number((n*vt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+gc(vt.internal.getWidth(r)/2)+" "+gc(vt.internal.getHeight(r)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),t.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),t.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),t.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+gc(vt.internal.getWidth(r)/2)+" "+gc(vt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+l+" "+l+" "+n+" 0 "+n+" c"),t.push("-"+l+" "+n+" -"+n+" "+l+" -"+n+" 0 c"),t.push("-"+n+" -"+l+" -"+l+" -"+n+" 0 -"+n+" c"),t.push(l+" -"+n+" "+n+" -"+l+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=qa(r);e.scope=r.scope;var t=[],n=vt.internal.getWidth(r)<=vt.internal.getHeight(r)?vt.internal.getWidth(r)/4:vt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var o=Number((2*n).toFixed(5)),s=Number((o*vt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+gc(vt.internal.getWidth(r)/2)+" "+gc(vt.internal.getHeight(r)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),t.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),t.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),t.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:vt.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=vt.RadioButton.Cross.YesNormal,e.D[r]=vt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=qa(r);e.scope=r.scope;var t=[],n=vt.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+nr(vt.internal.getWidth(r)-2)+" "+nr(vt.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(nr(n.x1.x)+" "+nr(n.x1.y)+" m"),t.push(nr(n.x2.x)+" "+nr(n.x2.y)+" l"),t.push(nr(n.x4.x)+" "+nr(n.x4.y)+" m"),t.push(nr(n.x3.x)+" "+nr(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=qa(r);e.scope=r.scope;var t=vt.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+nr(vt.internal.getWidth(r))+" "+nr(vt.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+nr(vt.internal.getWidth(r)-2)+" "+nr(vt.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(nr(t.x1.x)+" "+nr(t.x1.y)+" m"),n.push(nr(t.x2.x)+" "+nr(t.x2.y)+" l"),n.push(nr(t.x4.x)+" "+nr(t.x4.y)+" m"),n.push(nr(t.x3.x)+" "+nr(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=qa(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+nr(vt.internal.getWidth(r))+" "+nr(vt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};vt.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=vt.internal.getWidth(r),t=vt.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},vt.internal.getWidth=function(r){var e=0;return Kr(r)==="object"&&(e=E2(r.Rect[2])),e},vt.internal.getHeight=function(r){var e=0;return Kr(r)==="object"&&(e=E2(r.Rect[3])),e};var Qk=Ln.addField=function(r){if(Yk(this,r),!(r instanceof wa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};Ln.AcroFormChoiceField=Bu,Ln.AcroFormListBox=Lu,Ln.AcroFormComboBox=Fu,Ln.AcroFormEditBox=rm,Ln.AcroFormButton=Pi,Ln.AcroFormPushButton=nm,Ln.AcroFormRadioButton=zu,Ln.AcroFormCheckBox=im,Ln.AcroFormTextField=Sd,Ln.AcroFormPasswordField=om,Ln.AcroFormAppearance=vt,Ln.AcroForm={ChoiceField:Bu,ListBox:Lu,ComboBox:Fu,EditBox:rm,Button:Pi,PushButton:nm,RadioButton:zu,CheckBox:im,TextField:Sd,PasswordField:om,Appearance:vt},It.AcroForm={ChoiceField:Bu,ListBox:Lu,ComboBox:Fu,EditBox:rm,Button:Pi,PushButton:nm,RadioButton:zu,CheckBox:im,TextField:Sd,PasswordField:om,Appearance:vt};It.AcroForm;function _S(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){var e="addImage_";r.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=r.__addimage__.getImageFileTypeByImageData=function(I,w){var N,W,q,re,Z,te=t;if((w=w||t)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(se(I))for(Z in n)for(q=n[Z],N=0;N<q.length;N+=1){for(re=!0,W=0;W<q[N].length;W+=1)if(q[N][W]!==void 0&&q[N][W]!==I[W]){re=!1;break}if(re===!0){te=Z;break}}else for(Z in n)for(q=n[Z],N=0;N<q.length;N+=1){for(re=!0,W=0;W<q[N].length;W+=1)if(q[N][W]!==void 0&&q[N][W]!==I.charCodeAt(W)){re=!1;break}if(re===!0){te=Z;break}}return te===t&&w!==t&&(te=w),te},s=function I(w){for(var N=this.internal.write,W=this.internal.putStream,q=(0,this.internal.getFilters)();q.indexOf("FlateEncode")!==-1;)q.splice(q.indexOf("FlateEncode"),1);w.objectId=this.internal.newObject();var re=[];if(re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Image"}),re.push({key:"Width",value:w.width}),re.push({key:"Height",value:w.height}),w.colorSpace===T.INDEXED?re.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(w.palette.length/3-1)+" "+("sMask"in w&&w.sMask!==void 0?w.objectId+2:w.objectId+1)+" 0 R]"}):(re.push({key:"ColorSpace",value:"/"+w.colorSpace}),w.colorSpace===T.DEVICE_CMYK&&re.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),re.push({key:"BitsPerComponent",value:w.bitsPerComponent}),"decodeParameters"in w&&w.decodeParameters!==void 0&&re.push({key:"DecodeParms",value:"<<"+w.decodeParameters+">>"}),"transparency"in w&&Array.isArray(w.transparency)&&w.transparency.length>0){for(var Z="",te=0,ye=w.transparency.length;te<ye;te++)Z+=w.transparency[te]+" "+w.transparency[te]+" ";re.push({key:"Mask",value:"["+Z+"]"})}w.sMask!==void 0&&re.push({key:"SMask",value:w.objectId+1+" 0 R"});var we=w.filter!==void 0?["/"+w.filter]:void 0;if(W({data:w.data,additionalKeyValues:re,alreadyAppliedFilters:we,objectId:w.objectId}),N("endobj"),"sMask"in w&&w.sMask!==void 0){var ie,$=(ie=w.sMaskBitsPerComponent)!==null&&ie!==void 0?ie:w.bitsPerComponent,Y={width:w.width,height:w.height,colorSpace:"DeviceGray",bitsPerComponent:$,data:w.sMask};"filter"in w&&(Y.decodeParameters="/Predictor ".concat(w.predictor," /Colors 1 /BitsPerComponent ").concat($," /Columns ").concat(w.width),Y.filter=w.filter),I.call(this,Y)}if(w.colorSpace===T.INDEXED){var ae=this.internal.newObject();W({data:A(new Uint8Array(w.palette)),objectId:ae}),N("endobj")}},l=function(){var I=this.internal.collections[e+"images"];for(var w in I)s.call(this,I[w])},d=function(){var I,w=this.internal.collections[e+"images"],N=this.internal.write;for(var W in w)N("/I"+(I=w[W]).index,I.objectId,"0","R")},h=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",d))},u=function(){var I=this.internal.collections[e+"images"];return h.call(this),I},g=function(){return Object.keys(this.internal.collections[e+"images"]).length},y=function(I){return typeof r["process"+I.toUpperCase()]=="function"},_=function(I){return Kr(I)==="object"&&I.nodeType===1},b=function(I,w){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var N=""+I.getAttribute("src");if(N.indexOf("data:image/")===0)return tm(unescape(N).split("base64,").pop());var W=r.loadFile(N,!0);if(W!==void 0)return W}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var q;switch(w){case"PNG":q="image/png";break;case"WEBP":q="image/webp";break;default:q="image/jpeg"}return tm(I.toDataURL(q,1).split("base64,").pop())}},R=function(I){var w=this.internal.collections[e+"images"];if(w){for(var N in w)if(I===w[N].alias)return w[N]}},j=function(I,w,N){return I||w||(I=-96,w=-96),I<0&&(I=-1*N.width*72/I/this.internal.scaleFactor),w<0&&(w=-1*N.height*72/w/this.internal.scaleFactor),I===0&&(I=w*N.width/N.height),w===0&&(w=I*N.height/N.width),[I,w]},z=function(I,w,N,W,q,re){var Z=j.call(this,N,W,q),te=this.internal.getCoordinateString,ye=this.internal.getVerticalCoordinateString,we=u.call(this);if(N=Z[0],W=Z[1],we[q.index]=q,re){re*=Math.PI/180;var ie=Math.cos(re),$=Math.sin(re),Y=function(fe){return fe.toFixed(4)},ae=[Y(ie),Y($),Y(-1*$),Y(ie),0,0,"cm"]}this.internal.write("q"),re?(this.internal.write([1,"0","0",1,te(I),ye(w+W),"cm"].join(" ")),this.internal.write(ae.join(" ")),this.internal.write([te(N),"0","0",te(W),"0","0","cm"].join(" "))):this.internal.write([te(N),"0","0",te(W),te(I),ye(w+W),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+q.index+" Do"),this.internal.write("Q")},T=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var M=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},F=r.__addimage__.sHashCode=function(I){var w,N,W=0;if(typeof I=="string")for(N=I.length,w=0;w<N;w++)W=(W<<5)-W+I.charCodeAt(w),W|=0;else if(se(I))for(N=I.byteLength/2,w=0;w<N;w++)W=(W<<5)-W+I[w],W|=0;return W},B=r.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var w=!0;return I.length===0&&(w=!1),I.length%4!=0&&(w=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(w=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(w=!1),w},J=r.__addimage__.extractImageFromDataUrl=function(I){if(I==null||!(I=I.trim()).startsWith("data:"))return null;var w=I.indexOf(",");return w<0?null:I.substring(0,w).trim().endsWith("base64")?I.substring(w+1):null};r.__addimage__.isArrayBuffer=function(I){return I instanceof ArrayBuffer};var se=r.__addimage__.isArrayBufferView=function(I){return I instanceof Int8Array||I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array},O=r.__addimage__.binaryStringToUint8Array=function(I){for(var w=I.length,N=new Uint8Array(w),W=0;W<w;W++)N[W]=I.charCodeAt(W);return N},A=r.__addimage__.arrayBufferToBinaryString=function(I){for(var w="",N=se(I)?I:new Uint8Array(I),W=0;W<N.length;W+=8192)w+=String.fromCharCode.apply(null,N.subarray(W,W+8192));return w};r.addImage=function(){var I,w,N,W,q,re,Z,te,ye;if(typeof arguments[1]=="number"?(w=t,N=arguments[1],W=arguments[2],q=arguments[3],re=arguments[4],Z=arguments[5],te=arguments[6],ye=arguments[7]):(w=arguments[1],N=arguments[2],W=arguments[3],q=arguments[4],re=arguments[5],Z=arguments[6],te=arguments[7],ye=arguments[8]),Kr(I=arguments[0])==="object"&&!_(I)&&"imageData"in I){var we=I;I=we.imageData,w=we.format||w||t,N=we.x||N||0,W=we.y||W||0,q=we.w||we.width||q,re=we.h||we.height||re,Z=we.alias||Z,te=we.compression||te,ye=we.rotation||we.angle||ye}var ie=this.internal.getFilters();if(te===void 0&&ie.indexOf("FlateEncode")!==-1&&(te="SLOW"),isNaN(N)||isNaN(W))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var $=S.call(this,I,w,Z,te);return z.call(this,N,W,q,re,$,ye),this};var S=function(I,w,N,W){var q,re,Z;if(typeof I=="string"&&o(I)===t){I=unescape(I);var te=V(I,!1);(te!==""||(te=r.loadFile(I,!0))!==void 0)&&(I=te)}if(_(I)&&(I=b(I,w)),w=o(I,w),!y(w))throw new Error("addImage does not support files of type '"+w+"', please ensure that a plugin for '"+w+"' support is added.");if(((Z=N)==null||Z.length===0)&&(N=(function(ye){return typeof ye=="string"||se(ye)?F(ye):se(ye.data)?F(ye.data):null})(I)),(q=R.call(this,N))||(I instanceof Uint8Array||w==="RGBA"||(re=I,I=O(I)),q=this["process"+w.toUpperCase()](I,g.call(this),N,(function(ye){return ye&&typeof ye=="string"&&(ye=ye.toUpperCase()),ye in r.image_compression?ye:M.NONE})(W),re)),!q)throw new Error("An unknown error occurred whilst processing the image.");return q},V=r.__addimage__.convertBase64ToBinaryString=function(I,w){w=typeof w!="boolean"||w;var N,W="";if(typeof I=="string"){var q;N=(q=J(I))!==null&&q!==void 0?q:I;try{W=tm(N)}catch(re){if(w)throw B(N)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+re.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};r.getImageProperties=function(I){var w,N,W="";if(_(I)&&(I=b(I)),typeof I=="string"&&o(I)===t&&((W=V(I,!1))===""&&(W=r.loadFile(I)||""),I=W),N=o(I),!y(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(I instanceof Uint8Array||(I=O(I)),!(w=this["process"+N.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return w.fileType=N,w}})(It.API),(function(r){var e=function(t){if(t!==void 0&&t!="")return!0};It.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,o,s,l=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,g=!1,y=0;y<u.length&&!g;y++)switch((n=u[y]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var _=0;_<u.length;_++){n=u[_];var b=this.internal.pdfEscape,R=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),z=this.internal.newAdditionalObject(),T=this.internal.getEncryptor(j.objId),M=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(o="/Rect ["+l(n.bounds.x)+" "+d(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w)+" "+d(n.bounds.y)+"] ")+"/Contents ("+b(T(n.contents))+")",s+=" /Popup "+z.objId+" 0 R",s+=" /P "+h.objId+" 0 R",s+=" /T ("+b(T(M))+") >>",j.content=s;var F=j.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+l(n.bounds.x+30)+" "+d(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w+30)+" "+d(n.bounds.y)+"] ")+" /Parent "+F,n.open&&(s+=" /Open true"),s+=" >>",z.content=s,this.internal.write(j.objId,"0 R",z.objId,"0 R");break;case"freetext":o="/Rect ["+l(n.bounds.x)+" "+d(n.bounds.y)+" "+l(n.bounds.x+n.bounds.w)+" "+d(n.bounds.y+n.bounds.h)+"] ";var B=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+b(R(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+B+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var J=this.annotations._nameMap[n.options.name];n.options.pageNumber=J.page,n.options.top=J.y}else n.options.top||(n.options.top=0);if(o="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+b(R(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var se=d(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+se+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,o,s,l){var d=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:h(t),y:u(n),w:h(t+o),h:u(n+s)},options:l,type:"link"})},r.textWithLink=function(t,n,o,s){var l,d,h=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){d=s.maxWidth;var g=this.splitTextToSize(t,d).length;l=Math.ceil(u*g)}else d=h,l=u;return this.text(t,n,o,s),o+=.2*u,s.align==="center"&&(n-=h/2),s.align==="right"&&(n-=h),this.link(n,o-u,d,l,s),h},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}})(It.API),(function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];r.__arabicParser__={};var s=r.__arabicParser__.isInArabicSubstitutionA=function(j){return e[j.charCodeAt(0)]!==void 0},l=r.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},d=r.__arabicParser__.isArabicEndLetter=function(j){return l(j)&&s(j)&&e[j.charCodeAt(0)].length<=2},h=r.__arabicParser__.isArabicAlfLetter=function(j){return l(j)&&o.indexOf(j.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return l(j)&&s(j)&&e[j.charCodeAt(0)].length>=1};var u=r.__arabicParser__.arabicLetterHasFinalForm=function(j){return l(j)&&s(j)&&e[j.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(j){return l(j)&&s(j)&&e[j.charCodeAt(0)].length>=3};var g=r.__arabicParser__.arabicLetterHasMedialForm=function(j){return l(j)&&s(j)&&e[j.charCodeAt(0)].length==4},y=r.__arabicParser__.resolveLigatures=function(j){var z=0,T=t,M="",F=0;for(z=0;z<j.length;z+=1)T[j.charCodeAt(z)]!==void 0?(F++,typeof(T=T[j.charCodeAt(z)])=="number"&&(M+=String.fromCharCode(T),T=t,F=0),z===j.length-1&&(T=t,M+=j.charAt(z-(F-1)),z-=F-1,F=0)):(T=t,M+=j.charAt(z-F),z-=F,F=0);return M};r.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&n[j.charCodeAt(0)]!==void 0};var _=r.__arabicParser__.getCorrectForm=function(j,z,T){return l(j)?s(j)===!1?-1:!u(j)||!l(z)&&!l(T)||!l(T)&&d(z)||d(j)&&!l(z)||d(j)&&h(z)||d(j)&&d(z)?0:g(j)&&l(z)&&!d(z)&&l(T)&&u(T)?3:d(j)||!l(T)?1:2:-1},b=function(j){var z=0,T=0,M=0,F="",B="",J="",se=(j=j||"").split("\\s+"),O=[];for(z=0;z<se.length;z+=1){for(O.push(""),T=0;T<se[z].length;T+=1)F=se[z][T],B=se[z][T-1],J=se[z][T+1],l(F)?(M=_(F,B,J),O[z]+=M!==-1?String.fromCharCode(e[F.charCodeAt(0)][M]):F):O[z]+=F;O[z]=y(O[z])}return O.join(" ")},R=r.__arabicParser__.processArabic=r.processArabic=function(){var j,z=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,T=[];if(Array.isArray(z)){var M=0;for(T=[],M=0;M<z.length;M+=1)Array.isArray(z[M])?T.push([b(z[M][0]),z[M][1],z[M][2]]):T.push([b(z[M])]);j=T}else j=b(z);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};r.events.push(["preProcessText",R])})(It.API),It.API.autoPrint=function(r){var e;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(d){t=d}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(d){n=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(d){o=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(d){s=d}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(d){l=d}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var o;if((t=t||"2d")!=="2d")return null;for(o in n)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=n[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(It.API),(function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(j){h=j}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(j){u=j}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(j){g=j}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(j){y=j}});var _=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return _},set:function(j){_=j}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(j){b=j}});var R=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return R},set:function(j){R=j}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(h){return n.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},r.getTextDimensions=function(h,u){n.call(this);var g=(u=u||{}).fontSize||this.getFontSize(),y=u.font||this.getFont(),_=u.scaleFactor||this.internal.scaleFactor,b=0,R=0,j=0,z=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var T=u.maxWidth;T>0?typeof h=="string"?h=this.splitTextToSize(h,T):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(F,B){return F.concat(z.splitTextToSize(B,T))},[])):h=Array.isArray(h)?h:[h];for(var M=0;M<h.length;M++)b<(j=this.getStringUnitWidth(h[M],{font:y})*g)&&(b=j);return b!==0&&(R=h.length),{w:b/=_,h:Math.max((R*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/_,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=r.cell=function(){var h;h=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,y=this.internal.__cell__.margins||e,_=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===h.lineNumber?(h.x=(u.x||0)+(u.width||0),h.y=u.y||0):u.y+u.height+h.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=y.top,b&&_&&(this.printHeaderRow(h.lineNumber,!0),h.y+=_[0].height)):h.y=u.y+u.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-g,h.y+g,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+g,{align:"center",baseline:"top",maxWidth:h.width-g-g}):this.text(h.text,h.x+g,h.y+g,{align:"left",baseline:"top",maxWidth:h.width-g-g})),this.internal.__cell__.lastCell=h,this};r.table=function(h,u,g,y,_){if(n.call(this),!g)throw new Error("No data for PDF table.");var b,R,j,z,T=[],M=[],F=[],B={},J={},se=[],O=[],A=(_=_||{}).autoSize||!1,S=_.printHeaders!==!1,V=_.css&&_.css["font-size"]!==void 0?16*_.css["font-size"]:_.fontSize||12,I=_.margins||Object.assign({width:this.getPageWidth()},e),w=typeof _.padding=="number"?_.padding:3,N=_.headerBackgroundColor||"#c8c8c8",W=_.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=w,this.internal.__cell__.headerBackgroundColor=N,this.internal.__cell__.headerTextColor=W,this.setFontSize(V),y==null)M=T=Object.keys(g[0]),F=T.map(function(){return"left"});else if(Array.isArray(y)&&Kr(y[0])==="object")for(T=y.map(function(we){return we.name}),M=y.map(function(we){return we.prompt||we.name||""}),F=y.map(function(we){return we.align||"left"}),b=0;b<y.length;b+=1)J[y[b].name]=.7499990551181103*y[b].width;else Array.isArray(y)&&typeof y[0]=="string"&&(M=T=y,F=T.map(function(){return"left"}));if(A||Array.isArray(y)&&typeof y[0]=="string")for(b=0;b<T.length;b+=1){for(B[z=T[b]]=g.map(function(we){return we[z]}),this.setFont(void 0,"bold"),se.push(this.getTextDimensions(M[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),R=B[z],this.setFont(void 0,"normal"),j=0;j<R.length;j+=1)se.push(this.getTextDimensions(R[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);J[z]=Math.max.apply(null,se)+w+w,se=[]}if(S){var q={};for(b=0;b<T.length;b+=1)q[T[b]]={},q[T[b]].text=M[b],q[T[b]].align=F[b];var re=d.call(this,q,J);O=T.map(function(we){return new s(h,u,J[we],re,q[we].text,void 0,q[we].align)}),this.setTableHeaderRow(O),this.printHeaderRow(1,!1)}var Z=y.reduce(function(we,ie){return we[ie.name]=ie.align,we},{});for(b=0;b<g.length;b+=1){"rowStart"in _&&_.rowStart instanceof Function&&_.rowStart({row:b,data:g[b]},this);var te=d.call(this,g[b],J);for(j=0;j<T.length;j+=1){var ye=g[b][T[j]];"cellStart"in _&&_.cellStart instanceof Function&&_.cellStart({row:b,col:j,data:ye},this),l.call(this,new s(h,u,J[T[j]],te,ye,b+2,Z[T[j]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=u,this};var d=function(h,u){var g=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,_=this.internal.scaleFactor;return Object.keys(h).map(function(b){var R=h[b];return this.splitTextToSize(R.hasOwnProperty("text")?R.text:R,u[b]-g-g)},this).map(function(b){return this.getLineHeightFactor()*b.length*y/_+g+g},this).reduce(function(b,R){return Math.max(b,R)},0)};r.setTableHeaderRow=function(h){n.call(this),this.internal.__cell__.tableHeaderRow=h},r.printHeaderRow=function(h,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var _=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){g=this.internal.__cell__.tableHeaderRow[b].clone(),u&&(g.y=this.internal.__cell__.margins.top||0,_.push(g)),g.lineNumber=h;var R=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,g),this.setTextColor(R)}_.length>0&&this.setTableHeaderRow(_),this.setFont(void 0,"normal"),t=!1}})(It.API);var TS={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},CS=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],C1=_S(CS),AS=[100,200,300,400,500,600,700,800,900],Xk=_S(AS);function Hg(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=(function(s){return TS[s=s||"normal"]?s:"normal"})(r.style),n=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(r.weight),o=(function(s){return typeof C1[s=s||"normal"]=="number"?s:"normal"})(r.stretch);return{family:e,style:t,weight:n,stretch:o,src:r.src||[],ref:r.ref||{name:e,style:[o,t,n].join(" ")}}}function R2(r,e,t,n){var o;for(o=t;o>=0&&o<e.length;o+=n)if(r[e[o]])return r[e[o]];for(o=t;o>=0&&o<e.length;o-=n)if(r[e[o]])return r[e[o]]}var Zk={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},P2={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function N2(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function B2(r){return r.trimLeft()}function ej(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function tj(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var Wp,L2,F2,yu,$p,z2,V2,O2,Gg=["times"];function M2(r,e,t,n,o){var s=4,l=W2;switch(o){case It.API.image_compression.FAST:s=1,l=D2;break;case It.API.image_compression.MEDIUM:s=6,l=$2;break;case It.API.image_compression.SLOW:s=9,l=q2}r=(function(h,u,g,y){for(var _,b=h.length/u,R=new Uint8Array(h.length+b),j=[rj,D2,W2,$2,q2],z=0;z<b;z+=1){var T=z*u,M=h.subarray(T,T+u);if(y)R.set(y(M,g,_),T+z);else{for(var F=j.length,B=[],J=0;J<F;J+=1)B[J]=j[J](M,g,_);var se=ij(B.concat());R.set(B[se],T+z)}_=M}return R})(r,e,Math.ceil(t*n/8),l);var d=y1(r,{level:s});return It.API.__addimage__.arrayBufferToBinaryString(d)}function rj(r){var e=Array.apply([],r);return e.unshift(0),e}function D2(r,e){var t=r.length,n=[];n[0]=1;for(var o=0;o<t;o+=1){var s=r[o-e]||0;n[o+1]=r[o]-s+256&255}return n}function W2(r,e,t){var n=r.length,o=[];o[0]=2;for(var s=0;s<n;s+=1){var l=t&&t[s]||0;o[s+1]=r[s]-l+256&255}return o}function $2(r,e,t){var n=r.length,o=[];o[0]=3;for(var s=0;s<n;s+=1){var l=r[s-e]||0,d=t&&t[s]||0;o[s+1]=r[s]+256-(l+d>>>1)&255}return o}function q2(r,e,t){var n=r.length,o=[];o[0]=4;for(var s=0;s<n;s+=1){var l=nj(r[s-e]||0,t&&t[s]||0,t&&t[s-e]||0);o[s+1]=r[s]-l+256&255}return o}function nj(r,e,t){if(r===e&&e===t)return r;var n=Math.abs(e-t),o=Math.abs(r-t),s=Math.abs(r+e-t-t);return n<=o&&n<=s?r:o<=s?e:t}function ij(r){var e=r.map(function(t){return t.reduce(function(n,o){return n+Math.abs(o)},0)});return e.indexOf(Math.min.apply(null,e))}function Kg(r,e,t){var n=e*t,o=Math.floor(n/8),s=16-(n-8*o+t),l=(1<<t)-1;return kS(r,o)>>s&l}function U2(r,e,t,n){var o=t*n,s=Math.floor(o/8),l=16-(o-8*s+n),d=(1<<n)-1,h=(e&d)<<l;(function(u,g,y){if(g+1<u.byteLength)u.setUint16(g,y,!1);else{var _=y>>8&255;u.setUint8(g,_)}})(r,s,kS(r,s)&~(d<<l)&65535|h)}function kS(r,e){return e+1<r.byteLength?r.getUint16(e,!1):r.getUint8(e)<<8}function oj(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,o=r[e++],s=o>>7,l=1<<1+(7&o);r[e++],r[e++];var d=null,h=null;s&&(d=e,h=l,e+=3*l);var u=!0,g=[],y=0,_=null,b=0,R=null;for(this.width=t,this.height=n;u&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,R=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((I=r[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var j=r[e++];y=r[e++]|r[e++]<<8,_=r[e++],1&j||(_=null),b=j>>2&7,e++;break;case 254:for(;;){if(!((I=r[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var z=r[e++]|r[e++]<<8,T=r[e++]|r[e++]<<8,M=r[e++]|r[e++]<<8,F=r[e++]|r[e++]<<8,B=r[e++],J=B>>6&1,se=1<<1+(7&B),O=d,A=h,S=!1;B>>7&&(S=!0,O=e,A=se,e+=3*se);var V=e;for(e++;;){var I;if(!((I=r[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}g.push({x:z,y:T,width:M,height:F,has_local_palette:S,palette_offset:O,palette_size:A,data_offset:V,data_length:e-V,transparent_index:_,interlaced:!!J,delay:y,disposal:b});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return R},this.frameInfo=function(w){if(w<0||w>=g.length)throw new Error("Frame index out of range.");return g[w]},this.decodeAndBlitFrameBGRA=function(w,N){var W=this.frameInfo(w),q=W.width*W.height,re=new Uint8Array(q);H2(r,W.data_offset,re,q);var Z=W.palette_offset,te=W.transparent_index;te===null&&(te=256);var ye=W.width,we=t-ye,ie=ye,$=4*(W.y*t+W.x),Y=4*((W.y+W.height)*t+W.x),ae=$,fe=4*we;W.interlaced===!0&&(fe+=4*t*7);for(var me=8,Se=0,ke=re.length;Se<ke;++Se){var Ae=re[Se];if(ie===0&&(ie=ye,(ae+=fe)>=Y&&(fe=4*we+4*t*(me-1),ae=$+(ye+we)*(me<<1),me>>=1)),Ae===te)ae+=4;else{var Fe=r[Z+3*Ae],He=r[Z+3*Ae+1],Ze=r[Z+3*Ae+2];N[ae++]=Ze,N[ae++]=He,N[ae++]=Fe,N[ae++]=255}--ie}},this.decodeAndBlitFrameRGBA=function(w,N){var W=this.frameInfo(w),q=W.width*W.height,re=new Uint8Array(q);H2(r,W.data_offset,re,q);var Z=W.palette_offset,te=W.transparent_index;te===null&&(te=256);var ye=W.width,we=t-ye,ie=ye,$=4*(W.y*t+W.x),Y=4*((W.y+W.height)*t+W.x),ae=$,fe=4*we;W.interlaced===!0&&(fe+=4*t*7);for(var me=8,Se=0,ke=re.length;Se<ke;++Se){var Ae=re[Se];if(ie===0&&(ie=ye,(ae+=fe)>=Y&&(fe=4*we+4*t*(me-1),ae=$+(ye+we)*(me<<1),me>>=1)),Ae===te)ae+=4;else{var Fe=r[Z+3*Ae],He=r[Z+3*Ae+1],Ze=r[Z+3*Ae+2];N[ae++]=Fe,N[ae++]=He,N[ae++]=Ze,N[ae++]=255}--ie}}}function H2(r,e,t,n){for(var o=r[e++],s=1<<o,l=s+1,d=l+1,h=o+1,u=(1<<h)-1,g=0,y=0,_=0,b=r[e++],R=new Int32Array(4096),j=null;;){for(;g<16&&b!==0;)y|=r[e++]<<g,g+=8,b===1?b=r[e++]:--b;if(g<h)break;var z=y&u;if(y>>=h,g-=h,z!==s){if(z===l)break;for(var T=z<d?z:j,M=0,F=T;F>s;)F=R[F]>>8,++M;var B=F;if(_+M+(T!==z?1:0)>n)return void on.log("Warning, gif stream longer than expected.");t[_++]=B;var J=_+=M;for(T!==z&&(t[_++]=B),F=T;M--;)F=R[F],t[--J]=255&F,F>>=8;j!==null&&d<4096&&(R[d++]=j<<8|B,d>=u+1&&h<12&&(++h,u=u<<1|1)),j=z}else d=l+1,u=(1<<(h=o+1))-1,j=null}return _!==n&&on.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Jg(r){var e,t,n,o,s,l=Math.floor,d=new Array(64),h=new Array(64),u=new Array(64),g=new Array(64),y=new Array(65535),_=new Array(65535),b=new Array(64),R=new Array(64),j=[],z=0,T=7,M=new Array(64),F=new Array(64),B=new Array(64),J=new Array(256),se=new Array(2048),O=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],w=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function re($,Y){for(var ae=0,fe=0,me=new Array,Se=1;Se<=16;Se++){for(var ke=1;ke<=$[Se];ke++)me[Y[fe]]=[],me[Y[fe]][0]=ae,me[Y[fe]][1]=Se,fe++,ae++;ae*=2}return me}function Z($){for(var Y=$[0],ae=$[1]-1;ae>=0;)Y&1<<ae&&(z|=1<<T),ae--,--T<0&&(z==255?(te(255),te(0)):te(z),T=7,z=0)}function te($){j.push($)}function ye($){te($>>8&255),te(255&$)}function we($,Y,ae,fe,me){for(var Se,ke=me[0],Ae=me[240],Fe=(function($e,nt){var tt,Jt,At,mr,zt,Ut,br,Mt,kt,Pt,xt=0;for(kt=0;kt<8;++kt){tt=$e[xt],Jt=$e[xt+1],At=$e[xt+2],mr=$e[xt+3],zt=$e[xt+4],Ut=$e[xt+5],br=$e[xt+6];var jr=tt+(Mt=$e[xt+7]),ir=tt-Mt,mt=Jt+br,Ht=Jt-br,sr=At+Ut,Rt=At-Ut,tr=mr+zt,$t=mr-zt,Ir=jr+tr,Vr=jr-tr,qt=mt+sr,Dt=mt-sr;$e[xt]=Ir+qt,$e[xt+4]=Ir-qt;var ar=.707106781*(Dt+Vr);$e[xt+2]=Vr+ar,$e[xt+6]=Vr-ar;var Ki=.382683433*((Ir=$t+Rt)-(Dt=Ht+ir)),zn=.5411961*Ir+Ki,Bo=1.306562965*Dt+Ki,Vn=.707106781*(qt=Rt+Ht),Nt=ir+Vn,Bi=ir-Vn;$e[xt+5]=Bi+zn,$e[xt+3]=Bi-zn,$e[xt+1]=Nt+Bo,$e[xt+7]=Nt-Bo,xt+=8}for(xt=0,kt=0;kt<8;++kt){tt=$e[xt],Jt=$e[xt+8],At=$e[xt+16],mr=$e[xt+24],zt=$e[xt+32],Ut=$e[xt+40],br=$e[xt+48];var mi=tt+(Mt=$e[xt+56]),On=tt-Mt,Li=Jt+br,Ar=Jt-br,Or=At+Ut,un=At-Ut,Xn=mr+zt,Zo=mr-zt,Ji=mi+Xn,Yi=mi-Xn,wn=Li+Or,Fi=Li-Or;$e[xt]=Ji+wn,$e[xt+32]=Ji-wn;var zi=.707106781*(Fi+Yi);$e[xt+16]=Yi+zi,$e[xt+48]=Yi-zi;var ws=.382683433*((Ji=Zo+un)-(Fi=Ar+On)),yo=.5411961*Ji+ws,bo=1.306562965*Fi+ws,Ss=.707106781*(wn=un+Ar),es=On+Ss,Lo=On-Ss;$e[xt+40]=Lo+yo,$e[xt+24]=Lo-yo,$e[xt+8]=es+bo,$e[xt+56]=es-bo,xt++}for(kt=0;kt<64;++kt)Pt=$e[kt]*nt[kt],b[kt]=Pt>0?Pt+.5|0:Pt-.5|0;return b})($,Y),He=0;He<64;++He)R[O[He]]=Fe[He];var Ze=R[0]-ae;ae=R[0],Ze==0?Z(fe[0]):(Z(fe[_[Se=32767+Ze]]),Z(y[Se]));for(var Xe=63;Xe>0&&R[Xe]==0;)Xe--;if(Xe==0)return Z(ke),ae;for(var ge,le=1;le<=Xe;){for(var at=le;R[le]==0&&le<=Xe;)++le;var dt=le-at;if(dt>=16){ge=dt>>4;for(var lt=1;lt<=ge;++lt)Z(Ae);dt&=15}Se=32767+R[le],Z(me[(dt<<4)+_[Se]]),Z(y[Se]),le++}return Xe!=63&&Z(ke),ae}function ie($){$=Math.min(Math.max($,1),100),s!=$&&((function(Y){for(var ae=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],fe=0;fe<64;fe++){var me=l((ae[fe]*Y+50)/100);me=Math.min(Math.max(me,1),255),d[O[fe]]=me}for(var Se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ke=0;ke<64;ke++){var Ae=l((Se[ke]*Y+50)/100);Ae=Math.min(Math.max(Ae,1),255),h[O[ke]]=Ae}for(var Fe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],He=0,Ze=0;Ze<8;Ze++)for(var Xe=0;Xe<8;Xe++)u[He]=1/(d[O[He]]*Fe[Ze]*Fe[Xe]*8),g[He]=1/(h[O[He]]*Fe[Ze]*Fe[Xe]*8),He++})($<50?Math.floor(5e3/$):Math.floor(200-2*$)),s=$)}this.encode=function($,Y){Y&&ie(Y),j=new Array,z=0,T=7,ye(65496),ye(65504),ye(16),te(74),te(70),te(73),te(70),te(0),te(1),te(1),te(0),ye(1),ye(1),te(0),te(0),(function(){ye(65499),ye(132),te(0);for(var Jt=0;Jt<64;Jt++)te(d[Jt]);te(1);for(var At=0;At<64;At++)te(h[At])})(),(function(Jt,At){ye(65472),ye(17),te(8),ye(At),ye(Jt),te(3),te(1),te(17),te(0),te(2),te(17),te(1),te(3),te(17),te(1)})($.width,$.height),(function(){ye(65476),ye(418),te(0);for(var Jt=0;Jt<16;Jt++)te(A[Jt+1]);for(var At=0;At<=11;At++)te(S[At]);te(16);for(var mr=0;mr<16;mr++)te(V[mr+1]);for(var zt=0;zt<=161;zt++)te(I[zt]);te(1);for(var Ut=0;Ut<16;Ut++)te(w[Ut+1]);for(var br=0;br<=11;br++)te(N[br]);te(17);for(var Mt=0;Mt<16;Mt++)te(W[Mt+1]);for(var kt=0;kt<=161;kt++)te(q[kt])})(),ye(65498),ye(12),te(3),te(1),te(0),te(2),te(17),te(3),te(17),te(0),te(63),te(0);var ae=0,fe=0,me=0;z=0,T=7,this.encode.displayName="_encode_";for(var Se,ke,Ae,Fe,He,Ze,Xe,ge,le,at=$.data,dt=$.width,lt=$.height,$e=4*dt,nt=0;nt<lt;){for(Se=0;Se<$e;){for(He=$e*nt+Se,Xe=-1,ge=0,le=0;le<64;le++)Ze=He+(ge=le>>3)*$e+(Xe=4*(7&le)),nt+ge>=lt&&(Ze-=$e*(nt+1+ge-lt)),Se+Xe>=$e&&(Ze-=Se+Xe-$e+4),ke=at[Ze++],Ae=at[Ze++],Fe=at[Ze++],M[le]=(se[ke]+se[Ae+256|0]+se[Fe+512|0]>>16)-128,F[le]=(se[ke+768|0]+se[Ae+1024|0]+se[Fe+1280|0]>>16)-128,B[le]=(se[ke+1280|0]+se[Ae+1536|0]+se[Fe+1792|0]>>16)-128;ae=we(M,u,ae,e,n),fe=we(F,g,fe,t,o),me=we(B,g,me,t,o),Se+=32}nt+=8}if(T>=0){var tt=[];tt[1]=T+1,tt[0]=(1<<T+1)-1,Z(tt)}return ye(65497),new Uint8Array(j)},r=r||50,(function(){for(var $=String.fromCharCode,Y=0;Y<256;Y++)J[Y]=$(Y)})(),e=re(A,S),t=re(w,N),n=re(V,I),o=re(W,q),(function(){for(var $=1,Y=2,ae=1;ae<=15;ae++){for(var fe=$;fe<Y;fe++)_[32767+fe]=ae,y[32767+fe]=[],y[32767+fe][1]=ae,y[32767+fe][0]=fe;for(var me=-(Y-1);me<=-$;me++)_[32767+me]=ae,y[32767+me]=[],y[32767+me][1]=ae,y[32767+me][0]=Y-1+me;$<<=1,Y<<=1}})(),(function(){for(var $=0;$<256;$++)se[$]=19595*$,se[$+256|0]=38470*$,se[$+512|0]=7471*$+32768,se[$+768|0]=-11059*$,se[$+1024|0]=-21709*$,se[$+1280|0]=32768*$+8421375,se[$+1536|0]=-27439*$,se[$+1792|0]=-5329*$})(),ie(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ma(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function G2(r){function e(S){if(!S)throw Error("assert :P")}function t(S,V,I){for(var w=0;4>w;w++)if(S[V+w]!=I.charCodeAt(w))return!0;return!1}function n(S,V,I,w,N){for(var W=0;W<N;W++)S[V+W]=I[w+W]}function o(S,V,I,w){for(var N=0;N<w;N++)S[V+N]=I}function s(S){return new Int32Array(S)}function l(S,V){for(var I=[],w=0;w<S;w++)I.push(new V);return I}function d(S,V){var I=[];return(function w(N,W,q){for(var re=q[W],Z=0;Z<re&&(N.push(q.length>W+1?[]:new V),!(q.length<W+1));Z++)w(N[Z],W+1,q)})(I,0,S),I}var h=function(){var S=this;function V(p,v){for(var E=1<<v-1>>>0;p&E;)E>>>=1;return E?(p&E-1)+E:p}function I(p,v,E,D,G){e(!(D%E));do p[v+(D-=E)]=G;while(0<D)}function w(p,v,E,D,G){if(e(2328>=G),512>=G)var Q=s(512);else if((Q=s(G))==null)return 0;return(function(X,ee,oe,de,be,Ee){var ue,_e,Ie=ee,Me=1<<oe,Ne=s(16),Ve=s(16);for(e(be!=0),e(de!=null),e(X!=null),e(0<oe),_e=0;_e<be;++_e){if(15<de[_e])return 0;++Ne[de[_e]]}if(Ne[0]==be)return 0;for(Ve[1]=0,ue=1;15>ue;++ue){if(Ne[ue]>1<<ue)return 0;Ve[ue+1]=Ve[ue]+Ne[ue]}for(_e=0;_e<be;++_e)ue=de[_e],0<de[_e]&&(Ee[Ve[ue]++]=_e);if(Ve[15]==1)return(de=new N).g=0,de.value=Ee[0],I(X,Ie,1,Me,de),Me;var Oe,qe=-1,Ue=Me-1,Ct=0,ht=1,Xt=1,gt=1<<oe;for(_e=0,ue=1,be=2;ue<=oe;++ue,be<<=1){if(ht+=Xt<<=1,0>(Xt-=Ne[ue]))return 0;for(;0<Ne[ue];--Ne[ue])(de=new N).g=ue,de.value=Ee[_e++],I(X,Ie+Ct,be,gt,de),Ct=V(Ct,ue)}for(ue=oe+1,be=2;15>=ue;++ue,be<<=1){if(ht+=Xt<<=1,0>(Xt-=Ne[ue]))return 0;for(;0<Ne[ue];--Ne[ue]){if(de=new N,(Ct&Ue)!=qe){for(Ie+=gt,Oe=1<<(qe=ue)-oe;15>qe&&!(0>=(Oe-=Ne[qe]));)++qe,Oe<<=1;Me+=gt=1<<(Oe=qe-oe),X[ee+(qe=Ct&Ue)].g=Oe+oe,X[ee+qe].value=Ie-ee-qe}de.g=ue-oe,de.value=Ee[_e++],I(X,Ie+(Ct>>oe),be,gt,de),Ct=V(Ct,ue)}}return ht!=2*Ve[15]-1?0:Me})(p,v,E,D,G,Q)}function N(){this.value=this.g=0}function W(){this.value=this.g=0}function q(){this.G=l(5,N),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l($o,W)}function re(p,v,E,D){e(p!=null),e(v!=null),e(2147483648>D),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=v,p.pa=E,p.Jd=v,p.Yc=E+D,p.Zc=4<=D?E+D-4+1:E,ke(p)}function Z(p,v){for(var E=0;0<v--;)E|=Fe(p,128)<<v;return E}function te(p,v){var E=Z(p,v);return Ae(p)?-E:E}function ye(p,v,E,D){var G,Q=0;for(e(p!=null),e(v!=null),e(4294967288>D),p.Sb=D,p.Ra=0,p.u=0,p.h=0,4<D&&(D=4),G=0;G<D;++G)Q+=v[E+G]<<8*G;p.Ra=Q,p.bb=D,p.oa=v,p.pa=E}function we(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<Ea-8>>>0,++p.bb,p.u-=8;fe(p)&&(p.h=1,p.u=0)}function ie(p,v){if(e(0<=v),!p.h&&v<=Ao){var E=ae(p)&Co[v];return p.u+=v,we(p),E}return p.h=1,p.u=0}function $(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Y(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ae(p){return p.Ra>>>(p.u&Ea-1)>>>0}function fe(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>Ea}function me(p,v){p.u=v,p.h=fe(p)}function Se(p){p.u>=Es&&(e(p.u>=Es),we(p))}function ke(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function Ae(p){return Z(p,1)}function Fe(p,v){var E=p.Ca;0>p.b&&ke(p);var D=p.b,G=E*v>>>8,Q=(p.I>>>D>G)+0;for(Q?(E-=G,p.I-=G+1<<D>>>0):E=G+1,D=E,G=0;256<=D;)G+=8,D>>=8;return D=7^G+ra[D],p.b-=D,p.Ca=(E<<D)-1,Q}function He(p,v,E){p[v+0]=E>>24&255,p[v+1]=E>>16&255,p[v+2]=E>>8&255,p[v+3]=255&E}function Ze(p,v){return p[v+0]|p[v+1]<<8}function Xe(p,v){return Ze(p,v)|p[v+2]<<16}function ge(p,v){return Ze(p,v)|Ze(p,v+2)<<16}function le(p,v){var E=1<<v;return e(p!=null),e(0<v),p.X=s(E),p.X==null?0:(p.Mb=32-v,p.Xa=v,1)}function at(p,v){e(p!=null),e(v!=null),e(p.Xa==v.Xa),n(v.X,0,p.X,0,1<<v.Xa)}function dt(){this.X=[],this.Xa=this.Mb=0}function lt(p,v,E,D){e(E!=null),e(D!=null);var G=E[0],Q=D[0];return G==0&&(G=(p*Q+v/2)/v),Q==0&&(Q=(v*G+p/2)/p),0>=G||0>=Q?0:(E[0]=G,D[0]=Q,1)}function $e(p,v){return p+(1<<v)-1>>>v}function nt(p,v){return((4278255360&p)+(4278255360&v)>>>0&4278255360)+((16711935&p)+(16711935&v)>>>0&16711935)>>>0}function tt(p,v){S[v]=function(E,D,G,Q,X,ee,oe){var de;for(de=0;de<X;++de){var be=S[p](ee[oe+de-1],G,Q+de);ee[oe+de]=nt(E[D+de],be)}}}function Jt(){this.ud=this.hd=this.jd=0}function At(p,v){return((4278124286&(p^v))>>>1)+(p&v)>>>0}function mr(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function zt(p,v){return mr(p+(p-v+.5>>1))}function Ut(p,v,E){return Math.abs(v-E)-Math.abs(p-E)}function br(p,v,E,D,G,Q,X){for(D=Q[X-1],E=0;E<G;++E)Q[X+E]=D=nt(p[v+E],D)}function Mt(p,v,E,D,G){var Q;for(Q=0;Q<E;++Q){var X=p[v+Q],ee=X>>8&255,oe=16711935&(oe=(oe=16711935&X)+((ee<<16)+ee));D[G+Q]=(4278255360&X)+oe>>>0}}function kt(p,v){v.jd=255&p,v.hd=p>>8&255,v.ud=p>>16&255}function Pt(p,v,E,D,G,Q){var X;for(X=0;X<D;++X){var ee=v[E+X],oe=ee>>>8,de=ee,be=255&(be=(be=ee>>>16)+((p.jd<<24>>24)*(oe<<24>>24)>>>5));de=255&(de=(de+=(p.hd<<24>>24)*(oe<<24>>24)>>>5)+((p.ud<<24>>24)*(be<<24>>24)>>>5)),G[Q+X]=(4278255360&ee)+(be<<16)+de}}function xt(p,v,E,D,G){S[v]=function(Q,X,ee,oe,de,be,Ee,ue,_e){for(oe=Ee;oe<ue;++oe)for(Ee=0;Ee<_e;++Ee)de[be++]=G(ee[D(Q[X++])])},S[p]=function(Q,X,ee,oe,de,be,Ee){var ue=8>>Q.b,_e=Q.Ea,Ie=Q.K[0],Me=Q.w;if(8>ue)for(Q=(1<<Q.b)-1,Me=(1<<ue)-1;X<ee;++X){var Ne,Ve=0;for(Ne=0;Ne<_e;++Ne)Ne&Q||(Ve=D(oe[de++])),be[Ee++]=G(Ie[Ve&Me]),Ve>>=ue}else S["VP8LMapColor"+E](oe,de,Ie,Me,be,Ee,X,ee,_e)}}function jr(p,v,E,D,G){for(E=v+E;v<E;){var Q=p[v++];D[G++]=Q>>16&255,D[G++]=Q>>8&255,D[G++]=255&Q}}function ir(p,v,E,D,G){for(E=v+E;v<E;){var Q=p[v++];D[G++]=Q>>16&255,D[G++]=Q>>8&255,D[G++]=255&Q,D[G++]=Q>>24&255}}function mt(p,v,E,D,G){for(E=v+E;v<E;){var Q=(X=p[v++])>>16&240|X>>12&15,X=240&X|X>>28&15;D[G++]=Q,D[G++]=X}}function Ht(p,v,E,D,G){for(E=v+E;v<E;){var Q=(X=p[v++])>>16&248|X>>13&7,X=X>>5&224|X>>3&31;D[G++]=Q,D[G++]=X}}function sr(p,v,E,D,G){for(E=v+E;v<E;){var Q=p[v++];D[G++]=255&Q,D[G++]=Q>>8&255,D[G++]=Q>>16&255}}function Rt(p,v,E,D,G,Q){if(Q==0)for(E=v+E;v<E;)He(D,((Q=p[v++])[0]>>24|Q[1]>>8&65280|Q[2]<<8&16711680|Q[3]<<24)>>>0),G+=32;else n(D,G,p,v,E)}function tr(p,v){S[v][0]=S[p+"0"],S[v][1]=S[p+"1"],S[v][2]=S[p+"2"],S[v][3]=S[p+"3"],S[v][4]=S[p+"4"],S[v][5]=S[p+"5"],S[v][6]=S[p+"6"],S[v][7]=S[p+"7"],S[v][8]=S[p+"8"],S[v][9]=S[p+"9"],S[v][10]=S[p+"10"],S[v][11]=S[p+"11"],S[v][12]=S[p+"12"],S[v][13]=S[p+"13"],S[v][14]=S[p+"0"],S[v][15]=S[p+"0"]}function $t(p){return p==Zl||p==gl||p==Yc||p==Qc}function Ir(){this.eb=[],this.size=this.A=this.fb=0}function Vr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function qt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ir,this.f.kb=new Vr,this.sd=null}function Dt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ar(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ki(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function zn(p,v){var E=p.T,D=v.ba.f.RGBA,G=D.eb,Q=D.fb+p.ka*D.A,X=ro[v.ba.S],ee=p.y,oe=p.O,de=p.f,be=p.N,Ee=p.ea,ue=p.W,_e=v.cc,Ie=v.dc,Me=v.Mc,Ne=v.Nc,Ve=p.ka,Oe=p.ka+p.T,qe=p.U,Ue=qe+1>>1;for(Ve==0?X(ee,oe,null,null,de,be,Ee,ue,de,be,Ee,ue,G,Q,null,null,qe):(X(v.ec,v.fc,ee,oe,_e,Ie,Me,Ne,de,be,Ee,ue,G,Q-D.A,G,Q,qe),++E);Ve+2<Oe;Ve+=2)_e=de,Ie=be,Me=Ee,Ne=ue,be+=p.Rc,ue+=p.Rc,Q+=2*D.A,X(ee,(oe+=2*p.fa)-p.fa,ee,oe,_e,Ie,Me,Ne,de,be,Ee,ue,G,Q-D.A,G,Q,qe);return oe+=p.fa,p.j+Oe<p.o?(n(v.ec,v.fc,ee,oe,qe),n(v.cc,v.dc,de,be,Ue),n(v.Mc,v.Nc,Ee,ue,Ue),E--):1&Oe||X(ee,oe,null,null,de,be,Ee,ue,de,be,Ee,ue,G,Q+D.A,null,null,qe),E}function Bo(p,v,E){var D=p.F,G=[p.J];if(D!=null){var Q=p.U,X=v.ba.S,ee=X==Jc||X==Yc;v=v.ba.f.RGBA;var oe=[0],de=p.ka;oe[0]=p.T,p.Kb&&(de==0?--oe[0]:(--de,G[0]-=p.width),p.j+p.ka+p.T==p.o&&(oe[0]=p.o-p.j-de));var be=v.eb;de=v.fb+de*v.A,p=Gc(D,G[0],p.width,Q,oe,be,de+(ee?0:3),v.A),e(E==oe),p&&$t(X)&&ml(be,de,ee,Q,oe,v.A)}return 0}function Vn(p){var v=p.ma,E=v.ba.S,D=11>E,G=E==Ba||E==Kc||E==Jc||E==$r||E==12||$t(E);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!Hl(v.Oa,p,G?11:12))return 0;if(G&&$t(E)&&rt(),p.da)alert("todo:use_scaling");else{if(D){if(v.Ib=Ki,p.Kb){if(E=p.U+1>>1,v.memory=s(p.U+2*E),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+p.U,v.Mc=v.cc,v.Nc=v.dc+E,v.Ib=zn,rt()}}else alert("todo:EmitYUV");G&&(v.Jb=Bo,D&&je())}if(D&&!di){for(p=0;256>p;++p)no[p]=89858*(p-128)+ds>>sa,io[p]=-22014*(p-128)+ds,nc[p]=-45773*(p-128),vl[p]=113618*(p-128)+ds>>sa;for(p=Pr;p<Fr;++p)v=76283*(p-16)+ds>>sa,tu[p-Pr]=hn(v,255),op[p-Pr]=hn(v+8>>4,15);di=1}return 1}function Nt(p){var v=p.ma,E=p.U,D=p.T;return e(!(1&p.ka)),0>=E||0>=D?0:(E=v.Ib(p,v),v.Jb!=null&&v.Jb(p,v,E),v.Dc+=E,1)}function Bi(p){p.ma.memory=null}function mi(p,v,E,D){return ie(p,8)!=47?0:(v[0]=ie(p,14)+1,E[0]=ie(p,14)+1,D[0]=ie(p,1),ie(p,3)!=0?0:!p.h)}function On(p,v){if(4>p)return p+1;var E=p-2>>1;return(2+(1&p)<<E)+ie(v,E)+1}function Li(p,v){return 120<v?v-120:1<=(E=((E=O0[v-1])>>4)*p+(8-(15&E)))?E:1;var E}function Ar(p,v,E){var D=ae(E),G=p[v+=255&D].g-8;return 0<G&&(me(E,E.u+8),D=ae(E),v+=p[v].value,v+=D&(1<<G)-1),me(E,E.u+p[v].g),p[v].value}function Or(p,v,E){return E.g+=p.g,E.value+=p.value<<v>>>0,e(8>=E.g),p.g}function un(p,v,E){var D=p.xc;return e((v=D==0?0:p.vc[p.md*(E>>D)+(v>>D)])<p.Wb),p.Ya[v]}function Xn(p,v,E,D){var G=p.ab,Q=p.c*v,X=p.C;v=X+v;var ee=E,oe=D;for(D=p.Ta,E=p.Ua;0<G--;){var de=p.gc[G],be=X,Ee=v,ue=ee,_e=oe,Ie=(oe=D,ee=E,de.Ea);switch(e(be<Ee),e(Ee<=de.nc),de.hc){case 2:_n(ue,_e,(Ee-be)*Ie,oe,ee);break;case 0:var Me=be,Ne=Ee,Ve=oe,Oe=ee,qe=(gt=de).Ea;Me==0&&(na(ue,_e,null,null,1,Ve,Oe),br(ue,_e+1,0,0,qe-1,Ve,Oe+1),_e+=qe,Oe+=qe,++Me);for(var Ue=1<<gt.b,Ct=Ue-1,ht=$e(qe,gt.b),Xt=gt.K,gt=gt.w+(Me>>gt.b)*ht;Me<Ne;){var hr=Xt,mn=gt,rr=1;for(Rs(ue,_e,Ve,Oe-qe,1,Ve,Oe);rr<qe;){var ft=(rr&~Ct)+Ue;ft>qe&&(ft=qe),(0,ul[hr[mn++]>>8&15])(ue,_e+ +rr,Ve,Oe+rr-qe,ft-rr,Ve,Oe+rr),rr=ft}_e+=qe,Oe+=qe,++Me&Ct||(gt+=ht)}Ee!=de.nc&&n(oe,ee-Ie,oe,ee+(Ee-be-1)*Ie,Ie);break;case 1:for(Ie=ue,Ne=_e,qe=(ue=de.Ea)-(Oe=ue&~(Ve=(_e=1<<de.b)-1)),Me=$e(ue,de.b),Ue=de.K,de=de.w+(be>>de.b)*Me;be<Ee;){for(Ct=Ue,ht=de,Xt=new Jt,gt=Ne+Oe,hr=Ne+ue;Ne<gt;)kt(Ct[ht++],Xt),Kl(Xt,Ie,Ne,_e,oe,ee),Ne+=_e,ee+=_e;Ne<hr&&(kt(Ct[ht++],Xt),Kl(Xt,Ie,Ne,qe,oe,ee),Ne+=qe,ee+=qe),++be&Ve||(de+=Me)}break;case 3:if(ue==oe&&_e==ee&&0<de.b){for(Ne=oe,ue=Ie=ee+(Ee-be)*Ie-(Oe=(Ee-be)*$e(de.Ea,de.b)),_e=oe,Ve=ee,Me=[],Oe=(qe=Oe)-1;0<=Oe;--Oe)Me[Oe]=_e[Ve+Oe];for(Oe=qe-1;0<=Oe;--Oe)Ne[ue+Oe]=Me[Oe];cl(de,be,Ee,oe,Ie,oe,ee)}else cl(de,be,Ee,ue,_e,oe,ee)}ee=D,oe=E}oe!=E&&n(D,E,ee,oe,Q)}function Zo(p,v){var E=p.V,D=p.Ba+p.c*p.C,G=v-p.C;if(e(v<=p.l.o),e(16>=G),0<G){var Q=p.l,X=p.Ta,ee=p.Ua,oe=Q.width;if(Xn(p,G,E,D),G=ee=[ee],e((E=p.C)<(D=v)),e(Q.v<Q.va),D>Q.o&&(D=Q.o),E<Q.j){var de=Q.j-E;E=Q.j,G[0]+=de*oe}if(E>=D?E=0:(G[0]+=4*Q.v,Q.ka=E-Q.j,Q.U=Q.va-Q.v,Q.T=D-E,E=1),E){if(ee=ee[0],11>(E=p.ca).S){var be=E.f.RGBA,Ee=(D=E.S,G=Q.U,Q=Q.T,de=be.eb,be.A),ue=Q;for(be=be.fb+p.Ma*be.A;0<ue--;){var _e=X,Ie=ee,Me=G,Ne=de,Ve=be;switch(D){case Qd:Jl(_e,Ie,Me,Ne,Ve);break;case Ba:ia(_e,Ie,Me,Ne,Ve);break;case Zl:ia(_e,Ie,Me,Ne,Ve),ml(Ne,Ve,0,Me,1,0);break;case ep:hl(_e,Ie,Me,Ne,Ve);break;case Kc:Rt(_e,Ie,Me,Ne,Ve,1);break;case gl:Rt(_e,Ie,Me,Ne,Ve,1),ml(Ne,Ve,0,Me,1,0);break;case Jc:Rt(_e,Ie,Me,Ne,Ve,0);break;case Yc:Rt(_e,Ie,Me,Ne,Ve,0),ml(Ne,Ve,1,Me,1,0);break;case $r:Ra(_e,Ie,Me,Ne,Ve);break;case Qc:Ra(_e,Ie,Me,Ne,Ve),gh(Ne,Ve,Me,1,0);break;case Xd:Pa(_e,Ie,Me,Ne,Ve);break;default:e(0)}ee+=oe,be+=Ee}p.Ma+=Q}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=E.height)}}p.C=v,e(p.C<=p.i)}function Ji(p){var v;if(0<p.ua)return 0;for(v=0;v<p.Wb;++v){var E=p.Ya[v].G,D=p.Ya[v].H;if(0<E[1][D[1]+0].g||0<E[2][D[2]+0].g||0<E[3][D[3]+0].g)return 0}return 1}function Yi(p,v,E,D,G,Q){if(p.Z!=0){var X=p.qd,ee=p.rd;for(e(Ti[p.Z]!=null);v<E;++v)Ti[p.Z](X,ee,D,G,D,G,Q),X=D,ee=G,G+=Q;p.qd=X,p.rd=ee}}function wn(p,v){var E=p.l.ma,D=E.Z==0||E.Z==1?p.l.j:p.C;if(D=p.C<D?D:p.C,e(v<=p.l.o),v>D){var G=p.l.width,Q=E.ca,X=E.tb+G*D,ee=p.V,oe=p.Ba+p.c*D,de=p.gc;e(p.ab==1),e(de[0].hc==3),ls(de[0],D,v,ee,oe,Q,X),Yi(E,D,v,Q,X,G)}p.C=p.Ma=v}function Fi(p,v,E,D,G,Q,X){var ee=p.$/D,oe=p.$%D,de=p.m,be=p.s,Ee=E+p.$,ue=Ee;G=E+D*G;var _e=E+D*Q,Ie=280+be.ua,Me=p.Pb?ee:16777216,Ne=0<be.ua?be.Wa:null,Ve=be.wc,Oe=Ee<_e?un(be,oe,ee):null;e(p.C<Q),e(_e<=G);var qe=!1;e:for(;;){for(;qe||Ee<_e;){var Ue=0;if(ee>=Me){var Ct=Ee-E;e((Me=p).Pb),Me.wd=Me.m,Me.xd=Ct,0<Me.s.ua&&at(Me.s.Wa,Me.s.vb),Me=ee+eu}if(oe&Ve||(Oe=un(be,oe,ee)),e(Oe!=null),Oe.Qb&&(v[Ee]=Oe.qb,qe=!0),!qe)if(Se(de),Oe.jc){Ue=de,Ct=v;var ht=Ee,Xt=Oe.pd[ae(Ue)&$o-1];e(Oe.jc),256>Xt.g?(me(Ue,Ue.u+Xt.g),Ct[ht]=Xt.value,Ue=0):(me(Ue,Ue.u+Xt.g-256),e(256<=Xt.value),Ue=Xt.value),Ue==0&&(qe=!0)}else Ue=Ar(Oe.G[0],Oe.H[0],de);if(de.h)break;if(qe||256>Ue){if(!qe)if(Oe.nd)v[Ee]=(Oe.qb|Ue<<8)>>>0;else{if(Se(de),qe=Ar(Oe.G[1],Oe.H[1],de),Se(de),Ct=Ar(Oe.G[2],Oe.H[2],de),ht=Ar(Oe.G[3],Oe.H[3],de),de.h)break;v[Ee]=(ht<<24|qe<<16|Ue<<8|Ct)>>>0}if(qe=!1,++Ee,++oe>=D&&(oe=0,++ee,X!=null&&ee<=Q&&!(ee%16)&&X(p,ee),Ne!=null))for(;ue<Ee;)Ue=v[ue++],Ne.X[(506832829*Ue&4294967295)>>>Ne.Mb]=Ue}else if(280>Ue){if(Ue=On(Ue-256,de),Ct=Ar(Oe.G[4],Oe.H[4],de),Se(de),Ct=Li(D,Ct=On(Ct,de)),de.h)break;if(Ee-E<Ct||G-Ee<Ue)break e;for(ht=0;ht<Ue;++ht)v[Ee+ht]=v[Ee+ht-Ct];for(Ee+=Ue,oe+=Ue;oe>=D;)oe-=D,++ee,X!=null&&ee<=Q&&!(ee%16)&&X(p,ee);if(e(Ee<=G),oe&Ve&&(Oe=un(be,oe,ee)),Ne!=null)for(;ue<Ee;)Ue=v[ue++],Ne.X[(506832829*Ue&4294967295)>>>Ne.Mb]=Ue}else{if(!(Ue<Ie))break e;for(qe=Ue-280,e(Ne!=null);ue<Ee;)Ue=v[ue++],Ne.X[(506832829*Ue&4294967295)>>>Ne.Mb]=Ue;Ue=Ee,e(!(qe>>>(Ct=Ne).Xa)),v[Ue]=Ct.X[qe],qe=!0}qe||e(de.h==fe(de))}if(p.Pb&&de.h&&Ee<G)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&at(p.s.vb,p.s.Wa);else{if(de.h)break e;X!=null&&X(p,ee>Q?Q:ee),p.a=0,p.$=Ee-E}return 1}return p.a=3,0}function zi(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var v=p.Wa;v!=null&&(v.X=null),p.vb=null,e(p!=null)}function ws(){var p=new yt;return p==null?null:(p.a=0,p.xb=tc,tr("Predictor","VP8LPredictors"),tr("Predictor","VP8LPredictors_C"),tr("PredictorAdd","VP8LPredictorsAdd"),tr("PredictorAdd","VP8LPredictorsAdd_C"),_n=Mt,Kl=Pt,Jl=jr,ia=ir,Ra=mt,Pa=Ht,hl=sr,S.VP8LMapColor32b=Ps,S.VP8LMapColor8b=dl,p)}function yo(p,v,E,D,G){var Q=1,X=[p],ee=[v],oe=D.m,de=D.s,be=null,Ee=0;e:for(;;){if(E)for(;Q&&ie(oe,1);){var ue=X,_e=ee,Ie=D,Me=1,Ne=Ie.m,Ve=Ie.gc[Ie.ab],Oe=ie(Ne,2);if(Ie.Oc&1<<Oe)Q=0;else{switch(Ie.Oc|=1<<Oe,Ve.hc=Oe,Ve.Ea=ue[0],Ve.nc=_e[0],Ve.K=[null],++Ie.ab,e(4>=Ie.ab),Oe){case 0:case 1:Ve.b=ie(Ne,3)+2,Me=yo($e(Ve.Ea,Ve.b),$e(Ve.nc,Ve.b),0,Ie,Ve.K),Ve.K=Ve.K[0];break;case 3:var qe,Ue=ie(Ne,8)+1,Ct=16<Ue?0:4<Ue?1:2<Ue?2:3;if(ue[0]=$e(Ve.Ea,Ct),Ve.b=Ct,qe=Me=yo(Ue,1,0,Ie,Ve.K)){var ht,Xt=Ue,gt=Ve,hr=1<<(8>>gt.b),mn=s(hr);if(mn==null)qe=0;else{var rr=gt.K[0],ft=gt.w;for(mn[0]=gt.K[0][0],ht=1;ht<1*Xt;++ht)mn[ht]=nt(rr[ft+ht],mn[ht-1]);for(;ht<4*hr;++ht)mn[ht]=0;gt.K[0]=null,gt.K[0]=mn,qe=1}}Me=qe;break;case 2:break;default:e(0)}Q=Me}}if(X=X[0],ee=ee[0],Q&&ie(oe,1)&&!(Q=1<=(Ee=ie(oe,4))&&11>=Ee)){D.a=3;break e}var ot;if(ot=Q)t:{var Tn,Gt,cr,tn=D,ti=X,Rn=ee,cn=Ee,qn=E,ri=tn.m,sn=tn.s,pr=[null],_r=1,an=0,Tr=rp[cn];r:for(;;){if(qn&&ie(ri,1)){var gn=ie(ri,3)+2,xn=$e(ti,gn),qr=$e(Rn,gn),Ci=xn*qr;if(!yo(xn,qr,0,tn,pr))break r;for(pr=pr[0],sn.xc=gn,Tn=0;Tn<Ci;++Tn){var zr=pr[Tn]>>8&65535;pr[Tn]=zr,zr>=_r&&(_r=zr+1)}}if(ri.h)break r;for(Gt=0;5>Gt;++Gt){var Ur=xl[Gt];!Gt&&0<cn&&(Ur+=1<<cn),an<Ur&&(an=Ur)}var Pn=l(_r*Tr,N),ui=_r,oo=l(ui,q);if(oo==null)var Cn=null;else e(65536>=ui),Cn=oo;var An=s(an);if(Cn==null||An==null||Pn==null){tn.a=1;break r}var Ai=Pn;for(Tn=cr=0;Tn<_r;++Tn){var Hr=Cn[Tn],ki=Hr.G,Ho=Hr.H,us=0,ni=1,kn=0;for(Gt=0;5>Gt;++Gt){Ur=xl[Gt],ki[Gt]=Ai,Ho[Gt]=cr,!Gt&&0<cn&&(Ur+=1<<cn);i:{var za,la=Ur,ic=tn,Ls=An,ap=Ai,jh=cr,nn=0,hs=ic.m,Ih=ie(hs,1);if(o(Ls,0,0,la),Ih){var Eh=ie(hs,1)+1,ru=ie(hs,1),nu=ie(hs,ru==0?1:8);Ls[nu]=1,Eh==2&&(Ls[nu=ie(hs,8)]=1);var Fs=1}else{var ln=s(19),Nn=ie(hs,4)+4;if(19<Nn){ic.a=3;var jn=0;break i}for(za=0;za<Nn;++za)ln[V0[za]]=ie(hs,3);var oc=void 0,ca=void 0,sc=ic,q0=ln,Un=la,iu=Ls,rd=0,zs=sc.m,fs=8,ko=l(128,N);n:for(;w(ko,0,7,q0,19);){if(ie(zs,1)){var nd=2+2*ie(zs,3);if((oc=2+ie(zs,nd))>Un)break n}else oc=Un;for(ca=0;ca<Un&&oc--;){Se(zs);var ou=ko[0+(127&ae(zs))];me(zs,zs.u+ou.g);var Va=ou.value;if(16>Va)iu[ca++]=Va,Va!=0&&(fs=Va);else{var lp=Va==16,Rh=Va-16,cp=Zd[Rh],Ph=ie(zs,Xc[Rh])+cp;if(ca+Ph>Un)break n;for(var dp=lp?fs:0;0<Ph--;)iu[ca++]=dp}}rd=1;break n}rd||(sc.a=3),Fs=rd}(Fs=Fs&&!hs.h)&&(nn=w(ap,jh,8,Ls,la)),Fs&&nn!=0?jn=nn:(ic.a=3,jn=0)}if(jn==0)break r;if(ni&&tp[Gt]==1&&(ni=Ai[cr].g==0),us+=Ai[cr].g,cr+=jn,3>=Gt){var ac,su=An[0];for(ac=1;ac<Ur;++ac)An[ac]>su&&(su=An[ac]);kn+=su}}if(Hr.nd=ni,Hr.Qb=0,ni&&(Hr.qb=(ki[3][Ho[3]+0].value<<24|ki[1][Ho[1]+0].value<<16|ki[2][Ho[2]+0].value)>>>0,us==0&&256>ki[0][Ho[0]+0].value&&(Hr.Qb=1,Hr.qb+=ki[0][Ho[0]+0].value<<8)),Hr.jc=!Hr.Qb&&6>kn,Hr.jc){var id,jo=Hr;for(id=0;id<$o;++id){var da=id,ps=jo.pd[da],Sl=jo.G[0][jo.H[0]+da];256<=Sl.value?(ps.g=Sl.g+256,ps.value=Sl.value):(ps.g=0,ps.value=0,da>>=Or(Sl,8,ps),da>>=Or(jo.G[1][jo.H[1]+da],16,ps),da>>=Or(jo.G[2][jo.H[2]+da],0,ps),Or(jo.G[3][jo.H[3]+da],24,ps))}}}sn.vc=pr,sn.Wb=_r,sn.Ya=Cn,sn.yc=Pn,ot=1;break t}ot=0}if(!(Q=ot)){D.a=3;break e}if(0<Ee){if(de.ua=1<<Ee,!le(de.Wa,Ee)){D.a=1,Q=0;break e}}else de.ua=0;var au=D,lu=X,up=ee,cu=au.s,du=cu.xc;if(au.c=lu,au.i=up,cu.md=$e(lu,du),cu.wc=du==0?-1:(1<<du)-1,E){D.xb=Bs;break e}if((be=s(X*ee))==null){D.a=1,Q=0;break e}Q=(Q=Fi(D,be,0,X,ee,ee,null))&&!oe.h;break e}return Q?(G!=null?G[0]=be:(e(be==null),e(E)),D.$=0,E||zi(de)):zi(de),Q}function bo(p,v){var E=p.c*p.i,D=E+v+16*v;return e(p.c<=v),p.V=s(D),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+E+v,1)}function Ss(p,v){var E=p.C,D=v-E,G=p.V,Q=p.Ba+p.c*E;for(e(v<=p.l.o);0<D;){var X=16<D?16:D,ee=p.l.ma,oe=p.l.width,de=oe*X,be=ee.ca,Ee=ee.tb+oe*E,ue=p.Ta,_e=p.Ua;Xn(p,X,G,Q),xh(ue,_e,be,Ee,de),Yi(ee,E,E+X,be,Ee,oe),D-=X,G+=X*p.c,E+=X}e(E==v),p.C=p.Ma=v}function es(){this.ub=this.yd=this.td=this.Rb=0}function Lo(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ts(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Er(){this.Yb=(function(){var p=[];return(function v(E,D,G){for(var Q=G[D],X=0;X<Q&&(E.push(G.length>D+1?[]:0),!(G.length<D+1));X++)v(E[X],D+1,G)})(p,0,[3,11]),p})()}function ql(){this.jb=s(3),this.Wc=d([4,8],Er),this.Xc=d([4,17],Er)}function Ks(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function gi(){this.ld=this.La=this.dd=this.tc=0}function rs(){this.Na=this.la=0}function _a(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function _s(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ts(){this.uc=this.M=this.Nb=0,this.wa=Array(new gi),this.Y=0,this.ya=Array(new _s),this.aa=0,this.l=new Zn}function xi(){this.y=s(16),this.f=s(8),this.ea=s(8)}function rl(){this.cb=this.a=0,this.sc="",this.m=new $,this.Od=new es,this.Kc=new Lo,this.ed=new Ks,this.Qa=new ts,this.Ic=this.$c=this.Aa=0,this.D=new Ts,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,$),this.ia=0,this.pb=l(4,_a),this.Pa=new ql,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new xi),this.Hd=0,this.rb=Array(new rs),this.sb=0,this.wa=Array(new gi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new _s),this.L=this.aa=0,this.gd=d([4,2],gi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Zn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Fo(){var p=new rl;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,yl||(yl=yi)),p}function wr(p,v,E){return p.a==0&&(p.a=v,p.sc=E,p.cb=0),0}function Cs(p,v,E){return 3<=E&&p[v+0]==157&&p[v+1]==1&&p[v+2]==42}function vo(p,v){if(p==null)return 0;if(p.a=0,p.sc="OK",v==null)return wr(p,2,"null VP8Io passed to VP8GetHeaders()");var E=v.data,D=v.w,G=v.ha;if(4>G)return wr(p,7,"Truncated header.");var Q=E[D+0]|E[D+1]<<8|E[D+2]<<16,X=p.Od;if(X.Rb=!(1&Q),X.td=Q>>1&7,X.yd=Q>>4&1,X.ub=Q>>5,3<X.td)return wr(p,3,"Incorrect keyframe parameters.");if(!X.yd)return wr(p,4,"Frame not displayable.");D+=3,G-=3;var ee=p.Kc;if(X.Rb){if(7>G)return wr(p,7,"cannot parse picture header");if(!Cs(E,D,G))return wr(p,3,"Bad code word");ee.c=16383&(E[D+4]<<8|E[D+3]),ee.Td=E[D+4]>>6,ee.i=16383&(E[D+6]<<8|E[D+5]),ee.Ud=E[D+6]>>6,D+=7,G-=7,p.za=ee.c+15>>4,p.Ub=ee.i+15>>4,v.width=ee.c,v.height=ee.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,o((Q=p.Pa).jb,0,255,Q.jb.length),e((Q=p.Qa)!=null),Q.Cb=0,Q.Bb=0,Q.Fb=1,o(Q.Zb,0,0,Q.Zb.length),o(Q.Lb,0,0,Q.Lb)}if(X.ub>G)return wr(p,7,"bad partition length");re(Q=p.m,E,D,X.ub),D+=X.ub,G-=X.ub,X.Rb&&(ee.Ld=Ae(Q),ee.Kd=Ae(Q)),ee=p.Qa;var oe,de=p.Pa;if(e(Q!=null),e(ee!=null),ee.Cb=Ae(Q),ee.Cb){if(ee.Bb=Ae(Q),Ae(Q)){for(ee.Fb=Ae(Q),oe=0;4>oe;++oe)ee.Zb[oe]=Ae(Q)?te(Q,7):0;for(oe=0;4>oe;++oe)ee.Lb[oe]=Ae(Q)?te(Q,6):0}if(ee.Bb)for(oe=0;3>oe;++oe)de.jb[oe]=Ae(Q)?Z(Q,8):255}else ee.Bb=0;if(Q.Ka)return wr(p,3,"cannot parse segment header");if((ee=p.ed).zd=Ae(Q),ee.Tb=Z(Q,6),ee.wb=Z(Q,3),ee.Pc=Ae(Q),ee.Pc&&Ae(Q)){for(de=0;4>de;++de)Ae(Q)&&(ee.vd[de]=te(Q,6));for(de=0;4>de;++de)Ae(Q)&&(ee.od[de]=te(Q,6))}if(p.L=ee.Tb==0?0:ee.zd?1:2,Q.Ka)return wr(p,3,"cannot parse filter header");var be=G;if(G=oe=D,D=oe+be,ee=be,p.Xb=(1<<Z(p.m,2))-1,be<3*(de=p.Xb))E=7;else{for(oe+=3*de,ee-=3*de,be=0;be<de;++be){var Ee=E[G+0]|E[G+1]<<8|E[G+2]<<16;Ee>ee&&(Ee=ee),re(p.Jc[+be],E,oe,Ee),oe+=Ee,ee-=Ee,G+=3}re(p.Jc[+de],E,oe,ee),E=oe<D?0:5}if(E!=0)return wr(p,E,"cannot parse partitions");for(E=Z(oe=p.m,7),G=Ae(oe)?te(oe,4):0,D=Ae(oe)?te(oe,4):0,ee=Ae(oe)?te(oe,4):0,de=Ae(oe)?te(oe,4):0,oe=Ae(oe)?te(oe,4):0,be=p.Qa,Ee=0;4>Ee;++Ee){if(be.Cb){var ue=be.Zb[Ee];be.Fb||(ue+=E)}else{if(0<Ee){p.pb[Ee]=p.pb[0];continue}ue=E}var _e=p.pb[Ee];_e.Sc[0]=ec[hn(ue+G,127)],_e.Sc[1]=Zc[hn(ue+0,127)],_e.Eb[0]=2*ec[hn(ue+D,127)],_e.Eb[1]=101581*Zc[hn(ue+ee,127)]>>16,8>_e.Eb[1]&&(_e.Eb[1]=8),_e.Qc[0]=ec[hn(ue+de,117)],_e.Qc[1]=Zc[hn(ue+oe,127)],_e.lc=ue+oe}if(!X.Rb)return wr(p,4,"Not a key frame.");for(Ae(Q),X=p.Pa,E=0;4>E;++E){for(G=0;8>G;++G)for(D=0;3>D;++D)for(ee=0;11>ee;++ee)de=Fe(Q,D0[E][G][D][ee])?Z(Q,8):ip[E][G][D][ee],X.Wc[E][G].Yb[D][ee]=de;for(G=0;17>G;++G)X.Xc[E][G]=X.Wc[E][Ch[G]]}return p.kc=Ae(Q),p.kc&&(p.Bd=Z(Q,8)),p.cb=1}function yi(p,v,E,D,G,Q,X){var ee=v[G].Yb[E];for(E=0;16>G;++G){if(!Fe(p,ee[E+0]))return G;for(;!Fe(p,ee[E+1]);)if(ee=v[++G].Yb[0],E=0,G==16)return 16;var oe=v[G+1].Yb;if(Fe(p,ee[E+2])){var de=p,be=0;if(Fe(de,(ue=ee)[(Ee=E)+3]))if(Fe(de,ue[Ee+6])){for(ee=0,Ee=2*(be=Fe(de,ue[Ee+8]))+(ue=Fe(de,ue[Ee+9+be])),be=0,ue=_h[Ee];ue[ee];++ee)be+=be+Fe(de,ue[ee]);be+=3+(8<<Ee)}else Fe(de,ue[Ee+7])?(be=7+2*Fe(de,165),be+=Fe(de,145)):be=5+Fe(de,159);else be=Fe(de,ue[Ee+4])?3+Fe(de,ue[Ee+5]):2;ee=oe[2]}else be=1,ee=oe[1];oe=X+Th[G],0>(de=p).b&&ke(de);var Ee,ue=de.b,_e=(Ee=de.Ca>>1)-(de.I>>ue)>>31;--de.b,de.Ca+=_e,de.Ca|=1,de.I-=(Ee+1&_e)<<ue,Q[oe]=((be^_e)-_e)*D[(0<G)+0]}return 16}function lr(p){var v=p.rb[p.sb-1];v.la=0,v.Na=0,o(p.zc,0,0,p.zc.length),p.ja=0}function Mn(p,v,E,D,G){G=p[v+E+32*D]+(G>>3),p[v+E+32*D]=-256&G?0>G?0:255:G}function wo(p,v,E,D,G,Q){Mn(p,v,0,E,D+G),Mn(p,v,1,E,D+Q),Mn(p,v,2,E,D-Q),Mn(p,v,3,E,D-G)}function Mr(p){return(20091*p>>16)+p}function Js(p,v,E,D){var G,Q=0,X=s(16);for(G=0;4>G;++G){var ee=p[v+0]+p[v+8],oe=p[v+0]-p[v+8],de=(35468*p[v+4]>>16)-Mr(p[v+12]),be=Mr(p[v+4])+(35468*p[v+12]>>16);X[Q+0]=ee+be,X[Q+1]=oe+de,X[Q+2]=oe-de,X[Q+3]=ee-be,Q+=4,v++}for(G=Q=0;4>G;++G)ee=(p=X[Q+0]+4)+X[Q+8],oe=p-X[Q+8],de=(35468*X[Q+4]>>16)-Mr(X[Q+12]),Mn(E,D,0,0,ee+(be=Mr(X[Q+4])+(35468*X[Q+12]>>16))),Mn(E,D,1,0,oe+de),Mn(E,D,2,0,oe-de),Mn(E,D,3,0,ee-be),Q++,D+=32}function nl(p,v,E,D){var G=p[v+0]+4,Q=35468*p[v+4]>>16,X=Mr(p[v+4]),ee=35468*p[v+1]>>16;wo(E,D,0,G+X,p=Mr(p[v+1]),ee),wo(E,D,1,G+Q,p,ee),wo(E,D,2,G-Q,p,ee),wo(E,D,3,G-X,p,ee)}function il(p,v,E,D,G){Js(p,v,E,D),G&&Js(p,v+16,E,D+4)}function Ys(p,v,E,D){fl(p,v+0,E,D,1),fl(p,v+32,E,D+128,1)}function zo(p,v,E,D){var G;for(p=p[v+0]+4,G=0;4>G;++G)for(v=0;4>v;++v)Mn(E,D,v,G,p)}function Ta(p,v,E,D){p[v+0]&&Sr(p,v+0,E,D),p[v+16]&&Sr(p,v+16,E,D+4),p[v+32]&&Sr(p,v+32,E,D+128),p[v+48]&&Sr(p,v+48,E,D+128+4)}function or(p,v,E,D){var G,Q=s(16);for(G=0;4>G;++G){var X=p[v+0+G]+p[v+12+G],ee=p[v+4+G]+p[v+8+G],oe=p[v+4+G]-p[v+8+G],de=p[v+0+G]-p[v+12+G];Q[0+G]=X+ee,Q[8+G]=X-ee,Q[4+G]=de+oe,Q[12+G]=de-oe}for(G=0;4>G;++G)X=(p=Q[0+4*G]+3)+Q[3+4*G],ee=Q[1+4*G]+Q[2+4*G],oe=Q[1+4*G]-Q[2+4*G],de=p-Q[3+4*G],E[D+0]=X+ee>>3,E[D+16]=de+oe>>3,E[D+32]=X-ee>>3,E[D+48]=de-oe>>3,D+=64}function li(p,v,E){var D,G=v-32,Q=Di,X=255-p[G-1];for(D=0;D<E;++D){var ee,oe=Q,de=X+p[v-1];for(ee=0;ee<E;++ee)p[v+ee]=oe[de+p[G+ee]];v+=32}}function Qs(p,v){li(p,v,4)}function Ca(p,v){li(p,v,8)}function ol(p,v){li(p,v,16)}function sl(p,v){var E;for(E=0;16>E;++E)n(p,v+32*E,p,v-32,16)}function Xs(p,v){var E;for(E=16;0<E;--E)o(p,v,p[v-1],16),v+=32}function bi(p,v,E){var D;for(D=0;16>D;++D)o(v,E+32*D,p,16)}function So(p,v){var E,D=16;for(E=0;16>E;++E)D+=p[v-1+32*E]+p[v+E-32];bi(D>>5,p,v)}function Vo(p,v){var E,D=8;for(E=0;16>E;++E)D+=p[v-1+32*E];bi(D>>4,p,v)}function vi(p,v){var E,D=8;for(E=0;16>E;++E)D+=p[v+E-32];bi(D>>4,p,v)}function Sn(p,v){bi(128,p,v)}function Lt(p,v,E){return p+2*v+E+2>>2}function ns(p,v){var E,D=v-32;for(D=new Uint8Array([Lt(p[D-1],p[D+0],p[D+1]),Lt(p[D+0],p[D+1],p[D+2]),Lt(p[D+1],p[D+2],p[D+3]),Lt(p[D+2],p[D+3],p[D+4])]),E=0;4>E;++E)n(p,v+32*E,D,0,D.length)}function Vi(p,v){var E=p[v-1],D=p[v-1+32],G=p[v-1+64],Q=p[v-1+96];He(p,v+0,16843009*Lt(p[v-1-32],E,D)),He(p,v+32,16843009*Lt(E,D,G)),He(p,v+64,16843009*Lt(D,G,Q)),He(p,v+96,16843009*Lt(G,Q,Q))}function Ul(p,v){var E,D=4;for(E=0;4>E;++E)D+=p[v+E-32]+p[v-1+32*E];for(D>>=3,E=0;4>E;++E)o(p,v+32*E,D,4)}function As(p,v){var E=p[v-1+0],D=p[v-1+32],G=p[v-1+64],Q=p[v-1-32],X=p[v+0-32],ee=p[v+1-32],oe=p[v+2-32],de=p[v+3-32];p[v+0+96]=Lt(D,G,p[v-1+96]),p[v+1+96]=p[v+0+64]=Lt(E,D,G),p[v+2+96]=p[v+1+64]=p[v+0+32]=Lt(Q,E,D),p[v+3+96]=p[v+2+64]=p[v+1+32]=p[v+0+0]=Lt(X,Q,E),p[v+3+64]=p[v+2+32]=p[v+1+0]=Lt(ee,X,Q),p[v+3+32]=p[v+2+0]=Lt(oe,ee,X),p[v+3+0]=Lt(de,oe,ee)}function Dn(p,v){var E=p[v+1-32],D=p[v+2-32],G=p[v+3-32],Q=p[v+4-32],X=p[v+5-32],ee=p[v+6-32],oe=p[v+7-32];p[v+0+0]=Lt(p[v+0-32],E,D),p[v+1+0]=p[v+0+32]=Lt(E,D,G),p[v+2+0]=p[v+1+32]=p[v+0+64]=Lt(D,G,Q),p[v+3+0]=p[v+2+32]=p[v+1+64]=p[v+0+96]=Lt(G,Q,X),p[v+3+32]=p[v+2+64]=p[v+1+96]=Lt(Q,X,ee),p[v+3+64]=p[v+2+96]=Lt(X,ee,oe),p[v+3+96]=Lt(ee,oe,oe)}function Oo(p,v){var E=p[v-1+0],D=p[v-1+32],G=p[v-1+64],Q=p[v-1-32],X=p[v+0-32],ee=p[v+1-32],oe=p[v+2-32],de=p[v+3-32];p[v+0+0]=p[v+1+64]=Q+X+1>>1,p[v+1+0]=p[v+2+64]=X+ee+1>>1,p[v+2+0]=p[v+3+64]=ee+oe+1>>1,p[v+3+0]=oe+de+1>>1,p[v+0+96]=Lt(G,D,E),p[v+0+64]=Lt(D,E,Q),p[v+0+32]=p[v+1+96]=Lt(E,Q,X),p[v+1+32]=p[v+2+96]=Lt(Q,X,ee),p[v+2+32]=p[v+3+96]=Lt(X,ee,oe),p[v+3+32]=Lt(ee,oe,de)}function Aa(p,v){var E=p[v+0-32],D=p[v+1-32],G=p[v+2-32],Q=p[v+3-32],X=p[v+4-32],ee=p[v+5-32],oe=p[v+6-32],de=p[v+7-32];p[v+0+0]=E+D+1>>1,p[v+1+0]=p[v+0+64]=D+G+1>>1,p[v+2+0]=p[v+1+64]=G+Q+1>>1,p[v+3+0]=p[v+2+64]=Q+X+1>>1,p[v+0+32]=Lt(E,D,G),p[v+1+32]=p[v+0+96]=Lt(D,G,Q),p[v+2+32]=p[v+1+96]=Lt(G,Q,X),p[v+3+32]=p[v+2+96]=Lt(Q,X,ee),p[v+3+64]=Lt(X,ee,oe),p[v+3+96]=Lt(ee,oe,de)}function Rr(p,v){var E=p[v-1+0],D=p[v-1+32],G=p[v-1+64],Q=p[v-1+96];p[v+0+0]=E+D+1>>1,p[v+2+0]=p[v+0+32]=D+G+1>>1,p[v+2+32]=p[v+0+64]=G+Q+1>>1,p[v+1+0]=Lt(E,D,G),p[v+3+0]=p[v+1+32]=Lt(D,G,Q),p[v+3+32]=p[v+1+64]=Lt(G,Q,Q),p[v+3+64]=p[v+2+64]=p[v+0+96]=p[v+1+96]=p[v+2+96]=p[v+3+96]=Q}function Zs(p,v){var E=p[v-1+0],D=p[v-1+32],G=p[v-1+64],Q=p[v-1+96],X=p[v-1-32],ee=p[v+0-32],oe=p[v+1-32],de=p[v+2-32];p[v+0+0]=p[v+2+32]=E+X+1>>1,p[v+0+32]=p[v+2+64]=D+E+1>>1,p[v+0+64]=p[v+2+96]=G+D+1>>1,p[v+0+96]=Q+G+1>>1,p[v+3+0]=Lt(ee,oe,de),p[v+2+0]=Lt(X,ee,oe),p[v+1+0]=p[v+3+32]=Lt(E,X,ee),p[v+1+32]=p[v+3+64]=Lt(D,E,X),p[v+1+64]=p[v+3+96]=Lt(G,D,E),p[v+1+96]=Lt(Q,G,D)}function al(p,v){var E;for(E=0;8>E;++E)n(p,v+32*E,p,v-32,8)}function Qi(p,v){var E;for(E=0;8>E;++E)o(p,v,p[v-1],8),v+=32}function _o(p,v,E){var D;for(D=0;8>D;++D)o(v,E+32*D,p,8)}function Xi(p,v){var E,D=8;for(E=0;8>E;++E)D+=p[v+E-32]+p[v-1+32*E];_o(D>>4,p,v)}function is(p,v){var E,D=4;for(E=0;8>E;++E)D+=p[v+E-32];_o(D>>3,p,v)}function Zi(p,v){var E,D=4;for(E=0;8>E;++E)D+=p[v-1+32*E];_o(D>>3,p,v)}function ka(p,v){_o(128,p,v)}function os(p,v,E){var D=p[v-E],G=p[v+0],Q=3*(G-D)+Ns[1020+p[v-2*E]-p[v+E]],X=Xl[112+(Q+4>>3)];p[v-E]=Di[255+D+Xl[112+(Q+3>>3)]],p[v+0]=Di[255+G-X]}function wi(p,v,E,D){var G=p[v+0],Q=p[v+E];return qo[255+p[v-2*E]-p[v-E]]>D||qo[255+Q-G]>D}function ks(p,v,E,D){return 4*qo[255+p[v-E]-p[v+0]]+qo[255+p[v-2*E]-p[v+E]]<=D}function ss(p,v,E,D,G){var Q=p[v-3*E],X=p[v-2*E],ee=p[v-E],oe=p[v+0],de=p[v+E],be=p[v+2*E],Ee=p[v+3*E];return 4*qo[255+ee-oe]+qo[255+X-de]>D?0:qo[255+p[v-4*E]-Q]<=G&&qo[255+Q-X]<=G&&qo[255+X-ee]<=G&&qo[255+Ee-be]<=G&&qo[255+be-de]<=G&&qo[255+de-oe]<=G}function ci(p,v,E,D){var G=2*D+1;for(D=0;16>D;++D)ks(p,v+D,E,G)&&os(p,v+D,E)}function Mo(p,v,E,D){var G=2*D+1;for(D=0;16>D;++D)ks(p,v+D*E,1,G)&&os(p,v+D*E,1)}function Do(p,v,E,D){var G;for(G=3;0<G;--G)ci(p,v+=4*E,E,D)}function ll(p,v,E,D){var G;for(G=3;0<G;--G)Mo(p,v+=4,E,D)}function Oi(p,v,E,D,G,Q,X,ee){for(Q=2*Q+1;0<G--;){if(ss(p,v,E,Q,X))if(wi(p,v,E,ee))os(p,v,E);else{var oe=p,de=v,be=E,Ee=oe[de-2*be],ue=oe[de-be],_e=oe[de+0],Ie=oe[de+be],Me=oe[de+2*be],Ne=27*(Oe=Ns[1020+3*(_e-ue)+Ns[1020+Ee-Ie]])+63>>7,Ve=18*Oe+63>>7,Oe=9*Oe+63>>7;oe[de-3*be]=Di[255+oe[de-3*be]+Oe],oe[de-2*be]=Di[255+Ee+Ve],oe[de-be]=Di[255+ue+Ne],oe[de+0]=Di[255+_e-Ne],oe[de+be]=Di[255+Ie-Ve],oe[de+2*be]=Di[255+Me-Oe]}v+=D}}function ei(p,v,E,D,G,Q,X,ee){for(Q=2*Q+1;0<G--;){if(ss(p,v,E,Q,X))if(wi(p,v,E,ee))os(p,v,E);else{var oe=p,de=v,be=E,Ee=oe[de-be],ue=oe[de+0],_e=oe[de+be],Ie=Xl[112+(4+(Me=3*(ue-Ee))>>3)],Me=Xl[112+(Me+3>>3)],Ne=Ie+1>>1;oe[de-2*be]=Di[255+oe[de-2*be]+Ne],oe[de-be]=Di[255+Ee+Me],oe[de+0]=Di[255+ue-Ie],oe[de+be]=Di[255+_e-Ne]}v+=D}}function ja(p,v,E,D,G,Q){Oi(p,v,E,1,16,D,G,Q)}function Wn(p,v,E,D,G,Q){Oi(p,v,1,E,16,D,G,Q)}function Si(p,v,E,D,G,Q){var X;for(X=3;0<X;--X)ei(p,v+=4*E,E,1,16,D,G,Q)}function js(p,v,E,D,G,Q){var X;for(X=3;0<X;--X)ei(p,v+=4,1,E,16,D,G,Q)}function C(p,v,E,D,G,Q,X,ee){Oi(p,v,G,1,8,Q,X,ee),Oi(E,D,G,1,8,Q,X,ee)}function H(p,v,E,D,G,Q,X,ee){Oi(p,v,1,G,8,Q,X,ee),Oi(E,D,1,G,8,Q,X,ee)}function he(p,v,E,D,G,Q,X,ee){ei(p,v+4*G,G,1,8,Q,X,ee),ei(E,D+4*G,G,1,8,Q,X,ee)}function xe(p,v,E,D,G,Q,X,ee){ei(p,v+4,1,G,8,Q,X,ee),ei(E,D+4,1,G,8,Q,X,ee)}function Ce(){this.ba=new qt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ar,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function De(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ge(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ut(){this.ua=0,this.Wa=new dt,this.vb=new dt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new N}function yt(){this.xb=this.a=0,this.l=new Zn,this.ca=new qt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Y,this.Pb=0,this.wd=new Y,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ut,this.ab=0,this.gc=l(4,Ge),this.Oc=0}function Ft(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Zn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function St(p,v,E,D,G,Q,X){for(p=p==null?0:p[v+0],v=0;v<X;++v)G[Q+v]=p+E[D+v]&255,p=G[Q+v]}function gr(p,v,E,D,G,Q,X){var ee;if(p==null)St(null,null,E,D,G,Q,X);else for(ee=0;ee<X;++ee)G[Q+ee]=p[v+ee]+E[D+ee]&255}function Zr(p,v,E,D,G,Q,X){if(p==null)St(null,null,E,D,G,Q,X);else{var ee,oe=p[v+0],de=oe,be=oe;for(ee=0;ee<X;++ee)de=be+(oe=p[v+ee])-de,be=E[D+ee]+(-256&de?0>de?0:255:de)&255,de=oe,G[Q+ee]=be}}function Dr(p,v,E,D){var G=v.width,Q=v.o;if(e(p!=null&&v!=null),0>E||0>=D||E+D>Q)return null;if(!p.Cc){if(p.ga==null){var X;if(p.ga=new Ft,(X=p.ga==null)||(X=v.width*v.o,e(p.Gb.length==0),p.Gb=s(X),p.Uc=0,p.Gb==null?X=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,X=1),X=!X),!X){X=p.ga;var ee=p.Fa,oe=p.P,de=p.qc,be=p.mb,Ee=p.nb,ue=oe+1,_e=de-1,Ie=X.l;if(e(ee!=null&&be!=null&&v!=null),Ti[0]=null,Ti[1]=St,Ti[2]=gr,Ti[3]=Zr,X.ca=be,X.tb=Ee,X.c=v.width,X.i=v.height,e(0<X.c&&0<X.i),1>=de)v=0;else if(X.$a=3&ee[oe+0],X.Z=ee[oe+0]>>2&3,X.Lc=ee[oe+0]>>4&3,oe=ee[oe+0]>>6&3,0>X.$a||1<X.$a||4<=X.Z||1<X.Lc||oe)v=0;else if(Ie.put=Nt,Ie.ac=Vn,Ie.bc=Bi,Ie.ma=X,Ie.width=v.width,Ie.height=v.height,Ie.Da=v.Da,Ie.v=v.v,Ie.va=v.va,Ie.j=v.j,Ie.o=v.o,X.$a)e:{e(X.$a==1),v=ws();t:for(;;){if(v==null){v=0;break e}if(e(X!=null),X.mc=v,v.c=X.c,v.i=X.i,v.l=X.l,v.l.ma=X,v.l.width=X.c,v.l.height=X.i,v.a=0,ye(v.m,ee,ue,_e),!yo(X.c,X.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&Ji(v.s)?(X.ic=1,ee=v.c*v.i,v.Ta=null,v.Ua=0,v.V=s(ee),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(X.ic=0,v=bo(v,X.c)),!v))break t;v=1;break e}X.mc=null,v=0}else v=_e>=X.c*X.i;X=!v}if(X)return null;p.ga.Lc!=1?p.Ga=0:D=Q-E}e(p.ga!=null),e(E+D<=Q);e:{if(v=(ee=p.ga).c,Q=ee.l.o,ee.$a==0){if(ue=p.rc,_e=p.Vc,Ie=p.Fa,oe=p.P+1+E*v,de=p.mb,be=p.nb+E*v,e(oe<=p.P+p.qc),ee.Z!=0)for(e(Ti[ee.Z]!=null),X=0;X<D;++X)Ti[ee.Z](ue,_e,Ie,oe,de,be,v),ue=de,_e=be,be+=v,oe+=v;else for(X=0;X<D;++X)n(de,be,Ie,oe,v),ue=de,_e=be,be+=v,oe+=v;p.rc=ue,p.Vc=_e}else{if(e(ee.mc!=null),v=E+D,e((X=ee.mc)!=null),e(v<=X.i),X.C>=v)v=1;else if(ee.ic||je(),ee.ic){ee=X.V,ue=X.Ba,_e=X.c;var Me=X.i,Ne=(Ie=1,oe=X.$/_e,de=X.$%_e,be=X.m,Ee=X.s,X.$),Ve=_e*Me,Oe=_e*v,qe=Ee.wc,Ue=Ne<Oe?un(Ee,de,oe):null;e(Ne<=Ve),e(v<=Me),e(Ji(Ee));t:for(;;){for(;!be.h&&Ne<Oe;){if(de&qe||(Ue=un(Ee,de,oe)),e(Ue!=null),Se(be),256>(Me=Ar(Ue.G[0],Ue.H[0],be)))ee[ue+Ne]=Me,++Ne,++de>=_e&&(de=0,++oe<=v&&!(oe%16)&&wn(X,oe));else{if(!(280>Me)){Ie=0;break t}Me=On(Me-256,be);var Ct,ht=Ar(Ue.G[4],Ue.H[4],be);if(Se(be),!(Ne>=(ht=Li(_e,ht=On(ht,be)))&&Ve-Ne>=Me)){Ie=0;break t}for(Ct=0;Ct<Me;++Ct)ee[ue+Ne+Ct]=ee[ue+Ne+Ct-ht];for(Ne+=Me,de+=Me;de>=_e;)de-=_e,++oe<=v&&!(oe%16)&&wn(X,oe);Ne<Oe&&de&qe&&(Ue=un(Ee,de,oe))}e(be.h==fe(be))}wn(X,oe>v?v:oe);break t}!Ie||be.h&&Ne<Ve?(Ie=0,X.a=be.h?5:3):X.$=Ne,v=Ie}else v=Fi(X,X.V,X.Ba,X.c,X.i,v,Ss);if(!v){D=0;break e}}E+D>=Q&&(p.Cc=1),D=1}if(!D)return null;if(p.Cc&&((D=p.ga)!=null&&(D.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+E*G}function m(p,v,E,D,G,Q){for(;0<G--;){var X,ee=p,oe=v+(E?1:0),de=p,be=v+(E?0:3);for(X=0;X<D;++X){var Ee=de[be+4*X];Ee!=255&&(Ee*=32897,ee[oe+4*X+0]=ee[oe+4*X+0]*Ee>>23,ee[oe+4*X+1]=ee[oe+4*X+1]*Ee>>23,ee[oe+4*X+2]=ee[oe+4*X+2]*Ee>>23)}v+=Q}}function P(p,v,E,D,G){for(;0<D--;){var Q;for(Q=0;Q<E;++Q){var X=p[v+2*Q+0],ee=15&(de=p[v+2*Q+1]),oe=4369*ee,de=(240&de|de>>4)*oe>>16;p[v+2*Q+0]=(240&X|X>>4)*oe>>16&240|(15&X|X<<4)*oe>>16>>4&15,p[v+2*Q+1]=240&de|ee}v+=G}}function U(p,v,E,D,G,Q,X,ee){var oe,de,be=255;for(de=0;de<G;++de){for(oe=0;oe<D;++oe){var Ee=p[v+oe];Q[X+4*oe]=Ee,be&=Ee}v+=E,X+=ee}return be!=255}function ne(p,v,E,D,G){var Q;for(Q=0;Q<G;++Q)E[D+Q]=p[v+Q]>>8}function je(){ml=m,gh=P,Gc=U,xh=ne}function Be(p,v,E){S[p]=function(D,G,Q,X,ee,oe,de,be,Ee,ue,_e,Ie,Me,Ne,Ve,Oe,qe){var Ue,Ct=qe-1>>1,ht=ee[oe+0]|de[be+0]<<16,Xt=Ee[ue+0]|_e[Ie+0]<<16;e(D!=null);var gt=3*ht+Xt+131074>>2;for(v(D[G+0],255&gt,gt>>16,Me,Ne),Q!=null&&(gt=3*Xt+ht+131074>>2,v(Q[X+0],255&gt,gt>>16,Ve,Oe)),Ue=1;Ue<=Ct;++Ue){var hr=ee[oe+Ue]|de[be+Ue]<<16,mn=Ee[ue+Ue]|_e[Ie+Ue]<<16,rr=ht+hr+Xt+mn+524296,ft=rr+2*(hr+Xt)>>3;gt=ft+ht>>1,ht=(rr=rr+2*(ht+mn)>>3)+hr>>1,v(D[G+2*Ue-1],255&gt,gt>>16,Me,Ne+(2*Ue-1)*E),v(D[G+2*Ue-0],255&ht,ht>>16,Me,Ne+(2*Ue-0)*E),Q!=null&&(gt=rr+Xt>>1,ht=ft+mn>>1,v(Q[X+2*Ue-1],255&gt,gt>>16,Ve,Oe+(2*Ue-1)*E),v(Q[X+2*Ue+0],255&ht,ht>>16,Ve,Oe+(2*Ue+0)*E)),ht=hr,Xt=mn}1&qe||(gt=3*ht+Xt+131074>>2,v(D[G+qe-1],255&gt,gt>>16,Me,Ne+(qe-1)*E),Q!=null&&(gt=3*Xt+ht+131074>>2,v(Q[X+qe-1],255&gt,gt>>16,Ve,Oe+(qe-1)*E)))}}function rt(){ro[Qd]=W0,ro[Ba]=La,ro[ep]=$0,ro[Kc]=rc,ro[Jc]=bl,ro[$r]=ed,ro[Xd]=Ah,ro[Zl]=La,ro[gl]=rc,ro[Yc]=bl,ro[Qc]=ed}function Wt(p){return p&-16384?0>p?0:255:p>>Fa}function Wr(p,v){return Wt((19077*p>>8)+(26149*v>>8)-14234)}function ur(p,v,E){return Wt((19077*p>>8)-(6419*v>>8)-(13320*E>>8)+8708)}function en(p,v){return Wt((19077*p>>8)+(33050*v>>8)-17685)}function $n(p,v,E,D,G){D[G+0]=Wr(p,E),D[G+1]=ur(p,v,E),D[G+2]=en(p,v)}function Mi(p,v,E,D,G){D[G+0]=en(p,v),D[G+1]=ur(p,v,E),D[G+2]=Wr(p,E)}function rn(p,v,E,D,G){var Q=ur(p,v,E);v=Q<<3&224|en(p,v)>>3,D[G+0]=248&Wr(p,E)|Q>>5,D[G+1]=v}function _i(p,v,E,D,G){var Q=240&en(p,v)|15;D[G+0]=240&Wr(p,E)|ur(p,v,E)>>4,D[G+1]=Q}function Wo(p,v,E,D,G){D[G+0]=255,$n(p,v,E,D,G+1)}function ea(p,v,E,D,G){Mi(p,v,E,D,G),D[G+3]=255}function qc(p,v,E,D,G){$n(p,v,E,D,G),D[G+3]=255}function hn(p,v){return 0>p?0:p>v?v:p}function as(p,v,E){S[p]=function(D,G,Q,X,ee,oe,de,be,Ee){for(var ue=be+(-2&Ee)*E;be!=ue;)v(D[G+0],Q[X+0],ee[oe+0],de,be),v(D[G+1],Q[X+0],ee[oe+0],de,be+E),G+=2,++X,++oe,be+=2*E;1&Ee&&v(D[G+0],Q[X+0],ee[oe+0],de,be)}}function Is(p,v,E){return E==0?p==0?v==0?6:5:v==0?4:0:E}function Kd(p,v,E,D,G){switch(p>>>30){case 3:fl(v,E,D,G,0);break;case 2:fn(v,E,D,G);break;case 1:Sr(v,E,D,G)}}function To(p,v){var E,D,G=v.M,Q=v.Nb,X=p.oc,ee=p.pc+40,oe=p.oc,de=p.pc+584,be=p.oc,Ee=p.pc+600;for(E=0;16>E;++E)X[ee+32*E-1]=129;for(E=0;8>E;++E)oe[de+32*E-1]=129,be[Ee+32*E-1]=129;for(0<G?X[ee-1-32]=oe[de-1-32]=be[Ee-1-32]=129:(o(X,ee-32-1,127,21),o(oe,de-32-1,127,9),o(be,Ee-32-1,127,9)),D=0;D<p.za;++D){var ue=v.ya[v.aa+D];if(0<D){for(E=-1;16>E;++E)n(X,ee+32*E-4,X,ee+32*E+12,4);for(E=-1;8>E;++E)n(oe,de+32*E-4,oe,de+32*E+4,4),n(be,Ee+32*E-4,be,Ee+32*E+4,4)}var _e=p.Gd,Ie=p.Hd+D,Me=ue.ad,Ne=ue.Hc;if(0<G&&(n(X,ee-32,_e[Ie].y,0,16),n(oe,de-32,_e[Ie].f,0,8),n(be,Ee-32,_e[Ie].ea,0,8)),ue.Za){var Ve=X,Oe=ee-32+16;for(0<G&&(D>=p.za-1?o(Ve,Oe,_e[Ie].y[15],4):n(Ve,Oe,_e[Ie+1].y,0,4)),E=0;4>E;E++)Ve[Oe+128+E]=Ve[Oe+256+E]=Ve[Oe+384+E]=Ve[Oe+0+E];for(E=0;16>E;++E,Ne<<=2)Ve=X,Oe=ee+kh[E],Uo[ue.Ob[E]](Ve,Oe),Kd(Ne,Me,16*+E,Ve,Oe)}else if(Ve=Is(D,G,ue.Ob[0]),Wi[Ve](X,ee),Ne!=0)for(E=0;16>E;++E,Ne<<=2)Kd(Ne,Me,16*+E,X,ee+kh[E]);for(E=ue.Gc,Ve=Is(D,G,ue.Dd),to[Ve](oe,de),to[Ve](be,Ee),Ne=Me,Ve=oe,Oe=de,255&(ue=0|E)&&(170&ue?eo(Ne,256,Ve,Oe):Lr(Ne,256,Ve,Oe)),ue=be,Ne=Ee,255&(E>>=8)&&(170&E?eo(Me,320,ue,Ne):Lr(Me,320,ue,Ne)),G<p.Ub-1&&(n(_e[Ie].y,0,X,ee+480,16),n(_e[Ie].f,0,oe,de+224,8),n(_e[Ie].ea,0,be,Ee+224,8)),E=8*Q*p.B,_e=p.sa,Ie=p.ta+16*D+16*Q*p.R,Me=p.qa,ue=p.ra+8*D+E,Ne=p.Ha,Ve=p.Ia+8*D+E,E=0;16>E;++E)n(_e,Ie+E*p.R,X,ee+32*E,16);for(E=0;8>E;++E)n(Me,ue+E*p.B,oe,de+32*E,8),n(Ne,Ve+E*p.B,be,Ee+32*E,8)}}function Ia(p,v,E,D,G,Q,X,ee,oe){var de=[0],be=[0],Ee=0,ue=oe!=null?oe.kd:0,_e=oe??new De;if(p==null||12>E)return 7;_e.data=p,_e.w=v,_e.ha=E,v=[v],E=[E],_e.gb=[_e.gb];e:{var Ie=v,Me=E,Ne=_e.gb;if(e(p!=null),e(Me!=null),e(Ne!=null),Ne[0]=0,12<=Me[0]&&!t(p,Ie[0],"RIFF")){if(t(p,Ie[0]+8,"WEBP")){Ne=3;break e}var Ve=ge(p,Ie[0]+4);if(12>Ve||4294967286<Ve){Ne=3;break e}if(ue&&Ve>Me[0]-8){Ne=7;break e}Ne[0]=Ve,Ie[0]+=12,Me[0]-=12}Ne=0}if(Ne!=0)return Ne;for(Ve=0<_e.gb[0],E=E[0];;){e:{var Oe=p;Me=v,Ne=E;var qe=de,Ue=be,Ct=Ie=[0];if((gt=Ee=[Ee])[0]=0,8>Ne[0])Ne=7;else{if(!t(Oe,Me[0],"VP8X")){if(ge(Oe,Me[0]+4)!=10){Ne=3;break e}if(18>Ne[0]){Ne=7;break e}var ht=ge(Oe,Me[0]+8),Xt=1+Xe(Oe,Me[0]+12);if(2147483648<=Xt*(Oe=1+Xe(Oe,Me[0]+15))){Ne=3;break e}Ct!=null&&(Ct[0]=ht),qe!=null&&(qe[0]=Xt),Ue!=null&&(Ue[0]=Oe),Me[0]+=18,Ne[0]-=18,gt[0]=1}Ne=0}}if(Ee=Ee[0],Ie=Ie[0],Ne!=0)return Ne;if(Me=!!(2&Ie),!Ve&&Ee)return 3;if(Q!=null&&(Q[0]=!!(16&Ie)),X!=null&&(X[0]=Me),ee!=null&&(ee[0]=0),X=de[0],Ie=be[0],Ee&&Me&&oe==null){Ne=0;break}if(4>E){Ne=7;break}if(Ve&&Ee||!Ve&&!Ee&&!t(p,v[0],"ALPH")){E=[E],_e.na=[_e.na],_e.P=[_e.P],_e.Sa=[_e.Sa];e:{ht=p,Ne=v,Ve=E;var gt=_e.gb;qe=_e.na,Ue=_e.P,Ct=_e.Sa,Xt=22,e(ht!=null),e(Ve!=null),Oe=Ne[0];var hr=Ve[0];for(e(qe!=null),e(Ct!=null),qe[0]=null,Ue[0]=null,Ct[0]=0;;){if(Ne[0]=Oe,Ve[0]=hr,8>hr){Ne=7;break e}var mn=ge(ht,Oe+4);if(4294967286<mn){Ne=3;break e}var rr=8+mn+1&-2;if(Xt+=rr,0<gt&&Xt>gt){Ne=3;break e}if(!t(ht,Oe,"VP8 ")||!t(ht,Oe,"VP8L")){Ne=0;break e}if(hr[0]<rr){Ne=7;break e}t(ht,Oe,"ALPH")||(qe[0]=ht,Ue[0]=Oe+8,Ct[0]=mn),Oe+=rr,hr-=rr}}if(E=E[0],_e.na=_e.na[0],_e.P=_e.P[0],_e.Sa=_e.Sa[0],Ne!=0)break}E=[E],_e.Ja=[_e.Ja],_e.xa=[_e.xa];e:if(gt=p,Ne=v,Ve=E,qe=_e.gb[0],Ue=_e.Ja,Ct=_e.xa,ht=Ne[0],Oe=!t(gt,ht,"VP8 "),Xt=!t(gt,ht,"VP8L"),e(gt!=null),e(Ve!=null),e(Ue!=null),e(Ct!=null),8>Ve[0])Ne=7;else{if(Oe||Xt){if(gt=ge(gt,ht+4),12<=qe&&gt>qe-12){Ne=3;break e}if(ue&&gt>Ve[0]-8){Ne=7;break e}Ue[0]=gt,Ne[0]+=8,Ve[0]-=8,Ct[0]=Xt}else Ct[0]=5<=Ve[0]&&gt[ht+0]==47&&!(gt[ht+4]>>5),Ue[0]=Ve[0];Ne=0}if(E=E[0],_e.Ja=_e.Ja[0],_e.xa=_e.xa[0],v=v[0],Ne!=0)break;if(4294967286<_e.Ja)return 3;if(ee==null||Me||(ee[0]=_e.xa?2:1),X=[X],Ie=[Ie],_e.xa){if(5>E){Ne=7;break}ee=X,ue=Ie,Me=Q,p==null||5>E?p=0:5<=E&&p[v+0]==47&&!(p[v+4]>>5)?(Ve=[0],gt=[0],qe=[0],ye(Ue=new Y,p,v,E),mi(Ue,Ve,gt,qe)?(ee!=null&&(ee[0]=Ve[0]),ue!=null&&(ue[0]=gt[0]),Me!=null&&(Me[0]=qe[0]),p=1):p=0):p=0}else{if(10>E){Ne=7;break}ee=Ie,p==null||10>E||!Cs(p,v+3,E-3)?p=0:(ue=p[v+0]|p[v+1]<<8|p[v+2]<<16,Me=16383&(p[v+7]<<8|p[v+6]),p=16383&(p[v+9]<<8|p[v+8]),1&ue||3<(ue>>1&7)||!(ue>>4&1)||ue>>5>=_e.Ja||!Me||!p?p=0:(X&&(X[0]=Me),ee&&(ee[0]=p),p=1))}if(!p||(X=X[0],Ie=Ie[0],Ee&&(de[0]!=X||be[0]!=Ie)))return 3;oe!=null&&(oe[0]=_e,oe.offset=v-oe.w,e(4294967286>v-oe.w),e(oe.offset==oe.ha-E));break}return Ne==0||Ne==7&&Ee&&oe==null?(Q!=null&&(Q[0]|=_e.na!=null&&0<_e.na.length),D!=null&&(D[0]=X),G!=null&&(G[0]=Ie),0):Ne}function Hl(p,v,E){var D=v.width,G=v.height,Q=0,X=0,ee=D,oe=G;if(v.Da=p!=null&&0<p.Da,v.Da&&(ee=p.cd,oe=p.bd,Q=p.v,X=p.j,11>E||(Q&=-2,X&=-2),0>Q||0>X||0>=ee||0>=oe||Q+ee>D||X+oe>G))return 0;if(v.v=Q,v.j=X,v.va=Q+ee,v.o=X+oe,v.U=ee,v.T=oe,v.da=p!=null&&0<p.da,v.da){if(!lt(ee,oe,E=[p.ib],Q=[p.hb]))return 0;v.ib=E[0],v.hb=Q[0]}return v.ob=p!=null&&p.ob,v.Kb=p==null||!p.Sd,v.da&&(v.ob=v.ib<3*D/4&&v.hb<3*G/4,v.Kb=0),1}function Gl(p){if(p==null)return 2;if(11>p.S){var v=p.f.RGBA;v.fb+=(p.height-1)*v.A,v.A=-v.A}else v=p.f.kb,p=p.height,v.O+=(p-1)*v.fa,v.fa=-v.fa,v.N+=(p-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(p-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(p-1)*v.lb,v.lb=-v.lb);return 0}function ta(p,v,E,D){if(D==null||0>=p||0>=v)return 2;if(E!=null){if(E.Da){var G=E.cd,Q=E.bd,X=-2&E.v,ee=-2&E.j;if(0>X||0>ee||0>=G||0>=Q||X+G>p||ee+Q>v)return 2;p=G,v=Q}if(E.da){if(!lt(p,v,G=[E.ib],Q=[E.hb]))return 2;p=G[0],v=Q[0]}}D.width=p,D.height=v;e:{var oe=D.width,de=D.height;if(p=D.S,0>=oe||0>=de||!(p>=Qd&&13>p))p=2;else{if(0>=D.Rd&&D.sd==null){X=Q=G=v=0;var be=(ee=oe*td[p])*de;if(11>p||(Q=(de+1)/2*(v=(oe+1)/2),p==12&&(X=(G=oe)*de)),(de=s(be+2*Q+X))==null){p=1;break e}D.sd=de,11>p?((oe=D.f.RGBA).eb=de,oe.fb=0,oe.A=ee,oe.size=be):((oe=D.f.kb).y=de,oe.O=0,oe.fa=ee,oe.Fd=be,oe.f=de,oe.N=0+be,oe.Ab=v,oe.Cd=Q,oe.ea=de,oe.W=0+be+Q,oe.Db=v,oe.Ed=Q,p==12&&(oe.F=de,oe.J=0+be+2*Q),oe.Tc=X,oe.lb=G)}if(v=1,G=D.S,Q=D.width,X=D.height,G>=Qd&&13>G)if(11>G)p=D.f.RGBA,v&=(ee=Math.abs(p.A))*(X-1)+Q<=p.size,v&=ee>=Q*td[G],v&=p.eb!=null;else{p=D.f.kb,ee=(Q+1)/2,be=(X+1)/2,oe=Math.abs(p.fa),de=Math.abs(p.Ab);var Ee=Math.abs(p.Db),ue=Math.abs(p.lb),_e=ue*(X-1)+Q;v&=oe*(X-1)+Q<=p.Fd,v&=de*(be-1)+ee<=p.Cd,v=(v&=Ee*(be-1)+ee<=p.Ed)&oe>=Q&de>=ee&Ee>=ee,v&=p.y!=null,v&=p.f!=null,v&=p.ea!=null,G==12&&(v&=ue>=Q,v&=_e<=p.Tc,v&=p.F!=null)}else v=0;p=v?0:2}}return p!=0||E!=null&&E.fd&&(p=Gl(D)),p}var $o=64,Co=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ao=24,Ea=32,Es=8,ra=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];tt("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(p){return p},S.Predictor2=function(p,v,E){return v[E+0]},S.Predictor3=function(p,v,E){return v[E+1]},S.Predictor4=function(p,v,E){return v[E-1]},S.Predictor5=function(p,v,E){return At(At(p,v[E+1]),v[E+0])},S.Predictor6=function(p,v,E){return At(p,v[E-1])},S.Predictor7=function(p,v,E){return At(p,v[E+0])},S.Predictor8=function(p,v,E){return At(v[E-1],v[E+0])},S.Predictor9=function(p,v,E){return At(v[E+0],v[E+1])},S.Predictor10=function(p,v,E){return At(At(p,v[E-1]),At(v[E+0],v[E+1]))},S.Predictor11=function(p,v,E){var D=v[E+0];return 0>=Ut(D>>24&255,p>>24&255,(v=v[E-1])>>24&255)+Ut(D>>16&255,p>>16&255,v>>16&255)+Ut(D>>8&255,p>>8&255,v>>8&255)+Ut(255&D,255&p,255&v)?D:p},S.Predictor12=function(p,v,E){var D=v[E+0];return(mr((p>>24&255)+(D>>24&255)-((v=v[E-1])>>24&255))<<24|mr((p>>16&255)+(D>>16&255)-(v>>16&255))<<16|mr((p>>8&255)+(D>>8&255)-(v>>8&255))<<8|mr((255&p)+(255&D)-(255&v)))>>>0},S.Predictor13=function(p,v,E){var D=v[E-1];return(zt((p=At(p,v[E+0]))>>24&255,D>>24&255)<<24|zt(p>>16&255,D>>16&255)<<16|zt(p>>8&255,D>>8&255)<<8|zt(255&p,255&D))>>>0};var na=S.PredictorAdd0;S.PredictorAdd1=br,tt("Predictor2","PredictorAdd2"),tt("Predictor3","PredictorAdd3"),tt("Predictor4","PredictorAdd4"),tt("Predictor5","PredictorAdd5"),tt("Predictor6","PredictorAdd6"),tt("Predictor7","PredictorAdd7"),tt("Predictor8","PredictorAdd8"),tt("Predictor9","PredictorAdd9"),tt("Predictor10","PredictorAdd10"),tt("Predictor11","PredictorAdd11"),tt("Predictor12","PredictorAdd12"),tt("Predictor13","PredictorAdd13");var Rs=S.PredictorAdd2;xt("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),xt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var _n,cl=S.ColorIndexInverseTransform,Ps=S.MapARGB,ls=S.VP8LColorIndexInverseTransformAlpha,dl=S.MapAlpha,ul=S.VP8LPredictorsAdd=[];ul.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var Kl,Jl,ia,Ra,Pa,hl,Na,fl,fn,eo,Sr,Lr,pn,En,cs,Uc,Yl,oa,Jd,Ql,Yd,mh,Hc,pl,ml,gh,Gc,xh,yh=s(511),bh=s(2041),vh=s(225),wh=s(767),Sh=0,Ns=bh,Xl=vh,Di=wh,qo=yh,Qd=0,Ba=1,ep=2,Kc=3,Jc=4,$r=5,Xd=6,Zl=7,gl=8,Yc=9,Qc=10,Xc=[2,3,7],Zd=[3,3,11],xl=[280,256,256,256,40],tp=[0,1,1,1,0],V0=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],O0=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],rp=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],eu=8,ec=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Zc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],yl=null,_h=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Th=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],np=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ip=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],M0=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],D0=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ch=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Wi=[],Uo=[],to=[],Bs=1,tc=2,Ti=[],ro=[];Be("UpsampleRgbLinePair",$n,3),Be("UpsampleBgrLinePair",Mi,3),Be("UpsampleRgbaLinePair",qc,4),Be("UpsampleBgraLinePair",ea,4),Be("UpsampleArgbLinePair",Wo,4),Be("UpsampleRgba4444LinePair",_i,2),Be("UpsampleRgb565LinePair",rn,2);var W0=S.UpsampleRgbLinePair,$0=S.UpsampleBgrLinePair,La=S.UpsampleRgbaLinePair,rc=S.UpsampleBgraLinePair,bl=S.UpsampleArgbLinePair,ed=S.UpsampleRgba4444LinePair,Ah=S.UpsampleRgb565LinePair,sa=16,ds=1<<sa-1,Pr=-227,Fr=482,Fa=6,di=0,no=s(256),vl=s(256),nc=s(256),io=s(256),tu=s(Fr-Pr),op=s(Fr-Pr);as("YuvToRgbRow",$n,3),as("YuvToBgrRow",Mi,3),as("YuvToRgbaRow",qc,4),as("YuvToBgraRow",ea,4),as("YuvToArgbRow",Wo,4),as("YuvToRgba4444Row",_i,2),as("YuvToRgb565Row",rn,2);var kh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],wl=[0,2,8],sp=[8,7,6,4,4,2,2,2,1,1,1,1],aa=1;this.WebPDecodeRGBA=function(p,v,E,D,G){var Q=Ba,X=new Ce,ee=new qt;X.ba=ee,ee.S=Q,ee.width=[ee.width],ee.height=[ee.height];var oe=ee.width,de=ee.height,be=new Dt;if(be==null||p==null)var Ee=2;else e(be!=null),Ee=Ia(p,v,E,be.width,be.height,be.Pd,be.Qd,be.format,null);if(Ee!=0?oe=0:(oe!=null&&(oe[0]=be.width[0]),de!=null&&(de[0]=be.height[0]),oe=1),oe){ee.width=ee.width[0],ee.height=ee.height[0],D!=null&&(D[0]=ee.width),G!=null&&(G[0]=ee.height);e:{if(D=new Zn,(G=new De).data=p,G.w=v,G.ha=E,G.kd=1,v=[0],e(G!=null),((p=Ia(G.data,G.w,G.ha,null,null,null,v,null,G))==0||p==7)&&v[0]&&(p=4),(v=p)==0){if(e(X!=null),D.data=G.data,D.w=G.w+G.offset,D.ha=G.ha-G.offset,D.put=Nt,D.ac=Vn,D.bc=Bi,D.ma=X,G.xa){if((p=ws())==null){X=1;break e}if((function(ue,_e){var Ie=[0],Me=[0],Ne=[0];t:for(;;){if(ue==null)return 0;if(_e==null)return ue.a=2,0;if(ue.l=_e,ue.a=0,ye(ue.m,_e.data,_e.w,_e.ha),!mi(ue.m,Ie,Me,Ne)){ue.a=3;break t}if(ue.xb=tc,_e.width=Ie[0],_e.height=Me[0],!yo(Ie[0],Me[0],1,ue,null))break t;return 1}return e(ue.a!=0),0})(p,D)){if(D=(v=ta(D.width,D.height,X.Oa,X.ba))==0){t:{D=p;r:for(;;){if(D==null){D=0;break t}if(e(D.s.yc!=null),e(D.s.Ya!=null),e(0<D.s.Wb),e((E=D.l)!=null),e((G=E.ma)!=null),D.xb!=0){if(D.ca=G.ba,D.tb=G.tb,e(D.ca!=null),!Hl(G.Oa,E,Kc)){D.a=2;break r}if(!bo(D,E.width)||E.da)break r;if((E.da||$t(D.ca.S))&&je(),11>D.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),D.ca.f.kb.F!=null&&je()),D.Pb&&0<D.s.ua&&D.s.vb.X==null&&!le(D.s.vb,D.s.Wa.Xa)){D.a=1;break r}D.xb=0}if(!Fi(D,D.V,D.Ba,D.c,D.i,E.o,Zo))break r;G.Dc=D.Ma,D=1;break t}e(D.a!=0),D=0}D=!D}D&&(v=p.a)}else v=p.a}else{if((p=new Fo)==null){X=1;break e}if(p.Fa=G.na,p.P=G.P,p.qc=G.Sa,vo(p,D)){if((v=ta(D.width,D.height,X.Oa,X.ba))==0){if(p.Aa=0,E=X.Oa,e((G=p)!=null),E!=null){if(0<(oe=0>(oe=E.Md)?0:100<oe?255:255*oe/100)){for(de=be=0;4>de;++de)12>(Ee=G.pb[de]).lc&&(Ee.ia=oe*sp[0>Ee.lc?0:Ee.lc]>>3),be|=Ee.ia;be&&(alert("todo:VP8InitRandom"),G.ia=1)}G.Ga=E.Id,100<G.Ga?G.Ga=100:0>G.Ga&&(G.Ga=0)}(function(ue,_e){if(ue==null)return 0;if(_e==null)return wr(ue,2,"NULL VP8Io parameter in VP8Decode().");if(!ue.cb&&!vo(ue,_e))return 0;if(e(ue.cb),_e.ac==null||_e.ac(_e)){_e.ob&&(ue.L=0);var Ie=wl[ue.L];if(ue.L==2?(ue.yb=0,ue.zb=0):(ue.yb=_e.v-Ie>>4,ue.zb=_e.j-Ie>>4,0>ue.yb&&(ue.yb=0),0>ue.zb&&(ue.zb=0)),ue.Va=_e.o+15+Ie>>4,ue.Hb=_e.va+15+Ie>>4,ue.Hb>ue.za&&(ue.Hb=ue.za),ue.Va>ue.Ub&&(ue.Va=ue.Ub),0<ue.L){var Me=ue.ed;for(Ie=0;4>Ie;++Ie){var Ne;if(ue.Qa.Cb){var Ve=ue.Qa.Lb[Ie];ue.Qa.Fb||(Ve+=Me.Tb)}else Ve=Me.Tb;for(Ne=0;1>=Ne;++Ne){var Oe=ue.gd[Ie][Ne],qe=Ve;if(Me.Pc&&(qe+=Me.vd[0],Ne&&(qe+=Me.od[0])),0<(qe=0>qe?0:63<qe?63:qe)){var Ue=qe;0<Me.wb&&(Ue=4<Me.wb?Ue>>2:Ue>>1)>9-Me.wb&&(Ue=9-Me.wb),1>Ue&&(Ue=1),Oe.dd=Ue,Oe.tc=2*qe+Ue,Oe.ld=40<=qe?2:15<=qe?1:0}else Oe.tc=0;Oe.La=Ne}}}Ie=0}else wr(ue,6,"Frame setup failed"),Ie=ue.a;if(Ie=Ie==0){if(Ie){ue.$c=0,0<ue.Aa||(ue.Ic=aa);t:{Ie=ue.Ic,Me=4*(Ue=ue.za);var Ct=32*Ue,ht=Ue+1,Xt=0<ue.L?Ue*(0<ue.Aa?2:1):0,gt=(ue.Aa==2?2:1)*Ue;if((Oe=Me+832+(Ne=3*(16*Ie+wl[ue.L])/2*Ct)+(Ve=ue.Fa!=null&&0<ue.Fa.length?ue.Kc.c*ue.Kc.i:0))!=Oe)Ie=0;else{if(Oe>ue.Vb){if(ue.Vb=0,ue.Ec=s(Oe),ue.Fc=0,ue.Ec==null){Ie=wr(ue,1,"no memory during frame initialization.");break t}ue.Vb=Oe}Oe=ue.Ec,qe=ue.Fc,ue.Ac=Oe,ue.Bc=qe,qe+=Me,ue.Gd=l(Ct,xi),ue.Hd=0,ue.rb=l(ht+1,rs),ue.sb=1,ue.wa=Xt?l(Xt,gi):null,ue.Y=0,ue.D.Nb=0,ue.D.wa=ue.wa,ue.D.Y=ue.Y,0<ue.Aa&&(ue.D.Y+=Ue),e(!0),ue.oc=Oe,ue.pc=qe,qe+=832,ue.ya=l(gt,_s),ue.aa=0,ue.D.ya=ue.ya,ue.D.aa=ue.aa,ue.Aa==2&&(ue.D.aa+=Ue),ue.R=16*Ue,ue.B=8*Ue,Ue=(Ct=wl[ue.L])*ue.R,Ct=Ct/2*ue.B,ue.sa=Oe,ue.ta=qe+Ue,ue.qa=ue.sa,ue.ra=ue.ta+16*Ie*ue.R+Ct,ue.Ha=ue.qa,ue.Ia=ue.ra+8*Ie*ue.B+Ct,ue.$c=0,qe+=Ne,ue.mb=Ve?Oe:null,ue.nb=Ve?qe:null,e(qe+Ve<=ue.Fc+ue.Vb),lr(ue),o(ue.Ac,ue.Bc,0,Me),Ie=1}}if(Ie){if(_e.ka=0,_e.y=ue.sa,_e.O=ue.ta,_e.f=ue.qa,_e.N=ue.ra,_e.ea=ue.Ha,_e.Vd=ue.Ia,_e.fa=ue.R,_e.Rc=ue.B,_e.F=null,_e.J=0,!Sh){for(Ie=-255;255>=Ie;++Ie)yh[255+Ie]=0>Ie?-Ie:Ie;for(Ie=-1020;1020>=Ie;++Ie)bh[1020+Ie]=-128>Ie?-128:127<Ie?127:Ie;for(Ie=-112;112>=Ie;++Ie)vh[112+Ie]=-16>Ie?-16:15<Ie?15:Ie;for(Ie=-255;510>=Ie;++Ie)wh[255+Ie]=0>Ie?0:255<Ie?255:Ie;Sh=1}Na=or,fl=il,eo=Ys,Sr=zo,Lr=Ta,fn=nl,pn=ja,En=Wn,cs=C,Uc=H,Yl=Si,oa=js,Jd=he,Ql=xe,Yd=ci,mh=Mo,Hc=Do,pl=ll,Uo[0]=Ul,Uo[1]=Qs,Uo[2]=ns,Uo[3]=Vi,Uo[4]=As,Uo[5]=Oo,Uo[6]=Dn,Uo[7]=Aa,Uo[8]=Zs,Uo[9]=Rr,Wi[0]=So,Wi[1]=ol,Wi[2]=sl,Wi[3]=Xs,Wi[4]=Vo,Wi[5]=vi,Wi[6]=Sn,to[0]=Xi,to[1]=Ca,to[2]=al,to[3]=Qi,to[4]=Zi,to[5]=is,to[6]=ka,Ie=1}else Ie=0}Ie&&(Ie=(function(hr,mn){for(hr.M=0;hr.M<hr.Va;++hr.M){var rr,ft=hr.Jc[hr.M&hr.Xb],ot=hr.m,Tn=hr;for(rr=0;rr<Tn.za;++rr){var Gt=ot,cr=Tn,tn=cr.Ac,ti=cr.Bc+4*rr,Rn=cr.zc,cn=cr.ya[cr.aa+rr];if(cr.Qa.Bb?cn.$b=Fe(Gt,cr.Pa.jb[0])?2+Fe(Gt,cr.Pa.jb[2]):Fe(Gt,cr.Pa.jb[1]):cn.$b=0,cr.kc&&(cn.Ad=Fe(Gt,cr.Bd)),cn.Za=!Fe(Gt,145)+0,cn.Za){var qn=cn.Ob,ri=0;for(cr=0;4>cr;++cr){var sn,pr=Rn[0+cr];for(sn=0;4>sn;++sn){pr=M0[tn[ti+sn]][pr];for(var _r=np[Fe(Gt,pr[0])];0<_r;)_r=np[2*_r+Fe(Gt,pr[_r])];pr=-_r,tn[ti+sn]=pr}n(qn,ri,tn,ti,4),ri+=4,Rn[0+cr]=pr}}else pr=Fe(Gt,156)?Fe(Gt,128)?1:3:Fe(Gt,163)?2:0,cn.Ob[0]=pr,o(tn,ti,pr,4),o(Rn,0,pr,4);cn.Dd=Fe(Gt,142)?Fe(Gt,114)?Fe(Gt,183)?1:3:2:0}if(Tn.m.Ka)return wr(hr,7,"Premature end-of-partition0 encountered.");for(;hr.ja<hr.za;++hr.ja){if(Tn=ft,Gt=(ot=hr).rb[ot.sb-1],tn=ot.rb[ot.sb+ot.ja],rr=ot.ya[ot.aa+ot.ja],ti=ot.kc?rr.Ad:0)Gt.la=tn.la=0,rr.Za||(Gt.Na=tn.Na=0),rr.Hc=0,rr.Gc=0,rr.ia=0;else{var an,Tr;if(Gt=tn,tn=Tn,ti=ot.Pa.Xc,Rn=ot.ya[ot.aa+ot.ja],cn=ot.pb[Rn.$b],cr=Rn.ad,qn=0,ri=ot.rb[ot.sb-1],pr=sn=0,o(cr,qn,0,384),Rn.Za)var gn=0,xn=ti[3];else{_r=s(16);var qr=Gt.Na+ri.Na;if(qr=yl(tn,ti[1],qr,cn.Eb,0,_r,0),Gt.Na=ri.Na=(0<qr)+0,1<qr)Na(_r,0,cr,qn);else{var Ci=_r[0]+3>>3;for(_r=0;256>_r;_r+=16)cr[qn+_r]=Ci}gn=1,xn=ti[0]}var zr=15&Gt.la,Ur=15&ri.la;for(_r=0;4>_r;++_r){var Pn=1&Ur;for(Ci=Tr=0;4>Ci;++Ci)zr=zr>>1|(Pn=(qr=yl(tn,xn,qr=Pn+(1&zr),cn.Sc,gn,cr,qn))>gn)<<7,Tr=Tr<<2|(3<qr?3:1<qr?2:cr[qn+0]!=0),qn+=16;zr>>=4,Ur=Ur>>1|Pn<<7,sn=(sn<<8|Tr)>>>0}for(xn=zr,gn=Ur>>4,an=0;4>an;an+=2){for(Tr=0,zr=Gt.la>>4+an,Ur=ri.la>>4+an,_r=0;2>_r;++_r){for(Pn=1&Ur,Ci=0;2>Ci;++Ci)qr=Pn+(1&zr),zr=zr>>1|(Pn=0<(qr=yl(tn,ti[2],qr,cn.Qc,0,cr,qn)))<<3,Tr=Tr<<2|(3<qr?3:1<qr?2:cr[qn+0]!=0),qn+=16;zr>>=2,Ur=Ur>>1|Pn<<5}pr|=Tr<<4*an,xn|=zr<<4<<an,gn|=(240&Ur)<<an}Gt.la=xn,ri.la=gn,Rn.Hc=sn,Rn.Gc=pr,Rn.ia=43690&pr?0:cn.ia,ti=!(sn|pr)}if(0<ot.L&&(ot.wa[ot.Y+ot.ja]=ot.gd[rr.$b][rr.Za],ot.wa[ot.Y+ot.ja].La|=!ti),Tn.Ka)return wr(hr,7,"Premature end-of-file encountered.")}if(lr(hr),ot=mn,Tn=1,rr=(ft=hr).D,Gt=0<ft.L&&ft.M>=ft.zb&&ft.M<=ft.Va,ft.Aa==0)t:{if(rr.M=ft.M,rr.uc=Gt,To(ft,rr),Tn=1,rr=(Tr=ft.D).Nb,Gt=(pr=wl[ft.L])*ft.R,tn=pr/2*ft.B,_r=16*rr*ft.R,Ci=8*rr*ft.B,ti=ft.sa,Rn=ft.ta-Gt+_r,cn=ft.qa,cr=ft.ra-tn+Ci,qn=ft.Ha,ri=ft.Ia-tn+Ci,Ur=(zr=Tr.M)==0,sn=zr>=ft.Va-1,ft.Aa==2&&To(ft,Tr),Tr.uc)for(Pn=(qr=ft).D.M,e(qr.D.uc),Tr=qr.yb;Tr<qr.Hb;++Tr){gn=Tr,xn=Pn;var ui=(oo=(kn=qr).D).Nb;an=kn.R;var oo=oo.wa[oo.Y+gn],Cn=kn.sa,An=kn.ta+16*ui*an+16*gn,Ai=oo.dd,Hr=oo.tc;if(Hr!=0)if(e(3<=Hr),kn.L==1)0<gn&&mh(Cn,An,an,Hr+4),oo.La&&pl(Cn,An,an,Hr),0<xn&&Yd(Cn,An,an,Hr+4),oo.La&&Hc(Cn,An,an,Hr);else{var ki=kn.B,Ho=kn.qa,us=kn.ra+8*ui*ki+8*gn,ni=kn.Ha,kn=kn.Ia+8*ui*ki+8*gn;ui=oo.ld,0<gn&&(En(Cn,An,an,Hr+4,Ai,ui),Uc(Ho,us,ni,kn,ki,Hr+4,Ai,ui)),oo.La&&(oa(Cn,An,an,Hr,Ai,ui),Ql(Ho,us,ni,kn,ki,Hr,Ai,ui)),0<xn&&(pn(Cn,An,an,Hr+4,Ai,ui),cs(Ho,us,ni,kn,ki,Hr+4,Ai,ui)),oo.La&&(Yl(Cn,An,an,Hr,Ai,ui),Jd(Ho,us,ni,kn,ki,Hr,Ai,ui))}}if(ft.ia&&alert("todo:DitherRow"),ot.put!=null){if(Tr=16*zr,zr=16*(zr+1),Ur?(ot.y=ft.sa,ot.O=ft.ta+_r,ot.f=ft.qa,ot.N=ft.ra+Ci,ot.ea=ft.Ha,ot.W=ft.Ia+Ci):(Tr-=pr,ot.y=ti,ot.O=Rn,ot.f=cn,ot.N=cr,ot.ea=qn,ot.W=ri),sn||(zr-=pr),zr>ot.o&&(zr=ot.o),ot.F=null,ot.J=null,ft.Fa!=null&&0<ft.Fa.length&&Tr<zr&&(ot.J=Dr(ft,ot,Tr,zr-Tr),ot.F=ft.mb,ot.F==null&&ot.F.length==0)){Tn=wr(ft,3,"Could not decode alpha data.");break t}Tr<ot.j&&(pr=ot.j-Tr,Tr=ot.j,e(!(1&pr)),ot.O+=ft.R*pr,ot.N+=ft.B*(pr>>1),ot.W+=ft.B*(pr>>1),ot.F!=null&&(ot.J+=ot.width*pr)),Tr<zr&&(ot.O+=ot.v,ot.N+=ot.v>>1,ot.W+=ot.v>>1,ot.F!=null&&(ot.J+=ot.v),ot.ka=Tr-ot.j,ot.U=ot.va-ot.v,ot.T=zr-Tr,Tn=ot.put(ot))}rr+1!=ft.Ic||sn||(n(ft.sa,ft.ta-Gt,ti,Rn+16*ft.R,Gt),n(ft.qa,ft.ra-tn,cn,cr+8*ft.B,tn),n(ft.Ha,ft.Ia-tn,qn,ri+8*ft.B,tn))}if(!Tn)return wr(hr,6,"Output aborted.")}return 1})(ue,_e)),_e.bc!=null&&_e.bc(_e),Ie&=1}return Ie?(ue.cb=0,Ie):0})(p,D)||(v=p.a)}}else v=p.a}v==0&&X.Oa!=null&&X.Oa.fd&&(v=Gl(X.ba))}X=v}Q=X!=0?null:11>Q?ee.f.RGBA.eb:ee.f.kb.y}else Q=null;return Q};var td=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(S,V){for(var I="",w=0;w<4;w++)I+=String.fromCharCode(S[V++]);return I}function g(S,V){return S[V+0]|S[V+1]<<8}function y(S,V){return(S[V+0]|S[V+1]<<8|S[V+2]<<16)>>>0}function _(S,V){return(S[V+0]|S[V+1]<<8|S[V+2]<<16|S[V+3]<<24)>>>0}new h;var b=[0],R=[0],j=[],z=new h,T=r,M=(function(S,V){var I={},w=0,N=!1,W=0,q=0;if(I.frames=[],!(function($,Y){for(var ae=0;ae<4;ae++)if($[Y+ae]!="RIFF".charCodeAt(ae))return!0;return!1})(S,V)){for(_(S,V+=4),V+=8;V<S.length;){var re=u(S,V),Z=_(S,V+=4);V+=4;var te=Z+(1&Z);switch(re){case"VP8 ":case"VP8L":I.frames[w]===void 0&&(I.frames[w]={}),(ie=I.frames[w]).src_off=N?q:V-8,ie.src_size=W+Z+8,w++,N&&(N=!1,W=0,q=0);break;case"VP8X":(ie=I.header={}).feature_flags=S[V];var ye=V+4;ie.canvas_width=1+y(S,ye),ye+=3,ie.canvas_height=1+y(S,ye),ye+=3;break;case"ALPH":N=!0,W=te+8,q=V-8;break;case"ANIM":(ie=I.header).bgcolor=_(S,V),ye=V+4,ie.loop_count=g(S,ye),ye+=2;break;case"ANMF":var we,ie;(ie=I.frames[w]={}).offset_x=2*y(S,V),V+=3,ie.offset_y=2*y(S,V),V+=3,ie.width=1+y(S,V),V+=3,ie.height=1+y(S,V),V+=3,ie.duration=y(S,V),V+=3,we=S[V++],ie.dispose=1&we,ie.blend=we>>1&1}re!="ANMF"&&(V+=te)}return I}})(T,0);M.response=T,M.rgbaoutput=!0,M.dataurl=!1;var F=M.header?M.header:null,B=M.frames?M.frames:null;if(F){F.loop_counter=F.loop_count,b=[F.canvas_height],R=[F.canvas_width];for(var J=0;J<B.length&&B[J].blend!=0;J++);}var se=B[0],O=z.WebPDecodeRGBA(T,se.src_off,se.src_size,R,b);se.rgba=O,se.imgwidth=R[0],se.imgheight=b[0];for(var A=0;A<R[0]*b[0]*4;A++)j[A]=O[A];return this.width=R,this.height=b,this.data=j,this}(function(r){var e,t,n,o,s,l,d,h,u,g=function($){return $=$||{},this.isStrokeTransparent=$.isStrokeTransparent||!1,this.strokeOpacity=$.strokeOpacity||1,this.strokeStyle=$.strokeStyle||"#000000",this.fillStyle=$.fillStyle||"#000000",this.isFillTransparent=$.isFillTransparent||!1,this.fillOpacity=$.fillOpacity||1,this.font=$.font||"10px sans-serif",this.textBaseline=$.textBaseline||"alphabetic",this.textAlign=$.textAlign||"left",this.lineWidth=$.lineWidth||1,this.lineJoin=$.lineJoin||"miter",this.lineCap=$.lineCap||"butt",this.path=$.path||[],this.transform=$.transform!==void 0?$.transform.clone():new h,this.globalCompositeOperation=$.globalCompositeOperation||"normal",this.globalAlpha=$.globalAlpha||1,this.clip_path=$.clip_path||[],this.currentPoint=$.currentPoint||new l,this.miterLimit=$.miterLimit||10,this.lastPoint=$.lastPoint||new l,this.lineDashOffset=$.lineDashOffset||0,this.lineDash=$.lineDash||[],this.margin=$.margin||[0,0,0,0],this.prevPageLastElemOffset=$.prevPageLastElemOffset||0,this.ignoreClearRect=typeof $.ignoreClearRect!="boolean"||$.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new y(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,l=this.internal.Point,d=this.internal.Rectangle,h=this.internal.Matrix,u=new g}]);var y=function($){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=$;Object.defineProperty(this,"pdf",{get:function(){return Y}});var ae=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ae},set:function(ge){ae=!!ge}});var fe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return fe},set:function(ge){fe=!!ge}});var me=0;Object.defineProperty(this,"posX",{get:function(){return me},set:function(ge){isNaN(ge)||(me=ge)}});var Se=0;Object.defineProperty(this,"posY",{get:function(){return Se},set:function(ge){isNaN(ge)||(Se=ge)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(ge){var le;typeof ge=="number"?le=[ge,ge,ge,ge]:((le=new Array(4))[0]=ge[0],le[1]=ge.length>=2?ge[1]:le[0],le[2]=ge.length>=3?ge[2]:le[0],le[3]=ge.length>=4?ge[3]:le[1]),u.margin=le}});var ke=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ke},set:function(ge){ke=ge}});var Ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ae},set:function(ge){Ae=ge}});var Fe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Fe},set:function(ge){Fe=ge}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(ge){ge instanceof g&&(u=ge)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(ge){u.path=ge}});var He=[];Object.defineProperty(this,"ctxStack",{get:function(){return He},set:function(ge){He=ge}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ge){var le;le=_(ge),this.ctx.fillStyle=le.style,this.ctx.isFillTransparent=le.a===0,this.ctx.fillOpacity=le.a,this.pdf.setFillColor(le.r,le.g,le.b,{a:le.a}),this.pdf.setTextColor(le.r,le.g,le.b,{a:le.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ge){var le=_(ge);this.ctx.strokeStyle=le.style,this.ctx.isStrokeTransparent=le.a===0,this.ctx.strokeOpacity=le.a,le.a===0?this.pdf.setDrawColor(255,255,255):(le.a,this.pdf.setDrawColor(le.r,le.g,le.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ge){["butt","round","square"].indexOf(ge)!==-1&&(this.ctx.lineCap=ge,this.pdf.setLineCap(ge))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ge){isNaN(ge)||(this.ctx.lineWidth=ge,this.pdf.setLineWidth(ge))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ge){["bevel","round","miter"].indexOf(ge)!==-1&&(this.ctx.lineJoin=ge,this.pdf.setLineJoin(ge))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ge){isNaN(ge)||(this.ctx.miterLimit=ge,this.pdf.setMiterLimit(ge))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ge){this.ctx.textBaseline=ge}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ge){["right","end","center","left","start"].indexOf(ge)!==-1&&(this.ctx.textAlign=ge)}});var Ze=null,Xe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Xe},set:function(ge){Ze=null,Xe=ge}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ge){var le;if(this.ctx.font=ge,(le=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ge))!==null){var at=le[1];le[2];var dt=le[3],lt=le[4];le[5];var $e=le[6],nt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(lt)[2];lt=Math.floor(nt==="px"?parseFloat(lt)*this.pdf.internal.scaleFactor:nt==="em"?parseFloat(lt)*this.pdf.getFontSize():parseFloat(lt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(lt);var tt=(function(Pt){var xt,jr,ir=[],mt=Pt.trim();if(mt==="")return Gg;if(mt in P2)return[P2[mt]];for(;mt!=="";){switch(jr=null,xt=(mt=B2(mt)).charAt(0)){case'"':case"'":jr=ej(mt.substring(1),xt);break;default:jr=tj(mt)}if(jr===null||(ir.push(jr[0]),(mt=B2(jr[1]))!==""&&mt.charAt(0)!==","))return Gg;mt=mt.replace(/^,/,"")}return ir})($e);if(this.fontFaces){var Jt=(function(Pt,xt){if(Ze===null){var jr=(function(ir){var mt=[];return Object.keys(ir).forEach(function(Ht){ir[Ht].forEach(function(sr){var Rt=null;switch(sr){case"bold":Rt={family:Ht,weight:"bold"};break;case"italic":Rt={family:Ht,style:"italic"};break;case"bolditalic":Rt={family:Ht,weight:"bold",style:"italic"};break;case"":case"normal":Rt={family:Ht}}Rt!==null&&(Rt.ref={name:Ht,style:sr},mt.push(Rt))})}),mt})(Pt.getFontList());Ze=(function(ir){for(var mt={},Ht=0;Ht<ir.length;++Ht){var sr=Hg(ir[Ht]),Rt=sr.family,tr=sr.stretch,$t=sr.style,Ir=sr.weight;mt[Rt]=mt[Rt]||{},mt[Rt][tr]=mt[Rt][tr]||{},mt[Rt][tr][$t]=mt[Rt][tr][$t]||{},mt[Rt][tr][$t][Ir]=sr}return mt})(jr.concat(xt))}return Ze})(this.pdf,this.fontFaces),At=tt.map(function(Pt){return{family:Pt,stretch:"normal",weight:dt,style:at}}),mr=(function(Pt,xt,jr){for(var ir=(jr=jr||{}).defaultFontFamily||"times",mt=Object.assign({},Zk,jr.genericFontFamilies||{}),Ht=null,sr=null,Rt=0;Rt<xt.length;++Rt)if(mt[(Ht=Hg(xt[Rt])).family]&&(Ht.family=mt[Ht.family]),Pt.hasOwnProperty(Ht.family)){sr=Pt[Ht.family];break}if(!(sr=sr||Pt[ir]))throw new Error("Could not find a font-family for the rule '"+N2(Ht)+"' and default family '"+ir+"'.");if(sr=(function(tr,$t){if($t[tr])return $t[tr];var Ir=C1[tr],Vr=Ir<=C1.normal?-1:1,qt=R2($t,CS,Ir,Vr);if(!qt)throw new Error("Could not find a matching font-stretch value for "+tr);return qt})(Ht.stretch,sr),sr=(function(tr,$t){if($t[tr])return $t[tr];for(var Ir=TS[tr],Vr=0;Vr<Ir.length;++Vr)if($t[Ir[Vr]])return $t[Ir[Vr]];throw new Error("Could not find a matching font-style for "+tr)})(Ht.style,sr),!(sr=(function(tr,$t){if($t[tr])return $t[tr];if(tr===400&&$t[500])return $t[500];if(tr===500&&$t[400])return $t[400];var Ir=Xk[tr],Vr=R2($t,AS,Ir,tr<400?-1:1);if(!Vr)throw new Error("Could not find a matching font-weight for value "+tr);return Vr})(Ht.weight,sr)))throw new Error("Failed to resolve a font for the rule '"+N2(Ht)+"'.");return sr})(Jt,At);this.pdf.setFont(mr.ref.name,mr.ref.style)}else{var zt="";(dt==="bold"||parseInt(dt,10)>=700||at==="bold")&&(zt="bold"),at==="italic"&&(zt+="italic"),zt.length===0&&(zt="normal");for(var Ut="",br={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Mt=0;Mt<tt.length;Mt++){if(this.pdf.internal.getFont(tt[Mt],zt,{noFallback:!0,disableWarning:!0})!==void 0){Ut=tt[Mt];break}if(zt==="bolditalic"&&this.pdf.internal.getFont(tt[Mt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ut=tt[Mt],zt="bold";else if(this.pdf.internal.getFont(tt[Mt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ut=tt[Mt],zt="normal";break}}if(Ut===""){for(var kt=0;kt<tt.length;kt++)if(br[tt[kt]]){Ut=br[tt[kt]];break}}Ut=Ut===""?"Times":Ut,this.pdf.setFont(Ut,zt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ge){this.ctx.globalCompositeOperation=ge}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ge){this.ctx.globalAlpha=ge}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ge){this.ctx.lineDashOffset=ge,ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ge){this.ctx.lineDash=ge,ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ge){this.ctx.ignoreClearRect=!!ge}})};y.prototype.setLineDash=function($){this.lineDash=$},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){B.call(this,"fill",!1)},y.prototype.stroke=function(){B.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function($,Y){if(isNaN($)||isNaN(Y))throw on.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ae=this.ctx.transform.applyToPoint(new l($,Y));this.path.push({type:"mt",x:ae.x,y:ae.y}),this.ctx.lastPoint=new l($,Y)},y.prototype.closePath=function(){var $=new l(0,0),Y=0;for(Y=this.path.length-1;Y!==-1;Y--)if(this.path[Y].type==="begin"&&Kr(this.path[Y+1])==="object"&&typeof this.path[Y+1].x=="number"){$=new l(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l($.x,$.y)},y.prototype.lineTo=function($,Y){if(isNaN($)||isNaN(Y))throw on.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ae=this.ctx.transform.applyToPoint(new l($,Y));this.path.push({type:"lt",x:ae.x,y:ae.y}),this.ctx.lastPoint=new l(ae.x,ae.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),B.call(this,null,!0)},y.prototype.quadraticCurveTo=function($,Y,ae,fe){if(isNaN(ae)||isNaN(fe)||isNaN($)||isNaN(Y))throw on.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var me=this.ctx.transform.applyToPoint(new l(ae,fe)),Se=this.ctx.transform.applyToPoint(new l($,Y));this.path.push({type:"qct",x1:Se.x,y1:Se.y,x:me.x,y:me.y}),this.ctx.lastPoint=new l(me.x,me.y)},y.prototype.bezierCurveTo=function($,Y,ae,fe,me,Se){if(isNaN(me)||isNaN(Se)||isNaN($)||isNaN(Y)||isNaN(ae)||isNaN(fe))throw on.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ke=this.ctx.transform.applyToPoint(new l(me,Se)),Ae=this.ctx.transform.applyToPoint(new l($,Y)),Fe=this.ctx.transform.applyToPoint(new l(ae,fe));this.path.push({type:"bct",x1:Ae.x,y1:Ae.y,x2:Fe.x,y2:Fe.y,x:ke.x,y:ke.y}),this.ctx.lastPoint=new l(ke.x,ke.y)},y.prototype.arc=function($,Y,ae,fe,me,Se){if(isNaN($)||isNaN(Y)||isNaN(ae)||isNaN(fe)||isNaN(me))throw on.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Se=!!Se,!this.ctx.transform.isIdentity){var ke=this.ctx.transform.applyToPoint(new l($,Y));$=ke.x,Y=ke.y;var Ae=this.ctx.transform.applyToPoint(new l(0,ae)),Fe=this.ctx.transform.applyToPoint(new l(0,0));ae=Math.sqrt(Math.pow(Ae.x-Fe.x,2)+Math.pow(Ae.y-Fe.y,2))}Math.abs(me-fe)>=2*Math.PI&&(fe=0,me=2*Math.PI),this.path.push({type:"arc",x:$,y:Y,radius:ae,startAngle:fe,endAngle:me,counterclockwise:Se})},y.prototype.arcTo=function($,Y,ae,fe,me){throw new Error("arcTo not implemented.")},y.prototype.rect=function($,Y,ae,fe){if(isNaN($)||isNaN(Y)||isNaN(ae)||isNaN(fe))throw on.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo($,Y),this.lineTo($+ae,Y),this.lineTo($+ae,Y+fe),this.lineTo($,Y+fe),this.lineTo($,Y),this.lineTo($+ae,Y),this.lineTo($,Y)},y.prototype.fillRect=function($,Y,ae,fe){if(isNaN($)||isNaN(Y)||isNaN(ae)||isNaN(fe))throw on.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var me={};this.lineCap!=="butt"&&(me.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(me.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect($,Y,ae,fe),this.fill(),me.hasOwnProperty("lineCap")&&(this.lineCap=me.lineCap),me.hasOwnProperty("lineJoin")&&(this.lineJoin=me.lineJoin)}},y.prototype.strokeRect=function($,Y,ae,fe){if(isNaN($)||isNaN(Y)||isNaN(ae)||isNaN(fe))throw on.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");R.call(this)||(this.beginPath(),this.rect($,Y,ae,fe),this.stroke())},y.prototype.clearRect=function($,Y,ae,fe){if(isNaN($)||isNaN(Y)||isNaN(ae)||isNaN(fe))throw on.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect($,Y,ae,fe))},y.prototype.save=function($){$=typeof $!="boolean"||$;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,ae=0;ae<this.pdf.internal.getNumberOfPages();ae++)this.pdf.setPage(ae+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),$){this.ctx.fontSize=this.pdf.internal.getFontSize();var fe=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=fe}},y.prototype.restore=function($){$=typeof $!="boolean"||$;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,ae=0;ae<this.pdf.internal.getNumberOfPages();ae++)this.pdf.setPage(ae+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),$&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var _=function($){var Y,ae,fe,me;if($.isCanvasGradient===!0&&($=$.getColor()),!$)return{r:0,g:0,b:0,a:0,style:$};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test($))Y=0,ae=0,fe=0,me=0;else{var Se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec($);if(Se!==null)Y=parseInt(Se[1]),ae=parseInt(Se[2]),fe=parseInt(Se[3]),me=1;else if((Se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec($))!==null)Y=parseInt(Se[1]),ae=parseInt(Se[2]),fe=parseInt(Se[3]),me=parseFloat(Se[4]);else{if(me=1,typeof $=="string"&&$.charAt(0)!=="#"){var ke=new xS($);$=ke.ok?ke.toHex():"#000000"}$.length===4?(Y=$.substring(1,2),Y+=Y,ae=$.substring(2,3),ae+=ae,fe=$.substring(3,4),fe+=fe):(Y=$.substring(1,3),ae=$.substring(3,5),fe=$.substring(5,7)),Y=parseInt(Y,16),ae=parseInt(ae,16),fe=parseInt(fe,16)}}return{r:Y,g:ae,b:fe,a:me,style:$}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},R=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function($,Y,ae,fe){if(isNaN(Y)||isNaN(ae)||typeof $!="string")throw on.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(fe=isNaN(fe)?void 0:fe,!b.call(this)){var me=te(this.ctx.transform.rotation),Se=this.ctx.transform.scaleX;w.call(this,{text:$,x:Y,y:ae,scale:Se,angle:me,align:this.textAlign,maxWidth:fe})}},y.prototype.strokeText=function($,Y,ae,fe){if(isNaN(Y)||isNaN(ae)||typeof $!="string")throw on.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!R.call(this)){fe=isNaN(fe)?void 0:fe;var me=te(this.ctx.transform.rotation),Se=this.ctx.transform.scaleX;w.call(this,{text:$,x:Y,y:ae,scale:Se,renderingMode:"stroke",angle:me,align:this.textAlign,maxWidth:fe})}},y.prototype.measureText=function($){if(typeof $!="string")throw on.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,ae=this.pdf.internal.scaleFactor,fe=Y.internal.getFontSize(),me=Y.getStringUnitWidth($)*fe/Y.internal.scaleFactor;return new function(Se){var ke=(Se=Se||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ke}}),this}({width:me*=Math.round(96*ae/72*1e4)/1e4})},y.prototype.scale=function($,Y){if(isNaN($)||isNaN(Y))throw on.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ae=new h($,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(ae)},y.prototype.rotate=function($){if(isNaN($))throw on.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new h(Math.cos($),Math.sin($),-Math.sin($),Math.cos($),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},y.prototype.translate=function($,Y){if(isNaN($)||isNaN(Y))throw on.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ae=new h(1,0,0,1,$,Y);this.ctx.transform=this.ctx.transform.multiply(ae)},y.prototype.transform=function($,Y,ae,fe,me,Se){if(isNaN($)||isNaN(Y)||isNaN(ae)||isNaN(fe)||isNaN(me)||isNaN(Se))throw on.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ke=new h($,Y,ae,fe,me,Se);this.ctx.transform=this.ctx.transform.multiply(ke)},y.prototype.setTransform=function($,Y,ae,fe,me,Se){$=isNaN($)?1:$,Y=isNaN(Y)?0:Y,ae=isNaN(ae)?0:ae,fe=isNaN(fe)?1:fe,me=isNaN(me)?0:me,Se=isNaN(Se)?0:Se,this.ctx.transform=new h($,Y,ae,fe,me,Se)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function($,Y,ae,fe,me,Se,ke,Ae,Fe){var He=this.pdf.getImageProperties($),Ze=1,Xe=1,ge=1,le=1;fe!==void 0&&Ae!==void 0&&(ge=Ae/fe,le=Fe/me,Ze=He.width/fe*Ae/fe,Xe=He.height/me*Fe/me),Se===void 0&&(Se=Y,ke=ae,Y=0,ae=0),fe!==void 0&&Ae===void 0&&(Ae=fe,Fe=me),fe===void 0&&Ae===void 0&&(Ae=He.width,Fe=He.height);for(var at,dt=this.ctx.transform.decompose(),lt=te(dt.rotate.shx),$e=new h,nt=($e=($e=($e=$e.multiply(dt.translate)).multiply(dt.skew)).multiply(dt.scale)).applyToRectangle(new d(Se-Y*ge,ke-ae*le,fe*Ze,me*Xe)),tt=z.call(this,nt),Jt=[],At=0;At<tt.length;At+=1)Jt.indexOf(tt[At])===-1&&Jt.push(tt[At]);if(F(Jt),this.autoPaging)for(var mr=Jt[0],zt=Jt[Jt.length-1],Ut=mr;Ut<zt+1;Ut++){this.pdf.setPage(Ut);var br=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=Ut===1?this.posY+this.margin[0]:this.margin[0],kt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xt=Ut===1?0:kt+(Ut-2)*Pt;if(this.ctx.clip_path.length!==0){var jr=this.path;at=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(at,this.posX+this.margin[3],-xt+Mt+this.ctx.prevPageLastElemOffset),J.call(this,"fill",!0),this.path=jr}var ir=JSON.parse(JSON.stringify(nt));ir=M([ir],this.posX+this.margin[3],-xt+Mt+this.ctx.prevPageLastElemOffset)[0];var mt=(Ut>mr||Ut<zt)&&j.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],br,Pt,null).clip().discardPath()),this.pdf.addImage($,"JPEG",ir.x,ir.y,ir.w,ir.h,null,null,lt),mt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage($,"JPEG",nt.x,nt.y,nt.w,nt.h,null,null,lt)};var z=function($,Y,ae){var fe=[];Y=Y||this.pdf.internal.pageSize.width,ae=ae||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var me=this.posY+this.ctx.prevPageLastElemOffset;switch($.type){default:case"mt":case"lt":fe.push(Math.floor(($.y+me)/ae)+1);break;case"arc":fe.push(Math.floor(($.y+me-$.radius)/ae)+1),fe.push(Math.floor(($.y+me+$.radius)/ae)+1);break;case"qct":var Se=ye(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$.x1,$.y1,$.x,$.y);fe.push(Math.floor((Se.y+me)/ae)+1),fe.push(Math.floor((Se.y+Se.h+me)/ae)+1);break;case"bct":var ke=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$.x1,$.y1,$.x2,$.y2,$.x,$.y);fe.push(Math.floor((ke.y+me)/ae)+1),fe.push(Math.floor((ke.y+ke.h+me)/ae)+1);break;case"rect":fe.push(Math.floor(($.y+me)/ae)+1),fe.push(Math.floor(($.y+$.h+me)/ae)+1)}for(var Ae=0;Ae<fe.length;Ae+=1)for(;this.pdf.internal.getNumberOfPages()<fe[Ae];)T.call(this);return fe},T=function(){var $=this.fillStyle,Y=this.strokeStyle,ae=this.font,fe=this.lineCap,me=this.lineWidth,Se=this.lineJoin;this.pdf.addPage(),this.fillStyle=$,this.strokeStyle=Y,this.font=ae,this.lineCap=fe,this.lineWidth=me,this.lineJoin=Se},M=function($,Y,ae){for(var fe=0;fe<$.length;fe++)switch($[fe].type){case"bct":$[fe].x2+=Y,$[fe].y2+=ae;case"qct":$[fe].x1+=Y,$[fe].y1+=ae;default:$[fe].x+=Y,$[fe].y+=ae}return $},F=function($){return $.sort(function(Y,ae){return Y-ae})},B=function($,Y){for(var ae,fe,me=this.fillStyle,Se=this.strokeStyle,ke=this.lineCap,Ae=this.lineWidth,Fe=Math.abs(Ae*this.ctx.transform.scaleX),He=this.lineJoin,Ze=JSON.parse(JSON.stringify(this.path)),Xe=JSON.parse(JSON.stringify(this.path)),ge=[],le=0;le<Xe.length;le++)if(Xe[le].x!==void 0)for(var at=z.call(this,Xe[le]),dt=0;dt<at.length;dt+=1)ge.indexOf(at[dt])===-1&&ge.push(at[dt]);for(var lt=0;lt<ge.length;lt++)for(;this.pdf.internal.getNumberOfPages()<ge[lt];)T.call(this);if(F(ge),this.autoPaging)for(var $e=ge[0],nt=ge[ge.length-1],tt=$e;tt<nt+1;tt++){this.pdf.setPage(tt),this.fillStyle=me,this.strokeStyle=Se,this.lineCap=ke,this.lineWidth=Fe,this.lineJoin=He;var Jt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],At=tt===1?this.posY+this.margin[0]:this.margin[0],mr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ut=tt===1?0:mr+(tt-2)*zt;if(this.ctx.clip_path.length!==0){var br=this.path;ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(ae,this.posX+this.margin[3],-Ut+At+this.ctx.prevPageLastElemOffset),J.call(this,$,!0),this.path=br}if(fe=JSON.parse(JSON.stringify(Ze)),this.path=M(fe,this.posX+this.margin[3],-Ut+At+this.ctx.prevPageLastElemOffset),Y===!1||tt===0){var Mt=(tt>$e||tt<nt)&&j.call(this);Mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Jt,zt,null).clip().discardPath()),J.call(this,$,Y),Mt&&this.pdf.restoreGraphicsState()}this.lineWidth=Ae}else this.lineWidth=Fe,J.call(this,$,Y),this.lineWidth=Ae;this.path=Ze},J=function($,Y){if(($!=="stroke"||Y||!R.call(this))&&($==="stroke"||Y||!b.call(this))){for(var ae,fe,me=[],Se=this.path,ke=0;ke<Se.length;ke++){var Ae=Se[ke];switch(Ae.type){case"begin":me.push({begin:!0});break;case"close":me.push({close:!0});break;case"mt":me.push({start:Ae,deltas:[],abs:[]});break;case"lt":var Fe=me.length;if(Se[ke-1]&&!isNaN(Se[ke-1].x)&&(ae=[Ae.x-Se[ke-1].x,Ae.y-Se[ke-1].y],Fe>0)){for(;Fe>=0;Fe--)if(me[Fe-1].close!==!0&&me[Fe-1].begin!==!0){me[Fe-1].deltas.push(ae),me[Fe-1].abs.push(Ae);break}}break;case"bct":ae=[Ae.x1-Se[ke-1].x,Ae.y1-Se[ke-1].y,Ae.x2-Se[ke-1].x,Ae.y2-Se[ke-1].y,Ae.x-Se[ke-1].x,Ae.y-Se[ke-1].y],me[me.length-1].deltas.push(ae);break;case"qct":var He=Se[ke-1].x+2/3*(Ae.x1-Se[ke-1].x),Ze=Se[ke-1].y+2/3*(Ae.y1-Se[ke-1].y),Xe=Ae.x+2/3*(Ae.x1-Ae.x),ge=Ae.y+2/3*(Ae.y1-Ae.y),le=Ae.x,at=Ae.y;ae=[He-Se[ke-1].x,Ze-Se[ke-1].y,Xe-Se[ke-1].x,ge-Se[ke-1].y,le-Se[ke-1].x,at-Se[ke-1].y],me[me.length-1].deltas.push(ae);break;case"arc":me.push({deltas:[],abs:[],arc:!0}),Array.isArray(me[me.length-1].abs)&&me[me.length-1].abs.push(Ae)}}fe=Y?null:$==="stroke"?"stroke":"fill";for(var dt=!1,lt=0;lt<me.length;lt++)if(me[lt].arc)for(var $e=me[lt].abs,nt=0;nt<$e.length;nt++){var tt=$e[nt];tt.type==="arc"?A.call(this,tt.x,tt.y,tt.radius,tt.startAngle,tt.endAngle,tt.counterclockwise,void 0,Y,!dt):N.call(this,tt.x,tt.y),dt=!0}else if(me[lt].close===!0)this.pdf.internal.out("h"),dt=!1;else if(me[lt].begin!==!0){var Jt=me[lt].start.x,At=me[lt].start.y;W.call(this,me[lt].deltas,Jt,At),dt=!0}fe&&S.call(this,fe),Y&&V.call(this)}},se=function($){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ae=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return $-ae;case"top":return $+Y-ae;case"hanging":return $+Y-2*ae;case"middle":return $+Y/2-ae;default:return $}},O=function($){return $+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var $=function(){};return $.colorStops=[],$.addColorStop=function(Y,ae){this.colorStops.push([Y,ae])},$.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},$.isCanvasGradient=!0,$},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function($,Y,ae,fe,me,Se,ke,Ae,Fe){for(var He=re.call(this,ae,fe,me,Se),Ze=0;Ze<He.length;Ze++){var Xe=He[Ze];Ze===0&&(Fe?I.call(this,Xe.x1+$,Xe.y1+Y):N.call(this,Xe.x1+$,Xe.y1+Y)),q.call(this,$,Y,Xe.x2,Xe.y2,Xe.x3,Xe.y3,Xe.x4,Xe.y4)}Ae?V.call(this):S.call(this,ke)},S=function($){switch($){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},I=function($,Y){this.pdf.internal.out(t($)+" "+n(Y)+" m")},w=function($){var Y;switch($.align){case"right":case"end":Y="right";break;case"center":Y="center";break;default:Y="left"}var ae=this.pdf.getTextDimensions($.text),fe=se.call(this,$.y),me=O.call(this,fe)-ae.h,Se=this.ctx.transform.applyToPoint(new l($.x,fe)),ke=this.ctx.transform.decompose(),Ae=new h;Ae=(Ae=(Ae=Ae.multiply(ke.translate)).multiply(ke.skew)).multiply(ke.scale);for(var Fe,He,Ze,Xe=this.ctx.transform.applyToRectangle(new d($.x,fe,ae.w,ae.h)),ge=Ae.applyToRectangle(new d($.x,me,ae.w,ae.h)),le=z.call(this,ge),at=[],dt=0;dt<le.length;dt+=1)at.indexOf(le[dt])===-1&&at.push(le[dt]);if(F(at),this.autoPaging)for(var lt=at[0],$e=at[at.length-1],nt=lt;nt<$e+1;nt++){this.pdf.setPage(nt);var tt=nt===1?this.posY+this.margin[0]:this.margin[0],Jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],At=this.pdf.internal.pageSize.height-this.margin[2],mr=At-this.margin[0],zt=this.pdf.internal.pageSize.width-this.margin[1],Ut=zt-this.margin[3],br=nt===1?0:Jt+(nt-2)*mr;if(this.ctx.clip_path.length!==0){var Mt=this.path;Fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(Fe,this.posX+this.margin[3],-1*br+tt),J.call(this,"fill",!0),this.path=Mt}var kt=M([JSON.parse(JSON.stringify(ge))],this.posX+this.margin[3],-br+tt+this.ctx.prevPageLastElemOffset)[0];$.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*$.scale),Ze=this.lineWidth,this.lineWidth=Ze*$.scale);var Pt=this.autoPaging!=="text";if(Pt||kt.y+kt.h<=At){if(Pt||kt.y>=tt&&kt.x<=zt){var xt=Pt?$.text:this.pdf.splitTextToSize($.text,$.maxWidth||zt-kt.x)[0],jr=M([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-br+tt+this.ctx.prevPageLastElemOffset)[0],ir=Pt&&(nt>lt||nt<$e)&&j.call(this);ir&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ut,mr,null).clip().discardPath()),this.pdf.text(xt,jr.x,jr.y,{angle:$.angle,align:Y,renderingMode:$.renderingMode}),ir&&this.pdf.restoreGraphicsState()}}else kt.y<At&&(this.ctx.prevPageLastElemOffset+=At-kt.y);$.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=Ze)}else $.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*$.scale),Ze=this.lineWidth,this.lineWidth=Ze*$.scale),this.pdf.text($.text,Se.x+this.posX,Se.y+this.posY,{angle:$.angle,align:Y,renderingMode:$.renderingMode,maxWidth:$.maxWidth}),$.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=Ze)},N=function($,Y,ae,fe){ae=ae||0,fe=fe||0,this.pdf.internal.out(t($+ae)+" "+n(Y+fe)+" l")},W=function($,Y,ae){return this.pdf.lines($,Y,ae,null,null)},q=function($,Y,ae,fe,me,Se,ke,Ae){this.pdf.internal.out([e(o(ae+$)),e(s(fe+Y)),e(o(me+$)),e(s(Se+Y)),e(o(ke+$)),e(s(Ae+Y)),"c"].join(" "))},re=function($,Y,ae,fe){for(var me=2*Math.PI,Se=Math.PI/2;Y>ae;)Y-=me;var ke=Math.abs(ae-Y);ke<me&&fe&&(ke=me-ke);for(var Ae=[],Fe=fe?-1:1,He=Y;ke>1e-5;){var Ze=He+Fe*Math.min(ke,Se);Ae.push(Z.call(this,$,He,Ze)),ke-=Math.abs(Ze-He),He=Ze}return Ae},Z=function($,Y,ae){var fe=(ae-Y)/2,me=$*Math.cos(fe),Se=$*Math.sin(fe),ke=me,Ae=-Se,Fe=ke*ke+Ae*Ae,He=Fe+ke*me+Ae*Se,Ze=4/3*(Math.sqrt(2*Fe*He)-He)/(ke*Se-Ae*me),Xe=ke-Ze*Ae,ge=Ae+Ze*ke,le=Xe,at=-ge,dt=fe+Y,lt=Math.cos(dt),$e=Math.sin(dt);return{x1:$*Math.cos(Y),y1:$*Math.sin(Y),x2:Xe*lt-ge*$e,y2:Xe*$e+ge*lt,x3:le*lt-at*$e,y3:le*$e+at*lt,x4:$*Math.cos(ae),y4:$*Math.sin(ae)}},te=function($){return 180*$/Math.PI},ye=function($,Y,ae,fe,me,Se){var ke=$+.5*(ae-$),Ae=Y+.5*(fe-Y),Fe=me+.5*(ae-me),He=Se+.5*(fe-Se),Ze=Math.min($,me,ke,Fe),Xe=Math.max($,me,ke,Fe),ge=Math.min(Y,Se,Ae,He),le=Math.max(Y,Se,Ae,He);return new d(Ze,ge,Xe-Ze,le-ge)},we=function($,Y,ae,fe,me,Se,ke,Ae){var Fe,He,Ze,Xe,ge,le,at,dt,lt,$e,nt,tt,Jt,At,mr=ae-$,zt=fe-Y,Ut=me-ae,br=Se-fe,Mt=ke-me,kt=Ae-Se;for(He=0;He<41;He++)lt=(at=(Ze=$+(Fe=He/40)*mr)+Fe*((ge=ae+Fe*Ut)-Ze))+Fe*(ge+Fe*(me+Fe*Mt-ge)-at),$e=(dt=(Xe=Y+Fe*zt)+Fe*((le=fe+Fe*br)-Xe))+Fe*(le+Fe*(Se+Fe*kt-le)-dt),He==0?(nt=lt,tt=$e,Jt=lt,At=$e):(nt=Math.min(nt,lt),tt=Math.min(tt,$e),Jt=Math.max(Jt,lt),At=Math.max(At,$e));return new d(Math.round(nt),Math.round(tt),Math.round(Jt-nt),Math.round(At-tt))},ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var $,Y,ae=($=this.ctx.lineDash,Y=this.ctx.lineDashOffset,JSON.stringify({lineDash:$,lineDashOffset:Y}));this.prevLineDash!==ae&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ae)}}})(It.API),(function(r){var e=function(l){var d,h,u,g,y,_,b,R,j,z;for(h=[],u=0,g=(l+=d="\0\0\0\0".slice(l.length%4||4)).length;g>u;u+=4)(y=(l.charCodeAt(u)<<24)+(l.charCodeAt(u+1)<<16)+(l.charCodeAt(u+2)<<8)+l.charCodeAt(u+3))!==0?(_=(y=((y=((y=((y=(y-(z=y%85))/85)-(j=y%85))/85)-(R=y%85))/85)-(b=y%85))/85)%85,h.push(_+33,b+33,R+33,j+33,z+33)):h.push(122);return(function(T,M){for(var F=M;F>0;F--)T.pop()})(h,d.length),String.fromCharCode.apply(String,h)+"~>"},t=function(l){var d,h,u,g,y,_=String,b="length",R=255,j="charCodeAt",z="slice",T="replace";for(l[z](-2),l=l[z](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),u=[],g=0,y=(l+=d="uuuuu"[z](l[b]%5||5))[b];y>g;g+=5)h=52200625*(l[j](g)-33)+614125*(l[j](g+1)-33)+7225*(l[j](g+2)-33)+85*(l[j](g+3)-33)+(l[j](g+4)-33),u.push(R&h>>24,R&h>>16,R&h>>8,R&h);return(function(M,F){for(var B=F;B>0;B--)M.pop()})(u,d[b]),_.fromCharCode.apply(_,u)},n=function(l){return l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">"},o=function(l){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),d.test(l)===!1)return"";for(var h="",u=0;u<l.length;u+=2)h+=String.fromCharCode("0x"+(l[u]+l[u+1]));return h},s=function(l){for(var d=new Uint8Array(l.length),h=l.length;h--;)d[h]=l.charCodeAt(h);return(d=y1(d)).reduce(function(u,g){return u+String.fromCharCode(g)},"")};r.processDataByFilters=function(l,d){var h=0,u=l||"",g=[];for(typeof(d=d||[])=="string"&&(d=[d]),h=0;h<d.length;h+=1)switch(d[h]){case"ASCII85Decode":case"/ASCII85Decode":u=t(u),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=o(u),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[h]+'" is not implemented')}return{data:u,reverseChain:g.reverse().join(" ")}}})(It.API),(function(r){r.loadFile=function(e,t,n){return(function(o,s,l){s=s!==!1,l=typeof l=="function"?l:function(){};var d=void 0;try{d=(function(h,u,g){var y=new XMLHttpRequest,_=0,b=function(R){var j=R.length,z=[],T=String.fromCharCode;for(_=0;_<j;_+=1)z.push(T(255&R.charCodeAt(_)));return z.join("")};if(y.open("GET",h,!u),y.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(y.onload=function(){y.status===200?g(b(this.responseText)):g(void 0)}),y.send(null),u&&y.status===200)return b(y.responseText)})(o,s,l)}catch{}return d})(e,t,n)},r.loadImageFile=r.loadFile})(It.API),(function(r){function e(){return(Qt.html2canvas?Promise.resolve(Qt.html2canvas):wc(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function t(){return(Qt.DOMPurify?Promise.resolve(Qt.DOMPurify):wc(()=>import("./purify.es-aGzT-_H7.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var n=function(d){var h=Kr(d);return h==="undefined"?"undefined":h==="string"||d instanceof String?"string":h==="number"||d instanceof Number?"number":h==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":h==="object"?"object":"unknown"},o=function(d,h){var u=document.createElement(d);for(var g in h.className&&(u.className=h.className),h.innerHTML&&h.dompurify&&(u.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)u.style[g]=h.style[g];return u},s=function d(h,u){for(var g=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),y=h.firstChild;y;y=y.nextSibling)u!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||g.appendChild(d(y,u));return h.nodeType===1&&(h.nodeName==="CANVAS"?(g.width=h.width,g.height=h.height,g.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(g.value=h.value),g.addEventListener("load",function(){g.scrollTop=h.scrollTop,g.scrollLeft=h.scrollLeft},!0)),g},l=function d(h){var u=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),g=d.convert(Promise.resolve(),u);return(g=g.setProgress(1,d,1,[d])).set(h)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(d,h){return d.__proto__=h||l.prototype,d},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(d,h){return this.then(function(){switch(h=h||(function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(d),h){case"string":return this.then(t).then(function(u){return this.set({src:o("div",{innerHTML:d,dompurify:u})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},l.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(h){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,h(this.prop.container,u)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(h){var u=this.opt.jsPDF,g=this.opt.fontFaces,y=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,_=Object.assign({async:!0,allowTaint:!0,scale:y,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete _.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=g,g)for(var b=0;b<g.length;++b){var R=g[b],j=R.src.find(function(z){return z.format==="truetype"});j&&u.addFont(j.url,R.ref.name,R.ref.style)}return _.windowHeight=_.windowHeight||0,_.windowHeight=_.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):_.windowHeight,u.context2d.save(!0),h(this.prop.container,_)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(d,h,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(d,h):this.outputPdf(d,h)},l.prototype.outputPdf=function(d,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,h)})},l.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},l.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(d){if(n(d)!=="object")return this;var h=Object.keys(d||{}).map(function(u){if(u in l.template.prop)return function(){this.prop[u]=d[u]};switch(u){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[u]=d[u]}}},this);return this.then(function(){return this.thenList(h)})},l.prototype.get=function(d,h){return this.then(function(){var u=d in l.template.prop?this.prop[d]:this.opt[d];return h?h(u):u})},l.prototype.setMargin=function(d){return this.then(function(){switch(n(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},l.prototype.setPageSize=function(d){function h(u,g){return Math.floor(u*g/72*96)}return this.then(function(){(d=d||It.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:h(d.inner.width,d.k),height:h(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},l.prototype.setProgress=function(d,h,u,g){return d!=null&&(this.progress.val=d),h!=null&&(this.progress.state=h),u!=null&&(this.progress.n=u),g!=null&&(this.progress.stack=g),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(d,h,u,g){return this.setProgress(d?this.progress.val+d:null,h||null,u?this.progress.n+u:null,g?this.progress.stack.concat(g):null)},l.prototype.then=function(d,h){var u=this;return this.thenCore(d,h,function(g,y){return u.updateProgress(null,null,1,[g]),Promise.prototype.then.call(this,function(_){return u.updateProgress(null,g),_}).then(g,y).then(function(_){return u.updateProgress(1),_})})},l.prototype.thenCore=function(d,h,u){u=u||Promise.prototype.then;var g=this;d&&(d=d.bind(g)),h&&(h=h.bind(g));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?g:l.convert(Object.assign({},g),Promise.prototype),_=u.call(y,d,h);return l.convert(_,g.__proto__)},l.prototype.thenExternal=function(d,h){return Promise.prototype.then.call(this,d,h)},l.prototype.thenList=function(d){var h=this;return d.forEach(function(u){h=h.thenCore(u)}),h},l.prototype.catch=function(d){d&&(d=d.bind(this));var h=Promise.prototype.catch.call(this,d);return l.convert(h,this)},l.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},l.prototype.error=function(d){return this.then(function(){throw new Error(d)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,It.getPageSize=function(d,h,u){if(Kr(d)==="object"){var g=d;d=g.orientation,h=g.unit||h,u=g.format||u}h=h||"mm",u=u||"a4",d=(""+(d||"P")).toLowerCase();var y,_=(""+u).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":y=1;break;case"mm":y=72/25.4;break;case"cm":y=72/2.54;break;case"in":y=72;break;case"px":y=.75;break;case"pc":case"em":y=12;break;case"ex":y=6;break;default:throw"Invalid unit: "+h}var R,j=0,z=0;if(b.hasOwnProperty(_))j=b[_][1]/y,z=b[_][0]/y;else try{j=u[1],z=u[0]}catch{throw new Error("Invalid format: "+u)}if(d==="p"||d==="portrait")d="p",z>j&&(R=z,z=j,j=R);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",j>z&&(R=z,z=j,j=R)}return{width:z,height:j,unit:h,k:y,orientation:d}},r.html=function(d,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(Hg):null;var u=new l(h);return h.worker?u:u.from(d).doCallback()}})(It.API),It.API.addJS=function(r){return F2=r,this.internal.events.subscribe("postPutResources",function(){Wp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Wp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),L2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+F2+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Wp!==void 0&&L2!==void 0&&this.internal.out("/Names <</JavaScript "+Wp+" 0 R>>")}),this},(function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=t.outline.render().split(/\r\n/),s=0;s<o.length;s++){var l=o[s],d=n.exec(l);if(d!=null){var h=d[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(l)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,g=[];for(s=0;s<u;s++){var y=t.internal.newObject();g.push(y);var _=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+_.objId+" 0 R /XYZ null null null]>> endobj")}var b=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<g.length;s++)t.internal.write("(page_"+(s+1)+")"+g[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+b+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,o,s){var l={title:o,options:s,children:[]};return n==null&&(n=this.root),n.children.push(l),l},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var o=0;o<n.children.length;o++)this.genIds_r(n.children[o])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var l=n.children[s];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var d=this.count=this.count_r({count:0},l);if(d>0&&this.line("/Count "+d),l.options&&l.options.pageNumber){var h=t.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,o){for(var s=0;s<o.children.length;s++)n.count++,this.count_r(n,o.children[s]);return n.count}}])})(It.API),(function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,o,s,l,d){var h,u=this.decode.DCT_DECODE,g=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=l||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,h=(function(y){for(var _,b=256*y.charCodeAt(4)+y.charCodeAt(5),R=y.length,j={width:0,height:0,numcomponents:1},z=4;z<R;z+=2){if(z+=b,e.indexOf(y.charCodeAt(z+1))!==-1){_=256*y.charCodeAt(z+5)+y.charCodeAt(z+6),j={width:256*y.charCodeAt(z+7)+y.charCodeAt(z+8),height:_,numcomponents:y.charCodeAt(z+9)};break}b=256*y.charCodeAt(z+2)+y.charCodeAt(z+3)}return j})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),h.numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}g={data:t,width:h.width,height:h.height,colorSpace:d,bitsPerComponent:8,filter:u,index:n,alias:o}}return g}})(It.API),It.API.processPNG=function(r,e,t,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var o,s=Vk(r,{checkCrc:!0}),l=s.width,d=s.height,h=s.channels,u=s.palette,g=s.depth;o=u&&h===1?(function(A){for(var S=A.width,V=A.height,I=A.data,w=A.palette,N=A.depth,W=!1,q=[],re=[],Z=void 0,te=!1,ye=0,we=0;we<w.length;we++){var ie=My(w[we],4),$=ie[0],Y=ie[1],ae=ie[2],fe=ie[3];q.push($,Y,ae),fe!=null&&(fe===0?(ye++,re.length<1&&re.push(we)):fe<255&&(te=!0))}if(te||ye>1){W=!0,re=void 0;var me=S*V;Z=new Uint8Array(me);for(var Se=new DataView(I.buffer),ke=0;ke<me;ke++){var Ae=Kg(Se,ke,N),Fe=My(w[Ae],4)[3];Z[ke]=Fe}}else ye===0&&(re=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:W?8:void 0,colorBytes:I,alphaBytes:Z,needSMask:W,palette:q,mask:re}})(s):h===2||h===4?(function(A){for(var S=A.data,V=A.width,I=A.height,w=A.channels,N=A.depth,W=w===2?"DeviceGray":"DeviceRGB",q=w-1,re=V*I,Z=q,te=re*Z,ye=1*re,we=Math.ceil(te*N/8),ie=Math.ceil(ye*N/8),$=new Uint8Array(we),Y=new Uint8Array(ie),ae=new DataView(S.buffer),fe=new DataView($.buffer),me=new DataView(Y.buffer),Se=!1,ke=0;ke<re;ke++){for(var Ae=ke*w,Fe=0;Fe<Z;Fe++)U2(fe,Kg(ae,Ae+Fe,N),ke*Z+Fe,N);var He=Kg(ae,Ae+Z,N);He<(1<<N)-1&&(Se=!0),U2(me,He,1*ke,N)}return{colorSpace:W,colorsPerPixel:q,sMaskBitsPerComponent:Se?N:void 0,colorBytes:$,alphaBytes:Y,needSMask:Se}})(s):(function(A){var S=A.data,V=A.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:V,colorsPerPixel:V==="DeviceGray"?1:3,colorBytes:S instanceof Uint16Array?(function(I){for(var w=I.length,N=new Uint8Array(2*w),W=new DataView(N.buffer,N.byteOffset,N.byteLength),q=0;q<w;q++)W.setUint16(2*q,I[q],!1);return N})(S):S,needSMask:!1}})(s);var y,_,b,R=o,j=R.colorSpace,z=R.colorsPerPixel,T=R.sMaskBitsPerComponent,M=R.colorBytes,F=R.alphaBytes,B=R.needSMask,J=R.palette,se=R.mask,O=null;return n!==It.API.image_compression.NONE&&typeof y1=="function"?(O=(function(A){var S;switch(A){case It.API.image_compression.FAST:S=11;break;case It.API.image_compression.MEDIUM:S=13;break;case It.API.image_compression.SLOW:S=14;break;default:S=12}return S})(n),y=this.decode.FLATE_DECODE,_="/Predictor ".concat(O," /Colors ").concat(z," /BitsPerComponent ").concat(g," /Columns ").concat(l),r=M2(M,Math.ceil(l*z*g/8),z,g,n),B&&(b=M2(F,Math.ceil(l*T/8),1,T,n))):(y=void 0,_=void 0,r=M,B&&(b=F)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:t,data:r,index:e,filter:y,decodeParameters:_,transparency:se,palette:J,sMask:b,predictor:O,width:l,height:d,bitsPerComponent:g,sMaskBitsPerComponent:T,colorSpace:j}}},(function(r){r.processGIF89A=function(e,t,n,o){var s=new oj(e),l=s.width,d=s.height,h=[];s.decodeAndBlitFrameRGBA(0,h);var u={data:h,width:l,height:d},g=new Jg(100).encode(u,100);return r.processJPEG.call(this,g,t,n,o)},r.processGIF87A=r.processGIF89A})(It.API),ma.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:n,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ma.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){on.log("bit decode error:"+t)}},ma.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,o=0;o<e;o++)for(var s=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+8*o*4,d=0;d<8&&8*o+d<this.width;d++){var h=this.palette[s>>7-d&1];this.data[l+4*d]=h.blue,this.data[l+4*d+1]=h.green,this.data[l+4*d+2]=h.red,this.data[l+4*d+3]=255}t!==0&&(this.pos+=4-t)}},ma.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,o=0;o<r;o++){var s=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+2*o*4,d=s>>4,h=15&s,u=this.palette[d];if(this.data[l]=u.blue,this.data[l+1]=u.green,this.data[l+2]=u.red,this.data[l+3]=255,2*o+1>=this.width)break;u=this.palette[h],this.data[l+4]=u.blue,this.data[l+4+1]=u.green,this.data[l+4+2]=u.red,this.data[l+4+3]=255}e!==0&&(this.pos+=4-e)}},ma.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var o=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;if(o<this.palette.length){var l=this.palette[o];this.data[s]=l.red,this.data[s+1]=l.green,this.data[s+2]=l.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}r!==0&&(this.pos+=4-r)}},ma.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(s&e)/e*255|0,d=(s>>5&e)/e*255|0,h=(s>>10&e)/e*255|0,u=s>>15?255:0,g=n*this.width*4+4*o;this.data[g]=h,this.data[g+1]=d,this.data[g+2]=l,this.data[g+3]=u}this.pos+=r}},ma.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var o=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(l&e)/e*255|0,h=(l>>5&t)/t*255|0,u=(l>>11)/e*255|0,g=o*this.width*4+4*s;this.data[g]=u,this.data[g+1]=h,this.data[g+2]=d,this.data[g+3]=255}this.pos+=r}},ma.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*t;this.data[l]=s,this.data[l+1]=o,this.data[l+2]=n,this.data[l+3]=255}this.pos+=this.width%4}},ma.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*t;this.data[d]=s,this.data[d+1]=o,this.data[d+2]=n,this.data[d+3]=l}},ma.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(e,t,n,o){var s=new ma(e,!1),l=s.width,d=s.height,h={data:s.getData(),width:l,height:d},u=new Jg(100).encode(h,100);return r.processJPEG.call(this,u,t,n,o)}})(It.API),G2.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(e,t,n,o){var s=new G2(e),l=s.width,d=s.height,h={data:s.getData(),width:l,height:d},u=new Jg(100).encode(h,100);return r.processJPEG.call(this,u,t,n,o)}})(It.API),It.API.processRGBA=function(r,e,t){for(var n=r.data,o=n.length,s=new Uint8Array(o/4*3),l=new Uint8Array(o/4),d=0,h=0,u=0;u<o;u+=4){var g=n[u],y=n[u+1],_=n[u+2],b=n[u+3];s[d++]=g,s[d++]=y,s[d++]=_,l[h++]=b}var R=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:R,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},It.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},yu=It.API,$p=yu.getCharWidthsArray=function(r,e){var t,n,o=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),l=e.charSpace||this.internal.getCharSpace(),d=e.widths?e.widths:o.metadata.Unicode.widths,h=d.fof?d.fof:1,u=e.kerning?e.kerning:o.metadata.Unicode.kerning,g=u.fof?u.fof:1,y=e.doKerning!==!1,_=0,b=r.length,R=0,j=d[0]||h,z=[];for(t=0;t<b;t++)n=r.charCodeAt(t),typeof o.metadata.widthOfString=="function"?z.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(n))+l*(1e3/s)||0)/1e3):(_=y&&Kr(u[n])==="object"&&!isNaN(parseInt(u[n][R],10))?u[n][R]/g:0,z.push((d[n]||j)/h+_)),R=n;return z},z2=yu.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return yu.processArabic&&(r=yu.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,o)/t:$p.apply(this,arguments).reduce(function(s,l){return s+l},0)},V2=function(r,e,t,n){for(var o=[],s=0,l=r.length,d=0;s!==l&&d+e[s]<t;)d+=e[s],s++;o.push(r.slice(0,s));var h=s;for(d=0;s!==l;)d+e[s]>n&&(o.push(r.slice(h,s)),d=0,h=s),d+=e[s],s++;return h!==s&&o.push(r.slice(h,s)),o},O2=function(r,e,t){t||(t={});var n,o,s,l,d,h,u,g=[],y=[g],_=t.textIndent||0,b=0,R=0,j=r.split(" "),z=$p.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?j[0].length+2:t.lineIndent||0){var T=Array(h).join(" "),M=[];j.map(function(B){(B=B.split(/\s*\n/)).length>1?M=M.concat(B.map(function(J,se){return(se&&J.length?`
`:"")+J})):M.push(B[0])}),j=M,h=z2.apply(this,[T,t])}for(s=0,l=j.length;s<l;s++){var F=0;if(n=j[s],h&&n[0]==`
`&&(n=n.substr(1),F=1),_+b+(R=(o=$p.apply(this,[n,t])).reduce(function(B,J){return B+J},0))>e||F){if(R>e){for(d=V2.apply(this,[n,o,e-(_+b),e]),g.push(d.shift()),g=[d.pop()];d.length;)y.push([d.shift()]);R=o.slice(n.length-(g[0]?g[0].length:0)).reduce(function(B,J){return B+J},0)}else g=[n];y.push(g),_=R+h,b=z}else g.push(n),_+=b+R,b=z}return u=h?function(B,J){return(J?T:"")+B.join(" ")}:function(B){return B.join(" ")},y.map(u)},yu.splitTextToSize=function(r,e,t){var n,o=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var y=this.internal.getFont(g.fontName,g.fontStyle),_="Unicode";return y.metadata[_]?{widths:y.metadata[_].widths||{0:1},kerning:y.metadata[_].kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var l=1*this.internal.scaleFactor*e/o;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/o:0,s.lineIndent=t.lineIndent;var d,h,u=[];for(d=0,h=n.length;d<h;d++)u=u.concat(O2.apply(this,[n[d],l,s]));return u},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",n={},o={},s=0;s<16;s++)n[t[s]]=e[s],o[e[s]]=t[s];var l=function(_){return"0x"+parseInt(_,10).toString(16)},d=r.__fontmetrics__.compress=function(_){var b,R,j,z,T=["{"];for(var M in _){if(b=_[M],isNaN(parseInt(M,10))?R="'"+M+"'":(M=parseInt(M,10),R=(R=l(M).slice(2)).slice(0,-1)+o[R.slice(-1)]),typeof b=="number")b<0?(j=l(b).slice(3),z="-"):(j=l(b).slice(2),z=""),j=z+j.slice(0,-1)+o[j.slice(-1)];else{if(Kr(b)!=="object")throw new Error("Don't know what to do with value type "+Kr(b)+".");j=d(b)}T.push(R+j)}return T.push("}"),T.join("")},h=r.__fontmetrics__.uncompress=function(_){if(typeof _!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,R,j,z,T={},M=1,F=T,B=[],J="",se="",O=_.length-1,A=1;A<O;A+=1)(z=_[A])=="'"?b?(j=b.join(""),b=void 0):b=[]:b?b.push(z):z=="{"?(B.push([F,j]),F={},j=void 0):z=="}"?((R=B.pop())[0][R[1]]=F,j=void 0,F=R[0]):z=="-"?M=-1:j===void 0?n.hasOwnProperty(z)?(J+=n[z],j=parseInt(J,16)*M,M=1,J=""):J+=z:n.hasOwnProperty(z)?(se+=n[z],F[j]=parseInt(se,16)*M,M=1,j=void 0,se=""):se+=z;return T},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},y={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(_){var b=_.font,R=y.Unicode[b.postScriptName];R&&(b.metadata.Unicode={},b.metadata.Unicode.widths=R.widths,b.metadata.Unicode.kerning=R.kerning);var j=g.Unicode[b.postScriptName];j&&(b.metadata.Unicode.encoding=j,b.encoding=j.codePages[0])}])})(It.API),(function(r){var e=function(t){for(var n=t.length,o=new Uint8Array(n),s=0;s<n;s++)o[s]=t.charCodeAt(s);return o};r.API.events.push(["addFont",function(t){var n=void 0,o=t.font,s=t.instance;if(!o.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(n=s.existsFileInVFS(o.postScriptName)===!1?s.loadFile(o.postScriptName):s.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(l,d){d=/^\x00\x01\x00\x00/.test(d)?e(d):e(tm(d)),l.metadata=r.API.TTFFont.open(d),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(o,n)}}])})(It),It.API.addSvgAsImage=function(r,e,t,n,o,s,l,d){if(isNaN(e)||isNaN(t))throw on.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(o))throw on.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=n,h.height=o;var u=h.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,h.width,h.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},y=this;return(Qt.canvg?Promise.resolve(Qt.canvg):wc(()=>import("./index.es-CEtTR5er.js"),[])).catch(function(_){return Promise.reject(new Error("Could not load canvg: "+_))}).then(function(_){return _.default?_.default:_}).then(function(_){return _.fromString(u,r,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(g)}).then(function(){y.addImage(h.toDataURL("image/jpeg",1),e,t,n,o,l,d)})},It.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var o=0;o<this.internal.pages[n].length;o++)this.internal.pages[n][o]=this.internal.pages[n][o].replace(e,t);return this},It.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,o,s,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(l),h=[],u=0,g=0,y=0;function _(R,j){var z,T=!1;for(z=0;z<R.length;z+=1)R[z]===j&&(T=!0);return T}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var b=d.length;for(y=0;y<b;y+=1)t[d[y]].value=t[d[y]].defaultValue,t[d[y]].explicitSet=!1}if(Kr(r)==="object"){for(o in r)if(s=r[o],_(d,o)&&s!==void 0){if(t[o].type==="boolean"&&typeof s=="boolean")t[o].value=s;else if(t[o].type==="name"&&_(t[o].valueSet,s))t[o].value=s;else if(t[o].type==="integer"&&Number.isInteger(s))t[o].value=s;else if(t[o].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")h.push(String(s[u]-1));else if(s[u].length>1){for(g=0;g<s[u].length;g+=1)typeof s[u][g]!="number"&&(n=!1);n===!0&&h.push([s[u][0]-1,s[u][1]-1].join(" "))}t[o].value="["+h.join(" ")+"]"}else t[o].value=t[o].defaultValue;t[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var R,j=[];for(R in t)t[R].explicitSet===!0&&(t[R].type==="name"?j.push("/"+R+" /"+t[R].value):j.push("/"+R+" "+t[R].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+l.length+d.length+o.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(o+s+l+d+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(It.API),(function(r){var e=r.API,t=e.pdfEscape16=function(s,l){for(var d,h=l.metadata.Unicode.widths,u=["","0","00","000","0000"],g=[""],y=0,_=s.length;y<_;++y){if(d=l.metadata.characterToGlyph(s.charCodeAt(y)),l.metadata.glyIdsUsed.push(d),l.metadata.toUnicode[d]=s.charCodeAt(y),h.indexOf(d)==-1&&(h.push(d),h.push([parseInt(l.metadata.widthOfGlyph(d),10)])),d=="0")return g.join("");d=d.toString(16),g.push(u[4-d.length],d)}return g.join("")},n=function(s){var l,d,h,u,g,y,_;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],y=0,_=(d=Object.keys(s).sort(function(b,R){return b-R})).length;y<_;y++)l=d[y],h.length>=100&&(g+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),s[l]!==void 0&&s[l]!==null&&typeof s[l].toString=="function"&&(u=("0000"+s[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),h.push("<"+l+"><"+u+">"));return h.length&&(g+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),g+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(l){var d=l.font,h=l.out,u=l.newObject,g=l.putStream;if(d.metadata instanceof r.API.TTFFont&&d.encoding==="Identity-H"){for(var y=d.metadata.Unicode.widths,_=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),b="",R=0;R<_.length;R++)b+=String.fromCharCode(_[R]);var j=u();g({data:b,addLength1:!0,objectId:j}),h("endobj");var z=u();g({data:n(d.metadata.toUnicode),addLength1:!0,objectId:z}),h("endobj");var T=u();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+Au(d.fontName)),h("/FontFile2 "+j+" 0 R"),h("/FontBBox "+r.API.PDFObject.convert(d.metadata.bbox)),h("/Flags "+d.metadata.flags),h("/StemV "+d.metadata.stemV),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h(">>"),h("endobj");var M=u();h("<<"),h("/Type /Font"),h("/BaseFont /"+Au(d.fontName)),h("/FontDescriptor "+T+" 0 R"),h("/W "+r.API.PDFObject.convert(y)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+d.encoding+")"),h(">>"),h(">>"),h("endobj"),d.objectNumber=u(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+z+" 0 R"),h("/BaseFont /"+Au(d.fontName)),h("/Encoding /"+d.encoding),h("/DescendantFonts ["+M+" 0 R]"),h(">>"),h("endobj"),d.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(l){var d=l.font,h=l.out,u=l.newObject,g=l.putStream;if(d.metadata instanceof r.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var y=d.metadata.rawData,_="",b=0;b<y.length;b++)_+=String.fromCharCode(y[b]);var R=u();g({data:_,addLength1:!0,objectId:R}),h("endobj");var j=u();g({data:n(d.metadata.toUnicode),addLength1:!0,objectId:j}),h("endobj");var z=u();h("<<"),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h("/StemV "+d.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+R+" 0 R"),h("/Flags 96"),h("/FontBBox "+r.API.PDFObject.convert(d.metadata.bbox)),h("/FontName /"+Au(d.fontName)),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h(">>"),h("endobj"),d.objectNumber=u();for(var T=0;T<d.metadata.hmtx.widths.length;T++)d.metadata.hmtx.widths[T]=parseInt(d.metadata.hmtx.widths[T]*(1e3/d.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+Au(d.fontName)+"/FontDescriptor "+z+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),h("endobj"),d.isAlreadyPutted=!0}})(s)}]);var o=function(s){var l,d=s.text||"",h=s.x,u=s.y,g=s.options||{},y=s.mutex||{},_=y.pdfEscape,b=y.activeFontKey,R=y.fonts,j=b,z="",T=0,M="",F=R[j].encoding;if(R[j].encoding!=="Identity-H")return{text:d,x:h,y:u,options:g,mutex:y};for(M=d,j=b,Array.isArray(d)&&(M=d[0]),T=0;T<M.length;T+=1)R[j].metadata.hasOwnProperty("cmap")&&(l=R[j].metadata.cmap.unicode.codeMap[M[T].charCodeAt(0)]),l||M[T].charCodeAt(0)<256&&R[j].metadata.hasOwnProperty("Unicode")?z+=M[T]:z+="";var B="";return parseInt(j.slice(1))<14||F==="WinAnsiEncoding"?B=_(z,j).split("").map(function(J){return J.charCodeAt(0).toString(16)}).join(""):F==="Identity-H"&&(B=t(z,R[j])),y.isHex=!0,{text:B,x:h,y:u,options:g,mutex:y}};e.events.push(["postProcessText",function(s){var l=s.text||"",d=[],h={text:l,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(l)){var u=0;for(u=0;u<l.length;u+=1)Array.isArray(l[u])&&l[u].length===3?d.push([o(Object.assign({},h,{text:l[u][0]})).text,l[u][1],l[u][2]]):d.push(o(Object.assign({},h,{text:l[u]})).text);s.text=d}else s.text=o(Object.assign({},h,{text:l})).text}])})(It),(function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(It.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var o,s,l,d,h,u,g,y=e,_=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],R={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},z=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],T=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),M=!1,F=0;this.__bidiEngine__={};var B=function(I){var w=I.charCodeAt(),N=w>>8,W=j[N];return W!==void 0?y[256*W+(255&w)]:N===252||N===253?"AL":T.test(N)?"L":N===8?"R":"N"},J=function(I){for(var w,N=0;N<I.length;N++){if((w=B(I.charAt(N)))==="L")return!1;if(w==="R")return!0}return!1},se=function(I,w,N,W){var q,re,Z,te,ye=w[W];switch(ye){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":M=!1;break;case"N":case"AN":break;case"EN":M&&(ye="AN");break;case"AL":M=!0,ye="R";break;case"WS":case"BN":ye="N";break;case"CS":W<1||W+1>=w.length||(q=N[W-1])!=="EN"&&q!=="AN"||(re=w[W+1])!=="EN"&&re!=="AN"?ye="N":M&&(re="AN"),ye=re===q?re:"N";break;case"ES":ye=(q=W>0?N[W-1]:"B")==="EN"&&W+1<w.length&&w[W+1]==="EN"?"EN":"N";break;case"ET":if(W>0&&N[W-1]==="EN"){ye="EN";break}if(M){ye="N";break}for(Z=W+1,te=w.length;Z<te&&w[Z]==="ET";)Z++;ye=Z<te&&w[Z]==="EN"?"EN":"N";break;case"NSM":if(l&&!d){for(te=w.length,Z=W+1;Z<te&&w[Z]==="NSM";)Z++;if(Z<te){var we=I[W],ie=we>=1425&&we<=2303||we===64286;if(q=w[Z],ie&&(q==="R"||q==="AL")){ye="R";break}}}ye=W<1||(q=w[W-1])==="B"?"N":N[W-1];break;case"B":M=!1,o=!0,ye=F;break;case"S":s=!0,ye="N"}return ye},O=function(I,w,N){var W=I.split("");return N&&A(W,N,{hiLevel:F}),W.reverse(),w&&w.reverse(),W.join("")},A=function(I,w,N){var W,q,re,Z,te,ye=-1,we=I.length,ie=0,$=[],Y=F?b:_,ae=[];for(M=!1,o=!1,s=!1,q=0;q<we;q++)ae[q]=B(I[q]);for(re=0;re<we;re++){if(te=ie,$[re]=se(I,ae,$,re),W=240&(ie=Y[te][R[$[re]]]),ie&=15,w[re]=Z=Y[ie][5],W>0)if(W===16){for(q=ye;q<re;q++)w[q]=1;ye=-1}else ye=-1;if(Y[ie][6])ye===-1&&(ye=re);else if(ye>-1){for(q=ye;q<re;q++)w[q]=Z;ye=-1}ae[re]==="B"&&(w[re]=0),N.hiLevel|=Z}s&&(function(fe,me,Se){for(var ke=0;ke<Se;ke++)if(fe[ke]==="S"){me[ke]=F;for(var Ae=ke-1;Ae>=0&&fe[Ae]==="WS";Ae--)me[Ae]=F}})(ae,w,we)},S=function(I,w,N,W,q){if(!(q.hiLevel<I)){if(I===1&&F===1&&!o)return w.reverse(),void(N&&N.reverse());for(var re,Z,te,ye,we=w.length,ie=0;ie<we;){if(W[ie]>=I){for(te=ie+1;te<we&&W[te]>=I;)te++;for(ye=ie,Z=te-1;ye<Z;ye++,Z--)re=w[ye],w[ye]=w[Z],w[Z]=re,N&&(re=N[ye],N[ye]=N[Z],N[Z]=re);ie=te}ie++}}},V=function(I,w,N){var W=I.split(""),q={hiLevel:F};return N||(N=[]),A(W,N,q),(function(re,Z,te){if(te.hiLevel!==0&&g)for(var ye,we=0;we<re.length;we++)Z[we]===1&&(ye=z.indexOf(re[we]))>=0&&(re[we]=z[ye+1])})(W,N,q),S(2,W,w,N,q),S(1,W,w,N,q),W.join("")};return this.__bidiEngine__.doBidiReorder=function(I,w,N){if((function(q,re){if(re)for(var Z=0;Z<q.length;Z++)re[Z]=Z;d===void 0&&(d=J(q)),u===void 0&&(u=J(q))})(I,w),l||!h||u)if(l&&h&&d^u)F=d?1:0,I=O(I,w,N);else if(!l&&h&&u)F=d?1:0,I=V(I,w,N),I=O(I,w);else if(!l||d||h||u){if(l&&!h&&d^u)I=O(I,w),d?(F=0,I=V(I,w,N)):(F=1,I=V(I,w,N),I=O(I,w));else if(l&&d&&!h&&u)F=1,I=V(I,w,N),I=O(I,w);else if(!l&&!h&&d^u){var W=g;d?(F=1,I=V(I,w,N),F=0,g=!1,I=V(I,w,N),g=W):(F=0,I=V(I,w,N),I=O(I,w),F=1,g=!1,I=V(I,w,N),g=W,I=O(I,w))}}else F=0,I=V(I,w,N);else F=d?1:0,I=V(I,w,N);return I},this.__bidiEngine__.setOptions=function(I){I&&(l=I.isInputVisual,h=I.isOutputVisual,d=I.isInputRtl,u=I.isOutputRtl,g=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var o=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var l=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(o)==="[object Array]"){var d=0;for(l=[],d=0;d<o.length;d+=1)Object.prototype.toString.call(o[d])==="[object Array]"?l.push([t.doBidiReorder(o[d][0]),o[d][1],o[d][2]]):l.push([t.doBidiReorder(o[d])]);n.text=l}else n.text=t.doBidiReorder(o);t.setOptions({isInputVisual:!0})}])})(It),It.API.TTFFont=(function(){function r(e){var t;if(this.rawData=e,t=this.contents=new Lc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new vj(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new sj(this.contents),this.head=new lj(this),this.name=new fj(this),this.cmap=new jS(this),this.toUnicode={},this.hhea=new cj(this),this.maxp=new pj(this),this.hmtx=new mj(this),this.post=new uj(this),this.os2=new dj(this),this.loca=new bj(this),this.glyf=new gj(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,o,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,d,h,u;for(u=[],l=0,d=(h=this.bbox).length;l<d;l++)e=h[l],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(o=this.post.italic_angle),32768&(t=o>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var o,s,l,d;for(l=0,s=0,d=(e=""+e).length;0<=d?s<d:s>d;s=0<=d?++s:--s)o=e.charCodeAt(s),l+=this.widthOfGlyph(this.characterToGlyph(o))+n*(1e3/t)||0;return l*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r})();var Sa,Lc=(function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,o;for(o=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)o.push(this.writeByte(e.charCodeAt(t)));return o},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,o,s,l,d,h;return e=this.readByte(),t=this.readByte(),n=this.readByte(),o=this.readByte(),s=this.readByte(),l=this.readByte(),d=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^o)+16777216*(255^s)+65536*(255^l)+256*(255^d)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*o+16777216*s+65536*l+256*d+h},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,o,s;for(s=[],n=0,o=e.length;n<o;n++)t=e[n],s.push(this.writeByte(t));return s},r})(),sj=(function(){var r;function e(t){var n,o,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},o=0,s=this.tableCount;0<=s?o<s:o>s;o=0<=s?++o:--o)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,o,s,l,d,h,u,g,y,_,b,R,j;for(j in b=Object.keys(t).length,h=Math.log(2),y=16*Math.floor(Math.log(b)/h),l=Math.floor(y/h),g=16*b-y,(o=new Lc).writeInt(this.scalarType),o.writeShort(b),o.writeShort(y),o.writeShort(l),o.writeShort(g),s=16*b,u=o.pos+s,d=null,R=[],t)for(_=t[j],o.writeString(j),o.writeInt(r(_)),o.writeInt(u),o.writeInt(_.length),R=R.concat(_),j==="head"&&(d=u),u+=_.length;u%4;)R.push(0),u++;return o.write(R),n=2981146554-r(o.data),o.pos=d+8,o.writeUInt32(n),o.data},r=function(t){var n,o,s,l;for(t=IS.call(t);t.length%4;)t.push(0);for(s=new Lc(t),o=0,n=0,l=t.length;n<l;n=n+=4)o+=s.readUInt32();return 4294967295&o},e})(),aj={}.hasOwnProperty,tl=function(r,e){for(var t in e)aj.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};Sa=(function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var lj=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return tl(r,Sa),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var t;return(t=new Lc).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},r})(),K2=(function(){function r(e,t){var n,o,s,l,d,h,u,g,y,_,b,R,j,z,T,M,F;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),y=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(b=e.readUInt16(),_=b/2,e.pos+=6,s=(function(){var B,J;for(J=[],h=B=0;0<=_?B<_:B>_;h=0<=_?++B:--B)J.push(e.readUInt16());return J})(),e.pos+=2,j=(function(){var B,J;for(J=[],h=B=0;0<=_?B<_:B>_;h=0<=_?++B:--B)J.push(e.readUInt16());return J})(),u=(function(){var B,J;for(J=[],h=B=0;0<=_?B<_:B>_;h=0<=_?++B:--B)J.push(e.readUInt16());return J})(),g=(function(){var B,J;for(J=[],h=B=0;0<=_?B<_:B>_;h=0<=_?++B:--B)J.push(e.readUInt16());return J})(),o=(this.length-e.pos+this.offset)/2,d=(function(){var B,J;for(J=[],h=B=0;0<=o?B<o:B>o;h=0<=o?++B:--B)J.push(e.readUInt16());return J})(),h=T=0,F=s.length;T<F;h=++T)for(z=s[h],n=M=R=j[h];R<=z?M<=z:M>=z;n=R<=z?++M:--M)g[h]===0?l=n+u[h]:(l=d[g[h]/2+(n-R)-(_-h)]||0)!==0&&(l+=u[h]),this.codeMap[n]=65535&l}e.pos=y}return r.encode=function(e,t){var n,o,s,l,d,h,u,g,y,_,b,R,j,z,T,M,F,B,J,se,O,A,S,V,I,w,N,W,q,re,Z,te,ye,we,ie,$,Y,ae,fe,me,Se,ke,Ae,Fe,He,Ze;switch(W=new Lc,l=Object.keys(e).sort(function(Xe,ge){return Xe-ge}),t){case"macroman":for(j=0,z=(function(){var Xe=[];for(R=0;R<256;++R)Xe.push(0);return Xe})(),M={0:0},s={},q=0,ye=l.length;q<ye;q++)M[Ae=e[o=l[q]]]==null&&(M[Ae]=++j),s[o]={old:e[o],new:M[e[o]]},z[o]=M[e[o]];return W.writeUInt16(1),W.writeUInt16(0),W.writeUInt32(12),W.writeUInt16(0),W.writeUInt16(262),W.writeUInt16(0),W.write(z),{charMap:s,subtable:W.data,maxGlyphID:j+1};case"unicode":for(w=[],y=[],F=0,M={},n={},T=u=null,re=0,we=l.length;re<we;re++)M[J=e[o=l[re]]]==null&&(M[J]=++F),n[o]={old:J,new:M[J]},d=M[J]-o,T!=null&&d===u||(T&&y.push(T),w.push(o),u=d),T=o;for(T&&y.push(T),y.push(65535),w.push(65535),V=2*(S=w.length),A=2*Math.pow(Math.log(S)/Math.LN2,2),_=Math.log(A/2)/Math.LN2,O=2*S-A,h=[],se=[],b=[],R=Z=0,ie=w.length;Z<ie;R=++Z){if(I=w[R],g=y[R],I===65535){h.push(0),se.push(0);break}if(I-(N=n[I].new)>=32768)for(h.push(0),se.push(2*(b.length+S-R)),o=te=I;I<=g?te<=g:te>=g;o=I<=g?++te:--te)b.push(n[o].new);else h.push(N-I),se.push(0)}for(W.writeUInt16(3),W.writeUInt16(1),W.writeUInt32(12),W.writeUInt16(4),W.writeUInt16(16+8*S+2*b.length),W.writeUInt16(0),W.writeUInt16(V),W.writeUInt16(A),W.writeUInt16(_),W.writeUInt16(O),Se=0,$=y.length;Se<$;Se++)o=y[Se],W.writeUInt16(o);for(W.writeUInt16(0),ke=0,Y=w.length;ke<Y;ke++)o=w[ke],W.writeUInt16(o);for(Fe=0,ae=h.length;Fe<ae;Fe++)d=h[Fe],W.writeUInt16(d);for(He=0,fe=se.length;He<fe;He++)B=se[He],W.writeUInt16(B);for(Ze=0,me=b.length;Ze<me;Ze++)j=b[Ze],W.writeUInt16(j);return{charMap:n,subtable:W.data,maxGlyphID:F+1}}},r})(),jS=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return tl(r,Sa),r.prototype.tag="cmap",r.prototype.parse=function(e){var t,n,o;for(e.pos=this.offset,this.version=e.readUInt16(),o=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=o?n<o:n>o;n=0<=o?++n:--n)t=new K2(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},r.encode=function(e,t){var n,o;return t==null&&(t="macroman"),n=K2.encode(e,t),(o=new Lc).writeUInt16(0),o.writeUInt16(1),n.table=o.data.concat(n.subtable),n},r})(),cj=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return tl(r,Sa),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r})(),dj=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return tl(r,Sa),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n})(),this.charRange=(function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r})(),uj=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return tl(r,Sa),r.prototype.tag="post",r.prototype.parse=function(e){var t,n,o;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],o=[];e.pos<this.offset+this.length;)t=e.readByte(),o.push(this.names.push(e.readString(t)));return o;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var l,d,h;for(h=[],s=l=0,d=this.file.maxp.numGlyphs;0<=d?l<d:l>d;s=0<=d?++l:--l)h.push(e.readUInt32());return h}).call(this)}},r})(),hj=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},fj=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return tl(r,Sa),r.prototype.tag="name",r.prototype.parse=function(e){var t,n,o,s,l,d,h,u,g,y,_;for(e.pos=this.offset,e.readShort(),t=e.readShort(),d=e.readShort(),n=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+d+e.readShort()});for(h={},s=g=0,y=n.length;g<y;s=++g)o=n[s],e.pos=o.offset,u=e.readString(o.length),l=new hj(u,o),h[_=o.nameID]==null&&(h[_]=[]),h[o.nameID].push(l);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},r})(),pj=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return tl(r,Sa),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r})(),mj=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return tl(r,Sa),r.prototype.tag="hmtx",r.prototype.parse=function(e){var t,n,o,s,l,d,h;for(e.pos=this.offset,this.metrics=[],t=0,d=this.file.hhea.numberOfMetrics;0<=d?t<d:t>d;t=0<=d?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var u,g;for(g=[],t=u=0;0<=o?u<o:u>o;t=0<=o?++u:--u)g.push(e.readInt16());return g})(),this.widths=(function(){var u,g,y,_;for(_=[],u=0,g=(y=this.metrics).length;u<g;u++)s=y[u],_.push(s.advance);return _}).call(this),n=this.widths[this.widths.length-1],h=[],t=l=0;0<=o?l<o:l>o;t=0<=o?++l:--l)h.push(this.widths.push(n));return h},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r})(),IS=[].slice,gj=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return tl(r,Sa),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var t,n,o,s,l,d,h,u,g,y;return e in this.cache?this.cache[e]:(s=this.file.loca,t=this.file.contents,n=s.indexOf(e),(o=s.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+n,l=(d=new Lc(t.read(o))).readShort(),u=d.readShort(),y=d.readShort(),h=d.readShort(),g=d.readShort(),this.cache[e]=l===-1?new yj(d,u,y,h,g):new xj(d,l,u,y,h,g),this.cache[e]))},r.prototype.encode=function(e,t,n){var o,s,l,d,h;for(l=[],s=[],d=0,h=t.length;d<h;d++)o=e[t[d]],s.push(l.length),o&&(l=l.concat(o.encode(n)));return s.push(l.length),{table:l,offsets:s}},r})(),xj=(function(){function r(e,t,n,o,s,l){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=o,this.xMax=s,this.yMax=l,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),yj=(function(){function r(e,t,n,o,s){var l,d;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=o,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;d=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&d;)l.pos+=1&d?4:2,128&d?l.pos+=8:64&d?l.pos+=4:8&d&&(l.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new Lc(IS.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r})(),bj=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return tl(r,Sa),r.prototype.tag="loca",r.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var o,s;for(s=[],n=0,o=this.length;n<o;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var o,s;for(s=[],n=0,o=this.length;n<o;n+=4)s.push(e.readUInt32());return s}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),o=0,s=0,l=0;l<n.length;++l)if(n[l]=o,s<t.length&&t[s]==l){++s,n[l]=o;var d=this.offsets[l],h=this.offsets[l+1]-d;h>0&&(o+=h)}for(var u=new Array(4*n.length),g=0;g<n.length;++g)u[4*g+3]=255&n[g],u[4*g+2]=(65280&n[g])>>8,u[4*g+1]=(16711680&n[g])>>16,u[4*g]=(4278190080&n[g])>>24;return u},r})(),vj=(function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,o,s;for(t in o=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[t],e[t]=o[n];return e},r.prototype.glyphsFor=function(e){var t,n,o,s,l,d,h;for(o={},l=0,d=e.length;l<d;l++)o[s=e[l]]=this.font.glyf.glyphFor(s);for(s in t=[],o)(n=o[s])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(s in h=this.glyphsFor(t))n=h[s],o[s]=n;return o},r.prototype.encode=function(e,t){var n,o,s,l,d,h,u,g,y,_,b,R,j,z,T;for(o in n=jS.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(e),b={0:0},T=n.charMap)b[(h=T[o]).old]=h.new;for(R in _=n.maxGlyphID,l)R in b||(b[R]=_++);return g=(function(M){var F,B;for(F in B={},M)B[M[F]]=F;return B})(b),y=Object.keys(g).sort(function(M,F){return M-F}),j=(function(){var M,F,B;for(B=[],M=0,F=y.length;M<F;M++)d=y[M],B.push(g[d]);return B})(),s=this.font.glyf.encode(l,j,b),u=this.font.loca.encode(s.offsets,j),z={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(z["OS/2"]=this.font.os2.raw()),this.font.directory.encode(z)},r})();It.API.PDFObject=(function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,o,s,l;if(Array.isArray(t))return"["+(function(){var d,h,u;for(u=[],d=0,h=t.length;d<h;d++)n=t[d],u.push(e.convert(n));return u})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(o in s=["<<"],t)l=t[o],s.push("/"+o+" "+e.convert(l));return s.push(">>"),s.join(`
`)}return""+t},e})();const Yr=r=>{const{calculatorName:e,inputs:t,results:n,necReferences:o,additionalInfo:s}=r,l=new It({orientation:"portrait",unit:"mm",format:"letter"}),d=l.internal.pageSize.getWidth(),h=l.internal.pageSize.getHeight(),u=15,g=d-u*2;let y=u;const _=J=>y+J>h-u?(l.addPage(),y=u,!0):!1,b=(J,se,O,A,S=10)=>{l.setFontSize(S);const V=l.splitTextToSize(J,A);return l.text(V,se,O),V.length*(S*.4)};l.setFillColor(37,99,235),l.rect(0,0,d,25,"F"),l.setTextColor(255,255,255),l.setFontSize(20),l.setFont("helvetica","bold"),l.text("Electrician Toolkit",u,12),l.setFontSize(12),l.setFont("helvetica","normal"),l.text(e,u,19),l.setFontSize(9);const R=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});l.text(R,d-u-l.getTextWidth(R),19),y=35,l.setTextColor(0,0,0),l.setFontSize(14),l.setFont("helvetica","bold"),l.text("Input Parameters",u,y),y+=7,l.setDrawColor(37,99,235),l.setLineWidth(.5),l.line(u,y,d-u,y),y+=5,l.setFontSize(10),l.setFont("helvetica","normal"),Object.entries(t).forEach(([J,se])=>{_(10);const O=J.replace(/([A-Z])/g," $1").trim(),A=O.charAt(0).toUpperCase()+O.slice(1);l.setFont("helvetica","bold");const S=`${A}:`;l.text(S,u+5,y);const V=l.getTextWidth(S);l.setFont("helvetica","normal"),l.text(String(se),u+5+V+3,y),y+=6}),y+=5,_(20),l.setFontSize(14),l.setFont("helvetica","bold"),l.text("Results",u,y),y+=7,l.setDrawColor(37,99,235),l.line(u,y,d-u,y),y+=5,l.setFontSize(10),l.setFont("helvetica","normal"),Object.entries(n).forEach(([J,se])=>{_(10);const O=J.replace(/([A-Z])/g," $1").trim(),A=O.charAt(0).toUpperCase()+O.slice(1);l.setFont("helvetica","bold");const S=`${A}:`;l.text(S,u+5,y);let V=String(se);typeof se=="boolean"&&(V=se?"Yes":"No");const I=l.getTextWidth(S);l.setFont("helvetica","normal"),l.text(V,u+5+I+3,y),y+=6}),y+=5,s&&Object.keys(s).length>0&&(_(20),l.setFontSize(14),l.setFont("helvetica","bold"),l.text("Calculation Details",u,y),y+=7,l.setDrawColor(37,99,235),l.line(u,y,d-u,y),y+=5,l.setFontSize(10),l.setFont("helvetica","normal"),Object.entries(s).forEach(([J,se])=>{_(10);const O=J.replace(/([A-Z])/g," $1").trim(),A=O.charAt(0).toUpperCase()+O.slice(1),S=b(`${A}: ${se}`,u+5,y,g-10,10);y+=S+2}),y+=5),o&&(_(20),l.setFontSize(14),l.setFont("helvetica","bold"),l.text("NEC Code References",u,y),y+=7,l.setDrawColor(37,99,235),l.line(u,y,d-u,y),y+=5,l.setFontSize(10),l.setFont("helvetica","normal"),(Array.isArray(o)?o:[o]).forEach(se=>{_(15);const O=b(`• ${se}`,u+5,y,g-10,10);y+=O+2}));const j=h-10;l.setFontSize(8),l.setTextColor(100,100,100),l.setFont("helvetica","italic");const z="This calculation is for reference only. Always verify with current NEC and local codes.",T=l.getTextWidth(z);l.text(z,(d-T)/2,j);const M=e.toLowerCase().replace(/\s+/g,"-"),F=new Date().toISOString().split("T")[0],B=`${M}-${F}.pdf`;l.save(B)},wj=()=>{};var J2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let o=r.charCodeAt(n);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Sj=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const o=r[t++];if(o<128)e[n++]=String.fromCharCode(o);else if(o>191&&o<224){const s=r[t++];e[n++]=String.fromCharCode((o&31)<<6|s&63)}else if(o>239&&o<365){const s=r[t++],l=r[t++],d=r[t++],h=((o&7)<<18|(s&63)<<12|(l&63)<<6|d&63)-65536;e[n++]=String.fromCharCode(55296+(h>>10)),e[n++]=String.fromCharCode(56320+(h&1023))}else{const s=r[t++],l=r[t++];e[n++]=String.fromCharCode((o&15)<<12|(s&63)<<6|l&63)}}return e.join("")},RS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let o=0;o<r.length;o+=3){const s=r[o],l=o+1<r.length,d=l?r[o+1]:0,h=o+2<r.length,u=h?r[o+2]:0,g=s>>2,y=(s&3)<<4|d>>4;let _=(d&15)<<2|u>>6,b=u&63;h||(b=64,l||(_=64)),n.push(t[g],t[y],t[_],t[b])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(ES(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Sj(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let o=0;o<r.length;){const s=t[r.charAt(o++)],d=o<r.length?t[r.charAt(o)]:0;++o;const u=o<r.length?t[r.charAt(o)]:64;++o;const y=o<r.length?t[r.charAt(o)]:64;if(++o,s==null||d==null||u==null||y==null)throw new _j;const _=s<<2|d>>4;if(n.push(_),u!==64){const b=d<<4&240|u>>2;if(n.push(b),y!==64){const R=u<<6&192|y;n.push(R)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class _j extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tj=function(r){const e=ES(r);return RS.encodeByteArray(e,!0)},Rm=function(r){return Tj(r).replace(/\./g,"")},PS=function(r){try{return RS.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj=()=>NS().__FIREBASE_DEFAULTS__,Aj=()=>{if(typeof process>"u"||typeof J2>"u")return;const r=J2.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},kj=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&PS(r[1]);return e&&JSON.parse(e)},s0=()=>{try{return wj()||Cj()||Aj()||kj()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},BS=r=>{var e,t;return(t=(e=s0())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},jj=r=>{const e=BS(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},LS=()=>{var r;return(r=s0())==null?void 0:r.config},FS=r=>{var e;return(e=s0())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zS(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",o=r.iat||0,s=r.sub||r.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${n}`,aud:n,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Rm(JSON.stringify(t)),Rm(JSON.stringify(l)),""].join(".")}const of={};function Rj(){const r={prod:[],emulator:[]};for(const e of Object.keys(of))of[e]?r.emulator.push(e):r.prod.push(e);return r}function Pj(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Y2=!1;function VS(r,e){if(typeof window>"u"||typeof document>"u"||!lh(window.location.host)||of[r]===e||of[r]||Y2)return;of[r]=e;function t(_){return`__firebase__banner__${_}`}const n="__firebase__banner",s=Rj().prod.length>0;function l(){const _=document.getElementById(n);_&&_.remove()}function d(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,b){_.setAttribute("width","24"),_.setAttribute("id",b),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function u(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Y2=!0,l()},_}function g(_,b){_.setAttribute("id",b),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function y(){const _=Pj(n),b=t("text"),R=document.getElementById(b)||document.createElement("span"),j=t("learnmore"),z=document.getElementById(j)||document.createElement("a"),T=t("preprendIcon"),M=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const F=_.element;d(F),g(z,j);const B=u();h(M,T),F.append(M,R,z,B),document.body.appendChild(F)}s?(R.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Nj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fi())}function OS(){var e;const r=(e=s0())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Lj(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Fj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zj(){const r=fi();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function MS(){return!OS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DS(){return!OS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function WS(){try{return typeof indexedDB=="object"}catch{return!1}}function Vj(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(n);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var s;e(((s=o.error)==null?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj="FirebaseError";class Ol extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=Oj,Object.setPrototypeOf(this,Ol.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zf.prototype.create)}}class zf{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},o=`${this.service}/${e}`,s=this.errors[e],l=s?Mj(s,n):"Error",d=`${this.serviceName}: ${l} (${o}).`;return new Ol(o,d,n)}}function Mj(r,e){return r.replace(Dj,(t,n)=>{const o=e[n];return o!=null?String(o):`<${n}?>`})}const Dj=/\{\$([^}]+)}/g;function Wj(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Id(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const o of t){if(!n.includes(o))return!1;const s=r[o],l=e[o];if(Q2(s)&&Q2(l)){if(!Id(s,l))return!1}else if(s!==l)return!1}for(const o of n)if(!t.includes(o))return!1;return!0}function Q2(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Kh(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[o,s]=n.split("=");e[decodeURIComponent(o)]=decodeURIComponent(s)}}),e}function Jh(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function $j(r,e){const t=new qj(r,e);return t.subscribe.bind(t)}class qj{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let o;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");Uj(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:n},o.next===void 0&&(o.next=Yg),o.error===void 0&&(o.error=Yg),o.complete===void 0&&(o.complete=Yg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Uj(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Yg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(r){return r&&r._delegate?r._delegate:r}class Ed{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new Ij;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&n.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(n)return null;throw o}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kj(e))try{this.getOrInitializeService({instanceIdentifier:hd})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:o});n.resolve(s)}catch{}}}}clearInstance(e=hd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hd){return this.instances.has(e)}getOptions(e=hd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(s);n===d&&l.resolve(o)}return o}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(n)??new Set;o.add(e),this.onInitCallbacks.set(n,o);const s=this.instances.get(n);return s&&e(s,n),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const o of n)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Gj(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=hd){return this.component?this.component.multipleInstances?e:hd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Gj(r){return r===hd?void 0:r}function Kj(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Hj(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(xr||(xr={}));const Yj={debug:xr.DEBUG,verbose:xr.VERBOSE,info:xr.INFO,warn:xr.WARN,error:xr.ERROR,silent:xr.SILENT},Qj=xr.INFO,Xj={[xr.DEBUG]:"log",[xr.VERBOSE]:"log",[xr.INFO]:"info",[xr.WARN]:"warn",[xr.ERROR]:"error"},Zj=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),o=Xj[e];if(o)console[o](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class b5{constructor(e){this.name=e,this._logLevel=Qj,this._logHandler=Zj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xr.DEBUG,...e),this._logHandler(this,xr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xr.VERBOSE,...e),this._logHandler(this,xr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xr.INFO,...e),this._logHandler(this,xr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xr.WARN,...e),this._logHandler(this,xr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xr.ERROR,...e),this._logHandler(this,xr.ERROR,...e)}}const e7=(r,e)=>e.some(t=>r instanceof t);let X2,Z2;function t7(){return X2||(X2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r7(){return Z2||(Z2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $S=new WeakMap,A1=new WeakMap,qS=new WeakMap,Qg=new WeakMap,v5=new WeakMap;function n7(r){const e=new Promise((t,n)=>{const o=()=>{r.removeEventListener("success",s),r.removeEventListener("error",l)},s=()=>{t(Ic(r.result)),o()},l=()=>{n(r.error),o()};r.addEventListener("success",s),r.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&$S.set(t,r)}).catch(()=>{}),v5.set(e,r),e}function i7(r){if(A1.has(r))return;const e=new Promise((t,n)=>{const o=()=>{r.removeEventListener("complete",s),r.removeEventListener("error",l),r.removeEventListener("abort",l)},s=()=>{t(),o()},l=()=>{n(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",s),r.addEventListener("error",l),r.addEventListener("abort",l)});A1.set(r,e)}let k1={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return A1.get(r);if(e==="objectStoreNames")return r.objectStoreNames||qS.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ic(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function o7(r){k1=r(k1)}function s7(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Xg(this),e,...t);return qS.set(n,e.sort?e.sort():[e]),Ic(n)}:r7().includes(r)?function(...e){return r.apply(Xg(this),e),Ic($S.get(this))}:function(...e){return Ic(r.apply(Xg(this),e))}}function a7(r){return typeof r=="function"?s7(r):(r instanceof IDBTransaction&&i7(r),e7(r,t7())?new Proxy(r,k1):r)}function Ic(r){if(r instanceof IDBRequest)return n7(r);if(Qg.has(r))return Qg.get(r);const e=a7(r);return e!==r&&(Qg.set(r,e),v5.set(e,r)),e}const Xg=r=>v5.get(r);function l7(r,e,{blocked:t,upgrade:n,blocking:o,terminated:s}={}){const l=indexedDB.open(r,e),d=Ic(l);return n&&l.addEventListener("upgradeneeded",h=>{n(Ic(l.result),h.oldVersion,h.newVersion,Ic(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),d.then(h=>{s&&h.addEventListener("close",()=>s()),o&&h.addEventListener("versionchange",u=>o(u.oldVersion,u.newVersion,u))}).catch(()=>{}),d}const c7=["get","getKey","getAll","getAllKeys","count"],d7=["put","add","delete","clear"],Zg=new Map;function eb(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Zg.get(e))return Zg.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,o=d7.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(o||c7.includes(t)))return;const s=async function(l,...d){const h=this.transaction(l,o?"readwrite":"readonly");let u=h.store;return n&&(u=u.index(d.shift())),(await Promise.all([u[t](...d),o&&h.done]))[0]};return Zg.set(e,s),s}o7(r=>({...r,get:(e,t,n)=>eb(e,t)||r.get(e,t,n),has:(e,t)=>!!eb(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(h7(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function h7(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const j1="@firebase/app",tb="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=new b5("@firebase/app"),f7="@firebase/app-compat",p7="@firebase/analytics-compat",m7="@firebase/analytics",g7="@firebase/app-check-compat",x7="@firebase/app-check",y7="@firebase/auth",b7="@firebase/auth-compat",v7="@firebase/database",w7="@firebase/data-connect",S7="@firebase/database-compat",_7="@firebase/functions",T7="@firebase/functions-compat",C7="@firebase/installations",A7="@firebase/installations-compat",k7="@firebase/messaging",j7="@firebase/messaging-compat",I7="@firebase/performance",E7="@firebase/performance-compat",R7="@firebase/remote-config",P7="@firebase/remote-config-compat",N7="@firebase/storage",B7="@firebase/storage-compat",L7="@firebase/firestore",F7="@firebase/ai",z7="@firebase/firestore-compat",V7="firebase",O7="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="[DEFAULT]",M7={[j1]:"fire-core",[f7]:"fire-core-compat",[m7]:"fire-analytics",[p7]:"fire-analytics-compat",[x7]:"fire-app-check",[g7]:"fire-app-check-compat",[y7]:"fire-auth",[b7]:"fire-auth-compat",[v7]:"fire-rtdb",[w7]:"fire-data-connect",[S7]:"fire-rtdb-compat",[_7]:"fire-fn",[T7]:"fire-fn-compat",[C7]:"fire-iid",[A7]:"fire-iid-compat",[k7]:"fire-fcm",[j7]:"fire-fcm-compat",[I7]:"fire-perf",[E7]:"fire-perf-compat",[R7]:"fire-rc",[P7]:"fire-rc-compat",[N7]:"fire-gcs",[B7]:"fire-gcs-compat",[L7]:"fire-fst",[z7]:"fire-fst-compat",[F7]:"fire-vertex","fire-js":"fire-js",[V7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=new Map,D7=new Map,E1=new Map;function rb(r,e){try{r.container.addComponent(e)}catch(t){Bl.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function qu(r){const e=r.name;if(E1.has(e))return Bl.debug(`There were multiple attempts to register component ${e}.`),!1;E1.set(e,r);for(const t of Pm.values())rb(t,r);for(const t of D7.values())rb(t,r);return!0}function w5(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Ms(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ec=new zf("app","Firebase",W7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ed("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ec.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=O7;function US(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:I1,automaticDataCollectionEnabled:!0,...e},o=n.name;if(typeof o!="string"||!o)throw Ec.create("bad-app-name",{appName:String(o)});if(t||(t=LS()),!t)throw Ec.create("no-options");const s=Pm.get(o);if(s){if(Id(t,s.options)&&Id(n,s.config))return s;throw Ec.create("duplicate-app",{appName:o})}const l=new Jj(o);for(const h of E1.values())l.addComponent(h);const d=new $7(t,n,l);return Pm.set(o,d),d}function HS(r=I1){const e=Pm.get(r);if(!e&&r===I1&&LS())return US();if(!e)throw Ec.create("no-app",{appName:r});return e}function Rc(r,e,t){let n=M7[r]??r;t&&(n+=`-${t}`);const o=n.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const l=[`Unable to register library "${n}" with version "${e}":`];o&&l.push(`library name "${n}" contains illegal characters (whitespace or "/")`),o&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bl.warn(l.join(" "));return}qu(new Ed(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q7="firebase-heartbeat-database",U7=1,yf="firebase-heartbeat-store";let e1=null;function GS(){return e1||(e1=l7(q7,U7,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(yf)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ec.create("idb-open",{originalErrorMessage:r.message})})),e1}async function H7(r){try{const t=(await GS()).transaction(yf),n=await t.objectStore(yf).get(KS(r));return await t.done,n}catch(e){if(e instanceof Ol)Bl.warn(e.message);else{const t=Ec.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bl.warn(t.message)}}}async function nb(r,e){try{const n=(await GS()).transaction(yf,"readwrite");await n.objectStore(yf).put(e,KS(r)),await n.done}catch(t){if(t instanceof Ol)Bl.warn(t.message);else{const n=Ec.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Bl.warn(n.message)}}}function KS(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7=1024,K7=30;class J7{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Q7(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ib();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:o}),this._heartbeatsCache.heartbeats.length>K7){const l=X7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Bl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ib(),{heartbeatsToSend:n,unsentEntries:o}=Y7(this._heartbeatsCache.heartbeats),s=Rm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Bl.warn(t),""}}}function ib(){return new Date().toISOString().substring(0,10)}function Y7(r,e=G7){const t=[];let n=r.slice();for(const o of r){const s=t.find(l=>l.agent===o.agent);if(s){if(s.dates.push(o.date),ob(t)>e){s.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ob(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class Q7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WS()?Vj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await H7(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return nb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return nb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function ob(r){return Rm(JSON.stringify({version:2,heartbeats:r})).length}function X7(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z7(r){qu(new Ed("platform-logger",e=>new u7(e),"PRIVATE")),qu(new Ed("heartbeat",e=>new J7(e),"PRIVATE")),Rc(j1,tb,r),Rc(j1,tb,"esm2020"),Rc("fire-js","")}Z7("");var e8="firebase",t8="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rc(e8,t8,"app");function JS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const r8=JS,YS=new zf("auth","Firebase",JS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm=new b5("@firebase/auth");function n8(r,...e){Nm.logLevel<=xr.WARN&&Nm.warn(`Auth (${ch}): ${r}`,...e)}function sm(r,...e){Nm.logLevel<=xr.ERROR&&Nm.error(`Auth (${ch}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(r,...e){throw S5(r,...e)}function Ja(r,...e){return S5(r,...e)}function QS(r,e,t){const n={...r8(),[e]:t};return new zf("auth","Firebase",n).create(e,{appName:r.name})}function Pl(r){return QS(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function S5(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return YS.create(r,...e)}function Kt(r,e,...t){if(!r)throw S5(e,...t)}function jl(r){const e="INTERNAL ASSERTION FAILED: "+r;throw sm(e),new Error(e)}function Ll(r,e){r||jl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function i8(){return sb()==="http:"||sb()==="https:"}function sb(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(i8()||Lj()||"connection"in navigator)?navigator.onLine:!0}function s8(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ll(t>e,"Short delay should be less than long delay!"),this.isMobile=Nj()||Fj()}get(){return o8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(r,e){Ll(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],c8=new Of(3e4,6e4);function Ml(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Dl(r,e,t,n,o={}){return ZS(r,o,async()=>{let s={},l={};n&&(e==="GET"?l=n:s={body:JSON.stringify(n)});const d=Vf({key:r.config.apiKey,...l}).slice(1),h=await r._getAdditionalHeaders();h["Content-Type"]="application/json",r.languageCode&&(h["X-Firebase-Locale"]=r.languageCode);const u={method:e,headers:h,...s};return Bj()||(u.referrerPolicy="no-referrer"),r.emulatorConfig&&lh(r.emulatorConfig.host)&&(u.credentials="include"),XS.fetch()(await e_(r,r.config.apiHost,t,d),u)})}async function ZS(r,e,t){r._canInitEmulator=!1;const n={...a8,...e};try{const o=new u8(r),s=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const l=await s.json();if("needConfirmation"in l)throw qp(r,"account-exists-with-different-credential",l);if(s.ok&&!("errorMessage"in l))return l;{const d=s.ok?l.errorMessage:l.error.message,[h,u]=d.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw qp(r,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw qp(r,"email-already-in-use",l);if(h==="USER_DISABLED")throw qp(r,"user-disabled",l);const g=n[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw QS(r,g,u);va(r,g)}}catch(o){if(o instanceof Ol)throw o;va(r,"network-request-failed",{message:String(o)})}}async function Mf(r,e,t,n,o={}){const s=await Dl(r,e,t,n,o);return"mfaPendingCredential"in s&&va(r,"multi-factor-auth-required",{_serverResponse:s}),s}async function e_(r,e,t,n){const o=`${e}${t}?${n}`,s=r,l=s.config.emulator?_5(r.config,o):`${r.config.apiScheme}://${o}`;return l8.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(l).toString():l}function d8(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class u8{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Ja(this.auth,"network-request-failed")),c8.get())})}}function qp(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const o=Ja(r,e,n);return o.customData._tokenResponse=t,o}function ab(r){return r!==void 0&&r.enterprise!==void 0}class h8{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return d8(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function f8(r,e){return Dl(r,"GET","/v2/recaptchaConfig",Ml(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p8(r,e){return Dl(r,"POST","/v1/accounts:delete",e)}async function Bm(r,e){return Dl(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function m8(r,e=!1){const t=Ni(r),n=await t.getIdToken(e),o=T5(n);Kt(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const s=typeof o.firebase=="object"?o.firebase:void 0,l=s==null?void 0:s.sign_in_provider;return{claims:o,token:n,authTime:sf(t1(o.auth_time)),issuedAtTime:sf(t1(o.iat)),expirationTime:sf(t1(o.exp)),signInProvider:l||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function t1(r){return Number(r)*1e3}function T5(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return sm("JWT malformed, contained fewer than 3 sections"),null;try{const o=PS(t);return o?JSON.parse(o):(sm("Failed to decode base64 JWT payload"),null)}catch(o){return sm("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function lb(r){const e=T5(r);return Kt(e,"internal-error"),Kt(typeof e.exp<"u","internal-error"),Kt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bf(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Ol&&g8(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function g8({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=sf(this.lastLoginAt),this.creationTime=sf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lm(r){var y;const e=r.auth,t=await r.getIdToken(),n=await bf(r,Bm(e,{idToken:t}));Kt(n==null?void 0:n.users.length,e,"internal-error");const o=n.users[0];r._notifyReloadListener(o);const s=(y=o.providerUserInfo)!=null&&y.length?t_(o.providerUserInfo):[],l=b8(r.providerData,s),d=r.isAnonymous,h=!(r.email&&o.passwordHash)&&!(l!=null&&l.length),u=d?h:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new P1(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(r,g)}async function y8(r){const e=Ni(r);await Lm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function b8(r,e){return[...r.filter(n=>!e.some(o=>o.providerId===n.providerId)),...e]}function t_(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v8(r,e){const t=await ZS(r,{},async()=>{const n=Vf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:s}=r.config,l=await e_(r,o,"/v1/token",`key=${s}`),d=await r._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:d,body:n};return r.emulatorConfig&&lh(r.emulatorConfig.host)&&(h.credentials="include"),XS.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function w8(r,e){return Dl(r,"POST","/v2/accounts:revokeToken",Ml(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Kt(e.idToken,"internal-error"),Kt(typeof e.idToken<"u","internal-error"),Kt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Kt(e.length!==0,"internal-error");const t=lb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Kt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:o,expiresIn:s}=await v8(e,t);this.updateTokensAndExpiration(n,o,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:o,expirationTime:s}=t,l=new Vu;return n&&(Kt(typeof n=="string","internal-error",{appName:e}),l.refreshToken=n),o&&(Kt(typeof o=="string","internal-error",{appName:e}),l.accessToken=o),s&&(Kt(typeof s=="number","internal-error",{appName:e}),l.expirationTime=s),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vu,this.toJSON())}_performRefresh(){return jl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(r,e){Kt(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class xa{constructor({uid:e,auth:t,stsTokenManager:n,...o}){this.providerId="firebase",this.proactiveRefresh=new x8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new P1(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await bf(this,this.stsTokenManager.getToken(this.auth,e));return Kt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return m8(this,e)}reload(){return y8(this)}_assign(e){this!==e&&(Kt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new xa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Kt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Lm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ms(this.auth.app))return Promise.reject(Pl(this.auth));const e=await this.getIdToken();return await bf(this,p8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,o=t.email??void 0,s=t.phoneNumber??void 0,l=t.photoURL??void 0,d=t.tenantId??void 0,h=t._redirectEventId??void 0,u=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:_,isAnonymous:b,providerData:R,stsTokenManager:j}=t;Kt(y&&j,e,"internal-error");const z=Vu.fromJSON(this.name,j);Kt(typeof y=="string",e,"internal-error"),xc(n,e.name),xc(o,e.name),Kt(typeof _=="boolean",e,"internal-error"),Kt(typeof b=="boolean",e,"internal-error"),xc(s,e.name),xc(l,e.name),xc(d,e.name),xc(h,e.name),xc(u,e.name),xc(g,e.name);const T=new xa({uid:y,auth:e,email:o,emailVerified:_,displayName:n,isAnonymous:b,photoURL:l,phoneNumber:s,tenantId:d,stsTokenManager:z,createdAt:u,lastLoginAt:g});return R&&Array.isArray(R)&&(T.providerData=R.map(M=>({...M}))),h&&(T._redirectEventId=h),T}static async _fromIdTokenResponse(e,t,n=!1){const o=new Vu;o.updateFromServerResponse(t);const s=new xa({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:n});return await Lm(s),s}static async _fromGetAccountInfoResponse(e,t,n){const o=t.users[0];Kt(o.localId!==void 0,"internal-error");const s=o.providerUserInfo!==void 0?t_(o.providerUserInfo):[],l=!(o.email&&o.passwordHash)&&!(s!=null&&s.length),d=new Vu;d.updateFromIdToken(n);const h=new xa({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:l}),u={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new P1(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(s!=null&&s.length)};return Object.assign(h,u),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=new Map;function Il(r){Ll(r instanceof Function,"Expected a class definition");let e=cb.get(r);return e?(Ll(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,cb.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}r_.type="NONE";const db=r_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(r,e,t){return`firebase:${r}:${e}:${t}`}class Ou{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:o,name:s}=this.auth;this.fullUserKey=am(this.userKey,o.apiKey,s),this.fullPersistenceKey=am("persistence",o.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Bm(this.auth,{idToken:e}).catch(()=>{});return t?xa._fromGetAccountInfoResponse(this.auth,t,e):null}return xa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Ou(Il(db),e,n);const o=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=o[0]||Il(db);const l=am(n,e.config.apiKey,e.name);let d=null;for(const u of t)try{const g=await u._get(l);if(g){let y;if(typeof g=="string"){const _=await Bm(e,{idToken:g}).catch(()=>{});if(!_)break;y=await xa._fromGetAccountInfoResponse(e,_,g)}else y=xa._fromJSON(e,g);u!==s&&(d=y),s=u;break}}catch{}const h=o.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new Ou(s,e,n):(s=h[0],d&&await s._set(l,d.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(l)}catch{}})),new Ou(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(s_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(n_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(l_(e))return"Blackberry";if(c_(e))return"Webos";if(i_(e))return"Safari";if((e.includes("chrome/")||o_(e))&&!e.includes("edge/"))return"Chrome";if(a_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function n_(r=fi()){return/firefox\//i.test(r)}function i_(r=fi()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function o_(r=fi()){return/crios\//i.test(r)}function s_(r=fi()){return/iemobile/i.test(r)}function a_(r=fi()){return/android/i.test(r)}function l_(r=fi()){return/blackberry/i.test(r)}function c_(r=fi()){return/webos/i.test(r)}function C5(r=fi()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function S8(r=fi()){var e;return C5(r)&&!!((e=window.navigator)!=null&&e.standalone)}function _8(){return zj()&&document.documentMode===10}function d_(r=fi()){return C5(r)||a_(r)||c_(r)||l_(r)||/windows phone/i.test(r)||s_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(r,e=[]){let t;switch(r){case"Browser":t=ub(fi());break;case"Worker":t=`${ub(fi())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ch}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=s=>new Promise((l,d)=>{try{const h=e(s);l(h)}catch(h){d(h)}});n.onAbort=t,this.queue.push(n);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C8(r,e={}){return Dl(r,"GET","/v2/passwordPolicy",Ml(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8=6;class k8{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??A8,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let o=0;o<e.length;o++)n=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,o,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e,t,n,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hb(this),this.idTokenSubscription=new hb(this),this.beforeStateQueue=new T8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Il(t)),this._initializationPromise=this.queue(async()=>{var n,o,s;if(!this._deleted&&(this.persistenceManager=await Ou.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Bm(this,{idToken:e}),n=await xa._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Ms(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(s=this.redirectUser)==null?void 0:s._redirectEventId,d=n==null?void 0:n._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===d)&&(h!=null&&h.user)&&(n=h.user,o=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(n)}catch(l){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Kt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Lm(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=s8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ms(this.app))return Promise.reject(Pl(this));const t=e?Ni(e):null;return t&&Kt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Kt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ms(this.app)?Promise.reject(Pl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ms(this.app)?Promise.reject(Pl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Il(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await C8(this),t=new k8(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zf("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await w8(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Il(e)||this._popupRedirectResolver;Kt(t,this,"argument-error"),this.redirectPersistenceManager=await Ou.create(this,[Il(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,o){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Kt(d,this,"internal-error"),d.then(()=>{l||s(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,n,o);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Kt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=u_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(Ms(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&n8(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Mc(r){return Ni(r)}class hb{constructor(e){this.auth=e,this.observer=null,this.addObserver=$j(t=>this.observer=t)}get next(){return Kt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function I8(r){a0=r}function h_(r){return a0.loadJS(r)}function E8(){return a0.recaptchaEnterpriseScript}function R8(){return a0.gapiScript}function P8(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class N8{constructor(){this.enterprise=new B8}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class B8{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const L8="recaptcha-enterprise",f_="NO_RECAPTCHA";class F8{constructor(e){this.type=L8,this.auth=Mc(e)}async verify(e="verify",t=!1){async function n(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(l,d)=>{f8(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const u=new h8(h);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,l(u.siteKey)}}).catch(h=>{d(h)})})}function o(s,l,d){const h=window.grecaptcha;ab(h)?h.enterprise.ready(()=>{h.enterprise.execute(s,{action:e}).then(u=>{l(u)}).catch(()=>{l(f_)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new N8().execute("siteKey",{action:"verify"}):new Promise((s,l)=>{n(this.auth).then(d=>{if(!t&&ab(window.grecaptcha))o(d,s,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=E8();h.length!==0&&(h+=d),h_(h).then(()=>{o(d,s,l)}).catch(u=>{l(u)})}}).catch(d=>{l(d)})})}}async function fb(r,e,t,n=!1,o=!1){const s=new F8(r);let l;if(o)l=f_;else try{l=await s.verify(t)}catch{l=await s.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const h=d.phoneEnrollmentInfo.phoneNumber,u=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:u,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const h=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return n?Object.assign(d,{captchaResp:l}):Object.assign(d,{captchaResponse:l}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Fm(r,e,t,n,o){var s;if((s=r._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await fb(r,e,t,t==="getOobCode");return n(r,l)}else return n(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await fb(r,e,t,t==="getOobCode");return n(r,d)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(r,e){const t=w5(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),s=t.getOptions();if(Id(s,e??{}))return o;va(o,"already-initialized")}return t.initialize({options:e})}function V8(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(Il);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function O8(r,e,t){const n=Mc(r);Kt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const o=!1,s=p_(e),{host:l,port:d}=M8(e),h=d===null?"":`:${d}`,u={url:`${s}//${l}${h}/`},g=Object.freeze({host:l,port:d,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!n._canInitEmulator){Kt(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Kt(Id(u,n.config.emulator)&&Id(g,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=g,n.settings.appVerificationDisabledForTesting=!0,lh(l)?(zS(`${s}//${l}${h}`),VS("Auth",!0)):D8()}function p_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function M8(r){const e=p_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(n);if(o){const s=o[1];return{host:s,port:pb(n.substr(s.length+1))}}else{const[s,l]=n.split(":");return{host:s,port:pb(l)}}}function pb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function D8(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return jl("not implemented")}_getIdTokenResponse(e){return jl("not implemented")}_linkToIdToken(e,t){return jl("not implemented")}_getReauthenticationResolver(e){return jl("not implemented")}}async function W8(r,e){return Dl(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $8(r,e){return Mf(r,"POST","/v1/accounts:signInWithPassword",Ml(r,e))}async function q8(r,e){return Dl(r,"POST","/v1/accounts:sendOobCode",Ml(r,e))}async function U8(r,e){return q8(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H8(r,e){return Mf(r,"POST","/v1/accounts:signInWithEmailLink",Ml(r,e))}async function G8(r,e){return Mf(r,"POST","/v1/accounts:signInWithEmailLink",Ml(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf extends A5{constructor(e,t,n,o=null){super("password",n),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new vf(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new vf(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fm(e,t,"signInWithPassword",$8);case"emailLink":return H8(e,{email:this._email,oobCode:this._password});default:va(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fm(e,n,"signUpPassword",W8);case"emailLink":return G8(e,{idToken:t,email:this._email,oobCode:this._password});default:va(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mu(r,e){return Mf(r,"POST","/v1/accounts:signInWithIdp",Ml(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K8="http://localhost";class Rd extends A5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Rd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):va("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:o,...s}=t;if(!n||!o)return null;const l=new Rd(n,o);return l.idToken=s.idToken||void 0,l.accessToken=s.accessToken||void 0,l.secret=s.secret,l.nonce=s.nonce,l.pendingToken=s.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Mu(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Mu(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Mu(e,t)}buildRequest(){const e={requestUri:K8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Y8(r){const e=Kh(Jh(r)).link,t=e?Kh(Jh(e)).deep_link_id:null,n=Kh(Jh(r)).deep_link_id;return(n?Kh(Jh(n)).link:null)||n||t||e||r}class k5{constructor(e){const t=Kh(Jh(e)),n=t.apiKey??null,o=t.oobCode??null,s=J8(t.mode??null);Kt(n&&o&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Y8(e);try{return new k5(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(){this.providerId=dh.PROVIDER_ID}static credential(e,t){return vf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=k5.parseLink(t);return Kt(n,"argument-error"),vf._fromEmailAndCode(e,n.code,n.tenantId)}}dh.PROVIDER_ID="password";dh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";dh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends m_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends Df{constructor(){super("facebook.com")}static credential(e){return Rd._fromParams({providerId:Sc.PROVIDER_ID,signInMethod:Sc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sc.credentialFromTaggedObject(e)}static credentialFromError(e){return Sc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sc.credential(e.oauthAccessToken)}catch{return null}}}Sc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Sc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends Df{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Rd._fromParams({providerId:_c.PROVIDER_ID,signInMethod:_c.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _c.credentialFromTaggedObject(e)}static credentialFromError(e){return _c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return _c.credential(t,n)}catch{return null}}}_c.GOOGLE_SIGN_IN_METHOD="google.com";_c.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc extends Df{constructor(){super("github.com")}static credential(e){return Rd._fromParams({providerId:Tc.PROVIDER_ID,signInMethod:Tc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tc.credentialFromTaggedObject(e)}static credentialFromError(e){return Tc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tc.credential(e.oauthAccessToken)}catch{return null}}}Tc.GITHUB_SIGN_IN_METHOD="github.com";Tc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc extends Df{constructor(){super("twitter.com")}static credential(e,t){return Rd._fromParams({providerId:Cc.PROVIDER_ID,signInMethod:Cc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Cc.credentialFromTaggedObject(e)}static credentialFromError(e){return Cc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Cc.credential(t,n)}catch{return null}}}Cc.TWITTER_SIGN_IN_METHOD="twitter.com";Cc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q8(r,e){return Mf(r,"POST","/v1/accounts:signUp",Ml(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,o=!1){const s=await xa._fromIdTokenResponse(e,n,o),l=mb(n);return new Pd({user:s,providerId:l,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const o=mb(n);return new Pd({user:e,providerId:o,_tokenResponse:n,operationType:t})}}function mb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm extends Ol{constructor(e,t,n,o){super(t.code,t.message),this.operationType=n,this.user=o,Object.setPrototypeOf(this,zm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,o){return new zm(e,t,n,o)}}function g_(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?zm._fromErrorAndOperation(r,s,e,n):s})}async function X8(r,e,t=!1){const n=await bf(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Pd._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z8(r,e,t=!1){const{auth:n}=r;if(Ms(n.app))return Promise.reject(Pl(n));const o="reauthenticate";try{const s=await bf(r,g_(n,o,e,r),t);Kt(s.idToken,n,"internal-error");const l=T5(s.idToken);Kt(l,n,"internal-error");const{sub:d}=l;return Kt(r.uid===d,n,"user-mismatch"),Pd._forOperation(r,o,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&va(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x_(r,e,t=!1){if(Ms(r.app))return Promise.reject(Pl(r));const n="signIn",o=await g_(r,n,e),s=await Pd._fromIdTokenResponse(r,n,o);return t||await r._updateCurrentUser(s.user),s}async function eI(r,e){return x_(Mc(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y_(r){const e=Mc(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tI(r,e,t){const n=Mc(r);await Fm(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",U8)}async function b_(r,e,t){if(Ms(r.app))return Promise.reject(Pl(r));const n=Mc(r),l=await Fm(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Q8).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&y_(r),h}),d=await Pd._fromIdTokenResponse(n,"signIn",l);return await n._updateCurrentUser(d.user),d}function v_(r,e,t){return Ms(r.app)?Promise.reject(Pl(r)):eI(Ni(r),dh.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&y_(r),n})}function rI(r,e,t,n){return Ni(r).onIdTokenChanged(e,t,n)}function nI(r,e,t){return Ni(r).beforeAuthStateChanged(e,t)}function l0(r,e,t,n){return Ni(r).onAuthStateChanged(e,t,n)}function iI(r){return Ni(r).signOut()}const Vm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vm,"1"),this.storage.removeItem(Vm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=1e3,sI=10;class S_ extends w_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=d_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),o=this.localCache[t];n!==o&&e(t,o,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,d,h)=>{this.notifyListeners(l,h)});return}const n=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const l=this.storage.getItem(n);!t&&this.localCache[n]===l||this.notifyListeners(n,l)},s=this.storage.getItem(n);_8()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,sI):o()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const o of Array.from(n))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},oI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}S_.type="LOCAL";const aI=S_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __ extends w_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}__.type="SESSION";const T_=__;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const n=new c0(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:o,data:s}=t.data,l=this.handlersMap[o];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:o});const d=Array.from(l).map(async u=>u(t.origin,s)),h=await lI(d);t.ports[0].postMessage({status:"done",eventId:n,eventType:o,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}c0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let s,l;return new Promise((d,h)=>{const u=j5("",20);o.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},n);l={messageChannel:o,onMessage(y){const _=y;if(_.data.eventId===u)switch(_.data.status){case"ack":clearTimeout(g),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),d(_.data.response);break;default:clearTimeout(g),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(l),o.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[o.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(){return window}function dI(r){Ya().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(){return typeof Ya().WorkerGlobalScope<"u"&&typeof Ya().importScripts=="function"}async function uI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hI(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function fI(){return C_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="firebaseLocalStorageDb",pI=1,Om="firebaseLocalStorage",k_="fbase_key";class Wf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function d0(r,e){return r.transaction([Om],e?"readwrite":"readonly").objectStore(Om)}function mI(){const r=indexedDB.deleteDatabase(A_);return new Wf(r).toPromise()}function N1(){const r=indexedDB.open(A_,pI);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(Om,{keyPath:k_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(Om)?e(n):(n.close(),await mI(),e(await N1()))})})}async function gb(r,e,t){const n=d0(r,!0).put({[k_]:e,value:t});return new Wf(n).toPromise()}async function gI(r,e){const t=d0(r,!1).get(e),n=await new Wf(t).toPromise();return n===void 0?null:n.value}function xb(r,e){const t=d0(r,!0).delete(e);return new Wf(t).toPromise()}const xI=800,yI=3;class j_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await N1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>yI)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return C_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=c0._getInstance(fI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await uI(),!this.activeServiceWorker)return;this.sender=new cI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await N1();return await gb(e,Vm,"1"),await xb(e,Vm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>gb(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>gI(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const s=d0(o,!1).getAll();return new Wf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:o,value:s}of e)n.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!n.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const o of Array.from(n))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}j_.type="LOCAL";const bI=j_;new Of(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(r,e){return e?Il(e):(Kt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5 extends A5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wI(r){return x_(r.auth,new I5(r),r.bypassAuthState)}function SI(r){const{auth:e,user:t}=r;return Kt(t,e,"internal-error"),Z8(t,new I5(r),r.bypassAuthState)}async function _I(r){const{auth:e,user:t}=r;return Kt(t,e,"internal-error"),X8(t,new I5(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,t,n,o,s=!1){this.auth=e,this.resolver=n,this.user=o,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:o,tenantId:s,error:l,type:d}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(h))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wI;case"linkViaPopup":case"linkViaRedirect":return _I;case"reauthViaPopup":case"reauthViaRedirect":return SI;default:va(this.auth,"internal-error")}}resolve(e){Ll(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ll(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=new Of(2e3,1e4);class Nu extends I_{constructor(e,t,n,o,s){super(e,t,o,s),this.provider=n,this.authWindow=null,this.pollId=null,Nu.currentPopupAction&&Nu.currentPopupAction.cancel(),Nu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Kt(e,this.auth,"internal-error"),e}async onExecution(){Ll(this.filter.length===1,"Popup operations only handle one event");const e=j5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ja(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ja(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ja(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TI.get())};e()}}Nu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="pendingRedirect",lm=new Map;class AI extends I_{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=lm.get(this.auth._key());if(!e){try{const n=await kI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}lm.set(this.auth._key(),e)}return this.bypassAuthState||lm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kI(r,e){const t=EI(e),n=II(r);if(!await n._isAvailable())return!1;const o=await n._get(t)==="true";return await n._remove(t),o}function jI(r,e){lm.set(r._key(),e)}function II(r){return Il(r._redirectPersistence)}function EI(r){return am(CI,r.config.apiKey,r.name)}async function RI(r,e,t=!1){if(Ms(r.app))return Promise.reject(Pl(r));const n=Mc(r),o=vI(n,e),l=await new AI(n,o,t).execute();return l&&!t&&(delete l.user._redirectEventId,await n._persistUserIfCurrent(l.user),await n._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=600*1e3;class NI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!E_(e)){const o=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ja(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PI&&this.cachedEventUids.clear(),this.cachedEventUids.has(yb(e))}saveEventToCache(e){this.cachedEventUids.add(yb(e)),this.lastProcessedEventTime=Date.now()}}function yb(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function E_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function BI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return E_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LI(r,e={}){return Dl(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zI=/^https?/;async function VI(r){if(r.config.emulator)return;const{authorizedDomains:e}=await LI(r);for(const t of e)try{if(OI(t))return}catch{}va(r,"unauthorized-domain")}function OI(r){const e=R1(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const l=new URL(r);return l.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===n}if(!zI.test(t))return!1;if(FI.test(r))return n===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=new Of(3e4,6e4);function bb(){const r=Ya().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function DI(r){return new Promise((e,t)=>{var o,s,l;function n(){bb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bb(),t(Ja(r,"network-request-failed"))},timeout:MI.get()})}if((s=(o=Ya().gapi)==null?void 0:o.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((l=Ya().gapi)!=null&&l.load)n();else{const d=P8("iframefcb");return Ya()[d]=()=>{gapi.load?n():t(Ja(r,"network-request-failed"))},h_(`${R8()}?onload=${d}`).catch(h=>t(h))}}).catch(e=>{throw cm=null,e})}let cm=null;function WI(r){return cm=cm||DI(r),cm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=new Of(5e3,15e3),qI="__/auth/iframe",UI="emulator/auth/iframe",HI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KI(r){const e=r.config;Kt(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?_5(e,UI):`https://${r.config.authDomain}/${qI}`,n={apiKey:e.apiKey,appName:r.name,v:ch},o=GI.get(r.config.apiHost);o&&(n.eid=o);const s=r._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${Vf(n).slice(1)}`}async function JI(r){const e=await WI(r),t=Ya().gapi;return Kt(t,r,"internal-error"),e.open({where:document.body,url:KI(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HI,dontclear:!0},n=>new Promise(async(o,s)=>{await n.restyle({setHideOnLeave:!1});const l=Ja(r,"network-request-failed"),d=Ya().setTimeout(()=>{s(l)},$I.get());function h(){Ya().clearTimeout(d),o(n)}n.ping(h).then(h,()=>{s(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QI=500,XI=600,ZI="_blank",eE="http://localhost";class vb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tE(r,e,t,n=QI,o=XI){const s=Math.max((window.screen.availHeight-o)/2,0).toString(),l=Math.max((window.screen.availWidth-n)/2,0).toString();let d="";const h={...YI,width:n.toString(),height:o.toString(),top:s,left:l},u=fi().toLowerCase();t&&(d=o_(u)?ZI:t),n_(u)&&(e=e||eE,h.scrollbars="yes");const g=Object.entries(h).reduce((_,[b,R])=>`${_}${b}=${R},`,"");if(S8(u)&&d!=="_self")return rE(e||"",d),new vb(null);const y=window.open(e||"",d,g);Kt(y,r,"popup-blocked");try{y.focus()}catch{}return new vb(y)}function rE(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="__/auth/handler",iE="emulator/auth/handler",oE=encodeURIComponent("fac");async function wb(r,e,t,n,o,s){Kt(r.config.authDomain,r,"auth-domain-config-required"),Kt(r.config.apiKey,r,"invalid-api-key");const l={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:ch,eventId:o};if(e instanceof m_){e.setDefaultLanguage(r.languageCode),l.providerId=e.providerId||"",Wj(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))l[g]=y}if(e instanceof Df){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(l.scopes=g.join(","))}r.tenantId&&(l.tid=r.tenantId);const d=l;for(const g of Object.keys(d))d[g]===void 0&&delete d[g];const h=await r._getAppCheckToken(),u=h?`#${oE}=${encodeURIComponent(h)}`:"";return`${sE(r)}?${Vf(d).slice(1)}${u}`}function sE({config:r}){return r.emulator?_5(r,iE):`https://${r.authDomain}/${nE}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="webStorageSupport";class aE{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=T_,this._completeRedirectFn=RI,this._overrideRedirectResult=jI}async _openPopup(e,t,n,o){var l;Ll((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const s=await wb(e,t,n,R1(),o);return tE(e,s,j5())}async _openRedirect(e,t,n,o){await this._originValidation(e);const s=await wb(e,t,n,R1(),o);return dI(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:s}=this.eventManagers[t];return o?Promise.resolve(o):(Ll(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await JI(e),n=new NI(e);return t.register("authEvent",o=>(Kt(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:n.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(r1,{type:r1},o=>{var l;const s=(l=o==null?void 0:o[0])==null?void 0:l[r1];s!==void 0&&t(!!s),va(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=VI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return d_()||i_()||C5()}}const lE=aE;var Sb="@firebase/auth",_b="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Kt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uE(r){qu(new Ed("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=n.options;Kt(l&&!l.includes(":"),"invalid-api-key",{appName:n.name});const h={apiKey:l,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:u_(r)},u=new j8(n,o,s,h);return V8(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),qu(new Ed("auth-internal",e=>{const t=Mc(e.getProvider("auth").getImmediate());return(n=>new cE(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rc(Sb,_b,dE(r)),Rc(Sb,_b,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=300,fE=FS("authIdTokenMaxAge")||hE;let Tb=null;const pE=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>fE)return;const o=t==null?void 0:t.token;Tb!==o&&(Tb=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function mE(r=HS()){const e=w5(r,"auth");if(e.isInitialized())return e.getImmediate();const t=z8(r,{popupRedirectResolver:lE,persistence:[bI,aI,T_]}),n=FS("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const l=pE(s.toString());nI(t,l,()=>l(t.currentUser)),rI(t,d=>l(d))}}const o=BS("auth");return o&&O8(t,`http://${o}`),t}function gE(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}I8({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=o=>{const s=Ja("internal-error");s.customData=o,t(s)},n.type="text/javascript",n.charset="UTF-8",gE().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uE("Browser");var Cb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pc,R_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,A){function S(){}S.prototype=A.prototype,O.F=A.prototype,O.prototype=new S,O.prototype.constructor=O,O.D=function(V,I,w){for(var N=Array(arguments.length-2),W=2;W<arguments.length;W++)N[W-2]=arguments[W];return A.prototype[I].apply(V,N)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,A,S){S||(S=0);const V=Array(16);if(typeof A=="string")for(var I=0;I<16;++I)V[I]=A.charCodeAt(S++)|A.charCodeAt(S++)<<8|A.charCodeAt(S++)<<16|A.charCodeAt(S++)<<24;else for(I=0;I<16;++I)V[I]=A[S++]|A[S++]<<8|A[S++]<<16|A[S++]<<24;A=O.g[0],S=O.g[1],I=O.g[2];let w=O.g[3],N;N=A+(w^S&(I^w))+V[0]+3614090360&4294967295,A=S+(N<<7&4294967295|N>>>25),N=w+(I^A&(S^I))+V[1]+3905402710&4294967295,w=A+(N<<12&4294967295|N>>>20),N=I+(S^w&(A^S))+V[2]+606105819&4294967295,I=w+(N<<17&4294967295|N>>>15),N=S+(A^I&(w^A))+V[3]+3250441966&4294967295,S=I+(N<<22&4294967295|N>>>10),N=A+(w^S&(I^w))+V[4]+4118548399&4294967295,A=S+(N<<7&4294967295|N>>>25),N=w+(I^A&(S^I))+V[5]+1200080426&4294967295,w=A+(N<<12&4294967295|N>>>20),N=I+(S^w&(A^S))+V[6]+2821735955&4294967295,I=w+(N<<17&4294967295|N>>>15),N=S+(A^I&(w^A))+V[7]+4249261313&4294967295,S=I+(N<<22&4294967295|N>>>10),N=A+(w^S&(I^w))+V[8]+1770035416&4294967295,A=S+(N<<7&4294967295|N>>>25),N=w+(I^A&(S^I))+V[9]+2336552879&4294967295,w=A+(N<<12&4294967295|N>>>20),N=I+(S^w&(A^S))+V[10]+4294925233&4294967295,I=w+(N<<17&4294967295|N>>>15),N=S+(A^I&(w^A))+V[11]+2304563134&4294967295,S=I+(N<<22&4294967295|N>>>10),N=A+(w^S&(I^w))+V[12]+1804603682&4294967295,A=S+(N<<7&4294967295|N>>>25),N=w+(I^A&(S^I))+V[13]+4254626195&4294967295,w=A+(N<<12&4294967295|N>>>20),N=I+(S^w&(A^S))+V[14]+2792965006&4294967295,I=w+(N<<17&4294967295|N>>>15),N=S+(A^I&(w^A))+V[15]+1236535329&4294967295,S=I+(N<<22&4294967295|N>>>10),N=A+(I^w&(S^I))+V[1]+4129170786&4294967295,A=S+(N<<5&4294967295|N>>>27),N=w+(S^I&(A^S))+V[6]+3225465664&4294967295,w=A+(N<<9&4294967295|N>>>23),N=I+(A^S&(w^A))+V[11]+643717713&4294967295,I=w+(N<<14&4294967295|N>>>18),N=S+(w^A&(I^w))+V[0]+3921069994&4294967295,S=I+(N<<20&4294967295|N>>>12),N=A+(I^w&(S^I))+V[5]+3593408605&4294967295,A=S+(N<<5&4294967295|N>>>27),N=w+(S^I&(A^S))+V[10]+38016083&4294967295,w=A+(N<<9&4294967295|N>>>23),N=I+(A^S&(w^A))+V[15]+3634488961&4294967295,I=w+(N<<14&4294967295|N>>>18),N=S+(w^A&(I^w))+V[4]+3889429448&4294967295,S=I+(N<<20&4294967295|N>>>12),N=A+(I^w&(S^I))+V[9]+568446438&4294967295,A=S+(N<<5&4294967295|N>>>27),N=w+(S^I&(A^S))+V[14]+3275163606&4294967295,w=A+(N<<9&4294967295|N>>>23),N=I+(A^S&(w^A))+V[3]+4107603335&4294967295,I=w+(N<<14&4294967295|N>>>18),N=S+(w^A&(I^w))+V[8]+1163531501&4294967295,S=I+(N<<20&4294967295|N>>>12),N=A+(I^w&(S^I))+V[13]+2850285829&4294967295,A=S+(N<<5&4294967295|N>>>27),N=w+(S^I&(A^S))+V[2]+4243563512&4294967295,w=A+(N<<9&4294967295|N>>>23),N=I+(A^S&(w^A))+V[7]+1735328473&4294967295,I=w+(N<<14&4294967295|N>>>18),N=S+(w^A&(I^w))+V[12]+2368359562&4294967295,S=I+(N<<20&4294967295|N>>>12),N=A+(S^I^w)+V[5]+4294588738&4294967295,A=S+(N<<4&4294967295|N>>>28),N=w+(A^S^I)+V[8]+2272392833&4294967295,w=A+(N<<11&4294967295|N>>>21),N=I+(w^A^S)+V[11]+1839030562&4294967295,I=w+(N<<16&4294967295|N>>>16),N=S+(I^w^A)+V[14]+4259657740&4294967295,S=I+(N<<23&4294967295|N>>>9),N=A+(S^I^w)+V[1]+2763975236&4294967295,A=S+(N<<4&4294967295|N>>>28),N=w+(A^S^I)+V[4]+1272893353&4294967295,w=A+(N<<11&4294967295|N>>>21),N=I+(w^A^S)+V[7]+4139469664&4294967295,I=w+(N<<16&4294967295|N>>>16),N=S+(I^w^A)+V[10]+3200236656&4294967295,S=I+(N<<23&4294967295|N>>>9),N=A+(S^I^w)+V[13]+681279174&4294967295,A=S+(N<<4&4294967295|N>>>28),N=w+(A^S^I)+V[0]+3936430074&4294967295,w=A+(N<<11&4294967295|N>>>21),N=I+(w^A^S)+V[3]+3572445317&4294967295,I=w+(N<<16&4294967295|N>>>16),N=S+(I^w^A)+V[6]+76029189&4294967295,S=I+(N<<23&4294967295|N>>>9),N=A+(S^I^w)+V[9]+3654602809&4294967295,A=S+(N<<4&4294967295|N>>>28),N=w+(A^S^I)+V[12]+3873151461&4294967295,w=A+(N<<11&4294967295|N>>>21),N=I+(w^A^S)+V[15]+530742520&4294967295,I=w+(N<<16&4294967295|N>>>16),N=S+(I^w^A)+V[2]+3299628645&4294967295,S=I+(N<<23&4294967295|N>>>9),N=A+(I^(S|~w))+V[0]+4096336452&4294967295,A=S+(N<<6&4294967295|N>>>26),N=w+(S^(A|~I))+V[7]+1126891415&4294967295,w=A+(N<<10&4294967295|N>>>22),N=I+(A^(w|~S))+V[14]+2878612391&4294967295,I=w+(N<<15&4294967295|N>>>17),N=S+(w^(I|~A))+V[5]+4237533241&4294967295,S=I+(N<<21&4294967295|N>>>11),N=A+(I^(S|~w))+V[12]+1700485571&4294967295,A=S+(N<<6&4294967295|N>>>26),N=w+(S^(A|~I))+V[3]+2399980690&4294967295,w=A+(N<<10&4294967295|N>>>22),N=I+(A^(w|~S))+V[10]+4293915773&4294967295,I=w+(N<<15&4294967295|N>>>17),N=S+(w^(I|~A))+V[1]+2240044497&4294967295,S=I+(N<<21&4294967295|N>>>11),N=A+(I^(S|~w))+V[8]+1873313359&4294967295,A=S+(N<<6&4294967295|N>>>26),N=w+(S^(A|~I))+V[15]+4264355552&4294967295,w=A+(N<<10&4294967295|N>>>22),N=I+(A^(w|~S))+V[6]+2734768916&4294967295,I=w+(N<<15&4294967295|N>>>17),N=S+(w^(I|~A))+V[13]+1309151649&4294967295,S=I+(N<<21&4294967295|N>>>11),N=A+(I^(S|~w))+V[4]+4149444226&4294967295,A=S+(N<<6&4294967295|N>>>26),N=w+(S^(A|~I))+V[11]+3174756917&4294967295,w=A+(N<<10&4294967295|N>>>22),N=I+(A^(w|~S))+V[2]+718787259&4294967295,I=w+(N<<15&4294967295|N>>>17),N=S+(w^(I|~A))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+A&4294967295,O.g[1]=O.g[1]+(I+(N<<21&4294967295|N>>>11))&4294967295,O.g[2]=O.g[2]+I&4294967295,O.g[3]=O.g[3]+w&4294967295}n.prototype.v=function(O,A){A===void 0&&(A=O.length);const S=A-this.blockSize,V=this.C;let I=this.h,w=0;for(;w<A;){if(I==0)for(;w<=S;)o(this,O,w),w+=this.blockSize;if(typeof O=="string"){for(;w<A;)if(V[I++]=O.charCodeAt(w++),I==this.blockSize){o(this,V),I=0;break}}else for(;w<A;)if(V[I++]=O[w++],I==this.blockSize){o(this,V),I=0;break}}this.h=I,this.o+=A},n.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var A=1;A<O.length-8;++A)O[A]=0;A=this.o*8;for(var S=O.length-8;S<O.length;++S)O[S]=A&255,A/=256;for(this.v(O),O=Array(16),A=0,S=0;S<4;++S)for(let V=0;V<32;V+=8)O[A++]=this.g[S]>>>V&255;return O};function s(O,A){var S=d;return Object.prototype.hasOwnProperty.call(S,O)?S[O]:S[O]=A(O)}function l(O,A){this.h=A;const S=[];let V=!0;for(let I=O.length-1;I>=0;I--){const w=O[I]|0;V&&w==A||(S[I]=w,V=!1)}this.g=S}var d={};function h(O){return-128<=O&&O<128?s(O,function(A){return new l([A|0],A<0?-1:0)}):new l([O|0],O<0?-1:0)}function u(O){if(isNaN(O)||!isFinite(O))return y;if(O<0)return z(u(-O));const A=[];let S=1;for(let V=0;O>=S;V++)A[V]=O/S|0,S*=4294967296;return new l(A,0)}function g(O,A){if(O.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(O.charAt(0)=="-")return z(g(O.substring(1),A));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=u(Math.pow(A,8));let V=y;for(let w=0;w<O.length;w+=8){var I=Math.min(8,O.length-w);const N=parseInt(O.substring(w,w+I),A);I<8?(I=u(Math.pow(A,I)),V=V.j(I).add(u(N))):(V=V.j(S),V=V.add(u(N)))}return V}var y=h(0),_=h(1),b=h(16777216);r=l.prototype,r.m=function(){if(j(this))return-z(this).m();let O=0,A=1;for(let S=0;S<this.g.length;S++){const V=this.i(S);O+=(V>=0?V:4294967296+V)*A,A*=4294967296}return O},r.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(R(this))return"0";if(j(this))return"-"+z(this).toString(O);const A=u(Math.pow(O,6));var S=this;let V="";for(;;){const I=B(S,A).g;S=T(S,I.j(A));let w=((S.g.length>0?S.g[0]:S.h)>>>0).toString(O);if(S=I,R(S))return w+V;for(;w.length<6;)w="0"+w;V=w+V}},r.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function R(O){if(O.h!=0)return!1;for(let A=0;A<O.g.length;A++)if(O.g[A]!=0)return!1;return!0}function j(O){return O.h==-1}r.l=function(O){return O=T(this,O),j(O)?-1:R(O)?0:1};function z(O){const A=O.g.length,S=[];for(let V=0;V<A;V++)S[V]=~O.g[V];return new l(S,~O.h).add(_)}r.abs=function(){return j(this)?z(this):this},r.add=function(O){const A=Math.max(this.g.length,O.g.length),S=[];let V=0;for(let I=0;I<=A;I++){let w=V+(this.i(I)&65535)+(O.i(I)&65535),N=(w>>>16)+(this.i(I)>>>16)+(O.i(I)>>>16);V=N>>>16,w&=65535,N&=65535,S[I]=N<<16|w}return new l(S,S[S.length-1]&-2147483648?-1:0)};function T(O,A){return O.add(z(A))}r.j=function(O){if(R(this)||R(O))return y;if(j(this))return j(O)?z(this).j(z(O)):z(z(this).j(O));if(j(O))return z(this.j(z(O)));if(this.l(b)<0&&O.l(b)<0)return u(this.m()*O.m());const A=this.g.length+O.g.length,S=[];for(var V=0;V<2*A;V++)S[V]=0;for(V=0;V<this.g.length;V++)for(let I=0;I<O.g.length;I++){const w=this.i(V)>>>16,N=this.i(V)&65535,W=O.i(I)>>>16,q=O.i(I)&65535;S[2*V+2*I]+=N*q,M(S,2*V+2*I),S[2*V+2*I+1]+=w*q,M(S,2*V+2*I+1),S[2*V+2*I+1]+=N*W,M(S,2*V+2*I+1),S[2*V+2*I+2]+=w*W,M(S,2*V+2*I+2)}for(O=0;O<A;O++)S[O]=S[2*O+1]<<16|S[2*O];for(O=A;O<2*A;O++)S[O]=0;return new l(S,0)};function M(O,A){for(;(O[A]&65535)!=O[A];)O[A+1]+=O[A]>>>16,O[A]&=65535,A++}function F(O,A){this.g=O,this.h=A}function B(O,A){if(R(A))throw Error("division by zero");if(R(O))return new F(y,y);if(j(O))return A=B(z(O),A),new F(z(A.g),z(A.h));if(j(A))return A=B(O,z(A)),new F(z(A.g),A.h);if(O.g.length>30){if(j(O)||j(A))throw Error("slowDivide_ only works with positive integers.");for(var S=_,V=A;V.l(O)<=0;)S=J(S),V=J(V);var I=se(S,1),w=se(V,1);for(V=se(V,2),S=se(S,2);!R(V);){var N=w.add(V);N.l(O)<=0&&(I=I.add(S),w=N),V=se(V,1),S=se(S,1)}return A=T(O,I.j(A)),new F(I,A)}for(I=y;O.l(A)>=0;){for(S=Math.max(1,Math.floor(O.m()/A.m())),V=Math.ceil(Math.log(S)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),w=u(S),N=w.j(A);j(N)||N.l(O)>0;)S-=V,w=u(S),N=w.j(A);R(w)&&(w=_),I=I.add(w),O=T(O,N)}return new F(I,O)}r.B=function(O){return B(this,O).h},r.and=function(O){const A=Math.max(this.g.length,O.g.length),S=[];for(let V=0;V<A;V++)S[V]=this.i(V)&O.i(V);return new l(S,this.h&O.h)},r.or=function(O){const A=Math.max(this.g.length,O.g.length),S=[];for(let V=0;V<A;V++)S[V]=this.i(V)|O.i(V);return new l(S,this.h|O.h)},r.xor=function(O){const A=Math.max(this.g.length,O.g.length),S=[];for(let V=0;V<A;V++)S[V]=this.i(V)^O.i(V);return new l(S,this.h^O.h)};function J(O){const A=O.g.length+1,S=[];for(let V=0;V<A;V++)S[V]=O.i(V)<<1|O.i(V-1)>>>31;return new l(S,O.h)}function se(O,A){const S=A>>5;A%=32;const V=O.g.length-S,I=[];for(let w=0;w<V;w++)I[w]=A>0?O.i(w+S)>>>A|O.i(w+S+1)<<32-A:O.i(w+S);return new l(I,O.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,R_=n,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=u,l.fromString=g,Pc=l}).apply(typeof Cb<"u"?Cb:typeof self<"u"?self:typeof window<"u"?window:{});var Up=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var P_,Yh,N_,dm,B1,B_,L_,F_;(function(){var r,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Up=="object"&&Up];for(var P=0;P<m.length;++P){var U=m[P];if(U&&U.Math==Math)return U}throw Error("Cannot find global object")}var n=t(this);function o(m,P){if(P)e:{var U=n;m=m.split(".");for(var ne=0;ne<m.length-1;ne++){var je=m[ne];if(!(je in U))break e;U=U[je]}m=m[m.length-1],ne=U[m],P=P(ne),P!=ne&&P!=null&&e(U,m,{configurable:!0,writable:!0,value:P})}}o("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(m){return m||function(P){var U=[],ne;for(ne in P)Object.prototype.hasOwnProperty.call(P,ne)&&U.push([ne,P[ne]]);return U}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function d(m){var P=typeof m;return P=="object"&&m!=null||P=="function"}function h(m,P,U){return m.call.apply(m.bind,arguments)}function u(m,P,U){return u=h,u.apply(null,arguments)}function g(m,P){var U=Array.prototype.slice.call(arguments,1);return function(){var ne=U.slice();return ne.push.apply(ne,arguments),m.apply(this,ne)}}function y(m,P){function U(){}U.prototype=P.prototype,m.Z=P.prototype,m.prototype=new U,m.prototype.constructor=m,m.Ob=function(ne,je,Be){for(var rt=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)rt[Wt-2]=arguments[Wt];return P.prototype[je].apply(ne,rt)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function b(m){const P=m.length;if(P>0){const U=Array(P);for(let ne=0;ne<P;ne++)U[ne]=m[ne];return U}return[]}function R(m,P){for(let ne=1;ne<arguments.length;ne++){const je=arguments[ne];var U=typeof je;if(U=U!="object"?U:je?Array.isArray(je)?"array":U:"null",U=="array"||U=="object"&&typeof je.length=="number"){U=m.length||0;const Be=je.length||0;m.length=U+Be;for(let rt=0;rt<Be;rt++)m[U+rt]=je[rt]}else m.push(je)}}class j{constructor(P,U){this.i=P,this.j=U,this.h=0,this.g=null}get(){let P;return this.h>0?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function z(m){l.setTimeout(()=>{throw m},0)}function T(){var m=O;let P=null;return m.g&&(P=m.g,m.g=m.g.next,m.g||(m.h=null),P.next=null),P}class M{constructor(){this.h=this.g=null}add(P,U){const ne=F.get();ne.set(P,U),this.h?this.h.next=ne:this.g=ne,this.h=ne}}var F=new j(()=>new B,m=>m.reset());class B{constructor(){this.next=this.g=this.h=null}set(P,U){this.h=P,this.g=U,this.next=null}reset(){this.next=this.g=this.h=null}}let J,se=!1,O=new M,A=()=>{const m=Promise.resolve(void 0);J=()=>{m.then(S)}};function S(){for(var m;m=T();){try{m.h.call(m.g)}catch(U){z(U)}var P=F;P.j(m),P.h<100&&(P.h++,m.next=P.g,P.g=m)}se=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(m,P){this.type=m,this.g=this.target=P,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var w=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,P=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const U=()=>{};l.addEventListener("test",U,P),l.removeEventListener("test",U,P)}catch{}return m})();function N(m){return/^[\s\xa0]*$/.test(m)}function W(m,P){I.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,P)}y(W,I),W.prototype.init=function(m,P){const U=this.type=m.type,ne=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=P,P=m.relatedTarget,P||(U=="mouseover"?P=m.fromElement:U=="mouseout"&&(P=m.toElement)),this.relatedTarget=P,ne?(this.clientX=ne.clientX!==void 0?ne.clientX:ne.pageX,this.clientY=ne.clientY!==void 0?ne.clientY:ne.pageY,this.screenX=ne.screenX||0,this.screenY=ne.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var q="closure_listenable_"+(Math.random()*1e6|0),re=0;function Z(m,P,U,ne,je){this.listener=m,this.proxy=null,this.src=P,this.type=U,this.capture=!!ne,this.ha=je,this.key=++re,this.da=this.fa=!1}function te(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ye(m,P,U){for(const ne in m)P.call(U,m[ne],ne,m)}function we(m,P){for(const U in m)P.call(void 0,m[U],U,m)}function ie(m){const P={};for(const U in m)P[U]=m[U];return P}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(m,P){let U,ne;for(let je=1;je<arguments.length;je++){ne=arguments[je];for(U in ne)m[U]=ne[U];for(let Be=0;Be<$.length;Be++)U=$[Be],Object.prototype.hasOwnProperty.call(ne,U)&&(m[U]=ne[U])}}function ae(m){this.src=m,this.g={},this.h=0}ae.prototype.add=function(m,P,U,ne,je){const Be=m.toString();m=this.g[Be],m||(m=this.g[Be]=[],this.h++);const rt=me(m,P,ne,je);return rt>-1?(P=m[rt],U||(P.fa=!1)):(P=new Z(P,this.src,Be,!!ne,je),P.fa=U,m.push(P)),P};function fe(m,P){const U=P.type;if(U in m.g){var ne=m.g[U],je=Array.prototype.indexOf.call(ne,P,void 0),Be;(Be=je>=0)&&Array.prototype.splice.call(ne,je,1),Be&&(te(P),m.g[U].length==0&&(delete m.g[U],m.h--))}}function me(m,P,U,ne){for(let je=0;je<m.length;++je){const Be=m[je];if(!Be.da&&Be.listener==P&&Be.capture==!!U&&Be.ha==ne)return je}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),ke={};function Ae(m,P,U,ne,je){if(Array.isArray(P)){for(let Be=0;Be<P.length;Be++)Ae(m,P[Be],U,ne,je);return null}return U=lt(U),m&&m[q]?m.J(P,U,d(ne)?!!ne.capture:!1,je):Fe(m,P,U,!1,ne,je)}function Fe(m,P,U,ne,je,Be){if(!P)throw Error("Invalid event type");const rt=d(je)?!!je.capture:!!je;let Wt=at(m);if(Wt||(m[Se]=Wt=new ae(m)),U=Wt.add(P,U,ne,rt,Be),U.proxy)return U;if(ne=He(),U.proxy=ne,ne.src=m,ne.listener=U,m.addEventListener)w||(je=rt),je===void 0&&(je=!1),m.addEventListener(P.toString(),ne,je);else if(m.attachEvent)m.attachEvent(ge(P.toString()),ne);else if(m.addListener&&m.removeListener)m.addListener(ne);else throw Error("addEventListener and attachEvent are unavailable.");return U}function He(){function m(U){return P.call(m.src,m.listener,U)}const P=le;return m}function Ze(m,P,U,ne,je){if(Array.isArray(P))for(var Be=0;Be<P.length;Be++)Ze(m,P[Be],U,ne,je);else ne=d(ne)?!!ne.capture:!!ne,U=lt(U),m&&m[q]?(m=m.i,Be=String(P).toString(),Be in m.g&&(P=m.g[Be],U=me(P,U,ne,je),U>-1&&(te(P[U]),Array.prototype.splice.call(P,U,1),P.length==0&&(delete m.g[Be],m.h--)))):m&&(m=at(m))&&(P=m.g[P.toString()],m=-1,P&&(m=me(P,U,ne,je)),(U=m>-1?P[m]:null)&&Xe(U))}function Xe(m){if(typeof m!="number"&&m&&!m.da){var P=m.src;if(P&&P[q])fe(P.i,m);else{var U=m.type,ne=m.proxy;P.removeEventListener?P.removeEventListener(U,ne,m.capture):P.detachEvent?P.detachEvent(ge(U),ne):P.addListener&&P.removeListener&&P.removeListener(ne),(U=at(P))?(fe(U,m),U.h==0&&(U.src=null,P[Se]=null)):te(m)}}}function ge(m){return m in ke?ke[m]:ke[m]="on"+m}function le(m,P){if(m.da)m=!0;else{P=new W(P,this);const U=m.listener,ne=m.ha||m.src;m.fa&&Xe(m),m=U.call(ne,P)}return m}function at(m){return m=m[Se],m instanceof ae?m:null}var dt="__closure_events_fn_"+(Math.random()*1e9>>>0);function lt(m){return typeof m=="function"?m:(m[dt]||(m[dt]=function(P){return m.handleEvent(P)}),m[dt])}function $e(){V.call(this),this.i=new ae(this),this.M=this,this.G=null}y($e,V),$e.prototype[q]=!0,$e.prototype.removeEventListener=function(m,P,U,ne){Ze(this,m,P,U,ne)};function nt(m,P){var U,ne=m.G;if(ne)for(U=[];ne;ne=ne.G)U.push(ne);if(m=m.M,ne=P.type||P,typeof P=="string")P=new I(P,m);else if(P instanceof I)P.target=P.target||m;else{var je=P;P=new I(ne,m),Y(P,je)}je=!0;let Be,rt;if(U)for(rt=U.length-1;rt>=0;rt--)Be=P.g=U[rt],je=tt(Be,ne,!0,P)&&je;if(Be=P.g=m,je=tt(Be,ne,!0,P)&&je,je=tt(Be,ne,!1,P)&&je,U)for(rt=0;rt<U.length;rt++)Be=P.g=U[rt],je=tt(Be,ne,!1,P)&&je}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var m=this.i;for(const P in m.g){const U=m.g[P];for(let ne=0;ne<U.length;ne++)te(U[ne]);delete m.g[P],m.h--}}this.G=null},$e.prototype.J=function(m,P,U,ne){return this.i.add(String(m),P,!1,U,ne)},$e.prototype.K=function(m,P,U,ne){return this.i.add(String(m),P,!0,U,ne)};function tt(m,P,U,ne){if(P=m.i.g[String(P)],!P)return!0;P=P.concat();let je=!0;for(let Be=0;Be<P.length;++Be){const rt=P[Be];if(rt&&!rt.da&&rt.capture==U){const Wt=rt.listener,Wr=rt.ha||rt.src;rt.fa&&fe(m.i,rt),je=Wt.call(Wr,ne)!==!1&&je}}return je&&!ne.defaultPrevented}function Jt(m,P){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=u(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(P)>2147483647?-1:l.setTimeout(m,P||0)}function At(m){m.g=Jt(()=>{m.g=null,m.i&&(m.i=!1,At(m))},m.l);const P=m.h;m.h=null,m.m.apply(null,P)}class mr extends V{constructor(P,U){super(),this.m=P,this.l=U,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:At(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zt(m){V.call(this),this.h=m,this.g={}}y(zt,V);var Ut=[];function br(m){ye(m.g,function(P,U){this.g.hasOwnProperty(U)&&Xe(P)},m),m.g={}}zt.prototype.N=function(){zt.Z.N.call(this),br(this)},zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mt=l.JSON.stringify,kt=l.JSON.parse,Pt=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function xt(){}function jr(){}var ir={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function mt(){I.call(this,"d")}y(mt,I);function Ht(){I.call(this,"c")}y(Ht,I);var sr={},Rt=null;function tr(){return Rt=Rt||new $e}sr.Ia="serverreachability";function $t(m){I.call(this,sr.Ia,m)}y($t,I);function Ir(m){const P=tr();nt(P,new $t(P))}sr.STAT_EVENT="statevent";function Vr(m,P){I.call(this,sr.STAT_EVENT,m),this.stat=P}y(Vr,I);function qt(m){const P=tr();nt(P,new Vr(P,m))}sr.Ja="timingevent";function Dt(m,P){I.call(this,sr.Ja,m),this.size=P}y(Dt,I);function ar(m,P){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},P)}function Ki(){this.g=!0}Ki.prototype.ua=function(){this.g=!1};function zn(m,P,U,ne,je,Be){m.info(function(){if(m.g)if(Be){var rt="",Wt=Be.split("&");for(let ur=0;ur<Wt.length;ur++){var Wr=Wt[ur].split("=");if(Wr.length>1){const en=Wr[0];Wr=Wr[1];const $n=en.split("_");rt=$n.length>=2&&$n[1]=="type"?rt+(en+"="+Wr+"&"):rt+(en+"=redacted&")}}}else rt=null;else rt=Be;return"XMLHTTP REQ ("+ne+") [attempt "+je+"]: "+P+`
`+U+`
`+rt})}function Bo(m,P,U,ne,je,Be,rt){m.info(function(){return"XMLHTTP RESP ("+ne+") [ attempt "+je+"]: "+P+`
`+U+`
`+Be+" "+rt})}function Vn(m,P,U,ne){m.info(function(){return"XMLHTTP TEXT ("+P+"): "+Bi(m,U)+(ne?" "+ne:"")})}function Nt(m,P){m.info(function(){return"TIMEOUT: "+P})}Ki.prototype.info=function(){};function Bi(m,P){if(!m.g)return P;if(!P)return null;try{const Be=JSON.parse(P);if(Be){for(m=0;m<Be.length;m++)if(Array.isArray(Be[m])){var U=Be[m];if(!(U.length<2)){var ne=U[1];if(Array.isArray(ne)&&!(ne.length<1)){var je=ne[0];if(je!="noop"&&je!="stop"&&je!="close")for(let rt=1;rt<ne.length;rt++)ne[rt]=""}}}}return Mt(Be)}catch{return P}}var mi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},On={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Li;function Ar(){}y(Ar,xt),Ar.prototype.g=function(){return new XMLHttpRequest},Li=new Ar;function Or(m){return encodeURIComponent(String(m))}function un(m){var P=1;m=m.split(":");const U=[];for(;P>0&&m.length;)U.push(m.shift()),P--;return m.length&&U.push(m.join(":")),U}function Xn(m,P,U,ne){this.j=m,this.i=P,this.l=U,this.S=ne||1,this.V=new zt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zo}function Zo(){this.i=null,this.g="",this.h=!1}var Ji={},Yi={};function wn(m,P,U){m.M=1,m.A=Mn(wr(P)),m.u=U,m.R=!0,Fi(m,null)}function Fi(m,P){m.F=Date.now(),bo(m),m.B=wr(m.A);var U=m.B,ne=m.S;Array.isArray(ne)||(ne=[String(ne)]),sl(U.i,"t",ne),m.C=0,U=m.j.L,m.h=new Zo,m.g=ut(m.j,U?P:null,!m.u),m.P>0&&(m.O=new mr(u(m.Y,m,m.g),m.P)),P=m.V,U=m.g,ne=m.ba;var je="readystatechange";Array.isArray(je)||(je&&(Ut[0]=je.toString()),je=Ut);for(let Be=0;Be<je.length;Be++){const rt=Ae(U,je[Be],ne||P.handleEvent,!1,P.h||P);if(!rt)break;P.g[rt.key]=rt}P=m.J?ie(m.J):{},m.u?(m.v||(m.v="POST"),P["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,P)):(m.v="GET",m.g.ea(m.B,m.v,null,P)),Ir(),zn(m.i,m.v,m.B,m.l,m.S,m.u)}Xn.prototype.ba=function(m){m=m.target;const P=this.O;P&&Zi(m)==3?P.j():this.Y(m)},Xn.prototype.Y=function(m){try{if(m==this.g)e:{const Wt=Zi(this.g),Wr=this.g.ya(),ur=this.g.ca();if(!(Wt<3)&&(Wt!=3||this.g&&(this.h.h||this.g.la()||ka(this.g)))){this.K||Wt!=4||Wr==7||(Wr==8||ur<=0?Ir(3):Ir(2)),es(this);var P=this.g.ca();this.X=P;var U=zi(this);if(this.o=P==200,Bo(this.i,this.v,this.B,this.l,this.S,Wt,P),this.o){if(this.U&&!this.L){t:{if(this.g){var ne,je=this.g;if((ne=je.g?je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(ne)){var Be=ne;break t}}Be=null}if(m=Be)Vn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Er(this,m);else{this.o=!1,this.m=3,qt(12),ts(this),Lo(this);break e}}if(this.R){m=!0;let en;for(;!this.K&&this.C<U.length;)if(en=yo(this,U),en==Yi){Wt==4&&(this.m=4,qt(14),m=!1),Vn(this.i,this.l,null,"[Incomplete Response]");break}else if(en==Ji){this.m=4,qt(15),Vn(this.i,this.l,U,"[Invalid Chunk]"),m=!1;break}else Vn(this.i,this.l,en,null),Er(this,en);if(ws(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wt!=4||U.length!=0||this.h.h||(this.m=1,qt(16),m=!1),this.o=this.o&&m,!m)Vn(this.i,this.l,U,"[Invalid Chunked Response]"),ts(this),Lo(this);else if(U.length>0&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.aa&&!rt.P&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),js(rt),rt.P=!0,qt(11))}}else Vn(this.i,this.l,U,null),Er(this,U);Wt==4&&ts(this),this.o&&!this.K&&(Wt==4?he(this.j,this):(this.o=!1,bo(this)))}else os(this.g),P==400&&U.indexOf("Unknown SID")>0?(this.m=3,qt(12)):(this.m=0,qt(13)),ts(this),Lo(this)}}}catch{}finally{}};function zi(m){if(!ws(m))return m.g.la();const P=ka(m.g);if(P==="")return"";let U="";const ne=P.length,je=Zi(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return ts(m),Lo(m),"";m.h.i=new l.TextDecoder}for(let Be=0;Be<ne;Be++)m.h.h=!0,U+=m.h.i.decode(P[Be],{stream:!(je&&Be==ne-1)});return P.length=0,m.h.g+=U,m.C=0,m.h.g}function ws(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function yo(m,P){var U=m.C,ne=P.indexOf(`
`,U);return ne==-1?Yi:(U=Number(P.substring(U,ne)),isNaN(U)?Ji:(ne+=1,ne+U>P.length?Yi:(P=P.slice(ne,ne+U),m.C=ne+U,P)))}Xn.prototype.cancel=function(){this.K=!0,ts(this)};function bo(m){m.T=Date.now()+m.H,Ss(m,m.H)}function Ss(m,P){if(m.D!=null)throw Error("WatchDog timer not null");m.D=ar(u(m.aa,m),P)}function es(m){m.D&&(l.clearTimeout(m.D),m.D=null)}Xn.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Nt(this.i,this.B),this.M!=2&&(Ir(),qt(17)),ts(this),this.m=2,Lo(this)):Ss(this,this.T-m)};function Lo(m){m.j.I==0||m.K||he(m.j,m)}function ts(m){es(m);var P=m.O;P&&typeof P.dispose=="function"&&P.dispose(),m.O=null,br(m.V),m.g&&(P=m.g,m.g=null,P.abort(),P.dispose())}function Er(m,P){try{var U=m.j;if(U.I!=0&&(U.g==m||_a(U.h,m))){if(!m.L&&_a(U.h,m)&&U.I==3){try{var ne=U.Ba.g.parse(P)}catch{ne=null}if(Array.isArray(ne)&&ne.length==3){var je=ne;if(je[0]==0){e:if(!U.v){if(U.g)if(U.g.F+3e3<m.F)H(U),ci(U);else break e;Si(U),qt(18)}}else U.xa=je[1],0<U.xa-U.K&&je[2]<37500&&U.F&&U.A==0&&!U.C&&(U.C=ar(u(U.Va,U),6e3));rs(U.h)<=1&&U.ta&&(U.ta=void 0)}else Ce(U,11)}else if((m.L||U.g==m)&&H(U),!N(P))for(je=U.Ba.g.parse(P),P=0;P<je.length;P++){let ur=je[P];const en=ur[0];if(!(en<=U.K))if(U.K=en,ur=ur[1],U.I==2)if(ur[0]=="c"){U.M=ur[1],U.ba=ur[2];const $n=ur[3];$n!=null&&(U.ka=$n,U.j.info("VER="+U.ka));const Mi=ur[4];Mi!=null&&(U.za=Mi,U.j.info("SVER="+U.za));const rn=ur[5];rn!=null&&typeof rn=="number"&&rn>0&&(ne=1.5*rn,U.O=ne,U.j.info("backChannelRequestTimeoutMs_="+ne)),ne=U;const _i=m.g;if(_i){const Wo=_i.g?_i.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wo){var Be=ne.h;Be.g||Wo.indexOf("spdy")==-1&&Wo.indexOf("quic")==-1&&Wo.indexOf("h2")==-1||(Be.j=Be.l,Be.g=new Set,Be.h&&(_s(Be,Be.h),Be.h=null))}if(ne.G){const ea=_i.g?_i.g.getResponseHeader("X-HTTP-Session-Id"):null;ea&&(ne.wa=ea,lr(ne.J,ne.G,ea))}}U.I=3,U.l&&U.l.ra(),U.aa&&(U.T=Date.now()-m.F,U.j.info("Handshake RTT: "+U.T+"ms")),ne=U;var rt=m;if(ne.na=Ge(ne,ne.L?ne.ba:null,ne.W),rt.L){Ts(ne.h,rt);var Wt=rt,Wr=ne.O;Wr&&(Wt.H=Wr),Wt.D&&(es(Wt),bo(Wt)),ne.g=rt}else Wn(ne);U.i.length>0&&Do(U)}else ur[0]!="stop"&&ur[0]!="close"||Ce(U,7);else U.I==3&&(ur[0]=="stop"||ur[0]=="close"?ur[0]=="stop"?Ce(U,7):ss(U):ur[0]!="noop"&&U.l&&U.l.qa(ur),U.A=0)}}Ir(4)}catch{}}var ql=class{constructor(m,P){this.g=m,this.map=P}};function Ks(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function gi(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function rs(m){return m.h?1:m.g?m.g.size:0}function _a(m,P){return m.h?m.h==P:m.g?m.g.has(P):!1}function _s(m,P){m.g?m.g.add(P):m.h=P}function Ts(m,P){m.h&&m.h==P?m.h=null:m.g&&m.g.has(P)&&m.g.delete(P)}Ks.prototype.cancel=function(){if(this.i=xi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function xi(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let P=m.i;for(const U of m.g.values())P=P.concat(U.G);return P}return b(m.i)}var rl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zn(m,P){if(m){m=m.split("&");for(let U=0;U<m.length;U++){const ne=m[U].indexOf("=");let je,Be=null;ne>=0?(je=m[U].substring(0,ne),Be=m[U].substring(ne+1)):je=m[U],P(je,Be?decodeURIComponent(Be.replace(/\+/g," ")):"")}}}function Fo(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let P;m instanceof Fo?(this.l=m.l,Cs(this,m.j),this.o=m.o,this.g=m.g,vo(this,m.u),this.h=m.h,yi(this,Xs(m.i)),this.m=m.m):m&&(P=String(m).match(rl))?(this.l=!1,Cs(this,P[1]||"",!0),this.o=wo(P[2]||""),this.g=wo(P[3]||"",!0),vo(this,P[4]),this.h=wo(P[5]||"",!0),yi(this,P[6]||"",!0),this.m=wo(P[7]||"")):(this.l=!1,this.i=new or(null,this.l))}Fo.prototype.toString=function(){const m=[];var P=this.j;P&&m.push(Mr(P,nl,!0),":");var U=this.g;return(U||P=="file")&&(m.push("//"),(P=this.o)&&m.push(Mr(P,nl,!0),"@"),m.push(Or(U).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U=this.u,U!=null&&m.push(":",String(U))),(U=this.h)&&(this.g&&U.charAt(0)!="/"&&m.push("/"),m.push(Mr(U,U.charAt(0)=="/"?Ys:il,!0))),(U=this.i.toString())&&m.push("?",U),(U=this.m)&&m.push("#",Mr(U,Ta)),m.join("")},Fo.prototype.resolve=function(m){const P=wr(this);let U=!!m.j;U?Cs(P,m.j):U=!!m.o,U?P.o=m.o:U=!!m.g,U?P.g=m.g:U=m.u!=null;var ne=m.h;if(U)vo(P,m.u);else if(U=!!m.h){if(ne.charAt(0)!="/")if(this.g&&!this.h)ne="/"+ne;else{var je=P.h.lastIndexOf("/");je!=-1&&(ne=P.h.slice(0,je+1)+ne)}if(je=ne,je==".."||je==".")ne="";else if(je.indexOf("./")!=-1||je.indexOf("/.")!=-1){ne=je.lastIndexOf("/",0)==0,je=je.split("/");const Be=[];for(let rt=0;rt<je.length;){const Wt=je[rt++];Wt=="."?ne&&rt==je.length&&Be.push(""):Wt==".."?((Be.length>1||Be.length==1&&Be[0]!="")&&Be.pop(),ne&&rt==je.length&&Be.push("")):(Be.push(Wt),ne=!0)}ne=Be.join("/")}else ne=je}return U?P.h=ne:U=m.i.toString()!=="",U?yi(P,Xs(m.i)):U=!!m.m,U&&(P.m=m.m),P};function wr(m){return new Fo(m)}function Cs(m,P,U){m.j=U?wo(P,!0):P,m.j&&(m.j=m.j.replace(/:$/,""))}function vo(m,P){if(P){if(P=Number(P),isNaN(P)||P<0)throw Error("Bad port number "+P);m.u=P}else m.u=null}function yi(m,P,U){P instanceof or?(m.i=P,So(m.i,m.l)):(U||(P=Mr(P,zo)),m.i=new or(P,m.l))}function lr(m,P,U){m.i.set(P,U)}function Mn(m){return lr(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function wo(m,P){return m?P?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Mr(m,P,U){return typeof m=="string"?(m=encodeURI(m).replace(P,Js),U&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Js(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var nl=/[#\/\?@]/g,il=/[#\?:]/g,Ys=/[#\?]/g,zo=/[#\?@]/g,Ta=/#/g;function or(m,P){this.h=this.g=null,this.i=m||null,this.j=!!P}function li(m){m.g||(m.g=new Map,m.h=0,m.i&&Zn(m.i,function(P,U){m.add(decodeURIComponent(P.replace(/\+/g," ")),U)}))}r=or.prototype,r.add=function(m,P){li(this),this.i=null,m=bi(this,m);let U=this.g.get(m);return U||this.g.set(m,U=[]),U.push(P),this.h+=1,this};function Qs(m,P){li(m),P=bi(m,P),m.g.has(P)&&(m.i=null,m.h-=m.g.get(P).length,m.g.delete(P))}function Ca(m,P){return li(m),P=bi(m,P),m.g.has(P)}r.forEach=function(m,P){li(this),this.g.forEach(function(U,ne){U.forEach(function(je){m.call(P,je,ne,this)},this)},this)};function ol(m,P){li(m);let U=[];if(typeof P=="string")Ca(m,P)&&(U=U.concat(m.g.get(bi(m,P))));else for(m=Array.from(m.g.values()),P=0;P<m.length;P++)U=U.concat(m[P]);return U}r.set=function(m,P){return li(this),this.i=null,m=bi(this,m),Ca(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[P]),this.h+=1,this},r.get=function(m,P){return m?(m=ol(this,m),m.length>0?String(m[0]):P):P};function sl(m,P,U){Qs(m,P),U.length>0&&(m.i=null,m.g.set(bi(m,P),b(U)),m.h+=U.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],P=Array.from(this.g.keys());for(let ne=0;ne<P.length;ne++){var U=P[ne];const je=Or(U);U=ol(this,U);for(let Be=0;Be<U.length;Be++){let rt=je;U[Be]!==""&&(rt+="="+Or(U[Be])),m.push(rt)}}return this.i=m.join("&")};function Xs(m){const P=new or;return P.i=m.i,m.g&&(P.g=new Map(m.g),P.h=m.h),P}function bi(m,P){return P=String(P),m.j&&(P=P.toLowerCase()),P}function So(m,P){P&&!m.j&&(li(m),m.i=null,m.g.forEach(function(U,ne){const je=ne.toLowerCase();ne!=je&&(Qs(this,ne),sl(this,je,U))},m)),m.j=P}function Vo(m,P){const U=new Ki;if(l.Image){const ne=new Image;ne.onload=g(Sn,U,"TestLoadImage: loaded",!0,P,ne),ne.onerror=g(Sn,U,"TestLoadImage: error",!1,P,ne),ne.onabort=g(Sn,U,"TestLoadImage: abort",!1,P,ne),ne.ontimeout=g(Sn,U,"TestLoadImage: timeout",!1,P,ne),l.setTimeout(function(){ne.ontimeout&&ne.ontimeout()},1e4),ne.src=m}else P(!1)}function vi(m,P){const U=new Ki,ne=new AbortController,je=setTimeout(()=>{ne.abort(),Sn(U,"TestPingServer: timeout",!1,P)},1e4);fetch(m,{signal:ne.signal}).then(Be=>{clearTimeout(je),Be.ok?Sn(U,"TestPingServer: ok",!0,P):Sn(U,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(je),Sn(U,"TestPingServer: error",!1,P)})}function Sn(m,P,U,ne,je){try{je&&(je.onload=null,je.onerror=null,je.onabort=null,je.ontimeout=null),ne(U)}catch{}}function Lt(){this.g=new Pt}function ns(m){this.i=m.Sb||null,this.h=m.ab||!1}y(ns,xt),ns.prototype.g=function(){return new Vi(this.i,this.h)};function Vi(m,P){$e.call(this),this.H=m,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Vi,$e),r=Vi.prototype,r.open=function(m,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=P,this.readyState=1,Dn(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const P={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(P.body=m),(this.H||l).fetch(new Request(this.D,P)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,As(this)),this.readyState=0},r.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Dn(this)),this.g&&(this.readyState=3,Dn(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ul(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ul(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}r.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var P=m.value?m.value:new Uint8Array(0);(P=this.B.decode(P,{stream:!m.done}))&&(this.response=this.responseText+=P)}m.done?As(this):Dn(this),this.readyState==3&&Ul(this)}},r.Oa=function(m){this.g&&(this.response=this.responseText=m,As(this))},r.Na=function(m){this.g&&(this.response=m,As(this))},r.ga=function(){this.g&&As(this)};function As(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Dn(m)}r.setRequestHeader=function(m,P){this.A.append(m,P)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],P=this.h.entries();for(var U=P.next();!U.done;)U=U.value,m.push(U[0]+": "+U[1]),U=P.next();return m.join(`\r
`)};function Dn(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Oo(m){let P="";return ye(m,function(U,ne){P+=ne,P+=":",P+=U,P+=`\r
`}),P}function Aa(m,P,U){e:{for(ne in U){var ne=!1;break e}ne=!0}ne||(U=Oo(U),typeof m=="string"?U!=null&&Or(U):lr(m,P,U))}function Rr(m){$e.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Rr,$e);var Zs=/^https?$/i,al=["POST","PUT"];r=Rr.prototype,r.Fa=function(m){this.H=m},r.ea=function(m,P,U,ne){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);P=P?P.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Li.g(),this.g.onreadystatechange=_(u(this.Ca,this));try{this.B=!0,this.g.open(P,String(m),!0),this.B=!1}catch(Be){Qi(this,Be);return}if(m=U||"",U=new Map(this.headers),ne)if(Object.getPrototypeOf(ne)===Object.prototype)for(var je in ne)U.set(je,ne[je]);else if(typeof ne.keys=="function"&&typeof ne.get=="function")for(const Be of ne.keys())U.set(Be,ne.get(Be));else throw Error("Unknown input type for opt_headers: "+String(ne));ne=Array.from(U.keys()).find(Be=>Be.toLowerCase()=="content-type"),je=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(al,P,void 0)>=0)||ne||je||U.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Be,rt]of U)this.g.setRequestHeader(Be,rt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Be){Qi(this,Be)}};function Qi(m,P){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=P,m.o=5,_o(m),is(m)}function _o(m){m.A||(m.A=!0,nt(m,"complete"),nt(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,nt(this,"complete"),nt(this,"abort"),is(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),is(this,!0)),Rr.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Xi(this):this.Xa())},r.Xa=function(){Xi(this)};function Xi(m){if(m.h&&typeof s<"u"){if(m.v&&Zi(m)==4)setTimeout(m.Ca.bind(m),0);else if(nt(m,"readystatechange"),Zi(m)==4){m.h=!1;try{const Be=m.ca();e:switch(Be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var U;if(!(U=P)){var ne;if(ne=Be===0){let rt=String(m.D).match(rl)[1]||null;!rt&&l.self&&l.self.location&&(rt=l.self.location.protocol.slice(0,-1)),ne=!Zs.test(rt?rt.toLowerCase():"")}U=ne}if(U)nt(m,"complete"),nt(m,"success");else{m.o=6;try{var je=Zi(m)>2?m.g.statusText:""}catch{je=""}m.l=je+" ["+m.ca()+"]",_o(m)}}finally{is(m)}}}}function is(m,P){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const U=m.g;m.g=null,P||nt(m,"ready");try{U.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Zi(m){return m.g?m.g.readyState:0}r.ca=function(){try{return Zi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(m){if(this.g){var P=this.g.responseText;return m&&P.indexOf(m)==0&&(P=P.substring(m.length)),kt(P)}};function ka(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function os(m){const P={};m=(m.g&&Zi(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let ne=0;ne<m.length;ne++){if(N(m[ne]))continue;var U=un(m[ne]);const je=U[0];if(U=U[1],typeof U!="string")continue;U=U.trim();const Be=P[je]||[];P[je]=Be,Be.push(U)}we(P,function(ne){return ne.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(m,P,U){return U&&U.internalChannelParams&&U.internalChannelParams[m]||P}function ks(m){this.za=0,this.i=[],this.j=new Ki,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wi("baseRetryDelayMs",5e3,m),this.Za=wi("retryDelaySeedMs",1e4,m),this.Ta=wi("forwardChannelMaxRetries",2,m),this.va=wi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Ks(m&&m.concurrentRequestLimit),this.Ba=new Lt,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ks.prototype,r.ka=8,r.I=1,r.connect=function(m,P,U,ne){qt(0),this.W=m,this.H=P||{},U&&ne!==void 0&&(this.H.OSID=U,this.H.OAID=ne),this.F=this.X,this.J=Ge(this,null,this.W),Do(this)};function ss(m){if(Mo(m),m.I==3){var P=m.V++,U=wr(m.J);if(lr(U,"SID",m.M),lr(U,"RID",P),lr(U,"TYPE","terminate"),ei(m,U),P=new Xn(m,m.j,P),P.M=2,P.A=Mn(wr(U)),U=!1,l.navigator&&l.navigator.sendBeacon)try{U=l.navigator.sendBeacon(P.A.toString(),"")}catch{}!U&&l.Image&&(new Image().src=P.A,U=!0),U||(P.g=ut(P.j,null),P.g.ea(P.A)),P.F=Date.now(),bo(P)}De(m)}function ci(m){m.g&&(js(m),m.g.cancel(),m.g=null)}function Mo(m){ci(m),m.v&&(l.clearTimeout(m.v),m.v=null),H(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function Do(m){if(!gi(m.h)&&!m.m){m.m=!0;var P=m.Ea;J||A(),se||(J(),se=!0),O.add(P,m),m.D=0}}function ll(m,P){return rs(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=P.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=ar(u(m.Ea,m,P),xe(m,m.D)),m.D++,!0)}r.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const je=new Xn(this,this.j,m);let Be=this.o;if(this.U&&(Be?(Be=ie(Be),Y(Be,this.U)):Be=this.U),this.u!==null||this.R||(je.J=Be,Be=null),this.S)e:{for(var P=0,U=0;U<this.i.length;U++){t:{var ne=this.i[U];if("__data__"in ne.map&&(ne=ne.map.__data__,typeof ne=="string")){ne=ne.length;break t}ne=void 0}if(ne===void 0)break;if(P+=ne,P>4096){P=U;break e}if(P===4096||U===this.i.length-1){P=U+1;break e}}P=1e3}else P=1e3;P=ja(this,je,P),U=wr(this.J),lr(U,"RID",m),lr(U,"CVER",22),this.G&&lr(U,"X-HTTP-Session-Id",this.G),ei(this,U),Be&&(this.R?P="headers="+Or(Oo(Be))+"&"+P:this.u&&Aa(U,this.u,Be)),_s(this.h,je),this.Ra&&lr(U,"TYPE","init"),this.S?(lr(U,"$req",P),lr(U,"SID","null"),je.U=!0,wn(je,U,null)):wn(je,U,P),this.I=2}}else this.I==3&&(m?Oi(this,m):this.i.length==0||gi(this.h)||Oi(this))};function Oi(m,P){var U;P?U=P.l:U=m.V++;const ne=wr(m.J);lr(ne,"SID",m.M),lr(ne,"RID",U),lr(ne,"AID",m.K),ei(m,ne),m.u&&m.o&&Aa(ne,m.u,m.o),U=new Xn(m,m.j,U,m.D+1),m.u===null&&(U.J=m.o),P&&(m.i=P.G.concat(m.i)),P=ja(m,U,1e3),U.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),_s(m.h,U),wn(U,ne,P)}function ei(m,P){m.H&&ye(m.H,function(U,ne){lr(P,ne,U)}),m.l&&ye({},function(U,ne){lr(P,ne,U)})}function ja(m,P,U){U=Math.min(m.i.length,U);const ne=m.l?u(m.l.Ka,m.l,m):null;e:{var je=m.i;let Wt=-1;for(;;){const Wr=["count="+U];Wt==-1?U>0?(Wt=je[0].g,Wr.push("ofs="+Wt)):Wt=0:Wr.push("ofs="+Wt);let ur=!0;for(let en=0;en<U;en++){var Be=je[en].g;const $n=je[en].map;if(Be-=Wt,Be<0)Wt=Math.max(0,je[en].g-100),ur=!1;else try{Be="req"+Be+"_"||"";try{var rt=$n instanceof Map?$n:Object.entries($n);for(const[Mi,rn]of rt){let _i=rn;d(rn)&&(_i=Mt(rn)),Wr.push(Be+Mi+"="+encodeURIComponent(_i))}}catch(Mi){throw Wr.push(Be+"type="+encodeURIComponent("_badmap")),Mi}}catch{ne&&ne($n)}}if(ur){rt=Wr.join("&");break e}}rt=void 0}return m=m.i.splice(0,U),P.G=m,rt}function Wn(m){if(!m.g&&!m.v){m.Y=1;var P=m.Da;J||A(),se||(J(),se=!0),O.add(P,m),m.A=0}}function Si(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=ar(u(m.Da,m),xe(m,m.A)),m.A++,!0)}r.Da=function(){if(this.v=null,C(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=ar(u(this.Wa,this),m)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,qt(10),ci(this),C(this))};function js(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function C(m){m.g=new Xn(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var P=wr(m.na);lr(P,"RID","rpc"),lr(P,"SID",m.M),lr(P,"AID",m.K),lr(P,"CI",m.F?"0":"1"),!m.F&&m.ia&&lr(P,"TO",m.ia),lr(P,"TYPE","xmlhttp"),ei(m,P),m.u&&m.o&&Aa(P,m.u,m.o),m.O&&(m.g.H=m.O);var U=m.g;m=m.ba,U.M=1,U.A=Mn(wr(P)),U.u=null,U.R=!0,Fi(U,m)}r.Va=function(){this.C!=null&&(this.C=null,ci(this),Si(this),qt(19))};function H(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function he(m,P){var U=null;if(m.g==P){H(m),js(m),m.g=null;var ne=2}else if(_a(m.h,P))U=P.G,Ts(m.h,P),ne=1;else return;if(m.I!=0){if(P.o)if(ne==1){U=P.u?P.u.length:0,P=Date.now()-P.F;var je=m.D;ne=tr(),nt(ne,new Dt(ne,U)),Do(m)}else Wn(m);else if(je=P.m,je==3||je==0&&P.X>0||!(ne==1&&ll(m,P)||ne==2&&Si(m)))switch(U&&U.length>0&&(P=m.h,P.i=P.i.concat(U)),je){case 1:Ce(m,5);break;case 4:Ce(m,10);break;case 3:Ce(m,6);break;default:Ce(m,2)}}}function xe(m,P){let U=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(U*=2),U*P}function Ce(m,P){if(m.j.info("Error code "+P),P==2){var U=u(m.bb,m),ne=m.Ua;const je=!ne;ne=new Fo(ne||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Cs(ne,"https"),Mn(ne),je?Vo(ne.toString(),U):vi(ne.toString(),U)}else qt(2);m.I=0,m.l&&m.l.pa(P),De(m),Mo(m)}r.bb=function(m){m?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function De(m){if(m.I=0,m.ja=[],m.l){const P=xi(m.h);(P.length!=0||m.i.length!=0)&&(R(m.ja,P),R(m.ja,m.i),m.h.i.length=0,b(m.i),m.i.length=0),m.l.oa()}}function Ge(m,P,U){var ne=U instanceof Fo?wr(U):new Fo(U);if(ne.g!="")P&&(ne.g=P+"."+ne.g),vo(ne,ne.u);else{var je=l.location;ne=je.protocol,P=P?P+"."+je.hostname:je.hostname,je=+je.port;const Be=new Fo(null);ne&&Cs(Be,ne),P&&(Be.g=P),je&&vo(Be,je),U&&(Be.h=U),ne=Be}return U=m.G,P=m.wa,U&&P&&lr(ne,U,P),lr(ne,"VER",m.ka),ei(m,ne),ne}function ut(m,P,U){if(P&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return P=m.Aa&&!m.ma?new Rr(new ns({ab:U})):new Rr(m.ma),P.Fa(m.L),P}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function yt(){}r=yt.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ft(){}Ft.prototype.g=function(m,P){return new St(m,P)};function St(m,P){$e.call(this),this.g=new ks(P),this.l=m,this.h=P&&P.messageUrlParams||null,m=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(m?m["X-WebChannel-Content-Type"]=P.messageContentType:m={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.sa&&(m?m["X-WebChannel-Client-Profile"]=P.sa:m={"X-WebChannel-Client-Profile":P.sa}),this.g.U=m,(m=P&&P.Qb)&&!N(m)&&(this.g.u=m),this.A=P&&P.supportsCrossDomainXhr||!1,this.v=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!N(P)&&(this.g.G=P,m=this.h,m!==null&&P in m&&(m=this.h,P in m&&delete m[P])),this.j=new Dr(this)}y(St,$e),St.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},St.prototype.close=function(){ss(this.g)},St.prototype.o=function(m){var P=this.g;if(typeof m=="string"){var U={};U.__data__=m,m=U}else this.v&&(U={},U.__data__=Mt(m),m=U);P.i.push(new ql(P.Ya++,m)),P.I==3&&Do(P)},St.prototype.N=function(){this.g.l=null,delete this.j,ss(this.g),delete this.g,St.Z.N.call(this)};function gr(m){mt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var P=m.__sm__;if(P){e:{for(const U in P){m=U;break e}m=void 0}(this.i=m)&&(m=this.i,P=P!==null&&m in P?P[m]:void 0),this.data=P}else this.data=m}y(gr,mt);function Zr(){Ht.call(this),this.status=1}y(Zr,Ht);function Dr(m){this.g=m}y(Dr,yt),Dr.prototype.ra=function(){nt(this.g,"a")},Dr.prototype.qa=function(m){nt(this.g,new gr(m))},Dr.prototype.pa=function(m){nt(this.g,new Zr)},Dr.prototype.oa=function(){nt(this.g,"b")},Ft.prototype.createWebChannel=Ft.prototype.g,St.prototype.send=St.prototype.o,St.prototype.open=St.prototype.m,St.prototype.close=St.prototype.close,F_=function(){return new Ft},L_=function(){return tr()},B_=sr,B1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},mi.NO_ERROR=0,mi.TIMEOUT=8,mi.HTTP_ERROR=6,dm=mi,On.COMPLETE="complete",N_=On,jr.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",$e.prototype.listen=$e.prototype.J,Yh=jr,Rr.prototype.listenOnce=Rr.prototype.K,Rr.prototype.getLastError=Rr.prototype.Ha,Rr.prototype.getLastErrorCode=Rr.prototype.ya,Rr.prototype.getStatus=Rr.prototype.ca,Rr.prototype.getResponseJson=Rr.prototype.La,Rr.prototype.getResponseText=Rr.prototype.la,Rr.prototype.send=Rr.prototype.ea,Rr.prototype.setWithCredentials=Rr.prototype.Fa,P_=Rr}).apply(typeof Up<"u"?Up:typeof self<"u"?self:typeof window<"u"?window:{});const Ab="@firebase/firestore",kb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ui.UNAUTHENTICATED=new Ui(null),Ui.GOOGLE_CREDENTIALS=new Ui("google-credentials-uid"),Ui.FIRST_PARTY=new Ui("first-party-uid"),Ui.MOCK_USER=new Ui("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new b5("@firebase/firestore");function ku(){return Nd.logLevel}function Qe(r,...e){if(Nd.logLevel<=xr.DEBUG){const t=e.map(E5);Nd.debug(`Firestore (${uh}): ${r}`,...t)}}function Ro(r,...e){if(Nd.logLevel<=xr.ERROR){const t=e.map(E5);Nd.error(`Firestore (${uh}): ${r}`,...t)}}function Bd(r,...e){if(Nd.logLevel<=xr.WARN){const t=e.map(E5);Nd.warn(`Firestore (${uh}): ${r}`,...t)}}function E5(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,z_(r,n,t)}function z_(r,e,t){let n=`FIRESTORE (${uh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Ro(n),new Error(n)}function Et(r,e,t,n){let o="Unexpected state";typeof t=="string"?o=t:n=t,r||z_(e,o,n)}function er(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class it extends Ol{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ui.UNAUTHENTICATED)))}shutdown(){}}class yE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class bE{constructor(e){this.t=e,this.currentUser=Ui.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Et(this.o===void 0,42304);let n=this.i;const o=h=>this.i!==n?(n=this.i,t(h)):Promise.resolve();let s=new Qa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Qa,e.enqueueRetryable((()=>o(this.currentUser)))};const l=()=>{const h=s;e.enqueueRetryable((async()=>{await h.promise,await o(this.currentUser)}))},d=h=>{Qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(Qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Qa)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(Qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Et(typeof n.accessToken=="string",31837,{l:n}),new V_(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string",2055,{h:e}),new Ui(e)}}class vE{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Ui.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wE{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new vE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ui.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class jb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SE{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ms(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Et(this.o===void 0,3512);const n=s=>{s.error!=null&&Qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.m;return this.m=s.token,Qe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>n(s)))};const o=s=>{Qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>o(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?o(s):Qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new jb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Et(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new jb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const o=_E(40);for(let s=0;s<o.length;++s)n.length<20&&o[s]<t&&(n+=e.charAt(o[s]%62))}return n}}function Zt(r,e){return r<e?-1:r>e?1:0}function L1(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const o=r.charAt(n),s=e.charAt(n);if(o!==s)return n1(o)===n1(s)?Zt(o,s):n1(o)?1:-1}return Zt(r.length,e.length)}const TE=55296,CE=57343;function n1(r){const e=r.charCodeAt(0);return e>=TE&&e<=CE}function Uu(r,e,t){return r.length===e.length&&r.every(((n,o)=>t(n,e[o])))}function O_(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="__name__";class Ua{constructor(e,t,n){t===void 0?t=0:t>e.length&&wt(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&wt(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Ua.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ua?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let o=0;o<n;o++){const s=Ua.compareSegments(e.get(o),t.get(o));if(s!==0)return s}return Zt(e.length,t.length)}static compareSegments(e,t){const n=Ua.isNumericId(e),o=Ua.isNumericId(t);return n&&!o?-1:!n&&o?1:n&&o?Ua.extractNumericId(e).compare(Ua.extractNumericId(t)):L1(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pc.fromString(e.substring(4,e.length-2))}}class Nr extends Ua{construct(e,t,n){return new Nr(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new it(We.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((o=>o.length>0)))}return new Nr(t)}static emptyPath(){return new Nr([])}}const AE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends Ua{construct(e,t,n){return new In(e,t,n)}static isValidIdentifier(e){return AE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ib}static keyField(){return new In([Ib])}static fromServerFormat(e){const t=[];let n="",o=0;const s=()=>{if(n.length===0)throw new it(We.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let l=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new it(We.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[o+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new it(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=h,o+=2}else d==="`"?(l=!l,o++):d!=="."||l?(n+=d,o++):(s(),o++)}if(s(),l)throw new it(We.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(t)}static emptyPath(){return new In([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.path=e}static fromPath(e){return new st(Nr.fromString(e))}static fromName(e){return new st(Nr.fromString(e).popFirst(5))}static empty(){return new st(Nr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Nr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new st(new Nr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(r,e,t){if(!t)throw new it(We.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function kE(r,e,t,n){if(e===!0&&n===!0)throw new it(We.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Eb(r){if(!st.isDocumentKey(r))throw new it(We.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Rb(r){if(st.isDocumentKey(r))throw new it(We.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function D_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function u0(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":wt(12329,{type:typeof r})}function Gs(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new it(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=u0(r);throw new it(We.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(r,e){const t={typeString:r};return e&&(t.value=e),t}function $f(r,e){if(!D_(r))throw new it(We.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const o=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const l=r[n];if(o&&typeof l!==o){t=`JSON field '${n}' must be a ${o}.`;break}if(s!==void 0&&l!==s.value){t=`Expected '${n}' field to equal '${s.value}'`;break}}if(t)throw new it(We.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=-62135596800,Nb=1e6;class Jr{static now(){return Jr.fromMillis(Date.now())}static fromDate(e){return Jr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Nb);return new Jr(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new it(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new it(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Pb)throw new it(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new it(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nb}_compareTo(e){return this.seconds===e.seconds?Zt(this.nanoseconds,e.nanoseconds):Zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Jr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($f(e,Jr._jsonSchema))return new Jr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Pb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Jr._jsonSchemaVersion="firestore/timestamp/1.0",Jr._jsonSchema={type:si("string",Jr._jsonSchemaVersion),seconds:si("number"),nanoseconds:si("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{static fromTimestamp(e){return new Bt(e)}static min(){return new Bt(new Jr(0,0))}static max(){return new Bt(new Jr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=-1;class Mm{constructor(e,t,n,o){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=o}}function F1(r){return r.fields.find((e=>e.kind===2))}function fd(r){return r.fields.filter((e=>e.kind!==2))}Mm.UNKNOWN_ID=-1;class um{constructor(e,t){this.fieldPath=e,this.kind=t}}class Sf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Sf(0,vs.min())}}function jE(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,o=Bt.fromTimestamp(n===1e9?new Jr(t+1,0):new Jr(t,n));return new vs(o,st.empty(),e)}function W_(r){return new vs(r.readTime,r.key,wf)}class vs{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new vs(Bt.min(),st.empty(),wf)}static max(){return new vs(Bt.max(),st.empty(),wf)}}function P5(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=st.comparator(r.documentKey,e.documentKey),t!==0?t:Zt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class q_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qd(r){if(r.code!==We.FAILED_PRECONDITION||r.message!==$_)throw r;Qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&wt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Re(((n,o)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,o)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Re?t:Re.resolve(t)}catch(t){return Re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Re.reject(t)}static resolve(e){return new Re(((t,n)=>{t(e)}))}static reject(e){return new Re(((t,n)=>{n(e)}))}static waitFor(e){return new Re(((t,n)=>{let o=0,s=0,l=!1;e.forEach((d=>{++o,d.next((()=>{++s,l&&s===o&&t()}),(h=>n(h)))})),l=!0,s===o&&t()}))}static or(e){let t=Re.resolve(!1);for(const n of e)t=t.next((o=>o?Re.resolve(o):n()));return t}static forEach(e,t){const n=[];return e.forEach(((o,s)=>{n.push(t.call(this,o,s))})),this.waitFor(n)}static mapArray(e,t){return new Re(((n,o)=>{const s=e.length,l=new Array(s);let d=0;for(let h=0;h<s;h++){const u=h;t(e[u]).next((g=>{l[u]=g,++d,d===s&&n(l)}),(g=>o(g)))}}))}static doWhile(e,t){return new Re(((n,o)=>{const s=()=>{e()===!0?t().next((()=>{s()}),o):n()};s()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="SimpleDb";class h0{static open(e,t,n,o){try{return new h0(t,e.transaction(o,n))}catch(s){throw new af(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Qa,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new af(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const o=N5(n.target.error);this.S.reject(new af(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Qe(xs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new EE(t)}}class Nc{static delete(e){return Qe(xs,"Removing database:",e),gd(NS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!WS())return!1;if(Nc.F())return!0;const e=fi(),t=Nc.M(e),n=0<t&&t<10,o=U_(e),s=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,Nc.M(fi())===12.2&&Ro("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Qe(xs,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=s=>{const l=s.target.result;t(l)},o.onblocked=()=>{n(new af(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const l=s.target.error;l.name==="VersionError"?n(new it(We.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?n(new it(We.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):n(new af(e,l))},o.onupgradeneeded=s=>{Qe(xs,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const l=s.target.result;this.N.k(l,o.transaction,s.oldVersion,this.version).next((()=>{Qe(xs,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,o){const s=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const d=h0.open(this.db,e,s?"readonly":"readwrite",n),h=o(d).next((u=>(d.C(),u))).catch((u=>(d.abort(u),Re.reject(u)))).toPromise();return h.catch((()=>{})),await d.D,h}catch(d){const h=d,u=h.name!=="FirebaseError"&&l<3;if(Qe(xs,"Transaction failed with error:",h.message,"Retrying:",u),this.close(),!u)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function U_(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class IE{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return gd(this.U.delete())}}class af extends it{constructor(e,t){super(We.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Dc(r){return r.name==="IndexedDbTransactionError"}class EE{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(Qe(xs,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(Qe(xs,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),gd(n)}add(e){return Qe(xs,"ADD",this.store.name,e,e),gd(this.store.add(e))}get(e){return gd(this.store.get(e)).next((t=>(t===void 0&&(t=null),Qe(xs,"GET",this.store.name,e,t),t)))}delete(e){return Qe(xs,"DELETE",this.store.name,e),gd(this.store.delete(e))}count(){return Qe(xs,"COUNT",this.store.name),gd(this.store.count())}J(e,t){const n=this.options(e,t),o=n.index?this.store.index(n.index):this.store;if(typeof o.getAll=="function"){const s=o.getAll(n.range);return new Re(((l,d)=>{s.onerror=h=>{d(h.target.error)},s.onsuccess=h=>{l(h.target.result)}}))}{const s=this.cursor(n),l=[];return this.H(s,((d,h)=>{l.push(h)})).next((()=>l))}}Y(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new Re(((o,s)=>{n.onerror=l=>{s(l.target.error)},n.onsuccess=l=>{o(l.target.result)}}))}Z(e,t){Qe(xs,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const o=this.cursor(n);return this.H(o,((s,l,d)=>d.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);const o=this.cursor(n);return this.H(o,t)}te(e){const t=this.cursor({});return new Re(((n,o)=>{t.onerror=s=>{const l=N5(s.target.error);o(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next((d=>{d?l.continue():n()})):n()}}))}H(e,t){const n=[];return new Re(((o,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void o();const h=new IE(d),u=t(d.primaryKey,d.value,h);if(u instanceof Re){const g=u.catch((y=>(h.done(),Re.reject(y))));n.push(g)}h.isDone?o():h.G===null?d.continue():d.continue(h.G)}})).next((()=>Re.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function gd(r){return new Re(((e,t)=>{r.onsuccess=n=>{const o=n.target.result;e(o)},r.onerror=n=>{const o=N5(n.target.error);t(o)}}))}let Bb=!1;function N5(r){const e=Nc.M(fi());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new it("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Bb||(Bb=!0,setTimeout((()=>{throw n}),0)),n}}return r}const lf="IndexBackfiller";class RE{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Qe(lf,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();Qe(lf,`Documents written: ${t}`)}catch(t){Dc(t)?Qe(lf,"Ignoring IndexedDB error during index backfill: ",t):await qd(t)}await this.re(6e4)}))}}class PE{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const n=new Set;let o=t,s=!0;return Re.doWhile((()=>s===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!n.has(l))return Qe(lf,`Processing collection: ${l}`),this.oe(e,l,o).next((d=>{o-=d,n.add(l)}));s=!1})))).next((()=>t-o))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((o=>this.localStore.localDocuments.getNextDocuments(e,t,o,n).next((s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(o,s))).next((d=>(Qe(lf,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>l.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((o,s)=>{const l=W_(s);P5(l,n)>0&&(n=l)})),new vs(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ws.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=-1;function f0(r){return r==null}function _f(r){return r===0&&1/r==-1/0}function NE(r){return typeof r=="number"&&Number.isInteger(r)&&!_f(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="";function xo(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Lb(e)),e=BE(r.get(t),e);return Lb(e)}function BE(r,e){let t=e;const n=r.length;for(let o=0;o<n;o++){const s=r.charAt(o);switch(s){case"\0":t+="";break;case Dm:t+="";break;default:t+=s}}return t}function Lb(r){return r+Dm+""}function Ga(r){const e=r.length;if(Et(e>=2,64408,{path:r}),e===2)return Et(r.charAt(0)===Dm&&r.charAt(1)==="",56145,{path:r}),Nr.emptyPath();const t=e-2,n=[];let o="";for(let s=0;s<e;){const l=r.indexOf(Dm,s);switch((l<0||l>t)&&wt(50515,{path:r}),r.charAt(l+1)){case"":const d=r.substring(s,l);let h;o.length===0?h=d:(o+=d,h=o,o=""),n.push(h);break;case"":o+=r.substring(s,l),o+="\0";break;case"":o+=r.substring(s,l+1);break;default:wt(61167,{path:r})}s=l+2}return new Nr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd="remoteDocuments",qf="owner",bu="owner",Tf="mutationQueues",LE="userId",ga="mutations",Fb="batchId",wd="userMutationsIndex",zb=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(r,e){return[r,xo(e)]}function H_(r,e,t){return[r,xo(e),t]}const FE={},Hu="documentMutations",Wm="remoteDocumentsV14",zE=["prefixPath","collectionGroup","readTime","documentId"],fm="documentKeyIndex",VE=["prefixPath","collectionGroup","documentId"],G_="collectionGroupIndex",OE=["collectionGroup","readTime","prefixPath","documentId"],Cf="remoteDocumentGlobal",z1="remoteDocumentGlobalKey",Gu="targets",K_="queryTargetsIndex",ME=["canonicalId","targetId"],Ku="targetDocuments",DE=["targetId","path"],B5="documentTargetsIndex",WE=["path","targetId"],$m="targetGlobalKey",Td="targetGlobal",Af="collectionParents",$E=["collectionId","parent"],Ju="clientMetadata",qE="clientId",p0="bundles",UE="bundleId",m0="namedQueries",HE="name",L5="indexConfiguration",GE="indexId",V1="collectionGroupIndex",KE="collectionGroup",cf="indexState",JE=["indexId","uid"],J_="sequenceNumberIndex",YE=["uid","sequenceNumber"],df="indexEntries",QE=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Y_="documentKeyIndex",XE=["indexId","uid","orderedDocumentKey"],g0="documentOverlays",ZE=["userId","collectionPath","documentId"],O1="collectionPathOverlayIndex",eR=["userId","collectionPath","largestBatchId"],Q_="collectionGroupOverlayIndex",tR=["userId","collectionGroup","largestBatchId"],F5="globals",rR="name",X_=[Tf,ga,Hu,pd,Gu,qf,Td,Ku,Ju,Cf,Af,p0,m0],nR=[...X_,g0],Z_=[Tf,ga,Hu,Wm,Gu,qf,Td,Ku,Ju,Cf,Af,p0,m0,g0],e3=Z_,z5=[...e3,L5,cf,df],iR=z5,t3=[...z5,F5],oR=t3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1 extends q_{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function pi(r,e){const t=er(r);return Nc.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Wc(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function r3(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,t){this.comparator=e,this.root=t||Hi.EMPTY}insert(e,t){return new vn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hi.BLACK,null,null))}remove(e){return new vn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return t+n.left.size;o<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hp(this.root,e,this.comparator,!0)}}class Hp{constructor(e,t,n,o){this.isReverse=o,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&o&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hi{constructor(e,t,n,o,s){this.key=e,this.value=t,this.color=n??Hi.RED,this.left=o??Hi.EMPTY,this.right=s??Hi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,o,s){return new Hi(e??this.key,t??this.value,n??this.color,o??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let o=this;const s=n(e,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(e,t,n),null):s===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,n)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Hi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Hi.EMPTY;n=o.right.min(),o=o.copy(n.key,n.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw wt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw wt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw wt(27949);return e+(this.isRed()?0:1)}}Hi.EMPTY=null,Hi.RED=!0,Hi.BLACK=!1;Hi.EMPTY=new class{constructor(){this.size=0}get key(){throw wt(57766)}get value(){throw wt(16141)}get color(){throw wt(16727)}get left(){throw wt(29726)}get right(){throw wt(36894)}copy(e,t,n,o,s){return this}insert(e,t,n){return new Hi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e){this.comparator=e,this.data=new vn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const o=n.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ob(this.data.getIterator())}getIteratorFrom(e){return new Ob(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof Xr)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,s=n.getNext().key;if(this.comparator(o,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Xr(this.comparator);return t.data=e,t}}class Ob{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vu(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new Qo([])}unionWith(e){let t=new Xr(In.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Qo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uu(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new n3("Invalid base64 string: "+s):s}})(e);return new ai(t)}static fromUint8Array(e){const t=(function(o){let s="";for(let l=0;l<o.length;++l)s+=String.fromCharCode(o[l]);return s})(e);return new ai(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ai.EMPTY_BYTE_STRING=new ai("");const sR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fl(r){if(Et(!!r,39018),typeof r=="string"){let e=0;const t=sR.exec(r);if(Et(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:bn(r.seconds),nanos:bn(r.nanos)}}function bn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function zl(r){return typeof r=="string"?ai.fromBase64String(r):ai.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3="server_timestamp",o3="__type__",s3="__previous_value__",a3="__local_write_time__";function V5(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[o3])==null?void 0:n.stringValue)===i3}function x0(r){const e=r.mapValue.fields[s3];return V5(e)?x0(e):e}function kf(r){const e=Fl(r.mapValue.fields[a3].timestampValue);return new Jr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t,n,o,s,l,d,h,u,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=o,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=u,this.isUsingEmulator=g}}const qm="(default)";class Ld{constructor(e,t){this.projectId=e,this.database=t||qm}static empty(){return new Ld("","")}get isDefaultDatabase(){return this.database===qm}isEqual(e){return e instanceof Ld&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5="__type__",l3="__max__",jc={mapValue:{fields:{__type__:{stringValue:l3}}}},M5="__vector__",Yu="value",pm={nullValue:"NULL_VALUE"};function Fc(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?V5(r)?4:c3(r)?9007199254740991:y0(r)?10:11:wt(28295,{value:r})}function el(r,e){if(r===e)return!0;const t=Fc(r);if(t!==Fc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return kf(r).isEqual(kf(e));case 3:return(function(o,s){if(typeof o.timestampValue=="string"&&typeof s.timestampValue=="string"&&o.timestampValue.length===s.timestampValue.length)return o.timestampValue===s.timestampValue;const l=Fl(o.timestampValue),d=Fl(s.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,s){return zl(o.bytesValue).isEqual(zl(s.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,s){return bn(o.geoPointValue.latitude)===bn(s.geoPointValue.latitude)&&bn(o.geoPointValue.longitude)===bn(s.geoPointValue.longitude)})(r,e);case 2:return(function(o,s){if("integerValue"in o&&"integerValue"in s)return bn(o.integerValue)===bn(s.integerValue);if("doubleValue"in o&&"doubleValue"in s){const l=bn(o.doubleValue),d=bn(s.doubleValue);return l===d?_f(l)===_f(d):isNaN(l)&&isNaN(d)}return!1})(r,e);case 9:return Uu(r.arrayValue.values||[],e.arrayValue.values||[],el);case 10:case 11:return(function(o,s){const l=o.mapValue.fields||{},d=s.mapValue.fields||{};if(Vb(l)!==Vb(d))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(d[h]===void 0||!el(l[h],d[h])))return!1;return!0})(r,e);default:return wt(52216,{left:r})}}function jf(r,e){return(r.values||[]).find((t=>el(t,e)))!==void 0}function zc(r,e){if(r===e)return 0;const t=Fc(r),n=Fc(e);if(t!==n)return Zt(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Zt(r.booleanValue,e.booleanValue);case 2:return(function(s,l){const d=bn(s.integerValue||s.doubleValue),h=bn(l.integerValue||l.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1})(r,e);case 3:return Mb(r.timestampValue,e.timestampValue);case 4:return Mb(kf(r),kf(e));case 5:return L1(r.stringValue,e.stringValue);case 6:return(function(s,l){const d=zl(s),h=zl(l);return d.compareTo(h)})(r.bytesValue,e.bytesValue);case 7:return(function(s,l){const d=s.split("/"),h=l.split("/");for(let u=0;u<d.length&&u<h.length;u++){const g=Zt(d[u],h[u]);if(g!==0)return g}return Zt(d.length,h.length)})(r.referenceValue,e.referenceValue);case 8:return(function(s,l){const d=Zt(bn(s.latitude),bn(l.latitude));return d!==0?d:Zt(bn(s.longitude),bn(l.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Db(r.arrayValue,e.arrayValue);case 10:return(function(s,l){var _,b,R,j;const d=s.fields||{},h=l.fields||{},u=(_=d[Yu])==null?void 0:_.arrayValue,g=(b=h[Yu])==null?void 0:b.arrayValue,y=Zt(((R=u==null?void 0:u.values)==null?void 0:R.length)||0,((j=g==null?void 0:g.values)==null?void 0:j.length)||0);return y!==0?y:Db(u,g)})(r.mapValue,e.mapValue);case 11:return(function(s,l){if(s===jc.mapValue&&l===jc.mapValue)return 0;if(s===jc.mapValue)return 1;if(l===jc.mapValue)return-1;const d=s.fields||{},h=Object.keys(d),u=l.fields||{},g=Object.keys(u);h.sort(),g.sort();for(let y=0;y<h.length&&y<g.length;++y){const _=L1(h[y],g[y]);if(_!==0)return _;const b=zc(d[h[y]],u[g[y]]);if(b!==0)return b}return Zt(h.length,g.length)})(r.mapValue,e.mapValue);default:throw wt(23264,{he:t})}}function Mb(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Zt(r,e);const t=Fl(r),n=Fl(e),o=Zt(t.seconds,n.seconds);return o!==0?o:Zt(t.nanos,n.nanos)}function Db(r,e){const t=r.values||[],n=e.values||[];for(let o=0;o<t.length&&o<n.length;++o){const s=zc(t[o],n[o]);if(s)return s}return Zt(t.length,n.length)}function Qu(r){return D1(r)}function D1(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=Fl(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return zl(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return st.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",o=!0;for(const s of t.values||[])o?o=!1:n+=",",n+=D1(s);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let o="{",s=!0;for(const l of n)s?s=!1:o+=",",o+=`${l}:${D1(t.fields[l])}`;return o+"}"})(r.mapValue):wt(61005,{value:r})}function mm(r){switch(Fc(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=x0(r);return e?16+mm(e):16;case 5:return 2*r.stringValue.length;case 6:return zl(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((o,s)=>o+mm(s)),0)})(r.arrayValue);case 10:case 11:return(function(n){let o=0;return Wc(n.fields,((s,l)=>{o+=s.length+mm(l)})),o})(r.mapValue);default:throw wt(13486,{value:r})}}function If(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function W1(r){return!!r&&"integerValue"in r}function Ef(r){return!!r&&"arrayValue"in r}function Wb(r){return!!r&&"nullValue"in r}function $b(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function gm(r){return!!r&&"mapValue"in r}function y0(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[O5])==null?void 0:n.stringValue)===M5}function uf(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Wc(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=uf(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uf(r.arrayValue.values[t]);return e}return{...r}}function c3(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===l3}const d3={mapValue:{fields:{[O5]:{stringValue:M5},[Yu]:{arrayValue:{}}}}};function lR(r){return"nullValue"in r?pm:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?If(Ld.empty(),st.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?y0(r)?d3:{mapValue:{}}:wt(35942,{value:r})}function cR(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?If(Ld.empty(),st.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?d3:"mapValue"in r?y0(r)?{mapValue:{}}:jc:wt(61959,{value:r})}function qb(r,e){const t=zc(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Ub(r,e){const t=zc(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.value=e}static empty(){return new mo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!gm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uf(t)}setAll(e){let t=In.emptyPath(),n={},o=[];e.forEach(((l,d)=>{if(!t.isImmediateParentOf(d)){const h=this.getFieldsMap(t);this.applyChanges(h,n,o),n={},o=[],t=d.popLast()}l?n[d.lastSegment()]=uf(l):o.push(d.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,o)}delete(e){const t=this.field(e.popLast());gm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return el(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let o=t.mapValue.fields[e.get(n)];gm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,n){Wc(t,((o,s)=>e[o]=s));for(const o of n)delete e[o]}clone(){return new mo(uf(this.value))}}function u3(r){const e=[];return Wc(r.fields,((t,n)=>{const o=new In([t]);if(gm(n)){const s=u3(n.mapValue).fields;if(s.length===0)e.push(o);else for(const l of s)e.push(o.child(l))}else e.push(o)})),new Qo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,t,n,o,s,l,d){this.key=e,this.documentType=t,this.version=n,this.readTime=o,this.createTime=s,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Fn(e,0,Bt.min(),Bt.min(),Bt.min(),mo.empty(),0)}static newFoundDocument(e,t,n,o){return new Fn(e,1,t,Bt.min(),n,o,0)}static newNoDocument(e,t){return new Fn(e,2,t,Bt.min(),Bt.min(),mo.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,Bt.min(),Bt.min(),mo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t){this.position=e,this.inclusive=t}}function Hb(r,e,t){let n=0;for(let o=0;o<r.position.length;o++){const s=e[o],l=r.position[o];if(s.field.isKeyField()?n=st.comparator(st.fromName(l.referenceValue),t.key):n=zc(l,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function Gb(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!el(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t="asc"){this.field=e,this.dir=t}}function dR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{}class yr extends h3{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new uR(e,t,n):t==="array-contains"?new pR(e,n):t==="in"?new y3(e,n):t==="not-in"?new mR(e,n):t==="array-contains-any"?new gR(e,n):new yr(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new hR(e,n):new fR(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(zc(t,this.value)):t!==null&&Fc(this.value)===Fc(t)&&this.matchesComparison(zc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return wt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qr extends h3{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Qr(e,t)}matches(e){return Zu(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Zu(r){return r.op==="and"}function $1(r){return r.op==="or"}function D5(r){return f3(r)&&Zu(r)}function f3(r){for(const e of r.filters)if(e instanceof Qr)return!1;return!0}function q1(r){if(r instanceof yr)return r.field.canonicalString()+r.op.toString()+Qu(r.value);if(D5(r))return r.filters.map((e=>q1(e))).join(",");{const e=r.filters.map((t=>q1(t))).join(",");return`${r.op}(${e})`}}function p3(r,e){return r instanceof yr?(function(n,o){return o instanceof yr&&n.op===o.op&&n.field.isEqual(o.field)&&el(n.value,o.value)})(r,e):r instanceof Qr?(function(n,o){return o instanceof Qr&&n.op===o.op&&n.filters.length===o.filters.length?n.filters.reduce(((s,l,d)=>s&&p3(l,o.filters[d])),!0):!1})(r,e):void wt(19439)}function m3(r,e){const t=r.filters.concat(e);return Qr.create(t,r.op)}function g3(r){return r instanceof yr?(function(t){return`${t.field.canonicalString()} ${t.op} ${Qu(t.value)}`})(r):r instanceof Qr?(function(t){return t.op.toString()+" {"+t.getFilters().map(g3).join(" ,")+"}"})(r):"Filter"}class uR extends yr{constructor(e,t,n){super(e,t,n),this.key=st.fromName(n.referenceValue)}matches(e){const t=st.comparator(e.key,this.key);return this.matchesComparison(t)}}class hR extends yr{constructor(e,t){super(e,"in",t),this.keys=x3("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class fR extends yr{constructor(e,t){super(e,"not-in",t),this.keys=x3("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function x3(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((n=>st.fromName(n.referenceValue)))}class pR extends yr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ef(t)&&jf(t.arrayValue,this.value)}}class y3 extends yr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&jf(this.value.arrayValue,t)}}class mR extends yr{constructor(e,t){super(e,"not-in",t)}matches(e){if(jf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!jf(this.value.arrayValue,t)}}class gR extends yr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ef(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>jf(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,t=null,n=[],o=[],s=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=o,this.limit=s,this.startAt=l,this.endAt=d,this.Te=null}}function U1(r,e=null,t=[],n=[],o=null,s=null,l=null){return new xR(r,e,t,n,o,s,l)}function Fd(r){const e=er(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>q1(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(s){return s.field.canonicalString()+s.dir})(n))).join(","),f0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>Qu(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>Qu(n))).join(",")),e.Te=t}return e.Te}function Uf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!dR(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!p3(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Gb(r.startAt,e.startAt)&&Gb(r.endAt,e.endAt)}function Um(r){return st.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Hm(r,e){return r.filters.filter((t=>t instanceof yr&&t.field.isEqual(e)))}function Kb(r,e,t){let n=pm,o=!0;for(const s of Hm(r,e)){let l=pm,d=!0;switch(s.op){case"<":case"<=":l=lR(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,d=!1;break;case"!=":case"not-in":l=pm}qb({value:n,inclusive:o},{value:l,inclusive:d})<0&&(n=l,o=d)}if(t!==null){for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(e)){const l=t.position[s];qb({value:n,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(n=l,o=t.inclusive);break}}return{value:n,inclusive:o}}function Jb(r,e,t){let n=jc,o=!0;for(const s of Hm(r,e)){let l=jc,d=!0;switch(s.op){case">=":case">":l=cR(s.value),d=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,d=!1;break;case"!=":case"not-in":l=jc}Ub({value:n,inclusive:o},{value:l,inclusive:d})>0&&(n=l,o=d)}if(t!==null){for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(e)){const l=t.position[s];Ub({value:n,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(n=l,o=t.inclusive);break}}return{value:n,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,t=null,n=[],o=[],s=null,l="F",d=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=o,this.limit=s,this.limitType=l,this.startAt=d,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function yR(r,e,t,n,o,s,l,d){return new hh(r,e,t,n,o,s,l,d)}function b0(r){return new hh(r)}function Yb(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function b3(r){return r.collectionGroup!==null}function hf(r){const e=er(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new Xr(In.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((u=>{u.isInequality()&&(d=d.add(u.field))}))})),d})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Rf(s,n))})),t.has(In.keyField().canonicalString())||e.Ie.push(new Rf(In.keyField(),n))}return e.Ie}function $s(r){const e=er(r);return e.Ee||(e.Ee=bR(e,hf(r))),e.Ee}function bR(r,e){if(r.limitType==="F")return U1(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const s=o.dir==="desc"?"asc":"desc";return new Rf(o.field,s)}));const t=r.endAt?new Xu(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new Xu(r.startAt.position,r.startAt.inclusive):null;return U1(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function H1(r,e){const t=r.filters.concat([e]);return new hh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function G1(r,e,t){return new hh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function v0(r,e){return Uf($s(r),$s(e))&&r.limitType===e.limitType}function v3(r){return`${Fd($s(r))}|lt:${r.limitType}`}function ju(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((o=>g3(o))).join(", ")}]`),f0(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((o=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(o))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((o=>Qu(o))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((o=>Qu(o))).join(",")),`Target(${n})`})($s(r))}; limitType=${r.limitType})`}function Hf(r,e){return e.isFoundDocument()&&(function(n,o){const s=o.key.path;return n.collectionGroup!==null?o.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):st.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)})(r,e)&&(function(n,o){for(const s of hf(n))if(!s.field.isKeyField()&&o.data.field(s.field)===null)return!1;return!0})(r,e)&&(function(n,o){for(const s of n.filters)if(!s.matches(o))return!1;return!0})(r,e)&&(function(n,o){return!(n.startAt&&!(function(l,d,h){const u=Hb(l,d,h);return l.inclusive?u<=0:u<0})(n.startAt,hf(n),o)||n.endAt&&!(function(l,d,h){const u=Hb(l,d,h);return l.inclusive?u>=0:u>0})(n.endAt,hf(n),o))})(r,e)}function vR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function w3(r){return(e,t)=>{let n=!1;for(const o of hf(r)){const s=wR(o,e,t);if(s!==0)return s;n=n||o.field.isKeyField()}return 0}}function wR(r,e,t){const n=r.field.isKeyField()?st.comparator(e.key,t.key):(function(s,l,d){const h=l.data.field(s),u=d.data.field(s);return h!==null&&u!==null?zc(h,u):wt(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return wt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[o,s]of n)if(this.equalsFn(o,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<o.length;s++)if(this.equalsFn(o[s][0],e))return void(o[s]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let o=0;o<n.length;o++)if(this.equalsFn(n[o][0],e))return n.length===1?delete this.inner[t]:n.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Wc(this.inner,((t,n)=>{for(const[o,s]of n)e(o,s)}))}isEmpty(){return r3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=new vn(st.comparator);function bs(){return SR}const S3=new vn(st.comparator);function Qh(...r){let e=S3;for(const t of r)e=e.insert(t.key,t);return e}function _3(r){let e=S3;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Ka(){return ff()}function T3(){return ff()}function ff(){return new Wl((r=>r.toString()),((r,e)=>r.isEqual(e)))}const _R=new vn(st.comparator),TR=new Xr(st.comparator);function dr(...r){let e=TR;for(const t of r)e=e.add(t);return e}const CR=new Xr(Zt);function AR(){return CR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_f(e)?"-0":e}}function C3(r){return{integerValue:""+r}}function kR(r,e){return NE(e)?C3(e):W5(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(){this._=void 0}}function jR(r,e,t){return r instanceof eh?(function(o,s){const l={fields:{[o3]:{stringValue:i3},[a3]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return s&&V5(s)&&(s=x0(s)),s&&(l.fields[s3]=s),{mapValue:l}})(t,e):r instanceof th?k3(r,e):r instanceof rh?j3(r,e):(function(o,s){const l=A3(o,s),d=Qb(l)+Qb(o.Ae);return W1(l)&&W1(o.Ae)?C3(d):W5(o.serializer,d)})(r,e)}function IR(r,e,t){return r instanceof th?k3(r,e):r instanceof rh?j3(r,e):t}function A3(r,e){return r instanceof Pf?(function(n){return W1(n)||(function(s){return!!s&&"doubleValue"in s})(n)})(e)?e:{integerValue:0}:null}class eh extends w0{}class th extends w0{constructor(e){super(),this.elements=e}}function k3(r,e){const t=I3(e);for(const n of r.elements)t.some((o=>el(o,n)))||t.push(n);return{arrayValue:{values:t}}}class rh extends w0{constructor(e){super(),this.elements=e}}function j3(r,e){let t=I3(e);for(const n of r.elements)t=t.filter((o=>!el(o,n)));return{arrayValue:{values:t}}}class Pf extends w0{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Qb(r){return bn(r.integerValue||r.doubleValue)}function I3(r){return Ef(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e,t){this.field=e,this.transform=t}}function ER(r,e){return r.field.isEqual(e.field)&&(function(n,o){return n instanceof th&&o instanceof th||n instanceof rh&&o instanceof rh?Uu(n.elements,o.elements,el):n instanceof Pf&&o instanceof Pf?el(n.Ae,o.Ae):n instanceof eh&&o instanceof eh})(r.transform,e.transform)}class RR{constructor(e,t){this.version=e,this.transformResults=t}}class go{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new go}static exists(e){return new go(void 0,e)}static updateTime(e){return new go(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xm(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class S0{}function R3(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new _0(r.key,go.none()):new fh(r.key,r.data,go.none());{const t=r.data,n=mo.empty();let o=new Xr(In.comparator);for(let s of e.fields)if(!o.has(s)){let l=t.field(s);l===null&&s.length>1&&(s=s.popLast(),l=t.field(s)),l===null?n.delete(s):n.set(s,l),o=o.add(s)}return new $l(r.key,n,new Qo(o.toArray()),go.none())}}function PR(r,e,t){r instanceof fh?(function(o,s,l){const d=o.value.clone(),h=Zb(o.fieldTransforms,s,l.transformResults);d.setAll(h),s.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(r,e,t):r instanceof $l?(function(o,s,l){if(!xm(o.precondition,s))return void s.convertToUnknownDocument(l.version);const d=Zb(o.fieldTransforms,s,l.transformResults),h=s.data;h.setAll(P3(o)),h.setAll(d),s.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(r,e,t):(function(o,s,l){s.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function pf(r,e,t,n){return r instanceof fh?(function(s,l,d,h){if(!xm(s.precondition,l))return d;const u=s.value.clone(),g=ev(s.fieldTransforms,h,l);return u.setAll(g),l.convertToFoundDocument(l.version,u).setHasLocalMutations(),null})(r,e,t,n):r instanceof $l?(function(s,l,d,h){if(!xm(s.precondition,l))return d;const u=ev(s.fieldTransforms,h,l),g=l.data;return g.setAll(P3(s)),g.setAll(u),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),d===null?null:d.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((y=>y.field)))})(r,e,t,n):(function(s,l,d){return xm(s.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d})(r,e,t)}function NR(r,e){let t=null;for(const n of r.fieldTransforms){const o=e.data.field(n.field),s=A3(n.transform,o||null);s!=null&&(t===null&&(t=mo.empty()),t.set(n.field,s))}return t||null}function Xb(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,o){return n===void 0&&o===void 0||!(!n||!o)&&Uu(n,o,((s,l)=>ER(s,l)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class fh extends S0{constructor(e,t,n,o=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class $l extends S0{constructor(e,t,n,o,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=o,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function P3(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function Zb(r,e,t){const n=new Map;Et(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const s=r[o],l=s.transform,d=e.data.field(s.field);n.set(s.field,IR(l,d,t[o]))}return n}function ev(r,e,t){const n=new Map;for(const o of r){const s=o.transform,l=t.data.field(o.field);n.set(o.field,jR(s,l,e))}return n}class _0 extends S0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class N3 extends S0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,t,n,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=o}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const s=this.mutations[o];s.key.isEqual(e.key)&&PR(s,e,n[o])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=pf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=pf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=T3();return this.mutations.forEach((o=>{const s=e.get(o.key),l=s.overlayedDocument;let d=this.applyToLocalView(l,s.mutatedFields);d=t.has(o.key)?null:d;const h=R3(l,d);h!==null&&n.set(o.key,h),l.isValidDocument()||l.convertToNoDocument(Bt.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),dr())}isEqual(e){return this.batchId===e.batchId&&Uu(this.mutations,e.mutations,((t,n)=>Xb(t,n)))&&Uu(this.baseMutations,e.baseMutations,((t,n)=>Xb(t,n)))}}class q5{constructor(e,t,n,o){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=o}static from(e,t,n){Et(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let o=(function(){return _R})();const s=e.mutations;for(let l=0;l<s.length;l++)o=o.insert(s[l].key,n[l].version);return new q5(e,t,n,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oi,vr;function LR(r){switch(r){case We.OK:return wt(64938);case We.CANCELLED:case We.UNKNOWN:case We.DEADLINE_EXCEEDED:case We.RESOURCE_EXHAUSTED:case We.INTERNAL:case We.UNAVAILABLE:case We.UNAUTHENTICATED:return!1;case We.INVALID_ARGUMENT:case We.NOT_FOUND:case We.ALREADY_EXISTS:case We.PERMISSION_DENIED:case We.FAILED_PRECONDITION:case We.ABORTED:case We.OUT_OF_RANGE:case We.UNIMPLEMENTED:case We.DATA_LOSS:return!0;default:return wt(15467,{code:r})}}function B3(r){if(r===void 0)return Ro("GRPC error has no .code"),We.UNKNOWN;switch(r){case oi.OK:return We.OK;case oi.CANCELLED:return We.CANCELLED;case oi.UNKNOWN:return We.UNKNOWN;case oi.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case oi.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case oi.INTERNAL:return We.INTERNAL;case oi.UNAVAILABLE:return We.UNAVAILABLE;case oi.UNAUTHENTICATED:return We.UNAUTHENTICATED;case oi.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case oi.NOT_FOUND:return We.NOT_FOUND;case oi.ALREADY_EXISTS:return We.ALREADY_EXISTS;case oi.PERMISSION_DENIED:return We.PERMISSION_DENIED;case oi.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case oi.ABORTED:return We.ABORTED;case oi.OUT_OF_RANGE:return We.OUT_OF_RANGE;case oi.UNIMPLEMENTED:return We.UNIMPLEMENTED;case oi.DATA_LOSS:return We.DATA_LOSS;default:return wt(39323,{code:r})}}(vr=oi||(oi={}))[vr.OK=0]="OK",vr[vr.CANCELLED=1]="CANCELLED",vr[vr.UNKNOWN=2]="UNKNOWN",vr[vr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vr[vr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vr[vr.NOT_FOUND=5]="NOT_FOUND",vr[vr.ALREADY_EXISTS=6]="ALREADY_EXISTS",vr[vr.PERMISSION_DENIED=7]="PERMISSION_DENIED",vr[vr.UNAUTHENTICATED=16]="UNAUTHENTICATED",vr[vr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vr[vr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vr[vr.ABORTED=10]="ABORTED",vr[vr.OUT_OF_RANGE=11]="OUT_OF_RANGE",vr[vr.UNIMPLEMENTED=12]="UNIMPLEMENTED",vr[vr.INTERNAL=13]="INTERNAL",vr[vr.UNAVAILABLE=14]="UNAVAILABLE",vr[vr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=new Pc([4294967295,4294967295],0);function tv(r){const e=FR().encode(r),t=new R_;return t.update(e),new Uint8Array(t.digest())}function rv(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),o=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Pc([t,n],0),new Pc([o,s],0)]}class H5{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Xh(`Invalid padding: ${t}`);if(n<0)throw new Xh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Xh(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Xh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Pc.fromNumber(this.ge)}ye(e,t,n){let o=e.add(t.multiply(Pc.fromNumber(n)));return o.compare(zR)===1&&(o=new Pc([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=tv(e),[n,o]=rv(t);for(let s=0;s<this.hashCount;s++){const l=this.ye(n,o,s);if(!this.we(l))return!1}return!0}static create(e,t,n){const o=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),l=new H5(s,o,t);return n.forEach((d=>l.insert(d))),l}insert(e){if(this.ge===0)return;const t=tv(e),[n,o]=rv(t);for(let s=0;s<this.hashCount;s++){const l=this.ye(n,o,s);this.Se(l)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Xh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,t,n,o,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=o,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const o=new Map;return o.set(e,Gf.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new T0(Bt.min(),o,new vn(Zt),bs(),dr())}}class Gf{constructor(e,t,n,o,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=o,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Gf(n,t,dr(),dr(),dr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,t,n,o){this.be=e,this.removedTargetIds=t,this.key=n,this.De=o}}class L3{constructor(e,t){this.targetId=e,this.Ce=t}}class F3{constructor(e,t,n=ai.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=o}}class nv{constructor(){this.ve=0,this.Fe=iv(),this.Me=ai.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=dr(),t=dr(),n=dr();return this.Fe.forEach(((o,s)=>{switch(s){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:n=n.add(o);break;default:wt(38017,{changeType:s})}})),new Gf(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=iv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Et(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VR{constructor(e){this.Ge=e,this.ze=new Map,this.je=bs(),this.Je=Gp(),this.He=Gp(),this.Ye=new vn(Zt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:wt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,n=e.Ce.count,o=this.ot(t);if(o){const s=o.target;if(Um(s))if(n===0){const l=new st(s.path);this.et(t,l,Fn.newNoDocument(l,Bt.min()))}else Et(n===1,20013,{expectedCount:n});else{const l=this._t(t);if(l!==n){const d=this.ut(e),h=d?this.ct(d,e,l):1;if(h!==0){this.it(t);const u=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:o=0},hashCount:s=0}=t;let l,d;try{l=zl(n).toUint8Array()}catch(h){if(h instanceof n3)return Bd("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new H5(l,o,s)}catch(h){return Bd(h instanceof Xh?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.ge===0?null:d}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let o=0;return n.forEach((s=>{const l=this.Ge.ht(),d=`projects/${l.projectId}/databases/${l.database}/documents/${s.path.canonicalString()}`;e.mightContain(d)||(this.et(t,s,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((s,l)=>{const d=this.ot(l);if(d){if(s.current&&Um(d.target)){const h=new st(d.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,Fn.newNoDocument(h,e))}s.Be&&(t.set(l,s.ke()),s.qe())}}));let n=dr();this.He.forEach(((s,l)=>{let d=!0;l.forEachWhile((h=>{const u=this.ot(h);return!u||u.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(n=n.add(s))})),this.je.forEach(((s,l)=>l.setReadTime(e)));const o=new T0(e,t,this.Ye,this.je,n);return this.je=bs(),this.Je=Gp(),this.He=Gp(),this.Ye=new vn(Zt),o}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new nv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Xr(Zt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Xr(Zt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Qe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Gp(){return new vn(st.comparator)}function iv(){return new vn(st.comparator)}const OR={asc:"ASCENDING",desc:"DESCENDING"},MR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DR={and:"AND",or:"OR"};class WR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function K1(r,e){return r.useProto3Json||f0(e)?e:{value:e}}function nh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function z3(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function $R(r,e){return nh(r,e.toTimestamp())}function Po(r){return Et(!!r,49232),Bt.fromTimestamp((function(t){const n=Fl(t);return new Jr(n.seconds,n.nanos)})(r))}function G5(r,e){return J1(r,e).canonicalString()}function J1(r,e){const t=(function(o){return new Nr(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function V3(r){const e=Nr.fromString(r);return Et(G3(e),10190,{key:e.toString()}),e}function Gm(r,e){return G5(r.databaseId,e.path)}function Cd(r,e){const t=V3(e);if(t.get(1)!==r.databaseId.projectId)throw new it(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new it(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new st(D3(t))}function O3(r,e){return G5(r.databaseId,e)}function M3(r){const e=V3(r);return e.length===4?Nr.emptyPath():D3(e)}function Y1(r){return new Nr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function D3(r){return Et(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function ov(r,e,t){return{name:Gm(r,e),fields:t.value.mapValue.fields}}function qR(r,e,t){const n=Cd(r,e.name),o=Po(e.updateTime),s=e.createTime?Po(e.createTime):Bt.min(),l=new mo({mapValue:{fields:e.fields}}),d=Fn.newFoundDocument(n,o,s,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function UR(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:wt(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],s=(function(u,g){return u.useProto3Json?(Et(g===void 0||typeof g=="string",58123),ai.fromBase64String(g||"")):(Et(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),ai.fromUint8Array(g||new Uint8Array))})(r,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&(function(u){const g=u.code===void 0?We.UNKNOWN:B3(u.code);return new it(g,u.message||"")})(l);t=new F3(n,o,s,d||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const o=Cd(r,n.document.name),s=Po(n.document.updateTime),l=n.document.createTime?Po(n.document.createTime):Bt.min(),d=new mo({mapValue:{fields:n.document.fields}}),h=Fn.newFoundDocument(o,s,l,d),u=n.targetIds||[],g=n.removedTargetIds||[];t=new ym(u,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const o=Cd(r,n.document),s=n.readTime?Po(n.readTime):Bt.min(),l=Fn.newNoDocument(o,s),d=n.removedTargetIds||[];t=new ym([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const o=Cd(r,n.document),s=n.removedTargetIds||[];t=new ym([],s,o,null)}else{if(!("filter"in e))return wt(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:o=0,unchangedNames:s}=n,l=new BR(o,s),d=n.targetId;t=new L3(d,l)}}return t}function Km(r,e){let t;if(e instanceof fh)t={update:ov(r,e.key,e.value)};else if(e instanceof _0)t={delete:Gm(r,e.key)};else if(e instanceof $l)t={update:ov(r,e.key,e.data),updateMask:QR(e.fieldMask)};else{if(!(e instanceof N3))return wt(16599,{Vt:e.type});t={verify:Gm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(s,l){const d=l.transform;if(d instanceof eh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof th)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof rh)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Pf)return{fieldPath:l.field.canonicalString(),increment:d.Ae};throw wt(20930,{transform:l.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(o,s){return s.updateTime!==void 0?{updateTime:$R(o,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:wt(27497)})(r,e.precondition)),t}function Q1(r,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?go.updateTime(Po(s.updateTime)):s.exists!==void 0?go.exists(s.exists):go.none()})(e.currentDocument):go.none(),n=e.updateTransforms?e.updateTransforms.map((o=>(function(l,d){let h=null;if("setToServerValue"in d)Et(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),h=new eh;else if("appendMissingElements"in d){const g=d.appendMissingElements.values||[];h=new th(g)}else if("removeAllFromArray"in d){const g=d.removeAllFromArray.values||[];h=new rh(g)}else"increment"in d?h=new Pf(l,d.increment):wt(16584,{proto:d});const u=In.fromServerFormat(d.fieldPath);return new E3(u,h)})(r,o))):[];if(e.update){e.update.name;const o=Cd(r,e.update.name),s=new mo({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(h){const u=h.fieldPaths||[];return new Qo(u.map((g=>In.fromServerFormat(g))))})(e.updateMask);return new $l(o,s,l,t,n)}return new fh(o,s,t,n)}if(e.delete){const o=Cd(r,e.delete);return new _0(o,t)}if(e.verify){const o=Cd(r,e.verify);return new N3(o,t)}return wt(1463,{proto:e})}function HR(r,e){return r&&r.length>0?(Et(e!==void 0,14353),r.map((t=>(function(o,s){let l=o.updateTime?Po(o.updateTime):Po(s);return l.isEqual(Bt.min())&&(l=Po(s)),new RR(l,o.transformResults||[])})(t,e)))):[]}function W3(r,e){return{documents:[O3(r,e.path)]}}function $3(r,e){const t={structuredQuery:{}},n=e.path;let o;e.collectionGroup!==null?(o=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=O3(r,o);const s=(function(u){if(u.length!==0)return H3(Qr.create(u,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const l=(function(u){if(u.length!==0)return u.map((g=>(function(_){return{field:Iu(_.field),direction:KR(_.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=K1(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:t,parent:o}}function q3(r){let e=M3(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let o=null;if(n>0){Et(n===1,65062);const g=t.from[0];g.allDescendants?o=g.collectionId:e=e.child(g.collectionId)}let s=[];t.where&&(s=(function(y){const _=U3(y);return _ instanceof Qr&&D5(_)?_.getFilters():[_]})(t.where));let l=[];t.orderBy&&(l=(function(y){return y.map((_=>(function(R){return new Rf(Eu(R.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(_)))})(t.orderBy));let d=null;t.limit&&(d=(function(y){let _;return _=typeof y=="object"?y.value:y,f0(_)?null:_})(t.limit));let h=null;t.startAt&&(h=(function(y){const _=!!y.before,b=y.values||[];return new Xu(b,_)})(t.startAt));let u=null;return t.endAt&&(u=(function(y){const _=!y.before,b=y.values||[];return new Xu(b,_)})(t.endAt)),yR(e,o,l,s,d,"F",h,u)}function GR(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function U3(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Eu(t.unaryFilter.field);return yr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const o=Eu(t.unaryFilter.field);return yr.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Eu(t.unaryFilter.field);return yr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Eu(t.unaryFilter.field);return yr.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return wt(61313);default:return wt(60726)}})(r):r.fieldFilter!==void 0?(function(t){return yr.create(Eu(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return wt(58110);default:return wt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Qr.create(t.compositeFilter.filters.map((n=>U3(n))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return wt(1026)}})(t.compositeFilter.op))})(r):wt(30097,{filter:r})}function KR(r){return OR[r]}function JR(r){return MR[r]}function YR(r){return DR[r]}function Iu(r){return{fieldPath:r.canonicalString()}}function Eu(r){return In.fromServerFormat(r.fieldPath)}function H3(r){return r instanceof yr?(function(t){if(t.op==="=="){if($b(t.value))return{unaryFilter:{field:Iu(t.field),op:"IS_NAN"}};if(Wb(t.value))return{unaryFilter:{field:Iu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($b(t.value))return{unaryFilter:{field:Iu(t.field),op:"IS_NOT_NAN"}};if(Wb(t.value))return{unaryFilter:{field:Iu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Iu(t.field),op:JR(t.op),value:t.value}}})(r):r instanceof Qr?(function(t){const n=t.getFilters().map((o=>H3(o)));return n.length===1?n[0]:{compositeFilter:{op:YR(t.op),filters:n}}})(r):wt(54877,{filter:r})}function QR(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function G3(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,t,n,o,s=Bt.min(),l=Bt.min(),d=ai.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=o,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new El(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new El(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new El(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new El(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e){this.yt=e}}function XR(r,e){let t;if(e.document)t=qR(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=st.fromSegments(e.noDocument.path),o=Vd(e.noDocument.readTime);t=Fn.newNoDocument(n,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return wt(56709);{const n=st.fromSegments(e.unknownDocument.path),o=Vd(e.unknownDocument.version);t=Fn.newUnknownDocument(n,o)}}return e.readTime&&t.setReadTime((function(o){const s=new Jr(o[0],o[1]);return Bt.fromTimestamp(s)})(e.readTime)),t}function sv(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Jm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(s,l){return{name:Gm(s,l.key),fields:l.data.value.mapValue.fields,updateTime:nh(s,l.version.toTimestamp()),createTime:nh(s,l.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:zd(e.version)};else{if(!e.isUnknownDocument())return wt(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:zd(e.version)}}return n}function Jm(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function zd(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vd(r){const e=new Jr(r.seconds,r.nanoseconds);return Bt.fromTimestamp(e)}function xd(r,e){const t=(e.baseMutations||[]).map((s=>Q1(r.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const l=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const d=e.mutations[s+1];l.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map((s=>Q1(r.yt,s))),o=Jr.fromMillis(e.localWriteTimeMs);return new $5(e.batchId,o,t,n)}function Zh(r){const e=Vd(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Vd(r.lastLimboFreeSnapshotVersion):Bt.min();let n;return n=(function(s){return s.documents!==void 0})(r.query)?(function(s){const l=s.documents.length;return Et(l===1,1966,{count:l}),$s(b0(M3(s.documents[0])))})(r.query):(function(s){return $s(q3(s))})(r.query),new El(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,ai.fromBase64String(r.resumeToken))}function J3(r,e){const t=zd(e.snapshotVersion),n=zd(e.lastLimboFreeSnapshotVersion);let o;o=Um(e.target)?W3(r.yt,e.target):$3(r.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fd(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:o}}function Y3(r){const e=q3({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?G1(e,e.limit,"L"):e}function i1(r,e){return new U5(e.largestBatchId,Q1(r.yt,e.overlayMutation))}function av(r,e){const t=e.path.lastSegment();return[r,xo(e.path.popLast()),t]}function lv(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:zd(n.readTime),documentKey:xo(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{getBundleMetadata(e,t){return cv(e).get(t).next((n=>{if(n)return(function(s){return{id:s.bundleId,createTime:Vd(s.createTime),version:s.version}})(n)}))}saveBundleMetadata(e,t){return cv(e).put((function(o){return{bundleId:o.id,createTime:zd(Po(o.createTime)),version:o.version}})(t))}getNamedQuery(e,t){return dv(e).get(t).next((n=>{if(n)return(function(s){return{name:s.name,query:Y3(s.bundledQuery),readTime:Vd(s.readTime)}})(n)}))}saveNamedQuery(e,t){return dv(e).put((function(o){return{name:o.name,readTime:zd(Po(o.readTime)),bundledQuery:o.bundledQuery}})(t))}}function cv(r){return pi(r,p0)}function dv(r){return pi(r,m0)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new C0(e,n)}getOverlay(e,t){return Wh(e).get(av(this.userId,t)).next((n=>n?i1(this.serializer,n):null))}getOverlays(e,t){const n=Ka();return Re.forEach(t,(o=>this.getOverlay(e,o).next((s=>{s!==null&&n.set(o,s)})))).next((()=>n))}saveOverlays(e,t,n){const o=[];return n.forEach(((s,l)=>{const d=new U5(t,l);o.push(this.St(e,d))})),Re.waitFor(o)}removeOverlaysForBatchId(e,t,n){const o=new Set;t.forEach((l=>o.add(xo(l.getCollectionPath()))));const s=[];return o.forEach((l=>{const d=IDBKeyRange.bound([this.userId,l,n],[this.userId,l,n+1],!1,!0);s.push(Wh(e).Z(O1,d))})),Re.waitFor(s)}getOverlaysForCollection(e,t,n){const o=Ka(),s=xo(t),l=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Wh(e).J(O1,l).next((d=>{for(const h of d){const u=i1(this.serializer,h);o.set(u.getKey(),u)}return o}))}getOverlaysForCollectionGroup(e,t,n,o){const s=Ka();let l;const d=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wh(e).ee({index:Q_,range:d},((h,u,g)=>{const y=i1(this.serializer,u);s.size()<o||y.largestBatchId===l?(s.set(y.getKey(),y),l=y.largestBatchId):g.done()})).next((()=>s))}St(e,t){return Wh(e).put((function(o,s,l){const[d,h,u]=av(s,l.mutation.key);return{userId:s,collectionPath:h,documentId:u,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Km(o.yt,l.mutation)}})(this.serializer,this.userId,t))}}function Wh(r){return pi(r,g0)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{bt(e){return pi(e,F5)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const n=t==null?void 0:t.value;return n?ai.fromUint8Array(n):ai.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(bn(e.integerValue));else if("doubleValue"in e){const n=bn(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),_f(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),typeof n=="string"&&(n=Fl(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(zl(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?c3(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):y0(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):wt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const o of Object.keys(n))this.Ot(o,t),this.Ct(n[o],t)}kt(e,t){var l,d;const n=e.fields||{};this.Ft(t,53);const o=Yu,s=((d=(l=n[o].arrayValue)==null?void 0:l.values)==null?void 0:d.length)||0;this.Ft(t,15),t.Mt(bn(s)),this.Ot(o,t),this.Ct(n[o],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const o of n)this.Ct(o,t)}Lt(e,t){this.Ft(t,37),st.fromName(e).path.forEach((n=>{this.Ft(t,60),this.Ut(n,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}yd.Kt=new yd;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=255;function tP(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function uv(r){const e=64-(function(n){let o=0;for(let s=0;s<8;++s){const l=tP(255&n[s]);if(o+=l,l!==8)break}return o})(r);return Math.ceil(e/8)}class rP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const o=t.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const o=t.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(e){const t=this.en(e),n=uv(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let o=t.length-n;o<t.length;++o)this.buffer[this.position++]=255&t[o]}nn(e){const t=this.en(e),n=uv(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let o=t.length-n;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}rn(){this.sn(wu),this.sn(255)}_n(){this.an(wu),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(s){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,s,!1),new Uint8Array(l.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let o=1;o<t.length;++o)t[o]^=n?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===wu?(this.sn(wu),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===wu?(this.an(wu),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const o=new Uint8Array(n);o.set(this.buffer),this.buffer=o}}class nP{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class iP{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class $h{constructor(){this.cn=new rP,this.ln=new nP(this.cn),this.hn=new iP(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,t,n,o){this.Tn=e,this.In=t,this.En=n,this.dn=o}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new bd(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:bm(this.En),directionalValue:bm(this.dn),orderedDocumentKey:bm(t),documentKey:n.path.toArray()}}Vn(e,t,n){const o=this.Rn(e,t,n);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function yc(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=hv(r.En,e.En),t!==0?t:(t=hv(r.dn,e.dn),t!==0?t:st.comparator(r.In,e.In)))}function hv(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}function bm(r){return DS()?(function(t){let n="";for(let o=0;o<t.length;o++)n+=String.fromCharCode(t[o]);return n})(r):r}function fv(r){return typeof r!="string"?r:(function(t){const n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return n})(r)}class pv{constructor(e){this.mn=new Xr(((t,n)=>In.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const n=t;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(Et(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=F1(e);if(t!==void 0&&!this.wn(t))return!1;const n=fd(e);let o=new Set,s=0,l=0;for(;s<n.length&&this.wn(n[s]);++s)o=o.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.mn.size>0){const d=this.mn.getIterator().getNext();if(!o.has(d.field.canonicalString())){const h=n[s];if(!this.Sn(d,h)||!this.bn(this.fn[l++],h))return!1}++s}for(;s<n.length;++s){const d=n[s];if(l>=this.fn.length||!this.bn(this.fn[l++],d))return!1}return!0}Dn(){if(this.pn)return null;let e=new Xr(In.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new um(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new um(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new um(n.field,n.dir==="asc"?0:1)));return new Mm(Mm.UNKNOWN_ID,this.collectionId,t,Sf.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(r){var t,n;if(Et(r instanceof yr||r instanceof Qr,20012),r instanceof yr){if(r instanceof y3){const o=((n=(t=r.value.arrayValue)==null?void 0:t.values)==null?void 0:n.map((s=>yr.create(r.field,"==",s))))||[];return Qr.create(o,"or")}return r}const e=r.filters.map((o=>Q3(o)));return Qr.create(e,r.op)}function oP(r){if(r.getFilters().length===0)return[];const e=e5(Q3(r));return Et(X3(e),7391),X1(e)||Z1(e)?[e]:e.getFilters()}function X1(r){return r instanceof yr}function Z1(r){return r instanceof Qr&&D5(r)}function X3(r){return X1(r)||Z1(r)||(function(t){if(t instanceof Qr&&$1(t)){for(const n of t.getFilters())if(!X1(n)&&!Z1(n))return!1;return!0}return!1})(r)}function e5(r){if(Et(r instanceof yr||r instanceof Qr,34018),r instanceof yr)return r;if(r.filters.length===1)return e5(r.filters[0]);const e=r.filters.map((n=>e5(n)));let t=Qr.create(e,r.op);return t=Ym(t),X3(t)?t:(Et(t instanceof Qr,64498),Et(Zu(t),40251),Et(t.filters.length>1,57927),t.filters.reduce(((n,o)=>K5(n,o))))}function K5(r,e){let t;return Et(r instanceof yr||r instanceof Qr,38388),Et(e instanceof yr||e instanceof Qr,25473),t=r instanceof yr?e instanceof yr?(function(o,s){return Qr.create([o,s],"and")})(r,e):mv(r,e):e instanceof yr?mv(e,r):(function(o,s){if(Et(o.filters.length>0&&s.filters.length>0,48005),Zu(o)&&Zu(s))return m3(o,s.getFilters());const l=$1(o)?o:s,d=$1(o)?s:o,h=l.filters.map((u=>K5(u,d)));return Qr.create(h,"or")})(r,e),Ym(t)}function mv(r,e){if(Zu(e))return m3(e,r.getFilters());{const t=e.filters.map((n=>K5(r,n)));return Qr.create(t,"or")}}function Ym(r){if(Et(r instanceof yr||r instanceof Qr,11850),r instanceof yr)return r;const e=r.getFilters();if(e.length===1)return Ym(e[0]);if(f3(r))return r;const t=e.map((o=>Ym(o))),n=[];return t.forEach((o=>{o instanceof yr?n.push(o):o instanceof Qr&&(o.op===r.op?n.push(...o.filters):n.push(o))})),n.length===1?n[0]:Qr.create(n,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this.Cn=new J5}addToCollectionParentIndex(e,t){return this.Cn.add(t),Re.resolve()}getCollectionParents(e,t){return Re.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Re.resolve()}deleteFieldIndex(e,t){return Re.resolve()}deleteAllFieldIndexes(e){return Re.resolve()}createTargetIndexes(e,t){return Re.resolve()}getDocumentsMatchingTarget(e,t){return Re.resolve(null)}getIndexType(e,t){return Re.resolve(0)}getFieldIndexes(e,t){return Re.resolve([])}getNextCollectionGroupToUpdate(e){return Re.resolve(null)}getMinOffset(e,t){return Re.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,t){return Re.resolve(vs.min())}updateCollectionGroup(e,t,n){return Re.resolve()}updateIndexEntries(e,t){return Re.resolve()}}class J5{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),o=this.index[t]||new Xr(Nr.comparator),s=!o.has(n);return this.index[t]=o.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),o=this.index[t];return o&&o.has(n)}getEntries(e){return(this.index[e]||new Xr(Nr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="IndexedDbIndexManager",Kp=new Uint8Array(0);class aP{constructor(e,t){this.databaseId=t,this.vn=new J5,this.Fn=new Wl((n=>Fd(n)),((n,o)=>Uf(n,o))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),o=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const s={collectionId:n,parent:xo(o)};return xv(e).put(s)}return Re.resolve()}getCollectionParents(e,t){const n=[],o=IDBKeyRange.bound([t,""],[O_(t),""],!1,!0);return xv(e).J(o).next((s=>{for(const l of s){if(l.collectionId!==t)break;n.push(Ga(l.parent))}return n}))}addFieldIndex(e,t){const n=qh(e),o=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(t);delete o.indexId;const s=n.add(o);if(t.indexState){const l=_u(e);return s.next((d=>{l.put(lv(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const n=qh(e),o=_u(e),s=Su(e);return n.delete(t.indexId).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=qh(e),n=Su(e),o=_u(e);return t.Z().next((()=>n.Z())).next((()=>o.Z()))}createTargetIndexes(e,t){return Re.forEach(this.Mn(t),(n=>this.getIndexType(e,n).next((o=>{if(o===0||o===1){const s=new pv(n).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const n=Su(e);let o=!0;const s=new Map;return Re.forEach(this.Mn(t),(l=>this.xn(e,l).next((d=>{o&&(o=!!d),s.set(l,d)})))).next((()=>{if(o){let l=dr();const d=[];return Re.forEach(s,((h,u)=>{Qe(gv,`Using index ${(function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map((B=>`${B.fieldPath}:${B.kind}`)).join(",")}`})(h)} to execute ${Fd(t)}`);const g=(function(F,B){const J=F1(B);if(J===void 0)return null;for(const se of Hm(F,J.fieldPath))switch(se.op){case"array-contains-any":return se.value.arrayValue.values||[];case"array-contains":return[se.value]}return null})(u,h),y=(function(F,B){const J=new Map;for(const se of fd(B))for(const O of Hm(F,se.fieldPath))switch(O.op){case"==":case"in":J.set(se.fieldPath.canonicalString(),O.value);break;case"not-in":case"!=":return J.set(se.fieldPath.canonicalString(),O.value),Array.from(J.values())}return null})(u,h),_=(function(F,B){const J=[];let se=!0;for(const O of fd(B)){const A=O.kind===0?Kb(F,O.fieldPath,F.startAt):Jb(F,O.fieldPath,F.startAt);J.push(A.value),se&&(se=A.inclusive)}return new Xu(J,se)})(u,h),b=(function(F,B){const J=[];let se=!0;for(const O of fd(B)){const A=O.kind===0?Jb(F,O.fieldPath,F.endAt):Kb(F,O.fieldPath,F.endAt);J.push(A.value),se&&(se=A.inclusive)}return new Xu(J,se)})(u,h),R=this.On(h,u,_),j=this.On(h,u,b),z=this.Nn(h,u,y),T=this.Bn(h.indexId,g,R,_.inclusive,j,b.inclusive,z);return Re.forEach(T,(M=>n.Y(M,t.limit).next((F=>{F.forEach((B=>{const J=st.fromSegments(B.documentKey);l.has(J)||(l=l.add(J),d.push(J))}))}))))})).next((()=>d))}return Re.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=oP(Qr.create(e.filters,"and")).map((n=>U1(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,n,o,s,l,d){const h=(t!=null?t.length:1)*Math.max(n.length,s.length),u=h/(t!=null?t.length:1),g=[];for(let y=0;y<h;++y){const _=t?this.Ln(t[y/u]):Kp,b=this.kn(e,_,n[y%u],o),R=this.qn(e,_,s[y%u],l),j=d.map((z=>this.kn(e,_,z,!0)));g.push(...this.createRange(b,R,j))}return g}kn(e,t,n,o){const s=new bd(e,st.empty(),t,n);return o?s:s.An()}qn(e,t,n,o){const s=new bd(e,st.empty(),t,n);return o?s.An():s}xn(e,t){const n=new pv(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next((s=>{let l=null;for(const d of s)n.yn(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l}))}getIndexType(e,t){let n=2;const o=this.Mn(t);return Re.forEach(o,(s=>this.xn(e,s).next((l=>{l?n!==0&&l.fields.length<(function(h){let u=new Xr(In.comparator),g=!1;for(const y of h.filters)for(const _ of y.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?g=!0:u=u.add(_.field));for(const y of h.orderBy)y.field.isKeyField()||(u=u.add(y.field));return u.size+(g?1:0)})(s)&&(n=1):n=0})))).next((()=>(function(l){return l.limit!==null})(t)&&o.length>1&&n===2?1:n))}Qn(e,t){const n=new $h;for(const o of fd(e)){const s=t.data.field(o.fieldPath);if(s==null)return null;const l=n.Pn(o.kind);yd.Kt.Dt(s,l)}return n.un()}Ln(e){const t=new $h;return yd.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new $h;return yd.Kt.Dt(If(this.databaseId,t),n.Pn((function(s){const l=fd(s);return l.length===0?0:l[l.length-1].kind})(e))),n.un()}Nn(e,t,n){if(n===null)return[];let o=[];o.push(new $h);let s=0;for(const l of fd(e)){const d=n[s++];for(const h of o)if(this.Un(t,l.fieldPath)&&Ef(d))o=this.Kn(o,l,d);else{const u=h.Pn(l.kind);yd.Kt.Dt(d,u)}}return this.Wn(o)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const o=[...e],s=[];for(const l of n.arrayValue.values||[])for(const d of o){const h=new $h;h.seed(d.un()),yd.Kt.Dt(l,h.Pn(t.kind)),s.push(h)}return s}Un(e,t){return!!e.filters.find((n=>n instanceof yr&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=qh(e),o=_u(e);return(t?n.J(V1,IDBKeyRange.bound(t,t)):n.J()).next((s=>{const l=[];return Re.forEach(s,(d=>o.get([d.indexId,this.uid]).next((h=>{l.push((function(g,y){const _=y?new Sf(y.sequenceNumber,new vs(Vd(y.readTime),new st(Ga(y.documentKey)),y.largestBatchId)):Sf.empty(),b=g.fields.map((([R,j])=>new um(In.fromServerFormat(R),j)));return new Mm(g.indexId,g.collectionGroup,b,_)})(d,h))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,o)=>{const s=n.indexState.sequenceNumber-o.indexState.sequenceNumber;return s!==0?s:Zt(n.collectionGroup,o.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const o=qh(e),s=_u(e);return this.Gn(e).next((l=>o.J(V1,IDBKeyRange.bound(t,t)).next((d=>Re.forEach(d,(h=>s.put(lv(h.indexId,this.uid,l,n))))))))}updateIndexEntries(e,t){const n=new Map;return Re.forEach(t,((o,s)=>{const l=n.get(o.collectionGroup);return(l?Re.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next((d=>(n.set(o.collectionGroup,d),Re.forEach(d,(h=>this.zn(e,o,h).next((u=>{const g=this.jn(s,h);return u.isEqual(g)?Re.resolve():this.Jn(e,s,h,u,g)})))))))}))}Hn(e,t,n,o){return Su(e).put(o.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,o){return Su(e).delete(o.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const o=Su(e);let s=new Xr(yc);return o.ee({index:Y_,range:IDBKeyRange.only([n.indexId,this.uid,bm(this.$n(n,t))])},((l,d)=>{s=s.add(new bd(n.indexId,t,fv(d.arrayValue),fv(d.directionalValue)))})).next((()=>s))}jn(e,t){let n=new Xr(yc);const o=this.Qn(t,e);if(o==null)return n;const s=F1(t);if(s!=null){const l=e.data.field(s.fieldPath);if(Ef(l))for(const d of l.arrayValue.values||[])n=n.add(new bd(t.indexId,e.key,this.Ln(d),o))}else n=n.add(new bd(t.indexId,e.key,Kp,o));return n}Jn(e,t,n,o,s){Qe(gv,"Updating index entries for document '%s'",t.key);const l=[];return(function(h,u,g,y,_){const b=h.getIterator(),R=u.getIterator();let j=vu(b),z=vu(R);for(;j||z;){let T=!1,M=!1;if(j&&z){const F=g(j,z);F<0?M=!0:F>0&&(T=!0)}else j!=null?M=!0:T=!0;T?(y(z),z=vu(R)):M?(_(j),j=vu(b)):(j=vu(b),z=vu(R))}})(o,s,yc,(d=>{l.push(this.Hn(e,t,n,d))}),(d=>{l.push(this.Yn(e,t,n,d))})),Re.waitFor(l)}Gn(e){let t=1;return _u(e).ee({index:J_,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,o,s)=>{s.done(),t=o.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((l,d)=>yc(l,d))).filter(((l,d,h)=>!d||yc(l,h[d-1])!==0));const o=[];o.push(e);for(const l of n){const d=yc(l,e),h=yc(l,t);if(d===0)o[0]=e.An();else if(d>0&&h<0)o.push(l),o.push(l.An());else if(h>0)break}o.push(t);const s=[];for(let l=0;l<o.length;l+=2){if(this.Zn(o[l],o[l+1]))return[];const d=o[l].Vn(this.uid,Kp,st.empty()),h=o[l+1].Vn(this.uid,Kp,st.empty());s.push(IDBKeyRange.bound(d,h))}return s}Zn(e,t){return yc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(yv)}getMinOffset(e,t){return Re.mapArray(this.Mn(t),(n=>this.xn(e,n).next((o=>o||wt(44426))))).next(yv)}}function xv(r){return pi(r,Af)}function Su(r){return pi(r,df)}function qh(r){return pi(r,L5)}function _u(r){return pi(r,cf)}function yv(r){Et(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const o=r[n].indexState.offset;P5(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new vs(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Z3=41943040;class po{static withCacheSize(e){return new po(e,po.DEFAULT_COLLECTION_PERCENTILE,po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(r,e,t){const n=r.store(ga),o=r.store(Hu),s=[],l=IDBKeyRange.only(t.batchId);let d=0;const h=n.ee({range:l},((g,y,_)=>(d++,_.delete())));s.push(h.next((()=>{Et(d===1,47070,{batchId:t.batchId})})));const u=[];for(const g of t.mutations){const y=H_(e,g.key.path,t.batchId);s.push(o.delete(y)),u.push(g.key)}return Re.waitFor(s).next((()=>u))}function Qm(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw wt(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */po.DEFAULT_COLLECTION_PERCENTILE=10,po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,po.DEFAULT=new po(Z3,po.DEFAULT_COLLECTION_PERCENTILE,po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),po.DISABLED=new po(-1,0,0);class A0{constructor(e,t,n,o){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=o,this.Xn={}}static wt(e,t,n,o){Et(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new A0(s,t,n,o)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bc(e).ee({index:wd,range:n},((o,s,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,n,o){const s=Ru(e),l=bc(e);return l.add({}).next((d=>{Et(typeof d=="number",49019);const h=new $5(d,t,n,o),u=(function(b,R,j){const z=j.baseMutations.map((M=>Km(b.yt,M))),T=j.mutations.map((M=>Km(b.yt,M)));return{userId:R,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:z,mutations:T}})(this.serializer,this.userId,h),g=[];let y=new Xr(((_,b)=>Zt(_.canonicalString(),b.canonicalString())));for(const _ of o){const b=H_(this.userId,_.key.path,d);y=y.add(_.key.path.popLast()),g.push(l.put(u)),g.push(s.put(b,FE))}return y.forEach((_=>{g.push(this.indexManager.addToCollectionParentIndex(e,_))})),e.addOnCommittedListener((()=>{this.Xn[d]=h.keys()})),Re.waitFor(g).next((()=>h))}))}lookupMutationBatch(e,t){return bc(e).get(t).next((n=>n?(Et(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),xd(this.serializer,n)):null))}er(e,t){return this.Xn[t]?Re.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const o=n.keys();return this.Xn[t]=o,o}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,o=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return bc(e).ee({index:wd,range:o},((l,d,h)=>{d.userId===this.userId&&(Et(d.batchId>=n,47524,{tr:n}),s=xd(this.serializer,d)),h.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=_d;return bc(e).ee({index:wd,range:t,reverse:!0},((o,s,l)=>{n=s.batchId,l.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,_d],[this.userId,Number.POSITIVE_INFINITY]);return bc(e).J(wd,t).next((n=>n.map((o=>xd(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=hm(this.userId,t.path),o=IDBKeyRange.lowerBound(n),s=[];return Ru(e).ee({range:o},((l,d,h)=>{const[u,g,y]=l,_=Ga(g);if(u===this.userId&&t.path.isEqual(_))return bc(e).get(y).next((b=>{if(!b)throw wt(61480,{nr:l,batchId:y});Et(b.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:b.userId,batchId:y}),s.push(xd(this.serializer,b))}));h.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Xr(Zt);const o=[];return t.forEach((s=>{const l=hm(this.userId,s.path),d=IDBKeyRange.lowerBound(l),h=Ru(e).ee({range:d},((u,g,y)=>{const[_,b,R]=u,j=Ga(b);_===this.userId&&s.path.isEqual(j)?n=n.add(R):y.done()}));o.push(h)})),Re.waitFor(o).next((()=>this.rr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,o=n.length+1,s=hm(this.userId,n),l=IDBKeyRange.lowerBound(s);let d=new Xr(Zt);return Ru(e).ee({range:l},((h,u,g)=>{const[y,_,b]=h,R=Ga(_);y===this.userId&&n.isPrefixOf(R)?R.length===o&&(d=d.add(b)):g.done()})).next((()=>this.rr(e,d)))}rr(e,t){const n=[],o=[];return t.forEach((s=>{o.push(bc(e).get(s).next((l=>{if(l===null)throw wt(35274,{batchId:s});Et(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:s}),n.push(xd(this.serializer,l))})))})),Re.waitFor(o).next((()=>n))}removeMutationBatch(e,t){return eT(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),Re.forEach(n,(o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Re.resolve();const n=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),o=[];return Ru(e).ee({range:n},((s,l,d)=>{if(s[0]===this.userId){const h=Ga(s[1]);o.push(h)}else d.done()})).next((()=>{Et(o.length===0,56720,{sr:o.map((s=>s.canonicalString()))})}))}))}containsKey(e,t){return tT(e,this.userId,t)}_r(e){return rT(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:_d,lastStreamToken:""}))}}function tT(r,e,t){const n=hm(e,t.path),o=n[1],s=IDBKeyRange.lowerBound(n);let l=!1;return Ru(r).ee({range:s,X:!0},((d,h,u)=>{const[g,y,_]=d;g===e&&y===o&&(l=!0),u.done()})).next((()=>l))}function bc(r){return pi(r,ga)}function Ru(r){return pi(r,Hu)}function rT(r){return pi(r,Tf)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Od(0)}static cr(){return new Od(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const n=new Od(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Bt.fromTimestamp(new Jr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.lr(e).next((o=>(o.highestListenSequenceNumber=t,n&&(o.lastRemoteSnapshotVersion=n.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.hr(e,o))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Tu(e).delete(t.targetId))).next((()=>this.lr(e))).next((n=>(Et(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n))))}removeTargets(e,t,n){let o=0;const s=[];return Tu(e).ee(((l,d)=>{const h=Zh(d);h.sequenceNumber<=t&&n.get(h.targetId)===null&&(o++,s.push(this.removeTargetData(e,h)))})).next((()=>Re.waitFor(s))).next((()=>o))}forEachTarget(e,t){return Tu(e).ee(((n,o)=>{const s=Zh(o);t(s)}))}lr(e){return vv(e).get($m).next((t=>(Et(t!==null,2888),t)))}hr(e,t){return vv(e).put($m,t)}Pr(e,t){return Tu(e).put(J3(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const n=Fd(t),o=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return Tu(e).ee({range:o,index:K_},((l,d,h)=>{const u=Zh(d);Uf(t,u.target)&&(s=u,h.done())})).next((()=>s))}addMatchingKeys(e,t,n){const o=[],s=Ac(e);return t.forEach((l=>{const d=xo(l.path);o.push(s.put({targetId:n,path:d})),o.push(this.referenceDelegate.addReference(e,n,l))})),Re.waitFor(o)}removeMatchingKeys(e,t,n){const o=Ac(e);return Re.forEach(t,(s=>{const l=xo(s.path);return Re.waitFor([o.delete([n,l]),this.referenceDelegate.removeReference(e,n,s)])}))}removeMatchingKeysForTargetId(e,t){const n=Ac(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(o)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),o=Ac(e);let s=dr();return o.ee({range:n,X:!0},((l,d,h)=>{const u=Ga(l[1]),g=new st(u);s=s.add(g)})).next((()=>s))}containsKey(e,t){const n=xo(t.path),o=IDBKeyRange.bound([n],[O_(n)],!1,!0);let s=0;return Ac(e).ee({index:B5,X:!0,range:o},(([l,d],h,u)=>{l!==0&&(s++,u.done())})).next((()=>s>0))}At(e,t){return Tu(e).get(t).next((n=>n?Zh(n):null))}}function Tu(r){return pi(r,Gu)}function vv(r){return pi(r,Td)}function Ac(r){return pi(r,Ku)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="LruGarbageCollector",cP=1048576;function Sv([r,e],[t,n]){const o=Zt(r,t);return o===0?Zt(e,n):o}class dP{constructor(e){this.Ir=e,this.buffer=new Xr(Sv),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();Sv(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nT{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Qe(wv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Dc(t)?Qe(wv,"Ignoring IndexedDB error during garbage collection: ",t):await qd(t)}await this.Vr(3e5)}))}}class uP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return Re.resolve(Ws.ce);const n=new dP(t);return this.mr.forEachTarget(e,(o=>n.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>n.Ar(o))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Qe("LruGarbageCollector","Garbage collection skipped; disabled"),Re.resolve(bv)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,o,s,l,d,h,u;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(Qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),o=this.params.maximumSequenceNumbersToCollect):o=y,l=Date.now(),this.nthSequenceNumber(e,o)))).next((y=>(n=y,d=Date.now(),this.removeTargets(e,n,t)))).next((y=>(s=y,h=Date.now(),this.removeOrphanedDocuments(e,n)))).next((y=>(u=Date.now(),ku()<=xr.DEBUG&&Qe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${o} in `+(d-l)+`ms
	Removed ${s} targets in `+(h-d)+`ms
	Removed ${y} documents in `+(u-h)+`ms
Total Duration: ${u-g}ms`),Re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:s,documentsRemoved:y}))))}}function iT(r,e){return new uP(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,t){this.db=e,this.garbageCollector=iT(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((o=>n+o))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((n,o)=>t(o)))}addReference(e,t,n){return Jp(e,n)}removeReference(e,t,n){return Jp(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Jp(e,t)}br(e,t){return(function(o,s){let l=!1;return rT(o).te((d=>tT(o,d,s).next((h=>(h&&(l=!0),Re.resolve(!h)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let s=0;return this.Sr(e,((l,d)=>{if(d<=t){const h=this.br(e,l).next((u=>{if(!u)return s++,n.getEntry(e,l).next((()=>(n.removeEntry(l,Bt.min()),Ac(e).delete((function(y){return[0,xo(y.path)]})(l)))))}));o.push(h)}})).next((()=>Re.waitFor(o))).next((()=>n.apply(e))).next((()=>s))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Jp(e,t)}Sr(e,t){const n=Ac(e);let o,s=Ws.ce;return n.ee({index:B5},(([l,d],{path:h,sequenceNumber:u})=>{l===0?(s!==Ws.ce&&t(new st(Ga(o)),s),s=u,o=h):s=Ws.ce})).next((()=>{s!==Ws.ce&&t(new st(Ga(o)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Jp(r,e){return Ac(r).put((function(n,o){return{targetId:0,path:xo(n.path),sequenceNumber:o}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(){this.changes=new Wl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Re.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return dd(e).put(n)}removeEntry(e,t,n){return dd(e).delete((function(s,l){const d=s.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Jm(l),d[d.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Dr(e,n))))}getEntry(e,t){let n=Fn.newInvalidDocument(t);return dd(e).ee({index:fm,range:IDBKeyRange.only(Uh(t))},((o,s)=>{n=this.Cr(t,s)})).next((()=>n))}vr(e,t){let n={size:0,document:Fn.newInvalidDocument(t)};return dd(e).ee({index:fm,range:IDBKeyRange.only(Uh(t))},((o,s)=>{n={document:this.Cr(t,s),size:Qm(s)}})).next((()=>n))}getEntries(e,t){let n=bs();return this.Fr(e,t,((o,s)=>{const l=this.Cr(o,s);n=n.insert(o,l)})).next((()=>n))}Mr(e,t){let n=bs(),o=new vn(st.comparator);return this.Fr(e,t,((s,l)=>{const d=this.Cr(s,l);n=n.insert(s,d),o=o.insert(s,Qm(l))})).next((()=>({documents:n,Or:o})))}Fr(e,t,n){if(t.isEmpty())return Re.resolve();let o=new Xr(Cv);t.forEach((h=>o=o.add(h)));const s=IDBKeyRange.bound(Uh(o.first()),Uh(o.last())),l=o.getIterator();let d=l.getNext();return dd(e).ee({index:fm,range:s},((h,u,g)=>{const y=st.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;d&&Cv(d,y)<0;)n(d,null),d=l.getNext();d&&d.isEqual(y)&&(n(d,u),d=l.hasNext()?l.getNext():null),d?g.j(Uh(d)):g.done()})).next((()=>{for(;d;)n(d,null),d=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,n,o,s){const l=t.path,d=[l.popLast().toArray(),l.lastSegment(),Jm(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],h=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return dd(e).J(IDBKeyRange.bound(d,h,!0)).next((u=>{s==null||s.incrementDocumentReadCount(u.length);let g=bs();for(const y of u){const _=this.Cr(st.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);_.isFoundDocument()&&(Hf(t,_)||o.has(_.key))&&(g=g.insert(_.key,_))}return g}))}getAllFromCollectionGroup(e,t,n,o){let s=bs();const l=Tv(t,n),d=Tv(t,vs.max());return dd(e).ee({index:G_,range:IDBKeyRange.bound(l,d,!0)},((h,u,g)=>{const y=this.Cr(st.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(y.key,y),s.size===o&&g.done()})).next((()=>s))}newChangeBuffer(e){return new pP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return _v(e).get(z1).next((t=>(Et(!!t,20021),t)))}Dr(e,t){return _v(e).put(z1,t)}Cr(e,t){if(t){const n=XR(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(Bt.min())))return n}return Fn.newInvalidDocument(e)}}function sT(r){return new fP(r)}class pP extends oT{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Wl((n=>n.toString()),((n,o)=>n.isEqual(o)))}applyChanges(e){const t=[];let n=0,o=new Xr(((s,l)=>Zt(s.canonicalString(),l.canonicalString())));return this.changes.forEach(((s,l)=>{const d=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,d.readTime)),l.isValidDocument()){const h=sv(this.Nr.serializer,l);o=o.add(s.path.popLast());const u=Qm(h);n+=u-d.size,t.push(this.Nr.addEntry(e,s,h))}else if(n-=d.size,this.trackRemovals){const h=sv(this.Nr.serializer,l.convertToNoDocument(Bt.min()));t.push(this.Nr.addEntry(e,s,h))}})),o.forEach((s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Nr.updateMetadata(e,n)),Re.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((n=>(this.Br.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:n,Or:o})=>(o.forEach(((s,l)=>{this.Br.set(s,{size:l,readTime:n.get(s).readTime})})),n)))}}function _v(r){return pi(r,Cf)}function dd(r){return pi(r,Wm)}function Uh(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Tv(r,e){const t=e.documentKey.path.toArray();return[r,Jm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Cv(r,e){const t=r.path.toArray(),n=e.path.toArray();let o=0;for(let s=0;s<t.length-2&&s<n.length-2;++s)if(o=Zt(t[s],n[s]),o)return o;return o=Zt(t.length,n.length),o||(o=Zt(t[t.length-2],n[n.length-2]),o||Zt(t[t.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,t,n,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=o}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(n=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(n!==null&&pf(n.mutation,o,Qo.empty(),Jr.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,dr()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=dr()){const o=Ka();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,n).next((s=>{let l=Qh();return s.forEach(((d,h)=>{l=l.insert(d,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const n=Ka();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,dr())))}populateOverlays(e,t,n){const o=[];return n.forEach((s=>{t.has(s)||o.push(s)})),this.documentOverlayCache.getOverlays(e,o).next((s=>{s.forEach(((l,d)=>{t.set(l,d)}))}))}computeViews(e,t,n,o){let s=bs();const l=ff(),d=(function(){return ff()})();return t.forEach(((h,u)=>{const g=n.get(u.key);o.has(u.key)&&(g===void 0||g.mutation instanceof $l)?s=s.insert(u.key,u):g!==void 0?(l.set(u.key,g.mutation.getFieldMask()),pf(g.mutation,u,g.mutation.getFieldMask(),Jr.now())):l.set(u.key,Qo.empty())})),this.recalculateAndSaveOverlays(e,s).next((h=>(h.forEach(((u,g)=>l.set(u,g))),t.forEach(((u,g)=>d.set(u,new mP(g,l.get(u)??null)))),d)))}recalculateAndSaveOverlays(e,t){const n=ff();let o=new vn(((l,d)=>l-d)),s=dr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const d of l)d.keys().forEach((h=>{const u=t.get(h);if(u===null)return;let g=n.get(h)||Qo.empty();g=d.applyToLocalView(u,g),n.set(h,g);const y=(o.get(d.batchId)||dr()).add(h);o=o.insert(d.batchId,y)}))})).next((()=>{const l=[],d=o.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),u=h.key,g=h.value,y=T3();g.forEach((_=>{if(!s.has(_)){const b=R3(t.get(_),n.get(_));b!==null&&y.set(_,b),s=s.add(_)}})),l.push(this.documentOverlayCache.saveOverlays(e,u,y))}return Re.waitFor(l)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,o){return(function(l){return st.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):b3(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,o):this.getDocumentsMatchingCollectionQuery(e,t,n,o)}getNextDocuments(e,t,n,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,o).next((s=>{const l=o-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,o-s.size):Re.resolve(Ka());let d=wf,h=s;return l.next((u=>Re.forEach(u,((g,y)=>(d<y.largestBatchId&&(d=y.largestBatchId),s.get(g)?Re.resolve():this.remoteDocumentCache.getEntry(e,g).next((_=>{h=h.insert(g,_)}))))).next((()=>this.populateOverlays(e,u,s))).next((()=>this.computeViews(e,h,u,dr()))).next((g=>({batchId:d,changes:_3(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new st(t)).next((n=>{let o=Qh();return n.isFoundDocument()&&(o=o.insert(n.key,n)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,o){const s=t.collectionGroup;let l=Qh();return this.indexManager.getCollectionParents(e,s).next((d=>Re.forEach(d,(h=>{const u=(function(y,_){return new hh(_,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,o).next((g=>{g.forEach(((y,_)=>{l=l.insert(y,_)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,n,o){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((l=>(s=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,o)))).next((l=>{s.forEach(((h,u)=>{const g=u.getKey();l.get(g)===null&&(l=l.insert(g,Fn.newInvalidDocument(g)))}));let d=Qh();return l.forEach(((h,u)=>{const g=s.get(h);g!==void 0&&pf(g.mutation,u,Qo.empty(),Jr.now()),Hf(t,u)&&(d=d.insert(h,u))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Re.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Po(o.createTime)}})(t)),Re.resolve()}getNamedQuery(e,t){return Re.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:Y3(o.bundledQuery),readTime:Po(o.readTime)}})(t)),Re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(){this.overlays=new vn(st.comparator),this.qr=new Map}getOverlay(e,t){return Re.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ka();return Re.forEach(t,(o=>this.getOverlay(e,o).next((s=>{s!==null&&n.set(o,s)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((o,s)=>{this.St(e,t,s)})),Re.resolve()}removeOverlaysForBatchId(e,t,n){const o=this.qr.get(n);return o!==void 0&&(o.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(n)),Re.resolve()}getOverlaysForCollection(e,t,n){const o=Ka(),s=t.length+1,l=new st(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const h=d.getNext().value,u=h.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&h.largestBatchId>n&&o.set(h.getKey(),h)}return Re.resolve(o)}getOverlaysForCollectionGroup(e,t,n,o){let s=new vn(((u,g)=>u-g));const l=this.overlays.getIterator();for(;l.hasNext();){const u=l.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>n){let g=s.get(u.largestBatchId);g===null&&(g=Ka(),s=s.insert(u.largestBatchId,g)),g.set(u.getKey(),u)}}const d=Ka(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((u,g)=>d.set(u,g))),!(d.size()>=o)););return Re.resolve(d)}St(e,t,n){const o=this.overlays.get(n.key);if(o!==null){const l=this.qr.get(o.largestBatchId).delete(n.key);this.qr.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(n.key,new U5(t,n));let s=this.qr.get(t);s===void 0&&(s=dr(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(){this.sessionToken=ai.EMPTY_BYTE_STRING}getSessionToken(e){return Re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(){this.Qr=new Xr(Ri.$r),this.Ur=new Xr(Ri.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Ri(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new Ri(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new st(new Nr([])),n=new Ri(t,e),o=new Ri(t,e+1),s=[];return this.Ur.forEachInRange([n,o],(l=>{this.Gr(l),s.push(l.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new st(new Nr([])),n=new Ri(t,e),o=new Ri(t,e+1);let s=dr();return this.Ur.forEachInRange([n,o],(l=>{s=s.add(l.key)})),s}containsKey(e){const t=new Ri(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Ri{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return st.comparator(e.key,t.key)||Zt(e.Yr,t.Yr)}static Kr(e,t){return Zt(e.Yr,t.Yr)||st.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Xr(Ri.$r)}checkEmpty(e){return Re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,o){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new $5(s,t,n,o);this.mutationQueue.push(l);for(const d of o)this.Zr=this.Zr.add(new Ri(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Re.resolve(l)}lookupMutationBatch(e,t){return Re.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,o=this.ei(n),s=o<0?0:o;return Re.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Re.resolve(this.mutationQueue.length===0?_d:this.tr-1)}getAllMutationBatches(e){return Re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ri(t,0),o=new Ri(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,o],(l=>{const d=this.Xr(l.Yr);s.push(d)})),Re.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Xr(Zt);return t.forEach((o=>{const s=new Ri(o,0),l=new Ri(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,l],(d=>{n=n.add(d.Yr)}))})),Re.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,o=n.length+1;let s=n;st.isDocumentKey(s)||(s=s.child(""));const l=new Ri(new st(s),0);let d=new Xr(Zt);return this.Zr.forEachWhile((h=>{const u=h.key.path;return!!n.isPrefixOf(u)&&(u.length===o&&(d=d.add(h.Yr)),!0)}),l),Re.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((n=>{const o=this.Xr(n);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Et(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Re.forEach(t.mutations,(o=>{const s=new Ri(o.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new Ri(t,0),o=this.Zr.firstAfterOrEqual(n);return Re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Re.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.ri=e,this.docs=(function(){return new vn(st.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,o=this.docs.get(n),s=o?o.size:0,l=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Re.resolve(n?n.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let n=bs();return t.forEach((o=>{const s=this.docs.get(o);n=n.insert(o,s?s.document.mutableCopy():Fn.newInvalidDocument(o))})),Re.resolve(n)}getDocumentsMatchingQuery(e,t,n,o){let s=bs();const l=t.path,d=new st(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:u,value:{document:g}}=h.getNext();if(!l.isPrefixOf(u.path))break;u.path.length>l.length+1||P5(W_(g),n)<=0||(o.has(g.key)||Hf(t,g))&&(s=s.insert(g.key,g.mutableCopy()))}return Re.resolve(s)}getAllFromCollectionGroup(e,t,n,o){wt(9500)}ii(e,t){return Re.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new wP(this)}getSize(e){return Re.resolve(this.size)}}class wP extends oT{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(n)})),Re.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.persistence=e,this.si=new Wl((t=>Fd(t)),Uf),this.lastRemoteSnapshotVersion=Bt.min(),this.highestTargetId=0,this.oi=0,this._i=new Y5,this.targetCount=0,this.ai=Od.ur()}forEachTarget(e,t){return this.si.forEach(((n,o)=>t(o))),Re.resolve()}getLastRemoteSnapshotVersion(e){return Re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Re.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Od(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Re.resolve()}updateTargetData(e,t){return this.Pr(t),Re.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Re.resolve()}removeTargets(e,t,n){let o=0;const s=[];return this.si.forEach(((l,d)=>{d.sequenceNumber<=t&&n.get(d.targetId)===null&&(this.si.delete(l),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),Re.waitFor(s).next((()=>o))}getTargetCount(e){return Re.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Re.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Re.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const o=this.persistence.referenceDelegate,s=[];return o&&t.forEach((l=>{s.push(o.markPotentiallyOrphaned(e,l))})),Re.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Re.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Re.resolve(n)}containsKey(e,t){return Re.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ws(0),this.li=!1,this.li=!0,this.hi=new yP,this.referenceDelegate=e(this),this.Pi=new SP(this),this.indexManager=new sP,this.remoteDocumentCache=(function(o){return new vP(o)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new K3(t),this.Ii=new gP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new bP(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Qe("MemoryPersistence","Starting transaction:",e);const o=new _P(this.ci.next());return this.referenceDelegate.Ei(),n(o).next((s=>this.referenceDelegate.di(o).next((()=>s)))).toPromise().then((s=>(o.raiseOnCommittedEvent(),s)))}Ai(e,t){return Re.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class _P extends q_{constructor(e){super(),this.currentSequenceNumber=e}}class k0{constructor(e){this.persistence=e,this.Ri=new Y5,this.Vi=null}static mi(e){return new k0(e)}get fi(){if(this.Vi)return this.Vi;throw wt(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Re.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Re.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Re.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((s=>this.fi.add(s.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Re.forEach(this.fi,(n=>{const o=st.fromPath(n);return this.gi(e,o).next((s=>{s||t.removeEntry(o,Bt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Re.or([()=>Re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Xm{constructor(e,t){this.persistence=e,this.pi=new Wl((n=>xo(n.path)),((n,o)=>n.isEqual(o))),this.garbageCollector=iT(this,t)}static mi(e,t){return new Xm(e,t)}Ei(){}di(e){return Re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((o=>n+o))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return Re.forEach(this.pi,((n,o)=>this.br(e,n,o).next((s=>s?Re.resolve():t(o)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const o=this.persistence.getRemoteDocumentCache(),s=o.newChangeBuffer();return o.ii(e,(l=>this.br(e,l,t).next((d=>{d||(n++,s.removeEntry(l,Bt.min()))})))).next((()=>s.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Re.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Re.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Re.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Re.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mm(e.data.value)),t}br(e,t,n){return Re.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return Re.resolve(o!==void 0&&o>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.serializer=e}k(e,t,n,o){const s=new h0("createOrUpgrade",t);n<1&&o>=1&&((function(h){h.createObjectStore(qf)})(e),(function(h){h.createObjectStore(Tf,{keyPath:LE}),h.createObjectStore(ga,{keyPath:Fb,autoIncrement:!0}).createIndex(wd,zb,{unique:!0}),h.createObjectStore(Hu)})(e),Av(e),(function(h){h.createObjectStore(pd)})(e));let l=Re.resolve();return n<3&&o>=3&&(n!==0&&((function(h){h.deleteObjectStore(Ku),h.deleteObjectStore(Gu),h.deleteObjectStore(Td)})(e),Av(e)),l=l.next((()=>(function(h){const u=h.store(Td),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bt.min().toTimestamp(),targetCount:0};return u.put($m,g)})(s)))),n<4&&o>=4&&(n!==0&&(l=l.next((()=>(function(h,u){return u.store(ga).J().next((y=>{h.deleteObjectStore(ga),h.createObjectStore(ga,{keyPath:Fb,autoIncrement:!0}).createIndex(wd,zb,{unique:!0});const _=u.store(ga),b=y.map((R=>_.put(R)));return Re.waitFor(b)}))})(e,s)))),l=l.next((()=>{(function(h){h.createObjectStore(Ju,{keyPath:qE})})(e)}))),n<5&&o>=5&&(l=l.next((()=>this.yi(s)))),n<6&&o>=6&&(l=l.next((()=>((function(h){h.createObjectStore(Cf)})(e),this.wi(s))))),n<7&&o>=7&&(l=l.next((()=>this.Si(s)))),n<8&&o>=8&&(l=l.next((()=>this.bi(e,s)))),n<9&&o>=9&&(l=l.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&o>=10&&(l=l.next((()=>this.Di(s)))),n<11&&o>=11&&(l=l.next((()=>{(function(h){h.createObjectStore(p0,{keyPath:UE})})(e),(function(h){h.createObjectStore(m0,{keyPath:HE})})(e)}))),n<12&&o>=12&&(l=l.next((()=>{(function(h){const u=h.createObjectStore(g0,{keyPath:ZE});u.createIndex(O1,eR,{unique:!1}),u.createIndex(Q_,tR,{unique:!1})})(e)}))),n<13&&o>=13&&(l=l.next((()=>(function(h){const u=h.createObjectStore(Wm,{keyPath:zE});u.createIndex(fm,VE),u.createIndex(G_,OE)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(pd)))),n<14&&o>=14&&(l=l.next((()=>this.Fi(e,s)))),n<15&&o>=15&&(l=l.next((()=>(function(h){h.createObjectStore(L5,{keyPath:GE,autoIncrement:!0}).createIndex(V1,KE,{unique:!1}),h.createObjectStore(cf,{keyPath:JE}).createIndex(J_,YE,{unique:!1}),h.createObjectStore(df,{keyPath:QE}).createIndex(Y_,XE,{unique:!1})})(e)))),n<16&&o>=16&&(l=l.next((()=>{t.objectStore(cf).clear()})).next((()=>{t.objectStore(df).clear()}))),n<17&&o>=17&&(l=l.next((()=>{(function(h){h.createObjectStore(F5,{keyPath:rR})})(e)}))),n<18&&o>=18&&DS()&&(l=l.next((()=>{t.objectStore(cf).clear()})).next((()=>{t.objectStore(df).clear()}))),l}wi(e){let t=0;return e.store(pd).ee(((n,o)=>{t+=Qm(o)})).next((()=>{const n={byteSize:t};return e.store(Cf).put(z1,n)}))}yi(e){const t=e.store(Tf),n=e.store(ga);return t.J().next((o=>Re.forEach(o,(s=>{const l=IDBKeyRange.bound([s.userId,_d],[s.userId,s.lastAcknowledgedBatchId]);return n.J(wd,l).next((d=>Re.forEach(d,(h=>{Et(h.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:h.batchId});const u=xd(this.serializer,h);return eT(e,s.userId,u).next((()=>{}))}))))}))))}Si(e){const t=e.store(Ku),n=e.store(pd);return e.store(Td).get($m).next((o=>{const s=[];return n.ee(((l,d)=>{const h=new Nr(l),u=(function(y){return[0,xo(y)]})(h);s.push(t.get(u).next((g=>g?Re.resolve():(y=>t.put({targetId:0,path:xo(y),sequenceNumber:o.highestListenSequenceNumber}))(h))))})).next((()=>Re.waitFor(s)))}))}bi(e,t){e.createObjectStore(Af,{keyPath:$E});const n=t.store(Af),o=new J5,s=l=>{if(o.add(l)){const d=l.lastSegment(),h=l.popLast();return n.put({collectionId:d,parent:xo(h)})}};return t.store(pd).ee({X:!0},((l,d)=>{const h=new Nr(l);return s(h.popLast())})).next((()=>t.store(Hu).ee({X:!0},(([l,d,h],u)=>{const g=Ga(d);return s(g.popLast())}))))}Di(e){const t=e.store(Gu);return t.ee(((n,o)=>{const s=Zh(o),l=J3(this.serializer,s);return t.put(l)}))}Ci(e,t){const n=t.store(pd),o=[];return n.ee(((s,l)=>{const d=t.store(Wm),h=(function(y){return y.document?new st(Nr.fromString(y.document.name).popFirst(5)):y.noDocument?st.fromSegments(y.noDocument.path):y.unknownDocument?st.fromSegments(y.unknownDocument.path):wt(36783)})(l).path.toArray(),u={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(d.put(u))})).next((()=>Re.waitFor(o)))}Fi(e,t){const n=t.store(ga),o=sT(this.serializer),s=new Q5(k0.mi,this.serializer.yt);return n.J().next((l=>{const d=new Map;return l.forEach((h=>{let u=d.get(h.userId)??dr();xd(this.serializer,h).keys().forEach((g=>u=u.add(g))),d.set(h.userId,u)})),Re.forEach(d,((h,u)=>{const g=new Ui(u),y=C0.wt(this.serializer,g),_=s.getIndexManager(g),b=A0.wt(g,this.serializer,_,s.referenceDelegate);return new aT(o,b,y,_).recalculateAndSaveOverlaysForDocumentKeys(new M1(t,Ws.ce),h).next()}))}))}}function Av(r){r.createObjectStore(Ku,{keyPath:DE}).createIndex(B5,WE,{unique:!0}),r.createObjectStore(Gu,{keyPath:"targetId"}).createIndex(K_,ME,{unique:!0}),r.createObjectStore(Td)}const vc="IndexedDbPersistence",o1=18e5,s1=5e3,a1="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",CP="main";class X5{constructor(e,t,n,o,s,l,d,h,u,g,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=s,this.window=l,this.document=d,this.xi=u,this.Oi=g,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=_=>Promise.resolve(),!X5.v())throw new it(We.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hP(this,o),this.$i=t+CP,this.serializer=new K3(h),this.Ui=new Nc(this.$i,this.Ni,new TP(this.serializer)),this.hi=new eP,this.Pi=new lP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sT(this.serializer),this.Ii=new ZR,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Ro(vc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new it(We.FAILED_PRECONDITION,a1);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Ws(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Yp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Dc(e))return Qe(vc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Qe(vc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Hh(e).get(bu).next((t=>Re.resolve(this.es(t))))}ts(e){return Yp(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,o1)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=pi(t,Ju);return n.J().next((o=>{const s=this.ss(o,o1),l=o.filter((d=>s.indexOf(d)===-1));return Re.forEach(l,(d=>n.delete(d.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Re.resolve(!0):Hh(e).get(bu).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,s1)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new it(We.FAILED_PRECONDITION,a1);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yp(e).J().next((n=>this.ss(n,s1).find((o=>{if(this.clientId!==o.clientId){const s=!this.networkEnabled&&o.networkEnabled,l=!this.inForeground&&o.inForeground,d=this.networkEnabled===o.networkEnabled;if(s||l&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Qe(vc,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[qf,Ju],(e=>{const t=new M1(e,Ws.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((n=>this.rs(n.updateTimeMs,t)&&!this.us(n.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Yp(e).J().next((t=>this.ss(t,o1).map((n=>n.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return A0.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new aP(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return C0.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){Qe(vc,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",s=(function(h){return h===18?oR:h===17?t3:h===16?iR:h===15?z5:h===14?e3:h===13?Z_:h===12?nR:h===11?X_:void wt(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,o,s,(d=>(l=new M1(d,this.ci?this.ci.next():Ws.ce),t==="readwrite-primary"?this.Hi(l).next((h=>!!h||this.Yi(l))).next((h=>{if(!h)throw Ro(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new it(We.FAILED_PRECONDITION,$_);return n(l)})).next((h=>this.Xi(l).next((()=>h)))):this.Is(l).next((()=>n(l)))))).then((d=>(l.raiseOnCommittedEvent(),d)))}Is(e){return Hh(e).get(bu).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,s1)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new it(We.FAILED_PRECONDITION,a1)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Hh(e).put(bu,t)}static v(){return Nc.v()}Zi(e){const t=Hh(e);return t.get(bu).next((n=>this.es(n)?(Qe(vc,"Releasing primary lease."),t.delete(bu)):Re.resolve()))}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Ro(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;MS()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const n=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return Qe(vc,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Ro(vc,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Ro("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Hh(r){return pi(r,qf)}function Yp(r){return pi(r,Ju)}function AP(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e,t,n,o){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=o}static As(e,t){let n=dr(),o=dr();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:o=o.add(s.doc.key)}return new Z5(e,t.fromCache,n,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return MS()?8:U_(fi())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,o){const s={result:null};return this.ys(e,t).next((l=>{s.result=l})).next((()=>{if(!s.result)return this.ws(e,t,o,n).next((l=>{s.result=l}))})).next((()=>{if(s.result)return;const l=new kP;return this.Ss(e,t,l).next((d=>{if(s.result=d,this.Vs)return this.bs(e,t,l,d.size)}))})).next((()=>s.result))}bs(e,t,n,o){return n.documentReadCount<this.fs?(ku()<=xr.DEBUG&&Qe("QueryEngine","SDK will not create cache indexes for query:",ju(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Re.resolve()):(ku()<=xr.DEBUG&&Qe("QueryEngine","Query:",ju(t),"scans",n.documentReadCount,"local documents and returns",o,"documents as results."),n.documentReadCount>this.gs*o?(ku()<=xr.DEBUG&&Qe("QueryEngine","The SDK decides to create cache indexes for query:",ju(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$s(t))):Re.resolve())}ys(e,t){if(Yb(t))return Re.resolve(null);let n=$s(t);return this.indexManager.getIndexType(e,n).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=G1(t,null,"F"),n=$s(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((s=>{const l=dr(...s);return this.ps.getDocuments(e,l).next((d=>this.indexManager.getMinOffset(e,n).next((h=>{const u=this.Ds(t,d);return this.Cs(t,u,l,h.readTime)?this.ys(e,G1(t,null,"F")):this.vs(e,u,t,h)}))))})))))}ws(e,t,n,o){return Yb(t)||o.isEqual(Bt.min())?Re.resolve(null):this.ps.getDocuments(e,n).next((s=>{const l=this.Ds(t,s);return this.Cs(t,l,n,o)?Re.resolve(null):(ku()<=xr.DEBUG&&Qe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ju(t)),this.vs(e,l,t,jE(o,wf)).next((d=>d)))}))}Ds(e,t){let n=new Xr(w3(e));return t.forEach(((o,s)=>{Hf(e,s)&&(n=n.add(s))})),n}Cs(e,t,n,o){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(o)>0)}Ss(e,t,n){return ku()<=xr.DEBUG&&Qe("QueryEngine","Using full collection scan to execute query:",ju(t)),this.ps.getDocumentsMatchingQuery(e,t,vs.min(),n)}vs(e,t,n,o){return this.ps.getDocumentsMatchingQuery(e,n,o).next((s=>(t.forEach((l=>{s=s.insert(l.key,l)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="LocalStore",jP=3e8;class IP{constructor(e,t,n,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new vn(Zt),this.xs=new Wl((s=>Fd(s)),Uf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aT(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function cT(r,e,t,n){return new IP(r,e,t,n)}async function dT(r,e){const t=er(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let o;return t.mutationQueue.getAllMutationBatches(n).next((s=>(o=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((s=>{const l=[],d=[];let h=dr();for(const u of o){l.push(u.batchId);for(const g of u.mutations)h=h.add(g.key)}for(const u of s){d.push(u.batchId);for(const g of u.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(n,h).next((u=>({Ls:u,removedBatchIds:l,addedBatchIds:d})))}))}))}function EP(r,e){const t=er(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const o=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,h,u,g){const y=u.batch,_=y.keys();let b=Re.resolve();return _.forEach((R=>{b=b.next((()=>g.getEntry(h,R))).next((j=>{const z=u.docVersions.get(R);Et(z!==null,48541),j.version.compareTo(z)<0&&(y.applyToRemoteDocument(j,u),j.isValidDocument()&&(j.setReadTime(u.commitVersion),g.addEntry(j)))}))})),b.next((()=>d.mutationQueue.removeMutationBatch(h,y)))})(t,n,e,s).next((()=>s.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(d){let h=dr();for(let u=0;u<d.mutationResults.length;++u)d.mutationResults[u].transformResults.length>0&&(h=h.add(d.batch.mutations[u].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(n,o)))}))}function uT(r){const e=er(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function RP(r,e){const t=er(r),n=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((g,y)=>{const _=o.get(y);if(!_)return;d.push(t.Pi.removeMatchingKeys(s,g.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(s,g.addedDocuments,y))));let b=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(y)!==null?b=b.withResumeToken(ai.EMPTY_BYTE_STRING,Bt.min()).withLastLimboFreeSnapshotVersion(Bt.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,n)),o=o.insert(y,b),(function(j,z,T){return j.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=jP?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(_,b,g)&&d.push(t.Pi.updateTargetData(s,b))}));let h=bs(),u=dr();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,g))})),d.push(PP(s,l,e.documentUpdates).next((g=>{h=g.ks,u=g.qs}))),!n.isEqual(Bt.min())){const g=t.Pi.getLastRemoteSnapshotVersion(s).next((y=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n)));d.push(g)}return Re.waitFor(d).next((()=>l.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,h,u))).next((()=>h))})).then((s=>(t.Ms=o,s)))}function PP(r,e,t){let n=dr(),o=dr();return t.forEach((s=>n=n.add(s))),e.getEntries(r,n).next((s=>{let l=bs();return t.forEach(((d,h)=>{const u=s.get(d);h.isFoundDocument()!==u.isFoundDocument()&&(o=o.add(d)),h.isNoDocument()&&h.version.isEqual(Bt.min())?(e.removeEntry(d,h.readTime),l=l.insert(d,h)):!u.isValidDocument()||h.version.compareTo(u.version)>0||h.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(h),l=l.insert(d,h)):Qe(ex,"Ignoring outdated watch update for ",d,". Current version:",u.version," Watch version:",h.version)})),{ks:l,qs:o}}))}function NP(r,e){const t=er(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=_d),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function BP(r,e){const t=er(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let o;return t.Pi.getTargetData(n,e).next((s=>s?(o=s,Re.resolve(o)):t.Pi.allocateTargetId(n).next((l=>(o=new El(e,l,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,o).next((()=>o)))))))})).then((n=>{const o=t.Ms.get(n.targetId);return(o===null||n.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function t5(r,e,t){const n=er(r),o=n.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",s,(l=>n.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!Dc(l))throw l;Qe(ex,`Failed to update sequence numbers for target ${e}: ${l}`)}n.Ms=n.Ms.remove(e),n.xs.delete(o.target)}function kv(r,e,t){const n=er(r);let o=Bt.min(),s=dr();return n.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,u,g){const y=er(h),_=y.xs.get(g);return _!==void 0?Re.resolve(y.Ms.get(_)):y.Pi.getTargetData(u,g)})(n,l,$s(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(l,d.targetId).next((h=>{s=h}))})).next((()=>n.Fs.getDocumentsMatchingQuery(l,e,t?o:Bt.min(),t?s:dr()))).next((d=>(LP(n,vR(e),d),{documents:d,Qs:s})))))}function LP(r,e,t){let n=r.Os.get(e)||Bt.min();t.forEach(((o,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)})),r.Os.set(e,n)}class jv{constructor(){this.activeTargetIds=AR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hT{constructor(){this.Mo=new jv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new jv,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="ConnectivityMonitor";class Ev{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Qe(Iv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Qe(Iv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qp=null;function r5(){return Qp===null?Qp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qp++,"0x"+Qp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="RestConnection",zP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${o}`,this.Wo=this.databaseId.database===qm?`project_id=${n}`:`project_id=${n}&database_id=${o}`}Go(e,t,n,o,s){const l=r5(),d=this.zo(e,t.toUriEncodedString());Qe(l1,`Sending RPC '${e}' ${l}:`,d,n);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,o,s);const{host:u}=new URL(d),g=lh(u);return this.Jo(e,d,h,n,g).then((y=>(Qe(l1,`Received RPC '${e}' ${l}: `,y),y)),(y=>{throw Bd(l1,`RPC '${e}' ${l} failed with error: `,y,"url: ",d,"request:",n),y}))}Ho(e,t,n,o,s,l){return this.Go(e,t,n,o,s)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+uh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,s)=>e[s]=o)),n&&n.headers.forEach(((o,s)=>e[s]=o))}zo(e,t){const n=zP[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="WebChannelConnection";class MP extends VP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,o,s){const l=r5();return new Promise(((d,h)=>{const u=new P_;u.setWithCredentials(!0),u.listenOnce(N_.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case dm.NO_ERROR:const y=u.getResponseJson();Qe(fo,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),d(y);break;case dm.TIMEOUT:Qe(fo,`RPC '${e}' ${l} timed out`),h(new it(We.DEADLINE_EXCEEDED,"Request time out"));break;case dm.HTTP_ERROR:const _=u.getStatus();if(Qe(fo,`RPC '${e}' ${l} failed with status:`,_,"response text:",u.getResponseText()),_>0){let b=u.getResponseJson();Array.isArray(b)&&(b=b[0]);const R=b==null?void 0:b.error;if(R&&R.status&&R.message){const j=(function(T){const M=T.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(M)>=0?M:We.UNKNOWN})(R.status);h(new it(j,R.message))}else h(new it(We.UNKNOWN,"Server responded with status "+u.getStatus()))}else h(new it(We.UNAVAILABLE,"Connection failed."));break;default:wt(9055,{l_:e,streamId:l,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Qe(fo,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(o);Qe(fo,`RPC '${e}' ${l} sending request:`,o),u.send(t,"POST",g,n,15)}))}T_(e,t,n){const o=r5(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=F_(),d=L_(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(h.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,n),h.encodeInitMessageHeaders=!0;const g=s.join("");Qe(fo,`Creating RPC '${e}' stream ${o}: ${g}`,h);const y=l.createWebChannel(g,h);this.I_(y);let _=!1,b=!1;const R=new OP({Yo:z=>{b?Qe(fo,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(_||(Qe(fo,`Opening RPC '${e}' stream ${o} transport.`),y.open(),_=!0),Qe(fo,`RPC '${e}' stream ${o} sending:`,z),y.send(z))},Zo:()=>y.close()}),j=(z,T,M)=>{z.listen(T,(F=>{try{M(F)}catch(B){setTimeout((()=>{throw B}),0)}}))};return j(y,Yh.EventType.OPEN,(()=>{b||(Qe(fo,`RPC '${e}' stream ${o} transport opened.`),R.o_())})),j(y,Yh.EventType.CLOSE,(()=>{b||(b=!0,Qe(fo,`RPC '${e}' stream ${o} transport closed`),R.a_(),this.E_(y))})),j(y,Yh.EventType.ERROR,(z=>{b||(b=!0,Bd(fo,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),R.a_(new it(We.UNAVAILABLE,"The operation could not be completed")))})),j(y,Yh.EventType.MESSAGE,(z=>{var T;if(!b){const M=z.data[0];Et(!!M,16349);const F=M,B=(F==null?void 0:F.error)||((T=F[0])==null?void 0:T.error);if(B){Qe(fo,`RPC '${e}' stream ${o} received error:`,B);const J=B.status;let se=(function(S){const V=oi[S];if(V!==void 0)return B3(V)})(J),O=B.message;se===void 0&&(se=We.INTERNAL,O="Unknown error status: "+J+" with message "+B.message),b=!0,R.a_(new it(se,O)),y.close()}else Qe(fo,`RPC '${e}' stream ${o} received:`,M),R.u_(M)}})),j(d,B_.STAT_EVENT,(z=>{z.stat===B1.PROXY?Qe(fo,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===B1.NOPROXY&&Qe(fo,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(){return typeof window<"u"?window:null}function vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(r){return new WR(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,t,n=1e3,o=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=o,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-n);o>0&&Qe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="PersistentStream";class pT{constructor(e,t,n,o,s,l,d,h){this.Mi=e,this.S_=n,this.b_=o,this.connection=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new fT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===We.RESOURCE_EXHAUSTED?(Ro(t.toString()),Ro("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===We.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,o])=>{this.D_===t&&this.G_(n,o)}),(n=>{e((()=>{const o=new it(We.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(o)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{n((()=>this.z_(o)))})),this.stream.onMessage((o=>{n((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Qe(Rv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Qe(Rv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class WP extends pT{constructor(e,t,n,o,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,o,l),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=UR(this.serializer,e),n=(function(s){if(!("targetChange"in s))return Bt.min();const l=s.targetChange;return l.targetIds&&l.targetIds.length?Bt.min():l.readTime?Po(l.readTime):Bt.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Y1(this.serializer),t.addTarget=(function(s,l){let d;const h=l.target;if(d=Um(h)?{documents:W3(s,h)}:{query:$3(s,h).ft},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=z3(s,l.resumeToken);const u=K1(s,l.expectedCount);u!==null&&(d.expectedCount=u)}else if(l.snapshotVersion.compareTo(Bt.min())>0){d.readTime=nh(s,l.snapshotVersion.toTimestamp());const u=K1(s,l.expectedCount);u!==null&&(d.expectedCount=u)}return d})(this.serializer,e);const n=GR(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Y1(this.serializer),t.removeTarget=e,this.q_(t)}}class $P extends pT{constructor(e,t,n,o,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,o,l),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=HR(e.writeResults,e.commitTime),n=Po(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Y1(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>Km(this.serializer,n)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{}class UP extends qP{constructor(e,t,n,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new it(We.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,l])=>this.connection.Go(e,J1(t,n),o,s,l))).catch((s=>{throw s.name==="FirebaseError"?(s.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new it(We.UNKNOWN,s.toString())}))}Ho(e,t,n,o,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Ho(e,J1(t,n),o,l,d,s))).catch((l=>{throw l.name==="FirebaseError"?(l.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new it(We.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class HP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ro(t),this.aa=!1):Qe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="RemoteStore";class GP{constructor(e,t,n,o,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((l=>{n.enqueueAndForget((async()=>{Ud(this)&&(Qe(Md,"Restarting streams for network reachability change."),await(async function(h){const u=er(h);u.Ea.add(4),await Kf(u),u.Ra.set("Unknown"),u.Ea.delete(4),await I0(u)})(this))}))})),this.Ra=new HP(n,o)}}async function I0(r){if(Ud(r))for(const e of r.da)await e(!0)}async function Kf(r){for(const e of r.da)await e(!1)}function mT(r,e){const t=er(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ix(t)?nx(t):ph(t).O_()&&rx(t,e))}function tx(r,e){const t=er(r),n=ph(t);t.Ia.delete(e),n.O_()&&gT(t,e),t.Ia.size===0&&(n.O_()?n.L_():Ud(t)&&t.Ra.set("Unknown"))}function rx(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Bt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ph(r).Y_(e)}function gT(r,e){r.Va.Ue(e),ph(r).Z_(e)}function nx(r){r.Va=new VR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),ph(r).start(),r.Ra.ua()}function ix(r){return Ud(r)&&!ph(r).x_()&&r.Ia.size>0}function Ud(r){return er(r).Ea.size===0}function xT(r){r.Va=void 0}async function KP(r){r.Ra.set("Online")}async function JP(r){r.Ia.forEach(((e,t)=>{rx(r,e)}))}async function YP(r,e){xT(r),ix(r)?(r.Ra.ha(e),nx(r)):r.Ra.set("Unknown")}async function QP(r,e,t){if(r.Ra.set("Online"),e instanceof F3&&e.state===2&&e.cause)try{await(async function(o,s){const l=s.cause;for(const d of s.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,l),o.Ia.delete(d),o.Va.removeTarget(d))})(r,e)}catch(n){Qe(Md,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Zm(r,n)}else if(e instanceof ym?r.Va.Ze(e):e instanceof L3?r.Va.st(e):r.Va.tt(e),!t.isEqual(Bt.min()))try{const n=await uT(r.localStore);t.compareTo(n)>=0&&await(function(s,l){const d=s.Va.Tt(l);return d.targetChanges.forEach(((h,u)=>{if(h.resumeToken.approximateByteSize()>0){const g=s.Ia.get(u);g&&s.Ia.set(u,g.withResumeToken(h.resumeToken,l))}})),d.targetMismatches.forEach(((h,u)=>{const g=s.Ia.get(h);if(!g)return;s.Ia.set(h,g.withResumeToken(ai.EMPTY_BYTE_STRING,g.snapshotVersion)),gT(s,h);const y=new El(g.target,h,u,g.sequenceNumber);rx(s,y)})),s.remoteSyncer.applyRemoteEvent(d)})(r,t)}catch(n){Qe(Md,"Failed to raise snapshot:",n),await Zm(r,n)}}async function Zm(r,e,t){if(!Dc(e))throw e;r.Ea.add(1),await Kf(r),r.Ra.set("Offline"),t||(t=()=>uT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Qe(Md,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await I0(r)}))}function yT(r,e){return e().catch((t=>Zm(r,t,e)))}async function Jf(r){const e=er(r),t=Vc(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:_d;for(;XP(e);)try{const o=await NP(e.localStore,n);if(o===null){e.Ta.length===0&&t.L_();break}n=o.batchId,ZP(e,o)}catch(o){await Zm(e,o)}bT(e)&&vT(e)}function XP(r){return Ud(r)&&r.Ta.length<10}function ZP(r,e){r.Ta.push(e);const t=Vc(r);t.O_()&&t.X_&&t.ea(e.mutations)}function bT(r){return Ud(r)&&!Vc(r).x_()&&r.Ta.length>0}function vT(r){Vc(r).start()}async function eN(r){Vc(r).ra()}async function tN(r){const e=Vc(r);for(const t of r.Ta)e.ea(t.mutations)}async function rN(r,e,t){const n=r.Ta.shift(),o=q5.from(n,e,t);await yT(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Jf(r)}async function nN(r,e){e&&Vc(r).X_&&await(async function(n,o){if((function(l){return LR(l)&&l!==We.ABORTED})(o.code)){const s=n.Ta.shift();Vc(n).B_(),await yT(n,(()=>n.remoteSyncer.rejectFailedWrite(s.batchId,o))),await Jf(n)}})(r,e),bT(r)&&vT(r)}async function Pv(r,e){const t=er(r);t.asyncQueue.verifyOperationInProgress(),Qe(Md,"RemoteStore received new credentials");const n=Ud(t);t.Ea.add(3),await Kf(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await I0(t)}async function iN(r,e){const t=er(r);e?(t.Ea.delete(2),await I0(t)):e||(t.Ea.add(2),await Kf(t),t.Ra.set("Unknown"))}function ph(r){return r.ma||(r.ma=(function(t,n,o){const s=er(t);return s.sa(),new WP(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,o)})(r.datastore,r.asyncQueue,{Xo:KP.bind(null,r),t_:JP.bind(null,r),r_:YP.bind(null,r),H_:QP.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),ix(r)?nx(r):r.Ra.set("Unknown")):(await r.ma.stop(),xT(r))}))),r.ma}function Vc(r){return r.fa||(r.fa=(function(t,n,o){const s=er(t);return s.sa(),new $P(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:eN.bind(null,r),r_:nN.bind(null,r),ta:tN.bind(null,r),na:rN.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Jf(r)):(await r.fa.stop(),r.Ta.length>0&&(Qe(Md,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,t,n,o,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=o,this.removalCallback=s,this.deferred=new Qa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,o,s){const l=Date.now()+n,d=new ox(e,t,l,o,s);return d.start(n),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new it(We.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sx(r,e){if(Ro("AsyncQueue",`${e}: ${r}`),Dc(r))return new it(We.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{static emptySet(e){return new Du(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||st.comparator(t.key,n.key):(t,n)=>st.comparator(t.key,n.key),this.keyedMap=Qh(),this.sortedSet=new vn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Du)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,s=n.getNext().key;if(!o.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Du;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(){this.ga=new vn(st.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):wt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class ih{constructor(e,t,n,o,s,l,d,h,u){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=o,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=u}static fromInitialDocuments(e,t,n,o,s){const l=[];return t.forEach((d=>{l.push({type:0,doc:d})})),new ih(e,t,Du.emptySet(t),l,n,o,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&v0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==n[o].type||!t[o].doc.isEqual(n[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class sN{constructor(){this.queries=Bv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const o=er(t),s=o.queries;o.queries=Bv(),s.forEach(((l,d)=>{for(const h of d.Sa)h.onError(n)}))})(this,new it(We.ABORTED,"Firestore shutting down"))}}function Bv(){return new Wl((r=>v3(r)),v0)}async function wT(r,e){const t=er(r);let n=3;const o=e.query;let s=t.queries.get(o);s?!s.ba()&&e.Da()&&(n=2):(s=new oN,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await t.onListen(o,!0);break;case 1:s.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(l){const d=sx(l,`Initialization of query '${ju(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&ax(t)}async function ST(r,e){const t=er(r),n=e.query;let o=3;const s=t.queries.get(n);if(s){const l=s.Sa.indexOf(e);l>=0&&(s.Sa.splice(l,1),s.Sa.length===0?o=e.Da()?0:1:!s.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function aN(r,e){const t=er(r);let n=!1;for(const o of e){const s=o.query,l=t.queries.get(s);if(l){for(const d of l.Sa)d.Fa(o)&&(n=!0);l.wa=o}}n&&ax(t)}function lN(r,e,t){const n=er(r),o=n.queries.get(e);if(o)for(const s of o.Sa)s.onError(t);n.queries.delete(e)}function ax(r){r.Ca.forEach((e=>{e.next()}))}var n5,Lv;(Lv=n5||(n5={})).Ma="default",Lv.Cache="cache";class _T{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const o of e.docChanges)o.type!==3&&n.push(o);e=new ih(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ih.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==n5.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e){this.key=e}}class CT{constructor(e){this.key=e}}class cN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=dr(),this.mutatedKeys=dr(),this.eu=w3(e),this.tu=new Du(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Nv,o=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,l=o,d=!1;const h=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,u=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((g,y)=>{const _=o.get(g),b=Hf(this.query,y)?y:null,R=!!_&&this.mutatedKeys.has(_.key),j=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let z=!1;_&&b?_.data.isEqual(b.data)?R!==j&&(n.track({type:3,doc:b}),z=!0):this.su(_,b)||(n.track({type:2,doc:b}),z=!0,(h&&this.eu(b,h)>0||u&&this.eu(b,u)<0)&&(d=!0)):!_&&b?(n.track({type:0,doc:b}),z=!0):_&&!b&&(n.track({type:1,doc:_}),z=!0,(h||u)&&(d=!0)),z&&(b?(l=l.add(b),s=j?s.add(g):s.delete(g)):(l=l.delete(g),s=s.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),s=s.delete(g.key),n.track({type:1,doc:g})}return{tu:l,iu:n,Cs:d,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,o){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,y)=>(function(b,R){const j=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt(20277,{Rt:z})}};return j(b)-j(R)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(n),o=o??!1;const d=t&&!o?this._u():[],h=this.Xa.size===0&&this.current&&!o?1:0,u=h!==this.Za;return this.Za=h,l.length!==0||u?{snapshot:new ih(this.query,e.tu,s,l,e.mutatedKeys,h===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Nv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=dr(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new CT(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new TT(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=dr();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ih.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const lx="SyncEngine";class dN{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class uN{constructor(e){this.key=e,this.hu=!1}}class hN{constructor(e,t,n,o,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=o,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Wl((d=>v3(d)),v0),this.Iu=new Map,this.Eu=new Set,this.du=new vn(st.comparator),this.Au=new Map,this.Ru=new Y5,this.Vu={},this.mu=new Map,this.fu=Od.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function fN(r,e,t=!0){const n=RT(r);let o;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),o=s.view.lu()):o=await AT(n,e,t,!0),o}async function pN(r,e){const t=RT(r);await AT(t,e,!0,!1)}async function AT(r,e,t,n){const o=await BP(r.localStore,$s(e)),s=o.targetId,l=r.sharedClientState.addLocalQueryTarget(s,t);let d;return n&&(d=await mN(r,e,s,l==="current",o.resumeToken)),r.isPrimaryClient&&t&&mT(r.remoteStore,o),d}async function mN(r,e,t,n,o){r.pu=(y,_,b)=>(async function(j,z,T,M){let F=z.view.ru(T);F.Cs&&(F=await kv(j.localStore,z.query,!1).then((({documents:O})=>z.view.ru(O,F))));const B=M&&M.targetChanges.get(z.targetId),J=M&&M.targetMismatches.get(z.targetId)!=null,se=z.view.applyChanges(F,j.isPrimaryClient,B,J);return zv(j,z.targetId,se.au),se.snapshot})(r,y,_,b);const s=await kv(r.localStore,e,!0),l=new cN(e,s.Qs),d=l.ru(s.documents),h=Gf.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",o),u=l.applyChanges(d,r.isPrimaryClient,h);zv(r,t,u.au);const g=new dN(e,t,l);return r.Tu.set(e,g),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),u.snapshot}async function gN(r,e,t){const n=er(r),o=n.Tu.get(e),s=n.Iu.get(o.targetId);if(s.length>1)return n.Iu.set(o.targetId,s.filter((l=>!v0(l,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||await t5(n.localStore,o.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(o.targetId),t&&tx(n.remoteStore,o.targetId),i5(n,o.targetId)})).catch(qd)):(i5(n,o.targetId),await t5(n.localStore,o.targetId,!0))}async function xN(r,e){const t=er(r),n=t.Tu.get(e),o=t.Iu.get(n.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),tx(t.remoteStore,n.targetId))}async function yN(r,e,t){const n=PT(r);try{const o=await(function(l,d){const h=er(l),u=Jr.now(),g=d.reduce(((b,R)=>b.add(R.key)),dr());let y,_;return h.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let R=bs(),j=dr();return h.Ns.getEntries(b,g).next((z=>{R=z,R.forEach(((T,M)=>{M.isValidDocument()||(j=j.add(T))}))})).next((()=>h.localDocuments.getOverlayedDocuments(b,R))).next((z=>{y=z;const T=[];for(const M of d){const F=NR(M,y.get(M.key).overlayedDocument);F!=null&&T.push(new $l(M.key,F,u3(F.value.mapValue),go.exists(!0)))}return h.mutationQueue.addMutationBatch(b,u,T,d)})).next((z=>{_=z;const T=z.applyToLocalDocumentSet(y,j);return h.documentOverlayCache.saveOverlays(b,z.batchId,T)}))})).then((()=>({batchId:_.batchId,changes:_3(y)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(o.batchId),(function(l,d,h){let u=l.Vu[l.currentUser.toKey()];u||(u=new vn(Zt)),u=u.insert(d,h),l.Vu[l.currentUser.toKey()]=u})(n,o.batchId,t),await Yf(n,o.changes),await Jf(n.remoteStore)}catch(o){const s=sx(o,"Failed to persist write");t.reject(s)}}async function kT(r,e){const t=er(r);try{const n=await RP(t.localStore,e);e.targetChanges.forEach(((o,s)=>{const l=t.Au.get(s);l&&(Et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?l.hu=!0:o.modifiedDocuments.size>0?Et(l.hu,14607):o.removedDocuments.size>0&&(Et(l.hu,42227),l.hu=!1))})),await Yf(t,n,e)}catch(n){await qd(n)}}function Fv(r,e,t){const n=er(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const o=[];n.Tu.forEach(((s,l)=>{const d=l.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(l,d){const h=er(l);h.onlineState=d;let u=!1;h.queries.forEach(((g,y)=>{for(const _ of y.Sa)_.va(d)&&(u=!0)})),u&&ax(h)})(n.eventManager,e),o.length&&n.Pu.H_(o),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function bN(r,e,t){const n=er(r);n.sharedClientState.updateQueryState(e,"rejected",t);const o=n.Au.get(e),s=o&&o.key;if(s){let l=new vn(st.comparator);l=l.insert(s,Fn.newNoDocument(s,Bt.min()));const d=dr().add(s),h=new T0(Bt.min(),new Map,new vn(Zt),l,d);await kT(n,h),n.du=n.du.remove(s),n.Au.delete(e),cx(n)}else await t5(n.localStore,e,!1).then((()=>i5(n,e,t))).catch(qd)}async function vN(r,e){const t=er(r),n=e.batch.batchId;try{const o=await EP(t.localStore,e);IT(t,n,null),jT(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Yf(t,o)}catch(o){await qd(o)}}async function wN(r,e,t){const n=er(r);try{const o=await(function(l,d){const h=er(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let g;return h.mutationQueue.lookupMutationBatch(u,d).next((y=>(Et(y!==null,37113),g=y.keys(),h.mutationQueue.removeMutationBatch(u,y)))).next((()=>h.mutationQueue.performConsistencyCheck(u))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(u,g,d))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,g))).next((()=>h.localDocuments.getDocuments(u,g)))}))})(n.localStore,e);IT(n,e,t),jT(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Yf(n,o)}catch(o){await qd(o)}}function jT(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function IT(r,e,t){const n=er(r);let o=n.Vu[n.currentUser.toKey()];if(o){const s=o.get(e);s&&(t?s.reject(t):s.resolve(),o=o.remove(e)),n.Vu[n.currentUser.toKey()]=o}}function i5(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||ET(r,n)}))}function ET(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(tx(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),cx(r))}function zv(r,e,t){for(const n of t)n instanceof TT?(r.Ru.addReference(n.key,e),SN(r,n)):n instanceof CT?(Qe(lx,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||ET(r,n.key)):wt(19791,{wu:n})}function SN(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(Qe(lx,"New document in limbo: "+t),r.Eu.add(n),cx(r))}function cx(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new st(Nr.fromString(e)),n=r.fu.next();r.Au.set(n,new uN(t)),r.du=r.du.insert(t,n),mT(r.remoteStore,new El($s(b0(t.path)),n,"TargetPurposeLimboResolution",Ws.ce))}}async function Yf(r,e,t){const n=er(r),o=[],s=[],l=[];n.Tu.isEmpty()||(n.Tu.forEach(((d,h)=>{l.push(n.pu(h,e,t).then((u=>{var g;if((u||t)&&n.isPrimaryClient){const y=u?!u.fromCache:(g=t==null?void 0:t.targetChanges.get(h.targetId))==null?void 0:g.current;n.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(u){o.push(u);const y=Z5.As(h.targetId,u);s.push(y)}})))})),await Promise.all(l),n.Pu.H_(o),await(async function(h,u){const g=er(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>Re.forEach(u,(_=>Re.forEach(_.Es,(b=>g.persistence.referenceDelegate.addReference(y,_.targetId,b))).next((()=>Re.forEach(_.ds,(b=>g.persistence.referenceDelegate.removeReference(y,_.targetId,b)))))))))}catch(y){if(!Dc(y))throw y;Qe(ex,"Failed to update sequence numbers: "+y)}for(const y of u){const _=y.targetId;if(!y.fromCache){const b=g.Ms.get(_),R=b.snapshotVersion,j=b.withLastLimboFreeSnapshotVersion(R);g.Ms=g.Ms.insert(_,j)}}})(n.localStore,s))}async function _N(r,e){const t=er(r);if(!t.currentUser.isEqual(e)){Qe(lx,"User change. New user:",e.toKey());const n=await dT(t.localStore,e);t.currentUser=e,(function(s,l){s.mu.forEach((d=>{d.forEach((h=>{h.reject(new it(We.CANCELLED,l))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Yf(t,n.Ls)}}function TN(r,e){const t=er(r),n=t.Au.get(e);if(n&&n.hu)return dr().add(n.key);{let o=dr();const s=t.Iu.get(e);if(!s)return o;for(const l of s){const d=t.Tu.get(l);o=o.unionWith(d.view.nu)}return o}}function RT(r){const e=er(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=kT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bN.bind(null,e),e.Pu.H_=aN.bind(null,e.eventManager),e.Pu.yu=lN.bind(null,e.eventManager),e}function PT(r){const e=er(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wN.bind(null,e),e}class Nf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=j0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return cT(this.persistence,new lT,e.initialUser,this.serializer)}Cu(e){return new Q5(k0.mi,this.serializer)}Du(e){return new hT}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nf.provider={build:()=>new Nf};class CN extends Nf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Et(this.persistence.referenceDelegate instanceof Xm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new nT(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?po.withCacheSize(this.cacheSizeBytes):po.DEFAULT;return new Q5((n=>Xm.mi(n,t)),this.serializer)}}class AN extends Nf{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await PT(this.xu.syncEngine),await Jf(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return cT(this.persistence,new lT,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new nT(n,e.asyncQueue,t)}Mu(e,t){const n=new PE(t,this.persistence);return new RE(e.asyncQueue,n)}Cu(e){const t=AP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?po.withCacheSize(this.cacheSizeBytes):po.DEFAULT;return new X5(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,DP(),vm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new hT}}class e0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Fv(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=_N.bind(null,this.syncEngine),await iN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new sN})()}createDatastore(e){const t=j0(e.databaseInfo.databaseId),n=(function(s){return new MP(s)})(e.databaseInfo);return(function(s,l,d,h){return new UP(s,l,d,h)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,o,s,l,d){return new GP(n,o,s,l,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Fv(this.syncEngine,t,0)),(function(){return Ev.v()?new Ev:new FP})())}createSyncEngine(e,t){return(function(o,s,l,d,h,u,g){const y=new hN(o,s,l,d,h,u);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const s=er(o);Qe(Md,"RemoteStore shutting down."),s.Ea.add(5),await Kf(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}e0.provider={build:()=>new e0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ro("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc="FirestoreClient";class kN{constructor(e,t,n,o,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=o,this.user=Ui.UNAUTHENTICATED,this.clientId=R5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async l=>{Qe(Oc,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(n,(l=>(Qe(Oc,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=sx(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function c1(r,e){r.asyncQueue.verifyOperationInProgress(),Qe(Oc,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async o=>{n.isEqual(o)||(await dT(e.localStore,o),n=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Vv(r,e){r.asyncQueue.verifyOperationInProgress();const t=await jN(r);Qe(Oc,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>Pv(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,o)=>Pv(e.remoteStore,o))),r._onlineComponents=e}async function jN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Qe(Oc,"Using user provided OfflineComponentProvider");try{await c1(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===We.FAILED_PRECONDITION||o.code===We.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Bd("Error using user provided cache. Falling back to memory cache: "+t),await c1(r,new Nf)}}else Qe(Oc,"Using default OfflineComponentProvider"),await c1(r,new CN(void 0));return r._offlineComponents}async function BT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Qe(Oc,"Using user provided OnlineComponentProvider"),await Vv(r,r._uninitializedComponentsProvider._online)):(Qe(Oc,"Using default OnlineComponentProvider"),await Vv(r,new e0))),r._onlineComponents}function IN(r){return BT(r).then((e=>e.syncEngine))}async function LT(r){const e=await BT(r),t=e.eventManager;return t.onListen=fN.bind(null,e.syncEngine),t.onUnlisten=gN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=pN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=xN.bind(null,e.syncEngine),t}function EN(r,e,t={}){const n=new Qa;return r.asyncQueue.enqueueAndForget((async()=>(function(s,l,d,h,u){const g=new NT({next:_=>{g.Nu(),l.enqueueAndForget((()=>ST(s,y)));const b=_.docs.has(d);!b&&_.fromCache?u.reject(new it(We.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&_.fromCache&&h&&h.source==="server"?u.reject(new it(We.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(_)},error:_=>u.reject(_)}),y=new _T(b0(d.path),g,{includeMetadataChanges:!0,qa:!0});return wT(s,y)})(await LT(r),r.asyncQueue,e,t,n))),n.promise}function RN(r,e,t={}){const n=new Qa;return r.asyncQueue.enqueueAndForget((async()=>(function(s,l,d,h,u){const g=new NT({next:_=>{g.Nu(),l.enqueueAndForget((()=>ST(s,y))),_.fromCache&&h.source==="server"?u.reject(new it(We.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(_)},error:_=>u.reject(_)}),y=new _T(d,g,{includeMetadataChanges:!0,qa:!0});return wT(s,y)})(await LT(r),r.asyncQueue,e,t,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="firestore.googleapis.com",Mv=!0;class Dv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new it(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zT,this.ssl=Mv}else this.host=e.host,this.ssl=e.ssl??Mv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Z3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cP)throw new it(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FT(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new it(We.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new it(We.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new it(We.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,o){return n.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class E0{constructor(e,t,n,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new it(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new it(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new xE;switch(n.type){case"firstParty":return new wE(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new it(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=Ov.get(t);n&&(Qe("ComponentProvider","Removing Datastore"),Ov.delete(t),n.terminate())})(this),Promise.resolve()}}function PN(r,e,t,n={}){var u;r=Gs(r,E0);const o=lh(e),s=r._getSettings(),l={...s,emulatorOptions:r._getEmulatorOptions()},d=`${e}:${t}`;o&&(zS(`https://${d}`),VS("Firestore",!0)),s.host!==zT&&s.host!==d&&Bd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...s,host:d,ssl:o,emulatorOptions:n};if(!Id(h,l)&&(r._setSettings(h),n.mockUserToken)){let g,y;if(typeof n.mockUserToken=="string")g=n.mockUserToken,y=Ui.MOCK_USER;else{g=Ej(n.mockUserToken,(u=r._app)==null?void 0:u.options.projectId);const _=n.mockUserToken.sub||n.mockUserToken.user_id;if(!_)throw new it(We.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Ui(_)}r._authCredentials=new yE(new V_(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Hd(this.firestore,e,this._query)}}class Yn{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yn(this.firestore,e,this._key)}toJSON(){return{type:Yn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if($f(t,Yn._jsonSchema))return new Yn(e,n||null,new st(Nr.fromString(t.referencePath)))}}Yn._jsonSchemaVersion="firestore/documentReference/1.0",Yn._jsonSchema={type:si("string",Yn._jsonSchemaVersion),referencePath:si("string")};class Bc extends Hd{constructor(e,t,n){super(e,t,b0(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yn(this.firestore,null,new st(e))}withConverter(e){return new Bc(this.firestore,e,this._path)}}function Qf(r,e,...t){if(r=Ni(r),M_("collection","path",e),r instanceof E0){const n=Nr.fromString(e,...t);return Rb(n),new Bc(r,null,n)}{if(!(r instanceof Yn||r instanceof Bc))throw new it(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Nr.fromString(e,...t));return Rb(n),new Bc(r.firestore,null,n)}}function ya(r,e,...t){if(r=Ni(r),arguments.length===1&&(e=R5.newId()),M_("doc","path",e),r instanceof E0){const n=Nr.fromString(e,...t);return Eb(n),new Yn(r,null,new st(n))}{if(!(r instanceof Yn||r instanceof Bc))throw new it(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Nr.fromString(e,...t));return Eb(n),new Yn(r.firestore,r instanceof Bc?r.converter:null,new st(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="AsyncQueue";class $v{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new fT(this,"async_queue_retry"),this._c=()=>{const n=vm();n&&Qe(Wv,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=vm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=vm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Qa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Dc(e))throw e;Qe(Wv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Ro("INTERNAL UNHANDLED ERROR: ",qv(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=ox.createAndSchedule(this,e,t,n,(s=>this.hc(s)));return this.tc.push(o),o}uc(){this.nc&&wt(47125,{Pc:qv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function qv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class $c extends E0{constructor(e,t,n,o){super(e,t,n,o),this.type="firestore",this._queue=new $v,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $v(e),this._firestoreClient=void 0,await e}}}function NN(r,e){const t=typeof r=="object"?r:HS(),n=typeof r=="string"?r:qm,o=w5(t,"firestore").getImmediate({identifier:n});if(!o._initialized){const s=jj("firestore");s&&PN(o,...s)}return o}function dx(r){if(r._terminated)throw new it(We.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||VT(r),r._firestoreClient}function VT(r){var n,o,s;const e=r._freezeSettings(),t=(function(d,h,u,g){return new aR(d,h,u,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,FT(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(r._databaseId,((n=r._app)==null?void 0:n.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new kN(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(d){const h=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(h),_online:h}})(r._componentsProvider))}function BN(r,e){Bd("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return LN(r,e0.provider,{build:n=>new AN(n,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function LN(r,e,t){if((r=Gs(r,$c))._firestoreClient||r._terminated)throw new it(We.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new it(We.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},VT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ds(ai.fromBase64String(e))}catch(t){throw new it(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ds(ai.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ds._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($f(e,Ds._jsonSchema))return Ds.fromBase64String(e.bytes)}}Ds._jsonSchemaVersion="firestore/bytes/1.0",Ds._jsonSchema={type:si("string",Ds._jsonSchemaVersion),bytes:si("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new it(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new it(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new it(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Zt(this._lat,e._lat)||Zt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xa._jsonSchemaVersion}}static fromJSON(e){if($f(e,Xa._jsonSchema))return new Xa(e.latitude,e.longitude)}}Xa._jsonSchemaVersion="firestore/geoPoint/1.0",Xa._jsonSchema={type:si("string",Xa._jsonSchemaVersion),latitude:si("number"),longitude:si("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,o){if(n.length!==o.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==o[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Za._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($f(e,Za._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Za(e.vectorValues);throw new it(We.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Za._jsonSchemaVersion="firestore/vectorValue/1.0",Za._jsonSchema={type:si("string",Za._jsonSchemaVersion),vectorValues:si("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=/^__.*__$/;class zN{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new $l(e,this.data,this.fieldMask,t,this.fieldTransforms):new fh(e,this.data,t,this.fieldTransforms)}}class OT{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new $l(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function MT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt(40011,{Ac:r})}}class ux{constructor(e,t,n,o,s,l){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=o,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ux({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return t0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(MT(this.Ac)&&FN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class VN{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||j0(e)}Cc(e,t,n,o=!1){return new ux({Ac:e,methodName:t,Dc:n,path:In.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function N0(r){const e=r._freezeSettings(),t=j0(r._databaseId);return new VN(r._databaseId,!!e.ignoreUndefinedProperties,t)}function DT(r,e,t,n,o,s={}){const l=r.Cc(s.merge||s.mergeFields?2:0,e,t,o);fx("Data must be an object, but it was:",l,n);const d=WT(n,l);let h,u;if(s.merge)h=new Qo(l.fieldMask),u=l.fieldTransforms;else if(s.mergeFields){const g=[];for(const y of s.mergeFields){const _=o5(e,y,t);if(!l.contains(_))throw new it(We.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);qT(g,_)||g.push(_)}h=new Qo(g),u=l.fieldTransforms.filter((y=>h.covers(y.field)))}else h=null,u=l.fieldTransforms;return new zN(new mo(d),h,u)}class B0 extends P0{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof B0}}class hx extends P0{_toFieldTransform(e){return new E3(e.path,new eh)}isEqual(e){return e instanceof hx}}function ON(r,e,t,n){const o=r.Cc(1,e,t);fx("Data must be an object, but it was:",o,n);const s=[],l=mo.empty();Wc(n,((h,u)=>{const g=px(e,h,t);u=Ni(u);const y=o.yc(g);if(u instanceof B0)s.push(g);else{const _=Xf(u,y);_!=null&&(s.push(g),l.set(g,_))}}));const d=new Qo(s);return new OT(l,d,o.fieldTransforms)}function MN(r,e,t,n,o,s){const l=r.Cc(1,e,t),d=[o5(e,n,t)],h=[o];if(s.length%2!=0)throw new it(We.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)d.push(o5(e,s[_])),h.push(s[_+1]);const u=[],g=mo.empty();for(let _=d.length-1;_>=0;--_)if(!qT(u,d[_])){const b=d[_];let R=h[_];R=Ni(R);const j=l.yc(b);if(R instanceof B0)u.push(b);else{const z=Xf(R,j);z!=null&&(u.push(b),g.set(b,z))}}const y=new Qo(u);return new OT(g,y,l.fieldTransforms)}function DN(r,e,t,n=!1){return Xf(t,r.Cc(n?4:3,e))}function Xf(r,e){if($T(r=Ni(r)))return fx("Unsupported field value:",e,r),WT(r,e);if(r instanceof P0)return(function(n,o){if(!MT(o.Ac))throw o.Sc(`${n._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(o);s&&o.fieldTransforms.push(s)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,o){const s=[];let l=0;for(const d of n){let h=Xf(d,o.wc(l));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),l++}return{arrayValue:{values:s}}})(r,e)}return(function(n,o){if((n=Ni(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return kR(o.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Jr.fromDate(n);return{timestampValue:nh(o.serializer,s)}}if(n instanceof Jr){const s=new Jr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:nh(o.serializer,s)}}if(n instanceof Xa)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ds)return{bytesValue:z3(o.serializer,n._byteString)};if(n instanceof Yn){const s=o.databaseId,l=n.firestore._databaseId;if(!l.isEqual(s))throw o.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:G5(n.firestore._databaseId||o.databaseId,n._key.path)}}if(n instanceof Za)return(function(l,d){return{mapValue:{fields:{[O5]:{stringValue:M5},[Yu]:{arrayValue:{values:l.toArray().map((u=>{if(typeof u!="number")throw d.Sc("VectorValues must only contain numeric values.");return W5(d.serializer,u)}))}}}}}})(n,o);throw o.Sc(`Unsupported field value: ${u0(n)}`)})(r,e)}function WT(r,e){const t={};return r3(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wc(r,((n,o)=>{const s=Xf(o,e.mc(n));s!=null&&(t[n]=s)})),{mapValue:{fields:t}}}function $T(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Jr||r instanceof Xa||r instanceof Ds||r instanceof Yn||r instanceof P0||r instanceof Za)}function fx(r,e,t){if(!$T(t)||!D_(t)){const n=u0(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function o5(r,e,t){if((e=Ni(e))instanceof R0)return e._internalPath;if(typeof e=="string")return px(r,e);throw t0("Field path arguments must be of type string or ",r,!1,void 0,t)}const WN=new RegExp("[~\\*/\\[\\]]");function px(r,e,t){if(e.search(WN)>=0)throw t0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new R0(...e.split("."))._internalPath}catch{throw t0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function t0(r,e,t,n,o){const s=n&&!n.isEmpty(),l=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(s||l)&&(h+=" (found",s&&(h+=` in field ${n}`),l&&(h+=` in document ${o}`),h+=")"),new it(We.INVALID_ARGUMENT,d+r+h)}function qT(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,t,n,o,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=o,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $N(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(L0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $N extends UT{data(){return super.data()}}function L0(r,e){return typeof e=="string"?px(r,e):e instanceof R0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new it(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mx{}class HT extends mx{}function GT(r,e,...t){let n=[];e instanceof mx&&n.push(e),n=n.concat(t),(function(s){const l=s.filter((h=>h instanceof gx)).length,d=s.filter((h=>h instanceof F0)).length;if(l>1||l>0&&d>0)throw new it(We.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const o of n)r=o._apply(r);return r}class F0 extends HT{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new F0(e,t,n)}_apply(e){const t=this._parse(e);return KT(e._query,t),new Hd(e.firestore,e.converter,H1(e._query,t))}_parse(e){const t=N0(e.firestore);return(function(s,l,d,h,u,g,y){let _;if(u.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new it(We.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Hv(y,g);const R=[];for(const j of y)R.push(Uv(h,s,j));_={arrayValue:{values:R}}}else _=Uv(h,s,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Hv(y,g),_=DN(d,l,y,g==="in"||g==="not-in");return yr.create(u,g,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function UN(r,e,t){const n=e,o=L0("where",r);return F0._create(o,n,t)}class gx extends mx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gx(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:Qr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,s){let l=o;const d=s.getFlattenedFilters();for(const h of d)KT(l,h),l=H1(l,h)})(e._query,t),new Hd(e.firestore,e.converter,H1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xx extends HT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xx(e,t)}_apply(e){const t=(function(o,s,l){if(o.startAt!==null)throw new it(We.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new it(We.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rf(s,l)})(e._query,this._field,this._direction);return new Hd(e.firestore,e.converter,(function(o,s){const l=o.explicitOrderBy.concat([s]);return new hh(o.path,o.collectionGroup,l,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function HN(r,e="asc"){const t=e,n=L0("orderBy",r);return xx._create(n,t)}function Uv(r,e,t){if(typeof(t=Ni(t))=="string"){if(t==="")throw new it(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!b3(e)&&t.indexOf("/")!==-1)throw new it(We.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Nr.fromString(t));if(!st.isDocumentKey(n))throw new it(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return If(r,new st(n))}if(t instanceof Yn)return If(r,t._key);throw new it(We.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${u0(t)}.`)}function Hv(r,e){if(!Array.isArray(r)||r.length===0)throw new it(We.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KT(r,e){const t=(function(o,s){for(const l of o)for(const d of l.getFlattenedFilters())if(s.indexOf(d.op)>=0)return d.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new it(We.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new it(We.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class GN{convertValue(e,t="none"){switch(Fc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw wt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Wc(e,((o,s)=>{n[o]=this.convertValue(s,t)})),n}convertVectorValue(e){var n,o,s;const t=(s=(o=(n=e.fields)==null?void 0:n[Yu].arrayValue)==null?void 0:o.values)==null?void 0:s.map((l=>bn(l.doubleValue)));return new Za(t)}convertGeoPoint(e){return new Xa(bn(e.latitude),bn(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=x0(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(kf(e));default:return null}}convertTimestamp(e){const t=Fl(e);return new Jr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Nr.fromString(e);Et(G3(n),9688,{name:e});const o=new Ld(n.get(1),n.get(3)),s=new st(n.popFirst(5));return o.isEqual(t)||Ro(`Document ${s} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class ef{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ad extends UT{constructor(e,t,n,o,s,l){super(e,t,n,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(L0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new it(We.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ad._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ad._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ad._jsonSchema={type:si("string",Ad._jsonSchemaVersion),bundleSource:si("string","DocumentSnapshot"),bundleName:si("string"),bundle:si("string")};class wm extends Ad{data(e={}){return super.data(e)}}class Wu{constructor(e,t,n,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ef(o.hasPendingWrites,o.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new wm(this._firestore,this._userDataWriter,n.key,n,new ef(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new it(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,s){if(o._snapshot.oldDocs.isEmpty()){let l=0;return o._snapshot.docChanges.map((d=>{const h=new wm(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ef(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>s||d.type!==3)).map((d=>{const h=new wm(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ef(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let u=-1,g=-1;return d.type!==0&&(u=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),g=l.indexOf(d.doc.key)),{type:KN(d.type),doc:h,oldIndex:u,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new it(We.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=R5.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],o=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),o.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function KN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(r){r=Gs(r,Yn);const e=Gs(r.firestore,$c);return EN(dx(e),r._key).then((t=>JN(e,r,t)))}Wu._jsonSchemaVersion="firestore/querySnapshot/1.0",Wu._jsonSchema={type:si("string",Wu._jsonSchemaVersion),bundleSource:si("string","QuerySnapshot"),bundleName:si("string"),bundle:si("string")};class QT extends GN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ds(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}}function XT(r){r=Gs(r,Hd);const e=Gs(r.firestore,$c),t=dx(e),n=new QT(e);return qN(r._query),RN(t,r._query).then((o=>new Wu(e,n,r,o)))}function s5(r,e,t){r=Gs(r,Yn);const n=Gs(r.firestore,$c),o=JT(r.converter,e,t);return z0(n,[DT(N0(n),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,go.none())])}function ZT(r,e,t,...n){r=Gs(r,Yn);const o=Gs(r.firestore,$c),s=N0(o);let l;return l=typeof(e=Ni(e))=="string"||e instanceof R0?MN(s,"updateDoc",r._key,e,t,n):ON(s,"updateDoc",r._key,e),z0(o,[l.toMutation(r._key,go.exists(!0))])}function e4(r){return z0(Gs(r.firestore,$c),[new _0(r._key,go.none())])}function yx(r,e){const t=Gs(r.firestore,$c),n=ya(r),o=JT(r.converter,e);return z0(t,[DT(N0(r.firestore),"addDoc",n._key,o,r.converter!==null,{}).toMutation(n._key,go.exists(!1))]).then((()=>n))}function z0(r,e){return(function(n,o){const s=new Qa;return n.asyncQueue.enqueueAndForget((async()=>yN(await IN(n),o,s))),s.promise})(dx(r),e)}function JN(r,e,t){const n=t.docs.get(e._key),o=new QT(r);return new Ad(r,o,e._key,n,new ef(t.hasPendingWrites,t.fromCache),e.converter)}function Vl(){return new hx("serverTimestamp")}(function(e,t=!0){(function(o){uh=o})(ch),qu(new Ed("firestore",((n,{instanceIdentifier:o,options:s})=>{const l=n.getProvider("app").getImmediate(),d=new $c(new bE(n.getProvider("auth-internal")),new SE(l,n.getProvider("app-check-internal")),(function(u,g){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new it(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ld(u.options.projectId,g)})(l,o),l);return s={useFetchStreams:t,...s},d._setSettings(s),d}),"PUBLIC").setMultipleInstances(!0)),Rc(Ab,kb,e),Rc(Ab,kb,"esm2020")})();const YN={apiKey:"AIzaSyCyIga2EWsEZLqApS633i9uRIy5p745EJg",authDomain:"electrician-toolkit-33497.firebaseapp.com",projectId:"electrician-toolkit-33497",storageBucket:"electrician-toolkit-33497.firebasestorage.app",messagingSenderId:"878846360709",appId:"1:878846360709:web:af750d7f4d2a9495b17dec",measurementId:"G-JWZ1TDP25R"},t4=US(YN),Qn=mE(t4),No=NN(t4);BN(No).then(()=>{console.log("🔥 Firebase offline persistence enabled")}).catch(r=>{r.code==="failed-precondition"?console.warn("⚠️ Multiple tabs open, persistence only enabled in first tab"):r.code==="unimplemented"?console.warn("⚠️ Browser doesn't support persistence"):console.error("❌ Error enabling persistence:",r)});const bx="jobs_cache_v1",vx="jobs_cache_timestamp_v1",QN=300*1e3,XN=(r,e)=>{try{const t={userId:e,jobs:r,timestamp:Date.now()};localStorage.setItem(bx,JSON.stringify(t)),localStorage.setItem(vx,Date.now().toString())}catch(t){console.warn("Failed to cache jobs:",t)}},ZN=r=>{try{const e=localStorage.getItem(bx);if(!e)return null;const t=JSON.parse(e);if(t.userId!==r)return Bf(),null;const n=parseInt(localStorage.getItem(vx)||"0");return Date.now()-n>QN?(Bf(),null):t.jobs}catch(e){return console.warn("Failed to load cached jobs:",e),null}},Bf=()=>{try{localStorage.removeItem(bx),localStorage.removeItem(vx)}catch(r){console.warn("Failed to clear cache:",r)}},Gd=async()=>{var r;try{const e=(r=Qn.currentUser)==null?void 0:r.uid;if(!e)throw new Error("User not authenticated");const t=ZN(e);return t?(console.log("⚡ Loaded jobs from localStorage cache (instant)"),Gv(e),t):(console.log("🔄 Fetching jobs from Firebase..."),await Gv(e))}catch(e){throw console.error("Error fetching jobs:",e),e}},Gv=async r=>{const e=Qf(No,"users",r,"jobs"),t=GT(e,HN("createdAt","desc")),o=(await XT(t)).docs.map(s=>({id:s.id,...s.data()}));return XN(o,r),o},a5=async r=>{var e;try{const t=(e=Qn.currentUser)==null?void 0:e.uid;if(!t)throw new Error("User not authenticated");const n=Qf(No,"users",t,"jobs"),o={...r,createdAt:Vl(),status:r.status||"active"},s=await yx(n,o);return Bf(),console.log("✅ Job created:",s.id),s.id}catch(t){throw console.error("Error creating job:",t),t}},eB=async(r,e)=>{var t;try{const n=(t=Qn.currentUser)==null?void 0:t.uid;if(!n)throw new Error("User not authenticated");const o=ya(No,"users",n,"jobs",r);await ZT(o,{...e,updatedAt:Vl()}),Bf(),console.log("✅ Job updated:",r)}catch(n){throw console.error("Error updating job:",n),n}},r4=async r=>{var e;try{const t=(e=Qn.currentUser)==null?void 0:e.uid;if(!t)throw new Error("User not authenticated");const n=ya(No,"users",t,"jobs",r);await e4(n),Bf(),console.log("✅ Job deleted:",r)}catch(t){throw console.error("Error deleting job:",t),t}},Zf=async(r,e)=>{var t;try{const n=(t=Qn.currentUser)==null?void 0:t.uid;if(!n)throw new Error("User not authenticated");const o=ya(No,"users",n,"jobs",r),s=Qf(o,"calculations"),l={...e,createdAt:Vl()},d=await yx(s,l);return console.log("✅ Calculation added:",d.id),d.id}catch(n){throw console.error("Error adding calculation:",n),n}},d1=Object.freeze(Object.defineProperty({__proto__:null,addCalculationToJob:Zf,createJob:a5,deleteJob:r4,getUserJobs:Gd,updateJob:eB},Symbol.toStringTag,{value:"Module"})),tB=ce.forwardRef(({isDarkMode:r=!1,onExportSuccess:e},t)=>{const[n,o]=ce.useState(""),[s,l]=ce.useState(""),[d,h]=ce.useState(""),[u,g]=ce.useState("12"),[y,_]=ce.useState("single"),[b,R]=ce.useState("copper"),[j,z]=ce.useState("1.0"),[T,M]=ce.useState(!1),[F,B]=ce.useState([]),[J,se]=ce.useState(!1),O={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},A={14:4110,12:6530,10:10380,8:16510,6:26240,4:41740,3:52620,2:66360,1:83690,"1/0":105600,"2/0":133100,"3/0":167800,"4/0":211600,250:25e4,300:3e5,350:35e4,400:4e5,500:5e5,600:6e5,750:75e4,1e3:1e6},S={copper:{dc:10.8,ac:12.9},aluminum:{dc:17.4,ac:21.2}},I=(()=>{if(!n||!s||!d)return{drop:"0.00",percentage:"0.00",excessive:!1};const q=parseFloat(n),re=parseFloat(s),Z=parseFloat(d),te=A[u],ye=parseFloat(j),we=S[b].ac;let ie;y==="single"?ie=2*we*re*Z*ye/te:ie=1.732*we*re*Z*ye/te;const $=ie/q*100,Y=$>3;return{drop:ie.toFixed(2),percentage:$.toFixed(2),excessive:Y}})(),w=async()=>{M(!0),se(!0);try{const q=await Gd();B(q)}catch(q){console.error("Error loading jobs:",q),alert("Failed to load jobs. Please try again.")}finally{se(!1)}},N=async q=>{try{const re={type:"voltage-drop",data:{voltage:parseFloat(n),current:parseFloat(s),distance:parseFloat(d),wireSize:u,phaseType:y,conductorType:b,powerFactor:parseFloat(j),results:{voltageDrop:I.drop,percentageDrop:I.percentage,excessive:I.excessive}}};await Zf(q,re),M(!1),alert("Calculation attached to job successfully!")}catch(re){console.error("Error attaching calculation:",re),alert("Failed to attach calculation. Please try again.")}},W=()=>{if(!n||!s||!d){alert("Please enter all required values before exporting to PDF");return}const q={calculatorName:"Voltage Drop Calculator",inputs:{systemType:y==="single"?"Single Phase":"Three Phase",conductorMaterial:b.charAt(0).toUpperCase()+b.slice(1),systemVoltage:`${n} V`,loadCurrent:`${s} A`,oneWayDistance:`${d} ft`,wireSize:u.includes("/")?`${u} AWG`:`${u} ${parseInt(u)<=4?"AWG":"kcmil"}`,powerFactor:j},results:{voltageDrop:`${I.drop} V`,percentageDrop:`${I.percentage}%`,necCompliant:I.excessive?"NO - Exceeds 3% limit":"YES - Within 3% limit",status:I.excessive?"⚠️ WARNING: Exceeds NEC 3% Limit":"✓ Within NEC limits"},additionalInfo:{formula:y==="single"?"2 × K × I × L × PF ÷ CM":"1.732 × K × I × L × PF ÷ CM",kConstant:`${S[b].ac} (${b} AC)`,circularMils:A[u].toLocaleString(),powerFactorUsed:j,systemConfiguration:y==="single"?"Single phase":"Three phase"},necReferences:["NEC Guidelines: Branch circuits - 3% max","Feeders - 3% max","Combined branch circuit and feeder - 5% max","Note: Excessive voltage drop can cause equipment malfunction and reduced efficiency"]};Yr(q),e&&e()};return ce.useImperativeHandle(t,()=>({exportPDF:W})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:O.cardBg,border:`1px solid ${O.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:O.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${O.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:O.labelText,marginBottom:"0.5rem"},children:"System Type"}),i.jsxs("select",{value:y,onChange:q=>_(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${O.inputBorder}`,borderRadius:"8px",backgroundColor:O.inputBg,color:O.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:O.labelText,marginBottom:"0.5rem"},children:"Conductor Material"}),i.jsxs("select",{value:b,onChange:q=>R(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${O.inputBorder}`,borderRadius:"8px",backgroundColor:O.inputBg,color:O.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"copper",children:"Copper"}),i.jsx("option",{value:"aluminum",children:"Aluminum"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:O.labelText,marginBottom:"0.5rem"},children:"System Voltage (V)"}),i.jsx("input",{type:"number",value:n,onChange:q=>o(q.target.value),placeholder:"120, 240, 480",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${O.inputBorder}`,borderRadius:"8px",backgroundColor:O.inputBg,color:O.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:O.labelText,marginBottom:"0.5rem"},children:"Load Current (Amps)"}),i.jsx("input",{type:"number",value:s,onChange:q=>l(q.target.value),placeholder:"15, 20, 30",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${O.inputBorder}`,borderRadius:"8px",backgroundColor:O.inputBg,color:O.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:O.labelText,marginBottom:"0.5rem"},children:"One-Way Distance (feet)"}),i.jsx("input",{type:"number",value:d,onChange:q=>h(q.target.value),placeholder:"100, 200, 500",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${O.inputBorder}`,borderRadius:"8px",backgroundColor:O.inputBg,color:O.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:O.labelText,marginBottom:"0.5rem"},children:"Wire Size (AWG/kcmil)"}),i.jsxs("select",{value:u,onChange:q=>g(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${O.inputBorder}`,borderRadius:"8px",backgroundColor:O.inputBg,color:O.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"14",children:"14 AWG"}),i.jsx("option",{value:"12",children:"12 AWG"}),i.jsx("option",{value:"10",children:"10 AWG"}),i.jsx("option",{value:"8",children:"8 AWG"}),i.jsx("option",{value:"6",children:"6 AWG"}),i.jsx("option",{value:"4",children:"4 AWG"}),i.jsx("option",{value:"3",children:"3 AWG"}),i.jsx("option",{value:"2",children:"2 AWG"}),i.jsx("option",{value:"1",children:"1 AWG"}),i.jsx("option",{value:"1/0",children:"1/0 AWG"}),i.jsx("option",{value:"2/0",children:"2/0 AWG"}),i.jsx("option",{value:"3/0",children:"3/0 AWG"}),i.jsx("option",{value:"4/0",children:"4/0 AWG"}),i.jsx("option",{value:"250",children:"250 kcmil"}),i.jsx("option",{value:"300",children:"300 kcmil"}),i.jsx("option",{value:"350",children:"350 kcmil"}),i.jsx("option",{value:"400",children:"400 kcmil"}),i.jsx("option",{value:"500",children:"500 kcmil"}),i.jsx("option",{value:"600",children:"600 kcmil"}),i.jsx("option",{value:"750",children:"750 kcmil"}),i.jsx("option",{value:"1000",children:"1000 kcmil"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:O.labelText,marginBottom:"0.5rem"},children:"Power Factor (AC loads)"}),i.jsxs("select",{value:j,onChange:q=>z(q.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${O.inputBorder}`,borderRadius:"8px",backgroundColor:O.inputBg,color:O.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"1.0",children:"1.0 (Resistive loads)"}),i.jsx("option",{value:"0.9",children:"0.9 (Most motors)"}),i.jsx("option",{value:"0.85",children:"0.85 (Typical mixed load)"}),i.jsx("option",{value:"0.8",children:"0.8 (Poor power factor)"})]})]})]})]}),n&&s&&d&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:O.cardBg,border:`1px solid ${O.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:O.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:O.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:O.labelText,marginBottom:"0.25rem"},children:"Voltage Drop"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:O.cardText},children:I.drop}),i.jsx("div",{style:{fontSize:"0.75rem",color:O.labelText,marginTop:"0.25rem"},children:"Volts"})]}),i.jsxs("div",{style:{background:I.excessive?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:I.excessive?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Percentage Drop"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:I.excessive?"#dc2626":"#1e40af"},children:[I.percentage,"%"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:I.excessive?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:"Max: 3%"})]})]}),i.jsxs("div",{style:{background:O.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${O.cardBorder}`},children:[i.jsx("strong",{style:{color:O.cardText,display:"block",marginBottom:"0.5rem",fontSize:"0.875rem"},children:"Calculation Details:"}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:O.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Formula: ",y==="single"?"2":"1.732"," × K × I × L × PF ÷ CM"]}),i.jsxs("div",{children:["K constant (",b,"): ",S[b].ac]}),i.jsxs("div",{children:["Circular mils: ",A[u].toLocaleString()]}),i.jsxs("div",{children:["Power factor: ",j]}),i.jsxs("div",{children:["System: ",y==="single"?"Single":"Three"," phase"]})]})]})]}),I.excessive?i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Us,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem",fontSize:"0.9375rem"},children:"WARNING: Exceeds NEC 3% Limit"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Consider using larger wire size to reduce voltage drop. Excessive voltage drop can cause equipment malfunction and reduced efficiency."})]})]})}):i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Voltage drop is within NEC limits"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"This circuit meets the NEC recommended 3% maximum voltage drop for branch circuits."})]})]})}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsxs("button",{onClick:W,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:q=>q.currentTarget.style.background="#2563eb",onMouseOut:q=>q.currentTarget.style.background="#3b82f6",children:[i.jsx(n0,{size:18}),"Export to PDF"]}),i.jsxs("button",{onClick:w,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:q=>q.currentTarget.style.background="#059669",onMouseOut:q=>q.currentTarget.style.background="#10b981",children:[i.jsx(Dd,{size:18}),"Attach to Job"]})]})]}),i.jsxs("div",{style:{background:O.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${O.cardBorder}`,fontSize:"0.8125rem",color:O.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:O.cardText},children:"NEC Guidelines:"}),"Branch circuits: 3% max • Feeders: 3% max • Combined: 5% max"]}),T&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:i.jsxs("div",{style:{background:O.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[i.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:O.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),i.jsx("div",{style:{marginBottom:"1rem"},children:J?i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:O.labelText},children:"Loading jobs..."}):F&&F.length>0?F.map(q=>i.jsxs("div",{onClick:()=>N(q.id),style:{padding:"1rem",background:O.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${O.cardBorder}`,transition:"all 0.2s"},onMouseOver:re=>re.currentTarget.style.transform="translateY(-2px)",onMouseOut:re=>re.currentTarget.style.transform="translateY(0)",children:[i.jsx("div",{style:{fontWeight:"600",color:O.cardText,marginBottom:"0.25rem"},children:q.name}),i.jsx("div",{style:{fontSize:"0.875rem",color:O.labelText},children:q.location||"No location"})]},q.id)):i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:O.labelText},children:i.jsx("p",{children:"No jobs found. Create a job first."})})}),i.jsx("button",{onClick:()=>M(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:q=>q.currentTarget.style.background="#4b5563",onMouseOut:q=>q.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})}),rB=({isDarkMode:r,colors:e,onExport:t})=>{const[n,o]=ce.useState(""),[s,l]=ce.useState(""),[d,h]=ce.useState(""),[u,g]=ce.useState(""),[y,_]=ce.useState({V:"",I:"",R:"",P:""}),[b,R]=ce.useState(!1),[j,z]=ce.useState([]),[T,M]=ce.useState(!1);ce.useEffect(()=>{F()},[n,s,d,u]);const F=()=>{const A=parseFloat(n)||0,S=parseFloat(s)||0,V=parseFloat(d)||0,I=parseFloat(u)||0,w={V:"",I:"",R:"",P:""};!n&&S&&V?w.V=(S*V).toFixed(1):!n&&I&&S&&S!==0?w.V=(I/S).toFixed(1):!n&&I&&V?w.V=Math.sqrt(I*V).toFixed(1):n&&(w.V=A.toFixed(1)),!s&&A&&V&&V!==0?w.I=(A/V).toFixed(1):!s&&I&&A&&A!==0?w.I=(I/A).toFixed(1):!s&&I&&V&&V!==0?w.I=Math.sqrt(I/V).toFixed(1):s&&(w.I=S.toFixed(1)),!d&&A&&S&&S!==0?w.R=(A/S).toFixed(1):!d&&A&&I&&I!==0?w.R=(A*A/I).toFixed(1):!d&&I&&S&&S!==0?w.R=(I/(S*S)).toFixed(1):d&&(w.R=V.toFixed(1)),!u&&A&&S?w.P=(A*S).toFixed(1):!u&&S&&V?w.P=(S*S*V).toFixed(1):!u&&A&&V&&V!==0?w.P=(A*A/V).toFixed(1):u&&(w.P=I.toFixed(1)),_(w)},B=()=>{o(""),l(""),h(""),g(""),_({V:"",I:"",R:"",P:""})},J=async()=>{R(!0),M(!0);try{const A=await Gd();z(A)}catch(A){console.error("Error loading jobs:",A),alert("Failed to load jobs. Please try again.")}finally{M(!1)}},se=async A=>{try{const S={type:"ohms-law-basic",data:{voltage:parseFloat(n)||parseFloat(y.V)||0,current:parseFloat(s)||parseFloat(y.I)||0,resistance:parseFloat(d)||parseFloat(y.R)||0,power:parseFloat(u)||parseFloat(y.P)||0}};await Zf(A,S),R(!1),alert("Calculation attached to job successfully!")}catch(S){console.error("Error attaching calculation:",S),alert("Failed to attach calculation. Please try again.")}},O=()=>{if(!(n||s||d||u||y.V||y.I||y.R||y.P)){alert("Please enter at least 2 values before exporting");return}const S={},V={};n&&(S.voltage=`${n} V`),s&&(S.current=`${s} A`),d&&(S.resistance=`${d} Ω`),u&&(S.power=`${u} W`),y.V&&(V.voltage=`${y.V} V`),y.I&&(V.current=`${y.I} A`),y.R&&(V.resistance=`${y.R} Ω`),y.P&&(V.power=`${y.P} W`),t({calculatorName:"Ohm's Law Calculator - Basic",inputs:S,results:V,additionalInfo:{note:"Calculations based on fundamental electrical formulas"},necReferences:["Ohm's Law: E = I × R","Power formulas: P = E × I, P = I² × R, P = E² ÷ R","Current: I = E ÷ R, I = P ÷ E, I = √(P ÷ R)","Resistance: R = E ÷ I, R = E² ÷ P, R = P ÷ I²"]})};return i.jsxs("div",{children:[i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Gi,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:"Enter any 2 known values to calculate the remaining values"})]})}),i.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Volts (E)"}),i.jsx("input",{type:"number",value:n||y.V,onChange:A=>o(A.target.value),placeholder:"Enter voltage",disabled:s&&d||s&&u||d&&u,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:s&&d||s&&u||d&&u?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:s&&d||s&&u||d&&u?"not-allowed":"text"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Amps (I)"}),i.jsx("input",{type:"number",value:s||y.I,onChange:A=>l(A.target.value),placeholder:"Enter current",disabled:n&&d||n&&u||d&&u,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:n&&d||n&&u||d&&u?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:n&&d||n&&u||d&&u?"not-allowed":"text"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Ohms (R)"}),i.jsx("input",{type:"number",value:d||y.R,onChange:A=>h(A.target.value),placeholder:"Enter resistance",disabled:n&&s||n&&u||s&&u,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:n&&s||n&&u||s&&u?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:n&&s||n&&u||s&&u?"not-allowed":"text"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:"Watts (P)"}),i.jsx("input",{type:"number",value:u||y.P,onChange:A=>g(A.target.value),placeholder:"Enter power",disabled:n&&s||n&&d||s&&d,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:n&&s||n&&d||s&&d?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:n&&s||n&&d||s&&d?"not-allowed":"text"}})]})]}),i.jsx("button",{onClick:B,style:{width:"100%",background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),(y.V||y.I||y.R||y.P)&&i.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[y.V&&i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Voltage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:y.V}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Volts"})]}),y.I&&i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Current"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:y.I}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),y.R&&i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Resistance"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:y.R}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Ohms"})]}),y.P&&i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Power"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:e.cardText},children:y.P}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"Watts"})]})]})]}),(n||s||d||u)&&i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[i.jsxs("button",{onClick:O,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:A=>A.currentTarget.style.background="#2563eb",onMouseOut:A=>A.currentTarget.style.background="#3b82f6",children:[i.jsx(n0,{size:18}),"Export to PDF"]}),i.jsxs("button",{onClick:J,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:A=>A.currentTarget.style.background="#059669",onMouseOut:A=>A.currentTarget.style.background="#10b981",children:[i.jsx(Dd,{size:18}),"Attach to Job"]})]}),b&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:i.jsxs("div",{style:{background:e.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[i.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:e.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),i.jsx("div",{style:{marginBottom:"1rem"},children:T?i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:"Loading jobs..."}):j&&j.length>0?j.map(A=>i.jsxs("div",{onClick:()=>se(A.id),style:{padding:"1rem",background:e.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${e.cardBorder}`,transition:"all 0.2s"},onMouseOver:S=>S.currentTarget.style.transform="translateY(-2px)",onMouseOut:S=>S.currentTarget.style.transform="translateY(0)",children:[i.jsx("div",{style:{fontWeight:"600",color:e.cardText,marginBottom:"0.25rem"},children:A.name}),i.jsx("div",{style:{fontSize:"0.875rem",color:e.labelText},children:A.location||"No location"})]},A.id)):i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:i.jsx("p",{children:"No jobs found. Create a job first."})})}),i.jsx("button",{onClick:()=>R(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:A=>A.currentTarget.style.background="#4b5563",onMouseOut:A=>A.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})},nB=({isDarkMode:r,colors:e,onExport:t})=>{const[n,o]=ce.useState([{id:1,R:"",V:"",I:"",P:""}]),[s,l]=ce.useState({R:"",V:"",I:"",P:""}),[d,h]=ce.useState(!1),[u,g]=ce.useState([]),[y,_]=ce.useState(!1),b=(S,V)=>Object.entries(S).filter(([w,N])=>w!==V&&N&&N!=="").map(([w])=>w).length>=2,R=()=>{const S=Math.max(...n.map(V=>V.id),0)+1;o([...n,{id:S,R:"",V:"",I:"",P:""}])},j=S=>{n.length>1&&o(n.filter(V=>V.id!==S))},z=(S,V,I)=>{o(n.map(w=>w.id===S?{...w,[V]:I}:w))},T=(S,V)=>{const I=[];if(V.I&&V.I!==""){const w=parseFloat(V.I);S.forEach((N,W)=>{if(N.I&&N.I!==""){const q=parseFloat(N.I);Math.abs(q-w)>.01&&I.push(`Total current (${w}A) conflicts with Component ${W+1} current (${q}A)`)}})}return I},M=()=>{const S=T(n,s);if(S.length>0){alert(`Conflicts detected:
`+S.join(`
`));return}let V=[...n];if(s.I&&s.I!==""){const W=parseFloat(s.I);V=V.map(q=>!q.I||q.I===""?{...q,I:W.toFixed(1)}:q)}let I=!0,w=0;const N=50;for(;I&&w<N;){I=!1,w++;let W=null;for(let q of V)if(q.I&&!isNaN(parseFloat(q.I))){W=parseFloat(q.I);break}if(W===null)for(let q of V){const re=parseFloat(q.V),Z=parseFloat(q.R),te=parseFloat(q.P);if(!isNaN(re)&&!isNaN(Z)&&Z!==0){W=re/Z;break}else if(!isNaN(te)&&!isNaN(re)&&re!==0){W=te/re;break}else if(!isNaN(te)&&!isNaN(Z)&&Z!==0){W=Math.sqrt(te/Z);break}}W!==null&&(V=V.map(q=>!q.I||q.I===""?(I=!0,{...q,I:W.toFixed(1)}):q)),V=V.map(q=>{const re={...q},Z=parseFloat(q.V),te=parseFloat(q.I),ye=parseFloat(q.R),we=parseFloat(q.P);(q.R===""||isNaN(ye))&&!isNaN(Z)&&!isNaN(te)&&te!==0?(re.R=(Z/te).toFixed(1),I=!0):(q.R===""||isNaN(ye))&&!isNaN(we)&&!isNaN(te)&&te!==0?(re.R=(we/(te*te)).toFixed(1),I=!0):(q.R===""||isNaN(ye))&&!isNaN(Z)&&!isNaN(we)&&we!==0&&(re.R=(Z*Z/we).toFixed(1),I=!0);const ie=parseFloat(re.R),$=parseFloat(re.I);(q.V===""||isNaN(Z))&&!isNaN($)&&!isNaN(ie)?(re.V=($*ie).toFixed(1),I=!0):(q.V===""||isNaN(Z))&&!isNaN(we)&&!isNaN($)&&$!==0?(re.V=(we/$).toFixed(1),I=!0):(q.V===""||isNaN(Z))&&!isNaN(we)&&!isNaN(ie)&&(re.V=Math.sqrt(we*ie).toFixed(1),I=!0);const Y=parseFloat(re.V);return(q.P===""||isNaN(we))&&!isNaN(Y)&&!isNaN($)?(re.P=(Y*$).toFixed(1),I=!0):(q.P===""||isNaN(we))&&!isNaN($)&&!isNaN(ie)?(re.P=($*$*ie).toFixed(1),I=!0):(q.P===""||isNaN(we))&&!isNaN(Y)&&!isNaN(ie)&&ie!==0&&(re.P=(Y*Y/ie).toFixed(1),I=!0),re})}o(V)},F=()=>{o([{id:1,R:"",V:"",I:"",P:""}]),l({R:"",V:"",I:"",P:""})},B=()=>{const S=n.reduce((W,q)=>{const re=parseFloat(q.R);return W+(isNaN(re)?0:re)},0),V=n.reduce((W,q)=>{const re=parseFloat(q.V);return W+(isNaN(re)?0:re)},0),I=n.reduce((W,q)=>{const re=parseFloat(q.P);return W+(isNaN(re)?0:re)},0),w=n.find(W=>!isNaN(parseFloat(W.I))),N=w?parseFloat(w.I):0;return{totalR:S,totalV:V,totalI:N,totalP:I}},J=async()=>{h(!0),_(!0);try{const S=await Gd();g(S)}catch(S){console.error("Error loading jobs:",S),alert("Failed to load jobs. Please try again.")}finally{_(!1)}},se=async S=>{try{const V=B();await Zf(S,{type:"ohms-law-series",data:{components:n,totals:V}}),h(!1),alert("Calculation attached to job successfully!")}catch(V){console.error("Error attaching calculation:",V),alert("Failed to attach calculation. Please try again.")}},O=()=>{if(!n.some(N=>N.R||N.V||N.I||N.P)){alert("Please enter component values before exporting");return}const V=B(),I={};n.forEach((N,W)=>{const q=[];N.R&&q.push(`R=${N.R}Ω`),N.V&&q.push(`V=${N.V}V`),N.I&&q.push(`I=${N.I}A`),N.P&&q.push(`P=${N.P}W`),q.length>0&&(I[`component${W+1}`]=q.join(", "))});const w={calculatorName:"Ohm's Law Calculator - Series Circuit",inputs:I,results:{totalResistance:`${V.totalR.toFixed(1)} Ω`,totalVoltage:`${V.totalV.toFixed(1)} V`,current:`${V.totalI.toFixed(1)} A (constant)`,totalPower:`${V.totalP.toFixed(1)} W`},additionalInfo:{circuitType:"Series Circuit",principle:"Current is constant across all components",totalResistanceFormula:"R_total = R1 + R2 + R3 + ...",totalVoltageFormula:"V_total = V1 + V2 + V3 + ..."},necReferences:["Series circuits: Current is the same through all components","Total resistance = Sum of all resistances","Total voltage = Sum of voltage drops across components","Total power = Sum of power dissipated in each component"]};t(w)},A=n.some(S=>S.R||S.V||S.I||S.P);return i.jsxs("div",{children:[i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Gi,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:"Series Circuit: Current is constant across all components"})]})}),i.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${e.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Totals (Optional)"}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"0.5rem"},children:["V","I","R","P"].map(S=>{const V={R:"Ohms (R)",V:"Volts (E)",I:"Amps (I)",P:"Watts (P)"};return i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:V[S]}),i.jsx("input",{type:"number",value:s[S],onChange:I=>l({...s,[S]:I.target.value}),placeholder:"Optional",disabled:b(s,S),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:b(s,S)?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:b(s,S)?"not-allowed":"text"}})]},S)})}),i.jsx("p",{style:{fontSize:"0.8125rem",color:e.subtleText,margin:0,fontStyle:"italic"},children:"Enter known total values to help solve the circuit. Current is constant in series."})]}),n.map((S,V)=>i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${e.cardBorder}`},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",marginBottom:"0.75rem",gap:"0.5rem"},children:[i.jsxs("h4",{style:{fontWeight:"600",color:e.labelText,margin:0,fontSize:"0.875rem"},children:["Component ",V+1]}),n.length>1&&i.jsx("button",{onClick:()=>j(S.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Nl,{size:18})})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem"},children:[{field:"V",label:"Volts (E)"},{field:"I",label:"Amps (I)"},{field:"R",label:"Ohms (R)"},{field:"P",label:"Watts (P)"}].map(({field:I,label:w})=>i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"500",color:e.subtleText,marginBottom:"0.25rem"},children:w}),i.jsx("input",{type:"number",value:S[I],onChange:N=>z(S.id,I,N.target.value),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:e.inputBg,color:e.cardText,boxSizing:"border-box"}})]},I))})]},S.id)),i.jsxs("button",{onClick:R,style:{width:"100%",background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsx(qs,{size:16}),"Add Component"]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsxs("button",{onClick:M,style:{flex:1,background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(mf,{size:20}),"Calculate"]}),i.jsx("button",{onClick:F,style:{flex:1,background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),i.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem"},children:"Circuit Totals"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Voltage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:B().totalV.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"E"})]}),i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Amperage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:B().totalI.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"I"})]}),i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Resistance"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:B().totalR.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"R"})]}),i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Wattage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:B().totalP.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"P"})]})]})]}),A&&i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[i.jsxs("button",{onClick:O,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:S=>S.currentTarget.style.background="#2563eb",onMouseOut:S=>S.currentTarget.style.background="#3b82f6",children:[i.jsx(n0,{size:18}),"Export to PDF"]}),i.jsxs("button",{onClick:J,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:S=>S.currentTarget.style.background="#059669",onMouseOut:S=>S.currentTarget.style.background="#10b981",children:[i.jsx(Dd,{size:18}),"Attach to Job"]})]}),d&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:i.jsxs("div",{style:{background:e.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[i.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:e.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),i.jsx("div",{style:{marginBottom:"1rem"},children:y?i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:"Loading jobs..."}):u&&u.length>0?u.map(S=>i.jsxs("div",{onClick:()=>se(S.id),style:{padding:"1rem",background:e.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${e.cardBorder}`,transition:"all 0.2s"},onMouseOver:V=>V.currentTarget.style.transform="translateY(-2px)",onMouseOut:V=>V.currentTarget.style.transform="translateY(0)",children:[i.jsx("div",{style:{fontWeight:"600",color:e.cardText,marginBottom:"0.25rem"},children:S.name}),i.jsx("div",{style:{fontSize:"0.875rem",color:e.labelText},children:S.location||"No location"})]},S.id)):i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:i.jsx("p",{children:"No jobs found. Create a job first."})})}),i.jsx("button",{onClick:()=>h(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:S=>S.currentTarget.style.background="#4b5563",onMouseOut:S=>S.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})},iB=({isDarkMode:r,colors:e,onExport:t})=>{const[n,o]=ce.useState([{id:1,R:"",V:"",I:"",P:""}]),[s,l]=ce.useState({R:"",V:"",I:"",P:""}),[d,h]=ce.useState(!1),[u,g]=ce.useState([]),[y,_]=ce.useState(!1),b=(S,V)=>Object.entries(S).filter(([w,N])=>w!==V&&N&&N!=="").map(([w])=>w).length>=2,R=()=>{const S=Math.max(...n.map(V=>V.id),0)+1;o([...n,{id:S,R:"",V:"",I:"",P:""}])},j=S=>{n.length>1&&o(n.filter(V=>V.id!==S))},z=(S,V,I)=>{o(n.map(w=>w.id===S?{...w,[V]:I}:w))},T=(S,V)=>{const I=[];if(V.V&&V.V!==""){const w=parseFloat(V.V);S.forEach((N,W)=>{if(N.V&&N.V!==""){const q=parseFloat(N.V);Math.abs(q-w)>.01&&I.push(`Total voltage (${w}V) conflicts with Component ${W+1} voltage (${q}V)`)}})}return I},M=()=>{const S=T(n,s);if(S.length>0){alert(`Conflicts detected:
`+S.join(`
`));return}let V=[...n];if(s.V&&s.V!==""){const W=parseFloat(s.V);V=V.map(q=>!q.V||q.V===""?{...q,V:W.toFixed(1)}:q)}let I=!0,w=0;const N=50;for(;I&&w<N;){I=!1,w++;let W=null;for(let q of V)if(q.V&&!isNaN(parseFloat(q.V))){W=parseFloat(q.V);break}if(W===null)for(let q of V){const re=parseFloat(q.I),Z=parseFloat(q.R),te=parseFloat(q.P);if(!isNaN(re)&&!isNaN(Z)){W=re*Z;break}else if(!isNaN(te)&&!isNaN(re)&&re!==0){W=te/re;break}else if(!isNaN(te)&&!isNaN(Z)){W=Math.sqrt(te*Z);break}}W!==null&&(V=V.map(q=>!q.V||q.V===""?(I=!0,{...q,V:W.toFixed(1)}):q)),V=V.map(q=>{const re={...q},Z=parseFloat(q.V),te=parseFloat(q.I),ye=parseFloat(q.R),we=parseFloat(q.P);(q.R===""||isNaN(ye))&&!isNaN(Z)&&!isNaN(te)&&te!==0?(re.R=(Z/te).toFixed(1),I=!0):(q.R===""||isNaN(ye))&&!isNaN(we)&&!isNaN(te)&&te!==0?(re.R=(we/(te*te)).toFixed(1),I=!0):(q.R===""||isNaN(ye))&&!isNaN(Z)&&!isNaN(we)&&we!==0&&(re.R=(Z*Z/we).toFixed(1),I=!0);const ie=parseFloat(re.R),$=parseFloat(re.V);(q.I===""||isNaN(te))&&!isNaN($)&&!isNaN(ie)&&ie!==0?(re.I=($/ie).toFixed(1),I=!0):(q.I===""||isNaN(te))&&!isNaN(we)&&!isNaN($)&&$!==0?(re.I=(we/$).toFixed(1),I=!0):(q.I===""||isNaN(te))&&!isNaN(we)&&!isNaN(ie)&&ie!==0&&(re.I=Math.sqrt(we/ie).toFixed(1),I=!0);const Y=parseFloat(re.I);return(q.P===""||isNaN(we))&&!isNaN($)&&!isNaN(Y)?(re.P=($*Y).toFixed(1),I=!0):(q.P===""||isNaN(we))&&!isNaN(Y)&&!isNaN(ie)?(re.P=(Y*Y*ie).toFixed(1),I=!0):(q.P===""||isNaN(we))&&!isNaN($)&&!isNaN(ie)&&ie!==0&&(re.P=($*$/ie).toFixed(1),I=!0),re})}o(V)},F=()=>{o([{id:1,R:"",V:"",I:"",P:""}]),l({R:"",V:"",I:"",P:""})},B=()=>{const S=n.reduce((q,re)=>{const Z=parseFloat(re.I);return q+(isNaN(Z)?0:Z)},0),V=n.reduce((q,re)=>{const Z=parseFloat(re.P);return q+(isNaN(Z)?0:Z)},0),I=n.find(q=>!isNaN(parseFloat(q.V))),w=I?parseFloat(I.V):0,N=n.map(q=>parseFloat(q.R)).filter(q=>!isNaN(q)&&q>0);return{totalR:N.length>0?1/N.reduce((q,re)=>q+1/re,0):0,totalV:w,totalI:S,totalP:V}},J=async()=>{h(!0),_(!0);try{const S=await Gd();g(S)}catch(S){console.error("Error loading jobs:",S),alert("Failed to load jobs. Please try again.")}finally{_(!1)}},se=async S=>{try{const V=B();await Zf(S,{type:"ohms-law-parallel",data:{components:n,totals:V}}),h(!1),alert("Calculation attached to job successfully!")}catch(V){console.error("Error attaching calculation:",V),alert("Failed to attach calculation. Please try again.")}},O=()=>{if(!n.some(N=>N.R||N.V||N.I||N.P)){alert("Please enter component values before exporting");return}const V=B(),I={};n.forEach((N,W)=>{const q=[];N.R&&q.push(`R=${N.R}Ω`),N.V&&q.push(`V=${N.V}V`),N.I&&q.push(`I=${N.I}A`),N.P&&q.push(`P=${N.P}W`),q.length>0&&(I[`component${W+1}`]=q.join(", "))});const w={calculatorName:"Ohm's Law Calculator - Parallel Circuit",inputs:I,results:{totalResistance:`${V.totalR.toFixed(1)} Ω`,voltage:`${V.totalV.toFixed(1)} V (constant)`,totalCurrent:`${V.totalI.toFixed(1)} A`,totalPower:`${V.totalP.toFixed(1)} W`},additionalInfo:{circuitType:"Parallel Circuit",principle:"Voltage is constant across all components",totalResistanceFormula:"1/R_total = 1/R1 + 1/R2 + 1/R3 + ...",totalCurrentFormula:"I_total = I1 + I2 + I3 + ..."},necReferences:["Parallel circuits: Voltage is the same across all components","Total resistance = 1 ÷ (1/R1 + 1/R2 + 1/R3 + ...)","Total current = Sum of currents through each branch","Total power = Sum of power dissipated in each component"]};t(w)},A=n.some(S=>S.R||S.V||S.I||S.P);return i.jsxs("div",{children:[i.jsx("div",{style:{background:"#faf5ff",border:"1px solid #a855f7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Gi,{size:20,color:"#7e22ce",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#7e22ce",lineHeight:"1.5"},children:"Parallel Circuit: Voltage is constant across all components"})]})}),i.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${e.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Totals (Optional)"}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"0.5rem"},children:["V","I","R","P"].map(S=>{const V={R:"Ohms (R)",V:"Volts (E)",I:"Amps (I)",P:"Watts (P)"};return i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:e.labelText,marginBottom:"0.5rem"},children:V[S]}),i.jsx("input",{type:"number",value:s[S],onChange:I=>l({...s,[S]:I.target.value}),placeholder:"Optional",disabled:b(s,S),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:b(s,S)?e.sectionBg:e.inputBg,color:e.cardText,boxSizing:"border-box",cursor:b(s,S)?"not-allowed":"text"}})]},S)})}),i.jsx("p",{style:{fontSize:"0.8125rem",color:e.subtleText,margin:0,fontStyle:"italic"},children:"Enter known total values to help solve the circuit. Voltage is constant in parallel."})]}),n.map((S,V)=>i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${e.cardBorder}`},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",marginBottom:"0.75rem",gap:"0.5rem"},children:[i.jsxs("h4",{style:{fontWeight:"600",color:e.labelText,margin:0,fontSize:"0.875rem"},children:["Component ",V+1]}),n.length>1&&i.jsx("button",{onClick:()=>j(S.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Nl,{size:18})})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.75rem"},children:[{field:"V",label:"Volts (E)"},{field:"I",label:"Amps (I)"},{field:"R",label:"Ohms (R)"},{field:"P",label:"Watts (P)"}].map(({field:I,label:w})=>i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"500",color:e.subtleText,marginBottom:"0.25rem"},children:w}),i.jsx("input",{type:"number",value:S[I],onChange:N=>z(S.id,I,N.target.value),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:`1px solid ${e.inputBorder}`,borderRadius:"8px",backgroundColor:e.inputBg,color:e.cardText,boxSizing:"border-box"}})]},I))})]},S.id)),i.jsxs("button",{onClick:R,style:{width:"100%",background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsx(qs,{size:16}),"Add Component"]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsxs("button",{onClick:M,style:{flex:1,background:"#3b82f6",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(mf,{size:20}),"Calculate"]}),i.jsx("button",{onClick:F,style:{flex:1,background:"#6b7280",color:"white",fontWeight:"600",padding:"0.75rem",borderRadius:"8px",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:"Clear All"})]}),i.jsxs("div",{style:{background:e.cardBg,border:`1px solid ${e.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:e.cardText,marginTop:0,marginBottom:"1rem"},children:"Circuit Totals"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Voltage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:B().totalV.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"E"})]}),i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Amperage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:B().totalI.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"I"})]}),i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Resistance"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:B().totalR.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"R"})]}),i.jsxs("div",{style:{background:e.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginBottom:"0.25rem"},children:"Wattage"}),i.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:e.cardText},children:B().totalP.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:e.labelText,marginTop:"0.25rem"},children:"P"})]})]})]}),A&&i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[i.jsxs("button",{onClick:O,style:{flex:1,padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:S=>S.currentTarget.style.background="#2563eb",onMouseOut:S=>S.currentTarget.style.background="#3b82f6",children:[i.jsx(n0,{size:18}),"Export to PDF"]}),i.jsxs("button",{onClick:J,style:{flex:1,padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"8px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"background 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},onMouseOver:S=>S.currentTarget.style.background="#059669",onMouseOut:S=>S.currentTarget.style.background="#10b981",children:[i.jsx(Dd,{size:18}),"Attach to Job"]})]}),d&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:i.jsxs("div",{style:{background:e.cardBg,borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",maxHeight:"80vh",overflow:"auto"},children:[i.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",color:e.cardText,fontSize:"1.125rem",fontWeight:"600"},children:"Select a Job"}),i.jsx("div",{style:{marginBottom:"1rem"},children:y?i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:"Loading jobs..."}):u&&u.length>0?u.map(S=>i.jsxs("div",{onClick:()=>se(S.id),style:{padding:"1rem",background:e.sectionBg,borderRadius:"8px",marginBottom:"0.5rem",cursor:"pointer",border:`1px solid ${e.cardBorder}`,transition:"all 0.2s"},onMouseOver:V=>V.currentTarget.style.transform="translateY(-2px)",onMouseOut:V=>V.currentTarget.style.transform="translateY(0)",children:[i.jsx("div",{style:{fontWeight:"600",color:e.cardText,marginBottom:"0.25rem"},children:S.name}),i.jsx("div",{style:{fontSize:"0.875rem",color:e.labelText},children:S.location||"No location"})]},S.id)):i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:e.labelText},children:i.jsx("p",{children:"No jobs found. Create a job first."})})}),i.jsx("button",{onClick:()=>h(!1),style:{width:"100%",padding:"0.75rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},onMouseOver:S=>S.currentTarget.style.background="#4b5563",onMouseOut:S=>S.currentTarget.style.background="#6b7280",children:"Cancel"})]})})]})},oB=ce.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=ce.useState("basic"),o={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},s=l=>{Yr(l)};return ce.useImperativeHandle(e,()=>({exportPDF:()=>{alert("Please use the Export to PDF button within the calculator")}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:o.cardBg,border:`1px solid ${o.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:()=>n("basic"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="basic"?"#3b82f6":o.sectionBg,color:t==="basic"?"white":o.labelText,border:`1px solid ${t==="basic"?"#3b82f6":o.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Basic"}),i.jsx("button",{onClick:()=>n("series"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="series"?"#3b82f6":o.sectionBg,color:t==="series"?"white":o.labelText,border:`1px solid ${t==="series"?"#3b82f6":o.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Series"}),i.jsx("button",{onClick:()=>n("parallel"),style:{flex:"1 1 auto",minWidth:"80px",padding:"0.625rem 1rem",background:t==="parallel"?"#3b82f6":o.sectionBg,color:t==="parallel"?"white":o.labelText,border:`1px solid ${t==="parallel"?"#3b82f6":o.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Parallel"})]}),t==="basic"&&i.jsx(rB,{isDarkMode:r,colors:o,onExport:s}),t==="series"&&i.jsx(nB,{isDarkMode:r,colors:o,onExport:s}),t==="parallel"&&i.jsx(iB,{isDarkMode:r,colors:o,onExport:s}),i.jsxs("div",{style:{background:o.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${o.cardBorder}`,fontSize:"0.8125rem",color:o.labelText,marginTop:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:o.cardText},children:"Formulas:"}),i.jsx("div",{children:"E = I × R"}),i.jsx("div",{children:"P = E × I"}),i.jsx("div",{children:"I = E ÷ R"}),i.jsx("div",{children:"P = I² × R"}),i.jsx("div",{children:"R = E ÷ I"}),i.jsx("div",{children:"P = E² ÷ R"})]})]})}),vd={"4x1.25-round-octagon":{capacity:12.5,name:'4" x 1-1/4" Round/Octagon',type:"round-octagon"},"4x1.5-round-octagon":{capacity:15.5,name:'4" x 1-1/2" Round/Octagon',type:"round-octagon"},"4x2.125-round-octagon":{capacity:21.5,name:'4" x 2-1/8" Round/Octagon',type:"round-octagon"},"4x1.25-square":{capacity:18,name:'4" x 1-1/4" Square',type:"square"},"4x1.5-square":{capacity:21,name:'4" x 1-1/2" Square',type:"square"},"4x2.125-square":{capacity:30.3,name:'4" x 2-1/8" Square',type:"square"},"4-11/16x1.25-square":{capacity:25.5,name:'4-11/16" x 1-1/4" Square',type:"square"},"4-11/16x1.5-square":{capacity:29.5,name:'4-11/16" x 1-1/2" Square',type:"square"},"4-11/16x2.125-square":{capacity:42,name:'4-11/16" x 2-1/8" Square',type:"square"},"3x2x1.5-device":{capacity:7.5,name:'3" x 2" x 1-1/2" Device',type:"device"},"3x2x2-device":{capacity:10,name:'3" x 2" x 2" Device',type:"device"},"3x2x2.25-device":{capacity:10.5,name:'3" x 2" x 2-1/4" Device',type:"device"},"3x2x2.5-device":{capacity:12.5,name:'3" x 2" x 2-1/2" Device',type:"device"},"3x2x2.75-device":{capacity:14,name:'3" x 2" x 2-3/4" Device',type:"device"},"3x2x3.5-device":{capacity:18,name:'3" x 2" x 3-1/2" Device',type:"device"},"4x2.125x1.5-device":{capacity:10.3,name:'4" x 2-1/8" x 1-1/2" Device',type:"device"},"4x2.125x1.875-device":{capacity:13,name:'4" x 2-1/8" x 1-7/8" Device',type:"device"},"4x2.125x2.125-device":{capacity:14.5,name:'4" x 2-1/8" x 2-1/8" Device',type:"device"},"3.5x2x2.5-masonry":{capacity:14,name:'3-1/2" x 2" x 2-1/2" Masonry',type:"masonry"},"3.5x2x3.5-masonry":{capacity:21,name:'3-1/2" x 2" x 3-1/2" Masonry',type:"masonry"},"fs-1.25-single":{capacity:13.5,name:'FS Single Cover/Gang (1-1/4" min)',type:"fs-fd"},"fd-2.125-single":{capacity:18,name:'FD Single Cover/Gang (2-1/8" min)',type:"fs-fd"},"fs-1.25-multiple":{capacity:18,name:'FS Multiple Cover/Gang (1-1/4" min)',type:"fs-fd"},"fd-2.125-multiple":{capacity:24,name:'FD Multiple Cover/Gang (2-1/8" min)',type:"fs-fd"}},sB={18:1.5,16:1.75,14:2,12:2.25,10:2.5,8:3,6:5},aB=["18","16","14","12","10","8","6"],lB=r=>{var e;return((e=vd[r])==null?void 0:e.capacity)||0},cB=r=>{var e;return((e=vd[r])==null?void 0:e.name)||"Unknown Box"},Kv=r=>sB[r]||0,Xp={mainSection:"NEC 314.16 - Number of Conductors in Outlet, Device, and Junction Boxes",calculations:"NEC 314.16(B) - Box Fill Calculations",table:"NEC Table 314.16(B) - Volume Allowance Required per Conductor",rules:["Each conductor = volume from Table 314.16(B)","Each device (receptacle/switch) counts as 2 conductor volumes","All equipment grounding conductors combined count as 1 conductor volume","One or more cable clamps count as 1 conductor volume","Conductor size for devices/clamps/grounds is based on largest conductor entering the box"]},dB=ce.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=ce.useState("4x1.5-square"),[s,l]=ce.useState([{size:"12",count:""}]),[d,h]=ce.useState({outlets:"",switches:"",clamps:"",groundWires:!1}),u={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},g=()=>{l([...s,{size:"12",count:""}])},y=M=>{s.length>1&&l(s.filter((F,B)=>B!==M))},_=(M,F,B)=>{const J=[...s];J[M][F]=B,l(J)},R=(()=>{let M=0;const F=s.map(w=>{const N=parseInt(w.count)||0,W=Kv(w.size),q=W*N;return M+=q,{size:w.size,count:N,allowanceEach:W,subtotal:q}}),B=s.reduce((w,N)=>{if((parseInt(N.count)||0)>0){const q=parseInt(N.size.replace("/",""))||0,re=parseInt(w.replace("/",""))||0;return q<re?N.size:w}return w},"14"),J=Kv(B),se=parseInt(d.outlets)||0,O=parseInt(d.switches)||0,A=(se+O)*2*J;M+=A;const V=(parseInt(d.clamps)||0)>0?J:0;M+=V;const I=d.groundWires?J:0;return M+=I,{conductorDetails:F,deviceFill:A,clampFill:V,groundFill:I,totalFill:M,largestWireSize:B,deviceWireAllowance:J}})(),j=lB(n),z=j>0?(R.totalFill/j*100).toFixed(1):0,T=R.totalFill>j;return ce.useImperativeHandle(t,()=>({exportPDF:()=>{const M={};s.forEach((A,S)=>{const V=parseInt(A.count)||0;V>0&&(M[`Conductor ${S+1}`]=`${V}× ${A.size} AWG`)});const F={};R.conductorDetails.forEach((A,S)=>{A.count>0&&(F[`${A.count}× ${A.size} AWG`]=`${A.allowanceEach} cu.in. each = ${A.subtotal.toFixed(2)} cu.in. total`)});const B=parseInt(d.outlets)||0,J=parseInt(d.switches)||0,se=parseInt(d.clamps)||0,O={calculatorName:"Box Fill Calculator",inputs:{boxType:`${cB(n)} (${j} cu.in.)`,...M,receptaclesOutlets:B>0?`${B} (counts as ${B*2} conductors)`:"0",switches:J>0?`${J} (counts as ${J*2} conductors)`:"0",cableClamps:se>0?`${se} (counts as 1 conductor volume)`:"0",equipmentGroundingConductors:d.groundWires?"Yes (counts as 1 conductor volume)":"No"},results:{boxCapacity:`${j} cu.in.`,calculatedFill:`${R.totalFill.toFixed(2)} cu.in.`,fillPercentage:`${z}%`,status:T?"❌ OVERFILLED - Violates NEC 314.16":"✓ Within NEC limits",deviceFill:R.deviceFill>0?`${R.deviceFill.toFixed(2)} cu.in.`:"N/A",clampFill:R.clampFill>0?`${R.clampFill.toFixed(2)} cu.in.`:"N/A",groundFill:R.groundFill>0?`${R.groundFill.toFixed(2)} cu.in.`:"N/A"},additionalInfo:{...F,largestWireSize:`${R.largestWireSize} AWG (used for device/clamp/ground allowance)`,deviceWireAllowance:`${R.deviceWireAllowance} cu.in. per conductor`},necReferences:[Xp.mainSection,Xp.calculations,Xp.table,...Xp.rules,T?"WARNING: This configuration exceeds the maximum allowable box fill":null].filter(Boolean)};Yr(O)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${u.cardBorder}`,paddingBottom:"0.5rem"},children:"Box Selection"}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:u.labelText,marginBottom:"0.5rem"},children:"Box Type"}),i.jsxs("select",{value:n,onChange:M=>o(M.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"},children:[i.jsx("optgroup",{label:"Device Boxes (Single Gang)",children:Object.entries(vd).filter(([M,F])=>F.type==="device-single").map(([M,F])=>i.jsxs("option",{value:M,children:[F.name," - ",F.capacity," cu.in."]},M))}),i.jsx("optgroup",{label:"Device Boxes (Multi-Gang)",children:Object.entries(vd).filter(([M,F])=>F.type==="device-multi").map(([M,F])=>i.jsxs("option",{value:M,children:[F.name," - ",F.capacity," cu.in."]},M))}),i.jsx("optgroup",{label:"Square Boxes",children:Object.entries(vd).filter(([M,F])=>F.type==="square").map(([M,F])=>i.jsxs("option",{value:M,children:[F.name," - ",F.capacity," cu.in."]},M))}),i.jsx("optgroup",{label:"Round/Octagon Boxes",children:Object.entries(vd).filter(([M,F])=>F.type==="round-octagon").map(([M,F])=>i.jsxs("option",{value:M,children:[F.name," - ",F.capacity," cu.in."]},M))}),i.jsx("optgroup",{label:"Masonry Boxes",children:Object.entries(vd).filter(([M,F])=>F.type==="masonry").map(([M,F])=>i.jsxs("option",{value:M,children:[F.name," - ",F.capacity," cu.in."]},M))})]})]})]}),i.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${u.cardBorder}`,paddingBottom:"0.5rem"},children:"Conductors"}),s.map((M,F)=>i.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${u.cardBorder}`},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[i.jsxs("h4",{style:{fontWeight:"600",color:u.labelText,margin:0,fontSize:"0.875rem"},children:["Wire Size ",F+1]}),s.length>1&&i.jsx("button",{onClick:()=>y(F),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:i.jsx(Nl,{size:20})})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[i.jsx("select",{value:M.size,onChange:B=>_(F,"size",B.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"},children:aB.map(B=>i.jsxs("option",{value:B,children:[B," AWG"]},B))}),i.jsx("input",{type:"number",value:M.count,onChange:B=>_(F,"count",B.target.value),placeholder:"Quantity",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"}})]})]},F)),i.jsxs("button",{onClick:g,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(qs,{size:16}),"Add Wire Size"]}),i.jsx("p",{style:{fontSize:"0.75rem",color:u.subtleText,marginTop:"0.5rem",margin:"0.5rem 0 0 0"},children:"Count all insulated conductors entering, leaving, or passing through the box"})]}),i.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${u.cardBorder}`,paddingBottom:"0.5rem"},children:"Devices & Other Items"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:u.labelText,marginBottom:"0.5rem"},children:"Receptacles/Outlets"}),i.jsx("input",{type:"number",value:d.outlets,onChange:M=>h({...d,outlets:M.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"}}),i.jsx("p",{style:{fontSize:"0.75rem",color:u.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"Each device counts as 2 conductors"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:u.labelText,marginBottom:"0.5rem"},children:"Switches"}),i.jsx("input",{type:"number",value:d.switches,onChange:M=>h({...d,switches:M.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"}}),i.jsx("p",{style:{fontSize:"0.75rem",color:u.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"Each device counts as 2 conductors"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:u.labelText,marginBottom:"0.5rem"},children:"Cable Clamps"}),i.jsx("input",{type:"number",value:d.clamps,onChange:M=>h({...d,clamps:M.target.value}),placeholder:"0",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"}}),i.jsx("p",{style:{fontSize:"0.75rem",color:u.subtleText,marginTop:"0.25rem",margin:"0.25rem 0 0 0"},children:"One or more = 1 conductor volume"})]})]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:d.groundWires,onChange:M=>h({...d,groundWires:M.target.checked}),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:u.labelText},children:"Equipment Grounding Conductors Present"})]}),i.jsx("p",{style:{fontSize:"0.75rem",color:u.subtleText,marginLeft:"2rem",margin:"0.25rem 0 0 2rem"},children:"All grounds combined count as 1 conductor volume"})]}),i.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:u.labelText,marginBottom:"0.25rem"},children:"Box Capacity"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:u.cardText},children:j}),i.jsx("div",{style:{fontSize:"0.75rem",color:u.labelText,marginTop:"0.25rem"},children:"cu.in."})]}),i.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:u.labelText,marginBottom:"0.25rem"},children:"Calculated Fill"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:u.cardText},children:R.totalFill.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:u.labelText,marginTop:"0.25rem"},children:"cu.in."})]}),i.jsxs("div",{style:{background:T?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:T?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Fill Percentage"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:T?"#dc2626":"#1e40af"},children:[z,"%"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:T?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:T?"OVERFILLED":"Within Limits"})]})]}),R.conductorDetails.length>0&&R.conductorDetails.some(M=>M.count>0)&&i.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${u.cardBorder}`},children:[i.jsx("strong",{style:{color:u.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Conductor Breakdown:"}),R.conductorDetails.map((M,F)=>M.count>0&&i.jsxs("div",{style:{marginTop:F>0?"0.75rem":0,paddingTop:F>0?"0.75rem":0,borderTop:F>0?`1px solid ${u.cardBorder}`:"none",fontSize:"0.875rem",color:u.labelText},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:[M.count,"× ",M.size," AWG"]}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:u.subtleText},children:[M.allowanceEach," cu.in. each = ",M.subtotal.toFixed(2)," cu.in. total"]})]},F))]}),!T&&R.totalFill>0?i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Box fill is within NEC limits"}),R.deviceFill>0&&i.jsxs("div",{children:["Devices: ",R.deviceFill.toFixed(2)," cu.in."]}),R.clampFill>0&&i.jsxs("div",{children:["Clamps: ",R.clampFill.toFixed(2)," cu.in."]}),R.groundFill>0&&i.jsxs("div",{children:["Grounds: ",R.groundFill.toFixed(2)," cu.in."]})]})]})}):T?i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Us,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",fontSize:"0.9375rem"},children:"BOX OVERFILLED - Violates NEC 314.16"}),i.jsx("div",{style:{marginBottom:"0.5rem"},children:"Reduce number of devices or use larger box"}),R.deviceFill>0&&i.jsxs("div",{children:["Devices: ",R.deviceFill.toFixed(2)," cu.in."]}),R.clampFill>0&&i.jsxs("div",{children:["Clamps: ",R.clampFill.toFixed(2)," cu.in."]}),R.groundFill>0&&i.jsxs("div",{children:["Grounds: ",R.groundFill.toFixed(2)," cu.in."]})]})]})}):null]}),i.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${u.cardBorder}`,fontSize:"0.8125rem",color:u.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:u.cardText},children:"NEC 314.16 Requirements:"}),"Conductor = table volume • Device = 2 volumes • All grounds = 1 volume • Clamps = 1 volume"]})]})}),Jv=[{value:"straight",label:"Straight Pull"},{value:"angle",label:"Angle Pull (L-shaped)"},{value:"u-pull",label:"U-Pull (Same Side)"}],uB=["0.5","0.75","1","1.25","1.5","2","2.5","3","3.5","4","5","6"],hB={"0.5":'1/2"',"0.75":'3/4"',1:'1"',"1.25":'1-1/4"',"1.5":'1-1/2"',2:'2"',"2.5":'2-1/2"',3:'3"',"3.5":'3-1/2"',4:'4"',5:'5"',6:'6"'},oh={straight:{length:8},angle:{distance:6},uPull:{distance:6}},u1=r=>hB[r]||r,wx=r=>parseFloat(r),fB=r=>{const e=wx(r),t=e*oh.straight.length;return{minLength:t,formula:`${e}" × ${oh.straight.length} = ${t}"`,necReference:"NEC 314.28(A)(1)"}},pB=r=>{if(!r||r.length===0)return null;const e=r.map(s=>wx(s.size)),t=Math.max(...e),n=e.reduce((s,l)=>s+l,0)-t,o=t*oh.angle.distance+n;return{minDistance:o,largestRaceway:t,sumOfOthers:n,formula:`(${t}" × ${oh.angle.distance}) + ${n}" = ${o}"`,necReference:"NEC 314.28(A)(2)"}},mB=r=>{const e=wx(r),t=e*oh.uPull.distance;return{minDistance:t,formula:`${e}" × ${oh.uPull.distance} = ${t}"`,necReference:"NEC 314.28(A)(2)"}},h1={mainSection:"NEC 314.28 - Pull and Junction Boxes and Conduit Bodies",conductorSize:"Applies to boxes containing conductors 4 AWG or larger",rules:["Straight Pull: Length = 8 × trade size of largest raceway","Angle/U Pull: Distance = 6 × largest raceway + sum of other raceways on same wall","Rows of conduits: Each row calculated separately","Box depth: Must accommodate the largest conduit locknut and bushing","These are minimum dimensions - larger boxes may be used"]},gB=ce.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=ce.useState("straight"),[s,l]=ce.useState([{size:"1"}]),d={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},h=()=>{l([...s,{size:"1"}])},u=b=>{s.length>1&&l(s.filter((R,j)=>j!==b))},g=(b,R)=>{const j=[...s];j[b].size=R,l(j)},_=(()=>{const R=Math.max(...s.map(j=>parseFloat(j.size))).toString();if(n==="straight")return fB(R);if(n==="angle")return pB(s);if(n==="u-pull")return mB(R)})();return ce.useImperativeHandle(t,()=>({exportPDF:()=>{var z;const b=((z=Jv.find(T=>T.value===n))==null?void 0:z.label)||n,R=s.map((T,M)=>`Raceway ${M+1}: ${u1(T.size)}`).join(", "),j={calculatorName:"Pull Box Calculator",inputs:{pullType:b,numberOfRaceways:s.length,raceways:R,largestRaceway:_?u1(Math.max(...s.map(T=>T.size)).toString()):"N/A"},results:{minimumDimension:_?`${_.minLength||_.minDistance}" inches`:"N/A",formula:(_==null?void 0:_.formula)||"N/A",necReference:(_==null?void 0:_.necReference)||"N/A"},additionalInfo:{calculation:(_==null?void 0:_.formula)||"N/A",note:"These are minimum dimensions per NEC. Larger boxes may be used.",conductorRequirement:"Applies to conductors 4 AWG or larger"},necReferences:[h1.mainSection,_==null?void 0:_.necReference,h1.conductorSize,...h1.rules].filter(Boolean)};Yr(j)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:"Pull Box Configuration"}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Pull Type"}),i.jsx("select",{value:n,onChange:b=>o(b.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:Jv.map(b=>i.jsx("option",{value:b.value,children:b.label},b.value))})]}),i.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#dbeafe",border:"1px solid #93c5fd",borderRadius:"8px",fontSize:"0.8125rem",color:"#1e40af",display:"flex",gap:"0.5rem"},children:[i.jsx(Gi,{size:16,style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{children:[n==="straight"&&"Straight Pull: Conduits enter and exit on opposite sides",n==="angle"&&"Angle Pull: Conduits enter on one side and exit on adjacent side (L-shaped)",n==="u-pull"&&"U-Pull: Conduits enter and exit on the same side"]})]})]}),i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsxs("h3",{style:{fontSize:"1rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${d.cardBorder}`,paddingBottom:"0.5rem"},children:[n==="straight"&&"Raceway Size",n==="angle"&&"Raceways on Same Wall",n==="u-pull"&&"Raceway Size"]}),s.map((b,R)=>i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${d.cardBorder}`},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[i.jsx("h4",{style:{fontWeight:"600",color:d.labelText,margin:0,fontSize:"0.875rem"},children:n==="angle"?R===0?"Largest Raceway":`Other Raceway ${R}`:"Largest Raceway"}),n==="angle"&&R>0&&i.jsx("button",{onClick:()=>u(R),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:i.jsx(Nl,{size:20})})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.8125rem",fontWeight:"500",color:d.labelText,marginBottom:"0.5rem"},children:"Trade Size"}),i.jsx("select",{value:b.size,onChange:j=>g(R,j.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${d.inputBorder}`,borderRadius:"8px",backgroundColor:d.inputBg,color:d.cardText,boxSizing:"border-box"},children:uB.map(j=>i.jsx("option",{value:j,children:u1(j)},j))})]})]},R)),n==="angle"&&i.jsxs("button",{onClick:h,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(qs,{size:16}),"Add Other Raceway"]}),i.jsxs("p",{style:{fontSize:"0.75rem",color:d.subtleText,marginTop:"0.5rem",margin:"0.5rem 0 0 0"},children:[n==="straight"&&"Enter the largest raceway entering the box",n==="angle"&&"Enter largest raceway first, then add any other raceways entering on the same wall",n==="u-pull"&&"Enter the largest raceway entering and exiting on the same side"]})]}),_&&i.jsxs("div",{style:{background:d.cardBg,border:`1px solid ${d.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:d.cardText,marginTop:0,marginBottom:"1rem"},children:"Minimum Box Dimensions"}),i.jsxs("div",{style:{background:d.sectionBg,padding:"1.5rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:d.labelText,marginBottom:"0.5rem"},children:["Minimum ",n==="straight"?"Length":"Distance"]}),i.jsxs("div",{style:{fontSize:"3rem",fontWeight:"700",color:"#3b82f6",lineHeight:1},children:[(_.minLength||_.minDistance).toFixed(1),'"']}),i.jsx("div",{style:{fontSize:"0.875rem",color:d.subtleText,marginTop:"0.5rem"},children:_.formula})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #93c5fd",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"NEC Requirement Met"}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["Reference: ",_.necReference]}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"These are minimum dimensions. Larger boxes may be used for ease of installation."})]})}),n==="angle"&&_.largestRaceway&&i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",marginTop:"1rem",border:`1px solid ${d.cardBorder}`},children:[i.jsx("strong",{style:{color:d.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Angle Pull Calculation:"}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:d.labelText,lineHeight:"1.8"},children:[i.jsxs("div",{style:{marginBottom:"0.5rem"},children:[i.jsx("strong",{children:"Step 1:"})," Largest raceway × 6"]}),i.jsxs("div",{style:{paddingLeft:"1rem",color:d.subtleText},children:[_.largestRaceway,'" × 6 = ',(_.largestRaceway*6).toFixed(1),'"']}),i.jsxs("div",{style:{marginTop:"0.75rem",marginBottom:"0.5rem"},children:[i.jsx("strong",{children:"Step 2:"})," Add other raceways on same wall"]}),i.jsx("div",{style:{paddingLeft:"1rem",color:d.subtleText},children:_.sumOfOthers>0?`Sum of others = ${_.sumOfOthers.toFixed(1)}"`:"No other raceways"}),i.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:`1px solid ${d.cardBorder}`,fontWeight:"600",color:"#3b82f6"},children:["Total: ",(_.largestRaceway*6).toFixed(1),'" + ',_.sumOfOthers.toFixed(1),'" = ',_.minDistance.toFixed(1),'"']})]})]})]}),i.jsxs("div",{style:{background:d.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${d.cardBorder}`,fontSize:"0.8125rem",color:d.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:d.cardText},children:"NEC 314.28 Requirements:"}),i.jsx("div",{style:{lineHeight:"1.6"},children:"Straight: 8× largest • Angle/U: 6× largest + others • For conductors 4 AWG or larger"})]})]})}),xB=[{value:"emt",label:"EMT - Electrical Metallic Tubing"},{value:"ent",label:"ENT - Electrical Nonmetallic Tubing"},{value:"fmc",label:"FMC - Flexible Metal Conduit"},{value:"imc",label:"IMC - Intermediate Metal Conduit"},{value:"lfnc-b",label:"LFNC-B - Liquidtight Flexible Nonmetallic Conduit (Type B)"},{value:"lfnc-a",label:"LFNC-A - Liquidtight Flexible Nonmetallic Conduit (Type A)"},{value:"lfmc",label:"LFMC - Liquidtight Flexible Metal Conduit"},{value:"rmc",label:"RMC - Rigid Metal Conduit"},{value:"pvc-40",label:"PVC Schedule 40"},{value:"pvc-80",label:"PVC Schedule 80"},{value:"pvc-a",label:"PVC Type A"},{value:"pvc-eb",label:"PVC Type EB"}],yB={"0.375":'3/8"',"0.5":'1/2"',"0.75":'3/4"',1:'1"',"1.25":'1-1/4"',"1.5":'1-1/2"',2:'2"',"2.5":'2-1/2"',3:'3"',"3.5":'3-1/2"',4:'4"',5:'5"',6:'6"'},n4={"emt-0.5":{name:'1/2" EMT',area:.304},"emt-0.75":{name:'3/4" EMT',area:.533},"emt-1":{name:'1" EMT',area:.864},"emt-1.25":{name:'1-1/4" EMT',area:1.496},"emt-1.5":{name:'1-1/2" EMT',area:2.036},"emt-2":{name:'2" EMT',area:3.356},"emt-2.5":{name:'2-1/2" EMT',area:5.858},"emt-3":{name:'3" EMT',area:8.846},"emt-3.5":{name:'3-1/2" EMT',area:11.545},"emt-4":{name:'4" EMT',area:14.753},"ent-0.5":{name:'1/2" ENT',area:.246},"ent-0.75":{name:'3/4" ENT',area:.454},"ent-1":{name:'1" ENT',area:.785},"ent-1.25":{name:'1-1/4" ENT',area:1.41},"ent-1.5":{name:'1-1/2" ENT',area:1.936},"ent-2":{name:'2" ENT',area:3.205},"fmc-0.375":{name:'3/8" FMC',area:.116},"fmc-0.5":{name:'1/2" FMC',area:.317},"fmc-0.75":{name:'3/4" FMC',area:.533},"fmc-1":{name:'1" FMC',area:.817},"fmc-1.25":{name:'1-1/4" FMC',area:1.277},"fmc-1.5":{name:'1-1/2" FMC',area:1.858},"fmc-2":{name:'2" FMC',area:3.269},"fmc-2.5":{name:'2-1/2" FMC',area:4.909},"fmc-3":{name:'3" FMC',area:7.069},"fmc-3.5":{name:'3-1/2" FMC',area:9.621},"fmc-4":{name:'4" FMC',area:12.566},"imc-0.5":{name:'1/2" IMC',area:.342},"imc-0.75":{name:'3/4" IMC',area:.586},"imc-1":{name:'1" IMC',area:.959},"imc-1.25":{name:'1-1/4" IMC',area:1.647},"imc-1.5":{name:'1-1/2" IMC',area:2.225},"imc-2":{name:'2" IMC',area:3.63},"imc-2.5":{name:'2-1/2" IMC',area:5.135},"imc-3":{name:'3" IMC',area:7.922},"imc-3.5":{name:'3-1/2" IMC',area:10.584},"imc-4":{name:'4" IMC',area:13.631},"lfnc-b-0.375":{name:'3/8" LFNC-B',area:.192},"lfnc-b-0.5":{name:'1/2" LFNC-B',area:.314},"lfnc-b-0.75":{name:'3/4" LFNC-B',area:.541},"lfnc-b-1":{name:'1" LFNC-B',area:.873},"lfnc-b-1.25":{name:'1-1/4" LFNC-B',area:1.528},"lfnc-b-1.5":{name:'1-1/2" LFNC-B',area:1.981},"lfnc-b-2":{name:'2" LFNC-B',area:3.246},"lfnc-a-0.375":{name:'3/8" LFNC-A',area:.192},"lfnc-a-0.5":{name:'1/2" LFNC-A',area:.312},"lfnc-a-0.75":{name:'3/4" LFNC-A',area:.535},"lfnc-a-1":{name:'1" LFNC-A',area:.854},"lfnc-a-1.25":{name:'1-1/4" LFNC-A',area:1.502},"lfnc-a-1.5":{name:'1-1/2" LFNC-A',area:2.018},"lfnc-a-2":{name:'2" LFNC-A',area:3.343},"lfmc-0.375":{name:'3/8" LFMC',area:.192},"lfmc-0.5":{name:'1/2" LFMC',area:.314},"lfmc-0.75":{name:'3/4" LFMC',area:.541},"lfmc-1":{name:'1" LFMC',area:.873},"lfmc-1.25":{name:'1-1/4" LFMC',area:1.528},"lfmc-1.5":{name:'1-1/2" LFMC',area:1.981},"lfmc-2":{name:'2" LFMC',area:3.246},"lfmc-2.5":{name:'2-1/2" LFMC',area:4.881},"lfmc-3":{name:'3" LFMC',area:7.475},"lfmc-3.5":{name:'3-1/2" LFMC',area:9.731},"lfmc-4":{name:'4" LFMC',area:12.692},"rmc-0.5":{name:'1/2" RMC',area:.314},"rmc-0.75":{name:'3/4" RMC',area:.549},"rmc-1":{name:'1" RMC',area:.887},"rmc-1.25":{name:'1-1/4" RMC',area:1.526},"rmc-1.5":{name:'1-1/2" RMC',area:2.071},"rmc-2":{name:'2" RMC',area:3.408},"rmc-2.5":{name:'2-1/2" RMC',area:4.866},"rmc-3":{name:'3" RMC',area:7.499},"rmc-3.5":{name:'3-1/2" RMC',area:10.01},"rmc-4":{name:'4" RMC',area:12.882},"rmc-5":{name:'5" RMC',area:20.212},"rmc-6":{name:'6" RMC',area:29.158},"pvc-40-0.5":{name:'1/2" PVC Sch 40',area:.285},"pvc-40-0.75":{name:'3/4" PVC Sch 40',area:.508},"pvc-40-1":{name:'1" PVC Sch 40',area:.832},"pvc-40-1.25":{name:'1-1/4" PVC Sch 40',area:1.453},"pvc-40-1.5":{name:'1-1/2" PVC Sch 40',area:1.986},"pvc-40-2":{name:'2" PVC Sch 40',area:3.291},"pvc-40-2.5":{name:'2-1/2" PVC Sch 40',area:4.695},"pvc-40-3":{name:'3" PVC Sch 40',area:7.268},"pvc-40-3.5":{name:'3-1/2" PVC Sch 40',area:9.737},"pvc-40-4":{name:'4" PVC Sch 40',area:12.554},"pvc-40-5":{name:'5" PVC Sch 40',area:19.761},"pvc-40-6":{name:'6" PVC Sch 40',area:28.567},"pvc-80-0.5":{name:'1/2" PVC Sch 80',area:.217},"pvc-80-0.75":{name:'3/4" PVC Sch 80',area:.409},"pvc-80-1":{name:'1" PVC Sch 80',area:.688},"pvc-80-1.25":{name:'1-1/4" PVC Sch 80',area:1.237},"pvc-80-1.5":{name:'1-1/2" PVC Sch 80',area:1.711},"pvc-80-2":{name:'2" PVC Sch 80',area:2.874},"pvc-80-2.5":{name:'2-1/2" PVC Sch 80',area:4.119},"pvc-80-3":{name:'3" PVC Sch 80',area:6.442},"pvc-80-3.5":{name:'3-1/2" PVC Sch 80',area:8.688},"pvc-80-4":{name:'4" PVC Sch 80',area:11.258},"pvc-80-5":{name:'5" PVC Sch 80',area:17.855},"pvc-80-6":{name:'6" PVC Sch 80',area:25.598},"pvc-a-0.5":{name:'1/2" PVC Type A',area:.385},"pvc-a-0.75":{name:'3/4" PVC Type A',area:.65},"pvc-a-1":{name:'1" PVC Type A',area:1.084},"pvc-a-1.25":{name:'1-1/4" PVC Type A',area:1.767},"pvc-a-1.5":{name:'1-1/2" PVC Type A',area:2.324},"pvc-a-2":{name:'2" PVC Type A',area:3.647},"pvc-a-2.5":{name:'2-1/2" PVC Type A',area:5.453},"pvc-a-3":{name:'3" PVC Type A',area:8.194},"pvc-a-3.5":{name:'3-1/2" PVC Type A',area:10.694},"pvc-a-4":{name:'4" PVC Type A',area:13.723},"pvc-eb-2":{name:'2" PVC Type EB',area:3.874},"pvc-eb-3":{name:'3" PVC Type EB',area:8.709},"pvc-eb-3.5":{name:'3-1/2" PVC Type EB',area:11.365},"pvc-eb-4":{name:'4" PVC Type EB',area:14.448},"pvc-eb-5":{name:'5" PVC Type EB',area:22.195},"pvc-eb-6":{name:'6" PVC Type EB',area:31.53}},Yv=r=>{const e=r+"-";return Object.keys(n4).filter(n=>n.startsWith(e)).map(n=>n.replace(e,"")).sort((n,o)=>parseFloat(n)-parseFloat(o))},bB=(r,e)=>{const t=`${r}-${e}`;return n4[t]||null},vB=[{value:"thhn",label:"THHN/THWN-2"},{value:"thw",label:"THW"},{value:"thhw",label:"THHW"},{value:"xhhw",label:"XHHW-2"},{value:"xhh",label:"XHH"}],wB=["18","16","14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750","800","900","1000","1250","1500","1750","2000"],l5={thhn:{14:.0097,12:.0133,10:.0211,8:.0366,6:.0507,4:.0824,3:.0973,2:.1158,1:.1562,"1/0":.1855,"2/0":.2223,"3/0":.2679,"4/0":.3237,250:.397,300:.4608,350:.5242,400:.5863,500:.7073,600:.8676,700:.9887,750:1.0496,800:1.1085,900:1.2311,1e3:1.3478},thwn:{14:.0097,12:.0133,10:.0211,8:.0366,6:.0507,4:.0824,3:.0973,2:.1158,1:.1562,"1/0":.1855,"2/0":.2223,"3/0":.2679,"4/0":.3237,250:.397,300:.4608,350:.5242,400:.5863,500:.7073,600:.8676,700:.9887,750:1.0496,800:1.1085,900:1.2311,1e3:1.3478},thw:{14:.0139,12:.0181,10:.0243,8:.0437,6:.0726,4:.0973,3:.1134,2:.1333,1:.1901,"1/0":.2223,"2/0":.2624,"3/0":.3117,"4/0":.3718,250:.4596,300:.5281,350:.5958,400:.6619,500:.7901,600:.9729,700:1.101,750:1.1652,800:1.2272,900:1.3561,1e3:1.4784,1250:1.8602,1500:2.1695,1750:2.4773,2e3:2.7818},thhw:{14:.0139,12:.0181,10:.0243,8:.0437,6:.0726,4:.0973,3:.1134,2:.1333,1:.1901,"1/0":.2223,"2/0":.2624,"3/0":.3117,"4/0":.3718,250:.4596,300:.5281,350:.5958,400:.6619,500:.7901,600:.9729,700:1.101,750:1.1652,800:1.2272,900:1.3561,1e3:1.4784,1250:1.8602,1500:2.1695,1750:2.4773,2e3:2.7818},xhhw:{14:.0139,12:.0181,10:.0243,8:.0437,6:.059,4:.0814,3:.0962,2:.1146,1:.1534,"1/0":.1825,"2/0":.219,"3/0":.2642,"4/0":.3197,250:.3904,300:.4536,350:.5166,400:.5782,500:.6984,600:.8709,700:.9923,750:1.0532,800:1.1122,900:1.2351,1e3:1.3519,1250:1.718,1500:2.0157,1750:2.3127,2e3:2.6073},xhh:{14:.0139,12:.0181,10:.0243,8:.0437,6:.059,4:.0814,3:.0962,2:.1146,1:.1534,"1/0":.1825,"2/0":.219,"3/0":.2642,"4/0":.3197,250:.3904,300:.4536,350:.5166,400:.5782,500:.6984,600:.8709,700:.9923,750:1.0532,800:1.1122,900:1.2351,1e3:1.3519,1250:1.718,1500:2.0157,1750:2.3127,2e3:2.6073}},SB=(r,e)=>{var t;return((t=l5[r])==null?void 0:t[e])||0},_B=r=>l5[r]?wB.filter(e=>l5[r][e]!==void 0):[],TB=ce.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=ce.useState("emt"),[s,l]=ce.useState("0.5"),[d,h]=ce.useState([{wireType:"thwn",size:"12",count:""}]),u={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},g=Yv(n),y=T=>{o(T);const M=Yv(T);M.includes(s)||l(M[0]||"0.5")},_=()=>{h([...d,{wireType:"thwn",size:"12",count:""}])},b=T=>{d.length>1&&h(d.filter((M,F)=>F!==T))},R=(T,M,F)=>{const B=[...d];B[T][M]=F,h(B)},j=()=>{const T=bB(n,s);if(!T)return null;const M=T.area;let F=0,B=0;const J=d.map(A=>{const S=parseInt(A.count)||0,V=SB(A.wireType,A.size),I=V*S;return F+=I,B+=S,{wireType:A.wireType,size:A.size,count:S,areaEach:V,subtotal:I}}),se=(F/M*100).toFixed(1);let O=40;return B===1?O=53:B===2&&(O=31),{conduitInfo:T,conduitArea:M.toFixed(3),totalWireArea:F.toFixed(3),fillPercentage:parseFloat(se),maxFill:O,totalWireCount:B,conductorDetails:J,isOverfilled:parseFloat(se)>O}};ce.useImperativeHandle(t,()=>({exportPDF:()=>{const T=j();if(T.totalWireCount===0){alert("Please enter at least one conductor with a quantity before exporting");return}const M=T.conductorDetails.filter(B=>B.count>0).map(B=>`${B.count}× ${B.size} AWG ${B.wireType.toUpperCase()}-2: ${B.areaEach.toFixed(4)} sq.in. each = ${B.subtotal.toFixed(4)} sq.in. total`).join("; "),F={calculatorName:"Conduit Fill Calculator",inputs:{conduitType:T.conduitInfo.name,totalConductors:T.totalWireCount},results:{conduitArea:`${T.conduitArea} sq.in.`,totalWireArea:`${T.totalWireArea} sq.in.`,fillPercentage:`${T.fillPercentage}%`,maximumAllowedFill:`${T.maxFill}%`,complianceStatus:T.isOverfilled?"OVERFILLED - Violates NEC":"Within NEC Limits"},additionalInfo:{conductorBreakdown:M,fillRule:T.totalWireCount===1?"1 conductor: 53% max fill":T.totalWireCount===2?"2 conductors: 31% max fill":"3+ conductors: 40% max fill",recommendation:T.isOverfilled?"Reduce number of conductors or use larger conduit":"Installation meets NEC requirements"},necReferences:["NEC Chapter 9, Table 1 - Percent of Cross Section of Conduit and Tubing for Conductors","NEC Chapter 9, Table 4 - Dimensions and Percent Area of Conduit and Tubing","NEC Chapter 9, Table 5 - Dimensions of Insulated Conductors and Fixture Wires","1 conductor: 53% max fill","2 conductors: 31% max fill","3+ conductors: 40% max fill","Nipples (24 inches or less): 60% max fill"]};Yr(F)}}));const z=j();return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${u.cardBorder}`,paddingBottom:"0.5rem"},children:"Conduit Selection"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:u.labelText,marginBottom:"0.5rem"},children:"Conduit Type"}),i.jsx("select",{value:n,onChange:T=>y(T.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"},children:xB.map(T=>i.jsx("option",{value:T.value,children:T.label},T.value))})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:u.labelText,marginBottom:"0.5rem"},children:"Conduit Size"}),i.jsx("select",{value:s,onChange:T=>l(T.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"},children:g.map(T=>i.jsx("option",{value:T,children:yB[T]||T},T))})]})]})]}),i.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${u.cardBorder}`,paddingBottom:"0.5rem"},children:"Conductors"}),d.map((T,M)=>i.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"0.75rem",border:`1px solid ${u.cardBorder}`},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[i.jsxs("h4",{style:{fontWeight:"600",color:u.labelText,margin:0,fontSize:"0.875rem"},children:["Conductor ",M+1]}),d.length>1&&i.jsx("button",{onClick:()=>b(M),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center"},children:i.jsx(Nl,{size:20})})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"0.75rem"},children:[i.jsx("select",{value:T.wireType,onChange:F=>R(M,"wireType",F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"},children:vB.map(F=>i.jsx("option",{value:F.value,children:F.label},F.value))}),i.jsx("select",{value:T.size,onChange:F=>R(M,"size",F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"},children:_B(T.wireType).map(F=>{const J=!F.includes("/")&&parseInt(F)>=250?"kcmil":"AWG";return i.jsxs("option",{value:F,children:[F," ",J]},F)})}),i.jsx("input",{type:"number",value:T.count,onChange:F=>R(M,"count",F.target.value),placeholder:"Quantity",min:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${u.inputBorder}`,borderRadius:"8px",backgroundColor:u.inputBg,color:u.cardText,boxSizing:"border-box"}})]})]},M)),i.jsxs("button",{onClick:_,style:{width:"100%",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(qs,{size:16}),"Add Conductor"]})]}),z&&i.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:u.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:u.labelText,marginBottom:"0.25rem"},children:"Conduit Area"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:u.cardText},children:z.conduitArea}),i.jsx("div",{style:{fontSize:"0.75rem",color:u.labelText,marginTop:"0.25rem"},children:"sq.in."})]}),i.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:u.labelText,marginBottom:"0.25rem"},children:"Wire Area"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:u.cardText},children:z.totalWireArea}),i.jsx("div",{style:{fontSize:"0.75rem",color:u.labelText,marginTop:"0.25rem"},children:"sq.in."})]}),i.jsxs("div",{style:{background:z.isOverfilled?"#fee2e2":"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:z.isOverfilled?"#991b1b":"#1e40af",marginBottom:"0.25rem"},children:"Fill Percentage"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:z.isOverfilled?"#dc2626":"#1e40af"},children:[z.fillPercentage,"%"]}),i.jsxs("div",{style:{fontSize:"0.75rem",color:z.isOverfilled?"#991b1b":"#1e40af",marginTop:"0.25rem"},children:["Max: ",z.maxFill,"%"]})]})]}),z.conductorDetails.length>0&&z.totalWireCount>0&&i.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${u.cardBorder}`},children:[i.jsx("strong",{style:{color:u.cardText,display:"block",marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Conductor Breakdown:"}),z.conductorDetails.map((T,M)=>T.count>0&&i.jsxs("div",{style:{marginTop:M>0?"0.75rem":0,paddingTop:M>0?"0.75rem":0,borderTop:M>0?`1px solid ${u.cardBorder}`:"none",fontSize:"0.875rem",color:u.labelText},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:[T.count,"× ",T.size," ",!T.size.includes("/")&&parseInt(T.size)>=250?"kcmil":"AWG"," ",T.wireType.toUpperCase(),"-2"]}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:u.subtleText},children:[T.areaEach.toFixed(4)," sq.in. each = ",T.subtotal.toFixed(4)," sq.in. total"]})]},M))]}),!z.isOverfilled&&z.totalWireCount>0?i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Conduit fill is within NEC limits"}),i.jsxs("div",{children:["Total conductors: ",z.totalWireCount]})]})]})}):z.isOverfilled?i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Us,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",fontSize:"0.9375rem"},children:"CONDUIT OVERFILLED - Violates NEC Chapter 9"}),i.jsx("div",{children:"Reduce number of conductors or use larger conduit"})]})]})}):null]}),i.jsxs("div",{style:{background:u.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${u.cardBorder}`,fontSize:"0.8125rem",color:u.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:u.cardText},children:"NEC Chapter 9, Table 1:"}),'1 conductor: 53% • 2 conductors: 31% • 3+ conductors: 40% • Nipples (<24"): 60%']})]})}),CB=[{value:"copper",label:"Copper"},{value:"aluminum",label:"Aluminum"}],AB=[{value:"60C",label:"60°C (140°F)"},{value:"75C",label:"75°C (167°F)"},{value:"90C",label:"90°C (194°F)"}],kB=[{value:"18",label:"18 AWG"},{value:"16",label:"16 AWG"},{value:"14",label:"14 AWG"},{value:"12",label:"12 AWG"},{value:"10",label:"10 AWG"},{value:"8",label:"8 AWG"},{value:"6",label:"6 AWG"},{value:"4",label:"4 AWG"},{value:"3",label:"3 AWG"},{value:"2",label:"2 AWG"},{value:"1",label:"1 AWG"},{value:"1/0",label:"1/0 AWG"},{value:"2/0",label:"2/0 AWG"},{value:"3/0",label:"3/0 AWG"},{value:"4/0",label:"4/0 AWG"},{value:"250",label:"250 kcmil"},{value:"300",label:"300 kcmil"},{value:"350",label:"350 kcmil"},{value:"400",label:"400 kcmil"},{value:"500",label:"500 kcmil"},{value:"600",label:"600 kcmil"},{value:"700",label:"700 kcmil"},{value:"750",label:"750 kcmil"},{value:"800",label:"800 kcmil"},{value:"900",label:"900 kcmil"},{value:"1000",label:"1000 kcmil"},{value:"1250",label:"1250 kcmil"},{value:"1500",label:"1500 kcmil"},{value:"1750",label:"1750 kcmil"},{value:"2000",label:"2000 kcmil"}],jB=[{value:"10",label:"10°C (50°F)"},{value:"15",label:"15°C (59°F)"},{value:"20",label:"20°C (68°F)"},{value:"25",label:"25°C (77°F)"},{value:"30",label:"30°C (86°F) - Standard"},{value:"35",label:"35°C (95°F)"},{value:"40",label:"40°C (104°F)"},{value:"45",label:"45°C (113°F)"},{value:"50",label:"50°C (122°F)"}],IB={copper:{"60C":{18:0,16:0,14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:350,700:385,750:400,800:410,900:435,1e3:455,1250:495,1500:525,1750:545,2e3:555},"75C":{18:0,16:0,14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,700:460,750:475,800:490,900:520,1e3:545,1250:590,1500:625,1750:650,2e3:665},"90C":{18:14,16:18,14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535,800:555,900:585,1e3:615,1250:665,1500:705,1750:735,2e3:750}},aluminum:{"60C":{18:0,16:0,14:0,12:15,10:25,8:30,6:40,4:55,3:65,2:75,1:85,"1/0":100,"2/0":115,"3/0":130,"4/0":150,250:170,300:195,350:210,400:225,500:260,600:285,700:310,750:320,800:330,900:355,1e3:375,1250:405,1500:435,1750:455,2e3:470},"75C":{18:0,16:0,14:0,12:20,10:30,8:40,6:50,4:65,3:75,2:90,1:100,"1/0":120,"2/0":135,"3/0":155,"4/0":180,250:205,300:230,350:250,400:270,500:310,600:340,700:375,750:385,800:395,900:425,1e3:445,1250:485,1500:520,1750:545,2e3:560},"90C":{18:0,16:0,14:0,12:25,10:35,8:45,6:55,4:75,3:85,2:100,1:115,"1/0":135,"2/0":150,"3/0":175,"4/0":205,250:230,300:260,350:280,400:305,500:350,600:385,700:420,750:435,800:445,900:480,1e3:500,1250:545,1500:585,1750:615,2e3:630}}},EB={"60C":{10:1.29,15:1.2,20:1.11,25:1.05,30:1,35:.94,40:.88,45:.82,50:.75,55:.67,60:.58,65:.47,70:.33},"75C":{10:1.2,15:1.15,20:1.11,25:1.05,30:1,35:.94,40:.88,45:.82,50:.75,55:.67,60:.58,65:.47,70:.33,75:0},"90C":{10:1.15,15:1.12,20:1.08,25:1.04,30:1,35:.96,40:.91,45:.87,50:.82,55:.76,60:.71,65:.65,70:.58,75:.5,80:.41,85:.29,90:0}},RB={copper:{14:15,12:20,10:30},aluminum:{12:15,10:25}},PB=(r,e,t)=>{var n,o;return((o=(n=IB[r])==null?void 0:n[e])==null?void 0:o[t])||0},NB=(r,e)=>{var t;return((t=EB[r])==null?void 0:t[e])||1},BB=r=>{const e=parseInt(r);return e<=3?1:e<=6?.8:e<=9?.7:e<=20?.5:e<=30?.45:e<=40?.4:.35},LB=(r,e)=>{var t;return((t=RB[r])==null?void 0:t[e])||null},Qv=(r,e)=>e==="18"?"Thermostats, lighting controls, doorbells, signaling circuits":e==="16"?"Electronics, lighting control systems, doorbells, low-voltage applications":r<=15||r<=20?"Lighting circuits, small appliances":r<=25?"General outlets, lighting circuits":r<=30?"Small appliances, dryers (240V)":r<=40?"Electric ranges, large appliances":r<=50?"Electric ranges, welders, heat pumps":r<=100?"Sub-panels, large motors":r<=200?"Main panels, large commercial loads":r<=400?"Service entrances, large commercial/industrial applications":r<=600?"Large service entrances, industrial feeders":"Large industrial services, utility connections",FB=(r,e,t,n,o)=>{const s=NB(e,t),l=BB(n);let d=r*s*l,h=d;return o&&(h=d*.8),{base:r,tempFactor:s,conductorFactor:l,derated:Math.round(d*10)/10,continuous:Math.round(h*10)/10}},Xv=r=>({"60C":"60°C (140°F)","75C":"75°C (167°F)","90C":"90°C (194°F)"})[r]||r,zB=r=>({10:"10°C (50°F)",15:"15°C (59°F)",20:"20°C (68°F)",25:"25°C (77°F)",30:"30°C (86°F)",35:"35°C (95°F)",40:"40°C (104°F)",45:"45°C (113°F)",50:"50°C (122°F)"})[r]||`${r}°C`,Zv=r=>r.includes("/")?`${r} AWG`:parseInt(r)<=16?`${r} AWG`:`${r} kcmil`,Gh={ampacityTable:"NEC Table 310.16 - Allowable Ampacities of Insulated Conductors",tempCorrection:"NEC 310.15(B)(2)(a) - Temperature Correction Factors",conductorAdjustment:"NEC 310.15(B)(3)(a) - Conductor Bundling Adjustment Factors",ocpdLimit:"NEC 240.4(D) - Small Conductor Overcurrent Protection",continuousLoad:"NEC 210.19(A)(1) - Continuous Load Sizing (125% factor)"},VB=ce.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=ce.useState("12"),[s,l]=ce.useState("copper"),[d,h]=ce.useState("75C"),[u,g]=ce.useState("30"),[y,_]=ce.useState("3"),[b,R]=ce.useState(!1),j={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},z=PB(s,d,n),T=LB(s,n),M=FB(z,d,u,y,b),F=M.tempFactor!==1||M.conductorFactor!==1||b;return ce.useImperativeHandle(t,()=>({exportPDF:()=>{const B={calculatorName:"Ampacity Lookup Calculator",inputs:{wireSize:Zv(n),wireMaterial:s.charAt(0).toUpperCase()+s.slice(1),temperatureRating:Xv(d),ambientTemperature:zB(u),currentCarryingConductors:y,continuousLoad:b?"Yes (3+ hours)":"No"},results:{baseAmpacity:`${M.base} A`,deratedAmpacity:F?`${M.derated} A`:"N/A (no derating applied)",finalAmpacity:`${b?M.continuous:F?M.derated:M.base} A`,ocpdLimit:T?`${T} A (NEC 240.4(D))`:"No special limit",commonApplications:Qv(z,n)},additionalInfo:{temperatureCorrectionFactor:`×${M.tempFactor.toFixed(2)}`,conductorAdjustmentFactor:`×${M.conductorFactor.toFixed(2)}`,continuousLoadFactor:b?"×0.80":"Not applied",deratingApplied:F?"Yes":"No"},necReferences:[Gh.ampacityTable,Gh.tempCorrection,Gh.conductorAdjustment,T?Gh.ocpdLimit:null,b?Gh.continuousLoad:null].filter(Boolean)};Yr(B)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${j.cardBorder}`,paddingBottom:"0.5rem"},children:"Wire Selection"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Wire Size"}),i.jsx("select",{value:n,onChange:B=>o(B.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:kB.map(B=>i.jsx("option",{value:B.value,children:B.label},B.value))})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Wire Material"}),i.jsx("select",{value:s,onChange:B=>l(B.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:CB.map(B=>i.jsx("option",{value:B.value,children:B.label},B.value))})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Temperature Rating"}),i.jsx("select",{value:d,onChange:B=>h(B.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:AB.map(B=>i.jsx("option",{value:B.value,children:B.label},B.value))})]})]})]})]}),i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${j.cardBorder}`,paddingBottom:"0.5rem"},children:"Derating Factors (Optional)"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Ambient Temp (°C)"}),i.jsx("select",{value:u,onChange:B=>g(B.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:jB.map(B=>i.jsx("option",{value:B.value,children:B.label},B.value))})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Current-Carrying Conductors"}),i.jsx("input",{type:"number",value:y,onChange:B=>_(B.target.value),min:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}})]})]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:b,onChange:B=>R(B.target.checked),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:j.labelText},children:"Continuous Load (3+ hours) - Apply 80% factor"})]}),i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${j.cardBorder}`},children:[i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"0.75rem"},children:"Applied Factors"}),i.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:j.labelText},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Temperature Factor:"}),i.jsxs("span",{style:{fontWeight:"600",color:j.cardText},children:["×",M.tempFactor.toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Conductor Adjustment:"}),i.jsxs("span",{style:{fontWeight:"600",color:j.cardText},children:["×",M.conductorFactor.toFixed(2)]})]}),b&&i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Continuous Load:"}),i.jsx("span",{style:{fontWeight:"600",color:j.cardText},children:"×0.80"})]})]})]})]})]}),i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:F?"repeat(3, 1fr)":"1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Base Ampacity"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:[M.base," A"]})]}),F&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Derated Ampacity"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:[M.derated," A"]})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Final Ampacity"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[b?M.continuous:M.derated," A"]})]})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5",width:"100%"},children:[i.jsxs("div",{style:{marginBottom:"0.5rem"},children:[i.jsx("strong",{children:"Wire:"})," ",Zv(n)," ",s]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:[i.jsx("strong",{children:"Temperature Rating:"})," ",Xv(d)]})]})]})}),T&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Us,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("strong",{children:"NEC 240.4(D) Limit:"})," ",T,"A max overcurrent protection"]})]})}),i.jsx("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${j.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:j.labelText,lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",color:j.cardText,marginBottom:"0.5rem"},children:"Common Applications:"}),Qv(z,n)]})})]})]})}),OB=({flcData:r,setFlcData:e,colors:t})=>{var d,h;const n={single:{115:{.25:4.4,.33:5.8,.5:7.2,.75:9.8,1:13.8,1.5:20,2:24,3:34,5:56},230:{.25:2.2,.33:2.9,.5:3.6,.75:4.9,1:6.9,1.5:10,2:12,3:17,5:28}},three:{230:{.5:2,.75:2.8,1:3.6,1.5:5.2,2:6.8,3:9.6,5:15.2,7.5:22,10:28,15:42,20:54,25:68,30:80,40:104,50:130,60:154,75:192,100:248,125:312,150:360,200:480},460:{.5:1,.75:1.4,1:1.8,1.5:2.6,2:3.4,3:4.8,5:7.6,7.5:11,10:14,15:21,20:27,25:34,30:40,40:52,50:65,60:77,75:96,100:124,125:156,150:180,200:240},575:{.5:.8,.75:1.1,1:1.4,1.5:2.1,2:2.7,3:3.9,5:6.1,7.5:9,10:11,15:17,20:22,25:27,30:32,40:41,50:52,60:62,75:77,100:99,125:125,150:144,200:192},2300:{250:65,300:77,350:90,400:103,450:116,500:129},4e3:{500:74,600:88,700:103,800:118,900:132,1e3:147}}},s=(()=>{const u=parseFloat(r.horsepower),g=parseInt(r.voltage);if(n[r.phase]&&n[r.phase][g]&&n[r.phase][g][u])return n[r.phase][g][u];const y=parseFloat(r.efficiency),_=parseFloat(r.powerFactor);return r.phase==="single"?u*746/(g*y*_):u*746/(1.732*g*y*_)})(),l=(h=(d=n[r.phase])==null?void 0:d[parseInt(r.voltage)])==null?void 0:h[parseFloat(r.horsepower)];return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Horsepower"}),i.jsxs("select",{value:r.horsepower,onChange:u=>e({...r,horsepower:u.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"",children:"Select HP"}),i.jsx("option",{value:"0.25",children:"1/4 HP"}),i.jsx("option",{value:"0.33",children:"1/3 HP"}),i.jsx("option",{value:"0.5",children:"1/2 HP"}),i.jsx("option",{value:"0.75",children:"3/4 HP"}),i.jsx("option",{value:"1",children:"1 HP"}),i.jsx("option",{value:"1.5",children:"1.5 HP"}),i.jsx("option",{value:"2",children:"2 HP"}),i.jsx("option",{value:"3",children:"3 HP"}),i.jsx("option",{value:"5",children:"5 HP"}),i.jsx("option",{value:"7.5",children:"7.5 HP"}),i.jsx("option",{value:"10",children:"10 HP"}),i.jsx("option",{value:"15",children:"15 HP"}),i.jsx("option",{value:"20",children:"20 HP"}),i.jsx("option",{value:"25",children:"25 HP"}),i.jsx("option",{value:"30",children:"30 HP"}),i.jsx("option",{value:"40",children:"40 HP"}),i.jsx("option",{value:"50",children:"50 HP"}),i.jsx("option",{value:"75",children:"75 HP"}),i.jsx("option",{value:"100",children:"100 HP"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Voltage"}),i.jsxs("select",{value:r.voltage,onChange:u=>e({...r,voltage:u.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"115",children:"115V"}),i.jsx("option",{value:"230",children:"230V"}),i.jsx("option",{value:"460",children:"460V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"575",children:"575V"}),i.jsx("option",{value:"2300",children:"2300V"}),i.jsx("option",{value:"4000",children:"4000V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Phase"}),i.jsxs("select",{value:r.phase,onChange:u=>e({...r,phase:u.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]})]}),r.horsepower&&!l&&i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Efficiency"}),i.jsxs("select",{value:r.efficiency,onChange:u=>e({...r,efficiency:u.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"0.8",children:"80% (Standard)"}),i.jsx("option",{value:"0.85",children:"85% (High Efficiency)"}),i.jsx("option",{value:"0.9",children:"90% (Premium)"}),i.jsx("option",{value:"0.95",children:"95% (Super Premium)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),i.jsxs("select",{value:r.powerFactor,onChange:u=>e({...r,powerFactor:u.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"0.7",children:"0.7 (Poor)"}),i.jsx("option",{value:"0.8",children:"0.8 (Typical)"}),i.jsx("option",{value:"0.85",children:"0.85 (Good)"}),i.jsx("option",{value:"0.9",children:"0.9 (Excellent)"})]})]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${t.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.5rem",textAlign:"center"},children:"Full Load Current"}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:t.cardText,textAlign:"center"},children:s?s.toFixed(1):"0.0"}),i.jsx("div",{style:{fontSize:"0.875rem",color:t.labelText,textAlign:"center",marginTop:"0.25rem"},children:"Amperes"})]}),l?i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Value from NEC Table 430.250"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Standard full load current from NEC tables"})]})]})}):r.horsepower?i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Us,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Calculated Value"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Not in NEC tables - calculated using efficiency and power factor"})]})]})}):null]})},MB=({protectionData:r,setProtectionData:e,colors:t})=>{const n={"inverse-time-breaker":250,"instantaneous-trip-breaker":800,"inverse-time-fuse":175,"time-delay-fuse":175},s=(()=>{if(!r.flc)return{calculated:"0",standard:0};const l=parseFloat(r.flc),d=n[r.protectionType],h=l*d/100,g=[15,20,25,30,35,40,45,50,60,70,80,90,100,110,125,150,175,200,225,250,300,350,400,450,500,600,700,800,1e3,1200,1600,2e3,2500,3e3,4e3,5e3,6e3].find(y=>y>=h)||h;return{calculated:h.toFixed(1),standard:g,percentage:d}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Full Load Current (FLC)"}),i.jsx("input",{type:"number",value:r.flc,onChange:l=>e({...r,flc:l.target.value}),placeholder:"Enter FLC in amps",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Protection Type"}),i.jsxs("select",{value:r.protectionType,onChange:l=>e({...r,protectionType:l.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"inverse-time-breaker",children:"Inverse Time Breaker"}),i.jsx("option",{value:"instantaneous-trip-breaker",children:"Instantaneous Trip Breaker"}),i.jsx("option",{value:"inverse-time-fuse",children:"Inverse Time Fuse"}),i.jsx("option",{value:"time-delay-fuse",children:"Time Delay Fuse"})]})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Calculated Maximum"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:s.calculated}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Standard Size"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:s.standard}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),r.flc&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.8125rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Reference:"}),"Per NEC Table 430.52 (",s.percentage,"% of FLC)"]})]})},DB=({wireSizeData:r,setWireSizeData:e,colors:t})=>{const o=(()=>{if(!r.flc)return null;const s=parseFloat(r.flc)*1.25,l={"60C":{14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:355,700:385,750:400},"75C":{14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,750:475},"90C":{14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535}},d={14:15,12:20,10:30},u=["14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750"].find(g=>{const y=l[r.tempRating][g]>=s,_=!d[g]||d[g]>=s;return y&&_});return{requiredAmps:s.toFixed(1),wireSize:u||"Larger than 750 kcmil required",ampacity:u?l[r.tempRating][u]:"N/A",ocpdLimit:u&&d[u]?d[u]:null}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Full Load Current (FLC)"}),i.jsx("input",{type:"number",value:r.flc,onChange:s=>e({...r,flc:s.target.value}),placeholder:"Enter FLC in amps",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Temperature Rating"}),i.jsxs("select",{value:r.tempRating,onChange:s=>e({...r,tempRating:s.target.value}),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"60C",children:"60°C (140°F) - TW, UF"}),i.jsx("option",{value:"75C",children:"75°C (167°F) - THWN, XHHW"}),i.jsx("option",{value:"90C",children:"90°C (194°F) - THHN, XHHW-2"})]})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${t.cardBorder}`},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,marginBottom:"0.75rem"},children:[i.jsx("strong",{style:{color:t.cardText},children:"Required Current Capacity:"})," ",o.requiredAmps," Amps (125% of FLC)"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.5rem",textAlign:"center"},children:"Minimum Wire Size"}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:t.cardText,textAlign:"center",marginBottom:"0.5rem"},children:o.wireSize}),o.ampacity!=="N/A"&&i.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,textAlign:"center"},children:["Ampacity: ",o.ampacity," Amps"]})]}),o.ocpdLimit&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Us,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"NEC 240.4(D) Limitation"}),i.jsxs("div",{style:{fontSize:"0.8125rem"},children:[o.ocpdLimit,"A maximum overcurrent protection for ",o.wireSize," wire"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.8125rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Reference:"}),"Per NEC 430.22 - Branch circuit conductors must carry 125% of motor FLC"]})]})]})},WB=ce.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=ce.useState("flc"),[o,s]=ce.useState({horsepower:"",voltage:"480",phase:"three",efficiency:"0.85",powerFactor:"0.8"}),[l,d]=ce.useState({flc:"",protectionType:"inverse-time-breaker"}),[h,u]=ce.useState({flc:"",tempRating:"75C"}),g={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};ce.useImperativeHandle(e,()=>({exportPDF:()=>{var b,R;let _;if(t==="flc"){if(!o.horsepower){alert("Please select motor horsepower before exporting");return}const j={single:{115:{.25:4.4,.33:5.8,.5:7.2,.75:9.8,1:13.8,1.5:20,2:24,3:34,5:56},230:{.25:2.2,.33:2.9,.5:3.6,.75:4.9,1:6.9,1.5:10,2:12,3:17,5:28}},three:{230:{.5:2,.75:2.8,1:3.6,1.5:5.2,2:6.8,3:9.6,5:15.2,7.5:22,10:28,15:42,20:54,25:68,30:80,40:104,50:130,60:154,75:192,100:248,125:312,150:360,200:480},460:{.5:1,.75:1.4,1:1.8,1.5:2.6,2:3.4,3:4.8,5:7.6,7.5:11,10:14,15:21,20:27,25:34,30:40,40:52,50:65,60:77,75:96,100:124,125:156,150:180,200:240},575:{.5:.8,.75:1.1,1:1.4,1.5:2.1,2:2.7,3:3.9,5:6.1,7.5:9,10:11,15:17,20:22,25:27,30:32,40:41,50:52,60:62,75:77,100:99,125:125,150:144,200:192},2300:{250:65,300:77,350:90,400:103,450:116,500:129},4e3:{500:74,600:88,700:103,800:118,900:132,1e3:147}}},z=parseFloat(o.horsepower),T=parseInt(o.voltage);let M,F=!1;if((R=(b=j[o.phase])==null?void 0:b[T])!=null&&R[z])M=j[o.phase][T][z],F=!0;else{const J=parseFloat(o.efficiency),se=parseFloat(o.powerFactor);o.phase==="single"?M=z*746/(T*J*se):M=z*746/(1.732*T*J*se)}const B={motorHorsepower:`${z} HP`,voltage:`${o.voltage}V`,phase:o.phase==="single"?"Single Phase":"Three Phase"};F||(B.motorEfficiency=`${(parseFloat(o.efficiency)*100).toFixed(0)}%`,B.powerFactor=o.powerFactor),_={calculatorName:"Motor Calculations - Full Load Current",inputs:B,results:{fullLoadCurrent:`${M.toFixed(1)} Amperes`,source:F?"NEC Table 430.250":"Calculated"},additionalInfo:F?{note:"Standard full load current from NEC tables"}:{calculation:o.phase==="single"?`FLC = (${z} HP × 746) ÷ (${T}V × ${o.efficiency} eff × ${o.powerFactor} pf) = ${M.toFixed(1)}A`:`FLC = (${z} HP × 746) ÷ (1.732 × ${T}V × ${o.efficiency} eff × ${o.powerFactor} pf) = ${M.toFixed(1)}A`,note:"Calculated value - not in NEC tables"},necReferences:["NEC Table 430.250 - Full-Load Current, Three-Phase Alternating-Current Motors","NEC Table 430.248 - Full-Load Current, Single-Phase Alternating-Current Motors","NEC 430.6 - Ampacity and Motor Rating Determination"]}}else if(t==="protection"){if(!l.flc){alert("Please enter motor FLC before exporting");return}const j={"inverse-time-breaker":"Inverse Time Breaker","instantaneous-trip-breaker":"Instantaneous Trip Breaker","inverse-time-fuse":"Inverse Time Fuse","time-delay-fuse":"Time Delay Fuse"},z={"inverse-time-breaker":250,"instantaneous-trip-breaker":800,"inverse-time-fuse":175,"time-delay-fuse":175},T=parseFloat(l.flc),M=z[l.protectionType],F=T*M/100,J=[15,20,25,30,35,40,45,50,60,70,80,90,100,110,125,150,175,200,225,250,300,350,400,450,500,600,700,800,1e3,1200,1600,2e3,2500,3e3,4e3,5e3,6e3].find(se=>se>=F)||F;_={calculatorName:"Motor Calculations - Branch Circuit Protection",inputs:{motorFullLoadCurrent:`${l.flc} Amps`,protectionType:j[l.protectionType]},results:{calculatedMaximum:`${F.toFixed(1)} Amperes`,standardSize:`${J} Amperes`},additionalInfo:{calculation:`Maximum = ${T}A × ${M}% = ${F.toFixed(1)}A`,nextStandardSize:`Next standard OCPD size: ${J}A`},necReferences:[`NEC Table 430.52 - Maximum Rating or Setting of Motor Branch-Circuit Short-Circuit and Ground-Fault Protective Devices (${M}% of FLC)`,"NEC 430.52(C) - Rating or Setting for Individual Motor Circuit","NEC 240.6 - Standard Ampere Ratings"]}}else if(t==="wiresize"){if(!h.flc){alert("Please enter motor FLC before exporting");return}const j={"60C":"60°C (140°F) - TW, UF","75C":"75°C (167°F) - THWN, XHHW","90C":"90°C (194°F) - THHN, XHHW-2"},z=(parseFloat(h.flc)*1.25).toFixed(1),T={"60C":{14:15,12:20,10:30,8:40,6:55,4:70,3:85,2:95,1:110,"1/0":125,"2/0":145,"3/0":165,"4/0":195,250:215,300:240,350:260,400:280,500:320,600:355,700:385,750:400},"75C":{14:20,12:25,10:35,8:50,6:65,4:85,3:100,2:115,1:130,"1/0":150,"2/0":175,"3/0":200,"4/0":230,250:255,300:285,350:310,400:335,500:380,600:420,750:475},"90C":{14:25,12:30,10:40,8:55,6:75,4:95,3:115,2:130,1:150,"1/0":170,"2/0":195,"3/0":225,"4/0":260,250:290,300:320,350:350,400:380,500:430,600:475,700:520,750:535}},M={14:15,12:20,10:30},B=["14","12","10","8","6","4","3","2","1","1/0","2/0","3/0","4/0","250","300","350","400","500","600","700","750"].find(O=>{const A=T[h.tempRating][O]>=parseFloat(z),S=!M[O]||M[O]>=parseFloat(z);return A&&S}),J=B||"Larger than 750 kcmil required",se=B?T[h.tempRating][B]:"N/A";_={calculatorName:"Motor Calculations - Wire Sizing",inputs:{motorFullLoadCurrent:`${h.flc} Amps`,temperatureRating:j[h.tempRating]},results:{requiredCapacity:`${z} Amps (125% of FLC)`,minimumWireSize:J,wireAmpacity:se!=="N/A"?`${se} Amps`:"N/A"},additionalInfo:{calculation:`Required capacity = ${h.flc}A × 125% = ${z}A`,...B&&M[B]&&{ocpdLimitation:`NEC 240.4(D): ${M[B]}A maximum OCPD for ${J} wire`}},necReferences:["NEC 430.22 - Single Motor - Conductors supplying a single motor shall have an ampacity not less than 125% of FLC","NEC Table 310.16 - Allowable Ampacities of Insulated Conductors","NEC 240.4(D) - Small Conductors - Unless specifically permitted, overcurrent protection shall not exceed limits"]}}Yr(_)}}));const y={flc:i.jsx(OB,{flcData:o,setFlcData:s,colors:g}),protection:i.jsx(MB,{protectionData:l,setProtectionData:d,colors:g}),wiresize:i.jsx(DB,{wireSizeData:h,setWireSizeData:u,colors:g})};return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:g.cardBg,border:`1px solid ${g.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>n("flc"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="flc"?"#3b82f6":"transparent",color:t==="flc"?"white":g.labelText,border:`1px solid ${t==="flc"?"#3b82f6":g.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Full Load Current"}),i.jsx("button",{onClick:()=>n("protection"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="protection"?"#3b82f6":"transparent",color:t==="protection"?"white":g.labelText,border:`1px solid ${t==="protection"?"#3b82f6":g.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Circuit Protection"}),i.jsx("button",{onClick:()=>n("wiresize"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="wiresize"?"#3b82f6":"transparent",color:t==="wiresize"?"white":g.labelText,border:`1px solid ${t==="wiresize"?"#3b82f6":g.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Wire Sizing"})]})}),i.jsx("div",{style:{background:g.cardBg,border:`1px solid ${g.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:y[t]}),i.jsxs("div",{style:{background:g.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${g.cardBorder}`,fontSize:"0.8125rem",color:g.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:g.cardText},children:"NEC References:"}),"430.22 - Conductors (125% FLC) • 430.52 - Circuit protection • 430.250 - FLC tables • 430.32 - Overload protection"]})]})}),$B=({data:r,setData:e,colors:t})=>{const o=(()=>{const s=parseFloat(r.squareFootage)||0,l=parseFloat(r.smallApplianceCircuits)||0,d=parseFloat(r.laundryCircuits)||0,h=parseFloat(r.rangeKW)||0,u=parseFloat(r.dryerKW)||0,g=parseFloat(r.waterHeaterKW)||0,y=parseFloat(r.hvacKW)||0,_=parseFloat(r.otherLoadsKW)||0,b=parseFloat(r.voltage),R=s*3,j=l*1500,z=d*1500,T=R+j+z;let M=0;T<=3e3?M=T:T<=12e4?M=3e3+(T-3e3)*.35:M=43950+(T-12e4)*.25;let F=0;h>0&&(h<=12?F=8e3:F=8e3+(h-12)*400);const B=Math.max(u*1e3,5e3),J=g*1e3,se=y*1e3,O=_*1e3,A=M+F+B+J+se+O,S=A/1e3,V=A/b;let I=100;return V>200?I=400:V>150?I=200:V>100&&(I=150),{generalLighting:R,smallApplianceLoad:j,laundryLoad:z,subtotalVA:T,demandLighting:M,rangeDemand:F,dryerDemand:B,waterHeaterDemand:J,hvacDemand:se,otherDemand:O,totalDemandVA:A,totalDemandKW:S,totalAmperage:V,recommendedService:I}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem",minHeight:"2.5rem"},children:["Square",i.jsx("br",{}),"Footage",i.jsx("br",{}),"   ",i.jsx("br",{})]}),i.jsx("input",{type:"number",value:r.squareFootage,onChange:s=>e(l=>({...l,squareFootage:s.target.value})),placeholder:"Living area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Small Appliance Circuits"}),i.jsx("input",{type:"number",value:r.smallApplianceCircuits,onChange:s=>e(l=>({...l,smallApplianceCircuits:s.target.value})),placeholder:"Min 2",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"@ 1500 VA each"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Laundry Circuits ",i.jsx("br",{}),"   ",i.jsx("br",{})]}),i.jsx("input",{type:"number",value:r.laundryCircuits,onChange:s=>e(l=>({...l,laundryCircuits:s.target.value})),placeholder:"Typically 1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"@ 1500 VA"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Electric Range (kW)"}),i.jsx("input",{type:"number",value:r.rangeKW,onChange:s=>e(l=>({...l,rangeKW:s.target.value})),placeholder:"Nameplate rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Electric Dryer (kW)"}),i.jsx("input",{type:"number",value:r.dryerKW,onChange:s=>e(l=>({...l,dryerKW:s.target.value})),placeholder:"Min 5 kW",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Water Heater (kW)"}),i.jsx("input",{type:"number",value:r.waterHeaterKW,onChange:s=>e(l=>({...l,waterHeaterKW:s.target.value})),placeholder:"Rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"HVAC/Heat (kW)"}),i.jsx("input",{type:"number",value:r.hvacKW,onChange:s=>e(l=>({...l,hvacKW:s.target.value})),placeholder:"Largest load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Other Loads (kW)"}),i.jsx("input",{type:"number",value:r.otherLoadsKW,onChange:s=>e(l=>({...l,otherLoadsKW:s.target.value})),placeholder:"Pool, spa, etc",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),i.jsxs("select",{value:r.voltage,onChange:s=>e(l=>({...l,voltage:s.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"208",children:"208V"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",visibility:"hidden"},children:"placeholder"})]})]}),r.squareFootage&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Demand"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.totalDemandKW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Amperage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.totalAmperage.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"amps"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Recommended Service"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.recommendedService}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"amp service"})]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,marginBottom:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",color:t.cardText,marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Connected Loads:"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["General Lighting: ",o.generalLighting.toLocaleString()," VA"]}),i.jsxs("div",{children:["Small Appliance: ",o.smallApplianceLoad.toLocaleString()," VA"]}),i.jsxs("div",{children:["Laundry: ",o.laundryLoad.toLocaleString()," VA"]}),i.jsx("div",{style:{borderTop:`1px solid ${t.cardBorder}`,marginTop:"0.5rem",paddingTop:"0.5rem"},children:i.jsxs("strong",{children:["Subtotal: ",o.subtotalVA.toLocaleString()," VA"]})})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5",width:"100%"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Demand Loads (with factors applied):"}),i.jsxs("div",{children:["Lighting: ",o.demandLighting.toFixed(0)," VA"]}),r.rangeKW>0&&i.jsxs("div",{children:["Range: ",o.rangeDemand.toLocaleString()," W"]}),r.dryerKW>0&&i.jsxs("div",{children:["Dryer: ",o.dryerDemand.toLocaleString()," W"]}),r.waterHeaterKW>0&&i.jsxs("div",{children:["Water Heater: ",o.waterHeaterDemand.toLocaleString()," W"]}),r.hvacKW>0&&i.jsxs("div",{children:["HVAC: ",o.hvacDemand.toLocaleString()," W"]}),r.otherLoadsKW>0&&i.jsxs("div",{children:["Other: ",o.otherDemand.toLocaleString()," W"]})]})]})})]})]})},qB=({data:r,setData:e,colors:t})=>{const n={office:3.5,warehouse:.25,retail:3,school:3,restaurant:2,hotel:2,hospital:2,industrial:2},s=(()=>{const l=parseFloat(r.squareFootage)||0,d=parseFloat(r.hvacLoad)||0,h=parseFloat(r.receptacleLoad)||0,u=parseFloat(r.motorLoads)||0,g=parseFloat(r.otherLoads)||0,y=parseFloat(r.demandFactor)/100,_=parseFloat(r.voltage),b=l*n[r.occupancyType],R=b/1e3+d+h+u+g,j=R*y;let z;return r.phase==="single"?z=j*1e3/_:z=j*1e3/(1.732*_),{lightingVA:b,lightingKW:b/1e3,hvac:d,receptacles:h,motors:u,other:g,totalConnectedKW:R,demandLoadKW:j,amperage:z}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Square Footage"}),i.jsx("input",{type:"number",value:r.squareFootage,onChange:l=>e(d=>({...d,squareFootage:l.target.value})),placeholder:"Building area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Occupancy Type"}),i.jsxs("select",{value:r.occupancyType,onChange:l=>e(d=>({...d,occupancyType:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"office",children:"Office (3.5 VA/sq ft)"}),i.jsx("option",{value:"warehouse",children:"Warehouse (0.25 VA/sq ft)"}),i.jsx("option",{value:"retail",children:"Retail (3.0 VA/sq ft)"}),i.jsx("option",{value:"school",children:"School (3.0 VA/sq ft)"}),i.jsx("option",{value:"restaurant",children:"Restaurant (2.0 VA/sq ft)"}),i.jsx("option",{value:"hotel",children:"Hotel (2.0 VA/sq ft)"}),i.jsx("option",{value:"hospital",children:"Hospital (2.0 VA/sq ft)"}),i.jsx("option",{value:"industrial",children:"Industrial (2.0 VA/sq ft)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"HVAC Load (kW)"}),i.jsx("input",{type:"number",value:r.hvacLoad,onChange:l=>e(d=>({...d,hvacLoad:l.target.value})),placeholder:"Total HVAC",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Receptacle Load (kW)"}),i.jsx("input",{type:"number",value:r.receptacleLoad,onChange:l=>e(d=>({...d,receptacleLoad:l.target.value})),placeholder:"Receptacles",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Motor Loads (kW)"}),i.jsx("input",{type:"number",value:r.motorLoads,onChange:l=>e(d=>({...d,motorLoads:l.target.value})),placeholder:"Total motors",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Other Loads (kW)"}),i.jsx("input",{type:"number",value:r.otherLoads,onChange:l=>e(d=>({...d,otherLoads:l.target.value})),placeholder:"Additional",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Demand Factor (%)"}),i.jsx("input",{type:"number",value:r.demandFactor,onChange:l=>e(d=>({...d,demandFactor:l.target.value})),placeholder:"80-100%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Peak load %"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"System Voltage"}),i.jsxs("select",{value:r.voltage,onChange:l=>e(d=>({...d,voltage:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"277",children:"277V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["System",i.jsx("br",{})," Phase"]}),i.jsxs("select",{value:r.phase,onChange:l=>e(d=>({...d,phase:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]})]}),r.squareFootage&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Connected Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:s.totalConnectedKW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Demand Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:s.demandLoadKW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"kW"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Amperage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:s.amperage.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"amps"})]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,marginBottom:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",color:t.cardText,marginBottom:"0.75rem",fontSize:"0.875rem"},children:"Connected Loads:"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:t.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Lighting: ",s.lightingKW.toFixed(2)," kW (",s.lightingVA.toFixed(0)," VA)"]}),r.hvacLoad>0&&i.jsxs("div",{children:["HVAC: ",s.hvac.toFixed(2)," kW"]}),r.receptacleLoad>0&&i.jsxs("div",{children:["Receptacles: ",s.receptacles.toFixed(2)," kW"]}),r.motorLoads>0&&i.jsxs("div",{children:["Motors: ",s.motors.toFixed(2)," kW"]}),r.otherLoads>0&&i.jsxs("div",{children:["Other: ",s.other.toFixed(2)," kW"]})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"System Configuration"}),i.jsxs("div",{children:[r.voltage,"V ",r.phase==="single"?"Single":"Three"," Phase"]}),i.jsxs("div",{children:[r.demandFactor,"% demand factor applied"]})]})]})})]})]})},UB=ce.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=ce.useState("residential"),[s,l]=ce.useState({squareFootage:"",smallApplianceCircuits:"2",laundryCircuits:"1",rangeKW:"",dryerKW:"5",waterHeaterKW:"",hvacKW:"",otherLoadsKW:"",voltage:"240"}),[d,h]=ce.useState({squareFootage:"",occupancyType:"office",hvacLoad:"",receptacleLoad:"",motorLoads:"",otherLoads:"",demandFactor:"100",voltage:"480",phase:"three"}),u={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};return ce.useImperativeHandle(t,()=>({exportPDF:()=>{let g;if(n==="residential"){if(!s.squareFootage){alert("Please enter square footage before exporting");return}const y=parseFloat(s.squareFootage),_=parseFloat(s.smallApplianceCircuits)||0,b=parseFloat(s.laundryCircuits)||0,R=parseFloat(s.rangeKW)||0,j=parseFloat(s.dryerKW)||0,z=parseFloat(s.waterHeaterKW)||0,T=parseFloat(s.hvacKW)||0,M=parseFloat(s.otherLoadsKW)||0,F=parseFloat(s.voltage),B=y*3,J=_*1500,se=b*1500,O=B+J+se;let A=0;O<=3e3?A=O:O<=12e4?A=3e3+(O-3e3)*.35:A=3e3+117e3*.35+(O-12e4)*.25;let S=0;R>0&&(S=R<=12?8e3:8e3+(R-12)*400);const V=Math.max(j*1e3,5e3),I=z*1e3,w=T*1e3,N=M*1e3,W=A+S+V+I+w+N,q=(W/1e3).toFixed(2),re=(W/F).toFixed(1);let Z=100;parseFloat(re)>200?Z=400:parseFloat(re)>150?Z=200:parseFloat(re)>100&&(Z=150);const te={squareFootage:`${s.squareFootage} sq ft`,smallApplianceCircuits:`${_} circuits @ 1500 VA each`,laundryCircuits:`${b} circuit @ 1500 VA`,serviceVoltage:`${s.voltage}V`};R>0&&(te.electricRange=`${R} kW`),j>0&&(te.electricDryer=`${j} kW`),z>0&&(te.waterHeater=`${z} kW`),T>0&&(te.hvacHeat=`${T} kW`),M>0&&(te.otherLoads=`${M} kW`),g={calculatorName:"Load Calculations - Residential (NEC 220.82)",inputs:te,results:{totalDemandLoad:`${q} kW (${W.toLocaleString()} VA)`,totalAmperage:`${re} Amps`,recommendedService:`${Z} Amp Service`},additionalInfo:{generalLighting:`${B.toLocaleString()} VA (${y} sq ft × 3 VA/sq ft)`,smallAppliance:`${J.toLocaleString()} VA`,laundry:`${se.toLocaleString()} VA`,lightingSubtotal:`${O.toLocaleString()} VA`,demandLightingAfterFactors:`${A.toFixed(0)} VA`,...R>0&&{rangeDemand:`${S.toLocaleString()} W`},...j>0&&{dryerDemand:`${V.toLocaleString()} W (min 5000 W)`},...z>0&&{waterHeaterDemand:`${I.toLocaleString()} W`},...T>0&&{hvacDemand:`${w.toLocaleString()} W`},...M>0&&{otherDemand:`${N.toLocaleString()} W`}},necReferences:["NEC 220.82 - Dwelling Unit Optional Calculation","NEC 220.83 - Existing Dwelling Unit","NEC Table 220.55 - Demand Factors for Electric Ranges","General lighting: 3 VA per square foot (NEC 220.12)","Demand factors: First 3000 VA @ 100%, Next 117000 VA @ 35%, Remainder @ 25%"]}}else if(n==="commercial"){if(!d.squareFootage){alert("Please enter square footage before exporting");return}const y={office:3.5,warehouse:.25,retail:3,school:3,restaurant:2,hotel:2,hospital:2,industrial:2},_={office:"Office",warehouse:"Warehouse",retail:"Retail",school:"School",restaurant:"Restaurant",hotel:"Hotel",hospital:"Hospital",industrial:"Industrial"},b=parseFloat(d.squareFootage),R=parseFloat(d.hvacLoad)||0,j=parseFloat(d.receptacleLoad)||0,z=parseFloat(d.motorLoads)||0,T=parseFloat(d.otherLoads)||0,M=parseFloat(d.demandFactor)/100,F=parseFloat(d.voltage),B=b*y[d.occupancyType],J=(B/1e3).toFixed(2),se=(B/1e3+R+j+z+T).toFixed(2),O=(parseFloat(se)*M).toFixed(2);let A;d.phase==="single"?A=(parseFloat(O)*1e3/F).toFixed(1):A=(parseFloat(O)*1e3/(1.732*F)).toFixed(1);const S={squareFootage:`${d.squareFootage} sq ft`,occupancyType:`${_[d.occupancyType]} (${y[d.occupancyType]} VA/sq ft)`,demandFactor:`${d.demandFactor}%`,systemConfiguration:`${d.voltage}V ${d.phase==="single"?"Single":"Three"} Phase`};R>0&&(S.hvacLoad=`${R} kW`),j>0&&(S.receptacleLoad=`${j} kW`),z>0&&(S.motorLoads=`${z} kW`),T>0&&(S.otherLoads=`${T} kW`),g={calculatorName:"Load Calculations - Commercial",inputs:S,results:{connectedLoad:`${se} kW`,demandLoad:`${O} kW`,totalAmperage:`${A} Amps`},additionalInfo:{lighting:`${J} kW (${B.toFixed(0)} VA)`,calculationMethod:d.phase==="single"?`Amperage = (${O} kW × 1000) ÷ ${F}V = ${A} A`:`Amperage = (${O} kW × 1000) ÷ (1.732 × ${F}V) = ${A} A`,demandFactorNote:`${d.demandFactor}% demand factor applied to total connected load`},necReferences:["NEC Article 220 - Branch-Circuit, Feeder, and Service Load Calculations","NEC Table 220.12 - General Lighting Loads by Occupancy","NEC 220.42 - General Lighting","NEC 220.50 - Motors","Always verify with actual connected loads and local codes"]}}Yr(g)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"residential",label:"Residential"},{id:"commercial",label:"Commercial"}].map(g=>i.jsx("button",{onClick:()=>o(g.id),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.625rem 1rem",background:n===g.id?"#3b82f6":u.sectionBg,color:n===g.id?"white":u.labelText,border:`1px solid ${n===g.id?"#3b82f6":u.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:g.label},g.id))}),i.jsx("div",{style:{background:u.cardBg,border:`1px solid ${u.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:n==="residential"?i.jsx($B,{data:s,setData:l,colors:u}):i.jsx(qB,{data:d,setData:h,colors:u})})]})}),HB=ce.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=ce.useState("sizing"),[o,s]=ce.useState(""),[l,d]=ce.useState("480"),[h,u]=ce.useState("208"),[g,y]=ce.useState("three"),[_,b]=ce.useState("continuous"),[R,j]=ce.useState("0.85"),[z,T]=ce.useState(""),[M,F]=ce.useState("480"),[B,J]=ce.useState("208"),[se,O]=ce.useState("three"),A={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},S=[3,6,9,15,30,45,75,112.5,150,225,300,500,750,1e3,1500,2e3,2500,3e3],V=()=>{const W=parseFloat(o)||0;if(W===0)return null;let q=1;_==="continuous"&&(q=1.25);const re=W*q,Z=S.find(te=>te>=re)||re;return{loadKVA:W,requiredKVA:re.toFixed(1),recommendedSize:Z,utilizationPercent:(W/Z*100).toFixed(1)}},I=()=>{const W=parseFloat(z)||0;if(W===0)return null;const q=parseFloat(M),re=parseFloat(B);let Z,te;return se==="single"?(Z=W*1e3/q,te=W*1e3/re):(Z=W*1e3/(1.732*q),te=W*1e3/(1.732*re)),{kva:W,primaryCurrent:Z.toFixed(1),secondaryCurrent:te.toFixed(1),primaryVoltage:q,secondaryVoltage:re}},w=V(),N=I();return ce.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="sizing"){if(!o){alert("Please enter load (kVA) before exporting to PDF");return}const W={calculatorName:"Transformer Calculations - Transformer Sizing",inputs:{Load:`${o} kVA`,"Primary Voltage":`${l}V`,"Secondary Voltage":`${h}V`,Phase:g==="single"?"Single Phase":"Three Phase","Load Type":_==="continuous"?"Continuous (125% sizing)":"Non-Continuous (100% sizing)","Power Factor":R},results:{"Recommended Transformer Size":`${w.recommendedSize} kVA`,Configuration:`${l}V to ${h}V`,Phase:g==="single"?"Single Phase":"Three Phase","Connected Load":`${w.loadKVA} kVA`,"Required Capacity":`${w.requiredKVA} kVA`,Utilization:`${w.utilizationPercent}%`},additionalInfo:{"Sizing Factor":_==="continuous"?"125% (continuous loads)":"100% (non-continuous loads)","Calculation Method":"Required Capacity = Connected Load × Sizing Factor","Utilization Note":parseFloat(w.utilizationPercent)>80?"WARNING: Utilization above 80% may result in higher operating temperatures and reduced equipment life":"Utilization is within acceptable range"},necReferences:["NEC 450.3 - Overcurrent Protection for Transformers","NEC 450.9 - Ventilation Requirements","NEC 450.11 - Marking Requirements","NEC 450.21 - Dry-Type Transformers Installed Indoors","Size continuous loads at 125% per NEC requirements","Keep utilization below 80% for optimal efficiency and equipment life","Consider future load growth (typically 20-25% spare capacity)","Account for inrush current for motor loads","Consider ambient temperature and ventilation requirements"]};Yr(W)}else if(t==="currents"){if(!z){alert("Please enter transformer rating (kVA) before exporting to PDF");return}const W=se==="single"?"I = (kVA × 1000) ÷ V":"I = (kVA × 1000) ÷ (1.732 × V)",q={calculatorName:"Transformer Calculations - Current Calculations",inputs:{"Transformer Rating":`${z} kVA`,"Primary Voltage":`${M}V`,"Secondary Voltage":`${B}V`,Phase:se==="single"?"Single Phase":"Three Phase"},results:{Configuration:`${N.kva} kVA, ${se==="single"?"Single":"Three"} Phase`,"Voltage Ratio":`${N.primaryVoltage}V / ${N.secondaryVoltage}V`,"Primary Current":`${N.primaryCurrent} A`,"Secondary Current":`${N.secondaryCurrent} A`},additionalInfo:{"Formula Used":W,"Primary Side":`${N.primaryCurrent}A at ${N.primaryVoltage}V`,"Secondary Side":`${N.secondaryCurrent}A at ${N.secondaryVoltage}V`,Application:"Use these currents for selecting primary and secondary protection devices per NEC Article 450"},necReferences:["NEC Article 450 - Transformers and Transformer Vaults","NEC 450.3 - Overcurrent Protection","Single Phase Formula: I = (kVA × 1000) ÷ V","Three Phase Formula: I = (kVA × 1000) ÷ (1.732 × V)","Primary and secondary protection must be sized per calculated currents","Consider temperature correction and adjustment factors for conductors","Account for voltage drop in feeder calculations"]};Yr(q)}}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>n("sizing"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="sizing"?"#3b82f6":"transparent",color:t==="sizing"?"white":A.labelText,border:`1px solid ${t==="sizing"?"#3b82f6":A.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Transformer Sizing"}),i.jsx("button",{onClick:()=>n("currents"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="currents"?"#3b82f6":"transparent",color:t==="currents"?"white":A.labelText,border:`1px solid ${t==="currents"?"#3b82f6":A.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Current Calculations"})]})}),t==="sizing"?i.jsxs("div",{children:[i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${A.cardBorder}`,paddingBottom:"0.5rem"},children:"Transformer Parameters"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Load (kVA)"}),i.jsx("input",{type:"number",value:o,onChange:W=>s(W.target.value),placeholder:"Connected load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:A.subtleText,marginTop:"0.25rem"},children:"Total connected or demand load"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Primary Voltage"}),i.jsxs("select",{value:l,onChange:W=>d(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"}),i.jsx("option",{value:"2400",children:"2400V"}),i.jsx("option",{value:"4160",children:"4160V"}),i.jsx("option",{value:"12470",children:"12470V"}),i.jsx("option",{value:"13200",children:"13200V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Secondary Voltage"}),i.jsxs("select",{value:h,onChange:W=>u(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"120",children:"120V"}),i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"277",children:"277V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Phase"}),i.jsxs("select",{value:g,onChange:W=>y(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Load Type"}),i.jsxs("select",{value:_,onChange:W=>b(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"continuous",children:"Continuous (125% sizing)"}),i.jsx("option",{value:"noncontinuous",children:"Non-Continuous (100% sizing)"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:A.subtleText,marginTop:"0.25rem"},children:"Continuous loads operate 3+ hours"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),i.jsxs("select",{value:R,onChange:W=>j(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"1.0",children:"1.0 (Unity)"}),i.jsx("option",{value:"0.95",children:"0.95 (Excellent)"}),i.jsx("option",{value:"0.9",children:"0.9 (Good)"}),i.jsx("option",{value:"0.85",children:"0.85 (Typical)"}),i.jsx("option",{value:"0.8",children:"0.8 (Poor)"})]})]})]})]}),w&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem"},children:"Sizing Calculation"}),i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${A.cardBorder}`},children:[i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:A.labelText},children:[i.jsx("strong",{style:{color:A.cardText},children:"Connected Load:"})," ",w.loadKVA," kVA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:A.labelText},children:[i.jsx("strong",{style:{color:A.cardText},children:"Required Capacity:"})," ",w.requiredKVA," kVA"]}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:A.subtleText,fontStyle:"italic"},children:["(",_==="continuous"?"125%":"100%"," sizing factor applied)"]})]})]}),i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem"},children:"Recommended Transformer"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Transformer Size"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[w.recommendedSize," kVA"]})]}),i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${A.cardBorder}`,marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:A.labelText,marginBottom:"0.5rem"},children:[i.jsx("strong",{style:{color:A.cardText},children:"Configuration:"})," ",l,"V to ",h,"V"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:A.labelText},children:[i.jsx("strong",{style:{color:A.cardText},children:"Phase:"})," ",g==="single"?"Single":"Three"," Phase"]})]}),i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:A.labelText,marginBottom:"0.25rem"},children:"Utilization"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:A.cardText},children:[w.utilizationPercent,"%"]})]})]}),parseFloat(w.utilizationPercent)>80&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Us,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"High Utilization Warning"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Transformer utilization above 80% may result in higher operating temperatures and reduced equipment life. Consider next size up for better efficiency."})]})]})})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Gi,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Transformer Sizing Guidelines:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Size for continuous loads at 125% per NEC 450.3"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider future load growth (typically 20-25%)"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Keep utilization below 80% for optimal efficiency"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Account for inrush current for motor loads"}),i.jsx("li",{children:"Consider ambient temperature and ventilation"})]})]})]})})]}):i.jsxs("div",{children:[i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${A.cardBorder}`,paddingBottom:"0.5rem"},children:"Transformer Information"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Transformer Rating (kVA)"}),i.jsx("input",{type:"number",value:z,onChange:W=>T(W.target.value),placeholder:"Transformer kVA",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Primary Voltage"}),i.jsxs("select",{value:M,onChange:W=>F(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"}),i.jsx("option",{value:"2400",children:"2400V"}),i.jsx("option",{value:"4160",children:"4160V"}),i.jsx("option",{value:"12470",children:"12470V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Secondary Voltage"}),i.jsxs("select",{value:B,onChange:W=>J(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"120",children:"120V"}),i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"277",children:"277V"}),i.jsx("option",{value:"480",children:"480V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:A.labelText,marginBottom:"0.5rem"},children:"Phase"}),i.jsxs("select",{value:se,onChange:W=>O(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${A.inputBorder}`,borderRadius:"8px",backgroundColor:A.inputBg,color:A.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]})]})]}),N&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:A.cardText,marginTop:0,marginBottom:"1rem"},children:"Transformer Configuration"}),i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${A.cardBorder}`},children:[i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:A.labelText},children:[i.jsx("strong",{style:{color:A.cardText},children:"Rating:"})," ",N.kva," kVA, ",se==="single"?"Single":"Three"," Phase"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:A.labelText},children:[i.jsx("strong",{style:{color:A.cardText},children:"Configuration:"})," ",N.primaryVoltage,"V / ",N.secondaryVoltage,"V"]})]})]}),i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#1e40af",marginTop:0,marginBottom:"1rem"},children:"Primary Side"}),i.jsx("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${A.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:A.labelText},children:[i.jsx("strong",{style:{color:A.cardText},children:"Voltage:"})," ",N.primaryVoltage,"V"]})}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Primary Current"}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:N.primaryCurrent}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),i.jsxs("div",{style:{background:A.cardBg,border:`1px solid ${A.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#059669",marginTop:0,marginBottom:"1rem"},children:"Secondary Side"}),i.jsx("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${A.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:A.labelText},children:[i.jsx("strong",{style:{color:A.cardText},children:"Voltage:"})," ",N.secondaryVoltage,"V"]})}),i.jsxs("div",{style:{background:"#d1fae5",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#059669",marginBottom:"0.25rem"},children:"Secondary Current"}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#059669"},children:N.secondaryCurrent}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#059669",marginTop:"0.25rem"},children:"Amperes"})]})]})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Gi,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Current Formulas:"}),i.jsxs("div",{style:{fontSize:"0.8125rem",marginBottom:"0.25rem"},children:[i.jsx("strong",{children:"Single Phase:"})," I = (kVA × 1000) ÷ V"]}),i.jsxs("div",{style:{fontSize:"0.8125rem",marginBottom:"0.5rem"},children:[i.jsx("strong",{children:"Three Phase:"})," I = (kVA × 1000) ÷ (1.732 × V)"]}),i.jsx("div",{style:{fontSize:"0.75rem",fontStyle:"italic"},children:"Note: Use these currents for selecting primary and secondary protection devices per NEC Article 450."})]})]})})]}),i.jsxs("div",{style:{background:A.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${A.cardBorder}`,fontSize:"0.8125rem",color:A.labelText,marginTop:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:A.cardText},children:"NEC Article 450 - Transformers and Transformer Vaults:"}),"450.3: Overcurrent protection • 450.9: Ventilation requirements • 450.11: Marking • 450.21: Dry-type transformers indoors"]})]})}),GB=ce.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=ce.useState("residential"),[o,s]=ce.useState(""),[l,d]=ce.useState(""),[h,u]=ce.useState(""),[g,y]=ce.useState(""),[_,b]=ce.useState(""),[R,j]=ce.useState(""),[z,T]=ce.useState("240"),[M,F]=ce.useState(""),[B,J]=ce.useState("80"),[se,O]=ce.useState("480"),[A,S]=ce.useState("three"),[V,I]=ce.useState("25"),w={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},N=()=>{const Z=parseFloat(o)||0,te=parseFloat(l)||0,ye=parseFloat(h)||0,we=parseFloat(g)||0,ie=parseFloat(_)||0,$=parseFloat(R)||0,Y=parseFloat(z),ae=Z*3,fe=2*1500,me=1500,Se=ae+fe+me;let ke=0;Se<=3e3?ke=Se:ke=3e3+(Se-3e3)*.35;let Ae=0;we>0&&(we<=12e3?Ae=8e3:Ae=8e3+(we-12e3)*.05);const Fe=Math.max(ie,5e3),He=ye,Ze=te,Xe=$,ge=ke+Ae+Fe+He+Ze+Xe,le=ge/Y;let at=100;return le>200?at=400:le>150?at=200:le>100&&(at=150),{generalLighting:ae,smallAppliance:fe,laundry:me,subtotal:Se,demandLighting:ke,rangeDemand:Ae,dryerDemand:Fe,whDemand:He,hvacDemand:Ze,otherDemand:Xe,totalDemand:ge,totalAmperage:le,recommendedService:at,conductorSize:{100:"4 AWG",150:"1/0 AWG",200:"2/0 AWG",400:"400 kcmil"}[at]}},W=()=>{const Z=parseFloat(M)||0,te=parseFloat(B)/100,ye=parseFloat(V)/100,we=parseFloat(se),ie=Z*te,$=ie*(1+ye);let Y;A==="single"?Y=$*1e3/we:Y=$*1e3/(1.732*we);const fe=[100,150,200,225,400,600,800,1e3,1200,1600,2e3,2500,3e3,4e3].find(me=>me>=Y)||Math.ceil(Y/100)*100;return{connectedLoad:Z,demandLoad:ie,futureLoad:$,amperage:Y,recommendedService:fe}},q=N(),re=W();return ce.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="residential"){if(!o){alert("Please enter square footage before exporting to PDF");return}const Z={calculatorName:"Service Entrance Sizing - Residential",inputs:{"Square Footage":`${o} sq ft`,"HVAC/Heat Load":l?`${l} W`:"Not specified","Water Heater":h?`${h} W`:"Not specified","Range/Oven":g?`${g} W`:"Not specified",Dryer:_?`${_} W`:"Not specified","Other Loads":R?`${R} W`:"Not specified","Service Voltage":`${z}V`},results:{"Recommended Service Size":`${q.recommendedService}A`,"Service Conductors":`${q.conductorSize} Copper`,"Total Demand Load":`${q.totalDemand.toFixed(0)} W`,"Calculated Amperage":`${q.totalAmperage.toFixed(1)} A`},additionalInfo:{"General Lighting Load":`${q.generalLighting.toLocaleString()} VA`,"Small Appliance Circuits":`${q.smallAppliance.toLocaleString()} VA`,"Laundry Circuit":`${q.laundry.toLocaleString()} VA`,"Lighting Demand (after factors)":`${q.demandLighting.toFixed(0)} W`,"Range Demand":g?`${q.rangeDemand.toFixed(0)} W`:"N/A","Dryer Demand":_?`${q.dryerDemand.toFixed(0)} W`:"N/A","Water Heater":h?`${q.whDemand.toFixed(0)} W`:"N/A",HVAC:l?`${q.hvacDemand.toFixed(0)} W`:"N/A","Calculation Method":"NEC Article 220.82 - Dwelling Unit Optional Calculation"},necReferences:["NEC 220.82 - Dwelling Unit Optional Calculation","NEC 230.42 - Minimum Size and Rating (service conductors)","NEC 230.79 - Rating of Service Disconnecting Means","NEC 230.90 - Where Required (overload protection)","NEC Table 310.15(B)(16) - Allowable Ampacities","Service conductors shown are approximate for 75°C copper. Consult NEC for exact sizing with all derating factors."]};Yr(Z)}else if(t==="commercial"){if(!M){alert("Please enter total connected load before exporting to PDF");return}const Z={calculatorName:"Service Entrance Sizing - Commercial",inputs:{"Total Connected Load":`${M} kW`,"Demand Factor":`${B}%`,"Future Expansion":`${V}%`,"Service Voltage":`${se}V`,"System Phase":A==="single"?"Single Phase":"Three Phase"},results:{"Recommended Service Size":`${re.recommendedService}A`,"System Configuration":`${se}V ${A==="single"?"Single":"Three"} Phase`,"Connected Load":`${re.connectedLoad.toFixed(1)} kW`,"Demand Load":`${re.demandLoad.toFixed(1)} kW`,"With Future Expansion":`${re.futureLoad.toFixed(1)} kW`,"Calculated Amperage":`${re.amperage.toFixed(1)} A`},additionalInfo:{"Calculation Method":"Commercial demand calculation with future expansion factor","Demand Factor Applied":`${B}% of connected load`,"Future Growth Allowance":`${V}% spare capacity`,"Formula Used":A==="single"?"Amperage = (kW × 1000) / Voltage":"Amperage = (kW × 1000) / (1.732 × Voltage)"},necReferences:["NEC Article 220 Part IV - Optional Feeder and Service Load Calculations","NEC 220.40 - General (demand factors)","NEC 230.42 - Minimum Size and Rating","NEC 230.79 - Rating of Service Disconnecting Means","Consider demand factors per NEC 220.40 and Article 220 Part IV","Include motor loads, HVAC, and large equipment per NEC requirements","Review utility requirements and available fault current","Future expansion typically 20-30% spare capacity"]};Yr(Z)}}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>n("residential"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="residential"?"#3b82f6":"transparent",color:t==="residential"?"white":w.labelText,border:`1px solid ${t==="residential"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Residential"}),i.jsx("button",{onClick:()=>n("commercial"),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.75rem 1rem",background:t==="commercial"?"#3b82f6":"transparent",color:t==="commercial"?"white":w.labelText,border:`1px solid ${t==="commercial"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Commercial"})]})}),t==="residential"?i.jsxs("div",{children:[i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Information"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Square Footage"}),i.jsx("input",{type:"number",value:o,onChange:Z=>s(Z.target.value),placeholder:"Living area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Heated/cooled living space"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"HVAC/Heat Load (Watts)"}),i.jsx("input",{type:"number",value:l,onChange:Z=>d(Z.target.value),placeholder:"Largest load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Water Heater (Watts)"}),i.jsx("input",{type:"number",value:h,onChange:Z=>u(Z.target.value),placeholder:"Nameplate rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Range/Oven (Watts)"}),i.jsx("input",{type:"number",value:g,onChange:Z=>y(Z.target.value),placeholder:"Electric range",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Dryer (Watts)"}),i.jsx("input",{type:"number",value:_,onChange:Z=>b(Z.target.value),placeholder:"Electric dryer",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Minimum 5000W if electric"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Other Loads (Watts)"}),i.jsx("input",{type:"number",value:R,onChange:Z=>j(Z.target.value),placeholder:"Pool, spa, etc.",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),i.jsxs("select",{value:z,onChange:Z=>T(Z.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"208",children:"208V"})]})]})]})]}),o&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Breakdown"}),i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",marginBottom:"1rem",border:`1px solid ${w.cardBorder}`},children:[i.jsx("strong",{style:{display:"block",marginBottom:"0.5rem",color:w.cardText,fontSize:"0.875rem"},children:"Connected Loads:"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["General Lighting: ",q.generalLighting.toLocaleString()," VA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Small Appliance: ",q.smallAppliance.toLocaleString()," VA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.5rem"},children:["Laundry: ",q.laundry.toLocaleString()," VA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:w.subtleText,paddingTop:"0.5rem",borderTop:`1px solid ${w.cardBorder}`},children:["Subtotal: ",q.subtotal.toLocaleString()," VA"]})]}),i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[i.jsx("strong",{style:{display:"block",marginBottom:"0.5rem",color:w.cardText,fontSize:"0.875rem"},children:"Demand Loads (after factors):"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Lighting: ",q.demandLighting.toFixed(0)," W"]}),g&&i.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Range: ",q.rangeDemand.toFixed(0)," W"]}),_&&i.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Dryer: ",q.dryerDemand.toFixed(0)," W"]}),h&&i.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["Water Heater: ",q.whDemand.toFixed(0)," W"]}),l&&i.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.25rem"},children:["HVAC: ",q.hvacDemand.toFixed(0)," W"]}),R&&i.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText},children:["Other: ",q.otherDemand.toFixed(0)," W"]})]})]}),i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Service Sizing Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Total Demand Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:q.totalDemand.toFixed(0)}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"Watts"})]}),i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Calculated Amperage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:q.totalAmperage.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"Amperes"})]})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Recommended Service Size"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[q.recommendedService,"A"]})]}),i.jsx("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center",border:`1px solid ${w.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText},children:[i.jsx("strong",{style:{color:w.cardText},children:"Service Conductors:"})," ",q.conductorSize," Copper"]})})]})]}),i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Gi,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Important Notes:"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Service conductors are approximate for 75°C copper. Consult NEC Table 310.15(B)(16) for exact sizing with all derating factors."})]})]})})]}):i.jsxs("div",{children:[i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Load Information"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Total Connected Load (kW)"}),i.jsx("input",{type:"number",value:M,onChange:Z=>F(Z.target.value),placeholder:"Total building load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Demand Factor (%)"}),i.jsx("input",{type:"number",value:B,onChange:Z=>J(Z.target.value),placeholder:"Typically 70-90%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Peak demand percentage"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Future Expansion (%)"}),i.jsx("input",{type:"number",value:V,onChange:Z=>I(Z.target.value),placeholder:"Typically 20-30%",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Spare capacity for growth"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Service Voltage"}),i.jsxs("select",{value:se,onChange:Z=>O(Z.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"System Phase"}),i.jsxs("select",{value:A,onChange:Z=>S(Z.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single",children:"Single Phase"}),i.jsx("option",{value:"three",children:"Three Phase"})]})]})]})]}),M&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Load Calculation"}),i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`,marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:w.labelText},children:[i.jsx("strong",{style:{color:w.cardText},children:"Connected Load:"})," ",re.connectedLoad.toFixed(1)," kW"]}),i.jsxs("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem",color:w.labelText},children:[i.jsxs("strong",{style:{color:w.cardText},children:["Demand Load (",B,"%):"]})," ",re.demandLoad.toFixed(1)," kW"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText},children:[i.jsxs("strong",{style:{color:w.cardText},children:["With Future Expansion (",V,"%):"]})," ",re.futureLoad.toFixed(1)," kW"]})]}),i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Calculated Amperage"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:re.amperage.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"Amperes"})]})]}),i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Recommended Service"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"Service Size"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:[re.recommendedService,"A"]})]}),i.jsx("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center",border:`1px solid ${w.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText},children:["@ ",se,"V ",A==="single"?"Single":"Three"," Phase"]})})]})]}),i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Gi,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Commercial Service Considerations:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Include demand factors per NEC 220.40 and Article 220 Part IV"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider future expansion (typically 20-30% spare capacity)"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Account for motor loads, HVAC, and large equipment"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Review utility requirements and available fault current"}),i.jsx("li",{children:"Consider separate services for different occupancies"})]})]})]})})]}),i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`,fontSize:"0.8125rem",color:w.labelText,marginTop:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:w.cardText},children:"NEC Article 230 - Services and Service Equipment:"}),"220.82: Dwelling unit optional calculation • 230.42: Minimum conductor size • 230.79: Disconnecting means rating • 230.90: Overload protection"]})]})}),KB=({gecData:r,setGecData:e,colors:t})=>{const n={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}},s=(()=>{if(!r.serviceSize)return null;const l=r.serviceSize;let d="";const h=["14","12","10","8","6","4","3","2","1"],u=["1/0","2/0","3/0","4/0"],g=parseInt(l);return h.includes(l)?parseInt(l)>=2?d="2 or smaller":l==="1"&&(d="1 or 1/0"):u.includes(l)?l==="1/0"?d="1 or 1/0":l==="2/0"||l==="3/0"?d="2/0 or 3/0":l==="4/0"&&(d="4/0 to 350"):isNaN(g)||(g>=250&&g<=350?d="4/0 to 350":g>=400&&g<=600?d="400 to 600":g>=650&&g<=1100?d="650 to 1100":g>1100&&(d="over 1100")),{serviceSize:l,category:d,gecSize:n[r.conductorMaterial][d]||"N/A"}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Service Conductor Size"}),i.jsxs("select",{value:r.serviceSize,onChange:l=>e(d=>({...d,serviceSize:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"",children:"Select Size"}),i.jsx("option",{value:"8",children:"8 AWG"}),i.jsx("option",{value:"6",children:"6 AWG"}),i.jsx("option",{value:"4",children:"4 AWG"}),i.jsx("option",{value:"2",children:"2 AWG"}),i.jsx("option",{value:"1",children:"1 AWG"}),i.jsx("option",{value:"1/0",children:"1/0 AWG"}),i.jsx("option",{value:"2/0",children:"2/0 AWG"}),i.jsx("option",{value:"3/0",children:"3/0 AWG"}),i.jsx("option",{value:"4/0",children:"4/0 AWG"}),i.jsx("option",{value:"250",children:"250 kcmil"}),i.jsx("option",{value:"350",children:"350 kcmil"}),i.jsx("option",{value:"500",children:"500 kcmil"}),i.jsx("option",{value:"750",children:"750 kcmil"}),i.jsx("option",{value:"1000",children:"1000 kcmil"}),i.jsx("option",{value:"1500",children:"1500 kcmil"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Largest ungrounded service conductor"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"GEC Material"}),i.jsxs("select",{value:r.conductorMaterial,onChange:l=>e(d=>({...d,conductorMaterial:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"copper",children:"Copper"}),i.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]}),s&&s.gecSize!=="N/A"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Grounding Electrode Conductor"}),i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[s.gecSize," AWG"]}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Per NEC Table 250.66"}),i.jsxs("div",{children:["Service conductor: ",s.serviceSize," AWG ",r.conductorMaterial]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Important Notes:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"GEC to rod/pipe/plate need not be larger than 6 AWG copper"}),i.jsx("li",{children:"GEC to concrete-encased electrode need not be larger than 4 AWG copper"}),i.jsx("li",{children:"Must be continuous without splices (except as permitted)"})]})]})]})]})},JB=({egcData:r,setEgcData:e,colors:t})=>{const n={copper:{15:"14",20:"12",30:"10",40:"10",60:"10",100:"8",200:"6",300:"4",400:"3",500:"2",600:"1",800:"1/0",1e3:"2/0",1200:"3/0",1600:"4/0",2e3:"250",2500:"350",3e3:"400",4e3:"500",5e3:"700",6e3:"800"},aluminum:{15:"12",20:"10",30:"8",40:"8",60:"8",100:"6",200:"4",300:"2",400:"1",500:"1/0",600:"2/0",800:"3/0",1e3:"4/0",1200:"250",1600:"350",2e3:"400",2500:"500",3e3:"600",4e3:"750",5e3:"1000",6e3:"1200"}},s=(()=>{const l=parseInt(r.ocpdRating);if(!l)return null;const d=Object.keys(n[r.conductorMaterial]).map(Number).sort((u,g)=>u-g),h=d.find(u=>u>=l)||d[d.length-1];return{ocpdRating:l,applicableRating:h,egcSize:n[r.conductorMaterial][h]}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Overcurrent Device Rating (A)"}),i.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:r.ocpdRating,onChange:l=>{const d=l.target.value.replace(/[^0-9]/g,"");e(h=>({...h,ocpdRating:d}))},placeholder:"Enter rating",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Circuit breaker or fuse rating"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["EGC Material ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsxs("select",{value:r.conductorMaterial,onChange:l=>e(d=>({...d,conductorMaterial:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"copper",children:"Copper"}),i.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]}),s&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Equipment Grounding Conductor"}),i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[s.egcSize," AWG"]}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Per NEC Table 250.122"}),i.jsxs("div",{children:["OCPD rating: ",s.ocpdRating,"A"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Important Notes:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Increase proportionally if conductors upsized for voltage drop"}),i.jsx("li",{children:"Size per each raceway if conductors run in parallel"}),i.jsx("li",{children:"Based on rating of OCPD ahead of circuit"})]})]})]})]})},YB=({bondingData:r,setBondingData:e,colors:t})=>{const n={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}},s=(()=>{if(!r.serviceSize)return null;const l=r.serviceSize;let d="";const h=["14","12","10","8","6","4","3","2","1"],u=["1/0","2/0","3/0","4/0"],g=parseInt(l);return h.includes(l)?parseInt(l)>=2?d="2 or smaller":l==="1"&&(d="1 or 1/0"):u.includes(l)?l==="1/0"?d="1 or 1/0":l==="2/0"||l==="3/0"?d="2/0 or 3/0":l==="4/0"&&(d="4/0 to 350"):isNaN(g)||(g>=250&&g<=350?d="4/0 to 350":g>=400&&g<=600?d="400 to 600":g>=650&&g<=1100?d="650 to 1100":g>1100&&(d="over 1100")),{serviceSize:l,jumperSize:n[r.conductorMaterial][d]||"N/A",jumperType:r.jumperType}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Bonding Jumper Type"}),i.jsxs("select",{value:r.jumperType,onChange:l=>e(d=>({...d,jumperType:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"main",children:"Main Bonding Jumper (Service)"}),i.jsx("option",{value:"system",children:"System Bonding Jumper (Separately Derived)"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Conductor Size"}),i.jsxs("select",{value:r.serviceSize,onChange:l=>e(d=>({...d,serviceSize:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"",children:"Select Size"}),i.jsx("option",{value:"8",children:"8 AWG"}),i.jsx("option",{value:"6",children:"6 AWG"}),i.jsx("option",{value:"4",children:"4 AWG"}),i.jsx("option",{value:"2",children:"2 AWG"}),i.jsx("option",{value:"1",children:"1 AWG"}),i.jsx("option",{value:"1/0",children:"1/0 AWG"}),i.jsx("option",{value:"2/0",children:"2/0 AWG"}),i.jsx("option",{value:"3/0",children:"3/0 AWG"}),i.jsx("option",{value:"4/0",children:"4/0 AWG"}),i.jsx("option",{value:"250",children:"250 kcmil"}),i.jsx("option",{value:"500",children:"500 kcmil"}),i.jsx("option",{value:"750",children:"750 kcmil"}),i.jsx("option",{value:"1000",children:"1000 kcmil"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Material"}),i.jsxs("select",{value:r.conductorMaterial,onChange:l=>e(d=>({...d,conductorMaterial:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"copper",children:"Copper"}),i.jsx("option",{value:"aluminum",children:"Aluminum"})]})]})]})]}),s&&s.jumperSize!=="N/A"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:[r.jumperType==="main"?"Main":"System"," Bonding Jumper"]}),i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af"},children:[s.jumperSize," AWG"]}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:r.conductorMaterial.charAt(0).toUpperCase()+r.conductorMaterial.slice(1)})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:["Per NEC ",r.jumperType==="main"?"250.28(D)":"250.30(A)(1)"]}),i.jsxs("div",{children:["Conductor size: ",s.serviceSize," AWG ",r.conductorMaterial]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:[r.jumperType==="main"?"Main":"System"," Bonding Jumper Requirements:"]}),i.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:r.jumperType==="main"?i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Connects grounded conductor to equipment grounding conductor"}),i.jsx("li",{children:"Sized per Table 250.66 based on service conductor"}),i.jsx("li",{children:"Can be wire, bus, screw, or similar conductor"})]}):i.jsxs(i.Fragment,{children:[i.jsx("li",{children:"Required for separately derived systems"}),i.jsx("li",{children:"Connects grounded to equipment grounding conductor"}),i.jsx("li",{children:"Installed at same location as GEC connection"})]})})]})]})]})},QB=ce.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=ce.useState("gec"),[s,l]=ce.useState({serviceSize:"",conductorMaterial:"copper"}),[d,h]=ce.useState({ocpdRating:"",conductorMaterial:"copper"}),[u,g]=ce.useState({serviceSize:"",conductorMaterial:"copper",jumperType:"main"}),y=ce.useMemo(()=>({cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"}),[r]);return ce.useImperativeHandle(t,()=>({exportPDF:()=>{let _;if(n==="gec"){if(!s.serviceSize){alert("Please select a service conductor size before exporting");return}const b={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}};let R="";const j=s.serviceSize,z=["14","12","10","8","6","4","3","2","1"],T=["1/0","2/0","3/0","4/0"],M=parseInt(j);z.includes(j)?parseInt(j)>=2?R="2 or smaller":j==="1"&&(R="1 or 1/0"):T.includes(j)?j==="1/0"?R="1 or 1/0":j==="2/0"||j==="3/0"?R="2/0 or 3/0":j==="4/0"&&(R="4/0 to 350"):isNaN(M)||(M>=250&&M<=350?R="4/0 to 350":M>=400&&M<=600?R="400 to 600":M>=650&&M<=1100?R="650 to 1100":M>1100&&(R="over 1100"));const F=b[s.conductorMaterial][R];_={calculatorName:"Grounding & Bonding - Grounding Electrode Conductor",inputs:{serviceConductorSize:`${s.serviceSize} AWG`,material:s.conductorMaterial.charAt(0).toUpperCase()+s.conductorMaterial.slice(1)},results:{groundingElectrodeConductor:`${F} AWG ${s.conductorMaterial}`},additionalInfo:{note1:"GEC to rod/pipe/plate need not be larger than 6 AWG copper",note2:"GEC to concrete-encased electrode need not be larger than 4 AWG copper",note3:"Must be continuous without splices (except as permitted)"},necReferences:["NEC Table 250.66 - Grounding Electrode Conductor for Alternating-Current Systems","NEC 250.64 - Grounding Electrode Conductor Installation","NEC 250.52 - Grounding Electrodes"]}}else if(n==="egc"){if(!d.ocpdRating){alert("Please enter an overcurrent device rating before exporting");return}const b={copper:{15:"14",20:"12",30:"10",40:"10",60:"10",100:"8",200:"6",300:"4",400:"3",500:"2",600:"1",800:"1/0",1e3:"2/0",1200:"3/0",1600:"4/0",2e3:"250",2500:"350",3e3:"400",4e3:"500",5e3:"700",6e3:"800"},aluminum:{15:"12",20:"10",30:"8",40:"8",60:"8",100:"6",200:"4",300:"2",400:"1",500:"1/0",600:"2/0",800:"3/0",1e3:"4/0",1200:"250",1600:"350",2e3:"400",2500:"500",3e3:"600",4e3:"750",5e3:"1000",6e3:"1200"}},R=parseInt(d.ocpdRating),j=Object.keys(b[d.conductorMaterial]).map(Number).sort((M,F)=>M-F),z=j.find(M=>M>=R)||j[j.length-1],T=b[d.conductorMaterial][z];_={calculatorName:"Grounding & Bonding - Equipment Grounding Conductor",inputs:{overcurrentDeviceRating:`${R} Amps`,material:d.conductorMaterial.charAt(0).toUpperCase()+d.conductorMaterial.slice(1)},results:{equipmentGroundingConductor:`${T} AWG ${d.conductorMaterial}`,basedOnOCPDRating:`${z} Amps`},additionalInfo:{note1:"Increase proportionally if conductors upsized for voltage drop",note2:"Size per each raceway if conductors run in parallel",note3:"Based on rating of OCPD ahead of circuit"},necReferences:["NEC Table 250.122 - Minimum Size Equipment Grounding Conductors for Grounding Raceway and Equipment","NEC 250.122(B) - Increased in Size","NEC 250.122(F) - Conductors in Parallel"]}}else if(n==="bonding"){if(!u.serviceSize){alert("Please select a conductor size before exporting");return}const b={copper:{"2 or smaller":"8","1 or 1/0":"6","2/0 or 3/0":"4","4/0 to 350":"2","400 to 600":"1/0","650 to 1100":"2/0","over 1100":"3/0"},aluminum:{"2 or smaller":"6","1 or 1/0":"4","2/0 or 3/0":"2","4/0 to 350":"1/0","400 to 600":"3/0","650 to 1100":"4/0","over 1100":"250"}};let R="";const j=u.serviceSize,z=["14","12","10","8","6","4","3","2","1"],T=["1/0","2/0","3/0","4/0"],M=parseInt(j);z.includes(j)?parseInt(j)>=2?R="2 or smaller":j==="1"&&(R="1 or 1/0"):T.includes(j)?j==="1/0"?R="1 or 1/0":j==="2/0"||j==="3/0"?R="2/0 or 3/0":j==="4/0"&&(R="4/0 to 350"):isNaN(M)||(M>=250&&M<=350?R="4/0 to 350":M>=400&&M<=600?R="400 to 600":M>=650&&M<=1100?R="650 to 1100":M>1100&&(R="over 1100"));const F=b[u.conductorMaterial][R],B=u.jumperType==="main"?"Main Bonding Jumper":"System Bonding Jumper";_={calculatorName:`Grounding & Bonding - ${B}`,inputs:{jumperType:B,conductorSize:`${u.serviceSize} AWG`,material:u.conductorMaterial.charAt(0).toUpperCase()+u.conductorMaterial.slice(1)},results:{bondingJumperSize:`${F} AWG ${u.conductorMaterial}`},additionalInfo:u.jumperType==="main"?{purpose:"Connects grounded conductor to equipment grounding conductor",sizing:"Sized per Table 250.66 based on service conductor",forms:"Can be wire, bus, screw, or similar conductor"}:{purpose:"Required for separately derived systems",connection:"Connects grounded to equipment grounding conductor",location:"Installed at same location as GEC connection"},necReferences:u.jumperType==="main"?["NEC 250.28 - Main Bonding Jumper and System Bonding Jumper","NEC 250.28(D) - Size","NEC Table 250.66 - Sizing Reference"]:["NEC 250.30 - Grounding Separately Derived Alternating-Current Systems","NEC 250.30(A)(1) - System Bonding Jumper","NEC Table 250.66 - Sizing Reference"]}}Yr(_)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:y.cardBg,border:`1px solid ${y.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"gec",label:"Grounding Electrode"},{id:"egc",label:"Equipment Grounding"},{id:"bonding",label:"Bonding Jumpers"}].map(_=>i.jsx("button",{onClick:()=>o(_.id),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.625rem 1rem",background:n===_.id?"#3b82f6":y.sectionBg,color:n===_.id?"white":y.labelText,border:`1px solid ${n===_.id?"#3b82f6":y.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:_.label},_.id))}),i.jsxs("div",{style:{background:y.cardBg,border:`1px solid ${y.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[n==="gec"&&i.jsx(KB,{gecData:s,setGecData:l,colors:y}),n==="egc"&&i.jsx(JB,{egcData:d,setEgcData:h,colors:y}),n==="bonding"&&i.jsx(YB,{bondingData:u,setBondingData:g,colors:y})]})]})}),XB=({offsetData:r,setOffsetData:e,colors:t})=>{const n={10:{distance:6,shrink:.01},"22.5":{distance:2.6,shrink:.06},30:{distance:2,shrink:.25},45:{distance:1.4,shrink:.41},60:{distance:1.2,shrink:.58}},s=(()=>{if(!r.obstacleHeight)return null;const l=parseFloat(r.obstacleHeight),d=n[r.bendAngle];return{distanceBetweenBends:(l*d.distance).toFixed(2),shrinkage:(l*d.shrink).toFixed(2),angle:r.bendAngle}})();return i.jsxs("div",{className:sh.menu,children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Obstacle Height (inches)"}),i.jsx("input",{type:"number",value:r.obstacleHeight,onChange:l=>e(d=>({...d,obstacleHeight:l.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Height to clear obstacle"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Bend Angle ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsxs("select",{value:r.bendAngle,onChange:l=>e(d=>({...d,bendAngle:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"10",children:"10°"}),i.jsx("option",{value:"22.5",children:"22.5°"}),i.jsx("option",{value:"30",children:"30°"}),i.jsx("option",{value:"45",children:"45°"}),i.jsx("option",{value:"60",children:"60°"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Most common: 30° or 45°"})]})]}),s&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Distance Between Bends"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[s.distanceBetweenBends,'"']})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Shrinkage"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[s.shrinkage,'"']})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"How to Make the Bend"}),i.jsxs("div",{children:["Mark first bend, measure ",s.distanceBetweenBends,'" from center of first bend, then make second bend at ',s.angle,"°."]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Offset Bend Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"30° bends are most common for typical offsets"}),i.jsx("li",{children:"45° bends create shorter, steeper offsets"}),i.jsx("li",{children:"Always account for shrinkage in measurements"})]})]})]})]})},ZB=({stubUpData:r,setStubUpData:e,colors:t})=>{const n={"1/2":5,"3/4":6,1:8,"1-1/4":11,"1-1/2":14,2:16,"2-1/2":21,3:26,"3-1/2":30,4:34},s=(()=>{if(!r.stubHeight)return null;const l=parseFloat(r.stubHeight),d=n[r.conduitSize];return{markDistance:(l-d).toFixed(2),deduction:d,stubHeight:l.toFixed(2)}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Desired Stub Height (inches)"}),i.jsx("input",{type:"number",value:r.stubHeight,onChange:l=>e(d=>({...d,stubHeight:l.target.value})),placeholder:"Enter stub height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Back of 90° to floor"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Conduit Size ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsx("select",{value:r.conduitSize,onChange:l=>e(d=>({...d,conduitSize:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.keys(n).map(l=>i.jsxs("option",{value:l,children:[l,'"']},l))})]})]}),s&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Mark At"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[s.markDistance,'"']})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Deduction"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[s.deduction,'"']})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Conduit Size"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[r.conduitSize,'"']})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"How to Bend"}),i.jsxs("div",{children:["Measure from end of conduit, mark at ",s.markDistance,'", line up mark with arrow on bender, make 90° bend.']})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Stub-Up Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Deduction accounts for the radius of the bend"}),i.jsx("li",{children:"Larger conduit = larger deduction"}),i.jsx("li",{children:"Always check your bender - deductions vary by manufacturer"})]})]})]})]})},eL=({saddleData:r,setSaddleData:e,colors:t})=>{const o=(()=>{if(!r.obstacleHeight)return null;const s=parseFloat(r.obstacleHeight),l=parseFloat(r.obstacleWidth)||s*4,d=s*.3;return{centerBend:45,outerBends:22.5,distanceToOuter:(l/2).toFixed(2),shrinkage:d.toFixed(2),obstacleHeight:s.toFixed(2)}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Obstacle Height (inches)"}),i.jsx("input",{type:"number",value:r.obstacleHeight,onChange:s=>e(l=>({...l,obstacleHeight:s.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Width ",i.jsx("br",{})," (Optional)"]}),i.jsx("input",{type:"number",value:r.obstacleWidth,onChange:s=>e(l=>({...l,obstacleWidth:s.target.value})),placeholder:"Auto: 4x height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Center Bend"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[o.centerBend,"°"]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Outer Bends"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.outerBends,"°"]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Distance to Outer"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.distanceToOuter,'"']})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Bending Sequence"}),i.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Mark center of obstacle on conduit"}),i.jsx("li",{children:"Make 45° center bend at mark"}),i.jsxs("li",{children:["Measure ",o.distanceToOuter,'" from center each direction']}),i.jsx("li",{children:"Make 22.5° bends on each side (opposite direction)"})]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"3-Point Saddle Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Center bend goes up, outer bends go down"}),i.jsx("li",{children:"Most common for going over pipes or other conduits"}),i.jsx("li",{children:"Mark all three bend locations before starting"})]})]})]})]})},tL=({fourPointData:r,setFourPointData:e,colors:t})=>{const o=(()=>{if(!r.obstacleHeight||!r.obstacleWidth)return null;const s=parseFloat(r.obstacleHeight),l=parseFloat(r.obstacleWidth),d=l/2,h=l/4,u=s*.15;return{bendAngle:22.5,distanceToOuter:d.toFixed(2),innerSpacing:h.toFixed(2),shrinkage:u.toFixed(2)}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Height ",i.jsx("br",{})," (inches)"]}),i.jsx("input",{type:"number",value:r.obstacleHeight,onChange:s=>e(l=>({...l,obstacleHeight:s.target.value})),placeholder:"Enter height",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Obstacle Width ",i.jsx("br",{})," (inches)"]}),i.jsx("input",{type:"number",value:r.obstacleWidth,onChange:s=>e(l=>({...l,obstacleWidth:s.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"All Bends"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:[o.bendAngle,"°"]})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Outer Distance"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.distanceToOuter,'"']})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Inner Spacing"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[o.innerSpacing,'"']})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Bending Sequence"}),i.jsxs("ol",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Mark center of obstacle on conduit"}),i.jsxs("li",{children:["Measure ",o.distanceToOuter,'" from center (outer bends)']}),i.jsxs("li",{children:["Measure ",o.innerSpacing,'" from center (inner bends)']}),i.jsx("li",{children:"Make all four 22.5° bends: outer up, inner down"})]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"4-Point Saddle Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Used for larger obstacles where 3-point won't work"}),i.jsx("li",{children:"Outer bends go up, inner bends go down"}),i.jsx("li",{children:"Creates a flatter top for better clearance"})]})]})]})]})},rL=ce.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=ce.useState("offset"),[s,l]=ce.useState({obstacleHeight:"",bendAngle:"30"}),[d,h]=ce.useState({stubHeight:"",conduitSize:"3/4"}),[u,g]=ce.useState({obstacleHeight:"",obstacleWidth:""}),[y,_]=ce.useState({obstacleHeight:"",obstacleWidth:""}),b={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};ce.useImperativeHandle(t,()=>({exportPDF:()=>{let j;if(n==="offset"){if(!s.obstacleHeight){alert("Please enter obstacle height for Offset Bends before exporting");return}const z={10:{distance:6,shrink:.01},"22.5":{distance:2.6,shrink:.06},30:{distance:2,shrink:.25},45:{distance:1.4,shrink:.41},60:{distance:1.2,shrink:.58}},T=parseFloat(s.obstacleHeight),M=z[s.bendAngle],F=(T*M.distance).toFixed(2),B=(T*M.shrink).toFixed(2);j={calculatorName:"Conduit Bending - Offset Bends",inputs:{obstacleHeight:`${s.obstacleHeight} inches`,bendAngle:`${s.bendAngle}°`},results:{distanceBetweenBends:`${F} inches`,shrinkage:`${B} inches`},additionalInfo:{instructions:`Mark first bend, measure ${F}" from center of first bend, then make second bend at ${s.bendAngle}°`,multiplierUsed:`Distance: ${M.distance}, Shrink: ${M.shrink}`},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","30° bends are most common for typical offsets","45° bends create shorter, steeper offsets"]}}else if(n==="stubup"){if(!d.stubHeight){alert("Please enter stub height for 90° Stub-Up before exporting");return}const z={"1/2":5,"3/4":6,1:8,"1-1/4":11,"1-1/2":14,2:16,"2-1/2":21,3:26,"3-1/2":30,4:34},T=parseFloat(d.stubHeight),M=z[d.conduitSize],F=(T-M).toFixed(2);j={calculatorName:"Conduit Bending - 90° Stub-Up",inputs:{desiredStubHeight:`${d.stubHeight} inches`,conduitSize:`${d.conduitSize}"`},results:{markAt:`${F} inches`,deduction:`${M} inches`},additionalInfo:{instructions:`Measure from end of conduit, mark at ${F}", line up mark with arrow on bender, make 90° bend`,note:"Deduction accounts for the radius of the bend - larger conduit requires larger deduction"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Always check your bender - deductions vary by manufacturer"]}}else if(n==="saddle"){if(!u.obstacleHeight){alert("Please enter obstacle height for 3-Point Saddle before exporting");return}const z=parseFloat(u.obstacleHeight),T=parseFloat(u.obstacleWidth)||z*4,M=(z*.3).toFixed(2),F=(T/2).toFixed(2);j={calculatorName:"Conduit Bending - 3-Point Saddle",inputs:{obstacleHeight:`${u.obstacleHeight} inches`,obstacleWidth:u.obstacleWidth?`${u.obstacleWidth} inches`:`${T} inches (Auto: 4x height)`},results:{centerBend:"45°",outerBends:"22.5°",distanceToOuter:`${F} inches`,shrinkage:`${M} inches`},additionalInfo:{bendingSequence:`1) Mark center of obstacle on conduit 2) Make 45° center bend at mark 3) Measure ${F}" from center each direction 4) Make 22.5° bends on each side (opposite direction)`,tip:"Center bend goes up, outer bends go down"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Most common for going over pipes or other conduits","Mark all three bend locations before starting"]}}else if(n==="fourpoint"){if(!y.obstacleHeight||!y.obstacleWidth){alert("Please enter both obstacle height and width for 4-Point Saddle before exporting");return}const z=parseFloat(y.obstacleHeight),T=parseFloat(y.obstacleWidth),M=(T/2).toFixed(2),F=(T/4).toFixed(2),B=(z*.15).toFixed(2);j={calculatorName:"Conduit Bending - 4-Point Saddle",inputs:{obstacleHeight:`${y.obstacleHeight} inches`,obstacleWidth:`${y.obstacleWidth} inches`},results:{allBends:"22.5°",outerDistance:`${M} inches`,innerSpacing:`${F} inches`,shrinkage:`${B} inches`},additionalInfo:{bendingSequence:`1) Mark center of obstacle on conduit 2) Measure ${M}" from center (outer bends) 3) Measure ${F}" from center (inner bends) 4) Make all four 22.5° bends: outer up, inner down`,tip:"Used for larger obstacles where 3-point saddle will not work"},necReferences:["NEC Article 358 - Electrical Metallic Tubing (EMT)","NEC Article 344 - Rigid Metal Conduit (RMC)","Creates a flatter top for better clearance over wide obstacles"]}}Yr(j)}}));const R={offset:i.jsx(XB,{offsetData:s,setOffsetData:l,colors:b}),stubup:i.jsx(ZB,{stubUpData:d,setStubUpData:h,colors:b}),saddle:i.jsx(eL,{saddleData:u,setSaddleData:g,colors:b}),fourpoint:i.jsx(tL,{fourPointData:y,setFourPointData:_,colors:b})};return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"offset",label:"Offset Bends"},{id:"stubup",label:"90° Stub-Up"},{id:"saddle",label:"3-Point Saddle"},{id:"fourpoint",label:"4-Point Saddle"}].map(j=>i.jsx("button",{className:sh.btn,onClick:()=>o(j.id),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.625rem 1rem",background:n===j.id?"#3b82f6":b.sectionBg,color:n===j.id?"white":b.labelText,border:`1px solid ${n===j.id?"#3b82f6":b.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:j.label},j.id))}),i.jsx("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:R[n]})]})}),nL=({lumensData:r,setLumensData:e,colors:t})=>{const n={living:10,kitchen:50,bathroom:70,bedroom:10,office:50,workshop:75,garage:50,hallway:5,dining:30,laundry:50},o={living:"Living Room (10 fc)",kitchen:"Kitchen (50 fc)",bathroom:"Bathroom (70 fc)",bedroom:"Bedroom (10 fc)",office:"Office/Study (50 fc)",workshop:"Workshop (75 fc)",garage:"Garage (50 fc)",hallway:"Hallway (5 fc)",dining:"Dining Room (30 fc)",laundry:"Laundry Room (50 fc)"},l=(()=>{if(!r.roomLength||!r.roomWidth)return null;const d=parseFloat(r.roomLength),h=parseFloat(r.roomWidth),u=d*h,g=n[r.roomType],y=g*u;let _=null;if(r.lumensPerFixture){const b=parseFloat(r.lumensPerFixture);_=Math.ceil(y/b)}return{area:u.toFixed(1),footCandles:g,totalLumens:y.toFixed(0),fixturesNeeded:_}})();return i.jsxs("div",{className:sh.menu,children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),i.jsx("input",{type:"number",value:r.roomLength,onChange:d=>e(h=>({...h,roomLength:d.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),i.jsx("input",{type:"number",value:r.roomWidth,onChange:d=>e(h=>({...h,roomWidth:d.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:["Room Type ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsx("select",{value:r.roomType,onChange:d=>e(h=>({...h,roomType:d.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.entries(o).map(([d,h])=>i.jsx("option",{value:d,children:h},d))}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"fc = foot-candles"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Lumens per Fixture (Optional)"}),i.jsx("input",{type:"number",value:r.lumensPerFixture,onChange:d=>e(h=>({...h,lumensPerFixture:d.target.value})),placeholder:"e.g., 800",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"To calculate fixture count"})]})]}),l&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:l.fixturesNeeded?"repeat(3, 1fr)":"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Room Area"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:l.area}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"sq ft"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Lumens Needed"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:l.totalLumens}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"lumens"})]}),l.fixturesNeeded&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Fixtures Needed"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:l.fixturesNeeded}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"fixtures"})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Lighting Requirements"}),i.jsxs("div",{children:["Recommended level: ",l.footCandles," foot-candles"]}),l.fixturesNeeded&&i.jsxs("div",{children:["Using ",r.lumensPerFixture," lumens per fixture"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Lighting Tips:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"LED bulbs typically produce 60-100 lumens per watt"}),i.jsx("li",{children:"Layer lighting: combine ambient, task, and accent lighting"}),i.jsx("li",{children:"Dark wall colors absorb light; increase lumens by 10-20%"})]})]})]})]})},iL=({spacingData:r,setSpacingData:e,colors:t})=>{const n={recessed:1.5,pendant:1,track:2,surface:1.5},s=(()=>{if(!r.roomLength||!r.roomWidth)return null;const l=parseFloat(r.roomLength),d=parseFloat(r.roomWidth),h=parseFloat(r.ceilingHeight),u=n[r.fixtureType],g=h*u,y=r.fixtureType==="recessed"?6:g*.8,_=Math.max(2,Math.round(l/y)),b=Math.max(2,Math.round(d/y)),R=_*b,j=l/_,z=d/b,T=j/2,M=z/2;return{maxSpacing:g.toFixed(1),fixturesLength:_,fixturesWidth:b,totalFixtures:R,actualSpacingLength:j.toFixed(1),actualSpacingWidth:z.toFixed(1),wallOffsetLength:T.toFixed(1),wallOffsetWidth:M.toFixed(1)}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),i.jsx("input",{type:"number",value:r.roomLength,onChange:l=>e(d=>({...d,roomLength:l.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),i.jsx("input",{type:"number",value:r.roomWidth,onChange:l=>e(d=>({...d,roomWidth:l.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Ceiling Height (feet)"}),i.jsx("input",{type:"number",value:r.ceilingHeight,onChange:l=>e(d=>({...d,ceilingHeight:l.target.value})),placeholder:"8",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Fixture Type"}),i.jsxs("select",{value:r.fixtureType,onChange:l=>e(d=>({...d,fixtureType:l.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"recessed",children:"Recessed Can (1.5:1 ratio)"}),i.jsx("option",{value:"pendant",children:"Pendant (1:1 ratio)"}),i.jsx("option",{value:"track",children:"Track Light (2:1 ratio)"}),i.jsx("option",{value:"surface",children:"Surface Mount (1.5:1 ratio)"})]})]})]}),s&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Max Spacing"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:s.maxSpacing}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"feet"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Fixtures"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:s.totalFixtures}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"fixtures"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Layout"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:[s.fixturesLength,"×",s.fixturesWidth]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"grid"})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Spacing Results"}),i.jsxs("div",{children:["Length spacing: ",s.actualSpacingLength," ft"]}),i.jsxs("div",{children:["Width spacing: ",s.actualSpacingWidth," ft"]}),i.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.8125rem"},children:["Start ",s.wallOffsetLength," ft from walls (length) and ",s.wallOffsetWidth," ft from walls (width)"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Spacing Guidelines:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Industry standard: 4-6 feet spacing for recessed cans"}),i.jsx("li",{children:"Spacing ratio = max distance between fixtures ÷ ceiling height"}),i.jsx("li",{children:"Space fixtures evenly with proper wall offsets for uniform coverage"})]})]})]})]})},oL=({wattsData:r,setWattsData:e,colors:t})=>{const n={office:1,retail:1.5,warehouse:.5,school:1.2,hospital:1,hotel:1,restaurant:1.3,residential:1},o={office:"Office Building (1.0 W/sq ft)",retail:"Retail Store (1.5 W/sq ft)",warehouse:"Warehouse (0.5 W/sq ft)",school:"School (1.2 W/sq ft)",hospital:"Hospital (1.0 W/sq ft)",hotel:"Hotel (1.0 W/sq ft)",restaurant:"Restaurant (1.3 W/sq ft)",residential:"Residential (1.0 W/sq ft)"},l=(()=>{if(!r.area)return null;const d=parseFloat(r.area),h=n[r.buildingType],u=d*h,g=u,y=g/120,_=Math.ceil(y/16);return{wattsPerSqFt:h,totalWatts:u.toFixed(0),totalVA:g.toFixed(0),amperage:y.toFixed(1),circuits:_}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Area (square feet)"}),i.jsx("input",{type:"number",value:r.area,onChange:d=>e(h=>({...h,area:d.target.value})),placeholder:"Enter area",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Building Type"}),i.jsx("select",{value:r.buildingType,onChange:d=>e(h=>({...h,buildingType:d.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:Object.entries(o).map(([d,h])=>i.jsx("option",{value:d,children:h},d))}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"Per NEC Table 220.12"})]})]}),l&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Unit Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:l.wattsPerSqFt}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"W/sq ft"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Total Load"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:l.totalWatts}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"watts"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:l.circuits}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginTop:"0.25rem"},children:"needed"})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Lighting Load Calculation"}),i.jsxs("div",{children:["Total VA: ",l.totalVA," VA"]}),i.jsxs("div",{children:["Current @ 120V: ",l.amperage," A"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Requirements:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"NEC 220.12 specifies unit lighting loads by occupancy"}),i.jsx("li",{children:"Calculate using building area, not just lit area"}),i.jsx("li",{children:"Continuous loads require 125% conductor/OCPD sizing"})]})]})]})]})},sL=ce.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=ce.useState("lumens"),[s,l]=ce.useState({roomLength:"",roomWidth:"",roomType:"living",lumensPerFixture:""}),[d,h]=ce.useState({roomLength:"",roomWidth:"",ceilingHeight:"8",fixtureType:"recessed"}),[u,g]=ce.useState({area:"",buildingType:"office"}),y={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};ce.useImperativeHandle(t,()=>({exportPDF:()=>{let b;if(n==="lumens"){if(!s.roomLength||!s.roomWidth){alert("Please enter room dimensions before exporting");return}const R={living:"Living Room",kitchen:"Kitchen",bathroom:"Bathroom",bedroom:"Bedroom",office:"Office/Study",workshop:"Workshop",garage:"Garage",hallway:"Hallway",dining:"Dining Room",laundry:"Laundry Room"},j={living:10,kitchen:50,bathroom:70,bedroom:10,office:50,workshop:75,garage:50,hallway:5,dining:30,laundry:50},z=parseFloat(s.roomLength),T=parseFloat(s.roomWidth),M=(z*T).toFixed(1),F=j[s.roomType],B=(F*M).toFixed(0),J={roomLength:`${s.roomLength} feet`,roomWidth:`${s.roomWidth} feet`,roomType:`${R[s.roomType]} (${F} fc)`},se={roomArea:`${M} sq ft`,totalLumensNeeded:`${B} lumens`};if(s.lumensPerFixture){const O=parseFloat(s.lumensPerFixture),A=Math.ceil(parseFloat(B)/O);J.lumensPerFixture=`${s.lumensPerFixture} lumens`,se.fixturesNeeded=`${A} fixtures`}b={calculatorName:"Lighting Calculations - Room Lumens",inputs:J,results:se,additionalInfo:{calculation:`Area (${M} sq ft) × Recommended Level (${F} foot-candles) = ${B} lumens`,tip1:"LED bulbs typically produce 60-100 lumens per watt",tip2:"Layer lighting: combine ambient, task, and accent lighting",tip3:"Dark wall colors absorb light; increase lumens by 10-20%"},necReferences:["IES (Illuminating Engineering Society) recommended light levels","Foot-candles measure illuminance on a surface","1 foot-candle = 1 lumen per square foot"]}}else if(n==="spacing"){if(!d.roomLength||!d.roomWidth){alert("Please enter room dimensions before exporting");return}const R={recessed:"Recessed Can (1.5:1 ratio)",pendant:"Pendant (1:1 ratio)",track:"Track Light (2:1 ratio)",surface:"Surface Mount (1.5:1 ratio)"},j={recessed:1.5,pendant:1,track:2,surface:1.5},z=parseFloat(d.roomLength),T=parseFloat(d.roomWidth),M=parseFloat(d.ceilingHeight),F=j[d.fixtureType],B=(M*F).toFixed(1),J=d.fixtureType==="recessed"?6:parseFloat(B)*.8,se=Math.max(2,Math.round(z/J)),O=Math.max(2,Math.round(T/J)),A=se*O,S=(z/se).toFixed(1),V=(T/O).toFixed(1),I=(parseFloat(S)/2).toFixed(1),w=(parseFloat(V)/2).toFixed(1);b={calculatorName:"Lighting Calculations - Fixture Spacing",inputs:{roomLength:`${d.roomLength} feet`,roomWidth:`${d.roomWidth} feet`,ceilingHeight:`${d.ceilingHeight} feet`,fixtureType:R[d.fixtureType]},results:{maximumSpacing:`${B} feet`,totalFixtures:`${A} fixtures`,layoutGrid:`${se} × ${O}`,lengthSpacing:`${S} feet`,widthSpacing:`${V} feet`},additionalInfo:{wallOffsets:`Start ${I} ft from walls (length) and ${w} ft from walls (width)`,spacingFormula:`Maximum spacing = Ceiling height (${M} ft) × Spacing ratio (${F}) = ${B} ft`,tip1:"Industry standard: 4-6 feet spacing for recessed cans",tip2:"Space fixtures evenly with proper wall offsets for uniform coverage"},necReferences:["Spacing ratio guidelines from IES Lighting Handbook","Recessed fixtures: 1.5:1 ratio (spacing to mounting height)","Pendant fixtures: 1:1 ratio for focused task lighting","Track lights: 2:1 ratio for accent lighting"]}}else if(n==="watts"){if(!u.area){alert("Please enter area before exporting");return}const R={office:"Office Building",retail:"Retail Store",warehouse:"Warehouse",school:"School",hospital:"Hospital",hotel:"Hotel",restaurant:"Restaurant",residential:"Residential"},j={office:1,retail:1.5,warehouse:.5,school:1.2,hospital:1,hotel:1,restaurant:1.3,residential:1},z=parseFloat(u.area),T=j[u.buildingType],M=(z*T).toFixed(0),F=M,B=(parseFloat(F)/120).toFixed(1),J=Math.ceil(parseFloat(B)/16);b={calculatorName:"Lighting Calculations - Watts per Square Foot",inputs:{area:`${u.area} square feet`,buildingType:`${R[u.buildingType]} (${T} W/sq ft)`},results:{unitLoad:`${T} W/sq ft`,totalLoad:`${M} watts`,totalVA:`${F} VA`,currentAt120V:`${B} Amps`,requiredCircuits:`${J} × 20A circuits`},additionalInfo:{calculation:`Area (${z} sq ft) × Unit Load (${T} W/sq ft) = ${M} watts`,circuitCalculation:`Total current (${B} A) ÷ 16A (80% of 20A) = ${J} circuits needed`,note:"Continuous loads require 125% conductor/OCPD sizing"},necReferences:["NEC Table 220.12 - General Lighting Loads by Occupancy","NEC 210.19(A)(1) - Branch Circuit Ampacity","NEC 210.20(A) - Continuous and Noncontinuous Loads","Calculate using building area, not just lit area"]}}Yr(b)}}));const _={lumens:i.jsx(nL,{lumensData:s,setLumensData:l,colors:y}),spacing:i.jsx(iL,{spacingData:d,setSpacingData:h,colors:y}),watts:i.jsx(oL,{wattsData:u,setWattsData:g,colors:y})};return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:y.cardBg,border:`1px solid ${y.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"lumens",label:"Room Lumens"},{id:"spacing",label:"Fixture Spacing"},{id:"watts",label:"Watts/Sq Ft"}].map(b=>i.jsx("button",{className:sh.btn,onClick:()=>o(b.id),style:{flex:"1 1 auto",minWidth:"120px",padding:"0.625rem 1rem",background:n===b.id?"#3b82f6":y.sectionBg,color:n===b.id?"white":y.labelText,border:`1px solid ${n===b.id?"#3b82f6":y.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:b.label},b.id))}),i.jsx("div",{style:{background:y.cardBg,border:`1px solid ${y.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:_[n]})]})}),aL=({generalData:r,setGeneralData:e,colors:t})=>{const o=(()=>{if(!r.roomLength||!r.roomWidth)return null;const s=parseFloat(r.roomLength),l=parseFloat(r.roomWidth),d=(s+l)*2,h=Math.max(2,Math.ceil(d/12));let u=0;if(r.hasCounters){const b=parseFloat(r.counterLength)||0;u=Math.max(2,Math.ceil(b/2))}const g=h+u,y=Math.ceil(g/8),_=Math.ceil(g/10);return{perimeter:d.toFixed(1),wallReceptacles:h,counterReceptacles:u,totalReceptacles:g,circuits15A:y,circuits20A:_}})();return i.jsxs("div",{className:sh.menu,children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Length (feet)"}),i.jsx("input",{type:"number",value:r.roomLength,onChange:s=>e(l=>({...l,roomLength:s.target.value})),placeholder:"Enter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Room Width (feet)"}),i.jsx("input",{type:"number",value:r.roomWidth,onChange:s=>e(l=>({...l,roomWidth:s.target.value})),placeholder:"Enter width",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsx("div",{style:{gridColumn:"1 / -1"},children:i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.hasCounters,onChange:s=>e(l=>({...l,hasCounters:s.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Room has countertops/islands"]})}),r.hasCounters&&i.jsxs("div",{style:{gridColumn:"1 / -1"},children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Counter Length (feet)"}),i.jsx("input",{type:"number",value:r.counterLength,onChange:s=>e(l=>({...l,counterLength:s.target.value})),placeholder:"Enter counter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:"For kitchens/break rooms"})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:o.counterReceptacles>0?"repeat(3, 1fr)":"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Wall Receptacles"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.wallReceptacles})]}),o.counterReceptacles>0&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Counter Receptacles"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.counterReceptacles})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Total Needed"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.totalReceptacles})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"15A Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.circuits15A})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.circuits20A})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"NEC Requirements Met"}),i.jsxs("div",{children:["Room perimeter: ",o.perimeter," ft"]}),i.jsx("div",{children:"Spacing: One receptacle every 12 feet of wall space"}),o.counterReceptacles>0&&i.jsx("div",{children:"Counter spacing: One receptacle every 2 feet"})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC 210.52 Requirements:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Wall: Receptacle within 6 ft of doorway, then every 12 ft"}),i.jsx("li",{children:"No point along wall more than 6 ft from receptacle"}),i.jsx("li",{children:"Counters: One receptacle every 24 inches of counter space"}),i.jsx("li",{children:"Kitchen requires min. 2 small appliance circuits (20A)"})]})]})]})]})},lL=({kitchenData:r,setKitchenData:e,colors:t})=>{const o=(()=>{if(!r.counterLength)return null;const s=parseFloat(r.counterLength),l=parseFloat(r.islandLength)||0,d=Math.max(2,Math.ceil(s/2)),h=l>=2?Math.max(1,Math.ceil(l/4)):0,u=2,g=d+h;let y=0;return r.dishwasher&&y++,r.disposer&&y++,r.microwave&&y++,r.range&&y++,{counterReceptacles:d,islandReceptacles:h,totalReceptacles:d+h,smallApplianceCircuits:u,dedicatedCircuits:y,gfciRequired:g}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Counter Length (feet)"}),i.jsx("input",{type:"number",value:r.counterLength,onChange:s=>e(l=>({...l,counterLength:s.target.value})),placeholder:"Enter counter length",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Island Length (feet) - Optional"}),i.jsx("input",{type:"number",value:r.islandLength,onChange:s=>e(l=>({...l,islandLength:s.target.value})),placeholder:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem"},children:'Required if island ≥ 24" long × 12" wide'})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.75rem",color:t.cardText,fontSize:"0.875rem"},children:"Dedicated Appliance Circuits:"}),i.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.dishwasher,onChange:s=>e(l=>({...l,dishwasher:s.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Dishwasher (dedicated 15A/20A)"]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.disposer,onChange:s=>e(l=>({...l,disposer:s.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Garbage Disposer (dedicated 15A/20A)"]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.microwave,onChange:s=>e(l=>({...l,microwave:s.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Microwave (dedicated 20A)"]}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.range,onChange:s=>e(l=>({...l,range:s.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Range/Cooktop (240V, 40-50A)"]})]})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Counter Receptacles"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.counterReceptacles})]}),o.islandReceptacles>0&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Island Receptacles"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.islandReceptacles})]}),o.islandReceptacles===0&&i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"GFCI Required"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.gfciRequired})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Small Appliance Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.smallApplianceCircuits}),i.jsx("div",{style:{fontSize:"0.65rem",color:t.subtleText,marginTop:"0.25rem"},children:"20A each"})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"Dedicated Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.dedicatedCircuits}),i.jsx("div",{style:{fontSize:"0.65rem",color:t.subtleText,marginTop:"0.25rem"},children:"for appliances"})]})]}),i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Rl,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"GFCI Protection Required"}),i.jsxs("div",{children:["All ",o.gfciRequired," countertop receptacles require GFCI protection per NEC 210.8(A)"]})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"Kitchen Requirements:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Min. 2 small appliance circuits (20A) for countertop receptacles"}),i.jsx("li",{children:"Counter receptacles: One every 24 inches, all GFCI protected"}),i.jsx("li",{children:'Island receptacles required if island ≥ 24" long × 12" wide'}),i.jsx("li",{children:"Dishwasher, disposer typically need dedicated 15A or 20A circuits"})]})]})]})]})},cL=({bathroomData:r,setBathroomData:e,colors:t})=>{const o=(()=>{const s=parseInt(r.numBasins)||1,l=r.hasTub;let d=Math.max(1,s);l&&(d=Math.max(d,2));const h=r.sharedCircuit?1:s>=2?2:1;return{receptacles:d,dedicatedCircuits:h,gfciRequired:d,numBasins:s}})();return i.jsxs("div",{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,marginBottom:"0.5rem"},children:"Number of Sinks/Basins"}),i.jsxs("select",{value:r.numBasins,onChange:s=>e(l=>({...l,numBasins:s.target.value})),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${t.inputBorder}`,borderRadius:"8px",backgroundColor:t.inputBg,color:t.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"1",children:"1 Basin"}),i.jsx("option",{value:"2",children:"2 Basins (Double Vanity)"}),i.jsx("option",{value:"3",children:"3+ Basins"})]})]}),i.jsx("div",{children:i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.hasTub,onChange:s=>e(l=>({...l,hasTub:s.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Has Bathtub/Shower Area"]})}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:t.labelText,cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:r.sharedCircuit,onChange:s=>e(l=>({...l,sharedCircuit:s.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),"Share circuit with other bathrooms"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:t.subtleText,marginTop:"0.25rem",marginLeft:"1.625rem"},children:"One 20A circuit can serve multiple bathrooms if only serving receptacles"})]})]}),o&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Receptacles Needed"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:o.receptacles})]}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:t.labelText,marginBottom:"0.25rem"},children:"20A Circuits"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:t.cardText},children:o.dedicatedCircuits})]})]}),i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Rl,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"GFCI Protection Required"}),i.jsxs("div",{children:["All ",o.gfciRequired," bathroom receptacles require GFCI protection per NEC 210.8(A)"]})]})]})}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Installation Guidelines"}),i.jsx("div",{children:"• At least one receptacle within 3 feet of each basin"}),i.jsx("div",{children:"• Receptacles must be readily accessible (not behind toilet)"}),i.jsx("div",{children:"• Install at least 12 inches above countertop"})]})]})}),i.jsxs("div",{style:{background:t.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${t.cardBorder}`,fontSize:"0.875rem",color:t.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:t.cardText},children:"NEC Bathroom Requirements:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"NEC 210.52(D): Min. 1 receptacle within 3 ft of basin"}),i.jsx("li",{children:"NEC 210.11(C)(3): Min. 1 dedicated 20A circuit for bathroom receptacles"}),i.jsx("li",{children:"NEC 210.8(A): All bathroom receptacles require GFCI protection"}),i.jsx("li",{children:"One 20A circuit can serve receptacles in multiple bathrooms"})]})]})]})]})},dL=ce.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=ce.useState("general"),[s,l]=ce.useState({roomLength:"",roomWidth:"",hasCounters:!1,counterLength:""}),[d,h]=ce.useState({counterLength:"",islandLength:"",dishwasher:!1,disposer:!1,microwave:!1,range:!1}),[u,g]=ce.useState({numBasins:"1",hasTub:!1,sharedCircuit:!1}),y={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"};ce.useImperativeHandle(t,()=>({exportPDF:()=>{let b;if(n==="general"){if(!s.roomLength||!s.roomWidth){alert("Please enter room dimensions before exporting");return}const R=parseFloat(s.roomLength),j=parseFloat(s.roomWidth),z=((R+j)*2).toFixed(1),T=Math.max(2,Math.ceil(z/12));let M=0;if(s.hasCounters&&s.counterLength){const A=parseFloat(s.counterLength);M=Math.max(2,Math.ceil(A/2))}const F=T+M,B=Math.ceil(F/8),J=Math.ceil(F/10),se={roomLength:`${s.roomLength} feet`,roomWidth:`${s.roomWidth} feet`,roomPerimeter:`${z} feet`};s.hasCounters&&s.counterLength&&(se.counterLength=`${s.counterLength} feet`);const O={wallReceptacles:`${T} receptacles`,totalReceptacles:`${F} receptacles`,circuits15A:`${B} circuits (15A)`,circuits20A:`${J} circuits (20A)`};M>0&&(O.counterReceptacles=`${M} receptacles`),b={calculatorName:"Receptacle Calculator - General Room",inputs:se,results:O,additionalInfo:{spacing:"One receptacle every 12 feet of wall space",rule:"No point along wall more than 6 feet from receptacle",counterRule:M>0?"Counter receptacles: one every 24 inches":null},necReferences:["NEC 210.52(A) - General Provisions","Receptacle within 6 ft of doorway, then every 12 ft","No point along wall more than 6 ft from receptacle","Conservative: 8 receptacles per 15A circuit, 10 per 20A circuit"]}}else if(n==="kitchen"){if(!d.counterLength){alert("Please enter counter length before exporting");return}const R=parseFloat(d.counterLength),j=parseFloat(d.islandLength)||0,z=Math.max(2,Math.ceil(R/2)),T=j>=2?Math.max(1,Math.ceil(j/4)):0,M=z+T,F=2,B=M;let J=0;const se=[];d.dishwasher&&(J++,se.push("Dishwasher (15A/20A)")),d.disposer&&(J++,se.push("Garbage Disposer (15A/20A)")),d.microwave&&(J++,se.push("Microwave (20A)")),d.range&&(J++,se.push("Range/Cooktop (240V, 40-50A)"));const O={counterLength:`${d.counterLength} feet`};j>0&&(O.islandLength=`${d.islandLength} feet`),se.length>0&&(O.dedicatedAppliances=se.join(", "));const A={counterReceptacles:`${z} receptacles`,totalReceptacles:`${M} receptacles`,smallApplianceCircuits:`${F} circuits (20A each)`,gfciRequired:`${B} GFCI-protected receptacles`};T>0&&(A.islandReceptacles=`${T} receptacles`),J>0&&(A.dedicatedCircuits=`${J} dedicated circuits`),b={calculatorName:"Receptacle Calculator - Kitchen",inputs:O,results:A,additionalInfo:{counterSpacing:"One receptacle every 24 inches of counter space",islandRequirement:'Island receptacles required if island ≥ 24" long × 12" wide',gfciNote:"All countertop receptacles require GFCI protection"},necReferences:["NEC 210.52(C) - Countertops","NEC 210.11(C)(1) - Min. 2 small appliance circuits (20A)","NEC 210.8(A) - GFCI protection required for all countertop receptacles",'Island receptacles required if ≥ 24" long × 12" wide']}}else if(n==="bathroom"){const R=parseInt(u.numBasins)||1,j=u.hasTub;let z=Math.max(1,R);j&&(z=Math.max(z,2));const T=u.sharedCircuit?1:R>=2?2:1,M=z,B={numberOfBasins:R===1?"1 Basin":R===2?"2 Basins (Double Vanity)":"3+ Basins",hasTubShower:j?"Yes":"No",sharedCircuit:u.sharedCircuit?"Yes (shared with other bathrooms)":"No (dedicated)"},J={receptaclesNeeded:`${z} receptacles`,dedicatedCircuits:`${T} circuits (20A)`,gfciRequired:`${M} GFCI-protected receptacles`};b={calculatorName:"Receptacle Calculator - Bathroom",inputs:B,results:J,additionalInfo:{spacing:"At least one receptacle within 3 feet of each basin",installation:"Install at least 12 inches above countertop",accessibility:"Receptacles must be readily accessible (not behind toilet)",gfciNote:"All bathroom receptacles require GFCI protection"},necReferences:["NEC 210.52(D) - Min. 1 receptacle within 3 ft of basin","NEC 210.11(C)(3) - Min. 1 dedicated 20A circuit for bathroom receptacles","NEC 210.8(A) - All bathroom receptacles require GFCI protection","One 20A circuit can serve receptacles in multiple bathrooms"]}}Yr(b)}}));const _={general:i.jsx(aL,{generalData:s,setGeneralData:l,colors:y}),kitchen:i.jsx(lL,{kitchenData:d,setKitchenData:h,colors:y}),bathroom:i.jsx(cL,{bathroomData:u,setBathroomData:g,colors:y})};return i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:y.cardBg,border:`1px solid ${y.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[{id:"general",label:"General Room"},{id:"kitchen",label:"Kitchen"},{id:"bathroom",label:"Bathroom"}].map(b=>i.jsx("button",{className:sh.btn,onClick:()=>o(b.id),style:{flex:"1 1 auto",minWidth:"100px",padding:"0.625rem 1rem",background:n===b.id?"#3b82f6":y.sectionBg,color:n===b.id?"white":y.labelText,border:`1px solid ${n===b.id?"#3b82f6":y.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:b.label},b.id))}),i.jsx("div",{style:{background:y.cardBg,border:`1px solid ${y.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:_[n]})]})});function uL({onNavigate:r,currentView:e,isDarkMode:t=!1}){const n={bg:t?"#1a1a1a":"#ffffff",border:t?"#2a2a2a":"#e5e7eb",activeText:"#3b82f6",inactiveText:t?"#999999":"#6b7280"},o=l=>({background:"transparent",border:"0",borderWidth:"0",outline:"none",boxShadow:"none",color:l?n.activeText:n.inactiveText,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",gap:"0.25rem",fontSize:"0.625rem",fontWeight:"500",flex:"1 1 0",padding:"0.5rem 0.25rem",paddingTop:"0.75rem",margin:0,transition:"color 0.2s",WebkitTapHighlightColor:"transparent",WebkitAppearance:"none",MozAppearance:"none",appearance:"none",minWidth:"0"}),s={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",textAlign:"center",lineHeight:"1",marginTop:"0.125rem"};return i.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,width:"100%",background:n.bg,borderTop:`1px solid ${n.border}`,display:"flex",justifyContent:"space-between",alignItems:"stretch",padding:"0.25rem 0.5rem",paddingBottom:"calc(0.25rem + env(safe-area-inset-bottom))",margin:0,zIndex:1e4,minHeight:"80px",boxSizing:"border-box"},children:[i.jsxs("button",{onClick:()=>r("home"),style:o(e==="home"),children:[i.jsx(Sw,{size:22,strokeWidth:e==="home"?2.5:2}),i.jsx("span",{style:s,children:"Home"})]}),i.jsxs("button",{onClick:()=>r("calculators"),style:o(e==="calculators"),children:[i.jsx(mf,{size:22,strokeWidth:e==="calculators"?2.5:2}),i.jsx("span",{style:s,children:"Calculators"})]}),i.jsxs("button",{onClick:()=>r("jobs"),style:o(e==="jobs"),children:[i.jsx(Dd,{size:22,strokeWidth:e==="jobs"?2.5:2}),i.jsx("span",{style:s,children:"Jobs"})]}),i.jsxs("button",{onClick:()=>r("estimates"),style:o(e==="estimates"),children:[i.jsx(Lf,{size:22,strokeWidth:e==="estimates"?2.5:2}),i.jsx("span",{style:s,children:"Estimates"})]}),i.jsxs("button",{onClick:()=>r("invoices"),style:o(e==="invoices"),children:[i.jsx(f5,{size:22,strokeWidth:e==="invoices"?2.5:2}),i.jsx("span",{style:s,children:"Invoices"})]})]})}const hL=ce.forwardRef(({isDarkMode:r,onBack:e},t)=>{const[n,o]=ce.useState(""),[s,l]=ce.useState("460"),[d,h]=ce.useState("3"),[u,g]=ce.useState("normal"),[y,_]=ce.useState("0"),[b,R]=ce.useState("40"),[j,z]=ce.useState("variable"),T={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},F=((W,q,re)=>{if(!W||!q)return 0;const Z=parseFloat(W),te=parseFloat(q);return re==="3"?Z*746/(te*1.732*.85*.9):Z*746/(te*.85*.9)})(n,s,d),B=W=>{const q=parseFloat(W);return q<=3300?1:q<=5e3?.95:q<=6600?.9:q<=8200?.85:.8},J=W=>{const q=parseFloat(W);return q<=40?1:q<=45?.97:q<=50?.94:.91},se=W=>{switch(W){case"heavy":return 1.25;case"normal":return 1.15;case"light":return 1.1;default:return 1.15}},O=B(y),A=J(b),S=se(u),V=F*S/(O*A),w=[{amps:2,hp460V:1,hp230V:.5},{amps:3,hp460V:1.5,hp230V:1},{amps:5,hp460V:2,hp230V:1.5},{amps:7,hp460V:3,hp230V:2},{amps:10,hp460V:5,hp230V:3},{amps:14,hp460V:7.5,hp230V:5},{amps:18,hp460V:10,hp230V:7.5},{amps:24,hp460V:15,hp230V:10},{amps:31,hp460V:20,hp230V:15},{amps:40,hp460V:25,hp230V:20},{amps:52,hp460V:30,hp230V:25},{amps:62,hp460V:40,hp230V:30},{amps:77,hp460V:50,hp230V:40},{amps:96,hp460V:60,hp230V:50},{amps:124,hp460V:75,hp230V:60},{amps:156,hp460V:100,hp230V:75},{amps:180,hp460V:125,hp230V:100},{amps:240,hp460V:150,hp230V:125},{amps:302,hp460V:200,hp230V:150}].find(W=>W.amps>=V),N=O<1||A<1||u==="heavy";return ce.useImperativeHandle(t,()=>({exportPDF:()=>{if(!n){alert("Please enter motor horsepower before exporting to PDF");return}const W=j==="variable"?"Variable Torque (Fans, Pumps)":j==="constant"?"Constant Torque (Conveyors)":"High Starting Torque",q=u==="light"?"Light Duty (Intermittent)":u==="normal"?"Normal Duty":"Heavy Duty (Continuous)",re={calculatorName:"VFD Sizing Calculator",inputs:{"Motor Horsepower":`${n} HP`,Voltage:`${s}V`,Phases:d==="1"?"Single Phase":"Three Phase","Load Type":W,"Duty Cycle":q,Altitude:`${y} feet`,"Ambient Temperature":`${b}°C`},results:{"Motor Full Load Amperes (FLA)":`${F.toFixed(1)} A`,"Required VFD Current":`${V.toFixed(1)} A`,"Recommended VFD Rating":w?`${w.amps} A`:"N/A","VFD Motor HP (460V)":w?`${w.hp460V} HP`:"N/A","VFD Motor HP (230V)":w?`${w.hp230V} HP`:"N/A","Safety Margin":w?`${((w.amps/V-1)*100).toFixed(0)}%`:"N/A"},additionalInfo:{"Altitude Derating Factor":`${(O*100).toFixed(0)}%`,"Temperature Derating Factor":`${(A*100).toFixed(0)}%`,"Duty Cycle Factor":`${(S*100).toFixed(0)}%`,"Calculation Method":d==="3"?"Three Phase: (HP × 746) ÷ (V × 1.732 × 0.85 × 0.9)":"Single Phase: (HP × 746) ÷ (V × 0.85 × 0.9)","Required VFD Current Formula":"Motor FLA × Duty Cycle Factor ÷ (Altitude Factor × Temperature Factor)"},necReferences:["NEC Article 430 - Motors, Motor Circuits, and Controllers","NEC 430.122 - Rating of Motor Control Circuit Overcurrent Protective Device","Always follow VFD manufacturer specifications","Use shielded cables for motor connections to reduce EMI","Install line and load reactors when recommended by manufacturer","Ensure proper grounding and bonding per NEC Article 250","Consider bypass contactor for critical applications","Verify VFD voltage matches motor nameplate voltage","Consider harmonic filtering for sensitive equipment","Ensure adequate cooling and ventilation for VFD enclosure",O<1?`WARNING: High altitude derating applied (${(O*100).toFixed(0)}%)`:"",A<1?`WARNING: High temperature derating applied (${(A*100).toFixed(0)}%)`:"",u==="heavy"?"WARNING: Heavy duty cycle requires oversizing for continuous operation":""].filter(Z=>Z!=="")};Yr(re)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:T.cardBg,border:`1px solid ${T.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:T.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${T.cardBorder}`,paddingBottom:"0.5rem"},children:"Motor Information"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:T.labelText,marginBottom:"0.5rem"},children:"Motor Horsepower (HP)"}),i.jsx("input",{type:"number",value:n,onChange:W=>o(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${T.inputBorder}`,borderRadius:"8px",backgroundColor:T.inputBg,color:T.cardText,boxSizing:"border-box"},placeholder:"Enter HP",step:"0.5"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:T.labelText,marginBottom:"0.5rem"},children:"Voltage (V)"}),i.jsxs("select",{value:s,onChange:W=>l(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${T.inputBorder}`,borderRadius:"8px",backgroundColor:T.inputBg,color:T.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"230",children:"230V"}),i.jsx("option",{value:"460",children:"460V"}),i.jsx("option",{value:"575",children:"575V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:T.labelText,marginBottom:"0.5rem"},children:"Phases"}),i.jsxs("select",{value:d,onChange:W=>h(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${T.inputBorder}`,borderRadius:"8px",backgroundColor:T.inputBg,color:T.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"1",children:"Single Phase"}),i.jsx("option",{value:"3",children:"Three Phase"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:T.labelText,marginBottom:"0.5rem"},children:"Load Type"}),i.jsxs("select",{value:j,onChange:W=>z(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${T.inputBorder}`,borderRadius:"8px",backgroundColor:T.inputBg,color:T.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"variable",children:"Variable Torque (Fans, Pumps)"}),i.jsx("option",{value:"constant",children:"Constant Torque (Conveyors)"}),i.jsx("option",{value:"highTorque",children:"High Starting Torque"})]})]})]})]}),i.jsxs("div",{style:{background:T.cardBg,border:`1px solid ${T.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:T.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${T.cardBorder}`,paddingBottom:"0.5rem"},children:"Environmental Conditions"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:T.labelText,marginBottom:"0.5rem"},children:"Duty Cycle"}),i.jsxs("select",{value:u,onChange:W=>g(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${T.inputBorder}`,borderRadius:"8px",backgroundColor:T.inputBg,color:T.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"light",children:"Light Duty (Intermittent)"}),i.jsx("option",{value:"normal",children:"Normal Duty"}),i.jsx("option",{value:"heavy",children:"Heavy Duty (Continuous)"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:T.labelText,marginBottom:"0.5rem"},children:"Altitude (feet)"}),i.jsx("input",{type:"number",value:y,onChange:W=>_(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${T.inputBorder}`,borderRadius:"8px",backgroundColor:T.inputBg,color:T.cardText,boxSizing:"border-box"},placeholder:"0",step:"100"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:T.labelText,marginBottom:"0.5rem"},children:"Ambient Temp (°C)"}),i.jsx("input",{type:"number",value:b,onChange:W=>R(W.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${T.inputBorder}`,borderRadius:"8px",backgroundColor:T.inputBg,color:T.cardText,boxSizing:"border-box"},placeholder:"40"})]})]}),i.jsxs("div",{style:{background:T.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${T.cardBorder}`},children:[i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:T.cardText,marginTop:0,marginBottom:"0.75rem"},children:"Derating Factors"}),i.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:T.labelText},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Altitude Factor:"}),i.jsxs("span",{style:{fontWeight:"600",color:T.cardText},children:[(O*100).toFixed(0),"%"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Temperature Factor:"}),i.jsxs("span",{style:{fontWeight:"600",color:T.cardText},children:[(A*100).toFixed(0),"%"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Duty Cycle Factor:"}),i.jsxs("span",{style:{fontWeight:"600",color:T.cardText},children:[(S*100).toFixed(0),"%"]})]})]})]})]})]}),n&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:T.cardBg,border:`1px solid ${T.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:T.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:T.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:T.labelText,marginBottom:"0.25rem"},children:"Motor FLA"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:T.cardText},children:F.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:T.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),i.jsxs("div",{style:{background:T.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:T.labelText,marginBottom:"0.25rem"},children:"Required VFD Current"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:T.cardText},children:V.toFixed(1)}),i.jsx("div",{style:{fontSize:"0.75rem",color:T.labelText,marginTop:"0.25rem"},children:"Amperes"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Recommended VFD"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:w?w.amps:"N/A"}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Amperes"})]})]}),w&&i.jsxs("div",{style:{background:T.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${T.cardBorder}`},children:[i.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"600",color:T.cardText,marginTop:0,marginBottom:"0.75rem"},children:"VFD Specifications"}),i.jsxs("div",{style:{display:"grid",gap:"0.5rem",fontSize:"0.875rem",color:T.labelText},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Current Rating:"}),i.jsxs("span",{style:{fontWeight:"600",color:T.cardText},children:[w.amps," Amperes"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Motor HP (460V):"}),i.jsxs("span",{style:{fontWeight:"600",color:T.cardText},children:[w.hp460V," HP"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:"Motor HP (230V):"}),i.jsxs("span",{style:{fontWeight:"600",color:T.cardText},children:[w.hp230V," HP"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"0.5rem",borderTop:`1px solid ${T.cardBorder}`,marginTop:"0.25rem"},children:[i.jsx("span",{children:"Safety Margin:"}),i.jsxs("span",{style:{fontWeight:"600",color:"#059669"},children:[((w.amps/V-1)*100).toFixed(0),"%"]})]})]})]})]}),w&&!N&&i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"VFD Selection Complete"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Selected VFD meets all requirements with adequate safety margin for reliable operation."})]})]})}),N&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Rl,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{lineHeight:"1.5"},children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"600",color:"#78350f",marginBottom:"0.5rem"},children:"Important Considerations"}),i.jsxs("ul",{style:{fontSize:"0.8125rem",color:"#92400e",margin:0,paddingLeft:"1.25rem"},children:[O<1&&i.jsxs("li",{style:{marginBottom:"0.25rem"},children:["High altitude installation requires derating (",(O*100).toFixed(0),"% of rated capacity)"]}),A<1&&i.jsxs("li",{style:{marginBottom:"0.25rem"},children:["High ambient temperature requires derating (",(A*100).toFixed(0),"% of rated capacity)"]}),u==="heavy"&&i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Heavy duty cycle applications require oversizing for continuous operation"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Verify VFD voltage matches motor nameplate voltage"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Consider harmonic filtering for sensitive equipment"}),i.jsx("li",{children:"Ensure adequate cooling and ventilation"})]})]})]})})]}),i.jsxs("div",{style:{background:T.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${T.cardBorder}`,fontSize:"0.8125rem",color:T.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:T.cardText},children:"VFD Installation Notes:"}),"Always follow manufacturer specifications • Use shielded cables for motor connections • Install line and load reactors when recommended • Ensure proper grounding and bonding • Consider bypass contactor for critical applications"]})]})}),fL=ce.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=ce.useState("inductive"),[o,s]=ce.useState("60"),[l,d]=ce.useState(""),[h,u]=ce.useState("mH"),[g,y]=ce.useState("60"),[_,b]=ce.useState(""),[R,j]=ce.useState("μF"),[z,T]=ce.useState(""),[M,F]=ce.useState(""),[B,J]=ce.useState("inductive"),[se,O]=ce.useState(""),[A,S]=ce.useState("mH"),[V,I]=ce.useState(""),[w,N]=ce.useState("μF"),W={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},q=()=>{if(!o||!l)return null;const Y=parseFloat(o);let ae=parseFloat(l);return h==="mH"?ae=ae/1e3:h==="μH"&&(ae=ae/1e6),{reactance:(2*Math.PI*Y*ae).toFixed(2),frequency:Y,inductance:l,unit:h}},re=()=>{if(!g||!_)return null;const Y=parseFloat(g);let ae=parseFloat(_);return R==="μF"?ae=ae/1e6:R==="nF"?ae=ae/1e9:R==="pF"&&(ae=ae/1e12),{reactance:(1/(2*Math.PI*Y*ae)).toFixed(2),frequency:Y,capacitance:_,unit:R}},Z=()=>{if(!z||!M)return null;const Y=parseFloat(z),ae=parseFloat(M),fe=Math.sqrt(Y*Y+ae*ae),me=Math.atan2(ae,Y)*(180/Math.PI);return{impedance:fe.toFixed(2),angle:me.toFixed(2),resistance:Y,reactance:ae,type:B}},te=()=>{if(!se||!V)return null;let Y=parseFloat(se),ae=parseFloat(V);return A==="mH"?Y=Y/1e3:A==="μH"&&(Y=Y/1e6),w==="μF"?ae=ae/1e6:w==="nF"?ae=ae/1e9:w==="pF"&&(ae=ae/1e12),{frequency:(1/(2*Math.PI*Math.sqrt(Y*ae))).toFixed(2),inductance:se,inductanceUnit:A,capacitance:V,capacitanceUnit:w}},ye=q(),we=re(),ie=Z(),$=te();return ce.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="inductive"){if(!o||!l){alert("Please enter all required values before exporting to PDF");return}const Y={calculatorName:"Reactance & Impedance - Inductive Reactance (XL)",inputs:{Frequency:`${o} Hz`,Inductance:`${l} ${h}`},results:{"Inductive Reactance (XL)":`${ye.reactance} Ω`},additionalInfo:{Formula:"XL = 2πfL",Description:"Inductive reactance increases with frequency and opposes changes in current flow"},necReferences:["Inductive reactance is directly proportional to frequency","In AC circuits, inductors oppose current changes","XL increases linearly with both frequency and inductance"]};Yr(Y)}else if(t==="capacitive"){if(!g||!_){alert("Please enter all required values before exporting to PDF");return}const Y={calculatorName:"Reactance & Impedance - Capacitive Reactance (XC)",inputs:{Frequency:`${g} Hz`,Capacitance:`${_} ${R}`},results:{"Capacitive Reactance (XC)":`${we.reactance} Ω`},additionalInfo:{Formula:"XC = 1 / (2πfC)",Description:"Capacitive reactance decreases with frequency and opposes changes in voltage"},necReferences:["Capacitive reactance is inversely proportional to frequency","In AC circuits, capacitors oppose voltage changes","XC decreases as frequency or capacitance increases"]};Yr(Y)}else if(t==="impedance"){if(!z||!M){alert("Please enter all required values before exporting to PDF");return}const Y={calculatorName:"Reactance & Impedance - Impedance Calculator",inputs:{"Reactance Type":B.charAt(0).toUpperCase()+B.slice(1),"Resistance (R)":`${z} Ω`,"Reactance (X)":`${M} Ω`},results:{"Impedance (Z)":`${ie.impedance} Ω`,"Phase Angle (θ)":`${ie.angle}°`,"Phase Relationship":B==="inductive"?"Leading":"Lagging"},additionalInfo:{"Impedance Formula":"Z = √(R² + X²)","Phase Angle Formula":"θ = arctan(X / R)",Description:"Impedance is the total opposition to current flow in an AC circuit, combining resistance and reactance"},necReferences:["Impedance combines resistive and reactive components","Phase angle indicates the relationship between voltage and current","In inductive circuits, current lags voltage; in capacitive circuits, current leads voltage"]};Yr(Y)}else if(t==="resonance"){if(!se||!V){alert("Please enter all required values before exporting to PDF");return}const Y={calculatorName:"Reactance & Impedance - Resonant Frequency",inputs:{Inductance:`${se} ${A}`,Capacitance:`${V} ${w}`},results:{"Resonant Frequency (fr)":`${$.frequency} Hz`},additionalInfo:{Formula:"fr = 1 / (2π√LC)","At Resonance":"Inductive and capacitive reactances are equal and opposite (XL = XC)","Series Circuit":"Minimum impedance at resonance","Parallel Circuit":"Maximum impedance at resonance"},necReferences:["Resonance occurs when XL = XC","At resonant frequency, circuit is purely resistive","Series resonant circuits have minimum impedance","Parallel resonant circuits have maximum impedance"]};Yr(Y)}}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:W.cardBg,border:`1px solid ${W.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsxs("button",{onClick:()=>n("inductive"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="inductive"?"#3b82f6":"transparent",color:t==="inductive"?"white":W.labelText,border:`1px solid ${t==="inductive"?"#3b82f6":W.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:["Inductive (X",i.jsx("sub",{children:"L"}),")"]}),i.jsxs("button",{onClick:()=>n("capacitive"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="capacitive"?"#3b82f6":"transparent",color:t==="capacitive"?"white":W.labelText,border:`1px solid ${t==="capacitive"?"#3b82f6":W.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:["Capacitive (X",i.jsx("sub",{children:"C"}),")"]}),i.jsx("button",{onClick:()=>n("impedance"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="impedance"?"#3b82f6":"transparent",color:t==="impedance"?"white":W.labelText,border:`1px solid ${t==="impedance"?"#3b82f6":W.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Impedance (Z)"}),i.jsx("button",{onClick:()=>n("resonance"),style:{flex:"1 1 auto",minWidth:"110px",padding:"0.75rem 1rem",background:t==="resonance"?"#3b82f6":"transparent",color:t==="resonance"?"white":W.labelText,border:`1px solid ${t==="resonance"?"#3b82f6":W.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Resonance"})]})}),t==="inductive"&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:W.cardBg,border:`1px solid ${W.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:W.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${W.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:W.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),i.jsx("input",{type:"number",value:o,onChange:Y=>s(Y.target.value),placeholder:"60",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:W.subtleText,marginTop:"0.25rem"},children:"Common: 50 Hz or 60 Hz"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:W.labelText,marginBottom:"0.5rem"},children:"Inductance"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[i.jsx("input",{type:"number",value:l,onChange:Y=>d(Y.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"}}),i.jsxs("select",{value:h,onChange:Y=>u(Y.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"H",children:"H"}),i.jsx("option",{value:"mH",children:"mH"}),i.jsx("option",{value:"μH",children:"μH"})]})]})]})]})]}),ye&&i.jsx("div",{children:i.jsxs("div",{style:{background:W.cardBg,border:`1px solid ${W.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:W.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Inductive Reactance (X",i.jsx("sub",{children:"L"}),")"]}),i.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:ye.reactance}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms (Ω)"})]}),i.jsxs("div",{style:{background:W.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${W.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:W.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:W.cardText},children:"Circuit Values:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:W.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Frequency: ",ye.frequency," Hz"]}),i.jsxs("div",{children:["Inductance: ",ye.inductance," ",ye.unit]}),i.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:W.subtleText},children:["Formula: X",i.jsx("sub",{children:"L"})," = 2πfL"]})]})]})]})})]}),t==="capacitive"&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:W.cardBg,border:`1px solid ${W.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:W.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${W.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:W.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),i.jsx("input",{type:"number",value:g,onChange:Y=>y(Y.target.value),placeholder:"60",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:W.subtleText,marginTop:"0.25rem"},children:"Common: 50 Hz or 60 Hz"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:W.labelText,marginBottom:"0.5rem"},children:"Capacitance"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[i.jsx("input",{type:"number",value:_,onChange:Y=>b(Y.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"}}),i.jsxs("select",{value:R,onChange:Y=>j(Y.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"μF",children:"μF"}),i.jsx("option",{value:"nF",children:"nF"}),i.jsx("option",{value:"pF",children:"pF"})]})]})]})]})]}),we&&i.jsx("div",{children:i.jsxs("div",{style:{background:W.cardBg,border:`1px solid ${W.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:W.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Capacitive Reactance (X",i.jsx("sub",{children:"C"}),")"]}),i.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:we.reactance}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms (Ω)"})]}),i.jsxs("div",{style:{background:W.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${W.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:W.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:W.cardText},children:"Circuit Values:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:W.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Frequency: ",we.frequency," Hz"]}),i.jsxs("div",{children:["Capacitance: ",we.capacitance," ",we.unit]}),i.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:W.subtleText},children:["Formula: X",i.jsx("sub",{children:"C"})," = 1 / (2πfC)"]})]})]})]})})]}),t==="impedance"&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:W.cardBg,border:`1px solid ${W.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:W.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${W.cardBorder}`,paddingBottom:"0.5rem"},children:"Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:W.labelText,marginBottom:"0.5rem"},children:"Reactance Type"}),i.jsxs("select",{value:B,onChange:Y=>J(Y.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"},children:[i.jsxs("option",{value:"inductive",children:["Inductive (X",i.jsx("sub",{children:"L"}),")"]}),i.jsxs("option",{value:"capacitive",children:["Capacitive (X",i.jsx("sub",{children:"C"}),")"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:W.labelText,marginBottom:"0.5rem"},children:"Resistance (R) in Ohms"}),i.jsx("input",{type:"number",value:z,onChange:Y=>T(Y.target.value),placeholder:"Enter resistance",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:W.labelText,marginBottom:"0.5rem"},children:"Reactance (X) in Ohms"}),i.jsx("input",{type:"number",value:M,onChange:Y=>F(Y.target.value),placeholder:"Enter reactance",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"}})]})]})]}),ie&&i.jsx("div",{children:i.jsxs("div",{style:{background:W.cardBg,border:`1px solid ${W.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:W.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Impedance (Z)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:ie.impedance}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Ohms (Ω)"})]}),i.jsxs("div",{style:{background:W.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:W.labelText,marginBottom:"0.25rem"},children:"Phase Angle (θ)"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:W.cardText},children:[ie.angle,"°"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:W.labelText,marginTop:"0.25rem"},children:B==="inductive"?"Leading":"Lagging"})]})]}),i.jsxs("div",{style:{background:W.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${W.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:W.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:W.cardText},children:"Circuit Values:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:W.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Resistance (R): ",ie.resistance," Ω"]}),i.jsxs("div",{children:["Reactance (X): ",ie.reactance," Ω (",ie.type,")"]}),i.jsx("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:W.subtleText},children:"Formula: Z = √(R² + X²)"}),i.jsx("div",{style:{fontStyle:"italic",color:W.subtleText},children:"Phase Angle: θ = arctan(X / R)"})]})]})]})})]}),t==="resonance"&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:W.cardBg,border:`1px solid ${W.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:W.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${W.cardBorder}`,paddingBottom:"0.5rem"},children:"LC Circuit Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:W.labelText,marginBottom:"0.5rem"},children:"Inductance"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[i.jsx("input",{type:"number",value:se,onChange:Y=>O(Y.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"}}),i.jsxs("select",{value:A,onChange:Y=>S(Y.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"H",children:"H"}),i.jsx("option",{value:"mH",children:"mH"}),i.jsx("option",{value:"μH",children:"μH"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:W.labelText,marginBottom:"0.5rem"},children:"Capacitance"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[i.jsx("input",{type:"number",value:V,onChange:Y=>I(Y.target.value),placeholder:"Enter value",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"}}),i.jsxs("select",{value:w,onChange:Y=>N(Y.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${W.inputBorder}`,borderRadius:"8px",backgroundColor:W.inputBg,color:W.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"μF",children:"μF"}),i.jsx("option",{value:"nF",children:"nF"}),i.jsx("option",{value:"pF",children:"pF"})]})]})]})]})]}),$&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:W.cardBg,border:`1px solid ${W.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:W.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:["Resonant Frequency (f",i.jsx("sub",{children:"r"}),")"]}),i.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af"},children:$.frequency}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.25rem"},children:"Hertz (Hz)"})]}),i.jsxs("div",{style:{background:W.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${W.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:W.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:W.cardText},children:"Circuit Values:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:W.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Inductance: ",$.inductance," ",$.inductanceUnit]}),i.jsxs("div",{children:["Capacitance: ",$.capacitance," ",$.capacitanceUnit]}),i.jsxs("div",{style:{marginTop:"0.5rem",fontStyle:"italic",color:W.subtleText},children:["Formula: f",i.jsx("sub",{children:"r"})," = 1 / (2π√LC)"]})]})]})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Gi,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"About Resonant Frequency:"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"At resonance, inductive and capacitive reactances are equal and opposite, resulting in minimum impedance in series circuits and maximum impedance in parallel circuits."})]})]})})]})]}),i.jsxs("div",{style:{background:W.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${W.cardBorder}`,fontSize:"0.8125rem",color:W.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:W.cardText},children:"Key Concepts:"}),"X",i.jsx("sub",{children:"L"})," increases with frequency • X",i.jsx("sub",{children:"C"})," decreases with frequency • At resonance X",i.jsx("sub",{children:"L"})," = X",i.jsx("sub",{children:"C"})," • Impedance combines resistance and reactance"]})]})}),pL=ce.forwardRef(({isDarkMode:r=!1},e)=>{const[t,n]=ce.useState("correction"),[o,s]=ce.useState(""),[l,d]=ce.useState("480"),[h,u]=ce.useState(""),[g,y]=ce.useState("0.95"),[_,b]=ce.useState("60"),[R,j]=ce.useState(""),[z,T]=ce.useState(""),[M,F]=ce.useState("0.95"),[B,J]=ce.useState(""),[se,O]=ce.useState(""),[A,S]=ce.useState("8760"),[V,I]=ce.useState(""),w={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},N=()=>{if(!o||!h)return null;const Z=parseFloat(o),te=parseFloat(h),ye=parseFloat(g),we=parseFloat(l),ie=parseFloat(_),$=Math.acos(te),Y=Math.acos(ye),ae=Z*Math.tan($),fe=Z*Math.tan(Y),Se=ae-fe,ke=Se*1e9/(2*Math.PI*ie*we*we),Ae=Z/te,Fe=Z/ye,He=Ae*1e3/(Math.sqrt(3)*we),Ze=Fe*1e3/(Math.sqrt(3)*we),Xe=(He-Ze)/He*100;return{kVAR:Se.toFixed(2),capacitance:ke.toFixed(2),existingApparentPower:Ae.toFixed(2),correctedApparentPower:Fe.toFixed(2),powerReduction:((Ae-Fe)/Ae*100).toFixed(1),existingCurrent:He.toFixed(2),correctedCurrent:Ze.toFixed(2),currentReduction:Xe.toFixed(1),existingPF:(te*100).toFixed(1),targetPF:(ye*100).toFixed(1)}},W=()=>{if(!R||!z||!B)return null;const Z=parseFloat(R),te=parseFloat(z),ye=parseFloat(M),we=parseFloat(B),ie=parseFloat(se)||0,$=parseFloat(A),Y=parseFloat(V)||0,ae=Z/te,fe=Z/ye,me=ae-fe,Se=me*we,Ae=(ye-te)*100*.01,Fe=Z*$*(Ae/100)*ie,He=Y*12,Ze=Se*12,Xe=Ze+Fe+He,ge=Math.acos(te),le=Math.acos(ye),at=Z*(Math.tan(ge)-Math.tan(le)),dt=at*75,lt=Xe>0?dt/Xe*12:0;return{kVAReduction:me.toFixed(2),monthlyDemandSavings:Se.toFixed(2),annualDemandSavings:Ze.toFixed(2),annualEnergySavings:Fe.toFixed(2),annualPenaltySavings:He.toFixed(2),totalAnnualSavings:Xe.toFixed(2),kVARRequired:at.toFixed(2),estimatedCost:dt.toFixed(2),paybackMonths:lt.toFixed(1),paybackYears:(lt/12).toFixed(1),fiveYearSavings:(Xe*5-dt).toFixed(2)}},q=N(),re=W();return ce.useImperativeHandle(e,()=>({exportPDF:()=>{if(t==="correction"){if(!o||!h){alert("Please enter all required values before exporting to PDF");return}const Z={calculatorName:"Power Factor Correction - Capacitor Sizing",inputs:{"Real Power":`${o} kW`,"System Voltage":`${l}V`,"Existing Power Factor":h,"Target Power Factor":g,Frequency:`${_} Hz`},results:{"Required Capacitor Size":`${q.kVAR} kVAR`,"Capacitance per Phase":`${q.capacitance} μF`,"Power Factor Before":`${q.existingPF}%`,"Power Factor After":`${q.targetPF}%`,"Apparent Power Before":`${q.existingApparentPower} kVA`,"Apparent Power After":`${q.correctedApparentPower} kVA`,"Apparent Power Reduction":`${q.powerReduction}%`,"Line Current Before":`${q.existingCurrent} A`,"Line Current After":`${q.correctedCurrent} A`,"Current Reduction":`${q.currentReduction}%`},additionalInfo:{Benefits:"Power factor correction reduces utility demand charges, lowers line losses and voltage drop, increases system capacity, reduces equipment heating, and improves voltage regulation."},necReferences:["NEC Article 460 - Capacitors","NEC 460.8 - Conductors supplying capacitors shall have an ampacity of not less than 135% of the rated current of the capacitor","NEC 460.9 - Rating or Setting of Motor Overload Device"]};Yr(Z)}else if(t==="savings"){if(!R||!z||!B){alert("Please enter all required values before exporting to PDF");return}const Z={calculatorName:"Power Factor Correction - Cost Savings Analysis",inputs:{"Real Power":`${R} kW`,"Operating Hours per Year":A,"Existing Power Factor":z,"Target Power Factor":M,"Demand Charge":`$${B}/kVA/month`,"Energy Rate":se?`$${se}/kWh`:"Not specified","Monthly PF Penalty":V?`$${V}/month`:"None"},results:{"Total Annual Savings":`$${re.totalAnnualSavings}/year`,"Monthly Demand Savings":`$${re.monthlyDemandSavings}/month`,"Annual Demand Savings":`$${re.annualDemandSavings}/year`,"Annual Energy Savings":`$${re.annualEnergySavings}/year`,"Annual Penalty Savings":`$${re.annualPenaltySavings}/year`,"kVA Reduction":`${re.kVAReduction} kVA`,"Required Capacitor Size":`${re.kVARRequired} kVAR`,"Estimated Equipment Cost":`$${re.estimatedCost}`,"Payback Period":`${re.paybackMonths} months (${re.paybackYears} years)`,"5-Year Net Savings":`$${re.fiveYearSavings}`},additionalInfo:{"Cost Basis":"Estimated at $75 per kVAR installed","Savings Note":"Actual costs and savings may vary based on equipment selection, installation costs, utility rate structures, and load profiles"},necReferences:["NEC Article 460 - Capacitors","NEC 460.8 - Conductors supplying capacitors shall have an ampacity of not less than 135% of the rated current of the capacitor","IEEE Std 18-2012 - Standard for Shunt Power Capacitors"]};Yr(Z)}}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsx("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>n("correction"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="correction"?"#3b82f6":"transparent",color:t==="correction"?"white":w.labelText,border:`1px solid ${t==="correction"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Capacitor Sizing"}),i.jsx("button",{onClick:()=>n("savings"),style:{flex:"1 1 auto",minWidth:"140px",padding:"0.75rem 1rem",background:t==="savings"?"#3b82f6":"transparent",color:t==="savings"?"white":w.labelText,border:`1px solid ${t==="savings"?"#3b82f6":w.cardBorder}`,borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"all 0.2s"},children:"Cost Savings"})]})}),t==="correction"?i.jsxs("div",{children:[i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"System Parameters"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Real Power (kW)"}),i.jsx("input",{type:"number",value:o,onChange:Z=>s(Z.target.value),placeholder:"Enter load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"System Voltage (V)"}),i.jsxs("select",{value:l,onChange:Z=>d(Z.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Existing Power Factor"}),i.jsx("input",{type:"number",value:h,onChange:Z=>u(Z.target.value),placeholder:"0.70 - 0.99",step:"0.01",min:"0.5",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Current (uncorrected)"})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:["Target Power  ",i.jsx("br",{}),"Factor ",i.jsx("br",{})]}),i.jsxs("select",{value:g,onChange:Z=>y(Z.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"0.90",children:"0.90 (90%)"}),i.jsx("option",{value:"0.95",children:"0.95 (95%) - Recommended"}),i.jsx("option",{value:"0.98",children:"0.98 (98%)"}),i.jsx("option",{value:"0.99",children:"0.99 (99%)"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Frequency (Hz)"}),i.jsxs("select",{value:_,onChange:Z=>b(Z.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"50",children:"50 Hz"}),i.jsx("option",{value:"60",children:"60 Hz"})]})]})]})]}),q&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Required Capacitor Bank"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Capacitor Size"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:q.kVAR}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"kVAR"})]}),i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Capacitance"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:q.capacitance}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:"μF per phase"})]})]}),i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:w.cardText},children:"Power Factor Improvement:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["From: ",q.existingPF,"% → To: ",q.targetPF,"%"]}),i.jsxs("div",{children:["Real Power: ",o," kW (constant)"]}),i.jsxs("div",{children:["System Voltage: ",l,"V, ",_," Hz"]})]})]})]}),i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"System Improvements"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:w.cardText,marginBottom:"0.5rem"},children:"Apparent Power Reduction"}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Before: ",q.existingApparentPower," kVA"]}),i.jsxs("div",{children:["After: ",q.correctedApparentPower," kVA"]}),i.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#059669",marginTop:"0.25rem"},children:["Reduction: ",q.powerReduction,"%"]})]})]}),i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:w.cardText,marginBottom:"0.5rem"},children:"Line Current Reduction"}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Before: ",q.existingCurrent," A"]}),i.jsxs("div",{children:["After: ",q.correctedCurrent," A"]}),i.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#059669",marginTop:"0.25rem"},children:["Reduction: ",q.currentReduction,"%"]})]})]})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(wC,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Benefits of Power Factor Correction:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.8125rem"},children:[i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Reduced utility demand charges"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Lower line losses and voltage drop"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Increased system capacity"}),i.jsx("li",{style:{marginBottom:"0.25rem"},children:"Reduced equipment heating"}),i.jsx("li",{children:"Improved voltage regulation"})]})]})]})})]})]}):i.jsxs("div",{children:[i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Load & Power Factor"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:["Real Power ",i.jsx("br",{})," (kW)"]}),i.jsx("input",{type:"number",value:R,onChange:Z=>j(Z.target.value),placeholder:"Enter load",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Operating Hours/Year"}),i.jsx("input",{type:"number",value:A,onChange:Z=>S(Z.target.value),placeholder:"8760",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"8760 = 24/7 operation"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Existing Power Factor"}),i.jsx("input",{type:"number",value:z,onChange:Z=>T(Z.target.value),placeholder:"0.70 - 0.99",step:"0.01",min:"0.5",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:["Target Power ",i.jsx("br",{})," Factor"]}),i.jsxs("select",{value:M,onChange:Z=>F(Z.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"0.90",children:"0.90 (90%)"}),i.jsx("option",{value:"0.95",children:"0.95 (95%)"}),i.jsx("option",{value:"0.98",children:"0.98 (98%)"})]})]})]})]})]}),i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${w.cardBorder}`,paddingBottom:"0.5rem"},children:"Utility Rates"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Demand Charge ($/kVA/month)"}),i.jsx("input",{type:"number",value:B,onChange:Z=>J(Z.target.value),placeholder:"10 - 25",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"Check your utility bill"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Energy Rate ($/kWh) - Optional"}),i.jsx("input",{type:"number",value:se,onChange:Z=>O(Z.target.value),placeholder:"0.08 - 0.15",step:"0.001",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"For energy loss savings"})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:w.labelText,marginBottom:"0.5rem"},children:"Monthly PF Penalty ($/month) - Optional"}),i.jsx("input",{type:"number",value:V,onChange:Z=>I(Z.target.value),placeholder:"0",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${w.inputBorder}`,borderRadius:"8px",backgroundColor:w.inputBg,color:w.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:w.subtleText,marginTop:"0.25rem"},children:"If utility charges PF penalty"})]})]})]}),re&&i.jsxs("div",{children:[i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Annual Cost Savings"}),i.jsxs("div",{style:{background:"#d1fae5",padding:"1rem",borderRadius:"8px",textAlign:"center",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"#059669",marginBottom:"0.5rem",fontWeight:"600"},children:"Total Annual Savings"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#059669"},children:["$",re.totalAnnualSavings]}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#059669",marginTop:"0.25rem"},children:"per year"})]}),i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:w.labelText,marginBottom:"0.5rem"},children:i.jsx("strong",{style:{color:w.cardText},children:"Savings Breakdown:"})}),i.jsxs("div",{style:{fontSize:"0.8125rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[i.jsxs("div",{children:["Demand Charge Savings: $",re.annualDemandSavings,"/year"]}),parseFloat(re.annualEnergySavings)>0&&i.jsxs("div",{children:["Energy Loss Savings: $",re.annualEnergySavings,"/year"]}),parseFloat(re.annualPenaltySavings)>0&&i.jsxs("div",{children:["Penalty Elimination: $",re.annualPenaltySavings,"/year"]}),i.jsxs("div",{style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:`1px solid ${w.cardBorder}`},children:["kVA Reduction: ",re.kVAReduction," kVA"]})]})]})]}),i.jsxs("div",{style:{background:w.cardBg,border:`1px solid ${w.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:w.cardText,marginTop:0,marginBottom:"1rem"},children:"Return on Investment"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:w.labelText,marginBottom:"0.25rem"},children:"Estimated Cost"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:w.cardText},children:["$",re.estimatedCost]}),i.jsxs("div",{style:{fontSize:"0.75rem",color:w.labelText,marginTop:"0.25rem"},children:[re.kVARRequired," kVAR @ $75/kVAR"]})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Payback Period"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:re.paybackMonths}),i.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:["months (",re.paybackYears," years)"]})]})]}),i.jsx("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:w.labelText,display:"grid",gap:"0.25rem"},children:[i.jsx("div",{children:i.jsx("strong",{style:{color:w.cardText},children:"5-Year Net Savings:"})}),i.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#059669",marginTop:"0.25rem"},children:["$",re.fiveYearSavings]}),i.jsx("div",{style:{fontSize:"0.8125rem",color:w.subtleText,marginTop:"0.25rem"},children:"Total savings minus initial investment"})]})})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #3b82f6",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Gi,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:"Note:"}),i.jsx("div",{style:{fontSize:"0.8125rem"},children:"Actual costs and savings may vary based on equipment selection, installation costs, utility rate structures, and load profiles. Consult with a qualified electrical engineer for detailed analysis."})]})]})})]})]}),i.jsxs("div",{style:{background:w.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${w.cardBorder}`,fontSize:"0.8125rem",color:w.labelText},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem",color:w.cardText},children:"Power Factor Basics:"}),"PF = Real Power (kW) ÷ Apparent Power (kVA) • Low PF causes higher current and utility charges • Target 0.95+ for optimal efficiency • Capacitors supply reactive power locally"]})]})}),mL=ce.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=ce.useState("from-kw-pf"),[s,l]=ce.useState(""),[d,h]=ce.useState(""),[u,g]=ce.useState(""),[y,_]=ce.useState(""),[b,R]=ce.useState("lagging"),j={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},T=(()=>{let F=0,B=0,J=0,se=0,O=0;switch(n){case"from-kw-pf":if(!s||!y)return null;F=parseFloat(s),se=parseFloat(y),J=F/se,O=Math.acos(se)*(180/Math.PI),B=J*Math.sin(Math.acos(se)),b==="leading"&&(B=-B);break;case"from-kw-kvar":if(!s||!d)return null;F=parseFloat(s),B=parseFloat(d),b==="leading"&&(B=-Math.abs(B)),J=Math.sqrt(Math.pow(F,2)+Math.pow(B,2)),se=F/J,O=Math.atan(Math.abs(B)/F)*(180/Math.PI);break;case"from-kva-pf":if(!u||!y)return null;J=parseFloat(u),se=parseFloat(y),F=J*se,O=Math.acos(se)*(180/Math.PI),B=J*Math.sin(Math.acos(se)),b==="leading"&&(B=-B);break;case"from-kva-kw":if(!u||!s||(J=parseFloat(u),F=parseFloat(s),F>J))return null;se=F/J,O=Math.acos(se)*(180/Math.PI),B=Math.sqrt(Math.pow(J,2)-Math.pow(F,2)),b==="leading"&&(B=-B);break;default:return null}return{kW:F,kVAR:B,kVA:J,powerFactor:se,angle:O,isLeading:b==="leading"}})(),M=F=>{const B=Math.abs(F);return B>=.95?{quality:"Excellent",color:"#10b981",bg:"#d1fae5",border:"#6ee7b7"}:B>=.9?{quality:"Good",color:"#3b82f6",bg:"#dbeafe",border:"#93c5fd"}:B>=.85?{quality:"Fair",color:"#f59e0b",bg:"#fef3c7",border:"#fcd34d"}:{quality:"Poor",color:"#ef4444",bg:"#fee2e2",border:"#fca5a5"}};return ce.useImperativeHandle(t,()=>({exportPDF:()=>{if(!T){alert("Please enter values before exporting to PDF");return}const F=M(T.powerFactor),J={calculatorName:"Power Triangle Calculator",inputs:{calculationMode:{"from-kw-pf":"Real Power (kW) and Power Factor","from-kw-kvar":"Real Power (kW) and Reactive Power (kVAR)","from-kva-pf":"Apparent Power (kVA) and Power Factor","from-kva-kw":"Apparent Power (kVA) and Real Power (kW)"}[n],...s&&{realPower:`${s} kW`},...d&&{reactivePower:`${d} kVAR`},...u&&{apparentPower:`${u} kVA`},...y&&{powerFactor:y},reactiveType:b==="leading"?"Leading (Capacitive)":"Lagging (Inductive)"},results:{realPower:`${T.kW.toFixed(2)} kW`,reactivePower:`${Math.abs(T.kVAR).toFixed(2)} kVAR (${T.isLeading?"Leading":"Lagging"})`,apparentPower:`${T.kVA.toFixed(2)} kVA`,powerFactor:`${T.powerFactor.toFixed(4)} ${T.isLeading?"(Leading)":"(Lagging)"}`,phaseAngle:`${T.angle.toFixed(2)}°`,powerFactorQuality:F.quality},additionalInfo:{powerTriangleRelationship:"kVA² = kW² + kVAR²",powerFactorFormula:"PF = kW ÷ kVA = cos(θ)",reactivePowerFormula:"kVAR = kVA × sin(θ)",phaseAngleFormula:"θ = arccos(PF)",leadingVsLagging:T.isLeading?"Leading PF: Current leads voltage (capacitive loads)":"Lagging PF: Current lags voltage (inductive loads - most common)"},necReferences:["Power Factor: Ratio of real power to apparent power","Leading PF (capacitive): Synchronous motors, over-excited generators, capacitor banks","Lagging PF (inductive): Most common - motors, transformers, inductive loads","Poor power factor results in: Higher current draw, increased losses, utility penalties","Power factor correction: Add capacitors for lagging PF, add inductors for leading PF","Many utilities charge penalties for power factor below 0.90-0.95"]};Yr(J)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${j.cardBorder}`,paddingBottom:"0.5rem"},children:"Calculation Mode"}),i.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:[{value:"from-kw-pf",label:"From kW and Power Factor"},{value:"from-kw-kvar",label:"From kW and kVAR"},{value:"from-kva-pf",label:"From kVA and Power Factor"},{value:"from-kva-kw",label:"From kVA and kW"}].map(F=>i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:n===F.value?j.sectionBg:"transparent",border:`1px solid ${n===F.value?"#3b82f6":j.cardBorder}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseOver:B=>{n!==F.value&&(B.currentTarget.style.background=j.sectionBg)},onMouseOut:B=>{n!==F.value&&(B.currentTarget.style.background="transparent")},children:[i.jsx("input",{type:"radio",name:"calculationMode",value:F.value,checked:n===F.value,onChange:B=>o(B.target.value),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:j.cardText},children:F.label})]},F.value))})]}),i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${j.cardBorder}`,paddingBottom:"0.5rem"},children:"Input Values"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[(n==="from-kw-pf"||n==="from-kw-kvar"||n==="from-kva-kw")&&i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:["Real Power ",i.jsx("br",{}),"(kW)"]}),i.jsx("input",{type:"number",value:s,onChange:F=>l(F.target.value),placeholder:"Enter kW",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}})]}),n==="from-kw-kvar"&&i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Reactive Power (kVAR)"}),i.jsx("input",{type:"number",value:d,onChange:F=>h(F.target.value),placeholder:"Enter kVAR",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}})]}),(n==="from-kva-pf"||n==="from-kva-kw")&&i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:["Apparent Power ",i.jsx("br",{})," (kVA)"]}),i.jsx("input",{type:"number",value:u,onChange:F=>g(F.target.value),placeholder:"Enter kVA",step:"0.01",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}})]}),(n==="from-kw-pf"||n==="from-kva-pf")&&i.jsxs("div",{children:[i.jsxs("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:["Power Factor ",i.jsx("br",{}),"  ",i.jsx("br",{})]}),i.jsx("input",{type:"number",value:y,onChange:F=>_(F.target.value),placeholder:"0.00 to 1.00",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Reactive Power Type"}),i.jsxs("select",{value:b,onChange:F=>R(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"lagging",children:"Lagging (Inductive - Most Common)"}),i.jsx("option",{value:"leading",children:"Leading (Capacitive)"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.subtleText,marginTop:"0.25rem"},children:"Inductive: Motors, transformers | Capacitive: Capacitor banks, lightly loaded cables"})]})]}),T&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem"},children:"Power Triangle Results"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Real Power (kW)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:T.kW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginTop:"0.25rem"},children:"Working Power"})]}),i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Reactive Power (kVAR)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:Math.abs(T.kVAR).toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginTop:"0.25rem"},children:T.isLeading?"Leading":"Lagging"})]}),i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Apparent Power (kVA)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:T.kVA.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginTop:"0.25rem"},children:"Total Power"})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{style:{background:M(T.powerFactor).bg,border:`1px solid ${M(T.powerFactor).border}`,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:M(T.powerFactor).color,marginBottom:"0.25rem"},children:"Power Factor"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:M(T.powerFactor).color},children:T.powerFactor.toFixed(4)}),i.jsx("div",{style:{fontSize:"0.75rem",color:M(T.powerFactor).color,marginTop:"0.25rem"},children:M(T.powerFactor).quality})]}),i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginBottom:"0.25rem"},children:"Phase Angle (θ)"}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:j.cardText},children:[T.angle.toFixed(2),"°"]}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginTop:"0.25rem"},children:"V-I Phase Shift"})]})]})]}),i.jsx("div",{style:{background:j.sectionBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Gi,{size:20,color:"#3b82f6",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:j.labelText,lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",color:j.cardText,marginBottom:"0.5rem"},children:"Power Triangle Relationships:"}),i.jsxs("div",{style:{display:"grid",gap:"0.25rem"},children:[i.jsx("div",{children:"• kVA² = kW² + kVAR² (Pythagorean theorem)"}),i.jsx("div",{children:"• Power Factor = kW ÷ kVA = cos(θ)"}),i.jsx("div",{children:"• kVAR = kVA × sin(θ)"}),i.jsxs("div",{children:["• ",T.isLeading?"Leading PF: Current leads voltage (capacitive loads)":"Lagging PF: Current lags voltage (inductive loads - most common)"]})]})]})]})}),T.powerFactor<.9&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"12px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Gi,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Low Power Factor Alert"}),i.jsxs("div",{children:["Power factor below 0.90 may result in utility penalties and increased energy costs. Consider power factor correction using ",T.isLeading?"inductors (reactors)":"capacitor banks","to improve efficiency and reduce demand charges."]})]})]})})]})]})}),gL=ce.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=ce.useState("find-power"),[s,l]=ce.useState("480"),[d,h]=ce.useState(""),[u,g]=ce.useState("0.85"),[y,_]=ce.useState(""),[b,R]=ce.useState("line-to-line"),[j,z]=ce.useState(""),T={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb",subtleText:r?"#9ca3af":"#6b7280"},F=(()=>{const B=parseFloat(s),J=parseFloat(d),se=parseFloat(u),O=parseFloat(y),A=j?parseFloat(j)/100:1;if(n==="find-power"){if(!s||!d||!u)return null;const S=Math.sqrt(3)*B*J*se/1e3,V=Math.sqrt(3)*B*J/1e3,I=Math.sqrt(Math.pow(V,2)-Math.pow(S,2));return{kW:S,kVA:V,kVAR:I,current:J,voltage:B,powerFactor:se,amps:J}}else if(n==="find-current"){if(!s||!y||!u)return null;const S=O*1e3/(Math.sqrt(3)*B*se),V=Math.sqrt(3)*B*S/1e3,I=Math.sqrt(Math.pow(V,2)-Math.pow(O,2));return{kW:O,kVA:V,kVAR:I,current:S,voltage:B,powerFactor:se,amps:S}}else if(n==="motor-power"){if(!y||!j)return null;const S=O/A,V=O*1.341;let I=0;return s&&u&&(I=S*1e3/(Math.sqrt(3)*B*se)),{inputKW:S,outputKW:O,outputHP:V,efficiency:A*100,amps:I,voltage:B,powerFactor:se}}return null})();return ce.useImperativeHandle(t,()=>({exportPDF:()=>{if(!F){alert("Please enter all required values before exporting to PDF");return}const B={"find-power":"Calculate Power from Voltage & Current","find-current":"Calculate Current from Power & Voltage","motor-power":"Motor Power & Efficiency Calculation"};let J;n==="motor-power"?J={calculatorName:"Three-Phase Power Calculator - Motor",inputs:{calculationMode:B[n],outputPower:`${y} kW`,efficiency:`${j}%`,...s&&{voltage:`${s}V (${b==="line-to-line"?"Line-to-Line":"Line-to-Neutral"})`},...u&&{powerFactor:u}},results:{outputPower:`${F.outputKW.toFixed(2)} kW`,outputPowerHP:`${F.outputHP.toFixed(2)} HP`,inputPower:`${F.inputKW.toFixed(2)} kW`,efficiency:`${F.efficiency.toFixed(1)}%`,...F.amps>0&&{estimatedCurrent:`${F.amps.toFixed(2)} A`}},additionalInfo:{formula:"Input Power = Output Power ÷ Efficiency",hpConversion:"1 kW = 1.341 HP",note:j?`At ${j}% efficiency, motor draws ${F.inputKW.toFixed(2)} kW to produce ${F.outputKW.toFixed(2)} kW output`:""}}:J={calculatorName:"Three-Phase Power Calculator",inputs:{calculationMode:B[n],voltage:`${s}V (${b==="line-to-line"?"Line-to-Line":"Line-to-Neutral"})`,...d&&{current:`${d} A`},...y&&{power:`${y} kW`},powerFactor:u},results:{realPower:`${F.kW.toFixed(2)} kW`,apparentPower:`${F.kVA.toFixed(2)} kVA`,reactivePower:`${F.kVAR.toFixed(2)} kVAR`,current:`${F.amps.toFixed(2)} A`,voltage:`${F.voltage}V`,powerFactor:F.powerFactor},additionalInfo:{powerFormula:"P = √3 × V × I × PF (kW)",apparentPowerFormula:"S = √3 × V × I (kVA)",currentFormula:"I = P / (√3 × V × PF)",sqrt3:"√3 = 1.732",configuration:b==="line-to-line"?"Line-to-Line (most common)":"Line-to-Neutral",note:"Three-phase systems are more efficient for power transmission and are standard in industrial applications"},necReferences:["Three-phase power: P = √3 × VL-L × I × PF","Line-to-Line voltage: Standard between any two phases","Line-to-Neutral voltage: VL-N = VL-L ÷ √3","Common voltages: 208V, 240V, 480V, 600V (North America)","Three-phase systems provide constant power delivery","More efficient than single-phase for large loads and motors"]},Yr(J)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:T.cardBg,border:`1px solid ${T.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:T.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${T.cardBorder}`,paddingBottom:"0.5rem"},children:"Calculation Mode"}),i.jsx("div",{style:{display:"grid",gap:"0.5rem"},children:[{value:"find-power",label:"Find Power (from Voltage & Current)"},{value:"find-current",label:"Find Current (from Power & Voltage)"},{value:"motor-power",label:"Motor Power & Efficiency"}].map(B=>i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",background:n===B.value?T.sectionBg:"transparent",border:`1px solid ${n===B.value?"#3b82f6":T.cardBorder}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseOver:J=>{n!==B.value&&(J.currentTarget.style.background=T.sectionBg)},onMouseOut:J=>{n!==B.value&&(J.currentTarget.style.background="transparent")},children:[i.jsx("input",{type:"radio",name:"calculationMode",value:B.value,checked:n===B.value,onChange:J=>o(J.target.value),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:T.cardText},children:B.label})]},B.value))})]}),i.jsxs("div",{style:{background:T.cardBg,border:`1px solid ${T.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:T.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${T.cardBorder}`,paddingBottom:"0.5rem"},children:"Input Values"}),n==="motor-power"?i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:T.labelText,marginBottom:"0.5rem"},children:"Output Power (kW)"}),i.jsx("input",{type:"number",value:y,onChange:B=>_(B.target.value),placeholder:"Motor output power",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${T.inputBorder}`,borderRadius:"8px",backgroundColor:T.inputBg,color:T.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:T.labelText,marginBottom:"0.5rem"},children:"Motor Efficiency (%)"}),i.jsx("input",{type:"number",value:j,onChange:B=>z(B.target.value),placeholder:"85-95% typical",step:"0.1",min:"0",max:"100",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${T.inputBorder}`,borderRadius:"8px",backgroundColor:T.inputBg,color:T.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{fontSize:"0.75rem",color:T.subtleText,marginTop:"0.25rem"},children:"Optional: For current calculation, enter voltage and PF below"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",alignItems:"end"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:T.labelText,marginBottom:"0.5rem"},children:"Voltage (V) - Optional"}),i.jsxs("select",{value:s,onChange:B=>l(B.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${T.inputBorder}`,borderRadius:"8px",backgroundColor:T.inputBg,color:T.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"",children:"Select"}),i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"380",children:"380V"}),i.jsx("option",{value:"400",children:"400V"}),i.jsx("option",{value:"415",children:"415V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:T.labelText,marginBottom:"0.5rem"},children:"Power Factor - Optional"}),i.jsx("input",{type:"number",value:u,onChange:B=>g(B.target.value),placeholder:"0.80-0.95",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${T.inputBorder}`,borderRadius:"8px",backgroundColor:T.inputBg,color:T.cardText,boxSizing:"border-box"}})]})]})]}):i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:T.labelText,marginBottom:"0.5rem"},children:"Voltage Configuration"}),i.jsxs("select",{value:b,onChange:B=>R(B.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${T.inputBorder}`,borderRadius:"8px",backgroundColor:T.inputBg,color:T.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"line-to-line",children:"Line-to-Line (Most Common)"}),i.jsx("option",{value:"line-to-neutral",children:"Line-to-Neutral"})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:T.subtleText,marginTop:"0.25rem"},children:"Line-to-Line: Voltage between any two phases"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:T.labelText,marginBottom:"0.5rem"},children:"Voltage (V)"}),i.jsxs("select",{value:s,onChange:B=>l(B.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${T.inputBorder}`,borderRadius:"8px",backgroundColor:T.inputBg,color:T.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"208",children:"208V"}),i.jsx("option",{value:"240",children:"240V"}),i.jsx("option",{value:"380",children:"380V"}),i.jsx("option",{value:"400",children:"400V"}),i.jsx("option",{value:"415",children:"415V"}),i.jsx("option",{value:"480",children:"480V"}),i.jsx("option",{value:"600",children:"600V"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:T.labelText,marginBottom:"0.5rem"},children:"Power Factor"}),i.jsx("input",{type:"number",value:u,onChange:B=>g(B.target.value),placeholder:"0.80-0.95",step:"0.01",min:"0",max:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${T.inputBorder}`,borderRadius:"8px",backgroundColor:T.inputBg,color:T.cardText,boxSizing:"border-box"}})]})]}),n==="find-power"&&i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:T.labelText,marginBottom:"0.5rem"},children:"Current (Amps)"}),i.jsx("input",{type:"number",value:d,onChange:B=>h(B.target.value),placeholder:"Line current",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${T.inputBorder}`,borderRadius:"8px",backgroundColor:T.inputBg,color:T.cardText,boxSizing:"border-box"}})]}),n==="find-current"&&i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:T.labelText,marginBottom:"0.5rem"},children:"Power (kW)"}),i.jsx("input",{type:"number",value:y,onChange:B=>_(B.target.value),placeholder:"Real power",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${T.inputBorder}`,borderRadius:"8px",backgroundColor:T.inputBg,color:T.cardText,boxSizing:"border-box"}})]})]})]}),F&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{background:T.cardBg,border:`1px solid ${T.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:T.cardText,marginTop:0,marginBottom:"1rem"},children:"Results"}),n==="motor-power"?i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[i.jsxs("div",{style:{background:T.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:T.labelText,marginBottom:"0.25rem"},children:"Output Power"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:T.cardText},children:F.outputKW.toFixed(2)}),i.jsxs("div",{style:{fontSize:"0.75rem",color:T.labelText,marginTop:"0.25rem"},children:["kW (",F.outputHP.toFixed(2)," HP)"]})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Input Power Required"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:F.inputKW.toFixed(2)}),i.jsxs("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:["kW @ ",F.efficiency.toFixed(1),"% efficiency"]})]})]}),F.amps>0&&i.jsxs("div",{style:{background:T.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:T.labelText,marginBottom:"0.25rem"},children:"Estimated Current Draw"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:T.cardText},children:F.amps.toFixed(2)}),i.jsxs("div",{style:{fontSize:"0.75rem",color:T.labelText,marginTop:"0.25rem"},children:["Amps @ ",s,"V, PF ",u]})]})]}):i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:T.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:T.labelText,marginBottom:"0.25rem"},children:"Real Power (kW)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:T.cardText},children:F.kW.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:T.labelText,marginTop:"0.25rem"},children:"Working Power"})]}),i.jsxs("div",{style:{background:T.sectionBg,padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:T.labelText,marginBottom:"0.25rem"},children:"Apparent Power (kVA)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:T.cardText},children:F.kVA.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:T.labelText,marginTop:"0.25rem"},children:"Total Power"})]}),i.jsxs("div",{style:{background:"#dbeafe",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.25rem"},children:"Current (A)"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#1e40af"},children:F.amps.toFixed(2)}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginTop:"0.25rem"},children:"Line Current"})]})]})]}),i.jsx("div",{style:{background:T.sectionBg,border:`1px solid ${T.cardBorder}`,borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Gi,{size:20,color:"#3b82f6",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:T.labelText,lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",color:T.cardText,marginBottom:"0.5rem"},children:n==="motor-power"?"Motor Efficiency:":"Three-Phase Formulas:"}),i.jsx("div",{style:{display:"grid",gap:"0.25rem"},children:n==="motor-power"?i.jsxs(i.Fragment,{children:[i.jsx("div",{children:"• Input Power = Output Power ÷ Efficiency"}),i.jsx("div",{children:"• 1 kW = 1.341 HP"}),i.jsx("div",{children:"• Typical motor efficiency: 85-95%"}),i.jsx("div",{children:"• Higher efficiency motors use less power"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{children:"• P (kW) = √3 × V × I × PF ÷ 1000"}),i.jsx("div",{children:"• S (kVA) = √3 × V × I ÷ 1000"}),i.jsx("div",{children:"• I (A) = P × 1000 ÷ (√3 × V × PF)"}),i.jsx("div",{children:"• √3 = 1.732 (constant for 3-phase)"}),i.jsxs("div",{children:["• ",b==="line-to-line"?"Using Line-to-Line voltage":"Using Line-to-Neutral voltage"]})]})})]})]})}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"12px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Three-Phase Advantages:"}),i.jsxs("div",{style:{display:"grid",gap:"0.25rem"},children:[i.jsx("div",{children:"• Delivers constant, smooth power (no pulsation)"}),i.jsx("div",{children:"• More efficient for high-power applications"}),i.jsx("div",{children:"• Smaller conductor sizes for same power"}),i.jsx("div",{children:"• Standard for industrial and commercial buildings"}),i.jsx("div",{children:"• Required for large motors and heavy equipment"})]})]})]})})]})]})}),ew=[{value:"direct_burial",label:"Direct Burial Cables or Conductors",description:"Cables rated for direct burial without additional protection"},{value:"rigid_metal",label:"Rigid Metal Conduit (RMC) or IMC",description:"Galvanized rigid metal conduit or intermediate metal conduit"},{value:"nonmetallic",label:"Nonmetallic Raceways",description:"PVC, HDPE, or other approved nonmetallic conduit"},{value:"residential_gfci",label:"Residential Branch Circuits (GFCI, ≤20A, 120V)",description:"GFCI-protected residential circuits 20A or less at 120V"}],tw=[{value:"general",label:"General (Open Areas, Yards)"},{value:"under_building",label:'Under Building (4" Concrete)'},{value:"under_street",label:"Under Streets, Highways, Roads"},{value:"parking",label:"Parking Areas (Light Traffic)"},{value:"one_family",label:"One & Two Family Dwelling Driveways"}],xL=[{value:"0-600",label:"0-600V"},{value:"over_600",label:"Over 600V"}],yL=(r,e,t)=>{var o,s;return((s=(o={direct_burial:{general:{"0-600":24,over_600:30},under_building:{"0-600":0,over_600:0},under_street:{"0-600":24,over_600:30},parking:{"0-600":24,over_600:30},one_family:{"0-600":24,over_600:30}},rigid_metal:{general:{"0-600":6,over_600:6},under_building:{"0-600":0,over_600:0},under_street:{"0-600":24,over_600:24},parking:{"0-600":18,over_600:18},one_family:{"0-600":18,over_600:18}},nonmetallic:{general:{"0-600":18,over_600:18},under_building:{"0-600":0,over_600:0},under_street:{"0-600":24,over_600:24},parking:{"0-600":18,over_600:18},one_family:{"0-600":18,over_600:18}},residential_gfci:{general:{"0-600":12,over_600:12},under_building:{"0-600":0,over_600:0},under_street:{"0-600":24,over_600:24},parking:{"0-600":12,over_600:12},one_family:{"0-600":12,over_600:12}}}[r])==null?void 0:o[e])==null?void 0:s[t])??null},bL=(r,e,t)=>{const n=[];return e==="under_building"&&n.push("Raceways in or under buildings require no minimum cover. NEC 300.5(A) Exception"),e==="under_street"&&(n.push("Additional protection may be required by local jurisdiction"),n.push("Consider using concrete encasement for added protection")),r==="residential_gfci"&&(n.push("Limited to residential branch circuits rated 20A or less at 120V"),n.push("Must be GFCI protected at origin"),n.push("Must have no more than 120V between conductors")),r==="direct_burial"&&e==="parking"&&n.push('Direct burial under parking areas subject to heavy vehicles requires 24" depth'),t==="over_600"&&(n.push("Medium voltage installations require special considerations"),n.push("Verify local requirements for over 600V installations")),n},vL=r=>r===0?"No minimum cover required when in or under building":r>=24?"Standard depth provides adequate protection":r>=18?"Consider additional physical protection in high-traffic areas":r>=12?'Warning tape recommended 12" above installation':"Verify installation meets all NEC requirements",Da={mainTable:"NEC Table 300.5 - Minimum Cover Requirements",column:"NEC 300.5(A) - Minimum Cover Requirements",exceptions:"NEC 300.5(A) Exceptions",protection:"NEC 300.5(D) - Protection from Damage",backfill:"NEC 300.5(F) - Backfill"},wL=ce.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=ce.useState("direct_burial"),[s,l]=ce.useState("general"),[d,h]=ce.useState("0-600"),[u,g]=ce.useState(!0),y={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},_=yL(n,s,d),b=bL(n,s,d),R=vL(_),j=ew.find(T=>T.value===n),z=tw.find(T=>T.value===s);return ce.useImperativeHandle(t,()=>({exportPDF:()=>{const T={calculatorName:"Underground Depth Requirements Calculator",inputs:{installationType:j.label,locationType:z.label,voltageRating:d==="0-600"?"0-600V":"Over 600V",warningTape:u?"Yes (Recommended)":"No"},results:{minimumDepth:_!==null?`${_} inches`:"See special conditions",depthInFeet:_!==null?`${(_/12).toFixed(2)} feet`:"N/A",warningTapeDepth:u&&_>=12?`${_-12} inches from surface`:"N/A",protectionRecommendation:R},additionalInfo:{specialNotes:b.length>0?b:["No special conditions apply"],installationDescription:j.description},necReferences:[Da.mainTable,Da.column,Da.protection,Da.backfill,...b.length>0?[Da.exceptions]:[]]};Yr(T)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:y.cardBg,border:`1px solid ${y.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:y.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${y.cardBorder}`,paddingBottom:"0.5rem"},children:"Installation Details"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:y.labelText,marginBottom:"0.5rem"},children:"Installation Type"}),i.jsx("select",{value:n,onChange:T=>o(T.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${y.inputBorder}`,borderRadius:"8px",backgroundColor:y.inputBg,color:y.cardText,boxSizing:"border-box"},children:ew.map(T=>i.jsx("option",{value:T.value,children:T.label},T.value))}),i.jsx("div",{style:{fontSize:"0.75rem",color:y.labelText,marginTop:"0.5rem",fontStyle:"italic"},children:j.description})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:y.labelText,marginBottom:"0.5rem"},children:"Location Type"}),i.jsx("select",{value:s,onChange:T=>l(T.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${y.inputBorder}`,borderRadius:"8px",backgroundColor:y.inputBg,color:y.cardText,boxSizing:"border-box"},children:tw.map(T=>i.jsx("option",{value:T.value,children:T.label},T.value))})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:y.labelText,marginBottom:"0.5rem"},children:"Voltage Rating"}),i.jsx("select",{value:d,onChange:T=>h(T.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${y.inputBorder}`,borderRadius:"8px",backgroundColor:y.inputBg,color:y.cardText,boxSizing:"border-box"},children:xL.map(T=>i.jsx("option",{value:T.value,children:T.label},T.value))})]})]})]}),i.jsxs("div",{style:{background:y.cardBg,border:`1px solid ${y.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:y.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${y.cardBorder}`,paddingBottom:"0.5rem"},children:"Additional Protection"}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:u,onChange:T=>g(T.target.checked),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:y.labelText},children:"Use Warning/Detectable Tape (Recommended)"})]}),u&&_>=12&&i.jsx("div",{style:{background:y.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${y.cardBorder}`,marginTop:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Gi,{size:18,color:"#3b82f6",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:y.labelText,lineHeight:"1.5"},children:["Install warning tape approximately 12 inches above the cable/conduit. Tape depth: ",i.jsxs("strong",{style:{color:y.cardText},children:[_-12," inches"]})," from surface."]})]})})]}),i.jsxs("div",{style:{background:y.cardBg,border:`1px solid ${y.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:y.cardText,marginTop:0,marginBottom:"1rem"},children:"Required Burial Depth"}),_!==null?i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"MINIMUM DEPTH"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af",lineHeight:"1"},children:[_,'"']}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.5rem"},children:["(",(_/12).toFixed(2)," feet)"]})]}),u&&_>=12&&i.jsxs("div",{style:{background:"#fef3c7",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#92400e",marginBottom:"0.5rem",fontWeight:"600"},children:"WARNING TAPE DEPTH"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#92400e",lineHeight:"1"},children:[_-12,'"']}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#92400e",marginTop:"0.5rem"},children:'(12" above cable)'})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Installation:"})," ",j.label]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Location:"})," ",z.label]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Voltage:"})," ",d==="0-600"?"0-600V":"Over 600V"]})]})]})}),i.jsx("div",{style:{background:y.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${y.cardBorder}`,marginBottom:"1rem"},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:y.labelText,lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",color:y.cardText,marginBottom:"0.5rem"},children:"Protection Recommendation:"}),R]})})]}):i.jsx("div",{style:{background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Us,{size:20,color:"#dc2626",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#7f1d1d",lineHeight:"1.5"},children:"Unable to determine depth for this configuration. Please verify NEC requirements."})]})}),b.length>0&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Us,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Special Considerations:"}),i.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:b.map((T,M)=>i.jsx("li",{style:{marginBottom:"0.25rem"},children:T},M))})]})]})})]}),i.jsxs("div",{style:{background:y.cardBg,border:`1px solid ${y.cardBorder}`,borderRadius:"12px",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:y.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${y.cardBorder}`,paddingBottom:"0.5rem"},children:"NEC References"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:y.labelText,lineHeight:"1.5"},children:[i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",Da.mainTable]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",Da.column]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",Da.protection]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",Da.backfill]}),b.length>0&&i.jsxs("div",{children:["• ",Da.exceptions]})]})]})]})}),rw=[{value:"insulated_0_600",label:"Insulated Conductors (0-600V)",description:"Communication, TV, CATV, or insulated conductors rated 0-600V"},{value:"open_0_600",label:"Open Conductors (0-600V)",description:"Open conductors rated 0-600V"},{value:"over_600",label:"Conductors Over 600V",description:"Conductors rated over 600V up to 22kV"}],nw=[{value:"above_roof",label:"Above Roofs",subcategories:!0},{value:"driveways_residential",label:"Driveways & Parking (Residential)"},{value:"streets_alleys",label:"Streets, Alleys, Roads, Parking (Commercial)"},{value:"other_spaces",label:"Other Spaces & Ways (Accessible to Pedestrians)"},{value:"over_water",label:"Over Water (Accessible to Boats)"}],iw=[{value:"standard",label:"Standard Roof (Slope > 4/12)"},{value:"flat",label:"Flat Roof (Slope ≤ 4/12)"},{value:"through_only",label:"Conductors Pass Through Only (No Termination)"}],SL=(r,e,t=null)=>{var o,s,l;const n={insulated_0_600:{above_roof:{standard:3,flat:3,through_only:1.5},driveways_residential:10,streets_alleys:15.5,other_spaces:10,over_water:10},open_0_600:{above_roof:{standard:3,flat:3,through_only:1.5},driveways_residential:12,streets_alleys:15.5,other_spaces:10,over_water:10},over_600:{above_roof:{standard:3,flat:3,through_only:1.5},driveways_residential:15.5,streets_alleys:18,other_spaces:15.5,over_water:17}};return e==="above_roof"&&t?((s=(o=n[r])==null?void 0:o[e])==null?void 0:s[t])??null:((l=n[r])==null?void 0:l[e])??null},_L=(r,e,t=null)=>{const n=[];return e==="above_roof"&&(t==="through_only"&&(n.push('18" clearance applies only where conductors pass over roof without termination'),n.push("If conductors terminate within 6 feet of roof edge, standard 3 ft clearance required")),t==="flat"&&(n.push("Flat roofs (≤4/12 slope) may be accessible for maintenance"),n.push("3 ft clearance provides safe working space above roof")),t==="standard"&&(n.push("Roof slope greater than 4/12 (4 inches rise per 12 inches run)"),n.push("Not readily accessible for walking")),n.push("Clearance measured from highest point of roof surface"),n.push("NEC 225.19 - Additional clearances may be required by voltage")),e==="driveways_residential"&&(n.push("Applies to residential property and driveways"),n.push("Not used for commercial vehicle traffic"),n.push("Sufficient clearance for typical passenger vehicles and light trucks")),e==="streets_alleys"&&(n.push("Applies to public streets, alleys, roads, and commercial parking areas"),n.push("Must accommodate truck traffic and emergency vehicles"),n.push("Clearance measured from road surface to lowest conductor")),e==="other_spaces"&&(n.push("Includes sidewalks, platforms, and pedestrian walkways"),n.push("Must provide head clearance for pedestrians"),n.push("Measured from finished grade or platform surface")),e==="over_water"&&(n.push("Applies to water accessible to boats with masts"),n.push("Clearance measured from normal high water level"),n.push("Consider maximum boat mast height in area")),r==="over_600"&&(n.push("For voltages over 22kV, add 0.4 inches per kV over 22kV"),n.push("Verify local utility requirements for medium voltage"),n.push("Additional safety precautions required for high voltage work")),n},TL=(r,e)=>{const t=[];return e==="above_roof"?(t.push("Ensure proper support and strain relief"),t.push("Use appropriate weatherhead and service entrance equipment"),t.push("Consider local wind and ice loading conditions")):(t.push("Mark and protect overhead conductors in work areas"),t.push("Maintain proper sag to prevent excessive conductor stress"),t.push("Consider future grade changes that might reduce clearance")),r<12&&t.push("⚠️ Low clearance - ensure adequate warning signage"),r>=15&&t.push("Use proper equipment and safety measures for high installations"),t},Wa={mainArticle:"NEC Article 225 - Outside Branch Circuits and Feeders",clearanceTable:"NEC Table 225.18 - Clearance from Ground and Buildings",roofClearance:"NEC 225.19 - Clearances from Buildings for Conductors",support:"NEC 225.12 - Point of Attachment",protection:"NEC 225.20 - Mechanical Protection"},CL=ce.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=ce.useState("insulated_0_600"),[s,l]=ce.useState("above_roof"),[d,h]=ce.useState("standard"),[u,g]=ce.useState(!1),[y,_]=ce.useState("2"),b={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},R=SL(n,s,s==="above_roof"?d:null),j=R+(u?parseFloat(y):0),z=_L(n,s,s==="above_roof"?d:null),T=TL(R,s),M=rw.find(J=>J.value===n),F=nw.find(J=>J.value===s),B=iw.find(J=>J.value===d);return ce.useImperativeHandle(t,()=>({exportPDF:()=>{const J={calculatorName:"Overhead Clearance Calculator",inputs:{conductorType:M.label,location:F.label,...s==="above_roof"&&{roofType:B.label},extraClearance:u?`${y} ft (for safety factor)`:"None"},results:{minimumClearance:R!==null?`${R} feet`:"See special conditions",minimumClearanceInches:R!==null?`${(R*12).toFixed(1)} inches`:"N/A",totalClearance:u?`${j.toFixed(1)} feet`:"N/A",totalClearanceInches:u?`${(j*12).toFixed(1)} inches`:"N/A"},additionalInfo:{specialNotes:z.length>0?z:["No special conditions apply"],safetyRecommendations:T,conductorDescription:M.description},necReferences:[Wa.mainArticle,Wa.clearanceTable,...s==="above_roof"?[Wa.roofClearance]:[],Wa.support,Wa.protection]};Yr(J)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:b.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${b.cardBorder}`,paddingBottom:"0.5rem"},children:"Conductor Information"}),i.jsx("div",{style:{display:"grid",gap:"1rem"},children:i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Conductor Type"}),i.jsx("select",{value:n,onChange:J=>o(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"},children:rw.map(J=>i.jsx("option",{value:J.value,children:J.label},J.value))}),i.jsx("div",{style:{fontSize:"0.75rem",color:b.labelText,marginTop:"0.5rem",fontStyle:"italic"},children:M.description})]})})]}),i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:b.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${b.cardBorder}`,paddingBottom:"0.5rem"},children:"Clearance Location"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Location Type"}),i.jsx("select",{value:s,onChange:J=>l(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"},children:nw.map(J=>i.jsx("option",{value:J.value,children:J.label},J.value))})]}),s==="above_roof"&&i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Roof Type"}),i.jsx("select",{value:d,onChange:J=>h(J.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"},children:iw.map(J=>i.jsx("option",{value:J.value,children:J.label},J.value))})]})]})]}),i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:b.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${b.cardBorder}`,paddingBottom:"0.5rem"},children:"Safety Margin (Optional)"}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",marginBottom:"1rem"},children:[i.jsx("input",{type:"checkbox",checked:u,onChange:J=>g(J.target.checked),style:{width:"1.125rem",height:"1.125rem",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:b.labelText},children:"Add Extra Clearance for Safety Factor"})]}),u&&i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b.labelText,marginBottom:"0.5rem"},children:"Additional Clearance (feet)"}),i.jsx("input",{type:"number",value:y,onChange:J=>_(J.target.value),min:"0",step:"0.5",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${b.inputBorder}`,borderRadius:"8px",backgroundColor:b.inputBg,color:b.cardText,boxSizing:"border-box"}}),i.jsx("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${b.cardBorder}`,marginTop:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Gi,{size:18,color:"#3b82f6",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsx("div",{style:{fontSize:"0.875rem",color:b.labelText,lineHeight:"1.5"},children:"Adding extra clearance provides additional safety margin beyond NEC minimums. Recommended for areas with heavy snow loads or future settling."})]})})]})]}),i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:b.cardText,marginTop:0,marginBottom:"1rem"},children:"Required Clearance"}),R!==null?i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:u?"1fr 1fr":"1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600"},children:"NEC MINIMUM CLEARANCE"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af",lineHeight:"1"},children:[R,"′"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.5rem"},children:["(",(R*12).toFixed(1)," inches)"]})]}),u&&i.jsxs("div",{style:{background:"#d1fae5",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#047857",marginBottom:"0.5rem",fontWeight:"600"},children:"TOTAL WITH SAFETY MARGIN"}),i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#047857",lineHeight:"1"},children:[j.toFixed(1),"′"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",marginTop:"0.5rem"},children:["(",(j*12).toFixed(1)," inches)"]})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5"},children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Conductor:"})," ",M.label]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Location:"})," ",F.label]}),s==="above_roof"&&i.jsxs("div",{children:[i.jsx("strong",{children:"Roof Type:"})," ",B.label]})]})]})}),T.length>0&&i.jsx("div",{style:{background:b.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${b.cardBorder}`,marginBottom:"1rem"},children:i.jsxs("div",{style:{fontSize:"0.875rem",color:b.labelText,lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",color:b.cardText,marginBottom:"0.5rem"},children:"Safety Recommendations:"}),i.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:T.map((J,se)=>i.jsx("li",{style:{marginBottom:"0.25rem"},children:J},se))})]})})]}):i.jsx("div",{style:{background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Us,{size:20,color:"#dc2626",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#7f1d1d",lineHeight:"1.5"},children:"Unable to determine clearance for this configuration. Please verify NEC requirements."})]})}),z.length>0&&i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Us,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:"Special Considerations:"}),i.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:z.map((J,se)=>i.jsx("li",{style:{marginBottom:"0.25rem"},children:J},se))})]})]})})]}),i.jsxs("div",{style:{background:b.cardBg,border:`1px solid ${b.cardBorder}`,borderRadius:"12px",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:b.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${b.cardBorder}`,paddingBottom:"0.5rem"},children:"NEC References"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:b.labelText,lineHeight:"1.5"},children:[i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",Wa.mainArticle]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",Wa.clearanceTable]}),s==="above_roof"&&i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",Wa.roofClearance]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",Wa.support]}),i.jsxs("div",{children:["• ",Wa.protection]})]})]})]})}),ow=[{value:"0-150",label:"0-150V to Ground",description:"Typical 120V circuits"},{value:"151-600",label:"151-600V to Ground",description:"Typical 208V, 240V, 277V, 480V systems"},{value:"601-2500",label:"601V-2.5kV",description:"Medium voltage equipment"},{value:"over-2500",label:"Over 2.5kV",description:"High voltage equipment"}],sw=[{value:"condition-1",label:"Condition 1",description:"Exposed live parts on one side, grounded/insulated on the other side"},{value:"condition-2",label:"Condition 2",description:"Exposed live parts on both sides (equipment on opposite walls)"},{value:"condition-3",label:"Condition 3",description:"Exposed live parts on both sides, not guarded by suitable wood/insulation"}],aw=[{value:"switchboard",label:"Switchboard"},{value:"panelboard",label:"Panelboard"},{value:"motor_control",label:"Motor Control Center"},{value:"transformer",label:"Transformer"},{value:"disconnect",label:"Disconnect Switch"},{value:"general",label:"General Equipment"}],AL=(r,e)=>{var n;return((n={"0-150":{"condition-1":3,"condition-2":3,"condition-3":3},"151-600":{"condition-1":3,"condition-2":3.5,"condition-3":4},"601-2500":{"condition-1":3,"condition-2":4,"condition-3":5},"over-2500":{"condition-1":4,"condition-2":5,"condition-3":6}}[r])==null?void 0:n[e])??null},kL=r=>Math.max(30,r),jL=r=>6.5,IL=(r,e,t)=>{const n=[];return n.push("At least one entrance not less than 24 inches wide and 6.5 feet high for access"),(t==="switchboard"||t==="panelboard"||t==="motor_control")&&n.push("For equipment rated 1200A or more and over 6 feet wide, one entrance at each end required (110.26(C)(2))"),n.push("Illumination required for all working spaces (110.26(D))"),n.push("Minimum headroom of 6.5 feet throughout working space (110.26(E))"),n.push("Space equal to width and depth of equipment, from floor to 6 feet above equipment or structural ceiling (110.26(F)(1))"),e==="condition-3"&&(n.push("⚠️ Condition 3: Highest risk - exposed live parts on both sides"),n.push("Consider additional safety measures and PPE requirements")),r==="over-2500"&&(n.push("⚠️ High voltage equipment requires special safety procedures"),n.push("Additional NFPA 70E arc flash requirements apply")),(r==="601-2500"||r==="over-2500")&&n.push("Separation from piping, ducts, and other equipment required (110.26(F)(2))"),n},EL=r=>({"condition-1":["Panel on concrete or brick wall","Equipment facing grounded metal partition","Switchboard backed by insulated wall","Most typical installations"],"condition-2":["Panels on opposite walls facing each other","Equipment on both sides of aisle","Back-to-back switchboards with wooden separation","Properly insulated barriers between equipment"],"condition-3":["Exposed live parts on both sides without proper insulation","Equipment facing equipment without barriers","Unprotected back-to-back installations","Highest safety risk scenario"]})[r]||[],Ei={mainArticle:"NEC Article 110.26 - Spaces About Electrical Equipment",workingSpaceTable:"NEC Table 110.26(A)(1) - Working Space Depth",width:"NEC 110.26(A)(2) - Width of Working Space",height:"NEC 110.26(A)(3) - Height of Working Space",entrance:"NEC 110.26(C) - Entrance to Working Space",illumination:"NEC 110.26(D) - Illumination",headroom:"NEC 110.26(E) - Headroom",dedicatedSpace:"NEC 110.26(F) - Dedicated Equipment Space",arcFlash:"NFPA 70E - Arc Flash Protection Requirements"},RL=ce.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=ce.useState("151-600"),[s,l]=ce.useState("condition-1"),[d,h]=ce.useState("panelboard"),[u,g]=ce.useState("20"),[y,_]=ce.useState("72"),[b,R]=ce.useState(!1),j={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},z=AL(n,s),T=kL(parseFloat(u)),M=jL(),F=IL(n,s,d),B=EL(s),J=ow.find(S=>S.value===n),se=sw.find(S=>S.value===s),O=aw.find(S=>S.value===d),A=z*(T/12)*M;return ce.useImperativeHandle(t,()=>({exportPDF:()=>{const S={calculatorName:"Working Space Requirements Calculator",inputs:{voltageRange:J.label,condition:se.label,equipmentType:O.label,equipmentWidth:`${u} inches`,equipmentHeight:`${y} inches`},results:{requiredDepth:`${z} feet (${z*12} inches)`,requiredWidth:`${T} inches (${(T/12).toFixed(2)} feet)`,requiredHeight:`${M} feet (${M*12} inches)`,workingSpaceVolume:`${A.toFixed(1)} cubic feet`},additionalInfo:{conditionDescription:se.description,conditionExamples:B,specialRequirements:F},necReferences:[Ei.mainArticle,Ei.workingSpaceTable,Ei.width,Ei.height,Ei.entrance,Ei.illumination,Ei.headroom,Ei.dedicatedSpace,...n==="over-2500"||n==="601-2500"?[Ei.arcFlash]:[]]};Yr(S)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${j.cardBorder}`,paddingBottom:"0.5rem"},children:"Electrical System Information"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Voltage to Ground"}),i.jsx("select",{value:n,onChange:S=>o(S.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:ow.map(S=>i.jsx("option",{value:S.value,children:S.label},S.value))}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginTop:"0.5rem",fontStyle:"italic"},children:J.description})]}),i.jsxs("div",{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[i.jsx("label",{style:{fontSize:"0.875rem",fontWeight:"500",color:j.labelText},children:"Working Space Condition"}),i.jsx("button",{onClick:()=>R(!b),style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",display:"flex",alignItems:"center",color:"#3b82f6"},children:i.jsx(Gi,{size:18})})]}),i.jsx("select",{value:s,onChange:S=>l(S.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:sw.map(S=>i.jsx("option",{value:S.value,children:S.label},S.value))}),i.jsx("div",{style:{fontSize:"0.75rem",color:j.labelText,marginTop:"0.5rem",fontStyle:"italic"},children:se.description})]}),b&&i.jsxs("div",{style:{background:j.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${j.cardBorder}`},children:[i.jsxs("div",{style:{fontWeight:"600",color:j.cardText,marginBottom:"0.5rem",fontSize:"0.875rem"},children:[se.label," Examples:"]}),i.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.875rem",color:j.labelText},children:B.map((S,V)=>i.jsx("li",{style:{marginBottom:"0.25rem"},children:S},V))})]})]})]}),i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${j.cardBorder}`,paddingBottom:"0.5rem"},children:"Equipment Details"}),i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Equipment Type"}),i.jsx("select",{value:d,onChange:S=>h(S.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"},children:aw.map(S=>i.jsx("option",{value:S.value,children:S.label},S.value))})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Equipment Width (inches)"}),i.jsx("input",{type:"number",value:u,onChange:S=>g(S.target.value),min:"1",step:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:j.labelText,marginBottom:"0.5rem"},children:"Equipment Height (inches)"}),i.jsx("input",{type:"number",value:y,onChange:S=>_(S.target.value),min:"1",step:"1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${j.inputBorder}`,borderRadius:"8px",backgroundColor:j.inputBg,color:j.cardText,boxSizing:"border-box"}})]})]})]})]}),i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem"},children:"Required Working Space Dimensions"}),z!==null?i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1.25rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.7rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600",textTransform:"uppercase"},children:"Depth (Front to Back)"}),i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#1e40af",lineHeight:"1"},children:[z,"′"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.5rem"},children:["(",z*12,'" minimum)']})]}),i.jsxs("div",{style:{background:"#d1fae5",padding:"1.25rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.7rem",color:"#047857",marginBottom:"0.5rem",fontWeight:"600",textTransform:"uppercase"},children:"Width (Side to Side)"}),i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#047857",lineHeight:"1"},children:[T,'"']}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",marginTop:"0.5rem"},children:["(",(T/12).toFixed(2),"′ minimum)"]})]}),i.jsxs("div",{style:{background:"#fef3c7",padding:"1.25rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.7rem",color:"#92400e",marginBottom:"0.5rem",fontWeight:"600",textTransform:"uppercase"},children:"Height (Floor to Ceiling)"}),i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#92400e",lineHeight:"1"},children:[M,"′"]}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#92400e",marginTop:"0.5rem"},children:["(",M*12,'" minimum)']})]})]}),i.jsx("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Br,{size:20,color:"#059669",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#047857",lineHeight:"1.5",width:"100%"},children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Voltage:"})," ",J.label]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Condition:"})," ",se.label]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Equipment:"})," ",O.label]}),i.jsxs("div",{style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #6ee7b7"},children:[i.jsx("strong",{children:"Working Space Volume:"})," ",A.toFixed(1)," cubic feet"]})]})]})}),i.jsxs("div",{style:{background:j.sectionBg,padding:"1.5rem",borderRadius:"8px",border:`1px solid ${j.cardBorder}`,marginBottom:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",color:j.cardText,marginBottom:"1rem",fontSize:"0.875rem"},children:"Working Space Layout (Top View):"}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},children:[i.jsx("div",{style:{width:"120px",height:"40px",background:"#ef4444",border:"2px solid #dc2626",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:"EQUIPMENT"}),i.jsx("div",{style:{width:"2px",height:`${Math.min(z*15,80)}px`,background:"#3b82f6",position:"relative"},children:i.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:j.sectionBg,padding:"0.25rem 0.5rem",fontSize:"0.75rem",fontWeight:"600",color:"#3b82f6",whiteSpace:"nowrap"},children:[z,"′ depth"]})}),i.jsx("div",{style:{width:"120px",height:"40px",background:"#10b981",border:"2px dashed #059669",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"600"},children:"WORKING SPACE"})]})]})]}):i.jsx("div",{style:{background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Us,{size:20,color:"#dc2626",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#7f1d1d",lineHeight:"1.5"},children:"Unable to determine working space for this configuration. Please verify NEC requirements."})]})})]}),F.length>0&&i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${j.cardBorder}`,paddingBottom:"0.5rem"},children:"Additional Requirements"}),i.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(kC,{size:20,color:"#d97706",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#92400e",lineHeight:"1.5"},children:i.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:F.map((S,V)=>i.jsx("li",{style:{marginBottom:"0.5rem"},children:S},V))})})]})})]}),i.jsxs("div",{style:{background:j.cardBg,border:`1px solid ${j.cardBorder}`,borderRadius:"12px",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:j.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${j.cardBorder}`,paddingBottom:"0.5rem"},children:"NEC References"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:j.labelText,lineHeight:"1.5"},children:[i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",Ei.mainArticle]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",Ei.workingSpaceTable]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",Ei.width]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",Ei.height]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",Ei.entrance]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",Ei.illumination]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",Ei.headroom]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",Ei.dedicatedSpace]}),(n==="over-2500"||n==="601-2500")&&i.jsxs("div",{children:["• ",Ei.arcFlash]})]})]})]})}),Zp=[{value:"general_lighting",label:"General Lighting & Receptacles",description:"120V lighting and receptacle loads",needsNeutral:!0,demandFactor:1},{value:"appliances",label:"Small Appliance & Laundry Circuits",description:"20A small appliance and laundry branch circuits",needsNeutral:!0,demandFactor:1},{value:"electric_range",label:"Electric Range/Oven",description:"Cooking equipment (70% neutral load per 220.61)",needsNeutral:!0,demandFactor:.7},{value:"electric_dryer",label:"Electric Clothes Dryer",description:"Electric dryer (70% neutral load per 220.61)",needsNeutral:!0,demandFactor:.7},{value:"hvac_heat_pump",label:"HVAC/Heat Pump",description:"Heating and cooling equipment (typically 240V, minimal neutral)",needsNeutral:!1,demandFactor:0},{value:"water_heater",label:"Electric Water Heater",description:"240V straight heating element (no neutral required)",needsNeutral:!1,demandFactor:0},{value:"line_to_neutral",label:"Line-to-Neutral Load (120V)",description:"Any 120V load between line and neutral",needsNeutral:!0,demandFactor:1},{value:"three_phase_balanced",label:"3-Phase Balanced Load",description:"3-phase motor or balanced load (minimal neutral current)",needsNeutral:!1,demandFactor:0},{value:"three_phase_unbalanced",label:"3-Phase with Line-to-Neutral Loads",description:"3-phase system with 120V loads (needs full neutral)",needsNeutral:!0,demandFactor:1}],$a={mainArticle:"NEC Article 220.61 - Feeder and Service Neutral Load",rangesDryers:"NEC 220.61(B) - Ranges and Dryers (70% of load)",balancedLoads:"NEC 220.61(C) - Balanced Loads",conductorSizing:"NEC Table 310.16 - Conductor Ampacity",groundingVsNeutral:"NEC 250.24(C) - Neutral vs Grounding Conductor"},PL=ce.forwardRef(({isDarkMode:r=!1,onBack:e},t)=>{const[n,o]=ce.useState([{id:1,type:"general_lighting",amperage:"20",description:"General Lighting"}]),[s,l]=ce.useState(2),[d,h]=ce.useState("single_phase"),[u,g]=ce.useState("240"),y={cardBg:r?"#374151":"#ffffff",cardBorder:r?"#4b5563":"#e5e7eb",cardText:r?"#f9fafb":"#111827",labelText:r?"#d1d5db":"#374151",inputBg:r?"#1f2937":"#ffffff",inputBorder:r?"#4b5563":"#d1d5db",sectionBg:r?"#1f2937":"#f9fafb"},_=()=>{o([...n,{id:s,type:"general_lighting",amperage:"0",description:`Load ${s}`}]),l(s+1)},b=F=>{n.length>1&&o(n.filter(B=>B.id!==F))},R=(F,B,J)=>{o(n.map(se=>se.id===F?{...se,[B]:J}:se))},j=()=>{let F=0,B=[],J=[],se=[];return n.forEach(O=>{const A=Zp.find(V=>V.value===O.type),S=parseFloat(O.amperage)||0;if(S!==0)if(!A.needsNeutral)se.push({description:O.description||A.label,amperage:S,reason:"No neutral required (240V line-to-line or balanced 3-phase)"});else if(A.demandFactor<1){const V=S*A.demandFactor;J.push({description:O.description||A.label,lineAmperage:S,neutralAmperage:V,factor:A.demandFactor}),F+=V}else B.push({description:O.description||A.label,amperage:S}),F+=S}),{totalNeutralCurrent:Math.round(F*10)/10,lineToNeutralLoads:B,reducedLoads:J,excludedLoads:se}},z=F=>F<=20?"12 AWG":F<=25?"10 AWG":F<=35?"8 AWG":F<=50?"6 AWG":F<=65?"4 AWG":F<=85?"3 AWG":F<=100?"2 AWG":F<=115?"1 AWG":F<=130?"1/0 AWG":F<=150?"2/0 AWG":F<=175?"3/0 AWG":F<=200?"4/0 AWG":F<=230?"250 kcmil":F<=255?"300 kcmil":F<=285?"350 kcmil":F<=310?"400 kcmil":F<=335?"500 kcmil":"600+ kcmil (see NEC Table 310.16)",T=j(),M=z(T.totalNeutralCurrent);return ce.useImperativeHandle(t,()=>({exportPDF:()=>{const F={calculatorName:"Neutral Sizing Calculator",inputs:{systemType:d==="single_phase"?"Single-Phase":"3-Phase",voltage:`${u}V`,numberOfLoads:n.length,loads:n.map(B=>{const J=Zp.find(se=>se.value===B.type);return`${B.description||J.label}: ${B.amperage}A`})},results:{totalNeutralCurrent:`${T.totalNeutralCurrent} A`,recommendedConductorSize:M,lineToNeutralLoads:T.lineToNeutralLoads.length>0?T.lineToNeutralLoads.map(B=>`${B.description}: ${B.amperage}A`).join(", "):"None",reducedNeutralLoads:T.reducedLoads.length>0?T.reducedLoads.map(B=>`${B.description}: ${B.lineAmperage}A → ${B.neutralAmperage}A (${B.factor*100}%)`).join(", "):"None",excludedLoads:T.excludedLoads.length>0?T.excludedLoads.map(B=>`${B.description}: ${B.amperage}A (${B.reason})`).join(", "):"None"},necReferences:[$a.mainArticle,$a.rangesDryers,$a.balancedLoads,$a.conductorSizing,$a.groundingVsNeutral]};Yr(F)}})),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{style:{background:y.cardBg,border:`1px solid ${y.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:y.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${y.cardBorder}`,paddingBottom:"0.5rem"},children:"System Configuration"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:y.labelText,marginBottom:"0.5rem"},children:"System Type"}),i.jsxs("select",{value:d,onChange:F=>h(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${y.inputBorder}`,borderRadius:"8px",backgroundColor:y.inputBg,color:y.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"single_phase",children:"Single-Phase"}),i.jsx("option",{value:"three_phase",children:"3-Phase"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:y.labelText,marginBottom:"0.5rem"},children:"System Voltage"}),i.jsxs("select",{value:u,onChange:F=>g(F.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${y.inputBorder}`,borderRadius:"8px",backgroundColor:y.inputBg,color:y.cardText,boxSizing:"border-box"},children:[i.jsx("option",{value:"120/240",children:"120/240V"}),i.jsx("option",{value:"120/208",children:"120/208V"}),i.jsx("option",{value:"277/480",children:"277/480V"})]})]})]})]}),i.jsxs("div",{style:{background:y.cardBg,border:`1px solid ${y.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",paddingBottom:"0.5rem",borderBottom:`1px solid ${y.cardBorder}`},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:y.cardText,margin:0},children:"Connected Loads"}),i.jsxs("button",{onClick:_,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"500",color:"#ffffff",background:"#3b82f6",border:"none",borderRadius:"8px",cursor:"pointer"},children:[i.jsx(qs,{size:18}),"Add Load"]})]}),n.map((F,B)=>{const J=Zp.find(se=>se.value===F.type);return i.jsx("div",{style:{background:y.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${y.cardBorder}`,marginBottom:B<n.length-1?"1rem":0},children:i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"1rem",alignItems:"start"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:y.labelText,marginBottom:"0.5rem"},children:"Load Type"}),i.jsx("select",{value:F.type,onChange:se=>R(F.id,"type",se.target.value),style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${y.inputBorder}`,borderRadius:"8px",backgroundColor:y.inputBg,color:y.cardText,boxSizing:"border-box"},children:Zp.map(se=>i.jsx("option",{value:se.value,children:se.label},se.value))})]}),n.length>1&&i.jsx("button",{onClick:()=>b(F.id),style:{marginTop:"1.85rem",padding:"0.625rem",background:"#ef4444",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Nl,{size:18,color:"#ffffff"})})]}),i.jsxs("div",{style:{fontSize:"0.75rem",color:y.labelText,fontStyle:"italic",marginTop:"-0.5rem"},children:[J==null?void 0:J.description,(J==null?void 0:J.demandFactor)<1&&i.jsxs("span",{style:{color:"#f59e0b",fontWeight:"600",marginLeft:"0.5rem"},children:["(",J.demandFactor*100,"% neutral load)"]}),!(J!=null&&J.needsNeutral)&&i.jsx("span",{style:{color:"#10b981",fontWeight:"600",marginLeft:"0.5rem"},children:"(No neutral current)"})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:y.labelText,marginBottom:"0.5rem"},children:"Load Current (Amperes)"}),i.jsx("input",{type:"number",value:F.amperage,onChange:se=>R(F.id,"amperage",se.target.value),min:"0",step:"0.1",style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${y.inputBorder}`,borderRadius:"8px",backgroundColor:y.inputBg,color:y.cardText,boxSizing:"border-box"}})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:y.labelText,marginBottom:"0.5rem"},children:"Description (Optional)"}),i.jsx("input",{type:"text",value:F.description,onChange:se=>R(F.id,"description",se.target.value),placeholder:J==null?void 0:J.label,style:{width:"100%",padding:"0.625rem",fontSize:"0.9375rem",border:`1px solid ${y.inputBorder}`,borderRadius:"8px",backgroundColor:y.inputBg,color:y.cardText,boxSizing:"border-box"}})]})]})]})},F.id)})]}),i.jsxs("div",{style:{background:y.cardBg,border:`1px solid ${y.cardBorder}`,borderRadius:"12px",padding:"1.5rem",marginBottom:"1rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:y.cardText,marginTop:0,marginBottom:"1rem"},children:"Neutral Conductor Sizing"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"#dbeafe",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#1e40af",marginBottom:"0.5rem",fontWeight:"600",textTransform:"uppercase"},children:"Neutral Current"}),i.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#1e40af",lineHeight:"1"},children:T.totalNeutralCurrent}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#1e40af",marginTop:"0.5rem"},children:"Amperes"})]}),i.jsxs("div",{style:{background:"#d1fae5",padding:"1.5rem",borderRadius:"8px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"#047857",marginBottom:"0.5rem",fontWeight:"600",textTransform:"uppercase"},children:"Recommended Size"}),i.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#047857",lineHeight:"1"},children:M}),i.jsx("div",{style:{fontSize:"0.875rem",color:"#047857",marginTop:"0.5rem"},children:"Copper @ 75°C"})]})]}),T.lineToNeutralLoads.length>0&&i.jsxs("div",{style:{background:y.sectionBg,padding:"1rem",borderRadius:"8px",border:`1px solid ${y.cardBorder}`,marginBottom:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",color:y.cardText,marginBottom:"0.5rem",fontSize:"0.875rem"},children:"Full Neutral Loads (100%):"}),i.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.875rem",color:y.labelText},children:T.lineToNeutralLoads.map((F,B)=>i.jsxs("li",{children:[F.description,": ",F.amperage,"A"]},B))})]}),T.reducedLoads.length>0&&i.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #fcd34d",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",color:"#92400e",marginBottom:"0.5rem",fontSize:"0.875rem"},children:"Reduced Neutral Loads (NEC 220.61):"}),i.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.875rem",color:"#92400e"},children:T.reducedLoads.map((F,B)=>i.jsxs("li",{children:[F.description,": ",F.lineAmperage,"A → ",F.neutralAmperage,"A (",F.factor*100,"%)"]},B))})]}),T.excludedLoads.length>0&&i.jsxs("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",color:"#047857",marginBottom:"0.5rem",fontSize:"0.875rem"},children:"Loads Not Contributing to Neutral:"}),i.jsx("ul",{style:{margin:0,paddingLeft:"1.25rem",fontSize:"0.875rem",color:"#047857"},children:T.excludedLoads.map((F,B)=>i.jsxs("li",{children:[F.description,": ",F.amperage,"A - ",F.reason]},B))})]}),i.jsx("div",{style:{background:"#dbeafe",border:"1px solid #93c5fd",borderRadius:"8px",padding:"1rem"},children:i.jsxs("div",{style:{display:"flex",alignItems:"start",gap:"0.75rem"},children:[i.jsx(Gi,{size:20,color:"#1e40af",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"#1e3a8a",lineHeight:"1.5"},children:[i.jsx("strong",{children:"Important Notes:"}),i.jsxs("ul",{style:{margin:"0.5rem 0 0 0",paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Conductor sizing based on 75°C copper in conduit (NEC Table 310.16)"}),i.jsx("li",{children:"Electric ranges and dryers calculated at 70% per NEC 220.61(B)"}),i.jsx("li",{children:"240V line-to-line loads (water heaters, HVAC) don't require neutral current"}),i.jsx("li",{children:"Balanced 3-phase loads have minimal neutral current"}),i.jsx("li",{children:"Always verify with local codes and specific installation conditions"}),i.jsx("li",{children:"Consider voltage drop for long runs"})]})]})]})})]}),i.jsxs("div",{style:{background:y.cardBg,border:`1px solid ${y.cardBorder}`,borderRadius:"12px",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[i.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:y.cardText,marginTop:0,marginBottom:"1rem",borderBottom:`1px solid ${y.cardBorder}`,paddingBottom:"0.5rem"},children:"NEC References"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:y.labelText,lineHeight:"1.5"},children:[i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",$a.mainArticle]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",$a.rangesDryers]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",$a.balancedLoads]}),i.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• ",$a.conductorSizing]}),i.jsxs("div",{children:["• ",$a.groundingVsNeutral]})]})]})]})}),NL=({isDarkMode:r})=>{const[e,t]=ce.useState(new Date),[n,o]=ce.useState(new Date),[s,l]=ce.useState([]),[d,h]=ce.useState(!0),u={bg:r?"#000000":"#f9fafb",cardBg:r?"#0a0a0a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#666666":"#6b7280",border:r?"#1a1a1a":"#e5e7eb",selectedDay:"#3b82f6",todayBg:r?"#1a1a1a":"#f3f4f6"},g={scheduled:"#3b82f6","in-progress":"#f59e0b",completed:"#10b981"};ce.useEffect(()=>{const w=l0(Qn,async N=>{if(N)try{const W=await Gd();l(W)}catch(W){console.error("Error loading jobs:",W)}finally{h(!1)}else l([]),h(!1)});return()=>w()},[]);const y=s.map(w=>({...w,dateObj:w.date?new Date(w.date+"T00:00:00"):null})),_=w=>new Date(w.getFullYear(),w.getMonth()+1,0).getDate(),b=w=>new Date(w.getFullYear(),w.getMonth(),1).getDay(),R=(w,N)=>!w||!N?!1:w.getDate()===N.getDate()&&w.getMonth()===N.getMonth()&&w.getFullYear()===N.getFullYear(),j=w=>R(w,new Date),z=w=>y.filter(N=>N.dateObj&&R(N.dateObj,w)),T=w=>y.some(N=>N.dateObj&&R(N.dateObj,w)),M=()=>{t(new Date(e.getFullYear(),e.getMonth()-1))},F=()=>{t(new Date(e.getFullYear(),e.getMonth()+1))},B=["January","February","March","April","May","June","July","August","September","October","November","December"],J=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],se=_(e),O=b(e),A=[];for(let w=0;w<O;w++)A.push(null);for(let w=1;w<=se;w++)A.push(new Date(e.getFullYear(),e.getMonth(),w));const S=z(n),V=new Date,I=y.filter(w=>w.dateObj&&w.dateObj>=V&&w.status==="scheduled").sort((w,N)=>w.dateObj-N.dateObj).slice(0,5);return d?i.jsx("div",{style:{minHeight:"100vh",background:u.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("div",{style:{color:u.text},children:"Loading..."})}):i.jsx("div",{style:{minHeight:"100vh",background:u.bg,paddingBottom:"5rem",maxWidth:"100vw",overflowX:"hidden"},children:i.jsxs("div",{style:{padding:"1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5rem",marginBottom:"1rem",maxWidth:"100%",overflow:"hidden"},children:[i.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#3b82f6",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:I.length}),i.jsx("div",{style:{fontSize:"0.75rem",color:u.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Upcoming"})]}),i.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#f59e0b",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:s.filter(w=>w.status==="in-progress").length}),i.jsx("div",{style:{fontSize:"0.75rem",color:u.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"In Progress"})]}),i.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.border}`,borderRadius:"0.75rem",padding:"0.75rem",textAlign:"center",minWidth:0},children:[i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#10b981",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis"},children:s.filter(w=>w.status==="completed").length}),i.jsx("div",{style:{fontSize:"0.75rem",color:u.subtext,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Completed"})]})]}),i.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem",boxShadow:"none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[i.jsxs("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:"600",color:u.text},children:[B[e.getMonth()]," ",e.getFullYear()]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:M,style:{background:u.bg,border:`1px solid ${u.border}`,borderRadius:"0.5rem",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",color:u.text},children:i.jsx(w6,{size:20})}),i.jsx("button",{onClick:F,style:{background:u.bg,border:`1px solid ${u.border}`,borderRadius:"0.5rem",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center",color:u.text},children:i.jsx(_6,{size:20})})]})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.25rem",marginBottom:"0.5rem"},children:J.map(w=>i.jsx("div",{style:{textAlign:"center",fontSize:"0.75rem",fontWeight:"600",color:u.subtext,padding:"0.5rem 0"},children:w},w))}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.125rem"},children:A.map((w,N)=>{if(!w)return i.jsx("div",{},`empty-${N}`);const W=R(w,n),q=j(w),re=T(w);return i.jsxs("button",{onClick:()=>o(w),style:{aspectRatio:"1",border:"none",borderRadius:"0.375rem",background:W?u.selectedDay:q?u.todayBg:"transparent",color:W?"white":u.text,cursor:"pointer",fontSize:"0.75rem",fontWeight:W||q?"600":"400",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",padding:"0.25rem",minWidth:0,width:"100%"},onMouseEnter:Z=>{W||(Z.currentTarget.style.background=u.todayBg)},onMouseLeave:Z=>{!W&&!q?Z.currentTarget.style.background="transparent":!W&&q&&(Z.currentTarget.style.background=u.todayBg)},children:[w.getDate(),re&&i.jsx("div",{style:{position:"absolute",bottom:"0.125rem",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"0.0625rem"},children:z(w).slice(0,3).map((Z,te)=>i.jsx("div",{style:{width:"3px",height:"3px",borderRadius:"50%",background:W?"white":g[Z.status]}},te))})]},N)})})]}),i.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem",boxShadow:"none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[i.jsx("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:"600",color:u.text},children:R(n,new Date)?"Today":n.toLocaleDateString("en-US",{month:"long",day:"numeric"})}),i.jsxs("span",{style:{fontSize:"0.75rem",color:u.subtext,background:u.bg,padding:"0.25rem 0.75rem",borderRadius:"1rem"},children:[S.length," ",S.length===1?"job":"jobs"]})]}),S.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem",color:u.subtext},children:[i.jsx(p1,{size:48,style:{margin:"0 auto 0.5rem",opacity:.3}}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem"},children:"No jobs scheduled for this day"})]}):i.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:S.map(w=>i.jsxs("div",{style:{background:u.bg,border:`1px solid ${u.border}`,borderLeft:`4px solid ${g[w.status]}`,borderRadius:"0.5rem",padding:"1rem"},children:[i.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:i.jsxs("div",{children:[i.jsx("h4",{style:{margin:"0 0 0.25rem 0",fontSize:"1rem",fontWeight:"600",color:u.text},children:w.title||w.name}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:u.subtext},children:w.client})]})}),i.jsxs("div",{style:{display:"grid",gap:"0.25rem",fontSize:"0.875rem",color:u.subtext},children:[w.time&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(r0,{size:14}),i.jsxs("span",{children:[w.time,w.duration&&` (${w.duration})`]})]}),w.location&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Tw,{size:14}),i.jsx("span",{children:w.location})]}),w.estimatedCost&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(h5,{size:14}),i.jsxs("span",{children:["$",Number(w.estimatedCost).toLocaleString()]})]})]})]},w.id))})]}),i.jsxs("div",{style:{background:u.cardBg,border:`1px solid ${u.border}`,borderRadius:"0.75rem",padding:"1rem",boxShadow:"none"},children:[i.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"1.125rem",fontWeight:"600",color:u.text},children:"Upcoming Jobs"}),I.length===0?i.jsx("div",{style:{textAlign:"center",padding:"2rem 1rem",color:u.subtext},children:i.jsx("p",{style:{margin:0,fontSize:"0.875rem"},children:"No upcoming jobs scheduled"})}):i.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:I.map(w=>i.jsxs("div",{style:{background:u.bg,border:`1px solid ${u.border}`,borderRadius:"0.5rem",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("h4",{style:{margin:"0 0 0.25rem 0",fontSize:"0.9375rem",fontWeight:"600",color:u.text},children:w.title||w.name}),i.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.8125rem",color:u.subtext},children:w.client}),i.jsxs("div",{style:{fontSize:"0.75rem",color:u.subtext,display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(p1,{size:12}),w.dateObj.toLocaleDateString("en-US",{month:"short",day:"numeric"}),w.time&&` at ${w.time}`]})]}),i.jsx("div",{style:{width:"4px",height:"40px",borderRadius:"2px",background:g[w.status]}})]},w.id))})]})]})})},BL=()=>{const r=new Uint8Array(32);return crypto.getRandomValues(r),Array.from(r,e=>e.toString(16).padStart(2,"0")).join("")},c5=async(r,e)=>{try{const t=BL(),n=new Date;return n.setHours(n.getHours()+24),await s5(ya(No,"verificationTokens",t),{userId:r,email:e,createdAt:Vl(),expiresAt:n.toISOString(),used:!1}),t}catch(t){throw console.error("Error creating verification token:",t),t}},LL=async r=>{try{const e=await YT(ya(No,"verificationTokens",r));if(!e.exists())return{success:!1,error:"Invalid verification link"};const t=e.data();return t.used?{success:!1,error:"This verification link has already been used"}:new Date(t.expiresAt)<new Date?{success:!1,error:"This verification link has expired"}:(await s5(ya(No,"users",t.userId),{emailVerified:!0,verifiedAt:Vl()},{merge:!0}),await s5(ya(No,"verificationTokens",r),{used:!0,usedAt:Vl()},{merge:!0}),{success:!0,userId:t.userId,email:t.email})}catch(e){return console.error("Error verifying token:",e),{success:!1,error:"Verification failed. Please try again."}}},i4=async r=>{try{const e=await YT(ya(No,"users",r));return e.exists()&&e.data().emailVerified===!0}catch(e){return console.error("Error checking verification status:",e),!1}},d5=async(r,e)=>{try{const t=`${window.location.origin}?token=${e}`;if(!(await fetch("/api/send-verification-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,verificationLink:t})})).ok)throw new Error("Failed to send verification email");return{success:!0}}catch(t){throw console.error("Error sending verification email:",t),t}},FL=({isDarkMode:r})=>{const[e,t]=ce.useState(null),[n,o]=ce.useState(!0),[s,l]=ce.useState(!0),[d,h]=ce.useState(""),[u,g]=ce.useState(""),[y,_]=ce.useState(""),[b,R]=ce.useState(""),[j,z]=ce.useState(""),[T,M]=ce.useState(!1),[F,B]=ce.useState(!1),[J,se]=ce.useState(!1),[O,A]=ce.useState(!1),S={bg:r?"#000000":"#f9fafb",cardBg:r?"#0a0a0a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#666666":"#6b7280",border:r?"#1a1a1a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"},V={minLength:u.length>=8,hasUpperCase:/[A-Z]/.test(u),hasLowerCase:/[a-z]/.test(u),hasNumber:/[0-9]/.test(u)},I=Object.values(V).every(Boolean),w=u===y&&y!=="";ce.useEffect(()=>{const Z=l0(Qn,async te=>{if(t(te),te){const ye=await i4(te.uid);A(ye)}else A(!1);o(!1)});return()=>Z()},[]);const N=async()=>{if(e){se(!0),R(""),z("");try{console.log("🔍 Sending custom verification email to:",e.email);const Z=await c5(e.uid,e.email);await d5(e.email,Z),console.log("✅ Verification email sent via Resend"),z(`Verification email sent to ${e.email}! Check your inbox.`),setTimeout(()=>z(""),8e3)}catch(Z){console.error("❌ Error sending verification email:",Z),R(`Failed to send verification email: ${Z.message}`),setTimeout(()=>R(""),5e3)}finally{se(!1)}}},W=async Z=>{if(Z.preventDefault(),R(""),z(""),!I){R("Please meet all password requirements");return}if(u!==y){R("Passwords do not match");return}try{const te=await b_(Qn,d,u),ye=await c5(te.user.uid,d);await d5(d,ye),h(""),g(""),_(""),z("Account created! Please check your email inbox to verify your account.")}catch(te){te.code==="auth/email-already-in-use"?R("This email is already registered. Try logging in instead."):R(te.message)}},q=async Z=>{Z.preventDefault(),R("");try{await v_(Qn,d,u),h(""),g("")}catch(te){te.code==="auth/user-not-found"?R("No account found with this email."):te.code==="auth/wrong-password"?R("Incorrect password."):te.code==="auth/invalid-credential"?R("Invalid email or password."):R(te.message)}},re=async()=>{try{await iI(Qn)}catch(Z){R(Z.message)}};return n?i.jsx("div",{style:{background:S.bg,minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("div",{style:{color:S.text},children:"Loading..."})}):e?i.jsx("div",{style:{background:S.bg,paddingBottom:"5rem"},children:i.jsxs("div",{style:{padding:"1rem"},children:[!O&&i.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem",display:"flex",alignItems:"flex-start",gap:"0.75rem"},children:[i.jsx(Rl,{size:20,color:"#f59e0b",style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsxs("div",{style:{flex:1},children:[i.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#92400e",fontSize:"0.875rem",fontWeight:"600"},children:"Please verify your email"}),i.jsx("p",{style:{margin:"0 0 0.75rem 0",color:"#92400e",fontSize:"0.8125rem"},children:"Check your inbox for a verification link to activate your account."}),i.jsx("button",{onClick:N,disabled:J,style:{padding:"0.5rem 1rem",background:"#f59e0b",color:"white",border:"none",borderRadius:"0.375rem",fontSize:"0.8125rem",fontWeight:"600",cursor:J?"not-allowed":"pointer",opacity:J?.5:1},children:J?"Sending...":"Resend Verification Email"})]})]}),j&&i.jsxs("div",{style:{padding:"0.75rem",background:"#dcfce7",border:"1px solid #86efac",borderRadius:"0.5rem",color:"#16a34a",fontSize:"0.875rem",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Br,{size:18}),j]}),b&&i.jsxs("div",{style:{padding:"0.75rem",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"0.5rem",color:"#dc2626",fontSize:"0.875rem",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Rl,{size:18}),b]}),i.jsxs("div",{style:{background:S.cardBg,borderRadius:"0.75rem",border:`1px solid ${S.border}`,padding:"2rem 1rem",marginBottom:"1rem",textAlign:"center",boxShadow:"none"},children:[i.jsxs("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:O?"#10b981":"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",position:"relative"},children:[i.jsx($u,{size:40,color:"white"}),O&&i.jsx("div",{style:{position:"absolute",bottom:0,right:0,width:"24px",height:"24px",background:"#10b981",borderRadius:"50%",border:`2px solid ${S.cardBg}`,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(Br,{size:14,color:"white"})})]}),i.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:S.text,fontSize:"1.25rem",fontWeight:"600"},children:e.email}),i.jsx("p",{style:{margin:0,color:S.subtext,fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.375rem"},children:O?i.jsxs(i.Fragment,{children:[i.jsx(Br,{size:16,color:"#10b981"}),i.jsx("span",{children:"Verified Account"})]}):i.jsxs(i.Fragment,{children:[i.jsx(Rl,{size:16,color:"#f59e0b"}),i.jsx("span",{children:"Unverified Account"})]})})]}),i.jsxs("div",{style:{background:S.cardBg,borderRadius:"0.75rem",border:`1px solid ${S.border}`,overflow:"hidden",marginBottom:"1rem",boxShadow:"none"},children:[i.jsx("h3",{style:{margin:0,padding:"1rem",color:S.text,fontSize:"1rem",fontWeight:"600",borderBottom:`1px solid ${S.border}`},children:"Account Settings"}),i.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",borderBottom:`1px solid ${S.border}`,display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:S.text},children:[i.jsx(Cm,{size:20,color:S.subtext}),i.jsxs("div",{style:{flex:1,textAlign:"left"},children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Email"}),i.jsx("div",{style:{fontSize:"0.8125rem",color:S.subtext},children:e.email})]})]}),i.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",borderBottom:`1px solid ${S.border}`,display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:S.text},children:[i.jsx(c6,{size:20,color:S.subtext}),i.jsxs("div",{style:{flex:1,textAlign:"left"},children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Notifications"}),i.jsx("div",{style:{fontSize:"0.8125rem",color:S.subtext},children:"Manage preferences"})]})]}),i.jsxs("button",{style:{width:"100%",padding:"1rem",background:"transparent",border:"none",display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",color:S.text},children:[i.jsx(uC,{size:20,color:S.subtext}),i.jsxs("div",{style:{flex:1,textAlign:"left"},children:[i.jsx("div",{style:{fontSize:"0.9375rem",fontWeight:"500"},children:"Privacy & Security"}),i.jsx("div",{style:{fontSize:"0.8125rem",color:S.subtext},children:"Account protection"})]})]})]}),i.jsxs("button",{onClick:re,style:{width:"100%",padding:"1rem",background:"#ef4444",color:"white",border:"none",borderRadius:"0.75rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",boxShadow:"none"},children:[i.jsx(G6,{size:20}),"Log Out"]})]})}):i.jsx("div",{style:{background:S.bg,minHeight:"100vh",paddingBottom:"5rem"},children:i.jsx("div",{style:{padding:"1rem"},children:i.jsxs("div",{style:{background:S.cardBg,borderRadius:"0.75rem",border:`1px solid ${S.border}`,padding:"2rem 1rem",marginTop:"2rem",boxShadow:"none"},children:[i.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:i.jsx($u,{size:40,color:"white"})}),i.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:S.text,fontSize:"1.5rem",fontWeight:"700",textAlign:"center"},children:s?"Welcome Back":"Create Account"}),i.jsx("p",{style:{margin:"0 0 2rem 0",color:S.subtext,fontSize:"0.875rem",textAlign:"center"},children:s?"Sign in to your account":"Sign up to get started"}),b&&i.jsx("div",{style:{padding:"0.75rem",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"0.5rem",color:"#dc2626",fontSize:"0.875rem",marginBottom:"1rem"},children:b}),j&&i.jsx("div",{style:{padding:"0.75rem",background:"#dcfce7",border:"1px solid #86efac",borderRadius:"0.5rem",color:"#16a34a",fontSize:"0.875rem",marginBottom:"1rem"},children:j}),i.jsxs("form",{onSubmit:s?q:W,children:[i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:S.text,fontSize:"0.875rem",fontWeight:"500"},children:"Email"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(Cm,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:S.subtext}}),i.jsx("input",{type:"email",value:d,onChange:Z=>h(Z.target.value),placeholder:"your@email.com",required:!0,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}})]})]}),i.jsxs("div",{style:{marginBottom:s?"1.5rem":"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:S.text,fontSize:"0.875rem",fontWeight:"500"},children:"Password"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(tf,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:S.subtext}}),i.jsx("input",{type:T?"text":"password",value:u,onChange:Z=>g(Z.target.value),placeholder:"••••••••",required:!0,style:{width:"100%",padding:"0.75rem 2.5rem 0.75rem 2.5rem",border:`1px solid ${S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}}),i.jsx("button",{type:"button",onClick:()=>M(!T),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:S.subtext,padding:"0.25rem",display:"flex",alignItems:"center"},children:T?i.jsx(_m,{size:18}):i.jsx(Tm,{size:18})})]})]}),!s&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:S.text,fontSize:"0.875rem",fontWeight:"500"},children:"Confirm Password"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(tf,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:S.subtext}}),i.jsx("input",{type:F?"text":"password",value:y,onChange:Z=>_(Z.target.value),placeholder:"••••••••",required:!0,style:{width:"100%",padding:"0.75rem 2.5rem 0.75rem 2.5rem",border:`1px solid ${y&&!w?"#ef4444":S.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:S.inputBg,color:S.text,boxSizing:"border-box"}}),i.jsx("button",{type:"button",onClick:()=>B(!F),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:S.subtext,padding:"0.25rem",display:"flex",alignItems:"center"},children:F?i.jsx(_m,{size:18}):i.jsx(Tm,{size:18})})]}),y&&!w&&i.jsx("p",{style:{margin:"0.5rem 0 0 0",color:"#ef4444",fontSize:"0.8125rem"},children:"Passwords do not match"})]}),i.jsxs("div",{style:{marginBottom:"1.5rem",padding:"0.75rem",background:r?"#1a1a1a":"#f9fafb",borderRadius:"0.5rem",border:`1px solid ${S.border}`},children:[i.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.75rem",fontWeight:"600",color:S.text},children:"Password must have:"}),[{key:"minLength",label:"At least 8 characters"},{key:"hasUpperCase",label:"One uppercase letter"},{key:"hasLowerCase",label:"One lowercase letter"},{key:"hasNumber",label:"One number"}].map(({key:Z,label:te})=>i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[i.jsx(Br,{size:14,style:{color:V[Z]?"#10b981":S.subtext,flexShrink:0}}),i.jsx("span",{style:{fontSize:"0.8125rem",color:V[Z]?S.text:S.subtext},children:te})]},Z))]})]}),i.jsx("button",{type:"submit",disabled:!s&&(!I||!w),style:{width:"100%",padding:"0.875rem",background:!s&&(!I||!w)?S.border:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",cursor:!s&&(!I||!w)?"not-allowed":"pointer",marginBottom:"1rem",opacity:!s&&(!I||!w)?.5:1},children:s?"Sign In":"Sign Up"}),i.jsxs("div",{style:{textAlign:"center",color:S.subtext,fontSize:"0.875rem"},children:[s?"Don't have an account? ":"Already have an account? ",i.jsx("button",{type:"button",onClick:()=>{l(!s),R(""),z(""),g(""),_("")},style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",textDecoration:"underline"},children:s?"Sign Up":"Sign In"})]})]})]})})})},zL="_addJobButton_euajw_3",VL="_addJobContainer_euajw_19",lw={addJobButton:zL,addJobContainer:VL},OL="_actionButtons_cr4co_3",ML="_cardHeader_cr4co_42",DL="_cardTitle_cr4co_49",f1={actionButtons:OL,cardHeader:ML,cardTitle:DL},WL=({job:r,statusConfig:e,statusDropdownOpen:t,setStatusDropdownOpen:n,onUpdateStatus:o,onViewJob:s,onViewEstimate:l,onViewInvoice:d,onClockInOut:h,isDarkMode:u,colors:g})=>{const y=ce.useRef(null),[_,b]=ce.useState(!1),[R,j]=ce.useState(Date.now()),z=e[r.status].icon,T=r.title||r.name;ce.useEffect(()=>{if(r.clockedIn){const A=setInterval(()=>{j(Date.now())},1e3);return()=>clearInterval(A)}},[r.clockedIn]);const M=()=>{if(!r.workSessions||r.workSessions.length===0)return 0;let A=0;return r.workSessions.forEach(S=>{S.startTime&&S.endTime&&(A+=new Date(S.endTime)-new Date(S.startTime))}),A/(1e3*60*60)},F=()=>!r.clockedIn||!r.currentSessionStart?0:(R-new Date(r.currentSessionStart))/1e3,B=A=>{const S=Math.floor(A/3600),V=Math.floor(A%3600/60);return`${S.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}`},J=A=>{A.stopPropagation(),A.preventDefault(),h&&h(r.id,!r.clockedIn)},se=M(),O=F();return i.jsxs("div",{style:{background:g.cardBg,border:`1px solid ${g.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"0.75rem",transition:"all 0.2s",WebkitTapHighlightColor:"transparent",userSelect:"none"},children:[i.jsxs("div",{className:f1.cardHeader,children:[i.jsxs("div",{className:f1.cardTitle,onClick:()=>b(!_),style:{cursor:"pointer"},children:[i.jsxs("h3",{style:{margin:"0 0 0.25rem 0",color:g.text,fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[T,_?i.jsx(C6,{size:18}):i.jsx(Sm,{size:18})]}),i.jsx("p",{style:{margin:0,color:g.subtext,fontSize:"0.875rem"},children:r.client})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"0.25rem",alignSelf:"flex-start"},children:[i.jsxs("div",{style:{position:"relative"},ref:t===r.id?y:null,children:[i.jsxs("button",{onClick:A=>{A.stopPropagation(),n(t===r.id?null:r.id)},style:{display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",padding:"4px 8px",borderRadius:"4px",background:`${e[r.status].color}20`,color:e[r.status].color,fontSize:"11px",fontWeight:"600",whiteSpace:"nowrap",border:"none",cursor:"pointer",transition:"all 0.2s",lineHeight:"1",minHeight:"unset",minWidth:"unset",height:"fit-content",width:"fit-content",boxSizing:"border-box"},children:[i.jsx(z,{size:12}),i.jsx("span",{children:e[r.status].label})]}),t===r.id&&i.jsx("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.5rem",background:g.cardBg,border:`1px solid ${g.border}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:100,minWidth:"140px",overflow:"hidden"},children:Object.entries(e).map(([A,S])=>{const V=S.icon;return i.jsxs("button",{onClick:I=>{I.stopPropagation(),o(r.id,A)},style:{width:"100%",padding:"0.625rem 0.75rem",background:r.status===A?`${S.color}20`:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:S.color,fontSize:"0.875rem",fontWeight:r.status===A?"600":"500",transition:"background 0.2s"},onMouseEnter:I=>{r.status!==A&&(I.target.style.background=u?"#2a2a2a":"#f3f4f6")},onMouseLeave:I=>{r.status!==A&&(I.target.style.background="transparent")},children:[i.jsx(V,{size:16}),i.jsx("span",{children:S.label})]},A)})})]}),(r.clockedIn||se>0)&&i.jsxs("div",{style:{fontSize:"0.75rem",color:g.subtext,textAlign:"right"},children:[r.clockedIn&&i.jsx("div",{style:{color:g.text,fontWeight:"600",fontSize:"0.875rem",fontVariantNumeric:"tabular-nums"},children:B(O)}),se>0&&i.jsxs("div",{style:{fontSize:"0.7rem"},children:["Total: ",se.toFixed(2),"h"]})]})]})]}),(r.location||r.date)&&i.jsxs("div",{onClick:()=>b(!_),style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem",color:g.subtext,fontSize:"0.875rem",gap:"1rem",cursor:"pointer"},children:[r.location&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Tw,{size:16}),i.jsx("span",{children:r.location})]}),r.date&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginLeft:"auto"},children:[i.jsx(p1,{size:16}),i.jsxs("span",{children:[new Date(r.date+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),r.time&&` (${r.time})`,r.duration&&` ${r.duration}`]})]})]}),_&&i.jsxs("div",{style:{marginTop:"0.75rem",paddingTop:"0.75rem",borderTop:`1px solid ${g.border}`},children:[r.estimatedCost&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:g.subtext,fontSize:"0.875rem"},children:[i.jsx(h5,{size:16}),i.jsxs("span",{children:["$",Number(r.estimatedCost).toLocaleString()]})]}),r.notes&&i.jsx("div",{style:{marginBottom:"0.75rem"},children:i.jsx("p",{style:{margin:0,padding:"0.75rem",background:g.bg,borderRadius:"0.5rem",color:g.text,fontSize:"0.875rem",lineHeight:"1.5"},children:r.notes})})]}),i.jsxs("div",{className:f1.actionButtons,children:[i.jsxs("button",{onClick:A=>{A.stopPropagation(),A.preventDefault(),J(A)},title:r.clockedIn?"Clock Out":"Clock In",style:{background:r.clockedIn?"#ef4444":"#10b981",border:"none",borderRadius:"0.5rem",color:"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:"600"},children:[r.clockedIn?i.jsx(mC,{size:16}):i.jsx(rC,{size:16}),i.jsx("span",{children:r.clockedIn?"Clock Out":"Clock In"})]}),i.jsxs("button",{onClick:A=>{A.stopPropagation(),A.preventDefault(),s(r)},title:"Edit Job",style:{background:"#2563eb",border:"none",borderRadius:"0.5rem",color:"white",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:"600"},children:[i.jsx(Bw,{size:16}),i.jsx("span",{children:"Edit"})]}),i.jsxs("button",{onClick:A=>{A.stopPropagation(),A.preventDefault(),l(r)},title:r.estimateId?"View Estimate":"No estimate linked",style:{background:r.estimateId?"#10b981":g.border,border:"none",borderRadius:"0.5rem",color:"white",cursor:r.estimateId?"pointer":"not-allowed",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:"600",opacity:r.estimateId?1:.5},disabled:!r.estimateId,children:[i.jsx(Lf,{size:16}),i.jsx("span",{children:"Estimate"})]}),i.jsxs("button",{onClick:A=>{A.stopPropagation(),A.preventDefault(),d(r)},title:r.invoiceId?"View Invoice":"No invoice linked",style:{background:r.invoiceId?"#f59e0b":g.border,border:"none",borderRadius:"0.5rem",color:"white",cursor:r.invoiceId?"pointer":"not-allowed",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontWeight:"600",opacity:r.invoiceId?1:.5},disabled:!r.invoiceId,children:[i.jsx(f5,{size:16}),i.jsx("span",{children:"Invoice"})]})]})]})},$L=({linkedEstimate:r,estimates:e,showMenu:t,setShowMenu:n,onSelectEstimate:o,onCreateNewEstimate:s,onViewEstimate:l,onRemoveEstimate:d,menuRef:h,isDarkMode:u,colors:g})=>r?i.jsxs("div",{style:{marginBottom:"0.75rem"},children:[i.jsxs("button",{type:"button",onClick:()=>l(r.id),style:{width:"100%",padding:"0.75rem",background:g.bg,border:`1px solid ${g.border}`,borderRadius:"0.5rem",cursor:"pointer",textAlign:"left",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:g.text,marginBottom:"0.25rem"},children:r.name}),i.jsxs("div",{style:{fontSize:"0.75rem",color:g.subtext},children:["$",Number(r.total||0).toLocaleString()]})]}),i.jsx("div",{style:{padding:"0.25rem 0.5rem",background:"#2563eb",color:"white",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:"View"})]}),i.jsx("button",{type:"button",onClick:d,style:{width:"100%",padding:"0.5rem",marginTop:"0.5rem",background:"transparent",border:`1px solid ${g.border}`,borderRadius:"0.5rem",color:g.subtext,cursor:"pointer",fontSize:"0.75rem"},children:"Remove Estimate"})]}):i.jsxs("div",{style:{position:"relative",marginBottom:"0.75rem"},ref:t?h:null,children:[i.jsxs("button",{type:"button",onClick:()=>n(!t),style:{width:"100%",padding:"0.75rem",background:g.inputBg,border:`1px solid ${g.border}`,borderRadius:"0.5rem",color:"#2563eb",cursor:"pointer",fontSize:"0.9375rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(qs,{size:18}),"Add Estimate"]}),t&&i.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"0.5rem",background:g.cardBg,border:`1px solid ${g.border}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:100,maxHeight:"200px",overflowY:"auto"},children:[i.jsxs("button",{type:"button",onClick:s,style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${g.border}`,cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563eb",fontSize:"0.875rem",fontWeight:"600",textAlign:"left"},onMouseEnter:y=>y.target.style.background=u?"#2a2a2a":"#f3f4f6",onMouseLeave:y=>y.target.style.background="transparent",children:[i.jsx(qs,{size:16}),"Create New Estimate"]}),e.length===0?i.jsx("div",{style:{padding:"1rem",textAlign:"center",color:g.subtext,fontSize:"0.875rem"},children:"No estimates available"}):e.map(y=>i.jsxs("button",{type:"button",onClick:()=>o(y),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${g.border}`,cursor:"pointer",textAlign:"left",color:g.text,fontSize:"0.875rem"},onMouseEnter:_=>_.target.style.background=u?"#2a2a2a":"#f3f4f6",onMouseLeave:_=>_.target.style.background="transparent",children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:y.name||"Untitled Estimate"}),i.jsxs("div",{style:{color:g.subtext,fontSize:"0.75rem"},children:["$",Number(y.total||0).toLocaleString()]})]},y.id))]})]}),o4=({formData:r,setFormData:e,linkedEstimate:t,estimates:n,showEstimateMenu:o,setShowEstimateMenu:s,onSelectEstimate:l,onCreateNewEstimate:d,onViewEstimate:h,onRemoveEstimate:u,estimateMenuRef:g,isDarkMode:y,colors:_})=>i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"text",placeholder:"Job Title *",value:r.title,onChange:b=>e(R=>({...R,title:b.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${_.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:_.inputBg,color:_.text,boxSizing:"border-box"}}),i.jsx("input",{type:"text",placeholder:"Client Name *",value:r.client,onChange:b=>e(R=>({...R,client:b.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${_.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:_.inputBg,color:_.text,boxSizing:"border-box"}}),i.jsx("input",{type:"text",placeholder:"Location",value:r.location,onChange:b=>e(R=>({...R,location:b.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${_.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:_.inputBg,color:_.text,boxSizing:"border-box"}}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[i.jsx("input",{type:"date",value:r.date,onChange:b=>e(R=>({...R,date:b.target.value})),style:{padding:"0.75rem",border:`1px solid ${_.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:_.inputBg,color:_.text,boxSizing:"border-box"}}),i.jsx("input",{type:"time",value:r.time,onChange:b=>e(R=>({...R,time:b.target.value})),style:{padding:"0.75rem",border:`1px solid ${_.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:_.inputBg,color:_.text,boxSizing:"border-box"}})]}),i.jsx($L,{linkedEstimate:t,estimates:n,showMenu:o,setShowMenu:s,onSelectEstimate:l,onCreateNewEstimate:d,onViewEstimate:h,onRemoveEstimate:u,menuRef:g,isDarkMode:y,colors:_}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[i.jsx("input",{type:"number",placeholder:"Cost ($)",value:r.estimatedCost,onChange:b=>e(R=>({...R,estimatedCost:b.target.value})),style:{padding:"0.75rem",border:`1px solid ${_.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:_.inputBg,color:_.text,boxSizing:"border-box"}}),i.jsx("input",{type:"text",placeholder:"Duration",value:r.duration,onChange:b=>e(R=>({...R,duration:b.target.value})),style:{padding:"0.75rem",border:`1px solid ${_.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:_.inputBg,color:_.text,boxSizing:"border-box"}})]}),i.jsxs("select",{value:r.status,onChange:b=>e(R=>({...R,status:b.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${_.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:_.inputBg,color:_.text,boxSizing:"border-box"},children:[i.jsx("option",{value:"scheduled",children:"Scheduled"}),i.jsx("option",{value:"in-progress",children:"In Progress"}),i.jsx("option",{value:"completed",children:"Completed"})]}),i.jsx("textarea",{placeholder:"Notes",value:r.notes,onChange:b=>e(R=>({...R,notes:b.target.value})),rows:"3",style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${_.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:_.inputBg,color:_.text,boxSizing:"border-box",resize:"vertical"}})]}),qL=({viewingJob:r,formData:e,setFormData:t,linkedEstimate:n,estimates:o,showEstimateMenu:s,setShowEstimateMenu:l,onSelectEstimate:d,onCreateNewEstimate:h,onViewEstimate:u,onRemoveEstimate:g,estimateMenuRef:y,onClose:_,onSave:b,onDelete:R,isDarkMode:j,colors:z})=>r?i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:_,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:1e3,animation:"fadeIn 0.2s"}}),i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:z.cardBg,borderRadius:"1rem",padding:"1.5rem",paddingBottom:"calc(100px + env(safe-area-inset-bottom))",width:"90%",maxWidth:"500px",maxHeight:"80vh",overflowY:"auto",zIndex:1001,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.3)",WebkitOverflowScrolling:"touch"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[i.jsx("h2",{style:{margin:0,fontSize:"1.25rem",fontWeight:"600",color:z.text},children:"Job Details"}),i.jsx("button",{onClick:_,style:{background:"transparent",border:"none",cursor:"pointer",padding:"0.5rem",color:z.subtext,display:"flex",alignItems:"center"},children:i.jsx(Am,{size:24})})]}),i.jsxs("div",{children:[i.jsx(o4,{formData:e,setFormData:t,linkedEstimate:n,estimates:o,showEstimateMenu:s,setShowEstimateMenu:l,onSelectEstimate:d,onCreateNewEstimate:h,onViewEstimate:u,onRemoveEstimate:g,estimateMenuRef:y,isDarkMode:j,colors:z}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:b,disabled:!e.title||!e.client,style:{flex:1,padding:"0.75rem",background:!e.title||!e.client?z.border:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:!e.title||!e.client?"not-allowed":"pointer",opacity:!e.title||!e.client?.5:1},children:"Save Changes"}),i.jsx("button",{onClick:()=>R(r.id,r.title||r.name),style:{padding:"0.75rem",background:"transparent",color:"#ef4444",border:"1px solid #ef4444",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.25rem"},children:i.jsx(Nl,{size:16})})]})]})]})]}):null,UL=({activeStatusTab:r,setActiveStatusTab:e,statusCounts:t,statusConfig:n,colors:o})=>i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.375rem",marginBottom:"1rem"},children:[i.jsxs("button",{onClick:()=>e("all"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${r==="all"?o.text:o.border}`,background:r==="all"?o.text:"transparent",color:r==="all"?o.bg:o.text,fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"0.375rem",transition:"all 0.2s"},children:[i.jsx("span",{children:"All"}),i.jsx("span",{style:{background:r==="all"?o.bg:o.cardBg,color:r==="all"?o.text:o.subtext,padding:"0.125rem 0.375rem",borderRadius:"1rem",fontSize:"0.7rem",fontWeight:"700",minWidth:"1.25rem",textAlign:"center"},children:t.all})]}),i.jsxs("button",{onClick:()=>e("scheduled"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${r==="scheduled"?n.scheduled.color:o.border}`,background:r==="scheduled"?`${n.scheduled.color}20`:"transparent",color:r==="scheduled"?n.scheduled.color:o.text,fontSize:"0.7rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.125rem",transition:"all 0.2s"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(r0,{size:12}),i.jsx("span",{style:{background:r==="scheduled"?n.scheduled.color:o.cardBg,color:r==="scheduled"?"white":o.subtext,padding:"0.125rem 0.3rem",borderRadius:"1rem",fontSize:"0.65rem",fontWeight:"700",minWidth:"1.25rem",textAlign:"center"},children:t.scheduled})]}),i.jsx("span",{style:{fontSize:"0.65rem"},children:"Scheduled"})]}),i.jsxs("button",{onClick:()=>e("in-progress"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${r==="in-progress"?n["in-progress"].color:o.border}`,background:r==="in-progress"?`${n["in-progress"].color}20`:"transparent",color:r==="in-progress"?n["in-progress"].color:o.text,fontSize:"0.7rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.125rem",transition:"all 0.2s"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(Rl,{size:12}),i.jsx("span",{style:{background:r==="in-progress"?n["in-progress"].color:o.cardBg,color:r==="in-progress"?"white":o.subtext,padding:"0.125rem 0.3rem",borderRadius:"1rem",fontSize:"0.65rem",fontWeight:"700",minWidth:"1.25rem",textAlign:"center"},children:t["in-progress"]})]}),i.jsx("span",{style:{fontSize:"0.65rem"},children:"In Progress"})]}),i.jsxs("button",{onClick:()=>e("completed"),style:{padding:"0.5rem 0.25rem",borderRadius:"0.5rem",border:`1px solid ${r==="completed"?n.completed.color:o.border}`,background:r==="completed"?`${n.completed.color}20`:"transparent",color:r==="completed"?n.completed.color:o.text,fontSize:"0.7rem",fontWeight:"600",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.125rem",transition:"all 0.2s"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(Br,{size:12}),i.jsx("span",{style:{background:r==="completed"?n.completed.color:o.cardBg,color:r==="completed"?"white":o.subtext,padding:"0.125rem 0.3rem",borderRadius:"1rem",fontSize:"0.65rem",fontWeight:"700",minWidth:"1.25rem",textAlign:"center"},children:t.completed})]}),i.jsx("span",{style:{fontSize:"0.65rem"},children:"Completed"})]})]}),HL=({isOpen:r,onClose:e,isDarkMode:t})=>{const[n,o]=ce.useState(!0),[s,l]=ce.useState(!1),[d,h]=ce.useState(""),[u,g]=ce.useState(""),[y,_]=ce.useState(""),[b,R]=ce.useState(""),[j,z]=ce.useState(""),[T,M]=ce.useState(!1),[F,B]=ce.useState(!1),[J,se]=ce.useState(!1),O={cardBg:t?"#0a0a0a":"#ffffff",text:t?"#ffffff":"#111827",subtext:t?"#666666":"#6b7280",border:t?"#1a1a1a":"#e5e7eb",inputBg:t?"#000000":"#ffffff"};if(!r)return null;const A={minLength:u.length>=8,hasUpperCase:/[A-Z]/.test(u),hasLowerCase:/[a-z]/.test(u),hasNumber:/[0-9]/.test(u)},S=Object.values(A).every(Boolean),V=u===y&&y!=="",I=async re=>{re.preventDefault(),R(""),z(""),M(!0);try{await tI(Qn,d),z("Password reset email sent! Check your inbox."),setTimeout(()=>{l(!1),z("")},3e3)}catch(Z){R(Z.message)}finally{M(!1)}},w=async re=>{if(re.preventDefault(),R(""),z(""),!S){R("Please meet all password requirements");return}if(u!==y){R("Passwords do not match");return}M(!0);try{const Z=await b_(Qn,d,u),te=await c5(Z.user.uid,d);await d5(d,te),console.log("✅ Custom verification email sent via Resend"),h(""),g(""),_(""),e(),alert("Account created! Please check your email inbox to verify your account.")}catch(Z){Z.code==="auth/email-already-in-use"?R("This email is already registered. Try logging in instead."):Z.code==="auth/weak-password"?R("Password is too weak. Please use a stronger password."):R(Z.message)}finally{M(!1)}},N=async re=>{re.preventDefault(),R(""),M(!0);try{const Z=await v_(Qn,d,u);if(!await i4(Z.user.uid)){R("Please verify your email before logging in. Check your inbox for the verification link."),await Qn.signOut(),M(!1);return}h(""),g(""),e()}catch(Z){Z.code==="auth/user-not-found"?R("No account found with this email. Try signing up instead."):Z.code==="auth/wrong-password"?R("Incorrect password. Please try again."):Z.code==="auth/invalid-credential"?R("Invalid email or password. Please try again."):R(Z.message)}finally{M(!1)}},W=re=>{re.target===re.currentTarget&&e()},q=()=>{h(""),g(""),_(""),R(""),z(""),l(!1)};return s?i.jsx("div",{onClick:W,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:i.jsxs("div",{style:{background:O.cardBg,borderRadius:"0.75rem",border:`1px solid ${O.border}`,padding:"2rem 1.5rem",maxWidth:"400px",width:"100%",position:"relative"},children:[i.jsx("button",{onClick:e,style:{position:"absolute",top:"1rem",right:"1rem",background:"transparent",border:"none",cursor:"pointer",color:O.subtext,padding:"0.25rem",display:"flex",alignItems:"center"},children:i.jsx(Am,{size:24})}),i.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:i.jsx(tf,{size:40,color:"white"})}),i.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:O.text,fontSize:"1.5rem",fontWeight:"700",textAlign:"center"},children:"Reset Password"}),i.jsx("p",{style:{margin:"0 0 2rem 0",color:O.subtext,fontSize:"0.875rem",textAlign:"center"},children:"Enter your email and we'll send you a reset link"}),b&&i.jsx("div",{style:{padding:"0.75rem",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"0.5rem",color:"#dc2626",fontSize:"0.875rem",marginBottom:"1rem"},children:b}),j&&i.jsx("div",{style:{padding:"0.75rem",background:"#dcfce7",border:"1px solid #86efac",borderRadius:"0.5rem",color:"#16a34a",fontSize:"0.875rem",marginBottom:"1rem"},children:j}),i.jsxs("form",{onSubmit:I,children:[i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:O.text,fontSize:"0.875rem",fontWeight:"500"},children:"Email"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(Cm,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:O.subtext}}),i.jsx("input",{type:"email",value:d,onChange:re=>h(re.target.value),placeholder:"your@email.com",required:!0,disabled:T,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:`1px solid ${O.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:O.inputBg,color:O.text,boxSizing:"border-box"}})]})]}),i.jsx("button",{type:"submit",disabled:T,style:{width:"100%",padding:"0.875rem",background:T?O.border:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",cursor:T?"not-allowed":"pointer",marginBottom:"1rem"},children:T?"Sending...":"Send Reset Link"}),i.jsx("button",{type:"button",onClick:()=>{l(!1),q()},disabled:T,style:{width:"100%",padding:"0.875rem",background:"transparent",color:O.text,border:`1px solid ${O.border}`,borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",cursor:T?"not-allowed":"pointer"},children:"Back to Login"})]})]})}):i.jsx("div",{onClick:W,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:i.jsxs("div",{style:{background:O.cardBg,borderRadius:"0.75rem",border:`1px solid ${O.border}`,padding:"2rem 1.5rem",maxWidth:"400px",width:"100%",position:"relative",maxHeight:"90vh",overflowY:"auto"},children:[i.jsx("button",{onClick:e,style:{position:"absolute",top:"1rem",right:"1rem",background:"transparent",border:"none",cursor:"pointer",color:O.subtext,padding:"0.25rem",display:"flex",alignItems:"center"},children:i.jsx(Am,{size:24})}),i.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:i.jsx($u,{size:40,color:"white"})}),i.jsx("h2",{style:{margin:"0 0 0.5rem 0",color:O.text,fontSize:"1.5rem",fontWeight:"700",textAlign:"center"},children:n?"Welcome Back":"Create Account"}),i.jsx("p",{style:{margin:"0 0 2rem 0",color:O.subtext,fontSize:"0.875rem",textAlign:"center"},children:n?"Sign in to manage your jobs":"Sign up to get started"}),b&&i.jsxs("div",{style:{padding:"0.75rem",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"0.5rem",color:"#dc2626",fontSize:"0.875rem",marginBottom:"1rem",display:"flex",alignItems:"flex-start",gap:"0.5rem"},children:[i.jsx(Rl,{size:18,style:{flexShrink:0,marginTop:"0.125rem"}}),i.jsx("span",{children:b})]}),i.jsxs("form",{onSubmit:n?N:w,children:[i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:O.text,fontSize:"0.875rem",fontWeight:"500"},children:"Email"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(Cm,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:O.subtext}}),i.jsx("input",{type:"email",value:d,onChange:re=>h(re.target.value),placeholder:"your@email.com",required:!0,disabled:T,style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.5rem",border:`1px solid ${O.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:O.inputBg,color:O.text,boxSizing:"border-box"}})]})]}),i.jsxs("div",{style:{marginBottom:n?"0.5rem":"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:O.text,fontSize:"0.875rem",fontWeight:"500"},children:"Password"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(tf,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:O.subtext}}),i.jsx("input",{type:F?"text":"password",value:u,onChange:re=>g(re.target.value),placeholder:"••••••••",required:!0,disabled:T,style:{width:"100%",padding:"0.75rem 2.5rem 0.75rem 2.5rem",border:`1px solid ${O.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:O.inputBg,color:O.text,boxSizing:"border-box"}}),i.jsx("button",{type:"button",onClick:()=>B(!F),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:O.subtext,padding:"0.25rem",display:"flex",alignItems:"center"},children:F?i.jsx(_m,{size:18}):i.jsx(Tm,{size:18})})]})]}),n&&i.jsx("div",{style:{marginBottom:"1.5rem",textAlign:"right"},children:i.jsx("button",{type:"button",onClick:()=>l(!0),style:{background:"none",border:"none",color:"#2563eb",cursor:"pointer",fontSize:"0.8125rem",fontWeight:"500",textDecoration:"underline"},children:"Forgot Password?"})}),!n&&i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:O.text,fontSize:"0.875rem",fontWeight:"500"},children:"Confirm Password"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx(tf,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:O.subtext}}),i.jsx("input",{type:J?"text":"password",value:y,onChange:re=>_(re.target.value),placeholder:"••••••••",required:!0,disabled:T,style:{width:"100%",padding:"0.75rem 2.5rem 0.75rem 2.5rem",border:`1px solid ${y&&!V?"#ef4444":O.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:O.inputBg,color:O.text,boxSizing:"border-box"}}),i.jsx("button",{type:"button",onClick:()=>se(!J),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:O.subtext,padding:"0.25rem",display:"flex",alignItems:"center"},children:J?i.jsx(_m,{size:18}):i.jsx(Tm,{size:18})})]}),y&&!V&&i.jsx("p",{style:{margin:"0.5rem 0 0 0",color:"#ef4444",fontSize:"0.8125rem"},children:"Passwords do not match"})]}),!n&&i.jsxs("div",{style:{marginBottom:"1.5rem",padding:"0.75rem",background:t?"#1a1a1a":"#f9fafb",borderRadius:"0.5rem",border:`1px solid ${O.border}`},children:[i.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"0.75rem",fontWeight:"600",color:O.text},children:"Password Requirements:"}),[{key:"minLength",label:"At least 8 characters"},{key:"hasUpperCase",label:"One uppercase letter"},{key:"hasLowerCase",label:"One lowercase letter"},{key:"hasNumber",label:"One number"}].map(({key:re,label:Z})=>i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[i.jsx(y6,{size:14,style:{color:A[re]?"#10b981":O.subtext,flexShrink:0}}),i.jsx("span",{style:{fontSize:"0.8125rem",color:A[re]?O.text:O.subtext},children:Z})]},re))]}),i.jsx("button",{type:"submit",disabled:T||!n&&(!S||!V),style:{width:"100%",padding:"0.875rem",background:T||!n&&(!S||!V)?O.border:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",cursor:T||!n&&(!S||!V)?"not-allowed":"pointer",marginBottom:"1rem",opacity:T||!n&&(!S||!V)?.5:1},children:T?"Please wait...":n?"Sign In":"Create Account"}),i.jsxs("div",{style:{textAlign:"center",color:O.subtext,fontSize:"0.875rem"},children:[n?"Don't have an account? ":"Already have an account? ",i.jsx("button",{type:"button",onClick:()=>{o(!n),q()},disabled:T,style:{background:"none",border:"none",color:"#2563eb",cursor:T?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"600",textDecoration:"underline"},children:n?"Sign Up":"Sign In"})]})]})]})})},GL=({isDarkMode:r,onNavigateToEstimates:e})=>{var Xe;const[t,n]=ce.useState([]),[o,s]=ce.useState(!0),[l,d]=ce.useState(!1),[h,u]=ce.useState(null),[g,y]=ce.useState(null),[_,b]=ce.useState(null),[R,j]=ce.useState(!1),[z,T]=ce.useState([]),M=ce.useRef(null),[F,B]=ce.useState(null),[J,se]=ce.useState(""),[O,A]=ce.useState("all"),[S,V]=ce.useState(!1),[I,w]=ce.useState(!1),[N,W]=ce.useState({title:"",client:"",location:"",status:"scheduled",date:"",time:"",estimatedCost:"",duration:"",notes:""}),q={bg:r?"#000000":"#f9fafb",cardBg:r?"#1a1a1a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#999999":"#6b7280",border:r?"#2a2a2a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"},re={scheduled:{color:"#3b82f6",icon:r0,label:"Scheduled"},"in-progress":{color:"#f59e0b",icon:Rl,label:"In Progress"},completed:{color:"#10b981",icon:Br,label:"Completed"}};ce.useEffect(()=>{const ge=l0(Qn,le=>{le?(w(!0),Z()):(w(!1),s(!1))});return()=>ge()},[]),ce.useEffect(()=>{const ge=async()=>{try{const{getUserEstimates:le}=await wc(async()=>{const{getUserEstimates:dt}=await Promise.resolve().then(()=>cw);return{getUserEstimates:dt}},void 0),at=await le();T(at)}catch(le){console.error("Error loading estimates:",le)}};Qn.currentUser&&ge()},[]),ce.useEffect(()=>{const ge=le=>{M.current&&!M.current.contains(le.target)&&j(!1)};return document.addEventListener("mousedown",ge),()=>document.removeEventListener("mousedown",ge)},[]);const Z=async()=>{s(!0);try{const ge=await Gd();n(ge)}catch(ge){console.error("Error loading jobs:",ge),alert("Failed to load jobs. Please try again.")}finally{s(!1)}},te=()=>{W({title:"",client:"",location:"",status:"scheduled",date:"",time:"",estimatedCost:"",duration:"",notes:""}),d(!1),y(null),u(null),B(null)},ye=()=>{I?d(!l):V(!0)},we=async()=>{if(N.title&&N.client)try{const ge={name:N.title,title:N.title,client:N.client,location:N.location,status:N.status,date:N.date,time:N.time,estimatedCost:N.estimatedCost,duration:N.duration,notes:N.notes,estimateId:(F==null?void 0:F.id)||null};await a5(ge),te(),Z()}catch(ge){console.error("Error adding job:",ge),alert("Failed to add job. Please try again.")}},ie=async()=>{if(N.title&&N.client&&g)try{const{updateJob:ge}=await wc(async()=>{const{updateJob:at}=await Promise.resolve().then(()=>d1);return{updateJob:at}},void 0),le={name:N.title,title:N.title,client:N.client,location:N.location,status:N.status,date:N.date,time:N.time,estimatedCost:N.estimatedCost,duration:N.duration,notes:N.notes,estimateId:(F==null?void 0:F.id)||null};await ge(g.id,le),te(),Z()}catch(ge){console.error("Error updating job:",ge),alert("Failed to update job. Please try again.")}},$=async(ge,le)=>{try{const{updateJob:at}=await wc(async()=>{const{updateJob:lt}=await Promise.resolve().then(()=>d1);return{updateJob:lt}},void 0),dt=t.find(lt=>lt.id===ge);await at(ge,{...dt,status:le}),b(null),Z()}catch(at){console.error("Error updating status:",at),alert("Failed to update status. Please try again.")}},Y=ge=>{if(u(ge),y(ge),W({title:ge.title||ge.name,client:ge.client,location:ge.location||"",status:ge.status,date:ge.date||"",time:ge.time||"",estimatedCost:ge.estimatedCost||"",duration:ge.duration||"",notes:ge.notes||""}),ge.estimateId){const le=z.find(at=>at.id===ge.estimateId);le&&B(le)}else B(null)},ae=async(ge,le)=>{if(window.confirm(`Are you sure you want to delete "${le}"?`))try{await r4(ge),h&&h.id===ge&&te(),Z()}catch(at){console.error("Error deleting job:",at),alert("Failed to delete job. Please try again.")}},fe=ge=>{ge&&(W(le=>({...le,estimatedCost:ge.total.toString(),estimateId:ge.id})),B(ge)),j(!1)},me=async()=>{if(j(!1),l&&N.title&&N.client)try{const ge={name:N.title,title:N.title,client:N.client,location:N.location,status:N.status,date:N.date,time:N.time,estimatedCost:N.estimatedCost,duration:N.duration,notes:N.notes},at={jobId:await a5(ge),jobName:N.title,jobClient:N.client};e&&e(at),te(),Z()}catch(ge){console.error("Error creating job:",ge),alert("Failed to create job. Please try again.")}else if(h){const ge={jobId:h.id,jobName:h.title||h.name,jobClient:h.client};e&&e(ge)}else alert("Please fill in the job title and client name first.")},Se=ge=>{e&&e({viewEstimateId:ge})},ke=()=>{B(null),W(ge=>({...ge,estimatedCost:"",estimateId:null}))},Ae=async ge=>{if(j(ge),ge===!0)try{const{getUserEstimates:le}=await wc(async()=>{const{getUserEstimates:dt}=await Promise.resolve().then(()=>cw);return{getUserEstimates:dt}},void 0),at=await le();T(at)}catch(le){console.error("Error loading estimates:",le)}},Fe=t.filter(ge=>{if(J){const le=J.toLowerCase(),at=(ge.title||ge.name||"").toLowerCase(),dt=(ge.client||"").toLowerCase(),lt=(ge.location||"").toLowerCase(),$e=(ge.notes||"").toLowerCase();if(!(at.includes(le)||dt.includes(le)||lt.includes(le)||$e.includes(le)))return!1}return O==="all"?!0:ge.status===O}),He={all:t.length,scheduled:t.filter(ge=>ge.status==="scheduled").length,"in-progress":t.filter(ge=>ge.status==="in-progress").length,completed:t.filter(ge=>ge.status==="completed").length};if(o)return i.jsx("div",{style:{minHeight:"100vh",background:q.bg,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("div",{style:{color:q.subtext},children:"Loading jobs..."})});const Ze=async(ge,le)=>{try{const{updateJob:at}=await wc(async()=>{const{updateJob:$e}=await Promise.resolve().then(()=>d1);return{updateJob:$e}},void 0),dt=t.find($e=>$e.id===ge);let lt;if(le)lt={...dt,clockedIn:!0,currentSessionStart:new Date().toISOString()};else{const $e=new Date().toISOString(),nt=dt.currentSessionStart,tt=dt.workSessions||[];tt.push({startTime:nt,endTime:$e}),lt={...dt,clockedIn:!1,currentSessionStart:null,workSessions:tt}}n($e=>$e.map(nt=>nt.id===ge?lt:nt)),await at(ge,lt)}catch(at){console.error("Error updating clock status:",at),alert("Failed to update clock status. Please try again."),Z()}};return i.jsxs("div",{className:"jobs-container",children:[i.jsx(HL,{isOpen:S,onClose:()=>V(!1),isDarkMode:r}),i.jsxs("div",{style:{minHeight:"100vh",background:q.bg,paddingBottom:"5rem"},children:[i.jsx(qL,{viewingJob:h,formData:N,setFormData:W,linkedEstimate:F,estimates:z,showEstimateMenu:R,setShowEstimateMenu:Ae,onSelectEstimate:fe,onCreateNewEstimate:me,onViewEstimate:Se,onRemoveEstimate:ke,estimateMenuRef:M,onClose:te,onSave:ie,onDelete:ae,isDarkMode:r,colors:q}),i.jsxs("div",{style:{padding:"1rem 0.25rem"},children:[i.jsx(UL,{activeStatusTab:O,setActiveStatusTab:A,statusCounts:He,statusConfig:re,colors:q}),i.jsxs("div",{style:{marginBottom:"1rem",position:"relative"},children:[i.jsx("input",{type:"text",placeholder:"Search jobs...",value:J,onChange:ge=>se(ge.target.value),style:{width:"100%",padding:"0.75rem",paddingLeft:"2.5rem",paddingRight:J?"2.5rem":"0.75rem",border:`1px solid ${q.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:q.inputBg,color:q.text,boxSizing:"border-box"}}),i.jsx(Rw,{size:18,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:q.subtext,pointerEvents:"none"}}),J&&i.jsx("button",{onClick:()=>se(""),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:q.subtext,padding:"0.25rem",display:"flex",alignItems:"center"},children:i.jsx(Am,{size:18})})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0 0.25rem"},children:[i.jsx("h3",{style:{margin:0,color:q.text,fontSize:"1.125rem",fontWeight:"600"},children:O==="all"?"All Jobs":O==="scheduled"?"Scheduled Jobs":O==="in-progress"?"In Progress Jobs":"Completed Jobs"}),i.jsxs("span",{style:{fontSize:"0.875rem",color:q.subtext,background:q.cardBg,padding:"0.25rem 0.75rem",borderRadius:"1rem",border:`1px solid ${q.border}`},children:[Fe.length," ",Fe.length===1?"job":"jobs"]})]}),i.jsxs("div",{className:lw.addJobContainer,style:{background:q.cardBg,border:`1px solid ${q.border}`},children:[i.jsxs("button",{onClick:ye,className:lw.addJobButton,style:{color:q.text},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:[i.jsx(qs,{size:18}),"Add New Job"]}),i.jsx(Sm,{size:18,style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),l&&i.jsx("div",{style:{padding:"0 1rem 1rem 1rem",borderTop:`1px solid ${q.border}`},children:i.jsxs("div",{style:{paddingTop:"1rem"},children:[i.jsx(o4,{formData:N,setFormData:W,linkedEstimate:F,estimates:z,showEstimateMenu:R,setShowEstimateMenu:Ae,onSelectEstimate:fe,onCreateNewEstimate:me,onViewEstimate:Se,onRemoveEstimate:ke,estimateMenuRef:M,isDarkMode:r,colors:q}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:we,disabled:!N.title||!N.client,style:{flex:1,padding:"0.75rem",background:!N.title||!N.client?q.border:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:!N.title||!N.client?"not-allowed":"pointer",opacity:!N.title||!N.client?.5:1},children:"Add Job"}),i.jsx("button",{onClick:te,style:{flex:1,padding:"0.75rem",background:"transparent",color:q.text,border:`1px solid ${q.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})})]}),Fe.length===0?i.jsxs("div",{style:{background:q.cardBg,border:`1px solid ${q.border}`,borderRadius:"0.75rem",textAlign:"center",padding:"3rem 1rem",color:q.subtext},children:[i.jsx(Dd,{size:48,style:{margin:"0 auto 1rem",opacity:.5}}),i.jsx("p",{style:{margin:0,fontSize:"0.9375rem"},children:J?"No jobs match your search.":O==="all"?"No jobs yet. Add your first job above!":`No ${(Xe=re[O])==null?void 0:Xe.label.toLowerCase()} jobs.`})]}):[...Fe].sort((ge,le)=>!ge.date&&!le.date?0:ge.date?le.date?new Date(le.date)-new Date(ge.date):-1:1).map(ge=>i.jsx(WL,{job:ge,statusConfig:re,statusDropdownOpen:_,setStatusDropdownOpen:b,onUpdateStatus:$,onViewJob:Y,onViewEstimate:le=>{le.estimateId&&e&&e({viewEstimateId:le.estimateId})},onViewInvoice:le=>{le.invoiceId&&console.log("View invoice:",le.invoiceId)},onClockInOut:Ze,isDarkMode:r,colors:q},ge.id))]})]})]})},s4=async()=>{try{const r=Qn.currentUser;if(!r)throw new Error("No user logged in");const e=Qf(No,"estimates"),t=GT(e,UN("userId","==",r.uid)),n=await XT(t),o=[];return n.forEach(s=>{var l;o.push({id:s.id,...s.data(),createdAt:((l=s.data().createdAt)==null?void 0:l.toDate())||new Date})}),o}catch(r){throw console.error("Error getting estimates:",r),r}},a4=async r=>{try{const e=Qn.currentUser;if(!e)throw new Error("No user logged in");const t=Qf(No,"estimates");return(await yx(t,{...r,userId:e.uid,createdAt:Vl(),updatedAt:Vl()})).id}catch(e){throw console.error("Error creating estimate:",e),e}},l4=async(r,e)=>{try{if(!Qn.currentUser)throw new Error("No user logged in");const n=ya(No,"estimates",r);await ZT(n,{...e,updatedAt:Vl()})}catch(t){throw console.error("Error updating estimate:",t),t}},c4=async r=>{try{if(!Qn.currentUser)throw new Error("No user logged in");const t=ya(No,"estimates",r);await e4(t)}catch(e){throw console.error("Error deleting estimate:",e),e}},cw=Object.freeze(Object.defineProperty({__proto__:null,createEstimate:a4,deleteEstimate:c4,getUserEstimates:s4,updateEstimate:l4},Symbol.toStringTag,{value:"Module"})),KL=({isDarkMode:r,jobs:e=[],onApplyToJob:t,pendingEstimateData:n,onClearPendingData:o,navigationData:s})=>{const[l,d]=ce.useState([]),[h,u]=ce.useState(!0),[g,y]=ce.useState(!1),[_,b]=ce.useState(null),[R,j]=ce.useState(null),[z,T]=ce.useState({name:"",laborHours:"",laborRate:"",materials:[],jobId:null}),[M,F]=ce.useState({name:"",cost:""}),B={bg:r?"#000000":"#f9fafb",cardBg:r?"#1a1a1a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#999999":"#6b7280",border:r?"#2a2a2a":"#e5e7eb",inputBg:r?"#000000":"#ffffff"};ce.useEffect(()=>{const q=l0(Qn,re=>{re?J():u(!1)});return()=>q()},[]),ce.useEffect(()=>{n&&(T({name:n.jobName||"",laborHours:"",laborRate:"",materials:[],jobId:n.jobId||null}),y(!0),o&&o())},[n,o]),ce.useEffect(()=>{if(s!=null&&s.viewEstimateId){const q=l.find(re=>re.id===s.viewEstimateId);q&&w(q)}},[s,l]);const J=async()=>{u(!0);try{const q=await s4();d(q)}catch(q){console.error("Error loading estimates:",q),alert("Failed to load estimates. Please try again.")}finally{u(!1)}},se=(q,re,Z)=>{const te=(parseFloat(q)||0)*(parseFloat(re)||0),ye=Z.reduce((we,ie)=>we+(parseFloat(ie.cost)||0),0);return te+ye},O=se(z.laborHours,z.laborRate,z.materials),A=()=>{M.name&&M.cost&&(T(q=>({...q,materials:[...q.materials,{...M}]})),F({name:"",cost:""}))},S=q=>{T(re=>({...re,materials:re.materials.filter((Z,te)=>te!==q)}))},V=async()=>{if(z.name)try{const q=se(z.laborHours,z.laborRate,z.materials),re={name:z.name,laborHours:parseFloat(z.laborHours)||0,laborRate:parseFloat(z.laborRate)||0,materials:z.materials,total:q,jobId:z.jobId||null};_?await l4(_.id,re):await a4(re),I(),J()}catch(q){console.error("Error saving estimate:",q),alert("Failed to save estimate. Please try again.")}},I=()=>{T({name:"",laborHours:"",laborRate:"",materials:[],jobId:null}),F({name:"",cost:""}),y(!1),b(null)},w=q=>{b(q),T({name:q.name,laborHours:q.laborHours.toString(),laborRate:q.laborRate.toString(),materials:[...q.materials],jobId:q.jobId||null}),y(!0),window.scrollTo({top:0,behavior:"smooth"})},N=async(q,re)=>{if(window.confirm(`Delete "${re}"?`))try{await c4(q),J()}catch(Z){console.error("Error deleting estimate:",Z),alert("Failed to delete estimate. Please try again.")}},W=(q,re)=>{t&&t(q,re),j(null)};return h?i.jsx("div",{style:{minHeight:"100vh",background:B.bg,display:"flex",alignItems:"center",justifyContent:"center",paddingBottom:"5rem"},children:i.jsx("div",{style:{color:B.subtext},children:"Loading estimates..."})}):i.jsx("div",{style:{background:B.bg,minHeight:"100vh",paddingBottom:"5rem"},children:i.jsxs("div",{style:{padding:"1rem"},children:[i.jsxs("div",{style:{background:B.cardBg,borderRadius:"0.75rem",border:`1px solid ${B.border}`,boxShadow:"none",marginBottom:"1rem",overflow:"hidden"},children:[i.jsxs("button",{onClick:()=>y(!g),style:{width:"100%",padding:"1rem",background:"transparent",border:"none",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",color:B.text},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:[i.jsx(qs,{size:20}),_?"Edit Estimate":"New Estimate"]}),i.jsx(Sm,{size:20,style:{transform:g?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),g&&i.jsx("div",{style:{padding:"0 1rem 1rem 1rem",borderTop:`1px solid ${B.border}`},children:i.jsxs("div",{style:{paddingTop:"1rem"},children:[i.jsx("input",{type:"text",placeholder:"Estimate Name *",value:z.name,onChange:q=>T(re=>({...re,name:q.target.value})),style:{width:"100%",padding:"0.75rem",marginBottom:"0.75rem",border:`1px solid ${B.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:B.inputBg,color:B.text,boxSizing:"border-box"}}),i.jsx("h4",{style:{margin:"0 0 0.5rem 0",fontSize:"0.875rem",fontWeight:"600",color:B.text},children:"Labor"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[i.jsx("input",{type:"number",placeholder:"Hours",value:z.laborHours,onChange:q=>T(re=>({...re,laborHours:q.target.value})),style:{padding:"0.75rem",border:`1px solid ${B.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:B.inputBg,color:B.text,boxSizing:"border-box"}}),i.jsx("input",{type:"number",placeholder:"Rate ($/hr)",value:z.laborRate,onChange:q=>T(re=>({...re,laborRate:q.target.value})),style:{padding:"0.75rem",border:`1px solid ${B.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",background:B.inputBg,color:B.text,boxSizing:"border-box"}})]}),i.jsx("h4",{style:{margin:"1rem 0 0.5rem 0",fontSize:"0.875rem",fontWeight:"600",color:B.text},children:"Materials"}),z.materials.map((q,re)=>i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem",padding:"0.75rem",background:B.bg,borderRadius:"0.5rem"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:B.text},children:q.name}),i.jsxs("div",{style:{fontSize:"0.75rem",color:B.subtext},children:["$",parseFloat(q.cost).toFixed(2)]})]}),i.jsx("button",{onClick:()=>S(re),style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",padding:"0.25rem"},children:i.jsx(Nl,{size:16})})]},re)),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[i.jsx("input",{type:"text",placeholder:"Material name",value:M.name,onChange:q=>F(re=>({...re,name:q.target.value})),style:{flex:1,padding:"0.75rem",border:`1px solid ${B.border}`,borderRadius:"0.5rem",fontSize:"0.875rem",background:B.inputBg,color:B.text,boxSizing:"border-box"}}),i.jsx("input",{type:"number",placeholder:"Cost",value:M.cost,onChange:q=>F(re=>({...re,cost:q.target.value})),style:{width:"100px",padding:"0.75rem",border:`1px solid ${B.border}`,borderRadius:"0.5rem",fontSize:"0.875rem",background:B.inputBg,color:B.text,boxSizing:"border-box"}}),i.jsx("button",{onClick:A,style:{padding:"0.75rem",background:"#2563eb",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center"},children:i.jsx(qs,{size:16})})]}),i.jsx("div",{style:{padding:"0.75rem",background:B.bg,borderRadius:"0.5rem",marginBottom:"0.75rem"},children:i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.125rem",fontWeight:"600",color:B.text},children:[i.jsx("span",{children:"Total:"}),i.jsxs("span",{children:["$",O.toFixed(2)]})]})}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsxs("button",{onClick:V,disabled:!z.name,style:{flex:1,padding:"0.75rem",background:z.name?"#2563eb":B.border,color:"white",border:"none",borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:z.name?"pointer":"not-allowed",opacity:z.name?1:.5},children:[_?"Update":"Save"," Estimate"]}),i.jsx("button",{onClick:I,style:{flex:1,padding:"0.75rem",background:"transparent",color:B.text,border:`1px solid ${B.border}`,borderRadius:"0.5rem",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",padding:"0 0.25rem"},children:[i.jsx("h3",{style:{margin:0,color:B.text,fontSize:"1.125rem",fontWeight:"600"},children:"Saved Estimates"}),i.jsx("span",{style:{fontSize:"0.875rem",color:B.subtext,background:B.cardBg,padding:"0.25rem 0.75rem",borderRadius:"1rem",border:`1px solid ${B.border}`},children:l.length})]}),l.length===0?i.jsxs("div",{style:{background:B.cardBg,border:`1px solid ${B.border}`,borderRadius:"0.75rem",textAlign:"center",padding:"3rem 1rem",color:B.subtext},children:[i.jsx(Lf,{size:48,style:{margin:"0 auto 1rem",opacity:.5}}),i.jsx("p",{style:{margin:0,fontSize:"0.9375rem"},children:"No estimates yet. Create one above!"})]}):l.map(q=>{var re;return i.jsxs("div",{style:{background:B.cardBg,border:`1px solid ${B.border}`,borderRadius:"0.75rem",padding:"1rem",marginBottom:"0.75rem",boxShadow:"none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[i.jsxs("div",{children:[i.jsx("h3",{style:{margin:"0 0 0.25rem 0",color:B.text,fontSize:"1rem",fontWeight:"600"},children:q.name}),i.jsx("p",{style:{margin:0,color:B.subtext,fontSize:"0.75rem"},children:((re=q.createdAt)==null?void 0:re.toLocaleDateString())||"N/A"})]}),i.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"#10b981"},children:["$",q.total.toFixed(2)]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",color:B.subtext,fontSize:"0.875rem"},children:[i.jsx(r0,{size:16}),i.jsxs("span",{children:[q.laborHours,"h × $",q.laborRate,"/hr = $",(q.laborHours*q.laborRate).toFixed(2)]})]}),q.materials.length>0&&i.jsx("div",{style:{padding:"0.75rem",background:B.bg,borderRadius:"0.5rem",marginBottom:"0.75rem"},children:q.materials.map((Z,te)=>i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem",color:B.subtext,marginBottom:te<q.materials.length-1?"0.25rem":0},children:[i.jsx("span",{children:Z.name}),i.jsxs("span",{children:["$",parseFloat(Z.cost).toFixed(2)]})]},te))}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsxs("div",{style:{position:"relative",flex:1},children:[i.jsxs("button",{onClick:()=>j(R===q.id?null:q.id),style:{width:"100%",padding:"0.5rem",background:"#2563eb",border:"none",borderRadius:"0.5rem",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",fontSize:"0.875rem",fontWeight:"500"},children:[i.jsx(h5,{size:16}),"Add to Job",i.jsx(Sm,{size:14})]}),R===q.id&&i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:()=>j(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998}}),i.jsxs("div",{style:{position:"absolute",bottom:"100%",left:0,right:0,marginBottom:"0.5rem",background:B.cardBg,border:`1px solid ${B.border}`,borderRadius:"0.5rem",boxShadow:r?"0 4px 12px rgba(0,0,0,0.6)":"0 4px 12px rgba(0,0,0,0.15)",maxHeight:"200px",overflowY:"auto",zIndex:9999},children:[i.jsx("button",{onClick:()=>W(q,"new"),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${B.border}`,color:"#2563eb",cursor:"pointer",textAlign:"left",fontSize:"0.875rem",fontWeight:"500"},children:"+ Create New Job"}),e.map(Z=>i.jsx("button",{onClick:()=>W(q,Z.id),style:{width:"100%",padding:"0.75rem",background:"transparent",border:"none",borderBottom:`1px solid ${B.border}`,color:B.text,cursor:"pointer",textAlign:"left",fontSize:"0.875rem"},children:Z.title||Z.name},Z.id))]})]})]}),i.jsx("button",{onClick:()=>w(q),style:{padding:"0.5rem",background:"transparent",border:`1px solid ${B.border}`,borderRadius:"0.5rem",color:B.text,cursor:"pointer",display:"flex",alignItems:"center"},children:i.jsx(Bw,{size:16})}),i.jsx("button",{onClick:()=>N(q.id,q.name),style:{padding:"0.5rem",background:"transparent",border:"1px solid #ef4444",borderRadius:"0.5rem",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center"},children:i.jsx(Nl,{size:16})})]})]},q.id)})]})})};function JL({isDarkMode:r=!1}){const[e,t]=ce.useState([{id:1,invoiceNumber:"INV-001",client:"ABC Construction",date:"2025-10-01",amount:2500,status:"Paid"},{id:2,invoiceNumber:"INV-002",client:"Smith Residence",date:"2025-10-10",amount:1200,status:"Pending"},{id:3,invoiceNumber:"INV-003",client:"Downtown Office Building",date:"2025-10-12",amount:4800,status:"Overdue"}]),n={bg:r?"#000000":"#f9fafb",cardBg:r?"#111111":"#ffffff",border:r?"#1a1a1a":"#e5e7eb",text:r?"#ffffff":"#111827",textSecondary:r?"#9ca3af":"#6b7280",buttonBg:"#3b82f6",buttonText:"#ffffff",paidBg:r?"#064e3b":"#d1fae5",paidText:r?"#6ee7b7":"#065f46",pendingBg:r?"#78350f":"#fef3c7",pendingText:r?"#fcd34d":"#92400e",overdueBg:r?"#7f1d1d":"#fee2e2",overdueText:r?"#fca5a5":"#991b1b"},o=s=>{switch(s){case"Paid":return{background:n.paidBg,color:n.paidText};case"Pending":return{background:n.pendingBg,color:n.pendingText};case"Overdue":return{background:n.overdueBg,color:n.overdueText};default:return{}}};return i.jsx("div",{style:{minHeight:"100vh",background:n.bg,paddingTop:"1rem"},children:i.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[i.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary,marginBottom:"0.25rem"},children:"Total"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:n.text},children:e.length})]}),i.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary,marginBottom:"0.25rem"},children:"Paid"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:n.paidText},children:e.filter(s=>s.status==="Paid").length})]}),i.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary,marginBottom:"0.25rem"},children:"Pending"}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"600",color:n.pendingText},children:e.filter(s=>s.status==="Pending").length})]})]}),i.jsxs("button",{style:{width:"100%",background:n.buttonBg,color:n.buttonText,border:"none",borderRadius:"0.5rem",padding:"0.875rem",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1.5rem"},children:[i.jsx(qs,{size:20}),i.jsx("span",{children:"Create New Invoice"})]}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.length===0?i.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"3rem 1rem",textAlign:"center"},children:[i.jsx(Lf,{size:48,color:n.textSecondary,style:{margin:"0 auto 1rem"}}),i.jsx("p",{style:{color:n.textSecondary,fontSize:"0.875rem",margin:0},children:"No invoices yet. Create your first invoice!"})]}):e.map(s=>i.jsxs("div",{style:{background:n.cardBg,border:`1px solid ${n.border}`,borderRadius:"0.5rem",padding:"1rem",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:l=>{l.currentTarget.style.transform="translateY(-2px)",l.currentTarget.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"},onMouseLeave:l=>{l.currentTarget.style.transform="translateY(0)",l.currentTarget.style.boxShadow="none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:n.text,marginBottom:"0.25rem"},children:s.invoiceNumber}),i.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary},children:s.client})]}),i.jsx("div",{style:{...o(s.status),padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.75rem",fontWeight:"600"},children:s.status})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"0.75rem",borderTop:`1px solid ${n.border}`},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:n.textSecondary},children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),i.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"600",color:n.text},children:["$",s.amount.toFixed(2)]})]})]},s.id))})]})})}const YL=({isDarkMode:r,onNavigate:e})=>{const[t,n]=ce.useState("verifying"),[o,s]=ce.useState(""),l={bg:r?"#000000":"#f9fafb",cardBg:r?"#0a0a0a":"#ffffff",text:r?"#ffffff":"#111827",subtext:r?"#666666":"#6b7280",border:r?"#1a1a1a":"#e5e7eb"};return ce.useEffect(()=>{(async()=>{const u=new URLSearchParams(window.location.search).get("token");if(!u){n("error"),s("Invalid verification link. No token provided.");return}try{const g=await LL(u);g.success?(n("success"),s("Your email has been verified successfully!"),window.auth&&window.auth.currentUser&&await window.auth.currentUser.reload(),setTimeout(()=>{e("profile"),window.history.replaceState({},"",window.location.pathname),window.location.reload()},3e3)):(n("error"),s(g.error||"Verification failed"))}catch{n("error"),s("An error occurred during verification. Please try again.")}})()},[e]),i.jsxs("div",{style:{background:l.bg,minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:[i.jsxs("div",{style:{background:l.cardBg,borderRadius:"0.75rem",border:`1px solid ${l.border}`,padding:"3rem 2rem",maxWidth:"500px",width:"100%",textAlign:"center"},children:[i.jsxs("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:t==="verifying"?"#3b82f6":t==="success"?"#10b981":"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 2rem"},children:[t==="verifying"&&i.jsx(q6,{size:40,color:"white",style:{animation:"spin 1s linear infinite"}}),t==="success"&&i.jsx(Br,{size:40,color:"white"}),t==="error"&&i.jsx(I6,{size:40,color:"white"})]}),i.jsxs("h2",{style:{margin:"0 0 1rem 0",color:l.text,fontSize:"1.75rem",fontWeight:"700"},children:[t==="verifying"&&"Verifying Your Email...",t==="success"&&"Email Verified!",t==="error"&&"Verification Failed"]}),i.jsxs("p",{style:{margin:"0 0 2rem 0",color:l.subtext,fontSize:"1rem",lineHeight:"1.6"},children:[t==="verifying"&&"Please wait while we verify your email address.",t==="success"&&o,t==="error"&&o]}),t==="success"&&i.jsx("div",{style:{padding:"1rem",background:"#dcfce7",border:"1px solid #86efac",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:i.jsx("p",{style:{margin:0,color:"#16a34a",fontSize:"0.875rem"},children:"Redirecting you to your profile in 3 seconds..."})}),t==="success"&&i.jsx("button",{onClick:()=>e("profile"),style:{width:"100%",padding:"0.875rem",background:"#10b981",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Go to Profile"}),t==="error"&&i.jsx("button",{onClick:()=>e("profile"),style:{width:"100%",padding:"0.875rem",background:"#3b82f6",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:"Go to Profile"})]}),i.jsx("style",{children:`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})};function QL({headerInfo:r,isDarkMode:e,headerVisible:t,showMenu:n,setShowMenu:o,onNavigate:s,setIsDarkMode:l}){const d=r.icon,h={headerBorder:e?"#2a2a2a":"#e5e7eb",menuBg:e?"#1a1a1a":"white",cardBorder:e?"#2a2a2a":"#e5e7eb",cardText:e?"#ffffff":"#111827"};return i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,height:"env(safe-area-inset-top)",background:e?"#1a1a1a":"#2563eb",zIndex:101}}),i.jsxs("div",{style:{background:e?"#1a1a1a":"#2563eb",padding:"0.5rem 1rem",borderBottom:`1px solid ${h.headerBorder}`,position:"fixed",top:"env(safe-area-inset-top)",left:0,right:0,zIndex:100,display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:"48px",transform:t?"translateY(0)":"translateY(calc(-100% - env(safe-area-inset-top)))",transition:"transform 0.3s ease-in-out",paddingLeft:"max(1rem, env(safe-area-inset-left))",paddingRight:"max(1rem, env(safe-area-inset-right))"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(d,{size:20,color:"white",strokeWidth:2}),i.jsx("h1",{style:{fontSize:"1rem",fontWeight:"600",color:"white",margin:0,letterSpacing:"-0.01em"},children:r.title})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:()=>o(!n),style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"40px",minHeight:"40px",lineHeight:1},children:i.jsx(Q6,{size:24,color:"white",style:{display:"block",flexShrink:0}})}),n&&i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:()=>o(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:998}}),i.jsx("div",{style:{position:"absolute",top:"2.5rem",right:0,zIndex:999,background:h.menuBg,border:`1px solid ${h.cardBorder}`,borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",minWidth:"200px",overflow:"hidden"},children:i.jsxs("div",{style:{padding:"0.5rem 0"},children:[i.jsxs("button",{onClick:()=>{s("profile"),o(!1)},style:{width:"100%",padding:"0.75rem 1rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",color:h.cardText,fontSize:"0.875rem",fontWeight:"500"},onMouseEnter:u=>u.target.style.background=e?"#374151":"#f3f4f6",onMouseLeave:u=>u.target.style.background="transparent",children:[i.jsx($u,{size:16}),i.jsx("span",{children:"Profile"})]}),i.jsx("div",{style:{height:"1px",background:h.cardBorder,margin:"0.5rem 0"}}),i.jsxs("button",{onClick:()=>{l(!e),o(!1)},style:{width:"100%",padding:"0.75rem 1rem",background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",color:h.cardText,fontSize:"0.875rem",fontWeight:"500"},onMouseEnter:u=>u.target.style.background=e?"#374151":"#f3f4f6",onMouseLeave:u=>u.target.style.background="transparent",children:[i.jsx("span",{children:e?"Light Mode":"Dark Mode"}),i.jsx("span",{children:e?"☀️":"🌙"})]})]})})]})]})]})]})}function XL(){const[r,e]=ce.useState(()=>new URLSearchParams(window.location.search).get("token")?"verify-email":localStorage.getItem("activeView")||null),[t,n]=ce.useState(()=>localStorage.getItem("isDarkMode")==="true"),[o,s]=ce.useState(!1),[l,d]=ce.useState(!1),[h,u]=ce.useState(null),[g,y]=ce.useState(null),[_,b]=ce.useState(!0),[R,j]=ce.useState(0);ce.useEffect(()=>{const S=V=>{V.state&&V.state.view!==void 0&&e(V.state.view)};return window.addEventListener("popstate",S),window.history.state||window.history.replaceState({view:r},""),()=>{window.removeEventListener("popstate",S)}},[]),ce.useEffect(()=>{window.history.state&&window.history.state.view!==r&&window.history.pushState({view:r},"")},[r]),ce.useEffect(()=>{r===null?localStorage.setItem("activeView",""):r!=="verify-email"&&localStorage.setItem("activeView",r)},[r]),ce.useEffect(()=>{localStorage.setItem("isDarkMode",t)},[t]),ce.useEffect(()=>{const S=t?"#000000":"#f5f5f5",V=document.querySelector('meta[name="theme-color"]');V&&V.setAttribute("content",S),document.body.style.backgroundColor=S,document.documentElement.style.backgroundColor=S},[t]),ce.useEffect(()=>{const S=()=>{const I=document.querySelector('meta[name="theme-color"]');I&&I.setAttribute("content",t?"#1a1a1a":"#2563eb")};S();const V=()=>{document.visibilityState==="visible"&&S()};return document.addEventListener("visibilitychange",V),()=>{document.removeEventListener("visibilitychange",V)}},[t]),ce.useEffect(()=>{window.scrollTo(0,0)},[r]);const z=ce.useRef(null);ce.useEffect(()=>{const S=()=>{const V=window.scrollY;V<10?b(!0):V>R&&V>80?b(!1):V<R&&b(!0),j(V)};return window.addEventListener("scroll",S,{passive:!0}),()=>window.removeEventListener("scroll",S)},[R]),ce.useEffect(()=>{r!=="estimates"&&y(null)},[r]);const T=(S,V=null)=>{S==="home"?e(null):S==="calculators"?e("calculators"):S==="profile"?e("profile"):S==="jobs"?e("jobs"):S==="estimates"?(e("estimates"),V&&y(V)):S==="invoices"&&e("invoices")},M=()=>{e("calculators")},F=()=>{d(!0),setTimeout(()=>d(!1),3e3)},B=S=>{u(S),e("jobs")},J=()=>{switch(r){case"voltage-drop":return i.jsx(tB,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"ohms-law":return i.jsx(oB,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"box-fill":return i.jsx(dB,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"conduit-fill":return i.jsx(TB,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"ampacity":return i.jsx(VB,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"motor-calculations":return i.jsx(WB,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"load-calculations":return i.jsx(UB,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"transformer-sizing":return i.jsx(HB,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"service-entrance":return i.jsx(GB,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"grounding-bonding":return i.jsx(QB,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"conduit-bending":return i.jsx(rL,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"lighting":return i.jsx(sL,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"receptacles":return i.jsx(dL,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"vfd-sizing":return i.jsx(hL,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"reactance-impedance":return i.jsx(fL,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"power-factor":return i.jsx(pL,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"power-triangle":return i.jsx(mL,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"three-phase-power":return i.jsx(gL,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"pull-box":return i.jsx(gB,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"underground-depth":return i.jsx(wL,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"overhead-clearance":return i.jsx(CL,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"working-space":return i.jsx(RL,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"neutral-sizing":return i.jsx(PL,{ref:z,isDarkMode:t,onBack:M,onExportSuccess:F});case"calculators":return i.jsx(EC,{isDarkMode:t,onSelectCalculator:e});case"profile":return i.jsx(FL,{isDarkMode:t});case"jobs":return i.jsx(GL,{isDarkMode:t,onNavigateToEstimates:S=>T("estimates",S)});case"estimates":return i.jsx(KL,{isDarkMode:t,onApplyToJob:B,pendingEstimateData:h,onClearPendingData:()=>u(null),navigationData:g});case"invoices":return i.jsx(JL,{isDarkMode:t});case"verify-email":return i.jsx(YL,{isDarkMode:t,onNavigate:T});default:return i.jsx(NL,{isDarkMode:t})}},O=r?r==="calculators"?{title:"Calculator Menu",icon:mf}:r==="profile"?{title:"Profile",icon:$u}:r==="jobs"?{title:"Job Log",icon:Dd}:r==="estimates"?{title:"Estimates",icon:Lf}:r==="invoices"?{title:"Invoices",icon:f5}:r==="verify-email"?{title:"Verify Email",icon:$u}:{"voltage-drop":{title:"Voltage Drop",icon:zw},"ohms-law":{title:"Ohm's Law",icon:Nw},"reactance-impedance":{title:"Reactance & Impedance",icon:Aw},"power-factor":{title:"Power Factor Correction",icon:Fw},"box-fill":{title:"Box Fill",icon:kw},"conduit-fill":{title:"Conduit Fill",icon:yw},ampacity:{title:"Ampacity",icon:gw},"motor-calculations":{title:"Motors",icon:Pw},"load-calculations":{title:"Load Calculations",icon:xw},"transformer-sizing":{title:"Transformers",icon:Iw},"service-entrance":{title:"Service Entrance Sizing",icon:mw},"grounding-bonding":{title:"Grounding & Bonding",icon:ww},"conduit-bending":{title:"Conduit Bending",icon:bw},lighting:{title:"Lighting",icon:_w},receptacles:{title:"Receptacles",icon:jw},"vfd-sizing":{title:"VFD Sizing",icon:vw},"power-triangle":{title:"Power Triangle",icon:Vw},"three-phase-power":{title:"Three-Phase Power",icon:Lw},"pull-box":{title:"Pull Box Sizing",icon:pw},"underground-depth":{title:"Underground Depth",icon:hw},"overhead-clearance":{title:"Overhead Clearance",icon:fw},"working-space":{title:"Working Space",icon:Ew},"neutral-sizing":{title:"Neutral Sizing",icon:Cw}}[r]||{title:"Electrician's Toolkit",icon:mf}:{title:"Home",icon:Sw},A=r!=="verify-email";return i.jsxs("div",{className:"App",style:{background:t?"#000000":"#ffffff",overscrollBehavior:"none"},children:[i.jsx(QL,{headerInfo:O,isDarkMode:t,headerVisible:_,showMenu:o,setShowMenu:s,onNavigate:T,setIsDarkMode:n}),i.jsx("div",{style:{paddingBottom:A?"calc(65px + env(safe-area-inset-bottom))":"0",paddingTop:"calc(48px + env(safe-area-inset-top))",paddingLeft:r==="calculators"?"0":"env(safe-area-inset-left)",paddingRight:r==="calculators"?"0":"env(safe-area-inset-right)",position:"relative",minHeight:"100vh",boxSizing:"border-box"},children:r?i.jsx("div",{style:{minHeight:"calc(100vh - 3.5rem)",padding:r==="calculators"||r==="jobs"||r==="profile"||r==="estimates"||r==="invoices"||r==="verify-email"?"0":"1rem",paddingBottom:A?"5rem":"0"},children:J()}):J()}),l&&i.jsxs("div",{style:{position:"fixed",bottom:"6rem",left:"50%",transform:"translateX(-50%)",background:"#10b981",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500",animation:"slideUp 0.3s ease-out",maxWidth:"90%",textAlign:"center"},children:[i.jsx("span",{style:{fontSize:"1.25rem"},children:"✓"}),i.jsx("span",{children:"PDF saved to Downloads"})]}),A&&i.jsx(uL,{onNavigate:T,currentView:r==="jobs"?"jobs":r==="estimates"?"estimates":r==="invoices"?"invoices":r==="profile"?"profile":r==="calculators"||r?"calculators":"home",isDarkMode:t})]})}const ZL=e6.createRoot(document.getElementById("root"));ZL.render(i.jsx(G4.StrictMode,{children:i.jsx(XL,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{if(window.location.hostname==="localhost"){console.log("Skipping service worker on localhost");return}navigator.serviceWorker.register("/electrician-toolkit/service-worker.js").then(r=>{console.log("ServiceWorker registration successful:",r.scope)}).catch(r=>{console.log("ServiceWorker registration failed:",r)})});export{Kr as _,tF as c,dw as g};
